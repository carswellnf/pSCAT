var p={},s=/; *([!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) *= *("(?:[ !\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u0020-\u007e])*"|[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+) */g,w=/^[\u0020-\u007e\u0080-\u00ff]+$/,y=/^[!#$%&'\*\+\-\.0-9A-Z\^_`a-z\|~]+$/,h=/\\([\u0000-\u007f])/g,l=/([\\"])/g,v=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,d=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,g=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/,c=p.format=b,m=p.parse=$;function b(r){if(!r||typeof r!="object")throw new TypeError("argument obj is required");var e=r.parameters,f=r.subtype,t=r.suffix,a=r.type;if(!a||!d.test(a))throw new TypeError("invalid type");if(!f||!v.test(f))throw new TypeError("invalid subtype");var n=a+"/"+f;if(t){if(!d.test(t))throw new TypeError("invalid suffix");n+="+"+t}if(e&&typeof e=="object")for(var i,o=Object.keys(e).sort(),u=0;u<o.length;u++){if(i=o[u],!y.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+E(e[i])}return n}function $(r){if(!r)throw new TypeError("argument string is required");if(typeof r=="object"&&(r=T(r)),typeof r!="string")throw new TypeError("argument string is required to be a string");var e=r.indexOf(";"),f=e!==-1?r.substr(0,e):r,t,a,n=x(f),i={},o;for(s.lastIndex=e;a=s.exec(r);){if(a.index!==e)throw new TypeError("invalid parameter format");e+=a[0].length,t=a[1].toLowerCase(),o=a[2],o[0]==='"'&&(o=o.substr(1,o.length-2).replace(h,"$1")),i[t]=o}if(e!==-1&&e!==r.length)throw new TypeError("invalid parameter format");return n.parameters=i,n}function T(r){if(typeof r.getHeader=="function")return r.getHeader("content-type");if(typeof r.headers=="object")return r.headers&&r.headers["content-type"]}function E(r){var e=String(r);if(y.test(e))return e;if(e.length>0&&!w.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(l,"\\$1")+'"'}function x(r){var e=g.exec(r.toLowerCase());if(!e)throw new TypeError("invalid media type");var f=e[1],t=e[2],a,n=t.lastIndexOf("+");n!==-1&&(a=t.substr(n+1),t=t.substr(0,n));var i={type:f,subtype:t,suffix:a};return i}export{p as default,c as format,m as parse};
