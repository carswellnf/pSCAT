function z1(Zu){return Zu&&Zu.__esModule&&Object.prototype.hasOwnProperty.call(Zu,"default")?Zu.default:Zu}var Pp={exports:{}};(function(Zu,B1){(function(Th,xf){Zu.exports=xf()})(self,function(){return function(){var Th={79288:function(Q,U,t){var M=t(3400),E={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var i in E){var C=i.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");M.addStyleRule(C,E[i])}},86712:function(Q,U,t){Q.exports=t(84224)},37240:function(Q,U,t){Q.exports=t(51132)},29744:function(Q,U,t){Q.exports=t(94456)},29352:function(Q,U,t){Q.exports=t(67244)},96144:function(Q,U,t){Q.exports=t(97776)},53219:function(Q,U,t){Q.exports=t(61712)},4624:function(Q,U,t){Q.exports=t(95856)},54543:function(Q,U,t){Q.exports=t(54272)},45e3:function(Q,U,t){Q.exports=t(85404)},62300:function(Q,U,t){Q.exports=t(26048)},6920:function(Q,U,t){Q.exports=t(66240)},10264:function(Q,U,t){Q.exports=t(40448)},32016:function(Q,U,t){Q.exports=t(64884)},27528:function(Q,U,t){Q.exports=t(15088)},75556:function(Q,U,t){Q.exports=t(76744)},39204:function(Q,U,t){Q.exports=t(94704)},73996:function(Q,U,t){Q.exports=t(62396)},16489:function(Q,U,t){Q.exports=t(32028)},5e3:function(Q,U,t){Q.exports=t(81932)},77280:function(Q,U,t){Q.exports=t(45536)},33992:function(Q,U,t){Q.exports=t(42600)},17600:function(Q,U,t){Q.exports=t(21536)},49116:function(Q,U,t){Q.exports=t(65664)},46808:function(Q,U,t){Q.exports=t(29044)},36168:function(Q,U,t){Q.exports=t(48928)},13792:function(Q,U,t){var M=t(32016);M.register([t(37240),t(29352),t(5e3),t(33992),t(17600),t(49116),t(6920),t(67484),t(79440),t(39204),t(83096),t(36168),t(20260),t(63560),t(65832),t(46808),t(73996),t(48824),t(89904),t(25120),t(13752),t(4340),t(62300),t(29800),t(8363),t(54543),t(86636),t(42192),t(32140),t(77280),t(89296),t(56816),t(70192),t(45e3),t(27528),t(84764),t(3920),t(50248),t(4624),t(69967),t(10264),t(86152),t(53219),t(81604),t(63796),t(29744),t(89336),t(86712),t(75556),t(16489),t(97312),t(96144)]),Q.exports=M},3920:function(Q,U,t){Q.exports=t(43480)},25120:function(Q,U,t){Q.exports=t(6296)},4340:function(Q,U,t){Q.exports=t(7404)},86152:function(Q,U,t){Q.exports=t(65456)},56816:function(Q,U,t){Q.exports=t(22020)},89296:function(Q,U,t){Q.exports=t(29928)},20260:function(Q,U,t){Q.exports=t(75792)},32140:function(Q,U,t){Q.exports=t(156)},84764:function(Q,U,t){Q.exports=t(45499)},48824:function(Q,U,t){Q.exports=t(3296)},69967:function(Q,U,t){Q.exports=t(4184)},8363:function(Q,U,t){Q.exports=t(36952)},86636:function(Q,U,t){Q.exports=t(38983)},70192:function(Q,U,t){Q.exports=t(11572)},81604:function(Q,U,t){Q.exports=t(76924)},63796:function(Q,U,t){Q.exports=t(62944)},89336:function(Q,U,t){Q.exports=t(95443)},67484:function(Q,U,t){Q.exports=t(34864)},97312:function(Q,U,t){Q.exports=t(76272)},42192:function(Q,U,t){Q.exports=t(97924)},29800:function(Q,U,t){Q.exports=t(15436)},63560:function(Q,U,t){Q.exports=t(5621)},89904:function(Q,U,t){Q.exports=t(91304)},50248:function(Q,U,t){Q.exports=t(41724)},65832:function(Q,U,t){Q.exports=t(31991)},79440:function(Q,U,t){Q.exports=t(22869)},13752:function(Q,U,t){Q.exports=t(67776)},83096:function(Q,U,t){Q.exports=t(95952)},72196:function(Q){Q.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(Q,U,t){var M=t(72196),E=t(25376),i=t(33816),C=t(31780).templatedArray;t(36208),Q.exports=C("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:E({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:M.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",i.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",i.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",i.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:E({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(Q,U,t){var M=t(3400),E=t(54460),i=t(23816).draw;Q.exports=function(v){var d=v._fullLayout,r=M.filterVisible(d.annotations);if(r.length&&v._fullData.length)return M.syncOrAsync([i,C],v)};function C(v){var d=v._fullLayout;M.filterVisible(d.annotations).forEach(function(r){var e=E.getFromId(v,r.xref),l=E.getFromId(v,r.yref),n=E.getRefType(r.xref),s=E.getRefType(r.yref);r._extremes={},n==="range"&&T(r,e),s==="range"&&T(r,l)})}function T(v,d){var r=d._id,e=r.charAt(0),l=v[e],n=v["a"+e],s=v[e+"ref"],o=v["a"+e+"ref"],p=v["_"+e+"padplus"],b=v["_"+e+"padminus"],h={x:1,y:-1}[e]*v[e+"shift"],_=3*v.arrowsize*v.arrowwidth||0,a=_+h,c=_-h,f=3*v.startarrowsize*v.arrowwidth||0,x=f+h,k=f-h,y;if(o===s){var A=E.findExtremes(d,[d.r2c(l)],{ppadplus:a,ppadminus:c}),L=E.findExtremes(d,[d.r2c(n)],{ppadplus:Math.max(p,x),ppadminus:Math.max(b,k)});y={min:[A.min[0],L.min[0]],max:[A.max[0],L.max[0]]}}else x=n?x+n:x,k=n?k-n:k,y=E.findExtremes(d,[d.r2c(l)],{ppadplus:Math.max(p,a,x),ppadminus:Math.max(b,c,k)});v._extremes[r]=y}},42300:function(Q,U,t){var M=t(3400),E=t(24040),i=t(31780).arrayEditor;Q.exports={hasClickToShow:C,onClick:T};function C(r,e){var l=v(r,e);return l.on.length>0||l.explicitOff.length>0}function T(r,e){var l=v(r,e),n=l.on,s=l.off.concat(l.explicitOff),o={},p=r._fullLayout.annotations,b,h;if(n.length||s.length){for(b=0;b<n.length;b++)h=i(r.layout,"annotations",p[n[b]]),h.modifyItem("visible",!0),M.extendFlat(o,h.getUpdateObj());for(b=0;b<s.length;b++)h=i(r.layout,"annotations",p[s[b]]),h.modifyItem("visible",!1),M.extendFlat(o,h.getUpdateObj());return E.call("update",r,{},o)}}function v(r,e){var l=r._fullLayout.annotations,n=[],s=[],o=[],p=(e||[]).length,b,h,_,a,c,f,x,k;for(b=0;b<l.length;b++)if(_=l[b],a=_.clicktoshow,a){for(h=0;h<p;h++)if(c=e[h],f=c.xaxis,x=c.yaxis,f._id===_.xref&&x._id===_.yref&&f.d2r(c.x)===d(_._xclick,f)&&x.d2r(c.y)===d(_._yclick,x)){_.visible?a==="onout"?k=s:k=o:k=n,k.push(b);break}h===p&&_.visible&&a==="onout"&&s.push(b)}return{on:n,off:s,explicitOff:o}}function d(r,e){return e.type==="log"?e.l2r(r):e.d2r(r)}},87192:function(Q,U,t){var M=t(3400),E=t(76308);Q.exports=function(i,C,T,v){v("opacity");var d=v("bgcolor"),r=v("bordercolor"),e=E.opacity(r);v("borderpad");var l=v("borderwidth"),n=v("showarrow");v("text",n?" ":T._dfltTitle.annotation),v("textangle"),M.coerceFont(v,"font",T.font),v("width"),v("align");var s=v("height");if(s&&v("valign"),n){var o=v("arrowside"),p,b;o.indexOf("end")!==-1&&(p=v("arrowhead"),b=v("arrowsize")),o.indexOf("start")!==-1&&(v("startarrowhead",p),v("startarrowsize",b)),v("arrowcolor",e?C.bordercolor:E.defaultLine),v("arrowwidth",(e&&l||1)*2),v("standoff"),v("startstandoff")}var h=v("hovertext"),_=T.hoverlabel||{};if(h){var a=v("hoverlabel.bgcolor",_.bgcolor||(E.opacity(d)?E.rgb(d):E.defaultLine)),c=v("hoverlabel.bordercolor",_.bordercolor||E.contrast(a));M.coerceFont(v,"hoverlabel.font",{family:_.font.family,size:_.font.size,color:_.font.color||c})}v("captureevents",!!h)}},26828:function(Q,U,t){var M=t(38248),E=t(36896);Q.exports=function(i,C,T,v){C=C||{};var d=T==="log"&&C.type==="linear",r=T==="linear"&&C.type==="log";if(!(d||r))return;var e=i._fullLayout.annotations,l=C._id.charAt(0),n,s;function o(b){var h=n[b],_=null;d?_=E(h,C.range):_=Math.pow(10,h),M(_)||(_=null),v(s+b,_)}for(var p=0;p<e.length;p++)n=e[p],s="annotations["+p+"].",n[l+"ref"]===C._id&&o(l),n["a"+l+"ref"]===C._id&&o("a"+l)}},45216:function(Q,U,t){var M=t(3400),E=t(54460),i=t(51272),C=t(87192),T=t(13916);Q.exports=function(d,r){i(d,r,{name:"annotations",handleItemDefaults:v})};function v(d,r,e){function l(u,m){return M.coerce(d,r,T,u,m)}var n=l("visible"),s=l("clicktoshow");if(n||s){C(d,r,e,l);for(var o=r.showarrow,p=["x","y"],b=[-10,-30],h={_fullLayout:e},_=0;_<2;_++){var a=p[_],c=E.coerceRef(d,r,h,a,"","paper");if(c!=="paper"){var f=E.getFromId(h,c);f._annIndices.push(r._index)}if(E.coercePosition(r,h,l,c,a,.5),o){var x="a"+a,k=E.coerceRef(d,r,h,x,"pixel",["pixel","paper"]);k!=="pixel"&&k!==c&&(k=r[x]="pixel");var y=k==="pixel"?b[_]:.4;E.coercePosition(r,h,l,k,x,y)}l(a+"anchor"),l(a+"shift")}if(M.noneOrAll(d,r,["x","y"]),o&&M.noneOrAll(d,r,["ax","ay"]),s){var A=l("xclick"),L=l("yclick");r._xclick=A===void 0?r.x:E.cleanPosition(A,h,r.xref),r._yclick=L===void 0?r.y:E.cleanPosition(L,h,r.yref)}}}},23816:function(Q,U,t){var M=t(33428),E=t(24040),i=t(7316),C=t(3400),T=C.strTranslate,v=t(54460),d=t(76308),r=t(43616),e=t(93024),l=t(72736),n=t(93972),s=t(86476),o=t(31780).arrayEditor,p=t(33652);Q.exports={draw:b,drawOne:h,drawRaw:a};function b(c){var f=c._fullLayout;f._infolayer.selectAll(".annotation").remove();for(var x=0;x<f.annotations.length;x++)f.annotations[x].visible&&h(c,x);return i.previousPromises(c)}function h(c,f){var x=c._fullLayout,k=x.annotations[f]||{},y=v.getFromId(c,k.xref),A=v.getFromId(c,k.yref);y&&y.setScale(),A&&A.setScale(),a(c,k,f,!1,y,A)}function _(c,f,x,k,y){var A=y[x],L=y[x+"ref"],u=x.indexOf("y")!==-1,m=v.getRefType(L)==="domain",S=u?k.h:k.w;return c?m?A+(u?-f:f)/c._length:c.p2r(c.r2p(A)+f):A+(u?-f:f)/S}function a(c,f,x,k,y,A){var L=c._fullLayout,u=c._fullLayout._size,m=c._context.edits,S,w;k?(S="annotation-"+k,w=k+".annotations"):(S="annotation",w="annotations");var I=o(c.layout,w,f),O=I.modifyBase,D=I.modifyItem,P=I.getUpdateObj;L._infolayer.selectAll("."+S+'[data-index="'+x+'"]').remove();var F="clip"+L._uid+"_ann"+x;if(!f._input||f.visible===!1){M.selectAll("#"+F).remove();return}var R={x:{},y:{}},B=+f.textangle||0,N=L._infolayer.append("g").classed(S,!0).attr("data-index",String(x)).style("opacity",f.opacity),G=N.append("g").classed("annotation-text-g",!0),X=m[f.showarrow?"annotationTail":"annotationPosition"],J=f.captureevents||m.annotationText||X;function it(ft){var yt={index:x,annotation:f._input,fullAnnotation:f,event:ft};return k&&(yt.subplotId=k),yt}var nt=G.append("g").style("pointer-events",J?"all":null).call(n,"pointer").on("click",function(){c._dragging=!1,c.emit("plotly_clickannotation",it(M.event))});f.hovertext&&nt.on("mouseover",function(){var ft=f.hoverlabel,yt=ft.font,xt=this.getBoundingClientRect(),Ct=c.getBoundingClientRect();e.loneHover({x0:xt.left-Ct.left,x1:xt.right-Ct.left,y:(xt.top+xt.bottom)/2-Ct.top,text:f.hovertext,color:ft.bgcolor,borderColor:ft.bordercolor,fontFamily:yt.family,fontSize:yt.size,fontColor:yt.color},{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:c})}).on("mouseout",function(){e.loneUnhover(L._hoverlayer.node())});var q=f.borderwidth,Z=f.borderpad,$=q+Z,V=nt.append("rect").attr("class","bg").style("stroke-width",q+"px").call(d.stroke,f.bordercolor).call(d.fill,f.bgcolor),rt=f.width||f.height,ot=L._topclips.selectAll("#"+F).data(rt?[0]:[]);ot.enter().append("clipPath").classed("annclip",!0).attr("id",F).append("rect"),ot.exit().remove();var H=f.font,Y=L._meta?C.templateString(f.text,L._meta):f.text,at=nt.append("text").classed("annotation-text",!0).text(Y);function et(ft){return ft.call(r.font,H).attr({"text-anchor":{left:"start",right:"end"}[f.align]||"middle"}),l.convertToTspans(ft,c,ct),ft}function ct(){var ft=at.selectAll("a");if(ft.size()===1&&ft.text()===at.text()){var yt=nt.insert("a",":first-child").attr({"xlink:xlink:href":ft.attr("xlink:href"),"xlink:xlink:show":ft.attr("xlink:show")}).style({cursor:"pointer"});yt.node().appendChild(V.node())}var xt=nt.select(".annotation-text-math-group"),Ct=!xt.empty(),gt=r.bBox((Ct?xt:at).node()),mt=gt.width,vt=gt.height,At=f.width||mt,Ot=f.height||vt,It=Math.round(At+2*$),St=Math.round(Ot+2*$);function Bt(pr,Ze){return Ze==="auto"&&(pr<.3333333333333333?Ze="left":pr>.6666666666666666?Ze="right":Ze="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Ze]}for(var re=!1,Yt=["x","y"],he=0;he<Yt.length;he++){var Zt=Yt[he],ae=f[Zt+"ref"]||Zt,oe=f["a"+Zt+"ref"],ce={x:y,y:A}[Zt],ue=(B+(Zt==="x"?0:-90))*Math.PI/180,ye=It*Math.cos(ue),Tt=St*Math.sin(ue),Ft=Math.abs(ye)+Math.abs(Tt),$t=f[Zt+"anchor"],Vt=f[Zt+"shift"]*(Zt==="x"?1:-1),Nt=R[Zt],Mt,Et,Dt,dt,ht,bt=v.getRefType(ae);if(ce&&bt!=="domain"){var Pt=ce.r2fraction(f[Zt]);(Pt<0||Pt>1)&&(oe===ae?(Pt=ce.r2fraction(f["a"+Zt]),(Pt<0||Pt>1)&&(re=!0)):re=!0),Mt=ce._offset+ce.r2p(f[Zt]),dt=.5}else{var Gt=bt==="domain";Zt==="x"?(Dt=f[Zt],Mt=Gt?ce._offset+ce._length*Dt:Mt=u.l+u.w*Dt):(Dt=1-f[Zt],Mt=Gt?ce._offset+ce._length*Dt:Mt=u.t+u.h*Dt),dt=f.showarrow?.5:Dt}if(f.showarrow){Nt.head=Mt;var te=f["a"+Zt];if(ht=ye*Bt(.5,f.xanchor)-Tt*Bt(.5,f.yanchor),oe===ae){var ne=v.getRefType(oe);ne==="domain"?(Zt==="y"&&(te=1-te),Nt.tail=ce._offset+ce._length*te):ne==="paper"?Zt==="y"?(te=1-te,Nt.tail=u.t+u.h*te):Nt.tail=u.l+u.w*te:Nt.tail=ce._offset+ce.r2p(te),Et=ht}else Nt.tail=Mt+te,Et=ht+te;Nt.text=Nt.tail+ht;var je=L[Zt==="x"?"width":"height"];if(ae==="paper"&&(Nt.head=C.constrain(Nt.head,1,je-1)),oe==="pixel"){var Ne=-Math.max(Nt.tail-3,Nt.text),ge=Math.min(Nt.tail+3,Nt.text)-je;Ne>0?(Nt.tail+=Ne,Nt.text+=Ne):ge>0&&(Nt.tail-=ge,Nt.text-=ge)}Nt.tail+=Vt,Nt.head+=Vt}else ht=Ft*Bt(dt,$t),Et=ht,Nt.text=Mt+ht;Nt.text+=Vt,ht+=Vt,Et+=Vt,f["_"+Zt+"padplus"]=Ft/2+Et,f["_"+Zt+"padminus"]=Ft/2-Et,f["_"+Zt+"size"]=Ft,f["_"+Zt+"shift"]=ht}if(re){nt.remove();return}var _e=0,De=0;if(f.align!=="left"&&(_e=(At-mt)*(f.align==="center"?.5:1)),f.valign!=="top"&&(De=(Ot-vt)*(f.valign==="middle"?.5:1)),Ct)xt.select("svg").attr({x:$+_e-1,y:$+De}).call(r.setClipUrl,rt?F:null,c);else{var hr=$+De-gt.top,fe=$+_e-gt.left;at.call(l.positionText,fe,hr).call(r.setClipUrl,rt?F:null,c)}ot.select("rect").call(r.setRect,$,$,At,Ot),V.call(r.setRect,q/2,q/2,It-q,St-q),nt.call(r.setTranslate,Math.round(R.x.text-It/2),Math.round(R.y.text-St/2)),G.attr({transform:"rotate("+B+","+R.x.text+","+R.y.text+")"});var Be=function(pr,Ze){N.selectAll(".annotation-arrow-g").remove();var Xt=R.x.head,ie=R.y.head,pe=R.x.tail+pr,ke=R.y.tail+Ze,Ce=R.x.text+pr,Fe=R.y.text+Ze,Re=C.rotationXYMatrix(B,Ce,Fe),be=C.apply2DTransform(Re),Ge=C.apply2DTransform2(Re),Ke=+V.attr("width"),or=+V.attr("height"),sr=Ce-.5*Ke,zt=sr+Ke,Ut=Fe-.5*or,Me=Ut+or,Te=[[sr,Ut,sr,Me],[sr,Me,zt,Me],[zt,Me,zt,Ut],[zt,Ut,sr,Ut]].map(Ge);if(!Te.reduce(function(Mr,rn){return Mr^!!C.segmentsIntersect(Xt,ie,Xt+1e6,ie+1e6,rn[0],rn[1],rn[2],rn[3])},!1)){Te.forEach(function(Mr){var rn=C.segmentsIntersect(pe,ke,Xt,ie,Mr[0],Mr[1],Mr[2],Mr[3]);rn&&(pe=rn.x,ke=rn.y)});var qe=f.arrowwidth,Qe=f.arrowcolor,Je=f.arrowside,We=N.append("g").style({opacity:d.opacity(Qe)}).classed("annotation-arrow-g",!0),Oe=We.append("path").attr("d","M"+pe+","+ke+"L"+Xt+","+ie).style("stroke-width",qe+"px").call(d.stroke,d.rgb(Qe));if(p(Oe,Je,f),m.annotationPosition&&Oe.node().parentNode&&!k){var rr=Xt,cr=ie;if(f.standoff){var lr=Math.sqrt(Math.pow(Xt-pe,2)+Math.pow(ie-ke,2));rr+=f.standoff*(pe-Xt)/lr,cr+=f.standoff*(ke-ie)/lr}var nr=We.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(pe-rr)+","+(ke-cr),transform:T(rr,cr)}).style("stroke-width",qe+6+"px").call(d.stroke,"rgba(0,0,0,0)").call(d.fill,"rgba(0,0,0,0)"),Sr,kr;s.init({element:nr.node(),gd:c,prepFn:function(){var Mr=r.getTranslate(nt);Sr=Mr.x,kr=Mr.y,y&&y.autorange&&O(y._name+".autorange",!0),A&&A.autorange&&O(A._name+".autorange",!0)},moveFn:function(Mr,rn){var Ur=be(Sr,kr),pn=Ur[0]+Mr,yn=Ur[1]+rn;nt.call(r.setTranslate,pn,yn),D("x",_(y,Mr,"x",u,f)),D("y",_(A,rn,"y",u,f)),f.axref===f.xref&&D("ax",_(y,Mr,"ax",u,f)),f.ayref===f.yref&&D("ay",_(A,rn,"ay",u,f)),We.attr("transform",T(Mr,rn)),G.attr({transform:"rotate("+B+","+pn+","+yn+")"})},doneFn:function(){E.call("_guiRelayout",c,P());var Mr=document.querySelector(".js-notes-box-panel");Mr&&Mr.redraw(Mr.selectedObj)}})}}};if(f.showarrow&&Be(0,0),X){var He;s.init({element:nt.node(),gd:c,prepFn:function(){He=G.attr("transform")},moveFn:function(pr,Ze){var Xt="pointer";if(f.showarrow)f.axref===f.xref?D("ax",_(y,pr,"ax",u,f)):D("ax",f.ax+pr),f.ayref===f.yref?D("ay",_(A,Ze,"ay",u.w,f)):D("ay",f.ay+Ze),Be(pr,Ze);else{if(k)return;var ie,pe;if(y)ie=_(y,pr,"x",u,f);else{var ke=f._xsize/u.w,Ce=f.x+(f._xshift-f.xshift)/u.w-ke/2;ie=s.align(Ce+pr/u.w,ke,0,1,f.xanchor)}if(A)pe=_(A,Ze,"y",u,f);else{var Fe=f._ysize/u.h,Re=f.y-(f._yshift+f.yshift)/u.h-Fe/2;pe=s.align(Re-Ze/u.h,Fe,0,1,f.yanchor)}D("x",ie),D("y",pe),(!y||!A)&&(Xt=s.getCursor(y?.5:ie,A?.5:pe,f.xanchor,f.yanchor))}G.attr({transform:T(pr,Ze)+He}),n(nt,Xt)},clickFn:function(pr,Ze){f.captureevents&&c.emit("plotly_clickannotation",it(Ze))},doneFn:function(){n(nt),E.call("_guiRelayout",c,P());var pr=document.querySelector(".js-notes-box-panel");pr&&pr.redraw(pr.selectedObj)}})}}m.annotationText?at.call(l.makeEditable,{delegate:nt,gd:c}).call(et).on("edit",function(ft){f.text=ft,this.call(et),D("text",ft),y&&y.autorange&&O(y._name+".autorange",!0),A&&A.autorange&&O(A._name+".autorange",!0),E.call("_guiRelayout",c,P())}):at.call(et)}},33652:function(Q,U,t){var M=t(33428),E=t(76308),i=t(72196),C=t(3400),T=C.strScale,v=C.strRotate,d=C.strTranslate;Q.exports=function(r,e,l){var n=r.node(),s=i[l.arrowhead||0],o=i[l.startarrowhead||0],p=(l.arrowwidth||1)*(l.arrowsize||1),b=(l.arrowwidth||1)*(l.startarrowsize||1),h=e.indexOf("start")>=0,_=e.indexOf("end")>=0,a=s.backoff*p+l.standoff,c=o.backoff*b+l.startstandoff,f,x,k,y;if(n.nodeName==="line"){f={x:+r.attr("x1"),y:+r.attr("y1")},x={x:+r.attr("x2"),y:+r.attr("y2")};var A=f.x-x.x,L=f.y-x.y;if(k=Math.atan2(L,A),y=k+Math.PI,a&&c&&a+c>Math.sqrt(A*A+L*L)){N();return}if(a){if(a*a>A*A+L*L){N();return}var u=a*Math.cos(k),m=a*Math.sin(k);x.x+=u,x.y+=m,r.attr({x2:x.x,y2:x.y})}if(c){if(c*c>A*A+L*L){N();return}var S=c*Math.cos(k),w=c*Math.sin(k);f.x-=S,f.y-=w,r.attr({x1:f.x,y1:f.y})}}else if(n.nodeName==="path"){var I=n.getTotalLength(),O="";if(I<a+c){N();return}var D=n.getPointAtLength(0),P=n.getPointAtLength(.1);k=Math.atan2(D.y-P.y,D.x-P.x),f=n.getPointAtLength(Math.min(c,I)),O="0px,"+c+"px,";var F=n.getPointAtLength(I),R=n.getPointAtLength(I-.1);y=Math.atan2(F.y-R.y,F.x-R.x),x=n.getPointAtLength(Math.max(0,I-a));var B=O?c+a:a;O+=I-B+"px,"+I+"px",r.style("stroke-dasharray",O)}function N(){r.style("stroke-dasharray","0px,100px")}function G(X,J,it,nt){X.path&&(X.noRotate&&(it=0),M.select(n.parentNode).append("path").attr({class:r.attr("class"),d:X.path,transform:d(J.x,J.y)+v(it*180/Math.PI)+T(nt)}).style({fill:E.rgb(l.arrowcolor),"stroke-width":0}))}h&&G(o,f,k,b),_&&G(s,x,y,p)}},79180:function(Q,U,t){var M=t(23816),E=t(42300);Q.exports={moduleType:"component",name:"annotations",layoutAttributes:t(13916),supplyLayoutDefaults:t(45216),includeBasePlot:t(36632)("annotations"),calcAutorange:t(90272),draw:M.draw,drawOne:M.drawOne,drawRaw:M.drawRaw,hasClickToShow:E.hasClickToShow,onClick:E.onClick,convertCoords:t(26828)}},45899:function(Q,U,t){var M=t(13916),E=t(67824).overrideAll,i=t(31780).templatedArray;Q.exports=E(i("annotation",{visible:M.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:M.xanchor,xshift:M.xshift,yanchor:M.yanchor,yshift:M.yshift,text:M.text,textangle:M.textangle,font:M.font,width:M.width,height:M.height,opacity:M.opacity,align:M.align,valign:M.valign,bgcolor:M.bgcolor,bordercolor:M.bordercolor,borderpad:M.borderpad,borderwidth:M.borderwidth,showarrow:M.showarrow,arrowcolor:M.arrowcolor,arrowhead:M.arrowhead,startarrowhead:M.startarrowhead,arrowside:M.arrowside,arrowsize:M.arrowsize,startarrowsize:M.startarrowsize,arrowwidth:M.arrowwidth,standoff:M.standoff,startstandoff:M.startstandoff,hovertext:M.hovertext,hoverlabel:M.hoverlabel,captureevents:M.captureevents}),"calc","from-root")},42456:function(Q,U,t){var M=t(3400),E=t(54460);Q.exports=function(C){for(var T=C.fullSceneLayout,v=T.annotations,d=0;d<v.length;d++)i(v[d],C);C.fullLayout._infolayer.selectAll(".annotation-"+C.id).remove()};function i(C,T){var v=T.fullSceneLayout,d=v.domain,r=T.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};C._xa={},M.extendFlat(C._xa,e),E.setConvert(C._xa),C._xa._offset=r.l+d.x[0]*r.w,C._xa.l2p=function(){return .5*(1+C._pdata[0]/C._pdata[3])*r.w*(d.x[1]-d.x[0])},C._ya={},M.extendFlat(C._ya,e),E.setConvert(C._ya),C._ya._offset=r.t+(1-d.y[1])*r.h,C._ya.l2p=function(){return .5*(1-C._pdata[1]/C._pdata[3])*r.h*(d.y[1]-d.y[0])}}},52808:function(Q,U,t){var M=t(3400),E=t(54460),i=t(51272),C=t(87192),T=t(45899);Q.exports=function(d,r,e){i(d,r,{name:"annotations",handleItemDefaults:v,fullLayout:e.fullLayout})};function v(d,r,e,l){function n(p,b){return M.coerce(d,r,T,p,b)}function s(p){var b=p+"axis",h={_fullLayout:{}};return h._fullLayout[b]=e[b],E.coercePosition(r,h,n,p,p,.5)}var o=n("visible");o&&(C(d,r,l.fullLayout,n),s("x"),s("y"),s("z"),M.noneOrAll(d,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",n("ax",-10),n("ay",-30),M.noneOrAll(d,r,["ax","ay"])))}},71836:function(Q,U,t){var M=t(23816).drawRaw,E=t(94424),i=["x","y","z"];Q.exports=function(C){for(var T=C.fullSceneLayout,v=C.dataScale,d=T.annotations,r=0;r<d.length;r++){for(var e=d[r],l=!1,n=0;n<3;n++){var s=i[n],o=e[s],p=T[s+"axis"],b=p.r2fraction(o);if(b<0||b>1){l=!0;break}}l?C.fullLayout._infolayer.select(".annotation-"+C.id+'[data-index="'+r+'"]').remove():(e._pdata=E(C.glplot.cameraParams,[T.xaxis.r2l(e.x)*v[0],T.yaxis.r2l(e.y)*v[1],T.zaxis.r2l(e.z)*v[2]]),M(C.graphDiv,e,r,C.id,e._xa,e._ya))}}},56864:function(Q,U,t){var M=t(24040),E=t(3400);Q.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(45899)}}},layoutAttributes:t(45899),handleDefaults:t(52808),includeBasePlot:i,convert:t(42456),draw:t(71836)};function i(C,T){var v=M.subplotsRegistry.gl3d;if(v)for(var d=v.attrRegex,r=Object.keys(C),e=0;e<r.length;e++){var l=r[e];d.test(l)&&(C[l].annotations||[]).length&&(E.pushUnique(T._basePlotModules,v),E.pushUnique(T._subplots.gl3d,l))}}},54976:function(Q,U,t){Q.exports=t(38700),t(15168),t(67020),t(89792),t(55668),t(65168),t(2084),t(26368),t(24747),t(65616),t(30632),t(73040),t(1104),t(51456),t(4592),t(45348)},97776:function(Q,U,t){var M=t(54976),E=t(3400),i=t(39032),C=i.EPOCHJD,T=i.ONEDAY,v={valType:"enumerated",values:E.sortObjectKeys(M.calendars),editType:"calc",dflt:"gregorian"},d=function(y,A,L,u){var m={};return m[L]=v,E.coerce(y,A,m,L,u)},r=function(y,A,L,u){for(var m=0;m<L.length;m++)d(y,A,L[m]+"calendar",u.calendar)},e={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},l={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},n={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",o={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:s,w:s,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function p(y,A,L){for(var u=Math.floor((A+.05)/T)+C,m=h(L).fromJD(u),S=0,w,I,O,D,P;(S=y.indexOf("%",S))!==-1;)w=y.charAt(S+1),w==="0"||w==="-"||w==="_"?(O=3,I=y.charAt(S+2),w==="_"&&(w="-")):(I=w,w="0",O=2),D=o[I],D?(D===s?P=s:P=m.formatDate(D[w]),y=y.substr(0,S)+P+y.substr(S+O),S+=P.length):S+=O;return y}var b={};function h(y){var A=b[y];return A||(A=b[y]=M.instance(y),A)}function _(y){return E.extendFlat({},v,{description:y})}function a(y){return"Sets the calendar system to use with `"+y+"` date data."}var c={xcalendar:_(a("x"))},f=E.extendFlat({},c,{ycalendar:_(a("y"))}),x=E.extendFlat({},f,{zcalendar:_(a("z"))}),k=_(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));Q.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:f,bar:f,box:f,heatmap:f,contour:f,histogram:f,histogram2d:f,histogram2dcontour:f,scatter3d:x,surface:x,mesh3d:x,scattergl:f,ohlc:c,candlestick:c},layout:{calendar:_(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:k},yaxis:{calendar:k},scene:{xaxis:{calendar:k},yaxis:{calendar:k},zaxis:{calendar:k}},polar:{radialaxis:{calendar:k}}},transforms:{filter:{valuecalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:_(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:v,handleDefaults:d,handleTraceDefaults:r,CANONICAL_SUNDAY:l,CANONICAL_TICK:e,DFLTRANGE:n,getCal:h,worldCalFmt:p}},22548:function(Q,U){U.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],U.defaultLine="#444",U.lightLine="#eee",U.background="#fff",U.borderLine="#BEC8D9",U.lightFraction=90.9090909090909},76308:function(Q,U,t){var M=t(49760),E=t(38248),i=t(38116).isTypedArray,C=Q.exports={},T=t(22548);C.defaults=T.defaults;var v=C.defaultLine=T.defaultLine;C.lightLine=T.lightLine;var d=C.background=T.background;C.tinyRGB=function(e){var l=e.toRgb();return"rgb("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+")"},C.rgb=function(e){return C.tinyRGB(M(e))},C.opacity=function(e){return e?M(e).getAlpha():0},C.addOpacity=function(e,l){var n=M(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+l+")"},C.combine=function(e,l){var n=M(e).toRgb();if(n.a===1)return M(e).toRgbString();var s=M(l||d).toRgb(),o=s.a===1?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},p={r:o.r*(1-n.a)+n.r*n.a,g:o.g*(1-n.a)+n.g*n.a,b:o.b*(1-n.a)+n.b*n.a};return M(p).toRgbString()},C.interpolate=function(e,l,n){var s=M(e).toRgb(),o=M(l).toRgb(),p={r:n*s.r+(1-n)*o.r,g:n*s.g+(1-n)*o.g,b:n*s.b+(1-n)*o.b};return M(p).toRgbString()},C.contrast=function(e,l,n){var s=M(e);s.getAlpha()!==1&&(s=M(C.combine(e,d)));var o=s.isDark()?l?s.lighten(l):d:n?s.darken(n):v;return o.toString()},C.stroke=function(e,l){var n=M(l);e.style({stroke:C.tinyRGB(n),"stroke-opacity":n.getAlpha()})},C.fill=function(e,l){var n=M(l);e.style({fill:C.tinyRGB(n),"fill-opacity":n.getAlpha()})},C.clean=function(e){if(!(!e||typeof e!="object")){var l=Object.keys(e),n,s,o,p;for(n=0;n<l.length;n++)if(o=l[n],p=e[o],o.substr(o.length-5)==="color")if(Array.isArray(p))for(s=0;s<p.length;s++)p[s]=r(p[s]);else e[o]=r(p);else if(o.substr(o.length-10)==="colorscale"&&Array.isArray(p))for(s=0;s<p.length;s++)Array.isArray(p[s])&&(p[s][1]=r(p[s][1]));else if(Array.isArray(p)){var b=p[0];if(!Array.isArray(b)&&b&&typeof b=="object")for(s=0;s<p.length;s++)C.clean(p[s])}else p&&typeof p=="object"&&!i(p)&&C.clean(p)}};function r(e){if(E(e)||typeof e!="string")return e;var l=e.trim();if(l.substr(0,3)!=="rgb")return e;var n=l.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var s=n[1].trim().split(/\s*[\s,]\s*/),o=l.charAt(3)==="a"&&s.length===4;if(!o&&s.length!==3)return e;for(var p=0;p<s.length;p++){if(!s[p].length||(s[p]=Number(s[p]),!(s[p]>=0)))return e;if(p===3)s[p]>1&&(s[p]=1);else if(s[p]>=1)return e}var b=Math.round(s[0]*255)+", "+Math.round(s[1]*255)+", "+Math.round(s[2]*255);return o?"rgba("+b+", "+s[3]+")":"rgb("+b+")"}},42996:function(Q,U,t){var M=t(94724),E=t(25376),i=t(92880).extendFlat,C=t(67824).overrideAll;Q.exports=C({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:M.linecolor,outlinewidth:M.linewidth,bordercolor:M.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:i({},M.ticks,{dflt:""}),ticklabeloverflow:i({},M.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:E({}),tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,separatethousands:M.separatethousands,exponentformat:M.exponentformat,minexponent:M.minexponent,showexponent:M.showexponent,title:{text:{valType:"string"},font:E({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:E({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(Q){Q.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(Q,U,t){var M=t(3400),E=t(31780),i=t(26332),C=t(25404),T=t(95936),v=t(42568),d=t(42996);Q.exports=function(r,e,l){var n=E.newContainer(e,"colorbar"),s=r.colorbar||{};function o(F,R){return M.coerce(s,n,d,F,R)}var p=l.margin||{t:0,b:0,l:0,r:0},b=l.width-p.l-p.r,h=l.height-p.t-p.b,_=o("orientation"),a=_==="v",c=o("thicknessmode");o("thickness",c==="fraction"?30/(a?b:h):30);var f=o("lenmode");o("len",f==="fraction"?1:a?h:b);var x=o("yref"),k=o("xref"),y=x==="paper",A=k==="paper",L,u,m,S="left";a?(m="middle",S=A?"left":"right",L=A?1.02:1,u=.5):(m=y?"bottom":"top",S="center",L=.5,u=y?1.02:1),M.coerce(s,n,{x:{valType:"number",min:A?-2:0,max:A?3:1,dflt:L}},"x"),M.coerce(s,n,{y:{valType:"number",min:y?-2:0,max:y?3:1,dflt:u}},"y"),o("xanchor",S),o("xpad"),o("yanchor",m),o("ypad"),M.noneOrAll(s,n,["x","y"]),o("outlinecolor"),o("outlinewidth"),o("bordercolor"),o("borderwidth"),o("bgcolor");var w=M.coerce(s,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:a?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");o("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),i(s,n,o,"linear");var I=l.font,O={noAutotickangles:!0,outerTicks:!1,font:I};w.indexOf("inside")!==-1&&(O.bgColor="black"),v(s,n,o,"linear",O),T(s,n,o,"linear",O),C(s,n,o,"linear",O),o("title.text",l._dfltTitle.colorbar);var D=n.showticklabels?n.tickfont:I,P=M.extendFlat({},D,{color:I.color,size:M.bigFont(D.size)});M.coerceFont(o,"title.font",P),o("title.side",a?"top":"right")}},37848:function(Q,U,t){var M=t(33428),E=t(49760),i=t(7316),C=t(24040),T=t(54460),v=t(86476),d=t(3400),r=d.strTranslate,e=t(92880).extendFlat,l=t(93972),n=t(43616),s=t(76308),o=t(81668),p=t(72736),b=t(94288).flipScale,h=t(28336),_=t(37668),a=t(94724),c=t(84284),f=c.LINE_SPACING,x=c.FROM_TL,k=c.FROM_BR,y=t(63964).cn;function A(I){var O=I._fullLayout,D=O._infolayer.selectAll("g."+y.colorbar).data(L(I),function(P){return P._id});D.enter().append("g").attr("class",function(P){return P._id}).classed(y.colorbar,!0),D.each(function(P){var F=M.select(this);d.ensureSingle(F,"rect",y.cbbg),d.ensureSingle(F,"g",y.cbfills),d.ensureSingle(F,"g",y.cblines),d.ensureSingle(F,"g",y.cbaxis,function(B){B.classed(y.crisp,!0)}),d.ensureSingle(F,"g",y.cbtitleunshift,function(B){B.append("g").classed(y.cbtitle,!0)}),d.ensureSingle(F,"rect",y.cboutline);var R=u(F,P,I);R&&R.then&&(I._promises||[]).push(R),I._context.edits.colorbarPosition&&m(F,P,I)}),D.exit().each(function(P){i.autoMargin(I,P._id)}).remove(),D.order()}function L(I){var O=I._fullLayout,D=I.calcdata,P=[],F,R,B,N;function G(H){return e(H,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){typeof N.calc=="function"?N.calc(I,B,F):(F._fillgradient=R.reversescale?b(R.colorscale):R.colorscale,F._zrange=[R[N.min],R[N.max]])}for(var J=0;J<D.length;J++){var it=D[J];if(B=it[0].trace,!!B._module){var nt=B._module.colorbar;if(B.visible===!0&&nt)for(var q=Array.isArray(nt),Z=q?nt:[nt],$=0;$<Z.length;$++){N=Z[$];var V=N.container;R=V?B[V]:B,R&&R.showscale&&(F=G(R.colorbar),F._id="cb"+B.uid+(q&&V?"-"+V:""),F._traceIndex=B.index,F._propPrefix=(V?V+".":"")+"colorbar.",F._meta=B._meta,X(),P.push(F))}}}for(var rt in O._colorAxes)if(R=O[rt],R.showscale){var ot=O._colorAxes[rt];F=G(R.colorbar),F._id="cb"+rt,F._propPrefix=rt+".colorbar.",F._meta=O._meta,N={min:"cmin",max:"cmax"},ot[0]!=="heatmap"&&(B=ot[1],N.calc=B._module.colorbar.calc),X(),P.push(F)}return P}function u(I,O,D){var P=O.orientation==="v",F=O.len,R=O.lenmode,B=O.thickness,N=O.thicknessmode,G=O.outlinewidth,X=O.borderwidth,J=O.bgcolor,it=O.xanchor,nt=O.yanchor,q=O.xpad,Z=O.ypad,$=O.x,V=P?O.y:1-O.y,rt=O.yref==="paper",ot=O.xref==="paper",H=D._fullLayout,Y=H._size,at=O._fillcolor,et=O._line,ct=O.title,ft=ct.side,yt=O._zrange||M.extent((typeof at=="function"?at:et.color).domain()),xt=typeof et.color=="function"?et.color:function(){return et.color},Ct=typeof at=="function"?at:function(){return at},gt=O._levels,mt=S(D,O,yt),vt=mt.fill,At=mt.line,Ot=Math.round(B*(N==="fraction"?P?Y.w:Y.h:1)),It=Ot/(P?Y.w:Y.h),St=Math.round(F*(R==="fraction"?P?Y.h:Y.w:1)),Bt=St/(P?Y.h:Y.w),re=ot?Y.w:D._fullLayout.width,Yt=rt?Y.h:D._fullLayout.height,he=Math.round(P?$*re+q:V*Yt+Z),Zt={center:.5,right:1}[it]||0,ae={top:1,middle:.5}[nt]||0,oe=P?$-Zt*It:V-ae*It,ce=P?V-ae*Bt:$-Zt*Bt,ue=Math.round(P?Yt*(1-ce):re*ce);O._lenFrac=Bt,O._thickFrac=It,O._uFrac=oe,O._vFrac=ce;var ye=O._axis=w(D,O,yt);ye.position=It+(P?$+q/Y.w:V+Z/Y.h);var Tt=["top","bottom"].indexOf(ft)!==-1;if(P&&Tt&&(ye.title.side=ft,ye.titlex=$+q/Y.w,ye.titley=ce+(ct.side==="top"?Bt-Z/Y.h:Z/Y.h)),!P&&!Tt&&(ye.title.side=ft,ye.titley=V+Z/Y.h,ye.titlex=ce+q/Y.w),et.color&&O.tickmode==="auto"){ye.tickmode="linear",ye.tick0=gt.start;var Ft=gt.size,$t=d.constrain(St/50,4,15)+1,Vt=(yt[1]-yt[0])/((O.nticks||$t)*Ft);if(Vt>1){var Nt=Math.pow(10,Math.floor(Math.log(Vt)/Math.LN10));Ft*=Nt*d.roundUp(Vt/Nt,[2,5,10]),(Math.abs(gt.start)/gt.size+1e-6)%1<2e-6&&(ye.tick0=0)}ye.dtick=Ft}ye.domain=P?[ce+Z/Y.h,ce+Bt-Z/Y.h]:[ce+q/Y.w,ce+Bt-q/Y.w],ye.setScale(),I.attr("transform",r(Math.round(Y.l),Math.round(Y.t)));var Mt=I.select("."+y.cbtitleunshift).attr("transform",r(-Math.round(Y.l),-Math.round(Y.t))),Et=ye.ticklabelposition,Dt=ye.title.font.size,dt=I.select("."+y.cbaxis),ht,bt=0,Pt=0;function Gt(ge,_e){var De={propContainer:ye,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:H._dfltTitle.colorbar,containerGroup:I.select("."+y.cbtitle)},hr=ge.charAt(0)==="h"?ge.substr(1):"h"+ge;I.selectAll("."+hr+",."+hr+"-math-group").remove(),o.draw(D,ge,e(De,_e||{}))}function te(){if(P&&Tt||!P&&!Tt){var ge,_e;ft==="top"&&(ge=q+Y.l+re*$,_e=Z+Y.t+Yt*(1-ce-Bt)+3+Dt*.75),ft==="bottom"&&(ge=q+Y.l+re*$,_e=Z+Y.t+Yt*(1-ce)-3-Dt*.25),ft==="right"&&(_e=Z+Y.t+Yt*V+3+Dt*.75,ge=q+Y.l+re*ce),Gt(ye._id+"title",{attributes:{x:ge,y:_e,"text-anchor":P?"start":"middle"}})}}function ne(){if(P&&!Tt||!P&&Tt){var ge=ye.position||0,_e=ye._offset+ye._length/2,De,hr;if(ft==="right")hr=_e,De=Y.l+re*ge+10+Dt*(ye.showticklabels?1:.5);else if(De=_e,ft==="bottom"&&(hr=Y.t+Yt*ge+10+(Et.indexOf("inside")===-1?ye.tickfont.size:0)+(ye.ticks!=="intside"&&O.ticklen||0)),ft==="top"){var fe=ct.text.split("<br>").length;hr=Y.t+Yt*ge+10-Ot-f*Dt*fe}Gt((P?"h":"v")+ye._id+"title",{avoid:{selection:M.select(D).selectAll("g."+ye._id+"tick"),side:ft,offsetTop:P?0:Y.t,offsetLeft:P?Y.l:0,maxShift:P?H.width:H.height},attributes:{x:De,y:hr,"text-anchor":"middle"},transform:{rotate:P?-90:0,offset:0}})}}function je(){if(!P&&!Tt||P&&Tt){var ge=I.select("."+y.cbtitle),_e=ge.select("text"),De=[-G/2,G/2],hr=ge.select(".h"+ye._id+"title-math-group").node(),fe=15.6;_e.node()&&(fe=parseInt(_e.node().style.fontSize,10)*f);var Be;if(hr?(Be=n.bBox(hr),Pt=Be.width,bt=Be.height,bt>fe&&(De[1]-=(bt-fe)/2)):_e.node()&&!_e.classed(y.jsPlaceholder)&&(Be=n.bBox(_e.node()),Pt=Be.width,bt=Be.height),P){if(bt){if(bt+=5,ft==="top")ye.domain[1]-=bt/Y.h,De[1]*=-1;else{ye.domain[0]+=bt/Y.h;var He=p.lineCount(_e);De[1]+=(1-He)*fe}ge.attr("transform",r(De[0],De[1])),ye.setScale()}}else Pt&&(ft==="right"&&(ye.domain[0]+=(Pt+Dt/2)/Y.w),ge.attr("transform",r(De[0],De[1])),ye.setScale())}I.selectAll("."+y.cbfills+",."+y.cblines).attr("transform",P?r(0,Math.round(Y.h*(1-ye.domain[1]))):r(Math.round(Y.w*ye.domain[0]),0)),dt.attr("transform",P?r(0,Math.round(-Y.t)):r(Math.round(-Y.l),0));var pr=I.select("."+y.cbfills).selectAll("rect."+y.cbfill).attr("style","").data(vt);pr.enter().append("rect").classed(y.cbfill,!0).attr("style",""),pr.exit().remove();var Ze=yt.map(ye.c2p).map(Math.round).sort(function(Ce,Fe){return Ce-Fe});pr.each(function(Ce,Fe){var Re=[Fe===0?yt[0]:(vt[Fe]+vt[Fe-1])/2,Fe===vt.length-1?yt[1]:(vt[Fe]+vt[Fe+1])/2].map(ye.c2p).map(Math.round);P&&(Re[1]=d.constrain(Re[1]+(Re[1]>Re[0])?1:-1,Ze[0],Ze[1]));var be=M.select(this).attr(P?"x":"y",he).attr(P?"y":"x",M.min(Re)).attr(P?"width":"height",Math.max(Ot,2)).attr(P?"height":"width",Math.max(M.max(Re)-M.min(Re),2));if(O._fillgradient)n.gradient(be,D,O._id,P?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var Ge=Ct(Ce).replace("e-","");be.attr("fill",E(Ge).toHexString())}});var Xt=I.select("."+y.cblines).selectAll("path."+y.cbline).data(et.color&&et.width?At:[]);Xt.enter().append("path").classed(y.cbline,!0),Xt.exit().remove(),Xt.each(function(Ce){var Fe=he,Re=Math.round(ye.c2p(Ce))+et.width/2%1;M.select(this).attr("d","M"+(P?Fe+","+Re:Re+","+Fe)+(P?"h":"v")+Ot).call(n.lineGroupStyle,et.width,xt(Ce),et.dash)}),dt.selectAll("g."+ye._id+"tick,path").remove();var ie=he+Ot+(G||0)/2-(O.ticks==="outside"?1:0),pe=T.calcTicks(ye),ke=T.getTickSigns(ye)[2];return T.drawTicks(D,ye,{vals:ye.ticks==="inside"?T.clipEnds(ye,pe):pe,layer:dt,path:T.makeTickPath(ye,ie,ke),transFn:T.makeTransTickFn(ye)}),T.drawLabels(D,ye,{vals:pe,layer:dt,transFn:T.makeTransTickLabelFn(ye),labelFns:T.makeLabelFns(ye,ie)})}function Ne(){var ge,_e=Ot+G/2;Et.indexOf("inside")===-1&&(ge=n.bBox(dt.node()),_e+=P?ge.width:ge.height),ht=Mt.select("text");var De=0,hr=P&&ft==="top",fe=!P&&ft==="right",Be=0;if(ht.node()&&!ht.classed(y.jsPlaceholder)){var He,pr=Mt.select(".h"+ye._id+"title-math-group").node();pr&&(P&&Tt||!P&&!Tt)?(ge=n.bBox(pr),De=ge.width,He=ge.height):(ge=n.bBox(Mt.node()),De=ge.right-Y.l-(P?he:ue),He=ge.bottom-Y.t-(P?ue:he),!P&&ft==="top"&&(_e+=ge.height,Be=ge.height)),fe&&(ht.attr("transform",r(De/2+Dt/2,0)),De*=2),_e=Math.max(_e,P?De:He)}var Ze=(P?q:Z)*2+_e+X+G/2,Xt=0;!P&&ct.text&&nt==="bottom"&&V<=0&&(Xt=Ze/2,Ze+=Xt,Be+=Xt),H._hColorbarMoveTitle=Xt,H._hColorbarMoveCBTitle=Be;var ie=X+G,pe=(P?he:ue)-ie/2-(P?q:0),ke=(P?ue:he)-(P?St:Z+Be-Xt);I.select("."+y.cbbg).attr("x",pe).attr("y",ke).attr(P?"width":"height",Math.max(Ze-Xt,2)).attr(P?"height":"width",Math.max(St+ie,2)).call(s.fill,J).call(s.stroke,O.bordercolor).style("stroke-width",X);var Ce=fe?Math.max(De-10,0):0;I.selectAll("."+y.cboutline).attr("x",(P?he:ue+q)+Ce).attr("y",(P?ue+Z-St:he)+(hr?bt:0)).attr(P?"width":"height",Math.max(Ot,2)).attr(P?"height":"width",Math.max(St-(P?2*Z+bt:2*q+Ce),2)).call(s.stroke,O.outlinecolor).style({fill:"none","stroke-width":G});var Fe=P?Zt*Ze:0,Re=P?0:(1-ae)*Ze-Be;if(Fe=ot?Y.l-Fe:-Fe,Re=rt?Y.t-Re:-Re,I.attr("transform",r(Fe,Re)),!P&&(X||E(J).getAlpha()&&!E.equals(H.paper_bgcolor,J))){var be=dt.selectAll("text"),Ge=be[0].length,Ke=I.select("."+y.cbbg).node(),or=n.bBox(Ke),sr=n.getTranslate(I),zt=2;be.each(function(cr,lr){var nr=0,Sr=Ge-1;if(lr===nr||lr===Sr){var kr=n.bBox(this),Mr=n.getTranslate(this),rn;if(lr===Sr){var Ur=kr.right+Mr.x,pn=or.right+sr.x+ue-X-zt+$;rn=pn-Ur,rn>0&&(rn=0)}else if(lr===nr){var yn=kr.left+Mr.x,yr=or.left+sr.x+ue+X+zt;rn=yr-yn,rn<0&&(rn=0)}rn&&(Ge<3?this.setAttribute("transform","translate("+rn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ut={},Me=x[it],Te=k[it],qe=x[nt],Qe=k[nt],Je=Ze-Ot;P?(R==="pixels"?(Ut.y=V,Ut.t=St*qe,Ut.b=St*Qe):(Ut.t=Ut.b=0,Ut.yt=V+F*qe,Ut.yb=V-F*Qe),N==="pixels"?(Ut.x=$,Ut.l=Ze*Me,Ut.r=Ze*Te):(Ut.l=Je*Me,Ut.r=Je*Te,Ut.xl=$-B*Me,Ut.xr=$+B*Te)):(R==="pixels"?(Ut.x=$,Ut.l=St*Me,Ut.r=St*Te):(Ut.l=Ut.r=0,Ut.xl=$+F*Me,Ut.xr=$-F*Te),N==="pixels"?(Ut.y=1-V,Ut.t=Ze*qe,Ut.b=Ze*Qe):(Ut.t=Je*qe,Ut.b=Je*Qe,Ut.yt=V-B*qe,Ut.yb=V+B*Qe));var We=O.y<.5?"b":"t",Oe=O.x<.5?"l":"r";D._fullLayout._reservedMargin[O._id]={};var rr={r:H.width-pe-Fe,l:pe+Ut.r,b:H.height-ke-Re,t:ke+Ut.b};ot&&rt?i.autoMargin(D,O._id,Ut):ot?D._fullLayout._reservedMargin[O._id][We]=rr[We]:rt||P?D._fullLayout._reservedMargin[O._id][Oe]=rr[Oe]:D._fullLayout._reservedMargin[O._id][We]=rr[We]}return d.syncOrAsync([i.previousPromises,te,je,ne,i.previousPromises,Ne],D)}function m(I,O,D){var P=O.orientation==="v",F=D._fullLayout,R=F._size,B,N,G;v.init({element:I.node(),gd:D,prepFn:function(){B=I.attr("transform"),l(I)},moveFn:function(X,J){I.attr("transform",B+r(X,J)),N=v.align((P?O._uFrac:O._vFrac)+X/R.w,P?O._thickFrac:O._lenFrac,0,1,O.xanchor),G=v.align((P?O._vFrac:1-O._uFrac)-J/R.h,P?O._lenFrac:O._thickFrac,0,1,O.yanchor);var it=v.getCursor(N,G,O.xanchor,O.yanchor);l(I,it)},doneFn:function(){if(l(I),N!==void 0&&G!==void 0){var X={};X[O._propPrefix+"x"]=N,X[O._propPrefix+"y"]=G,O._traceIndex!==void 0?C.call("_guiRestyle",D,X,O._traceIndex):C.call("_guiRelayout",D,X)}}})}function S(I,O,D){var P=O._levels,F=[],R=[],B,N,G=P.end+P.size/100,X=P.size,J=1.001*D[0]-.001*D[1],it=1.001*D[1]-.001*D[0];for(N=0;N<1e5&&(B=P.start+N*X,!(X>0?B>=G:B<=G));N++)B>J&&B<it&&F.push(B);if(O._fillgradient)R=[0];else if(typeof O._fillcolor=="function"){var nt=O._filllevels;if(nt)for(G=nt.end+nt.size/100,X=nt.size,N=0;N<1e5&&(B=nt.start+N*X,!(X>0?B>=G:B<=G));N++)B>D[0]&&B<D[1]&&R.push(B);else R=F.map(function(q){return q-P.size/2}),R.push(R[R.length-1]+P.size)}else O._fillcolor&&typeof O._fillcolor=="string"&&(R=[0]);return P.size<0&&(F.reverse(),R.reverse()),{line:F,fill:R}}function w(I,O,D){var P=I._fullLayout,F=O.orientation==="v",R={type:"linear",range:D,tickmode:O.tickmode,nticks:O.nticks,tick0:O.tick0,dtick:O.dtick,tickvals:O.tickvals,ticktext:O.ticktext,ticks:O.ticks,ticklen:O.ticklen,tickwidth:O.tickwidth,tickcolor:O.tickcolor,showticklabels:O.showticklabels,labelalias:O.labelalias,ticklabelposition:O.ticklabelposition,ticklabeloverflow:O.ticklabeloverflow,ticklabelstep:O.ticklabelstep,tickfont:O.tickfont,tickangle:O.tickangle,tickformat:O.tickformat,exponentformat:O.exponentformat,minexponent:O.minexponent,separatethousands:O.separatethousands,showexponent:O.showexponent,showtickprefix:O.showtickprefix,tickprefix:O.tickprefix,showticksuffix:O.showticksuffix,ticksuffix:O.ticksuffix,title:O.title,showline:!0,anchor:"free",side:F?"right":"bottom",position:1},B=F?"y":"x",N={type:"linear",_id:B+O._id},G={letter:B,font:P.font,noAutotickangles:B==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:P.calendar};function X(J,it){return d.coerce(R,N,a,J,it)}return h(R,N,X,G,P),_(R,N,X,G),N}Q.exports={draw:A}},90553:function(Q,U,t){var M=t(3400);Q.exports=function(E){return M.isPlainObject(E.colorbar)}},55080:function(Q,U,t){Q.exports={moduleType:"component",name:"colorbar",attributes:t(42996),supplyDefaults:t(64013),draw:t(37848).draw,hasColorbar:t(90553)}},49084:function(Q,U,t){var M=t(42996),E=t(53756).counter,i=t(95376),C=t(88304).scales;i(C);function T(v){return"`"+v+"`"}Q.exports=function(v,d){v=v||"",d=d||{};var r=d.cLetter||"c";"onlyIfNumerical"in d&&d.onlyIfNumerical;var e="noScale"in d?d.noScale:v==="marker.line",l="showScaleDflt"in d?d.showScaleDflt:r==="z",n=typeof d.colorscaleDflt=="string"?C[d.colorscaleDflt]:null,s=d.editTypeOverride||"",o=v?v+".":"",p;"colorAttr"in d?(p=d.colorAttr,d.colorAttr):(p={z:"z",c:"color"}[r],""+T(o+p));var b=r+"auto",h=r+"min",_=r+"max",a=r+"mid",c={};c[h]=c[_]=void 0;var f={};f[b]=!1;var x={};return p==="color"&&(x.color={valType:"color",arrayOk:!0,editType:s||"style"},d.anim&&(x.color.anim=!0)),x[b]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},x[h]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:f},x[_]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:f},x[a]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},x.colorscale={valType:"colorscale",editType:"calc",dflt:n,impliedEdits:{autocolorscale:!1}},x.autocolorscale={valType:"boolean",dflt:d.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},x.reversescale={valType:"boolean",dflt:!1,editType:"plot"},e||(x.showscale={valType:"boolean",dflt:l,editType:"calc"},x.colorbar=M),d.noColorAxis||(x.coloraxis={valType:"subplotid",regex:E("coloraxis"),dflt:null,editType:"calc"}),x}},47128:function(Q,U,t){var M=t(38248),E=t(3400),i=t(94288).extractOpts;Q.exports=function(C,T,v){var d=C._fullLayout,r=v.vals,e=v.containerStr,l=e?E.nestedProperty(T,e).get():T,n=i(l),s=n.auto!==!1,o=n.min,p=n.max,b=n.mid,h=function(){return E.aggNums(Math.min,null,r)},_=function(){return E.aggNums(Math.max,null,r)};if(o===void 0?o=h():s&&(l._colorAx&&M(o)?o=Math.min(o,h()):o=h()),p===void 0?p=_():s&&(l._colorAx&&M(p)?p=Math.max(p,_()):p=_()),s&&b!==void 0&&(p-b>b-o?o=b-(p-b):p-b<b-o&&(p=b+(b-o))),o===p&&(o-=.5,p+=.5),n._sync("min",o),n._sync("max",p),n.autocolorscale){var a;o*p<0?a=d.colorscale.diverging:o>=0?a=d.colorscale.sequential:a=d.colorscale.sequentialminus,n._sync("colorscale",a)}}},95504:function(Q,U,t){var M=t(3400),E=t(94288).hasColorscale,i=t(94288).extractOpts;Q.exports=function(C,T){function v(o,p){var b=o["_"+p];b!==void 0&&(o[p]=b)}function d(o,p){var b=p.container?M.nestedProperty(o,p.container).get():o;if(b)if(b.coloraxis)b._colorAx=T[b.coloraxis];else{var h=i(b),_=h.auto;(_||h.min===void 0)&&v(b,p.min),(_||h.max===void 0)&&v(b,p.max),h.autocolorscale&&v(b,"colorscale")}}for(var r=0;r<C.length;r++){var e=C[r],l=e._module.colorbar;if(l)if(Array.isArray(l))for(var n=0;n<l.length;n++)d(e,l[n]);else d(e,l);E(e,"marker.line")&&d(e,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in T._colorAxes)d(T[s],{min:"cmin",max:"cmax"})}},27260:function(Q,U,t){var M=t(38248),E=t(3400),i=t(90553),C=t(64013),T=t(88304).isValid,v=t(24040).traceIs;function d(r,e){var l=e.slice(0,e.length-1);return e?E.nestedProperty(r,l).get()||{}:r}Q.exports=function r(e,l,n,s,o){var p=o.prefix,b=o.cLetter,h="_module"in l,_=d(e,p),a=d(l,p),c=d(l._template||{},p)||{},f=function(){return delete e.coloraxis,delete l.coloraxis,r(e,l,n,s,o)};if(h){var x=n._colorAxes||{},k=s(p+"coloraxis");if(k){var y=v(l,"contour")&&E.nestedProperty(l,"contours.coloring").get()||"heatmap",A=x[k];A?(A[2].push(f),A[0]!==y&&(A[0]=!1,E.warn(["Ignoring coloraxis:",k,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[k]=[y,l,[f]];return}}var L=_[b+"min"],u=_[b+"max"],m=M(L)&&M(u)&&L<u,S=s(p+b+"auto",!m);S?s(p+b+"mid"):(s(p+b+"min"),s(p+b+"max"));var w=_.colorscale,I=c.colorscale,O;if(w!==void 0&&(O=!T(w)),I!==void 0&&(O=!T(I)),s(p+"autocolorscale",O),s(p+"colorscale"),s(p+"reversescale"),p!=="marker.line."){var D;p&&h&&(D=i(_));var P=s(p+"showscale",D);P&&(p&&c&&(a._template=c),C(_,a,n))}}},94288:function(Q,U,t){var M=t(33428),E=t(49760),i=t(38248),C=t(3400),T=t(76308),v=t(88304).isValid;function d(h,_,a){var c=_?C.nestedProperty(h,_).get()||{}:h,f=c[a||"color"];f&&f._inputArray&&(f=f._inputArray);var x=!1;if(C.isArrayOrTypedArray(f)){for(var k=0;k<f.length;k++)if(i(f[k])){x=!0;break}}return C.isPlainObject(c)&&(x||c.showscale===!0||i(c.cmin)&&i(c.cmax)||v(c.colorscale)||C.isPlainObject(c.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],e=["min","max","mid","auto"];function l(h){var _=h._colorAx,a=_||h,c={},f,x,k;for(x=0;x<r.length;x++)k=r[x],c[k]=a[k];if(_)for(f="c",x=0;x<e.length;x++)k=e[x],c[k]=a["c"+k];else{var y;for(x=0;x<e.length;x++){if(k=e[x],y="c"+k,y in a){c[k]=a[y];continue}y="z"+k,y in a&&(c[k]=a[y])}f=y.charAt(0)}return c._sync=function(A,L){var u=e.indexOf(A)!==-1?f+A:A;a[u]=a["_"+u]=L},c}function n(h){for(var _=l(h),a=_.min,c=_.max,f=_.reversescale?s(_.colorscale):_.colorscale,x=f.length,k=new Array(x),y=new Array(x),A=0;A<x;A++){var L=f[A];k[A]=a+L[0]*(c-a),y[A]=L[1]}return{domain:k,range:y}}function s(h){for(var _=h.length,a=new Array(_),c=_-1,f=0;c>=0;c--,f++){var x=h[c];a[f]=[1-x[0],x[1]]}return a}function o(h,_){_=_||{};for(var a=h.domain,c=h.range,f=c.length,x=new Array(f),k=0;k<f;k++){var y=E(c[k]).toRgb();x[k]=[y.r,y.g,y.b,y.a]}var A=M.scale.linear().domain(a).range(x).clamp(!0),L=_.noNumericCheck,u=_.returnArray,m;return L&&u?m=A:L?m=function(S){return b(A(S))}:u?m=function(S){return i(S)?A(S):E(S).isValid()?S:T.defaultLine}:m=function(S){return i(S)?b(A(S)):E(S).isValid()?S:T.defaultLine},m.domain=A.domain,m.range=function(){return c},m}function p(h,_){return o(n(h),_)}function b(h){var _={r:h[0],g:h[1],b:h[2],a:h[3]};return E(_).toRgbString()}Q.exports={hasColorscale:d,extractOpts:l,extractScale:n,flipScale:s,makeColorScaleFunc:o,makeColorScaleFuncFromTrace:p}},8932:function(Q,U,t){var M=t(88304),E=t(94288);Q.exports={moduleType:"component",name:"colorscale",attributes:t(49084),layoutAttributes:t(92332),supplyLayoutDefaults:t(51608),handleDefaults:t(27260),crossTraceDefaults:t(95504),calc:t(47128),scales:M.scales,defaultScale:M.defaultScale,getScale:M.get,isValidScale:M.isValid,hasColorscale:E.hasColorscale,extractOpts:E.extractOpts,extractScale:E.extractScale,flipScale:E.flipScale,makeColorScaleFunc:E.makeColorScaleFunc,makeColorScaleFuncFromTrace:E.makeColorScaleFuncFromTrace}},92332:function(Q,U,t){var M=t(92880).extendFlat,E=t(49084),i=t(88304).scales;Q.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:i.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:i.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:i.RdBu,editType:"calc"}},coloraxis:M({_isSubplotObj:!0,editType:"calc"},E("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(Q,U,t){var M=t(3400),E=t(31780),i=t(92332),C=t(27260);Q.exports=function(T,v){function d(b,h){return M.coerce(T,v,i,b,h)}d("colorscale.sequential"),d("colorscale.sequentialminus"),d("colorscale.diverging");var r=v._colorAxes,e,l;function n(b,h){return M.coerce(e,l,i.coloraxis,b,h)}for(var s in r){var o=r[s];if(o[0])e=T[s]||{},l=E.newContainer(v,s,"coloraxis"),l._name=s,C(e,l,v,n,{prefix:"",cLetter:"c"});else{for(var p=0;p<o[2].length;p++)o[2][p]();delete v._colorAxes[s]}}}},88304:function(Q,U,t){var M=t(49760),E={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},i=E.RdBu;function C(d,r){if(r||(r=i),!d)return r;function e(){try{d=E[d]||JSON.parse(d)}catch{d=r}}return typeof d=="string"&&(e(),typeof d=="string"&&e()),T(d)?d:r}function T(d){var r=0;if(!Array.isArray(d)||d.length<2||!d[0]||!d[d.length-1]||+d[0][0]!=0||+d[d.length-1][0]!=1)return!1;for(var e=0;e<d.length;e++){var l=d[e];if(l.length!==2||+l[0]<r||!M(l[1]).isValid())return!1;r=+l[0]}return!0}function v(d){return E[d]!==void 0?!0:T(d)}Q.exports={scales:E,defaultScale:i,get:C,isValid:v}},78316:function(Q){Q.exports=function(U,t,M,E,i){var C=(U-M)/(E-M),T=C+t/(E-M),v=(C+T)/2;return i==="left"||i==="bottom"?C:i==="center"||i==="middle"?v:i==="right"||i==="top"?T:C<.6666666666666666-v?C:T>1.3333333333333333-v?T:v}},67416:function(Q,U,t){var M=t(3400),E=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];Q.exports=function(i,C,T,v){return T==="left"?i=0:T==="center"?i=1:T==="right"?i=2:i=M.constrain(Math.floor(i*3),0,2),v==="bottom"?C=0:v==="middle"?C=1:v==="top"?C=2:C=M.constrain(Math.floor(C*3),0,2),E[C][i]}},72760:function(Q,U){U.selectMode=function(t){return t==="lasso"||t==="select"},U.drawMode=function(t){return t==="drawclosedpath"||t==="drawopenpath"||t==="drawline"||t==="drawrect"||t==="drawcircle"},U.openMode=function(t){return t==="drawline"||t==="drawopenpath"},U.rectMode=function(t){return t==="select"||t==="drawline"||t==="drawrect"||t==="drawcircle"},U.freeMode=function(t){return t==="lasso"||t==="drawclosedpath"||t==="drawopenpath"},U.selectingOrDrawing=function(t){return U.freeMode(t)||U.rectMode(t)}},86476:function(Q,U,t){var M=t(29128),E=t(52264),i=t(89184),C=t(3400).removeElement,T=t(33816),v=Q.exports={};v.align=t(78316),v.getCursor=t(67416);var d=t(2616);v.unhover=d.wrapped,v.unhoverRaw=d.raw,v.init=function(l){var n=l.gd,s=1,o=n._context.doubleClickDelay,p=l.element,b,h,_,a,c,f,x,k;n._mouseDownTime||(n._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=L,i?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=L,p.addEventListener("touchstart",L,{passive:!1})):p.ontouchstart=L;function y(S,w,I){return Math.abs(S)<I&&(S=0),Math.abs(w)<I&&(w=0),[S,w]}var A=l.clampFn||y;function L(S){n._dragged=!1,n._dragging=!0;var w=e(S);b=w[0],h=w[1],x=S.target,f=S,k=S.buttons===2||S.ctrlKey,typeof S.clientX>"u"&&typeof S.clientY>"u"&&(S.clientX=b,S.clientY=h),_=new Date().getTime(),_-n._mouseDownTime<o?s+=1:(s=1,n._mouseDownTime=_),l.prepFn&&l.prepFn(S,b,h),E&&!k?(c=r(),c.style.cursor=window.getComputedStyle(p).cursor):E||(c=document,a=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),l.dragmode!==!1&&(S.preventDefault(),document.addEventListener("mousemove",u),document.addEventListener("touchmove",u,{passive:!1}))}function u(S){S.preventDefault();var w=e(S),I=l.minDrag||T.MINDRAG,O=A(w[0]-b,w[1]-h,I),D=O[0],P=O[1];(D||P)&&(n._dragged=!0,v.unhover(n,S)),n._dragged&&l.moveFn&&!k&&(n._dragdata={element:p,dx:D,dy:P},l.moveFn(D,P))}function m(S){if(delete n._dragdata,l.dragmode!==!1&&(S.preventDefault(),document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u)),document.removeEventListener("mouseup",m),document.removeEventListener("touchend",m),E?C(c):a&&(c.documentElement.style.cursor=a,a=null),!n._dragging){n._dragged=!1;return}if(n._dragging=!1,new Date().getTime()-n._mouseDownTime>o&&(s=Math.max(s-1,1)),n._dragged)l.doneFn&&l.doneFn();else if(l.clickFn&&l.clickFn(s,f),!k){var w;try{w=new MouseEvent("click",S)}catch{var I=e(S);w=document.createEvent("MouseEvents"),w.initMouseEvent("click",S.bubbles,S.cancelable,S.view,S.detail,S.screenX,S.screenY,I[0],I[1],S.ctrlKey,S.altKey,S.shiftKey,S.metaKey,S.button,S.relatedTarget)}x.dispatchEvent(w)}n._dragging=!1,n._dragged=!1}};function r(){var l=document.createElement("div");l.className="dragcover";var n=l.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(l),l}v.coverSlip=r;function e(l){return M(l.changedTouches?l.changedTouches[0]:l,document.body)}},2616:function(Q,U,t){var M=t(95924),E=t(91200),i=t(52200).getGraphDiv,C=t(92456),T=Q.exports={};T.wrapped=function(v,d,r){v=i(v),v._fullLayout&&E.clear(v._fullLayout._uid+C.HOVERID),T.raw(v,d,r)},T.raw=function(v,d){var r=v._fullLayout,e=v._hoverdata;d||(d={}),!(d.target&&!v._dragged&&M.triggerHandler(v,"plotly_beforehover",d)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),v._hoverdata=void 0,d.target&&e&&v.emit("plotly_unhover",{event:d,points:e}))}},98192:function(Q,U){U.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},U.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(Q,U,t){var M=t(33428),E=t(3400),i=E.numberFormat,C=t(38248),T=t(49760),v=t(24040),d=t(76308),r=t(8932),e=E.strTranslate,l=t(72736),n=t(9616),s=t(84284),o=s.LINE_SPACING,p=t(13448).DESELECTDIM,b=t(43028),h=t(7152),_=t(10624).appendArrayPointValue,a=Q.exports={};a.font=function(gt,mt,vt,At){E.isPlainObject(mt)&&(At=mt.color,vt=mt.size,mt=mt.family),mt&&gt.style("font-family",mt),vt+1&&gt.style("font-size",vt+"px"),At&&gt.call(d.fill,At)},a.setPosition=function(gt,mt,vt){gt.attr("x",mt).attr("y",vt)},a.setSize=function(gt,mt,vt){gt.attr("width",mt).attr("height",vt)},a.setRect=function(gt,mt,vt,At,Ot){gt.call(a.setPosition,mt,vt).call(a.setSize,At,Ot)},a.translatePoint=function(gt,mt,vt,At){var Ot=vt.c2p(gt.x),It=At.c2p(gt.y);if(C(Ot)&&C(It)&&mt.node())mt.node().nodeName==="text"?mt.attr("x",Ot).attr("y",It):mt.attr("transform",e(Ot,It));else return!1;return!0},a.translatePoints=function(gt,mt,vt){gt.each(function(At){var Ot=M.select(this);a.translatePoint(At,Ot,mt,vt)})},a.hideOutsideRangePoint=function(gt,mt,vt,At,Ot,It){mt.attr("display",vt.isPtWithinRange(gt,Ot)&&At.isPtWithinRange(gt,It)?null:"none")},a.hideOutsideRangePoints=function(gt,mt){if(mt._hasClipOnAxisFalse){var vt=mt.xaxis,At=mt.yaxis;gt.each(function(Ot){var It=Ot[0].trace,St=It.xcalendar,Bt=It.ycalendar,re=v.traceIs(It,"bar-like")?".bartext":".point,.textpoint";gt.selectAll(re).each(function(Yt){a.hideOutsideRangePoint(Yt,M.select(this),vt,At,St,Bt)})})}},a.crispRound=function(gt,mt,vt){return!mt||!C(mt)?vt||0:gt._context.staticPlot?mt:mt<1?1:Math.round(mt)},a.singleLineStyle=function(gt,mt,vt,At,Ot){mt.style("fill","none");var It=(((gt||[])[0]||{}).trace||{}).line||{},St=vt||It.width||0,Bt=Ot||It.dash||"";d.stroke(mt,At||It.color),a.dashLine(mt,Bt,St)},a.lineGroupStyle=function(gt,mt,vt,At){gt.style("fill","none").each(function(Ot){var It=(((Ot||[])[0]||{}).trace||{}).line||{},St=mt||It.width||0,Bt=At||It.dash||"";M.select(this).call(d.stroke,vt||It.color).call(a.dashLine,Bt,St)})},a.dashLine=function(gt,mt,vt){vt=+vt||0,mt=a.dashStyle(mt,vt),gt.style({"stroke-dasharray":mt,"stroke-width":vt+"px"})},a.dashStyle=function(gt,mt){mt=+mt||1;var vt=Math.max(mt,3);return gt==="solid"?gt="":gt==="dot"?gt=vt+"px,"+vt+"px":gt==="dash"?gt=3*vt+"px,"+3*vt+"px":gt==="longdash"?gt=5*vt+"px,"+5*vt+"px":gt==="dashdot"?gt=3*vt+"px,"+vt+"px,"+vt+"px,"+vt+"px":gt==="longdashdot"&&(gt=5*vt+"px,"+2*vt+"px,"+vt+"px,"+2*vt+"px"),gt};function c(gt,mt,vt,At){var Ot=mt.fillpattern,It=mt.fillgradient,St=Ot&&a.getPatternAttr(Ot.shape,0,"");if(St){var Bt=a.getPatternAttr(Ot.bgcolor,0,null),re=a.getPatternAttr(Ot.fgcolor,0,null),Yt=Ot.fgopacity,he=a.getPatternAttr(Ot.size,0,8),Zt=a.getPatternAttr(Ot.solidity,0,.3),ae=mt.uid;a.pattern(gt,"point",vt,ae,St,he,Zt,void 0,Ot.fillmode,Bt,re,Yt)}else if(It&&It.type!=="none"){var oe=It.type,ce="scatterfill-"+mt.uid;if(At&&(ce="legendfill-"+mt.uid),!At&&(It.start!==void 0||It.stop!==void 0)){var ue,ye;oe==="horizontal"?(ue={x:It.start,y:0},ye={x:It.stop,y:0}):oe==="vertical"&&(ue={x:0,y:It.start},ye={x:0,y:It.stop}),ue.x=mt._xA.c2p(ue.x===void 0?mt._extremes.x.min[0].val:ue.x,!0),ue.y=mt._yA.c2p(ue.y===void 0?mt._extremes.y.min[0].val:ue.y,!0),ye.x=mt._xA.c2p(ye.x===void 0?mt._extremes.x.max[0].val:ye.x,!0),ye.y=mt._yA.c2p(ye.y===void 0?mt._extremes.y.max[0].val:ye.y,!0),gt.call(u,vt,ce,"linear",It.colorscale,"fill",ue,ye,!0,!1)}else oe==="horizontal"&&(oe=oe+"reversed"),gt.call(a.gradient,vt,ce,oe,It.colorscale,"fill")}else mt.fillcolor&&gt.call(d.fill,mt.fillcolor)}a.singleFillStyle=function(gt,mt){var vt=M.select(gt.node()),At=vt.data(),Ot=((At[0]||[])[0]||{}).trace||{};c(gt,Ot,mt,!1)},a.fillGroupStyle=function(gt,mt,vt){gt.style("stroke-width",0).each(function(At){var Ot=M.select(this);At[0].trace&&c(Ot,At[0].trace,mt,vt)})};var f=t(71984);a.symbolNames=[],a.symbolFuncs=[],a.symbolBackOffs=[],a.symbolNeedLines={},a.symbolNoDot={},a.symbolNoFill={},a.symbolList=[],Object.keys(f).forEach(function(gt){var mt=f[gt],vt=mt.n;a.symbolList.push(vt,String(vt),gt,vt+100,String(vt+100),gt+"-open"),a.symbolNames[vt]=gt,a.symbolFuncs[vt]=mt.f,a.symbolBackOffs[vt]=mt.backoff||0,mt.needLine&&(a.symbolNeedLines[vt]=!0),mt.noDot?a.symbolNoDot[vt]=!0:a.symbolList.push(vt+200,String(vt+200),gt+"-dot",vt+300,String(vt+300),gt+"-open-dot"),mt.noFill&&(a.symbolNoFill[vt]=!0)});var x=a.symbolNames.length,k="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";a.symbolNumber=function(gt){if(C(gt))gt=+gt;else if(typeof gt=="string"){var mt=0;gt.indexOf("-open")>0&&(mt=100,gt=gt.replace("-open","")),gt.indexOf("-dot")>0&&(mt+=200,gt=gt.replace("-dot","")),gt=a.symbolNames.indexOf(gt),gt>=0&&(gt+=mt)}return gt%100>=x||gt>=400?0:Math.floor(Math.max(gt,0))};function y(gt,mt,vt,At){var Ot=gt%100;return a.symbolFuncs[Ot](mt,vt,At)+(gt>=200?k:"")}var A=i("~f"),L={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};a.gradient=function(gt,mt,vt,At,Ot,It){var St=L[At];return u(gt,mt,vt,St.type,Ot,It,St.start,St.stop,!1,St.reversed)};function u(gt,mt,vt,At,Ot,It,St,Bt,re,Yt){var he=Ot.length,Zt;At==="linear"?Zt={node:"linearGradient",attrs:{x1:St.x,y1:St.y,x2:Bt.x,y2:Bt.y,gradientUnits:re?"userSpaceOnUse":"objectBoundingBox"},reversed:Yt}:At==="radial"&&(Zt={node:"radialGradient",reversed:Yt});for(var ae=new Array(he),oe=0;oe<he;oe++)Zt.reversed?ae[he-1-oe]=[A((1-Ot[oe][0])*100),Ot[oe][1]]:ae[oe]=[A(Ot[oe][0]*100),Ot[oe][1]];var ce=mt._fullLayout,ue="g"+ce._uid+"-"+vt,ye=ce._defs.select(".gradients").selectAll("#"+ue).data([At+ae.join(";")],E.identity);ye.exit().remove(),ye.enter().append(Zt.node).each(function(){var Tt=M.select(this);Zt.attrs&&Tt.attr(Zt.attrs),Tt.attr("id",ue);var Ft=Tt.selectAll("stop").data(ae);Ft.exit().remove(),Ft.enter().append("stop"),Ft.each(function($t){var Vt=T($t[1]);M.select(this).attr({offset:$t[0]+"%","stop-color":d.tinyRGB(Vt),"stop-opacity":Vt.getAlpha()})})}),gt.style(It,q(ue,mt)).style(It+"-opacity",null),gt.classed("gradient_filled",!0)}a.pattern=function(gt,mt,vt,At,Ot,It,St,Bt,re,Yt,he,Zt){var ae=mt==="legend";Bt&&(re==="overlay"?(Yt=Bt,he=d.contrast(Yt)):(Yt=void 0,he=Bt));var oe=vt._fullLayout,ce="p"+oe._uid+"-"+At,ue,ye,Tt=function(Gt,te,ne,je,Ne){return je+(Ne-je)*(Gt-te)/(ne-te)},Ft,$t,Vt,Nt,Mt={},Et=T(he),Dt=d.tinyRGB(Et),dt=Et.getAlpha(),ht=Zt*dt;switch(Ot){case"/":ue=It*Math.sqrt(2),ye=It*Math.sqrt(2),Ft="M-"+ue/4+","+ye/4+"l"+ue/2+",-"+ye/2+"M0,"+ye+"L"+ue+",0M"+ue/4*3+","+ye/4*5+"l"+ue/2+",-"+ye/2,$t=St*It,Nt="path",Mt={d:Ft,opacity:ht,stroke:Dt,"stroke-width":$t+"px"};break;case"\\":ue=It*Math.sqrt(2),ye=It*Math.sqrt(2),Ft="M"+ue/4*3+",-"+ye/4+"l"+ue/2+","+ye/2+"M0,0L"+ue+","+ye+"M-"+ue/4+","+ye/4*3+"l"+ue/2+","+ye/2,$t=St*It,Nt="path",Mt={d:Ft,opacity:ht,stroke:Dt,"stroke-width":$t+"px"};break;case"x":ue=It*Math.sqrt(2),ye=It*Math.sqrt(2),Ft="M-"+ue/4+","+ye/4+"l"+ue/2+",-"+ye/2+"M0,"+ye+"L"+ue+",0M"+ue/4*3+","+ye/4*5+"l"+ue/2+",-"+ye/2+"M"+ue/4*3+",-"+ye/4+"l"+ue/2+","+ye/2+"M0,0L"+ue+","+ye+"M-"+ue/4+","+ye/4*3+"l"+ue/2+","+ye/2,$t=It-It*Math.sqrt(1-St),Nt="path",Mt={d:Ft,opacity:ht,stroke:Dt,"stroke-width":$t+"px"};break;case"|":ue=It,ye=It,Nt="path",Ft="M"+ue/2+",0L"+ue/2+","+ye,$t=St*It,Nt="path",Mt={d:Ft,opacity:ht,stroke:Dt,"stroke-width":$t+"px"};break;case"-":ue=It,ye=It,Nt="path",Ft="M0,"+ye/2+"L"+ue+","+ye/2,$t=St*It,Nt="path",Mt={d:Ft,opacity:ht,stroke:Dt,"stroke-width":$t+"px"};break;case"+":ue=It,ye=It,Nt="path",Ft="M"+ue/2+",0L"+ue/2+","+ye+"M0,"+ye/2+"L"+ue+","+ye/2,$t=It-It*Math.sqrt(1-St),Nt="path",Mt={d:Ft,opacity:ht,stroke:Dt,"stroke-width":$t+"px"};break;case".":ue=It,ye=It,St<Math.PI/4?Vt=Math.sqrt(St*It*It/Math.PI):Vt=Tt(St,Math.PI/4,1,It/2,It/Math.sqrt(2)),Nt="circle",Mt={cx:ue/2,cy:ye/2,r:Vt,opacity:ht,fill:Dt};break}var bt=[Ot||"noSh",Yt||"noBg",he||"noFg",It,St].join(";"),Pt=oe._defs.select(".patterns").selectAll("#"+ce).data([bt],E.identity);Pt.exit().remove(),Pt.enter().append("pattern").each(function(){var Gt=M.select(this);if(Gt.attr({id:ce,width:ue+"px",height:ye+"px",patternUnits:"userSpaceOnUse",patternTransform:ae?"scale(0.8)":""}),Yt){var te=T(Yt),ne=d.tinyRGB(te),je=te.getAlpha(),Ne=Gt.selectAll("rect").data([0]);Ne.exit().remove(),Ne.enter().append("rect").attr({width:ue+"px",height:ye+"px",fill:ne,"fill-opacity":je})}var ge=Gt.selectAll(Nt).data([0]);ge.exit().remove(),ge.enter().append(Nt).attr(Mt)}),gt.style("fill",q(ce,vt)).style("fill-opacity",null),gt.classed("pattern_filled",!0)},a.initGradients=function(gt){var mt=gt._fullLayout,vt=E.ensureSingle(mt._defs,"g","gradients");vt.selectAll("linearGradient,radialGradient").remove(),M.select(gt).selectAll(".gradient_filled").classed("gradient_filled",!1)},a.initPatterns=function(gt){var mt=gt._fullLayout,vt=E.ensureSingle(mt._defs,"g","patterns");vt.selectAll("pattern").remove(),M.select(gt).selectAll(".pattern_filled").classed("pattern_filled",!1)},a.getPatternAttr=function(gt,mt,vt){return gt&&E.isArrayOrTypedArray(gt)?mt<gt.length?gt[mt]:vt:gt},a.pointStyle=function(gt,mt,vt,At){if(gt.size()){var Ot=a.makePointStyleFns(mt);gt.each(function(It){a.singlePointStyle(It,M.select(this),mt,Ot,vt,At)})}},a.singlePointStyle=function(gt,mt,vt,At,Ot,It){var St=vt.marker,Bt=St.line;if(It&&It.i>=0&&gt.i===void 0&&(gt.i=It.i),mt.style("opacity",At.selectedOpacityFn?At.selectedOpacityFn(gt):gt.mo===void 0?St.opacity:gt.mo),At.ms2mrc){var re;gt.ms==="various"||St.size==="various"?re=3:re=At.ms2mrc(gt.ms),gt.mrc=re,At.selectedSizeFn&&(re=gt.mrc=At.selectedSizeFn(gt));var Yt=a.symbolNumber(gt.mx||St.symbol)||0;gt.om=Yt%200>=100;var he=Ct(gt,vt),Zt=V(gt,vt);mt.attr("d",y(Yt,re,he,Zt))}var ae=!1,oe,ce,ue;if(gt.so)ue=Bt.outlierwidth,ce=Bt.outliercolor,oe=St.outliercolor;else{var ye=(Bt||{}).width;ue=(gt.mlw+1||ye+1||(gt.trace?(gt.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in gt?ce=gt.mlcc=At.lineScale(gt.mlc):E.isArrayOrTypedArray(Bt.color)?ce=d.defaultLine:ce=Bt.color,E.isArrayOrTypedArray(St.color)&&(oe=d.defaultLine,ae=!0),"mc"in gt?oe=gt.mcc=At.markerScale(gt.mc):oe=St.color||St.colors||"rgba(0,0,0,0)",At.selectedColorFn&&(oe=At.selectedColorFn(gt))}if(gt.om)mt.call(d.stroke,oe).style({"stroke-width":(ue||1)+"px",fill:"none"});else{mt.style("stroke-width",(gt.isBlank?0:ue)+"px");var Tt=St.gradient,Ft=gt.mgt;Ft?ae=!0:Ft=Tt&&Tt.type,E.isArrayOrTypedArray(Ft)&&(Ft=Ft[0],L[Ft]||(Ft=0));var $t=St.pattern,Vt=$t&&a.getPatternAttr($t.shape,gt.i,"");if(Ft&&Ft!=="none"){var Nt=gt.mgc;Nt?ae=!0:Nt=Tt.color;var Mt=vt.uid;ae&&(Mt+="-"+gt.i),a.gradient(mt,Ot,Mt,Ft,[[0,Nt],[1,oe]],"fill")}else if(Vt){var Et=!1,Dt=$t.fgcolor;!Dt&&It&&It.color&&(Dt=It.color,Et=!0);var dt=a.getPatternAttr(Dt,gt.i,It&&It.color||null),ht=a.getPatternAttr($t.bgcolor,gt.i,null),bt=$t.fgopacity,Pt=a.getPatternAttr($t.size,gt.i,8),Gt=a.getPatternAttr($t.solidity,gt.i,.3);Et=Et||gt.mcc||E.isArrayOrTypedArray($t.shape)||E.isArrayOrTypedArray($t.bgcolor)||E.isArrayOrTypedArray($t.fgcolor)||E.isArrayOrTypedArray($t.size)||E.isArrayOrTypedArray($t.solidity);var te=vt.uid;Et&&(te+="-"+gt.i),a.pattern(mt,"point",Ot,te,Vt,Pt,Gt,gt.mcc,$t.fillmode,ht,dt,bt)}else E.isArrayOrTypedArray(oe)?d.fill(mt,oe[gt.i]):d.fill(mt,oe);ue&&d.stroke(mt,ce)}},a.makePointStyleFns=function(gt){var mt={},vt=gt.marker;return mt.markerScale=a.tryColorscale(vt,""),mt.lineScale=a.tryColorscale(vt,"line"),v.traceIs(gt,"symbols")&&(mt.ms2mrc=b.isBubble(gt)?h(gt):function(){return(vt.size||6)/2}),gt.selectedpoints&&E.extendFlat(mt,a.makeSelectedPointStyleFns(gt)),mt},a.makeSelectedPointStyleFns=function(gt){var mt={},vt=gt.selected||{},At=gt.unselected||{},Ot=gt.marker||{},It=vt.marker||{},St=At.marker||{},Bt=Ot.opacity,re=It.opacity,Yt=St.opacity,he=re!==void 0,Zt=Yt!==void 0;(E.isArrayOrTypedArray(Bt)||he||Zt)&&(mt.selectedOpacityFn=function(Vt){var Nt=Vt.mo===void 0?Ot.opacity:Vt.mo;return Vt.selected?he?re:Nt:Zt?Yt:p*Nt});var ae=Ot.color,oe=It.color,ce=St.color;(oe||ce)&&(mt.selectedColorFn=function(Vt){var Nt=Vt.mcc||ae;return Vt.selected?oe||Nt:ce||Nt});var ue=Ot.size,ye=It.size,Tt=St.size,Ft=ye!==void 0,$t=Tt!==void 0;return v.traceIs(gt,"symbols")&&(Ft||$t)&&(mt.selectedSizeFn=function(Vt){var Nt=Vt.mrc||ue/2;return Vt.selected?Ft?ye/2:Nt:$t?Tt/2:Nt}),mt},a.makeSelectedTextStyleFns=function(gt){var mt={},vt=gt.selected||{},At=gt.unselected||{},Ot=gt.textfont||{},It=vt.textfont||{},St=At.textfont||{},Bt=Ot.color,re=It.color,Yt=St.color;return mt.selectedTextColorFn=function(he){var Zt=he.tc||Bt;return he.selected?re||Zt:Yt||(re?Zt:d.addOpacity(Zt,p))},mt},a.selectedPointStyle=function(gt,mt){if(!(!gt.size()||!mt.selectedpoints)){var vt=a.makeSelectedPointStyleFns(mt),At=mt.marker||{},Ot=[];vt.selectedOpacityFn&&Ot.push(function(It,St){It.style("opacity",vt.selectedOpacityFn(St))}),vt.selectedColorFn&&Ot.push(function(It,St){d.fill(It,vt.selectedColorFn(St))}),vt.selectedSizeFn&&Ot.push(function(It,St){var Bt=St.mx||At.symbol||0,re=vt.selectedSizeFn(St);It.attr("d",y(a.symbolNumber(Bt),re,Ct(St,mt),V(St,mt))),St.mrc2=re}),Ot.length&&gt.each(function(It){for(var St=M.select(this),Bt=0;Bt<Ot.length;Bt++)Ot[Bt](St,It)})}},a.tryColorscale=function(gt,mt){var vt=mt?E.nestedProperty(gt,mt).get():gt;if(vt){var At=vt.color;if((vt.colorscale||vt._colorAx)&&E.isArrayOrTypedArray(At))return r.makeColorScaleFuncFromTrace(vt)}return E.identity};var m={start:1,end:-1,middle:0,bottom:1,top:-1};function S(gt,mt,vt,At,Ot){var It=M.select(gt.node().parentNode),St=mt.indexOf("top")!==-1?"top":mt.indexOf("bottom")!==-1?"bottom":"middle",Bt=mt.indexOf("left")!==-1?"end":mt.indexOf("right")!==-1?"start":"middle",re=At?At/.8+1:0,Yt=(l.lineCount(gt)-1)*o+1,he=m[Bt]*re,Zt=vt*.75+m[St]*re+(m[St]-1)*Yt*vt/2;gt.attr("text-anchor",Bt),Ot||It.attr("transform",e(he,Zt))}function w(gt,mt){var vt=gt.ts||mt.textfont.size;return C(vt)&&vt>0?vt:0}a.textPointStyle=function(gt,mt,vt){if(gt.size()){var At;if(mt.selectedpoints){var Ot=a.makeSelectedTextStyleFns(mt);At=Ot.selectedTextColorFn}var It=mt.texttemplate,St=vt._fullLayout;gt.each(function(Bt){var re=M.select(this),Yt=It?E.extractOption(Bt,mt,"txt","texttemplate"):E.extractOption(Bt,mt,"tx","text");if(!Yt&&Yt!==0){re.remove();return}if(It){var he=mt._module.formatLabels,Zt=he?he(Bt,mt,St):{},ae={};_(ae,mt,Bt.i);var oe=mt._meta||{};Yt=E.texttemplateString(Yt,Zt,St._d3locale,ae,Bt,oe)}var ce=Bt.tp||mt.textposition,ue=w(Bt,mt),ye=At?At(Bt):Bt.tc||mt.textfont.color;re.call(a.font,Bt.tf||mt.textfont.family,ue,ye).text(Yt).call(l.convertToTspans,vt).call(S,ce,ue,Bt.mrc)})}},a.selectedTextStyle=function(gt,mt){if(!(!gt.size()||!mt.selectedpoints)){var vt=a.makeSelectedTextStyleFns(mt);gt.each(function(At){var Ot=M.select(this),It=vt.selectedTextColorFn(At),St=At.tp||mt.textposition,Bt=w(At,mt);d.fill(Ot,It);var re=v.traceIs(mt,"bar-like");S(Ot,St,Bt,At.mrc2||At.mrc,re)})}};var I=.5;a.smoothopen=function(gt,mt){if(gt.length<3)return"M"+gt.join("L");var vt="M"+gt[0],At=[],Ot;for(Ot=1;Ot<gt.length-1;Ot++)At.push(B(gt[Ot-1],gt[Ot],gt[Ot+1],mt));for(vt+="Q"+At[0][0]+" "+gt[1],Ot=2;Ot<gt.length-1;Ot++)vt+="C"+At[Ot-2][1]+" "+At[Ot-1][0]+" "+gt[Ot];return vt+="Q"+At[gt.length-3][1]+" "+gt[gt.length-1],vt},a.smoothclosed=function(gt,mt){if(gt.length<3)return"M"+gt.join("L")+"Z";var vt="M"+gt[0],At=gt.length-1,Ot=[B(gt[At],gt[0],gt[1],mt)],It;for(It=1;It<At;It++)Ot.push(B(gt[It-1],gt[It],gt[It+1],mt));for(Ot.push(B(gt[At-1],gt[At],gt[0],mt)),It=1;It<=At;It++)vt+="C"+Ot[It-1][1]+" "+Ot[It][0]+" "+gt[It];return vt+="C"+Ot[At][1]+" "+Ot[0][0]+" "+gt[0]+"Z",vt};var O,D;function P(gt,mt,vt){return vt&&(gt=X(gt)),mt?R(gt[1]):F(gt[0])}function F(gt){var mt=M.round(gt,2);return O=mt,mt}function R(gt){var mt=M.round(gt,2);return D=mt,mt}function B(gt,mt,vt,At){var Ot=gt[0]-mt[0],It=gt[1]-mt[1],St=vt[0]-mt[0],Bt=vt[1]-mt[1],re=Math.pow(Ot*Ot+It*It,I/2),Yt=Math.pow(St*St+Bt*Bt,I/2),he=(Yt*Yt*Ot-re*re*St)*At,Zt=(Yt*Yt*It-re*re*Bt)*At,ae=3*Yt*(re+Yt),oe=3*re*(re+Yt);return[[F(mt[0]+(ae&&he/ae)),R(mt[1]+(ae&&Zt/ae))],[F(mt[0]-(oe&&he/oe)),R(mt[1]-(oe&&Zt/oe))]]}var N={hv:function(gt,mt,vt){return"H"+F(mt[0])+"V"+P(mt,1,vt)},vh:function(gt,mt,vt){return"V"+R(mt[1])+"H"+P(mt,0,vt)},hvh:function(gt,mt,vt){return"H"+F((gt[0]+mt[0])/2)+"V"+R(mt[1])+"H"+P(mt,0,vt)},vhv:function(gt,mt,vt){return"V"+R((gt[1]+mt[1])/2)+"H"+F(mt[0])+"V"+P(mt,1,vt)}},G=function(gt,mt,vt){return"L"+P(mt,0,vt)+","+P(mt,1,vt)};a.steps=function(gt){var mt=N[gt]||G;return function(vt){for(var At="M"+F(vt[0][0])+","+R(vt[0][1]),Ot=vt.length,It=1;It<Ot;It++)At+=mt(vt[It-1],vt[It],It===Ot-1);return At}};function X(gt,mt){var vt=gt.backoff,At=gt.trace,Ot=gt.d,It=gt.i;if(vt&&At&&At.marker&&At.marker.angle%360===0&&At.line&&At.line.shape!=="spline"){var St=E.isArrayOrTypedArray(vt),Bt=gt,re=mt?mt[0]:O||0,Yt=mt?mt[1]:D||0,he=Bt[0],Zt=Bt[1],ae=he-re,oe=Zt-Yt,ce=Math.atan2(oe,ae),ue=St?vt[It]:vt;if(ue==="auto"){var ye=Bt.i;At.type==="scatter"&&ye--;var Tt=Bt.marker,Ft=Tt.symbol;E.isArrayOrTypedArray(Ft)&&(Ft=Ft[ye]);var $t=Tt.size;E.isArrayOrTypedArray($t)&&($t=$t[ye]),ue=Tt?a.symbolBackOffs[a.symbolNumber(Ft)]*$t:0,ue+=a.getMarkerStandoff(Ot[ye],At)||0}var Vt=he-ue*Math.cos(ce),Nt=Zt-ue*Math.sin(ce);(Vt<=he&&Vt>=re||Vt>=he&&Vt<=re)&&(Nt<=Zt&&Nt>=Yt||Nt>=Zt&&Nt<=Yt)&&(gt=[Vt,Nt])}return gt}a.applyBackoff=X,a.makeTester=function(){var gt=E.ensureSingleById(M.select("body"),"svg","js-plotly-tester",function(vt){vt.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),mt=E.ensureSingle(gt,"path","js-reference-point",function(vt){vt.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});a.tester=gt,a.testref=mt},a.savedBBoxes={};var J=0,it=1e4;a.bBox=function(gt,mt,vt){vt||(vt=nt(gt));var At;if(vt){if(At=a.savedBBoxes[vt],At)return E.extendFlat({},At)}else if(gt.childNodes.length===1){var Ot=gt.childNodes[0];if(vt=nt(Ot),vt){var It=+Ot.getAttribute("x")||0,St=+Ot.getAttribute("y")||0,Bt=Ot.getAttribute("transform");if(!Bt){var re=a.bBox(Ot,!1,vt);return It&&(re.left+=It,re.right+=It),St&&(re.top+=St,re.bottom+=St),re}if(vt+="~"+It+"~"+St+"~"+Bt,At=a.savedBBoxes[vt],At)return E.extendFlat({},At)}}var Yt,he;mt?Yt=gt:(he=a.tester.node(),Yt=gt.cloneNode(!0),he.appendChild(Yt)),M.select(Yt).attr("transform",null).call(l.positionText,0,0);var Zt=Yt.getBoundingClientRect(),ae=a.testref.node().getBoundingClientRect();mt||he.removeChild(Yt);var oe={height:Zt.height,width:Zt.width,left:Zt.left-ae.left,top:Zt.top-ae.top,right:Zt.right-ae.left,bottom:Zt.bottom-ae.top};return J>=it&&(a.savedBBoxes={},J=0),vt&&(a.savedBBoxes[vt]=oe),J++,E.extendFlat({},oe)};function nt(gt){var mt=gt.getAttribute("data-unformatted");if(mt!==null)return mt+gt.getAttribute("data-math")+gt.getAttribute("text-anchor")+gt.getAttribute("style")}a.setClipUrl=function(gt,mt,vt){gt.attr("clip-path",q(mt,vt))};function q(gt,mt){if(!gt)return null;var vt=mt._context,At=vt._exportedPlot?"":vt._baseUrl||"";return At?"url('"+At+"#"+gt+"')":"url(#"+gt+")"}a.getTranslate=function(gt){var mt=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,vt=gt.attr?"attr":"getAttribute",At=gt[vt]("transform")||"",Ot=At.replace(mt,function(It,St,Bt){return[St,Bt].join(" ")}).split(" ");return{x:+Ot[0]||0,y:+Ot[1]||0}},a.setTranslate=function(gt,mt,vt){var At=/(\btranslate\(.*?\);?)/,Ot=gt.attr?"attr":"getAttribute",It=gt.attr?"attr":"setAttribute",St=gt[Ot]("transform")||"";return mt=mt||0,vt=vt||0,St=St.replace(At,"").trim(),St+=e(mt,vt),St=St.trim(),gt[It]("transform",St),St},a.getScale=function(gt){var mt=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,vt=gt.attr?"attr":"getAttribute",At=gt[vt]("transform")||"",Ot=At.replace(mt,function(It,St,Bt){return[St,Bt].join(" ")}).split(" ");return{x:+Ot[0]||1,y:+Ot[1]||1}},a.setScale=function(gt,mt,vt){var At=/(\bscale\(.*?\);?)/,Ot=gt.attr?"attr":"getAttribute",It=gt.attr?"attr":"setAttribute",St=gt[Ot]("transform")||"";return mt=mt||1,vt=vt||1,St=St.replace(At,"").trim(),St+="scale("+mt+","+vt+")",St=St.trim(),gt[It]("transform",St),St};var Z=/\s*sc.*/;a.setPointGroupScale=function(gt,mt,vt){if(mt=mt||1,vt=vt||1,!!gt){var At=mt===1&&vt===1?"":"scale("+mt+","+vt+")";gt.each(function(){var Ot=(this.getAttribute("transform")||"").replace(Z,"");Ot+=At,Ot=Ot.trim(),this.setAttribute("transform",Ot)})}};var $=/translate\([^)]*\)\s*$/;a.setTextPointsScale=function(gt,mt,vt){gt&&gt.each(function(){var At,Ot=M.select(this),It=Ot.select("text");if(It.node()){var St=parseFloat(It.attr("x")||0),Bt=parseFloat(It.attr("y")||0),re=(Ot.attr("transform")||"").match($);mt===1&&vt===1?At=[]:At=[e(St,Bt),"scale("+mt+","+vt+")",e(-St,-Bt)],re&&At.push(re),Ot.attr("transform",At.join(""))}})};function V(gt,mt){var vt;return gt&&(vt=gt.mf),vt===void 0&&(vt=mt.marker&&mt.marker.standoff||0),!mt._geo&&!mt._xA?-vt:vt}a.getMarkerStandoff=V;var rt=Math.atan2,ot=Math.cos,H=Math.sin;function Y(gt,mt){var vt=mt[0],At=mt[1];return[vt*ot(gt)-At*H(gt),vt*H(gt)+At*ot(gt)]}var at,et,ct,ft,yt,xt;function Ct(gt,mt){var vt=gt.ma;vt===void 0&&(vt=mt.marker.angle,(!vt||E.isArrayOrTypedArray(vt))&&(vt=0));var At,Ot,It=mt.marker.angleref;if(It==="previous"||It==="north"){if(mt._geo){var St=mt._geo.project(gt.lonlat);At=St[0],Ot=St[1]}else{var Bt=mt._xA,re=mt._yA;if(Bt&&re)At=Bt.c2p(gt.x),Ot=re.c2p(gt.y);else return 90}if(mt._geo){var Yt=gt.lonlat[0],he=gt.lonlat[1],Zt=mt._geo.project([Yt,he+1e-5]),ae=mt._geo.project([Yt+1e-5,he]),oe=rt(ae[1]-Ot,ae[0]-At),ce=rt(Zt[1]-Ot,Zt[0]-At),ue;if(It==="north")ue=vt/180*Math.PI;else if(It==="previous"){var ye=Yt/180*Math.PI,Tt=he/180*Math.PI,Ft=at/180*Math.PI,$t=et/180*Math.PI,Vt=Ft-ye,Nt=ot($t)*H(Vt),Mt=H($t)*ot(Tt)-ot($t)*H(Tt)*ot(Vt);ue=-rt(Nt,Mt)-Math.PI,at=Yt,et=he}var Et=Y(oe,[ot(ue),0]),Dt=Y(ce,[H(ue),0]);vt=rt(Et[1]+Dt[1],Et[0]+Dt[0])/Math.PI*180,It==="previous"&&!(xt===mt.uid&&gt.i===yt+1)&&(vt=null)}if(It==="previous"&&!mt._geo)if(xt===mt.uid&&gt.i===yt+1&&C(At)&&C(Ot)){var dt=At-ct,ht=Ot-ft,bt=mt.line&&mt.line.shape||"",Pt=bt.slice(bt.length-1);Pt==="h"&&(ht=0),Pt==="v"&&(dt=0),vt+=rt(ht,dt)/Math.PI*180+90}else vt=null}return ct=At,ft=Ot,yt=gt.i,xt=mt.uid,vt}a.getMarkerAngle=Ct},71984:function(Q,U,t){var M=t(21984),E=t(33428).round,i="M0,0Z",C=Math.sqrt(2),T=Math.sqrt(3),v=Math.PI,d=Math.cos,r=Math.sin;Q.exports={circle:{n:0,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c="M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z";return _?p(h,_,c):c}},square:{n:1,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")}},diamond:{n:2,f:function(b,h,_){if(e(h))return i;var a=E(b*1.3,2);return p(h,_,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"Z")}},cross:{n:3,f:function(b,h,_){if(e(h))return i;var a=E(b*.4,2),c=E(b*1.2,2);return p(h,_,"M"+c+","+a+"H"+a+"V"+c+"H-"+a+"V"+a+"H-"+c+"V-"+a+"H-"+a+"V-"+c+"H"+a+"V-"+a+"H"+c+"Z")}},x:{n:4,f:function(b,h,_){if(e(h))return i;var a=E(b*.8/C,2),c="l"+a+","+a,f="l"+a+",-"+a,x="l-"+a+",-"+a,k="l-"+a+","+a;return p(h,_,"M0,"+a+c+f+x+f+x+k+x+k+c+k+c+"Z")}},"triangle-up":{n:5,f:function(b,h,_){if(e(h))return i;var a=E(b*2/T,2),c=E(b/2,2),f=E(b,2);return p(h,_,"M-"+a+","+c+"H"+a+"L0,-"+f+"Z")}},"triangle-down":{n:6,f:function(b,h,_){if(e(h))return i;var a=E(b*2/T,2),c=E(b/2,2),f=E(b,2);return p(h,_,"M-"+a+",-"+c+"H"+a+"L0,"+f+"Z")}},"triangle-left":{n:7,f:function(b,h,_){if(e(h))return i;var a=E(b*2/T,2),c=E(b/2,2),f=E(b,2);return p(h,_,"M"+c+",-"+a+"V"+a+"L-"+f+",0Z")}},"triangle-right":{n:8,f:function(b,h,_){if(e(h))return i;var a=E(b*2/T,2),c=E(b/2,2),f=E(b,2);return p(h,_,"M-"+c+",-"+a+"V"+a+"L"+f+",0Z")}},"triangle-ne":{n:9,f:function(b,h,_){if(e(h))return i;var a=E(b*.6,2),c=E(b*1.2,2);return p(h,_,"M-"+c+",-"+a+"H"+a+"V"+c+"Z")}},"triangle-se":{n:10,f:function(b,h,_){if(e(h))return i;var a=E(b*.6,2),c=E(b*1.2,2);return p(h,_,"M"+a+",-"+c+"V"+a+"H-"+c+"Z")}},"triangle-sw":{n:11,f:function(b,h,_){if(e(h))return i;var a=E(b*.6,2),c=E(b*1.2,2);return p(h,_,"M"+c+","+a+"H-"+a+"V-"+c+"Z")}},"triangle-nw":{n:12,f:function(b,h,_){if(e(h))return i;var a=E(b*.6,2),c=E(b*1.2,2);return p(h,_,"M-"+a+","+c+"V-"+a+"H"+c+"Z")}},pentagon:{n:13,f:function(b,h,_){if(e(h))return i;var a=E(b*.951,2),c=E(b*.588,2),f=E(-b,2),x=E(b*-.309,2),k=E(b*.809,2);return p(h,_,"M"+a+","+x+"L"+c+","+k+"H-"+c+"L-"+a+","+x+"L0,"+f+"Z")}},hexagon:{n:14,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b/2,2),f=E(b*T/2,2);return p(h,_,"M"+f+",-"+c+"V"+c+"L0,"+a+"L-"+f+","+c+"V-"+c+"L0,-"+a+"Z")}},hexagon2:{n:15,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b/2,2),f=E(b*T/2,2);return p(h,_,"M-"+c+","+f+"H"+c+"L"+a+",0L"+c+",-"+f+"H-"+c+"L-"+a+",0Z")}},octagon:{n:16,f:function(b,h,_){if(e(h))return i;var a=E(b*.924,2),c=E(b*.383,2);return p(h,_,"M-"+c+",-"+a+"H"+c+"L"+a+",-"+c+"V"+c+"L"+c+","+a+"H-"+c+"L-"+a+","+c+"V-"+c+"Z")}},star:{n:17,f:function(b,h,_){if(e(h))return i;var a=b*1.4,c=E(a*.225,2),f=E(a*.951,2),x=E(a*.363,2),k=E(a*.588,2),y=E(-a,2),A=E(a*-.309,2),L=E(a*.118,2),u=E(a*.809,2),m=E(a*.382,2);return p(h,_,"M"+c+","+A+"H"+f+"L"+x+","+L+"L"+k+","+u+"L0,"+m+"L-"+k+","+u+"L-"+x+","+L+"L-"+f+","+A+"H-"+c+"L0,"+y+"Z")}},hexagram:{n:18,f:function(b,h,_){if(e(h))return i;var a=E(b*.66,2),c=E(b*.38,2),f=E(b*.76,2);return p(h,_,"M-"+f+",0l-"+c+",-"+a+"h"+f+"l"+c+",-"+a+"l"+c+","+a+"h"+f+"l-"+c+","+a+"l"+c+","+a+"h-"+f+"l-"+c+","+a+"l-"+c+",-"+a+"h-"+f+"Z")}},"star-triangle-up":{n:19,f:function(b,h,_){if(e(h))return i;var a=E(b*T*.8,2),c=E(b*.8,2),f=E(b*1.6,2),x=E(b*4,2),k="A "+x+","+x+" 0 0 1 ";return p(h,_,"M-"+a+","+c+k+a+","+c+k+"0,-"+f+k+"-"+a+","+c+"Z")}},"star-triangle-down":{n:20,f:function(b,h,_){if(e(h))return i;var a=E(b*T*.8,2),c=E(b*.8,2),f=E(b*1.6,2),x=E(b*4,2),k="A "+x+","+x+" 0 0 1 ";return p(h,_,"M"+a+",-"+c+k+"-"+a+",-"+c+k+"0,"+f+k+a+",-"+c+"Z")}},"star-square":{n:21,f:function(b,h,_){if(e(h))return i;var a=E(b*1.1,2),c=E(b*2,2),f="A "+c+","+c+" 0 0 1 ";return p(h,_,"M-"+a+",-"+a+f+"-"+a+","+a+f+a+","+a+f+a+",-"+a+f+"-"+a+",-"+a+"Z")}},"star-diamond":{n:22,f:function(b,h,_){if(e(h))return i;var a=E(b*1.4,2),c=E(b*1.9,2),f="A "+c+","+c+" 0 0 1 ";return p(h,_,"M-"+a+",0"+f+"0,"+a+f+a+",0"+f+"0,-"+a+f+"-"+a+",0Z")}},"diamond-tall":{n:23,f:function(b,h,_){if(e(h))return i;var a=E(b*.7,2),c=E(b*1.4,2);return p(h,_,"M0,"+c+"L"+a+",0L0,-"+c+"L-"+a+",0Z")}},"diamond-wide":{n:24,f:function(b,h,_){if(e(h))return i;var a=E(b*1.4,2),c=E(b*.7,2);return p(h,_,"M0,"+c+"L"+a+",0L0,-"+c+"L-"+a+",0Z")}},hourglass:{n:25,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+","+a+"H-"+a+"L"+a+",-"+a+"H-"+a+"Z")},noDot:!0},bowtie:{n:26,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+","+a+"V-"+a+"L-"+a+","+a+"V-"+a+"Z")},noDot:!0},"circle-cross":{n:27,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b/C,2);return p(h,_,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+a+",0A"+a+","+a+" 0 1,1 0,-"+a+"A"+a+","+a+" 0 0,1 "+a+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a+"M"+a+","+a+"H-"+a+"V-"+a+"H"+a+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(b,h,_){if(e(h))return i;var a=E(b*1.3,2);return p(h,_,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM0,-"+a+"V"+a+"M-"+a+",0H"+a)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(b,h,_){if(e(h))return i;var a=E(b*1.3,2),c=E(b*.65,2);return p(h,_,"M"+a+",0L0,"+a+"L-"+a+",0L0,-"+a+"ZM-"+c+",-"+c+"L"+c+","+c+"M-"+c+","+c+"L"+c+",-"+c)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(b,h,_){if(e(h))return i;var a=E(b*1.4,2);return p(h,_,"M0,"+a+"V-"+a+"M"+a+",0H-"+a)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+","+a+"L-"+a+",-"+a+"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(b,h,_){if(e(h))return i;var a=E(b*1.2,2),c=E(b*.85,2);return p(h,_,"M0,"+a+"V-"+a+"M"+a+",0H-"+a+"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(b,h,_){if(e(h))return i;var a=E(b/2,2),c=E(b,2);return p(h,_,"M"+a+","+c+"V-"+c+"M"+(a-c)+",-"+c+"V"+c+"M"+c+","+a+"H-"+c+"M-"+c+","+(a-c)+"H"+c)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(b,h,_){if(e(h))return i;var a=E(b*1.2,2),c=E(b*1.6,2),f=E(b*.8,2);return p(h,_,"M-"+a+","+f+"L0,0M"+a+","+f+"L0,0M0,-"+c+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(b,h,_){if(e(h))return i;var a=E(b*1.2,2),c=E(b*1.6,2),f=E(b*.8,2);return p(h,_,"M-"+a+",-"+f+"L0,0M"+a+",-"+f+"L0,0M0,"+c+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(b,h,_){if(e(h))return i;var a=E(b*1.2,2),c=E(b*1.6,2),f=E(b*.8,2);return p(h,_,"M"+f+","+a+"L0,0M"+f+",-"+a+"L0,0M-"+c+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(b,h,_){if(e(h))return i;var a=E(b*1.2,2),c=E(b*1.6,2),f=E(b*.8,2);return p(h,_,"M-"+f+","+a+"L0,0M-"+f+",-"+a+"L0,0M"+c+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(b,h,_){if(e(h))return i;var a=E(b*1.4,2);return p(h,_,"M"+a+",0H-"+a)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(b,h,_){if(e(h))return i;var a=E(b*1.4,2);return p(h,_,"M0,"+a+"V-"+a)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+",-"+a+"L-"+a+","+a)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(b,h,_){if(e(h))return i;var a=E(b,2);return p(h,_,"M"+a+","+a+"L-"+a+",-"+a)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b*2,2);return p(h,_,"M0,0L-"+a+","+c+"H"+a+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b*2,2);return p(h,_,"M0,0L-"+a+",-"+c+"H"+a+"Z")},noDot:!0},"arrow-left":{n:47,f:function(b,h,_){if(e(h))return i;var a=E(b*2,2),c=E(b,2);return p(h,_,"M0,0L"+a+",-"+c+"V"+c+"Z")},noDot:!0},"arrow-right":{n:48,f:function(b,h,_){if(e(h))return i;var a=E(b*2,2),c=E(b,2);return p(h,_,"M0,0L-"+a+",-"+c+"V"+c+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b*2,2);return p(h,_,"M-"+a+",0H"+a+"M0,0L-"+a+","+c+"H"+a+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(b,h,_){if(e(h))return i;var a=E(b,2),c=E(b*2,2);return p(h,_,"M-"+a+",0H"+a+"M0,0L-"+a+",-"+c+"H"+a+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(b,h,_){if(e(h))return i;var a=E(b*2,2),c=E(b,2);return p(h,_,"M0,-"+c+"V"+c+"M0,0L"+a+",-"+c+"V"+c+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(b,h,_){if(e(h))return i;var a=E(b*2,2),c=E(b,2);return p(h,_,"M0,-"+c+"V"+c+"M0,0L-"+a+",-"+c+"V"+c+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(b,h,_){if(e(h))return i;var a=v/2.5,c=2*b*d(a),f=2*b*r(a);return p(h,_,"M0,0L"+-c+","+f+"L"+c+","+f+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(b,h,_){if(e(h))return i;var a=v/4,c=2*b*d(a),f=2*b*r(a);return p(h,_,"M0,0L"+-c+","+f+"A "+2*b+","+2*b+" 0 0 1 "+c+","+f+"Z")},backoff:.4,noDot:!0}};function e(b){return b===null}var l,n,s,o;function p(b,h,_){if((!b||b%360===0)&&!h)return _;if(s===b&&o===h&&l===_)return n;s=b,o=h,l=_;function a(O,D){var P=d(O),F=r(O),R=D[0],B=D[1]+(h||0);return[R*P-B*F,R*F+B*P]}for(var c=b/180*v,f=0,x=0,k=M(_),y="",A=0;A<k.length;A++){var L=k[A],u=L[0],m=f,S=x;if(u==="M"||u==="L")f=+L[1],x=+L[2];else if(u==="m"||u==="l")f+=+L[1],x+=+L[2];else if(u==="H")f=+L[1];else if(u==="h")f+=+L[1];else if(u==="V")x=+L[1];else if(u==="v")x+=+L[1];else if(u==="A"){f=+L[1],x=+L[2];var w=a(c,[+L[6],+L[7]]);L[6]=w[0],L[7]=w[1],L[3]=+L[3]+b}(u==="H"||u==="V")&&(u="L"),(u==="h"||u==="v")&&(u="l"),(u==="m"||u==="l")&&(f-=m,x-=S);var I=a(c,[f,x]);(u==="H"||u==="V")&&(u="L"),(u==="M"||u==="L"||u==="m"||u==="l")&&(L[1]=I[0],L[2]=I[1]),L[0]=u,y+=L[0]+L.slice(1).join(",")}return n=y,y}},97644:function(Q){Q.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(Q,U,t){var M=t(38248),E=t(24040),i=t(54460),C=t(3400),T=t(93792);Q.exports=function(d){for(var r=d.calcdata,e=0;e<r.length;e++){var l=r[e],n=l[0].trace;if(n.visible===!0&&E.traceIs(n,"errorBarsOK")){var s=i.getFromId(d,n.xaxis),o=i.getFromId(d,n.yaxis);v(l,n,s,"x"),v(l,n,o,"y")}}};function v(d,r,e,l){var n=r["error_"+l]||{},s=n.visible&&["linear","log"].indexOf(e.type)!==-1,o=[];if(s){for(var p=T(n),b=0;b<d.length;b++){var h=d[b],_=h.i;if(_===void 0)_=b;else if(_===null)continue;var a=h[l];if(M(e.c2l(a))){var c=p(a,_);if(M(c[0])&&M(c[1])){var f=h[l+"s"]=a-c[0],x=h[l+"h"]=a+c[1];o.push(f,x)}}}var k=e._id,y=r._extremes[k],A=i.findExtremes(e,o,C.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(A.min),y.max=y.max.concat(A.max)}}},93792:function(Q){Q.exports=function(t){var M=t.type,E=t.symmetric;if(M==="data"){var i=t.array||[];if(E)return function(d,r){var e=+i[r];return[e,e]};var C=t.arrayminus||[];return function(d,r){var e=+i[r],l=+C[r];return!isNaN(e)||!isNaN(l)?[l||0,e||0]:[NaN,NaN]}}else{var T=U(M,t.value),v=U(M,t.valueminus);return E||t.valueminus===void 0?function(d){var r=T(d);return[r,r]}:function(d){return[v(d),T(d)]}}};function U(t,M){if(t==="percent")return function(E){return Math.abs(E*M/100)};if(t==="constant")return function(){return Math.abs(M)};if(t==="sqrt")return function(E){return Math.sqrt(Math.abs(E))}}},65200:function(Q,U,t){var M=t(38248),E=t(24040),i=t(3400),C=t(31780),T=t(97644);Q.exports=function(v,d,r,e){var l="error_"+e.axis,n=C.newContainer(d,l),s=v[l]||{};function o(f,x){return i.coerce(s,n,T,f,x)}var p=s.array!==void 0||s.value!==void 0||s.type==="sqrt",b=o("visible",p);if(b!==!1){var h=o("type","array"in s?"data":"percent"),_=!0;h!=="sqrt"&&(_=o("symmetric",!((h==="data"?"arrayminus":"valueminus")in s))),h==="data"?(o("array"),o("traceref"),_||(o("arrayminus"),o("tracerefminus"))):(h==="percent"||h==="constant")&&(o("value"),_||o("valueminus"));var a="copy_"+e.inherit+"style";if(e.inherit){var c=d["error_"+e.inherit];(c||{}).visible&&o(a,!(s.color||M(s.thickness)||M(s.width)))}(!e.inherit||!n[a])&&(o("color",r),o("thickness"),o("width",E.traceIs(d,"gl3d")?0:4))}}},64968:function(Q,U,t){var M=t(3400),E=t(67824).overrideAll,i=t(97644),C={error_x:M.extendFlat({},i),error_y:M.extendFlat({},i)};delete C.error_x.copy_zstyle,delete C.error_y.copy_zstyle,delete C.error_y.copy_ystyle;var T={error_x:M.extendFlat({},i),error_y:M.extendFlat({},i),error_z:M.extendFlat({},i)};delete T.error_x.copy_ystyle,delete T.error_y.copy_ystyle,delete T.error_z.copy_ystyle,delete T.error_z.copy_zstyle,Q.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:C,bar:C,histogram:C,scatter3d:E(T,"calc","nested"),scattergl:E(C,"calc","nested")}},supplyDefaults:t(65200),calc:t(14880),makeComputeError:t(93792),plot:t(78512),style:t(92036),hoverInfo:v};function v(d,r,e){(r.error_y||{}).visible&&(e.yerr=d.yh-d.y,r.error_y.symmetric||(e.yerrneg=d.y-d.ys)),(r.error_x||{}).visible&&(e.xerr=d.xh-d.x,r.error_x.symmetric||(e.xerrneg=d.x-d.xs))}},78512:function(Q,U,t){var M=t(33428),E=t(38248),i=t(43616),C=t(43028);Q.exports=function(v,d,r,e){var l,n=r.xaxis,s=r.yaxis,o=e&&e.duration>0,p=v._context.staticPlot;d.each(function(b){var h=b[0].trace,_=h.error_x||{},a=h.error_y||{},c;h.ids&&(c=function(y){return y.id});var f=C.hasMarkers(h)&&h.marker.maxdisplayed>0;!a.visible&&!_.visible&&(b=[]);var x=M.select(this).selectAll("g.errorbar").data(b,c);if(x.exit().remove(),!!b.length){_.visible||x.selectAll("path.xerror").remove(),a.visible||x.selectAll("path.yerror").remove(),x.style("opacity",1);var k=x.enter().append("g").classed("errorbar",!0);o&&k.style("opacity",0).transition().duration(e.duration).style("opacity",1),i.setClipUrl(x,r.layerClipId,v),x.each(function(y){var A=M.select(this),L=T(y,n,s);if(!(f&&!y.vis)){var u,m=A.select("path.yerror");if(a.visible&&E(L.x)&&E(L.yh)&&E(L.ys)){var S=a.width;u="M"+(L.x-S)+","+L.yh+"h"+2*S+"m-"+S+",0V"+L.ys,L.noYS||(u+="m-"+S+",0h"+2*S),l=!m.size(),l?m=A.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("yerror",!0):o&&(m=m.transition().duration(e.duration).ease(e.easing)),m.attr("d",u)}else m.remove();var w=A.select("path.xerror");if(_.visible&&E(L.y)&&E(L.xh)&&E(L.xs)){var I=(_.copy_ystyle?a:_).width;u="M"+L.xh+","+(L.y-I)+"v"+2*I+"m0,-"+I+"H"+L.xs,L.noXS||(u+="m0,-"+I+"v"+2*I),l=!w.size(),l?w=A.append("path").style("vector-effect",p?"none":"non-scaling-stroke").classed("xerror",!0):o&&(w=w.transition().duration(e.duration).ease(e.easing)),w.attr("d",u)}else w.remove()}})}})};function T(v,d,r){var e={x:d.c2p(v.x),y:r.c2p(v.y)};return v.yh!==void 0&&(e.yh=r.c2p(v.yh),e.ys=r.c2p(v.ys),E(e.ys)||(e.noYS=!0,e.ys=r.c2p(v.ys,!0))),v.xh!==void 0&&(e.xh=d.c2p(v.xh),e.xs=d.c2p(v.xs),E(e.xs)||(e.noXS=!0,e.xs=d.c2p(v.xs,!0))),e}},92036:function(Q,U,t){var M=t(33428),E=t(76308);Q.exports=function(i){i.each(function(C){var T=C[0].trace,v=T.error_y||{},d=T.error_x||{},r=M.select(this);r.selectAll("path.yerror").style("stroke-width",v.thickness+"px").call(E.stroke,v.color),d.copy_ystyle&&(d=v),r.selectAll("path.xerror").style("stroke-width",d.thickness+"px").call(E.stroke,d.color)})}},55756:function(Q,U,t){var M=t(25376),E=t(65460).hoverlabel,i=t(92880).extendFlat;Q.exports={hoverlabel:{bgcolor:i({},E.bgcolor,{arrayOk:!0}),bordercolor:i({},E.bordercolor,{arrayOk:!0}),font:M({arrayOk:!0,editType:"none"}),align:i({},E.align,{arrayOk:!0}),namelength:i({},E.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(Q,U,t){var M=t(3400),E=t(24040);Q.exports=function(C){var T=C.calcdata,v=C._fullLayout;function d(s){return function(o){return M.coerceHoverinfo({hoverinfo:o},{_module:s._module},v)}}for(var r=0;r<T.length;r++){var e=T[r],l=e[0].trace;if(!E.traceIs(l,"pie-like")){var n=E.traceIs(l,"2dMap")?i:M.fillArray;n(l.hoverinfo,e,"hi",d(l)),l.hovertemplate&&n(l.hovertemplate,e,"ht"),l.hoverlabel&&(n(l.hoverlabel.bgcolor,e,"hbg"),n(l.hoverlabel.bordercolor,e,"hbc"),n(l.hoverlabel.font.size,e,"hts"),n(l.hoverlabel.font.color,e,"htc"),n(l.hoverlabel.font.family,e,"htf"),n(l.hoverlabel.namelength,e,"hnl"),n(l.hoverlabel.align,e,"hta"))}}};function i(C,T,v,d){d=d||M.identity,Array.isArray(C)&&(T[0][v]=d(C))}},62376:function(Q,U,t){var M=t(24040),E=t(83292).hover;Q.exports=function(i,C,T){var v=M.getComponentMethod("annotations","onClick")(i,i._hoverdata);T!==void 0&&E(i,C,T,!0);function d(){i.emit("plotly_click",{points:i._hoverdata,event:C})}i._hoverdata&&C&&C.target&&(v&&v.then?v.then(d):d(),C.stopImmediatePropagation&&C.stopImmediatePropagation())}},92456:function(Q){Q.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(Q,U,t){var M=t(3400),E=t(55756),i=t(16132);Q.exports=function(C,T,v,d){function r(l,n){return M.coerce(C,T,E,l,n)}var e=M.extendFlat({},d.hoverlabel);T.hovertemplate&&(e.namelength=-1),i(C,T,r,e)}},10624:function(Q,U,t){var M=t(3400);U.getSubplot=function(d){return d.subplot||d.xaxis+d.yaxis||d.geo},U.isTraceInSubplots=function(d,r){if(d.type==="splom"){for(var e=d.xaxes||[],l=d.yaxes||[],n=0;n<e.length;n++)for(var s=0;s<l.length;s++)if(r.indexOf(e[n]+l[s])!==-1)return!0;return!1}return r.indexOf(U.getSubplot(d))!==-1},U.flat=function(d,r){for(var e=new Array(d.length),l=0;l<d.length;l++)e[l]=r;return e},U.p2c=function(d,r){for(var e=new Array(d.length),l=0;l<d.length;l++)e[l]=d[l].p2c(r);return e},U.getDistanceFunction=function(d,r,e,l){return d==="closest"?l||U.quadrature(r,e):d.charAt(0)==="x"?r:e},U.getClosest=function(d,r,e){if(e.index!==!1)e.index>=0&&e.index<d.length?e.distance=0:e.index=!1;else for(var l=0;l<d.length;l++){var n=r(d[l]);n<=e.distance&&(e.index=l,e.distance=n)}return e},U.inbox=function(d,r,e){return d*r<0||d===0?e:1/0},U.quadrature=function(d,r){return function(e){var l=d(e),n=r(e);return Math.sqrt(l*l+n*n)}},U.makeEventData=function(d,r,e){var l="index"in d?d.index:d.pointNumber,n={data:r._input,fullData:r,curveNumber:r.index,pointNumber:l};if(r._indexToPoints){var s=r._indexToPoints[l];s.length===1?n.pointIndex=s[0]:n.pointIndices=s}else n.pointIndex=l;return r._module.eventData?n=r._module.eventData(n,d,r,e,l):("xVal"in d?n.x=d.xVal:"x"in d&&(n.x=d.x),"yVal"in d?n.y=d.yVal:"y"in d&&(n.y=d.y),d.xa&&(n.xaxis=d.xa),d.ya&&(n.yaxis=d.ya),d.zLabelVal!==void 0&&(n.z=d.zLabelVal)),U.appendArrayPointValue(n,r,l),n},U.appendArrayPointValue=function(d,r,e){var l=r._arrayAttrs;if(l)for(var n=0;n<l.length;n++){var s=l[n],o=i(s);if(d[o]===void 0){var p=M.nestedProperty(r,s).get(),b=C(p,e);b!==void 0&&(d[o]=b)}}},U.appendArrayMultiPointValues=function(d,r,e){var l=r._arrayAttrs;if(l)for(var n=0;n<l.length;n++){var s=l[n],o=i(s);if(d[o]===void 0){for(var p=M.nestedProperty(r,s).get(),b=new Array(e.length),h=0;h<e.length;h++)b[h]=C(p,e[h]);d[o]=b}}};var E={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function i(d){return E[d]||d}function C(d,r){if(Array.isArray(r)){if(Array.isArray(d)&&Array.isArray(d[r[0]]))return d[r[0]][r[1]]}else return d[r]}var T={x:!0,y:!0},v={"x unified":!0,"y unified":!0};U.isUnifiedHover=function(d){return typeof d!="string"?!1:!!v[d]},U.isXYhover=function(d){return typeof d!="string"?!1:!!T[d]}},83292:function(Q,U,t){var M=t(33428),E=t(38248),i=t(49760),C=t(3400),T=C.pushUnique,v=C.strTranslate,d=C.strRotate,r=t(95924),e=t(72736),l=t(72213),n=t(43616),s=t(76308),o=t(86476),p=t(54460),b=t(24040),h=t(10624),_=t(92456),a=t(77864),c=t(31140),f=_.YANGLE,x=Math.PI*f/180,k=1/Math.sin(x),y=Math.cos(x),A=Math.sin(x),L=_.HOVERARROWSIZE,u=_.HOVERTEXTPAD,m={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};function w(H,Y){return H.distance-Y.distance}U.hover=function(H,Y,at,et){H=C.getGraphDiv(H);var ct=Y.target;C.throttle(H._fullLayout._uid+_.HOVERID,_.HOVERMINTIME,function(){I(H,Y,at,et,ct)})},U.loneHover=function(H,Y){var at=!0;Array.isArray(H)||(at=!1,H=[H]);var et=Y.gd,ct=V(et),ft=rt(et),yt=H.map(function(St){var Bt=St._x0||St.x0||St.x||0,re=St._x1||St.x1||St.x||0,Yt=St._y0||St.y0||St.y||0,he=St._y1||St.y1||St.y||0,Zt=St.eventData;if(Zt){var ae=Math.min(Bt,re),oe=Math.max(Bt,re),ce=Math.min(Yt,he),ue=Math.max(Yt,he),ye=St.trace;if(b.traceIs(ye,"gl3d")){var Tt=et._fullLayout[ye.scene]._scene.container,Ft=Tt.offsetLeft,$t=Tt.offsetTop;ae+=Ft,oe+=Ft,ce+=$t,ue+=$t}Zt.bbox={x0:ae+ft,x1:oe+ft,y0:ce+ct,y1:ue+ct},Y.inOut_bbox&&Y.inOut_bbox.push(Zt.bbox)}else Zt=!1;return{color:St.color||s.defaultLine,x0:St.x0||St.x||0,x1:St.x1||St.x||0,y0:St.y0||St.y||0,y1:St.y1||St.y||0,xLabel:St.xLabel,yLabel:St.yLabel,zLabel:St.zLabel,text:St.text,name:St.name,idealAlign:St.idealAlign,borderColor:St.borderColor,fontFamily:St.fontFamily,fontSize:St.fontSize,fontColor:St.fontColor,nameLength:St.nameLength,textAlign:St.textAlign,trace:St.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:St.hovertemplate||!1,hovertemplateLabels:St.hovertemplateLabels||!1,eventData:Zt}}),xt=!1,Ct=P(yt,{gd:et,hovermode:"closest",rotateLabels:xt,bgColor:Y.bgColor||s.background,container:M.select(Y.container),outerContainer:Y.outerContainer||Y.container}),gt=Ct.hoverLabels,mt=5,vt=0,At=0;gt.sort(function(St,Bt){return St.y0-Bt.y0}).each(function(St,Bt){var re=St.y0-St.by/2;re-mt<vt?St.offset=vt-re+mt:St.offset=0,vt=re+St.by+St.offset,Bt===Y.anchorIndex&&(At=St.offset)}).each(function(St){St.offset-=At});var Ot=et._fullLayout._invScaleX,It=et._fullLayout._invScaleY;return G(gt,xt,Ot,It),at?gt:gt.node()};function I(H,Y,at,et,ct){at||(at="xy");var ft=Array.isArray(at)?at:[at],yt,xt=H._fullLayout,Ct=xt.hoversubplots,gt=xt._plots||[],mt=gt[at],vt=xt._has("cartesian"),At=Y.hovermode||xt.hovermode,Ot=(At||"").charAt(0)==="x",It=(At||"").charAt(0)==="y",St,Bt;if(vt&&(Ot||It)&&Ct==="axis"){for(var re=ft.length,Yt=0;Yt<re;Yt++)if(yt=ft[Yt],gt[yt]){St=p.getFromId(H,yt,"x"),Bt=p.getFromId(H,yt,"y");var he=(Ot?St:Bt)._subplotsWith;if(he&&he.length)for(var Zt=0;Zt<he.length;Zt++)T(ft,he[Zt])}}if(mt&&Ct!=="single"){var ae=mt.overlays.map(function(zn){return zn.id});ft=ft.concat(ae)}for(var oe=ft.length,ce=new Array(oe),ue=new Array(oe),ye=!1,Tt=0;Tt<oe;Tt++)if(yt=ft[Tt],gt[yt])ye=!0,ce[Tt]=gt[yt].xaxis,ue[Tt]=gt[yt].yaxis;else if(xt[yt]&&xt[yt]._subplot){var Ft=xt[yt]._subplot;ce[Tt]=Ft.xaxis,ue[Tt]=Ft.yaxis}else{C.warn("Unrecognized subplot: "+yt);return}if(At&&!ye&&(At="closest"),["x","y","closest","x unified","y unified"].indexOf(At)===-1||!H.calcdata||H.querySelector(".zoombox")||H._dragging)return o.unhoverRaw(H,Y);var $t=xt.hoverdistance;$t===-1&&($t=1/0);var Vt=xt.spikedistance;Vt===-1&&(Vt=1/0);var Nt=[],Mt=[],Et,Dt,dt,ht,bt,Pt,Gt,te,ne,je,Ne,ge,_e,De={hLinePoint:null,vLinePoint:null},hr=!1;if(Array.isArray(Y))for(At="array",dt=0;dt<Y.length;dt++)bt=H.calcdata[Y[dt].curveNumber||0],bt&&(Pt=bt[0].trace,bt[0].trace.hoverinfo!=="skip"&&(Mt.push(bt),Pt.orientation==="h"&&(hr=!0)));else{var fe=H.calcdata.slice();for(fe.sort(function(zn,ur){var Gr=zn[0].trace.zorder||0,qr=ur[0].trace.zorder||0;return Gr-qr}),ht=0;ht<fe.length;ht++)bt=fe[ht],Pt=bt[0].trace,Pt.hoverinfo!=="skip"&&h.isTraceInSubplots(Pt,ft)&&(Mt.push(bt),Pt.orientation==="h"&&(hr=!0));var Be=!ct,He,pr;if(Be)"xpx"in Y?He=Y.xpx:He=ce[0]._length/2,"ypx"in Y?pr=Y.ypx:pr=ue[0]._length/2;else{if(r.triggerHandler(H,"plotly_beforehover",Y)===!1)return;var Ze=ct.getBoundingClientRect();He=Y.clientX-Ze.left,pr=Y.clientY-Ze.top,xt._calcInverseTransform(H);var Xt=C.apply3DTransform(xt._invTransform)(He,pr);if(He=Xt[0],pr=Xt[1],He<0||He>ce[0]._length||pr<0||pr>ue[0]._length)return o.unhoverRaw(H,Y)}if(Y.pointerX=He+ce[0]._offset,Y.pointerY=pr+ue[0]._offset,"xval"in Y?Et=h.flat(ft,Y.xval):Et=h.p2c(ce,He),"yval"in Y?Dt=h.flat(ft,Y.yval):Dt=h.p2c(ue,pr),!E(Et[0])||!E(Dt[0]))return C.warn("Fx.hover failed",Y,H),o.unhoverRaw(H,Y)}var ie=1/0;function pe(zn,ur){for(ht=0;ht<Mt.length;ht++)if(bt=Mt[ht],!(!bt||!bt[0]||!bt[0].trace)&&(Pt=bt[0].trace,!(Pt.visible!==!0||Pt._length===0)&&["carpet","contourcarpet"].indexOf(Pt._module.name)===-1)){if(ne=At,h.isUnifiedHover(ne)&&(ne=ne.charAt(0)),Pt.type==="splom"?(te=0,Gt=ft[te]):(Gt=h.getSubplot(Pt),te=ft.indexOf(Gt)),ge={cd:bt,trace:Pt,xa:ce[te],ya:ue[te],maxHoverDistance:$t,maxSpikeDistance:Vt,index:!1,distance:Math.min(ie,$t),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Pt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},xt[Gt]&&(ge.subplot=xt[Gt]._subplot),xt._splomScenes&&xt._splomScenes[Pt.uid]&&(ge.scene=xt._splomScenes[Pt.uid]),ne==="array"){var Gr=Y[ht];"pointNumber"in Gr?(ge.index=Gr.pointNumber,ne="closest"):(ne="","xval"in Gr&&(je=Gr.xval,ne="x"),"yval"in Gr&&(Ne=Gr.yval,ne=ne?"closest":"y"))}else zn!==void 0&&ur!==void 0?(je=zn,Ne=ur):(je=Et[te],Ne=Dt[te]);if(_e=Nt.length,$t!==0)if(Pt._module&&Pt._module.hoverPoints){var qr=Pt._module.hoverPoints(ge,je,Ne,ne,{finiteRange:!0,hoverLayer:xt._hoverlayer,hoversubplots:Ct,gd:H});if(qr)for(var an,Mn=0;Mn<qr.length;Mn++)an=qr[Mn],E(an.x0)&&E(an.y0)&&Nt.push(X(an,At))}else C.log("Unrecognized trace type in hover:",Pt);if(At==="closest"&&Nt.length>_e&&(Nt.splice(0,_e),ie=Nt[0].distance),vt&&Vt!==0&&Nt.length===0){ge.distance=Vt,ge.index=!1;var sn=Pt._module.hoverPoints(ge,je,Ne,"closest",{hoverLayer:xt._hoverlayer});if(sn&&(sn=sn.filter(function(dr){return dr.spikeDistance<=Vt})),sn&&sn.length){var An,Sn=sn.filter(function(dr){return dr.xa.showspikes&&dr.xa.spikesnap!=="hovered data"});if(Sn.length){var qn=Sn[0];E(qn.x0)&&E(qn.y0)&&(An=Ce(qn),(!De.vLinePoint||De.vLinePoint.spikeDistance>An.spikeDistance)&&(De.vLinePoint=An))}var ii=sn.filter(function(dr){return dr.ya.showspikes&&dr.ya.spikesnap!=="hovered data"});if(ii.length){var Mi=ii[0];E(Mi.x0)&&E(Mi.y0)&&(An=Ce(Mi),(!De.hLinePoint||De.hLinePoint.spikeDistance>An.spikeDistance)&&(De.hLinePoint=An))}}}}}pe();function ke(zn,ur,Gr){for(var qr=null,an=1/0,Mn,sn=0;sn<zn.length;sn++)St&&St._id!==zn[sn].xa._id||Bt&&Bt._id!==zn[sn].ya._id||(Mn=zn[sn].spikeDistance,Gr&&sn===0&&(Mn=-1/0),Mn<=an&&Mn<=ur&&(qr=zn[sn],an=Mn));return qr}function Ce(zn){return zn?{xa:zn.xa,ya:zn.ya,x:zn.xSpike!==void 0?zn.xSpike:(zn.x0+zn.x1)/2,y:zn.ySpike!==void 0?zn.ySpike:(zn.y0+zn.y1)/2,distance:zn.distance,spikeDistance:zn.spikeDistance,curveNumber:zn.trace.index,color:zn.color,pointNumber:zn.index}:null}var Fe={fullLayout:xt,container:xt._hoverlayer,event:Y},Re=H._spikepoints,be={vLinePoint:De.vLinePoint,hLinePoint:De.hLinePoint};H._spikepoints=be;var Ge=function(){var zn=Nt.filter(function(Gr){return St&&St._id===Gr.xa._id&&Bt&&Bt._id===Gr.ya._id}),ur=Nt.filter(function(Gr){return!(St&&St._id===Gr.xa._id&&Bt&&Bt._id===Gr.ya._id)});zn.sort(w),ur.sort(w),Nt=zn.concat(ur),Nt=Z(Nt,At)};Ge();var Ke=At.charAt(0),or=(Ke==="x"||Ke==="y")&&Nt[0]&&S[Nt[0].trace.type];if(vt&&Vt!==0&&Nt.length!==0){var sr=Nt.filter(function(zn){return zn.ya.showspikes}),zt=ke(sr,Vt,or);De.hLinePoint=Ce(zt);var Ut=Nt.filter(function(zn){return zn.xa.showspikes}),Me=ke(Ut,Vt,or);De.vLinePoint=Ce(Me)}if(Nt.length===0){var Te=o.unhoverRaw(H,Y);return vt&&(De.hLinePoint!==null||De.vLinePoint!==null)&&nt(Re)&&J(H,De,Fe),Te}if(vt&&nt(Re)&&J(H,De,Fe),h.isXYhover(ne)&&Nt[0].length!==0&&Nt[0].trace.type!=="splom"){var qe=Nt[0];m[qe.trace.type]?Nt=Nt.filter(function(zn){return zn.trace.index===qe.trace.index}):Nt=[qe];var Qe=Nt.length,Je=$("x",qe,xt),We=$("y",qe,xt);pe(Je,We);var Oe=[],rr={},cr=0,lr=function(zn){var ur=m[zn.trace.type]?O(zn):zn.trace.index;if(!rr[ur])cr++,rr[ur]=cr,Oe.push(zn);else{var Gr=rr[ur]-1,qr=Oe[Gr];Gr>0&&Math.abs(zn.distance)<Math.abs(qr.distance)&&(Oe[Gr]=zn)}},nr;for(nr=0;nr<Qe;nr++)lr(Nt[nr]);for(nr=Nt.length-1;nr>Qe-1;nr--)lr(Nt[nr]);Nt=Oe,Ge()}var Sr=H._hoverdata,kr=[],Mr=V(H),rn=rt(H);for(dt=0;dt<Nt.length;dt++){var Ur=Nt[dt],pn=h.makeEventData(Ur,Ur.trace,Ur.cd);if(Ur.hovertemplate!==!1){var yn=!1;Ur.cd[Ur.index]&&Ur.cd[Ur.index].ht&&(yn=Ur.cd[Ur.index].ht),Ur.hovertemplate=yn||Ur.trace.hovertemplate||!1}if(Ur.xa&&Ur.ya){var yr=Ur.x0+Ur.xa._offset,Cr=Ur.x1+Ur.xa._offset,Dr=Ur.y0+Ur.ya._offset,Nr=Ur.y1+Ur.ya._offset,$r=Math.min(yr,Cr),fn=Math.max(yr,Cr),on=Math.min(Dr,Nr),In=Math.max(Dr,Nr);pn.bbox={x0:$r+rn,x1:fn+rn,y0:on+Mr,y1:In+Mr}}Ur.eventData=[pn],kr.push(pn)}H._hoverdata=kr;var En=At==="y"&&(Mt.length>1||Nt.length>1)||At==="closest"&&hr&&Nt.length>1,$n=s.combine(xt.plot_bgcolor||s.background,xt.paper_bgcolor),ri=P(Nt,{gd:H,hovermode:At,rotateLabels:En,bgColor:$n,container:xt._hoverlayer,outerContainer:xt._paper.node(),commonLabelOpts:xt.hoverlabel,hoverdistance:xt.hoverdistance}),ui=ri.hoverLabels;if(h.isUnifiedHover(At)||(R(ui,En,xt,ri.commonLabelBoundingBox),G(ui,En,xt._invScaleX,xt._invScaleY)),ct&&ct.tagName){var ni=b.getComponentMethod("annotations","hasClickToShow")(H,kr);l(M.select(ct),ni?"pointer":"")}!ct||et||!it(H,Y,Sr)||(Sr&&H.emit("plotly_unhover",{event:Y,points:Sr}),H.emit("plotly_hover",{event:Y,points:H._hoverdata,xaxes:ce,yaxes:ue,xvals:Et,yvals:Dt}))}function O(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa?H.xa._id:"",H.ya?H.ya._id:""].join(",")}var D=/<extra>([\s\S]*)<\/extra>/;function P(H,Y){var at=Y.gd,et=at._fullLayout,ct=Y.hovermode,ft=Y.rotateLabels,yt=Y.bgColor,xt=Y.container,Ct=Y.outerContainer,gt=Y.commonLabelOpts||{};if(H.length===0)return[[]];var mt=Y.fontFamily||_.HOVERFONT,vt=Y.fontSize||_.HOVERFONTSIZE,At=H[0],Ot=At.xa,It=At.ya,St=ct.charAt(0),Bt=St+"Label",re=At[Bt];if(re===void 0&&Ot.type==="multicategory")for(var Yt=0;Yt<H.length&&(re=H[Yt][Bt],re===void 0);Yt++);var he=ot(at,Ct),Zt=he.top,ae=he.width,oe=he.height,ce=re!==void 0&&At.distance<=Y.hoverdistance&&(ct==="x"||ct==="y");if(ce){var ue=!0,ye,Tt;for(ye=0;ye<H.length;ye++)if(ue&&H[ye].zLabel===void 0&&(ue=!1),Tt=H[ye].hoverinfo||H[ye].trace.hoverinfo,Tt){var Ft=Array.isArray(Tt)?Tt:Tt.split("+");if(Ft.indexOf("all")===-1&&Ft.indexOf(ct)===-1){ce=!1;break}}ue&&(ce=!1)}var $t=xt.selectAll("g.axistext").data(ce?[0]:[]);$t.enter().append("g").classed("axistext",!0),$t.exit().remove();var Vt={minX:0,maxX:0,minY:0,maxY:0};if($t.each(function(){var be=M.select(this),Ge=C.ensureSingle(be,"path","",function(Ur){Ur.style({"stroke-width":"1px"})}),Ke=C.ensureSingle(be,"text","",function(Ur){Ur.attr("data-notex",1)}),or=gt.bgcolor||s.defaultLine,sr=gt.bordercolor||s.contrast(or),zt=s.contrast(or),Ut={family:gt.font.family||mt,size:gt.font.size||vt,color:gt.font.color||zt};Ge.style({fill:or,stroke:sr}),Ke.text(re).call(n.font,Ut).call(e.positionText,0,0).call(e.convertToTspans,at),be.attr("transform","");var Me=ot(at,Ke.node()),Te,qe;if(ct==="x"){var Qe=Ot.side==="top"?"-":"";Ke.attr("text-anchor","middle").call(e.positionText,0,Ot.side==="top"?Zt-Me.bottom-L-u:Zt-Me.top+L+u),Te=Ot._offset+(At.x0+At.x1)/2,qe=It._offset+(Ot.side==="top"?0:It._length);var Je=Me.width/2+u,We=Te;Te<Je?We=Je:Te>et.width-Je&&(We=et.width-Je),Ge.attr("d","M"+(Te-We)+",0L"+(Te-We+L)+","+Qe+L+"H"+Je+"v"+Qe+(u*2+Me.height)+"H"+-Je+"V"+Qe+L+"H"+(Te-We-L)+"Z"),Te=We,Vt.minX=Te-Je,Vt.maxX=Te+Je,Ot.side==="top"?(Vt.minY=qe-(u*2+Me.height),Vt.maxY=qe-u):(Vt.minY=qe+u,Vt.maxY=qe+(u*2+Me.height))}else{var Oe,rr,cr;It.side==="right"?(Oe="start",rr=1,cr="",Te=Ot._offset+Ot._length):(Oe="end",rr=-1,cr="-",Te=Ot._offset),qe=It._offset+(At.y0+At.y1)/2,Ke.attr("text-anchor",Oe),Ge.attr("d","M0,0L"+cr+L+","+L+"V"+(u+Me.height/2)+"h"+cr+(u*2+Me.width)+"V-"+(u+Me.height/2)+"H"+cr+L+"V-"+L+"Z"),Vt.minY=qe-(u+Me.height/2),Vt.maxY=qe+(u+Me.height/2),It.side==="right"?(Vt.minX=Te+L,Vt.maxX=Te+L+(u*2+Me.width)):(Vt.minX=Te-L-(u*2+Me.width),Vt.maxX=Te-L);var lr=Me.height/2,nr=Zt-Me.top-lr,Sr="clip"+et._uid+"commonlabel"+It._id,kr;if(Te<Me.width+2*u+L){kr="M-"+(L+u)+"-"+lr+"h-"+(Me.width-u)+"V"+lr+"h"+(Me.width-u)+"Z";var Mr=Me.width-Te+u;e.positionText(Ke,Mr,nr),Oe==="end"&&Ke.selectAll("tspan").each(function(){var Ur=M.select(this),pn=n.tester.append("text").text(Ur.text()).call(n.font,Ut),yn=ot(at,pn.node());Math.round(yn.width)<Math.round(Me.width)&&Ur.attr("x",Mr-yn.width),pn.remove()})}else e.positionText(Ke,rr*(u+L),nr),kr=null;var rn=et._topclips.selectAll("#"+Sr).data(kr?[0]:[]);rn.enter().append("clipPath").attr("id",Sr).append("path"),rn.exit().remove(),rn.select("path").attr("d",kr),n.setClipUrl(Ke,kr?Sr:null,at)}be.attr("transform",v(Te,qe))}),h.isUnifiedHover(ct)){xt.selectAll("g.hovertext").remove();var Nt=H.filter(function(be){return be.hoverinfo!=="none"});if(Nt.length===0)return[];var Mt=et.hoverlabel,Et=Mt.font,Dt={showlegend:!0,legend:{title:{text:re,font:Et},font:Et,bgcolor:Mt.bgcolor,bordercolor:Mt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:et.legend?et.legend.traceorder:void 0,orientation:"v"}},dt={font:Et};a(Dt,dt,at._fullData);var ht=dt.legend;ht.entries=[];for(var bt=0;bt<Nt.length;bt++){var Pt=Nt[bt];if(Pt.hoverinfo!=="none"){var Gt=F(Pt,!0,ct,et,re),te=Gt[0],ne=Gt[1];Pt.name=ne,ne!==""?Pt.text=ne+" : "+te:Pt.text=te;var je=Pt.cd[Pt.index];je&&(je.mc&&(Pt.mc=je.mc),je.mcc&&(Pt.mc=je.mcc),je.mlc&&(Pt.mlc=je.mlc),je.mlcc&&(Pt.mlc=je.mlcc),je.mlw&&(Pt.mlw=je.mlw),je.mrc&&(Pt.mrc=je.mrc),je.dir&&(Pt.dir=je.dir)),Pt._distinct=!0,ht.entries.push([Pt])}}ht.entries.sort(function(be,Ge){return be[0].trace.index-Ge[0].trace.index}),ht.layer=xt,ht._inHover=!0,ht._groupTitleFont=Mt.grouptitlefont,c(at,ht);var Ne=xt.select("g.legend"),ge=ot(at,Ne.node()),_e=ge.width+2*u,De=ge.height+2*u,hr=Nt[0],fe=(hr.x0+hr.x1)/2,Be=(hr.y0+hr.y1)/2,He=!(b.traceIs(hr.trace,"bar-like")||b.traceIs(hr.trace,"box-violin")),pr,Ze;St==="y"?He?(Ze=Be-u,pr=Be+u):(Ze=Math.min.apply(null,Nt.map(function(be){return Math.min(be.y0,be.y1)})),pr=Math.max.apply(null,Nt.map(function(be){return Math.max(be.y0,be.y1)}))):Ze=pr=C.mean(Nt.map(function(be){return(be.y0+be.y1)/2}))-De/2;var Xt,ie;St==="x"?He?(Xt=fe+u,ie=fe-u):(Xt=Math.max.apply(null,Nt.map(function(be){return Math.max(be.x0,be.x1)})),ie=Math.min.apply(null,Nt.map(function(be){return Math.min(be.x0,be.x1)}))):Xt=ie=C.mean(Nt.map(function(be){return(be.x0+be.x1)/2}))-_e/2;var pe=Ot._offset,ke=It._offset;pr+=ke,Xt+=pe,ie+=pe-_e,Ze+=ke-De;var Ce,Fe;return Xt+_e<ae&&Xt>=0?Ce=Xt:ie+_e<ae&&ie>=0?Ce=ie:pe+_e<ae?Ce=pe:Xt-fe<fe-ie+_e?Ce=ae-_e:Ce=0,Ce+=u,pr+De<oe&&pr>=0?Fe=pr:Ze+De<oe&&Ze>=0?Fe=Ze:ke+De<oe?Fe=ke:pr-Be<Be-Ze+De?Fe=oe-De:Fe=0,Fe+=u,Ne.attr("transform",v(Ce-1,Fe-1)),Ne}var Re=xt.selectAll("g.hovertext").data(H,function(be){return O(be)});return Re.enter().append("g").classed("hovertext",!0).each(function(){var be=M.select(this);be.append("rect").call(s.fill,s.addOpacity(yt,.8)),be.append("text").classed("name",!0),be.append("path").style("stroke-width","1px"),be.append("text").classed("nums",!0).call(n.font,mt,vt)}),Re.exit().remove(),Re.each(function(be){var Ge=M.select(this).attr("transform",""),Ke=be.color;Array.isArray(Ke)&&(Ke=Ke[be.eventData[0].pointNumber]);var or=be.bgcolor||Ke,sr=s.combine(s.opacity(or)?or:s.defaultLine,yt),zt=s.combine(s.opacity(Ke)?Ke:s.defaultLine,yt),Ut=be.borderColor||s.contrast(sr),Me=F(be,ce,ct,et,re,Ge),Te=Me[0],qe=Me[1],Qe=Ge.select("text.nums").call(n.font,be.fontFamily||mt,be.fontSize||vt,be.fontColor||Ut).text(Te).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,at),Je=Ge.select("text.name"),We=0,Oe=0;if(qe&&qe!==Te){Je.call(n.font,be.fontFamily||mt,be.fontSize||vt,zt).text(qe).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,at);var rr=ot(at,Je.node());We=rr.width+2*u,Oe=rr.height+2*u}else Je.remove(),Ge.select("rect").remove();Ge.select("path").style({fill:sr,stroke:Ut});var cr=be.xa._offset+(be.x0+be.x1)/2,lr=be.ya._offset+(be.y0+be.y1)/2,nr=Math.abs(be.x1-be.x0),Sr=Math.abs(be.y1-be.y0),kr=ot(at,Qe.node()),Mr=kr.width/et._invScaleX,rn=kr.height/et._invScaleY;be.ty0=(Zt-kr.top)/et._invScaleY,be.bx=Mr+2*u,be.by=Math.max(rn+2*u,Oe),be.anchor="start",be.txwidth=Mr,be.tx2width=We,be.offset=0;var Ur=(Mr+L+u+We)*et._invScaleX,pn,yn;if(ft)be.pos=cr,pn=lr+Sr/2+Ur<=oe,yn=lr-Sr/2-Ur>=0,(be.idealAlign==="top"||!pn)&&yn?(lr-=Sr/2,be.anchor="end"):pn?(lr+=Sr/2,be.anchor="start"):be.anchor="middle",be.crossPos=lr;else{if(be.pos=lr,pn=cr+nr/2+Ur<=ae,yn=cr-nr/2-Ur>=0,(be.idealAlign==="left"||!pn)&&yn)cr-=nr/2,be.anchor="end";else if(pn)cr+=nr/2,be.anchor="start";else{be.anchor="middle";var yr=Ur/2,Cr=cr+yr-ae,Dr=cr-yr;Cr>0&&(cr-=Cr),Dr<0&&(cr+=-Dr)}be.crossPos=cr}Qe.attr("text-anchor",be.anchor),We&&Je.attr("text-anchor",be.anchor),Ge.attr("transform",v(cr,lr)+(ft?d(f):""))}),{hoverLabels:Re,commonLabelBoundingBox:Vt}}function F(H,Y,at,et,ct,ft){var yt="",xt="";H.nameOverride!==void 0&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=C.templateString(H.name,H.trace._meta)),yt=q(H.name,H.nameLength));var Ct=at.charAt(0),gt=Ct==="x"?"y":"x";H.zLabel!==void 0?(H.xLabel!==void 0&&(xt+="x: "+H.xLabel+"<br>"),H.yLabel!==void 0&&(xt+="y: "+H.yLabel+"<br>"),H.trace.type!=="choropleth"&&H.trace.type!=="choroplethmapbox"&&(xt+=(xt?"z: ":"")+H.zLabel)):Y&&H[Ct+"Label"]===ct?xt=H[gt+"Label"]||"":H.xLabel===void 0?H.yLabel!==void 0&&H.trace.type!=="scattercarpet"&&(xt=H.yLabel):H.yLabel===void 0?xt=H.xLabel:xt="("+H.xLabel+", "+H.yLabel+")",(H.text||H.text===0)&&!Array.isArray(H.text)&&(xt+=(xt?"<br>":"")+H.text),H.extraText!==void 0&&(xt+=(xt?"<br>":"")+H.extraText),ft&&xt===""&&!H.hovertemplate&&(yt===""&&ft.remove(),xt=yt);var mt=H.hovertemplate||!1;if(mt){var vt=H.hovertemplateLabels||H;H[Ct+"Label"]!==ct&&(vt[Ct+"other"]=vt[Ct+"Val"],vt[Ct+"otherLabel"]=vt[Ct+"Label"]),xt=C.hovertemplateString(mt,vt,et._d3locale,H.eventData[0]||{},H.trace._meta),xt=xt.replace(D,function(At,Ot){return yt=q(Ot,H.nameLength),""})}return[xt,yt]}function R(H,Y,at,et){var ct=Y?"xa":"ya",ft=Y?"ya":"xa",yt=0,xt=1,Ct=H.size(),gt=new Array(Ct),mt=0,vt=et.minX,At=et.maxX,Ot=et.minY,It=et.maxY,St=function(Et){return Et*at._invScaleX},Bt=function(Et){return Et*at._invScaleY};H.each(function(Et){var Dt=Et[ct],dt=Et[ft],ht=Dt._id.charAt(0)==="x",bt=Dt.range;mt===0&&bt&&bt[0]>bt[1]!==ht&&(xt=-1);var Pt=0,Gt=ht?at.width:at.height;if(at.hovermode==="x"||at.hovermode==="y"){var te=B(Et,Y),ne=Et.anchor,je=ne==="end"?-1:1,Ne,ge;if(ne==="middle")Ne=Et.crossPos+(ht?Bt(te.y-Et.by/2):St(Et.bx/2+Et.tx2width/2)),ge=Ne+(ht?Bt(Et.by):St(Et.bx));else if(ht)Ne=Et.crossPos+Bt(L+te.y)-Bt(Et.by/2-L),ge=Ne+Bt(Et.by);else{var _e=St(je*L+te.x),De=_e+St(je*Et.bx);Ne=Et.crossPos+Math.min(_e,De),ge=Et.crossPos+Math.max(_e,De)}ht?Ot!==void 0&&It!==void 0&&Math.min(ge,It)-Math.max(Ne,Ot)>1&&(dt.side==="left"?(Pt=dt._mainLinePosition,Gt=at.width):Gt=dt._mainLinePosition):vt!==void 0&&At!==void 0&&Math.min(ge,At)-Math.max(Ne,vt)>1&&(dt.side==="top"?(Pt=dt._mainLinePosition,Gt=at.height):Gt=dt._mainLinePosition)}gt[mt++]=[{datum:Et,traceIndex:Et.trace.index,dp:0,pos:Et.pos,posref:Et.posref,size:Et.by*(ht?k:1)/2,pmin:Pt,pmax:Gt}]}),gt.sort(function(Et,Dt){return Et[0].posref-Dt[0].posref||xt*(Dt[0].traceIndex-Et[0].traceIndex)});var re,Yt,he,Zt,ae,oe,ce;function ue(Et){var Dt=Et[0],dt=Et[Et.length-1];if(Yt=Dt.pmin-Dt.pos-Dt.dp+Dt.size,he=dt.pos+dt.dp+dt.size-Dt.pmax,Yt>.01){for(ae=Et.length-1;ae>=0;ae--)Et[ae].dp+=Yt;re=!1}if(!(he<.01)){if(Yt<-.01){for(ae=Et.length-1;ae>=0;ae--)Et[ae].dp-=he;re=!1}if(re){var ht=0;for(Zt=0;Zt<Et.length;Zt++)oe=Et[Zt],oe.pos+oe.dp+oe.size>Dt.pmax&&ht++;for(Zt=Et.length-1;Zt>=0&&!(ht<=0);Zt--)oe=Et[Zt],oe.pos>Dt.pmax-1&&(oe.del=!0,ht--);for(Zt=0;Zt<Et.length&&!(ht<=0);Zt++)if(oe=Et[Zt],oe.pos<Dt.pmin+1)for(oe.del=!0,ht--,he=oe.size*2,ae=Et.length-1;ae>=0;ae--)Et[ae].dp-=he;for(Zt=Et.length-1;Zt>=0&&!(ht<=0);Zt--)oe=Et[Zt],oe.pos+oe.dp+oe.size>Dt.pmax&&(oe.del=!0,ht--)}}}for(;!re&&yt<=Ct;){for(yt++,re=!0,Zt=0;Zt<gt.length-1;){var ye=gt[Zt],Tt=gt[Zt+1],Ft=ye[ye.length-1],$t=Tt[0];if(Yt=Ft.pos+Ft.dp+Ft.size-$t.pos-$t.dp+$t.size,Yt>.01&&Ft.pmin===$t.pmin&&Ft.pmax===$t.pmax){for(ae=Tt.length-1;ae>=0;ae--)Tt[ae].dp+=Yt;for(ye.push.apply(ye,Tt),gt.splice(Zt+1,1),ce=0,ae=ye.length-1;ae>=0;ae--)ce+=ye[ae].dp;for(he=ce/ye.length,ae=ye.length-1;ae>=0;ae--)ye[ae].dp-=he;re=!1}else Zt++}gt.forEach(ue)}for(Zt=gt.length-1;Zt>=0;Zt--){var Vt=gt[Zt];for(ae=Vt.length-1;ae>=0;ae--){var Nt=Vt[ae],Mt=Nt.datum;Mt.offset=Nt.dp,Mt.del=Nt.del}}}function B(H,Y){var at=0,et=H.offset;return Y&&(et*=-A,at=H.offset*y),{x:at,y:et}}function N(H){var Y={start:1,end:-1,middle:0}[H.anchor],at=Y*(L+u),et=at+Y*(H.txwidth+u),ct=H.anchor==="middle";return ct&&(at-=H.tx2width/2,et+=H.txwidth/2+u),{alignShift:Y,textShiftX:at,text2ShiftX:et}}function G(H,Y,at,et){var ct=function(yt){return yt*at},ft=function(yt){return yt*et};H.each(function(yt){var xt=M.select(this);if(yt.del)return xt.remove();var Ct=xt.select("text.nums"),gt=yt.anchor,mt=gt==="end"?-1:1,vt=N(yt),At=B(yt,Y),Ot=At.x,It=At.y,St=gt==="middle";xt.select("path").attr("d",St?"M-"+ct(yt.bx/2+yt.tx2width/2)+","+ft(It-yt.by/2)+"h"+ct(yt.bx)+"v"+ft(yt.by)+"h-"+ct(yt.bx)+"Z":"M0,0L"+ct(mt*L+Ot)+","+ft(L+It)+"v"+ft(yt.by/2-L)+"h"+ct(mt*yt.bx)+"v-"+ft(yt.by)+"H"+ct(mt*L+Ot)+"V"+ft(It-L)+"Z");var Bt=Ot+vt.textShiftX,re=It+yt.ty0-yt.by/2+u,Yt=yt.textAlign||"auto";Yt!=="auto"&&(Yt==="left"&&gt!=="start"?(Ct.attr("text-anchor","start"),Bt=St?-yt.bx/2-yt.tx2width/2+u:-yt.bx-u):Yt==="right"&&gt!=="end"&&(Ct.attr("text-anchor","end"),Bt=St?yt.bx/2-yt.tx2width/2-u:yt.bx+u)),Ct.call(e.positionText,ct(Bt),ft(re)),yt.tx2width&&(xt.select("text.name").call(e.positionText,ct(vt.text2ShiftX+vt.alignShift*u+Ot),ft(It+yt.ty0-yt.by/2+u)),xt.select("rect").call(n.setRect,ct(vt.text2ShiftX+(vt.alignShift-1)*yt.tx2width/2+Ot),ft(It-yt.by/2-1),ct(yt.tx2width),ft(yt.by+2)))})}function X(H,Y){var at=H.index,et=H.trace||{},ct=H.cd[0],ft=H.cd[at]||{};function yt(At){return At||E(At)&&At===0}var xt=Array.isArray(at)?function(At,Ot){var It=C.castOption(ct,at,At);return yt(It)?It:C.extractOption({},et,"",Ot)}:function(At,Ot){return C.extractOption(ft,et,At,Ot)};function Ct(At,Ot,It){var St=xt(Ot,It);yt(St)&&(H[At]=St)}if(Ct("hoverinfo","hi","hoverinfo"),Ct("bgcolor","hbg","hoverlabel.bgcolor"),Ct("borderColor","hbc","hoverlabel.bordercolor"),Ct("fontFamily","htf","hoverlabel.font.family"),Ct("fontSize","hts","hoverlabel.font.size"),Ct("fontColor","htc","hoverlabel.font.color"),Ct("nameLength","hnl","hoverlabel.namelength"),Ct("textAlign","hta","hoverlabel.align"),H.posref=Y==="y"||Y==="closest"&&et.orientation==="h"?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=C.constrain(H.x0,0,H.xa._length),H.x1=C.constrain(H.x1,0,H.xa._length),H.y0=C.constrain(H.y0,0,H.ya._length),H.y1=C.constrain(H.y1,0,H.ya._length),H.xLabelVal!==void 0&&(H.xLabel="xLabel"in H?H.xLabel:p.hoverLabelText(H.xa,H.xLabelVal,et.xhoverformat),H.xVal=H.xa.c2d(H.xLabelVal)),H.yLabelVal!==void 0&&(H.yLabel="yLabel"in H?H.yLabel:p.hoverLabelText(H.ya,H.yLabelVal,et.yhoverformat),H.yVal=H.ya.c2d(H.yLabelVal)),H.zLabelVal!==void 0&&H.zLabel===void 0&&(H.zLabel=String(H.zLabelVal)),!isNaN(H.xerr)&&!(H.xa.type==="log"&&H.xerr<=0)){var gt=p.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xerrneg!==void 0?H.xLabel+=" +"+gt+" / -"+p.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:H.xLabel+=" \xB1 "+gt,Y==="x"&&(H.distance+=1)}if(!isNaN(H.yerr)&&!(H.ya.type==="log"&&H.yerr<=0)){var mt=p.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yerrneg!==void 0?H.yLabel+=" +"+mt+" / -"+p.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:H.yLabel+=" \xB1 "+mt,Y==="y"&&(H.distance+=1)}var vt=H.hoverinfo||H.trace.hoverinfo;return vt&&vt!=="all"&&(vt=Array.isArray(vt)?vt:vt.split("+"),vt.indexOf("x")===-1&&(H.xLabel=void 0),vt.indexOf("y")===-1&&(H.yLabel=void 0),vt.indexOf("z")===-1&&(H.zLabel=void 0),vt.indexOf("text")===-1&&(H.text=void 0),vt.indexOf("name")===-1&&(H.name=void 0)),H}function J(H,Y,at){var et=at.container,ct=at.fullLayout,ft=ct._size,yt=at.event,xt=!!Y.hLinePoint,Ct=!!Y.vLinePoint,gt,mt;if(et.selectAll(".spikeline").remove(),!!(Ct||xt)){var vt=s.combine(ct.plot_bgcolor,ct.paper_bgcolor);if(xt){var At=Y.hLinePoint,Ot,It;gt=At&&At.xa,mt=At&&At.ya;var St=mt.spikesnap;St==="cursor"?(Ot=yt.pointerX,It=yt.pointerY):(Ot=gt._offset+At.x,It=mt._offset+At.y);var Bt=i.readability(At.color,vt)<1.5?s.contrast(vt):At.color,re=mt.spikemode,Yt=mt.spikethickness,he=mt.spikecolor||Bt,Zt=p.getPxPosition(H,mt),ae,oe;if(re.indexOf("toaxis")!==-1||re.indexOf("across")!==-1){if(re.indexOf("toaxis")!==-1&&(ae=Zt,oe=Ot),re.indexOf("across")!==-1){var ce=mt._counterDomainMin,ue=mt._counterDomainMax;mt.anchor==="free"&&(ce=Math.min(ce,mt.position),ue=Math.max(ue,mt.position)),ae=ft.l+ce*ft.w,oe=ft.l+ue*ft.w}et.insert("line",":first-child").attr({x1:ae,x2:oe,y1:It,y2:It,"stroke-width":Yt,stroke:he,"stroke-dasharray":n.dashStyle(mt.spikedash,Yt)}).classed("spikeline",!0).classed("crisp",!0),et.insert("line",":first-child").attr({x1:ae,x2:oe,y1:It,y2:It,"stroke-width":Yt+2,stroke:vt}).classed("spikeline",!0).classed("crisp",!0)}re.indexOf("marker")!==-1&&et.insert("circle",":first-child").attr({cx:Zt+(mt.side!=="right"?Yt:-Yt),cy:It,r:Yt,fill:he}).classed("spikeline",!0)}if(Ct){var ye=Y.vLinePoint,Tt,Ft;gt=ye&&ye.xa,mt=ye&&ye.ya;var $t=gt.spikesnap;$t==="cursor"?(Tt=yt.pointerX,Ft=yt.pointerY):(Tt=gt._offset+ye.x,Ft=mt._offset+ye.y);var Vt=i.readability(ye.color,vt)<1.5?s.contrast(vt):ye.color,Nt=gt.spikemode,Mt=gt.spikethickness,Et=gt.spikecolor||Vt,Dt=p.getPxPosition(H,gt),dt,ht;if(Nt.indexOf("toaxis")!==-1||Nt.indexOf("across")!==-1){if(Nt.indexOf("toaxis")!==-1&&(dt=Dt,ht=Ft),Nt.indexOf("across")!==-1){var bt=gt._counterDomainMin,Pt=gt._counterDomainMax;gt.anchor==="free"&&(bt=Math.min(bt,gt.position),Pt=Math.max(Pt,gt.position)),dt=ft.t+(1-Pt)*ft.h,ht=ft.t+(1-bt)*ft.h}et.insert("line",":first-child").attr({x1:Tt,x2:Tt,y1:dt,y2:ht,"stroke-width":Mt,stroke:Et,"stroke-dasharray":n.dashStyle(gt.spikedash,Mt)}).classed("spikeline",!0).classed("crisp",!0),et.insert("line",":first-child").attr({x1:Tt,x2:Tt,y1:dt,y2:ht,"stroke-width":Mt+2,stroke:vt}).classed("spikeline",!0).classed("crisp",!0)}Nt.indexOf("marker")!==-1&&et.insert("circle",":first-child").attr({cx:Tt,cy:Dt-(gt.side!=="top"?Mt:-Mt),r:Mt,fill:Et}).classed("spikeline",!0)}}}function it(H,Y,at){if(!at||at.length!==H._hoverdata.length)return!0;for(var et=at.length-1;et>=0;et--){var ct=at[et],ft=H._hoverdata[et];if(ct.curveNumber!==ft.curveNumber||String(ct.pointNumber)!==String(ft.pointNumber)||String(ct.pointNumbers)!==String(ft.pointNumbers))return!0}return!1}function nt(H,Y){return!Y||Y.vLinePoint!==H._spikepoints.vLinePoint||Y.hLinePoint!==H._spikepoints.hLinePoint}function q(H,Y){return e.plainText(H||"",{len:Y,allowedTags:["br","sub","sup","b","i","em"]})}function Z(H,Y){for(var at=Y.charAt(0),et=[],ct=[],ft=[],yt=0;yt<H.length;yt++){var xt=H[yt];b.traceIs(xt.trace,"bar-like")||b.traceIs(xt.trace,"box-violin")?ft.push(xt):xt.trace[at+"period"]?ct.push(xt):et.push(xt)}return et.concat(ct).concat(ft)}function $(H,Y,at){var et=Y[H+"a"],ct=Y[H+"Val"],ft=Y.cd[0];if(et.type==="category"||et.type==="multicategory")ct=et._categoriesMap[ct];else if(et.type==="date"){var yt=Y.trace[H+"periodalignment"];if(yt){var xt=Y.cd[Y.index],Ct=xt[H+"Start"];Ct===void 0&&(Ct=xt[H]);var gt=xt[H+"End"];gt===void 0&&(gt=xt[H]);var mt=gt-Ct;yt==="end"?ct+=mt:yt==="middle"&&(ct+=mt/2)}ct=et.d2c(ct)}return ft&&ft.t&&ft.t.posLetter===et._id&&(at.boxmode==="group"||at.violinmode==="group")&&(ct+=ft.t.dPos),ct}function V(H){return H.offsetTop+H.clientTop}function rt(H){return H.offsetLeft+H.clientLeft}function ot(H,Y){var at=H._fullLayout,et=Y.getBoundingClientRect(),ct=et.left,ft=et.top,yt=ct+et.width,xt=ft+et.height,Ct=C.apply3DTransform(at._invTransform)(ct,ft),gt=C.apply3DTransform(at._invTransform)(yt,xt),mt=Ct[0],vt=Ct[1],At=gt[0],Ot=gt[1];return{x:mt,y:vt,width:At-mt,height:Ot-vt,top:Math.min(vt,Ot),left:Math.min(mt,At),right:Math.max(mt,At),bottom:Math.max(vt,Ot)}}},16132:function(Q,U,t){var M=t(3400),E=t(76308),i=t(10624).isUnifiedHover;Q.exports=function(C,T,v,d){d=d||{};var r=T.legend;function e(l){d.font[l]||(d.font[l]=r?T.legend.font[l]:T.font[l])}T&&i(T.hovermode)&&(d.font||(d.font={}),e("size"),e("family"),e("color"),r?(d.bgcolor||(d.bgcolor=E.combine(T.legend.bgcolor,T.paper_bgcolor)),d.bordercolor||(d.bordercolor=T.legend.bordercolor)):d.bgcolor||(d.bgcolor=T.paper_bgcolor)),v("hoverlabel.bgcolor",d.bgcolor),v("hoverlabel.bordercolor",d.bordercolor),v("hoverlabel.namelength",d.namelength),M.coerceFont(v,"hoverlabel.font",d.font),v("hoverlabel.align",d.align)}},41008:function(Q,U,t){var M=t(3400),E=t(65460);Q.exports=function(i,C){function T(v,d){return C[v]!==void 0?C[v]:M.coerce(i,C,E,v,d)}return T("clickmode"),T("hoversubplots"),T("hovermode")}},93024:function(Q,U,t){var M=t(33428),E=t(3400),i=t(86476),C=t(10624),T=t(65460),v=t(83292);Q.exports={moduleType:"component",name:"fx",constants:t(92456),schema:{layout:T},attributes:t(55756),layoutAttributes:T,supplyLayoutGlobalDefaults:t(81976),supplyDefaults:t(95448),supplyLayoutDefaults:t(88336),calc:t(55056),getDistanceFunction:C.getDistanceFunction,getClosest:C.getClosest,inbox:C.inbox,quadrature:C.quadrature,appendArrayPointValue:C.appendArrayPointValue,castHoverOption:r,castHoverinfo:e,hover:v.hover,unhover:i.unhover,loneHover:v.loneHover,loneUnhover:d,click:t(62376)};function d(l){var n=E.isD3Selection(l)?l:M.select(l);n.selectAll("g.hovertext").remove(),n.selectAll(".spikeline").remove()}function r(l,n,s){return E.castOption(l,n,"hoverlabel."+s)}function e(l,n,s){function o(p){return E.coerceHoverinfo({hoverinfo:p},{_module:l._module},n)}return E.castOption(l,s,"hoverinfo",o)}},65460:function(Q,U,t){var M=t(92456),E=t(25376),i=E({editType:"none"});i.family.dflt=M.HOVERFONT,i.size.dflt=M.HOVERFONTSIZE,Q.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,grouptitlefont:E({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(Q,U,t){var M=t(3400),E=t(65460),i=t(41008),C=t(16132);Q.exports=function(T,v){function d(o,p){return M.coerce(T,v,E,o,p)}var r=i(T,v);r&&(d("hoverdistance"),d("spikedistance"));var e=d("dragmode");e==="select"&&d("selectdirection");var l=v._has("mapbox"),n=v._has("geo"),s=v._basePlotModules.length;v.dragmode==="zoom"&&((l||n)&&s===1||l&&n&&s===2)&&(v.dragmode="pan"),C(T,v,d),M.coerceFont(d,"hoverlabel.grouptitlefont",v.hoverlabel.font)}},81976:function(Q,U,t){var M=t(3400),E=t(16132),i=t(65460);Q.exports=function(C,T){function v(d,r){return M.coerce(C,T,i,d,r)}E(C,T,v)}},12704:function(Q,U,t){var M=t(3400),E=t(53756).counter,i=t(86968).u,C=t(33816).idRegex,T=t(31780),v={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[E("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[C.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[C.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:i({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function d(s,o,p){var b=o[p+"axes"],h=Object.keys((s._splomAxes||{})[p]||{});if(Array.isArray(b))return b;if(h.length)return h}function r(s,o){var p=s.grid||{},b=d(o,p,"x"),h=d(o,p,"y");if(!s.grid&&!b&&!h)return;var _=Array.isArray(p.subplots)&&Array.isArray(p.subplots[0]),a=Array.isArray(b),c=Array.isArray(h),f=a&&b!==p.xaxes&&c&&h!==p.yaxes,x,k;_?(x=p.subplots.length,k=p.subplots[0].length):(c&&(x=h.length),a&&(k=b.length));var y=T.newContainer(o,"grid");function A(F,R){return M.coerce(p,y,v,F,R)}var L=A("rows",x),u=A("columns",k);if(!(L*u>1)){delete o.grid;return}if(!_&&!a&&!c){var m=A("pattern")==="independent";m&&(_=!0)}y._hasSubplotGrid=_;var S=A("roworder"),w=S==="top to bottom",I=_?.2:.1,O=_?.3:.1,D,P;f&&o._splomGridDflt&&(D=o._splomGridDflt.xside,P=o._splomGridDflt.yside),y._domains={x:e("x",A,I,D,u),y:e("y",A,O,P,L,w)}}function e(s,o,p,b,h,_){var a=o(s+"gap",p),c=o("domain."+s);o(s+"side",b);for(var f=new Array(h),x=c[0],k=(c[1]-x)/(h-a),y=k*(1-a),A=0;A<h;A++){var L=x+k*A;f[_?h-1-A:A]=[L,L+y]}return f}function l(s,o){var p=o.grid;if(!(!p||!p._domains)){var b=s.grid||{},h=o._subplots,_=p._hasSubplotGrid,a=p.rows,c=p.columns,f=p.pattern==="independent",x,k,y,A,L,u,m,S=p._axisMap={};if(_){var w=b.subplots||[];u=p.subplots=new Array(a);var I=1;for(x=0;x<a;x++){var O=u[x]=new Array(c),D=w[x]||[];for(k=0;k<c;k++)if(f?(L=I===1?"xy":"x"+I+"y"+I,I++):L=D[k],O[k]="",h.cartesian.indexOf(L)!==-1){if(m=L.indexOf("y"),y=L.slice(0,m),A=L.slice(m),S[y]!==void 0&&S[y]!==k||S[A]!==void 0&&S[A]!==x)continue;O[k]=L,S[y]=k,S[A]=x}}}else{var P=d(o,b,"x"),F=d(o,b,"y");p.xaxes=n(P,h.xaxis,c,S,"x"),p.yaxes=n(F,h.yaxis,a,S,"y")}var R=p._anchors={},B=p.roworder==="top to bottom";for(var N in S){var G=N.charAt(0),X=p[G+"side"],J,it,nt;if(X.length<8)R[N]="free";else if(G==="x"){if(X.charAt(0)==="t"===B?(J=0,it=1,nt=a):(J=a-1,it=-1,nt=-1),_){var q=S[N];for(x=J;x!==nt;x+=it)if(L=u[x][q],!!L&&(m=L.indexOf("y"),L.slice(0,m)===N)){R[N]=L.slice(m);break}}else for(x=J;x!==nt;x+=it)if(A=p.yaxes[x],h.cartesian.indexOf(N+A)!==-1){R[N]=A;break}}else if(X.charAt(0)==="l"?(J=0,it=1,nt=c):(J=c-1,it=-1,nt=-1),_){var Z=S[N];for(x=J;x!==nt;x+=it)if(L=u[Z][x],!!L&&(m=L.indexOf("y"),L.slice(m)===N)){R[N]=L.slice(0,m);break}}else for(x=J;x!==nt;x+=it)if(y=p.xaxes[x],h.cartesian.indexOf(y+N)!==-1){R[N]=y;break}}}}function n(s,o,p,b,h){var _=new Array(p),a;function c(f,x){o.indexOf(x)!==-1&&b[x]===void 0?(_[f]=x,b[x]=f):_[f]=""}if(Array.isArray(s))for(a=0;a<p;a++)c(a,s[a]);else for(c(0,h),a=1;a<p;a++)c(a,h+(a+1));return _}Q.exports={moduleType:"component",name:"grid",schema:{layout:{grid:v}},layoutAttributes:v,sizeDefaults:r,contentDefaults:l}},65760:function(Q,U,t){var M=t(33816),E=t(31780).templatedArray;t(36208),Q.exports=E("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(Q,U,t){var M=t(38248),E=t(36896);Q.exports=function(i,C,T,v){C=C||{};var d=T==="log"&&C.type==="linear",r=T==="linear"&&C.type==="log";if(d||r){for(var e=i._fullLayout.images,l=C._id.charAt(0),n,s,o=0;o<e.length;o++)if(n=e[o],s="images["+o+"].",n[l+"ref"]===C._id){var p=n[l],b=n["size"+l],h=null,_=null;if(d){h=E(p,C.range);var a=b/Math.pow(10,h)/2;_=2*Math.log(a+Math.sqrt(1+a*a))/Math.LN10}else h=Math.pow(10,p),_=h*(Math.pow(10,b/2)-Math.pow(10,-b/2));M(h)?M(_)||(_=null):(h=null,_=null),v(s+l,h),v(s+"size"+l,_)}}}},25024:function(Q,U,t){var M=t(3400),E=t(54460),i=t(51272),C=t(65760),T="images";Q.exports=function(d,r){var e={name:T,handleItemDefaults:v};i(d,r,e)};function v(d,r,e){function l(c,f){return M.coerce(d,r,C,c,f)}var n=l("source"),s=l("visible",!!n);if(!s)return r;l("layer"),l("xanchor"),l("yanchor"),l("sizex"),l("sizey"),l("sizing"),l("opacity");for(var o={_fullLayout:e},p=["x","y"],b=0;b<2;b++){var h=p[b],_=E.coerceRef(d,r,o,h,"paper",void 0);if(_!=="paper"){var a=E.getFromId(o,_);a._imgIndices.push(r._index)}E.coercePosition(r,o,l,_,h,0)}return r}},60963:function(Q,U,t){var M=t(33428),E=t(43616),i=t(54460),C=t(79811),T=t(9616);Q.exports=function(v){var d=v._fullLayout,r=[],e={},l=[],n,s;for(s=0;s<d.images.length;s++){var o=d.images[s];if(o.visible)if(o.layer==="below"&&o.xref!=="paper"&&o.yref!=="paper"){n=C.ref2id(o.xref)+C.ref2id(o.yref);var p=d._plots[n];if(!p){l.push(o);continue}p.mainplot&&(n=p.mainplot.id),e[n]||(e[n]=[]),e[n].push(o)}else o.layer==="above"?r.push(o):l.push(o)}var b={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function h(y){var A=M.select(this);if(this._imgSrc!==y.source)if(A.attr("xmlns",T.svg),y.source&&y.source.slice(0,5)==="data:")A.attr("xlink:href",y.source),this._imgSrc=y.source;else{var L=new Promise((function(u){var m=new Image;this.img=m,m.setAttribute("crossOrigin","anonymous"),m.onerror=S,m.onload=function(){var w=document.createElement("canvas");w.width=this.width,w.height=this.height;var I=w.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var O=w.toDataURL("image/png");A.attr("xlink:href",O),u()},A.on("error",S),m.src=y.source,this._imgSrc=y.source;function S(){A.remove(),u()}}).bind(this));v._promises.push(L)}}function _(y){var A=M.select(this),L=i.getFromId(v,y.xref),u=i.getFromId(v,y.yref),m=i.getRefType(y.xref)==="domain",S=i.getRefType(y.yref)==="domain",w=d._size,I,O;L!==void 0?I=typeof y.xref=="string"&&m?L._length*y.sizex:Math.abs(L.l2p(y.sizex)-L.l2p(0)):I=y.sizex*w.w,u!==void 0?O=typeof y.yref=="string"&&S?u._length*y.sizey:Math.abs(u.l2p(y.sizey)-u.l2p(0)):O=y.sizey*w.h;var D=I*b.x[y.xanchor].offset,P=O*b.y[y.yanchor].offset,F=b.x[y.xanchor].sizing+b.y[y.yanchor].sizing,R,B;switch(L!==void 0?R=typeof y.xref=="string"&&m?L._length*y.x+L._offset:L.r2p(y.x)+L._offset:R=y.x*w.w+w.l,R+=D,u!==void 0?B=typeof y.yref=="string"&&S?u._length*(1-y.y)+u._offset:u.r2p(y.y)+u._offset:B=w.h-y.y*w.h+w.t,B+=P,y.sizing){case"fill":F+=" slice";break;case"stretch":F="none";break}A.attr({x:R,y:B,width:I,height:O,preserveAspectRatio:F,opacity:y.opacity});var N=L&&i.getRefType(y.xref)!=="domain"?L._id:"",G=u&&i.getRefType(y.yref)!=="domain"?u._id:"",X=N+G;E.setClipUrl(A,X?"clip"+d._uid+X:null,v)}var a=d._imageLowerLayer.selectAll("image").data(l),c=d._imageUpperLayer.selectAll("image").data(r);a.enter().append("image"),c.enter().append("image"),a.exit().remove(),c.exit().remove(),a.each(function(y){h.bind(this)(y),_.bind(this)(y)}),c.each(function(y){h.bind(this)(y),_.bind(this)(y)});var f=Object.keys(d._plots);for(s=0;s<f.length;s++){n=f[s];var x=d._plots[n];if(x.imagelayer){var k=x.imagelayer.selectAll("image").data(e[n]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(y){h.bind(this)(y),_.bind(this)(y)})}}}},7402:function(Q,U,t){Q.exports={moduleType:"component",name:"images",layoutAttributes:t(65760),supplyLayoutDefaults:t(25024),includeBasePlot:t(36632)("images"),draw:t(60963),convertCoords:t(63556)}},3800:function(Q,U,t){var M=t(25376),E=t(22548);Q.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:E.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:M({editType:"legend"}),grouptitlefont:M({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:M({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(Q){Q.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(Q,U,t){var M=t(24040),E=t(3400),i=t(31780),C=t(45464),T=t(3800),v=t(64859),d=t(42451);function r(e,l,n,s){var o=l[e]||{},p=i.newContainer(n,e);function b(nt,q){return E.coerce(o,p,T,nt,q)}var h=E.coerceFont(b,"font",n.font);b("bgcolor",n.paper_bgcolor),b("bordercolor");var _=b("visible");if(_){for(var a,c=function(nt,q){var Z=a._input,$=a;return E.coerce(Z,$,C,nt,q)},f=n.font||{},x=E.coerceFont(b,"grouptitlefont",E.extendFlat({},f,{size:Math.round(f.size*1.1)})),k=0,y=!1,A="normal",L=(n.shapes||[]).filter(function(nt){return nt.showlegend}),u=s.concat(L).filter(function(nt){return e===(nt.legend||"legend")}),m=0;m<u.length;m++)if(a=u[m],!!a.visible){var S=a._isShape;(a.showlegend||a._dfltShowLegend&&!(a._module&&a._module.attributes&&a._module.attributes.showlegend&&a._module.attributes.showlegend.dflt===!1))&&(k++,a.showlegend&&(y=!0,(!S&&M.traceIs(a,"pie-like")||a._input.showlegend===!0)&&k++),E.coerceFont(c,"legendgrouptitle.font",x)),(!S&&M.traceIs(a,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(a.fill)!==-1)&&(A=d.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),a.legendgroup!==void 0&&a.legendgroup!==""&&(A=d.isReversed({traceorder:A})?"reversed+grouped":"grouped")}var w=E.coerce(l,n,v,"showlegend",y&&k>(e==="legend"?1:0));if(w===!1&&(n[e]=void 0),!(w===!1&&!o.uirevision)&&(b("uirevision",n.uirevision),w!==!1)){b("borderwidth");var I=b("orientation"),O=b("yref"),D=b("xref"),P=I==="h",F=O==="paper",R=D==="paper",B,N,G,X="left";P?(B=0,M.getComponentMethod("rangeslider","isVisible")(l.xaxis)?F?(N=1.1,G="bottom"):(N=1,G="top"):F?(N=-.1,G="top"):(N=0,G="bottom")):(N=1,G="auto",R?B=1.02:(B=1,X="right")),E.coerce(o,p,{x:{valType:"number",editType:"legend",min:R?-2:0,max:R?3:1,dflt:B}},"x"),E.coerce(o,p,{y:{valType:"number",editType:"legend",min:F?-2:0,max:F?3:1,dflt:N}},"y"),b("traceorder",A),d.isGrouped(n[e])&&b("tracegroupgap"),b("entrywidth"),b("entrywidthmode"),b("indentation"),b("itemsizing"),b("itemwidth"),b("itemclick"),b("itemdoubleclick"),b("groupclick"),b("xanchor",X),b("yanchor",G),b("valign"),E.noneOrAll(o,p,["x","y"]);var J=b("title.text");if(J){b("title.side",P?"left":"top");var it=E.extendFlat({},h,{size:E.bigFont(h.size)});E.coerceFont(b,"title.font",it)}}}}Q.exports=function(e,l,n){var s,o=n.slice(),p=l.shapes;if(p)for(s=0;s<p.length;s++){var b=p[s];if(b.showlegend){var h={_input:b._input,visible:b.visible,showlegend:b.showlegend,legend:b.legend};o.push(h)}}var _=["legend"];for(s=0;s<o.length;s++)E.pushUnique(_,o[s].legend);for(l._legends=[],s=0;s<_.length;s++){var a=_[s];r(a,e,l,o),l[a]&&l[a].visible&&(l[a]._id=a),l._legends.push(a)}}},31140:function(Q,U,t){var M=t(33428),E=t(3400),i=t(7316),C=t(24040),T=t(95924),v=t(86476),d=t(43616),r=t(76308),e=t(72736),l=t(33048),n=t(65196),s=t(84284),o=s.LINE_SPACING,p=s.FROM_TL,b=s.FROM_BR,h=t(35456),_=t(2012),a=t(42451),c=1,f=/^legend[0-9]*$/;Q.exports=function(B,N){if(N)k(B,N);else{var G=B._fullLayout,X=G._legends,J=G._infolayer.selectAll('[class^="legend"]');J.each(function(){var Z=M.select(this),$=Z.attr("class"),V=$.split(" ")[0];V.match(f)&&X.indexOf(V)===-1&&Z.remove()});for(var it=0;it<X.length;it++){var nt=X[it],q=B._fullLayout[nt];k(B,q)}}};function x(B,N,G){if(!(N.title.side!=="top center"&&N.title.side!=="top right")){var X=N.title.font,J=X.size*o,it=0,nt=B.node(),q=d.bBox(nt).width;N.title.side==="top center"?it=.5*(N._width-2*G-2*n.titlePad-q):N.title.side==="top right"&&(it=N._width-2*G-2*n.titlePad-q),e.positionText(B,G+n.titlePad+it,G+J)}}function k(B,N){var G=N||{},X=B._fullLayout,J=R(G),it,nt,q=G._inHover;if(q?(nt=G.layer,it="hover"):(nt=X._infolayer,it=J),!!nt){it+=X._uid,B._legendMouseDownTime||(B._legendMouseDownTime=0);var Z;if(q){if(!G.entries)return;Z=h(G.entries,G)}else{for(var $=(B.calcdata||[]).slice(),V=X.shapes,rt=0;rt<V.length;rt++){var ot=V[rt];if(ot.showlegend){var H={_isShape:!0,_fullInput:ot,index:ot._index,name:ot.name||ot.label.text||"shape "+ot._index,legend:ot.legend,legendgroup:ot.legendgroup,legendgrouptitle:ot.legendgrouptitle,legendrank:ot.legendrank,legendwidth:ot.legendwidth,showlegend:ot.showlegend,visible:ot.visible,opacity:ot.opacity,mode:ot.type==="line"?"lines":"markers",line:ot.line,marker:{line:ot.line,color:ot.fillcolor,size:12,symbol:ot.type==="rect"?"square":ot.type==="circle"?"circle":"hexagon2"}};$.push([{trace:H}])}}Z=X.showlegend&&h($,G,X._legends.length>1)}var Y=X.hiddenlabels||[];if(!q&&(!X.showlegend||!Z.length))return nt.selectAll("."+J).remove(),X._topdefs.select("#"+it).remove(),i.autoMargin(B,J);var at=E.ensureSingle(nt,"g",J,function(vt){q||vt.attr("pointer-events","all")}),et=E.ensureSingleById(X._topdefs,"clipPath",it,function(vt){vt.append("rect")}),ct=E.ensureSingle(at,"rect","bg",function(vt){vt.attr("shape-rendering","crispEdges")});ct.call(r.stroke,G.bordercolor).call(r.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px");var ft=E.ensureSingle(at,"g","scrollbox"),yt=G.title;G._titleWidth=0,G._titleHeight=0;var xt;yt.text?(xt=E.ensureSingle(ft,"text",J+"titletext"),xt.attr("text-anchor","start").call(d.font,yt.font).text(yt.text),S(xt,ft,B,G,c)):ft.selectAll("."+J+"titletext").remove();var Ct=E.ensureSingle(at,"rect","scrollbar",function(vt){vt.attr(n.scrollBarEnterAttrs).call(r.fill,n.scrollBarColor)}),gt=ft.selectAll("g.groups").data(Z);gt.enter().append("g").attr("class","groups"),gt.exit().remove();var mt=gt.selectAll("g.traces").data(E.identity);mt.enter().append("g").attr("class","traces"),mt.exit().remove(),mt.style("opacity",function(vt){var At=vt[0].trace;return C.traceIs(At,"pie-like")?Y.indexOf(vt[0].label)!==-1?.5:1:At.visible==="legendonly"?.5:1}).each(function(){M.select(this).call(L,B,G)}).call(_,B,G).each(function(){q||M.select(this).call(m,B,J)}),E.syncOrAsync([i.previousPromises,function(){return O(B,gt,mt,G)},function(){var vt=X._size,At=G.borderwidth,Ot=G.xref==="paper",It=G.yref==="paper";if(yt.text&&x(xt,G,At),!q){var St,Bt;Ot?St=vt.l+vt.w*G.x-p[P(G)]*G._width:St=X.width*G.x-p[P(G)]*G._width,It?Bt=vt.t+vt.h*(1-G.y)-p[F(G)]*G._effHeight:Bt=X.height*(1-G.y)-p[F(G)]*G._effHeight;var re=D(B,J,St,Bt);if(re)return;if(X.margin.autoexpand){var Yt=St,he=Bt;St=Ot?E.constrain(St,0,X.width-G._width):Yt,Bt=It?E.constrain(Bt,0,X.height-G._effHeight):he,St!==Yt&&E.log("Constrain "+J+".x to make legend fit inside graph"),Bt!==he&&E.log("Constrain "+J+".y to make legend fit inside graph")}d.setTranslate(at,St,Bt)}if(Ct.on(".drag",null),at.on("wheel",null),q||G._height<=G._maxHeight||B._context.staticPlot){var Zt=G._effHeight;q&&(Zt=G._height),ct.attr({width:G._width-At,height:Zt-At,x:At/2,y:At/2}),d.setTranslate(ft,0,0),et.select("rect").attr({width:G._width-2*At,height:Zt-2*At,x:At,y:At}),d.setClipUrl(ft,it,B),d.setRect(Ct,0,0,0,0),delete G._scrollY}else{var ae=Math.max(n.scrollBarMinHeight,G._effHeight*G._effHeight/G._height),oe=G._effHeight-ae-2*n.scrollBarMargin,ce=G._height-G._effHeight,ue=oe/ce,ye=Math.min(G._scrollY||0,ce);ct.attr({width:G._width-2*At+n.scrollBarWidth+n.scrollBarMargin,height:G._effHeight-At,x:At/2,y:At/2}),et.select("rect").attr({width:G._width-2*At+n.scrollBarWidth+n.scrollBarMargin,height:G._effHeight-2*At,x:At,y:At+ye}),d.setClipUrl(ft,it,B),Dt(ye,ae,ue),at.on("wheel",function(){ye=E.constrain(G._scrollY+M.event.deltaY/oe*ce,0,ce),Dt(ye,ae,ue),ye!==0&&ye!==ce&&M.event.preventDefault()});var Tt,Ft,$t,Vt=function(Gt,te,ne){var je=(ne-te)/ue+Gt;return E.constrain(je,0,ce)},Nt=function(Gt,te,ne){var je=(te-ne)/ue+Gt;return E.constrain(je,0,ce)},Mt=M.behavior.drag().on("dragstart",function(){var Gt=M.event.sourceEvent;Gt.type==="touchstart"?Tt=Gt.changedTouches[0].clientY:Tt=Gt.clientY,$t=ye}).on("drag",function(){var Gt=M.event.sourceEvent;Gt.buttons===2||Gt.ctrlKey||(Gt.type==="touchmove"?Ft=Gt.changedTouches[0].clientY:Ft=Gt.clientY,ye=Vt($t,Tt,Ft),Dt(ye,ae,ue))});Ct.call(Mt);var Et=M.behavior.drag().on("dragstart",function(){var Gt=M.event.sourceEvent;Gt.type==="touchstart"&&(Tt=Gt.changedTouches[0].clientY,$t=ye)}).on("drag",function(){var Gt=M.event.sourceEvent;Gt.type==="touchmove"&&(Ft=Gt.changedTouches[0].clientY,ye=Nt($t,Tt,Ft),Dt(ye,ae,ue))});ft.call(Et)}function Dt(Gt,te,ne){G._scrollY=B._fullLayout[J]._scrollY=Gt,d.setTranslate(ft,0,-Gt),d.setRect(Ct,G._width,n.scrollBarMargin+Gt*ne,n.scrollBarWidth,te),et.select("rect").attr("y",At+Gt)}if(B._context.edits.legendPosition){var dt,ht,bt,Pt;at.classed("cursor-move",!0),v.init({element:at.node(),gd:B,prepFn:function(){var Gt=d.getTranslate(at);bt=Gt.x,Pt=Gt.y},moveFn:function(Gt,te){var ne=bt+Gt,je=Pt+te;d.setTranslate(at,ne,je),dt=v.align(ne,G._width,vt.l,vt.l+vt.w,G.xanchor),ht=v.align(je+G._height,-G._height,vt.t+vt.h,vt.t,G.yanchor)},doneFn:function(){if(dt!==void 0&&ht!==void 0){var Gt={};Gt[J+".x"]=dt,Gt[J+".y"]=ht,C.call("_guiRelayout",B,Gt)}},clickFn:function(Gt,te){var ne=nt.selectAll("g.traces").filter(function(){var je=this.getBoundingClientRect();return te.clientX>=je.left&&te.clientX<=je.right&&te.clientY>=je.top&&te.clientY<=je.bottom});ne.size()>0&&A(B,at,ne,Gt,te)}})}}],B)}}function y(B,N,G){var X=B[0],J=X.width,it=N.entrywidthmode,nt=X.trace.legendwidth||N.entrywidth;return it==="fraction"?N._maxWidth*nt:G+(nt||J)}function A(B,N,G,X,J){var it=G.data()[0][0].trace,nt={event:J,node:G.node(),curveNumber:it.index,expandedIndex:it._expandedIndex,data:B.data,layout:B.layout,frames:B._transitionData._frames,config:B._context,fullData:B._fullData,fullLayout:B._fullLayout};it._group&&(nt.group=it._group),C.traceIs(it,"pie-like")&&(nt.label=G.datum()[0].label);var q=T.triggerHandler(B,"plotly_legendclick",nt);if(X===1){if(q===!1)return;N._clickTimeout=setTimeout(function(){B._fullLayout&&l(G,B,X)},B._context.doubleClickDelay)}else if(X===2){N._clickTimeout&&clearTimeout(N._clickTimeout),B._legendMouseDownTime=0;var Z=T.triggerHandler(B,"plotly_legenddoubleclick",nt);Z!==!1&&q!==!1&&l(G,B,X)}}function L(B,N,G){var X=R(G),J=B.data()[0][0],it=J.trace,nt=C.traceIs(it,"pie-like"),q=!G._inHover&&N._context.edits.legendText&&!nt,Z=G._maxNameLength,$,V;J.groupTitle?($=J.groupTitle.text,V=J.groupTitle.font):(V=G.font,G.entries?$=J.text:($=nt?J.label:it.name,it._meta&&($=E.templateString($,it._meta))));var rt=E.ensureSingle(B,"text",X+"text");rt.attr("text-anchor","start").call(d.font,V).text(q?u($,Z):$);var ot=G.indentation+G.itemwidth+n.itemGap*2;e.positionText(rt,ot,0),q?rt.call(e.makeEditable,{gd:N,text:$}).call(S,B,N,G).on("edit",function(H){this.text(u(H,Z)).call(S,B,N,G);var Y=J.trace._fullInput||{},at={};if(C.hasTransform(Y,"groupby")){var et=C.getTransformIndices(Y,"groupby"),ct=et[et.length-1],ft=E.keyedContainer(Y,"transforms["+ct+"].styles","target","value.name");ft.set(J.trace._group,H),at=ft.constructUpdate()}else at.name=H;return Y._isShape?C.call("_guiRelayout",N,"shapes["+it.index+"].name",at.name):C.call("_guiRestyle",N,at,it.index)}):S(rt,B,N,G)}function u(B,N){var G=Math.max(4,N);if(B&&B.trim().length>=G/2)return B;B=B||"";for(var X=G-B.length;X>0;X--)B+=" ";return B}function m(B,N,G){var X=N._context.doubleClickDelay,J,it=1,nt=E.ensureSingle(B,"rect",G+"toggle",function(q){N._context.staticPlot||q.style("cursor","pointer").attr("pointer-events","all"),q.call(r.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(nt.on("mousedown",function(){J=new Date().getTime(),J-N._legendMouseDownTime<X?it+=1:(it=1,N._legendMouseDownTime=J)}),nt.on("mouseup",function(){if(!(N._dragged||N._editing)){var q=N._fullLayout[G];new Date().getTime()-N._legendMouseDownTime>X&&(it=Math.max(it-1,1)),A(N,q,B,it,M.event)}}))}function S(B,N,G,X,J){X._inHover&&B.attr("data-notex",!0),e.convertToTspans(B,G,function(){w(N,G,X,J)})}function w(B,N,G,X){var J=B.data()[0][0];if(!G._inHover&&J&&!J.trace.showlegend){B.remove();return}var it=B.select("g[class*=math-group]"),nt=it.node(),q=R(G);G||(G=N._fullLayout[q]);var Z=G.borderwidth,$;X===c?$=G.title.font:J.groupTitle?$=J.groupTitle.font:$=G.font;var V=$.size*o,rt,ot;if(nt){var H=d.bBox(nt);rt=H.height,ot=H.width,X===c?d.setTranslate(it,Z,Z+rt*.75):d.setTranslate(it,0,rt*.25)}else{var Y="."+q+(X===c?"title":"")+"text",at=B.select(Y),et=e.lineCount(at),ct=at.node();if(rt=V*et,ot=ct?d.bBox(ct).width:0,X===c)G.title.side==="left"&&(ot+=n.itemGap*2),e.positionText(at,Z+n.titlePad,Z+V);else{var ft=n.itemGap*2+G.indentation+G.itemwidth;J.groupTitle&&(ft=n.itemGap,ot-=G.indentation+G.itemwidth),e.positionText(at,ft,-V*((et-1)/2-.3))}}X===c?(G._titleWidth=ot,G._titleHeight=rt):(J.lineHeight=V,J.height=Math.max(rt,16)+3,J.width=ot)}function I(B){var N=0,G=0,X=B.title.side;return X&&(X.indexOf("left")!==-1&&(N=B._titleWidth),X.indexOf("top")!==-1&&(G=B._titleHeight)),[N,G]}function O(B,N,G,X){var J=B._fullLayout,it=R(X);X||(X=J[it]);var nt=J._size,q=a.isVertical(X),Z=a.isGrouped(X),$=X.entrywidthmode==="fraction",V=X.borderwidth,rt=2*V,ot=n.itemGap,H=X.indentation+X.itemwidth+ot*2,Y=2*(V+ot),at=F(X),et=X.y<0||X.y===0&&at==="top",ct=X.y>1||X.y===1&&at==="bottom",ft=X.tracegroupgap,yt={};X._maxHeight=Math.max(et||ct?J.height/2:nt.h,30);var xt=0;X._width=0,X._height=0;var Ct=I(X);if(q)G.each(function($t){var Vt=$t[0].height;d.setTranslate(this,V+Ct[0],V+Ct[1]+X._height+Vt/2+ot),X._height+=Vt,X._width=Math.max(X._width,$t[0].width)}),xt=H+X._width,X._width+=ot+H+rt,X._height+=Y,Z&&(N.each(function($t,Vt){d.setTranslate(this,0,Vt*X.tracegroupgap)}),X._height+=(X._lgroupsLength-1)*X.tracegroupgap);else{var gt=P(X),mt=X.x<0||X.x===0&&gt==="right",vt=X.x>1||X.x===1&&gt==="left",At=ct||et,Ot=J.width/2;X._maxWidth=Math.max(mt?At&&gt==="left"?nt.l+nt.w:Ot:vt?At&&gt==="right"?nt.r+nt.w:Ot:nt.w,2*H);var It=0,St=0;G.each(function($t){var Vt=y($t,X,H);It=Math.max(It,Vt),St+=Vt}),xt=null;var Bt=0;if(Z){var re=0,Yt=0,he=0;N.each(function(){var $t=0,Vt=0;M.select(this).selectAll("g.traces").each(function(Mt){var Et=y(Mt,X,H),Dt=Mt[0].height;d.setTranslate(this,Ct[0],Ct[1]+V+ot+Dt/2+Vt),Vt+=Dt,$t=Math.max($t,Et),yt[Mt[0].trace.legendgroup]=$t});var Nt=$t+ot;Yt>0&&Nt+V+Yt>X._maxWidth?(Bt=Math.max(Bt,Yt),Yt=0,he+=re+ft,re=Vt):re=Math.max(re,Vt),d.setTranslate(this,Yt,he),Yt+=Nt}),X._width=Math.max(Bt,Yt)+V,X._height=he+re+Y}else{var Zt=G.size(),ae=St+rt+(Zt-1)*ot<X._maxWidth,oe=0,ce=0,ue=0,ye=0;G.each(function($t){var Vt=$t[0].height,Nt=y($t,X,H),Mt=ae?Nt:It;$||(Mt+=ot),Mt+V+ce-ot>=X._maxWidth&&(Bt=Math.max(Bt,ye),ce=0,ue+=oe,X._height+=oe,oe=0),d.setTranslate(this,Ct[0]+V+ce,Ct[1]+V+ue+Vt/2+ot),ye=ce+Nt+ot,ce+=Mt,oe=Math.max(oe,Vt)}),ae?(X._width=ce+rt,X._height=oe+Y):(X._width=Math.max(Bt,ye)+rt,X._height+=oe+Y)}}X._width=Math.ceil(Math.max(X._width+Ct[0],X._titleWidth+2*(V+n.titlePad))),X._height=Math.ceil(Math.max(X._height+Ct[1],X._titleHeight+2*(V+n.itemGap))),X._effHeight=Math.min(X._height,X._maxHeight);var Tt=B._context.edits,Ft=Tt.legendText||Tt.legendPosition;G.each(function($t){var Vt=M.select(this).select("."+it+"toggle"),Nt=$t[0].height,Mt=$t[0].trace.legendgroup,Et=y($t,X,H);Z&&Mt!==""&&(Et=yt[Mt]);var Dt=Ft?H:xt||Et;!q&&!$&&(Dt+=ot/2),d.setRect(Vt,0,-Nt/2,Dt,Nt)})}function D(B,N,G,X){var J=B._fullLayout,it=J[N],nt=P(it),q=F(it),Z=it.xref==="paper",$=it.yref==="paper";B._fullLayout._reservedMargin[N]={};var V=it.y<.5?"b":"t",rt=it.x<.5?"l":"r",ot={r:J.width-G,l:G+it._width,b:J.height-X,t:X+it._effHeight};if(Z&&$)return i.autoMargin(B,N,{x:it.x,y:it.y,l:it._width*p[nt],r:it._width*b[nt],b:it._effHeight*b[q],t:it._effHeight*p[q]});Z?B._fullLayout._reservedMargin[N][V]=ot[V]:$||it.orientation==="v"?B._fullLayout._reservedMargin[N][rt]=ot[rt]:B._fullLayout._reservedMargin[N][V]=ot[V]}function P(B){return E.isRightAnchor(B)?"right":E.isCenterAnchor(B)?"center":"left"}function F(B){return E.isBottomAnchor(B)?"bottom":E.isMiddleAnchor(B)?"middle":"top"}function R(B){return B._id||"legend"}},35456:function(Q,U,t){var M=t(24040),E=t(42451);Q.exports=function(i,C,T){var v=C._inHover,d=E.isGrouped(C),r=E.isReversed(C),e={},l=[],n=!1,s={},o=0,p=0,b,h;function _(R,B,N){if(C.visible!==!1&&!(T&&R!==C._id))if(B===""||!E.isGrouped(C)){var G="~~i"+o;l.push(G),e[G]=[N],o++}else l.indexOf(B)===-1?(l.push(B),n=!0,e[B]=[N]):e[B].push(N)}for(b=0;b<i.length;b++){var a=i[b],c=a[0],f=c.trace,x=f.legend,k=f.legendgroup;if(!(!v&&(!f.visible||!f.showlegend)))if(M.traceIs(f,"pie-like"))for(s[k]||(s[k]={}),h=0;h<a.length;h++){var y=a[h].label;s[k][y]||(_(x,k,{label:y,color:a[h].color,i:a[h].i,trace:f,pts:a[h].pts}),s[k][y]=!0,p=Math.max(p,(y||"").length))}else _(x,k,c),p=Math.max(p,(f.name||"").length)}if(!l.length)return[];var A=!n||!d,L=[];for(b=0;b<l.length;b++){var u=e[l[b]];A?L.push(u[0]):L.push(u)}for(A&&(L=[L]),b=0;b<L.length;b++){var m=1/0;for(h=0;h<L[b].length;h++){var S=L[b][h].trace.legendrank;m>S&&(m=S)}L[b][0]._groupMinRank=m,L[b][0]._preGroupSort=b}var w=function(R,B){return R[0]._groupMinRank-B[0]._groupMinRank||R[0]._preGroupSort-B[0]._preGroupSort},I=function(R,B){return R.trace.legendrank-B.trace.legendrank||R._preSort-B._preSort};for(L.forEach(function(R,B){R[0]._preGroupSort=B}),L.sort(w),b=0;b<L.length;b++){L[b].forEach(function(R,B){R._preSort=B}),L[b].sort(I);var O=L[b][0].trace,D=null;for(h=0;h<L[b].length;h++){var P=L[b][h].trace.legendgrouptitle;if(P&&P.text){D=P,v&&(P.font=C._groupTitleFont);break}}if(r&&L[b].reverse(),D){var F=!1;for(h=0;h<L[b].length;h++)if(M.traceIs(L[b][h].trace,"pie-like")){F=!0;break}L[b].unshift({i:-1,groupTitle:D,noClick:F,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:C.groupclick==="toggleitem"?!0:O.visible}})}for(h=0;h<L[b].length;h++)L[b][h]=[L[b][h]]}return C._lgroupsLength=L.length,C._maxNameLength=p,L}},33048:function(Q,U,t){var M=t(24040),E=t(3400),i=E.pushUnique,C=!0;Q.exports=function(T,v,d){var r=v._fullLayout;if(v._dragged||v._editing)return;var e=r.legend.itemclick,l=r.legend.itemdoubleclick,n=r.legend.groupclick;d===1&&e==="toggle"&&l==="toggleothers"&&C&&v.data&&v._context.showTips&&E.notifier(E._(v,"Double-click on legend to isolate one trace"),"long"),C=!1;var s;if(d===1?s=e:d===2&&(s=l),!s)return;var o=n==="togglegroup",p=r.hiddenlabels?r.hiddenlabels.slice():[],b=T.data()[0][0];if(b.groupTitle&&b.noClick)return;var h=v._fullData,_=(r.shapes||[]).filter(function(At){return At.showlegend}),a=h.concat(_),c=b.trace;c._isShape&&(c=c._fullInput);var f=c.legendgroup,x,k,y,A,L,u,m={},S=[],w=[],I=[];function O(At,Ot){var It=S.indexOf(At),St=m.visible;return St||(St=m.visible=[]),S.indexOf(At)===-1&&(S.push(At),It=S.length-1),St[It]=Ot,It}var D=(r.shapes||[]).map(function(At){return At._input}),P=!1;function F(At,Ot){D[At].visible=Ot,P=!0}function R(At,Ot){if(!(b.groupTitle&&!o)){var It=At._fullInput||At,St=It._isShape,Bt=It.index;if(Bt===void 0&&(Bt=It._index),M.hasTransform(It,"groupby")){var re=w[Bt];if(!re){var Yt=M.getTransformIndices(It,"groupby"),he=Yt[Yt.length-1];re=E.keyedContainer(It,"transforms["+he+"].styles","target","value.visible"),w[Bt]=re}var Zt=re.get(At._group);Zt===void 0&&(Zt=!0),Zt!==!1&&re.set(At._group,Ot),I[Bt]=O(Bt,It.visible!==!1)}else{var ae=It.visible===!1?!1:Ot;St?F(Bt,ae):O(Bt,ae)}}}var B=c.legend,N=c._fullInput,G=N&&N._isShape;if(!G&&M.traceIs(c,"pie-like")){var X=b.label,J=p.indexOf(X);if(s==="toggle")J===-1?p.push(X):p.splice(J,1);else if(s==="toggleothers"){var it=J!==-1,nt=[];for(x=0;x<v.calcdata.length;x++){var q=v.calcdata[x];for(k=0;k<q.length;k++){var Z=q[k],$=Z.label;B===q[0].trace.legend&&X!==$&&(p.indexOf($)===-1&&(it=!0),i(p,$),nt.push($))}}if(!it)for(var V=0;V<nt.length;V++){var rt=p.indexOf(nt[V]);rt!==-1&&p.splice(rt,1)}}M.call("_guiRelayout",v,"hiddenlabels",p)}else{var ot=f&&f.length,H=[],Y;if(ot)for(x=0;x<a.length;x++)Y=a[x],Y.visible&&Y.legendgroup===f&&H.push(x);if(s==="toggle"){var at;switch(c.visible){case!0:at="legendonly";break;case!1:at=!1;break;case"legendonly":at=!0;break}if(ot)if(o)for(x=0;x<a.length;x++){var et=a[x];et.visible!==!1&&et.legendgroup===f&&R(et,at)}else R(c,at);else R(c,at)}else if(s==="toggleothers"){var ct,ft,yt,xt,Ct,gt=!0;for(x=0;x<a.length;x++)if(Ct=a[x],ct=Ct===c,yt=Ct.showlegend!==!0,!(ct||yt)&&(ft=ot&&Ct.legendgroup===f,!ft&&Ct.legend===B&&Ct.visible===!0&&!M.traceIs(Ct,"notLegendIsolatable"))){gt=!1;break}for(x=0;x<a.length;x++)if(Ct=a[x],!(Ct.visible===!1||Ct.legend!==B)&&!M.traceIs(Ct,"notLegendIsolatable"))switch(c.visible){case"legendonly":R(Ct,!0);break;case!0:xt=gt?!0:"legendonly",ct=Ct===c,yt=Ct.showlegend!==!0&&!Ct.legendgroup,ft=ct||ot&&Ct.legendgroup===f,R(Ct,ft||yt?!0:xt);break}}for(x=0;x<w.length;x++)if(y=w[x],!!y){var mt=y.constructUpdate(),vt=Object.keys(mt);for(k=0;k<vt.length;k++)A=vt[k],u=m[A]=m[A]||[],u[I[x]]=mt[A]}for(L=Object.keys(m),x=0;x<L.length;x++)for(A=L[x],k=0;k<S.length;k++)m[A].hasOwnProperty(k)||(m[A][k]=void 0);P?M.call("_guiUpdate",v,m,{shapes:D},S):M.call("_guiRestyle",v,m,S)}}},42451:function(Q,U){U.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1},U.isVertical=function(t){return t.orientation!=="h"},U.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}},2780:function(Q,U,t){Q.exports={moduleType:"component",name:"legend",layoutAttributes:t(3800),supplyLayoutDefaults:t(77864),draw:t(31140),style:t(2012)}},2012:function(Q,U,t){var M=t(33428),E=t(24040),i=t(3400),C=i.strTranslate,T=t(43616),v=t(76308),d=t(94288).extractOpts,r=t(43028),e=t(10528),l=t(69656).castOption,n=t(65196),s=12,o=5,p=2,b=10,h=5;Q.exports=function(f,x,k){var y=x._fullLayout;k||(k=y.legend);var A=k.itemsizing==="constant",L=k.itemwidth,u=(L+n.itemGap*2)/2,m=C(u,0),S=function(nt,q,Z,$){var V;if(nt+1)V=nt;else if(q&&q.width>0)V=q.width;else return 0;return A?$:Math.min(V,Z)};f.each(function(nt){var q=M.select(this),Z=i.ensureSingle(q,"g","layers");Z.style("opacity",nt[0].trace.opacity);var $=k.indentation,V=k.valign,rt=nt[0].lineHeight,ot=nt[0].height;if(V==="middle"&&$===0||!rt||!ot)Z.attr("transform",null);else{var H={top:1,bottom:-1}[V],Y=H*(.5*(rt-ot+3))||0,at=k.indentation;Z.attr("transform",C(at,Y))}var et=Z.selectAll("g.legendfill").data([nt]);et.enter().append("g").classed("legendfill",!0);var ct=Z.selectAll("g.legendlines").data([nt]);ct.enter().append("g").classed("legendlines",!0);var ft=Z.selectAll("g.legendsymbols").data([nt]);ft.enter().append("g").classed("legendsymbols",!0),ft.selectAll("g.legendpoints").data([nt]).enter().append("g").classed("legendpoints",!0)}).each(it).each(O).each(P).each(D).each(R).each(X).each(G).each(w).each(I).each(B).each(N);function w(nt){var q=a(nt),Z=q.showFill,$=q.showLine,V=q.showGradientLine,rt=q.showGradientFill,ot=q.anyFill,H=q.anyLine,Y=nt[0],at=Y.trace,et,ct,ft=d(at),yt=ft.colorscale,xt=ft.reversescale,Ct=function(St){if(St.size())if(Z)T.fillGroupStyle(St,x,!0);else{var Bt="legendfill-"+at.uid;T.gradient(St,x,Bt,_(xt),yt,"fill")}},gt=function(St){if(St.size()){var Bt="legendline-"+at.uid;T.lineGroupStyle(St),T.gradient(St,x,Bt,_(xt),yt,"stroke")}},mt=r.hasMarkers(at)||!ot?"M5,0":H?"M5,-2":"M5,-3",vt=M.select(this),At=vt.select(".legendfill").selectAll("path").data(Z||rt?[nt]:[]);if(At.enter().append("path").classed("js-fill",!0),At.exit().remove(),At.attr("d",mt+"h"+L+"v6h-"+L+"z").call(Ct),$||V){var Ot=S(void 0,at.line,b,o);ct=i.minExtend(at,{line:{width:Ot}}),et=[i.minExtend(Y,{trace:ct})]}var It=vt.select(".legendlines").selectAll("path").data($||V?[et]:[]);It.enter().append("path").classed("js-line",!0),It.exit().remove(),It.attr("d",mt+(V?"l"+L+",0.0001":"h"+L)).call($?T.lineGroupStyle:gt)}function I(nt){var q=a(nt),Z=q.anyFill,$=q.anyLine,V=q.showLine,rt=q.showMarker,ot=nt[0],H=ot.trace,Y=!rt&&!$&&!Z&&r.hasText(H),at,et;function ct(At,Ot,It,St){var Bt=i.nestedProperty(H,At).get(),re=i.isArrayOrTypedArray(Bt)&&Ot?Ot(Bt):Bt;if(A&&re&&St!==void 0&&(re=St),It){if(re<It[0])return It[0];if(re>It[1])return It[1]}return re}function ft(At){return ot._distinct&&ot.index&&At[ot.index]?At[ot.index]:At[0]}if(rt||Y||V){var yt={},xt={};if(rt){yt.mc=ct("marker.color",ft),yt.mx=ct("marker.symbol",ft),yt.mo=ct("marker.opacity",i.mean,[.2,1]),yt.mlc=ct("marker.line.color",ft),yt.mlw=ct("marker.line.width",i.mean,[0,5],p),xt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Ct=ct("marker.size",i.mean,[2,16],s);yt.ms=Ct,xt.marker.size=Ct}V&&(xt.line={width:ct("line.width",ft,[0,10],o)}),Y&&(yt.tx="Aa",yt.tp=ct("textposition",ft),yt.ts=10,yt.tc=ct("textfont.color",ft),yt.tf=ct("textfont.family",ft)),at=[i.minExtend(ot,yt)],et=i.minExtend(H,xt),et.selectedpoints=null,et.texttemplate=null}var gt=M.select(this).select("g.legendpoints"),mt=gt.selectAll("path.scatterpts").data(rt?at:[]);mt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",m),mt.exit().remove(),mt.call(T.pointStyle,et,x),rt&&(at[0].mrc=3);var vt=gt.selectAll("g.pointtext").data(Y?at:[]);vt.enter().append("g").classed("pointtext",!0).append("text").attr("transform",m),vt.exit().remove(),vt.selectAll("text").call(T.textPointStyle,et,x)}function O(nt){var q=nt[0].trace,Z=q.type==="waterfall";if(nt[0]._distinct&&Z){var $=nt[0].trace[nt[0].dir].marker;return nt[0].mc=$.color,nt[0].mlw=$.line.width,nt[0].mlc=$.line.color,F(nt,this,"waterfall")}var V=[];q.visible&&Z&&(V=nt[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var rt=M.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(V);rt.enter().append("path").classed("legendwaterfall",!0).attr("transform",m).style("stroke-miterlimit",1),rt.exit().remove(),rt.each(function(ot){var H=M.select(this),Y=q[ot[0]].marker,at=S(void 0,Y.line,h,p);H.attr("d",ot[1]).style("stroke-width",at+"px").call(v.fill,Y.color),at&&H.call(v.stroke,Y.line.color)})}function D(nt){F(nt,this)}function P(nt){F(nt,this,"funnel")}function F(nt,q,Z){var $=nt[0].trace,V=$.marker||{},rt=V.line||{},ot=V.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",H=Z?$.visible&&$.type===Z:E.traceIs($,"bar"),Y=M.select(q).select("g.legendpoints").selectAll("path.legend"+Z).data(H?[nt]:[]);Y.enter().append("path").classed("legend"+Z,!0).attr("d",ot).attr("transform",m),Y.exit().remove(),Y.each(function(at){var et=M.select(this),ct=at[0],ft=S(ct.mlw,V.line,h,p);et.style("stroke-width",ft+"px");var yt=ct.mcc;if(!k._inHover&&"mc"in ct){var xt=d(V),Ct=xt.mid;Ct===void 0&&(Ct=(xt.max+xt.min)/2),yt=T.tryColorscale(V,"")(Ct)}var gt=yt||ct.mc||V.color,mt=V.pattern,vt=mt&&T.getPatternAttr(mt.shape,0,"");if(vt){var At=T.getPatternAttr(mt.bgcolor,0,null),Ot=T.getPatternAttr(mt.fgcolor,0,null),It=mt.fgopacity,St=c(mt.size,8,10),Bt=c(mt.solidity,.5,1),re="legend-"+$.uid;et.call(T.pattern,"legend",x,re,vt,St,Bt,yt,mt.fillmode,At,Ot,It)}else et.call(v.fill,gt);ft&&v.stroke(et,ct.mlc||rt.color)})}function R(nt){var q=nt[0].trace,Z=M.select(this).select("g.legendpoints").selectAll("path.legendbox").data(q.visible&&E.traceIs(q,"box-violin")?[nt]:[]);Z.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),Z.exit().remove(),Z.each(function(){var $=M.select(this);if((q.boxpoints==="all"||q.points==="all")&&v.opacity(q.fillcolor)===0&&v.opacity((q.line||{}).color)===0){var V=i.minExtend(q,{marker:{size:A?s:i.constrain(q.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});Z.call(T.pointStyle,V,x)}else{var rt=S(void 0,q.line,h,p);$.style("stroke-width",rt+"px").call(v.fill,q.fillcolor),rt&&v.stroke($,q.line.color)}})}function B(nt){var q=nt[0].trace,Z=M.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(q.visible&&q.type==="candlestick"?[nt,nt]:[]);Z.enter().append("path").classed("legendcandle",!0).attr("d",function($,V){return V?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",m).style("stroke-miterlimit",1),Z.exit().remove(),Z.each(function($,V){var rt=M.select(this),ot=q[V?"increasing":"decreasing"],H=S(void 0,ot.line,h,p);rt.style("stroke-width",H+"px").call(v.fill,ot.fillcolor),H&&v.stroke(rt,ot.line.color)})}function N(nt){var q=nt[0].trace,Z=M.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(q.visible&&q.type==="ohlc"?[nt,nt]:[]);Z.enter().append("path").classed("legendohlc",!0).attr("d",function($,V){return V?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",m).style("stroke-miterlimit",1),Z.exit().remove(),Z.each(function($,V){var rt=M.select(this),ot=q[V?"increasing":"decreasing"],H=S(void 0,ot.line,h,p);rt.style("fill","none").call(T.dashLine,ot.line.dash,H),H&&v.stroke(rt,ot.line.color)})}function G(nt){J(nt,this,"pie")}function X(nt){J(nt,this,"funnelarea")}function J(nt,q,Z){var $=nt[0],V=$.trace,rt=Z?V.visible&&V.type===Z:E.traceIs(V,Z),ot=M.select(q).select("g.legendpoints").selectAll("path.legend"+Z).data(rt?[nt]:[]);if(ot.enter().append("path").classed("legend"+Z,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",m),ot.exit().remove(),ot.size()){var H=V.marker||{},Y=S(l(H.line.width,$.pts),H.line,h,p),at="pieLike",et=i.minExtend(V,{marker:{line:{width:Y}}},at),ct=i.minExtend($,{trace:et},at);e(ot,ct,et,x)}}function it(nt){var q=nt[0].trace,Z,$=[];if(q.visible)switch(q.type){case"histogram2d":case"heatmap":$=[["M-15,-2V4H15V-2Z"]],Z=!0;break;case"choropleth":case"choroplethmapbox":$=[["M-6,-6V6H6V-6Z"]],Z=!0;break;case"densitymapbox":$=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],Z="radial";break;case"cone":$=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],Z=!1;break;case"streamtube":$=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],Z=!1;break;case"surface":$=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],Z=!0;break;case"mesh3d":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Z=!1;break;case"volume":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Z=!0;break;case"isosurface":$=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],Z=!1;break}var V=M.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data($);V.enter().append("path").classed("legend3dandfriends",!0).attr("transform",m).style("stroke-miterlimit",1),V.exit().remove(),V.each(function(rt,ot){var H=M.select(this),Y=d(q),at=Y.colorscale,et=Y.reversescale,ct=function(Ct){if(Ct.size()){var gt="legendfill-"+q.uid;T.gradient(Ct,x,gt,_(et,Z==="radial"),at,"fill")}},ft;if(at){if(!Z){var yt=at.length;ft=ot===0?at[et?yt-1:0][1]:ot===1?at[et?0:yt-1][1]:at[Math.floor((yt-1)/2)][1]}}else{var xt=q.vertexcolor||q.facecolor||q.color;ft=i.isArrayOrTypedArray(xt)?xt[ot]||xt[0]:xt}H.attr("d",rt[0]),ft?H.call(v.fill,ft):H.call(ct)})}};function _(f,x){var k=x?"radial":"horizontal";return k+(f?"":"reversed")}function a(f){var x=f[0].trace,k=x.contours,y=r.hasLines(x),A=r.hasMarkers(x),L=x.visible&&x.fill&&x.fill!=="none",u=!1,m=!1;if(k){var S=k.coloring;S==="lines"?u=!0:y=S==="none"||S==="heatmap"||k.showlines,k.type==="constraint"?L=k._operation!=="=":(S==="fill"||S==="heatmap")&&(m=!0)}return{showMarker:A,showLine:y,showFill:L,showGradientLine:u,showGradientFill:m,anyLine:y||u,anyFill:L||m}}function c(f,x,k){return f&&i.isArrayOrTypedArray(f)?x:f>k?k:f}},66540:function(Q,U,t){t(76052),Q.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(Q,U,t){var M=t(24040),E=t(7316),i=t(79811),C=t(9224),T=t(4016).eraseActiveShape,v=t(3400),d=v._,r=Q.exports={};r.toImage={name:"toImage",title:function(f){var x=f._context.toImageButtonOptions||{},k=x.format||"png";return k==="png"?d(f,"Download plot as a png"):d(f,"Download plot")},icon:C.camera,click:function(f){var x=f._context.toImageButtonOptions,k={format:x.format||"png"};v.notifier(d(f,"Taking snapshot - this may take a few seconds"),"long"),k.format!=="svg"&&v.isIE()&&(v.notifier(d(f,"IE only supports svg.  Changing format to svg."),"long"),k.format="svg"),["filename","width","height","scale"].forEach(function(y){y in x&&(k[y]=x[y])}),M.call("downloadImage",f,k).then(function(y){v.notifier(d(f,"Snapshot succeeded")+" - "+y,"long")}).catch(function(){v.notifier(d(f,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(f){return d(f,"Edit in Chart Studio")},icon:C.disk,click:function(f){E.sendDataToCloud(f)}},r.editInChartStudio={name:"editInChartStudio",title:function(f){return d(f,"Edit in Chart Studio")},icon:C.pencil,click:function(f){E.sendDataToCloud(f)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(f){return d(f,"Zoom")},attr:"dragmode",val:"zoom",icon:C.zoombox,click:e},r.pan2d={name:"pan2d",_cat:"pan",title:function(f){return d(f,"Pan")},attr:"dragmode",val:"pan",icon:C.pan,click:e},r.select2d={name:"select2d",_cat:"select",title:function(f){return d(f,"Box Select")},attr:"dragmode",val:"select",icon:C.selectbox,click:e},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(f){return d(f,"Lasso Select")},attr:"dragmode",val:"lasso",icon:C.lasso,click:e},r.drawclosedpath={name:"drawclosedpath",title:function(f){return d(f,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:C.drawclosedpath,click:e},r.drawopenpath={name:"drawopenpath",title:function(f){return d(f,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:C.drawopenpath,click:e},r.drawline={name:"drawline",title:function(f){return d(f,"Draw line")},attr:"dragmode",val:"drawline",icon:C.drawline,click:e},r.drawrect={name:"drawrect",title:function(f){return d(f,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:C.drawrect,click:e},r.drawcircle={name:"drawcircle",title:function(f){return d(f,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:C.drawcircle,click:e},r.eraseshape={name:"eraseshape",title:function(f){return d(f,"Erase active shape")},icon:C.eraseshape,click:T},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(f){return d(f,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:e},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(f){return d(f,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:e},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(f){return d(f,"Autoscale")},attr:"zoom",val:"auto",icon:C.autoscale,click:e},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(f){return d(f,"Reset axes")},attr:"zoom",val:"reset",icon:C.home,click:e},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(f){return d(f,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:C.tooltip_basic,gravity:"ne",click:e},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(f){return d(f,"Compare data on hover")},attr:"hovermode",val:function(f){return f._fullLayout._isHoriz?"y":"x"},icon:C.tooltip_compare,gravity:"ne",click:e};function e(f,x){var k=x.currentTarget,y=k.getAttribute("data-attr"),A=k.getAttribute("data-val")||!0,L=f._fullLayout,u={},m=i.list(f,null,!0),S=L._cartesianSpikesEnabled,w,I;if(y==="zoom"){var O=A==="in"?.5:2,D=(1+O)/2,P=(1-O)/2,F;for(I=0;I<m.length;I++)if(w=m[I],!w.fixedrange)if(F=w._name,A==="auto")u[F+".autorange"]=!0;else if(A==="reset")w._rangeInitial0===void 0&&w._rangeInitial1===void 0?u[F+".autorange"]=!0:w._rangeInitial0===void 0?(u[F+".autorange"]=w._autorangeInitial,u[F+".range"]=[null,w._rangeInitial1]):w._rangeInitial1===void 0?(u[F+".range"]=[w._rangeInitial0,null],u[F+".autorange"]=w._autorangeInitial):u[F+".range"]=[w._rangeInitial0,w._rangeInitial1],w._showSpikeInitial!==void 0&&(u[F+".showspikes"]=w._showSpikeInitial,S==="on"&&!w._showSpikeInitial&&(S="off"));else{var R=[w.r2l(w.range[0]),w.r2l(w.range[1])],B=[D*R[0]+P*R[1],D*R[1]+P*R[0]];u[F+".range[0]"]=w.l2r(B[0]),u[F+".range[1]"]=w.l2r(B[1])}}else y==="hovermode"&&(A==="x"||A==="y")&&(A=L._isHoriz?"y":"x",k.setAttribute("data-val",A)),u[y]=A;L._cartesianSpikesEnabled=S,M.call("_guiRelayout",f,u)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(f){return d(f,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:C.zoombox,click:l},r.pan3d={name:"pan3d",_cat:"pan",title:function(f){return d(f,"Pan")},attr:"scene.dragmode",val:"pan",icon:C.pan,click:l},r.orbitRotation={name:"orbitRotation",title:function(f){return d(f,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:C["3d_rotate"],click:l},r.tableRotation={name:"tableRotation",title:function(f){return d(f,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:C["z-axis"],click:l};function l(f,x){for(var k=x.currentTarget,y=k.getAttribute("data-attr"),A=k.getAttribute("data-val")||!0,L=f._fullLayout._subplots.gl3d||[],u={},m=y.split("."),S=0;S<L.length;S++)u[L[S]+"."+m[1]]=A;var w=A==="pan"?A:"zoom";u.dragmode=w,M.call("_guiRelayout",f,u)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(f){return d(f,"Reset camera to default")},attr:"resetDefault",icon:C.home,click:n},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(f){return d(f,"Reset camera to last save")},attr:"resetLastSave",icon:C.movie,click:n};function n(f,x){for(var k=x.currentTarget,y=k.getAttribute("data-attr"),A=y==="resetLastSave",L=y==="resetDefault",u=f._fullLayout,m=u._subplots.gl3d||[],S={},w=0;w<m.length;w++){var I=m[w],O=I+".camera",D=I+".aspectratio",P=I+".aspectmode",F=u[I]._scene,R;A?(S[O+".up"]=F.viewInitial.up,S[O+".eye"]=F.viewInitial.eye,S[O+".center"]=F.viewInitial.center,R=!0):L&&(S[O+".up"]=null,S[O+".eye"]=null,S[O+".center"]=null,R=!0),R&&(S[D+".x"]=F.viewInitial.aspectratio.x,S[D+".y"]=F.viewInitial.aspectratio.y,S[D+".z"]=F.viewInitial.aspectratio.z,S[P]=F.viewInitial.aspectmode)}M.call("_guiRelayout",f,S)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(f){return d(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:o};function s(f,x){var k=x.currentTarget,y=k._previousVal,A=f._fullLayout,L=A._subplots.gl3d||[],u=["xaxis","yaxis","zaxis"],m={},S={};if(y)S=y,k._previousVal=null;else{for(var w=0;w<L.length;w++){var I=L[w],O=A[I],D=I+".hovermode";m[D]=O.hovermode,S[D]=!1;for(var P=0;P<3;P++){var F=u[P],R=I+"."+F+".showspikes";S[R]=!1,m[R]=O[F].showspikes}}k._previousVal=m}return S}function o(f,x){var k=s(f,x);M.call("_guiRelayout",f,k)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(f){return d(f,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:p},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(f){return d(f,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:p},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(f){return d(f,"Reset")},attr:"reset",val:null,icon:C.autoscale,click:p},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(f){return d(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:h};function p(f,x){for(var k=x.currentTarget,y=k.getAttribute("data-attr"),A=k.getAttribute("data-val")||!0,L=f._fullLayout,u=L._subplots.geo||[],m=0;m<u.length;m++){var S=u[m],w=L[S];if(y==="zoom"){var I=w.projection.scale,O=A==="in"?2*I:.5*I;M.call("_guiRelayout",f,S+".projection.scale",O)}}y==="reset"&&c(f,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(f){return d(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:h},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(f){return d(f,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:C.tooltip_basic,gravity:"ne",click:h};function b(f){var x=f._fullLayout;return x.hovermode?!1:x._has("cartesian")?x._isHoriz?"y":"x":"closest"}function h(f){var x=b(f);M.call("_guiRelayout",f,"hovermode",x)}r.resetViewSankey={name:"resetSankeyGroup",title:function(f){return d(f,"Reset view")},icon:C.home,click:function(f){for(var x={"node.groups":[],"node.x":[],"node.y":[]},k=0;k<f._fullData.length;k++){var y=f._fullData[k]._viewInitial;x["node.groups"].push(y.node.groups.slice()),x["node.x"].push(y.node.x.slice()),x["node.y"].push(y.node.y.slice())}M.call("restyle",f,x)}},r.toggleHover={name:"toggleHover",title:function(f){return d(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:C.tooltip_basic,gravity:"ne",click:function(f,x){var k=s(f,x);k.hovermode=b(f),M.call("_guiRelayout",f,k)}},r.resetViews={name:"resetViews",title:function(f){return d(f,"Reset views")},icon:C.home,click:function(f,x){var k=x.currentTarget;k.setAttribute("data-attr","zoom"),k.setAttribute("data-val","reset"),e(f,x),k.setAttribute("data-attr","resetLastSave"),n(f,x),c(f,"geo"),c(f,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(f){return d(f,"Toggle Spike Lines")},icon:C.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(f){var x=f._fullLayout,k=x._cartesianSpikesEnabled;x._cartesianSpikesEnabled=k==="on"?"off":"on",M.call("_guiRelayout",f,_(f))}};function _(f){for(var x=f._fullLayout,k=x._cartesianSpikesEnabled==="on",y=i.list(f,null,!0),A={},L=0;L<y.length;L++){var u=y[L];A[u._name+".showspikes"]=k?!0:u._showSpikeInitial}return A}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(f){return d(f,"Reset view")},attr:"reset",icon:C.home,click:function(f){c(f,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(f){return d(f,"Zoom in")},attr:"zoom",val:"in",icon:C.zoom_plus,click:a},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(f){return d(f,"Zoom out")},attr:"zoom",val:"out",icon:C.zoom_minus,click:a};function a(f,x){for(var k=x.currentTarget,y=k.getAttribute("data-val"),A=f._fullLayout,L=A._subplots.mapbox||[],u=1.05,m={},S=0;S<L.length;S++){var w=L[S],I=A[w].zoom,O=y==="in"?u*I:I/u;m[w+".zoom"]=O}M.call("_guiRelayout",f,m)}function c(f,x){for(var k=f._fullLayout,y=k._subplots[x]||[],A={},L=0;L<y.length;L++)for(var u=y[L],m=k[u]._subplot,S=m.viewInitial,w=Object.keys(S),I=0;I<w.length;I++){var O=w[I];A[u+"."+O]=S[O]}M.call("_guiRelayout",f,A)}},76052:function(Q,U,t){var M=t(44248),E=Object.keys(M),i=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],C=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(i),T=[],v=function(d){if(C.indexOf(d._cat||d.name)===-1){var r=d.name,e=(d._cat||d.name).toLowerCase();T.indexOf(r)===-1&&T.push(r),T.indexOf(e)===-1&&T.push(e)}};E.forEach(function(d){v(M[d])}),T.sort(),Q.exports={DRAW_MODES:i,backButtons:C,foreButtons:T}},90824:function(Q,U,t){var M=t(3400),E=t(76308),i=t(31780),C=t(66540);Q.exports=function(T,v){var d=T.modebar||{},r=i.newContainer(v,"modebar");function e(n,s){return M.coerce(d,r,C,n,s)}e("orientation"),e("bgcolor",E.addOpacity(v.paper_bgcolor,.5));var l=E.contrast(E.rgb(v.modebar.bgcolor));e("color",E.addOpacity(l,.3)),e("activecolor",E.addOpacity(l,.7)),e("uirevision",v.uirevision),e("add"),e("remove")}},45460:function(Q,U,t){Q.exports={moduleType:"component",name:"modebar",layoutAttributes:t(66540),supplyLayoutDefaults:t(90824),manage:t(18816)}},18816:function(Q,U,t){var M=t(79811),E=t(43028),i=t(24040),C=t(10624).isUnifiedHover,T=t(66400),v=t(44248),d=t(76052).DRAW_MODES,r=t(3400).extendDeep;Q.exports=function(b){var h=b._fullLayout,_=b._context,a=h._modeBar;if(!_.displayModeBar&&!_.watermark){a&&(a.destroy(),delete h._modeBar);return}if(!Array.isArray(_.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(_.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c=_.modeBarButtons,f;Array.isArray(c)&&c.length?f=p(c):!_.displayModeBar&&_.watermark?f=[]:f=e(b),a?a.update(b,f):h._modeBar=T(b,f)};function e(b){var h=b._fullLayout,_=b._fullData,a=b._context;function c(H,Y){if(typeof Y=="string"){if(Y.toLowerCase()===H.toLowerCase())return!0}else{var at=Y.name,et=Y._cat||Y.name;if(at===H||et===H.toLowerCase())return!0}return!1}var f=h.modebar.add;typeof f=="string"&&(f=[f]);var x=h.modebar.remove;typeof x=="string"&&(x=[x]);var k=a.modeBarButtonsToAdd.concat(f.filter(function(H){for(var Y=0;Y<a.modeBarButtonsToRemove.length;Y++)if(c(H,a.modeBarButtonsToRemove[Y]))return!1;return!0})),y=a.modeBarButtonsToRemove.concat(x.filter(function(H){for(var Y=0;Y<a.modeBarButtonsToAdd.length;Y++)if(c(H,a.modeBarButtonsToAdd[Y]))return!1;return!0})),A=h._has("cartesian"),L=h._has("gl3d"),u=h._has("geo"),m=h._has("pie"),S=h._has("funnelarea"),w=h._has("gl2d"),I=h._has("ternary"),O=h._has("mapbox"),D=h._has("polar"),P=h._has("smith"),F=h._has("sankey"),R=l(h),B=C(h.hovermode),N=[];function G(H){if(H.length){for(var Y=[],at=0;at<H.length;at++){for(var et=H[at],ct=v[et],ft=ct.name.toLowerCase(),yt=(ct._cat||ct.name).toLowerCase(),xt=!1,Ct=0;Ct<y.length;Ct++){var gt=y[Ct].toLowerCase();if(gt===ft||gt===yt){xt=!0;break}}xt||Y.push(v[et])}N.push(Y)}}var X=["toImage"];a.showEditInChartStudio?X.push("editInChartStudio"):a.showSendToCloud&&X.push("sendDataToCloud"),G(X);var J=[],it=[],nt=[],q=[];(A||w||m||S||I)+u+L+O+D+P>1?(it=["toggleHover"],nt=["resetViews"]):u?(J=["zoomInGeo","zoomOutGeo"],it=["hoverClosestGeo"],nt=["resetGeo"]):L?(it=["hoverClosest3d"],nt=["resetCameraDefault3d","resetCameraLastSave3d"]):O?(J=["zoomInMapbox","zoomOutMapbox"],it=["toggleHover"],nt=["resetViewMapbox"]):w?it=["hoverClosestGl2d"]:m?it=["hoverClosestPie"]:F?(it=["hoverClosestCartesian","hoverCompareCartesian"],nt=["resetViewSankey"]):it=["toggleHover"],A&&(it=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(s(_)||B)&&(it=[]),(A||w)&&!R&&(J=["zoomIn2d","zoomOut2d","autoScale2d"],nt[0]!=="resetViews"&&(nt=["resetScale2d"])),L?q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(A||w)&&!R||I?q=["zoom2d","pan2d"]:O||u?q=["pan2d"]:D&&(q=["zoom2d"]),n(_)&&q.push("select2d","lasso2d");var Z=[],$=function(H){Z.indexOf(H)===-1&&it.indexOf(H)!==-1&&Z.push(H)};if(Array.isArray(k)){for(var V=[],rt=0;rt<k.length;rt++){var ot=k[rt];typeof ot=="string"?(ot=ot.toLowerCase(),d.indexOf(ot)!==-1?(h._has("mapbox")||h._has("cartesian"))&&q.push(ot):ot==="togglespikelines"?$("toggleSpikelines"):ot==="togglehover"?$("toggleHover"):ot==="hovercompare"?$("hoverCompareCartesian"):ot==="hoverclosest"?($("hoverClosestCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestGl2d"),$("hoverClosestPie")):ot==="v1hovermode"&&($("toggleHover"),$("hoverClosestCartesian"),$("hoverCompareCartesian"),$("hoverClosestGeo"),$("hoverClosest3d"),$("hoverClosestGl2d"),$("hoverClosestPie"))):V.push(ot)}k=V}return G(q),G(J.concat(nt)),G(Z),o(N,k)}function l(b){for(var h=M.list({_fullLayout:b},null,!0),_=0;_<h.length;_++)if(!h[_].fixedrange)return!1;return!0}function n(b){for(var h=!1,_=0;_<b.length&&!h;_++){var a=b[_];!a._module||!a._module.selectPoints||(i.traceIs(a,"scatter-like")?(E.hasMarkers(a)||E.hasText(a))&&(h=!0):i.traceIs(a,"box-violin")?(a.boxpoints==="all"||a.points==="all")&&(h=!0):h=!0)}return h}function s(b){for(var h=0;h<b.length;h++)if(!i.traceIs(b[h],"noHover"))return!1;return!0}function o(b,h){if(h.length)if(Array.isArray(h[0]))for(var _=0;_<h.length;_++)b.push(h[_]);else b.push(h);return b}function p(b){for(var h=r([],b),_=0;_<h.length;_++)for(var a=h[_],c=0;c<a.length;c++){var f=a[c];if(typeof f=="string")if(v[f]!==void 0)h[_][c]=v[f];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return h}},66400:function(Q,U,t){var M=t(33428),E=t(38248),i=t(3400),C=t(9224),T=t(25788).version,v=new DOMParser;function d(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var r=d.prototype;r.update=function(n,s){this.graphInfo=n;var o=this.graphInfo._context,p=this.graphInfo._fullLayout,b="modebar-"+p._uid;this.element.setAttribute("id",b),this._uid=b,this.element.className="modebar",o.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),p.modebar.orientation==="v"&&(this.element.className+=" vertical",s=s.reverse());var h=p.modebar,_=o.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";i.deleteRelatedStyleRule(b),i.addRelatedStyleRule(b,_+"#"+b+" .modebar-group","background-color: "+h.bgcolor),i.addRelatedStyleRule(b,"#"+b+" .modebar-btn .icon path","fill: "+h.color),i.addRelatedStyleRule(b,"#"+b+" .modebar-btn:hover .icon path","fill: "+h.activecolor),i.addRelatedStyleRule(b,"#"+b+" .modebar-btn.active .icon path","fill: "+h.activecolor);var a=!this.hasButtons(s),c=this.hasLogo!==o.displaylogo,f=this.locale!==o.locale;if(this.locale=o.locale,(a||c||f)&&(this.removeAllButtons(),this.updateButtons(s),o.watermark||o.displaylogo)){var x=this.getLogo();o.watermark&&(x.className=x.className+" watermark"),p.modebar.orientation==="v"?this.element.insertBefore(x,this.element.childNodes[0]):this.element.appendChild(x),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(n){var s=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(o){var p=s.createGroup();o.forEach(function(b){var h=b.name;if(!h)throw new Error("must provide button 'name' in button config");if(s.buttonsNames.indexOf(h)!==-1)throw new Error("button name '"+h+"' is taken");s.buttonsNames.push(h);var _=s.createButton(b);s.buttonElements.push(_),p.appendChild(_)}),s.element.appendChild(p)})},r.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},r.createButton=function(n){var s=this,o=document.createElement("a");o.setAttribute("rel","tooltip"),o.className="modebar-btn";var p=n.title;p===void 0?p=n.name:typeof p=="function"&&(p=p(this.graphInfo)),(p||p===0)&&o.setAttribute("data-title",p),n.attr!==void 0&&o.setAttribute("data-attr",n.attr);var b=n.val;b!==void 0&&(typeof b=="function"&&(b=b(this.graphInfo)),o.setAttribute("data-val",b));var h=n.click;if(typeof h!="function")throw new Error("must provide button 'click' function in button config");o.addEventListener("click",function(a){n.click(s.graphInfo,a),s.updateActiveButton(a.currentTarget)}),o.setAttribute("data-toggle",n.toggle||!1),n.toggle&&M.select(o).classed("active",!0);var _=n.icon;return typeof _=="function"?o.appendChild(_()):o.appendChild(this.createIcon(_||C.question)),o.setAttribute("data-gravity",n.gravity||"n"),o},r.createIcon=function(n){var s=E(n.height)?Number(n.height):n.ascent-n.descent,o="http://www.w3.org/2000/svg",p;if(n.path){p=document.createElementNS(o,"svg"),p.setAttribute("viewBox",[0,0,n.width,s].join(" ")),p.setAttribute("class","icon");var b=document.createElementNS(o,"path");b.setAttribute("d",n.path),n.transform?b.setAttribute("transform",n.transform):n.ascent!==void 0&&b.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),p.appendChild(b)}if(n.svg){var h=v.parseFromString(n.svg,"application/xml");p=h.childNodes[0]}return p.setAttribute("height","1em"),p.setAttribute("width","1em"),p},r.updateActiveButton=function(n){var s=this.graphInfo._fullLayout,o=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(p){var b=p.getAttribute("data-val")||!0,h=p.getAttribute("data-attr"),_=p.getAttribute("data-toggle")==="true",a=M.select(p);if(_)h===o&&a.classed("active",!a.classed("active"));else{var c=h===null?h:i.nestedProperty(s,h).get();a.classed("active",c===b)}})},r.hasButtons=function(n){var s=this.buttons;if(!s||n.length!==s.length)return!1;for(var o=0;o<n.length;++o){if(n[o].length!==s[o].length)return!1;for(var p=0;p<n[o].length;p++)if(n[o][p].name!==s[o][p].name)return!1}return!0};function e(n){return n+" (v"+T+")"}r.getLogo=function(){var n=this.createGroup(),s=document.createElement("a");return s.href="https://plotly.com/",s.target="_blank",s.setAttribute("data-title",e(i._(this.graphInfo,"Produced with Plotly.js"))),s.className="modebar-btn plotlyjsicon modebar-btn--logo",s.appendChild(this.createIcon(C.newplotlylogo)),n.appendChild(s),n},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){i.removeElement(this.container.querySelector(".modebar")),i.deleteRelatedStyleRule(this._uid)};function l(n,s){var o=n._fullLayout,p=new d({graphInfo:n,container:o._modebardiv.node(),buttons:s});return o._privateplot&&M.select(p.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),p}Q.exports=l},26680:function(Q,U,t){var M=t(25376),E=t(22548),i=t(31780).templatedArray,C=i("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});Q.exports={visible:{valType:"boolean",editType:"plot"},buttons:C,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:M({editType:"plot"}),bgcolor:{valType:"color",dflt:E.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:E.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(Q){Q.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(Q,U,t){var M=t(3400),E=t(76308),i=t(31780),C=t(51272),T=t(26680),v=t(85984);Q.exports=function(e,l,n,s,o){var p=e.rangeselector||{},b=i.newContainer(l,"rangeselector");function h(x,k){return M.coerce(p,b,T,x,k)}var _=C(p,b,{name:"buttons",handleItemDefaults:d,calendar:o}),a=h("visible",_.length>0);if(a){var c=r(l,n,s);h("x",c[0]),h("y",c[1]),M.noneOrAll(e,l,["x","y"]),h("xanchor"),h("yanchor"),M.coerceFont(h,"font",n.font);var f=h("bgcolor");h("activecolor",E.contrast(f,v.lightAmount,v.darkAmount)),h("bordercolor"),h("borderwidth")}};function d(e,l,n,s){var o=s.calendar;function p(_,a){return M.coerce(e,l,T.buttons,_,a)}var b=p("visible");if(b){var h=p("step");h!=="all"&&(o&&o!=="gregorian"&&(h==="month"||h==="year")?l.stepmode="backward":p("stepmode"),p("count")),p("label")}}function r(e,l,n){for(var s=n.filter(function(h){return l[h].anchor===e._id}),o=0,p=0;p<s.length;p++){var b=l[s[p]].domain;b&&(o=Math.max(b[1],o))}return[e.domain[0],o+v.yPad]}},50216:function(Q,U,t){var M=t(33428),E=t(24040),i=t(7316),C=t(76308),T=t(43616),v=t(3400),d=v.strTranslate,r=t(72736),e=t(79811),l=t(84284),n=l.LINE_SPACING,s=l.FROM_TL,o=l.FROM_BR,p=t(85984),b=t(48040);Q.exports=function(A){var L=A._fullLayout,u=L._infolayer.selectAll(".rangeselector").data(h(A),_);u.enter().append("g").classed("rangeselector",!0),u.exit().remove(),u.style({cursor:"pointer","pointer-events":"all"}),u.each(function(m){var S=M.select(this),w=m,I=w.rangeselector,O=S.selectAll("g.button").data(v.filterVisible(I.buttons));O.enter().append("g").classed("button",!0),O.exit().remove(),O.each(function(D){var P=M.select(this),F=b(w,D);D._isActive=a(w,D,F),P.call(c,I,D),P.call(x,I,D,A),P.on("click",function(){A._dragged||E.call("_guiRelayout",A,F)}),P.on("mouseover",function(){D._isHovered=!0,P.call(c,I,D)}),P.on("mouseout",function(){D._isHovered=!1,P.call(c,I,D)})}),y(A,O,I,w._name,S)})};function h(A){for(var L=e.list(A,"x",!0),u=[],m=0;m<L.length;m++){var S=L[m];S.rangeselector&&S.rangeselector.visible&&u.push(S)}return u}function _(A){return A._id}function a(A,L,u){if(L.step==="all")return A.autorange===!0;var m=Object.keys(u);return A.range[0]===u[m[0]]&&A.range[1]===u[m[1]]}function c(A,L,u){var m=v.ensureSingle(A,"rect","selector-rect",function(S){S.attr("shape-rendering","crispEdges")});m.attr({rx:p.rx,ry:p.ry}),m.call(C.stroke,L.bordercolor).call(C.fill,f(L,u)).style("stroke-width",L.borderwidth+"px")}function f(A,L){return L._isActive||L._isHovered?A.activecolor:A.bgcolor}function x(A,L,u,m){function S(I){r.convertToTspans(I,m)}var w=v.ensureSingle(A,"text","selector-text",function(I){I.attr("text-anchor","middle")});w.call(T.font,L.font).text(k(u,m._fullLayout._meta)).call(S)}function k(A,L){return A.label?L?v.templateString(A.label,L):A.label:A.step==="all"?"all":A.count+A.step.charAt(0)}function y(A,L,u,m,S){var w=0,I=0,O=u.borderwidth;L.each(function(){var N=M.select(this),G=N.select(".selector-text"),X=u.font.size*n,J=Math.max(X*r.lineCount(G),16)+3;I=Math.max(I,J)}),L.each(function(){var N=M.select(this),G=N.select(".selector-rect"),X=N.select(".selector-text"),J=X.node()&&T.bBox(X.node()).width,it=u.font.size*n,nt=r.lineCount(X),q=Math.max(J+10,p.minButtonWidth);N.attr("transform",d(O+w,O)),G.attr({x:0,y:0,width:q,height:I}),r.positionText(X,q/2,I/2-(nt-1)*it/2+3),w+=q+5});var D=A._fullLayout._size,P=D.l+D.w*u.x,F=D.t+D.h*(1-u.y),R="left";v.isRightAnchor(u)&&(P-=w,R="right"),v.isCenterAnchor(u)&&(P-=w/2,R="center");var B="top";v.isBottomAnchor(u)&&(F-=I,B="bottom"),v.isMiddleAnchor(u)&&(F-=I/2,B="middle"),w=Math.ceil(w),I=Math.ceil(I),P=Math.round(P),F=Math.round(F),i.autoMargin(A,m+"-range-selector",{x:u.x,y:u.y,l:w*s[R],r:w*o[R],b:I*o[B],t:I*s[B]}),S.attr("transform",d(P,F))}},48040:function(Q,U,t){var M=t(73220),E=t(3400).titleCase;Q.exports=function(C,T){var v=C._name,d={};if(T.step==="all")d[v+".autorange"]=!0;else{var r=i(C,T);d[v+".range[0]"]=r[0],d[v+".range[1]"]=r[1]}return d};function i(C,T){var v=C.range,d=new Date(C.r2l(v[1])),r=T.step,e=M["utc"+E(r)],l=T.count,n;switch(T.stepmode){case"backward":n=C.l2r(+e.offset(d,-l));break;case"todate":var s=e.offset(d,-l);n=C.l2r(+e.ceil(s));break}var o=v[1];return[n,o]}},41152:function(Q,U,t){Q.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(26680)}}},layoutAttributes:t(26680),handleDefaults:t(22148),draw:t(50216)}},11200:function(Q,U,t){var M=t(22548);Q.exports={bgcolor:{valType:"color",dflt:M.background,editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(Q,U,t){var M=t(79811).list,E=t(19280).getAutoRange,i=t(74636);Q.exports=function(C){for(var T=M(C,"x",!0),v=0;v<T.length;v++){var d=T[v],r=d[i.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=E(C,d))}}},74636:function(Q){Q.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(Q,U,t){var M=t(3400),E=t(31780),i=t(79811),C=t(11200),T=t(10936);Q.exports=function(v,d,r){var e=v[r],l=d[r];if(!(e.rangeslider||d._requestRangeslider[l._id]))return;M.isPlainObject(e.rangeslider)||(e.rangeslider={});var n=e.rangeslider,s=E.newContainer(l,"rangeslider");function o(u,m){return M.coerce(n,s,C,u,m)}var p,b;function h(u,m){return M.coerce(p,b,T,u,m)}var _=o("visible");if(_){o("bgcolor",d.plot_bgcolor),o("bordercolor"),o("borderwidth"),o("thickness"),o("autorange",!l.isValidRange(n.range)),o("range");var a=d._subplots;if(a)for(var c=a.cartesian.filter(function(u){return u.substr(0,u.indexOf("y"))===i.name2id(r)}).map(function(u){return u.substr(u.indexOf("y"),u.length)}),f=M.simpleMap(c,i.id2name),x=0;x<f.length;x++){var k=f[x];p=n[k]||{},b=E.newContainer(s,k,"yaxis");var y=d[k],A;p.range&&y.isValidRange(p.range)&&(A="fixed");var L=h("rangemode",A);L!=="match"&&h("range",y.range.slice())}s._input=n}}},20060:function(Q,U,t){var M=t(33428),E=t(24040),i=t(7316),C=t(3400),T=C.strTranslate,v=t(43616),d=t(76308),r=t(81668),e=t(57952),l=t(79811),n=t(86476),s=t(93972),o=t(74636);Q.exports=function(L){for(var u=L._fullLayout,m=u._rangeSliderData,S=0;S<m.length;S++){var w=m[S][o.name];w._clipId=w._id+"-"+u._uid}function I(D){return D._name}var O=u._infolayer.selectAll("g."+o.containerClassName).data(m,I);O.exit().each(function(D){var P=D[o.name];u._topdefs.select("#"+P._clipId).remove()}).remove(),m.length!==0&&(O.enter().append("g").classed(o.containerClassName,!0).attr("pointer-events","all"),O.each(function(D){var P=M.select(this),F=D[o.name],R=u[l.id2name(D.anchor)],B=F[l.id2name(D.anchor)];if(F.range){var N=C.simpleMap(F.range,D.r2l),G=C.simpleMap(D.range,D.r2l),X;G[0]<G[1]?X=[Math.min(N[0],G[0]),Math.max(N[1],G[1])]:X=[Math.max(N[0],G[0]),Math.min(N[1],G[1])],F.range=F._input.range=C.simpleMap(X,D.l2r)}D.cleanRange("rangeslider.range");var J=u._size,it=D.domain;F._width=J.w*(it[1]-it[0]);var nt=Math.round(J.l+J.w*it[0]),q=Math.round(J.t+J.h*(1-D._counterDomainMin)+(D.side==="bottom"?D._depth:0)+F._offsetShift+o.extraPad);P.attr("transform",T(nt,q)),F._rl=C.simpleMap(F.range,D.r2l);var Z=F._rl[0],$=F._rl[1],V=$-Z;if(F.p2d=function(xt){return xt/F._width*V+Z},F.d2p=function(xt){return(xt-Z)/V*F._width},D.rangebreaks){var rt=D.locateBreaks(Z,$);if(rt.length){var ot,H,Y=0;for(ot=0;ot<rt.length;ot++)H=rt[ot],Y+=H.max-H.min;var at=F._width/($-Z-Y),et=[-at*Z];for(ot=0;ot<rt.length;ot++)H=rt[ot],et.push(et[et.length-1]-at*(H.max-H.min));for(F.d2p=function(xt){for(var Ct=et[0],gt=0;gt<rt.length;gt++){var mt=rt[gt];if(xt>=mt.max)Ct=et[gt+1];else if(xt<mt.min)break}return Ct+at*xt},ot=0;ot<rt.length;ot++)H=rt[ot],H.pmin=F.d2p(H.min),H.pmax=F.d2p(H.max);F.p2d=function(xt){for(var Ct=et[0],gt=0;gt<rt.length;gt++){var mt=rt[gt];if(xt>=mt.pmax)Ct=et[gt+1];else if(xt<mt.pmin)break}return(xt-Ct)/at}}}if(B.rangemode!=="match"){var ct=R.r2l(B.range[0]),ft=R.r2l(B.range[1]),yt=ft-ct;F.d2pOppAxis=function(xt){return(xt-ct)/yt*F._height}}P.call(a,L,D,F).call(c,L,D,F).call(f,L,D,F).call(k,L,D,F,B).call(y,L,D,F).call(A,L,D,F),b(P,L,D,F),_(P,L,D,F,R,B),D.side==="bottom"&&r.draw(L,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:u._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:q+F._height+F._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))};function p(L){return typeof L.clientX=="number"?L.clientX:L.touches&&L.touches.length>0?L.touches[0].clientX:0}function b(L,u,m,S){if(u._context.staticPlot)return;var w=L.select("rect."+o.slideBoxClassName).node(),I=L.select("rect."+o.grabAreaMinClassName).node(),O=L.select("rect."+o.grabAreaMaxClassName).node();function D(){var P=M.event,F=P.target,R=p(P),B=R-L.node().getBoundingClientRect().left,N=S.d2p(m._rl[0]),G=S.d2p(m._rl[1]),X=n.coverSlip();this.addEventListener("touchmove",J),this.addEventListener("touchend",it),X.addEventListener("mousemove",J),X.addEventListener("mouseup",it);function J(nt){var q=p(nt),Z=+q-R,$,V,rt;switch(F){case w:if(rt="ew-resize",N+Z>m._length||G+Z<0)return;$=N+Z,V=G+Z;break;case I:if(rt="col-resize",N+Z>m._length)return;$=N+Z,V=G;break;case O:if(rt="col-resize",G+Z<0)return;$=N,V=G+Z;break;default:rt="ew-resize",$=B,V=B+Z;break}if(V<$){var ot=V;V=$,$=ot}S._pixelMin=$,S._pixelMax=V,s(M.select(X),rt),h(L,u,m,S)}function it(){X.removeEventListener("mousemove",J),X.removeEventListener("mouseup",it),this.removeEventListener("touchmove",J),this.removeEventListener("touchend",it),C.removeElement(X)}}L.on("mousedown",D),L.on("touchstart",D)}function h(L,u,m,S){function w(D){return m.l2r(C.constrain(D,S._rl[0],S._rl[1]))}var I=w(S.p2d(S._pixelMin)),O=w(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){E.call("_guiRelayout",u,m._name+".range",[I,O])})}function _(L,u,m,S,w,I){var O=o.handleWidth/2;function D(nt){return C.constrain(nt,0,S._width)}function P(nt){return C.constrain(nt,0,S._height)}function F(nt){return C.constrain(nt,-O,S._width+O)}var R=D(S.d2p(m._rl[0])),B=D(S.d2p(m._rl[1]));if(L.select("rect."+o.slideBoxClassName).attr("x",R).attr("width",B-R),L.select("rect."+o.maskMinClassName).attr("width",R),L.select("rect."+o.maskMaxClassName).attr("x",B).attr("width",S._width-B),I.rangemode!=="match"){var N=S._height-P(S.d2pOppAxis(w._rl[1])),G=S._height-P(S.d2pOppAxis(w._rl[0]));L.select("rect."+o.maskMinOppAxisClassName).attr("x",R).attr("height",N).attr("width",B-R),L.select("rect."+o.maskMaxOppAxisClassName).attr("x",R).attr("y",G).attr("height",S._height-G).attr("width",B-R),L.select("rect."+o.slideBoxClassName).attr("y",N).attr("height",G-N)}var X=.5,J=Math.round(F(R-O))-X,it=Math.round(F(B-O))+X;L.select("g."+o.grabberMinClassName).attr("transform",T(J,X)),L.select("g."+o.grabberMaxClassName).attr("transform",T(it,X))}function a(L,u,m,S){var w=C.ensureSingle(L,"rect",o.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),I=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,O=-S._offsetShift,D=v.crispRound(u,S.borderwidth);w.attr({width:S._width+I,height:S._height+I,transform:T(O,O),"stroke-width":D}).call(d.stroke,S.bordercolor).call(d.fill,S.bgcolor)}function c(L,u,m,S){var w=u._fullLayout,I=C.ensureSingleById(w._topdefs,"clipPath",S._clipId,function(O){O.append("rect").attr({x:0,y:0})});I.select("rect").attr({width:S._width,height:S._height})}function f(L,u,m,S){var w=u.calcdata,I=L.selectAll("g."+o.rangePlotClassName).data(m._subplotsWith,C.identity);I.enter().append("g").attr("class",function(D){return o.rangePlotClassName+" "+D}).call(v.setClipUrl,S._clipId,u),I.order(),I.exit().remove();var O;I.each(function(D,P){var F=M.select(this),R=P===0,B=l.getFromId(u,D,"y"),N=B._name,G=S[N],X={data:[],layout:{xaxis:{type:m.type,domain:[0,1],range:S.range.slice(),calendar:m.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:u._context};m.rangebreaks&&(X.layout.xaxis.rangebreaks=m.rangebreaks),X.layout[N]={type:B.type,domain:[0,1],range:G.rangemode!=="match"?G.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(X.layout[N].rangebreaks=B.rangebreaks),i.supplyDefaults(X);var J=X._fullLayout.xaxis,it=X._fullLayout[N];J.clearCalc(),J.setScale(),it.clearCalc(),it.setScale();var nt={id:D,plotgroup:F,xaxis:J,yaxis:it,isRangePlot:!0};R?O=nt:(nt.mainplot="xy",nt.mainplotinfo=O),e.rangePlot(u,nt,x(w,D))})}function x(L,u){for(var m=[],S=0;S<L.length;S++){var w=L[S],I=w[0].trace;I.xaxis+I.yaxis===u&&m.push(w)}return m}function k(L,u,m,S,w){var I=C.ensureSingle(L,"rect",o.maskMinClassName,function(F){F.attr({x:0,y:0,"shape-rendering":"crispEdges"})});I.attr("height",S._height).call(d.fill,o.maskColor);var O=C.ensureSingle(L,"rect",o.maskMaxClassName,function(F){F.attr({y:0,"shape-rendering":"crispEdges"})});if(O.attr("height",S._height).call(d.fill,o.maskColor),w.rangemode!=="match"){var D=C.ensureSingle(L,"rect",o.maskMinOppAxisClassName,function(F){F.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).call(d.fill,o.maskOppAxisColor);var P=C.ensureSingle(L,"rect",o.maskMaxOppAxisClassName,function(F){F.attr({y:0,"shape-rendering":"crispEdges"})});P.attr("width",S._width).style("border-top",o.maskOppBorder).call(d.fill,o.maskOppAxisColor)}}function y(L,u,m,S){if(!u._context.staticPlot){var w=C.ensureSingle(L,"rect",o.slideBoxClassName,function(I){I.attr({y:0,cursor:o.slideBoxCursor,"shape-rendering":"crispEdges"})});w.attr({height:S._height,fill:o.slideBoxFill})}}function A(L,u,m,S){var w=C.ensureSingle(L,"g",o.grabberMinClassName),I=C.ensureSingle(L,"g",o.grabberMaxClassName),O={x:0,width:o.handleWidth,rx:o.handleRadius,fill:d.background,stroke:d.defaultLine,"stroke-width":o.handleStrokeWidth,"shape-rendering":"crispEdges"},D={y:Math.round(S._height/4),height:Math.round(S._height/2)},P=C.ensureSingle(w,"rect",o.handleMinClassName,function(G){G.attr(O)});P.attr(D);var F=C.ensureSingle(I,"rect",o.handleMaxClassName,function(G){G.attr(O)});F.attr(D);var R={width:o.grabAreaWidth,x:0,y:0,fill:o.grabAreaFill,cursor:u._context.staticPlot?void 0:o.grabAreaCursor},B=C.ensureSingle(w,"rect",o.grabAreaMinClassName,function(G){G.attr(R)});B.attr("height",S._height);var N=C.ensureSingle(I,"rect",o.grabAreaMaxClassName,function(G){G.attr(R)});N.attr("height",S._height)}},97944:function(Q,U,t){var M=t(79811),E=t(72736),i=t(74636),C=t(84284).LINE_SPACING,T=i.name;function v(d){var r=d&&d[T];return r&&r.visible}U.isVisible=v,U.makeData=function(d){var r=M.list({_fullLayout:d},"x",!0),e=d.margin,l=[];if(!d._has("gl2d"))for(var n=0;n<r.length;n++){var s=r[n];if(v(s)){l.push(s);var o=s[T];o._id=T+s._id,o._height=(d.height-e.b-e.t)*o.thickness,o._offsetShift=Math.floor(o.borderwidth/2)}}d._rangeSliderData=l},U.autoMarginOpts=function(d,r){var e=d._fullLayout,l=r[T],n=r._id.charAt(0),s=0,o=0;if(r.side==="bottom"&&(s=r._depth,r.title.text!==e._dfltTitle[n])){o=1.5*r.title.font.size+10+l._offsetShift;var p=(r.title.text.match(E.BR_TAG_ALL)||[]).length;o+=p*r.title.font.size*C}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:l._height+s+Math.max(e.margin.b,o),pad:i.extraPad+l._offsetShift*2}}},49692:function(Q,U,t){var M=t(3400),E=t(11200),i=t(10936),C=t(97944);Q.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:M.extendFlat({},E,{yaxis:i})}}},layoutAttributes:t(11200),handleDefaults:t(94040),calcAutorange:t(26652),draw:t(20060),isVisible:C.isVisible,makeData:C.makeData,autoMarginOpts:C.autoMarginOpts}},10936:function(Q){Q.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(Q,U,t){var M=t(13916),E=t(52904).line,i=t(98192).u,C=t(92880).extendFlat,T=t(67824).overrideAll,v=t(31780).templatedArray;t(36208),Q.exports=T(v("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:C({},M.xref,{}),yref:C({},M.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:E.color,width:C({},E.width,{min:1,dflt:1}),dash:C({},i,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(Q){Q.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(Q,U,t){var M=t(3400),E=t(54460),i=t(51272),C=t(93956),T=t(65152);Q.exports=function(d,r){i(d,r,{name:"selections",handleItemDefaults:v});for(var e=r.selections,l=0;l<e.length;l++){var n=e[l];n&&n.path===void 0&&(n.x0===void 0||n.x1===void 0||n.y0===void 0||n.y1===void 0)&&(r.selections[l]=null)}};function v(d,r,e){function l(w,I){return M.coerce(d,r,C,w,I)}var n=l("path"),s=n?"path":"rect",o=l("type",s),p=o!=="path";p&&delete r.path,l("opacity"),l("line.color"),l("line.width"),l("line.dash");for(var b=["x","y"],h=0;h<2;h++){var _=b[h],a={_fullLayout:e},c,f,x,k=E.coerceRef(d,r,a,_);if(c=E.getFromId(a,k),c._selectionIndices.push(r._index),x=T.rangeToShapePosition(c),f=T.shapePositionToRange(c),p){var y=_+"0",A=_+"1",L=d[y],u=d[A];d[y]=f(d[y],!0),d[A]=f(d[A],!0),E.coercePosition(r,a,l,k,y),E.coercePosition(r,a,l,k,A);var m=r[y],S=r[A];m!==void 0&&S!==void 0&&(r[y]=x(m),r[A]=x(S),d[y]=L,d[A]=u)}}p&&M.noneOrAll(d,r,["x0","x1","y0","y1"])}},23640:function(Q,U,t){var M=t(9856).readPaths,E=t(55496),i=t(1936).clearOutlineControllers,C=t(76308),T=t(43616),v=t(31780).arrayEditor,d=t(65152),r=d.getPathString;Q.exports={draw:e,drawOne:n,activateLastSelection:p};function e(h){var _=h._fullLayout;i(h),_._selectionLayer.selectAll("path").remove();for(var a in _._plots){var c=_._plots[a].selectionLayer;c&&c.selectAll("path").remove()}for(var f=0;f<_.selections.length;f++)n(h,f)}function l(h){return h._context.editSelection}function n(h,_){h._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+_+'"]').remove();var a=d.makeSelectionsOptionsAndPlotinfo(h,_),c=a.options,f=a.plotinfo;if(!c._input)return;x(h._fullLayout._selectionLayer);function x(k){var y=r(h,c),A={"data-index":_,"fill-rule":"evenodd",d:y},L=c.opacity,u="rgba(0,0,0,0)",m=c.line.color||C.contrast(h._fullLayout.plot_bgcolor),S=c.line.width,w=c.line.dash;S||(S=5,w="solid");var I=l(h)&&h._fullLayout._activeSelectionIndex===_;I&&(u=h._fullLayout.activeselection.fillcolor,L=h._fullLayout.activeselection.opacity);for(var O=[],D=1;D>=0;D--){var P=k.append("path").attr(A).style("opacity",D?.1:L).call(C.stroke,m).call(C.fill,u).call(T.dashLine,D?"solid":w,D?4+S:S);if(s(P,h,c),I){var F=v(h.layout,"selections",c);P.style({cursor:"move"});var R={element:P.node(),plotinfo:f,gd:h,editHelpers:F,isActiveSelection:!0},B=M(y,h);E(B,P,R)}else P.style("pointer-events",D?"all":"none");O[D]=P}var N=O[0],G=O[1];G.node().addEventListener("click",function(){return o(h,N)})}}function s(h,_,a){var c=a.xref+a.yref;T.setClipUrl(h,"clip"+_._fullLayout._uid+c,_)}function o(h,_){if(l(h)){var a=_.node(),c=+a.getAttribute("data-index");if(c>=0){if(c===h._fullLayout._activeSelectionIndex){b(h);return}h._fullLayout._activeSelectionIndex=c,h._fullLayout._deactivateSelection=b,e(h)}}}function p(h){if(l(h)){var _=h._fullLayout.selections.length-1;h._fullLayout._activeSelectionIndex=_,h._fullLayout._deactivateSelection=b,e(h)}}function b(h){if(l(h)){var _=h._fullLayout._activeSelectionIndex;_>=0&&(i(h),delete h._fullLayout._activeSelectionIndex,e(h))}}},34200:function(Q,U,t){var M=t(98192).u,E=t(92880).extendFlat;Q.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:E({},M,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(Q){Q.exports=function(U,t,M){M("newselection.mode");var E=M("newselection.line.width");E&&(M("newselection.line.color"),M("newselection.line.dash")),M("activeselection.fillcolor"),M("activeselection.opacity")}},5968:function(Q,U,t){var M=t(72760),E=M.selectMode,i=t(1936),C=i.clearOutline,T=t(9856),v=T.readPaths,d=T.writePaths,r=T.fixDatesForPaths;Q.exports=function(e,l){if(e.length){var n=e[0][0];if(n){var s=n.getAttribute("d"),o=l.gd,p=o._fullLayout.newselection,b=l.plotinfo,h=b.xaxis,_=b.yaxis,a=l.isActiveSelection,c=l.dragmode,f=(o.layout||{}).selections||[];if(!E(c)&&a!==void 0){var x=o._fullLayout._activeSelectionIndex;if(x<f.length)switch(o._fullLayout.selections[x].type){case"rect":c="select";break;case"path":c="lasso";break}}var k=v(s,o,b,a),y={xref:h._id,yref:_._id,opacity:p.opacity,line:{color:p.line.color,width:p.line.width,dash:p.line.dash}},A;k.length===1&&(A=k[0]),A&&A.length===5&&c==="select"?(y.type="rect",y.x0=A[0][1],y.y0=A[0][2],y.x1=A[2][1],y.y1=A[2][2]):(y.type="path",h&&_&&r(k,h,_),y.path=d(k),A=null),C(o);for(var L=l.editHelpers,u=(L||{}).modifyItem,m=[],S=0;S<f.length;S++){var w=o._fullLayout.selections[S];if(!w){m[S]=w;continue}if(m[S]=w._input,a!==void 0&&S===o._fullLayout._activeSelectionIndex){var I=y;switch(w.type){case"rect":u("x0",I.x0),u("x1",I.x1),u("y0",I.y0),u("y1",I.y1);break;case"path":u("path",I.path);break}}}return a===void 0?(m.push(y),m):L?L.getUpdateObj():{}}}}},5840:function(Q,U,t){var M=t(3400).strTranslate;function E(v,d){switch(v.type){case"log":return v.p2d(d);case"date":return v.p2r(d,0,v.calendar);default:return v.p2r(d)}}function i(v,d){switch(v.type){case"log":return v.d2p(d);case"date":return v.r2p(d,0,v.calendar);default:return v.r2p(d)}}function C(v){var d=v._id.charAt(0)==="y"?1:0;return function(r){return E(v,r[d])}}function T(v){return M(v.xaxis._offset,v.yaxis._offset)}Q.exports={p2r:E,r2p:i,axValue:C,getTransform:T}},22676:function(Q,U,t){var M=t(23640),E=t(43156);Q.exports={moduleType:"component",name:"selections",layoutAttributes:t(93956),supplyLayoutDefaults:t(74224),supplyDrawNewSelectionDefaults:t(81004),includeBasePlot:t(36632)("selections"),draw:M.draw,drawOne:M.drawOne,reselect:E.reselect,prepSelect:E.prepSelect,clearOutline:E.clearOutline,clearSelectionsCache:E.clearSelectionsCache,selectOnClick:E.selectOnClick}},43156:function(Q,U,t){var M=t(14756),E=t(61456),i=t(24040),C=t(43616).dashStyle,T=t(76308),v=t(93024),d=t(10624).makeEventData,r=t(72760),e=r.freeMode,l=r.rectMode,n=r.drawMode,s=r.openMode,o=r.selectMode,p=t(65152),b=t(85448),h=t(55496),_=t(1936).clearOutline,a=t(9856),c=a.handleEllipse,f=a.readPaths,x=t(93940).newShapes,k=t(5968),y=t(23640).activateLastSelection,A=t(3400),L=A.sorterAsc,u=t(92065),m=t(91200),S=t(79811).getFromId,w=t(73696),I=t(39172).redrawReglTraces,O=t(83280),D=O.MINSELECT,P=u.filter,F=u.tester,R=t(5840),B=R.p2r,N=R.axValue,G=R.getTransform;function X(Nt){return Nt.subplot!==void 0}function J(Nt,Mt,Et,Dt,dt){var ht=!X(Dt),bt=e(dt),Pt=l(dt),Gt=s(dt),te=n(dt),ne=o(dt),je=dt==="drawline",Ne=dt==="drawcircle",ge=je||Ne,_e=Dt.gd,De=_e._fullLayout,hr=ne&&De.newselection.mode==="immediate"&&ht,fe=De._zoomlayer,Be=Dt.element.getBoundingClientRect(),He=Dt.plotinfo,pr=G(He),Ze=Mt-Be.left,Xt=Et-Be.top;De._calcInverseTransform(_e);var ie=A.apply3DTransform(De._invTransform)(Ze,Xt);Ze=ie[0],Xt=ie[1];var pe=De._invScaleX,ke=De._invScaleY,Ce=Ze,Fe=Xt,Re="M"+Ze+","+Xt,be=Dt.xaxes[0],Ge=Dt.yaxes[0],Ke=be._length,or=Ge._length,sr=Nt.altKey&&!(n(dt)&&Gt),zt,Ut,Me,Te,qe,Qe,Je;V(Nt,_e,Dt),bt&&(zt=P([[Ze,Xt]],O.BENDPX));var We=fe.selectAll("path.select-outline-"+He.id).data([1]),Oe=te?De.newshape:De.newselection;te&&(Dt.hasText=Oe.label.text||Oe.label.texttemplate);var rr=te&&!Gt?Oe.fillcolor:"rgba(0,0,0,0)",cr=Oe.line.color||(ht?T.contrast(_e._fullLayout.plot_bgcolor):"#7f7f7f");We.enter().append("path").attr("class","select-outline select-outline-"+He.id).style({opacity:te?Oe.opacity/2:1,"stroke-dasharray":C(Oe.line.dash,Oe.line.width),"stroke-width":Oe.line.width+"px","shape-rendering":"crispEdges"}).call(T.stroke,cr).call(T.fill,rr).attr("fill-rule","evenodd").classed("cursor-move",!!te).attr("transform",pr).attr("d",Re+"Z");var lr=fe.append("path").attr("class","zoombox-corners").style({fill:T.background,stroke:T.defaultLine,"stroke-width":1}).attr("transform",pr).attr("d","M0,0Z");if(te&&Dt.hasText){var nr=fe.select(".label-temp");nr.empty()&&(nr=fe.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Sr=De._uid+O.SELECTID,kr=[],Mr=at(_e,Dt.xaxes,Dt.yaxes,Dt.subplot);hr&&!Nt.shiftKey&&(Dt._clearSubplotSelections=function(){if(ht){var Ur=be._id,pn=Ge._id;Yt(_e,Ur,pn,Mr);for(var yn=(_e.layout||{}).selections||[],yr=[],Cr=!1,Dr=0;Dr<yn.length;Dr++){var Nr=De.selections[Dr];Nr.xref!==Ur||Nr.yref!==pn?yr.push(yn[Dr]):Cr=!0}Cr&&(_e._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",_e,{selections:yr}))}});var rn=Tt(Dt);Dt.moveFn=function(Ur,pn){Dt._clearSubplotSelections&&(Dt._clearSubplotSelections(),Dt._clearSubplotSelections=void 0),Ce=Math.max(0,Math.min(Ke,pe*Ur+Ze)),Fe=Math.max(0,Math.min(or,ke*pn+Xt));var yn=Math.abs(Ce-Ze),yr=Math.abs(Fe-Xt);if(Pt){var Cr,Dr,Nr;if(ne){var $r=De.selectdirection;switch($r==="any"?yr<Math.min(yn*.6,D)?Cr="h":yn<Math.min(yr*.6,D)?Cr="v":Cr="d":Cr=$r,Cr){case"h":Dr=Ne?or/2:0,Nr=or;break;case"v":Dr=Ne?Ke/2:0,Nr=Ke;break}}if(te)switch(De.newshape.drawdirection){case"vertical":Cr="h",Dr=Ne?or/2:0,Nr=or;break;case"horizontal":Cr="v",Dr=Ne?Ke/2:0,Nr=Ke;break;case"ortho":yn<yr?(Cr="h",Dr=Xt,Nr=Fe):(Cr="v",Dr=Ze,Nr=Ce);break;default:Cr="d"}Cr==="h"?(Te=ge?c(Ne,[Ce,Dr],[Ce,Nr]):[[Ze,Dr],[Ze,Nr],[Ce,Nr],[Ce,Dr]],Te.xmin=ge?Ce:Math.min(Ze,Ce),Te.xmax=ge?Ce:Math.max(Ze,Ce),Te.ymin=Math.min(Dr,Nr),Te.ymax=Math.max(Dr,Nr),lr.attr("d","M"+Te.xmin+","+(Xt-D)+"h-4v"+2*D+"h4ZM"+(Te.xmax-1)+","+(Xt-D)+"h4v"+2*D+"h-4Z")):Cr==="v"?(Te=ge?c(Ne,[Dr,Fe],[Nr,Fe]):[[Dr,Xt],[Dr,Fe],[Nr,Fe],[Nr,Xt]],Te.xmin=Math.min(Dr,Nr),Te.xmax=Math.max(Dr,Nr),Te.ymin=ge?Fe:Math.min(Xt,Fe),Te.ymax=ge?Fe:Math.max(Xt,Fe),lr.attr("d","M"+(Ze-D)+","+Te.ymin+"v-4h"+2*D+"v4ZM"+(Ze-D)+","+(Te.ymax-1)+"v4h"+2*D+"v-4Z")):Cr==="d"&&(Te=ge?c(Ne,[Ze,Xt],[Ce,Fe]):[[Ze,Xt],[Ze,Fe],[Ce,Fe],[Ce,Xt]],Te.xmin=Math.min(Ze,Ce),Te.xmax=Math.max(Ze,Ce),Te.ymin=Math.min(Xt,Fe),Te.ymax=Math.max(Xt,Fe),lr.attr("d","M0,0Z"))}else bt&&(zt.addPt([Ce,Fe]),Te=zt.filtered);if(Dt.selectionDefs&&Dt.selectionDefs.length?(Me=vt(Dt.mergedPolygons,Te,sr),Te.subtract=sr,Ut=$(Dt.selectionDefs.concat([Te]))):(Me=[Te],Ut=F(Te)),h(Ot(Me,Gt),We,Dt),ne){var fn=St(_e,!1),on=fn.eventData?fn.eventData.points.slice():[];fn=St(_e,!1,Ut,Mr,Dt),Ut=fn.selectionTesters,Je=fn.eventData;var In;zt?In=zt.filtered:In=ce(Me),m.throttle(Sr,O.SELECTDELAY,function(){kr=It(Ut,Mr);for(var En=kr.slice(),$n=0;$n<on.length;$n++){for(var ri=on[$n],ui=!1,ni=0;ni<En.length;ni++)if(En[ni].curveNumber===ri.curveNumber&&En[ni].pointNumber===ri.pointNumber){ui=!0;break}ui||En.push(ri)}En.length&&(Je||(Je={}),Je.points=En),rn(Je,In),Ft(_e,Je)})}},Dt.clickFn=function(Ur,pn){if(lr.remove(),_e._fullLayout._activeShapeIndex>=0){_e._fullLayout._deactivateShape(_e);return}if(!te){var yn=De.clickmode;m.done(Sr).then(function(){if(m.clear(Sr),Ur===2){for(We.remove(),qe=0;qe<Mr.length;qe++)Qe=Mr[qe],Qe._module.selectPoints(Qe,!1);if(gt(_e,Mr),H(Dt),Vt(_e),Mr.length){var yr=Mr[0].xaxis,Cr=Mr[0].yaxis;if(yr&&Cr){for(var Dr=[],Nr=_e._fullLayout.selections,$r=0;$r<Nr.length;$r++){var fn=Nr[$r];fn&&(fn.xref!==yr._id||fn.yref!==Cr._id)&&Dr.push(fn)}Dr.length<Nr.length&&(_e._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",_e,{selections:Dr}))}}}else yn.indexOf("select")>-1&&it(pn,_e,Dt.xaxes,Dt.yaxes,Dt.subplot,Dt,We),yn==="event"&&$t(_e,void 0);v.click(_e,pn,He.id)}).catch(A.error)}},Dt.doneFn=function(){lr.remove(),m.done(Sr).then(function(){m.clear(Sr),!hr&&Te&&Dt.selectionDefs&&(Te.subtract=sr,Dt.selectionDefs.push(Te),Dt.mergedPolygons.length=0,[].push.apply(Dt.mergedPolygons,Me)),(hr||te)&&H(Dt,hr),Dt.doneFnCompleted&&Dt.doneFnCompleted(kr),ne&&$t(_e,Je)}).catch(A.error)}}function it(Nt,Mt,Et,Dt,dt,ht,bt){var Pt=Mt._hoverdata,Gt=Mt._fullLayout,te=Gt.clickmode,ne=te.indexOf("event")>-1,je=[],Ne,ge,_e,De,hr,fe,Be,He,pr,Ze;if(ct(Pt)){V(Nt,Mt,ht),Ne=at(Mt,Et,Dt,dt);var Xt=ft(Pt,Ne),ie=Xt.pointNumbers.length>0;if(ie?xt(Ne,Xt):Ct(Ne)&&(Be=yt(Xt))){for(bt&&bt.remove(),Ze=0;Ze<Ne.length;Ze++)ge=Ne[Ze],ge._module.selectPoints(ge,!1);gt(Mt,Ne),H(ht),ne&&Vt(Mt)}else{He=Nt.shiftKey&&(Be!==void 0?Be:yt(Xt)),_e=nt(Xt.pointNumber,Xt.searchInfo,He);var pe=ht.selectionDefs.concat([_e]);for(De=$(pe),Ze=0;Ze<Ne.length;Ze++)if(hr=Ne[Ze]._module.selectPoints(Ne[Ze],De),fe=At(hr,Ne[Ze]),je.length)for(var ke=0;ke<fe.length;ke++)je.push(fe[ke]);else je=fe;if(pr={points:je},gt(Mt,Ne,pr),_e&&ht&&ht.selectionDefs.push(_e),bt){var Ce=ht.mergedPolygons,Fe=s(ht.dragmode);h(Ot(Ce,Fe),bt,ht)}ne&&$t(Mt,pr)}}}function nt(Nt,Mt,Et){return{pointNumber:Nt,searchInfo:Mt,subtract:!!Et}}function q(Nt){return"pointNumber"in Nt&&"searchInfo"in Nt}function Z(Nt){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Mt,Et,Dt,dt){var ht=Nt.searchInfo.cd[0].trace._expandedIndex,bt=dt.cd[0].trace._expandedIndex;return bt===ht&&Dt===Nt.pointNumber},isRect:!1,degenerate:!1,subtract:!!Nt.subtract}}function $(Nt){if(!Nt.length)return;for(var Mt=[],Et=q(Nt[0])?0:Nt[0][0][0],Dt=Et,dt=q(Nt[0])?0:Nt[0][0][1],ht=dt,bt=0;bt<Nt.length;bt++)if(q(Nt[bt]))Mt.push(Z(Nt[bt]));else{var Pt=F(Nt[bt]);Pt.subtract=!!Nt[bt].subtract,Mt.push(Pt),Et=Math.min(Et,Pt.xmin),Dt=Math.max(Dt,Pt.xmax),dt=Math.min(dt,Pt.ymin),ht=Math.max(ht,Pt.ymax)}function Gt(te,ne,je,Ne){for(var ge=!1,_e=0;_e<Mt.length;_e++)Mt[_e].contains(te,ne,je,Ne)&&(ge=!Mt[_e].subtract);return ge}return{xmin:Et,xmax:Dt,ymin:dt,ymax:ht,pts:[],contains:Gt,isRect:!1,degenerate:!1}}function V(Nt,Mt,Et){var Dt=Mt._fullLayout,dt=Et.plotinfo,ht=Et.dragmode,bt=Dt._lastSelectedSubplot&&Dt._lastSelectedSubplot===dt.id,Pt=(Nt.shiftKey||Nt.altKey)&&!(n(ht)&&s(ht));bt&&Pt&&dt.selection&&dt.selection.selectionDefs&&!Et.selectionDefs?(Et.selectionDefs=dt.selection.selectionDefs,Et.mergedPolygons=dt.selection.mergedPolygons):(!Pt||!dt.selection)&&H(Et),bt||(_(Mt),Dt._lastSelectedSubplot=dt.id)}function rt(Nt){return Nt._fullLayout._activeShapeIndex>=0}function ot(Nt){return Nt._fullLayout._activeSelectionIndex>=0}function H(Nt,Mt){var Et=Nt.dragmode,Dt=Nt.plotinfo,dt=Nt.gd;rt(dt)&&dt._fullLayout._deactivateShape(dt),ot(dt)&&dt._fullLayout._deactivateSelection(dt);var ht=dt._fullLayout,bt=ht._zoomlayer,Pt=n(Et),Gt=o(Et);if(Pt||Gt){var te=bt.selectAll(".select-outline-"+Dt.id);if(te&&dt._fullLayout._outlining){var ne;Pt&&(ne=x(te,Nt)),ne&&i.call("_guiRelayout",dt,{shapes:ne});var je;Gt&&!X(Nt)&&(je=k(te,Nt)),je&&(dt._fullLayout._noEmitSelectedAtStart=!0,i.call("_guiRelayout",dt,{selections:je}).then(function(){Mt&&y(dt)})),dt._fullLayout._outlining=!1}}Dt.selection={},Dt.selection.selectionDefs=Nt.selectionDefs=[],Dt.selection.mergedPolygons=Nt.mergedPolygons=[]}function Y(Nt){return Nt._id}function at(Nt,Mt,Et,Dt){if(!Nt.calcdata)return[];var dt=[],ht=Mt.map(Y),bt=Et.map(Y),Pt,Gt,te;for(te=0;te<Nt.calcdata.length;te++)if(Pt=Nt.calcdata[te],Gt=Pt[0].trace,!(Gt.visible!==!0||!Gt._module||!Gt._module.selectPoints))if(X({subplot:Dt})&&(Gt.subplot===Dt||Gt.geo===Dt))dt.push(et(Gt._module,Pt,Mt[0],Et[0]));else if(Gt.type==="splom"){if(Gt._xaxes[ht[0]]&&Gt._yaxes[bt[0]]){var ne=et(Gt._module,Pt,Mt[0],Et[0]);ne.scene=Nt._fullLayout._splomScenes[Gt.uid],dt.push(ne)}}else if(Gt.type==="sankey"){var je=et(Gt._module,Pt,Mt[0],Et[0]);dt.push(je)}else{if(ht.indexOf(Gt.xaxis)===-1&&(!Gt._xA||!Gt._xA.overlaying)||bt.indexOf(Gt.yaxis)===-1&&(!Gt._yA||!Gt._yA.overlaying))continue;dt.push(et(Gt._module,Pt,S(Nt,Gt.xaxis),S(Nt,Gt.yaxis)))}return dt}function et(Nt,Mt,Et,Dt){return{_module:Nt,cd:Mt,xaxis:Et,yaxis:Dt}}function ct(Nt){return Nt&&Array.isArray(Nt)&&Nt[0].hoverOnBox!==!0}function ft(Nt,Mt){var Et=Nt[0],Dt=-1,dt=[],ht,bt;for(bt=0;bt<Mt.length;bt++)if(ht=Mt[bt],Et.fullData._expandedIndex===ht.cd[0].trace._expandedIndex){if(Et.hoverOnBox===!0)break;Et.pointNumber!==void 0?Dt=Et.pointNumber:Et.binNumber!==void 0&&(Dt=Et.binNumber,dt=Et.pointNumbers);break}return{pointNumber:Dt,pointNumbers:dt,searchInfo:ht}}function yt(Nt){var Mt=Nt.searchInfo.cd[0].trace,Et=Nt.pointNumber,Dt=Nt.pointNumbers,dt=Dt.length>0,ht=dt?Dt[0]:Et;return Mt.selectedpoints?Mt.selectedpoints.indexOf(ht)>-1:!1}function xt(Nt,Mt){var Et=[],Dt,dt,ht,bt;for(bt=0;bt<Nt.length;bt++)Dt=Nt[bt],Dt.cd[0].trace.selectedpoints&&Dt.cd[0].trace.selectedpoints.length>0&&Et.push(Dt);if(Et.length===1&&(ht=Et[0]===Mt.searchInfo,ht&&(dt=Mt.searchInfo.cd[0].trace,dt.selectedpoints.length===Mt.pointNumbers.length))){for(bt=0;bt<Mt.pointNumbers.length;bt++)if(dt.selectedpoints.indexOf(Mt.pointNumbers[bt])<0)return!1;return!0}return!1}function Ct(Nt){var Mt=0,Et,Dt,dt;for(dt=0;dt<Nt.length;dt++)if(Et=Nt[dt],Dt=Et.cd[0].trace,Dt.selectedpoints&&(Dt.selectedpoints.length>1||(Mt+=Dt.selectedpoints.length,Mt>1)))return!1;return Mt===1}function gt(Nt,Mt,Et){var Dt;for(Dt=0;Dt<Mt.length;Dt++){var dt=Mt[Dt].cd[0].trace._fullInput,ht=Nt._fullLayout._tracePreGUI[dt.uid]||{};ht.selectedpoints===void 0&&(ht.selectedpoints=dt._input.selectedpoints||null)}var bt;if(Et){var Pt=Et.points||[];for(Dt=0;Dt<Mt.length;Dt++)bt=Mt[Dt].cd[0].trace,bt._input.selectedpoints=bt._fullInput.selectedpoints=[],bt._fullInput!==bt&&(bt.selectedpoints=[]);for(var Gt=0;Gt<Pt.length;Gt++){var te=Pt[Gt],ne=te.data,je=te.fullData,Ne=te.pointIndex,ge=te.pointIndices;ge?([].push.apply(ne.selectedpoints,ge),bt._fullInput!==bt&&[].push.apply(je.selectedpoints,ge)):(ne.selectedpoints.push(Ne),bt._fullInput!==bt&&je.selectedpoints.push(Ne))}}else for(Dt=0;Dt<Mt.length;Dt++)bt=Mt[Dt].cd[0].trace,delete bt.selectedpoints,delete bt._input.selectedpoints,bt._fullInput!==bt&&delete bt._fullInput.selectedpoints;mt(Nt,Mt)}function mt(Nt,Mt){for(var Et=!1,Dt=0;Dt<Mt.length;Dt++){var dt=Mt[Dt],ht=dt.cd;i.traceIs(ht[0].trace,"regl")&&(Et=!0);var bt=dt._module,Pt=bt.styleOnSelect||bt.style;Pt&&(Pt(Nt,ht,ht[0].node3),ht[0].nodeRangePlot3&&Pt(Nt,ht,ht[0].nodeRangePlot3))}Et&&(w(Nt),I(Nt))}function vt(Nt,Mt,Et){for(var Dt=Et?M.difference:M.union,dt=Dt({regions:Nt},{regions:[Mt]}),ht=dt.regions.reverse(),bt=0;bt<ht.length;bt++){var Pt=ht[bt];Pt.subtract=ae(Pt,ht.slice(0,bt))}return ht}function At(Nt,Mt){if(Array.isArray(Nt))for(var Et=Mt.cd,Dt=Mt.cd[0].trace,dt=0;dt<Nt.length;dt++)Nt[dt]=d(Nt[dt],Dt,Et);return Nt}function Ot(Nt,Mt){for(var Et=[],Dt=0;Dt<Nt.length;Dt++){Et[Dt]=[];for(var dt=0;dt<Nt[Dt].length;dt++){Et[Dt][dt]=[],Et[Dt][dt][0]=dt?"L":"M";for(var ht=0;ht<Nt[Dt][dt].length;ht++)Et[Dt][dt].push(Nt[Dt][dt][ht])}Mt||Et[Dt].push(["Z",Et[Dt][0][1],Et[Dt][0][2]])}return Et}function It(Nt,Mt){for(var Et=[],Dt,dt=[],ht,bt=0;bt<Mt.length;bt++){var Pt=Mt[bt];ht=Pt._module.selectPoints(Pt,Nt),dt.push(ht),Dt=At(ht,Pt),Et=Et.concat(Dt)}return Et}function St(Nt,Mt,Et,Dt,dt){var ht=!!Dt,bt,Pt,Gt;dt&&(bt=dt.plotinfo,Pt=dt.xaxes[0]._id,Gt=dt.yaxes[0]._id);var te=[],ne=[],je=Zt(Nt),Ne=Nt._fullLayout;if(bt){var ge=Ne._zoomlayer,_e=Ne.dragmode,De=n(_e),hr=o(_e);if(De||hr){var fe=S(Nt,Pt,"x"),Be=S(Nt,Gt,"y");if(fe&&Be){var He=ge.selectAll(".select-outline-"+bt.id);if(He&&Nt._fullLayout._outlining&&He.length){for(var pr=He[0][0],Ze=pr.getAttribute("d"),Xt=f(Ze,Nt,bt),ie=[],pe=0;pe<Xt.length;pe++){for(var ke=Xt[pe],Ce=[],Fe=0;Fe<ke.length;Fe++)Ce.push([oe(fe,ke[Fe][1]),oe(Be,ke[Fe][2])]);Ce.xref=Pt,Ce.yref=Gt,Ce.subtract=ae(Ce,ie),ie.push(Ce)}je=je.concat(ie)}}}}var Re=Pt&&Gt?[Pt+Gt]:Ne._subplots.cartesian;Bt(Nt);for(var be={},Ge=0;Ge<Re.length;Ge++){var Ke=Re[Ge],or=Ke.indexOf("y"),sr=Ke.slice(0,or),zt=Ke.slice(or),Ut=Pt&&Gt?Et:void 0;if(Ut=he(je,sr,zt,Ut),Ut){var Me=Dt;if(!ht){var Te=S(Nt,sr,"x"),qe=S(Nt,zt,"y");Me=at(Nt,[Te],[qe],Ke);for(var Qe=0;Qe<Me.length;Qe++){var Je=Me[Qe],We=Je.cd[0],Oe=We.trace;if(Je._module.name==="scattergl"&&!We.t.xpx){var rr=Oe.x,cr=Oe.y,lr=Oe._length;We.t.xpx=[],We.t.ypx=[];for(var nr=0;nr<lr;nr++)We.t.xpx[nr]=Te.c2p(rr[nr]),We.t.ypx[nr]=qe.c2p(cr[nr])}Je._module.name==="splom"&&(be[Oe.uid]||(be[Oe.uid]=!0))}}var Sr=It(Ut,Me);te=te.concat(Sr),ne=ne.concat(Me)}}var kr={points:te};gt(Nt,ne,kr);var Mr=Ne.clickmode,rn=Mr.indexOf("event")>-1&&Mt;if(!bt&&Mt){var Ur=Zt(Nt,!0);if(Ur.length){var pn=Ur[0].xref,yn=Ur[0].yref;if(pn&&yn){var yr=ce(Ur),Cr=ye([S(Nt,pn,"x"),S(Nt,yn,"y")]);Cr(kr,yr)}}Nt._fullLayout._noEmitSelectedAtStart?Nt._fullLayout._noEmitSelectedAtStart=!1:rn&&$t(Nt,kr),Ne._reselect=!1}if(!bt&&Ne._deselect){var Dr=Ne._deselect;Pt=Dr.xref,Gt=Dr.yref,re(Pt,Gt,ne)||Yt(Nt,Pt,Gt,Dt),rn&&(kr.points.length?$t(Nt,kr):Vt(Nt)),Ne._deselect=!1}return{eventData:kr,selectionTesters:Et}}function Bt(Nt){var Mt=Nt.calcdata;if(Mt)for(var Et=0;Et<Mt.length;Et++){var Dt=Mt[Et][0],dt=Dt.trace,ht=Nt._fullLayout._splomScenes;if(ht){var bt=ht[dt.uid];bt&&(bt.selectBatch=[])}}}function re(Nt,Mt,Et){for(var Dt=0;Dt<Et.length;Dt++){var dt=Et[Dt];if(dt.xaxis&&dt.xaxis._id===Nt&&dt.yaxis&&dt.yaxis._id===Mt)return!0}return!1}function Yt(Nt,Mt,Et,Dt){Dt=at(Nt,[S(Nt,Mt,"x")],[S(Nt,Et,"y")],Mt+Et);for(var dt=0;dt<Dt.length;dt++){var ht=Dt[dt];ht._module.selectPoints(ht,!1)}gt(Nt,Dt)}function he(Nt,Mt,Et,Dt){for(var dt,ht=0;ht<Nt.length;ht++){var bt=Nt[ht];if(!(Mt!==bt.xref||Et!==bt.yref))if(dt){var Pt=!!bt.subtract;dt=vt(dt,bt,Pt),Dt=$(dt)}else dt=[bt],Dt=F(bt)}return Dt}function Zt(Nt,Mt){for(var Et=[],Dt=Nt._fullLayout,dt=Dt.selections,ht=dt.length,bt=0;bt<ht;bt++)if(!(Mt&&bt!==Dt._activeSelectionIndex)){var Pt=dt[bt];if(Pt){var Gt=Pt.xref,te=Pt.yref,ne=S(Nt,Gt,"x"),je=S(Nt,te,"y"),Ne,ge,_e,De,hr;if(Pt.type==="rect"){hr=[];var fe=oe(ne,Pt.x0),Be=oe(ne,Pt.x1),He=oe(je,Pt.y0),pr=oe(je,Pt.y1);hr=[[fe,He],[fe,pr],[Be,pr],[Be,He]],Ne=Math.min(fe,Be),ge=Math.max(fe,Be),_e=Math.min(He,pr),De=Math.max(He,pr),hr.xmin=Ne,hr.xmax=ge,hr.ymin=_e,hr.ymax=De,hr.xref=Gt,hr.yref=te,hr.subtract=!1,hr.isRect=!0,Et.push(hr)}else if(Pt.type==="path")for(var Ze=Pt.path.split("Z"),Xt=[],ie=0;ie<Ze.length;ie++){var pe=Ze[ie];if(pe){pe+="Z";var ke=p.extractPathCoords(pe,b.paramIsX,"raw"),Ce=p.extractPathCoords(pe,b.paramIsY,"raw");Ne=1/0,ge=-1/0,_e=1/0,De=-1/0,hr=[];for(var Fe=0;Fe<ke.length;Fe++){var Re=oe(ne,ke[Fe]),be=oe(je,Ce[Fe]);hr.push([Re,be]),Ne=Math.min(Re,Ne),ge=Math.max(Re,ge),_e=Math.min(be,_e),De=Math.max(be,De)}hr.xmin=Ne,hr.xmax=ge,hr.ymin=_e,hr.ymax=De,hr.xref=Gt,hr.yref=te,hr.subtract=ae(hr,Xt),Xt.push(hr),Et.push(hr)}}}}return Et}function ae(Nt,Mt){for(var Et=!1,Dt=0;Dt<Mt.length;Dt++)for(var dt=Mt[Dt],ht=0;ht<Nt.length;ht++)if(E(Nt[ht],dt)){Et=!Et;break}return Et}function oe(Nt,Mt){return Nt.type==="date"&&(Mt=Mt.replace("_"," ")),Nt.type==="log"?Nt.c2p(Mt):Nt.r2p(Mt,null,Nt.calendar)}function ce(Nt){for(var Mt=Nt.length,Et=[],Dt=0;Dt<Mt;Dt++){var dt=Nt[Dt];Et=Et.concat(dt),Et=Et.concat([dt[0]])}return ue(Et)}function ue(Nt){return Nt.isRect=Nt.length===5&&Nt[0][0]===Nt[4][0]&&Nt[0][1]===Nt[4][1]&&Nt[0][0]===Nt[1][0]&&Nt[2][0]===Nt[3][0]&&Nt[0][1]===Nt[3][1]&&Nt[1][1]===Nt[2][1]||Nt[0][1]===Nt[1][1]&&Nt[2][1]===Nt[3][1]&&Nt[0][0]===Nt[3][0]&&Nt[1][0]===Nt[2][0],Nt.isRect&&(Nt.xmin=Math.min(Nt[0][0],Nt[2][0]),Nt.xmax=Math.max(Nt[0][0],Nt[2][0]),Nt.ymin=Math.min(Nt[0][1],Nt[2][1]),Nt.ymax=Math.max(Nt[0][1],Nt[2][1])),Nt}function ye(Nt){return function(Mt,Et){for(var Dt,dt,ht=0;ht<Nt.length;ht++){var bt=Nt[ht],Pt=bt._id,Gt=Pt.charAt(0);if(Et.isRect){Dt||(Dt={});var te=Et[Gt+"min"],ne=Et[Gt+"max"];te!==void 0&&ne!==void 0&&(Dt[Pt]=[B(bt,te),B(bt,ne)].sort(L))}else dt||(dt={}),dt[Pt]=Et.map(N(bt))}Dt&&(Mt.range=Dt),dt&&(Mt.lassoPoints=dt)}}function Tt(Nt){var Mt=Nt.plotinfo;return Mt.fillRangeItems||ye(Nt.xaxes.concat(Nt.yaxes))}function Ft(Nt,Mt){Nt.emit("plotly_selecting",Mt)}function $t(Nt,Mt){Mt&&(Mt.selections=(Nt.layout||{}).selections||[]),Nt.emit("plotly_selected",Mt)}function Vt(Nt){Nt.emit("plotly_deselect",null)}Q.exports={reselect:St,prepSelect:J,clearOutline:_,clearSelectionsCache:H,selectOnClick:it}},46056:function(Q,U,t){var M=t(13916),E=t(25376),i=t(52904).line,C=t(98192).u,T=t(92880).extendFlat,v=t(31780).templatedArray;t(36208);var d=t(45464),r=t(21776).ye,e=t(97728);Q.exports=v("shape",{visible:T({},d.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:T({},d.legend,{editType:"calc+arraydraw"}),legendgroup:T({},d.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:T({},d.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:E({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:T({},d.legendrank,{editType:"calc+arraydraw"}),legendwidth:T({},d.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:T({},M.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},M.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},i.color,{editType:"arraydraw"}),width:T({},i.width,{editType:"calc+arraydraw"}),dash:T({},C,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:r({},{keys:Object.keys(e)}),font:E({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(Q,U,t){var M=t(3400),E=t(54460),i=t(85448),C=t(65152);Q.exports=function(e){var l=e._fullLayout,n=M.filterVisible(l.shapes);if(!(!n.length||!e._fullData.length))for(var s=0;s<n.length;s++){var o=n[s];o._extremes={};var p,b,h=E.getRefType(o.xref),_=E.getRefType(o.yref);if(o.xref!=="paper"&&h!=="domain"){var a=o.xsizemode==="pixel"?o.xanchor:o.x0,c=o.xsizemode==="pixel"?o.xanchor:o.x1;p=E.getFromId(e,o.xref),b=r(p,a,c,o.path,i.paramIsX),b&&(o._extremes[p._id]=E.findExtremes(p,b,T(o)))}if(o.yref!=="paper"&&_!=="domain"){var f=o.ysizemode==="pixel"?o.yanchor:o.y0,x=o.ysizemode==="pixel"?o.yanchor:o.y1;p=E.getFromId(e,o.yref),b=r(p,f,x,o.path,i.paramIsY),b&&(o._extremes[p._id]=E.findExtremes(p,b,v(o)))}}};function T(e){return d(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function v(e){return d(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function d(e,l,n,s,o,p){var b=e/2,h=p;if(l==="pixel"){var _=o?C.extractPathCoords(o,p?i.paramIsY:i.paramIsX):[n,s],a=M.aggNums(Math.max,null,_),c=M.aggNums(Math.min,null,_),f=c<0?Math.abs(c)+b:b,x=a>0?a+b:b;return{ppad:b,ppadplus:h?f:x,ppadminus:h?x:f}}else return{ppad:b}}function r(e,l,n,s,o){var p=e.type==="category"||e.type==="multicategory"?e.r2c:e.d2c;if(l!==void 0)return[p(l),p(n)];if(s){var b=1/0,h=-1/0,_=s.match(i.segmentRE),a,c,f,x,k;for(e.type==="date"&&(p=C.decodeDate(p)),a=0;a<_.length;a++)c=_[a],f=o[c.charAt(0)].drawn,f!==void 0&&(x=_[a].substr(1).match(i.paramRE),!(!x||x.length<f)&&(k=p(x[f]),k<b&&(b=k),k>h&&(h=k)));if(h>=b)return[b,h]}}},85448:function(Q){Q.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(Q,U,t){var M=t(3400),E=t(54460),i=t(51272),C=t(46056),T=t(65152);Q.exports=function(r,e){i(r,e,{name:"shapes",handleItemDefaults:d})};function v(r,e){return r?"bottom":e.indexOf("top")!==-1?"top":e.indexOf("bottom")!==-1?"bottom":"middle"}function d(r,e,l){function n(q,Z){return M.coerce(r,e,C,q,Z)}e._isShape=!0;var s=n("visible");if(s){var o=n("showlegend");o&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),M.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var p=n("path"),b=p?"path":"rect",h=n("type",b),_=h!=="path";_&&delete e.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule");var a=n("line.width");a&&(n("line.color"),n("line.dash"));for(var c=n("xsizemode"),f=n("ysizemode"),x=["x","y"],k=0;k<2;k++){var y=x[k],A=y+"anchor",L=y==="x"?c:f,u={_fullLayout:l},m,S,w,I=E.coerceRef(r,e,u,y,void 0,"paper"),O=E.getRefType(I);if(O==="range"?(m=E.getFromId(u,I),m._shapeIndices.push(e._index),w=T.rangeToShapePosition(m),S=T.shapePositionToRange(m)):S=w=M.identity,_){var D=.25,P=.75,F=y+"0",R=y+"1",B=r[F],N=r[R];r[F]=S(r[F],!0),r[R]=S(r[R],!0),L==="pixel"?(n(F,0),n(R,10)):(E.coercePosition(e,u,n,I,F,D),E.coercePosition(e,u,n,I,R,P)),e[F]=w(e[F]),e[R]=w(e[R]),r[F]=B,r[R]=N}if(L==="pixel"){var G=r[A];r[A]=S(r[A],!0),E.coercePosition(e,u,n,I,A,.25),e[A]=w(e[A]),r[A]=G}}_&&M.noneOrAll(r,e,["x0","x1","y0","y1"]);var X=h==="line",J,it;if(_&&(J=n("label.texttemplate")),J||(it=n("label.text")),it||J){n("label.textangle");var nt=n("label.textposition",X?"middle":"middle center");n("label.xanchor"),n("label.yanchor",v(X,nt)),n("label.padding"),M.coerceFont(n,"label.font",l.font)}}}},60728:function(Q,U,t){var M=t(3400),E=t(54460),i=t(72736),C=t(43616),T=t(9856).readPaths,v=t(65152),d=v.getPathString,r=t(97728),e=t(84284).FROM_TL;Q.exports=function(s,o,p,b){if(b.selectAll(".shape-label").remove(),!!(p.label.text||p.label.texttemplate)){var h;if(p.label.texttemplate){var _={};if(p.type!=="path"){var a=E.getFromId(s,p.xref),c=E.getFromId(s,p.yref);for(var f in r){var x=r[f](p,a,c);x!==void 0&&(_[f]=x)}}h=M.texttemplateStringForShapes(p.label.texttemplate,{},s._fullLayout._d3locale,_)}else h=p.label.text;var k={"data-index":o},y=p.label.font,A={"data-notex":1},L=b.append("g").attr(k).classed("shape-label",!0),u=L.append("text").attr(A).classed("shape-label-text",!0).text(h),m,S,w,I;if(p.path){var O=d(s,p),D=T(O,s);m=1/0,w=1/0,S=-1/0,I=-1/0;for(var P=0;P<D.length;P++)for(var F=0;F<D[P].length;F++)for(var R=D[P][F],B=1;B<R.length;B+=2){var N=R[B],G=R[B+1];m=Math.min(m,N),S=Math.max(S,N),w=Math.min(w,G),I=Math.max(I,G)}}else{var X=E.getFromId(s,p.xref),J=E.getRefType(p.xref),it=E.getFromId(s,p.yref),nt=E.getRefType(p.yref),q=v.getDataToPixel(s,X,!1,J),Z=v.getDataToPixel(s,it,!0,nt);m=q(p.x0),S=q(p.x1),w=Z(p.y0),I=Z(p.y1)}var $=p.label.textangle;$==="auto"&&(p.type==="line"?$=l(m,w,S,I):$=0),u.call(function(at){return at.call(C.font,y).attr({}),i.convertToTspans(at,s),at});var V=C.bBox(u.node()),rt=n(m,w,S,I,p,$,V),ot=rt.textx,H=rt.texty,Y=rt.xanchor;u.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[Y],y:H,x:ot,transform:"rotate("+$+","+ot+","+H+")"}).call(i.positionText,ot,H)}};function l(s,o,p,b){var h,_;return _=Math.abs(p-s),p>=s?h=o-b:h=b-o,-180/Math.PI*Math.atan2(h,_)}function n(s,o,p,b,h,_,a){var c=h.label.textposition,f=h.label.textangle,x=h.label.padding,k=h.type,y=Math.PI/180*_,A=Math.sin(y),L=Math.cos(y),u=h.label.xanchor,m=h.label.yanchor,S,w,I,O;if(k==="line"){c==="start"?(S=s,w=o):c==="end"?(S=p,w=b):(S=(s+p)/2,w=(o+b)/2),u==="auto"&&(c==="start"?f==="auto"?p>s?u="left":p<s?u="right":u="center":p>s?u="right":p<s?u="left":u="center":c==="end"?f==="auto"?p>s?u="right":p<s?u="left":u="center":p>s?u="left":p<s?u="right":u="center":u="center");var D={left:1,center:0,right:-1},P={bottom:-1,middle:0,top:1};if(f==="auto"){var F=P[m];I=-x*A*F,O=x*L*F}else{var R=D[u],B=P[m];I=x*R,O=x*B}S=S+I,w=w+O}else I=x+3,c.indexOf("right")!==-1?(S=Math.max(s,p)-I,u==="auto"&&(u="right")):c.indexOf("left")!==-1?(S=Math.min(s,p)+I,u==="auto"&&(u="left")):(S=(s+p)/2,u==="auto"&&(u="center")),c.indexOf("top")!==-1?w=Math.min(o,b):c.indexOf("bottom")!==-1?w=Math.max(o,b):w=(o+b)/2,O=x,m==="bottom"?w=w-O:m==="top"&&(w=w+O);var N=e[m],G=h.label.font.size,X=a.height,J=(X*N-G)*A,it=-(X*N-G)*L;return{textx:S+J,texty:w+it,xanchor:u}}},55496:function(Q,U,t){var M=t(3400),E=M.strTranslate,i=t(86476),C=t(72760),T=C.drawMode,v=C.selectMode,d=t(24040),r=t(76308),e=t(7e3),l=e.i000,n=e.i090,s=e.i180,o=e.i270,p=t(1936),b=p.clearOutlineControllers,h=t(9856),_=h.pointsOnRectangle,a=h.pointsOnEllipse,c=h.writePaths,f=t(93940).newShapes,x=t(93940).createShapeObj,k=t(5968),y=t(60728);Q.exports=function m(S,w,I,O){O||(O=0);var D=I.gd;function P(){m(S,w,I,O++),(a(S[0])||I.hasText)&&F({redrawing:!0})}function F(vt){var At={};I.isActiveShape!==void 0&&(I.isActiveShape=!1,At=f(w,I)),I.isActiveSelection!==void 0&&(I.isActiveSelection=!1,At=k(w,I),D._fullLayout._reselect=!0),Object.keys(At).length&&d.call((vt||{}).redrawing?"relayout":"_guiRelayout",D,At)}var R=D._fullLayout,B=R._zoomlayer,N=I.dragmode,G=T(N),X=v(N);(G||X)&&(D._fullLayout._outlining=!0),b(D),w.attr("d",c(S));var J,it,nt,q,Z;if(!O&&(I.isActiveShape||I.isActiveSelection)){Z=A([],S);var $=B.append("g").attr("class","outline-controllers");ct($),mt()}if(G&&I.hasText){var V=B.select(".label-temp"),rt=x(w,I,I.dragmode);y(D,"label-temp",rt,V)}function ot(vt){nt=+vt.srcElement.getAttribute("data-i"),q=+vt.srcElement.getAttribute("data-j"),J[nt][q].moveFn=H}function H(vt,At){if(S.length){var Ot=Z[nt][q][1],It=Z[nt][q][2],St=S[nt],Bt=St.length;if(_(St)){var re=vt,Yt=At;if(I.isActiveSelection){var he=L(St,q);he[1]===St[q][1]?Yt=0:re=0}for(var Zt=0;Zt<Bt;Zt++)if(Zt!==q){var ae=St[Zt];ae[1]===St[q][1]&&(ae[1]=Ot+re),ae[2]===St[q][2]&&(ae[2]=It+Yt)}if(St[q][1]=Ot+re,St[q][2]=It+Yt,!_(St))for(var oe=0;oe<Bt;oe++)for(var ce=0;ce<St[oe].length;ce++)St[oe][ce]=Z[nt][oe][ce]}else St[q][1]=Ot+vt,St[q][2]=It+At;P()}}function Y(){F()}function at(){if(S.length&&S[nt]&&S[nt].length){for(var vt=[],At=0;At<S[nt].length;At++)At!==q&&vt.push(S[nt][At]);vt.length>1&&!(vt.length===2&&vt[1][0]==="Z")&&(q===0&&(vt[0][0]="M"),S[nt]=vt,P(),F())}}function et(vt,At){if(vt===2){nt=+At.srcElement.getAttribute("data-i"),q=+At.srcElement.getAttribute("data-j");var Ot=S[nt];!_(Ot)&&!a(Ot)&&at()}}function ct(vt){J=[];for(var At=0;At<S.length;At++){var Ot=S[At],It=_(Ot),St=!It&&a(Ot);J[At]=[];for(var Bt=Ot.length,re=0;re<Bt;re++)if(Ot[re][0]!=="Z"&&!(St&&re!==l&&re!==n&&re!==s&&re!==o)){var Yt=It&&I.isActiveSelection,he;Yt&&(he=L(Ot,re));var Zt=Ot[re][1],ae=Ot[re][2],oe=vt.append(Yt?"rect":"circle").attr("data-i",At).attr("data-j",re).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Yt){var ce=he[1]-Zt,ue=he[2]-ae,ye=ue?5:Math.max(Math.min(25,Math.abs(ce)-5),5),Tt=ce?5:Math.max(Math.min(25,Math.abs(ue)-5),5);oe.classed(ue?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",ye).attr("height",Tt).attr("x",Zt-ye/2).attr("y",ae-Tt/2).attr("transform",E(ce/2,ue/2))}else oe.classed("cursor-grab",!0).attr("r",5).attr("cx",Zt).attr("cy",ae);J[At][re]={element:oe.node(),gd:D,prepFn:ot,doneFn:Y,clickFn:et},i.init(J[At][re])}}}function ft(vt,At){if(S.length)for(var Ot=0;Ot<S.length;Ot++)for(var It=0;It<S[Ot].length;It++)for(var St=0;St+2<S[Ot][It].length;St+=2)S[Ot][It][St+1]=Z[Ot][It][St+1]+vt,S[Ot][It][St+2]=Z[Ot][It][St+2]+At}function yt(vt,At){ft(vt,At),P()}function xt(vt){nt=+vt.srcElement.getAttribute("data-i"),nt||(nt=0),it[nt].moveFn=yt}function Ct(){F()}function gt(vt){vt===2&&u(D)}function mt(){if(it=[],!!S.length){var vt=0;it[vt]={element:w[0][0],gd:D,prepFn:xt,doneFn:Ct,clickFn:gt},i.init(it[vt])}}};function A(m,S){for(var w=0;w<S.length;w++){var I=S[w];m[w]=[];for(var O=0;O<I.length;O++){m[w][O]=[];for(var D=0;D<I[O].length;D++)m[w][O][D]=I[O][D]}}return m}function L(m,S){var w=m[S][1],I=m[S][2],O=m.length,D,P,F;return D=(S+1)%O,P=m[D][1],F=m[D][2],P===w&&F===I&&(D=(S+2)%O,P=m[D][1],F=m[D][2]),[D,P,F]}function u(m){if(v(m._fullLayout.dragmode)){b(m);var S=m._fullLayout._activeSelectionIndex,w=(m.layout||{}).selections||[];if(S<w.length){for(var I=[],O=0;O<w.length;O++)O!==S&&I.push(w[O]);delete m._fullLayout._activeSelectionIndex;var D=m._fullLayout.selections[S];m._fullLayout._deselect={xref:D.xref,yref:D.yref},d.call("_guiRelayout",m,{selections:I})}}}},4016:function(Q,U,t){var M=t(33428),E=t(24040),i=t(3400),C=t(54460),T=t(9856).readPaths,v=t(55496),d=t(60728),r=t(1936).clearOutlineControllers,e=t(76308),l=t(43616),n=t(31780).arrayEditor,s=t(86476),o=t(93972),p=t(85448),b=t(65152),h=b.getPathString;Q.exports={draw:_,drawOne:f,eraseActiveShape:u,drawLabel:d};function _(m){var S=m._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove();for(var w in S._plots){var I=S._plots[w].shapelayer;I&&(I.selectAll("path").remove(),I.selectAll("text").remove())}for(var O=0;O<S.shapes.length;O++)S.shapes[O].visible===!0&&f(m,O)}function a(m){return!!m._fullLayout._outlining}function c(m){return!m._context.edits.shapePosition}function f(m,S){m._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var w=b.makeShapesOptionsAndPlotinfo(m,S),I=w.options,O=w.plotinfo;if(!I._input||I.visible!==!0)return;if(I.layer==="above")P(m._fullLayout._shapeUpperLayer);else if(I.xref==="paper"||I.yref==="paper")P(m._fullLayout._shapeLowerLayer);else if(I.layer==="between")P(O.shapelayerBetween);else if(O._hadPlotinfo){var D=O.mainplotinfo||O;P(D.shapelayer)}else P(m._fullLayout._shapeLowerLayer);function P(F){var R=h(m,I),B={"data-index":S,"fill-rule":I.fillrule,d:R},N=I.opacity,G=I.fillcolor,X=I.line.width?I.line.color:"rgba(0,0,0,0)",J=I.line.width,it=I.line.dash;!J&&I.editable===!0&&(J=5,it="solid");var nt=R[R.length-1]!=="Z",q=c(m)&&I.editable&&m._fullLayout._activeShapeIndex===S;q&&(G=nt?"rgba(0,0,0,0)":m._fullLayout.activeshape.fillcolor,N=m._fullLayout.activeshape.opacity);var Z=F.append("g").classed("shape-group",!0).attr({"data-index":S}),$=Z.append("path").attr(B).style("opacity",N).call(e.stroke,X).call(e.fill,G).call(l.dashLine,it,J);x(Z,m,I),d(m,S,I,Z);var V;if((q||m._context.edits.shapePosition)&&(V=n(m.layout,"shapes",I)),q){$.style({cursor:"move"});var rt={element:$.node(),plotinfo:O,gd:m,editHelpers:V,hasText:I.label.text||I.label.texttemplate,isActiveShape:!0},ot=T(R,m);v(ot,$,rt)}else m._context.edits.shapePosition?k(m,$,I,S,F,V):I.editable===!0&&$.style("pointer-events",nt||e.opacity(G)*N<=.5?"stroke":"all");$.node().addEventListener("click",function(){return A(m,$)})}}function x(m,S,w){var I=(w.xref+w.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(m,I?"clip"+S._fullLayout._uid+I:null,S)}function k(m,S,w,I,O,D){var P=10,F=10,R=w.xsizemode==="pixel",B=w.ysizemode==="pixel",N=w.type==="line",G=w.type==="path",X=D.modifyItem,J,it,nt,q,Z,$,V,rt,ot,H,Y,at,et,ct,ft,yt=M.select(S.node().parentNode),xt=C.getFromId(m,w.xref),Ct=C.getRefType(w.xref),gt=C.getFromId(m,w.yref),mt=C.getRefType(w.yref),vt=b.getDataToPixel(m,xt,!1,Ct),At=b.getDataToPixel(m,gt,!0,mt),Ot=b.getPixelToData(m,xt,!1,Ct),It=b.getPixelToData(m,gt,!0,mt),St=Yt(),Bt={element:St.node(),gd:m,prepFn:ae,doneFn:oe,clickFn:ce},re;s.init(Bt),St.node().onmousemove=Zt;function Yt(){return N?he():S}function he(){var Vt=10,Nt=Math.max(w.line.width,Vt),Mt=O.append("g").attr("data-index",I).attr("drag-helper",!0);Mt.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Nt,"stroke-opacity":"0"});var Et={"fill-opacity":"0"},Dt=Math.max(Nt/2,Vt);return Mt.append("circle").attr({"data-line-point":"start-point",cx:R?vt(w.xanchor)+w.x0:vt(w.x0),cy:B?At(w.yanchor)-w.y0:At(w.y0),r:Dt}).style(Et).classed("cursor-grab",!0),Mt.append("circle").attr({"data-line-point":"end-point",cx:R?vt(w.xanchor)+w.x1:vt(w.x1),cy:B?At(w.yanchor)-w.y1:At(w.y1),r:Dt}).style(Et).classed("cursor-grab",!0),Mt}function Zt(Vt){if(a(m)){re=null;return}if(N)Vt.target.tagName==="path"?re="move":re=Vt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Nt=Bt.element.getBoundingClientRect(),Mt=Nt.right-Nt.left,Et=Nt.bottom-Nt.top,Dt=Vt.clientX-Nt.left,dt=Vt.clientY-Nt.top,ht=!G&&Mt>P&&Et>F&&!Vt.shiftKey?s.getCursor(Dt/Mt,1-dt/Et):"move";o(S,ht),re=ht.split("-")[0]}}function ae(Vt){a(m)||(R&&(Z=vt(w.xanchor)),B&&($=At(w.yanchor)),w.type==="path"?ft=w.path:(J=R?w.x0:vt(w.x0),it=B?w.y0:At(w.y0),nt=R?w.x1:vt(w.x1),q=B?w.y1:At(w.y1)),J<nt?(ot=J,et="x0",H=nt,ct="x1"):(ot=nt,et="x1",H=J,ct="x0"),!B&&it<q||B&&it>q?(V=it,Y="y0",rt=q,at="y1"):(V=q,Y="y1",rt=it,at="y0"),Zt(Vt),Tt(O,w),$t(S,w,m),Bt.moveFn=re==="move"?ue:ye,Bt.altKey=Vt.altKey)}function oe(){a(m)||(o(S),Ft(O),x(S,m,w),E.call("_guiRelayout",m,D.getUpdateObj()))}function ce(){a(m)||Ft(O)}function ue(Vt,Nt){if(w.type==="path"){var Mt=function(dt){return dt},Et=Mt,Dt=Mt;R?X("xanchor",w.xanchor=Ot(Z+Vt)):(Et=function(dt){return Ot(vt(dt)+Vt)},xt&&xt.type==="date"&&(Et=b.encodeDate(Et))),B?X("yanchor",w.yanchor=It($+Nt)):(Dt=function(dt){return It(At(dt)+Nt)},gt&&gt.type==="date"&&(Dt=b.encodeDate(Dt))),X("path",w.path=y(ft,Et,Dt))}else R?X("xanchor",w.xanchor=Ot(Z+Vt)):(X("x0",w.x0=Ot(J+Vt)),X("x1",w.x1=Ot(nt+Vt))),B?X("yanchor",w.yanchor=It($+Nt)):(X("y0",w.y0=It(it+Nt)),X("y1",w.y1=It(q+Nt)));S.attr("d",h(m,w)),Tt(O,w),d(m,I,w,yt)}function ye(Vt,Nt){if(G){var Mt=function(fe){return fe},Et=Mt,Dt=Mt;R?X("xanchor",w.xanchor=Ot(Z+Vt)):(Et=function(fe){return Ot(vt(fe)+Vt)},xt&&xt.type==="date"&&(Et=b.encodeDate(Et))),B?X("yanchor",w.yanchor=It($+Nt)):(Dt=function(fe){return It(At(fe)+Nt)},gt&&gt.type==="date"&&(Dt=b.encodeDate(Dt))),X("path",w.path=y(ft,Et,Dt))}else if(N){if(re==="resize-over-start-point"){var dt=J+Vt,ht=B?it-Nt:it+Nt;X("x0",w.x0=R?dt:Ot(dt)),X("y0",w.y0=B?ht:It(ht))}else if(re==="resize-over-end-point"){var bt=nt+Vt,Pt=B?q-Nt:q+Nt;X("x1",w.x1=R?bt:Ot(bt)),X("y1",w.y1=B?Pt:It(Pt))}}else{var Gt=function(fe){return re.indexOf(fe)!==-1},te=Gt("n"),ne=Gt("s"),je=Gt("w"),Ne=Gt("e"),ge=te?V+Nt:V,_e=ne?rt+Nt:rt,De=je?ot+Vt:ot,hr=Ne?H+Vt:H;B&&(te&&(ge=V-Nt),ne&&(_e=rt-Nt)),(!B&&_e-ge>F||B&&ge-_e>F)&&(X(Y,w[Y]=B?ge:It(ge)),X(at,w[at]=B?_e:It(_e))),hr-De>P&&(X(et,w[et]=R?De:Ot(De)),X(ct,w[ct]=R?hr:Ot(hr)))}S.attr("d",h(m,w)),Tt(O,w),d(m,I,w,yt)}function Tt(Vt,Nt){(R||B)&&Mt();function Mt(){var Et=Nt.type!=="path",Dt=Vt.selectAll(".visual-cue").data([0]),dt=1;Dt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":dt}).classed("visual-cue",!0);var ht=vt(R?Nt.xanchor:i.midRange(Et?[Nt.x0,Nt.x1]:b.extractPathCoords(Nt.path,p.paramIsX))),bt=At(B?Nt.yanchor:i.midRange(Et?[Nt.y0,Nt.y1]:b.extractPathCoords(Nt.path,p.paramIsY)));if(ht=b.roundPositionForSharpStrokeRendering(ht,dt),bt=b.roundPositionForSharpStrokeRendering(bt,dt),R&&B){var Pt="M"+(ht-1-dt)+","+(bt-1-dt)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Dt.attr("d",Pt)}else if(R){var Gt="M"+(ht-1-dt)+","+(bt-9-dt)+"v18 h2 v-18 Z";Dt.attr("d",Gt)}else{var te="M"+(ht-9-dt)+","+(bt-1-dt)+"h18 v2 h-18 Z";Dt.attr("d",te)}}}function Ft(Vt){Vt.selectAll(".visual-cue").remove()}function $t(Vt,Nt,Mt){var Et=Nt.xref,Dt=Nt.yref,dt=C.getFromId(Mt,Et),ht=C.getFromId(Mt,Dt),bt="";Et!=="paper"&&!dt.autorange&&(bt+=Et),Dt!=="paper"&&!ht.autorange&&(bt+=Dt),l.setClipUrl(Vt,bt?"clip"+Mt._fullLayout._uid+bt:null,Mt)}}function y(m,S,w){return m.replace(p.segmentRE,function(I){var O=0,D=I.charAt(0),P=p.paramIsX[D],F=p.paramIsY[D],R=p.numParams[D],B=I.substr(1).replace(p.paramRE,function(N){return O>=R||(P[O]?N=S(N):F[O]&&(N=w(N)),O++),N});return D+B})}function A(m,S){if(c(m)){var w=S.node(),I=+w.getAttribute("data-index");if(I>=0){if(I===m._fullLayout._activeShapeIndex){L(m);return}m._fullLayout._activeShapeIndex=I,m._fullLayout._deactivateShape=L,_(m)}}}function L(m){if(c(m)){var S=m._fullLayout._activeShapeIndex;S>=0&&(r(m),delete m._fullLayout._activeShapeIndex,_(m))}}function u(m){if(c(m)){r(m);var S=m._fullLayout._activeShapeIndex,w=(m.layout||{}).shapes||[];if(S<w.length){for(var I=[],O=0;O<w.length;O++)O!==S&&I.push(w[O]);return delete m._fullLayout._activeShapeIndex,E.call("_guiRelayout",m,{shapes:I})}}}},92872:function(Q,U,t){var M=t(67824).overrideAll,E=t(45464),i=t(25376),C=t(98192).u,T=t(92880).extendFlat,v=t(21776).ye,d=t(97728);Q.exports=M({newshape:{visible:T({},E.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:T({},E.legend,{}),legendgroup:T({},E.legendgroup,{}),legendgrouptitle:{text:T({},E.legendgrouptitle.text,{}),font:i({})},legendrank:T({},E.legendrank,{}),legendwidth:T({},E.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:T({},C,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:T({},E.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:v({newshape:!0},{keys:Object.keys(d)}),font:i({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(Q){var U=32;Q.exports={CIRCLE_SIDES:U,i000:0,i090:U/4,i180:U/2,i270:U/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(Q,U,t){var M=t(76308),E=t(3400);function i(C,T){return C?"bottom":T.indexOf("top")!==-1?"top":T.indexOf("bottom")!==-1?"bottom":"middle"}Q.exports=function(C,T,v){v("newshape.visible"),v("newshape.name"),v("newshape.showlegend"),v("newshape.legend"),v("newshape.legendwidth"),v("newshape.legendgroup"),v("newshape.legendgrouptitle.text"),E.coerceFont(v,"newshape.legendgrouptitle.font"),v("newshape.legendrank"),v("newshape.drawdirection"),v("newshape.layer"),v("newshape.fillcolor"),v("newshape.fillrule"),v("newshape.opacity");var d=v("newshape.line.width");if(d){var r=(C||{}).plot_bgcolor||"#FFF";v("newshape.line.color",M.contrast(r)),v("newshape.line.dash")}var e=C.dragmode==="drawline",l=v("newshape.label.text"),n=v("newshape.label.texttemplate");if(l||n){v("newshape.label.textangle");var s=v("newshape.label.textposition",e?"middle":"middle center");v("newshape.label.xanchor"),v("newshape.label.yanchor",i(e,s)),v("newshape.label.padding"),E.coerceFont(v,"newshape.label.font",T.font)}v("activeshape.fillcolor"),v("activeshape.opacity")}},9856:function(Q,U,t){var M=t(21984),E=t(7e3),i=E.CIRCLE_SIDES,C=E.SQRT2,T=t(5840),v=T.p2r,d=T.r2p,r=[0,3,4,5,6,1,2],e=[0,3,4,1,2];U.writePaths=function(s){var o=s.length;if(!o)return"M0,0Z";for(var p="",b=0;b<o;b++)for(var h=s[b].length,_=0;_<h;_++){var a=s[b][_][0];if(a==="Z")p+="Z";else for(var c=s[b][_].length,f=0;f<c;f++){var x=f;a==="Q"||a==="S"?x=e[f]:a==="C"&&(x=r[f]),p+=s[b][_][x],f>0&&f<c-1&&(p+=",")}}return p},U.readPaths=function(s,o,p,b){var h=M(s),_=[],a=-1,c=function(){a++,_[a]=[]},f,x=0,k=0,y,A,L=function(){y=x,A=k};L();for(var u=0;u<h.length;u++){var m=[],S,w,I,O,D=h[u][0],P=D;switch(D){case"M":c(),x=+h[u][1],k=+h[u][2],m.push([P,x,k]),L();break;case"Q":case"S":S=+h[u][1],I=+h[u][2],x=+h[u][3],k=+h[u][4],m.push([P,x,k,S,I]);break;case"C":S=+h[u][1],I=+h[u][2],w=+h[u][3],O=+h[u][4],x=+h[u][5],k=+h[u][6],m.push([P,x,k,S,I,w,O]);break;case"T":case"L":x=+h[u][1],k=+h[u][2],m.push([P,x,k]);break;case"H":P="L",x=+h[u][1],m.push([P,x,k]);break;case"V":P="L",k=+h[u][1],m.push([P,x,k]);break;case"A":P="L";var F=+h[u][1],R=+h[u][2];+h[u][4]||(F=-F,R=-R);var B=x-F,N=k;for(f=1;f<=i/2;f++){var G=2*Math.PI*f/i;m.push([P,B+F*Math.cos(G),N+R*Math.sin(G)])}break;case"Z":(x!==y||k!==A)&&(x=y,k=A,m.push([P,x,k]));break}for(var X=(p||{}).domain,J=o._fullLayout._size,it=p&&p.xsizemode==="pixel",nt=p&&p.ysizemode==="pixel",q=b===!1,Z=0;Z<m.length;Z++){for(f=0;f+2<7;f+=2){var $=m[Z][f+1],V=m[Z][f+2];$===void 0||V===void 0||(x=$,k=V,p&&(p.xaxis&&p.xaxis.p2r?(q&&($-=p.xaxis._offset),it?$=d(p.xaxis,p.xanchor)+$:$=v(p.xaxis,$)):(q&&($-=J.l),X?$=X.x[0]+$/J.w:$=$/J.w),p.yaxis&&p.yaxis.p2r?(q&&(V-=p.yaxis._offset),nt?V=d(p.yaxis,p.yanchor)-V:V=v(p.yaxis,V)):(q&&(V-=J.t),X?V=X.y[1]-V/J.h:V=1-V/J.h)),m[Z][f+1]=$,m[Z][f+2]=V)}_[a].push(m[Z].slice())}}return _};function l(s,o){return Math.abs(s-o)<=1e-6}function n(s,o){var p=o[1]-s[1],b=o[2]-s[2];return Math.sqrt(p*p+b*b)}U.pointsOnRectangle=function(s){var o=s.length;if(o!==5)return!1;for(var p=1;p<3;p++){var b=s[0][p]-s[1][p],h=s[3][p]-s[2][p];if(!l(b,h))return!1;var _=s[0][p]-s[3][p],a=s[1][p]-s[2][p];if(!l(_,a))return!1}return!l(s[0][1],s[1][1])&&!l(s[0][1],s[3][1])?!1:!!(n(s[0],s[1])*n(s[0],s[3]))},U.pointsOnEllipse=function(s){var o=s.length;if(o!==i+1)return!1;o=i;for(var p=0;p<o;p++){var b=(o*2-p)%o,h=(o/2+b)%o,_=(o/2+p)%o;if(!l(n(s[p],s[_]),n(s[b],s[h])))return!1}return!0},U.handleEllipse=function(s,o,p){if(!s)return[o,p];var b=U.ellipseOver({x0:o[0],y0:o[1],x1:p[0],y1:p[1]}),h=(b.x1+b.x0)/2,_=(b.y1+b.y0)/2,a=(b.x1-b.x0)/2,c=(b.y1-b.y0)/2;a||(a=c=c/C),c||(c=a=a/C);for(var f=[],x=0;x<i;x++){var k=x*2*Math.PI/i;f.push([h+a*Math.cos(k),_+c*Math.sin(k)])}return f},U.ellipseOver=function(s){var o=s.x0,p=s.y0,b=s.x1,h=s.y1,_=b-o,a=h-p;o-=_,p-=a;var c=(o+b)/2,f=(p+h)/2,x=C;return _*=x,a*=x,{x0:c-_,y0:f-a,x1:c+_,y1:f+a}},U.fixDatesForPaths=function(s,o,p){var b=o.type==="date",h=p.type==="date";if(!b&&!h)return s;for(var _=0;_<s.length;_++)for(var a=0;a<s[_].length;a++)for(var c=0;c+2<s[_][a].length;c+=2)b&&(s[_][a][c+1]=s[_][a][c+1].replace(" ","_")),h&&(s[_][a][c+2]=s[_][a][c+2].replace(" ","_"));return s}},93940:function(Q,U,t){var M=t(72760),E=M.drawMode,i=M.openMode,C=t(7e3),T=C.i000,v=C.i090,d=C.i180,r=C.i270,e=C.cos45,l=C.sin45,n=t(5840),s=n.p2r,o=n.r2p,p=t(1936),b=p.clearOutline,h=t(9856),_=h.readPaths,a=h.writePaths,c=h.ellipseOver,f=h.fixDatesForPaths;function x(y,A){if(y.length){var L=y[0][0];if(L){var u=A.gd,m=A.isActiveShape,S=A.dragmode,w=(u.layout||{}).shapes||[];if(!E(S)&&m!==void 0){var I=u._fullLayout._activeShapeIndex;if(I<w.length)switch(u._fullLayout.shapes[I].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var O=w[I].path||"";O[O.length-1]==="Z"?S="drawclosedpath":S="drawopenpath";break}}var D=k(y,A,S);b(u);for(var P=A.editHelpers,F=(P||{}).modifyItem,R=[],B=0;B<w.length;B++){var N=u._fullLayout.shapes[B];if(R[B]=N._input,m!==void 0&&B===u._fullLayout._activeShapeIndex){var G=D;switch(N.type){case"line":case"rect":case"circle":F("x0",G.x0),F("x1",G.x1),F("y0",G.y0),F("y1",G.y1);break;case"path":F("path",G.path);break}}}return m===void 0?(R.push(D),R):P?P.getUpdateObj():{}}}}function k(y,A,L){var u=y[0][0],m=A.gd,S=u.getAttribute("d"),w=m._fullLayout.newshape,I=A.plotinfo,O=A.isActiveShape,D=I.xaxis,P=I.yaxis,F=!!I.domain||!I.xaxis,R=!!I.domain||!I.yaxis,B=i(L),N=_(S,m,I,O),G={editable:!0,visible:w.visible,name:w.name,showlegend:w.showlegend,legend:w.legend,legendwidth:w.legendwidth,legendgroup:w.legendgroup,legendgrouptitle:{text:w.legendgrouptitle.text,font:w.legendgrouptitle.font},legendrank:w.legendrank,label:w.label,xref:F?"paper":D._id,yref:R?"paper":P._id,layer:w.layer,opacity:w.opacity,line:{color:w.line.color,width:w.line.width,dash:w.line.dash}};B||(G.fillcolor=w.fillcolor,G.fillrule=w.fillrule);var X;if(N.length===1&&(X=N[0]),X&&X.length===5&&L==="drawrect")G.type="rect",G.x0=X[0][1],G.y0=X[0][2],G.x1=X[2][1],G.y1=X[2][2];else if(X&&L==="drawline")G.type="line",G.x0=X[0][1],G.y0=X[0][2],G.x1=X[1][1],G.y1=X[1][2];else if(X&&L==="drawcircle"){G.type="circle";var J=X[T][1],it=X[v][1],nt=X[d][1],q=X[r][1],Z=X[T][2],$=X[v][2],V=X[d][2],rt=X[r][2],ot=I.xaxis&&(I.xaxis.type==="date"||I.xaxis.type==="log"),H=I.yaxis&&(I.yaxis.type==="date"||I.yaxis.type==="log");ot&&(J=o(I.xaxis,J),it=o(I.xaxis,it),nt=o(I.xaxis,nt),q=o(I.xaxis,q)),H&&(Z=o(I.yaxis,Z),$=o(I.yaxis,$),V=o(I.yaxis,V),rt=o(I.yaxis,rt));var Y=(it+q)/2,at=(Z+V)/2,et=(q-it+nt-J)/2,ct=(rt-$+V-Z)/2,ft=c({x0:Y,y0:at,x1:Y+et*e,y1:at+ct*l});ot&&(ft.x0=s(I.xaxis,ft.x0),ft.x1=s(I.xaxis,ft.x1)),H&&(ft.y0=s(I.yaxis,ft.y0),ft.y1=s(I.yaxis,ft.y1)),G.x0=ft.x0,G.y0=ft.y0,G.x1=ft.x1,G.y1=ft.y1}else G.type="path",D&&P&&f(N,D,P),G.path=a(N),X=null;return G}Q.exports={newShapes:x,createShapeObj:k}},1936:function(Q){function U(M){var E=M._fullLayout._zoomlayer;E&&E.selectAll(".outline-controllers").remove()}function t(M){var E=M._fullLayout._zoomlayer;E&&E.selectAll(".select-outline").remove(),M._fullLayout._outlining=!1}Q.exports={clearOutlineControllers:U,clearOutline:t}},65152:function(Q,U,t){var M=t(85448),E=t(3400),i=t(54460);U.rangeToShapePosition=function(T){return T.type==="log"?T.r2d:function(v){return v}},U.shapePositionToRange=function(T){return T.type==="log"?T.d2r:function(v){return v}},U.decodeDate=function(T){return function(v){return v.replace&&(v=v.replace("_"," ")),T(v)}},U.encodeDate=function(T){return function(v){return T(v).replace(" ","_")}},U.extractPathCoords=function(T,v,d){var r=[],e=T.match(M.segmentRE);return e.forEach(function(l){var n=v[l.charAt(0)].drawn;if(n!==void 0){var s=l.substr(1).match(M.paramRE);if(!(!s||s.length<n)){var o=s[n],p=d?o:E.cleanNumber(o);r.push(p)}}}),r},U.getDataToPixel=function(T,v,d,r){var e=T._fullLayout._size,l;if(v)if(r==="domain")l=function(s){return v._length*(d?1-s:s)+v._offset};else{var n=U.shapePositionToRange(v);l=function(s){return v._offset+v.r2p(n(s,!0))},v.type==="date"&&(l=U.decodeDate(l))}else d?l=function(s){return e.t+e.h*(1-s)}:l=function(s){return e.l+e.w*s};return l},U.getPixelToData=function(T,v,d,r){var e=T._fullLayout._size,l;if(v)if(r==="domain")l=function(s){var o=(s-v._offset)/v._length;return d?1-o:o};else{var n=U.rangeToShapePosition(v);l=function(s){return n(v.p2r(s-v._offset))}}else d?l=function(s){return 1-(s-e.t)/e.h}:l=function(s){return(s-e.l)/e.w};return l},U.roundPositionForSharpStrokeRendering=function(T,v){var d=Math.round(v%2)===1,r=Math.round(T);return d?r+.5:r},U.makeShapesOptionsAndPlotinfo=function(T,v){var d=T._fullLayout.shapes[v]||{},r=T._fullLayout._plots[d.xref+d.yref],e=!!r;return e?r._hadPlotinfo=!0:(r={},d.xref&&d.xref!=="paper"&&(r.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&d.yref!=="paper"&&(r.yaxis=T._fullLayout[d.yref+"axis"])),r.xsizemode=d.xsizemode,r.ysizemode=d.ysizemode,r.xanchor=d.xanchor,r.yanchor=d.yanchor,{options:d,plotinfo:r}},U.makeSelectionsOptionsAndPlotinfo=function(T,v){var d=T._fullLayout.selections[v]||{},r=T._fullLayout._plots[d.xref+d.yref],e=!!r;return e?r._hadPlotinfo=!0:(r={},d.xref&&(r.xaxis=T._fullLayout[d.xref+"axis"]),d.yref&&(r.yaxis=T._fullLayout[d.yref+"axis"])),{options:d,plotinfo:r}},U.getPathString=function(T,v){var d=v.type,r=i.getRefType(v.xref),e=i.getRefType(v.yref),l=i.getFromId(T,v.xref),n=i.getFromId(T,v.yref),s=T._fullLayout._size,o,p,b,h,_,a,c,f;if(l?r==="domain"?p=function(I){return l._offset+l._length*I}:(o=U.shapePositionToRange(l),p=function(I){return l._offset+l.r2p(o(I,!0))}):p=function(I){return s.l+s.w*I},n?e==="domain"?h=function(I){return n._offset+n._length*(1-I)}:(b=U.shapePositionToRange(n),h=function(I){return n._offset+n.r2p(b(I,!0))}):h=function(I){return s.t+s.h*(1-I)},d==="path")return l&&l.type==="date"&&(p=U.decodeDate(p)),n&&n.type==="date"&&(h=U.decodeDate(h)),C(v,p,h);if(v.xsizemode==="pixel"){var x=p(v.xanchor);_=x+v.x0,a=x+v.x1}else _=p(v.x0),a=p(v.x1);if(v.ysizemode==="pixel"){var k=h(v.yanchor);c=k-v.y0,f=k-v.y1}else c=h(v.y0),f=h(v.y1);if(d==="line")return"M"+_+","+c+"L"+a+","+f;if(d==="rect")return"M"+_+","+c+"H"+a+"V"+f+"H"+_+"Z";var y=(_+a)/2,A=(c+f)/2,L=Math.abs(y-_),u=Math.abs(A-c),m="A"+L+","+u,S=y+L+","+A,w=y+","+(A-u);return"M"+S+m+" 0 1,1 "+w+m+" 0 0,1 "+S+"Z"};function C(T,v,d){var r=T.path,e=T.xsizemode,l=T.ysizemode,n=T.xanchor,s=T.yanchor;return r.replace(M.segmentRE,function(o){var p=0,b=o.charAt(0),h=M.paramIsX[b],_=M.paramIsY[b],a=M.numParams[b],c=o.substr(1).replace(M.paramRE,function(f){return h[p]?e==="pixel"?f=v(n)+Number(f):f=v(f):_[p]&&(l==="pixel"?f=d(s)-Number(f):f=d(f)),p++,p>a&&(f="X"),f});return p>a&&(c=c.replace(/[\s,]*X.*/,""),E.log("Ignoring extra params in segment "+o)),b+c})}},41592:function(Q,U,t){var M=t(4016);Q.exports={moduleType:"component",name:"shapes",layoutAttributes:t(46056),supplyLayoutDefaults:t(43712),supplyDrawNewShapeDefaults:t(65144),includeBasePlot:t(36632)("shapes"),calcAutorange:t(96084),draw:M.draw,drawOne:M.drawOne}},97728:function(Q){function U(o,p){return p?p.d2l(o):o}function t(o,p){return p?p.l2d(o):o}function M(o){return o.x0}function E(o){return o.x1}function i(o){return o.y0}function C(o){return o.y1}function T(o,p){return U(o.x1,p)-U(o.x0,p)}function v(o,p,b){return U(o.y1,b)-U(o.y0,b)}function d(o,p){return Math.abs(T(o,p))}function r(o,p,b){return Math.abs(v(o,p,b))}function e(o,p,b){return o.type!=="line"?void 0:Math.sqrt(Math.pow(T(o,p),2)+Math.pow(v(o,p,b),2))}function l(o,p){return t((U(o.x1,p)+U(o.x0,p))/2,p)}function n(o,p,b){return t((U(o.y1,b)+U(o.y0,b))/2,b)}function s(o,p,b){return o.type!=="line"?void 0:v(o,p,b)/T(o,p)}Q.exports={x0:M,x1:E,y0:i,y1:C,slope:s,dx:T,dy:v,width:d,height:r,length:e,xcenter:l,ycenter:n}},89861:function(Q,U,t){var M=t(25376),E=t(66741),i=t(92880).extendDeepAll,C=t(67824).overrideAll,T=t(85656),v=t(31780).templatedArray,d=t(60876),r=v("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});Q.exports=C(v("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:i(E({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:T.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:M({})},font:M({}),activebgcolor:{valType:"color",dflt:d.gripBgActiveColor},bgcolor:{valType:"color",dflt:d.railBgColor},bordercolor:{valType:"color",dflt:d.railBorderColor},borderwidth:{valType:"number",min:0,dflt:d.railBorderWidth},ticklen:{valType:"number",min:0,dflt:d.tickLength},tickcolor:{valType:"color",dflt:d.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:d.minorTickLength}}),"arraydraw","from-root")},60876:function(Q){Q.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(Q,U,t){var M=t(3400),E=t(51272),i=t(89861),C=t(60876),T=C.name,v=i.steps;Q.exports=function(e,l){E(e,l,{name:T,handleItemDefaults:d})};function d(e,l,n){function s(f,x){return M.coerce(e,l,i,f,x)}for(var o=E(e,l,{name:"steps",handleItemDefaults:r}),p=0,b=0;b<o.length;b++)o[b].visible&&p++;var h;if(p<2?h=l.visible=!1:h=s("visible"),!!h){l._stepCount=p;var _=l._visibleSteps=M.filterVisible(o),a=s("active");(o[a]||{}).visible||(l.active=_[0]._index),s("x"),s("y"),M.noneOrAll(e,l,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),M.coerceFont(s,"font",n.font);var c=s("currentvalue.visible");c&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),M.coerceFont(s,"currentvalue.font",l.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function r(e,l){function n(p,b){return M.coerce(e,l,v,p,b)}var s;if(e.method!=="skip"&&!Array.isArray(e.args)?s=l.visible=!1:s=n("visible"),s){n("method"),n("args");var o=n("label","step-"+l._index);n("value",o),n("execute")}}},79664:function(Q,U,t){var M=t(33428),E=t(7316),i=t(76308),C=t(43616),T=t(3400),v=T.strTranslate,d=t(72736),r=t(31780).arrayEditor,e=t(60876),l=t(84284),n=l.LINE_SPACING,s=l.FROM_TL,o=l.FROM_BR;Q.exports=function(P){var F=P._context.staticPlot,R=P._fullLayout,B=b(R,P),N=R._infolayer.selectAll("g."+e.containerClassName).data(B.length>0?[0]:[]);N.enter().append("g").classed(e.containerClassName,!0).style("cursor",F?null:"ew-resize");function G(nt){nt._commandObserver&&(nt._commandObserver.remove(),delete nt._commandObserver),E.autoMargin(P,p(nt))}if(N.exit().each(function(){M.select(this).selectAll("g."+e.groupClassName).each(G)}).remove(),B.length!==0){var X=N.selectAll("g."+e.groupClassName).data(B,h);X.enter().append("g").classed(e.groupClassName,!0),X.exit().each(G).remove();for(var J=0;J<B.length;J++){var it=B[J];_(P,it)}X.each(function(nt){var q=M.select(this);m(nt),E.manageCommandObserver(P,nt,nt._visibleSteps,function(Z){var $=q.data()[0];$.active!==Z.index&&($._dragging||A(P,q,$,Z.index,!1,!0))}),a(P,M.select(this),nt)})}};function p(P){return e.autoMarginIdRoot+P._index}function b(P,F){for(var R=P[e.name],B=[],N=0;N<R.length;N++){var G=R[N];G.visible&&(G._gd=F,B.push(G))}return B}function h(P){return P._index}function _(P,F){var R=C.tester.selectAll("g."+e.labelGroupClass).data(F._visibleSteps);R.enter().append("g").classed(e.labelGroupClass,!0);var B=0,N=0;R.each(function(rt){var ot=M.select(this),H=x(ot,{step:rt},F),Y=H.node();if(Y){var at=C.bBox(Y);N=Math.max(N,at.height),B=Math.max(B,at.width)}}),R.remove();var G=F._dims={};G.inputAreaWidth=Math.max(e.railWidth,e.gripHeight);var X=P._fullLayout._size;G.lx=X.l+X.w*F.x,G.ly=X.t+X.h*(1-F.y),F.lenmode==="fraction"?G.outerLength=Math.round(X.w*F.len):G.outerLength=F.len,G.inputAreaStart=0,G.inputAreaLength=Math.round(G.outerLength-F.pad.l-F.pad.r);var J=G.inputAreaLength-2*e.stepInset,it=J/(F._stepCount-1),nt=B+e.labelPadding;if(G.labelStride=Math.max(1,Math.ceil(nt/it)),G.labelHeight=N,G.currentValueMaxWidth=0,G.currentValueHeight=0,G.currentValueTotalHeight=0,G.currentValueMaxLines=1,F.currentvalue.visible){var q=C.tester.append("g");R.each(function(rt){var ot=c(q,F,rt.label),H=ot.node()&&C.bBox(ot.node())||{width:0,height:0},Y=d.lineCount(ot);G.currentValueMaxWidth=Math.max(G.currentValueMaxWidth,Math.ceil(H.width)),G.currentValueHeight=Math.max(G.currentValueHeight,Math.ceil(H.height)),G.currentValueMaxLines=Math.max(G.currentValueMaxLines,Y)}),G.currentValueTotalHeight=G.currentValueHeight+F.currentvalue.offset,q.remove()}G.height=G.currentValueTotalHeight+e.tickOffset+F.ticklen+e.labelOffset+G.labelHeight+F.pad.t+F.pad.b;var Z="left";T.isRightAnchor(F)&&(G.lx-=G.outerLength,Z="right"),T.isCenterAnchor(F)&&(G.lx-=G.outerLength/2,Z="center");var $="top";T.isBottomAnchor(F)&&(G.ly-=G.height,$="bottom"),T.isMiddleAnchor(F)&&(G.ly-=G.height/2,$="middle"),G.outerLength=Math.ceil(G.outerLength),G.height=Math.ceil(G.height),G.lx=Math.round(G.lx),G.ly=Math.round(G.ly);var V={y:F.y,b:G.height*o[$],t:G.height*s[$]};F.lenmode==="fraction"?(V.l=0,V.xl=F.x-F.len*s[Z],V.r=0,V.xr=F.x+F.len*o[Z]):(V.x=F.x,V.l=G.outerLength*s[Z],V.r=G.outerLength*o[Z]),E.autoMargin(P,p(F),V)}function a(P,F,R){(R.steps[R.active]||{}).visible||(R.active=R._visibleSteps[0]._index),F.call(c,R).call(D,R).call(k,R).call(u,R).call(O,P,R).call(f,P,R);var B=R._dims;C.setTranslate(F,B.lx+R.pad.l,B.ly+R.pad.t),F.call(S,R,!1),F.call(c,R)}function c(P,F,R){if(F.currentvalue.visible){var B=F._dims,N,G;switch(F.currentvalue.xanchor){case"right":N=B.inputAreaLength-e.currentValueInset-B.currentValueMaxWidth,G="left";break;case"center":N=B.inputAreaLength*.5,G="middle";break;default:N=e.currentValueInset,G="left"}var X=T.ensureSingle(P,"text",e.labelClass,function($){$.attr({"text-anchor":G,"data-notex":1})}),J=F.currentvalue.prefix?F.currentvalue.prefix:"";if(typeof R=="string")J+=R;else{var it=F.steps[F.active].label,nt=F._gd._fullLayout._meta;nt&&(it=T.templateString(it,nt)),J+=it}F.currentvalue.suffix&&(J+=F.currentvalue.suffix),X.call(C.font,F.currentvalue.font).text(J).call(d.convertToTspans,F._gd);var q=d.lineCount(X),Z=(B.currentValueMaxLines+1-q)*F.currentvalue.font.size*n;return d.positionText(X,N,Z),X}}function f(P,F,R){var B=T.ensureSingle(P,"rect",e.gripRectClass,function(N){N.call(L,F,P,R).style("pointer-events","all")});B.attr({width:e.gripWidth,height:e.gripHeight,rx:e.gripRadius,ry:e.gripRadius}).call(i.stroke,R.bordercolor).call(i.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px")}function x(P,F,R){var B=T.ensureSingle(P,"text",e.labelClass,function(X){X.attr({"text-anchor":"middle","data-notex":1})}),N=F.step.label,G=R._gd._fullLayout._meta;return G&&(N=T.templateString(N,G)),B.call(C.font,R.font).text(N).call(d.convertToTspans,R._gd),B}function k(P,F){var R=T.ensureSingle(P,"g",e.labelsClass),B=F._dims,N=R.selectAll("g."+e.labelGroupClass).data(B.labelSteps);N.enter().append("g").classed(e.labelGroupClass,!0),N.exit().remove(),N.each(function(G){var X=M.select(this);X.call(x,G,F),C.setTranslate(X,w(F,G.fraction),e.tickOffset+F.ticklen+F.font.size*n+e.labelOffset+B.currentValueTotalHeight)})}function y(P,F,R,B,N){var G=Math.round(B*(R._stepCount-1)),X=R._visibleSteps[G]._index;X!==R.active&&A(P,F,R,X,!0,N)}function A(P,F,R,B,N,G){var X=R.active;R.active=B,r(P.layout,e.name,R).applyUpdate("active",B);var J=R.steps[R.active];F.call(S,R,G),F.call(c,R),P.emit("plotly_sliderchange",{slider:R,step:R.steps[R.active],interaction:N,previousActive:X}),J&&J.method&&N&&(F._nextMethod?(F._nextMethod.step=J,F._nextMethod.doCallback=N,F._nextMethod.doTransition=G):(F._nextMethod={step:J,doCallback:N,doTransition:G},F._nextMethodRaf=window.requestAnimationFrame(function(){var it=F._nextMethod.step;it.method&&(it.execute&&E.executeAPICommand(P,it.method,it.args),F._nextMethod=null,F._nextMethodRaf=null)})))}function L(P,F,R){if(F._context.staticPlot)return;var B=R.node(),N=M.select(F);function G(){return R.data()[0]}function X(){var J=G();F.emit("plotly_sliderstart",{slider:J});var it=R.select("."+e.gripRectClass);M.event.stopPropagation(),M.event.preventDefault(),it.call(i.fill,J.activebgcolor);var nt=I(J,M.mouse(B)[0]);y(F,R,J,nt,!0),J._dragging=!0;function q(){var $=G(),V=I($,M.mouse(B)[0]);y(F,R,$,V,!1)}N.on("mousemove",q),N.on("touchmove",q);function Z(){var $=G();$._dragging=!1,it.call(i.fill,$.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),F.emit("plotly_sliderend",{slider:$,step:$.steps[$.active]})}N.on("mouseup",Z),N.on("touchend",Z)}P.on("mousedown",X),P.on("touchstart",X)}function u(P,F){var R=P.selectAll("rect."+e.tickRectClass).data(F._visibleSteps),B=F._dims;R.enter().append("rect").classed(e.tickRectClass,!0),R.exit().remove(),R.attr({width:F.tickwidth+"px","shape-rendering":"crispEdges"}),R.each(function(N,G){var X=G%B.labelStride===0,J=M.select(this);J.attr({height:X?F.ticklen:F.minorticklen}).call(i.fill,F.tickcolor),C.setTranslate(J,w(F,G/(F._stepCount-1))-.5*F.tickwidth,(X?e.tickOffset:e.minorTickOffset)+B.currentValueTotalHeight)})}function m(P){var F=P._dims;F.labelSteps=[];for(var R=P._stepCount,B=0;B<R;B+=F.labelStride)F.labelSteps.push({fraction:B/(R-1),step:P._visibleSteps[B]})}function S(P,F,R){for(var B=P.select("rect."+e.gripRectClass),N=0,G=0;G<F._stepCount;G++)if(F._visibleSteps[G]._index===F.active){N=G;break}var X=w(F,N/(F._stepCount-1));if(!F._invokingCommand){var J=B;R&&F.transition.duration>0&&(J=J.transition().duration(F.transition.duration).ease(F.transition.easing)),J.attr("transform",v(X-e.gripWidth*.5,F._dims.currentValueTotalHeight))}}function w(P,F){var R=P._dims;return R.inputAreaStart+e.stepInset+(R.inputAreaLength-2*e.stepInset)*Math.min(1,Math.max(0,F))}function I(P,F){var R=P._dims;return Math.min(1,Math.max(0,(F-e.stepInset-R.inputAreaStart)/(R.inputAreaLength-2*e.stepInset-2*R.inputAreaStart)))}function O(P,F,R){var B=R._dims,N=T.ensureSingle(P,"rect",e.railTouchRectClass,function(G){G.call(L,F,P,R).style("pointer-events","all")});N.attr({width:B.inputAreaLength,height:Math.max(B.inputAreaWidth,e.tickOffset+R.ticklen+B.labelHeight)}).call(i.fill,R.bgcolor).attr("opacity",0),C.setTranslate(N,0,B.currentValueTotalHeight)}function D(P,F){var R=F._dims,B=R.inputAreaLength-e.railInset*2,N=T.ensureSingle(P,"rect",e.railRectClass);N.attr({width:B,height:e.railWidth,rx:e.railRadius,ry:e.railRadius,"shape-rendering":"crispEdges"}).call(i.stroke,F.bordercolor).call(i.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px"),C.setTranslate(N,e.railInset,(R.inputAreaWidth-e.railWidth)*.5+R.currentValueTotalHeight)}},97544:function(Q,U,t){var M=t(60876);Q.exports={moduleType:"component",name:M.name,layoutAttributes:t(89861),supplyLayoutDefaults:t(8132),draw:t(79664)}},81668:function(Q,U,t){var M=t(33428),E=t(38248),i=t(7316),C=t(24040),T=t(3400),v=T.strTranslate,d=t(43616),r=t(76308),e=t(72736),l=t(13448),n=t(84284).OPPOSITE_SIDE,s=/ [XY][0-9]* /;function o(p,b,h){var _=h.propContainer,a=h.propName,c=h.placeholder,f=h.traceIndex,x=h.avoid||{},k=h.attributes,y=h.transform,A=h.containerGroup,L=p._fullLayout,u=1,m=!1,S=_.title,w=(S&&S.text?S.text:"").trim(),I=S&&S.font?S.font:{},O=I.family,D=I.size,P=I.color,F;a==="title.text"?F="titleText":a.indexOf("axis")!==-1?F="axisTitleText":a.indexOf("colorbar"!==-1)&&(F="colorbarTitleText");var R=p._context.edits[F];w===""?u=0:w.replace(s," % ")===c.replace(s," % ")&&(u=.2,m=!0,R||(w="")),h._meta?w=T.templateString(w,h._meta):L._meta&&(w=T.templateString(w,L._meta));var B=w||R,N;A||(A=T.ensureSingle(L._infolayer,"g","g-"+b),N=L._hColorbarMoveTitle);var G=A.selectAll("text").data(B?[0]:[]);if(G.enter().append("text"),G.text(w).attr("class",b),G.exit().remove(),!B)return A;function X(q){T.syncOrAsync([J,it],q)}function J(q){var Z;return!y&&N&&(y={}),y?(Z="",y.rotate&&(Z+="rotate("+[y.rotate,k.x,k.y]+")"),(y.offset||N)&&(Z+=v(0,(y.offset||0)-(N||0)))):Z=null,q.attr("transform",Z),q.style({"font-family":O,"font-size":M.round(D,2)+"px",fill:r.rgb(P),opacity:u*r.opacity(P),"font-weight":i.fontWeight}).attr(k).call(e.convertToTspans,p),i.previousPromises(p)}function it(q){var Z=M.select(q.node().parentNode);if(x&&x.selection&&x.side&&w){Z.attr("transform",null);var $=n[x.side],V=x.side==="left"||x.side==="top"?-1:1,rt=E(x.pad)?x.pad:2,ot=d.bBox(Z.node()),H={t:0,b:0,l:0,r:0},Y=p._fullLayout._reservedMargin;for(var at in Y)for(var et in Y[at]){var ct=Y[at][et];H[et]=Math.max(H[et],ct)}var ft={left:H.l,top:H.t,right:L.width-H.r,bottom:L.height-H.b},yt=x.maxShift||V*(ft[x.side]-ot[x.side]),xt=0;if(yt<0)xt=yt;else{var Ct=x.offsetLeft||0,gt=x.offsetTop||0;ot.left-=Ct,ot.right-=Ct,ot.top-=gt,ot.bottom-=gt,x.selection.each(function(){var vt=d.bBox(this);T.bBoxIntersect(ot,vt,rt)&&(xt=Math.max(xt,V*(vt[x.side]-ot[$])+rt))}),xt=Math.min(yt,xt),_._titleScoot=Math.abs(xt)}if(xt>0||yt<0){var mt={left:[-xt,0],right:[xt,0],top:[0,-xt],bottom:[0,xt]}[x.side];Z.attr("transform",v(mt[0],mt[1]))}}}G.call(X);function nt(){u=0,m=!0,G.text(c).on("mouseover.opacity",function(){M.select(this).transition().duration(l.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){M.select(this).transition().duration(l.HIDE_PLACEHOLDER).style("opacity",0)})}return R&&(w?G.on(".opacity",null):nt(),G.call(e.makeEditable,{gd:p}).on("edit",function(q){f!==void 0?C.call("_guiRestyle",p,a,q,f):C.call("_guiRelayout",p,a,q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(q){this.text(q||" ").call(e.positionText,k.x,k.y)})),G.classed("js-placeholder",m),A}Q.exports={draw:o}},88444:function(Q,U,t){var M=t(25376),E=t(22548),i=t(92880).extendFlat,C=t(67824).overrideAll,T=t(66741),v=t(31780).templatedArray,d=v("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});Q.exports=C(v("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:d,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:i(T({editType:"arraydraw"}),{}),font:M({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:E.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(Q){Q.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},91384:function(Q,U,t){var M=t(3400),E=t(51272),i=t(88444),C=t(73712),T=C.name,v=i.buttons;Q.exports=function(e,l){var n={name:T,handleItemDefaults:d};E(e,l,n)};function d(e,l,n){function s(b,h){return M.coerce(e,l,i,b,h)}var o=E(e,l,{name:"buttons",handleItemDefaults:r}),p=s("visible",o.length>0);p&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),M.noneOrAll(e,l,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),M.coerceFont(s,"font",n.font),s("bgcolor",n.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function r(e,l){function n(o,p){return M.coerce(e,l,v,o,p)}var s=n("visible",e.method==="skip"||Array.isArray(e.args));s&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}},14420:function(Q,U,t){var M=t(33428),E=t(7316),i=t(76308),C=t(43616),T=t(3400),v=t(72736),d=t(31780).arrayEditor,r=t(84284).LINE_SPACING,e=t(73712),l=t(37400);Q.exports=function(w){var I=w._fullLayout,O=T.filterVisible(I[e.name]);function D(J){E.autoMargin(w,u(J))}var P=I._menulayer.selectAll("g."+e.containerClassName).data(O.length>0?[0]:[]);if(P.enter().append("g").classed(e.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){M.select(this).selectAll("g."+e.headerGroupClassName).each(D)}).remove(),O.length!==0){var F=P.selectAll("g."+e.headerGroupClassName).data(O,n);F.enter().append("g").classed(e.headerGroupClassName,!0);for(var R=T.ensureSingle(P,"g",e.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),B=0;B<O.length;B++){var N=O[B];L(w,N)}var G="updatemenus"+I._uid,X=new l(w,R,G);F.enter().size()&&(R.node().parentNode.appendChild(R.node()),R.call(S)),F.exit().each(function(J){R.call(S),D(J)}).remove(),F.each(function(J){var it=M.select(this),nt=J.type==="dropdown"?R:null;E.manageCommandObserver(w,J,J.buttons,function(q){p(w,J,J.buttons[q.index],it,nt,X,q.index,!0)}),J.type==="dropdown"?(b(w,it,R,X,J),o(R,J)&&h(w,it,R,X,J)):h(w,it,null,null,J)})}};function n(w){return w._index}function s(w){return+w.attr(e.menuIndexAttrName)==-1}function o(w,I){return+w.attr(e.menuIndexAttrName)===I._index}function p(w,I,O,D,P,F,R,B){I.active=R,d(w.layout,e.name,I).applyUpdate("active",R),I.type==="buttons"?h(w,D,null,null,I):I.type==="dropdown"&&(P.attr(e.menuIndexAttrName,"-1"),b(w,D,P,F,I),B||h(w,D,P,F,I))}function b(w,I,O,D,P){var F=T.ensureSingle(I,"g",e.headerClassName,function(it){it.style("pointer-events","all")}),R=P._dims,B=P.active,N=P.buttons[B]||e.blankHeaderOpts,G={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},X={width:R.headerWidth,height:R.headerHeight};F.call(c,P,N,w).call(m,P,G,X);var J=T.ensureSingle(I,"text",e.headerArrowClassName,function(it){it.attr("text-anchor","end").call(C.font,P.font).text(e.arrowSymbol[P.direction])});J.attr({x:R.headerWidth-e.arrowOffsetX+P.pad.l,y:R.headerHeight/2+e.textOffsetY+P.pad.t}),F.on("click",function(){O.call(S,String(o(O,P)?-1:P._index)),h(w,I,O,D,P)}),F.on("mouseover",function(){F.call(y)}),F.on("mouseout",function(){F.call(A,P)}),C.setTranslate(I,R.lx,R.ly)}function h(w,I,O,D,P){O||(O=I,O.attr("pointer-events","all"));var F=!s(O)||P.type==="buttons"?P.buttons:[],R=P.type==="dropdown"?e.dropdownButtonClassName:e.buttonClassName,B=O.selectAll("g."+R).data(T.filterVisible(F)),N=B.enter().append("g").classed(R,!0),G=B.exit();P.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),G.transition().attr("opacity","0").remove()):G.remove();var X=0,J=0,it=P._dims,nt=["up","down"].indexOf(P.direction)!==-1;P.type==="dropdown"&&(nt?J=it.headerHeight+e.gapButtonHeader:X=it.headerWidth+e.gapButtonHeader),P.type==="dropdown"&&P.direction==="up"&&(J=-e.gapButtonHeader+e.gapButton-it.openHeight),P.type==="dropdown"&&P.direction==="left"&&(X=-e.gapButtonHeader+e.gapButton-it.openWidth);var q={x:it.lx+X+P.pad.l,y:it.ly+J+P.pad.t,yPad:e.gapButton,xPad:e.gapButton,index:0},Z={l:q.x+P.borderwidth,t:q.y+P.borderwidth};B.each(function($,V){var rt=M.select(this);rt.call(c,P,$,w).call(m,P,q),rt.on("click",function(){M.event.defaultPrevented||($.execute&&($.args2&&P.active===V?(p(w,P,$,I,O,D,-1),E.executeAPICommand(w,$.method,$.args2)):(p(w,P,$,I,O,D,V),E.executeAPICommand(w,$.method,$.args))),w.emit("plotly_buttonclicked",{menu:P,button:$,active:P.active}))}),rt.on("mouseover",function(){rt.call(y)}),rt.on("mouseout",function(){rt.call(A,P),B.call(k,P)})}),B.call(k,P),nt?(Z.w=Math.max(it.openWidth,it.headerWidth),Z.h=q.y-Z.t):(Z.w=q.x-Z.l,Z.h=Math.max(it.openHeight,it.headerHeight)),Z.direction=P.direction,D&&(B.size()?_(w,I,O,D,P,Z):a(D))}function _(w,I,O,D,P,F){var R=P.direction,B=R==="up"||R==="down",N=P._dims,G=P.active,X,J,it;if(B)for(J=0,it=0;it<G;it++)J+=N.heights[it]+e.gapButton;else for(X=0,it=0;it<G;it++)X+=N.widths[it]+e.gapButton;D.enable(F,X,J),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function a(w){var I=!!w.hbar,O=!!w.vbar;I&&w.hbar.transition().attr("opacity","0").each("end",function(){I=!1,O||w.disable()}),O&&w.vbar.transition().attr("opacity","0").each("end",function(){O=!1,I||w.disable()})}function c(w,I,O,D){w.call(f,I).call(x,I,O,D)}function f(w,I){var O=T.ensureSingle(w,"rect",e.itemRectClassName,function(D){D.attr({rx:e.rx,ry:e.ry,"shape-rendering":"crispEdges"})});O.call(i.stroke,I.bordercolor).call(i.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px")}function x(w,I,O,D){var P=T.ensureSingle(w,"text",e.itemTextClassName,function(B){B.attr({"text-anchor":"start","data-notex":1})}),F=O.label,R=D._fullLayout._meta;R&&(F=T.templateString(F,R)),P.call(C.font,I.font).text(F).call(v.convertToTspans,D)}function k(w,I){var O=I.active;w.each(function(D,P){var F=M.select(this);P===O&&I.showactive&&F.select("rect."+e.itemRectClassName).call(i.fill,e.activeColor)})}function y(w){w.select("rect."+e.itemRectClassName).call(i.fill,e.hoverColor)}function A(w,I){w.select("rect."+e.itemRectClassName).call(i.fill,I.bgcolor)}function L(w,I){var O=I._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=C.tester.selectAll("g."+e.dropdownButtonClassName).data(T.filterVisible(I.buttons));D.enter().append("g").classed(e.dropdownButtonClassName,!0);var P=["up","down"].indexOf(I.direction)!==-1;D.each(function(X,J){var it=M.select(this);it.call(c,I,X,w);var nt=it.select("."+e.itemTextClassName),q=nt.node()&&C.bBox(nt.node()).width,Z=Math.max(q+e.textPadX,e.minWidth),$=I.font.size*r,V=v.lineCount(nt),rt=Math.max($*V,e.minHeight)+e.textOffsetY;rt=Math.ceil(rt),Z=Math.ceil(Z),O.widths[J]=Z,O.heights[J]=rt,O.height1=Math.max(O.height1,rt),O.width1=Math.max(O.width1,Z),P?(O.totalWidth=Math.max(O.totalWidth,Z),O.openWidth=O.totalWidth,O.totalHeight+=rt+e.gapButton,O.openHeight+=rt+e.gapButton):(O.totalWidth+=Z+e.gapButton,O.openWidth+=Z+e.gapButton,O.totalHeight=Math.max(O.totalHeight,rt),O.openHeight=O.totalHeight)}),P?O.totalHeight-=e.gapButton:O.totalWidth-=e.gapButton,O.headerWidth=O.width1+e.arrowPadX,O.headerHeight=O.height1,I.type==="dropdown"&&(P?(O.width1+=e.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=e.arrowPadX),D.remove();var F=O.totalWidth+I.pad.l+I.pad.r,R=O.totalHeight+I.pad.t+I.pad.b,B=w._fullLayout._size;O.lx=B.l+B.w*I.x,O.ly=B.t+B.h*(1-I.y);var N="left";T.isRightAnchor(I)&&(O.lx-=F,N="right"),T.isCenterAnchor(I)&&(O.lx-=F/2,N="center");var G="top";T.isBottomAnchor(I)&&(O.ly-=R,G="bottom"),T.isMiddleAnchor(I)&&(O.ly-=R/2,G="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),E.autoMargin(w,u(I),{x:I.x,y:I.y,l:F*({right:1,center:.5}[N]||0),r:F*({left:1,center:.5}[N]||0),b:R*({top:1,middle:.5}[G]||0),t:R*({bottom:1,middle:.5}[G]||0)})}function u(w){return e.autoMarginIdRoot+w._index}function m(w,I,O,D){D=D||{};var P=w.select("."+e.itemRectClassName),F=w.select("."+e.itemTextClassName),R=I.borderwidth,B=O.index,N=I._dims;C.setTranslate(w,R+O.x,R+O.y);var G=["up","down"].indexOf(I.direction)!==-1,X=D.height||(G?N.heights[B]:N.height1);P.attr({x:0,y:0,width:D.width||(G?N.width1:N.widths[B]),height:X});var J=I.font.size*r,it=v.lineCount(F),nt=(it-1)*J/2;v.positionText(F,e.textOffsetX,X/2-nt+e.textOffsetY),G?O.y+=N.heights[B]+O.yPad:O.x+=N.widths[B]+O.xPad,O.index++}function S(w,I){w.attr(e.menuIndexAttrName,I||"-1").selectAll("g."+e.dropdownButtonClassName).remove()}},76908:function(Q,U,t){var M=t(73712);Q.exports={moduleType:"component",name:M.name,layoutAttributes:t(88444),supplyLayoutDefaults:t(91384),draw:t(14420)}},37400:function(Q,U,t){Q.exports=T;var M=t(33428),E=t(76308),i=t(43616),C=t(3400);function T(v,d,r){this.gd=v,this.container=d,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}T.barWidth=2,T.barLength=20,T.barRadius=2,T.barPad=1,T.barColor="#808BA4",T.prototype.enable=function(v,d,r){var e=this.gd._fullLayout,l=e.width,n=e.height;this.position=v;var s=this.position.l,o=this.position.w,p=this.position.t,b=this.position.h,h=this.position.direction,_=h==="down",a=h==="left",c=h==="right",f=h==="up",x=o,k=b,y,A,L,u;!_&&!a&&!c&&!f&&(this.position.direction="down",_=!0);var m=_||f;m?(y=s,A=y+x,_?(L=p,u=Math.min(L+k,n),k=u-L):(u=p+k,L=Math.max(u-k,0),k=u-L)):(L=p,u=L+k,a?(A=s+x,y=Math.max(A-x,0),x=A-y):(y=s,A=Math.min(y+x,l),x=A-y)),this._box={l:y,t:L,w:x,h:k};var S=o>x,w=T.barLength+2*T.barPad,I=T.barWidth+2*T.barPad,O=s,D=p+b;D+I>n&&(D=n-I);var P=this.container.selectAll("rect.scrollbar-horizontal").data(S?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-horizontal",!0).call(E.fill,T.barColor),S?(this.hbar=P.attr({rx:T.barRadius,ry:T.barRadius,x:O,y:D,width:w,height:I}),this._hbarXMin=O+w/2,this._hbarTranslateMax=x-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=b>k,R=T.barWidth+2*T.barPad,B=T.barLength+2*T.barPad,N=s+o,G=p;N+R>l&&(N=l-R);var X=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(E.fill,T.barColor),F?(this.vbar=X.attr({rx:T.barRadius,ry:T.barRadius,x:N,y:G,width:R,height:B}),this._vbarYMin=G+B/2,this._vbarTranslateMax=k-B):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,it=y-.5,nt=F?A+R+.5:A+.5,q=L-.5,Z=S?u+I+.5:u+.5,$=e._topdefs.selectAll("#"+J).data(S||F?[0]:[]);if($.exit().remove(),$.enter().append("clipPath").attr("id",J).append("rect"),S||F?(this._clipRect=$.select("rect").attr({x:Math.floor(it),y:Math.floor(q),width:Math.ceil(nt)-Math.floor(it),height:Math.ceil(Z)-Math.floor(q)}),this.container.call(i.setClipUrl,J,this.gd),this.bg.attr({x:s,y:p,width:o,height:b})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),S||F){var V=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(V);var rt=M.behavior.drag().on("dragstart",function(){M.event.sourceEvent.preventDefault(),M.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));S&&this.hbar.on(".drag",null).call(rt),F&&this.vbar.on(".drag",null).call(rt)}this.setTranslate(d,r)},T.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(i.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},T.prototype._onBoxDrag=function(){var v=this.translateX,d=this.translateY;this.hbar&&(v-=M.event.dx),this.vbar&&(d-=M.event.dy),this.setTranslate(v,d)},T.prototype._onBoxWheel=function(){var v=this.translateX,d=this.translateY;this.hbar&&(v+=M.event.deltaY),this.vbar&&(d+=M.event.deltaY),this.setTranslate(v,d)},T.prototype._onBarDrag=function(){var v=this.translateX,d=this.translateY;if(this.hbar){var r=v+this._hbarXMin,e=r+this._hbarTranslateMax,l=C.constrain(M.event.x,r,e),n=(l-r)/(e-r),s=this.position.w-this._box.w;v=n*s}if(this.vbar){var o=d+this._vbarYMin,p=o+this._vbarTranslateMax,b=C.constrain(M.event.y,o,p),h=(b-o)/(p-o),_=this.position.h-this._box.h;d=h*_}this.setTranslate(v,d)},T.prototype.setTranslate=function(v,d){var r=this.position.w-this._box.w,e=this.position.h-this._box.h;if(v=C.constrain(v||0,0,r),d=C.constrain(d||0,0,e),this.translateX=v,this.translateY=d,this.container.call(i.setTranslate,this._box.l-this.position.l-v,this._box.t-this.position.t-d),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+v-.5),y:Math.floor(this.position.t+d-.5)}),this.hbar){var l=v/r;this.hbar.call(i.setTranslate,v+l*this._hbarTranslateMax,d)}if(this.vbar){var n=d/e;this.vbar.call(i.setTranslate,v,d+n*this._vbarTranslateMax)}}},84284:function(Q){Q.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(Q){Q.exports={axisRefDescription:function(U,t,M){return["If set to a",U,"axis id (e.g. *"+U+"* or","*"+U+"2*), the `"+U+"` position refers to a",U,"coordinate. If set to *paper*, the `"+U+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+M+"). If set to a",U,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+U+"2 domain* refers to the domain of the second",U," axis and a",U,"position of 0.5 refers to the","point between the",t,"and the",M,"of the domain of the","second",U,"axis."].join(" ")}}},48164:function(Q){Q.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},26880:function(Q){Q.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(Q){Q.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(Q){Q.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(Q){Q.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},13448:function(Q){Q.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(Q){Q.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},2264:function(Q,U){U.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],U.STYLE=U.CSS_DECLARATIONS.map(function(t){return t.join(": ")+"; "}).join("")},9616:function(Q,U){U.xmlns="http://www.w3.org/2000/xmlns/",U.svg="http://www.w3.org/2000/svg",U.xlink="http://www.w3.org/1999/xlink",U.svgAttrs={xmlns:U.svg,"xmlns:xlink":U.xlink}},64884:function(Q,U,t){U.version=t(25788).version,t(88324),t(79288);for(var M=t(24040),E=U.register=M.register,i=t(22448),C=Object.keys(i),T=0;T<C.length;T++){var v=C[T];v.charAt(0)!=="_"&&(U[v]=i[v]),E({moduleType:"apiMethod",name:v,fn:i[v]})}E(t(65875)),E([t(79180),t(56864),t(22676),t(41592),t(7402),t(76908),t(97544),t(49692),t(41152),t(12704),t(64968),t(8932),t(55080),t(2780),t(93024),t(45460)]),E([t(6580),t(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(E(window.PlotlyLocales),delete window.PlotlyLocales),U.Icons=t(9224);var d=t(93024),r=t(7316);U.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},U.Fx={hover:d.hover,unhover:d.unhover,loneHover:d.loneHover,loneUnhover:d.loneUnhover},U.Snapshot=t(78904),U.PlotSchema=t(73060)},9224:function(Q){Q.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(Q,U){U.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=.3333333333333333},U.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>.3333333333333333&&t.x<.6666666666666666},U.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=.6666666666666666},U.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=.6666666666666666},U.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>.3333333333333333&&t.y<.6666666666666666},U.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=.3333333333333333}},11864:function(Q,U,t){var M=t(20435),E=M.mod,i=M.modHalf,C=Math.PI,T=2*C;function v(_){return _/180*C}function d(_){return _/C*180}function r(_){return Math.abs(_[1]-_[0])>T-1e-14}function e(_,a){return i(a-_,T)}function l(_,a){return Math.abs(e(_,a))}function n(_,a){if(r(a))return!0;var c,f;a[0]<a[1]?(c=a[0],f=a[1]):(c=a[1],f=a[0]),c=E(c,T),f=E(f,T),c>f&&(f+=T);var x=E(_,T),k=x+T;return x>=c&&x<=f||k>=c&&k<=f}function s(_,a,c,f){if(!n(a,f))return!1;var x,k;return c[0]<c[1]?(x=c[0],k=c[1]):(x=c[1],k=c[0]),_>=x&&_<=k}function o(_,a,c,f,x,k,y){x=x||0,k=k||0;var A=r([c,f]),L,u,m,S,w;A?(L=0,u=C,m=T):c<f?(L=c,m=f):(L=f,m=c),_<a?(S=_,w=a):(S=a,w=_);function I(F,R){return[F*Math.cos(R)+x,k-F*Math.sin(R)]}var O=Math.abs(m-L)<=C?0:1;function D(F,R,B){return"A"+[F,F]+" "+[0,O,B]+" "+I(F,R)}var P;return A?S===null?P="M"+I(w,L)+D(w,u,0)+D(w,m,0)+"Z":P="M"+I(S,L)+D(S,u,0)+D(S,m,0)+"ZM"+I(w,L)+D(w,u,1)+D(w,m,1)+"Z":S===null?(P="M"+I(w,L)+D(w,m,0),y&&(P+="L0,0Z")):P="M"+I(S,L)+"L"+I(w,L)+D(w,m,0)+"L"+I(S,m)+D(S,L,1)+"Z",P}function p(_,a,c,f,x){return o(null,_,a,c,f,x,0)}function b(_,a,c,f,x){return o(null,_,a,c,f,x,1)}function h(_,a,c,f,x,k){return o(_,a,c,f,x,k,1)}Q.exports={deg2rad:v,rad2deg:d,angleDelta:e,angleDist:l,isFullCircle:r,isAngleInsideSector:n,isPtInsideSector:s,pathArc:p,pathSector:b,pathAnnulus:h}},38116:function(Q,U,t){var M=t(83160).decode,E=t(63620),i=Array.isArray,C=ArrayBuffer,T=DataView;function v(o){return C.isView(o)&&!(o instanceof T)}U.isTypedArray=v;function d(o){return i(o)||v(o)}U.isArrayOrTypedArray=d;function r(o){return!d(o[0])}U.isArray1D=r,U.ensureArray=function(o,p){return i(o)||(o=[]),o.length=p,o};var e={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};e.uint8c=e.u1c,e.uint8=e.u1,e.int8=e.i1,e.uint16=e.u2,e.int16=e.i2,e.uint32=e.u4,e.int32=e.i4,e.float32=e.f4,e.float64=e.f8;function l(o){return o.constructor===ArrayBuffer}U.isArrayBuffer=l,U.decodeTypedArraySpec=function(o){var p=[],b=n(o),h=b.dtype,_=e[h];if(!_)throw new Error('Error in dtype: "'+h+'"');var a=_.BYTES_PER_ELEMENT,c=b.bdata;l(c)||(c=M(c));var f=b.shape===void 0?[c.byteLength/a]:(""+b.shape).split(",");f.reverse();var x=f.length,k,y,A=+f[0],L=a*A,u=0;if(x===1)p=new _(c);else if(x===2)for(k=+f[1],y=0;y<k;y++)p[y]=new _(c,u,A),u+=L;else if(x===3){k=+f[1];for(var m=+f[2],S=0;S<m;S++)for(p[S]=[],y=0;y<k;y++)p[S][y]=new _(c,u,A),u+=L}else throw new Error("ndim: "+x+'is not supported with the shape:"'+b.shape+'"');return p.bdata=b.bdata,p.dtype=b.dtype,p.shape=f.reverse().join(","),o._inputArray=p,p},U.isTypedArraySpec=function(o){return E(o)&&o.hasOwnProperty("dtype")&&typeof o.dtype=="string"&&o.hasOwnProperty("bdata")&&(typeof o.bdata=="string"||l(o.bdata))&&(o.shape===void 0||o.hasOwnProperty("shape")&&(typeof o.shape=="string"||typeof o.shape=="number"))};function n(o){return{bdata:o.bdata,dtype:o.dtype,shape:o.shape}}U.concat=function(){var o=[],p=!0,b=0,h,_,a,c,f,x,k,y;for(a=0;a<arguments.length;a++)c=arguments[a],x=c.length,x&&(_?o.push(c):(_=c,f=x),i(c)?h=!1:(p=!1,b?h!==c.constructor&&(h=!1):h=c.constructor),b+=x);if(!b)return[];if(!o.length)return _;if(p)return _.concat.apply(_,o);if(h){for(k=new h(b),k.set(_),a=0;a<o.length;a++)c=o[a],k.set(c,f),f+=c.length;return k}for(k=new Array(b),y=0;y<_.length;y++)k[y]=_[y];for(a=0;a<o.length;a++){for(c=o[a],y=0;y<c.length;y++)k[f+y]=c[y];f+=y}return k},U.maxRowLength=function(o){return s(o,Math.max,0)},U.minRowLength=function(o){return s(o,Math.min,1/0)};function s(o,p,b){if(d(o))if(d(o[0])){for(var h=b,_=0;_<o.length;_++)h=p(h,o[_].length);return h}else return o.length;return 0}},54037:function(Q,U,t){var M=t(38248),E=t(39032).BADNUM,i=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;Q.exports=function(C){return typeof C=="string"&&(C=C.replace(i,"")),M(C)?Number(C):E}},73696:function(Q){Q.exports=function(U){var t=U._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},75352:function(Q){Q.exports=function(U){U._responsiveChartHandler&&(window.removeEventListener("resize",U._responsiveChartHandler),delete U._responsiveChartHandler)}},63064:function(Q,U,t){var M=t(38248),E=t(49760),i=t(45464),C=t(88304),T=t(76308),v=t(13448).DESELECTDIM,d=t(22296),r=t(53756).counter,e=t(20435).modHalf,l=t(38116).isArrayOrTypedArray,n=t(38116).isTypedArraySpec,s=t(38116).decodeTypedArraySpec;U.valObjectMeta={data_array:{coerceFunction:function(p,b,h){b.set(l(p)?p:n(p)?s(p):h)}},enumerated:{coerceFunction:function(p,b,h,_){_.coerceNumber&&(p=+p),_.values.indexOf(p)===-1?b.set(h):b.set(p)},validateFunction:function(p,b){b.coerceNumber&&(p=+p);for(var h=b.values,_=0;_<h.length;_++){var a=String(h[_]);if(a.charAt(0)==="/"&&a.charAt(a.length-1)==="/"){var c=new RegExp(a.substr(1,a.length-2));if(c.test(p))return!0}else if(p===h[_])return!0}return!1}},boolean:{coerceFunction:function(p,b,h){p===!0||p===!1?b.set(p):b.set(h)}},number:{coerceFunction:function(p,b,h,_){!M(p)||_.min!==void 0&&p<_.min||_.max!==void 0&&p>_.max?b.set(h):b.set(+p)}},integer:{coerceFunction:function(p,b,h,_){p%1||!M(p)||_.min!==void 0&&p<_.min||_.max!==void 0&&p>_.max?b.set(h):b.set(+p)}},string:{coerceFunction:function(p,b,h,_){if(typeof p!="string"){var a=typeof p=="number";_.strict===!0||!a?b.set(h):b.set(String(p))}else _.noBlank&&!p?b.set(h):b.set(p)}},color:{coerceFunction:function(p,b,h){E(p).isValid()?b.set(p):b.set(h)}},colorlist:{coerceFunction:function(p,b,h){function _(a){return E(a).isValid()}!Array.isArray(p)||!p.length?b.set(h):p.every(_)?b.set(p):b.set(h)}},colorscale:{coerceFunction:function(p,b,h){b.set(C.get(p,h))}},angle:{coerceFunction:function(p,b,h){p==="auto"?b.set("auto"):M(p)?b.set(e(+p,360)):b.set(h)}},subplotid:{coerceFunction:function(p,b,h,_){var a=_.regex||r(h);if(typeof p=="string"&&a.test(p)){b.set(p);return}b.set(h)},validateFunction:function(p,b){var h=b.dflt;return p===h?!0:typeof p!="string"?!1:!!r(h).test(p)}},flaglist:{coerceFunction:function(p,b,h,_){if((_.extras||[]).indexOf(p)!==-1){b.set(p);return}if(typeof p!="string"){b.set(h);return}for(var a=p.split("+"),c=0;c<a.length;){var f=a[c];_.flags.indexOf(f)===-1||a.indexOf(f)<c?a.splice(c,1):c++}a.length?b.set(a.join("+")):b.set(h)}},any:{coerceFunction:function(p,b,h){p===void 0?b.set(h):b.set(n(p)?s(p):p)}},info_array:{coerceFunction:function(p,b,h,_){function a(D,P,F){var R,B={set:function(N){R=N}};return F===void 0&&(F=P.dflt),U.valObjectMeta[P.valType].coerceFunction(D,B,F,P),R}if(n(p)&&(p=s(p)),!l(p)){b.set(h);return}var c=_.dimensions===2||_.dimensions==="1-2"&&Array.isArray(p)&&l(p[0]),f=_.items,x=[],k=Array.isArray(f),y=k&&c&&l(f[0]),A=c&&k&&!y,L=k&&!A?f.length:p.length,u,m,S,w,I,O;if(h=Array.isArray(h)?h:[],c)for(u=0;u<L;u++)for(x[u]=[],S=l(p[u])?p[u]:[],A?I=f.length:k?I=f[u].length:I=S.length,m=0;m<I;m++)A?w=f[m]:k?w=f[u][m]:w=f,O=a(S[m],w,(h[u]||[])[m]),O!==void 0&&(x[u][m]=O);else for(u=0;u<L;u++)O=a(p[u],k?f[u]:f,h[u]),O!==void 0&&(x[u]=O);b.set(x)},validateFunction:function(p,b){if(!l(p))return!1;var h=b.items,_=Array.isArray(h),a=b.dimensions===2;if(!b.freeLength&&p.length!==h.length)return!1;for(var c=0;c<p.length;c++)if(a){if(!l(p[c])||!b.freeLength&&p[c].length!==h[c].length)return!1;for(var f=0;f<p[c].length;f++)if(!o(p[c][f],_?h[c][f]:h))return!1}else if(!o(p[c],_?h[c]:h))return!1;return!0}}},U.coerce=function(p,b,h,_,a){var c=d(h,_).get(),f=d(p,_),x=d(b,_),k=f.get(),y=b._template;if(k===void 0&&y&&(k=d(y,_).get(),y=0),a===void 0&&(a=c.dflt),c.arrayOk){if(l(k))return x.set(k),k;if(n(k))return k=s(k),x.set(k),k}var A=U.valObjectMeta[c.valType].coerceFunction;A(k,x,a,c);var L=x.get();return y&&L===a&&!o(k,c)&&(k=d(y,_).get(),A(k,x,a,c),L=x.get()),L},U.coerce2=function(p,b,h,_,a){var c=d(p,_),f=U.coerce(p,b,h,_,a),x=c.get();return x!=null?f:!1},U.coerceFont=function(p,b,h){var _={};return h=h||{},_.family=p(b+".family",h.family),_.size=p(b+".size",h.size),_.color=p(b+".color",h.color),_},U.coercePattern=function(p,b,h,_){var a=p(b+".shape");if(a){p(b+".solidity"),p(b+".size");var c=p(b+".fillmode"),f=c==="overlay";if(!_){var x=p(b+".bgcolor",f?h:void 0);p(b+".fgcolor",f?T.contrast(x):h)}p(b+".fgopacity",f?.5:1)}},U.coerceHoverinfo=function(p,b,h){var _=b._module.attributes,a=_.hoverinfo?_:i,c=a.hoverinfo,f;if(h._dataLength===1){var x=c.dflt==="all"?c.flags.slice():c.dflt.split("+");x.splice(x.indexOf("name"),1),f=x.join("+")}return U.coerce(p,b,a,"hoverinfo",f)},U.coerceSelectionMarkerOpacity=function(p,b){if(p.marker){var h=p.marker.opacity;if(h!==void 0){var _,a;!l(h)&&!p.selected&&!p.unselected&&(_=h,a=v*h),b("selected.marker.opacity",_),b("unselected.marker.opacity",a)}}};function o(p,b){var h=U.valObjectMeta[b.valType];if(b.arrayOk&&l(p))return!0;if(h.validateFunction)return h.validateFunction(p,b);var _={},a=_,c={set:function(f){a=f}};return h.coerceFunction(p,c,_,b),a!==_}U.validate=o},67555:function(Q,U,t){var M=t(94336).Yn,E=t(38248),i=t(24248),C=t(20435).mod,T=t(39032),v=T.BADNUM,d=T.ONEDAY,r=T.ONEHOUR,e=T.ONEMIN,l=T.ONESEC,n=T.EPOCHJD,s=t(24040),o=t(94336).E9,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,b=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=new Date().getFullYear()-70;function _(P){return P&&s.componentsRegistry.calendars&&typeof P=="string"&&P!=="gregorian"}U.dateTick0=function(P,F){var R=a(P,!!F);if(F<2)return R;var B=U.dateTime2ms(R,P);return B+=d*(F-1),U.ms2DateTime(B,0,P)};function a(P,F){return _(P)?F?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[P]:s.getComponentMethod("calendars","CANONICAL_TICK")[P]:F?"2000-01-02":"2000-01-01"}U.dfltRange=function(P){return _(P)?s.getComponentMethod("calendars","DFLTRANGE")[P]:["2000-01-01","2001-01-01"]},U.isJSDate=function(P){return typeof P=="object"&&P!==null&&typeof P.getTime=="function"};var c,f;U.dateTime2ms=function(P,F){if(U.isJSDate(P)){var R=P.getTimezoneOffset()*e,B=(P.getUTCMinutes()-P.getMinutes())*e+(P.getUTCSeconds()-P.getSeconds())*l+(P.getUTCMilliseconds()-P.getMilliseconds());if(B){var N=3*e;R=R-N/2+C(B-R+N/2,N)}return P=Number(P)-R,P>=c&&P<=f?P:v}if(typeof P!="string"&&typeof P!="number")return v;P=String(P);var G=_(F),X=P.charAt(0);G&&(X==="G"||X==="g")&&(P=P.substr(1),F="");var J=G&&F.substr(0,7)==="chinese",it=P.match(J?b:p);if(!it)return v;var nt=it[1],q=it[3]||"1",Z=Number(it[5]||1),$=Number(it[7]||0),V=Number(it[9]||0),rt=Number(it[11]||0);if(G){if(nt.length===2)return v;nt=Number(nt);var ot;try{var H=s.getComponentMethod("calendars","getCal")(F);if(J){var Y=q.charAt(q.length-1)==="i";q=parseInt(q,10),ot=H.newDate(nt,H.toMonthIndex(nt,q,Y),Z)}else ot=H.newDate(nt,Number(q),Z)}catch{return v}return ot?(ot.toJD()-n)*d+$*r+V*e+rt*l:v}nt.length===2?nt=(Number(nt)+2e3-h)%100+h:nt=Number(nt),q-=1;var at=new Date(Date.UTC(2e3,q,Z,$,V));return at.setUTCFullYear(nt),at.getUTCMonth()!==q||at.getUTCDate()!==Z?v:at.getTime()+rt*l},c=U.MIN_MS=U.dateTime2ms("-9999"),f=U.MAX_MS=U.dateTime2ms("9999-12-31 23:59:59.9999"),U.isDateTime=function(P,F){return U.dateTime2ms(P,F)!==v};function x(P,F){return String(P+Math.pow(10,F)).substr(1)}var k=90*d,y=3*r,A=5*e;U.ms2DateTime=function(P,F,R){if(typeof P!="number"||!(P>=c&&P<=f))return v;F||(F=0);var B=Math.floor(C(P+.05,1)*10),N=Math.round(P-B/10),G,X,J,it,nt,q;if(_(R)){var Z=Math.floor(N/d)+n,$=Math.floor(C(P,d));try{G=s.getComponentMethod("calendars","getCal")(R).fromJD(Z).formatDate("yyyy-mm-dd")}catch{G=o("G%Y-%m-%d")(new Date(N))}if(G.charAt(0)==="-")for(;G.length<11;)G="-0"+G.substr(1);else for(;G.length<10;)G="0"+G;X=F<k?Math.floor($/r):0,J=F<k?Math.floor($%r/e):0,it=F<y?Math.floor($%e/l):0,nt=F<A?$%l*10+B:0}else q=new Date(N),G=o("%Y-%m-%d")(q),X=F<k?q.getUTCHours():0,J=F<k?q.getUTCMinutes():0,it=F<y?q.getUTCSeconds():0,nt=F<A?q.getUTCMilliseconds()*10+B:0;return L(G,X,J,it,nt)},U.ms2DateTimeLocal=function(P){if(!(P>=c+d&&P<=f-d))return v;var F=Math.floor(C(P+.05,1)*10),R=new Date(Math.round(P-F/10)),B=M("%Y-%m-%d")(R),N=R.getHours(),G=R.getMinutes(),X=R.getSeconds(),J=R.getUTCMilliseconds()*10+F;return L(B,N,G,X,J)};function L(P,F,R,B,N){if((F||R||B||N)&&(P+=" "+x(F,2)+":"+x(R,2),(B||N)&&(P+=":"+x(B,2),N))){for(var G=4;N%10===0;)G-=1,N/=10;P+="."+x(N,G)}return P}U.cleanDate=function(P,F,R){if(P===v)return F;if(U.isJSDate(P)||typeof P=="number"&&isFinite(P)){if(_(R))return i.error("JS Dates and milliseconds are incompatible with world calendars",P),F;if(P=U.ms2DateTimeLocal(+P),!P&&F!==void 0)return F}else if(!U.isDateTime(P,R))return i.error("unrecognized date",P),F;return P};var u=/%\d?f/g,m=/%h/g,S={1:"1",2:"1",3:"2",4:"2"};function w(P,F,R,B){P=P.replace(u,function(G){var X=Math.min(+G.charAt(1)||6,6),J=(F/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0";return J});var N=new Date(Math.floor(F+.05));if(P=P.replace(m,function(){return S[R("%q")(N)]}),_(B))try{P=s.getComponentMethod("calendars","worldCalFmt")(P,F,B)}catch{return"Invalid"}return R(P)(N)}var I=[59,59.9,59.99,59.999,59.9999];function O(P,F){var R=C(P+.05,d),B=x(Math.floor(R/r),2)+":"+x(C(Math.floor(R/e),60),2);if(F!=="M"){E(F)||(F=0);var N=Math.min(C(P/l,60),I[F]),G=(100+N).toFixed(F).substr(1);F>0&&(G=G.replace(/0+$/,"").replace(/[\.]$/,"")),B+=":"+G}return B}U.formatDate=function(P,F,R,B,N,G){if(N=_(N)&&N,!F)if(R==="y")F=G.year;else if(R==="m")F=G.month;else if(R==="d")F=G.dayMonth+`
`+G.year;else return O(P,R)+`
`+w(G.dayMonthYear,P,B,N);return w(F,P,B,N)};var D=3*d;U.incrementMonth=function(P,F,R){R=_(R)&&R;var B=C(P,d);if(P=Math.round(P-B),R)try{var N=Math.round(P/d)+n,G=s.getComponentMethod("calendars","getCal")(R),X=G.fromJD(N);return F%12?G.add(X,F,"m"):G.add(X,F/12,"y"),(X.toJD()-n)*d+B}catch{i.error("invalid ms "+P+" in calendar "+R)}var J=new Date(P+D);return J.setUTCMonth(J.getUTCMonth()+F)+B-D},U.findExactDates=function(P,F){for(var R=0,B=0,N=0,G=0,X,J,it=_(F)&&s.getComponentMethod("calendars","getCal")(F),nt=0;nt<P.length;nt++){if(J=P[nt],!E(J)){G++;continue}if(!(J%d))if(it)try{X=it.fromJD(J/d+n),X.day()===1?X.month()===1?R++:B++:N++}catch{}else X=new Date(J),X.getUTCDate()===1?X.getUTCMonth()===0?R++:B++:N++}B+=R,N+=B;var q=P.length-G;return{exactYears:R/q,exactMonths:B/q,exactDays:N/q}}},52200:function(Q,U,t){var M=t(33428),E=t(24248),i=t(52248),C=t(36524);function T(h){var _;if(typeof h=="string"){if(_=document.getElementById(h),_===null)throw new Error("No DOM element with id '"+h+"' exists on the page.");return _}else if(h==null)throw new Error("DOM element provided is null or undefined");return h}function v(h){var _=M.select(h);return _.node()instanceof HTMLElement&&_.size()&&_.classed("js-plotly-plot")}function d(h){var _=h&&h.parentNode;_&&_.removeChild(h)}function r(h,_){e("global",h,_)}function e(h,_,a){var c="plotly.js-style-"+h,f=document.getElementById(c);f||(f=document.createElement("style"),f.setAttribute("id",c),f.appendChild(document.createTextNode("")),document.head.appendChild(f));var x=f.sheet;x.insertRule?x.insertRule(_+"{"+a+"}",0):x.addRule?x.addRule(_,a,0):E.warn("addStyleRule failed")}function l(h){var _="plotly.js-style-"+h,a=document.getElementById(_);a&&d(a)}function n(h){var _=o(h),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return _.forEach(function(c){var f=s(c);if(f){var x=i.convertCssMatrix(f);a=C.multiply(a,a,x)}}),a}function s(h){var _=window.getComputedStyle(h,null),a=_.getPropertyValue("-webkit-transform")||_.getPropertyValue("-moz-transform")||_.getPropertyValue("-ms-transform")||_.getPropertyValue("-o-transform")||_.getPropertyValue("transform");return a==="none"?null:a.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(c){return+c})}function o(h){for(var _=[];p(h);)_.push(h),h=h.parentNode;return _}function p(h){return h&&(h instanceof Element||h instanceof HTMLElement)}function b(h,_){return h&&_&&h.top===_.top&&h.left===_.left&&h.right===_.right&&h.bottom===_.bottom}Q.exports={getGraphDiv:T,isPlotDiv:v,removeElement:d,addStyleRule:r,addRelatedStyleRule:e,deleteRelatedStyleRule:l,getFullTransformMatrix:n,getElementTransformMatrix:s,getElementAndAncestors:o,equalDomRects:b}},95924:function(Q,U,t){var M=t(61252).EventEmitter,E={init:function(i){if(i._ev instanceof M)return i;var C=new M,T=new M;return i._ev=C,i._internalEv=T,i.on=C.on.bind(C),i.once=C.once.bind(C),i.removeListener=C.removeListener.bind(C),i.removeAllListeners=C.removeAllListeners.bind(C),i._internalOn=T.on.bind(T),i._internalOnce=T.once.bind(T),i._removeInternalListener=T.removeListener.bind(T),i._removeAllInternalListeners=T.removeAllListeners.bind(T),i.emit=function(v,d){typeof jQuery<"u"&&jQuery(i).trigger(v,d),C.emit(v,d),T.emit(v,d)},i},triggerHandler:function(i,C,T){var v,d;typeof jQuery<"u"&&(v=jQuery(i).triggerHandler(C,T));var r=i._ev;if(!r)return v;var e=r._events[C];if(!e)return v;function l(s){if(s.listener){if(r.removeListener(C,s.listener),!s.fired)return s.fired=!0,s.listener.apply(r,[T])}else return s.apply(r,[T])}e=Array.isArray(e)?e:[e];var n;for(n=0;n<e.length-1;n++)l(e[n]);return d=l(e[n]),v!==void 0?v:d},purge:function(i){return delete i._ev,delete i.on,delete i.once,delete i.removeListener,delete i.removeAllListeners,delete i.emit,delete i._ev,delete i._internalEv,delete i._internalOn,delete i._internalOnce,delete i._removeInternalListener,delete i._removeAllInternalListeners,i}};Q.exports=E},92880:function(Q,U,t){var M=t(63620),E=Array.isArray;function i(T,v){var d,r;for(d=0;d<T.length;d++){if(r=T[d],r!==null&&typeof r=="object")return!1;r!==void 0&&(v[d]=r)}return!0}U.extendFlat=function(){return C(arguments,!1,!1,!1)},U.extendDeep=function(){return C(arguments,!0,!1,!1)},U.extendDeepAll=function(){return C(arguments,!0,!0,!1)},U.extendDeepNoArrays=function(){return C(arguments,!0,!1,!0)};function C(T,v,d,r){var e=T[0],l=T.length,n,s,o,p,b,h,_;if(l===2&&E(e)&&E(T[1])&&e.length===0){if(_=i(T[1],e),_)return e;e.splice(0,e.length)}for(var a=1;a<l;a++){n=T[a];for(s in n)o=e[s],p=n[s],r&&E(p)?e[s]=p:v&&p&&(M(p)||(b=E(p)))?(b?(b=!1,h=o&&E(o)?o:[]):h=o&&M(o)?o:{},e[s]=C([h,p],v,d,r)):(typeof p<"u"||d)&&(e[s]=p)}return e}},68944:function(Q){Q.exports=function(U){for(var t={},M=[],E=0,i=0;i<U.length;i++){var C=U[i];t[C]!==1&&(t[C]=1,M[E++]=C)}return M}},43880:function(Q){Q.exports=function(E){for(var i=M(E)?t:U,C=[],T=0;T<E.length;T++){var v=E[T];i(v)&&C.push(v)}return C};function U(E){return E.visible===!0}function t(E){var i=E[0].trace;return i.visible===!0&&i._length!==0}function M(E){return Array.isArray(E)&&Array.isArray(E[0])&&E[0][0]&&E[0][0].trace}},27144:function(Q,U,t){var M=t(33428),E=t(36116),i=t(40440),C=t(77844),T=t(42428),v=t(35536),d=t(24248),r=t(63620),e=t(22296),l=t(92065),n=Object.keys(E),s={"ISO-3":v,"USA-states":v,"country names":o};function o(x){for(var k=0;k<n.length;k++){var y=n[k],A=new RegExp(E[y]);if(A.test(x.trim().toLowerCase()))return y}return d.log("Unrecognized country name: "+x+"."),!1}function p(x,k,y){if(!k||typeof k!="string")return!1;var A=s[x](k),L,u,m;if(A){if(x==="USA-states")for(L=[],m=0;m<y.length;m++)u=y[m],u.properties&&u.properties.gu&&u.properties.gu==="USA"&&L.push(u);else L=y;for(m=0;m<L.length;m++)if(u=L[m],u.id===A)return u;d.log(["Location with id",A,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function b(x){var k=x.geometry,y=k.coordinates,A=x.id,L=[],u,m,S,w;function I(O){for(var D=0;D<O.length-1;D++)if(O[D][0]>0&&O[D+1][0]<0)return D;return null}switch(A==="RUS"||A==="FJI"?u=function(O){var D;if(I(O)===null)D=O;else for(D=new Array(O.length),w=0;w<O.length;w++)D[w]=[O[w][0]<0?O[w][0]+360:O[w][0],O[w][1]];L.push(l.tester(D))}:A==="ATA"?u=function(O){var D=I(O);if(D===null)return L.push(l.tester(O));var P=new Array(O.length+1),F=0;for(w=0;w<O.length;w++)w>D?P[F++]=[O[w][0]+360,O[w][1]]:w===D?(P[F++]=O[w],P[F++]=[O[w][0],-90]):P[F++]=O[w];var R=l.tester(P);R.pts.pop(),L.push(R)}:u=function(O){L.push(l.tester(O))},k.type){case"MultiPolygon":for(m=0;m<y.length;m++)for(S=0;S<y[m].length;S++)u(y[m][S]);break;case"Polygon":for(m=0;m<y.length;m++)u(y[m]);break}return L}function h(x){var k=x.geojson,y=window.PlotlyGeoAssets||{},A=typeof k=="string"?y[k]:k;return r(A)?A:(d.error("Oops ... something went wrong when fetching "+k),!1)}function _(x){var k=x[0].trace,y=h(k);if(!y)return!1;var A={},L=[],u;for(u=0;u<k._length;u++){var m=x[u];(m.loc||m.loc===0)&&(A[m.loc]=m)}function S(O){var D=e(O,k.featureidkey||"id").get(),P=A[D];if(P){var F=O.geometry;if(F.type==="Polygon"||F.type==="MultiPolygon"){var R={type:"Feature",id:D,geometry:F,properties:{}};R.properties.ct=a(R),P.fIn=O,P.fOut=R,L.push(R)}else d.log(["Location",P.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete A[D]}switch(y.type){case"FeatureCollection":var w=y.features;for(u=0;u<w.length;u++)S(w[u]);break;case"Feature":S(y);break;default:return d.warn(["Invalid GeoJSON type",(y.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var I in A)d.log(["Location *"+I+"*","does not have a matching feature with id-key","*"+k.featureidkey+"*."].join(" "));return L}function a(x){var k=x.geometry,y;if(k.type==="MultiPolygon")for(var A=k.coordinates,L=0,u=0;u<A.length;u++){var m={type:"Polygon",coordinates:A[u]},S=i.default(m);S>L&&(L=S,y=m)}else y=k;return C.default(y).geometry.coordinates}function c(x){var k=window.PlotlyGeoAssets||{},y=[];function A(w){return new Promise(function(I,O){M.json(w,function(D,P){if(D){delete k[w];var F=D.status===404?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w;return O(new Error(F))}return k[w]=P,I(P)})})}function L(w){return new Promise(function(I,O){var D=0,P=setInterval(function(){if(k[w]&&k[w]!=="pending")return clearInterval(P),I(k[w]);if(D>100)return clearInterval(P),O("Unexpected error while fetching from "+w);D++},50)})}for(var u=0;u<x.length;u++){var m=x[u][0].trace,S=m.geojson;typeof S=="string"&&(k[S]?k[S]==="pending"&&y.push(L(S)):(k[S]="pending",y.push(A(S))))}return y}function f(x){return T.default(x)}Q.exports={locationToFeature:p,feature2polygons:b,getTraceGeojson:h,extractTraceFeature:_,fetchTraceGeoData:c,computeBbox:f}},44808:function(Q,U,t){var M=t(39032).BADNUM;U.calcTraceToLineCoords=function(E){for(var i=E[0].trace,C=i.connectgaps,T=[],v=[],d=0;d<E.length;d++){var r=E[d],e=r.lonlat;e[0]!==M?v.push(e):!C&&v.length>0&&(T.push(v),v=[])}return v.length>0&&T.push(v),T},U.makeLine=function(E){return E.length===1?{type:"LineString",coordinates:E[0]}:{type:"MultiLineString",coordinates:E}},U.makePolygon=function(E){if(E.length===1)return{type:"Polygon",coordinates:E};for(var i=new Array(E.length),C=0;C<E.length;C++)i[C]=[E[C]];return{type:"MultiPolygon",coordinates:i}},U.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(Q,U,t){var M=t(20435).mod;U.segmentsIntersect=E;function E(d,r,e,l,n,s,o,p){var b=e-d,h=n-d,_=o-n,a=l-r,c=s-r,f=p-s,x=b*f-_*a;if(x===0)return null;var k=(h*f-_*c)/x,y=(h*a-b*c)/x;return y<0||y>1||k<0||k>1?null:{x:d+b*k,y:r+a*k}}U.segmentDistance=function(d,r,e,l,n,s,o,p){if(E(d,r,e,l,n,s,o,p))return 0;var b=e-d,h=l-r,_=o-n,a=p-s,c=b*b+h*h,f=_*_+a*a,x=Math.min(i(b,h,c,n-d,s-r),i(b,h,c,o-d,p-r),i(_,a,f,d-n,r-s),i(_,a,f,e-n,l-s));return Math.sqrt(x)};function i(d,r,e,l,n){var s=l*d+n*r;if(s<0)return l*l+n*n;if(s>e){var o=l-d,p=n-r;return o*o+p*p}else{var b=l*r-n*d;return b*b/e}}var C,T,v;U.getTextLocation=function(d,r,e,l){if((d!==T||l!==v)&&(C={},T=d,v=l),C[e])return C[e];var n=d.getPointAtLength(M(e-l/2,r)),s=d.getPointAtLength(M(e+l/2,r)),o=Math.atan((s.y-n.y)/(s.x-n.x)),p=d.getPointAtLength(M(e,r)),b=(p.x*4+n.x+s.x)/6,h=(p.y*4+n.y+s.y)/6,_={x:b,y:h,theta:o};return C[e]=_,_},U.clearLocationCache=function(){T=null},U.getVisibleSegment=function(d,r,e){var l=r.left,n=r.right,s=r.top,o=r.bottom,p=0,b=d.getTotalLength(),h=b,_,a;function c(x){var k=d.getPointAtLength(x);x===0?_=k:x===b&&(a=k);var y=k.x<l?l-k.x:k.x>n?k.x-n:0,A=k.y<s?s-k.y:k.y>o?k.y-o:0;return Math.sqrt(y*y+A*A)}for(var f=c(p);f;){if(p+=f+e,p>h)return;f=c(p)}for(f=c(h);f;){if(h-=f+e,p>h)return;f=c(h)}return{min:p,max:h,len:h-p,total:b,isClosed:p===0&&h===b&&Math.abs(_.x-a.x)<.1&&Math.abs(_.y-a.y)<.1}},U.findPointOnPath=function(d,r,e,l){l=l||{};for(var n=l.pathLength||d.getTotalLength(),s=l.tolerance||.001,o=l.iterationLimit||30,p=d.getPointAtLength(0)[e]>d.getPointAtLength(n)[e]?-1:1,b=0,h=0,_=n,a,c,f;b<o;){if(a=(h+_)/2,c=d.getPointAtLength(a),f=c[e]-r,Math.abs(f)<s)return c;p*f>0?_=a:h=a,b++}return c}},33040:function(Q,U,t){var M=t(38248),E=t(49760),i=t(72160),C=t(8932),T=t(22548).defaultLine,v=t(38116).isArrayOrTypedArray,d=i(T),r=1;function e(p,b){var h=p;return h[3]*=b,h}function l(p){if(M(p))return d;var b=i(p);return b.length?b:d}function n(p){return M(p)?p:r}function s(p,b,h){var _=p.color;_&&_._inputArray&&(_=_._inputArray);var a=v(_),c=v(b),f=C.extractOpts(p),x=[],k,y,A,L,u;if(f.colorscale!==void 0?k=C.makeColorScaleFuncFromTrace(p):k=l,a?y=function(S,w){return S[w]===void 0?d:i(k(S[w]))}:y=l,c?A=function(S,w){return S[w]===void 0?r:n(S[w])}:A=n,a||c)for(var m=0;m<h;m++)L=y(_,m),u=A(b,m),x[m]=e(L,u);else x=e(i(_),b);return x}function o(p){var b=C.extractOpts(p),h=b.colorscale;return b.reversescale&&(h=C.flipScale(b.colorscale)),h.map(function(_){var a=_[0],c=E(_[1]),f=c.toRgb();return{index:a,rgb:[f.r,f.g,f.b,f.a]}})}Q.exports={formatColor:s,parseColorScale:o}},71688:function(Q,U,t){var M=t(35536);function E(i){return[i]}Q.exports={keyFun:function(i){return i.key},repeat:E,descend:M,wrap:E,unwrap:function(i){return i[0]}}},35536:function(Q){Q.exports=function(U){return U}},1396:function(Q){Q.exports=function(U,t){if(!t)return U;var M=1/Math.abs(t),E=M>1?(M*U+M*t)/M:U+t,i=String(E).length;if(i>16){var C=String(t).length,T=String(U).length;if(i>=T+C){var v=parseFloat(E).toPrecision(12);v.indexOf("e+")===-1&&(E=+v)}}return E}},3400:function(Q,U,t){var M=t(33428),E=t(94336).E9,i=t(57624).E9,C=t(38248),T=t(39032),v=T.FP_SAFE,d=-v,r=T.BADNUM,e=Q.exports={};e.adjustFormat=function(rt){return!rt||/^\d[.]\df/.test(rt)||/[.]\d%/.test(rt)?rt:rt==="0.f"?"~f":/^\d%/.test(rt)?"~%":/^\ds/.test(rt)?"~s":!/^[~,.0$]/.test(rt)&&/[&fps]/.test(rt)?"~"+rt:rt};var l={};e.warnBadFormat=function(rt){var ot=String(rt);l[ot]||(l[ot]=1,e.warn('encountered bad format: "'+ot+'"'))},e.noFormat=function(rt){return String(rt)},e.numberFormat=function(rt){var ot;try{ot=i(e.adjustFormat(rt))}catch{return e.warnBadFormat(rt),e.noFormat}return ot},e.nestedProperty=t(22296),e.keyedContainer=t(37804),e.relativeAttr=t(23193),e.isPlainObject=t(63620),e.toLogRange=t(36896),e.relinkPrivateKeys=t(51528);var n=t(38116);e.isArrayBuffer=n.isArrayBuffer,e.isTypedArray=n.isTypedArray,e.isArrayOrTypedArray=n.isArrayOrTypedArray,e.isArray1D=n.isArray1D,e.ensureArray=n.ensureArray,e.concat=n.concat,e.maxRowLength=n.maxRowLength,e.minRowLength=n.minRowLength;var s=t(20435);e.mod=s.mod,e.modHalf=s.modHalf;var o=t(63064);e.valObjectMeta=o.valObjectMeta,e.coerce=o.coerce,e.coerce2=o.coerce2,e.coerceFont=o.coerceFont,e.coercePattern=o.coercePattern,e.coerceHoverinfo=o.coerceHoverinfo,e.coerceSelectionMarkerOpacity=o.coerceSelectionMarkerOpacity,e.validate=o.validate;var p=t(67555);e.dateTime2ms=p.dateTime2ms,e.isDateTime=p.isDateTime,e.ms2DateTime=p.ms2DateTime,e.ms2DateTimeLocal=p.ms2DateTimeLocal,e.cleanDate=p.cleanDate,e.isJSDate=p.isJSDate,e.formatDate=p.formatDate,e.incrementMonth=p.incrementMonth,e.dateTick0=p.dateTick0,e.dfltRange=p.dfltRange,e.findExactDates=p.findExactDates,e.MIN_MS=p.MIN_MS,e.MAX_MS=p.MAX_MS;var b=t(14952);e.findBin=b.findBin,e.sorterAsc=b.sorterAsc,e.sorterDes=b.sorterDes,e.distinctVals=b.distinctVals,e.roundUp=b.roundUp,e.sort=b.sort,e.findIndexOfMin=b.findIndexOfMin,e.sortObjectKeys=t(95376);var h=t(63084);e.aggNums=h.aggNums,e.len=h.len,e.mean=h.mean,e.median=h.median,e.midRange=h.midRange,e.variance=h.variance,e.stdev=h.stdev,e.interp=h.interp;var _=t(52248);e.init2dArray=_.init2dArray,e.transposeRagged=_.transposeRagged,e.dot=_.dot,e.translationMatrix=_.translationMatrix,e.rotationMatrix=_.rotationMatrix,e.rotationXYMatrix=_.rotationXYMatrix,e.apply3DTransform=_.apply3DTransform,e.apply2DTransform=_.apply2DTransform,e.apply2DTransform2=_.apply2DTransform2,e.convertCssMatrix=_.convertCssMatrix,e.inverseTransformMatrix=_.inverseTransformMatrix;var a=t(11864);e.deg2rad=a.deg2rad,e.rad2deg=a.rad2deg,e.angleDelta=a.angleDelta,e.angleDist=a.angleDist,e.isFullCircle=a.isFullCircle,e.isAngleInsideSector=a.isAngleInsideSector,e.isPtInsideSector=a.isPtInsideSector,e.pathArc=a.pathArc,e.pathSector=a.pathSector,e.pathAnnulus=a.pathAnnulus;var c=t(98308);e.isLeftAnchor=c.isLeftAnchor,e.isCenterAnchor=c.isCenterAnchor,e.isRightAnchor=c.isRightAnchor,e.isTopAnchor=c.isTopAnchor,e.isMiddleAnchor=c.isMiddleAnchor,e.isBottomAnchor=c.isBottomAnchor;var f=t(92348);e.segmentsIntersect=f.segmentsIntersect,e.segmentDistance=f.segmentDistance,e.getTextLocation=f.getTextLocation,e.clearLocationCache=f.clearLocationCache,e.getVisibleSegment=f.getVisibleSegment,e.findPointOnPath=f.findPointOnPath;var x=t(92880);e.extendFlat=x.extendFlat,e.extendDeep=x.extendDeep,e.extendDeepAll=x.extendDeepAll,e.extendDeepNoArrays=x.extendDeepNoArrays;var k=t(24248);e.log=k.log,e.warn=k.warn,e.error=k.error;var y=t(53756);e.counterRegex=y.counter;var A=t(91200);e.throttle=A.throttle,e.throttleDone=A.done,e.clearThrottle=A.clear;var L=t(52200);e.getGraphDiv=L.getGraphDiv,e.isPlotDiv=L.isPlotDiv,e.removeElement=L.removeElement,e.addStyleRule=L.addStyleRule,e.addRelatedStyleRule=L.addRelatedStyleRule,e.deleteRelatedStyleRule=L.deleteRelatedStyleRule,e.getFullTransformMatrix=L.getFullTransformMatrix,e.getElementTransformMatrix=L.getElementTransformMatrix,e.getElementAndAncestors=L.getElementAndAncestors,e.equalDomRects=L.equalDomRects,e.clearResponsive=t(75352),e.preserveDrawingBuffer=t(34296),e.makeTraceGroups=t(30988),e._=t(98356),e.notifier=t(41792),e.filterUnique=t(68944),e.filterVisible=t(43880),e.pushUnique=t(52416),e.increment=t(1396),e.cleanNumber=t(54037),e.ensureNumber=function(rt){return C(rt)?(rt=Number(rt),rt>v||rt<d?r:rt):r},e.isIndex=function(rt,ot){return ot!==void 0&&rt>=ot?!1:C(rt)&&rt>=0&&rt%1===0},e.noop=t(16628),e.identity=t(35536),e.repeat=function(rt,ot){for(var H=new Array(ot),Y=0;Y<ot;Y++)H[Y]=rt;return H},e.swapAttrs=function(rt,ot,H,Y){H||(H="x"),Y||(Y="y");for(var at=0;at<ot.length;at++){var et=ot[at],ct=e.nestedProperty(rt,et.replace("?",H)),ft=e.nestedProperty(rt,et.replace("?",Y)),yt=ct.get();ct.set(ft.get()),ft.set(yt)}},e.raiseToTop=function(rt){rt.parentNode.appendChild(rt)},e.cancelTransition=function(rt){return rt.transition().duration(0)},e.constrain=function(rt,ot,H){return ot>H?Math.max(H,Math.min(ot,rt)):Math.max(ot,Math.min(H,rt))},e.bBoxIntersect=function(rt,ot,H){return H=H||0,rt.left<=ot.right+H&&ot.left<=rt.right+H&&rt.top<=ot.bottom+H&&ot.top<=rt.bottom+H},e.simpleMap=function(rt,ot,H,Y,at){for(var et=rt.length,ct=new Array(et),ft=0;ft<et;ft++)ct[ft]=ot(rt[ft],H,Y,at);return ct},e.randstr=function rt(ot,H,Y,at){if(Y||(Y=16),H===void 0&&(H=24),H<=0)return"0";var et=Math.log(Math.pow(2,H))/Math.log(Y),ct="",ft,yt,xt;for(ft=2;et===1/0;ft*=2)et=Math.log(Math.pow(2,H/ft))/Math.log(Y)*ft;var Ct=et-Math.floor(et);for(ft=0;ft<Math.floor(et);ft++)xt=Math.floor(Math.random()*Y).toString(Y),ct=xt+ct;Ct&&(yt=Math.pow(Y,Ct),xt=Math.floor(Math.random()*yt).toString(Y),ct=xt+ct);var gt=parseInt(ct,Y);return ot&&ot[ct]||gt!==1/0&&gt>=Math.pow(2,H)?at>10?(e.warn("randstr failed uniqueness"),ct):rt(ot,H,Y,(at||0)+1):ct},e.OptionControl=function(rt,ot){rt||(rt={}),ot||(ot="opt");var H={};return H.optionList=[],H._newoption=function(Y){Y[ot]=rt,H[Y.name]=Y,H.optionList.push(Y)},H["_"+ot]=rt,H},e.smooth=function(rt,ot){if(ot=Math.round(ot)||0,ot<2)return rt;var H=rt.length,Y=2*H,at=2*ot-1,et=new Array(at),ct=new Array(H),ft,yt,xt,Ct;for(ft=0;ft<at;ft++)et[ft]=(1-Math.cos(Math.PI*(ft+1)/ot))/(2*ot);for(ft=0;ft<H;ft++){for(Ct=0,yt=0;yt<at;yt++)xt=ft+yt+1-ot,xt<-H?xt-=Y*Math.round(xt/Y):xt>=Y&&(xt-=Y*Math.floor(xt/Y)),xt<0?xt=-1-xt:xt>=H&&(xt=Y-1-xt),Ct+=rt[xt]*et[yt];ct[ft]=Ct}return ct},e.syncOrAsync=function(rt,ot,H){var Y,at;function et(){return e.syncOrAsync(rt,ot,H)}for(;rt.length;)if(at=rt.splice(0,1)[0],Y=at(ot),Y&&Y.then)return Y.then(et);return H&&H(ot)},e.stripTrailingSlash=function(rt){return rt.substr(-1)==="/"?rt.substr(0,rt.length-1):rt},e.noneOrAll=function(rt,ot,H){if(rt){var Y=!1,at=!0,et,ct;for(et=0;et<H.length;et++)ct=rt[H[et]],ct!=null?Y=!0:at=!1;if(Y&&!at)for(et=0;et<H.length;et++)rt[H[et]]=ot[H[et]]}},e.mergeArray=function(rt,ot,H,Y){var at=typeof Y=="function";if(e.isArrayOrTypedArray(rt))for(var et=Math.min(rt.length,ot.length),ct=0;ct<et;ct++){var ft=rt[ct];ot[ct][H]=at?Y(ft):ft}},e.mergeArrayCastPositive=function(rt,ot,H){return e.mergeArray(rt,ot,H,function(Y){var at=+Y;return isFinite(at)&&at>0?at:0})},e.fillArray=function(rt,ot,H,Y){if(Y=Y||e.identity,e.isArrayOrTypedArray(rt))for(var at=0;at<ot.length;at++)ot[at][H]=Y(rt[at])},e.castOption=function(rt,ot,H,Y){Y=Y||e.identity;var at=e.nestedProperty(rt,H).get();return e.isArrayOrTypedArray(at)?Array.isArray(ot)&&e.isArrayOrTypedArray(at[ot[0]])?Y(at[ot[0]][ot[1]]):Y(at[ot]):at},e.extractOption=function(rt,ot,H,Y){if(H in rt)return rt[H];var at=e.nestedProperty(ot,Y).get();if(!Array.isArray(at))return at};function u(rt){var ot={};for(var H in rt)for(var Y=rt[H],at=0;at<Y.length;at++)ot[Y[at]]=+H;return ot}e.tagSelected=function(rt,ot,H){var Y=ot.selectedpoints,at=ot._indexToPoints,et;at&&(et=u(at));function ct(gt){return gt!==void 0&&gt<rt.length}for(var ft=0;ft<Y.length;ft++){var yt=Y[ft];if(e.isIndex(yt)||e.isArrayOrTypedArray(yt)&&e.isIndex(yt[0])&&e.isIndex(yt[1])){var xt=et?et[yt]:yt,Ct=H?H[xt]:xt;ct(Ct)&&(rt[Ct].selected=1)}}},e.selIndices2selPoints=function(rt){var ot=rt.selectedpoints,H=rt._indexToPoints;if(H){for(var Y=u(H),at=[],et=0;et<ot.length;et++){var ct=ot[et];if(e.isIndex(ct)){var ft=Y[ct];e.isIndex(ft)&&at.push(ft)}}return at}else return ot},e.getTargetArray=function(rt,ot){var H=ot.target;if(typeof H=="string"&&H){var Y=e.nestedProperty(rt,H).get();return e.isArrayOrTypedArray(Y)?Y:!1}else if(e.isArrayOrTypedArray(H))return H;return!1};function m(rt,ot,H){var Y={};typeof ot!="object"&&(ot={});var at=H==="pieLike"?-1:3,et=Object.keys(rt),ct,ft,yt;for(ct=0;ct<et.length;ct++)ft=et[ct],yt=rt[ft],!(ft.charAt(0)==="_"||typeof yt=="function")&&(ft==="module"?Y[ft]=yt:Array.isArray(yt)?ft==="colorscale"||at===-1?Y[ft]=yt.slice():Y[ft]=yt.slice(0,at):e.isTypedArray(yt)?at===-1?Y[ft]=yt.subarray():Y[ft]=yt.subarray(0,at):yt&&typeof yt=="object"?Y[ft]=m(rt[ft],ot[ft],H):Y[ft]=yt);for(et=Object.keys(ot),ct=0;ct<et.length;ct++)ft=et[ct],yt=ot[ft],(typeof yt!="object"||!(ft in Y)||typeof Y[ft]!="object")&&(Y[ft]=yt);return Y}e.minExtend=m,e.titleCase=function(rt){return rt.charAt(0).toUpperCase()+rt.substr(1)},e.containsAny=function(rt,ot){for(var H=0;H<ot.length;H++)if(rt.indexOf(ot[H])!==-1)return!0;return!1},e.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var S=/Version\/[\d\.]+.*Safari/;e.isSafari=function(){return S.test(window.navigator.userAgent)};var w=/iPad|iPhone|iPod/;e.isIOS=function(){return w.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;e.getFirefoxVersion=function(){var rt=I.exec(window.navigator.userAgent);if(rt&&rt.length===2){var ot=parseInt(rt[1]);if(!isNaN(ot))return ot}return null},e.isD3Selection=function(rt){return rt instanceof M.selection},e.ensureSingle=function(rt,ot,H,Y){var at=rt.select(ot+(H?"."+H:""));if(at.size())return at;var et=rt.append(ot);return H&&et.classed(H,!0),Y&&et.call(Y),et},e.ensureSingleById=function(rt,ot,H,Y){var at=rt.select(ot+"#"+H);if(at.size())return at;var et=rt.append(ot).attr("id",H);return Y&&et.call(Y),et},e.objectFromPath=function(rt,ot){for(var H=rt.split("."),Y,at=Y={},et=0;et<H.length;et++){var ct=H[et],ft=null,yt=H[et].match(/(.*)\[([0-9]+)\]/);yt?(ct=yt[1],ft=yt[2],Y=Y[ct]=[],et===H.length-1?Y[ft]=ot:Y[ft]={},Y=Y[ft]):(et===H.length-1?Y[ct]=ot:Y[ct]={},Y=Y[ct])}return at};var O=/^([^\[\.]+)\.(.+)?/,D=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function P(rt){return rt.slice(0,2)==="__"}e.expandObjectPaths=function(rt){var ot,H,Y,at,et,ct,ft;if(typeof rt=="object"&&!Array.isArray(rt)){for(H in rt)if(rt.hasOwnProperty(H))if(ot=H.match(O)){if(at=rt[H],Y=ot[1],P(Y))continue;delete rt[H],rt[Y]=e.extendDeepNoArrays(rt[Y]||{},e.objectFromPath(H,e.expandObjectPaths(at))[Y])}else if(ot=H.match(D)){if(at=rt[H],Y=ot[1],P(Y))continue;if(et=parseInt(ot[2]),delete rt[H],rt[Y]=rt[Y]||[],ot[3]===".")ft=ot[4],ct=rt[Y][et]=rt[Y][et]||{},e.extendDeepNoArrays(ct,e.objectFromPath(ft,e.expandObjectPaths(at)));else{if(P(Y))continue;rt[Y][et]=e.expandObjectPaths(at)}}else{if(P(H))continue;rt[H]=e.expandObjectPaths(rt[H])}}return rt},e.numSeparate=function(rt,ot,H){if(H||(H=!1),typeof ot!="string"||ot.length===0)throw new Error("Separator string required for formatting!");typeof rt=="number"&&(rt=String(rt));var Y=/(\d+)(\d{3})/,at=ot.charAt(0),et=ot.charAt(1),ct=rt.split("."),ft=ct[0],yt=ct.length>1?at+ct[1]:"";if(et&&(ct.length>1||ft.length>4||H))for(;Y.test(ft);)ft=ft.replace(Y,"$1"+et+"$2");return ft+yt},e.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var F=/^\w*$/;e.templateString=function(rt,ot){var H={};return rt.replace(e.TEMPLATE_STRING_REGEX,function(Y,at){var et;return F.test(at)?et=ot[at]:(H[at]=H[at]||e.nestedProperty(ot,at).get,et=H[at]()),e.isValidTextValue(et)?et:""})};var R={max:10,count:0,name:"hovertemplate"};e.hovertemplateString=function(){return it.apply(R,arguments)};var B={max:10,count:0,name:"texttemplate"};e.texttemplateString=function(){return it.apply(B,arguments)};var N=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function G(rt){var ot=rt.match(N);return ot?{key:ot[1],op:ot[2],number:Number(ot[3])}:{key:rt,op:null,number:null}}var X={max:10,count:0,name:"texttemplate",parseMultDiv:!0};e.texttemplateStringForShapes=function(){return it.apply(X,arguments)};var J=/^[:|\|]/;function it(rt,ot,H){var Y=this,at=arguments;ot||(ot={});var et={};return rt.replace(e.TEMPLATE_STRING_REGEX,function(ct,ft,yt){var xt=ft==="xother"||ft==="yother",Ct=ft==="_xother"||ft==="_yother",gt=ft==="_xother_"||ft==="_yother_",mt=ft==="xother_"||ft==="yother_",vt=xt||Ct||mt||gt,At=ft;(Ct||gt)&&(At=At.substring(1)),(mt||gt)&&(At=At.substring(0,At.length-1));var Ot=null,It=null;if(Y.parseMultDiv){var St=G(At);At=St.key,Ot=St.op,It=St.number}var Bt;if(vt){if(Bt=ot[At],Bt===void 0)return""}else{var re,Yt;for(Yt=3;Yt<at.length;Yt++)if(re=at[Yt],!!re){if(re.hasOwnProperty(At)){Bt=re[At];break}if(F.test(At)||(Bt=e.nestedProperty(re,At).get(),Bt=et[At]||e.nestedProperty(re,At).get(),Bt&&(et[At]=Bt)),Bt!==void 0)break}}if(Bt!==void 0&&(Ot==="*"&&(Bt*=It),Ot==="/"&&(Bt/=It)),Bt===void 0&&Y)return Y.count<Y.max&&(e.warn("Variable '"+At+"' in "+Y.name+" could not be found!"),Bt=ct),Y.count===Y.max&&e.warn("Too many "+Y.name+" warnings - additional warnings will be suppressed"),Y.count++,ct;if(yt){var he;if(yt[0]===":"&&(he=H?H.numberFormat:e.numberFormat,Bt!==""&&(Bt=he(yt.replace(J,""))(Bt))),yt[0]==="|"){he=H?H.timeFormat:E;var Zt=e.dateTime2ms(Bt);Bt=e.formatDate(Zt,yt.replace(J,""),!1,he)}}else{var ae=At+"Label";ot.hasOwnProperty(ae)&&(Bt=ot[ae])}return vt&&(Bt="("+Bt+")",(Ct||gt)&&(Bt=" "+Bt),(mt||gt)&&(Bt=Bt+" ")),Bt})}var nt=48,q=57;e.subplotSort=function(rt,ot){for(var H=Math.min(rt.length,ot.length)+1,Y=0,at=0,et=0;et<H;et++){var ct=rt.charCodeAt(et)||0,ft=ot.charCodeAt(et)||0,yt=ct>=nt&&ct<=q,xt=ft>=nt&&ft<=q;if(yt&&(Y=10*Y+ct-nt),xt&&(at=10*at+ft-nt),!yt||!xt){if(Y!==at)return Y-at;if(ct!==ft)return ct-ft}}return at-Y};var Z=2e9;e.seedPseudoRandom=function(){Z=2e9},e.pseudoRandom=function(){var rt=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-rt)<429496729?e.pseudoRandom():Z/4294967296},e.fillText=function(rt,ot,H){var Y=Array.isArray(H)?function(ct){H.push(ct)}:function(ct){H.text=ct},at=e.extractOption(rt,ot,"htx","hovertext");if(e.isValidTextValue(at))return Y(at);var et=e.extractOption(rt,ot,"tx","text");if(e.isValidTextValue(et))return Y(et)},e.isValidTextValue=function(rt){return rt||rt===0},e.formatPercent=function(rt,ot){ot=ot||0;for(var H=(Math.round(100*rt*Math.pow(10,ot))*Math.pow(.1,ot)).toFixed(ot)+"%",Y=0;Y<ot;Y++)H.indexOf(".")!==-1&&(H=H.replace("0%","%"),H=H.replace(".%","%"));return H},e.isHidden=function(rt){var ot=window.getComputedStyle(rt).display;return!ot||ot==="none"},e.strTranslate=function(rt,ot){return rt||ot?"translate("+rt+","+ot+")":""},e.strRotate=function(rt){return rt?"rotate("+rt+")":""},e.strScale=function(rt){return rt!==1?"scale("+rt+")":""},e.getTextTransform=function(rt){var ot=rt.noCenter,H=rt.textX,Y=rt.textY,at=rt.targetX,et=rt.targetY,ct=rt.anchorX||0,ft=rt.anchorY||0,yt=rt.rotate,xt=rt.scale;return xt?xt>1&&(xt=1):xt=0,e.strTranslate(at-xt*(H+ct),et-xt*(Y+ft))+e.strScale(xt)+(yt?"rotate("+yt+(ot?"":" "+H+" "+Y)+")":"")},e.setTransormAndDisplay=function(rt,ot){rt.attr("transform",e.getTextTransform(ot)),rt.style("display",ot.scale?null:"none")},e.ensureUniformFontSize=function(rt,ot){var H=e.extendFlat({},ot);return H.size=Math.max(ot.size,rt._fullLayout.uniformtext.minsize||0),H},e.join2=function(rt,ot,H){var Y=rt.length;return Y>1?rt.slice(0,-1).join(ot)+H+rt[Y-1]:rt.join(ot)},e.bigFont=function(rt){return Math.round(1.2*rt)};var $=e.getFirefoxVersion(),V=$!==null&&$<86;e.getPositionFromD3Event=function(){return V?[M.event.layerX,M.event.layerY]:[M.event.offsetX,M.event.offsetY]}},63620:function(Q){Q.exports=function(U){return window&&window.process&&window.process.versions?Object.prototype.toString.call(U)==="[object Object]":Object.prototype.toString.call(U)==="[object Object]"&&Object.getPrototypeOf(U).hasOwnProperty("hasOwnProperty")}},37804:function(Q,U,t){var M=t(22296),E=/^\w*$/,i=0,C=1,T=2,v=3,d=4;Q.exports=function(r,e,l,n){l=l||"name",n=n||"value";var s,o,p,b={};e&&e.length?(p=M(r,e),o=p.get()):o=r,e=e||"";var h={};if(o)for(s=0;s<o.length;s++)h[o[s][l]]=s;var _=E.test(n),a={set:function(c,f){var x=f===null?d:i;if(!o){if(!p||x===d)return;o=[],p.set(o)}var k=h[c];if(k===void 0){if(x===d)return;x=x|v,k=o.length,h[c]=k}else f!==(_?o[k][n]:M(o[k],n).get())&&(x=x|T);var y=o[k]=o[k]||{};return y[l]=c,_?y[n]=f:M(y,n).set(f),f!==null&&(x=x&~d),b[k]=b[k]|x,a},get:function(c){if(o){var f=h[c];if(f!==void 0)return _?o[f][n]:M(o[f],n).get()}},rename:function(c,f){var x=h[c];return x===void 0||(b[x]=b[x]|C,h[f]=x,delete h[c],o[x][l]=f),a},remove:function(c){var f=h[c];if(f===void 0)return a;var x=o[f];if(Object.keys(x).length>2)return b[f]=b[f]|T,a.set(c,null);if(_){for(s=f;s<o.length;s++)b[s]=b[s]|v;for(s=f;s<o.length;s++)h[o[s][l]]--;o.splice(f,1),delete h[c]}else M(x,n).set(null),b[f]=b[f]|T|d;return a},constructUpdate:function(){for(var c,f,x={},k=Object.keys(b),y=0;y<k.length;y++)f=k[y],c=e+"["+f+"]",o[f]?(b[f]&C&&(x[c+"."+l]=o[f][l]),b[f]&T&&(_?x[c+"."+n]=b[f]&d?null:o[f][n]:x[c+"."+n]=b[f]&d?null:M(o[f],n).get())):x[c]=null;return x}};return a}},98356:function(Q,U,t){var M=t(24040);Q.exports=function(E,i){for(var C=E._context.locale,T=0;T<2;T++){for(var v=E._context.locales,d=0;d<2;d++){var r=(v[C]||{}).dictionary;if(r){var e=r[i];if(e)return e}v=M.localeRegistry}var l=C.split("-")[0];if(l===C)break;C=l}return i}},24248:function(Q,U,t){var M=t(20556).dfltConfig,E=t(41792),i=Q.exports={};i.log=function(){var C;if(M.logging>1){var T=["LOG:"];for(C=0;C<arguments.length;C++)T.push(arguments[C]);console.trace.apply(console,T)}if(M.notifyOnLogging>1){var v=[];for(C=0;C<arguments.length;C++)v.push(arguments[C]);E(v.join("<br>"),"long")}},i.warn=function(){var C;if(M.logging>0){var T=["WARN:"];for(C=0;C<arguments.length;C++)T.push(arguments[C]);console.trace.apply(console,T)}if(M.notifyOnLogging>0){var v=[];for(C=0;C<arguments.length;C++)v.push(arguments[C]);E(v.join("<br>"),"stick")}},i.error=function(){var C;if(M.logging>0){var T=["ERROR:"];for(C=0;C<arguments.length;C++)T.push(arguments[C]);console.error.apply(console,T)}if(M.notifyOnLogging>0){var v=[];for(C=0;C<arguments.length;C++)v.push(arguments[C]);E(v.join("<br>"),"stick")}}},30988:function(Q,U,t){var M=t(33428);Q.exports=function(E,i,C){var T=E.selectAll("g."+C.replace(/\s/g,".")).data(i,function(d){return d[0].trace.uid});T.exit().remove(),T.enter().append("g").attr("class",C),T.order();var v=E.classed("rangeplot")?"nodeRangePlot3":"node3";return T.each(function(d){d[0][v]=M.select(this)}),T}},52248:function(Q,U,t){var M=t(36524);U.init2dArray=function(E,i){for(var C=new Array(E),T=0;T<E;T++)C[T]=new Array(i);return C},U.transposeRagged=function(E){var i=0,C=E.length,T,v;for(T=0;T<C;T++)i=Math.max(i,E[T].length);var d=new Array(i);for(T=0;T<i;T++)for(d[T]=new Array(C),v=0;v<C;v++)d[T][v]=E[v][T];return d},U.dot=function(E,i){if(!(E.length&&i.length)||E.length!==i.length)return null;var C=E.length,T,v;if(E[0].length)for(T=new Array(C),v=0;v<C;v++)T[v]=U.dot(E[v],i);else if(i[0].length){var d=U.transposeRagged(i);for(T=new Array(d.length),v=0;v<d.length;v++)T[v]=U.dot(E,d[v])}else for(T=0,v=0;v<C;v++)T+=E[v]*i[v];return T},U.translationMatrix=function(E,i){return[[1,0,E],[0,1,i],[0,0,1]]},U.rotationMatrix=function(E){var i=E*Math.PI/180;return[[Math.cos(i),-Math.sin(i),0],[Math.sin(i),Math.cos(i),0],[0,0,1]]},U.rotationXYMatrix=function(E,i,C){return U.dot(U.dot(U.translationMatrix(i,C),U.rotationMatrix(E)),U.translationMatrix(-i,-C))},U.apply3DTransform=function(E){return function(){var i=arguments,C=arguments.length===1?i[0]:[i[0],i[1],i[2]||0];return U.dot(E,[C[0],C[1],C[2],1]).slice(0,3)}},U.apply2DTransform=function(E){return function(){var i=arguments;i.length===3&&(i=i[0]);var C=arguments.length===1?i[0]:[i[0],i[1]];return U.dot(E,[C[0],C[1],1]).slice(0,2)}},U.apply2DTransform2=function(E){var i=U.apply2DTransform(E);return function(C){return i(C.slice(0,2)).concat(i(C.slice(2,4)))}},U.convertCssMatrix=function(E){if(E){var i=E.length;if(i===16)return E;if(i===6)return[E[0],E[1],0,0,E[2],E[3],0,0,0,0,1,0,E[4],E[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},U.inverseTransformMatrix=function(E){var i=[];return M.invert(i,E),[[i[0],i[1],i[2],i[3]],[i[4],i[5],i[6],i[7]],[i[8],i[9],i[10],i[11]],[i[12],i[13],i[14],i[15]]]}},20435:function(Q){function U(M,E){var i=M%E;return i<0?i+E:i}function t(M,E){return Math.abs(M)>E/2?M-Math.round(M/E)*E:M}Q.exports={mod:U,modHalf:t}},22296:function(Q,U,t){var M=t(38248),E=t(38116).isArrayOrTypedArray;Q.exports=function(n,s){if(M(s))s=String(s);else if(typeof s!="string"||s.substr(s.length-4)==="[-1]")throw"bad property string";var o=s.split("."),p,b,h,_;for(_=0;_<o.length;_++)if(String(o[_]).slice(0,2)==="__")throw"bad property string";for(_=0;_<o.length;){if(p=String(o[_]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),p){if(p[1])o[_]=p[1];else if(_===0)o.splice(0,1);else throw"bad property string";for(b=p[2].substr(1,p[2].length-2).split("]["),h=0;h<b.length;h++)_++,o.splice(_,0,Number(b[h]))}_++}return typeof n!="object"?l(n,s,o):{set:v(n,o,s),get:i(n,o),astr:s,parts:o,obj:n}};function i(n,s){return function(){var o=n,p,b,h,_,a;for(_=0;_<s.length-1;_++){if(p=s[_],p===-1){for(b=!0,h=[],a=0;a<o.length;a++)h[a]=i(o[a],s.slice(_+1))(),h[a]!==h[0]&&(b=!1);return b?h[0]:h}if(typeof p=="number"&&!E(o)||(o=o[p],typeof o!="object"||o===null))return}if(!(typeof o!="object"||o===null)&&(h=o[s[_]],h!==null))return h}}var C=/(^|\.)args\[/;function T(n,s){return n===void 0||n===null&&!s.match(C)}function v(n,s,o){return function(p){var b=n,h="",_=T(p,o),a,c;for(c=0;c<s.length-1;c++){if(a=s[c],typeof a=="number"&&!E(b))throw"array index but container is not an array";if(a===-1){if(_=!r(b,s.slice(c+1),p,o),_)break;return}if(!e(b,a,s[c+1],_))break;if(b=b[a],typeof b!="object"||b===null)throw"container is not an object";h=d(h,a)}if(_){if(c===s.length-1&&(delete b[s[c]],Array.isArray(b)&&+s[c]===b.length-1))for(;b.length&&b[b.length-1]===void 0;)b.pop()}else b[s[c]]=p}}function d(n,s){var o=s;return M(s)?o="["+s+"]":n&&(o="."+s),n+o}function r(n,s,o,p){var b=E(o),h=!0,_=o,a=p.replace("-1",0),c=b?!1:T(o,a),f=s[0],x;for(x=0;x<n.length;x++)a=p.replace("-1",x),b&&(_=o[x%o.length],c=T(_,a)),c&&(h=!1),e(n,x,f,c)&&v(n[x],s,p.replace("-1",x))(_);return h}function e(n,s,o,p){if(n[s]===void 0){if(p)return!1;typeof o=="number"?n[s]=[]:n[s]={}}return!0}function l(n,s,o){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:o,obj:n}}},16628:function(Q){Q.exports=function(){}},41792:function(Q,U,t){var M=t(33428),E=t(38248),i=[];Q.exports=function(C,T){if(i.indexOf(C)!==-1)return;i.push(C);var v=1e3;E(T)?v=T:T==="long"&&(v=3e3);var d=M.select("body").selectAll(".plotly-notifier").data([0]);d.enter().append("div").classed("plotly-notifier",!0);var r=d.selectAll(".notifier-note").data(i);function e(l){l.duration(700).style("opacity",0).each("end",function(n){var s=i.indexOf(n);s!==-1&&i.splice(s,1),M.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(l){var n=M.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(e)});for(var s=n.append("p"),o=l.split(/<br\s*\/?>/g),p=0;p<o.length;p++)p&&s.append("br"),s.append("span").text(o[p]);T==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(v).call(e)})}},72213:function(Q,U,t){var M=t(93972),E="data-savedcursor",i="!!";Q.exports=function(C,T){var v=C.attr(E);if(T){if(!v){for(var d=(C.attr("class")||"").split(" "),r=0;r<d.length;r++){var e=d[r];e.indexOf("cursor-")===0&&C.attr(E,e.substr(7)).classed(e,!1)}C.attr(E)||C.attr(E,i)}M(C,T)}else v&&(C.attr(E,null),v===i?M(C):M(C,v))}},92065:function(Q,U,t){var M=t(52248).dot,E=t(39032).BADNUM,i=Q.exports={};i.tester=function(C){var T=C.slice(),v=T[0][0],d=v,r=T[0][1],e=r,l;for((T[T.length-1][0]!==T[0][0]||T[T.length-1][1]!==T[0][1])&&T.push(T[0]),l=1;l<T.length;l++)v=Math.min(v,T[l][0]),d=Math.max(d,T[l][0]),r=Math.min(r,T[l][1]),e=Math.max(e,T[l][1]);var n=!1,s;T.length===5&&(T[0][0]===T[1][0]?T[2][0]===T[3][0]&&T[0][1]===T[3][1]&&T[1][1]===T[2][1]&&(n=!0,s=function(_){return _[0]===T[0][0]}):T[0][1]===T[1][1]&&T[2][1]===T[3][1]&&T[0][0]===T[3][0]&&T[1][0]===T[2][0]&&(n=!0,s=function(_){return _[1]===T[0][1]}));function o(_,a){var c=_[0],f=_[1];return!(c===E||c<v||c>d||f===E||f<r||f>e||a&&s(_))}function p(_,a){var c=_[0],f=_[1];if(c===E||c<v||c>d||f===E||f<r||f>e)return!1;var x=T.length,k=T[0][0],y=T[0][1],A=0,L,u,m,S,w;for(L=1;L<x;L++)if(u=k,m=y,k=T[L][0],y=T[L][1],S=Math.min(u,k),!(c<S||c>Math.max(u,k)||f>Math.max(m,y)))if(f<Math.min(m,y))c!==S&&A++;else{if(k===u?w=f:w=m+(c-u)*(y-m)/(k-u),f===w)return!(L===1&&a);f<=w&&c!==S&&A++}return A%2===1}var b=!0,h=T[0];for(l=1;l<T.length;l++)if(h[0]!==T[l][0]||h[1]!==T[l][1]){b=!1;break}return{xmin:v,xmax:d,ymin:r,ymax:e,pts:T,contains:n?o:p,isRect:n,degenerate:b}},i.isSegmentBent=function(C,T,v,d){var r=C[T],e=[C[v][0]-r[0],C[v][1]-r[1]],l=M(e,e),n=Math.sqrt(l),s=[-e[1]/n,e[0]/n],o,p,b;for(o=T+1;o<v;o++)if(p=[C[o][0]-r[0],C[o][1]-r[1]],b=M(p,e),b<0||b>l||Math.abs(M(p,s))>d)return!0;return!1},i.filter=function(C,T){var v=[C[0]],d=0,r=0;function e(n){C.push(n);var s=v.length,o=d;v.splice(r+1);for(var p=o+1;p<C.length;p++)(p===C.length-1||i.isSegmentBent(C,o,p+1,T))&&(v.push(C[p]),v.length<s-2&&(d=p,r=v.length-1),o=p)}if(C.length>1){var l=C.pop();e(l)}return{addPt:e,raw:C,filtered:v}}},5048:function(Q,U,t){var M=t(16576),E=t(28624);Q.exports=function(i,C,T){var v=i._fullLayout,d=!0;return v._glcanvas.each(function(r){if(r.regl){r.regl.preloadCachedCode(T);return}if(!(r.pick&&!v._has("parcoords"))){try{r.regl=E({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:i._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:C||[],cachedCode:T||{}})}catch{d=!1}r.regl||(d=!1),d&&this.addEventListener("webglcontextlost",function(e){i&&i.emit&&i.emit("plotly_webglcontextlost",{event:e,layer:r.key})},!1)}}),d||M({container:v._glcontainer.node()}),d}},34296:function(Q,U,t){var M=t(38248),E=t(25928);Q.exports=function(C){var T;if(C&&C.hasOwnProperty("userAgent")?T=C.userAgent:T=i(),typeof T!="string")return!0;var v=E({ua:{headers:{"user-agent":T}},tablet:!0,featureDetect:!1});if(!v)for(var d=T.split(" "),r=1;r<d.length;r++){var e=d[r];if(e.indexOf("Safari")!==-1)for(var l=r-1;l>-1;l--){var n=d[l];if(n.substr(0,8)==="Version/"){var s=n.substr(8).split(".")[0];if(M(s)&&(s=+s),s>=13)return!0}}}return v};function i(){var C;return typeof navigator<"u"&&(C=navigator.userAgent),C&&C.headers&&typeof C.headers["user-agent"]=="string"&&(C=C.headers["user-agent"]),C}},52416:function(Q){Q.exports=function(U,t){if(t instanceof RegExp){for(var M=t.toString(),E=0;E<U.length;E++)if(U[E]instanceof RegExp&&U[E].toString()===M)return U;U.push(t)}else(t||t===0)&&U.indexOf(t)===-1&&U.push(t);return U}},94552:function(Q,U,t){var M=t(3400),E=t(20556).dfltConfig;function i(T,v){for(var d=[],r,e=0;e<v.length;e++)r=v[e],r===T?d[e]=r:typeof r=="object"?d[e]=Array.isArray(r)?M.extendDeep([],r):M.extendDeepAll({},r):d[e]=r;return d}var C={};C.add=function(T,v,d,r,e){var l,n;if(T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},n=T.undoQueue.index,T.autoplay){T.undoQueue.inSequence||(T.autoplay=!1);return}!T.undoQueue.sequence||T.undoQueue.beginSequence?(l={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},T.undoQueue.queue.splice(n,T.undoQueue.queue.length-n,l),T.undoQueue.index+=1):l=T.undoQueue.queue[n-1],T.undoQueue.beginSequence=!1,l&&(l.undo.calls.unshift(v),l.undo.args.unshift(d),l.redo.calls.push(r),l.redo.args.push(e)),T.undoQueue.queue.length>E.queueLength&&(T.undoQueue.queue.shift(),T.undoQueue.index--)},C.startSequence=function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!0,T.undoQueue.beginSequence=!0},C.stopSequence=function(T){T.undoQueue=T.undoQueue||{index:0,queue:[],sequence:!1},T.undoQueue.sequence=!1,T.undoQueue.beginSequence=!1},C.undo=function(T){var v,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index<=0)){for(T.undoQueue.index--,v=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<v.undo.calls.length;d++)C.plotDo(T,v.undo.calls[d],v.undo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1}},C.redo=function(T){var v,d;if(!(T.undoQueue===void 0||isNaN(T.undoQueue.index)||T.undoQueue.index>=T.undoQueue.queue.length)){for(v=T.undoQueue.queue[T.undoQueue.index],T.undoQueue.inSequence=!0,d=0;d<v.redo.calls.length;d++)C.plotDo(T,v.redo.calls[d],v.redo.args[d]);T.undoQueue.inSequence=!1,T.autoplay=!1,T.undoQueue.index++}},C.plotDo=function(T,v,d){T.autoplay=!0,d=i(T,d),v.apply(null,d)},Q.exports=C},53756:function(Q,U){U.counter=function(t,M,E,i){var C=(M||"")+(E?"":"$"),T=i===!1?"":"^";return t==="xy"?new RegExp(T+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+C):new RegExp(T+t+"([2-9]|[1-9][0-9]+)?"+C)}},23193:function(Q){var U=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;Q.exports=function(M,E){for(;E;){var i=M.match(U);if(i)M=i[1];else if(M.match(t))M="";else throw new Error("bad relativeAttr call:"+[M,E]);if(E.charAt(0)==="^")E=E.slice(1);else break}return M&&E.charAt(0)!=="["?M+"."+E:M+E}},51528:function(Q,U,t){var M=t(38116).isArrayOrTypedArray,E=t(63620);Q.exports=function i(C,T){for(var v in T){var d=T[v],r=C[v];if(r!==d)if(v.charAt(0)==="_"||typeof d=="function"){if(v in C)continue;C[v]=d}else if(M(d)&&M(r)&&E(d[0])){if(v==="customdata"||v==="ids")continue;for(var e=Math.min(d.length,r.length),l=0;l<e;l++)r[l]!==d[l]&&E(d[l])&&E(r[l])&&i(r[l],d[l])}else E(d)&&E(r)&&(i(r,d),Object.keys(r).length||delete C[v])}}},14952:function(Q,U,t){var M=t(38248),E=t(24248),i=t(35536),C=t(39032).BADNUM,T=1e-9;U.findBin=function(l,n,s){if(M(n.start))return s?Math.ceil((l-n.start)/n.size-T)-1:Math.floor((l-n.start)/n.size+T);var o=0,p=n.length,b=0,h=p>1?(n[p-1]-n[0])/(p-1):1,_,a;for(h>=0?a=s?v:d:a=s?e:r,l+=h*T*(s?-1:1)*(h>=0?1:-1);o<p&&b++<100;)_=Math.floor((o+p)/2),a(n[_],l)?o=_+1:p=_;return b>90&&E.log("Long binary search..."),o-1};function v(l,n){return l<n}function d(l,n){return l<=n}function r(l,n){return l>n}function e(l,n){return l>=n}U.sorterAsc=function(l,n){return l-n},U.sorterDes=function(l,n){return n-l},U.distinctVals=function(l){var n=l.slice();n.sort(U.sorterAsc);var s;for(s=n.length-1;s>-1&&n[s]===C;s--);for(var o=n[s]-n[0]||1,p=o/(s||1)/1e4,b=[],h,_=0;_<=s;_++){var a=n[_],c=a-h;h===void 0?(b.push(a),h=a):c>p&&(o=Math.min(o,c),b.push(a),h=a)}return{vals:b,minDiff:o}},U.roundUp=function(l,n,s){for(var o=0,p=n.length-1,b,h=0,_=s?0:1,a=s?1:0,c=s?Math.ceil:Math.floor;o<p&&h++<100;)b=c((o+p)/2),n[b]<=l?o=b+_:p=b-a;return n[o]},U.sort=function(l,n){for(var s=0,o=0,p=1;p<l.length;p++){var b=n(l[p],l[p-1]);if(b<0?s=1:b>0&&(o=1),s&&o)return l.sort(n)}return o?l:l.reverse()},U.findIndexOfMin=function(l,n){n=n||i;for(var s=1/0,o,p=0;p<l.length;p++){var b=n(l[p]);b<s&&(s=b,o=p)}return o}},93972:function(Q){Q.exports=function(U,t){(U.attr("class")||"").split(" ").forEach(function(M){M.indexOf("cursor-")===0&&U.classed(M,!1)}),t&&U.classed("cursor-"+t,!0)}},16576:function(Q,U,t){var M=t(76308),E=function(){};Q.exports=function(i){for(var C in i)typeof i[C]=="function"&&(i[C]=E);i.destroy=function(){i.container.parentNode.removeChild(i.container)};var T=document.createElement("div");T.className="no-webgl",T.style.cursor="pointer",T.style.fontSize="24px",T.style.color=M.defaults[0],T.style.position="absolute",T.style.left=T.style.top="0px",T.style.width=T.style.height="100%",T.style["background-color"]=M.lightLine,T.style["z-index"]=30;var v=document.createElement("p");return v.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",v.style.position="relative",v.style.top="50%",v.style.left="50%",v.style.height="30%",v.style.width="50%",v.style.margin="-15% 0 0 -25%",T.appendChild(v),i.container.appendChild(T),i.container.style.background="#FFFFFF",i.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(Q){Q.exports=function(U){return Object.keys(U).sort()}},63084:function(Q,U,t){var M=t(38248),E=t(38116).isArrayOrTypedArray;U.aggNums=function(i,C,T,v){var d,r;if((!v||v>T.length)&&(v=T.length),M(C)||(C=!1),E(T[0])){for(r=new Array(v),d=0;d<v;d++)r[d]=U.aggNums(i,C,T[d]);T=r}for(d=0;d<v;d++)M(C)?M(T[d])&&(C=i(+C,+T[d])):C=T[d];return C},U.len=function(i){return U.aggNums(function(C){return C+1},0,i)},U.mean=function(i,C){return C||(C=U.len(i)),U.aggNums(function(T,v){return T+v},0,i)/C},U.midRange=function(i){if(!(i===void 0||i.length===0))return(U.aggNums(Math.max,null,i)+U.aggNums(Math.min,null,i))/2},U.variance=function(i,C,T){return C||(C=U.len(i)),M(T)||(T=U.mean(i,C)),U.aggNums(function(v,d){return v+Math.pow(d-T,2)},0,i)/C},U.stdev=function(i,C,T){return Math.sqrt(U.variance(i,C,T))},U.median=function(i){var C=i.slice().sort();return U.interp(C,.5)},U.interp=function(i,C){if(!M(C))throw"n should be a finite number";if(C=C*i.length-.5,C<0)return i[0];if(C>i.length-1)return i[i.length-1];var T=C%1;return T*i[Math.ceil(C)]+(1-T)*i[Math.floor(C)]}},43080:function(Q,U,t){var M=t(72160);function E(i){return i?M(i):[0,0,0,1]}Q.exports=E},9188:function(Q,U,t){var M=t(2264),E=t(43616),i=t(3400),C=null;function T(){if(C!==null)return C;C=!1;var v=i.isIE()||i.isSafari()||i.isIOS();if(window.navigator.userAgent&&!v){var d=Array.from(M.CSS_DECLARATIONS).reverse(),r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r=="function")C=d.some(function(s){return r.apply(null,s)});else{var e=E.tester.append("image").attr("style",M.STYLE),l=window.getComputedStyle(e.node()),n=l.imageRendering;C=d.some(function(s){var o=s[1];return n===o||n===o.toLowerCase()}),e.remove()}}return C}Q.exports=T},72736:function(Q,U,t){var M=t(33428),E=t(3400),i=E.strTranslate,C=t(9616),T=t(84284).LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;U.convertToTspans=function(R,B,N){var G=R.text(),X=!R.attr("data-notex")&&B&&B._context.typesetMath&&typeof MathJax<"u"&&G.match(v),J=M.select(R.node().parentNode);if(J.empty())return;var it=R.attr("class")?R.attr("class").split(" ")[0]:"text";it+="-math",J.selectAll("svg."+it).remove(),J.selectAll("g."+it+"-group").remove(),R.style("display",null).attr({"data-unformatted":G,"data-math":"N"});function nt(){J.empty()||(it=R.attr("class")+"-math",J.select("svg."+it).remove()),R.text("").style("white-space","pre");var q=O(R.node(),G);q&&R.style("pointer-events","all"),U.positionText(R),N&&N.call(R)}return X?(B&&B._promises||[]).push(new Promise(function(q){R.style("display","none");var Z=parseInt(R.node().style.fontSize,10),$={fontSize:Z};n(X[2],$,function(V,rt,ot){J.selectAll("svg."+it).remove(),J.selectAll("g."+it+"-group").remove();var H=V&&V.select("svg");if(!H||!H.node()){nt(),q();return}var Y=J.append("g").classed(it+"-group",!0).attr({"pointer-events":"none","data-unformatted":G,"data-math":"Y"});Y.node().appendChild(H.node()),rt&&rt.node()&&H.node().insertBefore(rt.node().cloneNode(!0),H.node().firstChild);var at=ot.width,et=ot.height;H.attr({class:it,height:et,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ct=R.node().style.fill||"black",ft=H.select("g");ft.attr({fill:ct,stroke:ct});var yt=ft.node().getBoundingClientRect(),xt=yt.width,Ct=yt.height;(xt>at||Ct>et)&&(H.style("overflow","hidden"),yt=H.node().getBoundingClientRect(),xt=yt.width,Ct=yt.height);var gt=+R.attr("x"),mt=+R.attr("y"),vt=Z||R.node().getBoundingClientRect().height,At=-vt/4;if(it[0]==="y")Y.attr({transform:"rotate("+[-90,gt,mt]+")"+i(-xt/2,At-Ct/2)});else if(it[0]==="l")mt=At-Ct/2;else if(it[0]==="a"&&it.indexOf("atitle")!==0)gt=0,mt=At;else{var Ot=R.attr("text-anchor");gt=gt-xt*(Ot==="middle"?.5:Ot==="end"?1:0),mt=mt+At-Ct/2}H.attr({x:gt,y:mt}),N&&N.call(R,Y),q(Y)})})):nt(),R};var d=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function e(R){return R.replace(d,"\\lt ").replace(r,"\\gt ")}var l=[["$","$"],["\\(","\\)"]];function n(R,B,N){var G=parseInt((MathJax.version||"").split(".")[0]);if(G!==2&&G!==3){E.warn("No MathJax version:",MathJax.version);return}var X,J,it,nt,q=function(){return J=E.extendDeepAll({},MathJax.Hub.config),it=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:l},displayAlign:"left"})},Z=function(){J=E.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=l},$=function(){if(X=MathJax.Hub.config.menuSettings.renderer,X!=="SVG")return MathJax.Hub.setRenderer("SVG")},V=function(){X=MathJax.config.startup.output,X!=="svg"&&(MathJax.config.startup.output="svg")},rt=function(){var ct="math-output-"+E.randstr({},64);nt=M.select("body").append("div").attr({id:ct}).style({visibility:"hidden",position:"absolute","font-size":B.fontSize+"px"}).text(e(R));var ft=nt.node();return G===2?MathJax.Hub.Typeset(ft):MathJax.typeset([ft])},ot=function(){var ct=nt.select(G===2?".MathJax_SVG":".MathJax"),ft=!ct.empty()&&nt.select("svg").node();if(!ft)E.log("There was an error in the tex syntax.",R),N();else{var yt=ft.getBoundingClientRect(),xt;G===2?xt=M.select("body").select("#MathJax_SVG_glyphs"):xt=ct.select("defs"),N(ct,xt,yt)}nt.remove()},H=function(){if(X!=="SVG")return MathJax.Hub.setRenderer(X)},Y=function(){X!=="svg"&&(MathJax.config.startup.output=X)},at=function(){return it!==void 0&&(MathJax.Hub.processSectionDelay=it),MathJax.Hub.Config(J)},et=function(){MathJax.config=J};G===2?MathJax.Hub.Queue(q,$,rt,ot,H,at):G===3&&(Z(),V(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){rt(),ot(),Y(),et()}))}var s={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},o={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},b="\u200B",h=["http:","https:","mailto:","",void 0,":"],_=U.NEWLINES=/(\r\n?|\n)/g,a=/(<[^<>]*>)/,c=/<(\/?)([^ >]*)(\s+(.*))?>/i,f=/<br(\s+.*)?>/i;U.BR_TAG_ALL=/<br(\s+.*)?>/gi;var x=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,k=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,y=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function L(R,B){if(!R)return null;var N=R.match(B),G=N&&(N[3]||N[4]);return G&&w(G)}var u=/(^|;)\s*color:/;U.plainText=function(R,B){B=B||{};for(var N=B.len!==void 0&&B.len!==-1?B.len:1/0,G=B.allowedTags!==void 0?B.allowedTags:["br"],X="...",J=X.length,it=R.split(a),nt=[],q="",Z=0,$=0;$<it.length;$++){var V=it[$],rt=V.match(c),ot=rt&&rt[2].toLowerCase();if(ot)G.indexOf(ot)!==-1&&(nt.push(V),q=ot);else{var H=V.length;if(Z+H<N)nt.push(V),Z+=H;else if(Z<N){var Y=N-Z;q&&(q!=="br"||Y<=J||H<=J)&&nt.pop(),N>J?nt.push(V.substr(0,Y-J)+X):nt.push(V.substr(0,Y));break}q=""}}return nt.join("")};var m={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function w(R){return R.replace(S,function(B,N){var G;return N.charAt(0)==="#"?G=I(N.charAt(1)==="x"?parseInt(N.substr(2),16):parseInt(N.substr(1),10)):G=m[N],G||B})}U.convertEntities=w;function I(R){if(!(R>1114111)){var B=String.fromCodePoint;if(B)return B(R);var N=String.fromCharCode;return R<=65535?N(R):N((R>>10)+55232,R%1024+56320)}}function O(R,B){B=B.replace(_," ");var N=!1,G=[],X,J=-1;function it(){J++;var Ct=document.createElementNS(C.svg,"tspan");M.select(Ct).attr({class:"line",dy:J*T+"em"}),R.appendChild(Ct),X=Ct;var gt=G;if(G=[{node:Ct}],gt.length>1)for(var mt=1;mt<gt.length;mt++)nt(gt[mt])}function nt(Ct){var gt=Ct.type,mt={},vt;if(gt==="a"){vt="a";var At=Ct.target,Ot=Ct.href,It=Ct.popup;Ot&&(mt={"xlink:xlink:show":At==="_blank"||At.charAt(0)!=="_"?"new":"replace",target:At,"xlink:xlink:href":Ot},It&&(mt.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+It+'");return false;'))}else vt="tspan";Ct.style&&(mt.style=Ct.style);var St=document.createElementNS(C.svg,vt);if(gt==="sup"||gt==="sub"){q(X,b),X.appendChild(St);var Bt=document.createElementNS(C.svg,"tspan");q(Bt,b),M.select(Bt).attr("dy",p[gt]),mt.dy=o[gt],X.appendChild(St),X.appendChild(Bt)}else X.appendChild(St);M.select(St).attr(mt),X=Ct.node=St,G.push(Ct)}function q(Ct,gt){Ct.appendChild(document.createTextNode(gt))}function Z(Ct){if(G.length===1){E.log("Ignoring unexpected end tag </"+Ct+">.",B);return}var gt=G.pop();Ct!==gt.type&&E.log("Start tag <"+gt.type+"> doesnt match end tag <"+Ct+">. Pretending it did match.",B),X=G[G.length-1].node}var $=f.test(B);$?it():(X=R,G=[{node:R}]);for(var V=B.split(a),rt=0;rt<V.length;rt++){var ot=V[rt],H=ot.match(c),Y=H&&H[2].toLowerCase(),at=s[Y];if(Y==="br")it();else if(at===void 0)q(X,w(ot));else if(H[1])Z(Y);else{var et=H[4],ct={type:Y},ft=L(et,x);if(ft?(ft=ft.replace(u,"$1 fill:"),at&&(ft+=";"+at)):at&&(ft=at),ft&&(ct.style=ft),Y==="a"){N=!0;var yt=L(et,k);if(yt){var xt=D(yt);xt&&(ct.href=xt,ct.target=L(et,y)||"_blank",ct.popup=L(et,A))}}nt(ct)}}return N}function D(R){var B=encodeURI(decodeURI(R)),N=document.createElement("a"),G=document.createElement("a");N.href=R,G.href=B;var X=N.protocol,J=G.protocol;return h.indexOf(X)!==-1&&h.indexOf(J)!==-1?B:""}U.sanitizeHTML=function(R){R=R.replace(_," ");for(var B=document.createElement("p"),N=B,G=[],X=R.split(a),J=0;J<X.length;J++){var it=X[J],nt=it.match(c),q=nt&&nt[2].toLowerCase();if(q in s)if(nt[1])G.length&&(N=G.pop());else{var Z=nt[4],$=L(Z,x),V=$?{style:$}:{};if(q==="a"){var rt=L(Z,k);if(rt){var ot=D(rt);if(ot){V.href=ot;var H=L(Z,y);H&&(V.target=H)}}}var Y=document.createElement(q);N.appendChild(Y),M.select(Y).attr(V),N=Y,G.push(Y)}else N.appendChild(document.createTextNode(w(it)))}var at="innerHTML";return B[at]},U.lineCount=function(R){return R.selectAll("tspan.line").size()||1},U.positionText=function(R,B,N){return R.each(function(){var G=M.select(this);function X(nt,q){return q===void 0?(q=G.attr(nt),q===null&&(G.attr(nt,0),q=0)):G.attr(nt,q),q}var J=X("x",B),it=X("y",N);this.nodeName==="text"&&G.selectAll("tspan.line").attr({x:J,y:it})})};function P(R,B,N){var G=N.horizontalAlign,X=N.verticalAlign||"top",J=R.node().getBoundingClientRect(),it=B.node().getBoundingClientRect(),nt,q,Z;return X==="bottom"?q=function(){return J.bottom-nt.height}:X==="middle"?q=function(){return J.top+(J.height-nt.height)/2}:q=function(){return J.top},G==="right"?Z=function(){return J.right-nt.width}:G==="center"?Z=function(){return J.left+(J.width-nt.width)/2}:Z=function(){return J.left},function(){nt=this.node().getBoundingClientRect();var $=Z()-it.left,V=q()-it.top,rt=N.gd||{};if(N.gd){rt._fullLayout._calcInverseTransform(rt);var ot=E.apply3DTransform(rt._fullLayout._invTransform)($,V);$=ot[0],V=ot[1]}return this.style({top:V+"px",left:$+"px","z-index":1e3}),this}}var F="1px ";U.makeTextShadow=function(R){var B=F,N=F,G=F;return B+N+G+R+", -"+B+"-"+N+G+R+", "+B+"-"+N+G+R+", -"+B+N+G+R},U.makeEditable=function(R,B){var N=B.gd,G=B.delegate,X=M.dispatch("edit","input","cancel"),J=G||R;if(R.style({"pointer-events":G?"none":"all"}),R.size()!==1)throw new Error("boo");function it(){q(),R.style({opacity:0});var Z=J.attr("class"),$;Z?$="."+Z.split(" ")[0]+"-math-group":$="[class*=-math-group]",$&&M.select(R.node().parentNode).select($).style({opacity:0})}function nt(Z){var $=Z.node(),V=document.createRange();V.selectNodeContents($);var rt=window.getSelection();rt.removeAllRanges(),rt.addRange(V),$.focus()}function q(){var Z=M.select(N),$=Z.select(".svg-container"),V=$.append("div"),rt=R.node().style,ot=parseFloat(rt.fontSize||12),H=B.text;H===void 0&&(H=R.attr("data-unformatted")),V.classed("plugin-editable editable",!0).style({position:"absolute","font-family":rt.fontFamily||"Arial","font-size":ot,color:B.fill||rt.fill||"black",opacity:1,"background-color":B.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ot/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(H).call(P(R,$,B)).on("blur",function(){N._editing=!1,R.text(this.textContent).style({opacity:1});var Y=M.select(this).attr("class"),at;Y?at="."+Y.split(" ")[0]+"-math-group":at="[class*=-math-group]",at&&M.select(R.node().parentNode).select(at).style({opacity:0});var et=this.textContent;M.select(this).transition().duration(0).remove(),M.select(document).on("mouseup",null),X.edit.call(R,et)}).on("focus",function(){var Y=this;N._editing=!0,M.select(document).on("mouseup",function(){if(M.event.target===Y)return!1;document.activeElement===V.node()&&V.node().blur()})}).on("keyup",function(){M.event.which===27?(N._editing=!1,R.style({opacity:1}),M.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(R,this.textContent)):(X.input.call(R,this.textContent),M.select(this).call(P(R,$,B)))}).on("keydown",function(){M.event.which===13&&this.blur()}).call(nt)}return B.immediate?it():J.on("click",it),M.rebind(R,X,"on")}},91200:function(Q,U){var t={};U.throttle=function(E,i,C){var T=t[E],v=Date.now();if(!T){for(var d in t)t[d].ts<v-6e4&&delete t[d];T=t[E]={ts:0,timer:null}}M(T);function r(){C(),T.ts=Date.now(),T.onDone&&(T.onDone(),T.onDone=null)}if(v>T.ts+i){r();return}T.timer=setTimeout(function(){r(),T.timer=null},i)},U.done=function(E){var i=t[E];return!i||!i.timer?Promise.resolve():new Promise(function(C){var T=i.onDone;i.onDone=function(){T&&T(),C(),i.onDone=null}})},U.clear=function(E){if(E)M(t[E]),delete t[E];else for(var i in t)U.clear(i)};function M(E){E&&E.timer!==null&&(clearTimeout(E.timer),E.timer=null)}},36896:function(Q,U,t){var M=t(38248);Q.exports=function(E,i){if(E>0)return Math.log(E)/Math.LN10;var C=Math.log(Math.min(i[0],i[1]))/Math.LN10;return M(C)||(C=Math.log(Math.max(i[0],i[1]))/Math.LN10-6),C}},59972:function(Q,U,t){var M=Q.exports={},E=t(79552).locationmodeToLayer,i=t(55712).NO;M.getTopojsonName=function(C){return[C.scope.replace(/ /g,"-"),"_",C.resolution.toString(),"m"].join("")},M.getTopojsonPath=function(C,T){return C+T+".json"},M.getTopojsonFeatures=function(C,T){var v=E[C.locationmode],d=T.objects[v];return i(T,d).features}},11680:function(Q){Q.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(Q){Q.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(Q,U,t){var M=t(24040);Q.exports=function(E){for(var i=M.layoutArrayContainers,C=M.layoutArrayRegexes,T=E.split("[")[0],v,d,r=0;r<C.length;r++)if(d=E.match(C[r]),d&&d.index===0){v=d[0];break}if(v||(v=i[i.indexOf(T)]),!v)return!1;var e=E.substr(v.length);return e?(d=e.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),d?{array:v,index:Number(d[1]),property:d[3]||""}:!1):{array:v,index:"",property:""}}},67824:function(Q,U,t){var M=t(92880).extendFlat,E=t(63620),i={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},C={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},T=i.flags.slice().concat(["fullReplot"]),v=C.flags.slice().concat("layoutReplot");Q.exports={traces:i,layout:C,traceFlags:function(){return d(T)},layoutFlags:function(){return d(v)},update:function(l,n){var s=n.editType;if(s&&s!=="none")for(var o=s.split("+"),p=0;p<o.length;p++)l[o[p]]=!0},overrideAll:r};function d(l){for(var n={},s=0;s<l.length;s++)n[l[s]]=!1;return n}function r(l,n,s){var o=M({},l);for(var p in o){var b=o[p];E(b)&&(o[p]=e(b,n,s,p))}return s==="from-root"&&(o.editType=n),o}function e(l,n,s,o){if(l.valType){var p=M({},l);if(p.editType=n,Array.isArray(l.items)){p.items=new Array(l.items.length);for(var b=0;b<l.items.length;b++)p.items[b]=e(l.items[b],n)}return p}else return r(l,n,o.charAt(0)==="_"?"nested":"from-root")}},93404:function(Q,U,t){var M=t(38248),E=t(61784),i=t(24040),C=t(3400),T=t(7316),v=t(79811),d=t(76308),r=v.cleanId,e=v.getFromTrace,l=i.traceIs;U.clearPromiseQueue=function(f){Array.isArray(f._promises)&&f._promises.length>0&&C.log("Clearing previous rejected promises from queue."),f._promises=[]},U.cleanLayout=function(f){var x,k;f||(f={}),f.xaxis1&&(f.xaxis||(f.xaxis=f.xaxis1),delete f.xaxis1),f.yaxis1&&(f.yaxis||(f.yaxis=f.yaxis1),delete f.yaxis1),f.scene1&&(f.scene||(f.scene=f.scene1),delete f.scene1);var y=(T.subplotsRegistry.cartesian||{}).attrRegex,A=(T.subplotsRegistry.polar||{}).attrRegex,L=(T.subplotsRegistry.ternary||{}).attrRegex,u=(T.subplotsRegistry.gl3d||{}).attrRegex,m=Object.keys(f);for(x=0;x<m.length;x++){var S=m[x];if(y&&y.test(S)){var w=f[S];w.anchor&&w.anchor!=="free"&&(w.anchor=r(w.anchor)),w.overlaying&&(w.overlaying=r(w.overlaying)),w.type||(w.isdate?w.type="date":w.islog?w.type="log":w.isdate===!1&&w.islog===!1&&(w.type="linear")),(w.autorange==="withzero"||w.autorange==="tozero")&&(w.autorange=!0,w.rangemode="tozero"),w.insiderange&&delete w.range,delete w.islog,delete w.isdate,delete w.categories,h(w,"domain")&&delete w.domain,w.autotick!==void 0&&(w.tickmode===void 0&&(w.tickmode=w.autotick?"auto":"linear"),delete w.autotick),s(w)}else if(A&&A.test(S)){var I=f[S];s(I.radialaxis)}else if(L&&L.test(S)){var O=f[S];s(O.aaxis),s(O.baxis),s(O.caxis)}else if(u&&u.test(S)){var D=f[S],P=D.cameraposition;if(Array.isArray(P)&&P[0].length===4){var F=P[0],R=P[1],B=P[2],N=E([],F),G=[];for(k=0;k<3;++k)G[k]=R[k]+B*N[2+4*k];D.camera={eye:{x:G[0],y:G[1],z:G[2]},center:{x:R[0],y:R[1],z:R[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}s(D.xaxis),s(D.yaxis),s(D.zaxis)}}var X=Array.isArray(f.annotations)?f.annotations.length:0;for(x=0;x<X;x++){var J=f.annotations[x];C.isPlainObject(J)&&(J.ref&&(J.ref==="paper"?(J.xref="paper",J.yref="paper"):J.ref==="data"&&(J.xref="x",J.yref="y"),delete J.ref),n(J,"xref"),n(J,"yref"))}var it=Array.isArray(f.shapes)?f.shapes.length:0;for(x=0;x<it;x++){var nt=f.shapes[x];C.isPlainObject(nt)&&(n(nt,"xref"),n(nt,"yref"))}var q=Array.isArray(f.images)?f.images.length:0;for(x=0;x<q;x++){var Z=f.images[x];C.isPlainObject(Z)&&(n(Z,"xref"),n(Z,"yref"))}var $=f.legend;return $&&($.x>3?($.x=1.02,$.xanchor="left"):$.x<-2&&($.x=-.02,$.xanchor="right"),$.y>3?($.y=1.02,$.yanchor="bottom"):$.y<-2&&($.y=-.02,$.yanchor="top")),s(f),f.dragmode==="rotate"&&(f.dragmode="orbit"),d.clean(f),f.template&&f.template.layout&&U.cleanLayout(f.template.layout),f};function n(f,x){var k=f[x],y=x.charAt(0);k&&k!=="paper"&&(f[x]=r(k,y,!0))}function s(f){f&&((typeof f.title=="string"||typeof f.title=="number")&&(f.title={text:f.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"));function x(k,y){var A=f[k],L=f.title&&f.title[y];A&&!L&&(f.title||(f.title={}),f.title[y]=f[k],delete f[k])}}U.cleanData=function(f){for(var x=0;x<f.length;x++){var k=f[x],y;if(k.type==="histogramy"&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var A=d.defaults,L=k.error_y.color||(l(k,"bar")?d.defaultLine:A[x%A.length]);k.error_y.color=d.addOpacity(d.rgb(L),d.opacity(L)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&(k.bardir==="h"&&(l(k,"bar")||k.type.substr(0,9)==="histogram")&&(k.orientation="h",U.swapXYData(k)),delete k.bardir),k.type==="histogramy"&&U.swapXYData(k),(k.type==="histogramx"||k.type==="histogramy")&&(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=r(k.xaxis,"x")),k.yaxis&&(k.yaxis=r(k.yaxis,"y")),l(k,"gl3d")&&k.scene&&(k.scene=T.subplotsRegistry.gl3d.cleanId(k.scene)),!l(k,"pie-like")&&!l(k,"bar-like"))if(Array.isArray(k.textposition))for(y=0;y<k.textposition.length;y++)k.textposition[y]=b(k.textposition[y]);else k.textposition&&(k.textposition=b(k.textposition));var u=i.getModule(k);if(u&&u.colorbar){var m=u.colorbar.container,S=m?k[m]:k;S&&S.colorscale&&(S.colorscale==="YIGnBu"&&(S.colorscale="YlGnBu"),S.colorscale==="YIOrRd"&&(S.colorscale="YlOrRd"))}if(k.type==="surface"&&C.isPlainObject(k.contours)){var w=["x","y","z"];for(y=0;y<w.length;y++){var I=k.contours[w[y]];C.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if(k.type==="candlestick"||k.type==="ohlc"){var O=(k.increasing||{}).showlegend!==!1,D=(k.decreasing||{}).showlegend!==!1,P=o(k.increasing),F=o(k.decreasing);if(P!==!1&&F!==!1){var R=p(P,F,O,D);R&&(k.name=R)}else(P||F)&&!k.name&&(k.name=P||F)}if(Array.isArray(k.transforms)){var B=k.transforms;for(y=0;y<B.length;y++){var N=B[y];if(C.isPlainObject(N))switch(N.type){case"filter":N.filtersrc&&(N.target=N.filtersrc,delete N.filtersrc),N.calendar&&(N.valuecalendar||(N.valuecalendar=N.calendar),delete N.calendar);break;case"groupby":if(N.styles=N.styles||N.style,N.styles&&!Array.isArray(N.styles)){var G=N.styles,X=Object.keys(G);N.styles=[];for(var J=0;J<X.length;J++)N.styles.push({target:X[J],value:G[X[J]]})}break}}}h(k,"line")&&delete k.line,"marker"in k&&(h(k.marker,"line")&&delete k.marker.line,h(k,"marker")&&delete k.marker),d.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),s(k),k.colorbar&&s(k.colorbar),k.marker&&k.marker.colorbar&&s(k.marker.colorbar),k.line&&k.line.colorbar&&s(k.line.colorbar),k.aaxis&&s(k.aaxis),k.baxis&&s(k.baxis)}};function o(f){if(!C.isPlainObject(f))return!1;var x=f.name;return delete f.name,delete f.showlegend,(typeof x=="string"||typeof x=="number")&&String(x)}function p(f,x,k,y){if(k&&!y)return f;if(y&&!k||!f.trim())return x;if(!x.trim())return f;var A=Math.min(f.length,x.length),L;for(L=0;L<A&&f.charAt(L)===x.charAt(L);L++);var u=f.substr(0,L);return u.trim()}function b(f){var x="middle",k="center";return typeof f=="string"&&(f.indexOf("top")!==-1?x="top":f.indexOf("bottom")!==-1&&(x="bottom"),f.indexOf("left")!==-1?k="left":f.indexOf("right")!==-1&&(k="right")),x+" "+k}function h(f,x){return x in f&&typeof f[x]=="object"&&Object.keys(f[x]).length===0}U.swapXYData=function(f){var x;if(C.swapAttrs(f,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(f.z)&&Array.isArray(f.z[0])&&(f.transpose?delete f.transpose:f.transpose=!0),f.error_x&&f.error_y){var k=f.error_y,y="copy_ystyle"in k?k.copy_ystyle:!(k.color||k.thickness||k.width);C.swapAttrs(f,["error_?.copy_ystyle"]),y&&C.swapAttrs(f,["error_?.color","error_?.thickness","error_?.width"])}if(typeof f.hoverinfo=="string"){var A=f.hoverinfo.split("+");for(x=0;x<A.length;x++)A[x]==="x"?A[x]="y":A[x]==="y"&&(A[x]="x");f.hoverinfo=A.join("+")}},U.coerceTraceIndices=function(f,x){if(M(x))return[x];if(!Array.isArray(x)||!x.length)return f.data.map(function(A,L){return L});if(Array.isArray(x)){for(var k=[],y=0;y<x.length;y++)C.isIndex(x[y],f.data.length)?k.push(x[y]):C.warn("trace index (",x[y],") is not a number or is out of bounds");return k}return x},U.manageArrayContainers=function(f,x,k){var y=f.obj,A=f.parts,L=A.length,u=A[L-1],m=M(u);if(m&&x===null){var S=A.slice(0,L-1).join("."),w=C.nestedProperty(y,S).get();w.splice(u,1)}else m&&f.get()===void 0&&f.get()===void 0&&(k[f.astr]=null),f.set(x)};var _=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function a(f){var x=f.search(_);if(x>0)return f.substr(0,x)}U.hasParent=function(f,x){for(var k=a(x);k;){if(k in f)return!0;k=a(k)}return!1};var c=["x","y","z"];U.clearAxisTypes=function(f,x,k){for(var y=0;y<x.length;y++)for(var A=f._fullData[y],L=0;L<3;L++){var u=e(f,A,c[L]);if(u&&u.type!=="log"){var m=u._name,S=u._id.substr(1);if(S.substr(0,5)==="scene"){if(k[S]!==void 0)continue;m=S+"."+m}var w=m+".type";k[m]===void 0&&k[w]===void 0&&C.nestedProperty(f.layout,w).set(null)}}}},22448:function(Q,U,t){var M=t(36424);U._doPlot=M._doPlot,U.newPlot=M.newPlot,U.restyle=M.restyle,U.relayout=M.relayout,U.redraw=M.redraw,U.update=M.update,U._guiRestyle=M._guiRestyle,U._guiRelayout=M._guiRelayout,U._guiUpdate=M._guiUpdate,U._storeDirectGUIEdit=M._storeDirectGUIEdit,U.react=M.react,U.extendTraces=M.extendTraces,U.prependTraces=M.prependTraces,U.addTraces=M.addTraces,U.deleteTraces=M.deleteTraces,U.moveTraces=M.moveTraces,U.purge=M.purge,U.addFrames=M.addFrames,U.deleteFrames=M.deleteFrames,U.animate=M.animate,U.setPlotConfig=M.setPlotConfig;var E=t(52200).getGraphDiv,i=t(4016).eraseActiveShape;U.deleteActiveShape=function(T){return i(E(T))},U.toImage=t(67024),U.validate=t(21480),U.downloadImage=t(39792);var C=t(94828);U.makeTemplate=C.makeTemplate,U.validateTemplate=C.validateTemplate},17680:function(Q,U,t){var M=t(63620),E=t(16628),i=t(24248),C=t(14952).sorterAsc,T=t(24040);U.containerArrayMatch=t(69820);var v=U.isAddVal=function(r){return r==="add"||M(r)},d=U.isRemoveVal=function(r){return r===null||r==="remove"};U.applyContainerArrayChanges=function(r,e,l,n,s){var o=e.astr,p=T.getComponentMethod(o,"supplyLayoutDefaults"),b=T.getComponentMethod(o,"draw"),h=T.getComponentMethod(o,"drawOne"),_=n.replot||n.recalc||p===E||b===E,a=r.layout,c=r._fullLayout;if(l[""]){Object.keys(l).length>1&&i.warn("Full array edits are incompatible with other edits",o);var f=l[""][""];if(d(f))e.set(null);else if(Array.isArray(f))e.set(f);else return i.warn("Unrecognized full array edit value",o,f),!0;return _?!1:(p(a,c),b(r),!0)}var x=Object.keys(l).map(Number).sort(C),k=e.get(),y=k||[],A=s(c,o).get(),L=[],u=-1,m=y.length,S,w,I,O,D,P,F,R;for(S=0;S<x.length;S++){if(I=x[S],O=l[I],D=Object.keys(O),P=O[""],F=v(P),I<0||I>y.length-(F?0:1)){i.warn("index out of range",o,I);continue}if(P!==void 0)D.length>1&&i.warn("Insertion & removal are incompatible with edits to the same index.",o,I),d(P)?L.push(I):F?(P==="add"&&(P={}),y.splice(I,0,P),A&&A.splice(I,0,{})):i.warn("Unrecognized full object edit value",o,I,P),u===-1&&(u=I);else for(w=0;w<D.length;w++)R=o+"["+I+"].",s(y[I],D[w],R).set(O[D[w]])}for(S=L.length-1;S>=0;S--)y.splice(L[S],1),A&&A.splice(L[S],1);if(y.length?k||e.set(y):e.set(null),_)return!1;if(p(a,c),h!==E){var B;if(u===-1)B=x;else{for(m=Math.max(y.length,m),B=[],S=0;S<x.length&&(I=x[S],!(I>=u));S++)B.push(I);for(S=u;S<m;S++)B.push(S)}for(S=0;S<B.length;S++)h(r,B[S])}else b(r);return!0}},36424:function(Q,U,t){var M=t(33428),E=t(38248),i=t(52264),C=t(3400),T=C.nestedProperty,v=t(95924),d=t(94552),r=t(24040),e=t(73060),l=t(7316),n=t(54460),s=t(96312),o=t(94724),p=t(43616),b=t(76308),h=t(42464).initInteractions,_=t(9616),a=t(22676).clearOutline,c=t(20556).dfltConfig,f=t(17680),x=t(93404),k=t(39172),y=t(67824),A=t(33816).AX_NAME_PATTERN,L=0,u=5;function m(ht,bt,Pt,Gt){var te;if(ht=C.getGraphDiv(ht),v.init(ht),C.isPlainObject(bt)){var ne=bt;bt=ne.data,Pt=ne.layout,Gt=ne.config,te=ne.frames}var je=v.triggerHandler(ht,"plotly_beforeplot",[bt,Pt,Gt]);if(je===!1)return Promise.reject();!bt&&!Pt&&!C.isPlotDiv(ht)&&C.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ht);function Ne(){if(te)return U.addFrames(ht,te)}D(ht,Gt),Pt||(Pt={}),M.select(ht).classed("js-plotly-plot",!0),p.makeTester(),Array.isArray(ht._promises)||(ht._promises=[]);var ge=(ht.data||[]).length===0&&Array.isArray(bt);Array.isArray(bt)&&(x.cleanData(bt),ge?ht.data=bt:ht.data.push.apply(ht.data,bt),ht.empty=!1),(!ht.layout||ge)&&(ht.layout=x.cleanLayout(Pt)),l.supplyDefaults(ht);var _e=ht._fullLayout,De=_e._has("cartesian");_e._replotting=!0,(ge||_e._shouldCreateBgLayer)&&(dt(ht),_e._shouldCreateBgLayer&&delete _e._shouldCreateBgLayer),p.initGradients(ht),p.initPatterns(ht),ge&&n.saveShowSpikeInitial(ht);var hr=!ht.calcdata||ht.calcdata.length!==(ht._fullData||[]).length;hr&&l.doCalcdata(ht);for(var fe=0;fe<ht.calcdata.length;fe++)ht.calcdata[fe][0].trace=ht._fullData[fe];ht._context.responsive?ht._responsiveChartHandler||(ht._responsiveChartHandler=function(){C.isHidden(ht)||l.resize(ht)},window.addEventListener("resize",ht._responsiveChartHandler)):C.clearResponsive(ht);var Be=C.extendFlat({},_e._size),He=0;function pr(){for(var Re=_e._basePlotModules,be=0;be<Re.length;be++)Re[be].drawFramework&&Re[be].drawFramework(ht);!_e._glcanvas&&_e._has("gl")&&(_e._glcanvas=_e._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(sr){return sr.key}),_e._glcanvas.enter().append("canvas").attr("class",function(sr){return"gl-canvas gl-canvas-"+sr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ge=ht._context.plotGlPixelRatio;if(_e._glcanvas){_e._glcanvas.attr("width",_e.width*Ge).attr("height",_e.height*Ge).style("width",_e.width+"px").style("height",_e.height+"px");var Ke=_e._glcanvas.data()[0].regl;if(Ke&&(Math.floor(_e.width*Ge)!==Ke._gl.drawingBufferWidth||Math.floor(_e.height*Ge)!==Ke._gl.drawingBufferHeight)){var or="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(He)C.error(or);else return C.log(or+" Clearing graph and plotting again."),l.cleanPlot([],{},ht._fullData,_e),l.supplyDefaults(ht),_e=ht._fullLayout,l.doCalcdata(ht),He++,pr()}}return _e.modebar.orientation==="h"?_e._modebardiv.style("height",null).style("width","100%"):_e._modebardiv.style("width",null).style("height",_e.height+"px"),l.previousPromises(ht)}function Ze(){if(l.clearAutoMarginIds(ht),k.drawMarginPushers(ht),n.allowAutoMargin(ht),ht._fullLayout.title.text&&ht._fullLayout.title.automargin&&l.allowAutoMargin(ht,"title.automargin"),_e._has("pie"))for(var Re=ht._fullData,be=0;be<Re.length;be++){var Ge=Re[be];Ge.type==="pie"&&Ge.automargin&&l.allowAutoMargin(ht,"pie."+Ge.uid+".automargin")}return l.doAutoMargin(ht),l.previousPromises(ht)}function Xt(){if(l.didMarginChange(Be,_e._size))return C.syncOrAsync([Ze,k.layoutStyles],ht)}function ie(){if(!hr){pe();return}return C.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),pe],ht)}function pe(){ht._transitioning||(k.doAutoRangeAndConstraints(ht),ge&&n.saveRangeInitial(ht),r.getComponentMethod("rangeslider","calcAutorange")(ht))}function ke(){return n.draw(ht,ge?"":"redraw")}var Ce=[l.previousPromises,Ne,pr,Ze,Xt];De&&Ce.push(ie),Ce.push(k.layoutStyles),De&&Ce.push(ke,function(Re){var be=Re._fullLayout._insideTickLabelsUpdaterange;if(be)return Re._fullLayout._insideTickLabelsUpdaterange=void 0,yt(Re,be).then(function(){n.saveRangeInitial(Re,!0)})}),Ce.push(k.drawData,k.finalDraw,h,l.addLinks,l.rehover,l.redrag,l.reselect,l.doAutoMargin,l.previousPromises);var Fe=C.syncOrAsync(Ce,ht);return(!Fe||!Fe.then)&&(Fe=Promise.resolve()),Fe.then(function(){return S(ht),ht})}function S(ht){var bt=ht._fullLayout;bt._redrawFromAutoMarginCount?bt._redrawFromAutoMarginCount--:ht.emit("plotly_afterplot")}function w(ht){return C.extendFlat(c,ht)}function I(ht,bt){try{ht._fullLayout._paper.style("background",bt)}catch(Pt){C.error(Pt)}}function O(ht,bt){var Pt=b.combine(bt,"white");I(ht,Pt)}function D(ht,bt){if(!ht._context){ht._context=C.extendDeep({},c);var Pt=M.select("base");ht._context._baseUrl=Pt.size()&&Pt.attr("href")?window.location.href.split("#")[0]:""}var Gt=ht._context,te,ne,je;if(bt){for(ne=Object.keys(bt),te=0;te<ne.length;te++)je=ne[te],!(je==="editable"||je==="edits")&&je in Gt&&(je==="setBackground"&&bt[je]==="opaque"?Gt[je]=O:Gt[je]=bt[je]);bt.plot3dPixelRatio&&!Gt.plotGlPixelRatio&&(Gt.plotGlPixelRatio=Gt.plot3dPixelRatio);var Ne=bt.editable;if(Ne!==void 0)for(Gt.editable=Ne,ne=Object.keys(Gt.edits),te=0;te<ne.length;te++)Gt.edits[ne[te]]=Ne;if(bt.edits)for(ne=Object.keys(bt.edits),te=0;te<ne.length;te++)je=ne[te],je in Gt.edits&&(Gt.edits[je]=bt.edits[je]);Gt._exportedPlot=bt._exportedPlot}Gt.staticPlot&&(Gt.editable=!1,Gt.edits={},Gt.autosizable=!1,Gt.scrollZoom=!1,Gt.doubleClick=!1,Gt.showTips=!1,Gt.showLink=!1,Gt.displayModeBar=!1),Gt.displayModeBar==="hover"&&!i&&(Gt.displayModeBar=!0),(Gt.setBackground==="transparent"||typeof Gt.setBackground!="function")&&(Gt.setBackground=I),Gt._hasZeroHeight=Gt._hasZeroHeight||ht.clientHeight===0,Gt._hasZeroWidth=Gt._hasZeroWidth||ht.clientWidth===0;var ge=Gt.scrollZoom,_e=Gt._scrollZoom={};if(ge===!0)_e.cartesian=1,_e.gl3d=1,_e.geo=1,_e.mapbox=1;else if(typeof ge=="string"){var De=ge.split("+");for(te=0;te<De.length;te++)_e[De[te]]=1}else ge!==!1&&(_e.gl3d=1,_e.geo=1,_e.mapbox=1)}function P(ht){if(ht=C.getGraphDiv(ht),!C.isPlotDiv(ht))throw new Error("This element is not a Plotly plot: "+ht);return x.cleanData(ht.data),x.cleanLayout(ht.layout),ht.calcdata=void 0,U._doPlot(ht).then(function(){return ht.emit("plotly_redraw"),ht})}function F(ht,bt,Pt,Gt){return ht=C.getGraphDiv(ht),l.cleanPlot([],{},ht._fullData||[],ht._fullLayout||{}),l.purge(ht),U._doPlot(ht,bt,Pt,Gt)}function R(ht,bt){var Pt=bt+1,Gt=[],te,ne;for(te=0;te<ht.length;te++)ne=ht[te],ne<0?Gt.push(Pt+ne):Gt.push(ne);return Gt}function B(ht,bt,Pt){var Gt,te;for(Gt=0;Gt<bt.length;Gt++){if(te=bt[Gt],te!==parseInt(te,10))throw new Error("all values in "+Pt+" must be integers");if(te>=ht.data.length||te<-ht.data.length)throw new Error(Pt+" must be valid indices for gd.data.");if(bt.indexOf(te,Gt+1)>-1||te>=0&&bt.indexOf(-ht.data.length+te)>-1||te<0&&bt.indexOf(ht.data.length+te)>-1)throw new Error("each index in "+Pt+" must be unique.")}}function N(ht,bt,Pt){if(!Array.isArray(ht.data))throw new Error("gd.data must be an array.");if(typeof bt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(bt)||(bt=[bt]),B(ht,bt,"currentIndices"),typeof Pt<"u"&&!Array.isArray(Pt)&&(Pt=[Pt]),typeof Pt<"u"&&B(ht,Pt,"newIndices"),typeof Pt<"u"&&bt.length!==Pt.length)throw new Error("current and new indices must be of equal length.")}function G(ht,bt,Pt){var Gt,te;if(!Array.isArray(ht.data))throw new Error("gd.data must be an array.");if(typeof bt>"u")throw new Error("traces must be defined.");for(Array.isArray(bt)||(bt=[bt]),Gt=0;Gt<bt.length;Gt++)if(te=bt[Gt],typeof te!="object"||Array.isArray(te)||te===null)throw new Error("all values in traces array must be non-array objects");if(typeof Pt<"u"&&!Array.isArray(Pt)&&(Pt=[Pt]),typeof Pt<"u"&&Pt.length!==bt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function X(ht,bt,Pt,Gt){var te=C.isPlainObject(Gt);if(!Array.isArray(ht.data))throw new Error("gd.data must be an array");if(!C.isPlainObject(bt))throw new Error("update must be a key:value object");if(typeof Pt>"u")throw new Error("indices must be an integer or array of integers");B(ht,Pt,"indices");for(var ne in bt){if(!Array.isArray(bt[ne])||bt[ne].length!==Pt.length)throw new Error("attribute "+ne+" must be an array of length equal to indices array length");if(te&&(!(ne in Gt)||!Array.isArray(Gt[ne])||Gt[ne].length!==bt[ne].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function J(ht,bt,Pt,Gt){var te=C.isPlainObject(Gt),ne=[],je,Ne,ge,_e,De;Array.isArray(Pt)||(Pt=[Pt]),Pt=R(Pt,ht.data.length-1);for(var hr in bt)for(var fe=0;fe<Pt.length;fe++){if(je=ht.data[Pt[fe]],ge=T(je,hr),Ne=ge.get(),_e=bt[hr][fe],!C.isArrayOrTypedArray(_e))throw new Error("attribute: "+hr+" index: "+fe+" must be an array");if(!C.isArrayOrTypedArray(Ne))throw new Error("cannot extend missing or non-array attribute: "+hr);if(Ne.constructor!==_e.constructor)throw new Error("cannot extend array with an array of a different type: "+hr);De=te?Gt[hr][fe]:Gt,E(De)||(De=-1),ne.push({prop:ge,target:Ne,insert:_e,maxp:Math.floor(De)})}return ne}function it(ht,bt,Pt,Gt,te){X(ht,bt,Pt,Gt);for(var ne=J(ht,bt,Pt,Gt),je={},Ne={},ge=0;ge<ne.length;ge++){var _e=ne[ge].prop,De=ne[ge].maxp,hr=te(ne[ge].target,ne[ge].insert,De);_e.set(hr[0]),Array.isArray(je[_e.astr])||(je[_e.astr]=[]),je[_e.astr].push(hr[1]),Array.isArray(Ne[_e.astr])||(Ne[_e.astr]=[]),Ne[_e.astr].push(ne[ge].target.length)}return{update:je,maxPoints:Ne}}function nt(ht,bt){var Pt=new ht.constructor(ht.length+bt.length);return Pt.set(ht),Pt.set(bt,ht.length),Pt}function q(ht,bt,Pt,Gt){ht=C.getGraphDiv(ht);function te(ge,_e,De){var hr,fe;if(C.isTypedArray(ge))if(De<0){var Be=new ge.constructor(0),He=nt(ge,_e);De<0?(hr=He,fe=Be):(hr=Be,fe=He)}else if(hr=new ge.constructor(De),fe=new ge.constructor(ge.length+_e.length-De),De===_e.length)hr.set(_e),fe.set(ge);else if(De<_e.length){var pr=_e.length-De;hr.set(_e.subarray(pr)),fe.set(ge),fe.set(_e.subarray(0,pr),ge.length)}else{var Ze=De-_e.length,Xt=ge.length-Ze;hr.set(ge.subarray(Xt)),hr.set(_e,Ze),fe.set(ge.subarray(0,Xt))}else hr=ge.concat(_e),fe=De>=0&&De<hr.length?hr.splice(0,hr.length-De):[];return[hr,fe]}var ne=it(ht,bt,Pt,Gt,te),je=U.redraw(ht),Ne=[ht,ne.update,Pt,ne.maxPoints];return d.add(ht,U.prependTraces,Ne,q,arguments),je}function Z(ht,bt,Pt,Gt){ht=C.getGraphDiv(ht);function te(ge,_e,De){var hr,fe;if(C.isTypedArray(ge))if(De<=0){var Be=new ge.constructor(0),He=nt(_e,ge);De<0?(hr=He,fe=Be):(hr=Be,fe=He)}else if(hr=new ge.constructor(De),fe=new ge.constructor(ge.length+_e.length-De),De===_e.length)hr.set(_e),fe.set(ge);else if(De<_e.length){var pr=_e.length-De;hr.set(_e.subarray(0,pr)),fe.set(_e.subarray(pr)),fe.set(ge,pr)}else{var Ze=De-_e.length;hr.set(_e),hr.set(ge.subarray(0,Ze),_e.length),fe.set(ge.subarray(Ze))}else hr=_e.concat(ge),fe=De>=0&&De<hr.length?hr.splice(De,hr.length):[];return[hr,fe]}var ne=it(ht,bt,Pt,Gt,te),je=U.redraw(ht),Ne=[ht,ne.update,Pt,ne.maxPoints];return d.add(ht,U.extendTraces,Ne,Z,arguments),je}function $(ht,bt,Pt){ht=C.getGraphDiv(ht);var Gt=[],te=U.deleteTraces,ne=$,je=[ht,Gt],Ne=[ht,bt],ge,_e;for(G(ht,bt,Pt),Array.isArray(bt)||(bt=[bt]),bt=bt.map(function(De){return C.extendFlat({},De)}),x.cleanData(bt),ge=0;ge<bt.length;ge++)ht.data.push(bt[ge]);for(ge=0;ge<bt.length;ge++)Gt.push(-bt.length+ge);if(typeof Pt>"u")return _e=U.redraw(ht),d.add(ht,te,je,ne,Ne),_e;Array.isArray(Pt)||(Pt=[Pt]);try{N(ht,Gt,Pt)}catch(De){throw ht.data.splice(ht.data.length-bt.length,bt.length),De}return d.startSequence(ht),d.add(ht,te,je,ne,Ne),_e=U.moveTraces(ht,Gt,Pt),d.stopSequence(ht),_e}function V(ht,bt){ht=C.getGraphDiv(ht);var Pt=[],Gt=U.addTraces,te=V,ne=[ht,Pt,bt],je=[ht,bt],Ne,ge;if(typeof bt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(bt)||(bt=[bt]),B(ht,bt,"indices"),bt=R(bt,ht.data.length-1),bt.sort(C.sorterDes),Ne=0;Ne<bt.length;Ne+=1)ge=ht.data.splice(bt[Ne],1)[0],Pt.push(ge);var _e=U.redraw(ht);return d.add(ht,Gt,ne,te,je),_e}function rt(ht,bt,Pt){ht=C.getGraphDiv(ht);var Gt=[],te=[],ne=rt,je=rt,Ne=[ht,Pt,bt],ge=[ht,bt,Pt],_e;if(N(ht,bt,Pt),bt=Array.isArray(bt)?bt:[bt],typeof Pt>"u")for(Pt=[],_e=0;_e<bt.length;_e++)Pt.push(-bt.length+_e);for(Pt=Array.isArray(Pt)?Pt:[Pt],bt=R(bt,ht.data.length-1),Pt=R(Pt,ht.data.length-1),_e=0;_e<ht.data.length;_e++)bt.indexOf(_e)===-1&&Gt.push(ht.data[_e]);for(_e=0;_e<bt.length;_e++)te.push({newIndex:Pt[_e],trace:ht.data[bt[_e]]});for(te.sort(function(hr,fe){return hr.newIndex-fe.newIndex}),_e=0;_e<te.length;_e+=1)Gt.splice(te[_e].newIndex,0,te[_e].trace);ht.data=Gt;var De=U.redraw(ht);return d.add(ht,ne,Ne,je,ge),De}function ot(ht,bt,Pt,Gt){ht=C.getGraphDiv(ht),x.clearPromiseQueue(ht);var te={};if(typeof bt=="string")te[bt]=Pt;else if(C.isPlainObject(bt))te=C.extendFlat({},bt),Gt===void 0&&(Gt=Pt);else return C.warn("Restyle fail.",bt,Pt,Gt),Promise.reject();Object.keys(te).length&&(ht.changed=!0);var ne=x.coerceTraceIndices(ht,Gt),je=ct(ht,te,ne),Ne=je.flags;Ne.calc&&(ht.calcdata=void 0),Ne.clearAxisTypes&&x.clearAxisTypes(ht,ne,{});var ge=[];Ne.fullReplot?ge.push(U._doPlot):(ge.push(l.previousPromises),l.supplyDefaults(ht),Ne.markerSize&&(l.doCalcdata(ht),Ct(ge)),Ne.style&&ge.push(k.doTraceStyle),Ne.colorbars&&ge.push(k.doColorBars),ge.push(S)),ge.push(l.rehover,l.redrag,l.reselect),d.add(ht,ot,[ht,je.undoit,je.traces],ot,[ht,je.redoit,je.traces]);var _e=C.syncOrAsync(ge,ht);return(!_e||!_e.then)&&(_e=Promise.resolve()),_e.then(function(){return ht.emit("plotly_restyle",je.eventData),ht})}function H(ht){return ht===void 0?null:ht}function Y(ht,bt){return bt?function(Pt,Gt,te){var ne=T(Pt,Gt),je=ne.set;return ne.set=function(Ne){var ge=(te||"")+Gt;at(ge,ne.get(),Ne,ht),je(Ne)},ne}:T}function at(ht,bt,Pt,Gt){if(Array.isArray(bt)||Array.isArray(Pt))for(var te=Array.isArray(bt)?bt:[],ne=Array.isArray(Pt)?Pt:[],je=Math.max(te.length,ne.length),Ne=0;Ne<je;Ne++)at(ht+"["+Ne+"]",te[Ne],ne[Ne],Gt);else if(C.isPlainObject(bt)||C.isPlainObject(Pt)){var ge=C.isPlainObject(bt)?bt:{},_e=C.isPlainObject(Pt)?Pt:{},De=C.extendFlat({},ge,_e);for(var hr in De)at(ht+"."+hr,ge[hr],_e[hr],Gt)}else Gt[ht]===void 0&&(Gt[ht]=H(bt))}function et(ht,bt,Pt){for(var Gt in Pt){var te=T(ht,Gt);at(Gt,te.get(),Pt[Gt],bt)}}function ct(ht,bt,Pt){var Gt=ht._fullLayout,te=ht._fullData,ne=ht.data,je=Gt._guiEditing,Ne=Y(Gt._preGUI,je),ge=C.extendDeepAll({},bt),_e;ft(bt);var De=y.traceFlags(),hr={},fe={},Be;function He(){return Pt.map(function(){})}function pr(yn){var yr=n.id2name(yn);Be.indexOf(yr)===-1&&Be.push(yr)}function Ze(yn){return"LAYOUT"+yn+".autorange"}function Xt(yn){return"LAYOUT"+yn+".range"}function ie(yn){for(var yr=yn;yr<te.length;yr++)if(te[yr]._input===ne[yn])return te[yr]}function pe(yn,yr,Cr){if(Array.isArray(yn)){yn.forEach(function(fn){pe(fn,yr,Cr)});return}if(!(yn in bt||x.hasParent(bt,yn))){var Dr;if(yn.substr(0,6)==="LAYOUT")Dr=Ne(ht.layout,yn.replace("LAYOUT",""));else{var Nr=Pt[Cr],$r=Gt._tracePreGUI[ie(Nr)._fullInput.uid];Dr=Y($r,je)(ne[Nr],yn)}yn in fe||(fe[yn]=He()),fe[yn][Cr]===void 0&&(fe[yn][Cr]=H(Dr.get())),yr!==void 0&&Dr.set(yr)}}function ke(yn){return function(yr){return te[yr][yn]}}function Ce(yn){return function(yr,Cr){return yr===!1?te[Pt[Cr]][yn]:null}}for(var Fe in bt){if(x.hasParent(bt,Fe))throw new Error("cannot set "+Fe+" and a parent attribute simultaneously");var Re=bt[Fe],be,Ge,Ke,or,sr,zt;if((Fe==="autobinx"||Fe==="autobiny")&&(Fe=Fe.charAt(Fe.length-1)+"bins",Array.isArray(Re)?Re=Re.map(Ce(Fe)):Re===!1?Re=Pt.map(ke(Fe)):Re=null),hr[Fe]=Re,Fe.substr(0,6)==="LAYOUT"){Ke=Ne(ht.layout,Fe.replace("LAYOUT","")),fe[Fe]=[H(Ke.get())],Ke.set(Array.isArray(Re)?Re[0]:Re),De.calc=!0;continue}for(fe[Fe]=He(),_e=0;_e<Pt.length;_e++){be=ne[Pt[_e]],Ge=ie(Pt[_e]);var Ut=Gt._tracePreGUI[Ge._fullInput.uid];if(Ke=Y(Ut,je)(be,Fe),or=Ke.get(),sr=Array.isArray(Re)?Re[_e%Re.length]:Re,sr!==void 0){var Me=Ke.parts[Ke.parts.length-1],Te=Fe.substr(0,Fe.length-Me.length-1),qe=Te?Te+".":"",Qe=Te?T(Ge,Te).get():Ge;if(zt=e.getTraceValObject(Ge,Ke.parts),zt&&zt.impliedEdits&&sr!==null)for(var Je in zt.impliedEdits)pe(C.relativeAttr(Fe,Je),zt.impliedEdits[Je],_e);else if((Me==="thicknessmode"||Me==="lenmode")&&or!==sr&&(sr==="fraction"||sr==="pixels")&&Qe){var We=Gt._size,Oe=Qe.orient,rr=Oe==="top"||Oe==="bottom";if(Me==="thicknessmode"){var cr=rr?We.h:We.w;pe(qe+"thickness",Qe.thickness*(sr==="fraction"?1/cr:cr),_e)}else{var lr=rr?We.w:We.h;pe(qe+"len",Qe.len*(sr==="fraction"?1/lr:lr),_e)}}else if(Fe==="type"&&(sr==="pie"!=(or==="pie")||sr==="funnelarea"!=(or==="funnelarea"))){var nr="x",Sr="y";(sr==="bar"||or==="bar")&&be.orientation==="h"&&(nr="y",Sr="x"),C.swapAttrs(be,["?","?src"],"labels",nr),C.swapAttrs(be,["d?","?0"],"label",nr),C.swapAttrs(be,["?","?src"],"values",Sr),or==="pie"||or==="funnelarea"?(T(be,"marker.color").set(T(be,"marker.colors").get()),Gt._pielayer.selectAll("g.trace").remove()):r.traceIs(be,"cartesian")&&T(be,"marker.colors").set(T(be,"marker.color").get())}fe[Fe][_e]=H(or);var kr=["swapxy","swapxyaxes","orientation","orientationaxes"];if(kr.indexOf(Fe)!==-1){if(Fe==="orientation"){Ke.set(sr);var Mr=be.x&&!be.y?"h":"v";if((Ke.get()||Mr)===Ge.orientation)continue}else Fe==="orientationaxes"&&(be.orientation={v:"h",h:"v"}[Ge.orientation]);x.swapXYData(be),De.calc=De.clearAxisTypes=!0}else l.dataArrayContainers.indexOf(Ke.parts[0])!==-1?(x.manageArrayContainers(Ke,sr,fe),De.calc=!0):(zt?zt.arrayOk&&!r.traceIs(Ge,"regl")&&(C.isArrayOrTypedArray(sr)||C.isArrayOrTypedArray(or))?De.calc=!0:y.update(De,zt):De.calc=!0,Ke.set(sr))}}if(["swapxyaxes","orientationaxes"].indexOf(Fe)!==-1&&n.swap(ht,Pt),Fe==="orientationaxes"){var rn=T(ht.layout,"hovermode"),Ur=rn.get();Ur==="x"?rn.set("y"):Ur==="y"?rn.set("x"):Ur==="x unified"?rn.set("y unified"):Ur==="y unified"&&rn.set("x unified")}if(["orientation","type"].indexOf(Fe)!==-1){for(Be=[],_e=0;_e<Pt.length;_e++){var pn=ne[Pt[_e]];r.traceIs(pn,"cartesian")&&(pr(pn.xaxis||"x"),pr(pn.yaxis||"y"))}pe(Be.map(Ze),!0,0),pe(Be.map(Xt),[0,1],0)}}return(De.calc||De.plot)&&(De.fullReplot=!0),{flags:De,undoit:fe,redoit:hr,traces:Pt,eventData:C.extendDeepNoArrays([],[ge,Pt])}}function ft(ht){var bt=C.counterRegex("axis",".title",!1,!1),Pt=/colorbar\.title$/,Gt=Object.keys(ht),te,ne,je;for(te=0;te<Gt.length;te++)ne=Gt[te],je=ht[ne],(ne==="title"||bt.test(ne)||Pt.test(ne))&&(typeof je=="string"||typeof je=="number")?Ne(ne,ne.replace("title","title.text")):ne.indexOf("titlefont")>-1&&ne.indexOf("grouptitlefont")===-1?Ne(ne,ne.replace("titlefont","title.font")):ne.indexOf("titleposition")>-1?Ne(ne,ne.replace("titleposition","title.position")):ne.indexOf("titleside")>-1?Ne(ne,ne.replace("titleside","title.side")):ne.indexOf("titleoffset")>-1&&Ne(ne,ne.replace("titleoffset","title.offset"));function Ne(ge,_e){ht[_e]=ht[ge],delete ht[ge]}}function yt(ht,bt,Pt){ht=C.getGraphDiv(ht),x.clearPromiseQueue(ht);var Gt={};if(typeof bt=="string")Gt[bt]=Pt;else if(C.isPlainObject(bt))Gt=C.extendFlat({},bt);else return C.warn("Relayout fail.",bt,Pt),Promise.reject();Object.keys(Gt).length&&(ht.changed=!0);var te=At(ht,Gt),ne=te.flags;ne.calc&&(ht.calcdata=void 0);var je=[l.previousPromises];ne.layoutReplot?je.push(k.layoutReplot):Object.keys(Gt).length&&(xt(ht,ne,te)||l.supplyDefaults(ht),ne.legend&&je.push(k.doLegend),ne.layoutstyle&&je.push(k.layoutStyles),ne.axrange&&Ct(je,te.rangesAltered),ne.ticks&&je.push(k.doTicksRelayout),ne.modebar&&je.push(k.doModeBar),ne.camera&&je.push(k.doCamera),ne.colorbars&&je.push(k.doColorBars),je.push(S)),je.push(l.rehover,l.redrag,l.reselect),d.add(ht,yt,[ht,te.undoit],yt,[ht,te.redoit]);var Ne=C.syncOrAsync(je,ht);return(!Ne||!Ne.then)&&(Ne=Promise.resolve(ht)),Ne.then(function(){return ht.emit("plotly_relayout",te.eventData),ht})}function xt(ht,bt,Pt){var Gt=ht._fullLayout;if(!bt.axrange)return!1;for(var te in bt)if(te!=="axrange"&&bt[te])return!1;var ne,je,Ne=function(Be,He){return C.coerce(ne,je,o,Be,He)},ge={};for(var _e in Pt.rangesAltered){var De=n.id2name(_e);if(ne=ht.layout[De],je=Gt[De],s(ne,je,Ne,ge),je._matchGroup){for(var hr in je._matchGroup)if(hr!==_e){var fe=Gt[n.id2name(hr)];fe.autorange=je.autorange,fe.range=je.range.slice(),fe._input.range=je.range.slice()}}}return!0}function Ct(ht,bt){var Pt=bt?function(Gt){var te=[],ne=!0;for(var je in bt){var Ne=n.getFromId(Gt,je);if(te.push(je),(Ne.ticklabelposition||"").indexOf("inside")!==-1&&Ne._anchorAxis&&te.push(Ne._anchorAxis._id),Ne._matchGroup)for(var ge in Ne._matchGroup)bt[ge]||te.push(ge)}return n.draw(Gt,te,{skipTitle:ne})}:function(Gt){return n.draw(Gt,"redraw")};ht.push(a,k.doAutoRangeAndConstraints,Pt,k.drawData,k.finalDraw)}var gt=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,mt=/^[xyz]axis[0-9]*\.autorange$/,vt=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function At(ht,bt){var Pt=ht.layout,Gt=ht._fullLayout,te=Gt._guiEditing,ne=Y(Gt._preGUI,te),je=Object.keys(bt),Ne=n.list(ht),ge=C.extendDeepAll({},bt),_e={},De,hr,fe;for(ft(bt),je=Object.keys(bt),hr=0;hr<je.length;hr++)if(je[hr].indexOf("allaxes")===0){for(fe=0;fe<Ne.length;fe++){var Be=Ne[fe]._id.substr(1),He=Be.indexOf("scene")!==-1?Be+".":"",pr=je[hr].replace("allaxes",He+Ne[fe]._name);bt[pr]||(bt[pr]=bt[je[hr]])}delete bt[je[hr]]}var Ze=y.layoutFlags(),Xt={},ie={};function pe($r,fn){if(Array.isArray($r)){$r.forEach(function(In){pe(In,fn)});return}if(!($r in bt||x.hasParent(bt,$r))){var on=ne(Pt,$r);$r in ie||(ie[$r]=H(on.get())),fn!==void 0&&on.set(fn)}}var ke={},Ce;function Fe($r){var fn=n.name2id($r.split(".")[0]);return ke[fn]=1,fn}for(var Re in bt){if(x.hasParent(bt,Re))throw new Error("cannot set "+Re+" and a parent attribute simultaneously");for(var be=ne(Pt,Re),Ge=bt[Re],Ke=be.parts.length,or=Ke-1;or>0&&typeof be.parts[or]!="string";)or--;var sr=be.parts[or],zt=be.parts[or-1]+"."+sr,Ut=be.parts.slice(0,or).join("."),Me=T(ht.layout,Ut).get(),Te=T(Gt,Ut).get(),qe=be.get();if(Ge!==void 0){Xt[Re]=Ge,ie[Re]=sr==="reverse"?Ge:H(qe);var Qe=e.getLayoutValObject(Gt,be.parts);if(Qe&&Qe.impliedEdits&&Ge!==null)for(var Je in Qe.impliedEdits)pe(C.relativeAttr(Re,Je),Qe.impliedEdits[Je]);if(["width","height"].indexOf(Re)!==-1)if(Ge){pe("autosize",null);var We=Re==="height"?"width":"height";pe(We,Gt[We])}else Gt[Re]=ht._initialAutoSize[Re];else if(Re==="autosize")pe("width",Ge?null:Gt.width),pe("height",Ge?null:Gt.height);else if(zt.match(gt))Fe(zt),T(Gt,Ut+"._inputRange").set(null);else if(zt.match(mt)){Fe(zt),T(Gt,Ut+"._inputRange").set(null);var Oe=T(Gt,Ut).get();Oe._inputDomain&&(Oe._input.domain=Oe._inputDomain.slice())}else zt.match(vt)&&T(Gt,Ut+"._inputDomain").set(null);if(sr==="type"){Ce=Me;var rr=Te.type==="linear"&&Ge==="log",cr=Te.type==="log"&&Ge==="linear";if(rr||cr){if(!Ce||!Ce.range)pe(Ut+".autorange",!0);else if(Te.autorange)rr&&(Ce.range=Ce.range[1]>Ce.range[0]?[1,2]:[2,1]);else{var lr=Ce.range[0],nr=Ce.range[1];rr?(lr<=0&&nr<=0&&pe(Ut+".autorange",!0),lr<=0?lr=nr/1e6:nr<=0&&(nr=lr/1e6),pe(Ut+".range[0]",Math.log(lr)/Math.LN10),pe(Ut+".range[1]",Math.log(nr)/Math.LN10)):(pe(Ut+".range[0]",Math.pow(10,lr)),pe(Ut+".range[1]",Math.pow(10,nr)))}Array.isArray(Gt._subplots.polar)&&Gt._subplots.polar.length&&Gt[be.parts[0]]&&be.parts[1]==="radialaxis"&&delete Gt[be.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(ht,Te,Ge,pe),r.getComponentMethod("images","convertCoords")(ht,Te,Ge,pe)}else pe(Ut+".autorange",!0),pe(Ut+".range",null);T(Gt,Ut+"._inputRange").set(null)}else if(sr.match(A)){var Sr=T(Gt,Re).get(),kr=(Ge||{}).type;(!kr||kr==="-")&&(kr="linear"),r.getComponentMethod("annotations","convertCoords")(ht,Sr,kr,pe),r.getComponentMethod("images","convertCoords")(ht,Sr,kr,pe)}var Mr=f.containerArrayMatch(Re);if(Mr){De=Mr.array,hr=Mr.index;var rn=Mr.property,Ur=Qe||{editType:"calc"};hr!==""&&rn===""&&(f.isAddVal(Ge)?ie[Re]=null:f.isRemoveVal(Ge)?ie[Re]=(T(Pt,De).get()||[])[hr]:C.warn("unrecognized full object value",bt)),y.update(Ze,Ur),_e[De]||(_e[De]={});var pn=_e[De][hr];pn||(pn=_e[De][hr]={}),pn[rn]=Ge,delete bt[Re]}else sr==="reverse"?(Me.range?Me.range.reverse():(pe(Ut+".autorange",!0),Me.range=[1,0]),Te.autorange?Ze.calc=!0:Ze.plot=!0):(Re==="dragmode"&&(Ge===!1&&qe!==!1||Ge!==!1&&qe===!1)||Gt._has("scatter-like")&&Gt._has("regl")&&Re==="dragmode"&&(Ge==="lasso"||Ge==="select")&&!(qe==="lasso"||qe==="select")||Gt._has("gl2d")?Ze.plot=!0:Qe?y.update(Ze,Qe):Ze.calc=!0,be.set(Ge))}}for(De in _e){var yn=f.applyContainerArrayChanges(ht,ne(Pt,De),_e[De],Ze,ne);yn||(Ze.plot=!0)}for(var yr in ke){Ce=n.getFromId(ht,yr);var Cr=Ce&&Ce._constraintGroup;if(Cr){Ze.calc=!0;for(var Dr in Cr)ke[Dr]||(n.getFromId(ht,Dr)._constraintShrinkable=!0)}}(Ot(ht)||bt.height||bt.width)&&(Ze.plot=!0);var Nr=Gt.shapes;for(hr=0;hr<Nr.length;hr++)if(Nr[hr].showlegend){Ze.calc=!0;break}return(Ze.plot||Ze.calc)&&(Ze.layoutReplot=!0),{flags:Ze,rangesAltered:ke,undoit:ie,redoit:Xt,eventData:ge}}function Ot(ht){var bt=ht._fullLayout,Pt=bt.width,Gt=bt.height;return ht.layout.autosize&&l.plotAutoSize(ht,ht.layout,bt),bt.width!==Pt||bt.height!==Gt}function It(ht,bt,Pt,Gt){ht=C.getGraphDiv(ht),x.clearPromiseQueue(ht),C.isPlainObject(bt)||(bt={}),C.isPlainObject(Pt)||(Pt={}),Object.keys(bt).length&&(ht.changed=!0),Object.keys(Pt).length&&(ht.changed=!0);var te=x.coerceTraceIndices(ht,Gt),ne=ct(ht,C.extendFlat({},bt),te),je=ne.flags,Ne=At(ht,C.extendFlat({},Pt)),ge=Ne.flags;(je.calc||ge.calc)&&(ht.calcdata=void 0),je.clearAxisTypes&&x.clearAxisTypes(ht,te,Pt);var _e=[];ge.layoutReplot?_e.push(k.layoutReplot):je.fullReplot?_e.push(U._doPlot):(_e.push(l.previousPromises),xt(ht,ge,Ne)||l.supplyDefaults(ht),je.style&&_e.push(k.doTraceStyle),(je.colorbars||ge.colorbars)&&_e.push(k.doColorBars),ge.legend&&_e.push(k.doLegend),ge.layoutstyle&&_e.push(k.layoutStyles),ge.axrange&&Ct(_e,Ne.rangesAltered),ge.ticks&&_e.push(k.doTicksRelayout),ge.modebar&&_e.push(k.doModeBar),ge.camera&&_e.push(k.doCamera),_e.push(S)),_e.push(l.rehover,l.redrag,l.reselect),d.add(ht,It,[ht,ne.undoit,Ne.undoit,ne.traces],It,[ht,ne.redoit,Ne.redoit,ne.traces]);var De=C.syncOrAsync(_e,ht);return(!De||!De.then)&&(De=Promise.resolve(ht)),De.then(function(){return ht.emit("plotly_update",{data:ne.eventData,layout:Ne.eventData}),ht})}function St(ht){return function(bt){bt._fullLayout._guiEditing=!0;var Pt=ht.apply(null,arguments);return bt._fullLayout._guiEditing=!1,Pt}}var Bt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],re=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Yt(ht,bt){for(var Pt=0;Pt<bt.length;Pt++){var Gt=bt[Pt],te=ht.match(Gt.pattern);if(te){var ne=te[1]||"";return{head:ne,tail:ht.substr(ne.length+1),attr:Gt.attr}}}}function he(ht,bt){var Pt=T(bt,ht).get();if(Pt!==void 0)return Pt;var Gt=ht.split(".");for(Gt.pop();Gt.length>1;)if(Gt.pop(),Pt=T(bt,Gt.join(".")+".uirevision").get(),Pt!==void 0)return Pt;return bt.uirevision}function Zt(ht,bt){for(var Pt=0;Pt<bt.length;Pt++)if(bt[Pt]._fullInput.uid===ht)return Pt;return-1}function ae(ht,bt,Pt){for(var Gt=0;Gt<bt.length;Gt++)if(bt[Gt].uid===ht)return Gt;return!bt[Pt]||bt[Pt].uid?-1:Pt}function oe(ht,bt){var Pt=C.isPlainObject(ht),Gt=Array.isArray(ht);return Pt||Gt?(Pt&&C.isPlainObject(bt)||Gt&&Array.isArray(bt))&&JSON.stringify(ht)===JSON.stringify(bt):ht===bt}function ce(ht,bt,Pt,Gt){var te=Gt._preGUI,ne,je,Ne,ge,_e,De,hr,fe,Be,He,pr=[],Ze={},Xt={};for(ne in te){if(_e=Yt(ne,Bt),_e){if(Be=_e.head,He=_e.tail,je=_e.attr||Be+".uirevision",Ne=T(Gt,je).get(),ge=Ne&&he(je,bt),ge&&ge===Ne){if(De=te[ne],De===null&&(De=void 0),hr=T(bt,ne),fe=hr.get(),oe(fe,De)){fe===void 0&&He==="autorange"&&pr.push(Be),hr.set(H(T(Gt,ne).get()));continue}else if(He==="autorange"||He.substr(0,6)==="range["){var ie=te[Be+".range[0]"],pe=te[Be+".range[1]"],ke=te[Be+".autorange"];if(ke||ke===null&&ie===null&&pe===null){if(!(Be in Ze)){var Ce=T(bt,Be).get();Ze[Be]=Ce&&(Ce.autorange||Ce.autorange!==!1&&(!Ce.range||Ce.range.length!==2))}if(Ze[Be]){hr.set(H(T(Gt,ne).get()));continue}}}}}else C.warn("unrecognized GUI edit: "+ne);delete te[ne],_e&&_e.tail.substr(0,6)==="range["&&(Xt[_e.head]=1)}for(var Fe=0;Fe<pr.length;Fe++){var Re=pr[Fe];if(Xt[Re]){var be=T(bt,Re).get();be&&delete be.autorange}}var Ge=Gt._tracePreGUI;for(var Ke in Ge){var or=Ge[Ke],sr=null,zt;for(ne in or){if(!sr){var Ut=Zt(Ke,Pt);if(Ut<0){delete Ge[Ke];break}var Me=Pt[Ut];zt=Me._fullInput;var Te=ae(Ke,ht,zt.index);if(Te<0){delete Ge[Ke];break}sr=ht[Te]}if(_e=Yt(ne,re),_e){if(_e.attr?(Ne=T(Gt,_e.attr).get(),ge=Ne&&he(_e.attr,bt)):(Ne=zt.uirevision,ge=sr.uirevision,ge===void 0&&(ge=bt.uirevision)),ge&&ge===Ne&&(De=or[ne],De===null&&(De=void 0),hr=T(sr,ne),fe=hr.get(),oe(fe,De))){hr.set(H(T(zt,ne).get()));continue}}else C.warn("unrecognized GUI edit: "+ne+" in trace uid "+Ke);delete or[ne]}}}function ue(ht,bt,Pt,Gt){var te,ne;function je(){return U.addFrames(ht,te)}ht=C.getGraphDiv(ht),x.clearPromiseQueue(ht);var Ne=ht._fullData,ge=ht._fullLayout;if(!C.isPlotDiv(ht)||!Ne||!ge)ne=U.newPlot(ht,bt,Pt,Gt);else{if(C.isPlainObject(bt)){var _e=bt;bt=_e.data,Pt=_e.layout,Gt=_e.config,te=_e.frames}var De=!1;if(Gt){var hr=C.extendDeep({},ht._context);ht._context=void 0,D(ht,Gt),De=$t(hr,ht._context)}ht.data=bt||[],x.cleanData(ht.data),ht.layout=Pt||{},x.cleanLayout(ht.layout),ce(ht.data,ht.layout,Ne,ge),l.supplyDefaults(ht,{skipUpdateCalc:!0});var fe=ht._fullData,Be=ht._fullLayout,He=Be.datarevision===void 0,pr=Be.transition,Ze=Tt(ht,ge,Be,He,pr),Xt=Ze.newDataRevision,ie=ye(ht,Ne,fe,He,pr,Xt);if(Ot(ht)&&(Ze.layoutReplot=!0),ie.calc||Ze.calc){ht.calcdata=void 0;for(var pe=Object.getOwnPropertyNames(Be),ke=0;ke<pe.length;ke++){var Ce=pe[ke],Fe=Ce.substring(0,5);if(Fe==="xaxis"||Fe==="yaxis"){var Re=Be[Ce]._emptyCategories;Re&&Re()}}}else l.supplyDefaultsUpdateCalc(ht.calcdata,fe);var be=[];if(te&&(ht._transitionData={},l.createTransitionData(ht),be.push(je)),Be.transition&&!De&&(ie.anim||Ze.anim))Ze.ticks&&be.push(k.doTicksRelayout),l.doCalcdata(ht),k.doAutoRangeAndConstraints(ht),be.push(function(){return l.transitionFromReact(ht,ie,Ze,ge)});else if(ie.fullReplot||Ze.layoutReplot||De)ht._fullLayout._skipDefaults=!0,be.push(U._doPlot);else{for(var Ge in Ze.arrays){var Ke=Ze.arrays[Ge];if(Ke.length){var or=r.getComponentMethod(Ge,"drawOne");if(or!==C.noop)for(var sr=0;sr<Ke.length;sr++)or(ht,Ke[sr]);else{var zt=r.getComponentMethod(Ge,"draw");if(zt===C.noop)throw new Error("cannot draw components: "+Ge);zt(ht)}}}be.push(l.previousPromises),ie.style&&be.push(k.doTraceStyle),(ie.colorbars||Ze.colorbars)&&be.push(k.doColorBars),Ze.legend&&be.push(k.doLegend),Ze.layoutstyle&&be.push(k.layoutStyles),Ze.axrange&&Ct(be),Ze.ticks&&be.push(k.doTicksRelayout),Ze.modebar&&be.push(k.doModeBar),Ze.camera&&be.push(k.doCamera),be.push(S)}be.push(l.rehover,l.redrag,l.reselect),ne=C.syncOrAsync(be,ht),(!ne||!ne.then)&&(ne=Promise.resolve(ht))}return ne.then(function(){return ht.emit("plotly_react",{data:bt,layout:Pt}),ht})}function ye(ht,bt,Pt,Gt,te,ne){var je=bt.length===Pt.length;if(!te&&!je)return{fullReplot:!0,calc:!0};var Ne=y.traceFlags();Ne.arrays={},Ne.nChanges=0,Ne.nChangesAnim=0;var ge,_e;function De(Be){var He=e.getTraceValObject(_e,Be);return!_e._module.animatable&&He.anim&&(He.anim=!1),He}var hr={getValObject:De,flags:Ne,immutable:Gt,transition:te,newDataRevision:ne,gd:ht},fe={};for(ge=0;ge<bt.length;ge++)if(Pt[ge]){if(_e=Pt[ge]._fullInput,l.hasMakesDataTransform(_e)&&(_e=Pt[ge]),fe[_e.uid])continue;fe[_e.uid]=1,Ft(bt[ge]._fullInput,_e,[],hr)}return(Ne.calc||Ne.plot)&&(Ne.fullReplot=!0),te&&Ne.nChanges&&Ne.nChangesAnim&&(Ne.anim=Ne.nChanges===Ne.nChangesAnim&&je?"all":"some"),Ne}function Tt(ht,bt,Pt,Gt,te){var ne=y.layoutFlags();ne.arrays={},ne.rangesAltered={},ne.nChanges=0,ne.nChangesAnim=0;function je(ge){return e.getLayoutValObject(Pt,ge)}var Ne={getValObject:je,flags:ne,immutable:Gt,transition:te,gd:ht};return Ft(bt,Pt,[],Ne),(ne.plot||ne.calc)&&(ne.layoutReplot=!0),te&&ne.nChanges&&ne.nChangesAnim&&(ne.anim=ne.nChanges===ne.nChangesAnim?"all":"some"),ne}function Ft(ht,bt,Pt,Gt){var te,ne,je,Ne=Gt.getValObject,ge=Gt.flags,_e=Gt.immutable,De=Gt.inArray,hr=Gt.arrayIndex;function fe(){var Ut=te.editType;if(De&&Ut.indexOf("arraydraw")!==-1){C.pushUnique(ge.arrays[De],hr);return}y.update(ge,te),Ut!=="none"&&ge.nChanges++,Gt.transition&&te.anim&&ge.nChangesAnim++,(gt.test(je)||mt.test(je))&&(ge.rangesAltered[Pt[0]]=1),vt.test(je)&&T(bt,"_inputDomain").set(null),ne==="datarevision"&&(ge.newDataRevision=1)}function Be(Ut){return Ut.valType==="data_array"||Ut.arrayOk}for(ne in ht){if(ge.calc&&!Gt.transition)return;var He=ht[ne],pr=bt[ne],Ze=Pt.concat(ne);if(je=Ze.join("."),!(ne.charAt(0)==="_"||typeof He=="function"||He===pr)){if((ne==="tick0"||ne==="dtick")&&Pt[0]!=="geo"){var Xt=bt.tickmode;if(Xt==="auto"||Xt==="array"||!Xt)continue}if(!(ne==="range"&&bt.autorange)&&!((ne==="zmin"||ne==="zmax")&&bt.type==="contourcarpet")&&(te=Ne(Ze),!!te&&!(te._compareAsJSON&&JSON.stringify(He)===JSON.stringify(pr)))){var ie=te.valType,pe,ke=Be(te),Ce=Array.isArray(He),Fe=Array.isArray(pr);if(Ce&&Fe){var Re="_input_"+ne,be=ht[Re],Ge=bt[Re];if(Array.isArray(be)&&be===Ge)continue}if(pr===void 0)ke&&Ce?ge.calc=!0:fe();else if(te._isLinkedToArray){var Ke=[],or=!1;De||(ge.arrays[ne]=Ke);var sr=Math.min(He.length,pr.length),zt=Math.max(He.length,pr.length);if(sr!==zt)if(te.editType==="arraydraw")or=!0;else{fe();continue}for(pe=0;pe<sr;pe++)Ft(He[pe],pr[pe],Ze.concat(pe),C.extendFlat({inArray:ne,arrayIndex:pe},Gt));if(or)for(pe=sr;pe<zt;pe++)Ke.push(pe)}else!ie&&C.isPlainObject(He)?Ft(He,pr,Ze,Gt):ke?Ce&&Fe?(_e&&(ge.calc=!0),(_e||Gt.newDataRevision)&&fe()):Ce!==Fe?ge.calc=!0:fe():Ce&&Fe?(He.length!==pr.length||String(He)!==String(pr))&&fe():fe()}}}for(ne in bt)if(!(ne in ht||ne.charAt(0)==="_"||typeof bt[ne]=="function"))if(te=Ne(Pt.concat(ne)),Be(te)&&Array.isArray(bt[ne])){ge.calc=!0;return}else fe()}function $t(ht,bt){var Pt;for(Pt in ht)if(Pt.charAt(0)!=="_"){var Gt=ht[Pt],te=bt[Pt];if(Gt!==te)if(C.isPlainObject(Gt)&&C.isPlainObject(te)){if($t(Gt,te))return!0}else if(Array.isArray(Gt)&&Array.isArray(te)){if(Gt.length!==te.length)return!0;for(var ne=0;ne<Gt.length;ne++)if(Gt[ne]!==te[ne])if(C.isPlainObject(Gt[ne])&&C.isPlainObject(te[ne])){if($t(Gt[ne],te[ne]))return!0}else return!0}else return!0}}function Vt(ht,bt,Pt){if(ht=C.getGraphDiv(ht),!C.isPlotDiv(ht))throw new Error("This element is not a Plotly plot: "+ht+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Gt=ht._transitionData;Gt._frameQueue||(Gt._frameQueue=[]),Pt=l.supplyAnimationDefaults(Pt);var te=Pt.transition,ne=Pt.frame;Gt._frameWaitingCnt===void 0&&(Gt._frameWaitingCnt=0);function je(_e){return Array.isArray(te)?_e>=te.length?te[0]:te[_e]:te}function Ne(_e){return Array.isArray(ne)?_e>=ne.length?ne[0]:ne[_e]:ne}function ge(_e,De){var hr=0;return function(){if(_e&&++hr===De)return _e()}}return new Promise(function(_e,De){function hr(){if(Gt._frameQueue.length!==0){for(;Gt._frameQueue.length;){var sr=Gt._frameQueue.pop();sr.onInterrupt&&sr.onInterrupt()}ht.emit("plotly_animationinterrupted",[])}}function fe(sr){if(sr.length!==0){for(var zt=0;zt<sr.length;zt++){var Ut;sr[zt].type==="byname"?Ut=l.computeFrame(ht,sr[zt].name):Ut=sr[zt].data;var Me=Ne(zt),Te=je(zt);Te.duration=Math.min(Te.duration,Me.duration);var qe={frame:Ut,name:sr[zt].name,frameOpts:Me,transitionOpts:Te};zt===sr.length-1&&(qe.onComplete=ge(_e,2),qe.onInterrupt=De),Gt._frameQueue.push(qe)}Pt.mode==="immediate"&&(Gt._lastFrameAt=-1/0),Gt._animationRaf||pr()}}function Be(){ht.emit("plotly_animated"),window.cancelAnimationFrame(Gt._animationRaf),Gt._animationRaf=null}function He(){Gt._currentFrame&&Gt._currentFrame.onComplete&&Gt._currentFrame.onComplete();var sr=Gt._currentFrame=Gt._frameQueue.shift();if(sr){var zt=sr.name?sr.name.toString():null;ht._fullLayout._currentFrame=zt,Gt._lastFrameAt=Date.now(),Gt._timeToNext=sr.frameOpts.duration,l.transition(ht,sr.frame.data,sr.frame.layout,x.coerceTraceIndices(ht,sr.frame.traces),sr.frameOpts,sr.transitionOpts).then(function(){sr.onComplete&&sr.onComplete()}),ht.emit("plotly_animatingframe",{name:zt,frame:sr.frame,animation:{frame:sr.frameOpts,transition:sr.transitionOpts}})}else Be()}function pr(){ht.emit("plotly_animating"),Gt._lastFrameAt=-1/0,Gt._timeToNext=0,Gt._runningTransitions=0,Gt._currentFrame=null;var sr=function(){Gt._animationRaf=window.requestAnimationFrame(sr),Date.now()-Gt._lastFrameAt>Gt._timeToNext&&He()};sr()}var Ze=0;function Xt(sr){return Array.isArray(te)?Ze>=te.length?sr.transitionOpts=te[Ze]:sr.transitionOpts=te[0]:sr.transitionOpts=te,Ze++,sr}var ie,pe,ke=[],Ce=bt==null,Fe=Array.isArray(bt),Re=!Ce&&!Fe&&C.isPlainObject(bt);if(Re)ke.push({type:"object",data:Xt(C.extendFlat({},bt))});else if(Ce||["string","number"].indexOf(typeof bt)!==-1)for(ie=0;ie<Gt._frames.length;ie++)pe=Gt._frames[ie],pe&&(Ce||String(pe.group)===String(bt))&&ke.push({type:"byname",name:String(pe.name),data:Xt({name:pe.name})});else if(Fe)for(ie=0;ie<bt.length;ie++){var be=bt[ie];["number","string"].indexOf(typeof be)!==-1?(be=String(be),ke.push({type:"byname",name:be,data:Xt({name:be})})):C.isPlainObject(be)&&ke.push({type:"object",data:Xt(C.extendFlat({},be))})}for(ie=0;ie<ke.length;ie++)if(pe=ke[ie],pe.type==="byname"&&!Gt._frameHash[pe.data.name]){C.warn('animate failure: frame not found: "'+pe.data.name+'"'),De();return}["next","immediate"].indexOf(Pt.mode)!==-1&&hr(),Pt.direction==="reverse"&&ke.reverse();var Ge=ht._fullLayout._currentFrame;if(Ge&&Pt.fromcurrent){var Ke=-1;for(ie=0;ie<ke.length;ie++)if(pe=ke[ie],pe.type==="byname"&&pe.name===Ge){Ke=ie;break}if(Ke>0&&Ke<ke.length-1){var or=[];for(ie=0;ie<ke.length;ie++)pe=ke[ie],(ke[ie].type!=="byname"||ie>Ke)&&or.push(pe);ke=or}}ke.length>0?fe(ke):(ht.emit("plotly_animated"),_e())})}function Nt(ht,bt,Pt){if(ht=C.getGraphDiv(ht),bt==null)return Promise.resolve();if(!C.isPlotDiv(ht))throw new Error("This element is not a Plotly plot: "+ht+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Gt,te,ne,je,Ne=ht._transitionData._frames,ge=ht._transitionData._frameHash;if(!Array.isArray(bt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+bt);var _e=Ne.length+bt.length*2,De=[],hr={};for(Gt=bt.length-1;Gt>=0;Gt--)if(C.isPlainObject(bt[Gt])){var fe=bt[Gt].name,Be=(ge[fe]||hr[fe]||{}).name,He=bt[Gt].name,pr=ge[Be]||hr[Be];Be&&He&&typeof He=="number"&&pr&&L<u&&(L++,C.warn('addFrames: overwriting frame "'+(ge[Be]||hr[Be]).name+'" with a frame whose name of type "number" also equates to "'+Be+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),L===u&&C.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),hr[fe]={name:fe},De.push({frame:l.supplyFrameDefaults(bt[Gt]),index:Pt&&Pt[Gt]!==void 0&&Pt[Gt]!==null?Pt[Gt]:_e+Gt})}De.sort(function(Re,be){return Re.index>be.index?-1:Re.index<be.index?1:0});var Ze=[],Xt=[],ie=Ne.length;for(Gt=De.length-1;Gt>=0;Gt--){if(te=De[Gt].frame,typeof te.name=="number"&&C.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!te.name)for(;ge[te.name="frame "+ht._transitionData._counter++];);if(ge[te.name]){for(ne=0;ne<Ne.length&&(Ne[ne]||{}).name!==te.name;ne++);Ze.push({type:"replace",index:ne,value:te}),Xt.unshift({type:"replace",index:ne,value:Ne[ne]})}else je=Math.max(0,Math.min(De[Gt].index,ie)),Ze.push({type:"insert",index:je,value:te}),Xt.unshift({type:"delete",index:je}),ie++}var pe=l.modifyFrames,ke=l.modifyFrames,Ce=[ht,Xt],Fe=[ht,Ze];return d&&d.add(ht,pe,Ce,ke,Fe),l.modifyFrames(ht,Ze)}function Mt(ht,bt){if(ht=C.getGraphDiv(ht),!C.isPlotDiv(ht))throw new Error("This element is not a Plotly plot: "+ht);var Pt,Gt,te=ht._transitionData._frames,ne=[],je=[];if(!bt)for(bt=[],Pt=0;Pt<te.length;Pt++)bt.push(Pt);for(bt=bt.slice(),bt.sort(),Pt=bt.length-1;Pt>=0;Pt--)Gt=bt[Pt],ne.push({type:"delete",index:Gt}),je.unshift({type:"insert",index:Gt,value:te[Gt]});var Ne=l.modifyFrames,ge=l.modifyFrames,_e=[ht,je],De=[ht,ne];return d&&d.add(ht,Ne,_e,ge,De),l.modifyFrames(ht,ne)}function Et(ht){ht=C.getGraphDiv(ht);var bt=ht._fullLayout||{},Pt=ht._fullData||[];return l.cleanPlot([],{},Pt,bt),l.purge(ht),v.purge(ht),bt._container&&bt._container.remove(),delete ht._context,ht}function Dt(ht){var bt=ht._fullLayout,Pt=ht.getBoundingClientRect();if(!C.equalDomRects(Pt,bt._lastBBox)){var Gt=bt._invTransform=C.inverseTransformMatrix(C.getFullTransformMatrix(ht));bt._invScaleX=Math.sqrt(Gt[0][0]*Gt[0][0]+Gt[0][1]*Gt[0][1]+Gt[0][2]*Gt[0][2]),bt._invScaleY=Math.sqrt(Gt[1][0]*Gt[1][0]+Gt[1][1]*Gt[1][1]+Gt[1][2]*Gt[1][2]),bt._lastBBox=Pt}}function dt(ht){var bt=M.select(ht),Pt=ht._fullLayout;if(Pt._calcInverseTransform=Dt,Pt._calcInverseTransform(ht),Pt._container=bt.selectAll(".plot-container").data([0]),Pt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Pt._paperdiv=Pt._container.selectAll(".svg-container").data([0]),Pt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Pt._glcontainer=Pt._paperdiv.selectAll(".gl-container").data([{}]),Pt._glcontainer.enter().append("div").classed("gl-container",!0),Pt._paperdiv.selectAll(".main-svg").remove(),Pt._paperdiv.select(".modebar-container").remove(),Pt._paper=Pt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Pt._toppaper=Pt._paperdiv.append("svg").classed("main-svg",!0),Pt._modebardiv=Pt._paperdiv.append("div"),delete Pt._modeBar,Pt._hoverpaper=Pt._paperdiv.append("svg").classed("main-svg",!0),!Pt._uid){var Gt={};M.selectAll("defs").each(function(){this.id&&(Gt[this.id.split("-")[1]]=1)}),Pt._uid=C.randstr(Gt)}Pt._paperdiv.selectAll(".main-svg").attr(_.svgAttrs),Pt._defs=Pt._paper.append("defs").attr("id","defs-"+Pt._uid),Pt._clips=Pt._defs.append("g").classed("clips",!0),Pt._topdefs=Pt._toppaper.append("defs").attr("id","topdefs-"+Pt._uid),Pt._topclips=Pt._topdefs.append("g").classed("clips",!0),Pt._bgLayer=Pt._paper.append("g").classed("bglayer",!0),Pt._draggers=Pt._paper.append("g").classed("draglayer",!0);var te=Pt._paper.append("g").classed("layer-below",!0);Pt._imageLowerLayer=te.append("g").classed("imagelayer",!0),Pt._shapeLowerLayer=te.append("g").classed("shapelayer",!0),Pt._cartesianlayer=Pt._paper.append("g").classed("cartesianlayer",!0),Pt._polarlayer=Pt._paper.append("g").classed("polarlayer",!0),Pt._smithlayer=Pt._paper.append("g").classed("smithlayer",!0),Pt._ternarylayer=Pt._paper.append("g").classed("ternarylayer",!0),Pt._geolayer=Pt._paper.append("g").classed("geolayer",!0),Pt._funnelarealayer=Pt._paper.append("g").classed("funnelarealayer",!0),Pt._pielayer=Pt._paper.append("g").classed("pielayer",!0),Pt._iciclelayer=Pt._paper.append("g").classed("iciclelayer",!0),Pt._treemaplayer=Pt._paper.append("g").classed("treemaplayer",!0),Pt._sunburstlayer=Pt._paper.append("g").classed("sunburstlayer",!0),Pt._indicatorlayer=Pt._toppaper.append("g").classed("indicatorlayer",!0),Pt._glimages=Pt._paper.append("g").classed("glimages",!0);var ne=Pt._toppaper.append("g").classed("layer-above",!0);Pt._imageUpperLayer=ne.append("g").classed("imagelayer",!0),Pt._shapeUpperLayer=ne.append("g").classed("shapelayer",!0),Pt._selectionLayer=Pt._toppaper.append("g").classed("selectionlayer",!0),Pt._infolayer=Pt._toppaper.append("g").classed("infolayer",!0),Pt._menulayer=Pt._toppaper.append("g").classed("menulayer",!0),Pt._zoomlayer=Pt._toppaper.append("g").classed("zoomlayer",!0),Pt._hoverlayer=Pt._hoverpaper.append("g").classed("hoverlayer",!0),Pt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ht.emit("plotly_framework")}U.animate=Vt,U.addFrames=Nt,U.deleteFrames=Mt,U.addTraces=$,U.deleteTraces=V,U.extendTraces=q,U.moveTraces=rt,U.prependTraces=Z,U.newPlot=F,U._doPlot=m,U.purge=Et,U.react=ue,U.redraw=P,U.relayout=yt,U.restyle=ot,U.setPlotConfig=w,U.update=It,U._guiRelayout=St(yt),U._guiRestyle=St(ot),U._guiUpdate=St(It),U._storeDirectGUIEdit=et},20556:function(Q){var U={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};function M(E,i){for(var C in E){var T=E[C];T.valType?i[C]=T.dflt:(i[C]||(i[C]={}),M(T,i[C]))}}M(U,t),Q.exports={configAttributes:U,dfltConfig:t}},73060:function(Q,U,t){var M=t(24040),E=t(3400),i=t(45464),C=t(64859),T=t(16672),v=t(85656),d=t(20556).configAttributes,r=t(67824),e=E.extendDeepAll,l=E.isPlainObject,n=E.isArrayOrTypedArray,s=E.nestedProperty,o=E.valObjectMeta,p="_isSubplotObj",b="_isLinkedToArray",h="_arrayAttrRegexps",_="_deprecated",a=[p,b,h,_];U.IS_SUBPLOT_OBJ=p,U.IS_LINKED_TO_ARRAY=b,U.DEPRECATED=_,U.UNDERSCORE_ATTRS=a,U.get=function(){var D={};M.allTypes.forEach(function(F){D[F]=k(F)});var P={};return Object.keys(M.transformsRegistry).forEach(function(F){P[F]=A(F)}),{defs:{valObjects:o,metaKeys:a.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:D,layout:y(),transforms:P,frames:L(),animation:u(v),config:u(d)}},U.crawl=function(D,P,F,R){var B=F||0;R=R||"",Object.keys(D).forEach(function(N){var G=D[N];if(a.indexOf(N)===-1){var X=(R?R+".":"")+N;P(G,N,D,B,X),!U.isValObject(G)&&l(G)&&N!=="impliedEdits"&&U.crawl(G,P,B+1,X)}})},U.isValObject=function(D){return D&&D.valType!==void 0},U.findArrayAttributes=function(D){var P=[],F=[],R=[],B,N;function G(Z,$,V,rt){F=F.slice(0,rt).concat([$]),R=R.slice(0,rt).concat([Z&&Z._isLinkedToArray]);var ot=Z&&(Z.valType==="data_array"||Z.arrayOk===!0)&&!(F[rt-1]==="colorbar"&&($==="ticktext"||$==="tickvals"));ot&&X(B,0,"")}function X(Z,$,V){var rt=Z[F[$]],ot=V+F[$];if($===F.length-1)n(rt)&&P.push(N+ot);else if(R[$]){if(Array.isArray(rt))for(var H=0;H<rt.length;H++)l(rt[H])&&X(rt[H],$+1,ot+"["+H+"].")}else l(rt)&&X(rt,$+1,ot+".")}B=D,N="",U.crawl(i,G),D._module&&D._module.attributes&&U.crawl(D._module.attributes,G);var J=D.transforms;if(J)for(var it=0;it<J.length;it++){var nt=J[it],q=nt._module;q&&(N="transforms["+it+"].",B=nt,U.crawl(q.attributes,G))}return P},U.getTraceValObject=function(D,P){var F=P[0],R=1,B,N;if(F==="transforms"){if(P.length===1)return i.transforms;var G=D.transforms;if(!Array.isArray(G)||!G.length)return!1;var X=P[1];if(!x(X)||X>=G.length)return!1;B=(M.transformsRegistry[G[X].type]||{}).attributes,N=B&&B[P[2]],R=3}else{var J=D._module;if(J||(J=(M.modules[D.type||i.type.dflt]||{})._module),!J)return!1;if(B=J.attributes,N=B&&B[F],!N){var it=J.basePlotModule;it&&it.attributes&&(N=it.attributes[F])}N||(N=i[F])}return f(N,P,R)},U.getLayoutValObject=function(D,P){var F=c(D,P[0]);return f(F,P,1)};function c(D,P){var F,R,B,N,G=D._basePlotModules;if(G){var X;for(F=0;F<G.length;F++){if(B=G[F],B.attrRegex&&B.attrRegex.test(P)){if(B.layoutAttrOverrides)return B.layoutAttrOverrides;!X&&B.layoutAttributes&&(X=B.layoutAttributes)}var J=B.baseLayoutAttrOverrides;if(J&&P in J)return J[P]}if(X)return X}var it=D._modules;if(it){for(F=0;F<it.length;F++)if(N=it[F].layoutAttributes,N&&P in N)return N[P]}for(R in M.componentsRegistry){if(B=M.componentsRegistry[R],B.name==="colorscale"&&P.indexOf("coloraxis")===0)return B.layoutAttributes[P];if(!B.schema&&P===B.name)return B.layoutAttributes}return P in C?C[P]:!1}function f(D,P,F){if(!D)return!1;if(D._isLinkedToArray){if(x(P[F]))F++;else if(F<P.length)return!1}for(;F<P.length;F++){var R=D[P[F]];if(l(R))D=R;else break;if(F===P.length-1)break;if(D._isLinkedToArray){if(F++,!x(P[F]))return!1}else if(D.valType==="info_array"){F++;var B=P[F];if(!x(B))return!1;var N=D.items;if(Array.isArray(N)){if(B>=N.length)return!1;if(D.dimensions===2){if(F++,P.length===F)return D;var G=P[F];if(!x(G))return!1;D=N[B][G]}else D=N[B]}else D=N}}return D}function x(D){return D===Math.round(D)&&D>=0}function k(D){var P,F;P=M.modules[D]._module,F=P.basePlotModule;var R={};R.type=null;var B=e({},i),N=e({},P.attributes);U.crawl(N,function(J,it,nt,q,Z){s(B,Z).set(void 0),J===void 0&&s(N,Z).set(void 0)}),e(R,B),M.traceIs(D,"noOpacity")&&delete R.opacity,M.traceIs(D,"showLegend")||(delete R.showlegend,delete R.legendgroup),M.traceIs(D,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),P.selectPoints||delete R.selectedpoints,e(R,N),F.attributes&&e(R,F.attributes),R.type=D;var G={meta:P.meta||{},categories:P.categories||{},animatable:!!P.animatable,type:D,attributes:u(R)};if(P.layoutAttributes){var X={};e(X,P.layoutAttributes),G.layoutAttributes=u(X)}return P.animatable||U.crawl(G,function(J){U.isValObject(J)&&"anim"in J&&delete J.anim}),G}function y(){var D={},P,F;e(D,C);for(P in M.subplotsRegistry)if(F=M.subplotsRegistry[P],!!F.layoutAttributes)if(Array.isArray(F.attr))for(var R=0;R<F.attr.length;R++)I(D,F,F.attr[R]);else{var B=F.attr==="subplot"?F.name:F.attr;I(D,F,B)}for(P in M.componentsRegistry){F=M.componentsRegistry[P];var N=F.schema;if(N&&(N.subplots||N.layout)){var G=N.subplots;if(G&&G.xaxis&&!G.yaxis)for(var X in G.xaxis)delete D.yaxis[X];delete D.xaxis.shift,delete D.xaxis.autoshift}else F.name==="colorscale"?e(D,F.layoutAttributes):F.layoutAttributes&&O(D,F.layoutAttributes,F.name)}return{layoutAttributes:u(D)}}function A(D){var P=M.transformsRegistry[D],F=e({},P.attributes);return Object.keys(M.componentsRegistry).forEach(function(R){var B=M.componentsRegistry[R];B.schema&&B.schema.transforms&&B.schema.transforms[D]&&Object.keys(B.schema.transforms[D]).forEach(function(N){O(F,B.schema.transforms[D][N],N)})}),{attributes:u(F)}}function L(){var D={frames:e({},T)};return u(D),D.frames}function u(D){return m(D),S(D),w(D),D}function m(D){function P(R){return{valType:"string",editType:"none"}}function F(R,B,N){U.isValObject(R)?(R.arrayOk===!0||R.valType==="data_array")&&(N[B+"src"]=P()):l(R)&&(R.role="object")}U.crawl(D,F)}function S(D){function P(F,R,B){if(F){var N=F[b];N&&(delete F[b],B[R]={items:{}},B[R].items[N]=F,B[R].role="object")}}U.crawl(D,P)}function w(D){function P(F){for(var R in F)if(l(F[R]))P(F[R]);else if(Array.isArray(F[R]))for(var B=0;B<F[R].length;B++)P(F[R][B]);else F[R]instanceof RegExp&&(F[R]=F[R].toString())}P(D)}function I(D,P,F){var R=s(D,F),B=e({},P.layoutAttributes);B[p]=!0,R.set(B)}function O(D,P,F){var R=s(D,F);R.set(e(R.get()||{},P))}},31780:function(Q,U,t){var M=t(3400),E=t(45464),i="templateitemname",C={name:{valType:"string",editType:"none"}};C[i]={valType:"string",editType:"calc"},U.templatedArray=function(d,r){return r._isLinkedToArray=d,r.name=C.name,r[i]=C[i],r},U.traceTemplater=function(d){var r={},e,l;for(e in d)l=d[e],Array.isArray(l)&&l.length&&(r[e]=0);function n(s){e=M.coerce(s,{},E,"type");var o={type:e,_template:null};if(e in r){l=d[e];var p=r[e]%l.length;r[e]++,o._template=l[p]}return o}return{newTrace:n}},U.newContainer=function(d,r,e){var l=d._template,n=l&&(l[r]||e&&l[e]);M.isPlainObject(n)||(n=null);var s=d[r]={_template:n};return s},U.arrayTemplater=function(d,r,e){var l=d._template,n=l&&l[v(r)],s=l&&l[r];(!Array.isArray(s)||!s.length)&&(s=[]);var o={};function p(h){var _={name:h.name,_input:h},a=_[i]=h[i];if(!T(a))return _._template=n,_;for(var c=0;c<s.length;c++){var f=s[c];if(f.name===a)return o[a]=1,_._template=f,_}return _[e]=h[e]||!1,_._template=!1,_}function b(){for(var h=[],_=0;_<s.length;_++){var a=s[_],c=a.name;if(T(c)&&!o[c]){var f={_template:a,name:c,_input:{_templateitemname:c}};f[i]=a[i],h.push(f),o[c]=1}}return h}return{newItem:p,defaultItems:b}};function T(d){return d&&typeof d=="string"}function v(d){var r=d.length-1;return d.charAt(r)!=="s"&&M.warn("bad argument to arrayDefaultKey: "+d),d.substr(0,d.length-1)+"defaults"}U.arrayDefaultKey=v,U.arrayEditor=function(d,r,e){var l=(M.nestedProperty(d,r).get()||[]).length,n=e._index,s=n>=l&&(e._input||{})._templateitemname;s&&(n=l);var o=r+"["+n+"]",p;function b(){p={},s&&(p[o]={},p[o][i]=s)}b();function h(f,x){p[f]=x}function _(f,x){s?M.nestedProperty(p[o],f).set(x):p[o+"."+f]=x}function a(){var f=p;return b(),f}function c(f,x){f&&_(f,x);var k=a();for(var y in k)M.nestedProperty(d,y).set(k[y])}return{modifyBase:h,modifyItem:_,getUpdateObj:a,applyUpdate:c}}},39172:function(Q,U,t){var M=t(33428),E=t(24040),i=t(7316),C=t(3400),T=t(72736),v=t(73696),d=t(76308),r=t(43616),e=t(81668),l=t(45460),n=t(54460),s=t(84284),o=t(71888),p=o.enforce,b=o.clean,h=t(19280).doAutoRange,_="start",a="middle",c="end";U.layoutStyles=function(F){return C.syncOrAsync([i.doAutoMargin,x],F)};function f(F,R,B){for(var N=0;N<B.length;N++){var G=B[N][0],X=B[N][1];if(!(G[0]>=F[1]||G[1]<=F[0])&&X[0]<R[1]&&X[1]>R[0])return!0}return!1}function x(F){var R=F._fullLayout,B=R._size,N=B.p,G=n.list(F,"",!0),X,J,it,nt,q,Z;if(R._paperdiv.style({width:F._context.responsive&&R.autosize&&!F._context._hasZeroWidth&&!F.layout.width?"100%":R.width+"px",height:F._context.responsive&&R.autosize&&!F._context._hasZeroHeight&&!F.layout.height?"100%":R.height+"px"}).selectAll(".main-svg").call(r.setSize,R.width,R.height),F._context.setBackground(F,R.paper_bgcolor),U.drawMainTitle(F),l.manage(F),!R._has("cartesian"))return i.previousPromises(F);function $(Et,Dt,dt){var ht=Et._lw/2;if(Et._id.charAt(0)==="x"){if(Dt){if(dt==="top")return Dt._offset-N-ht}else return B.t+B.h*(1-(Et.position||0))+ht%1;return Dt._offset+Dt._length+N+ht}if(Dt){if(dt==="right")return Dt._offset+Dt._length+N+ht}else return B.l+B.w*(Et.position||0)+ht%1;return Dt._offset-N-ht}for(X=0;X<G.length;X++){nt=G[X];var V=nt._anchorAxis;nt._linepositions={},nt._lw=r.crispRound(F,nt.linewidth,1),nt._mainLinePosition=$(nt,V,nt.side),nt._mainMirrorPosition=nt.mirror&&V?$(nt,V,s.OPPOSITE_SIDE[nt.side]):null}var rt=[],ot=[],H=[],Y=d.opacity(R.paper_bgcolor)===1&&d.opacity(R.plot_bgcolor)===1&&R.paper_bgcolor===R.plot_bgcolor;for(J in R._plots)if(it=R._plots[J],it.mainplot)it.bg&&it.bg.remove(),it.bg=void 0;else{var at=it.xaxis.domain,et=it.yaxis.domain,ct=it.plotgroup;if(f(at,et,H)){var ft=ct.node(),yt=it.bg=C.ensureSingle(ct,"rect","bg");ft.insertBefore(yt.node(),ft.childNodes[0]),ot.push(J)}else ct.select("rect.bg").remove(),H.push([at,et]),Y||(rt.push(J),ot.push(J))}var xt=R._bgLayer.selectAll(".bg").data(rt);for(xt.enter().append("rect").classed("bg",!0),xt.exit().remove(),xt.each(function(Et){R._plots[Et].bg=M.select(this)}),X=0;X<ot.length;X++)it=R._plots[ot[X]],q=it.xaxis,Z=it.yaxis,it.bg&&q._offset!==void 0&&Z._offset!==void 0&&it.bg.call(r.setRect,q._offset-N,Z._offset-N,q._length+2*N,Z._length+2*N).call(d.fill,R.plot_bgcolor).style("stroke-width",0);if(!R._hasOnlyLargeSploms)for(J in R._plots){it=R._plots[J],q=it.xaxis,Z=it.yaxis;var Ct=it.clipId="clip"+R._uid+J+"plot",gt=C.ensureSingleById(R._clips,"clipPath",Ct,function(Et){Et.classed("plotclip",!0).append("rect")});it.clipRect=gt.select("rect").attr({width:q._length,height:Z._length}),r.setTranslate(it.plot,q._offset,Z._offset);var mt,vt;it._hasClipOnAxisFalse?(mt=null,vt=Ct):(mt=Ct,vt=null),r.setClipUrl(it.plot,mt,F),it.layerClipId=vt}var At,Ot,It,St,Bt,re,Yt,he,Zt,ae,oe,ce,ue;function ye(Et){return"M"+At+","+Et+"H"+Ot}function Tt(Et){return"M"+q._offset+","+Et+"h"+q._length}function Ft(Et){return"M"+Et+","+he+"V"+Yt}function $t(Et){return Z._shift!==void 0&&(Et+=Z._shift),"M"+Et+","+Z._offset+"v"+Z._length}function Vt(Et,Dt,dt){if(!Et.showline||J!==Et._mainSubplot)return"";if(!Et._anchorAxis)return dt(Et._mainLinePosition);var ht=Dt(Et._mainLinePosition);return Et.mirror&&(ht+=Dt(Et._mainMirrorPosition)),ht}for(J in R._plots){it=R._plots[J],q=it.xaxis,Z=it.yaxis;var Nt="M0,0";k(q,J)&&(Bt=A(q,"left",Z,G),At=q._offset-(Bt?N+Bt:0),re=A(q,"right",Z,G),Ot=q._offset+q._length+(re?N+re:0),It=$(q,Z,"bottom"),St=$(q,Z,"top"),ue=!q._anchorAxis||J!==q._mainSubplot,ue&&(q.mirror==="allticks"||q.mirror==="all")&&(q._linepositions[J]=[It,St]),Nt=Vt(q,ye,Tt),ue&&q.showline&&(q.mirror==="all"||q.mirror==="allticks")&&(Nt+=ye(It)+ye(St)),it.xlines.style("stroke-width",q._lw+"px").call(d.stroke,q.showline?q.linecolor:"rgba(0,0,0,0)")),it.xlines.attr("d",Nt);var Mt="M0,0";k(Z,J)&&(oe=A(Z,"bottom",q,G),Yt=Z._offset+Z._length+(oe?N:0),ce=A(Z,"top",q,G),he=Z._offset-(ce?N:0),Zt=$(Z,q,"left"),ae=$(Z,q,"right"),ue=!Z._anchorAxis||J!==Z._mainSubplot,ue&&(Z.mirror==="allticks"||Z.mirror==="all")&&(Z._linepositions[J]=[Zt,ae]),Mt=Vt(Z,Ft,$t),ue&&Z.showline&&(Z.mirror==="all"||Z.mirror==="allticks")&&(Mt+=Ft(Zt)+Ft(ae)),it.ylines.style("stroke-width",Z._lw+"px").call(d.stroke,Z.showline?Z.linecolor:"rgba(0,0,0,0)")),it.ylines.attr("d",Mt)}return n.makeClipPaths(F),i.previousPromises(F)}function k(F,R){return(F.ticks||F.showline)&&(R===F._mainSubplot||F.mirror==="all"||F.mirror==="allticks")}function y(F,R,B){if(!B.showline||!B._lw)return!1;if(B.mirror==="all"||B.mirror==="allticks")return!0;var N=B._anchorAxis;if(!N)return!1;var G=s.FROM_BL[R];return B.side===R?N.domain[G]===F.domain[G]:B.mirror&&N.domain[1-G]===F.domain[1-G]}function A(F,R,B,N){if(y(F,R,B))return B._lw;for(var G=0;G<N.length;G++){var X=N[G];if(X._mainAxis===B._mainAxis&&y(F,R,X))return X._lw}return 0}U.drawMainTitle=function(F){var R=F._fullLayout.title,B=F._fullLayout,N=D(B),G=P(B),X=I(B,G),J=w(B,N);if(e.draw(F,"gtitle",{propContainer:B,propName:"title.text",placeholder:B._dfltTitle.plot,attributes:{x:J,y:X,"text-anchor":N,dy:G}}),R.text&&R.automargin){var it=M.selectAll(".gtitle"),nt=r.bBox(it.node()).height,q=m(F,R,nt);if(q>0){S(F,X,q,nt),it.attr({x:J,y:X,"text-anchor":N,dy:O(R.yanchor)}).call(T.positionText,J,X);var Z=(R.text.match(T.BR_TAG_ALL)||[]).length;if(Z){var $=s.LINE_SPACING*Z+s.MID_SHIFT;R.y===0&&($=-$),it.selectAll(".line").each(function(){var V=+this.getAttribute("dy").slice(0,-2)-$+"em";this.setAttribute("dy",V)})}}}};function L(F,R,B,N,G){var X=R.yref==="paper"?F._fullLayout._size.h:F._fullLayout.height,J=C.isTopAnchor(R)?N:N-G,it=B==="b"?X-J:J;return C.isTopAnchor(R)&&B==="t"||C.isBottomAnchor(R)&&B==="b"?!1:it<G}function u(F,R,B,N,G){var X=0;return B==="middle"&&(X+=G/2),F==="t"?(B==="top"&&(X+=G),X+=N-R*N):(B==="bottom"&&(X+=G),X+=R*N),X}function m(F,R,B){var N=R.y,G=R.yanchor,X=N>.5?"t":"b",J=F._fullLayout.margin[X],it=0;return R.yref==="paper"?it=B+R.pad.t+R.pad.b:R.yref==="container"&&(it=u(X,N,G,F._fullLayout.height,B)+R.pad.t+R.pad.b),it>J?it:0}function S(F,R,B,N){var G="title.automargin",X=F._fullLayout.title,J=X.y>.5?"t":"b",it={x:X.x,y:X.y,t:0,b:0},nt={};X.yref==="paper"&&L(F,X,J,R,N)?it[J]=B:X.yref==="container"&&(nt[J]=B,F._fullLayout._reservedMargin[G]=nt),i.allowAutoMargin(F,G),i.autoMargin(F,G,it)}function w(F,R){var B=F.title,N=F._size,G=0;switch(R===_?G=B.pad.l:R===c&&(G=-B.pad.r),B.xref){case"paper":return N.l+N.w*B.x+G;case"container":default:return F.width*B.x+G}}function I(F,R){var B=F.title,N=F._size,G=0;if(R==="0em"||!R?G=-B.pad.b:R===s.CAP_SHIFT+"em"&&(G=B.pad.t),B.y==="auto")return N.t/2;switch(B.yref){case"paper":return N.t+N.h-N.h*B.y+G;case"container":default:return F.height-F.height*B.y+G}}function O(F){return F==="top"?s.CAP_SHIFT+.3+"em":F==="bottom"?"-0.3em":s.MID_SHIFT+"em"}function D(F){var R=F.title,B=a;return C.isRightAnchor(R)?B=c:C.isLeftAnchor(R)&&(B=_),B}function P(F){var R=F.title,B="0em";return C.isTopAnchor(R)?B=s.CAP_SHIFT+"em":C.isMiddleAnchor(R)&&(B=s.MID_SHIFT+"em"),B}U.doTraceStyle=function(F){var R=F.calcdata,B=[],N;for(N=0;N<R.length;N++){var G=R[N],X=G[0]||{},J=X.trace||{},it=J._module||{},nt=it.arraysToCalcdata;nt&&nt(G,J);var q=it.editStyle;q&&B.push({fn:q,cd0:X})}if(B.length){for(N=0;N<B.length;N++){var Z=B[N];Z.fn(F,Z.cd0)}v(F),U.redrawReglTraces(F)}return i.style(F),E.getComponentMethod("legend","draw")(F),i.previousPromises(F)},U.doColorBars=function(F){return E.getComponentMethod("colorbar","draw")(F),i.previousPromises(F)},U.layoutReplot=function(F){var R=F.layout;return F.layout=void 0,E.call("_doPlot",F,"",R)},U.doLegend=function(F){return E.getComponentMethod("legend","draw")(F),i.previousPromises(F)},U.doTicksRelayout=function(F){return n.draw(F,"redraw"),F._fullLayout._hasOnlyLargeSploms&&(E.subplotsRegistry.splom.updateGrid(F),v(F),U.redrawReglTraces(F)),U.drawMainTitle(F),i.previousPromises(F)},U.doModeBar=function(F){var R=F._fullLayout;l.manage(F);for(var B=0;B<R._basePlotModules.length;B++){var N=R._basePlotModules[B].updateFx;N&&N(F)}return i.previousPromises(F)},U.doCamera=function(F){for(var R=F._fullLayout,B=R._subplots.gl3d,N=0;N<B.length;N++){var G=R[B[N]],X=G._scene;X.setViewport(G)}},U.drawData=function(F){var R=F._fullLayout;v(F);for(var B=R._basePlotModules,N=0;N<B.length;N++)B[N].plot(F);return U.redrawReglTraces(F),i.style(F),E.getComponentMethod("selections","draw")(F),E.getComponentMethod("shapes","draw")(F),E.getComponentMethod("annotations","draw")(F),E.getComponentMethod("images","draw")(F),R._replotting=!1,i.previousPromises(F)},U.redrawReglTraces=function(F){var R=F._fullLayout;if(R._has("regl")){var B=F._fullData,N=[],G=[],X,J;for(R._hasOnlyLargeSploms&&R._splomGrid.draw(),X=0;X<B.length;X++){var it=B[X];it.visible===!0&&it._length!==0&&(it.type==="splom"?R._splomScenes[it.uid].draw():it.type==="scattergl"?C.pushUnique(N,it.xaxis+it.yaxis):it.type==="scatterpolargl"&&C.pushUnique(G,it.subplot))}for(X=0;X<N.length;X++)J=R._plots[N[X]],J._scene&&J._scene.draw();for(X=0;X<G.length;X++)J=R[G[X]]._subplot,J._scene&&J._scene.draw()}},U.doAutoRangeAndConstraints=function(F){for(var R=n.list(F,"",!0),B,N={},G=0;G<R.length;G++)if(B=R[G],!N[B._id]){N[B._id]=1,b(F,B),h(F,B);var X=B._matchGroup;if(X)for(var J in X){var it=n.getFromId(F,J);h(F,it,B.range),N[J]=1}}p(F)},U.finalDraw=function(F){E.getComponentMethod("rangeslider","draw")(F),E.getComponentMethod("rangeselector","draw")(F)},U.drawMarginPushers=function(F){E.getComponentMethod("legend","draw")(F),E.getComponentMethod("rangeselector","draw")(F),E.getComponentMethod("sliders","draw")(F),E.getComponentMethod("updatemenus","draw")(F),E.getComponentMethod("colorbar","draw")(F)}},94828:function(Q,U,t){var M=t(3400),E=M.isPlainObject,i=t(73060),C=t(7316),T=t(45464),v=t(31780),d=t(20556).dfltConfig;U.makeTemplate=function(h){h=M.isPlainObject(h)?h:M.getGraphDiv(h),h=M.extendDeep({_context:d},{data:h.data,layout:h.layout}),C.supplyDefaults(h);var _=h.data||[],a=h.layout||{};a._basePlotModules=h._fullLayout._basePlotModules,a._modules=h._fullLayout._modules;var c={data:{},layout:{}};_.forEach(function(w){var I={};l(w,I,s.bind(null,w));var O=M.coerce(w,{},T,"type"),D=c.data[O];D||(D=c.data[O]=[]),D.push(I)}),l(a,c.layout,n.bind(null,a)),delete c.layout.template;var f=a.template;if(E(f)){var x=f.layout,k,y,A,L,u,m;E(x)&&r(x,c.layout);var S=f.data;if(E(S)){for(y in c.data)if(A=S[y],Array.isArray(A)){for(u=c.data[y],m=u.length,L=A.length,k=0;k<m;k++)r(A[k%L],u[k]);for(k=m;k<L;k++)u.push(M.extendDeep({},A[k]))}for(y in S)y in c.data||(c.data[y]=M.extendDeep([],S[y]))}}return c};function r(h,_){h=M.extendDeep({},h);var a=Object.keys(h).sort(),c,f;function x(u,m,S){if(E(m)&&E(u))r(u,m);else if(Array.isArray(m)&&Array.isArray(u)){var w=v.arrayTemplater({_template:h},S);for(f=0;f<m.length;f++){var I=m[f],O=w.newItem(I)._template;O&&r(O,I)}var D=w.defaultItems();for(f=0;f<D.length;f++)m.push(D[f]._template);for(f=0;f<m.length;f++)delete m[f].templateitemname}}for(c=0;c<a.length;c++){var k=a[c],y=h[k];if(k in _?x(y,_[k],k):_[k]=y,e(k)===k)for(var A in _){var L=e(A);A!==L&&L===k&&!(A in h)&&x(y,_[A],k)}}}function e(h){return h.replace(/[0-9]+$/,"")}function l(h,_,a,c,f){var x=f&&a(f);for(var k in h){var y=h[k],A=o(h,k,c),L=o(h,k,f),u=a(L);if(!u){var m=e(k);m!==k&&(L=o(h,m,f),u=a(L))}if(!(x&&x===u)&&!(!u||u._noTemplating||u.valType==="data_array"||u.arrayOk&&Array.isArray(y)))if(!u.valType&&E(y))l(y,_,a,A,L);else if(u._isLinkedToArray&&Array.isArray(y))for(var S=!1,w=0,I={},O=0;O<y.length;O++){var D=y[O];if(E(D)){var P=D.name;if(P)I[P]||(l(D,_,a,o(y,w,A),o(y,w,L)),w++,I[P]=1);else if(!S){var F=v.arrayDefaultKey(k),R=o(h,F,c),B=o(y,w,A);l(D,_,a,B,o(y,w,L));var N=M.nestedProperty(_,B),G=M.nestedProperty(_,R);G.set(N.get()),N.set(null),S=!0}}}else{var X=M.nestedProperty(_,A);X.set(y)}}}function n(h,_){return i.getLayoutValObject(h,M.nestedProperty({},_).parts)}function s(h,_){return i.getTraceValObject(h,M.nestedProperty({},_).parts)}function o(h,_,a){var c;return a?Array.isArray(h)?c=a+"["+_+"]":c=a+"."+_:c=_,c}U.validateTemplate=function(h,_){var a=M.extendDeep({},{_context:d,data:h.data,layout:h.layout}),c=a.layout||{};E(_)||(_=c.template||{});var f=_.layout,x=_.data,k=[];a.layout=c,a.layout.template=_,C.supplyDefaults(a);var y=a._fullLayout,A=a._fullData,L={};function u(R,B){for(var N in R)if(N.charAt(0)!=="_"&&E(R[N])){var G=e(N),X=[],J;for(J=0;J<B.length;J++)X.push(o(R,N,B[J])),G!==N&&X.push(o(R,G,B[J]));for(J=0;J<X.length;J++)L[X[J]]=1;u(R[N],X)}}function m(R,B){for(var N in R)if(N.indexOf("defaults")===-1&&E(R[N])){var G=o(R,N,B);L[G]?m(R[N],G):k.push({code:"unused",path:G})}}if(E(f)?(u(y,["layout"]),m(f,"layout")):k.push({code:"layout"}),!E(x))k.push({code:"data"});else{for(var S={},w,I=0;I<A.length;I++){var O=A[I];w=O.type,S[w]=(S[w]||0)+1,O._fullInput._template||k.push({code:"missing",index:O._fullInput.index,traceType:w})}for(w in x){var D=x[w].length,P=S[w]||0;D>P?k.push({code:"unused",traceType:w,templateCount:D,dataCount:P}):P>D&&k.push({code:"reused",traceType:w,templateCount:D,dataCount:P})}}function F(R,B){for(var N in R)if(N.charAt(0)!=="_"){var G=R[N],X=o(R,N,B);E(G)?(Array.isArray(R)&&G._template===!1&&G.templateitemname&&k.push({code:"missing",path:X,templateitemname:G.templateitemname}),F(G,X)):Array.isArray(G)&&p(G)&&F(G,X)}}if(F({data:A,layout:y},""),k.length)return k.map(b)};function p(h){for(var _=0;_<h.length;_++)if(E(h[_]))return!0}function b(h){var _;switch(h.code){case"data":_="The template has no key data.";break;case"layout":_="The template has no key layout.";break;case"missing":h.path?_="There are no templates for item "+h.path+" with name "+h.templateitemname:_="There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":h.path?_="The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?_="Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":_="The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":_="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type.";break}return h.msg=_,h}},67024:function(Q,U,t){var M=t(38248),E=t(36424),i=t(7316),C=t(3400),T=t(81792),v=t(37164),d=t(63268),r=t(25788).version,e={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function l(n,s){s=s||{};var o,p,b,h;C.isPlainObject(n)?(o=n.data||[],p=n.layout||{},b=n.config||{},h={}):(n=C.getGraphDiv(n),o=C.extendDeep([],n.data),p=C.extendDeep({},n.layout),b=n._context,h=n._fullLayout||{});function _(P){return!(P in s)||C.validate(s[P],e[P])}if(!_("width")&&s.width!==null||!_("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!_("format"))throw new Error("Export format is not "+C.join2(e.format.values,", "," or ")+".");var a={};function c(P,F){return C.coerce(s,a,e,P,F)}var f=c("format"),x=c("width"),k=c("height"),y=c("scale"),A=c("setBackground"),L=c("imageDataOnly"),u=document.createElement("div");u.style.position="absolute",u.style.left="-5000px",document.body.appendChild(u);var m=C.extendFlat({},p);x?m.width=x:s.width===null&&M(h.width)&&(m.width=h.width),k?m.height=k:s.height===null&&M(h.height)&&(m.height=h.height);var S=C.extendFlat({},b,{_exportedPlot:!0,staticPlot:!0,setBackground:A}),w=T.getRedrawFunc(u);function I(){return new Promise(function(P){setTimeout(P,T.getDelay(u._fullLayout))})}function O(){return new Promise(function(P,F){var R=v(u,f,y),B=u._fullLayout.width,N=u._fullLayout.height;function G(){E.purge(u),document.body.removeChild(u)}if(f==="full-json"){var X=i.graphJson(u,!1,"keepdata","object",!0,!0);return X.version=r,X=JSON.stringify(X),G(),P(L?X:T.encodeJSON(X))}if(G(),f==="svg")return P(L?R:T.encodeSVG(R));var J=document.createElement("canvas");J.id=C.randstr(),d({format:f,width:B,height:N,scale:y,canvas:J,svg:R,promise:!0}).then(P).catch(F)})}function D(P){return L?P.replace(T.IMAGE_URL_PREFIX,""):P}return new Promise(function(P,F){E.newPlot(u,o,m,S).then(w).then(I).then(O).then(function(R){P(D(R))}).catch(function(R){F(R)})})}Q.exports=l},21480:function(Q,U,t){var M=t(3400),E=t(7316),i=t(73060),C=t(20556).dfltConfig,T=M.isPlainObject,v=Array.isArray,d=M.isArrayOrTypedArray;Q.exports=function(a,c){a===void 0&&(a=[]),c===void 0&&(c={});var f=i.get(),x=[],k={_context:M.extendFlat({},C)},y,A;v(a)?(k.data=M.extendDeep([],a),y=a):(k.data=[],y=[],x.push(s("array","data"))),T(c)?(k.layout=M.extendDeep({},c),A=c):(k.layout={},A={},arguments.length>1&&x.push(s("object","layout"))),E.supplyDefaults(k);for(var L=k._fullData,u=y.length,m=0;m<u;m++){var S=y[m],w=["data",m];if(!T(S)){x.push(s("object",w));continue}var I=L[m],O=I.type,D=f.traces[O].attributes;D.type={valType:"enumerated",values:[O]},I.visible===!1&&S.visible!==!1&&x.push(s("invisible",w)),r(S,I,D,x,w);var P=S.transforms,F=I.transforms;if(P){v(P)||x.push(s("array",w,["transforms"])),w.push("transforms");for(var R=0;R<P.length;R++){var B=["transforms",R],N=P[R].type;if(!T(P[R])){x.push(s("object",w,B));continue}var G=f.transforms[N]?f.transforms[N].attributes:{};G.type={valType:"enumerated",values:Object.keys(f.transforms)},r(P[R],F[R],G,x,w,B)}}}var X=k._fullLayout,J=e(f,L);return r(A,X,J,x,"layout"),x.length===0?void 0:x};function r(a,c,f,x,k,y){y=y||[];for(var A=Object.keys(a),L=0;L<A.length;L++){var u=A[L];if(u!=="transforms"){var m=y.slice();m.push(u);var S=a[u],w=c[u],I=p(f,u),O=(I||{}).valType,D=O==="info_array",P=O==="colorscale",F=(I||{}).items;if(!o(f,u))x.push(s("schema",k,m));else if(T(S)&&T(w)&&O!=="any")r(S,w,I,x,k,m);else if(D&&v(S)){S.length>w.length&&x.push(s("unused",k,m.concat(w.length)));var R=w.length,B=Array.isArray(F);B&&(R=Math.min(R,F.length));var N,G,X,J,it;if(I.dimensions===2)for(G=0;G<R;G++)if(v(S[G])){S[G].length>w[G].length&&x.push(s("unused",k,m.concat(G,w[G].length)));var nt=w[G].length;for(N=0;N<(B?Math.min(nt,F[G].length):nt);N++)X=B?F[G][N]:F,J=S[G][N],it=w[G][N],M.validate(J,X)?it!==J&&it!==+J&&x.push(s("dynamic",k,m.concat(G,N),J,it)):x.push(s("value",k,m.concat(G,N),J))}else x.push(s("array",k,m.concat(G),S[G]));else for(G=0;G<R;G++)X=B?F[G]:F,J=S[G],it=w[G],M.validate(J,X)?it!==J&&it!==+J&&x.push(s("dynamic",k,m.concat(G),J,it)):x.push(s("value",k,m.concat(G),J))}else if(I.items&&!D&&v(S)){var q=F[Object.keys(F)[0]],Z=[],$,V;for($=0;$<w.length;$++){var rt=w[$]._index||$;if(V=m.slice(),V.push(rt),T(S[rt])&&T(w[$])){Z.push(rt);var ot=S[rt],H=w[$];T(ot)&&ot.visible!==!1&&H.visible===!1?x.push(s("invisible",k,V)):r(ot,H,q,x,k,V)}}for($=0;$<S.length;$++)V=m.slice(),V.push($),T(S[$])?Z.indexOf($)===-1&&x.push(s("unused",k,V)):x.push(s("object",k,V,S[$]))}else!T(S)&&T(w)?x.push(s("object",k,m,S)):!d(S)&&d(w)&&!D&&!P?x.push(s("array",k,m,S)):u in c?M.validate(S,I)?I.valType==="enumerated"&&(I.coerceNumber&&S!==+w||S!==w)&&x.push(s("dynamic",k,m,S,w)):x.push(s("value",k,m,S)):x.push(s("unused",k,m,S))}}return x}function e(a,c){for(var f=a.layout.layoutAttributes,x=0;x<c.length;x++){var k=c[x],y=a.traces[k.type],A=y.layoutAttributes;A&&(k.subplot?M.extendFlat(f[y.attributes.subplot.dflt],A):M.extendFlat(f,A))}return f}var l={object:function(a,c){var f;return a==="layout"&&c===""?f="The layout argument":a[0]==="data"&&c===""?f="Trace "+a[1]+" in the data argument":f=n(a)+"key "+c,f+" must be linked to an object container"},array:function(a,c){var f;return a==="data"?f="The data argument":f=n(a)+"key "+c,f+" must be linked to an array container"},schema:function(a,c){return n(a)+"key "+c+" is not part of the schema"},unused:function(a,c,f){var x=T(f)?"container":"key";return n(a)+x+" "+c+" did not get coerced"},dynamic:function(a,c,f,x){return[n(a)+"key",c,"(set to '"+f+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(a,c){return(c?n(a)+"item "+c:"Trace "+a[1])+" got defaulted to be not visible"},value:function(a,c,f){return[n(a)+"key "+c,"is set to an invalid value ("+f+")"].join(" ")}};function n(a){return v(a)?"In data trace "+a[1]+", ":"In "+a+", "}function s(a,c,f,x,k){f=f||"";var y,A;v(c)?(y=c[0],A=c[1]):(y=c,A=null);var L=_(f),u=l[a](c,L,x,k);return M.log(u),{code:a,container:y,trace:A,path:f,astr:L,msg:u}}function o(a,c){var f=h(c),x=f.keyMinusId,k=f.id;return x in a&&a[x]._isSubplotObj&&k?!0:c in a}function p(a,c){if(c in a)return a[c];var f=h(c);return a[f.keyMinusId]}var b=M.counterRegex("([a-z]+)");function h(a){var c=a.match(b);return{keyMinusId:c&&c[1],id:c&&c[2]}}function _(a){if(!v(a))return String(a);for(var c="",f=0;f<a.length;f++){var x=a[f];typeof x=="number"?c=c.substr(0,c.length-1)+"["+x+"]":c+=x,f<a.length-1&&(c+=".")}return c}},85656:function(Q){Q.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(Q,U,t){var M=t(3400),E=t(31780);Q.exports=function(i,C,T){var v=T.name,d=T.inclusionAttr||"visible",r=C[v],e=M.isArrayOrTypedArray(i[v])?i[v]:[],l=C[v]=[],n=E.arrayTemplater(C,v,d),s,o;for(s=0;s<e.length;s++){var p=e[s];M.isPlainObject(p)?o=n.newItem(p):(o=n.newItem({}),o[d]=!1),o._index=s,o[d]!==!1&&T.handleItemDefaults(p,o,C,T),l.push(o)}var b=n.defaultItems();for(s=0;s<b.length;s++)o=b[s],o._index=l.length,T.handleItemDefaults({},o,C,T,{}),l.push(o);if(M.isArrayOrTypedArray(r)){var h=Math.min(r.length,l.length);for(s=0;s<h;s++)M.relinkPrivateKeys(l[s],r[s])}return l}},45464:function(Q,U,t){var M=t(25376),E=t(55756);Q.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:M({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:E.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(Q,U,t){var M=t(38248),E=t(3400),i=E.dateTime2ms,C=E.incrementMonth,T=t(39032),v=T.ONEAVGMONTH;Q.exports=function(d,r,e,l){if(r.type!=="date")return{vals:l};var n=d[e+"periodalignment"];if(!n)return{vals:l};var s=d[e+"period"],o;if(M(s)){if(s=+s,s<=0)return{vals:l}}else if(typeof s=="string"&&s.charAt(0)==="M"){var p=+s.substring(1);if(p>0&&Math.round(p)===p)o=p;else return{vals:l}}for(var b=r.calendar,h=n==="start",_=n==="end",a=d[e+"period0"],c=i(a,b)||0,f=[],x=[],k=[],y=l.length,A=0;A<y;A++){var L=l[A],u,m,S;if(o){for(u=Math.round((L-c)/(o*v)),S=C(c,o*u,b);S>L;)S=C(S,-o,b);for(;S<=L;)S=C(S,o,b);m=C(S,-o,b)}else{for(u=Math.round((L-c)/s),S=c+u*s;S>L;)S-=s;for(;S<=L;)S+=s;m=S-s}f[A]=h?m:_?S:(m+S)/2,x[A]=m,k[A]=S}return{vals:f,starts:x,ends:k}}},26720:function(Q){Q.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(Q,U,t){var M=t(33428),E=t(38248),i=t(3400),C=t(39032).FP_SAFE,T=t(24040),v=t(43616),d=t(79811),r=d.getFromId,e=d.isLinked;Q.exports={applyAutorangeOptions:m,getAutoRange:l,makePadFn:s,doAutoRange:h,findExtremes:_,concatExtremes:b};function l(S,w){var I,O,D=[],P=S._fullLayout,F=s(P,w,0),R=s(P,w,1),B=b(S,w),N=B.min,G=B.max;if(N.length===0||G.length===0)return i.simpleMap(w.range,w.r2l);var X=N[0].val,J=G[0].val;for(I=1;I<N.length&&X===J;I++)X=Math.min(X,N[I].val);for(I=1;I<G.length&&X===J;I++)J=Math.max(J,G[I].val);var it=w.autorange,nt=it==="reversed"||it==="min reversed"||it==="max reversed";if(!nt&&w.range){var q=i.simpleMap(w.range,w.r2l);nt=q[1]<q[0]}w.autorange==="reversed"&&(w.autorange=!0);var Z=w.rangemode,$=Z==="tozero",V=Z==="nonnegative",rt=w._length,ot=rt/10,H=0,Y,at,et,ct,ft,yt;for(I=0;I<N.length;I++)for(Y=N[I],O=0;O<G.length;O++)at=G[O],yt=at.val-Y.val-n(w,Y.val,at.val),yt>0&&(ft=rt-F(Y)-R(at),ft>ot?yt/ft>H&&(et=Y,ct=at,H=yt/ft):yt/rt>H&&(et={val:Y.val,nopad:1},ct={val:at.val,nopad:1},H=yt/rt));function xt(At,Ot){return Math.max(At,R(Ot))}if(X===J){var Ct=X-1,gt=X+1;if($)if(X===0)D=[0,1];else{var mt=(X>0?G:N).reduce(xt,0),vt=X/(1-Math.min(.5,mt/rt));D=X>0?[0,vt]:[vt,0]}else V?D=[Math.max(0,Ct),Math.max(1,gt)]:D=[Ct,gt]}else $?(et.val>=0&&(et={val:0,nopad:1}),ct.val<=0&&(ct={val:0,nopad:1})):V&&(et.val-H*F(et)<0&&(et={val:0,nopad:1}),ct.val<=0&&(ct={val:1,nopad:1})),H=(ct.val-et.val-n(w,Y.val,at.val))/(rt-F(et)-R(ct)),D=[et.val-H*F(et),ct.val+H*R(ct)];return D=m(D,w),w.limitRange&&w.limitRange(),nt&&D.reverse(),i.simpleMap(D,w.l2r||Number)}function n(S,w,I){var O=0;if(S.rangebreaks)for(var D=S.locateBreaks(w,I),P=0;P<D.length;P++){var F=D[P];O+=F.max-F.min}return O}function s(S,w,I){var O=.05*w._length,D=w._anchorAxis||{};if((w.ticklabelposition||"").indexOf("inside")!==-1||(D.ticklabelposition||"").indexOf("inside")!==-1){var P=w.isReversed();if(!P){var F=i.simpleMap(w.range,w.r2l);P=F[1]<F[0]}P&&(I=!I)}var R=0;return e(S,w._id)||(R=p(S,w,I)),O=Math.max(R,O),w.constrain==="domain"&&w._inputDomain&&(O*=(w._inputDomain[1]-w._inputDomain[0])/(w.domain[1]-w.domain[0])),function(B){return B.nopad?0:B.pad+(B.extrapad?O:R)}}var o=3;function p(S,w,I){var O=0,D=w._id.charAt(0)==="x";for(var P in S._plots){var F=S._plots[P];if(!(w._id!==F.xaxis._id&&w._id!==F.yaxis._id)){var R=(D?F.yaxis:F.xaxis)||{};if((R.ticklabelposition||"").indexOf("inside")!==-1&&(!I&&(R.side==="left"||R.side==="bottom")||I&&(R.side==="top"||R.side==="right"))){if(R._vals){var B=i.deg2rad(R._tickAngles[R._id+"tick"]||0),N=Math.abs(Math.cos(B)),G=Math.abs(Math.sin(B));if(!R._vals[0].bb){var X=R._id+"tick",J=R._selections[X];J.each(function(V){var rt=M.select(this),ot=rt.select(".text-math-group");ot.empty()&&(V.bb=v.bBox(rt.node()))})}for(var it=0;it<R._vals.length;it++){var nt=R._vals[it],q=nt.bb;if(q){var Z=2*o+q.width,$=2*o+q.height;O=Math.max(O,D?Math.max(Z*N,$*G):Math.max($*N,Z*G))}}}R.ticks==="inside"&&R.ticklabelposition==="inside"&&(O+=R.ticklen||0)}}}return O}function b(S,w,I){var O=w._id,D=S._fullData,P=S._fullLayout,F=[],R=[],B,N,G;function X(Z,$){for(B=0;B<$.length;B++){var V=Z[$[B]],rt=(V._extremes||{})[O];if(V.visible===!0&&rt){for(N=0;N<rt.min.length;N++)G=rt.min[N],a(F,G.val,G.pad,{extrapad:G.extrapad});for(N=0;N<rt.max.length;N++)G=rt.max[N],c(R,G.val,G.pad,{extrapad:G.extrapad})}}}if(X(D,w._traceIndices),X(P.annotations||[],w._annIndices||[]),X(P.shapes||[],w._shapeIndices||[]),w._matchGroup&&!I){for(var J in w._matchGroup)if(J!==w._id){var it=r(S,J),nt=b(S,it,!0),q=w._length/it._length;for(N=0;N<nt.min.length;N++)G=nt.min[N],a(F,G.val,G.pad*q,{extrapad:G.extrapad});for(N=0;N<nt.max.length;N++)G=nt.max[N],c(R,G.val,G.pad*q,{extrapad:G.extrapad})}}return{min:F,max:R}}function h(S,w,I){if(w.setScale(),w.autorange){w.range=I?I.slice():l(S,w),w._r=w.range.slice(),w._rl=i.simpleMap(w._r,w.r2l);var O=w._input,D={};D[w._attr+".range"]=w.range,D[w._attr+".autorange"]=w.autorange,T.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,D),O.range=w.range.slice(),O.autorange=w.autorange}var P=w._anchorAxis;if(P&&P.rangeslider){var F=P.rangeslider[w._name];F&&F.rangemode==="auto"&&(F.range=l(S,w)),P._input.rangeslider[w._name]=i.extendFlat({},F)}}function _(S,w,I){I||(I={}),S._m||S.setScale();var O=[],D=[],P=w.length,F=I.padded||!1,R=I.tozero&&(S.type==="linear"||S.type==="-"),B=S.type==="log",N=!1,G=I.vpadLinearized||!1,X,J,it,nt,q,Z,$,V,rt;function ot(xt){if(Array.isArray(xt))return N=!0,function(gt){return Math.max(Number(xt[gt]||0),0)};var Ct=Math.max(Number(xt||0),0);return function(){return Ct}}var H=ot((S._m>0?I.ppadplus:I.ppadminus)||I.ppad||0),Y=ot((S._m>0?I.ppadminus:I.ppadplus)||I.ppad||0),at=ot(I.vpadplus||I.vpad),et=ot(I.vpadminus||I.vpad);if(!N){if(V=1/0,rt=-1/0,B)for(X=0;X<P;X++)J=w[X],J<V&&J>0&&(V=J),J>rt&&J<C&&(rt=J);else for(X=0;X<P;X++)J=w[X],J<V&&J>-C&&(V=J),J>rt&&J<C&&(rt=J);w=[V,rt],P=2}var ct={tozero:R,extrapad:F};function ft(xt){it=w[xt],E(it)&&(Z=H(xt),$=Y(xt),G?(nt=S.c2l(it)-et(xt),q=S.c2l(it)+at(xt)):(V=it-et(xt),rt=it+at(xt),B&&V<rt/10&&(V=rt/10),nt=S.c2l(V),q=S.c2l(rt)),R&&(nt=Math.min(0,nt),q=Math.max(0,q)),x(nt)&&a(O,nt,$,ct),x(q)&&c(D,q,Z,ct))}var yt=Math.min(6,P);for(X=0;X<yt;X++)ft(X);for(X=P-1;X>=yt;X--)ft(X);return{min:O,max:D,opts:I}}function a(S,w,I,O){f(S,w,I,O,k)}function c(S,w,I,O){f(S,w,I,O,y)}function f(S,w,I,O,D){for(var P=O.tozero,F=O.extrapad,R=!0,B=0;B<S.length&&R;B++){var N=S[B];if(D(N.val,w)&&N.pad>=I&&(N.extrapad||!F)){R=!1;break}else D(w,N.val)&&N.pad<=I&&(F||!N.extrapad)&&(S.splice(B,1),B--)}if(R){var G=P&&w===0;S.push({val:w,pad:G?0:I,extrapad:G?!1:F})}}function x(S){return E(S)&&Math.abs(S)<C}function k(S,w){return S<=w}function y(S,w){return S>=w}function A(S,w){var I=w.autorangeoptions;return I&&I.minallowed!==void 0&&u(w,I.minallowed,I.maxallowed)?I.minallowed:I&&I.clipmin!==void 0&&u(w,I.clipmin,I.clipmax)?Math.max(S,w.d2l(I.clipmin)):S}function L(S,w){var I=w.autorangeoptions;return I&&I.maxallowed!==void 0&&u(w,I.minallowed,I.maxallowed)?I.maxallowed:I&&I.clipmax!==void 0&&u(w,I.clipmin,I.clipmax)?Math.min(S,w.d2l(I.clipmax)):S}function u(S,w,I){return w!==void 0&&I!==void 0?(w=S.d2l(w),I=S.d2l(I),w<I):!0}function m(S,w){if(!w||!w.autorangeoptions)return S;var I=S[0],O=S[1],D=w.autorangeoptions.include;if(D!==void 0){var P=w.d2l(I),F=w.d2l(O);i.isArrayOrTypedArray(D)||(D=[D]);for(var R=0;R<D.length;R++){var B=w.d2l(D[R]);P>=B&&(P=B,I=B),F<=B&&(F=B,O=B)}}return I=A(I,w),O=L(O,w),[I,O]}},76808:function(Q){Q.exports=function(U,t,M){var E,i;if(M){var C=t==="reversed"||t==="min reversed"||t==="max reversed";E=M[C?1:0],i=M[C?0:1]}var T=U("autorangeoptions.minallowed",i===null?E:void 0),v=U("autorangeoptions.maxallowed",E===null?i:void 0);T===void 0&&U("autorangeoptions.clipmin"),v===void 0&&U("autorangeoptions.clipmax"),U("autorangeoptions.include")}},54460:function(Q,U,t){var M=t(33428),E=t(38248),i=t(7316),C=t(24040),T=t(3400),v=T.strTranslate,d=t(72736),r=t(81668),e=t(76308),l=t(43616),n=t(94724),s=t(98728),o=t(39032),p=o.ONEMAXYEAR,b=o.ONEAVGYEAR,h=o.ONEMINYEAR,_=o.ONEMAXQUARTER,a=o.ONEAVGQUARTER,c=o.ONEMINQUARTER,f=o.ONEMAXMONTH,x=o.ONEAVGMONTH,k=o.ONEMINMONTH,y=o.ONEWEEK,A=o.ONEDAY,L=A/2,u=o.ONEHOUR,m=o.ONEMIN,S=o.ONESEC,w=o.MINUS_SIGN,I=o.BADNUM,O={K:"zeroline"},D={K:"gridline",L:"path"},P={K:"minor-gridline",L:"path"},F={K:"tick",L:"path"},R={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},N=t(84284),G=N.MID_SHIFT,X=N.CAP_SHIFT,J=N.LINE_SPACING,it=N.OPPOSITE_SIDE,nt=3,q=Q.exports={};q.setConvert=t(78344);var Z=t(52976),$=t(79811),V=$.idSort,rt=$.isLinked;q.id2name=$.id2name,q.name2id=$.name2id,q.cleanId=$.cleanId,q.list=$.list,q.listIds=$.listIds,q.getFromId=$.getFromId,q.getFromTrace=$.getFromTrace;var ot=t(19280);q.getAutoRange=ot.getAutoRange,q.findExtremes=ot.findExtremes;var H=1e-4;function Y(zt){var Ut=(zt[1]-zt[0])*H;return[zt[0]-Ut,zt[1]+Ut]}q.coerceRef=function(zt,Ut,Me,Te,qe,Qe){var Je=Te.charAt(Te.length-1),We=Me._fullLayout._subplots[Je+"axis"],Oe=Te+"ref",rr={};return qe||(qe=We[0]||(typeof Qe=="string"?Qe:Qe[0])),Qe||(Qe=qe),We=We.concat(We.map(function(cr){return cr+" domain"})),rr[Oe]={valType:"enumerated",values:We.concat(Qe?typeof Qe=="string"?[Qe]:Qe:[]),dflt:qe},T.coerce(zt,Ut,rr,Oe)},q.getRefType=function(zt){return zt===void 0?zt:zt==="paper"?"paper":zt==="pixel"?"pixel":/( domain)$/.test(zt)?"domain":"range"},q.coercePosition=function(zt,Ut,Me,Te,qe,Qe){var Je,We,Oe=q.getRefType(Te);if(Oe!=="range")Je=T.ensureNumber,We=Me(qe,Qe);else{var rr=q.getFromId(Ut,Te);Qe=rr.fraction2r(Qe),We=Me(qe,Qe),Je=rr.cleanPos}zt[qe]=Je(We)},q.cleanPosition=function(zt,Ut,Me){var Te=Me==="paper"||Me==="pixel"?T.ensureNumber:q.getFromId(Ut,Me).cleanPos;return Te(zt)},q.redrawComponents=function(zt,Ut){Ut=Ut||q.listIds(zt);var Me=zt._fullLayout;function Te(qe,Qe,Je,We){for(var Oe=C.getComponentMethod(qe,Qe),rr={},cr=0;cr<Ut.length;cr++)for(var lr=Me[q.id2name(Ut[cr])],nr=lr[Je],Sr=0;Sr<nr.length;Sr++){var kr=nr[Sr];if(!rr[kr]&&(Oe(zt,kr),rr[kr]=1,We))return}}Te("annotations","drawOne","_annIndices"),Te("shapes","drawOne","_shapeIndices"),Te("images","draw","_imgIndices",!0),Te("selections","drawOne","_selectionIndices")};var at=q.getDataConversions=function(zt,Ut,Me,Te){var qe,Qe=Me==="x"||Me==="y"||Me==="z"?Me:Te;if(T.isArrayOrTypedArray(Qe)){if(qe={type:Z(Te,void 0,{autotypenumbers:zt._fullLayout.autotypenumbers}),_categories:[]},q.setConvert(qe),qe.type==="category")for(var Je=0;Je<Te.length;Je++)qe.d2c(Te[Je])}else qe=q.getFromTrace(zt,Ut,Qe);return qe?{d2c:qe.d2c,c2d:qe.c2d}:Qe==="ids"?{d2c:ct,c2d:ct}:{d2c:et,c2d:et}};function et(zt){return+zt}function ct(zt){return String(zt)}q.getDataToCoordFunc=function(zt,Ut,Me,Te){return at(zt,Ut,Me,Te).d2c},q.counterLetter=function(zt){var Ut=zt.charAt(0);if(Ut==="x")return"y";if(Ut==="y")return"x"},q.minDtick=function(zt,Ut,Me,Te){["log","category","multicategory"].indexOf(zt.type)!==-1||!Te?zt._minDtick=0:zt._minDtick===void 0?(zt._minDtick=Ut,zt._forceTick0=Me):zt._minDtick&&((zt._minDtick/Ut+1e-6)%1<2e-6&&((Me-zt._forceTick0)/Ut%1+1.000001)%1<2e-6?(zt._minDtick=Ut,zt._forceTick0=Me):((Ut/zt._minDtick+1e-6)%1>2e-6||((Me-zt._forceTick0)/zt._minDtick%1+1.000001)%1>2e-6)&&(zt._minDtick=0))},q.saveRangeInitial=function(zt,Ut){for(var Me=q.list(zt,"",!0),Te=!1,qe=0;qe<Me.length;qe++){var Qe=Me[qe],Je=Qe._rangeInitial0===void 0&&Qe._rangeInitial1===void 0,We=Je||Qe.range[0]!==Qe._rangeInitial0||Qe.range[1]!==Qe._rangeInitial1,Oe=Qe.autorange;(Je&&Oe!==!0||Ut&&We)&&(Qe._rangeInitial0=Oe==="min"||Oe==="max reversed"?void 0:Qe.range[0],Qe._rangeInitial1=Oe==="max"||Oe==="min reversed"?void 0:Qe.range[1],Qe._autorangeInitial=Oe,Te=!0)}return Te},q.saveShowSpikeInitial=function(zt,Ut){for(var Me=q.list(zt,"",!0),Te=!1,qe="on",Qe=0;Qe<Me.length;Qe++){var Je=Me[Qe],We=Je._showSpikeInitial===void 0,Oe=We||Je.showspikes!==Je._showspikes;(We||Ut&&Oe)&&(Je._showSpikeInitial=Je.showspikes,Te=!0),qe==="on"&&!Je.showspikes&&(qe="off")}return zt._fullLayout._cartesianSpikesEnabled=qe,Te},q.autoBin=function(zt,Ut,Me,Te,qe,Qe){var Je=T.aggNums(Math.min,null,zt),We=T.aggNums(Math.max,null,zt);if(Ut.type==="category"||Ut.type==="multicategory")return{start:Je-.5,end:We+.5,size:Math.max(1,Math.round(Qe)||1),_dataSpan:We-Je};qe||(qe=Ut.calendar);var Oe;if(Ut.type==="log"?Oe={type:"linear",range:[Je,We]}:Oe={type:Ut.type,range:T.simpleMap([Je,We],Ut.c2r,0,qe),calendar:qe},q.setConvert(Oe),Qe=Qe&&s.dtick(Qe,Oe.type),Qe)Oe.dtick=Qe,Oe.tick0=s.tick0(void 0,Oe.type,qe);else{var rr;if(Me)rr=(We-Je)/Me;else{var cr=T.distinctVals(zt),lr=Math.pow(10,Math.floor(Math.log(cr.minDiff)/Math.LN10)),nr=lr*T.roundUp(cr.minDiff/lr,[.9,1.9,4.9,9.9],!0);rr=Math.max(nr,2*T.stdev(zt)/Math.pow(zt.length,Te?.25:.4)),E(rr)||(rr=1)}q.autoTicks(Oe,rr)}var Sr=Oe.dtick,kr=q.tickIncrement(q.tickFirst(Oe),Sr,"reverse",qe),Mr,rn;if(typeof Sr=="number")kr=ft(kr,zt,Oe,Je,We),rn=1+Math.floor((We-kr)/Sr),Mr=kr+rn*Sr;else for(Oe.dtick.charAt(0)==="M"&&(kr=yt(kr,zt,Sr,Je,qe)),Mr=kr,rn=0;Mr<=We;)Mr=q.tickIncrement(Mr,Sr,!1,qe),rn++;return{start:Ut.c2r(kr,0,qe),end:Ut.c2r(Mr,0,qe),size:Sr,_dataSpan:We-Je}};function ft(zt,Ut,Me,Te,qe){var Qe=0,Je=0,We=0,Oe=0;function rr(Sr){return(1+(Sr-zt)*100/Me.dtick)%100<2}for(var cr=0;cr<Ut.length;cr++)Ut[cr]%1===0?We++:E(Ut[cr])||Oe++,rr(Ut[cr])&&Qe++,rr(Ut[cr]+Me.dtick/2)&&Je++;var lr=Ut.length-Oe;if(We===lr&&Me.type!=="date")Me.dtick<1?zt=Te-.5*Me.dtick:(zt-=.5,zt+Me.dtick<Te&&(zt+=Me.dtick));else if(Je<lr*.1&&(Qe>lr*.3||rr(Te)||rr(qe))){var nr=Me.dtick/2;zt+=zt+nr<Te?nr:-nr}return zt}function yt(zt,Ut,Me,Te,qe){var Qe=T.findExactDates(Ut,qe),Je=.8;if(Qe.exactDays>Je){var We=Number(Me.substr(1));Qe.exactYears>Je&&We%12===0?zt=q.tickIncrement(zt,"M6","reverse")+A*1.5:Qe.exactMonths>Je?zt=q.tickIncrement(zt,"M1","reverse")+A*15.5:zt-=L;var Oe=q.tickIncrement(zt,Me);if(Oe<=Te)return Oe}return zt}q.prepMinorTicks=function(zt,Ut,Me){if(!Ut.minor.dtick){delete zt.dtick;var Te=Ut.dtick&&E(Ut._tmin),qe;if(Te){var Qe=q.tickIncrement(Ut._tmin,Ut.dtick,!0);qe=[Ut._tmin,Qe*.99+Ut._tmin*.01]}else{var Je=T.simpleMap(Ut.range,Ut.r2l);qe=[Je[0],.8*Je[0]+.2*Je[1]]}if(zt.range=T.simpleMap(qe,Ut.l2r),zt._isMinor=!0,q.prepTicks(zt,Me),Te){var We=E(Ut.dtick),Oe=E(zt.dtick),rr=We?Ut.dtick:+Ut.dtick.substring(1),cr=Oe?zt.dtick:+zt.dtick.substring(1);We&&Oe?xt(rr,cr)?rr===2*y&&cr===2*A&&(zt.dtick=y):rr===2*y&&cr===3*A?zt.dtick=y:rr===y&&!(Ut._input.minor||{}).nticks?zt.dtick=A:Ct(rr/cr,2.5)?zt.dtick=rr/2:zt.dtick=rr:String(Ut.dtick).charAt(0)==="M"?Oe?zt.dtick="M1":xt(rr,cr)?rr>=12&&cr===2&&(zt.dtick="M3"):zt.dtick=Ut.dtick:String(zt.dtick).charAt(0)==="L"?String(Ut.dtick).charAt(0)==="L"?xt(rr,cr)||(zt.dtick=Ct(rr/cr,2.5)?Ut.dtick/2:Ut.dtick):zt.dtick="D1":zt.dtick==="D2"&&+Ut.dtick>1&&(zt.dtick=1)}zt.range=Ut.range}Ut.minor._tick0Init===void 0&&(zt.tick0=Ut.tick0)};function xt(zt,Ut){return Math.abs((zt/Ut+.5)%1-.5)<.001}function Ct(zt,Ut){return Math.abs(zt/Ut-1)<.001}q.prepTicks=function(zt,Ut){var Me=T.simpleMap(zt.range,zt.r2l,void 0,void 0,Ut);if(zt.tickmode==="auto"||!zt.dtick){var Te=zt.nticks,qe;Te||(zt.type==="category"||zt.type==="multicategory"?(qe=zt.tickfont?T.bigFont(zt.tickfont.size||12):15,Te=zt._length/qe):(qe=zt._id.charAt(0)==="y"?40:80,Te=T.constrain(zt._length/qe,4,9)+1),zt._name==="radialaxis"&&(Te*=2)),zt.minor&&zt.minor.tickmode!=="array"||zt.tickmode==="array"&&(Te*=100),zt._roughDTick=Math.abs(Me[1]-Me[0])/Te,q.autoTicks(zt,zt._roughDTick),zt._minDtick>0&&zt.dtick<zt._minDtick*2&&(zt.dtick=zt._minDtick,zt.tick0=zt.l2r(zt._forceTick0))}zt.ticklabelmode==="period"&&mt(zt),zt.tick0||(zt.tick0=zt.type==="date"?"2000-01-01":0),zt.type==="date"&&zt.dtick<.1&&(zt.dtick=.1),ce(zt)};function gt(zt){return+zt.substring(1)}function mt(zt){var Ut;function Me(){return!(E(zt.dtick)||zt.dtick.charAt(0)!=="M")}var Te=Me(),qe=q.getTickFormat(zt);if(qe){var Qe=zt._dtickInit!==zt.dtick;/%[fLQsSMX]/.test(qe)||(/%[HI]/.test(qe)?(Ut=u,Qe&&!Te&&zt.dtick<u&&(zt.dtick=u)):/%p/.test(qe)?(Ut=L,Qe&&!Te&&zt.dtick<L&&(zt.dtick=L)):/%[Aadejuwx]/.test(qe)?(Ut=A,Qe&&!Te&&zt.dtick<A&&(zt.dtick=A)):/%[UVW]/.test(qe)?(Ut=y,Qe&&!Te&&zt.dtick<y&&(zt.dtick=y)):/%[Bbm]/.test(qe)?(Ut=x,Qe&&(Te?gt(zt.dtick)<1:zt.dtick<k)&&(zt.dtick="M1")):/%[q]/.test(qe)?(Ut=a,Qe&&(Te?gt(zt.dtick)<3:zt.dtick<c)&&(zt.dtick="M3")):/%[Yy]/.test(qe)&&(Ut=b,Qe&&(Te?gt(zt.dtick)<12:zt.dtick<h)&&(zt.dtick="M12")))}Te=Me(),Te&&zt.tick0===zt._dowTick0&&(zt.tick0=zt._rawTick0),zt._definedDelta=Ut}function vt(zt,Ut,Me){for(var Te=0;Te<zt.length;Te++){var qe=zt[Te].value,Qe=Te,Je=Te+1;Te<zt.length-1?(Qe=Te,Je=Te+1):Te>0?(Qe=Te-1,Je=Te):(Qe=Te,Je=Te);var We=zt[Qe].value,Oe=zt[Je].value,rr=Math.abs(Oe-We),cr=Me||rr,lr=0;cr>=h?rr>=h&&rr<=p?lr=rr:lr=b:Me===a&&cr>=c?rr>=c&&rr<=_?lr=rr:lr=a:cr>=k?rr>=k&&rr<=f?lr=rr:lr=x:Me===y&&cr>=y?lr=y:cr>=A?lr=A:Me===L&&cr>=L?lr=L:Me===u&&cr>=u&&(lr=u);var nr;lr>=rr&&(lr=rr,nr=!0);var Sr=qe+lr;if(Ut.rangebreaks&&lr>0){for(var kr=84,Mr=0,rn=0;rn<kr;rn++){var Ur=(rn+.5)/kr;Ut.maskBreaks(qe*(1-Ur)+Ur*Sr)!==I&&Mr++}lr*=Mr/kr,lr||(zt[Te].drop=!0),nr&&rr>y&&(lr=rr)}(lr>0||Te===0)&&(zt[Te].periodX=qe+lr/2)}}q.calcTicks=function(zt,Ut){for(var Me=zt.type,Te=zt.calendar,qe=zt.ticklabelstep,Qe=zt.ticklabelmode==="period",Je=T.simpleMap(zt.range,zt.r2l,void 0,void 0,Ut),We=Je[1]<Je[0],Oe=Math.min(Je[0],Je[1]),rr=Math.max(Je[0],Je[1]),cr=Math.max(1e3,zt._length||0),lr=[],nr=[],Sr=[],kr=[],Mr=zt.minor&&(zt.minor.ticks||zt.minor.showgrid),rn=1;rn>=(Mr?0:1);rn--){var Ur=!rn;rn?(zt._dtickInit=zt.dtick,zt._tick0Init=zt.tick0):(zt.minor._dtickInit=zt.minor.dtick,zt.minor._tick0Init=zt.minor.tick0);var pn=rn?zt:T.extendFlat({},zt,zt.minor);if(Ur?q.prepMinorTicks(pn,zt,Ut):q.prepTicks(pn,Ut),pn.tickmode==="array"){rn?(Sr=[],lr=It(zt,!Ur)):(kr=[],nr=It(zt,!Ur));continue}if(pn.tickmode==="sync"){Sr=[],lr=Ot(zt);continue}var yn=Y(Je),yr=yn[0],Cr=yn[1],Dr=E(pn.dtick),Nr=Me==="log"&&!(Dr||pn.dtick.charAt(0)==="L"),$r=q.tickFirst(pn,Ut);if(rn){if(zt._tmin=$r,$r<yr!==We)break;(Me==="category"||Me==="multicategory")&&(Cr=We?Math.max(-.5,Cr):Math.min(zt._categories.length-.5,Cr))}var fn=null,on=$r,In;if(rn){var En;Dr?En=zt.dtick:Me==="date"?typeof zt.dtick=="string"&&zt.dtick.charAt(0)==="M"&&(En=x*zt.dtick.substring(1)):En=zt._roughDTick,In=Math.round((zt.r2l(on)-zt.r2l(zt.tick0))/En)-1}var $n=pn.dtick;for(pn.rangebreaks&&pn._tick0Init!==pn.tick0&&(on=be(on,zt),We||(on=q.tickIncrement(on,$n,!We,Te))),rn&&Qe&&(on=q.tickIncrement(on,$n,!We,Te),In--);We?on>=Cr:on<=Cr;on=q.tickIncrement(on,$n,We,Te)){if(rn&&In++,pn.rangebreaks&&!We){if(on<yr)continue;if(pn.maskBreaks(on)===I&&be(on,pn)>=rr)break}if(Sr.length>cr||on===fn)break;fn=on;var ri={value:on};rn?(Nr&&on!==(on|0)&&(ri.simpleLabel=!0),qe>1&&In%qe&&(ri.skipLabel=!0),Sr.push(ri)):(ri.minor=!0,kr.push(ri))}}if(Mr){var ui=zt.minor.ticks==="inside"&&zt.ticks==="outside"||zt.minor.ticks==="outside"&&zt.ticks==="inside";if(!ui){for(var ni=Sr.map(function(Tn){return Tn.value}),zn=[],ur=0;ur<kr.length;ur++){var Gr=kr[ur],qr=Gr.value;if(ni.indexOf(qr)===-1){for(var an=!1,Mn=0;!an&&Mn<Sr.length;Mn++)1e7+Sr[Mn].value===1e7+qr&&(an=!0);an||zn.push(Gr)}}kr=zn}}Qe&&vt(Sr,zt,zt._definedDelta);var sn;if(zt.rangebreaks){var An=zt._id.charAt(0)==="y",Sn=1;zt.tickmode==="auto"&&(Sn=zt.tickfont?zt.tickfont.size:12);var qn=NaN;for(sn=Sr.length-1;sn>-1;sn--){if(Sr[sn].drop){Sr.splice(sn,1);continue}Sr[sn].value=be(Sr[sn].value,zt);var ii=zt.c2p(Sr[sn].value);(An?qn>ii-Sn:qn<ii+Sn)?Sr.splice(We?sn+1:sn,1):qn=ii}}Re(zt)&&Math.abs(Je[1]-Je[0])===360&&Sr.pop(),zt._tmax=(Sr[Sr.length-1]||{}).value,zt._prevDateHead="",zt._inCalcTicks=!0;var Mi,dr=function(Tn){Tn.text="",zt._prevDateHead=Mi};Sr=Sr.concat(kr);var Er,gr;for(sn=0;sn<Sr.length;sn++){var Or=Sr[sn].minor,vn=Sr[sn].value;Or?nr.push({x:vn,minor:!0}):(Mi=zt._prevDateHead,Er=q.tickText(zt,vn,!1,Sr[sn].simpleLabel),gr=Sr[sn].periodX,gr!==void 0&&(Er.periodX=gr,(gr>rr||gr<Oe)&&(gr>rr&&(Er.periodX=rr),gr<Oe&&(Er.periodX=Oe),dr(Er))),Sr[sn].skipLabel&&dr(Er),lr.push(Er))}return lr=lr.concat(nr),zt._inCalcTicks=!1,Qe&&lr.length&&(lr[0].noTick=!0),lr};function At(zt,Ut){return zt.rangebreaks&&(Ut=Ut.filter(function(Me){return zt.maskBreaks(Me.x)!==I})),Ut}function Ot(zt){var Ut=zt._mainAxis,Me=[];if(Ut._vals){for(var Te=0;Te<Ut._vals.length;Te++)if(!Ut._vals[Te].noTick){var qe=Ut.l2p(Ut._vals[Te].x),Qe=zt.p2l(qe),Je=q.tickText(zt,Qe);Ut._vals[Te].minor&&(Je.minor=!0,Je.text=""),Me.push(Je)}}return Me=At(zt,Me),Me}function It(zt,Ut){var Me=T.simpleMap(zt.range,zt.r2l),Te=Y(Me),qe=Math.min(Te[0],Te[1]),Qe=Math.max(Te[0],Te[1]),Je=zt.type==="category"?zt.d2l_noadd:zt.d2l;zt.type==="log"&&String(zt.dtick).charAt(0)!=="L"&&(zt.dtick="L"+Math.pow(10,Math.floor(Math.min(zt.range[0],zt.range[1]))-1));for(var We=[],Oe=0;Oe<=1;Oe++)if(!(Ut!==void 0&&(Ut&&Oe||Ut===!1&&!Oe))&&!(Oe&&!zt.minor)){var rr=Oe?zt.minor.tickvals:zt.tickvals,cr=Oe?[]:zt.ticktext;if(rr){T.isArrayOrTypedArray(cr)||(cr=[]);for(var lr=0;lr<rr.length;lr++){var nr=Je(rr[lr]);if(nr>qe&&nr<Qe){var Sr=q.tickText(zt,nr,!1,String(cr[lr]));Oe&&(Sr.minor=!0,Sr.text=""),We.push(Sr)}}}}return We=At(zt,We),We}var St=[2,5,10],Bt=[1,2,3,6,12],re=[1,2,5,10,15,30],Yt=[1,2,3,7,14],he=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Zt=[-.301,0,.301,.699,1],ae=[15,30,45,90,180];function oe(zt,Ut,Me){return Ut*T.roundUp(zt/Ut,Me)}q.autoTicks=function(zt,Ut,Me){var Te;function qe(lr){return Math.pow(lr,Math.floor(Math.log(Ut)/Math.LN10))}if(zt.type==="date"){zt.tick0=T.dateTick0(zt.calendar,0);var Qe=2*Ut;if(Qe>b)Ut/=b,Te=qe(10),zt.dtick="M"+12*oe(Ut,Te,St);else if(Qe>x)Ut/=x,zt.dtick="M"+oe(Ut,1,Bt);else if(Qe>A){if(zt.dtick=oe(Ut,A,zt._hasDayOfWeekBreaks?[1,2,7,14]:Yt),!Me){var Je=q.getTickFormat(zt),We=zt.ticklabelmode==="period";We&&(zt._rawTick0=zt.tick0),/%[uVW]/.test(Je)?zt.tick0=T.dateTick0(zt.calendar,2):zt.tick0=T.dateTick0(zt.calendar,1),We&&(zt._dowTick0=zt.tick0)}}else Qe>u?zt.dtick=oe(Ut,u,Bt):Qe>m?zt.dtick=oe(Ut,m,re):Qe>S?zt.dtick=oe(Ut,S,re):(Te=qe(10),zt.dtick=oe(Ut,Te,St))}else if(zt.type==="log"){zt.tick0=0;var Oe=T.simpleMap(zt.range,zt.r2l);if(zt._isMinor&&(Ut*=1.5),Ut>.7)zt.dtick=Math.ceil(Ut);else if(Math.abs(Oe[1]-Oe[0])<1){var rr=1.5*Math.abs((Oe[1]-Oe[0])/Ut);Ut=Math.abs(Math.pow(10,Oe[1])-Math.pow(10,Oe[0]))/rr,Te=qe(10),zt.dtick="L"+oe(Ut,Te,St)}else zt.dtick=Ut>.3?"D2":"D1"}else zt.type==="category"||zt.type==="multicategory"?(zt.tick0=0,zt.dtick=Math.ceil(Math.max(Ut,1))):Re(zt)?(zt.tick0=0,Te=1,zt.dtick=oe(Ut,Te,ae)):(zt.tick0=0,Te=qe(10),zt.dtick=oe(Ut,Te,St));if(zt.dtick===0&&(zt.dtick=1),!E(zt.dtick)&&typeof zt.dtick!="string"){var cr=zt.dtick;throw zt.dtick=1,"ax.dtick error: "+String(cr)}};function ce(zt){var Ut=zt.dtick;if(zt._tickexponent=0,!E(Ut)&&typeof Ut!="string"&&(Ut=1),(zt.type==="category"||zt.type==="multicategory")&&(zt._tickround=null),zt.type==="date"){var Me=zt.r2l(zt.tick0),Te=zt.l2r(Me).replace(/(^-|i)/g,""),qe=Te.length;if(String(Ut).charAt(0)==="M")qe>10||Te.substr(5)!=="01-01"?zt._tickround="d":zt._tickround=+Ut.substr(1)%12===0?"y":"m";else if(Ut>=A&&qe<=10||Ut>=A*15)zt._tickround="d";else if(Ut>=m&&qe<=16||Ut>=u)zt._tickround="M";else if(Ut>=S&&qe<=19||Ut>=m)zt._tickround="S";else{var Qe=zt.l2r(Me+Ut).replace(/^-/,"").length;zt._tickround=Math.max(qe,Qe)-20,zt._tickround<0&&(zt._tickround=4)}}else if(E(Ut)||Ut.charAt(0)==="L"){var Je=zt.range.map(zt.r2d||Number);E(Ut)||(Ut=Number(Ut.substr(1))),zt._tickround=2-Math.floor(Math.log(Ut)/Math.LN10+.01);var We=Math.max(Math.abs(Je[0]),Math.abs(Je[1])),Oe=Math.floor(Math.log(We)/Math.LN10+.01),rr=zt.minexponent===void 0?3:zt.minexponent;Math.abs(Oe)>rr&&(Dt(zt.exponentformat)&&!dt(Oe)?zt._tickexponent=3*Math.round((Oe-1)/3):zt._tickexponent=Oe)}else zt._tickround=null}q.tickIncrement=function(zt,Ut,Me,Te){var qe=Me?-1:1;if(E(Ut))return T.increment(zt,qe*Ut);var Qe=Ut.charAt(0),Je=qe*Number(Ut.substr(1));if(Qe==="M")return T.incrementMonth(zt,Je,Te);if(Qe==="L")return Math.log(Math.pow(10,zt)+Je)/Math.LN10;if(Qe==="D"){var We=Ut==="D2"?Zt:he,Oe=zt+qe*.01,rr=T.roundUp(T.mod(Oe,1),We,Me);return Math.floor(Oe)+Math.log(M.round(Math.pow(10,rr),1))/Math.LN10}throw"unrecognized dtick "+String(Ut)},q.tickFirst=function(zt,Ut){var Me=zt.r2l||Number,Te=T.simpleMap(zt.range,Me,void 0,void 0,Ut),qe=Te[1]<Te[0],Qe=qe?Math.floor:Math.ceil,Je=Y(Te)[0],We=zt.dtick,Oe=Me(zt.tick0);if(E(We)){var rr=Qe((Je-Oe)/We)*We+Oe;return(zt.type==="category"||zt.type==="multicategory")&&(rr=T.constrain(rr,0,zt._categories.length-1)),rr}var cr=We.charAt(0),lr=Number(We.substr(1));if(cr==="M"){for(var nr=0,Sr=Oe,kr,Mr,rn;nr<10;){if(kr=q.tickIncrement(Sr,We,qe,zt.calendar),(kr-Je)*(Sr-Je)<=0)return qe?Math.min(Sr,kr):Math.max(Sr,kr);Mr=(Je-(Sr+kr)/2)/(kr-Sr),rn=cr+(Math.abs(Math.round(Mr))||1)*lr,Sr=q.tickIncrement(Sr,rn,Mr<0?!qe:qe,zt.calendar),nr++}return T.error("tickFirst did not converge",zt),Sr}else{if(cr==="L")return Math.log(Qe((Math.pow(10,Je)-Oe)/lr)*lr+Oe)/Math.LN10;if(cr==="D"){var Ur=We==="D2"?Zt:he,pn=T.roundUp(T.mod(Je,1),Ur,qe);return Math.floor(Je)+Math.log(M.round(Math.pow(10,pn),1))/Math.LN10}else throw"unrecognized dtick "+String(We)}},q.tickText=function(zt,Ut,Me,Te){var qe=ue(zt,Ut),Qe=zt.tickmode==="array",Je=Me||Qe,We=zt.type,Oe=We==="category"?zt.d2l_noadd:zt.d2l,rr,cr=function(rn){var Ur=zt.l2p(rn);return Ur>=0&&Ur<=zt._length?rn:null};if(Qe&&T.isArrayOrTypedArray(zt.ticktext)){var lr=T.simpleMap(zt.range,zt.r2l),nr=(Math.abs(lr[1]-lr[0])-(zt._lBreaks||0))/1e4;for(rr=0;rr<zt.ticktext.length&&!(Math.abs(Ut-Oe(zt.tickvals[rr]))<nr);rr++);if(rr<zt.ticktext.length)return qe.text=String(zt.ticktext[rr]),qe.xbnd=[cr(qe.x-.5),cr(qe.x+zt.dtick-.5)],qe}function Sr(rn){if(rn===void 0)return!0;if(Me)return rn==="none";var Ur={first:zt._tmin,last:zt._tmax}[rn];return rn!=="all"&&Ut!==Ur}var kr=Me?"never":zt.exponentformat!=="none"&&Sr(zt.showexponent)?"hide":"";if(We==="date"?ye(zt,qe,Me,Je):We==="log"?Tt(zt,qe,Me,Je,kr):We==="category"?Ft(zt,qe):We==="multicategory"?$t(zt,qe,Me):Re(zt)?Nt(zt,qe,Me,Je,kr):Vt(zt,qe,Me,Je,kr),Te||(zt.tickprefix&&!Sr(zt.showtickprefix)&&(qe.text=zt.tickprefix+qe.text),zt.ticksuffix&&!Sr(zt.showticksuffix)&&(qe.text+=zt.ticksuffix)),zt.labelalias&&zt.labelalias.hasOwnProperty(qe.text)){var Mr=zt.labelalias[qe.text];typeof Mr=="string"&&(qe.text=Mr)}return(zt.tickson==="boundaries"||zt.showdividers)&&(qe.xbnd=[cr(qe.x-.5),cr(qe.x+zt.dtick-.5)]),qe},q.hoverLabelText=function(zt,Ut,Me){Me&&(zt=T.extendFlat({},zt,{hoverformat:Me}));var Te=T.isArrayOrTypedArray(Ut)?Ut[0]:Ut,qe=T.isArrayOrTypedArray(Ut)?Ut[1]:void 0;if(qe!==void 0&&qe!==Te)return q.hoverLabelText(zt,Te,Me)+" - "+q.hoverLabelText(zt,qe,Me);var Qe=zt.type==="log"&&Te<=0,Je=q.tickText(zt,zt.c2l(Qe?-Te:Te),"hover").text;return Qe?Te===0?"0":w+Je:Je};function ue(zt,Ut,Me){var Te=zt.tickfont||{};return{x:Ut,dx:0,dy:0,text:Me||"",fontSize:Te.size,font:Te.family,fontColor:Te.color}}function ye(zt,Ut,Me,Te){var qe=zt._tickround,Qe=Me&&zt.hoverformat||q.getTickFormat(zt);Te=!Qe&&Te,Te&&(E(qe)?qe=4:qe={y:"m",m:"d",d:"M",M:"S",S:4}[qe]);var Je=T.formatDate(Ut.x,Qe,qe,zt._dateFormat,zt.calendar,zt._extraFormat),We,Oe=Je.indexOf(`
`);if(Oe!==-1&&(We=Je.substr(Oe+1),Je=Je.substr(0,Oe)),Te&&(We!==void 0&&(Je==="00:00:00"||Je==="00:00")?(Je=We,We=""):Je.length===8&&(Je=Je.replace(/:00$/,""))),We)if(Me)qe==="d"?Je+=", "+We:Je=We+(Je?", "+Je:"");else if(!zt._inCalcTicks||zt._prevDateHead!==We)zt._prevDateHead=We,Je+="<br>"+We;else{var rr=Ge(zt),cr=zt._trueSide||zt.side;(!rr&&cr==="top"||rr&&cr==="bottom")&&(Je+="<br> ")}Ut.text=Je}function Tt(zt,Ut,Me,Te,qe){var Qe=zt.dtick,Je=Ut.x,We=zt.tickformat,Oe=typeof Qe=="string"&&Qe.charAt(0);if(qe==="never"&&(qe=""),Te&&Oe!=="L"&&(Qe="L3",Oe="L"),We||Oe==="L")Ut.text=ht(Math.pow(10,Je),zt,qe,Te);else if(E(Qe)||Oe==="D"&&T.mod(Je+.01,1)<.1){var rr=Math.round(Je),cr=Math.abs(rr),lr=zt.exponentformat;lr==="power"||Dt(lr)&&dt(rr)?(rr===0?Ut.text=1:rr===1?Ut.text="10":Ut.text="10<sup>"+(rr>1?"":w)+cr+"</sup>",Ut.fontSize*=1.25):(lr==="e"||lr==="E")&&cr>2?Ut.text="1"+lr+(rr>0?"+":w)+cr:(Ut.text=ht(Math.pow(10,Je),zt,"","fakehover"),Qe==="D1"&&zt._id.charAt(0)==="y"&&(Ut.dy-=Ut.fontSize/6))}else if(Oe==="D")Ut.text=String(Math.round(Math.pow(10,T.mod(Je,1)))),Ut.fontSize*=.75;else throw"unrecognized dtick "+String(Qe);if(zt.dtick==="D1"){var nr=String(Ut.text).charAt(0);(nr==="0"||nr==="1")&&(zt._id.charAt(0)==="y"?Ut.dx-=Ut.fontSize/4:(Ut.dy+=Ut.fontSize/2,Ut.dx+=(zt.range[1]>zt.range[0]?1:-1)*Ut.fontSize*(Je<0?.5:.25)))}}function Ft(zt,Ut){var Me=zt._categories[Math.round(Ut.x)];Me===void 0&&(Me=""),Ut.text=String(Me)}function $t(zt,Ut,Me){var Te=Math.round(Ut.x),qe=zt._categories[Te]||[],Qe=qe[1]===void 0?"":String(qe[1]),Je=qe[0]===void 0?"":String(qe[0]);Me?Ut.text=Je+" - "+Qe:(Ut.text=Qe,Ut.text2=Je)}function Vt(zt,Ut,Me,Te,qe){qe==="never"?qe="":zt.showexponent==="all"&&Math.abs(Ut.x/zt.dtick)<1e-6&&(qe="hide"),Ut.text=ht(Ut.x,zt,qe,Te)}function Nt(zt,Ut,Me,Te,qe){if(zt.thetaunit==="radians"&&!Me){var Qe=Ut.x/180;if(Qe===0)Ut.text="0";else{var Je=Mt(Qe);if(Je[1]>=100)Ut.text=ht(T.deg2rad(Ut.x),zt,qe,Te);else{var We=Ut.x<0;Je[1]===1?Je[0]===1?Ut.text="\u03C0":Ut.text=Je[0]+"\u03C0":Ut.text=["<sup>",Je[0],"</sup>","\u2044","<sub>",Je[1],"</sub>","\u03C0"].join(""),We&&(Ut.text=w+Ut.text)}}}else Ut.text=ht(Ut.x,zt,qe,Te)}function Mt(zt){function Ut(We,Oe){return Math.abs(We-Oe)<=1e-6}function Me(We,Oe){return Ut(Oe,0)?We:Me(Oe,We%Oe)}function Te(We){for(var Oe=1;!Ut(Math.round(We*Oe)/Oe,We);)Oe*=10;return Oe}var qe=Te(zt),Qe=zt*qe,Je=Math.abs(Me(Qe,qe));return[Math.round(Qe/Je),Math.round(qe/Je)]}var Et=["f","p","n","\u03BC","m","","k","M","G","T"];function Dt(zt){return zt==="SI"||zt==="B"}function dt(zt){return zt>14||zt<-15}function ht(zt,Ut,Me,Te){var qe=zt<0,Qe=Ut._tickround,Je=Me||Ut.exponentformat||"B",We=Ut._tickexponent,Oe=q.getTickFormat(Ut),rr=Ut.separatethousands;if(Te){var cr={exponentformat:Je,minexponent:Ut.minexponent,dtick:Ut.showexponent==="none"?Ut.dtick:E(zt)&&Math.abs(zt)||1,range:Ut.showexponent==="none"?Ut.range.map(Ut.r2d):[0,zt||1]};ce(cr),Qe=(Number(cr._tickround)||0)+4,We=cr._tickexponent,Ut.hoverformat&&(Oe=Ut.hoverformat)}if(Oe)return Ut._numFormat(Oe)(zt).replace(/-/g,w);var lr=Math.pow(10,-Qe)/2;if(Je==="none"&&(We=0),zt=Math.abs(zt),zt<lr)zt="0",qe=!1;else{if(zt+=lr,We&&(zt*=Math.pow(10,-We),Qe+=We),Qe===0)zt=String(Math.floor(zt));else if(Qe<0){zt=String(Math.round(zt)),zt=zt.substr(0,zt.length+Qe);for(var nr=Qe;nr<0;nr++)zt+="0"}else{zt=String(zt);var Sr=zt.indexOf(".")+1;Sr&&(zt=zt.substr(0,Sr+Qe).replace(/\.?0+$/,""))}zt=T.numSeparate(zt,Ut._separators,rr)}if(We&&Je!=="hide"){Dt(Je)&&dt(We)&&(Je="power");var kr;We<0?kr=w+-We:Je!=="power"?kr="+"+We:kr=String(We),Je==="e"||Je==="E"?zt+=Je+kr:Je==="power"?zt+="\xD710<sup>"+kr+"</sup>":Je==="B"&&We===9?zt+="B":Dt(Je)&&(zt+=Et[We/3+5])}return qe?w+zt:zt}q.getTickFormat=function(zt){var Ut;function Me(Oe){return typeof Oe!="string"?Oe:Number(Oe.replace("M",""))*x}function Te(Oe,rr){var cr=["L","D"];if(typeof Oe==typeof rr){if(typeof Oe=="number")return Oe-rr;var lr=cr.indexOf(Oe.charAt(0)),nr=cr.indexOf(rr.charAt(0));return lr===nr?Number(Oe.replace(/(L|D)/g,""))-Number(rr.replace(/(L|D)/g,"")):lr-nr}else return typeof Oe=="number"?1:-1}function qe(Oe,rr,cr){var lr=cr||function(kr){return kr},nr=rr[0],Sr=rr[1];return(!nr&&typeof nr!="number"||lr(nr)<=lr(Oe))&&(!Sr&&typeof Sr!="number"||lr(Sr)>=lr(Oe))}function Qe(Oe,rr){var cr=rr[0]===null,lr=rr[1]===null,nr=Te(Oe,rr[0])>=0,Sr=Te(Oe,rr[1])<=0;return(cr||nr)&&(lr||Sr)}var Je,We;if(zt.tickformatstops&&zt.tickformatstops.length>0)switch(zt.type){case"date":case"linear":{for(Ut=0;Ut<zt.tickformatstops.length;Ut++)if(We=zt.tickformatstops[Ut],We.enabled&&qe(zt.dtick,We.dtickrange,Me)){Je=We;break}break}case"log":{for(Ut=0;Ut<zt.tickformatstops.length;Ut++)if(We=zt.tickformatstops[Ut],We.enabled&&Qe(zt.dtick,We.dtickrange)){Je=We;break}break}}return Je?Je.value:zt.tickformat},q.getSubplots=function(zt,Ut){var Me=zt._fullLayout._subplots,Te=Me.cartesian.concat(Me.gl2d||[]),qe=Ut?q.findSubplotsWithAxis(Te,Ut):Te;return qe.sort(function(Qe,Je){var We=Qe.substr(1).split("y"),Oe=Je.substr(1).split("y");return We[0]===Oe[0]?+We[1]-+Oe[1]:+We[0]-+Oe[0]}),qe},q.findSubplotsWithAxis=function(zt,Ut){for(var Me=new RegExp(Ut._id.charAt(0)==="x"?"^"+Ut._id+"y":Ut._id+"$"),Te=[],qe=0;qe<zt.length;qe++){var Qe=zt[qe];Me.test(Qe)&&Te.push(Qe)}return Te},q.makeClipPaths=function(zt){var Ut=zt._fullLayout;if(!Ut._hasOnlyLargeSploms){var Me={_offset:0,_length:Ut.width,_id:""},Te={_offset:0,_length:Ut.height,_id:""},qe=q.list(zt,"x",!0),Qe=q.list(zt,"y",!0),Je=[],We,Oe;for(We=0;We<qe.length;We++)for(Je.push({x:qe[We],y:Te}),Oe=0;Oe<Qe.length;Oe++)We===0&&Je.push({x:Me,y:Qe[Oe]}),Je.push({x:qe[We],y:Qe[Oe]});var rr=Ut._clips.selectAll(".axesclip").data(Je,function(cr){return cr.x._id+cr.y._id});rr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(cr){return"clip"+Ut._uid+cr.x._id+cr.y._id}).append("rect"),rr.exit().remove(),rr.each(function(cr){M.select(this).select("rect").attr({x:cr.x._offset||0,y:cr.y._offset||0,width:cr.x._length||1,height:cr.y._length||1})})}},q.draw=function(zt,Ut,Me){var Te=zt._fullLayout;Ut==="redraw"&&Te._paper.selectAll("g.subplot").each(function(Oe){var rr=Oe[0],cr=Te._plots[rr];if(cr){var lr=cr.xaxis,nr=cr.yaxis;cr.xaxislayer.selectAll("."+lr._id+"tick").remove(),cr.yaxislayer.selectAll("."+nr._id+"tick").remove(),cr.xaxislayer.selectAll("."+lr._id+"tick2").remove(),cr.yaxislayer.selectAll("."+nr._id+"tick2").remove(),cr.xaxislayer.selectAll("."+lr._id+"divider").remove(),cr.yaxislayer.selectAll("."+nr._id+"divider").remove(),cr.minorGridlayer&&cr.minorGridlayer.selectAll("path").remove(),cr.gridlayer&&cr.gridlayer.selectAll("path").remove(),cr.zerolinelayer&&cr.zerolinelayer.selectAll("path").remove(),Te._infolayer.select(".g-"+lr._id+"title").remove(),Te._infolayer.select(".g-"+nr._id+"title").remove()}});var qe=!Ut||Ut==="redraw"?q.listIds(zt):Ut,Qe=q.list(zt),Je=Qe.filter(function(Oe){return Oe.autoshift}).map(function(Oe){return Oe.overlaying});qe.map(function(Oe){var rr=q.getFromId(zt,Oe);if(rr.tickmode==="sync"&&rr.overlaying){var cr=qe.findIndex(function(lr){return lr===rr.overlaying});cr>=0&&qe.unshift(qe.splice(cr,1).shift())}});var We={false:{left:0,right:0}};return T.syncOrAsync(qe.map(function(Oe){return function(){if(Oe){var rr=q.getFromId(zt,Oe);Me||(Me={}),Me.axShifts=We,Me.overlayingShiftedAx=Je;var cr=q.drawOne(zt,rr,Me);return rr._shiftPusher&&or(rr,rr._fullDepth||0,We,!0),rr._r=rr.range.slice(),rr._rl=T.simpleMap(rr._r,rr.r2l),cr}}}))},q.drawOne=function(zt,Ut,Me){Me=Me||{};var Te=Me.axShifts||{},qe=Me.overlayingShiftedAx||[],Qe,Je,We;Ut.setScale();var Oe=zt._fullLayout,rr=Ut._id,cr=rr.charAt(0),lr=q.counterLetter(rr),nr=Oe._plots[Ut._mainSubplot];if(!nr)return;if(Ut._shiftPusher=Ut.autoshift||qe.indexOf(Ut._id)!==-1||qe.indexOf(Ut.overlaying)!==-1,Ut._shiftPusher&Ut.anchor==="free"){var Sr=Ut.linewidth/2||0;Ut.ticks==="inside"&&(Sr+=Ut.ticklen),or(Ut,Sr,Te,!0),or(Ut,Ut.shift||0,Te,!1)}(Me.skipTitle!==!0||Ut._shift===void 0)&&(Ut._shift=sr(Ut,Te));var kr=nr[cr+"axislayer"],Mr=Ut._mainLinePosition,rn=Mr+=Ut._shift,Ur=Ut._mainMirrorPosition,pn=Ut._vals=q.calcTicks(Ut),yn=[Ut.mirror,rn,Ur].join("_");for(Qe=0;Qe<pn.length;Qe++)pn[Qe].axInfo=yn;Ut._selections={},Ut._tickAngles&&(Ut._prevTickAngles=Ut._tickAngles),Ut._tickAngles={},Ut._depth=null;var yr={};function Cr(Pr){var Vr=rr+(Pr||"tick");return yr[Vr]||(yr[Vr]=ne(Ut,Vr,rn)),yr[Vr]}if(Ut.visible){var Dr=q.makeTransTickFn(Ut),Nr=q.makeTransTickLabelFn(Ut),$r,fn,on=Ut.ticks==="inside",In=Ut.ticks==="outside";if(Ut.tickson==="boundaries"){var En=Pt(Ut,pn);fn=q.clipEnds(Ut,En),$r=on?fn:En}else fn=q.clipEnds(Ut,pn),$r=on&&Ut.ticklabelmode!=="period"?fn:pn;var $n=Ut._gridVals=fn,ri=te(Ut,pn);if(!Oe._hasOnlyLargeSploms){var ui=Ut._subplotsWith,ni={};for(Qe=0;Qe<ui.length;Qe++){Je=ui[Qe],We=Oe._plots[Je];var zn=We[lr+"axis"],ur=zn._mainAxis._id;if(!ni[ur]){ni[ur]=1;var Gr=cr==="x"?"M0,"+zn._offset+"v"+zn._length:"M"+zn._offset+",0h"+zn._length;q.drawGrid(zt,Ut,{vals:$n,counterAxis:zn,layer:We.gridlayer.select("."+rr),minorLayer:We.minorGridlayer.select("."+rr),path:Gr,transFn:Dr}),q.drawZeroLine(zt,Ut,{counterAxis:zn,layer:We.zerolinelayer,path:Gr,transFn:Dr})}}}var qr,an=q.getTickSigns(Ut),Mn=q.getTickSigns(Ut,"minor");if(Ut.ticks||Ut.minor&&Ut.minor.ticks){var sn=q.makeTickPath(Ut,rn,an[2]),An=q.makeTickPath(Ut,rn,Mn[2],{minor:!0}),Sn,qn,ii,Mi;if(Ut._anchorAxis&&Ut.mirror&&Ut.mirror!==!0?(Sn=q.makeTickPath(Ut,Ur,an[3]),qn=q.makeTickPath(Ut,Ur,Mn[3],{minor:!0}),ii=sn+Sn,Mi=An+qn):(Sn="",qn="",ii=sn,Mi=An),Ut.showdividers&&In&&Ut.tickson==="boundaries"){var dr={};for(Qe=0;Qe<ri.length;Qe++)dr[ri[Qe].x]=1;qr=function(Pr){return dr[Pr.x]?Sn:ii}}else qr=function(Pr){return Pr.minor?Mi:ii}}if(q.drawTicks(zt,Ut,{vals:$r,layer:kr,path:qr,transFn:Dr}),Ut.mirror==="allticks"){var Er=Object.keys(Ut._linepositions||{});for(Qe=0;Qe<Er.length;Qe++){Je=Er[Qe],We=Oe._plots[Je];var gr=Ut._linepositions[Je]||[],Or=gr[0],vn=gr[1],Tn=gr[2],ln=q.makeTickPath(Ut,Or,Tn?an[0]:Mn[0],{minor:Tn})+q.makeTickPath(Ut,vn,Tn?an[1]:Mn[1],{minor:Tn});q.drawTicks(zt,Ut,{vals:$r,layer:We[cr+"axislayer"],path:ln,transFn:Dr})}}var nn=[];if(nn.push(function(){return q.drawLabels(zt,Ut,{vals:pn,layer:kr,plotinfo:We,transFn:Nr,labelFns:q.makeLabelFns(Ut,rn)})}),Ut.type==="multicategory"){var xr={x:2,y:10}[cr];nn.push(function(){var Pr={x:"height",y:"width"}[cr],Vr=Cr()[Pr]+xr+(Ut._tickAngles[rr+"tick"]?Ut.tickfont.size*J:0);return q.drawLabels(zt,Ut,{vals:Gt(Ut,pn),layer:kr,cls:rr+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Dr,labelFns:q.makeLabelFns(Ut,rn+Vr*an[4])})}),nn.push(function(){return Ut._depth=an[4]*(Cr("tick2")[Ut.side]-rn),_e(zt,Ut,{vals:ri,layer:kr,path:q.makeTickPath(Ut,rn,an[4],{len:Ut._depth}),transFn:Dr})})}else Ut.title.hasOwnProperty("standoff")&&nn.push(function(){Ut._depth=an[4]*(Cr()[Ut.side]-rn)});var jr=C.getComponentMethod("rangeslider","isVisible")(Ut);return!Me.skipTitle&&!(jr&&Ut.side==="bottom")&&nn.push(function(){return hr(zt,Ut)}),nn.push(function(){var Pr=Ut.side.charAt(0),Vr=it[Ut.side].charAt(0),mn=q.getPxPosition(zt,Ut),xn=In?Ut.ticklen:0,_n,Rn,Cn,oi;(Ut.automargin||jr||Ut._shiftPusher)&&(Ut.type==="multicategory"?_n=Cr("tick2"):(_n=Cr(),cr==="x"&&Pr==="b"&&(Ut._depth=Math.max(_n.width>0?_n.bottom-mn:0,xn))));var Jn=0,ai=0;if(Ut._shiftPusher&&(Jn=Math.max(xn,_n.height>0?Pr==="l"?mn-_n.left:_n.right-mn:0),Ut.title.text!==Oe._dfltTitle[cr]&&(ai=(Ut._titleStandoff||0)+(Ut._titleScoot||0),Pr==="l"&&(ai+=De(Ut))),Ut._fullDepth=Math.max(Jn,ai)),Ut.automargin){Rn={x:0,y:0,r:0,l:0,t:0,b:0};var _i=[0,1],ta=typeof Ut._shift=="number"?Ut._shift:0;if(cr==="x"){if(Pr==="b"?Rn[Pr]=Ut._depth:(Rn[Pr]=Ut._depth=Math.max(_n.width>0?mn-_n.top:0,xn),_i.reverse()),_n.width>0){var Yi=_n.right-(Ut._offset+Ut._length);Yi>0&&(Rn.xr=1,Rn.r=Yi);var oo=Ut._offset-_n.left;oo>0&&(Rn.xl=0,Rn.l=oo)}}else if(Pr==="l"?(Ut._depth=Math.max(_n.height>0?mn-_n.left:0,xn),Rn[Pr]=Ut._depth-ta):(Ut._depth=Math.max(_n.height>0?_n.right-mn:0,xn),Rn[Pr]=Ut._depth+ta,_i.reverse()),_n.height>0){var $a=_n.bottom-(Ut._offset+Ut._length);$a>0&&(Rn.yb=0,Rn.b=$a);var Ia=Ut._offset-_n.top;Ia>0&&(Rn.yt=1,Rn.t=Ia)}Rn[lr]=Ut.anchor==="free"?Ut.position:Ut._anchorAxis.domain[_i[0]],Ut.title.text!==Oe._dfltTitle[cr]&&(Rn[Pr]+=De(Ut)+(Ut.title.standoff||0)),Ut.mirror&&Ut.anchor!=="free"&&(Cn={x:0,y:0,r:0,l:0,t:0,b:0},Cn[Vr]=Ut.linewidth,Ut.mirror&&Ut.mirror!==!0&&(Cn[Vr]+=xn),Ut.mirror===!0||Ut.mirror==="ticks"?Cn[lr]=Ut._anchorAxis.domain[_i[1]]:(Ut.mirror==="all"||Ut.mirror==="allticks")&&(Cn[lr]=[Ut._counterDomainMin,Ut._counterDomainMax][_i[1]]))}jr&&(oi=C.getComponentMethod("rangeslider","autoMarginOpts")(zt,Ut)),typeof Ut.automargin=="string"&&(bt(Rn,Ut.automargin),bt(Cn,Ut.automargin)),i.autoMargin(zt,Ze(Ut),Rn),i.autoMargin(zt,Xt(Ut),Cn),i.autoMargin(zt,ie(Ut),oi)}),T.syncOrAsync(nn)}};function bt(zt,Ut){if(zt){var Me=Object.keys(B).reduce(function(Te,qe){return Ut.indexOf(qe)!==-1&&B[qe].forEach(function(Qe){Te[Qe]=1}),Te},{});Object.keys(zt).forEach(function(Te){Me[Te]||(Te.length===1?zt[Te]=0:delete zt[Te])})}}function Pt(zt,Ut){var Me=[],Te,qe=function(Qe,Je){var We=Qe.xbnd[Je];We!==null&&Me.push(T.extendFlat({},Qe,{x:We}))};if(Ut.length){for(Te=0;Te<Ut.length;Te++)qe(Ut[Te],0);qe(Ut[Te-1],1)}return Me}function Gt(zt,Ut){for(var Me=[],Te={},qe=0;qe<Ut.length;qe++){var Qe=Ut[qe];Te[Qe.text2]?Te[Qe.text2].push(Qe.x):Te[Qe.text2]=[Qe.x]}for(var Je in Te)Me.push(ue(zt,T.interp(Te[Je],.5),Je));return Me}function te(zt,Ut){var Me=[],Te,qe,Qe=Ut.length&&Ut[Ut.length-1].x<Ut[0].x,Je=function(Oe,rr){var cr=Oe.xbnd[rr];cr!==null&&Me.push(T.extendFlat({},Oe,{x:cr}))};if(zt.showdividers&&Ut.length){for(Te=0;Te<Ut.length;Te++){var We=Ut[Te];We.text2!==qe&&Je(We,Qe?1:0),qe=We.text2}Je(Ut[Te-1],Qe?0:1)}return Me}function ne(zt,Ut,Me){var Te,qe,Qe,Je;if(zt._selections[Ut].size())Te=1/0,qe=-1/0,Qe=1/0,Je=-1/0,zt._selections[Ut].each(function(){var Oe=pr(this),rr=l.bBox(Oe.node().parentNode);Te=Math.min(Te,rr.top),qe=Math.max(qe,rr.bottom),Qe=Math.min(Qe,rr.left),Je=Math.max(Je,rr.right)});else{var We=q.makeLabelFns(zt,Me);Te=qe=We.yFn({dx:0,dy:0,fontSize:0}),Qe=Je=We.xFn({dx:0,dy:0,fontSize:0})}return{top:Te,bottom:qe,left:Qe,right:Je,height:qe-Te,width:Je-Qe}}q.getTickSigns=function(zt,Ut){var Me=zt._id.charAt(0),Te={x:"top",y:"right"}[Me],qe=zt.side===Te?1:-1,Qe=[-1,1,qe,-qe],Je=Ut?(zt.minor||{}).ticks:zt.ticks;return Je!=="inside"==(Me==="x")&&(Qe=Qe.map(function(We){return-We})),zt.side&&Qe.push({l:-1,t:-1,r:1,b:1}[zt.side.charAt(0)]),Qe},q.makeTransTickFn=function(zt){return zt._id.charAt(0)==="x"?function(Ut){return v(zt._offset+zt.l2p(Ut.x),0)}:function(Ut){return v(0,zt._offset+zt.l2p(Ut.x))}},q.makeTransTickLabelFn=function(zt){var Ut=Ne(zt),Me=Ut[0],Te=Ut[1];return zt._id.charAt(0)==="x"?function(qe){return v(Me+zt._offset+zt.l2p(je(qe)),Te)}:function(qe){return v(Te,Me+zt._offset+zt.l2p(je(qe)))}};function je(zt){return zt.periodX!==void 0?zt.periodX:zt.x}function Ne(zt){var Ut=zt.ticklabelposition||"",Me=function(Sr){return Ut.indexOf(Sr)!==-1},Te=Me("top"),qe=Me("left"),Qe=Me("right"),Je=Me("bottom"),We=Me("inside"),Oe=Je||qe||Te||Qe;if(!Oe&&!We)return[0,0];var rr=zt.side,cr=Oe?(zt.tickwidth||0)/2:0,lr=nt,nr=zt.tickfont?zt.tickfont.size:12;return(Je||Te)&&(cr+=nr*X,lr+=(zt.linewidth||0)/2),(qe||Qe)&&(cr+=(zt.linewidth||0)/2,lr+=nt),We&&rr==="top"&&(lr-=nr*(1-X)),(qe||Te)&&(cr=-cr),(rr==="bottom"||rr==="right")&&(lr=-lr),[Oe?cr:0,We?lr:0]}q.makeTickPath=function(zt,Ut,Me,Te){Te||(Te={});var qe=Te.minor;if(qe&&!zt.minor)return"";var Qe=Te.len!==void 0?Te.len:qe?zt.minor.ticklen:zt.ticklen,Je=zt._id.charAt(0),We=(zt.linewidth||1)/2;return Je==="x"?"M0,"+(Ut+We*Me)+"v"+Qe*Me:"M"+(Ut+We*Me)+",0h"+Qe*Me},q.makeLabelFns=function(zt,Ut,Me){var Te=zt.ticklabelposition||"",qe=function(En){return Te.indexOf(En)!==-1},Qe=qe("top"),Je=qe("left"),We=qe("right"),Oe=qe("bottom"),rr=Oe||Je||Qe||We,cr=qe("inside"),lr=Te==="inside"&&zt.ticks==="inside"||!cr&&zt.ticks==="outside"&&zt.tickson!=="boundaries",nr=0,Sr=0,kr=lr?zt.ticklen:0;if(cr?kr*=-1:rr&&(kr=0),lr&&(nr+=kr,Me)){var Mr=T.deg2rad(Me);nr=kr*Math.cos(Mr)+1,Sr=kr*Math.sin(Mr)}zt.showticklabels&&(lr||zt.showline)&&(nr+=.2*zt.tickfont.size),nr+=(zt.linewidth||1)/2*(cr?-1:1);var rn={labelStandoff:nr,labelShift:Sr},Ur,pn,yn,yr,Cr=0,Dr=zt.side,Nr=zt._id.charAt(0),$r=zt.tickangle,fn;if(Nr==="x")fn=!cr&&Dr==="bottom"||cr&&Dr==="top",yr=fn?1:-1,cr&&(yr*=-1),Ur=Sr*yr,pn=Ut+nr*yr,yn=fn?1:-.2,Math.abs($r)===90&&(cr?yn+=G:$r===-90&&Dr==="bottom"?yn=X:$r===90&&Dr==="top"?yn=G:yn=.5,Cr=G/2*($r/90)),rn.xFn=function(En){return En.dx+Ur+Cr*En.fontSize},rn.yFn=function(En){return En.dy+pn+En.fontSize*yn},rn.anchorFn=function(En,$n){if(rr){if(Je)return"end";if(We)return"start"}return!E($n)||$n===0||$n===180?"middle":$n*yr<0!==cr?"end":"start"},rn.heightFn=function(En,$n,ri){return $n<-60||$n>60?-.5*ri:zt.side==="top"!==cr?-ri:0};else if(Nr==="y"){if(fn=!cr&&Dr==="left"||cr&&Dr==="right",yr=fn?1:-1,cr&&(yr*=-1),Ur=nr,pn=Sr*yr,yn=0,!cr&&Math.abs($r)===90&&($r===-90&&Dr==="left"||$r===90&&Dr==="right"?yn=X:yn=.5),cr){var on=E($r)?+$r:0;if(on!==0){var In=T.deg2rad(on);Cr=Math.abs(Math.sin(In))*X*yr,yn=0}}rn.xFn=function(En){return En.dx+Ut-(Ur+En.fontSize*yn)*yr+Cr*En.fontSize},rn.yFn=function(En){return En.dy+pn+En.fontSize*G},rn.anchorFn=function(En,$n){return E($n)&&Math.abs($n)===90?"middle":fn?"end":"start"},rn.heightFn=function(En,$n,ri){return zt.side==="right"&&($n*=-1),$n<-30?-ri:$n<30?-.5*ri:0}}return rn};function ge(zt){return[zt.text,zt.x,zt.axInfo,zt.font,zt.fontSize,zt.fontColor].join("_")}q.drawTicks=function(zt,Ut,Me){Me=Me||{};var Te=Ut._id+"tick",qe=[].concat(Ut.minor&&Ut.minor.ticks?Me.vals.filter(function(Je){return Je.minor&&!Je.noTick}):[]).concat(Ut.ticks?Me.vals.filter(function(Je){return!Je.minor&&!Je.noTick}):[]),Qe=Me.layer.selectAll("path."+Te).data(qe,ge);Qe.exit().remove(),Qe.enter().append("path").classed(Te,1).classed("ticks",1).classed("crisp",Me.crisp!==!1).each(function(Je){return e.stroke(M.select(this),Je.minor?Ut.minor.tickcolor:Ut.tickcolor)}).style("stroke-width",function(Je){return l.crispRound(zt,Je.minor?Ut.minor.tickwidth:Ut.tickwidth,1)+"px"}).attr("d",Me.path).style("display",null),Ke(Ut,[F]),Qe.attr("transform",Me.transFn)},q.drawGrid=function(zt,Ut,Me){if(Me=Me||{},Ut.tickmode!=="sync"){var Te=Ut._id+"grid",qe=Ut.minor&&Ut.minor.showgrid,Qe=qe?Me.vals.filter(function(Ur){return Ur.minor}):[],Je=Ut.showgrid?Me.vals.filter(function(Ur){return!Ur.minor}):[],We=Me.counterAxis;if(We&&q.shouldShowZeroLine(zt,Ut,We))for(var Oe=Ut.tickmode==="array",rr=0;rr<Je.length;rr++){var cr=Je[rr].x;if(Oe?!cr:Math.abs(cr)<Ut.dtick/100)if(Je=Je.slice(0,rr).concat(Je.slice(rr+1)),Oe)rr--;else break}Ut._gw=l.crispRound(zt,Ut.gridwidth,1);for(var lr=qe?l.crispRound(zt,Ut.minor.gridwidth,1):0,nr=Me.layer,Sr=Me.minorLayer,kr=1;kr>=0;kr--){var Mr=kr?nr:Sr;if(Mr){var rn=Mr.selectAll("path."+Te).data(kr?Je:Qe,ge);rn.exit().remove(),rn.enter().append("path").classed(Te,1).classed("crisp",Me.crisp!==!1),rn.attr("transform",Me.transFn).attr("d",Me.path).each(function(Ur){return e.stroke(M.select(this),Ur.minor?Ut.minor.gridcolor:Ut.gridcolor||"#ddd")}).style("stroke-dasharray",function(Ur){return l.dashStyle(Ur.minor?Ut.minor.griddash:Ut.griddash,Ur.minor?Ut.minor.gridwidth:Ut.gridwidth)}).style("stroke-width",function(Ur){return(Ur.minor?lr:Ut._gw)+"px"}).style("display",null),typeof Me.path=="function"&&rn.attr("d",Me.path)}}Ke(Ut,[D,P])}},q.drawZeroLine=function(zt,Ut,Me){Me=Me||Me;var Te=Ut._id+"zl",qe=q.shouldShowZeroLine(zt,Ut,Me.counterAxis),Qe=Me.layer.selectAll("path."+Te).data(qe?[{x:0,id:Ut._id}]:[]);Qe.exit().remove(),Qe.enter().append("path").classed(Te,1).classed("zl",1).classed("crisp",Me.crisp!==!1).each(function(){Me.layer.selectAll("path").sort(function(Je,We){return V(Je.id,We.id)})}),Qe.attr("transform",Me.transFn).attr("d",Me.path).call(e.stroke,Ut.zerolinecolor||e.defaultLine).style("stroke-width",l.crispRound(zt,Ut.zerolinewidth,Ut._gw||1)+"px").style("display",null),Ke(Ut,[O])},q.drawLabels=function(zt,Ut,Me){Me=Me||{};var Te=zt._fullLayout,qe=Ut._id,Qe=Me.cls||qe+"tick",Je=Me.vals.filter(function(ur){return ur.text}),We=Me.labelFns,Oe=Me.secondary?0:Ut.tickangle,rr=(Ut._prevTickAngles||{})[Qe],cr=Me.layer.selectAll("g."+Qe).data(Ut.showticklabels?Je:[],ge),lr=[];cr.enter().append("g").classed(Qe,1).append("text").attr("text-anchor","middle").each(function(ur){var Gr=M.select(this),qr=zt._promises.length;Gr.call(d.positionText,We.xFn(ur),We.yFn(ur)).call(l.font,ur.font,ur.fontSize,ur.fontColor).text(ur.text).call(d.convertToTspans,zt),zt._promises[qr]?lr.push(zt._promises.pop().then(function(){nr(Gr,Oe)})):nr(Gr,Oe)}),Ke(Ut,[R]),cr.exit().remove(),Me.repositionOnUpdate&&cr.each(function(ur){M.select(this).select("text").call(d.positionText,We.xFn(ur),We.yFn(ur))});function nr(ur,Gr){ur.each(function(qr){var an=M.select(this),Mn=an.select(".text-math-group"),sn=We.anchorFn(qr,Gr),An=Me.transFn.call(an.node(),qr)+(E(Gr)&&+Gr!=0?" rotate("+Gr+","+We.xFn(qr)+","+(We.yFn(qr)-qr.fontSize/2)+")":""),Sn=d.lineCount(an),qn=J*qr.fontSize,ii=We.heightFn(qr,E(Gr)?+Gr:0,(Sn-1)*qn);if(ii&&(An+=v(0,ii)),Mn.empty()){var Mi=an.select("text");Mi.attr({transform:An,"text-anchor":sn}),Mi.style("opacity",1),Ut._adjustTickLabelsOverflow&&Ut._adjustTickLabelsOverflow()}else{var dr=l.bBox(Mn.node()).width,Er=dr*{end:-.5,start:.5}[sn];Mn.attr("transform",An+v(Er,0))}})}Ut._adjustTickLabelsOverflow=function(){var ur=Ut.ticklabeloverflow;if(!(!ur||ur==="allow")){var Gr=ur.indexOf("hide")!==-1,qr=Ut._id.charAt(0)==="x",an=0,Mn=qr?zt._fullLayout.width:zt._fullLayout.height;if(ur.indexOf("domain")!==-1){var sn=T.simpleMap(Ut.range,Ut.r2l);an=Ut.l2p(sn[0])+Ut._offset,Mn=Ut.l2p(sn[1])+Ut._offset}var An=Math.min(an,Mn),Sn=Math.max(an,Mn),qn=Ut.side,ii=1/0,Mi=-1/0;cr.each(function(Or){var vn=M.select(this),Tn=vn.select(".text-math-group");if(Tn.empty()){var ln=l.bBox(vn.node()),nn=0;qr?(ln.right>Sn||ln.left<An)&&(nn=1):(ln.bottom>Sn||ln.top+(Ut.tickangle?0:Or.fontSize/4)<An)&&(nn=1);var xr=vn.select("text");nn?Gr&&xr.style("opacity",0):(xr.style("opacity",1),qn==="bottom"||qn==="right"?ii=Math.min(ii,qr?ln.top:ln.left):ii=-1/0,qn==="top"||qn==="left"?Mi=Math.max(Mi,qr?ln.bottom:ln.right):Mi=1/0)}});for(var dr in Te._plots){var Er=Te._plots[dr];if(!(Ut._id!==Er.xaxis._id&&Ut._id!==Er.yaxis._id)){var gr=qr?Er.yaxis:Er.xaxis;gr&&(gr["_visibleLabelMin_"+Ut._id]=ii,gr["_visibleLabelMax_"+Ut._id]=Mi)}}}},Ut._hideCounterAxisInsideTickLabels=function(ur){var Gr=Ut._id.charAt(0)==="x",qr=[];for(var an in Te._plots){var Mn=Te._plots[an];Ut._id!==Mn.xaxis._id&&Ut._id!==Mn.yaxis._id||qr.push(Gr?Mn.yaxis:Mn.xaxis)}qr.forEach(function(sn,An){sn&&Ge(sn)&&(ur||[O,P,D,F,R]).forEach(function(Sn){var qn=Sn.K==="tick"&&Sn.L==="text"&&Ut.ticklabelmode==="period",ii=Te._plots[Ut._mainSubplot],Mi;Sn.K===O.K?Mi=ii.zerolinelayer.selectAll("."+Ut._id+"zl"):Sn.K===P.K?Mi=ii.minorGridlayer.selectAll("."+Ut._id):Sn.K===D.K?Mi=ii.gridlayer.selectAll("."+Ut._id):Mi=ii[Ut._id.charAt(0)+"axislayer"],Mi.each(function(){var dr=M.select(this);Sn.L&&(dr=dr.selectAll(Sn.L)),dr.each(function(Er){var gr=Ut.l2p(qn?je(Er):Er.x)+Ut._offset,Or=M.select(this);gr<Ut["_visibleLabelMax_"+sn._id]&&gr>Ut["_visibleLabelMin_"+sn._id]?Or.style("display","none"):Sn.K==="tick"&&!An&&Or.style("display",null)})})})})},nr(cr,rr+1?rr:Oe);function Sr(){return lr.length&&Promise.all(lr)}var kr=null;function Mr(){if(nr(cr,Oe),Je.length&&Ut.autotickangles&&(Ut.type!=="log"||String(Ut.dtick).charAt(0)!=="D")){kr=Ut.autotickangles[0];var ur=0,Gr=[],qr,an=1;if(cr.each(function(xn){ur=Math.max(ur,xn.fontSize);var _n=Ut.l2p(xn.x),Rn=pr(this),Cn=l.bBox(Rn.node());an=Math.max(an,d.lineCount(Rn)),Gr.push({top:0,bottom:10,height:10,left:_n-Cn.width/2,right:_n+Cn.width/2+2,width:Cn.width+2})}),(Ut.tickson==="boundaries"||Ut.showdividers)&&!Me.secondary){var Mn=2;for(Ut.ticks&&(Mn+=Ut.tickwidth/2),qr=0;qr<Gr.length;qr++){var sn=Je[qr].xbnd,An=Gr[qr];if(sn[0]!==null&&An.left-Ut.l2p(sn[0])<Mn||sn[1]!==null&&Ut.l2p(sn[1])-An.right<Mn){kr=90;break}}}else{var Sn=Je.length,qn=Math.abs((Je[Sn-1].x-Je[0].x)*Ut._m)/(Sn-1),ii=Ut.ticklabelposition||"",Mi=function(xn){return ii.indexOf(xn)!==-1},dr=Mi("top"),Er=Mi("left"),gr=Mi("right"),Or=Mi("bottom"),vn=Or||Er||dr||gr,Tn=vn?(Ut.tickwidth||0)+2*nt:0,ln=qn,nn=ur*1.25*an,xr=Math.sqrt(Math.pow(ln,2)+Math.pow(nn,2)),jr=ln/xr,Pr=Ut.autotickangles.map(function(xn){return xn*Math.PI/180}),Vr=Pr.find(function(xn){return Math.abs(Math.cos(xn))<=jr});Vr===void 0&&(Vr=Pr.reduce(function(xn,_n){return Math.abs(Math.cos(xn))<Math.abs(Math.cos(_n))?xn:_n},Pr[0]));var mn=Vr*(180/Math.PI);for(qr=0;qr<Gr.length-1;qr++)if(T.bBoxIntersect(Gr[qr],Gr[qr+1],Tn)){kr=mn;break}}kr&&nr(cr,kr)}}Ut._selections&&(Ut._selections[Qe]=cr);var rn=[Sr];Ut.automargin&&Te._redrawFromAutoMarginCount&&rr===90?(kr=rr,rn.push(function(){nr(cr,rr)})):rn.push(Mr),Ut._tickAngles&&rn.push(function(){Ut._tickAngles[Qe]=kr===null?E(Oe)?Oe:0:kr});var Ur=function(){var ur=0,Gr=0;return cr.each(function(qr,an){var Mn=pr(this),sn=Mn.select(".text-math-group");if(sn.empty()){var An;Ut._vals[an]&&(An=Ut._vals[an].bb||l.bBox(Mn.node()),Ut._vals[an].bb=An),ur=Math.max(ur,An.width),Gr=Math.max(Gr,An.height)}}),{labelsMaxW:ur,labelsMaxH:Gr}},pn=Ut._anchorAxis;if(pn&&(pn.autorange||pn.insiderange)&&Ge(Ut)&&!rt(Te,Ut._id)&&(Te._insideTickLabelsUpdaterange||(Te._insideTickLabelsUpdaterange={}),pn.autorange&&(Te._insideTickLabelsUpdaterange[pn._name+".autorange"]=pn.autorange,rn.push(Ur)),pn.insiderange)){var yn=Ur(),yr=Ut._id.charAt(0)==="y"?yn.labelsMaxW:yn.labelsMaxH;yr+=2*nt,Ut.ticklabelposition==="inside"&&(yr+=Ut.ticklen||0);var Cr=Ut.side==="right"||Ut.side==="top"?1:-1,Dr=Cr===1?1:0,Nr=Cr===1?0:1,$r=[];$r[Nr]=pn.range[Nr];var fn=pn.range,on=pn.r2p(fn[Dr]),In=pn.r2p(fn[Nr]),En=Te._insideTickLabelsUpdaterange[pn._name+".range"];if(En){var $n=pn.r2p(En[Dr]),ri=pn.r2p(En[Nr]),ui=Cr*(Ut._id.charAt(0)==="y"?1:-1);ui*on<ui*$n&&(on=$n,$r[Dr]=fn[Dr]=En[Dr]),ui*In>ui*ri&&(In=ri,$r[Nr]=fn[Nr]=En[Nr])}var ni=Math.abs(In-on);ni-yr>0?(ni-=yr,yr*=1+yr/ni):yr=0,Ut._id.charAt(0)!=="y"&&(yr=-yr),$r[Dr]=pn.p2r(pn.r2p(fn[Dr])+Cr*yr),pn.autorange==="min"||pn.autorange==="max reversed"?($r[0]=null,pn._rangeInitial0=void 0,pn._rangeInitial1=void 0):(pn.autorange==="max"||pn.autorange==="min reversed")&&($r[1]=null,pn._rangeInitial0=void 0,pn._rangeInitial1=void 0),Te._insideTickLabelsUpdaterange[pn._name+".range"]=$r}var zn=T.syncOrAsync(rn);return zn&&zn.then&&zt._promises.push(zn),zn};function _e(zt,Ut,Me){var Te=Ut._id+"divider",qe=Me.vals,Qe=Me.layer.selectAll("path."+Te).data(qe,ge);Qe.exit().remove(),Qe.enter().insert("path",":first-child").classed(Te,1).classed("crisp",1).call(e.stroke,Ut.dividercolor).style("stroke-width",l.crispRound(zt,Ut.dividerwidth,1)+"px"),Qe.attr("transform",Me.transFn).attr("d",Me.path)}q.getPxPosition=function(zt,Ut){var Me=zt._fullLayout._size,Te=Ut._id.charAt(0),qe=Ut.side,Qe;if(Ut.anchor!=="free"?Qe=Ut._anchorAxis:Te==="x"?Qe={_offset:Me.t+(1-(Ut.position||0))*Me.h,_length:0}:Te==="y"&&(Qe={_offset:Me.l+(Ut.position||0)*Me.w+Ut._shift,_length:0}),qe==="top"||qe==="left")return Qe._offset;if(qe==="bottom"||qe==="right")return Qe._offset+Qe._length};function De(zt){var Ut=zt.title.font.size,Me=(zt.title.text.match(d.BR_TAG_ALL)||[]).length;return zt.title.hasOwnProperty("standoff")?Me?Ut*(X+Me*J):Ut*X:Me?Ut*(Me+1)*J:Ut}function hr(zt,Ut){var Me=zt._fullLayout,Te=Ut._id,qe=Te.charAt(0),Qe=Ut.title.font.size,Je;if(Ut.title.hasOwnProperty("standoff"))Je=Ut._depth+Ut.title.standoff+De(Ut);else{var We=Ge(Ut);if(Ut.type==="multicategory")Je=Ut._depth;else{var Oe=1.5*Qe;We&&(Oe=.5*Qe,Ut.ticks==="outside"&&(Oe+=Ut.ticklen)),Je=10+Oe+(Ut.linewidth?Ut.linewidth-1:0)}We||(qe==="x"?Je+=Ut.side==="top"?Qe*(Ut.showticklabels?1:0):Qe*(Ut.showticklabels?1.5:.5):Je+=Ut.side==="right"?Qe*(Ut.showticklabels?1:.5):Qe*(Ut.showticklabels?.5:0))}var rr=q.getPxPosition(zt,Ut),cr,lr,nr;qe==="x"?(lr=Ut._offset+Ut._length/2,nr=Ut.side==="top"?rr-Je:rr+Je):(nr=Ut._offset+Ut._length/2,lr=Ut.side==="right"?rr+Je:rr-Je,cr={rotate:"-90",offset:0});var Sr;if(Ut.type!=="multicategory"){var kr=Ut._selections[Ut._id+"tick"];if(Sr={selection:kr,side:Ut.side},kr&&kr.node()&&kr.node().parentNode){var Mr=l.getTranslate(kr.node().parentNode);Sr.offsetLeft=Mr.x,Sr.offsetTop=Mr.y}Ut.title.hasOwnProperty("standoff")&&(Sr.pad=0)}return Ut._titleStandoff=Je,r.draw(zt,Te+"title",{propContainer:Ut,propName:Ut._name+".title.text",placeholder:Me._dfltTitle[qe],avoid:Sr,transform:cr,attributes:{x:lr,y:nr,"text-anchor":"middle"}})}q.shouldShowZeroLine=function(zt,Ut,Me){var Te=T.simpleMap(Ut.range,Ut.r2l);return Te[0]*Te[1]<=0&&Ut.zeroline&&(Ut.type==="linear"||Ut.type==="-")&&!(Ut.rangebreaks&&Ut.maskBreaks(0)===I)&&(fe(Ut,0)||!Be(zt,Ut,Me,Te)||He(zt,Ut))},q.clipEnds=function(zt,Ut){return Ut.filter(function(Me){return fe(zt,Me.x)})};function fe(zt,Ut){var Me=zt.l2p(Ut);return Me>1&&Me<zt._length-1}function Be(zt,Ut,Me,Te){var qe=Me._mainAxis;if(!qe)return;var Qe=zt._fullLayout,Je=Ut._id.charAt(0),We=q.counterLetter(Ut._id),Oe=Ut._offset+(Math.abs(Te[0])<Math.abs(Te[1])==(Je==="x")?0:Ut._length);function rr(kr){if(!kr.showline||!kr.linewidth)return!1;var Mr=Math.max((kr.linewidth+Ut.zerolinewidth)/2,1);function rn(yn){return typeof yn=="number"&&Math.abs(yn-Oe)<Mr}if(rn(kr._mainLinePosition)||rn(kr._mainMirrorPosition))return!0;var Ur=kr._linepositions||{};for(var pn in Ur)if(rn(Ur[pn][0])||rn(Ur[pn][1]))return!0}var cr=Qe._plots[Me._mainSubplot];if(!(cr.mainplotinfo||cr).overlays.length)return rr(Me);for(var lr=q.list(zt,We),nr=0;nr<lr.length;nr++){var Sr=lr[nr];if(Sr._mainAxis===qe&&rr(Sr))return!0}}function He(zt,Ut){for(var Me=zt._fullData,Te=Ut._mainSubplot,qe=Ut._id.charAt(0),Qe=0;Qe<Me.length;Qe++){var Je=Me[Qe];if(Je.visible===!0&&Je.xaxis+Je.yaxis===Te&&(C.traceIs(Je,"bar-like")&&Je.orientation==={x:"h",y:"v"}[qe]||Je.fill&&Je.fill.charAt(Je.fill.length-1)===qe))return!0}return!1}function pr(zt){var Ut=M.select(zt),Me=Ut.select(".text-math-group");return Me.empty()?Ut.select("text"):Me}q.allowAutoMargin=function(zt){for(var Ut=q.list(zt,"",!0),Me=0;Me<Ut.length;Me++){var Te=Ut[Me];Te.automargin&&(i.allowAutoMargin(zt,Ze(Te)),Te.mirror&&i.allowAutoMargin(zt,Xt(Te))),C.getComponentMethod("rangeslider","isVisible")(Te)&&i.allowAutoMargin(zt,ie(Te))}};function Ze(zt){return zt._id+".automargin"}function Xt(zt){return Ze(zt)+".mirror"}function ie(zt){return zt._id+".rangeslider"}q.swap=function(zt,Ut){for(var Me=pe(zt,Ut),Te=0;Te<Me.length;Te++)Ce(zt,Me[Te].x,Me[Te].y)};function pe(zt,Ut){var Me=[],Te,qe;for(Te=0;Te<Ut.length;Te++){var Qe=[],Je=zt._fullData[Ut[Te]].xaxis,We=zt._fullData[Ut[Te]].yaxis;if(!(!Je||!We)){for(qe=0;qe<Me.length;qe++)(Me[qe].x.indexOf(Je)!==-1||Me[qe].y.indexOf(We)!==-1)&&Qe.push(qe);if(!Qe.length){Me.push({x:[Je],y:[We]});continue}var Oe=Me[Qe[0]],rr;if(Qe.length>1)for(qe=1;qe<Qe.length;qe++)rr=Me[Qe[qe]],ke(Oe.x,rr.x),ke(Oe.y,rr.y);ke(Oe.x,[Je]),ke(Oe.y,[We])}}return Me}function ke(zt,Ut){for(var Me=0;Me<Ut.length;Me++)zt.indexOf(Ut[Me])===-1&&zt.push(Ut[Me])}function Ce(zt,Ut,Me){var Te=[],qe=[],Qe=zt.layout,Je,We;for(Je=0;Je<Ut.length;Je++)Te.push(q.getFromId(zt,Ut[Je]));for(Je=0;Je<Me.length;Je++)qe.push(q.getFromId(zt,Me[Je]));var Oe=Object.keys(n),rr=["anchor","domain","overlaying","position","side","tickangle","editType"],cr=["linear","log"];for(Je=0;Je<Oe.length;Je++){var lr=Oe[Je],nr=Te[0][lr],Sr=qe[0][lr],kr=!0,Mr=!1,rn=!1;if(!(lr.charAt(0)==="_"||typeof nr=="function"||rr.indexOf(lr)!==-1)){for(We=1;We<Te.length&&kr;We++){var Ur=Te[We][lr];lr==="type"&&cr.indexOf(nr)!==-1&&cr.indexOf(Ur)!==-1&&nr!==Ur?Mr=!0:Ur!==nr&&(kr=!1)}for(We=1;We<qe.length&&kr;We++){var pn=qe[We][lr];lr==="type"&&cr.indexOf(Sr)!==-1&&cr.indexOf(pn)!==-1&&Sr!==pn?rn=!0:qe[We][lr]!==Sr&&(kr=!1)}kr&&(Mr&&(Qe[Te[0]._name].type="linear"),rn&&(Qe[qe[0]._name].type="linear"),Fe(Qe,lr,Te,qe,zt._fullLayout._dfltTitle))}}for(Je=0;Je<zt._fullLayout.annotations.length;Je++){var yn=zt._fullLayout.annotations[Je];Ut.indexOf(yn.xref)!==-1&&Me.indexOf(yn.yref)!==-1&&T.swapAttrs(Qe.annotations[Je],["?"])}}function Fe(zt,Ut,Me,Te,qe){var Qe=T.nestedProperty,Je=Qe(zt[Me[0]._name],Ut).get(),We=Qe(zt[Te[0]._name],Ut).get(),Oe;for(Ut==="title"&&(Je&&Je.text===qe.x&&(Je.text=qe.y),We&&We.text===qe.y&&(We.text=qe.x)),Oe=0;Oe<Me.length;Oe++)Qe(zt,Me[Oe]._name+"."+Ut).set(We);for(Oe=0;Oe<Te.length;Oe++)Qe(zt,Te[Oe]._name+"."+Ut).set(Je)}function Re(zt){return zt._id==="angularaxis"}function be(zt,Ut){for(var Me=Ut._rangebreaks.length,Te=0;Te<Me;Te++){var qe=Ut._rangebreaks[Te];if(zt>=qe.min&&zt<qe.max)return qe.max}return zt}function Ge(zt){return(zt.ticklabelposition||"").indexOf("inside")!==-1}function Ke(zt,Ut){Ge(zt._anchorAxis||{})&&zt._hideCounterAxisInsideTickLabels&&zt._hideCounterAxisInsideTickLabels(Ut)}function or(zt,Ut,Me,Te){var qe=zt.anchor!=="free"&&(zt.overlaying===void 0||zt.overlaying===!1)?zt._id:zt.overlaying,Qe;Te?Qe=zt.side==="right"?Ut:-Ut:Qe=Ut,qe in Me||(Me[qe]={}),zt.side in Me[qe]||(Me[qe][zt.side]=0),Me[qe][zt.side]+=Qe}function sr(zt,Ut){return zt.autoshift?Ut[zt.overlaying][zt.side]:zt.shift||0}},52976:function(Q,U,t){var M=t(38248),E=t(3400),i=t(39032).BADNUM,C=E.isArrayOrTypedArray,T=E.isDateTime,v=E.cleanNumber,d=Math.round;Q.exports=function(p,b,h){var _=p,a=h.noMultiCategory;if(C(_)&&!_.length)return"-";if(!a&&o(_))return"multicategory";if(a&&Array.isArray(_[0])){for(var c=[],f=0;f<_.length;f++)if(C(_[f]))for(var x=0;x<_[f].length;x++)c.push(_[f][x]);_=c}if(l(_,b))return"date";var k=h.autotypenumbers!=="strict";return s(_,k)?"category":e(_,k)?"linear":"-"};function r(p,b){return b?M(p):typeof p=="number"}function e(p,b){for(var h=p.length,_=0;_<h;_++)if(r(p[_],b))return!0;return!1}function l(p,b){for(var h=p.length,_=n(h),a=0,c=0,f={},x=0;x<h;x+=_){var k=d(x),y=p[k],A=String(y);f[A]||(f[A]=1,T(y,b)&&a++,M(y)&&c++)}return a>c*2}function n(p){return Math.max(1,(p-1)/1e3)}function s(p,b){for(var h=p.length,_=n(h),a=0,c=0,f={},x=0;x<h;x+=_){var k=d(x),y=p[k],A=String(y);if(!f[A]){f[A]=1;var L=typeof y;L==="boolean"?c++:(b?v(y)!==i:L==="number")?a++:L==="string"&&c++}}return c>a*2}function o(p){return C(p[0])&&C(p[1])}},28336:function(Q,U,t){var M=t(38248),E=t(24040),i=t(3400),C=t(31780),T=t(51272),v=t(94724),d=t(26332),r=t(25404),e=t(95936),l=t(42568),n=t(22416),s=t(42136),o=t(96312),p=t(78344),b=t(33816).WEEKDAY_PATTERN,h=t(33816).HOUR_PATTERN;Q.exports=function(f,x,k,y,A){var L=y.letter,u=y.font||{},m=y.splomStash||{},S=k("visible",!y.visibleDflt),w=x._template||{},I=x.type||w.type||"-",O;if(I==="date"){var D=E.getComponentMethod("calendars","handleDefaults");D(f,x,"calendar",y.calendar),y.noTicklabelmode||(O=k("ticklabelmode"))}var P="";(!y.noTicklabelposition||I==="multicategory")&&(P=i.coerce(f,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:O==="period"?["outside","inside"]:L==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),y.noTicklabeloverflow||k("ticklabeloverflow",P.indexOf("inside")!==-1?"hide past domain":I==="category"||I==="multicategory"?"allow":"hide past div"),p(x,A),o(f,x,k,y),n(f,x,k,y),I!=="category"&&!y.noHover&&k("hoverformat");var F=k("color"),R=F!==v.color.dflt?F:u.color,B=m.label||A._dfltTitle[L];if(l(f,x,k,I,y),!S)return x;k("title.text",B),i.coerceFont(k,"title.font",{family:u.family,size:i.bigFont(u.size),color:R}),d(f,x,k,I);var N=y.hasMinor;if(N&&(C.newContainer(x,"minor"),d(f,x,k,I,{isMinor:!0})),e(f,x,k,I,y),r(f,x,k,y),N){var G=y.isMinor;y.isMinor=!0,r(f,x,k,y),y.isMinor=G}s(f,x,k,{dfltColor:F,bgColor:y.bgColor,showGrid:y.showGrid,hasMinor:N,attributes:v}),N&&!x.minor.ticks&&!x.minor.showgrid&&delete x.minor,(x.showline||x.ticks)&&k("mirror");var X=I==="multicategory";if(!y.noTickson&&(I==="category"||X)&&(x.ticks||x.showgrid)){var J;X&&(J="boundaries");var it=k("tickson",J);it==="boundaries"&&delete x.ticklabelposition}if(X){var nt=k("showdividers");nt&&(k("dividercolor"),k("dividerwidth"))}if(I==="date")if(T(f,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:_}),!x.rangebreaks.length)delete x.rangebreaks;else{for(var q=0;q<x.rangebreaks.length;q++)if(x.rangebreaks[q].pattern===b){x._hasDayOfWeekBreaks=!0;break}if(p(x,A),A._has("scattergl")||A._has("splom"))for(var Z=0;Z<y.data.length;Z++){var $=y.data[Z];($.type==="scattergl"||$.type==="splom")&&($.visible=!1,i.warn($.type+" traces do not work on axes with rangebreaks. Setting trace "+$.index+" to `visible: false`."))}}return x};function _(f,x,k){function y(D,P){return i.coerce(f,x,v.rangebreaks,D,P)}var A=y("enabled");if(A){var L=y("bounds");if(L&&L.length>=2){var u="",m,S;if(L.length===2){for(m=0;m<2;m++)if(S=c(L[m]),S){u=b;break}}var w=y("pattern",u);if(w===b)for(m=0;m<2;m++)S=c(L[m]),S&&(x.bounds[m]=L[m]=S-1);if(w)for(m=0;m<2;m++)switch(S=L[m],w){case b:if(!M(S)){x.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){x.enabled=!1;return}x.bounds[m]=L[m]=S;break;case h:if(!M(S)){x.enabled=!1;return}if(S=+S,S<0||S>24){x.enabled=!1;return}x.bounds[m]=L[m]=S;break}if(k.autorange===!1){var I=k.range;if(I[0]<I[1]){if(L[0]<I[0]&&L[1]>I[1]){x.enabled=!1;return}}else if(L[0]>I[0]&&L[1]<I[1]){x.enabled=!1;return}}}else{var O=y("values");if(O&&O.length)y("dvalue");else{x.enabled=!1;return}}}}var a={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function c(f){if(typeof f=="string")return a[f.substr(0,3).toLowerCase()]}},29736:function(Q,U,t){var M=t(26880),E=M.FORMAT_LINK,i=M.DATE_FORMAT_LINK;function C(d,r){return{valType:"string",dflt:"",editType:"none",description:(r?T:v)("hover text",d)+["By default the values are formatted using "+(r?"generic number format":"`"+d+"axis.hoverformat`")+"."].join(" ")}}function T(d,r){return["Sets the "+d+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+E+"."].join(" ")}function v(d,r){return T(d,r)+[" And for dates see: "+i+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}Q.exports={axisHoverFormat:C,descriptionOnlyNumbers:T,descriptionWithDates:v}},79811:function(Q,U,t){var M=t(24040),E=t(33816);U.id2name=function(C){if(!(typeof C!="string"||!C.match(E.AX_ID_PATTERN))){var T=C.split(" ")[0].substr(1);return T==="1"&&(T=""),C.charAt(0)+"axis"+T}},U.name2id=function(C){if(C.match(E.AX_NAME_PATTERN)){var T=C.substr(5);return T==="1"&&(T=""),C.charAt(0)+T}},U.cleanId=function(C,T,v){var d=/( domain)$/.test(C);if(!(typeof C!="string"||!C.match(E.AX_ID_PATTERN))&&!(T&&C.charAt(0)!==T)&&!(d&&!v)){var r=C.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),C.charAt(0)+r+(d&&v?" domain":"")}},U.list=function(C,T,v){var d=C._fullLayout;if(!d)return[];var r=U.listIds(C,T),e=new Array(r.length),l;for(l=0;l<r.length;l++){var n=r[l];e[l]=d[n.charAt(0)+"axis"+n.substr(1)]}if(!v){var s=d._subplots.gl3d||[];for(l=0;l<s.length;l++){var o=d[s[l]];T?e.push(o[T+"axis"]):e.push(o.xaxis,o.yaxis,o.zaxis)}}return e},U.listIds=function(C,T){var v=C._fullLayout;if(!v)return[];var d=v._subplots;return T?d[T+"axis"]:d.xaxis.concat(d.yaxis)},U.getFromId=function(C,T,v){var d=C._fullLayout;return T=T===void 0||typeof T!="string"?T:T.replace(" domain",""),v==="x"?T=T.replace(/y[0-9]*/,""):v==="y"&&(T=T.replace(/x[0-9]*/,"")),d[U.id2name(T)]},U.getFromTrace=function(C,T,v){var d=C._fullLayout,r=null;if(M.traceIs(T,"gl3d")){var e=T.scene;e.substr(0,5)==="scene"&&(r=d[e][v+"axis"])}else r=U.getFromId(C,T[v+"axis"]||v);return r},U.idSort=function(C,T){var v=C.charAt(0),d=T.charAt(0);return v!==d?v>d?1:-1:+(C.substr(1)||1)-+(T.substr(1)||1)},U.ref2id=function(C){return/^[xyz]/.test(C)?C.split(" ")[0]:!1};function i(C,T){if(T&&T.length){for(var v=0;v<T.length;v++)if(T[v][C])return!0}return!1}U.isLinked=function(C,T){return i(T,C._axisMatchGroups)||i(T,C._axisConstraintGroups)}},22416:function(Q,U,t){var M=t(38116).isTypedArraySpec;function E(i,C){var T=C.dataAttr||i._id.charAt(0),v={},d,r,e;if(C.axData)d=C.axData;else for(d=[],r=0;r<C.data.length;r++){var l=C.data[r];l[T+"axis"]===i._id&&d.push(l)}for(r=0;r<d.length;r++){var n=d[r][T];for(e=0;e<n.length;e++){var s=n[e];s!=null&&(v[s]=1)}}return Object.keys(v)}Q.exports=function(i,C,T,v){if(C.type==="category"){var d=i.categoryarray,r=Array.isArray(d)&&d.length>0||M(d),e;r&&(e="array");var l=T("categoryorder",e),n;l==="array"&&(n=T("categoryarray")),!r&&l==="array"&&(l=C.categoryorder="trace"),l==="trace"?C._initialCategories=[]:l==="array"?C._initialCategories=n.slice():(n=E(C,v).sort(),l==="category ascending"?C._initialCategories=n:l==="category descending"&&(C._initialCategories=n.reverse()))}}},98728:function(Q,U,t){var M=t(38248),E=t(3400),i=t(39032),C=i.ONEDAY,T=i.ONEWEEK;U.dtick=function(v,d){var r=d==="log",e=d==="date",l=d==="category",n=e?C:1;if(!v)return n;if(M(v))return v=Number(v),v<=0?n:l?Math.max(1,Math.round(v)):e?Math.max(.1,v):v;if(typeof v!="string"||!(e||r))return n;var s=v.charAt(0),o=v.substr(1);return o=M(o)?Number(o):0,o<=0||!(e&&s==="M"&&o===Math.round(o)||r&&s==="L"||r&&s==="D"&&(o===1||o===2))?n:v},U.tick0=function(v,d,r,e){if(d==="date")return E.cleanDate(v,E.dateTick0(r,e%T===0?1:0));if(!(e==="D1"||e==="D2"))return M(v)?Number(v):0}},33816:function(Q,U,t){var M=t(53756).counter;Q.exports={idRegex:{x:M("x","( domain)?"),y:M("y","( domain)?")},attrRegex:M("[xy]axis"),xAxisMatch:M("xaxis"),yAxisMatch:M("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},71888:function(Q,U,t){var M=t(3400),E=t(19280),i=t(79811).id2name,C=t(94724),T=t(21160),v=t(78344),d=t(39032).ALMOST_EQUAL,r=t(84284).FROM_BL;U.handleDefaults=function(h,_,a){var c=a.axIds,f=a.axHasImage,x=_._axisConstraintGroups=[],k=_._axisMatchGroups=[],y,A,L,u,m,S,w,I;for(y=0;y<c.length;y++)u=i(c[y]),m=h[u],S=_[u],e(m,S,{axIds:c,layoutOut:_,hasImage:f[u]});function O(J,it){for(y=0;y<J.length;y++){A=J[y];for(L in A)_[i(L)][it]=A}}for(O(k,"_matchGroup"),y=0;y<x.length;y++){A=x[y];for(L in A)if(S=_[i(L)],S.fixedrange){for(var D in A){var P=i(D);(h[P]||{}).fixedrange===!1&&M.warn("fixedrange was specified as false for axis "+P+" but was overridden because another axis in its constraint group has fixedrange true"),_[P].fixedrange=!0}break}}for(y=0;y<x.length;){A=x[y];for(L in A){S=_[i(L)],S._matchGroup&&Object.keys(S._matchGroup).length===Object.keys(A).length&&(x.splice(y,1),y--);break}y++}O(x,"_constraintGroup");var F=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],R=!1,B=!1;function N(){I=S[w],w==="rangebreaks"&&(B=S._hasDayOfWeekBreaks)}for(y=0;y<k.length;y++){A=k[y];for(var G=0;G<F.length;G++){w=F[G],I=null;var X;for(L in A)if(u=i(L),m=h[u],S=_[u],w in S){if(!S.matches&&(X=S,w in m)){N();break}I===null&&w in m&&N()}if(w==="range"&&I&&m.range&&m.range.length===2&&m.range[0]!==null&&m.range[1]!==null&&(R=!0),w==="autorange"&&I===null&&R&&(I=!1),I===null&&w in X&&(I=X[w]),I!==null)for(L in A)S=_[i(L)],S[w]=w==="range"?I.slice():I,w==="rangebreaks"&&(S._hasDayOfWeekBreaks=B,v(S,_))}}};function e(h,_,a){var c=a.axIds,f=a.layoutOut,x=a.hasImage,k=f._axisConstraintGroups,y=f._axisMatchGroups,A=_._id,L=A.charAt(0),u=((f._splomAxes||{})[L]||{})[A]||{},m=_._id,S=m.charAt(0)==="x";_._matchGroup=null,_._constraintGroup=null;function w(Z,$){return M.coerce(h,_,C,Z,$)}w("constrain",x?"domain":"range"),M.coerce(h,_,{constraintoward:{valType:"enumerated",values:S?["left","center","right"]:["bottom","middle","top"],dflt:S?"center":"middle"}},"constraintoward");var I=_.type,O,D,P=[];for(O=0;O<c.length;O++)if(D=c[O],D!==m){var F=f[i(D)];F.type===I&&P.push(D)}var R=n(k,m);if(R){var B=[];for(O=0;O<P.length;O++)D=P[O],R[D]||B.push(D);P=B}var N=P.length,G,X;N&&(h.matches||u.matches)&&(G=M.coerce(h,_,{matches:{valType:"enumerated",values:P,dflt:P.indexOf(u.matches)!==-1?u.matches:void 0}},"matches"));var J=x&&!S?_.anchor:void 0;if(N&&!G&&(h.scaleanchor||J)&&(X=M.coerce(h,_,{scaleanchor:{valType:"enumerated",values:P.concat([!1])}},"scaleanchor",J)),G){_._matchGroup=s(y,m,G,1);var it=f[i(G)],nt=l(f,_)/l(f,it);S!==(G.charAt(0)==="x")&&(nt=(S?"x":"y")+nt),s(k,m,G,nt)}else h.matches&&c.indexOf(h.matches)!==-1&&M.warn("ignored "+_._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(X){var q=w("scaleratio");q||(q=_.scaleratio=1),s(k,m,X,q)}else h.scaleanchor&&c.indexOf(h.scaleanchor)!==-1&&M.warn("ignored "+_._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function l(h,_){var a=_.domain;return a||(a=h[i(_.overlaying)].domain),a[1]-a[0]}function n(h,_){for(var a=0;a<h.length;a++)if(h[a][_])return h[a];return null}function s(h,_,a,c){var f,x,k,y,A,L=n(h,_);L===null?(L={},L[_]=1,A=h.length,h.push(L)):A=h.indexOf(L);var u=Object.keys(L);for(f=0;f<h.length;f++)if(k=h[f],f!==A&&k[a]){var m=k[a];for(x=0;x<u.length;x++)y=u[x],k[y]=o(m,o(c,L[y]));h.splice(A,1);return}if(c!==1)for(x=0;x<u.length;x++){var S=u[x];L[S]=o(c,L[S])}L[a]=1}function o(h,_){var a="",c="",f,x;typeof h=="string"&&(a=h.match(/^[xy]*/)[0],f=a.length,h=+h.substr(f)),typeof _=="string"&&(c=_.match(/^[xy]*/)[0],x=c.length,_=+_.substr(x));var k=h*_;return!f&&!x?k:!f||!x||a.charAt(0)===c.charAt(0)?a+c+h*_:f===x?k:(f>x?a.substr(x):c.substr(f))+k}function p(h,_){for(var a=_._size,c=a.h/a.w,f={},x=Object.keys(h),k=0;k<x.length;k++){var y=x[k],A=h[y];if(typeof A=="string"){var L=A.match(/^[xy]*/)[0],u=L.length;A=+A.substr(u);for(var m=L.charAt(0)==="y"?c:1/c,S=0;S<u;S++)A*=m}f[y]=A}return f}U.enforce=function(h){var _=h._fullLayout,a=_._axisConstraintGroups||[],c,f,x,k,y,A,L,u;for(c=0;c<a.length;c++){x=p(a[c],_);var m=Object.keys(x),S=1/0,w=0,I=1/0,O={},D={},P=!1;for(f=0;f<m.length;f++)k=m[f],D[k]=y=_[i(k)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),O[k]=A=Math.abs(y._m)/x[k],S=Math.min(S,A),(y.constrain==="domain"||!y._constraintShrinkable)&&(I=Math.min(I,A)),delete y._constraintShrinkable,w=Math.max(w,A),y.constrain==="domain"&&(P=!0);if(!(S>d*w&&!P)){for(f=0;f<m.length;f++)if(k=m[f],A=O[k],y=D[k],L=y.constrain,A!==I||L==="domain")if(u=A/I,L==="range")T(y,u);else{var F=y._inputDomain,R=(y.domain[1]-y.domain[0])/(F[1]-F[0]),B=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if(u/=R,u*B<1){y.domain=y._input.domain=F.slice(),T(y,u);continue}if(B<1&&(y.range=y._input.range=y._inputRange.slice(),u*=B),y.autorange){var N=y.r2l(y.range[0]),G=y.r2l(y.range[1]),X=(N+G)/2,J=X,it=X,nt=Math.abs(G-X),q=X-nt*u*1.0001,Z=X+nt*u*1.0001,$=E.makePadFn(_,y,0),V=E.makePadFn(_,y,1);b(y,u);var rt=Math.abs(y._m),ot=E.concatExtremes(h,y),H=ot.min,Y=ot.max,at,et;for(et=0;et<H.length;et++)at=H[et].val-$(H[et])/rt,at>q&&at<J&&(J=at);for(et=0;et<Y.length;et++)at=Y[et].val+V(Y[et])/rt,at<Z&&at>it&&(it=at);var ct=(it-J)/(2*nt);u/=ct,J=y.l2r(J),it=y.l2r(it),y.range=y._input.range=N<G?[J,it]:[it,J]}b(y,u)}}}},U.getAxisGroup=function(h,_){for(var a=h._axisMatchGroups,c=0;c<a.length;c++){var f=a[c];if(f[_])return"g"+c}return _},U.clean=function(h,_){if(_._inputDomain){for(var a=!1,c=_._id,f=h._fullLayout._axisConstraintGroups,x=0;x<f.length;x++)if(f[x][c]){a=!0;break}(!a||_.constrain!=="domain")&&(_._input.domain=_.domain=_._inputDomain,delete _._inputDomain)}};function b(h,_){var a=h._inputDomain,c=r[h.constraintoward],f=a[0]+(a[1]-a[0])*c;h.domain=h._input.domain=[f+(a[0]-f)/_,f+(a[1]-f)/_],h.setScale()}},51184:function(Q,U,t){var M=t(33428),E=t(3400),i=E.numberFormat,C=t(49760),T=t(89184),v=t(24040),d=E.strTranslate,r=t(72736),e=t(76308),l=t(43616),n=t(93024),s=t(54460),o=t(93972),p=t(86476),b=t(72760),h=b.selectingOrDrawing,_=b.freeMode,a=t(84284).FROM_TL,c=t(73696),f=t(39172).redrawReglTraces,x=t(7316),k=t(79811).getFromId,y=t(22676).prepSelect,A=t(22676).clearOutline,L=t(22676).selectOnClick,u=t(21160),m=t(33816),S=m.MINDRAG,w=m.MINZOOM,I=!0;function O(et,ct,ft,yt,xt,Ct,gt,mt){var vt=et._fullLayout._zoomlayer,At=gt+mt==="nsew",Ot=(gt+mt).length===1,It,St,Bt,re,Yt,he,Zt,ae,oe,ce,ue,ye,Tt,Ft,$t,Vt,Nt,Mt,Et,Dt,dt,ht,bt;ft+=ct.yaxis._shift;function Pt(){if(It=ct.xaxis,St=ct.yaxis,oe=It._length,ce=St._length,Zt=It._offset,ae=St._offset,Bt={},Bt[It._id]=It,re={},re[St._id]=St,gt&&mt)for(var We=ct.overlays,Oe=0;Oe<We.length;Oe++){var rr=We[Oe].xaxis;Bt[rr._id]=rr;var cr=We[Oe].yaxis;re[cr._id]=cr}Yt=at(Bt),he=at(re),Tt=F(Yt,mt),Ft=F(he,gt),$t=!Ft&&!Tt,ye=H(et,et._fullLayout._axisMatchGroups,Bt,re),ue=H(et,et._fullLayout._axisConstraintGroups,Bt,re,ye);var lr=ue.isSubplotConstrained||ye.isSubplotConstrained;Vt=mt||lr,Nt=gt||lr;var nr=et._fullLayout;Mt=nr._has("scattergl"),Et=nr._has("splom"),Dt=nr._has("svg")}Pt();var Gt=X(Ft+Tt,et._fullLayout.dragmode,At),te=P(ct,gt+mt+"drag",Gt,ft,yt,xt,Ct);if($t&&!At)return te.onmousedown=null,te.style.pointerEvents="none",te;var ne={element:te,gd:et,plotinfo:ct};ne.prepFn=function(We,Oe,rr){var cr=ne.dragmode,lr=et._fullLayout.dragmode;lr!==cr&&(ne.dragmode=lr),Pt(),ht=et._fullLayout._invScaleX,bt=et._fullLayout._invScaleY,$t||(At?We.shiftKey?lr==="pan"?lr="zoom":h(lr)||(lr="pan"):We.ctrlKey&&(lr="pan"):lr="pan"),_(lr)?ne.minDrag=1:ne.minDrag=void 0,h(lr)?(ne.xaxes=Yt,ne.yaxes=he,y(We,Oe,rr,ne,lr)):(ne.clickFn=Ne,h(cr)&&je(),$t||(lr==="zoom"?(ne.moveFn=pe,ne.doneFn=Ce,ne.minDrag=1,ie(We,Oe,rr)):lr==="pan"&&(ne.moveFn=or,ne.doneFn=Me))),et._fullLayout._redrag=function(){var nr=et._dragdata;if(nr&&nr.element===te){var Sr=et._fullLayout.dragmode;h(Sr)||(Pt(),Te([0,0,oe,ce]),ne.moveFn(nr.dx,nr.dy))}}};function je(){ne.plotinfo.selection=!1,A(et)}function Ne(We,Oe){var rr=ne.gd;if(rr._fullLayout._activeShapeIndex>=0){rr._fullLayout._deactivateShape(rr);return}var cr=rr._fullLayout.clickmode;if(Z(rr),We===2&&!Ot&&Ut(),At)cr.indexOf("select")>-1&&L(Oe,rr,Yt,he,ct.id,ne),cr.indexOf("event")>-1&&n.click(rr,Oe,ct.id);else if(We===1&&Ot){var lr=gt?St:It,nr=gt==="s"||mt==="w"?0:1,Sr=lr._name+".range["+nr+"]",kr=R(lr,nr),Mr="left",rn="middle";if(lr.fixedrange)return;gt?(rn=gt==="n"?"top":"bottom",lr.side==="right"&&(Mr="right")):mt==="e"&&(Mr="right"),rr._context.showAxisRangeEntryBoxes&&M.select(te).call(r.makeEditable,{gd:rr,immediate:!0,background:rr._fullLayout.paper_bgcolor,text:String(kr),fill:lr.tickfont?lr.tickfont.color:"#444",horizontalAlign:Mr,verticalAlign:rn}).on("edit",function(Ur){var pn=lr.d2r(Ur);pn!==void 0&&v.call("_guiRelayout",rr,Sr,pn)})}}p.init(ne);var ge,_e,De,hr,fe,Be,He,pr,Ze,Xt;function ie(We,Oe,rr){var cr=te.getBoundingClientRect();ge=Oe-cr.left,_e=rr-cr.top,et._fullLayout._calcInverseTransform(et);var lr=E.apply3DTransform(et._fullLayout._invTransform)(ge,_e);ge=lr[0],_e=lr[1],De={l:ge,r:ge,w:0,t:_e,b:_e,h:0},hr=et._hmpixcount?et._hmlumcount/et._hmpixcount:C(et._fullLayout.plot_bgcolor).getLuminance(),fe="M0,0H"+oe+"V"+ce+"H0V0",Be=!1,He="xy",Xt=!1,pr=J(vt,hr,Zt,ae,fe),Ze=it(vt,Zt,ae)}function pe(We,Oe){if(et._transitioningWithDuration)return!1;var rr=Math.max(0,Math.min(oe,ht*We+ge)),cr=Math.max(0,Math.min(ce,bt*Oe+_e)),lr=Math.abs(rr-ge),nr=Math.abs(cr-_e);De.l=Math.min(ge,rr),De.r=Math.max(ge,rr),De.t=Math.min(_e,cr),De.b=Math.max(_e,cr);function Sr(){He="",De.r=De.l,De.t=De.b,Ze.attr("d","M0,0Z")}if(ue.isSubplotConstrained)lr>w||nr>w?(He="xy",lr/oe>nr/ce?(nr=lr*ce/oe,_e>cr?De.t=_e-nr:De.b=_e+nr):(lr=nr*oe/ce,ge>rr?De.l=ge-lr:De.r=ge+lr),Ze.attr("d",ot(De))):Sr();else if(ye.isSubplotConstrained)if(lr>w||nr>w){He="xy";var kr=Math.min(De.l/oe,(ce-De.b)/ce),Mr=Math.max(De.r/oe,(ce-De.t)/ce);De.l=kr*oe,De.r=Mr*oe,De.b=(1-kr)*ce,De.t=(1-Mr)*ce,Ze.attr("d",ot(De))}else Sr();else!Ft||nr<Math.min(Math.max(lr*.6,S),w)?lr<S||!Tt?Sr():(De.t=0,De.b=ce,He="x",Ze.attr("d",V(De,_e))):!Tt||lr<Math.min(nr*.6,w)?(De.l=0,De.r=oe,He="y",Ze.attr("d",rt(De,ge))):(He="xy",Ze.attr("d",ot(De)));De.w=De.r-De.l,De.h=De.b-De.t,He&&(Xt=!0),et._dragged=Xt,nt(pr,Ze,De,fe,Be,hr),ke(),et.emit("plotly_relayouting",dt),Be=!0}function ke(){dt={},(He==="xy"||He==="x")&&(B(Yt,De.l/oe,De.r/oe,dt,ue.xaxes),sr("x",dt)),(He==="xy"||He==="y")&&(B(he,(ce-De.b)/ce,(ce-De.t)/ce,dt,ue.yaxes),sr("y",dt))}function Ce(){ke(),Z(et),Me(),$(et)}var Fe=[0,0,oe,ce],Re=null,be=m.REDRAWDELAY,Ge=ct.mainplot?et._fullLayout._plots[ct.mainplot]:ct;function Ke(We){if(!et._context._scrollZoom.cartesian&&!et._fullLayout._enablescrollzoom)return;if(je(),et._transitioningWithDuration){We.preventDefault(),We.stopPropagation();return}Pt(),clearTimeout(Re);var Oe=-We.deltaY;if(isFinite(Oe)||(Oe=We.wheelDelta/10),!isFinite(Oe)){E.log("Did not find wheel motion attributes: ",We);return}var rr=Math.exp(-Math.min(Math.max(Oe,-20),20)/200),cr=Ge.draglayer.select(".nsewdrag").node().getBoundingClientRect(),lr=(We.clientX-cr.left)/cr.width,nr=(cr.bottom-We.clientY)/cr.height,Sr;function kr(Mr,rn,Ur){if(Mr.fixedrange)return;var pn=E.simpleMap(Mr.range,Mr.r2l),yn=pn[0]+(pn[1]-pn[0])*rn;function yr(Cr){return Mr.l2r(yn+(Cr-yn)*Ur)}Mr.range=pn.map(yr)}if(Vt){for(mt||(lr=.5),Sr=0;Sr<Yt.length;Sr++)kr(Yt[Sr],lr,rr);sr("x"),Fe[2]*=rr,Fe[0]+=Fe[2]*lr*(1/rr-1)}if(Nt){for(gt||(nr=.5),Sr=0;Sr<he.length;Sr++)kr(he[Sr],nr,rr);sr("y"),Fe[3]*=rr,Fe[1]+=Fe[3]*(1-nr)*(1/rr-1)}Te(Fe),zt(),et.emit("plotly_relayouting",dt),Re=setTimeout(function(){et._fullLayout&&(Fe=[0,0,oe,ce],Me())},be),We.preventDefault()}gt.length*mt.length!==1&&Y(te,Ke);function or(We,Oe){if(We=We*ht,Oe=Oe*bt,et._transitioningWithDuration)return;if(et._fullLayout._replotting=!0,Tt==="ew"||Ft==="ns"){var rr=Tt?-We:0,cr=Ft?-Oe:0;if(ye.isSubplotConstrained){if(Tt&&Ft){var lr=(We/oe-Oe/ce)/2;We=lr*oe,Oe=-lr*ce,rr=-We,cr=-Oe}Ft?rr=-cr*oe/ce:cr=-rr*ce/oe}Tt&&(N(Yt,We),sr("x")),Ft&&(N(he,Oe),sr("y")),Te([rr,cr,oe,ce]),zt(),et.emit("plotly_relayouting",dt);return}function nr(yr,Cr,Dr){for(var Nr=1-Cr,$r,fn,on=0;on<yr.length;on++){var In=yr[on];if(!In.fixedrange){$r=In,fn=In._rl[Nr]+(In._rl[Cr]-In._rl[Nr])/G(Dr/In._length);var En=In.l2r(fn);En!==!1&&En!==void 0&&(In.range[Cr]=En)}}return $r._length*($r._rl[Cr]-fn)/($r._rl[Cr]-$r._rl[Nr])}var Sr=Tt==="w"==(Ft==="n")?1:-1;if(Tt&&Ft&&(ue.isSubplotConstrained||ye.isSubplotConstrained)){var kr=(We/oe+Sr*Oe/ce)/2;We=kr*oe,Oe=Sr*kr*ce}var Mr,rn;if(Tt==="w"?We=nr(Yt,0,We):Tt==="e"?We=nr(Yt,1,-We):Tt||(We=0),Ft==="n"?Oe=nr(he,1,Oe):Ft==="s"?Oe=nr(he,0,-Oe):Ft||(Oe=0),Mr=Tt==="w"?We:0,rn=Ft==="n"?Oe:0,ue.isSubplotConstrained&&!ye.isSubplotConstrained||ye.isSubplotConstrained&&Tt&&Ft&&Sr>0){var Ur;if(ye.isSubplotConstrained||!Tt&&Ft.length===1){for(Ur=0;Ur<Yt.length;Ur++)Yt[Ur].range=Yt[Ur]._r.slice(),u(Yt[Ur],1-Oe/ce);We=Oe*oe/ce,Mr=We/2}if(ye.isSubplotConstrained||!Ft&&Tt.length===1){for(Ur=0;Ur<he.length;Ur++)he[Ur].range=he[Ur]._r.slice(),u(he[Ur],1-We/oe);Oe=We*ce/oe,rn=Oe/2}}(!ye.isSubplotConstrained||!Ft)&&sr("x"),(!ye.isSubplotConstrained||!Tt)&&sr("y");var pn=oe-We,yn=ce-Oe;ye.isSubplotConstrained&&!(Tt&&Ft)&&(Tt?(rn=Mr?0:We*ce/oe,yn=pn*ce/oe):(Mr=rn?0:Oe*oe/ce,pn=yn*oe/ce)),Te([Mr,rn,pn,yn]),zt(),et.emit("plotly_relayouting",dt)}function sr(We,Oe){for(var rr=ye.isSubplotConstrained?{x:he,y:Yt}[We]:ye[We+"axes"],cr=ye.isSubplotConstrained?{x:Yt,y:he}[We]:[],lr=0;lr<rr.length;lr++){var nr=rr[lr],Sr=nr._id,kr=ye.xLinks[Sr]||ye.yLinks[Sr],Mr=cr[0]||Bt[kr]||re[kr];Mr&&(Oe?(Oe[nr._name+".range[0]"]=Oe[Mr._name+".range[0]"],Oe[nr._name+".range[1]"]=Oe[Mr._name+".range[1]"]):nr.range=Mr.range.slice())}}function zt(){var We=[],Oe;function rr(Sr){for(Oe=0;Oe<Sr.length;Oe++)Sr[Oe].fixedrange||We.push(Sr[Oe]._id)}function cr(Sr,kr){for(Oe=0;Oe<Sr.length;Oe++){var Mr=Sr[Oe],rn=Mr[kr];!Mr.fixedrange&&rn.tickmode==="sync"&&We.push(rn._id)}}for(Vt&&(rr(Yt),rr(ue.xaxes),rr(ye.xaxes),cr(ct.overlays,"xaxis")),Nt&&(rr(he),rr(ue.yaxes),rr(ye.yaxes),cr(ct.overlays,"yaxis")),dt={},Oe=0;Oe<We.length;Oe++){var lr=We[Oe],nr=k(et,lr);s.drawOne(et,nr,{skipTitle:!0}),dt[nr._name+".range[0]"]=nr.range[0],dt[nr._name+".range[1]"]=nr.range[1]}s.redrawComponents(et,We)}function Ut(){if(!et._transitioningWithDuration){var We=et._context.doubleClick,Oe=[];Tt&&(Oe=Oe.concat(Yt)),Ft&&(Oe=Oe.concat(he)),ye.xaxes&&(Oe=Oe.concat(ye.xaxes)),ye.yaxes&&(Oe=Oe.concat(ye.yaxes));var rr={},cr,lr;if(We==="reset+autosize")for(We="autosize",lr=0;lr<Oe.length;lr++){cr=Oe[lr];var nr=cr._rangeInitial0,Sr=cr._rangeInitial1,kr=nr!==void 0||Sr!==void 0;if(kr&&(nr!==void 0&&nr!==cr.range[0]||Sr!==void 0&&Sr!==cr.range[1])||!kr&&cr.autorange!==!0){We="reset";break}}if(We==="autosize")for(lr=0;lr<Oe.length;lr++)cr=Oe[lr],cr.fixedrange||(rr[cr._name+".autorange"]=!0);else if(We==="reset"){for((Tt||ue.isSubplotConstrained)&&(Oe=Oe.concat(ue.xaxes)),Ft&&!ue.isSubplotConstrained&&(Oe=Oe.concat(ue.yaxes)),ue.isSubplotConstrained&&(Tt?Ft||(Oe=Oe.concat(he)):Oe=Oe.concat(Yt)),lr=0;lr<Oe.length;lr++)if(cr=Oe[lr],!cr.fixedrange){var Mr=cr._name,rn=cr._autorangeInitial;cr._rangeInitial0===void 0&&cr._rangeInitial1===void 0?rr[Mr+".autorange"]=!0:cr._rangeInitial0===void 0?(rr[Mr+".autorange"]=rn,rr[Mr+".range"]=[null,cr._rangeInitial1]):cr._rangeInitial1===void 0?(rr[Mr+".range"]=[cr._rangeInitial0,null],rr[Mr+".autorange"]=rn):rr[Mr+".range"]=[cr._rangeInitial0,cr._rangeInitial1]}}et.emit("plotly_doubleclick",null),v.call("_guiRelayout",et,rr)}}function Me(){Te([0,0,oe,ce]),E.syncOrAsync([x.previousPromises,function(){et._fullLayout._replotting=!1,v.call("_guiRelayout",et,dt)}],et)}function Te(We){var Oe=et._fullLayout,rr=Oe._plots,cr=Oe._subplots.cartesian,lr,nr,Sr,kr;if(Et&&v.subplotsRegistry.splom.drag(et),Mt){for(lr=0;lr<cr.length;lr++)if(nr=rr[cr[lr]],Sr=nr.xaxis,kr=nr.yaxis,nr._scene){var Mr=E.simpleMap(Sr.range,Sr.r2l),rn=E.simpleMap(kr.range,kr.r2l);Sr.limitRange&&Sr.limitRange(),kr.limitRange&&kr.limitRange(),Mr=Sr.range,rn=kr.range,nr._scene.update({range:[Mr[0],rn[0],Mr[1],rn[1]]})}}if((Et||Mt)&&(c(et),f(et)),Dt){var Ur=We[2]/It._length,pn=We[3]/St._length;for(lr=0;lr<cr.length;lr++){nr=rr[cr[lr]],Sr=nr.xaxis,kr=nr.yaxis;var yn=(Vt||ye.isSubplotConstrained)&&!Sr.fixedrange&&Bt[Sr._id],yr=(Nt||ye.isSubplotConstrained)&&!kr.fixedrange&&re[kr._id],Cr,Dr,Nr,$r;if(yn?(Cr=Ur,Nr=mt||ye.isSubplotConstrained?We[0]:Je(Sr,Cr)):ye.xaHash[Sr._id]?(Cr=Ur,Nr=We[0]*Sr._length/It._length):ye.yaHash[Sr._id]?(Cr=pn,Nr=Ft==="ns"?-We[1]*Sr._length/St._length:Je(Sr,Cr,{n:"top",s:"bottom"}[Ft])):(Cr=qe(Sr,Ur,pn),Nr=Qe(Sr,Cr)),Cr>1&&(Sr.maxallowed!==void 0&&Vt===(Sr.range[0]<Sr.range[1]?"e":"w")||Sr.minallowed!==void 0&&Vt===(Sr.range[0]<Sr.range[1]?"w":"e"))&&(Cr=1,Nr=0),yr?(Dr=pn,$r=gt||ye.isSubplotConstrained?We[1]:Je(kr,Dr)):ye.yaHash[kr._id]?(Dr=pn,$r=We[1]*kr._length/St._length):ye.xaHash[kr._id]?(Dr=Ur,$r=Tt==="ew"?-We[0]*kr._length/It._length:Je(kr,Dr,{e:"right",w:"left"}[Tt])):(Dr=qe(kr,Ur,pn),$r=Qe(kr,Dr)),Dr>1&&(kr.maxallowed!==void 0&&Nt===(kr.range[0]<kr.range[1]?"n":"s")||kr.minallowed!==void 0&&Nt===(kr.range[0]<kr.range[1]?"s":"n"))&&(Dr=1,$r=0),!(!Cr&&!Dr)){Cr||(Cr=1),Dr||(Dr=1);var fn=Sr._offset-Nr/Cr,on=kr._offset-$r/Dr;nr.clipRect.call(l.setTranslate,Nr,$r).call(l.setScale,Cr,Dr),nr.plot.call(l.setTranslate,fn,on).call(l.setScale,1/Cr,1/Dr),(Cr!==nr.xScaleFactor||Dr!==nr.yScaleFactor)&&(l.setPointGroupScale(nr.zoomScalePts,Cr,Dr),l.setTextPointsScale(nr.zoomScaleTxt,Cr,Dr)),l.hideOutsideRangePoints(nr.clipOnAxisFalseTraces,nr),nr.xScaleFactor=Cr,nr.yScaleFactor=Dr}}}}function qe(We,Oe,rr){return We.fixedrange?0:Vt&&ue.xaHash[We._id]?Oe:Nt&&(ue.isSubplotConstrained?ue.xaHash:ue.yaHash)[We._id]?rr:0}function Qe(We,Oe){return Oe?(We.range=We._r.slice(),u(We,Oe),Je(We,Oe)):0}function Je(We,Oe,rr){return We._length*(1-Oe)*a[rr||We.constraintoward||"middle"]}return te}function D(et,ct,ft,yt){var xt=E.ensureSingle(et.draglayer,ct,ft,function(Ct){Ct.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",et.id)});return xt.call(o,yt),xt.node()}function P(et,ct,ft,yt,xt,Ct,gt){var mt=D(et,"rect",ct,ft);return M.select(mt).call(l.setRect,yt,xt,Ct,gt),mt}function F(et,ct){for(var ft=0;ft<et.length;ft++)if(!et[ft].fixedrange)return ct;return""}function R(et,ct){var ft=et.range[ct],yt=Math.abs(ft-et.range[1-ct]),xt;return et.type==="date"?ft:et.type==="log"?(xt=Math.ceil(Math.max(0,-Math.log(yt)/Math.LN10))+3,i("."+xt+"g")(Math.pow(10,ft))):(xt=Math.floor(Math.log(Math.abs(ft))/Math.LN10)-Math.floor(Math.log(yt)/Math.LN10)+4,i("."+String(xt)+"g")(ft))}function B(et,ct,ft,yt,xt){for(var Ct=0;Ct<et.length;Ct++){var gt=et[Ct];if(!gt.fixedrange)if(gt.rangebreaks){var mt=gt._id.charAt(0)==="y",vt=mt?1-ct:ct,At=mt?1-ft:ft;yt[gt._name+".range[0]"]=gt.l2r(gt.p2l(vt*gt._length)),yt[gt._name+".range[1]"]=gt.l2r(gt.p2l(At*gt._length))}else{var Ot=gt._rl[0],It=gt._rl[1]-Ot;yt[gt._name+".range[0]"]=gt.l2r(Ot+It*ct),yt[gt._name+".range[1]"]=gt.l2r(Ot+It*ft)}}if(xt&&xt.length){var St=(ct+(1-ft))/2;B(xt,St,1-St,yt,[])}}function N(et,ct){for(var ft=0;ft<et.length;ft++){var yt=et[ft];if(!yt.fixedrange){if(yt.rangebreaks){var xt=0,Ct=yt._length,gt=yt.p2l(xt+ct)-yt.p2l(xt),mt=yt.p2l(Ct+ct)-yt.p2l(Ct),vt=(gt+mt)/2;yt.range=[yt.l2r(yt._rl[0]-vt),yt.l2r(yt._rl[1]-vt)]}else yt.range=[yt.l2r(yt._rl[0]-ct/yt._m),yt.l2r(yt._rl[1]-ct/yt._m)];yt.limitRange&&yt.limitRange()}}}function G(et){return 1-(et>=0?Math.min(et,.9):1/(1/Math.max(et,-.3)+3.222))}function X(et,ct,ft){return et?et==="nsew"?ft?"":ct==="pan"?"move":"crosshair":et.toLowerCase()+"-resize":"pointer"}function J(et,ct,ft,yt,xt){return et.append("path").attr("class","zoombox").style({fill:ct>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",d(ft,yt)).attr("d",xt+"Z")}function it(et,ct,ft){return et.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,opacity:0}).attr("transform",d(ct,ft)).attr("d","M0,0Z")}function nt(et,ct,ft,yt,xt,Ct){et.attr("d",yt+"M"+ft.l+","+ft.t+"v"+ft.h+"h"+ft.w+"v-"+ft.h+"h-"+ft.w+"Z"),q(et,ct,xt,Ct)}function q(et,ct,ft,yt){ft||(et.transition().style("fill",yt>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ct.transition().style("opacity",1).duration(200))}function Z(et){M.select(et).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function $(et){I&&et.data&&et._context.showTips&&(E.notifier(E._(et,"Double-click to zoom back out"),"long"),I=!1)}function V(et,ct){return"M"+(et.l-.5)+","+(ct-w-.5)+"h-3v"+(2*w+1)+"h3ZM"+(et.r+.5)+","+(ct-w-.5)+"h3v"+(2*w+1)+"h-3Z"}function rt(et,ct){return"M"+(ct-w-.5)+","+(et.t-.5)+"v-3h"+(2*w+1)+"v3ZM"+(ct-w-.5)+","+(et.b+.5)+"v3h"+(2*w+1)+"v-3Z"}function ot(et){var ct=Math.floor(Math.min(et.b-et.t,et.r-et.l,w)/2);return"M"+(et.l-3.5)+","+(et.t-.5+ct)+"h3v"+-ct+"h"+ct+"v-3h-"+(ct+3)+"ZM"+(et.r+3.5)+","+(et.t-.5+ct)+"h-3v"+-ct+"h"+-ct+"v-3h"+(ct+3)+"ZM"+(et.r+3.5)+","+(et.b+.5-ct)+"h-3v"+ct+"h"+-ct+"v3h"+(ct+3)+"ZM"+(et.l-3.5)+","+(et.b+.5-ct)+"h3v"+ct+"h"+ct+"v3h-"+(ct+3)+"Z"}function H(et,ct,ft,yt,xt){for(var Ct=!1,gt={},mt={},vt,At,Ot,It,St=(xt||{}).xaHash,Bt=(xt||{}).yaHash,re=0;re<ct.length;re++){var Yt=ct[re];for(vt in ft)if(Yt[vt]){for(Ot in Yt)!(xt&&(St[Ot]||Bt[Ot]))&&!(Ot.charAt(0)==="x"?ft:yt)[Ot]&&(gt[Ot]=vt);for(At in yt)!(xt&&(St[At]||Bt[At]))&&Yt[At]&&(Ct=!0)}for(At in yt)if(Yt[At])for(It in Yt)!(xt&&(St[It]||Bt[It]))&&!(It.charAt(0)==="x"?ft:yt)[It]&&(mt[It]=At)}Ct&&(E.extendFlat(gt,mt),mt={});var he={},Zt=[];for(Ot in gt){var ae=k(et,Ot);Zt.push(ae),he[ae._id]=ae}var oe={},ce=[];for(It in mt){var ue=k(et,It);ce.push(ue),oe[ue._id]=ue}return{xaHash:he,yaHash:oe,xaxes:Zt,yaxes:ce,xLinks:gt,yLinks:mt,isSubplotConstrained:Ct}}function Y(et,ct){if(!T)et.onwheel!==void 0?et.onwheel=ct:et.onmousewheel!==void 0?et.onmousewheel=ct:et.isAddedWheelEvent||(et.isAddedWheelEvent=!0,et.addEventListener("wheel",ct,{passive:!1}));else{var ft=et.onwheel!==void 0?"wheel":"mousewheel";et._onwheel&&et.removeEventListener(ft,et._onwheel),et._onwheel=ct,et.addEventListener(ft,ct,{passive:!1})}}function at(et){var ct=[];for(var ft in et)ct.push(et[ft]);return ct}Q.exports={makeDragBox:O,makeDragger:D,makeRectDragger:P,makeZoombox:J,makeCorners:it,updateZoombox:nt,xyCorners:ot,transitionZoombox:q,removeZoombox:Z,showDoubleClickNotifier:$,attachWheelEventHandler:Y}},42464:function(Q,U,t){var M=t(33428),E=t(93024),i=t(86476),C=t(93972),T=t(51184).makeDragBox,v=t(33816).DRAGGERSIZE;U.initInteractions=function(d){var r=d._fullLayout;if(d._context.staticPlot){M.select(d).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var e=Object.keys(r._plots||{}).sort(function(n,s){if((r._plots[n].mainplot&&!0)===(r._plots[s].mainplot&&!0)){var o=n.split("y"),p=s.split("y");return o[0]===p[0]?Number(o[1]||1)-Number(p[1]||1):Number(o[0]||1)-Number(p[0]||1)}return r._plots[n].mainplot?1:-1});e.forEach(function(n){var s=r._plots[n],o=s.xaxis,p=s.yaxis;if(!s.mainplot){var b=T(d,s,o._offset,p._offset,o._length,p._length,"ns","ew");b.onmousemove=function(a){d._fullLayout._rehover=function(){d._fullLayout._hoversubplot===n&&d._fullLayout._plots[n]&&E.hover(d,a,n)},E.hover(d,a,n),d._fullLayout._lasthover=b,d._fullLayout._hoversubplot=n},b.onmouseout=function(a){d._dragging||(d._fullLayout._hoversubplot=null,i.unhover(d,a))},d._context.showAxisDragHandles&&(T(d,s,o._offset-v,p._offset-v,v,v,"n","w"),T(d,s,o._offset+o._length,p._offset-v,v,v,"n","e"),T(d,s,o._offset-v,p._offset+p._length,v,v,"s","w"),T(d,s,o._offset+o._length,p._offset+p._length,v,v,"s","e"))}if(d._context.showAxisDragHandles){if(n===o._mainSubplot){var h=o._mainLinePosition;o.side==="top"&&(h-=v),T(d,s,o._offset+o._length*.1,h,o._length*.8,v,"","ew"),T(d,s,o._offset,h,o._length*.1,v,"","w"),T(d,s,o._offset+o._length*.9,h,o._length*.1,v,"","e")}if(n===p._mainSubplot){var _=p._mainLinePosition;p.side!=="right"&&(_-=v),T(d,s,_,p._offset+p._length*.1,v,p._length*.8,"ns",""),T(d,s,_,p._offset+p._length*.9,v,p._length*.1,"s",""),T(d,s,_,p._offset,v,p._length*.1,"n","")}}});var l=r._hoverlayer.node();l.onmousemove=function(n){n.target=d._fullLayout._lasthover,E.hover(d,n,r._hoversubplot)},l.onclick=function(n){n.target=d._fullLayout._lasthover,E.click(d,n)},l.onmousedown=function(n){d._fullLayout._lasthover.onmousedown(n)},U.updateFx(d)}},U.updateFx=function(d){var r=d._fullLayout,e=r.dragmode==="pan"?"move":"crosshair";C(r._draggers,e)}},36632:function(Q,U,t){var M=t(24040),E=t(3400),i=t(79811);Q.exports=function(C){return function(T,v){var d=T[C];if(Array.isArray(d))for(var r=M.subplotsRegistry.cartesian,e=r.idRegex,l=v._subplots,n=l.xaxis,s=l.yaxis,o=l.cartesian,p=v._has("cartesian")||v._has("gl2d"),b=0;b<d.length;b++){var h=d[b];if(E.isPlainObject(h)){var _=i.cleanId(h.xref,"x",!1),a=i.cleanId(h.yref,"y",!1),c=e.x.test(_),f=e.y.test(a);if(c||f){p||E.pushUnique(v._basePlotModules,r);var x=!1;c&&n.indexOf(_)===-1&&(n.push(_),x=!0),f&&s.indexOf(a)===-1&&(s.push(a),x=!0),x&&c&&f&&o.push(_+a)}}}}}},57952:function(Q,U,t){var M=t(33428),E=t(24040),i=t(3400),C=t(7316),T=t(43616),v=t(84888)._M,d=t(79811),r=t(33816),e=t(9616),l=i.ensureSingle;function n(_,a,c){return i.ensureSingle(_,a,c,function(f){f.datum(c)})}U.name="cartesian",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=r.idRegex,U.attrRegex=r.attrRegex,U.attributes=t(26720),U.layoutAttributes=t(94724),U.supplyLayoutDefaults=t(67352),U.transitionAxes=t(73736),U.finalizeSubplots=function(_,a){var c=a._subplots,f=c.xaxis,x=c.yaxis,k=c.cartesian,y=k.concat(c.gl2d||[]),A={},L={},u,m,S;for(u=0;u<y.length;u++){var w=y[u].split("y");A[w[0]]=1,L["y"+w[1]]=1}for(u=0;u<f.length;u++)m=f[u],A[m]||(S=(_[d.id2name(m)]||{}).anchor,r.idRegex.y.test(S)||(S="y"),k.push(m+S),y.push(m+S),L[S]||(L[S]=1,i.pushUnique(x,S)));for(u=0;u<x.length;u++)S=x[u],L[S]||(m=(_[d.id2name(S)]||{}).anchor,r.idRegex.x.test(m)||(m="x"),k.push(m+S),y.push(m+S),A[m]||(A[m]=1,i.pushUnique(f,m)));if(!y.length){m="",S="";for(var I in _)if(r.attrRegex.test(I)){var O=I.charAt(0);O==="x"?(!m||+I.substr(5)<+m.substr(5))&&(m=I):(!S||+I.substr(5)<+S.substr(5))&&(S=I)}m=m?d.name2id(m):"x",S=S?d.name2id(S):"y",f.push(m),x.push(S),k.push(m+S)}},U.plot=function(_,a,c,f){var x=_._fullLayout,k=x._subplots.cartesian,y=_.calcdata,A;if(!Array.isArray(a))for(a=[],A=0;A<y.length;A++)a.push(A);for(A=0;A<k.length;A++){for(var L=k[A],u=x._plots[L],m=[],S,w=0;w<y.length;w++){var I=y[w],O=I[0].trace;O.xaxis+O.yaxis===L&&((a.indexOf(O.index)!==-1||O.carpet)&&(S&&S[0].trace.xaxis+S[0].trace.yaxis===L&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&m.indexOf(S)===-1&&m.push(S),m.push(I)),S=I)}s(_,u,m,c,f)}};function s(_,a,c,f,x){for(var k=r.traceLayerClasses,y=_._fullLayout,A=y._modules,L,u,m,S={},w=0;w<c.length;w++){var I=c[w][0].trace,O=I.zorder||0;S[O]||(S[O]=[]),S[O].push(c[w])}for(var D=[],P=[],F=Object.keys(S).map(Number).sort(i.sorterAsc),R=0;R<F.length;R++)for(var B=F[R],N=0;N<A.length;N++){L=A[N];var G=L.name,X=E.modules[G].categories;if(X.svg){var J=L.layerName||G+"layer",it=J+(R?Number(R)+1:""),nt=L.plot;u=v(c,nt,B),m=u[0],c=u[1],m.length&&D.push({i:k.indexOf(J),zorder:R,className:it,plotMethod:nt,cdModule:m}),X.zoomScale&&P.push("."+it)}}D.sort(function($,V){return($.zorder||0)-(V.zorder||0)||$.i-V.i});var q=a.plot.selectAll("g.mlayer").data(D,function($){return $.className});if(q.enter().append("g").attr("class",function($){return $.className}).classed("mlayer",!0).classed("rangeplot",a.isRangePlot),q.exit().remove(),q.order(),q.each(function($){var V=M.select(this),rt=$.className;$.plotMethod(_,a,$.cdModule,V,f,x),r.clipOnAxisFalseQuery.indexOf("."+rt)===-1&&T.setClipUrl(V,a.layerClipId,_)}),y._has("scattergl")&&(L=E.getModule("scattergl"),m=v(c,L)[0],L.plot(_,a,m)),!_._context.staticPlot&&(a._hasClipOnAxisFalse&&(a.clipOnAxisFalseTraces=a.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Z=a.plot.selectAll(P.join(",")).selectAll(".trace");a.zoomScalePts=Z.selectAll("path.point"),a.zoomScaleTxt=Z.selectAll(".textpoint")}}U.clean=function(_,a,c,f){var x=f._plots||{},k=a._plots||{},y=f._subplots||{},A,L,u;if(f._hasOnlyLargeSploms&&!a._hasOnlyLargeSploms)for(u in x)A=x[u],A.plotgroup&&A.plotgroup.remove();var m=f._has&&f._has("gl"),S=a._has&&a._has("gl");if(m&&!S)for(u in x)A=x[u],A._scene&&A._scene.destroy();if(y.xaxis&&y.yaxis){var w=d.listIds({_fullLayout:f});for(L=0;L<w.length;L++){var I=w[L];a[d.id2name(I)]||f._infolayer.selectAll(".g-"+I+"title").remove()}}var O=f._has&&f._has("cartesian"),D=a._has&&a._has("cartesian");if(O&&!D)b(f._cartesianlayer.selectAll(".subplot"),f),f._defs.selectAll(".axesclip").remove(),delete f._axisConstraintGroups,delete f._axisMatchGroups;else if(y.cartesian)for(L=0;L<y.cartesian.length;L++){var P=y.cartesian[L];if(!k[P]){var F="."+P+",."+P+"-x,."+P+"-y";f._cartesianlayer.selectAll(F).remove(),h(P,f)}}},U.drawFramework=function(_){var a=_._fullLayout,c=o(_),f=a._cartesianlayer.selectAll(".subplot").data(c,String);f.enter().append("g").attr("class",function(x){return"subplot "+x[0]}),f.order(),f.exit().call(b,a),f.each(function(x){var k=x[0],y=a._plots[k];y.plotgroup=M.select(this),p(_,y),y.draglayer=l(a._draggers,"g",k)})},U.rangePlot=function(_,a,c){p(_,a),s(_,a,c),C.style(_)};function o(_){var a=_._fullLayout,c=a._subplots.cartesian,f=c.length,x,k,y,A,L,u,m=[],S=[];for(x=0;x<f;x++){y=c[x],A=a._plots[y],L=A.xaxis,u=A.yaxis;var w=L._mainAxis,I=u._mainAxis,O=w._id+I._id,D=a._plots[O];A.overlays=[],O!==y&&D?(A.mainplot=O,A.mainplotinfo=D,S.push(y)):(A.mainplot=void 0,A.mainplotinfo=void 0,m.push(y))}for(x=0;x<S.length;x++)y=S[x],A=a._plots[y],A.mainplotinfo.overlays.push(A);var P=m.concat(S),F=new Array(f);for(x=0;x<f;x++){y=P[x],A=a._plots[y],L=A.xaxis,u=A.yaxis;var R=[y,L.layer,u.layer,L.overlaying||"",u.overlaying||""];for(k=0;k<A.overlays.length;k++)R.push(A.overlays[k].id);F[x]=R}return F}function p(_,a){var c=a.plotgroup,f=a.id,x=r.layerValue2layerClass[a.xaxis.layer],k=r.layerValue2layerClass[a.yaxis.layer],y=_._fullLayout._hasOnlyLargeSploms;if(a.mainplot){var A=a.mainplotinfo,L=A.plotgroup,u=f+"-x",m=f+"-y";a.minorGridlayer=A.minorGridlayer,a.gridlayer=A.gridlayer,a.zerolinelayer=A.zerolinelayer,l(A.overlinesBelow,"path",u),l(A.overlinesBelow,"path",m),l(A.overaxesBelow,"g",u),l(A.overaxesBelow,"g",m),a.plot=l(A.overplot,"g",f),l(A.overlinesAbove,"path",u),l(A.overlinesAbove,"path",m),l(A.overaxesAbove,"g",u),l(A.overaxesAbove,"g",m),a.xlines=L.select(".overlines-"+x).select("."+u),a.ylines=L.select(".overlines-"+k).select("."+m),a.xaxislayer=L.select(".overaxes-"+x).select("."+u),a.yaxislayer=L.select(".overaxes-"+k).select("."+m)}else if(y)a.xlines=l(c,"path","xlines-above"),a.ylines=l(c,"path","ylines-above"),a.xaxislayer=l(c,"g","xaxislayer-above"),a.yaxislayer=l(c,"g","yaxislayer-above");else{var S=l(c,"g","layer-subplot");a.shapelayer=l(S,"g","shapelayer"),a.imagelayer=l(S,"g","imagelayer"),a.minorGridlayer=l(c,"g","minor-gridlayer"),a.gridlayer=l(c,"g","gridlayer"),a.zerolinelayer=l(c,"g","zerolinelayer");var w=l(c,"g","layer-between");a.shapelayerBetween=l(w,"g","shapelayer"),a.imagelayerBetween=l(w,"g","imagelayer"),l(c,"path","xlines-below"),l(c,"path","ylines-below"),a.overlinesBelow=l(c,"g","overlines-below"),l(c,"g","xaxislayer-below"),l(c,"g","yaxislayer-below"),a.overaxesBelow=l(c,"g","overaxes-below"),a.plot=l(c,"g","plot"),a.overplot=l(c,"g","overplot"),a.xlines=l(c,"path","xlines-above"),a.ylines=l(c,"path","ylines-above"),a.overlinesAbove=l(c,"g","overlines-above"),l(c,"g","xaxislayer-above"),l(c,"g","yaxislayer-above"),a.overaxesAbove=l(c,"g","overaxes-above"),a.xlines=c.select(".xlines-"+x),a.ylines=c.select(".ylines-"+k),a.xaxislayer=c.select(".xaxislayer-"+x),a.yaxislayer=c.select(".yaxislayer-"+k)}y||(n(a.minorGridlayer,"g",a.xaxis._id),n(a.minorGridlayer,"g",a.yaxis._id),a.minorGridlayer.selectAll("g").map(function(I){return I[0]}).sort(d.idSort),n(a.gridlayer,"g",a.xaxis._id),n(a.gridlayer,"g",a.yaxis._id),a.gridlayer.selectAll("g").map(function(I){return I[0]}).sort(d.idSort)),a.xlines.style("fill","none").classed("crisp",!0),a.ylines.style("fill","none").classed("crisp",!0)}function b(_,a){if(_){var c={};_.each(function(L){var u=L[0],m=M.select(this);m.remove(),h(u,a),c[u]=!0});for(var f in a._plots)for(var x=a._plots[f],k=x.overlays||[],y=0;y<k.length;y++){var A=k[y];c[A.id]&&A.plot.selectAll(".trace").remove()}}}function h(_,a){a._draggers.selectAll("g."+_).remove(),a._defs.select("#clip"+a._uid+_+"plot").remove()}U.toSVG=function(_){var a=_._fullLayout._glimages,c=M.select(_).selectAll(".svg-container"),f=c.filter(function(k,y){return y===c.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function x(){var k=this,y=k.toDataURL("image/png"),A=a.append("svg:image");A.attr({xmlns:e.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:k.style.width,height:k.style.height})}f.each(x)},U.updateFx=t(42464).updateFx},94724:function(Q,U,t){var M=t(25376),E=t(22548),i=t(98192).u,C=t(92880).extendFlat,T=t(31780).templatedArray,v=t(29736).descriptionWithDates,d=t(39032).ONEDAY,r=t(33816),e=r.HOUR_PATTERN,l=r.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},s=C({},n,{values:n.values.slice().concat(["sync"])});function o(L){return{valType:"integer",min:0,dflt:L?5:0,editType:"ticks"}}var p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},b={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"data_array",editType:"ticks"},_={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function a(L){var u={valType:"number",min:0,editType:"ticks"};return L||(u.dflt=5),u}function c(L){var u={valType:"number",min:0,editType:"ticks"};return L||(u.dflt=1),u}var f={valType:"color",dflt:E.defaultLine,editType:"ticks"},x={valType:"color",dflt:E.lightLine,editType:"ticks"};function k(L){var u={valType:"number",min:0,editType:"ticks"};return L||(u.dflt=1),u}var y=C({},i,{editType:"ticks"}),A={valType:"boolean",editType:"ticks"};Q.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:E.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:M({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:T("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[l,e,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:d},editType:"calc"}),tickmode:s,nticks:o(),tick0:p,dtick:b,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:h,ticktext:{valType:"data_array",editType:"ticks"},ticks:_,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:a(),tickwidth:c(),tickcolor:f,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:C({},i,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:M({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:v("tick label")},tickformatstops:T("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:v("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:E.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:A,gridcolor:x,gridwidth:k(),griddash:y,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:E.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:E.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:o("minor"),tick0:p,dtick:b,tickvals:h,ticks:_,ticklen:a("minor"),tickwidth:c("minor"),tickcolor:f,gridcolor:x,gridwidth:k("minor"),griddash:y,showgrid:A,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:M({editType:"ticks"})}}},67352:function(Q,U,t){var M=t(3400),E=t(76308),i=t(10624).isUnifiedHover,C=t(41008),T=t(31780),v=t(64859),d=t(94724),r=t(14944),e=t(28336),l=t(71888),n=t(37668),s=t(79811),o=s.id2name,p=s.name2id,b=t(33816).AX_ID_PATTERN,h=t(24040),_=h.traceIs,a=h.getComponentMethod;function c(f,x,k){Array.isArray(f[x])?f[x].push(k):f[x]=[k]}Q.exports=function(f,x,k){var y=x.autotypenumbers,A={},L={},u={},m={},S={},w={},I={},O={},D={},P={},F,R;for(F=0;F<k.length;F++){var B=k[F];if(!(!_(B,"cartesian")&&!_(B,"gl2d"))){var N;if(B.xaxis)N=o(B.xaxis),c(A,N,B);else if(B.xaxes)for(R=0;R<B.xaxes.length;R++)c(A,o(B.xaxes[R]),B);var G;if(B.yaxis)G=o(B.yaxis),c(A,G,B);else if(B.yaxes)for(R=0;R<B.yaxes.length;R++)c(A,o(B.yaxes[R]),B);if(B.type==="funnel"?B.orientation==="h"?(N&&(L[N]=!0),G&&(I[G]=!0)):G&&(u[G]=!0):B.type==="image"?(G&&(O[G]=!0),N&&(O[N]=!0)):(G&&(S[G]=!0,w[G]=!0),(!_(B,"carpet")||B.type==="carpet"&&!B._cheater)&&N&&(m[N]=!0)),B.type==="carpet"&&B._cheater&&N&&(L[N]=!0),_(B,"2dMap")&&(D[N]=!0,D[G]=!0),_(B,"oriented")){var X=B.orientation==="h"?G:N;P[X]=!0}}}var J=x._subplots,it=J.xaxis,nt=J.yaxis,q=M.simpleMap(it,o),Z=M.simpleMap(nt,o),$=q.concat(Z),V=E.background;it.length&&nt.length&&(V=M.coerce(f,x,v,"plot_bgcolor"));var rt=E.combine(V,x.paper_bgcolor),ot,H,Y,at,et;function ct(){var dt=A[ot]||[];et._traceIndices=dt.map(function(ht){return ht._expandedIndex}),et._annIndices=[],et._shapeIndices=[],et._selectionIndices=[],et._imgIndices=[],et._subplotsWith=[],et._counterAxes=[],et._name=et._attr=ot,et._id=H}function ft(dt,ht){return M.coerce(at,et,d,dt,ht)}function yt(dt,ht){return M.coerce2(at,et,d,dt,ht)}function xt(dt){return dt==="x"?nt:it}function Ct(dt,ht){for(var bt=dt==="x"?q:Z,Pt=[],Gt=0;Gt<bt.length;Gt++){var te=bt[Gt];te!==ht&&!(f[te]||{}).overlaying&&Pt.push(p(te))}return Pt}var gt={x:xt("x"),y:xt("y")},mt=gt.x.concat(gt.y),vt={},At=[];function Ot(){var dt=at.matches;b.test(dt)&&mt.indexOf(dt)===-1&&(vt[dt]=at.type,At=Object.keys(vt))}var It=C(f,x),St=i(It);for(F=0;F<$.length;F++){ot=$[F],H=p(ot),Y=ot.charAt(0),M.isPlainObject(f[ot])||(f[ot]={}),at=f[ot],et=T.newContainer(x,ot,Y+"axis"),ct();var Bt=Y==="x"&&!m[ot]&&L[ot]||Y==="y"&&!S[ot]&&u[ot],re=Y==="y"&&(!w[ot]&&I[ot]||O[ot]),Yt={hasMinor:!0,letter:Y,font:x.font,outerTicks:D[ot],showGrid:!P[ot],data:A[ot]||[],bgColor:rt,calendar:x.calendar,automargin:!0,visibleDflt:Bt,reverseDflt:re,autotypenumbersDflt:y,splomStash:((x._splomAxes||{})[Y]||{})[H],noAutotickangles:Y==="y"};ft("uirevision",x.uirevision),r(at,et,ft,Yt),e(at,et,ft,Yt,x);var he=St&&Y===It.charAt(0),Zt=yt("spikecolor",St?et.color:void 0),ae=yt("spikethickness",St?1.5:void 0),oe=yt("spikedash",St?"dot":void 0),ce=yt("spikemode",St?"across":void 0),ue=yt("spikesnap"),ye=ft("showspikes",!!he||!!Zt||!!ae||!!oe||!!ce||!!ue);ye||(delete et.spikecolor,delete et.spikethickness,delete et.spikedash,delete et.spikemode,delete et.spikesnap);var Tt=o(at.overlaying),Ft=[0,1];if(x[Tt]!==void 0){var $t=o(x[Tt].anchor);x[$t]!==void 0&&(Ft=x[$t].domain)}n(at,et,ft,{letter:Y,counterAxes:gt[Y],overlayableAxes:Ct(Y,ot),grid:x.grid,overlayingDomain:Ft}),ft("title.standoff"),Ot(),et._input=at}for(F=0;F<At.length;){H=At[F++],ot=o(H),Y=ot.charAt(0),M.isPlainObject(f[ot])||(f[ot]={}),at=f[ot],et=T.newContainer(x,ot,Y+"axis"),ct();var Vt={letter:Y,font:x.font,outerTicks:D[ot],showGrid:!P[ot],data:[],bgColor:rt,calendar:x.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:y,splomStash:((x._splomAxes||{})[Y]||{})[H]};ft("uirevision",x.uirevision),et.type=vt[H]||"linear",e(at,et,ft,Vt,x),n(at,et,ft,{letter:Y,counterAxes:gt[Y],overlayableAxes:Ct(Y,ot),grid:x.grid}),ft("fixedrange"),Ot(),et._input=at}var Nt=a("rangeslider","handleDefaults"),Mt=a("rangeselector","handleDefaults");for(F=0;F<q.length;F++)ot=q[F],at=f[ot],et=x[ot],Nt(f,x,ot),et.type==="date"&&Mt(at,et,x,Z,et.calendar),ft("fixedrange");for(F=0;F<Z.length;F++){ot=Z[F],at=f[ot],et=x[ot];var Et=x[o(et.anchor)],Dt=a("rangeslider","isVisible")(Et);ft("fixedrange",Dt)}l.handleDefaults(f,x,{axIds:mt.concat(At).sort(s.idSort),axHasImage:O})}},42136:function(Q,U,t){var M=t(49760).mix,E=t(22548),i=t(3400);Q.exports=function(C,T,v,d){d=d||{};var r=d.dfltColor;function e(u,m){return i.coerce2(C,T,d.attributes,u,m)}var l=e("linecolor",r),n=e("linewidth"),s=v("showline",d.showLine||!!l||!!n);s||(delete T.linecolor,delete T.linewidth);var o=M(r,d.bgColor,d.blend||E.lightFraction).toRgbString(),p=e("gridcolor",o),b=e("gridwidth"),h=e("griddash"),_=v("showgrid",d.showGrid||!!p||!!b||!!h);if(_||(delete T.gridcolor,delete T.gridwidth,delete T.griddash),d.hasMinor){var a=M(T.gridcolor,d.bgColor,67).toRgbString(),c=e("minor.gridcolor",a),f=e("minor.gridwidth",T.gridwidth||1),x=e("minor.griddash",T.griddash||"solid"),k=v("minor.showgrid",!!c||!!f||!!x);k||(delete T.minor.gridcolor,delete T.minor.gridwidth,delete T.minor.griddash)}if(!d.noZeroLine){var y=e("zerolinecolor",r),A=e("zerolinewidth"),L=v("zeroline",d.showGrid||!!y||!!A);L||(delete T.zerolinecolor,delete T.zerolinewidth)}}},37668:function(Q,U,t){var M=t(38248),E=t(3400);Q.exports=function(i,C,T,v){var d=v.counterAxes||[],r=v.overlayableAxes||[],e=v.letter,l=v.grid,n=v.overlayingDomain,s,o,p,b,h,_;l&&(o=l._domains[e][l._axisMap[C._id]],s=l._anchors[C._id],o&&(p=l[e+"side"].split(" ")[0],b=l.domain[e][p==="right"||p==="top"?1:0])),o=o||[0,1],s=s||(M(i.position)?"free":d[0]||"free"),p=p||(e==="x"?"bottom":"left"),b=b||0,h=0,_=!1;var a=E.coerce(i,C,{anchor:{valType:"enumerated",values:["free"].concat(d),dflt:s}},"anchor"),c=E.coerce(i,C,{side:{valType:"enumerated",values:e==="x"?["bottom","top"]:["left","right"],dflt:p}},"side");if(a==="free"){if(e==="y"){var f=T("autoshift");f&&(b=c==="left"?n[0]:n[1],_=C.automargin?C.automargin:!0,h=c==="left"?-3:3),T("shift",h)}T("position",b)}T("automargin",_);var x=!1;if(r.length&&(x=E.coerce(i,C,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!x){var k=T("domain",o);k[0]>k[1]-.000244140625&&(C.domain=o),E.noneOrAll(i.domain,C.domain,o),C.tickmode==="sync"&&(C.tickmode="auto")}return T("layer"),C}},42568:function(Q,U,t){var M=t(85024);Q.exports=function(E,i,C,T,v){v||(v={});var d=v.tickSuffixDflt,r=M(E),e=C("tickprefix");e&&C("showtickprefix",r);var l=C("ticksuffix",d);l&&C("showticksuffix",r)}},96312:function(Q,U,t){var M=t(76808);Q.exports=function(E,i,C,T){var v=i._template||{},d=i.type||v.type||"-";C("minallowed"),C("maxallowed");var r=C("range");if(!r){var e;!T.noInsiderange&&d!=="log"&&(e=C("insiderange"),e&&(e[0]===null||e[1]===null)&&(i.insiderange=!1,e=void 0),e&&(r=C("range",e)))}var l=i.getAutorangeDflt(r,T),n=C("autorange",l),s;r&&(r[0]===null&&r[1]===null||(r[0]===null||r[1]===null)&&(n==="reversed"||n===!0)||r[0]!==null&&(n==="min"||n==="max reversed")||r[1]!==null&&(n==="max"||n==="min reversed"))&&(r=void 0,delete i.range,i.autorange=!0,s=!0),s||(l=i.getAutorangeDflt(r,T),n=C("autorange",l)),n&&(M(C,n,r),(d==="linear"||d==="-")&&C("rangemode")),i.cleanRange()}},21160:function(Q,U,t){var M=t(84284).FROM_BL;Q.exports=function(E,i,C){C===void 0&&(C=M[E.constraintoward||"center"]);var T=[E.r2l(E.range[0]),E.r2l(E.range[1])],v=T[0]+(T[1]-T[0])*C;E.range=E._input.range=[E.l2r(v+(T[0]-v)*i),E.l2r(v+(T[1]-v)*i)],E.setScale()}},78344:function(Q,U,t){var M=t(33428),E=t(94336).E9,i=t(3400),C=i.numberFormat,T=t(38248),v=i.cleanNumber,d=i.ms2DateTime,r=i.dateTime2ms,e=i.ensureNumber,l=i.isArrayOrTypedArray,n=t(39032),s=n.FP_SAFE,o=n.BADNUM,p=n.LOG_CLIP,b=n.ONEWEEK,h=n.ONEDAY,_=n.ONEHOUR,a=n.ONEMIN,c=n.ONESEC,f=t(79811),x=t(33816),k=x.HOUR_PATTERN,y=x.WEEKDAY_PATTERN;function A(u){return Math.pow(10,u)}function L(u){return u!=null}Q.exports=function(u,m){m=m||{};var S=u._id||"x",w=S.charAt(0);function I($,V){if($>0)return Math.log($)/Math.LN10;if($<=0&&V&&u.range&&u.range.length===2){var rt=u.range[0],ot=u.range[1];return .5*(rt+ot-2*p*Math.abs(rt-ot))}else return o}function O($,V,rt,ot){if((ot||{}).msUTC&&T($))return+$;var H=r($,rt||u.calendar);if(H===o)if(T($)){$=+$;var Y=Math.floor(i.mod($+.05,1)*10),at=Math.round($-Y/10);H=r(new Date(at))+Y/10}else return o;return H}function D($,V,rt){return d($,V,rt||u.calendar)}function P($){return u._categories[Math.round($)]}function F($){if(L($)){if(u._categoriesMap===void 0&&(u._categoriesMap={}),u._categoriesMap[$]!==void 0)return u._categoriesMap[$];u._categories.push(typeof $=="number"?String($):$);var V=u._categories.length-1;return u._categoriesMap[$]=V,V}return o}function R($,V){for(var rt=new Array(V),ot=0;ot<V;ot++){var H=($[0]||[])[ot],Y=($[1]||[])[ot];rt[ot]=B([H,Y])}return rt}function B($){if(u._categoriesMap)return u._categoriesMap[$]}function N($){var V=B($);if(V!==void 0)return V;if(T($))return+$}function G($){return T($)?+$:B($)}function X($,V,rt){return M.round(rt+V*$,2)}function J($,V,rt){return($-rt)/V}var it=function($){return T($)?X($,u._m,u._b):o},nt=function($){return J($,u._m,u._b)};if(u.rangebreaks){var q=w==="y";it=function($){if(!T($))return o;var V=u._rangebreaks.length;if(!V)return X($,u._m,u._b);var rt=q;u.range[0]>u.range[1]&&(rt=!rt);for(var ot=rt?-1:1,H=ot*$,Y=0,at=0;at<V;at++){var et=ot*u._rangebreaks[at].min,ct=ot*u._rangebreaks[at].max;if(H<et)break;if(H>ct)Y=at+1;else{Y=H<(et+ct)/2?at:at+1;break}}var ft=u._B[Y]||0;return isFinite(ft)?X($,u._m2,ft):0},nt=function($){var V=u._rangebreaks.length;if(!V)return J($,u._m,u._b);for(var rt=0,ot=0;ot<V&&!($<u._rangebreaks[ot].pmin);ot++)$>u._rangebreaks[ot].pmax&&(rt=ot+1);return J($,u._m2,u._B[rt])}}u.c2l=u.type==="log"?I:e,u.l2c=u.type==="log"?A:e,u.l2p=it,u.p2l=nt,u.c2p=u.type==="log"?function($,V){return it(I($,V))}:it,u.p2c=u.type==="log"?function($){return A(nt($))}:nt,["linear","-"].indexOf(u.type)!==-1?(u.d2r=u.r2d=u.d2c=u.r2c=u.d2l=u.r2l=v,u.c2d=u.c2r=u.l2d=u.l2r=e,u.d2p=u.r2p=function($){return u.l2p(v($))},u.p2d=u.p2r=nt,u.cleanPos=e):u.type==="log"?(u.d2r=u.d2l=function($,V){return I(v($),V)},u.r2d=u.r2c=function($){return A(v($))},u.d2c=u.r2l=v,u.c2d=u.l2r=e,u.c2r=I,u.l2d=A,u.d2p=function($,V){return u.l2p(u.d2r($,V))},u.p2d=function($){return A(nt($))},u.r2p=function($){return u.l2p(v($))},u.p2r=nt,u.cleanPos=e):u.type==="date"?(u.d2r=u.r2d=i.identity,u.d2c=u.r2c=u.d2l=u.r2l=O,u.c2d=u.c2r=u.l2d=u.l2r=D,u.d2p=u.r2p=function($,V,rt){return u.l2p(O($,0,rt))},u.p2d=u.p2r=function($,V,rt){return D(nt($),V,rt)},u.cleanPos=function($){return i.cleanDate($,o,u.calendar)}):u.type==="category"?(u.d2c=u.d2l=F,u.r2d=u.c2d=u.l2d=P,u.d2r=u.d2l_noadd=N,u.r2c=function($){var V=G($);return V!==void 0?V:u.fraction2r(.5)},u.l2r=u.c2r=e,u.r2l=G,u.d2p=function($){return u.l2p(u.r2c($))},u.p2d=function($){return P(nt($))},u.r2p=u.d2p,u.p2r=nt,u.cleanPos=function($){return typeof $=="string"&&$!==""?$:e($)}):u.type==="multicategory"&&(u.r2d=u.c2d=u.l2d=P,u.d2r=u.d2l_noadd=N,u.r2c=function($){var V=N($);return V!==void 0?V:u.fraction2r(.5)},u.r2c_just_indices=B,u.l2r=u.c2r=e,u.r2l=N,u.d2p=function($){return u.l2p(u.r2c($))},u.p2d=function($){return P(nt($))},u.r2p=u.d2p,u.p2r=nt,u.cleanPos=function($){return Array.isArray($)||typeof $=="string"&&$!==""?$:e($)},u.setupMultiCategory=function($){var V=u._traceIndices,rt,ot,H=u._matchGroup;if(H&&u._categories.length===0){for(var Y in H)if(Y!==S){var at=m[f.id2name(Y)];V=V.concat(at._traceIndices)}}var et=[[0,{}],[0,{}]],ct=[];for(rt=0;rt<V.length;rt++){var ft=$[V[rt]];if(w in ft){var yt=ft[w],xt=ft._length||i.minRowLength(yt);if(l(yt[0])&&l(yt[1]))for(ot=0;ot<xt;ot++){var Ct=yt[0][ot],gt=yt[1][ot];L(Ct)&&L(gt)&&(ct.push([Ct,gt]),Ct in et[0][1]||(et[0][1][Ct]=et[0][0]++),gt in et[1][1]||(et[1][1][gt]=et[1][0]++))}}}for(ct.sort(function(mt,vt){var At=et[0][1],Ot=At[mt[0]]-At[vt[0]];if(Ot)return Ot;var It=et[1][1];return It[mt[1]]-It[vt[1]]}),rt=0;rt<ct.length;rt++)F(ct[rt])}),u.fraction2r=function($){var V=u.r2l(u.range[0]),rt=u.r2l(u.range[1]);return u.l2r(V+$*(rt-V))},u.r2fraction=function($){var V=u.r2l(u.range[0]),rt=u.r2l(u.range[1]);return(u.r2l($)-V)/(rt-V)},u.limitRange=function($){var V=u.minallowed,rt=u.maxallowed;if(!(V===void 0&&rt===void 0)){$||($="range");var ot=i.nestedProperty(u,$).get(),H=i.simpleMap(ot,u.r2l),Y=H[1]<H[0];Y&&H.reverse();var at=i.simpleMap([V,rt],u.r2l);if(V!==void 0&&H[0]<at[0]&&(ot[Y?1:0]=V),rt!==void 0&&H[1]>at[1]&&(ot[Y?0:1]=rt),ot[0]===ot[1]){var et=u.l2r(V),ct=u.l2r(rt);if(V!==void 0){var ft=et+1;rt!==void 0&&(ft=Math.min(ft,ct)),ot[Y?1:0]=ft}if(rt!==void 0){var yt=ct+1;V!==void 0&&(yt=Math.max(yt,et)),ot[Y?0:1]=yt}}}},u.cleanRange=function($,V){u._cleanRange($,V),u.limitRange($)},u._cleanRange=function($,V){V||(V={}),$||($="range");var rt=i.nestedProperty(u,$).get(),ot,H;if(u.type==="date"?H=i.dfltRange(u.calendar):w==="y"?H=x.DFLTRANGEY:u._name==="realaxis"?H=[0,1]:H=V.dfltRange||x.DFLTRANGEX,H=H.slice(),(u.rangemode==="tozero"||u.rangemode==="nonnegative")&&(H[0]=0),!rt||rt.length!==2){i.nestedProperty(u,$).set(H);return}var Y=rt[0]===null,at=rt[1]===null;for(u.type==="date"&&!u.autorange&&(rt[0]=i.cleanDate(rt[0],o,u.calendar),rt[1]=i.cleanDate(rt[1],o,u.calendar)),ot=0;ot<2;ot++)if(u.type==="date"){if(!i.isDateTime(rt[ot],u.calendar)){u[$]=H;break}if(u.r2l(rt[0])===u.r2l(rt[1])){var et=i.constrain(u.r2l(rt[0]),i.MIN_MS+1e3,i.MAX_MS-1e3);rt[0]=u.l2r(et-1e3),rt[1]=u.l2r(et+1e3);break}}else{if(!T(rt[ot]))if(!(Y||at)&&T(rt[1-ot]))rt[ot]=rt[1-ot]*(ot?10:.1);else{u[$]=H;break}if(rt[ot]<-s?rt[ot]=-s:rt[ot]>s&&(rt[ot]=s),rt[0]===rt[1]){var ct=Math.max(1,Math.abs(rt[0]*1e-6));rt[0]-=ct,rt[1]+=ct}}},u.setScale=function($){var V=m._size;if(u.overlaying){var rt=f.getFromId({_fullLayout:m},u.overlaying);u.domain=rt.domain}var ot=$&&u._r?"_r":"range",H=u.calendar;u.cleanRange(ot);var Y=u.r2l(u[ot][0],H),at=u.r2l(u[ot][1],H),et=w==="y";if(et?(u._offset=V.t+(1-u.domain[1])*V.h,u._length=V.h*(u.domain[1]-u.domain[0]),u._m=u._length/(Y-at),u._b=-u._m*at):(u._offset=V.l+u.domain[0]*V.w,u._length=V.w*(u.domain[1]-u.domain[0]),u._m=u._length/(at-Y),u._b=-u._m*Y),u._rangebreaks=[],u._lBreaks=0,u._m2=0,u._B=[],u.rangebreaks){var ct,ft;if(u._rangebreaks=u.locateBreaks(Math.min(Y,at),Math.max(Y,at)),u._rangebreaks.length){for(ct=0;ct<u._rangebreaks.length;ct++)ft=u._rangebreaks[ct],u._lBreaks+=Math.abs(ft.max-ft.min);var yt=et;Y>at&&(yt=!yt),yt&&u._rangebreaks.reverse();var xt=yt?-1:1;for(u._m2=xt*u._length/(Math.abs(at-Y)-u._lBreaks),u._B.push(-u._m2*(et?at:Y)),ct=0;ct<u._rangebreaks.length;ct++)ft=u._rangebreaks[ct],u._B.push(u._B[u._B.length-1]-xt*u._m2*(ft.max-ft.min));for(ct=0;ct<u._rangebreaks.length;ct++)ft=u._rangebreaks[ct],ft.pmin=it(ft.min),ft.pmax=it(ft.max)}}if(!isFinite(u._m)||!isFinite(u._b)||u._length<0)throw m._replotting=!1,new Error("Something went wrong with axis scaling")},u.maskBreaks=function($){var V=u.rangebreaks||[],rt,ot,H,Y,at;V._cachedPatterns||(V._cachedPatterns=V.map(function(At){return At.enabled&&At.bounds?i.simpleMap(At.bounds,At.pattern?v:u.d2c):null})),V._cachedValues||(V._cachedValues=V.map(function(At){return At.enabled&&At.values?i.simpleMap(At.values,u.d2c).sort(i.sorterAsc):null}));for(var et=0;et<V.length;et++){var ct=V[et];if(ct.enabled){if(ct.bounds){var ft=ct.pattern;switch(rt=V._cachedPatterns[et],ot=rt[0],H=rt[1],ft){case y:at=new Date($),Y=at.getUTCDay(),ot>H&&(H+=7,Y<ot&&(Y+=7));break;case k:at=new Date($);var yt=at.getUTCHours(),xt=at.getUTCMinutes(),Ct=at.getUTCSeconds(),gt=at.getUTCMilliseconds();Y=yt+(xt/60+Ct/3600+gt/36e5),ot>H&&(H+=24,Y<ot&&(Y+=24));break;case"":Y=$;break}if(Y>=ot&&Y<H)return o}else for(var mt=V._cachedValues[et],vt=0;vt<mt.length;vt++)if(ot=mt[vt],H=ot+ct.dvalue,$>=ot&&$<H)return o}}return $},u.locateBreaks=function($,V){var rt,ot,H,Y,at=[];if(!u.rangebreaks)return at;var et=u.rangebreaks.slice().sort(function(It,St){return It.pattern===y&&St.pattern===k?-1:St.pattern===y&&It.pattern===k?1:0}),ct=function(It,St){if(It=i.constrain(It,$,V),St=i.constrain(St,$,V),It!==St){for(var Bt=!0,re=0;re<at.length;re++){var Yt=at[re];It<Yt.max&&St>=Yt.min&&(It<Yt.min&&(Yt.min=It),St>Yt.max&&(Yt.max=St),Bt=!1)}Bt&&at.push({min:It,max:St})}};for(rt=0;rt<et.length;rt++){var ft=et[rt];if(ft.enabled)if(ft.bounds){var yt=$,xt=V;ft.pattern&&(yt=Math.floor(yt)),ot=i.simpleMap(ft.bounds,ft.pattern?v:u.r2l),H=ot[0],Y=ot[1];var Ct=new Date(yt),gt,mt;switch(ft.pattern){case y:mt=b,gt=((Y<H?7:0)+(Y-H))*h,yt+=H*h-(Ct.getUTCDay()*h+Ct.getUTCHours()*_+Ct.getUTCMinutes()*a+Ct.getUTCSeconds()*c+Ct.getUTCMilliseconds());break;case k:mt=h,gt=((Y<H?24:0)+(Y-H))*_,yt+=H*_-(Ct.getUTCHours()*_+Ct.getUTCMinutes()*a+Ct.getUTCSeconds()*c+Ct.getUTCMilliseconds());break;default:yt=Math.min(ot[0],ot[1]),xt=Math.max(ot[0],ot[1]),mt=xt-yt,gt=mt}for(var vt=yt;vt<xt;vt+=mt)ct(vt,vt+gt)}else for(var At=i.simpleMap(ft.values,u.d2c),Ot=0;Ot<At.length;Ot++)H=At[Ot],Y=H+ft.dvalue,ct(H,Y)}return at.sort(function(It,St){return It.min-St.min}),at},u.makeCalcdata=function($,V,rt){var ot,H,Y,at,et=u.type,ct=et==="date"&&$[V+"calendar"];if(V in $){if(ot=$[V],at=$._length||i.minRowLength(ot),i.isTypedArray(ot)&&(et==="linear"||et==="log")){if(at===ot.length)return ot;if(ot.subarray)return ot.subarray(0,at)}if(et==="multicategory")return R(ot,at);for(H=new Array(at),Y=0;Y<at;Y++)H[Y]=u.d2c(ot[Y],0,ct,rt)}else{var ft=V+"0"in $?u.d2c($[V+"0"],0,ct):0,yt=$["d"+V]?Number($["d"+V]):1;for(ot=$[{x:"y",y:"x"}[V]],at=$._length||ot.length,H=new Array(at),Y=0;Y<at;Y++)H[Y]=ft+Y*yt}if(u.rangebreaks)for(Y=0;Y<at;Y++)H[Y]=u.maskBreaks(H[Y]);return H},u.isValidRange=function($,V){return Array.isArray($)&&$.length===2&&(V&&$[0]===null||T(u.r2l($[0])))&&(V&&$[1]===null||T(u.r2l($[1])))},u.getAutorangeDflt=function($,V){var rt=!u.isValidRange($,"nullOk");return rt&&V&&V.reverseDflt?rt="reversed":$&&($[0]===null&&$[1]===null?rt=!0:$[0]===null&&$[1]!==null?rt="min":$[0]!==null&&$[1]===null&&(rt="max")),rt},u.isReversed=function(){var $=u.autorange;return $==="reversed"||$==="min reversed"||$==="max reversed"},u.isPtWithinRange=function($,V){var rt=u.c2l($[w],null,V),ot=u.r2l(u.range[0]),H=u.r2l(u.range[1]);return ot<H?ot<=rt&&rt<=H:H<=rt&&rt<=ot},u._emptyCategories=function(){u._categories=[],u._categoriesMap={}},u.clearCalc=function(){var $=u._matchGroup;if($){var V=null,rt=null;for(var ot in $){var H=m[f.id2name(ot)];if(H._categories){V=H._categories,rt=H._categoriesMap;break}}V&&rt?(u._categories=V,u._categoriesMap=rt):u._emptyCategories()}else u._emptyCategories();if(u._initialCategories)for(var Y=0;Y<u._initialCategories.length;Y++)F(u._initialCategories[Y])},u.sortByInitialCategories=function(){var $=[];if(u._emptyCategories(),u._initialCategories)for(var V=0;V<u._initialCategories.length;V++)F(u._initialCategories[V]);$=$.concat(u._traceIndices);var rt=u._matchGroup;for(var ot in rt)if(S!==ot){var H=m[f.id2name(ot)];H._categories=u._categories,H._categoriesMap=u._categoriesMap,$=$.concat(H._traceIndices)}return $};var Z=m._d3locale;u.type==="date"&&(u._dateFormat=Z?Z.timeFormat:E,u._extraFormat=m._extraFormat),u._separators=m.separators,u._numFormat=Z?Z.numberFormat:C,delete u._minDtick,delete u._forceTick0}},85024:function(Q){Q.exports=function(U){var t=["showexponent","showtickprefix","showticksuffix"],M=t.filter(function(i){return U[i]!==void 0}),E=function(i){return U[i]===U[M[0]]};if(M.every(E)||M.length===1)return U[M[0]]}},95936:function(Q,U,t){var M=t(3400),E=t(76308).contrast,i=t(94724),C=t(85024),T=t(51272);Q.exports=function(d,r,e,l,n){n||(n={});var s=e("labelalias");M.isPlainObject(s)||delete r.labelalias;var o=C(d),p=e("showticklabels");if(p){var b=n.font||{},h=r.color,_=r.ticklabelposition||"",a=_.indexOf("inside")!==-1?E(n.bgColor):h&&h!==i.color.dflt?h:b.color;if(M.coerceFont(e,"tickfont",{family:b.family,size:b.size,color:a}),!n.noTicklabelstep&&l!=="multicategory"&&l!=="log"&&e("ticklabelstep"),!n.noAng){var c=e("tickangle");!n.noAutotickangles&&c==="auto"&&e("autotickangles")}if(l!=="category"){var f=e("tickformat");T(d,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:v}),r.tickformatstops.length||delete r.tickformatstops,!n.noExp&&!f&&l!=="date"&&(e("showexponent",o),e("exponentformat"),e("minexponent"),e("separatethousands"))}}};function v(d,r){function e(n,s){return M.coerce(d,r,i.tickformatstops,n,s)}var l=e("enabled");l&&(e("dtickrange"),e("value"))}},25404:function(Q,U,t){var M=t(3400),E=t(94724);Q.exports=function(i,C,T,v){var d=v.isMinor,r=d?i.minor||{}:i,e=d?C.minor:C,l=d?E.minor:E,n=d?"minor.":"",s=M.coerce2(r,e,l,"ticklen",d?(C.ticklen||5)*.6:void 0),o=M.coerce2(r,e,l,"tickwidth",d?C.tickwidth||1:void 0),p=M.coerce2(r,e,l,"tickcolor",(d?C.tickcolor:void 0)||e.color),b=T(n+"ticks",!d&&v.outerTicks||s||o||p?"outside":"");b||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},26332:function(Q,U,t){var M=t(98728),E=t(3400).isArrayOrTypedArray,i=t(38116).isTypedArraySpec,C=t(38116).decodeTypedArraySpec;Q.exports=function(T,v,d,r,e){e||(e={});var l=e.isMinor,n=l?T.minor||{}:T,s=l?v.minor:v,o=l?"minor.":"";function p(k){var y=n[k];return i(y)&&(y=C(y)),y!==void 0?y:(s._template||{})[k]}var b=p("tick0"),h=p("dtick"),_=p("tickvals"),a=E(_)?"array":h?"linear":"auto",c=d(o+"tickmode",a);if(c==="auto"||c==="sync")d(o+"nticks");else if(c==="linear"){var f=s.dtick=M.dtick(h,r);s.tick0=M.tick0(b,r,v.calendar,f)}else if(r!=="multicategory"){var x=d(o+"tickvals");x===void 0?s.tickmode="auto":l||d("ticktext")}}},73736:function(Q,U,t){var M=t(33428),E=t(24040),i=t(3400),C=t(43616),T=t(54460);Q.exports=function(v,d,r,e){var l=v._fullLayout;if(d.length===0){T.redrawComponents(v);return}function n(x){var k=x.xaxis,y=x.yaxis;l._defs.select("#"+x.clipId+"> rect").call(C.setTranslate,0,0).call(C.setScale,1,1),x.plot.call(C.setTranslate,k._offset,y._offset).call(C.setScale,1,1);var A=x.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(C.setPointGroupScale,1,1),A.selectAll(".textpoint").call(C.setTextPointsScale,1,1),A.call(C.hideOutsideRangePoints,x)}function s(x,k){var y=x.plotinfo,A=y.xaxis,L=y.yaxis,u=A._length,m=L._length,S=!!x.xr1,w=!!x.yr1,I=[];if(S){var O=i.simpleMap(x.xr0,A.r2l),D=i.simpleMap(x.xr1,A.r2l),P=O[1]-O[0],F=D[1]-D[0];I[0]=(O[0]*(1-k)+k*D[0]-O[0])/(O[1]-O[0])*u,I[2]=u*(1-k+k*F/P),A.range[0]=A.l2r(O[0]*(1-k)+k*D[0]),A.range[1]=A.l2r(O[1]*(1-k)+k*D[1])}else I[0]=0,I[2]=u;if(w){var R=i.simpleMap(x.yr0,L.r2l),B=i.simpleMap(x.yr1,L.r2l),N=R[1]-R[0],G=B[1]-B[0];I[1]=(R[1]*(1-k)+k*B[1]-R[1])/(R[0]-R[1])*m,I[3]=m*(1-k+k*G/N),L.range[0]=A.l2r(R[0]*(1-k)+k*B[0]),L.range[1]=L.l2r(R[1]*(1-k)+k*B[1])}else I[1]=0,I[3]=m;T.drawOne(v,A,{skipTitle:!0}),T.drawOne(v,L,{skipTitle:!0}),T.redrawComponents(v,[A._id,L._id]);var X=S?u/I[2]:1,J=w?m/I[3]:1,it=S?I[0]:0,nt=w?I[1]:0,q=S?I[0]/I[2]*u:0,Z=w?I[1]/I[3]*m:0,$=A._offset-q,V=L._offset-Z;y.clipRect.call(C.setTranslate,it,nt).call(C.setScale,1/X,1/J),y.plot.call(C.setTranslate,$,V).call(C.setScale,X,J),C.setPointGroupScale(y.zoomScalePts,1/X,1/J),C.setTextPointsScale(y.zoomScaleTxt,1/X,1/J)}var o;e&&(o=e());function p(){for(var x={},k=0;k<d.length;k++){var y=d[k],A=y.plotinfo.xaxis,L=y.plotinfo.yaxis;y.xr1&&(x[A._name+".range"]=y.xr1.slice()),y.yr1&&(x[L._name+".range"]=y.yr1.slice())}return o&&o(),E.call("relayout",v,x).then(function(){for(var u=0;u<d.length;u++)n(d[u].plotinfo)})}function b(){for(var x={},k=0;k<d.length;k++){var y=d[k],A=y.plotinfo.xaxis,L=y.plotinfo.yaxis;y.xr0&&(x[A._name+".range"]=y.xr0.slice()),y.yr0&&(x[L._name+".range"]=y.yr0.slice())}return E.call("relayout",v,x).then(function(){for(var u=0;u<d.length;u++)n(d[u].plotinfo)})}var h,_,a,c=M.ease(r.easing);v._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(a),a=null,b()});function f(){_=Date.now();for(var x=Math.min(1,(_-h)/r.duration),k=c(x),y=0;y<d.length;y++)s(d[y],k);_-h>r.duration?(p(),a=window.cancelAnimationFrame(f)):a=window.requestAnimationFrame(f)}return h=Date.now(),a=window.requestAnimationFrame(f),Promise.resolve()}},14944:function(Q,U,t){var M=t(24040).traceIs,E=t(52976);Q.exports=function(d,r,e,l){e("autotypenumbers",l.autotypenumbersDflt);var n=e("type",(l.splomStash||{}).type);n==="-"&&(i(r,l.data),r.type==="-"?r.type="linear":d.type=r.type)};function i(d,r){if(d.type==="-"){var e=d._id,l=e.charAt(0),n;e.indexOf("scene")!==-1&&(e=l);var s=C(r,e,l);if(s){if(s.type==="histogram"&&l==={v:"y",h:"x"}[s.orientation||"v"]){d.type="linear";return}var o=l+"calendar",p=s[o],b={noMultiCategory:!M(s,"cartesian")||M(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&l==={h:"x",v:"y"}[s.orientation||"v"]&&(b.noMultiCategory=!0),b.autotypenumbers=d.autotypenumbers,v(s,l)){var h=T(s),_=[];for(n=0;n<r.length;n++){var a=r[n];!M(a,"box-violin")||(a[l+"axis"]||l)!==e||(a[h]!==void 0?_.push(a[h][0]):a.name!==void 0?_.push(a.name):_.push("text"),a[o]!==p&&(p=void 0))}d.type=E(_,p,b)}else if(s.type==="splom"){var c=s.dimensions,f=c[s._axesDim[e]];f.visible&&(d.type=E(f.values,p,b))}else d.type=E(s[l]||[s[l+"0"]],p,b)}}}function C(d,r,e){for(var l=0;l<d.length;l++){var n=d[l];if(n.type==="splom"&&n._length>0&&(n["_"+e+"axes"]||{})[r]||(n[e+"axis"]||e)===r&&(v(n,e)||(n[e]||[]).length||n[e+"0"]))return n}}function T(d){return{v:"x",h:"y"}[d.orientation||"v"]}function v(d,r){var e=T(d),l=M(d,"box-violin"),n=M(d._fullInput||{},"candlestick");return l&&!n&&r===e&&d[e]===void 0&&d[e+"0"]===void 0}},62460:function(Q,U,t){var M=t(24040),E=t(3400);U.manageCommandObserver=function(r,e,l,n){var s={},o=!0;e&&e._commandObserver&&(s=e._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var p=U.hasSimpleAPICommandBindings(r,l,s.lookupTable);if(e&&e._commandObserver){if(p)return s;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,s}if(p){i(r,p,s.cache),s.check=function(){if(o){var _=i(r,p,s.cache);return _.changed&&n&&s.lookupTable[_.value]!==void 0&&(s.disable(),Promise.resolve(n({value:_.value,type:p.type,prop:p.prop,traces:p.traces,index:s.lookupTable[_.value]})).then(s.enable,s.enable)),_.changed}};for(var b=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<b.length;h++)r._internalOn(b[h],s.check);s.remove=function(){for(var _=0;_<b.length;_++)r._removeInternalListener(b[_],s.check)}}else E.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){o=!1},s.enable=function(){o=!0},e&&(e._commandObserver=s),s},U.hasSimpleAPICommandBindings=function(r,e,l){var n,s=e.length,o;for(n=0;n<s;n++){var p,b=e[n],h=b.method,_=b.args;if(Array.isArray(_)||(_=[]),!h)return!1;var a=U.computeAPICommandBindings(r,h,_);if(a.length!==1)return!1;if(!o)o=a[0],Array.isArray(o.traces)&&o.traces.sort();else{if(p=a[0],p.type!==o.type||p.prop!==o.prop)return!1;if(Array.isArray(o.traces))if(Array.isArray(p.traces)){p.traces.sort();for(var c=0;c<o.traces.length;c++)if(o.traces[c]!==p.traces[c])return!1}else return!1;else if(p.prop!==o.prop)return!1}p=a[0];var f=p.value;if(Array.isArray(f))if(f.length===1)f=f[0];else return!1;l&&(l[f]=n)}return o};function i(r,e,l){var n,s,o,p=!1;if(e.type==="data")n=r._fullData[e.traces!==null?e.traces[0]:0];else if(e.type==="layout")n=r._fullLayout;else return!1;return s=E.nestedProperty(n,e.prop).get(),o=l[e.type]=l[e.type]||{},o.hasOwnProperty(e.prop)&&o[e.prop]!==s&&(p=!0),o[e.prop]=s,{changed:p,value:s}}U.executeAPICommand=function(r,e,l){if(e==="skip")return Promise.resolve();var n=M.apiMethodRegistry[e],s=[r];Array.isArray(l)||(l=[]);for(var o=0;o<l.length;o++)s.push(l[o]);return n.apply(null,s).catch(function(p){return E.warn("API call to Plotly."+e+" rejected.",p),Promise.reject(p)})},U.computeAPICommandBindings=function(r,e,l){var n;switch(Array.isArray(l)||(l=[]),e){case"restyle":n=v(r,l);break;case"relayout":n=T(r,l);break;case"update":n=v(r,[l[0],l[2]]).concat(T(r,[l[1]]));break;case"animate":n=C(r,l);break;default:n=[]}return n};function C(r,e){return Array.isArray(e[0])&&e[0].length===1&&["string","number"].indexOf(typeof e[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}function T(r,e){var l=[],n=e[0],s={};if(typeof n=="string")s[n]=e[1];else if(E.isPlainObject(n))s=n;else return l;return d(s,function(o,p,b){l.push({type:"layout",prop:o,value:b})},"",0),l}function v(r,e){var l,n,s,o,p=[];if(n=e[0],s=e[1],l=e[2],o={},typeof n=="string")o[n]=s;else if(E.isPlainObject(n))o=n,l===void 0&&(l=s);else return p;return l===void 0&&(l=null),d(o,function(b,h,_){var a,c;if(Array.isArray(_)){c=_.slice();var f=Math.min(c.length,r.data.length);l&&(f=Math.min(f,l.length)),a=[];for(var x=0;x<f;x++)a[x]=l?l[x]:x}else c=_,a=l?l.slice():null;if(a===null)Array.isArray(c)&&(c=c[0]);else if(Array.isArray(a)){if(!Array.isArray(c)){var k=c;c=[];for(var y=0;y<a.length;y++)c[y]=k}c.length=Math.min(a.length,c.length)}p.push({type:"data",prop:b,traces:a,value:c})},"",0),p}function d(r,e,l,n){Object.keys(r).forEach(function(s){var o=r[s];if(s[0]!=="_"){var p=l+(n>0?".":"")+s;E.isPlainObject(o)?d(o,e,p,n+1):e(p,s,o)}})}},86968:function(Q,U,t){var M=t(92880).extendFlat;U.u=function(E,i){E=E||{},i=i||{};var C={valType:"info_array",editType:E.editType,items:[{valType:"number",min:0,max:1,editType:E.editType},{valType:"number",min:0,max:1,editType:E.editType}],dflt:[0,1]};E.name&&E.name+"",E.trace,i.description&&""+i.description;var T={x:M({},C,{}),y:M({},C,{}),editType:E.editType};return E.noGridCell||(T.row={valType:"integer",min:0,dflt:0,editType:E.editType},T.column={valType:"integer",min:0,dflt:0,editType:E.editType}),T},U.Q=function(E,i,C,T){var v=T&&T.x||[0,1],d=T&&T.y||[0,1],r=i.grid;if(r){var e=C("domain.column");e!==void 0&&(e<r.columns?v=r._domains.x[e]:delete E.domain.column);var l=C("domain.row");l!==void 0&&(l<r.rows?d=r._domains.y[l]:delete E.domain.row)}var n=C("domain.x",v),s=C("domain.y",d);n[0]<n[1]||(E.domain.x=v.slice()),s[0]<s[1]||(E.domain.y=d.slice())}},25376:function(Q){Q.exports=function(U){var t=U.editType,M=U.colorEditType;M===void 0&&(M=t);var E={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:M},editType:t};return U.autoSize&&(E.size.dflt="auto"),U.autoColor&&(E.color.dflt="auto"),U.arrayOk&&(E.family.arrayOk=!0,E.size.arrayOk=!0,E.color.arrayOk=!0),E}},16672:function(Q){Q.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(Q,U){U.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},U.axesNames=["lonaxis","lataxis"],U.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},U.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},U.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},U.clipPad=.001,U.precision=.1,U.landColor="#F0DC82",U.waterColor="#3399FF",U.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},U.sphereSVG={type:"Sphere"},U.fillLayers={ocean:1,land:1,lakes:1},U.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},U.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],U.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],U.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(Q,U,t){var M=t(33428),E=t(83356),i=E.geoPath,C=E.geoDistance,T=t(87108),v=t(24040),d=t(3400),r=d.strTranslate,e=t(76308),l=t(43616),n=t(93024),s=t(7316),o=t(54460),p=t(19280).getAutoRange,b=t(86476),h=t(22676).prepSelect,_=t(22676).clearOutline,a=t(22676).selectOnClick,c=t(79248),f=t(79552),x=t(27144),k=t(59972),y=t(55712).NO;function A(w){this.id=w.id,this.graphDiv=w.graphDiv,this.container=w.container,this.topojsonURL=w.topojsonURL,this.isStatic=w.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=A.prototype;Q.exports=function(w){return new A(w)},L.plot=function(w,I,O,D){var P=this;if(D)return P.update(w,I,!0);P._geoCalcData=w,P._fullLayout=I;var F=I[this.id],R=[],B=!1;for(var N in f.layerNameToAdjective)if(N!=="frame"&&F["show"+N]){B=!0;break}for(var G=!1,X=0;X<w.length;X++){var J=w[0][0].trace;J._geo=P,J.locationmode&&(B=!0);var it=J.marker;if(it){var nt=it.angle,q=it.angleref;(nt||q==="north"||q==="previous")&&(G=!0)}}if(this._hasMarkerAngles=G,B){var Z=k.getTopojsonName(F);(P.topojson===null||Z!==P.topojsonName)&&(P.topojsonName=Z,PlotlyGeoAssets.topojson[P.topojsonName]===void 0&&R.push(P.fetchTopojson()))}R=R.concat(x.fetchTraceGeoData(w)),O.push(new Promise(function($,V){Promise.all(R).then(function(){P.topojson=PlotlyGeoAssets.topojson[P.topojsonName],P.update(w,I),$()}).catch(V)}))},L.fetchTopojson=function(){var w=this,I=k.getTopojsonPath(w.topojsonURL,w.topojsonName);return new Promise(function(O,D){M.json(I,function(P,F){if(P)return P.status===404?D(new Error(["plotly.js could not find topojson file at",I+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",I].join(" ")));PlotlyGeoAssets.topojson[w.topojsonName]=F,O()})})},L.update=function(w,I,O){var D=I[this.id];this.hasChoropleth=!1;for(var P=0;P<w.length;P++){var F=w[P],R=F[0].trace;R.type==="choropleth"&&(this.hasChoropleth=!0),R.visible===!0&&R._length>0&&R._module.calcGeoJSON(F,I)}if(!O){var B=this.updateProjection(w,I);if(B)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(I,D),this.updateDims(I,D),this.updateFx(I,D),s.generalUpdatePerTraceModule(this.graphDiv,this,w,D);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this._render()},L.updateProjection=function(w,I){var O=this.graphDiv,D=I[this.id],P=I._size,F=D.domain,R=D.projection,B=D.lonaxis,N=D.lataxis,G=B._ax,X=N._ax,J=this.projection=u(D),it=[[P.l+P.w*F.x[0],P.t+P.h*(1-F.y[1])],[P.l+P.w*F.x[1],P.t+P.h*(1-F.y[0])]],nt=D.center||{},q=R.rotation||{},Z=B.range||[],$=N.range||[];if(D.fitbounds){G._length=it[1][0]-it[0][0],X._length=it[1][1]-it[0][1],G.range=p(O,G),X.range=p(O,X);var V=(G.range[0]+G.range[1])/2,rt=(X.range[0]+X.range[1])/2;if(D._isScoped)nt={lon:V,lat:rt};else if(D._isClipped){nt={lon:V,lat:rt},q={lon:V,lat:rt,roll:q.roll};var ot=R.type,H=f.lonaxisSpan[ot]/2||180,Y=f.lataxisSpan[ot]/2||90;Z=[V-H,V+H],$=[rt-Y,rt+Y]}else nt={lon:V,lat:rt},q={lon:V,lat:q.lat,roll:q.roll}}J.center([nt.lon-q.lon,nt.lat-q.lat]).rotate([-q.lon,-q.lat,q.roll]).parallels(R.parallels);var at=S(Z,$);J.fitExtent(it,at);var et=this.bounds=J.getBounds(at),ct=this.fitScale=J.scale(),ft=J.translate();if(D.fitbounds){var yt=J.getBounds(S(G.range,X.range)),xt=Math.min((et[1][0]-et[0][0])/(yt[1][0]-yt[0][0]),(et[1][1]-et[0][1])/(yt[1][1]-yt[0][1]));isFinite(xt)?J.scale(xt*ct):d.warn("Something went wrong during"+this.id+"fitbounds computations.")}else J.scale(R.scale*ct);var Ct=this.midPt=[(et[0][0]+et[1][0])/2,(et[0][1]+et[1][1])/2];if(J.translate([ft[0]+(Ct[0]-ft[0]),ft[1]+(Ct[1]-ft[1])]).clipExtent(et),D._isAlbersUsa){var gt=J([nt.lon,nt.lat]),mt=J.translate();J.translate([mt[0]-(gt[0]-mt[0]),mt[1]-(gt[1]-mt[1])])}},L.updateBaseLayers=function(w,I){var O=this,D=O.topojson,P=O.layers,F=O.basePaths;function R(it){return it==="lonaxis"||it==="lataxis"}function B(it){return!!f.lineLayers[it]}function N(it){return!!f.fillLayers[it]}var G=this.hasChoropleth?f.layersForChoropleth:f.layers,X=G.filter(function(it){return B(it)||N(it)?I["show"+it]:R(it)?I[it].showgrid:!0}),J=O.framework.selectAll(".layer").data(X,String);J.exit().each(function(it){delete P[it],delete F[it],M.select(this).remove()}),J.enter().append("g").attr("class",function(it){return"layer "+it}).each(function(it){var nt=P[it]=M.select(this);it==="bg"?O.bgRect=nt.append("rect").style("pointer-events","all"):R(it)?F[it]=nt.append("path").style("fill","none"):it==="backplot"?nt.append("g").classed("choroplethlayer",!0):it==="frontplot"?nt.append("g").classed("scatterlayer",!0):B(it)?F[it]=nt.append("path").style("fill","none").style("stroke-miterlimit",2):N(it)&&(F[it]=nt.append("path").style("stroke","none"))}),J.order(),J.each(function(it){var nt=F[it],q=f.layerNameToAdjective[it];it==="frame"?nt.datum(f.sphereSVG):B(it)||N(it)?nt.datum(y(D,D.objects[it])):R(it)&&nt.datum(m(it,I,w)).call(e.stroke,I[it].gridcolor).call(l.dashLine,I[it].griddash,I[it].gridwidth),B(it)?nt.call(e.stroke,I[q+"color"]).call(l.dashLine,"",I[q+"width"]):N(it)&&nt.call(e.fill,I[q+"color"])})},L.updateDims=function(w,I){var O=this.bounds,D=(I.framewidth||0)/2,P=O[0][0]-D,F=O[0][1]-D,R=O[1][0]-P+D,B=O[1][1]-F+D;l.setRect(this.clipRect,P,F,R,B),this.bgRect.call(l.setRect,P,F,R,B).call(e.fill,I.bgcolor),this.xaxis._offset=P,this.xaxis._length=R,this.yaxis._offset=F,this.yaxis._length=B},L.updateFx=function(w,I){var O=this,D=O.graphDiv,P=O.bgRect,F=w.dragmode,R=w.clickmode;if(O.isStatic)return;function B(){var J=O.viewInitial,it={};for(var nt in J)it[O.id+"."+nt]=J[nt];v.call("_guiRelayout",D,it),D.emit("plotly_doubleclick",null)}function N(J){return O.projection.invert([J[0]+O.xaxis._offset,J[1]+O.yaxis._offset])}var G=function(J,it){if(it.isRect){var nt=J.range={};nt[O.id]=[N([it.xmin,it.ymin]),N([it.xmax,it.ymax])]}else{var q=J.lassoPoints={};q[O.id]=it.map(N)}},X={element:O.bgRect.node(),gd:D,plotinfo:{id:O.id,xaxis:O.xaxis,yaxis:O.yaxis,fillRangeItems:G},xaxes:[O.xaxis],yaxes:[O.yaxis],subplot:O.id,clickFn:function(J){J===2&&_(D)}};F==="pan"?(P.node().onmousedown=null,P.call(c(O,I)),P.on("dblclick.zoom",B),D._context._scrollZoom.geo||P.on("wheel.zoom",null)):(F==="select"||F==="lasso")&&(P.on(".zoom",null),X.prepFn=function(J,it,nt){h(J,it,nt,X,F)},b.init(X)),P.on("mousemove",function(){var J=O.projection.invert(d.getPositionFromD3Event());if(!J)return b.unhover(D,M.event);O.xaxis.p2c=function(){return J[0]},O.yaxis.p2c=function(){return J[1]},n.hover(D,M.event,O.id)}),P.on("mouseout",function(){D._dragging||b.unhover(D,M.event)}),P.on("click",function(){F!=="select"&&F!=="lasso"&&(R.indexOf("select")>-1&&a(M.event,D,[O.xaxis],[O.yaxis],O.id,X),R.indexOf("event")>-1&&n.click(D,M.event))})},L.makeFramework=function(){var w=this,I=w.graphDiv,O=I._fullLayout,D="clip"+O._uid+w.id;w.clipDef=O._clips.append("clipPath").attr("id",D),w.clipRect=w.clipDef.append("rect"),w.framework=M.select(w.container).append("g").attr("class","geo "+w.id).call(l.setClipUrl,D,I),w.project=function(P){var F=w.projection(P);return F?[F[0]-w.xaxis._offset,F[1]-w.yaxis._offset]:[null,null]},w.xaxis={_id:"x",c2p:function(P){return w.project(P)[0]}},w.yaxis={_id:"y",c2p:function(P){return w.project(P)[1]}},w.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},o.setConvert(w.mockAxis,O)},L.saveViewInitial=function(w){var I=w.center||{},O=w.projection,D=O.rotation||{};this.viewInitial={fitbounds:w.fitbounds,"projection.scale":O.scale};var P;w._isScoped?P={"center.lon":I.lon,"center.lat":I.lat}:w._isClipped?P={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:P={"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":D.lon},d.extendFlat(this.viewInitial,P)},L.render=function(w){this._hasMarkerAngles&&w?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},L._render=function(){var w=this.projection,I=w.getPath(),O;function D(F){var R=w(F.lonlat);return R?r(R[0],R[1]):null}function P(F){return w.isLonLatOverEdges(F.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",I);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(F){return I(F.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",P).attr("transform",D)};function u(w){var I=w.projection,O=I.type,D=f.projNames[O];D="geo"+d.titleCase(D);for(var P=E[D]||T[D],F=P(),R=w._isSatellite?Math.acos(1/I.distance)*180/Math.PI:w._isClipped?f.lonaxisSpan[O]/2:null,B=["center","rotate","parallels","clipExtent"],N=function(J){return J?F:[]},G=0;G<B.length;G++){var X=B[G];typeof F[X]!="function"&&(F[X]=N)}return F.isLonLatOverEdges=function(J){if(F(J)===null)return!0;if(R){var it=F.rotate(),nt=C(J,[-it[0],-it[1]]),q=R*Math.PI/180;return nt>q}else return!1},F.getPath=function(){return i().projection(F)},F.getBounds=function(J){return F.getPath().bounds(J)},F.precision(f.precision),w._isSatellite&&F.tilt(I.tilt).distance(I.distance),R&&F.clipAngle(R-f.clipPad),F}function m(w,I,O){var D=1e-6,P=2.5,F=I[w],R=f.scopeDefaults[I.scope],B,N,G;w==="lonaxis"?(B=R.lonaxisRange,N=R.lataxisRange,G=function(rt,ot){return[rt,ot]}):w==="lataxis"&&(B=R.lataxisRange,N=R.lonaxisRange,G=function(rt,ot){return[ot,rt]});var X={type:"linear",range:[B[0],B[1]-D],tick0:F.tick0,dtick:F.dtick};o.setConvert(X,O);var J=o.calcTicks(X);!I.isScoped&&w==="lonaxis"&&J.pop();for(var it=J.length,nt=new Array(it),q=0;q<it;q++)for(var Z=J[q].x,$=nt[q]=[],V=N[0];V<N[1]+P;V+=P)$.push(G(Z,V));return{type:"MultiLineString",coordinates:nt}}function S(w,I){var O=f.clipPad,D=w[0]+O,P=w[1]-O,F=I[0]+O,R=I[1]-O;D>0&&P<0&&(P+=360);var B=(P-D)/4;return{type:"Polygon",coordinates:[[[D,F],[D,R],[D+B,R],[D+2*B,R],[D+3*B,R],[P,R],[P,F],[P-B,F],[P-2*B,F],[P-3*B,F],[D,F]]]}}},10816:function(Q,U,t){var M=t(84888).KY,E=t(3400).counterRegex,i=t(43520),C="geo",T=E(C),v={};v[C]={valType:"subplotid",dflt:C,editType:"calc"};function d(l){for(var n=l._fullLayout,s=l.calcdata,o=n._subplots[C],p=0;p<o.length;p++){var b=o[p],h=M(s,C,b),_=n[b],a=_._subplot;a||(a=i({id:b,graphDiv:l,container:n._geolayer.node(),topojsonURL:l._context.topojsonURL,staticPlot:l._context.staticPlot}),n[b]._subplot=a),a.plot(h,n,l._promises)}}function r(l,n,s,o){for(var p=o._subplots[C]||[],b=0;b<p.length;b++){var h=p[b],_=o[h]._subplot;!n[h]&&_&&(_.framework.remove(),_.clipDef.remove())}}function e(l){for(var n=l._fullLayout,s=n._subplots[C],o=0;o<s.length;o++){var p=n[s[o]],b=p._subplot;b.updateFx(n,p)}}Q.exports={attr:C,name:C,idRoot:C,idRegex:T,attrRegex:T,attributes:v,layoutAttributes:t(40384),supplyLayoutDefaults:t(86920),plot:d,updateFx:e,clean:r}},40384:function(Q,U,t){var M=t(22548),E=t(86968).u,i=t(98192).u,C=t(79552),T=t(67824).overrideAll,v=t(95376),d={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:M.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:i},r=Q.exports=T({domain:E({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:v(C.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:v(C.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:M.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:C.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:C.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:C.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:C.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:M.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:M.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:M.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:M.background},lonaxis:d,lataxis:d},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},86920:function(Q,U,t){var M=t(3400),E=t(168),i=t(84888).op,C=t(79552),T=t(40384),v=C.axesNames;Q.exports=function(r,e,l){E(r,e,l,{type:"geo",attributes:T,handleDefaults:d,fullData:l,partition:"y"})};function d(r,e,l,n){var s=i(n.fullData,"geo",n.id),o=s.map(function($){return $._expandedIndex}),p=l("resolution"),b=l("scope"),h=C.scopeDefaults[b],_=l("projection.type",h.projType),a=e._isAlbersUsa=_==="albers usa";a&&(b=e.scope="usa");var c=e._isScoped=b!=="world",f=e._isSatellite=_==="satellite",x=e._isConic=_.indexOf("conic")!==-1||_==="albers",k=e._isClipped=!!C.lonaxisSpan[_];if(r.visible===!1){var y=M.extendDeep({},e._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),e._template=y}for(var A=l("visible"),L,u=0;u<v.length;u++){var m=v[u],S=[30,10][u],w;if(c)w=h[m+"Range"];else{var I=C[m+"Span"],O=(I[_]||I["*"])/2,D=l("projection.rotation."+m.substr(0,3),h.projRotate[u]);w=[D-O,D+O]}var P=l(m+".range",w);l(m+".tick0"),l(m+".dtick",S),L=l(m+".showgrid",A?void 0:!1),L&&(l(m+".gridcolor"),l(m+".gridwidth"),l(m+".griddash")),e[m]._ax={type:"linear",_id:m.slice(0,3),_traceIndices:o,setScale:M.identity,c2l:M.identity,r2l:M.identity,autorange:!0,range:P.slice(),_m:1,_input:{}}}var F=e.lonaxis.range,R=e.lataxis.range,B=F[0],N=F[1];B>0&&N<0&&(N+=360);var G=(B+N)/2,X;if(!a){var J=c?h.projRotate:[G,0,0];X=l("projection.rotation.lon",J[0]),l("projection.rotation.lat",J[1]),l("projection.rotation.roll",J[2]),L=l("showcoastlines",!c&&A),L&&(l("coastlinecolor"),l("coastlinewidth")),L=l("showocean",A?void 0:!1),L&&l("oceancolor")}var it,nt;if(a?(it=-96.6,nt=38.7):(it=c?G:X,nt=(R[0]+R[1])/2),l("center.lon",it),l("center.lat",nt),f&&(l("projection.tilt"),l("projection.distance")),x){var q=h.projParallels||[0,60];l("projection.parallels",q)}l("projection.scale"),L=l("showland",A?void 0:!1),L&&l("landcolor"),L=l("showlakes",A?void 0:!1),L&&l("lakecolor"),L=l("showrivers",A?void 0:!1),L&&(l("rivercolor"),l("riverwidth")),L=l("showcountries",c&&b!=="usa"&&A),L&&(l("countrycolor"),l("countrywidth")),(b==="usa"||b==="north america"&&p===50)&&(l("showsubunits",A),l("subunitcolor"),l("subunitwidth")),c||(L=l("showframe",A),L&&(l("framecolor"),l("framewidth"))),l("bgcolor");var Z=l("fitbounds");Z&&(delete e.projection.scale,c?(delete e.center.lon,delete e.center.lat):k?(delete e.center.lon,delete e.center.lat,delete e.projection.rotation.lon,delete e.projection.rotation.lat,delete e.lonaxis.range,delete e.lataxis.range):(delete e.center.lon,delete e.center.lat,delete e.projection.rotation.lon))}},79248:function(Q,U,t){var M=t(33428),E=t(3400),i=t(24040),C=Math.PI/180,T=180/Math.PI,v={cursor:"pointer"},d={cursor:"auto"};function r(m,S){var w=m.projection,I;return S._isScoped?I=n:S._isClipped?I=o:I=s,I(m,w)}Q.exports=r;function e(m,S){return M.behavior.zoom().translate(S.translate()).scale(S.scale())}function l(m,S,w){var I=m.id,O=m.graphDiv,D=O.layout,P=D[I],F=O._fullLayout,R=F[I],B={},N={};function G(X,J){B[I+"."+X]=E.nestedProperty(P,X).get(),i.call("_storeDirectGUIEdit",D,F._preGUI,B);var it=E.nestedProperty(R,X);it.get()!==J&&(it.set(J),E.nestedProperty(P,X).set(J),N[I+"."+X]=J)}w(G),G("projection.scale",S.scale()/m.fitScale),G("fitbounds",!1),O.emit("plotly_relayout",N)}function n(m,S){var w=e(m,S);function I(){M.select(this).style(v)}function O(){S.scale(M.event.scale).translate(M.event.translate),m.render(!0);var F=S.invert(m.midPt);m.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/m.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1]})}function D(F){var R=S.invert(m.midPt);F("center.lon",R[0]),F("center.lat",R[1])}function P(){M.select(this).style(d),l(m,S,D)}return w.on("zoomstart",I).on("zoom",O).on("zoomend",P),w}function s(m,S){var w=e(m,S),I=2,O,D,P,F,R,B,N,G,X;function J(V){return S.invert(V)}function it(V){var rt=J(V);if(!rt)return!0;var ot=S(rt);return Math.abs(ot[0]-V[0])>I||Math.abs(ot[1]-V[1])>I}function nt(){M.select(this).style(v),O=M.mouse(this),D=S.rotate(),P=S.translate(),F=D,R=J(O)}function q(){if(B=M.mouse(this),it(O)){w.scale(S.scale()),w.translate(S.translate());return}S.scale(M.event.scale),S.translate([P[0],M.event.translate[1]]),R?J(B)&&(G=J(B),N=[F[0]+(G[0]-R[0]),D[1],D[2]],S.rotate(N),F=N):(O=B,R=J(O)),X=!0,m.render(!0);var V=S.rotate(),rt=S.invert(m.midPt);m.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/m.fitScale,"geo.center.lon":rt[0],"geo.center.lat":rt[1],"geo.projection.rotation.lon":-V[0]})}function Z(){M.select(this).style(d),X&&l(m,S,$)}function $(V){var rt=S.rotate(),ot=S.invert(m.midPt);V("projection.rotation.lon",-rt[0]),V("center.lon",ot[0]),V("center.lat",ot[1])}return w.on("zoomstart",nt).on("zoom",q).on("zoomend",Z),w}function o(m,S){S.rotate(),S.scale();var w=e(m,S),I=u(w,"zoomstart","zoom","zoomend"),O=0,D=w.on,P;w.on("zoomstart",function(){M.select(this).style(v);var G=M.mouse(this),X=S.rotate(),J=X,it=S.translate(),nt=b(X);P=p(S,G),D.call(w,"zoom",function(){var q=M.mouse(this);if(S.scale(M.event.scale),!P)G=q,P=p(S,G);else if(p(S,q)){S.rotate(X).translate(it);var Z=p(S,q),$=_(P,Z),V=k(h(nt,$)),rt=a(V,P,J);(!isFinite(rt[0])||!isFinite(rt[1])||!isFinite(rt[2]))&&(rt=J),S.rotate(rt),J=rt}R(I.of(this,arguments))}),F(I.of(this,arguments))}).on("zoomend",function(){M.select(this).style(d),D.call(w,"zoom",null),B(I.of(this,arguments)),l(m,S,N)}).on("zoom.redraw",function(){m.render(!0);var G=S.rotate();m.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":S.scale()/m.fitScale,"geo.projection.rotation.lon":-G[0],"geo.projection.rotation.lat":-G[1]})});function F(G){O++||G({type:"zoomstart"})}function R(G){G({type:"zoom"})}function B(G){--O||G({type:"zoomend"})}function N(G){var X=S.rotate();G("projection.rotation.lon",-X[0]),G("projection.rotation.lat",-X[1])}return M.rebind(w,I,"on")}function p(m,S){var w=m.invert(S);return w&&isFinite(w[0])&&isFinite(w[1])&&y(w)}function b(m){var S=.5*m[0]*C,w=.5*m[1]*C,I=.5*m[2]*C,O=Math.sin(S),D=Math.cos(S),P=Math.sin(w),F=Math.cos(w),R=Math.sin(I),B=Math.cos(I);return[D*F*B+O*P*R,O*F*B-D*P*R,D*P*B+O*F*R,D*F*R-O*P*B]}function h(m,S){var w=m[0],I=m[1],O=m[2],D=m[3],P=S[0],F=S[1],R=S[2],B=S[3];return[w*P-I*F-O*R-D*B,w*F+I*P+O*B-D*R,w*R-I*B+O*P+D*F,w*B+I*R-O*F+D*P]}function _(m,S){if(!(!m||!S)){var w=L(m,S),I=Math.sqrt(A(w,w)),O=.5*Math.acos(Math.max(-1,Math.min(1,A(m,S)))),D=Math.sin(O)/I;return I&&[Math.cos(O),w[2]*D,-w[1]*D,w[0]*D]}}function a(m,S,w){var I=x(S,2,m[0]);I=x(I,1,m[1]),I=x(I,0,m[2]-w[2]);var O=S[0],D=S[1],P=S[2],F=I[0],R=I[1],B=I[2],N=Math.atan2(D,O)*T,G=Math.sqrt(O*O+D*D),X,J;Math.abs(R)>G?(J=(R>0?90:-90)-N,X=0):(J=Math.asin(R/G)*T-N,X=Math.sqrt(G*G-R*R));var it=180-J-2*N,nt=(Math.atan2(B,F)-Math.atan2(P,X))*T,q=(Math.atan2(B,F)-Math.atan2(P,-X))*T,Z=c(w[0],w[1],J,nt),$=c(w[0],w[1],it,q);return Z<=$?[J,nt,w[2]]:[it,q,w[2]]}function c(m,S,w,I){var O=f(w-m),D=f(I-S);return Math.sqrt(O*O+D*D)}function f(m){return(m%360+540)%360-180}function x(m,S,w){var I=w*C,O=m.slice(),D=S===0?1:0,P=S===2?1:2,F=Math.cos(I),R=Math.sin(I);return O[D]=m[D]*F-m[P]*R,O[P]=m[P]*F+m[D]*R,O}function k(m){return[Math.atan2(2*(m[0]*m[1]+m[2]*m[3]),1-2*(m[1]*m[1]+m[2]*m[2]))*T,Math.asin(Math.max(-1,Math.min(1,2*(m[0]*m[2]-m[3]*m[1]))))*T,Math.atan2(2*(m[0]*m[3]+m[1]*m[2]),1-2*(m[2]*m[2]+m[3]*m[3]))*T]}function y(m){var S=m[0]*C,w=m[1]*C,I=Math.cos(w);return[I*Math.cos(S),I*Math.sin(S),Math.sin(w)]}function A(m,S){for(var w=0,I=0,O=m.length;I<O;++I)w+=m[I]*S[I];return w}function L(m,S){return[m[1]*S[2]-m[2]*S[1],m[2]*S[0]-m[0]*S[2],m[0]*S[1]-m[1]*S[0]]}function u(m){for(var S=0,w=arguments.length,I=[];++S<w;)I.push(arguments[S]);var O=M.dispatch.apply(null,I);return O.of=function(D,P){return function(F){var R;try{R=F.sourceEvent=M.event,F.target=m,M.event=F,O[F.type].apply(D,P)}finally{M.event=R}}},O}},84888:function(Q,U,t){var M=t(24040),E=t(33816).SUBPLOT_PATTERN;U.KY=function(i,C,T){var v=M.subplotsRegistry[C];if(!v)return[];for(var d=v.attr,r=[],e=0;e<i.length;e++){var l=i[e],n=l[0].trace;n[d]===T&&r.push(l)}return r},U._M=function(i,C,T){var v=[],d=[],r;if(typeof C=="string"?r=M.getModule(C).plot:typeof C=="function"?r=C:r=C.plot,!r)return[v,i];for(var e=T,l=0;l<i.length;l++){var n=i[l],s=n[0].trace,o=s.zorder!==void 0;s.visible!==!0||s._length===0||(s._module&&s._module.plot===r&&(!o||s.zorder===e)?v.push(n):d.push(n))}return[v,d]},U.op=function(i,C,T){if(!M.subplotsRegistry[C])return[];var v=M.subplotsRegistry[C].attr,d=[],r,e,l;if(C==="gl2d"){var n=T.match(E);e="x"+n[1],l="y"+n[2]}for(var s=0;s<i.length;s++)r=i[s],C==="gl2d"&&M.traceIs(r,"gl2d")?r[v[0]]===e&&r[v[1]]===l&&d.push(r):r[v]===T&&d.push(r);return d}},2428:function(Q,U,t){var M=t(62644),E=t(97264),i=t(29128),C=t(33816),T=t(89184);Q.exports=d;function v(r,e){this.element=r,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function d(r){var e=r.mouseContainer,l=r.glplot,n=new v(e,l);function s(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function o(){for(var b=r.graphDiv._fullLayout._axisConstraintGroups,h=r.xaxis._id,_=r.yaxis._id,a=0;a<b.length;a++)if(b[a][h]!==-1){if(b[a][_]!==-1)return!0;break}return!1}n.mouseListener=M(e,p),e.addEventListener("touchstart",function(b){var h=i(b.changedTouches[0],e);p(0,h[0],h[1]),p(1,h[0],h[1]),b.preventDefault()},T?{passive:!1}:!1),e.addEventListener("touchmove",function(b){b.preventDefault();var h=i(b.changedTouches[0],e);p(1,h[0],h[1]),b.preventDefault()},T?{passive:!1}:!1),e.addEventListener("touchend",function(b){p(0,n.lastPos[0],n.lastPos[1]),b.preventDefault()},T?{passive:!1}:!1);function p(b,h,_){var a=r.calcDataBox(),c=l.viewBox,f=n.lastPos[0],x=n.lastPos[1],k=C.MINDRAG*l.pixelRatio,y=C.MINZOOM*l.pixelRatio,A,L;h*=l.pixelRatio,_*=l.pixelRatio,_=c[3]-c[1]-_;function u(D,P,F){var R=Math.min(P,F),B=Math.max(P,F);R!==B?(a[D]=R,a[D+2]=B,n.dataBox=a,r.setRanges(a)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(b){var m=h/(c[2]-c[0])*(a[2]-a[0])+a[0],S=_/(c[3]-c[1])*(a[3]-a[1])+a[1];n.boxInited||(n.boxStart[0]=m,n.boxStart[1]=S,n.dragStart[0]=h,n.dragStart[1]=_),n.boxEnd[0]=m,n.boxEnd[1]=S,n.boxInited=!0,!n.boxEnabled&&(n.boxStart[0]!==n.boxEnd[0]||n.boxStart[1]!==n.boxEnd[1])&&(n.boxEnabled=!0);var w=Math.abs(n.dragStart[0]-h)<y,I=Math.abs(n.dragStart[1]-_)<y;if(o()&&!(w&&I)){A=n.boxEnd[0]-n.boxStart[0],L=n.boxEnd[1]-n.boxStart[1];var O=(a[3]-a[1])/(a[2]-a[0]);Math.abs(A*O)>Math.abs(L)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(A)*O*(L>=0?1:-1),n.boxEnd[1]<a[1]?(n.boxEnd[1]=a[1],n.boxEnd[0]=n.boxStart[0]+(a[1]-n.boxStart[1])/Math.abs(O)):n.boxEnd[1]>a[3]&&(n.boxEnd[1]=a[3],n.boxEnd[0]=n.boxStart[0]+(a[3]-n.boxStart[1])/Math.abs(O))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(L)/O*(A>=0?1:-1),n.boxEnd[0]<a[0]?(n.boxEnd[0]=a[0],n.boxEnd[1]=n.boxStart[1]+(a[0]-n.boxStart[0])*Math.abs(O)):n.boxEnd[0]>a[2]&&(n.boxEnd[0]=a[2],n.boxEnd[1]=n.boxStart[1]+(a[2]-n.boxStart[0])*Math.abs(O)))}else w&&(n.boxEnd[0]=n.boxStart[0]),I&&(n.boxEnd[1]=n.boxStart[1])}else n.boxEnabled?(A=n.boxStart[0]!==n.boxEnd[0],L=n.boxStart[1]!==n.boxEnd[1],A||L?(A&&(u(0,n.boxStart[0],n.boxEnd[0]),r.xaxis.autorange=!1),L&&(u(1,n.boxStart[1],n.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,b?(n.panning||(n.dragStart[0]=h,n.dragStart[1]=_),Math.abs(n.dragStart[0]-h)<k&&(h=n.dragStart[0]),Math.abs(n.dragStart[1]-_)<k&&(_=n.dragStart[1]),A=(f-h)*(a[2]-a[0])/(l.viewBox[2]-l.viewBox[0]),L=(x-_)*(a[3]-a[1])/(l.viewBox[3]-l.viewBox[1]),a[0]+=A,a[2]+=A,a[1]+=L,a[3]+=L,r.setRanges(a),n.panning=!0,n.lastInputTime=Date.now(),s(),r.cameraChanged(),r.handleAnnotations()):n.panning&&(n.panning=!1,r.relayoutCallback());break}n.lastPos[0]=h,n.lastPos[1]=_}return n.wheelListener=E(e,function(b,h){if(!r.scrollZoom)return!1;var _=r.calcDataBox(),a=l.viewBox,c=n.lastPos[0],f=n.lastPos[1],x=Math.exp(5*h/(a[3]-a[1])),k=c/(a[2]-a[0])*(_[2]-_[0])+_[0],y=f/(a[3]-a[1])*(_[3]-_[1])+_[1];return _[0]=(_[0]-k)*x+k,_[2]=(_[2]-k)*x+k,_[1]=(_[1]-y)*x+y,_[3]=(_[3]-y)*x+y,r.setRanges(_),n.lastInputTime=Date.now(),s(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),n}},92568:function(Q,U,t){var M=t(54460),E=t(43080);function i(d){this.scene=d,this.gl=d.gl,this.pixelRatio=d.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var C=i.prototype,T=["xaxis","yaxis"];C.merge=function(d){this.titleEnable=!1,this.backgroundColor=E(d.plot_bgcolor);var r,e,l,n,s,o,p,b,h,_,a;for(_=0;_<2;++_){r=T[_];var c=r.charAt(0);for(e=d[this.scene[r]._name],l=e.title.text===this.scene.fullLayout._dfltTitle[c]?"":e.title.text,a=0;a<=2;a+=2)this.labelEnable[_+a]=!1,this.labels[_+a]=l,this.labelColor[_+a]=E(e.title.font.color),this.labelFont[_+a]=e.title.font.family,this.labelSize[_+a]=e.title.font.size,this.labelPad[_+a]=this.getLabelPad(r,e),this.tickEnable[_+a]=!1,this.tickColor[_+a]=E((e.tickfont||{}).color),this.tickAngle[_+a]=e.tickangle==="auto"?0:Math.PI*-e.tickangle/180,this.tickPad[_+a]=this.getTickPad(e),this.tickMarkLength[_+a]=0,this.tickMarkWidth[_+a]=e.tickwidth||0,this.tickMarkColor[_+a]=E(e.tickcolor),this.borderLineEnable[_+a]=!1,this.borderLineColor[_+a]=E(e.linecolor),this.borderLineWidth[_+a]=e.linewidth||0;p=this.hasSharedAxis(e),s=this.hasAxisInDfltPos(r,e)&&!p,o=this.hasAxisInAltrPos(r,e)&&!p,n=e.mirror||!1,b=p?String(n).indexOf("all")!==-1:!!n,h=p?n==="allticks":String(n).indexOf("ticks")!==-1,s?this.labelEnable[_]=!0:o&&(this.labelEnable[_+2]=!0),s?this.tickEnable[_]=e.showticklabels:o&&(this.tickEnable[_+2]=e.showticklabels),(s||b)&&(this.borderLineEnable[_]=e.showline),(o||b)&&(this.borderLineEnable[_+2]=e.showline),(s||h)&&(this.tickMarkLength[_]=this.getTickMarkLength(e)),(o||h)&&(this.tickMarkLength[_+2]=this.getTickMarkLength(e)),this.gridLineEnable[_]=e.showgrid,this.gridLineColor[_]=E(e.gridcolor),this.gridLineWidth[_]=e.gridwidth,this.zeroLineEnable[_]=e.zeroline,this.zeroLineColor[_]=E(e.zerolinecolor),this.zeroLineWidth[_]=e.zerolinewidth}},C.hasSharedAxis=function(d){var r=this.scene,e=r.fullLayout._subplots.gl2d,l=M.findSubplotsWithAxis(e,d);return l.indexOf(r.id)!==0},C.hasAxisInDfltPos=function(d,r){var e=r.side;if(d==="xaxis")return e==="bottom";if(d==="yaxis")return e==="left"},C.hasAxisInAltrPos=function(d,r){var e=r.side;if(d==="xaxis")return e==="top";if(d==="yaxis")return e==="right"},C.getLabelPad=function(d,r){var e=1.5,l=r.title.font.size,n=r.showticklabels;if(d==="xaxis")return r.side==="top"?-10+l*(e+(n?1:0)):-10+l*(e+(n?.5:0));if(d==="yaxis")return r.side==="right"?10+l*(e+(n?1:.5)):10+l*(e+(n?.5:0))},C.getTickPad=function(d){return d.ticks==="outside"?10+d.ticklen:15},C.getTickMarkLength=function(d){if(!d.ticks)return 0;var r=d.ticklen;return d.ticks==="inside"?-r:r};function v(d){return new i(d)}Q.exports=v},39952:function(Q,U,t){var M=t(67824).overrideAll,E=t(17188),i=t(64859),C=t(9616),T=t(33816),v=t(57952),d=t(65460),r=t(84888).op;U.name="gl2d",U.attr=["xaxis","yaxis"],U.idRoot=["x","y"],U.idRegex=T.idRegex,U.attrRegex=T.attrRegex,U.attributes=t(26720),U.supplyLayoutDefaults=function(e,l,n){l._has("cartesian")||v.supplyLayoutDefaults(e,l,n)},U.layoutAttrOverrides=M(v.layoutAttributes,"plot","from-root"),U.baseLayoutAttrOverrides=M({plot_bgcolor:i.plot_bgcolor,hoverlabel:d.hoverlabel},"plot","nested"),U.plot=function(e){for(var l=e._fullLayout,n=e._fullData,s=l._subplots.gl2d,o=0;o<s.length;o++){var p=s[o],b=l._plots[p],h=r(n,"gl2d",p),_=b._scene2d;_===void 0&&(_=new E({id:p,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},l),b._scene2d=_),_.plot(h,e.calcdata,l,e.layout)}},U.clean=function(e,l,n,s){for(var o=s._subplots.gl2d||[],p=0;p<o.length;p++){var b=o[p],h=s._plots[b];if(h._scene2d){var _=r(e,"gl2d",b);_.length===0&&(h._scene2d.destroy(),delete s._plots[b])}}v.clean.apply(this,arguments)},U.drawFramework=function(e){e._context.staticPlot||v.drawFramework(e)},U.toSVG=function(e){for(var l=e._fullLayout,n=l._subplots.gl2d,s=0;s<n.length;s++){var o=l._plots[n[s]],p=o._scene2d,b=p.toImage("png"),h=l._glimages.append("svg:image");h.attr({xmlns:C.svg,"xlink:href":b,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),p.destroy()}},U.updateFx=function(e){for(var l=e._fullLayout,n=l._subplots.gl2d,s=0;s<n.length;s++){var o=l._plots[n[s]]._scene2d;o.updateFx(l.dragmode)}}},17188:function(Q,U,t){var M=t(24040),E=t(54460),i=t(93024),C=t(67792).gl_plot2d,T=t(67792).gl_spikes2d,v=t(67792).gl_select_box,d=t(5408),r=t(92568),e=t(2428),l=t(16576),n=t(71888),s=n.enforce,o=n.clean,p=t(19280).doAutoRange,b=t(72760),h=b.drawMode,_=b.selectMode,a=["xaxis","yaxis"],c,f,x=t(33816).SUBPLOT_PATTERN;function k(L,u){this.container=L.container,this.graphDiv=L.graphDiv,this.pixelRatio=L.plotGlPixelRatio||window.devicePixelRatio,this.id=L.id,this.staticPlot=!!L.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(u),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(u),this.glplot=C(this.glplotOptions),this.camera=e(this),this.traces={},this.spikes=T(this.glplot),this.selectBox=v(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}Q.exports=k;var y=k.prototype;y.makeFramework=function(){if(this.staticPlot){if(!f&&(c=document.createElement("canvas"),f=d({canvas:c,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!f))throw new Error("Error creating static canvas/context for image server");this.canvas=c,this.gl=f}else{var L=this.container.querySelector(".gl-canvas-focus"),u=d({canvas:L,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!u){l(this),this.stopped=!0;return}this.canvas=L,this.gl=u}var m=this.canvas;m.style.width="100%",m.style.height="100%",m.style.position="absolute",m.style.top="0px",m.style.left="0px",m.style["pointer-events"]="none",this.updateSize(m);var S=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");S.style.position="absolute",S.style.top=S.style.left="0px",S.style.width=S.style.height="100%",S.style["z-index"]=20,S.style["pointer-events"]="none";var w=this.mouseContainer=document.createElement("div");w.style.position="absolute",w.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var I=this.container;I.appendChild(S),I.appendChild(w);var O=this;w.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),w.addEventListener("mouseover",function(){O.isMouseOver=!0})},y.toImage=function(L){L||(L="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(c),this.updateSize(this.canvas);var u=this.glplot.gl,m=u.drawingBufferWidth,S=u.drawingBufferHeight;u.clearColor(1,1,1,0),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),u.bindFramebuffer(u.FRAMEBUFFER,null);var w=new Uint8Array(m*S*4);u.readPixels(0,0,m,S,u.RGBA,u.UNSIGNED_BYTE,w);for(var I=0,O=S-1;I<O;++I,--O)for(var D=0;D<m;++D)for(var P=0;P<4;++P){var F=w[4*(m*I+D)+P];w[4*(m*I+D)+P]=w[4*(m*O+D)+P],w[4*(m*O+D)+P]=F}var R=document.createElement("canvas");R.width=m,R.height=S;var B=R.getContext("2d",{willReadFrequently:!0}),N=B.createImageData(m,S);N.data.set(w),B.putImageData(N,0,0);var G;switch(L){case"jpeg":G=R.toDataURL("image/jpeg");break;case"webp":G=R.toDataURL("image/webp");break;default:G=R.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(c),G},y.updateSize=function(L){L||(L=this.canvas);var u=this.pixelRatio,m=this.fullLayout,S=m.width,w=m.height,I=Math.ceil(u*S)|0,O=Math.ceil(u*w)|0;return(L.width!==I||L.height!==O)&&(L.width=I,L.height=O),L},y.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var L=[E.calcTicks(this.xaxis),E.calcTicks(this.yaxis)],u=0;u<2;++u)for(var m=0;m<L[u].length;++m)L[u][m].text=L[u][m].text+"";return L};function A(L,u){for(var m=0;m<2;++m){var S=L[m],w=u[m];if(S.length!==w.length)return!0;for(var I=0;I<S.length;++I)if(S[I].x!==w[I].x)return!0}return!1}y.updateRefs=function(L){this.fullLayout=L;var u=this.id.match(x),m="xaxis"+u[1],S="yaxis"+u[2];this.xaxis=this.fullLayout[m],this.yaxis=this.fullLayout[S]},y.relayoutCallback=function(){var L=this.graphDiv,u=this.xaxis,m=this.yaxis,S=L.layout,w={},I=w[u._name+".range"]=u.range.slice(),O=w[m._name+".range"]=m.range.slice();w[u._name+".autorange"]=u.autorange,w[m._name+".autorange"]=m.autorange,M.call("_storeDirectGUIEdit",L.layout,L._fullLayout._preGUI,w);var D=S[u._name];D.range=I,D.autorange=u.autorange;var P=S[m._name];P.range=O,P.autorange=m.autorange,w.lastInputTime=this.camera.lastInputTime,L.emit("plotly_relayout",w)},y.cameraChanged=function(){var L=this.camera;this.glplot.setDataBox(this.calcDataBox());var u=this.computeTickMarks(),m=this.glplotOptions.ticks;A(u,m)&&(this.glplotOptions.ticks=u,this.glplotOptions.dataBox=L.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},y.handleAnnotations=function(){for(var L=this.graphDiv,u=this.fullLayout.annotations,m=0;m<u.length;m++){var S=u[m];S.xref===this.xaxis._id&&S.yref===this.yaxis._id&&M.getComponentMethod("annotations","drawOne")(L,m)}},y.destroy=function(){if(this.glplot){var L=this.traces;L&&Object.keys(L).map(function(u){L[u].dispose(),delete L[u]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},y.plot=function(L,u,m){var S=this.glplot;this.updateRefs(m),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(L,u),this.updateFx(m.dragmode);var w=m.width,I=m.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(m),O.screenBox=[0,0,w,I];var D={_fullLayout:{_axisConstraintGroups:m._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:m._size}};o(D,this.xaxis),o(D,this.yaxis);var P=m._size,F=this.xaxis.domain,R=this.yaxis.domain;O.viewBox=[P.l+F[0]*P.w,P.b+R[0]*P.h,w-P.r-(1-F[1])*P.w,I-P.t-(1-R[1])*P.h],this.mouseContainer.style.width=P.w*(F[1]-F[0])+"px",this.mouseContainer.style.height=P.h*(R[1]-R[0])+"px",this.mouseContainer.height=P.h*(R[1]-R[0]),this.mouseContainer.style.left=P.l+F[0]*P.w+"px",this.mouseContainer.style.top=P.t+(1-R[1])*P.h+"px";var B,N;for(N=0;N<2;++N)B=this[a[N]],B._length=O.viewBox[N+2]-O.viewBox[N],p(this.graphDiv,B),B.setScale();s(D),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(m),S.update(O),this.glplot.draw()},y.calcDataBox=function(){var L=this.xaxis,u=this.yaxis,m=L.range,S=u.range,w=L.r2l,I=u.r2l;return[w(m[0]),I(S[0]),w(m[1]),I(S[1])]},y.setRanges=function(L){var u=this.xaxis,m=this.yaxis,S=u.l2r,w=m.l2r;u.range=[S(L[0]),S(L[2])],m.range=[w(L[1]),w(L[3])]},y.updateTraces=function(L,u){var m=Object.keys(this.traces),S,w,I;this.fullData=L;t:for(S=0;S<m.length;S++){var O=m[S],D=this.traces[O];for(w=0;w<L.length;w++)if(I=L[w],I.uid===O&&I.type===D.type)continue t;D.dispose(),delete this.traces[O]}for(S=0;S<L.length;S++){I=L[S];var P=u[S],F=this.traces[I.uid];F?F.update(I,P):(F=I._module.plot(this,I,P),this.traces[I.uid]=F)}this.glplot.objects.sort(function(R,B){return R._trace.index-B._trace.index})},y.updateFx=function(L){_(L)||h(L)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),L==="pan"?this.mouseContainer.style.cursor="move":L==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},y.emitPointAction=function(L,u){for(var m=L.trace.uid,S=L.pointIndex,w,I=0;I<this.fullData.length;I++)this.fullData[I].uid===m&&(w=this.fullData[I]);var O={x:L.traceCoord[0],y:L.traceCoord[1],curveNumber:w.index,pointNumber:S,data:w._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};i.appendArrayPointValue(O,w,S),this.graphDiv.emit(u,{points:[O]})},y.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var L=this.glplot,u=this.camera,m=u.mouseListener,S=this.lastButtonState===1&&m.buttons===0,w=this.fullLayout;this.lastButtonState=m.buttons,this.cameraChanged();var I=m.x*L.pixelRatio,O=this.canvas.height-L.pixelRatio*m.y,D;if(u.boxEnabled&&w.dragmode==="zoom"){this.selectBox.enabled=!0;for(var P=this.selectBox.selectBox=[Math.min(u.boxStart[0],u.boxEnd[0]),Math.min(u.boxStart[1],u.boxEnd[1]),Math.max(u.boxStart[0],u.boxEnd[0]),Math.max(u.boxStart[1],u.boxEnd[1])],F=0;F<2;F++)u.boxStart[F]===u.boxEnd[F]&&(P[F]=L.dataBox[F],P[F+2]=L.dataBox[F+2]);L.setDirty()}else if(!u.panning&&this.isMouseOver){this.selectBox.enabled=!1;var R=w._size,B=this.xaxis.domain,N=this.yaxis.domain;D=L.pick(I/L.pixelRatio+R.l+B[0]*R.w,O/L.pixelRatio-(R.t+(1-N[1])*R.h));var G=D&&D.object._trace.handlePick(D);if(G&&S&&this.emitPointAction(G,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&w.hovermode&&G&&(!this.lastPickResult||this.lastPickResult.traceUid!==G.trace.uid||this.lastPickResult.dataCoord[0]!==G.dataCoord[0]||this.lastPickResult.dataCoord[1]!==G.dataCoord[1])){var X=G;this.lastPickResult={traceUid:G.trace?G.trace.uid:null,dataCoord:G.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),X.screenCoord=[((L.viewBox[2]-L.viewBox[0])*(D.dataCoord[0]-L.dataBox[0])/(L.dataBox[2]-L.dataBox[0])+L.viewBox[0])/L.pixelRatio,(this.canvas.height-(L.viewBox[3]-L.viewBox[1])*(D.dataCoord[1]-L.dataBox[1])/(L.dataBox[3]-L.dataBox[1])-L.viewBox[1])/L.pixelRatio],this.emitPointAction(G,"plotly_hover");var J=this.fullData[X.trace.index]||{},it=X.pointIndex,nt=i.castHoverinfo(J,w,it);if(nt&&nt!=="all"){var q=nt.split("+");q.indexOf("x")===-1&&(X.traceCoord[0]=void 0),q.indexOf("y")===-1&&(X.traceCoord[1]=void 0),q.indexOf("z")===-1&&(X.traceCoord[2]=void 0),q.indexOf("text")===-1&&(X.textLabel=void 0),q.indexOf("name")===-1&&(X.name=void 0)}i.loneHover({x:X.screenCoord[0],y:X.screenCoord[1],xLabel:this.hoverFormatter("xaxis",X.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",X.traceCoord[1]),zLabel:X.traceCoord[2],text:X.textLabel,name:X.name,color:i.castHoverOption(J,it,"bgcolor")||X.color,borderColor:i.castHoverOption(J,it,"bordercolor"),fontFamily:i.castHoverOption(J,it,"font.family"),fontSize:i.castHoverOption(J,it,"font.size"),fontColor:i.castHoverOption(J,it,"font.color"),nameLength:i.castHoverOption(J,it,"namelength"),textAlign:i.castHoverOption(J,it,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),L.draw()}},y.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),i.loneUnhover(this.svgContainer))},y.hoverFormatter=function(L,u){if(u!==void 0){var m=this[L];return E.tickText(m,m.c2l(u),"hover").text}}},12536:function(Q,U,t){var M=t(67824).overrideAll,E=t(65460),i=t(98432),C=t(84888).op,T=t(3400),v=t(9616),d="gl3d",r="scene";U.name=d,U.attr=r,U.idRoot=r,U.idRegex=U.attrRegex=T.counterRegex("scene"),U.attributes=t(6636),U.layoutAttributes=t(346),U.baseLayoutAttrOverrides=M({hoverlabel:E.hoverlabel},"plot","nested"),U.supplyLayoutDefaults=t(5208),U.plot=function(e){for(var l=e._fullLayout,n=e._fullData,s=l._subplots[d],o=0;o<s.length;o++){var p=s[o],b=C(n,d,p),h=l[p],_=h.camera,a=h._scene;a||(a=new i({id:p,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio,camera:_},l),h._scene=a),a.viewInitial||(a.viewInitial={up:{x:_.up.x,y:_.up.y,z:_.up.z},eye:{x:_.eye.x,y:_.eye.y,z:_.eye.z},center:{x:_.center.x,y:_.center.y,z:_.center.z}}),a.plot(b,l,e.layout)}},U.clean=function(e,l,n,s){for(var o=s._subplots[d]||[],p=0;p<o.length;p++){var b=o[p];!l[b]&&s[b]._scene&&(s[b]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+b).remove())}},U.toSVG=function(e){for(var l=e._fullLayout,n=l._subplots[d],s=l._size,o=0;o<n.length;o++){var p=l[n[o]],b=p.domain,h=p._scene,_=h.toImage("png"),a=l._glimages.append("svg:image");a.attr({xmlns:v.svg,"xlink:href":_,x:s.l+s.w*b.x[0],y:s.t+s.h*(1-b.y[1]),width:s.w*(b.x[1]-b.x[0]),height:s.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"}),h.destroy()}},U.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var l=e.substr(5);return l==="1"&&(l=""),r+l}},U.updateFx=function(e){for(var l=e._fullLayout,n=l._subplots[d],s=0;s<n.length;s++){var o=l[n[s]]._scene;o.updateFx(l.dragmode,l.hovermode)}}},6636:function(Q){Q.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(Q,U,t){var M=t(76308),E=t(94724),i=t(92880).extendFlat,C=t(67824).overrideAll;Q.exports=C({visible:E.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:M.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:E.color,categoryorder:E.categoryorder,categoryarray:E.categoryarray,title:{text:E.title.text,font:E.title.font},type:i({},E.type,{values:["-","linear","log","date","category"]}),autotypenumbers:E.autotypenumbers,autorange:E.autorange,autorangeoptions:{minallowed:E.autorangeoptions.minallowed,maxallowed:E.autorangeoptions.maxallowed,clipmin:E.autorangeoptions.clipmin,clipmax:E.autorangeoptions.clipmax,include:E.autorangeoptions.include,editType:"plot"},rangemode:E.rangemode,minallowed:E.minallowed,maxallowed:E.maxallowed,range:i({},E.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:E.minor.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,mirror:E.mirror,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,showticklabels:E.showticklabels,labelalias:E.labelalias,tickfont:E.tickfont,tickangle:E.tickangle,tickprefix:E.tickprefix,showtickprefix:E.showtickprefix,ticksuffix:E.ticksuffix,showticksuffix:E.showticksuffix,showexponent:E.showexponent,exponentformat:E.exponentformat,minexponent:E.minexponent,separatethousands:E.separatethousands,tickformat:E.tickformat,tickformatstops:E.tickformatstops,hoverformat:E.hoverformat,showline:E.showline,linecolor:E.linecolor,linewidth:E.linewidth,showgrid:E.showgrid,gridcolor:i({},E.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:E.gridwidth,zeroline:E.zeroline,zerolinecolor:E.zerolinecolor,zerolinewidth:E.zerolinewidth,_deprecated:{title:E._deprecated.title,titlefont:E._deprecated.titlefont}},"plot","from-root")},64380:function(Q,U,t){var M=t(49760).mix,E=t(3400),i=t(31780),C=t(86140),T=t(14944),v=t(28336),d=["xaxis","yaxis","zaxis"],r=100*136/187;Q.exports=function(e,l,n){var s,o;function p(_,a){return E.coerce(s,o,C,_,a)}for(var b=0;b<d.length;b++){var h=d[b];s=e[h]||{},o=i.newContainer(l,h),o._id=h[0]+n.scene,o._name=h,T(s,o,p,n),v(s,o,p,{font:n.font,letter:h[0],data:n.data,showGrid:!0,noAutotickangles:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),p("gridcolor",M(o.color,n.bgColor,r).toRgbString()),p("title.text",h[0]),o.setScale=E.noop,p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor",o.color)),p("showaxeslabels"),p("showbackground")&&p("backgroundcolor")}}},44728:function(Q,U,t){var M=t(43080),E=t(3400),i=["xaxis","yaxis","zaxis"];function C(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var T=C.prototype;T.merge=function(d,r){for(var e=this,l=0;l<3;++l){var n=r[i[l]];if(!n.visible){e.tickEnable[l]=!1,e.labelEnable[l]=!1,e.lineEnable[l]=!1,e.lineTickEnable[l]=!1,e.gridEnable[l]=!1,e.zeroEnable[l]=!1,e.backgroundEnable[l]=!1;continue}e.labels[l]=d._meta?E.templateString(n.title.text,d._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(e.labelColor[l]=M(n.title.font.color)),n.title.font.family&&(e.labelFont[l]=n.title.font.family),n.title.font.size&&(e.labelSize[l]=n.title.font.size)),"showline"in n&&(e.lineEnable[l]=n.showline),"linecolor"in n&&(e.lineColor[l]=M(n.linecolor)),"linewidth"in n&&(e.lineWidth[l]=n.linewidth),"showgrid"in n&&(e.gridEnable[l]=n.showgrid),"gridcolor"in n&&(e.gridColor[l]=M(n.gridcolor)),"gridwidth"in n&&(e.gridWidth[l]=n.gridwidth),n.type==="log"?e.zeroEnable[l]=!1:"zeroline"in n&&(e.zeroEnable[l]=n.zeroline),"zerolinecolor"in n&&(e.zeroLineColor[l]=M(n.zerolinecolor)),"zerolinewidth"in n&&(e.zeroLineWidth[l]=n.zerolinewidth),"ticks"in n&&n.ticks?e.lineTickEnable[l]=!0:e.lineTickEnable[l]=!1,"ticklen"in n&&(e.lineTickLength[l]=e._defaultLineTickLength[l]=n.ticklen),"tickcolor"in n&&(e.lineTickColor[l]=M(n.tickcolor)),"tickwidth"in n&&(e.lineTickWidth[l]=n.tickwidth),"tickangle"in n&&(e.tickAngle[l]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(e.tickEnable[l]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(e.tickColor[l]=M(n.tickfont.color)),n.tickfont.family&&(e.tickFont[l]=n.tickfont.family),n.tickfont.size&&(e.tickSize[l]=n.tickfont.size)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(e.lineTickMirror[l]=!0,e.lineMirror[l]=!0):n.mirror===!0?(e.lineTickMirror[l]=!1,e.lineMirror[l]=!0):(e.lineTickMirror[l]=!1,e.lineMirror[l]=!1):e.lineMirror[l]=!1,"showbackground"in n&&n.showbackground!==!1?(e.backgroundEnable[l]=!0,e.backgroundColor[l]=M(n.backgroundcolor)):e.backgroundEnable[l]=!1}};function v(d,r){var e=new C;return e.merge(d,r),e}Q.exports=v},5208:function(Q,U,t){var M=t(3400),E=t(76308),i=t(24040),C=t(168),T=t(64380),v=t(346),d=t(84888).op,r="gl3d";Q.exports=function(l,n,s){var o=n._basePlotModules.length>1;function p(b){if(!o){var h=M.validate(l[b],v[b]);if(h)return l[b]}}C(l,n,s,{type:r,attributes:v,handleDefaults:e,fullLayout:n,font:n.font,fullData:s,getDfltFromLayout:p,autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})};function e(l,n,s,o){for(var p=s("bgcolor"),b=E.combine(p,o.paper_bgcolor),h=["up","center","eye"],_=0;_<h.length;_++)s("camera."+h[_]+".x"),s("camera."+h[_]+".y"),s("camera."+h[_]+".z");s("camera.projection.type");var a=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),c=a?"manual":"auto",f=s("aspectmode",c);a||(l.aspectratio=n.aspectratio={x:1,y:1,z:1},f==="manual"&&(n.aspectmode="auto"),l.aspectmode=n.aspectmode);var x=d(o.fullData,r,o.id);T(l,n,{font:o.font,scene:o.id,data:x,bgColor:b,calendar:o.calendar,autotypenumbersDflt:o.autotypenumbersDflt,fullLayout:o.fullLayout}),i.getComponentMethod("annotations3d","handleDefaults")(l,n,o);var k=o.getDfltFromLayout("dragmode");if(k!==!1&&!k)if(k="orbit",l.camera&&l.camera.up){var y=l.camera.up.x,A=l.camera.up.y,L=l.camera.up.z;L!==0&&(!y||!A||!L||L/Math.sqrt(y*y+A*A+L*L)>.999)&&(k="turntable")}else k="turntable";s("dragmode",k),s("hovermode",o.getDfltFromLayout("hovermode"))}},346:function(Q,U,t){var M=t(86140),E=t(86968).u,i=t(92880).extendFlat,C=t(3400).counterRegex;function T(v,d,r){return{x:{valType:"number",dflt:v,editType:"camera"},y:{valType:"number",dflt:d,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}Q.exports={_arrayAttrRegexps:[C("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:i(T(0,0,1),{}),center:i(T(0,0,0),{}),eye:i(T(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:E({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:M,yaxis:M,zaxis:M,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(Q,U,t){var M=t(43080),E=["xaxis","yaxis","zaxis"];function i(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var C=i.prototype;C.merge=function(v){for(var d=0;d<3;++d){var r=v[E[d]];if(!r.visible){this.enabled[d]=!1,this.drawSides[d]=!1;continue}this.enabled[d]=r.showspikes,this.colors[d]=M(r.spikecolor),this.drawSides[d]=r.spikesides,this.lineWidth[d]=r.spikethickness}};function T(v){var d=new i;return d.merge(v),d}Q.exports=T},87152:function(Q,U,t){Q.exports=T;var M=t(54460),E=t(3400),i=["xaxis","yaxis","zaxis"];function C(v){for(var d=new Array(3),r=0;r<3;++r){for(var e=v[r],l=new Array(e.length),n=0;n<e.length;++n)l[n]=e[n].x;d[r]=l}return d}function T(v){for(var d=v.axesOptions,r=v.glplot.axesPixels,e=v.fullSceneLayout,l=[[],[],[]],n=0;n<3;++n){var s=e[i[n]];if(s._length=(r[n].hi-r[n].lo)*r[n].pixelsPerDataUnit/v.dataScale[n],Math.abs(s._length)===1/0||isNaN(s._length))l[n]=[];else{s._input_range=s.range.slice(),s.range[0]=r[n].lo/v.dataScale[n],s.range[1]=r[n].hi/v.dataScale[n],s._m=1/(v.dataScale[n]*r[n].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var o=s.tickmode;if(s.tickmode==="auto"){s.tickmode="linear";var p=s.nticks||E.constrain(s._length/40,4,9);M.autoTicks(s,Math.abs(s.range[1]-s.range[0])/p)}for(var b=M.calcTicks(s,{msUTC:!0}),h=0;h<b.length;++h)b[h].x=b[h].x*v.dataScale[n],s.type==="date"&&(b[h].text=b[h].text.replace(/\<br\>/g," "));l[n]=b,s.tickmode=o}}d.ticks=l;for(var n=0;n<3;++n){.5*(v.glplot.bounds[0][n]+v.glplot.bounds[1][n]);for(var h=0;h<2;++h)d.bounds[h][n]=v.glplot.bounds[h][n]}v.contourLevels=C(l)}},94424:function(Q){function U(M,E){var i=[0,0,0,0],C,T;for(C=0;C<4;++C)for(T=0;T<4;++T)i[T]+=M[4*C+T]*E[C];return i}function t(M,E){var i=U(M.projection,U(M.view,U(M.model,[E[0],E[1],E[2],1])));return i}Q.exports=t},98432:function(Q,U,t){var M=t(67792).gl_plot3d,E=M.createCamera,i=M.createScene,C=t(5408),T=t(89184),v=t(24040),d=t(3400),r=d.preserveDrawingBuffer(),e=t(54460),l=t(93024),n=t(43080),s=t(16576),o=t(94424),p=t(44728),b=t(9020),h=t(87152),_=t(19280).applyAutorangeOptions,a,c,f=!1;function x(O,D){var P=document.createElement("div"),F=O.container;this.graphDiv=O.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",P.appendChild(R),this.svgContainer=R,P.id=O.id,P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",F.appendChild(P),this.fullLayout=D,this.id=O.id||"scene",this.fullSceneLayout=D[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(D,D[this.id]),this.spikeOptions=b(D[this.id]),this.container=P,this.staticMode=!!O.staticPlot,this.pixelRatio=this.pixelRatio||O.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=v.getComponentMethod("annotations3d","convert"),this.drawAnnotations=v.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var k=x.prototype;k.prepareOptions=function(){var O=this,D={canvas:O.canvas,gl:O.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:O.container,axes:O.axesOptions,spikes:O.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:O.camera,pixelRatio:O.pixelRatio};if(O.staticMode){if(!c&&(a=document.createElement("canvas"),c=C({canvas:a,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!c))throw new Error("error creating static canvas/context for image server");D.gl=c,D.canvas=a}return D};var y=!0;k.tryCreatePlot=function(){var O=this,D=O.prepareOptions(),P=!0;try{O.glplot=i(D)}catch{if(O.staticMode||!y||r)P=!1;else{d.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=D.glOptions.preserveDrawingBuffer=!0,O.glplot=i(D)}catch{r=D.glOptions.preserveDrawingBuffer=!1,P=!1}}}return y=!1,P},k.initializeGLCamera=function(){var O=this,D=O.fullSceneLayout.camera,P=D.projection.type==="orthographic";O.camera=E(O.container,{center:[D.center.x,D.center.y,D.center.z],eye:[D.eye.x,D.eye.y,D.eye.z],up:[D.up.x,D.up.y,D.up.z],_ortho:P,zoomMin:.01,zoomMax:100,mode:"orbit"})},k.initializeGLPlot=function(){var O=this;O.initializeGLCamera();var D=O.tryCreatePlot();if(!D)return s(O);O.traces={},O.make4thDimension();var P=O.graphDiv,F=P.layout,R=function(){var N={};return O.isCameraChanged(F)&&(N[O.id+".camera"]=O.getCamera()),O.isAspectChanged(F)&&(N[O.id+".aspectratio"]=O.glplot.getAspectratio(),F[O.id].aspectmode!=="manual"&&(O.fullSceneLayout.aspectmode=F[O.id].aspectmode=N[O.id+".aspectmode"]="manual")),N},B=function(N){if(N.fullSceneLayout.dragmode!==!1){var G=R();N.saveLayout(F),N.graphDiv.emit("plotly_relayout",G)}};return O.glplot.canvas&&(O.glplot.canvas.addEventListener("mouseup",function(){B(O)}),O.glplot.canvas.addEventListener("touchstart",function(){f=!0}),O.glplot.canvas.addEventListener("wheel",function(N){if(P._context._scrollZoom.gl3d){if(O.camera._ortho){var G=N.deltaX>N.deltaY?1.1:.9090909090909091,X=O.glplot.getAspectratio();O.glplot.setAspectratio({x:G*X.x,y:G*X.y,z:G*X.z})}B(O)}},T?{passive:!1}:!1),O.glplot.canvas.addEventListener("mousemove",function(){if(O.fullSceneLayout.dragmode!==!1&&O.camera.mouseListener.buttons!==0){var N=R();O.graphDiv.emit("plotly_relayouting",N)}}),O.staticMode||O.glplot.canvas.addEventListener("webglcontextlost",function(N){P&&P.emit&&P.emit("plotly_webglcontextlost",{event:N,layer:O.id})},!1)),O.glplot.oncontextloss=function(){O.recoverContext()},O.glplot.onrender=function(){O.render()},!0},k.render=function(){var O=this,D=O.graphDiv,P,F=O.svgContainer,R=O.container.getBoundingClientRect();D._fullLayout._calcInverseTransform(D);var B=D._fullLayout._invScaleX,N=D._fullLayout._invScaleY,G=R.width*B,X=R.height*N;F.setAttributeNS(null,"viewBox","0 0 "+G+" "+X),F.setAttributeNS(null,"width",G),F.setAttributeNS(null,"height",X),h(O),O.glplot.axes.update(O.axesOptions);for(var J=Object.keys(O.traces),it=null,nt=O.glplot.selection,q=0;q<J.length;++q)P=O.traces[J[q]],P.data.hoverinfo!=="skip"&&P.handlePick(nt)&&(it=P),P.setContourLevels&&P.setContourLevels();function Z(Ct,gt,mt){var vt=O.fullSceneLayout[Ct+"axis"];return vt.type!=="log"&&(gt=vt.d2l(gt)),e.hoverLabelText(vt,gt,mt)}if(it!==null){var $=o(O.glplot.cameraParams,nt.dataCoordinate);P=it.data;var V=D._fullData[P.index],rt=nt.index,ot={xLabel:Z("x",nt.traceCoordinate[0],P.xhoverformat),yLabel:Z("y",nt.traceCoordinate[1],P.yhoverformat),zLabel:Z("z",nt.traceCoordinate[2],P.zhoverformat)},H=l.castHoverinfo(V,O.fullLayout,rt),Y=(H||"").split("+"),at=H&&H==="all";!V.hovertemplate&&!at&&(Y.indexOf("x")===-1&&(ot.xLabel=void 0),Y.indexOf("y")===-1&&(ot.yLabel=void 0),Y.indexOf("z")===-1&&(ot.zLabel=void 0),Y.indexOf("text")===-1&&(nt.textLabel=void 0),Y.indexOf("name")===-1&&(it.name=void 0));var et,ct=[];P.type==="cone"||P.type==="streamtube"?(ot.uLabel=Z("x",nt.traceCoordinate[3],P.uhoverformat),(at||Y.indexOf("u")!==-1)&&ct.push("u: "+ot.uLabel),ot.vLabel=Z("y",nt.traceCoordinate[4],P.vhoverformat),(at||Y.indexOf("v")!==-1)&&ct.push("v: "+ot.vLabel),ot.wLabel=Z("z",nt.traceCoordinate[5],P.whoverformat),(at||Y.indexOf("w")!==-1)&&ct.push("w: "+ot.wLabel),ot.normLabel=nt.traceCoordinate[6].toPrecision(3),(at||Y.indexOf("norm")!==-1)&&ct.push("norm: "+ot.normLabel),P.type==="streamtube"&&(ot.divergenceLabel=nt.traceCoordinate[7].toPrecision(3),(at||Y.indexOf("divergence")!==-1)&&ct.push("divergence: "+ot.divergenceLabel)),nt.textLabel&&ct.push(nt.textLabel),et=ct.join("<br>")):P.type==="isosurface"||P.type==="volume"?(ot.valueLabel=e.hoverLabelText(O._mockAxis,O._mockAxis.d2l(nt.traceCoordinate[3]),P.valuehoverformat),ct.push("value: "+ot.valueLabel),nt.textLabel&&ct.push(nt.textLabel),et=ct.join("<br>")):et=nt.textLabel;var ft={x:nt.traceCoordinate[0],y:nt.traceCoordinate[1],z:nt.traceCoordinate[2],data:V._input,fullData:V,curveNumber:V.index,pointNumber:rt};l.appendArrayPointValue(ft,V,rt),P._module.eventData&&(ft=V._module.eventData(ft,nt,V,{},rt));var yt={points:[ft]};if(O.fullSceneLayout.hovermode){var xt=[];l.loneHover({trace:V,x:(.5+.5*$[0]/$[3])*G,y:(.5-.5*$[1]/$[3])*X,xLabel:ot.xLabel,yLabel:ot.yLabel,zLabel:ot.zLabel,text:et,name:it.name,color:l.castHoverOption(V,rt,"bgcolor")||it.color,borderColor:l.castHoverOption(V,rt,"bordercolor"),fontFamily:l.castHoverOption(V,rt,"font.family"),fontSize:l.castHoverOption(V,rt,"font.size"),fontColor:l.castHoverOption(V,rt,"font.color"),nameLength:l.castHoverOption(V,rt,"namelength"),textAlign:l.castHoverOption(V,rt,"align"),hovertemplate:d.castOption(V,rt,"hovertemplate"),hovertemplateLabels:d.extendFlat({},ft,ot),eventData:[ft]},{container:F,gd:D,inOut_bbox:xt}),ft.bbox=xt[0]}nt.distance<5&&(nt.buttons||f)?D.emit("plotly_click",yt):D.emit("plotly_hover",yt),this.oldEventData=yt}else l.loneUnhover(F),this.oldEventData&&D.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;O.drawAnnotations(O)},k.recoverContext=function(){var O=this;O.glplot.dispose();var D=function(){if(O.glplot.gl.isContextLost()){requestAnimationFrame(D);return}if(!O.initializeGLPlot()){d.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}O.plot.apply(O,O.plotArgs)};requestAnimationFrame(D)};var A=["xaxis","yaxis","zaxis"];function L(O,D,P){for(var F=O.fullSceneLayout,R=0;R<3;R++){var B=A[R],N=B.charAt(0),G=F[B],X=D[N],J=D[N+"calendar"],it=D["_"+N+"length"];if(!d.isArrayOrTypedArray(X))P[0][R]=Math.min(P[0][R],0),P[1][R]=Math.max(P[1][R],it-1);else for(var nt,q=0;q<(it||X.length);q++)if(d.isArrayOrTypedArray(X[q]))for(var Z=0;Z<X[q].length;++Z)nt=G.d2l(X[q][Z],0,J),!isNaN(nt)&&isFinite(nt)&&(P[0][R]=Math.min(P[0][R],nt),P[1][R]=Math.max(P[1][R],nt));else nt=G.d2l(X[q],0,J),!isNaN(nt)&&isFinite(nt)&&(P[0][R]=Math.min(P[0][R],nt),P[1][R]=Math.max(P[1][R],nt))}}function u(O,D){for(var P=O.fullSceneLayout,F=P.annotations||[],R=0;R<3;R++)for(var B=A[R],N=B.charAt(0),G=P[B],X=0;X<F.length;X++){var J=F[X];if(J.visible){var it=G.r2l(J[N]);!isNaN(it)&&isFinite(it)&&(D[0][R]=Math.min(D[0][R],it),D[1][R]=Math.max(D[1][R],it))}}}k.plot=function(O,D,P){var F=this;if(F.plotArgs=[O,D,P],!F.glplot.contextLost){var R,B,N,G,X,J,it=D[F.id],nt=P[F.id];F.fullLayout=D,F.fullSceneLayout=it,F.axesOptions.merge(D,it),F.spikeOptions.merge(it),F.setViewport(it),F.updateFx(it.dragmode,it.hovermode),F.camera.enableWheel=F.graphDiv._context._scrollZoom.gl3d,F.glplot.setClearColor(n(it.bgcolor)),F.setConvert(X),O?Array.isArray(O)||(O=[O]):O=[];var q=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(N=0;N<O.length;++N)R=O[N],!(R.visible!==!0||R._length===0)&&L(this,R,q);u(this,q);var Z=[1,1,1];for(G=0;G<3;++G)q[1][G]===q[0][G]?Z[G]=1:Z[G]=1/(q[1][G]-q[0][G]);for(F.dataScale=Z,F.convertAnnotations(this),N=0;N<O.length;++N)R=O[N],!(R.visible!==!0||R._length===0)&&(B=F.traces[R.uid],B?B.data.type===R.type?B.update(R):(B.dispose(),B=R._module.plot(this,R),F.traces[R.uid]=B):(B=R._module.plot(this,R),F.traces[R.uid]=B),B.name=R.name);var $=Object.keys(F.traces);t:for(N=0;N<$.length;++N){for(G=0;G<O.length;++G)if(O[G].uid===$[N]&&O[G].visible===!0&&O[G]._length!==0)continue t;B=F.traces[$[N]],B.dispose(),delete F.traces[$[N]]}F.glplot.objects.sort(function(he,Zt){return he._trace.data.index-Zt._trace.data.index});var V=[[0,0,0],[0,0,0]],rt=[],ot={};for(N=0;N<3;++N){X=it[A[N]],J=X.type,J in ot?(ot[J].acc*=Z[N],ot[J].count+=1):ot[J]={acc:Z[N],count:1};var H;if(X.autorange){V[0][N]=1/0,V[1][N]=-1/0;var Y=F.glplot.objects,at=F.fullSceneLayout.annotations||[],et=X._name.charAt(0);for(G=0;G<Y.length;G++){var ct=Y[G],ft=ct.bounds,yt=ct._trace.data._pad||0;ct.constructor.name==="ErrorBars"&&X._lowerLogErrorBound?V[0][N]=Math.min(V[0][N],X._lowerLogErrorBound):V[0][N]=Math.min(V[0][N],ft[0][N]/Z[N]-yt),V[1][N]=Math.max(V[1][N],ft[1][N]/Z[N]+yt)}for(G=0;G<at.length;G++){var xt=at[G];if(xt.visible){var Ct=X.r2l(xt[et]);V[0][N]=Math.min(V[0][N],Ct),V[1][N]=Math.max(V[1][N],Ct)}}if("rangemode"in X&&X.rangemode==="tozero"&&(V[0][N]=Math.min(V[0][N],0),V[1][N]=Math.max(V[1][N],0)),V[0][N]>V[1][N])V[0][N]=-1,V[1][N]=1;else{var gt=V[1][N]-V[0][N];V[0][N]-=gt/32,V[1][N]+=gt/32}if(H=[V[0][N],V[1][N]],H=_(H,X),V[0][N]=H[0],V[1][N]=H[1],X.isReversed()){var mt=V[0][N];V[0][N]=V[1][N],V[1][N]=mt}}else H=X.range,V[0][N]=X.r2l(H[0]),V[1][N]=X.r2l(H[1]);V[0][N]===V[1][N]&&(V[0][N]-=1,V[1][N]+=1),rt[N]=V[1][N]-V[0][N],X.range=[V[0][N],V[1][N]],X.limitRange(),F.glplot.setBounds(N,{min:X.range[0]*Z[N],max:X.range[1]*Z[N]})}var vt,At=it.aspectmode;if(At==="cube")vt=[1,1,1];else if(At==="manual"){var Ot=it.aspectratio;vt=[Ot.x,Ot.y,Ot.z]}else if(At==="auto"||At==="data"){var It=[1,1,1];for(N=0;N<3;++N){X=it[A[N]],J=X.type;var St=ot[J];It[N]=Math.pow(St.acc,1/St.count)/Z[N]}At==="data"||Math.max.apply(null,It)/Math.min.apply(null,It)<=4?vt=It:vt=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");it.aspectratio.x=nt.aspectratio.x=vt[0],it.aspectratio.y=nt.aspectratio.y=vt[1],it.aspectratio.z=nt.aspectratio.z=vt[2],F.glplot.setAspectratio(it.aspectratio),F.viewInitial.aspectratio||(F.viewInitial.aspectratio={x:it.aspectratio.x,y:it.aspectratio.y,z:it.aspectratio.z}),F.viewInitial.aspectmode||(F.viewInitial.aspectmode=it.aspectmode);var Bt=it.domain||null,re=D._size||null;if(Bt&&re){var Yt=F.container.style;Yt.position="absolute",Yt.left=re.l+Bt.x[0]*re.w+"px",Yt.top=re.t+(1-Bt.y[1])*re.h+"px",Yt.width=re.w*(Bt.x[1]-Bt.x[0])+"px",Yt.height=re.h*(Bt.y[1]-Bt.y[0])+"px"}F.glplot.redraw()}},k.destroy=function(){var O=this;O.glplot&&(O.camera.mouseListener.enabled=!1,O.container.removeEventListener("wheel",O.camera.wheelListener),O.camera=null,O.glplot.dispose(),O.container.parentNode.removeChild(O.container),O.glplot=null)};function m(O){return[[O.eye.x,O.eye.y,O.eye.z],[O.center.x,O.center.y,O.center.z],[O.up.x,O.up.y,O.up.z]]}function S(O){return{up:{x:O.up[0],y:O.up[1],z:O.up[2]},center:{x:O.center[0],y:O.center[1],z:O.center[2]},eye:{x:O.eye[0],y:O.eye[1],z:O.eye[2]},projection:{type:O._ortho===!0?"orthographic":"perspective"}}}k.getCamera=function(){var O=this;return O.camera.view.recalcMatrix(O.camera.view.lastT()),S(O.camera)},k.setViewport=function(O){var D=this,P=O.camera;D.camera.lookAt.apply(this,m(P)),D.glplot.setAspectratio(O.aspectratio);var F=P.projection.type==="orthographic",R=D.camera._ortho;F!==R&&(D.glplot.redraw(),D.glplot.clearRGBA(),D.glplot.dispose(),D.initializeGLPlot())},k.isCameraChanged=function(O){var D=this,P=D.getCamera(),F=d.nestedProperty(O,D.id+".camera"),R=F.get();function B(J,it,nt,q){var Z=["up","center","eye"],$=["x","y","z"];return it[Z[nt]]&&J[Z[nt]][$[q]]===it[Z[nt]][$[q]]}var N=!1;if(R===void 0)N=!0;else{for(var G=0;G<3;G++)for(var X=0;X<3;X++)if(!B(P,R,G,X)){N=!0;break}(!R.projection||P.projection&&P.projection.type!==R.projection.type)&&(N=!0)}return N},k.isAspectChanged=function(O){var D=this,P=D.glplot.getAspectratio(),F=d.nestedProperty(O,D.id+".aspectratio"),R=F.get();return R===void 0||R.x!==P.x||R.y!==P.y||R.z!==P.z},k.saveLayout=function(O){var D=this,P=D.fullLayout,F,R,B,N,G,X,J=D.isCameraChanged(O),it=D.isAspectChanged(O),nt=J||it;if(nt){var q={};if(J&&(F=D.getCamera(),R=d.nestedProperty(O,D.id+".camera"),B=R.get(),q[D.id+".camera"]=B),it&&(N=D.glplot.getAspectratio(),G=d.nestedProperty(O,D.id+".aspectratio"),X=G.get(),q[D.id+".aspectratio"]=X),v.call("_storeDirectGUIEdit",O,P._preGUI,q),J){R.set(F);var Z=d.nestedProperty(P,D.id+".camera");Z.set(F)}if(it){G.set(N);var $=d.nestedProperty(P,D.id+".aspectratio");$.set(N),D.glplot.redraw()}}return nt},k.updateFx=function(O,D){var P=this,F=P.camera;if(F)if(O==="orbit")F.mode="orbit",F.keyBindingMode="rotate";else if(O==="turntable"){F.up=[0,0,1],F.mode="turntable",F.keyBindingMode="rotate";var R=P.graphDiv,B=R._fullLayout,N=P.fullSceneLayout.camera,G=N.up.x,X=N.up.y,J=N.up.z;if(J/Math.sqrt(G*G+X*X+J*J)<.999){var it=P.id+".camera.up",nt={x:0,y:0,z:1},q={};q[it]=nt;var Z=R.layout;v.call("_storeDirectGUIEdit",Z,B._preGUI,q),N.up=nt,d.nestedProperty(Z,it).set(nt)}}else F.keyBindingMode=O;P.fullSceneLayout.hovermode=D};function w(O,D,P){for(var F=0,R=P-1;F<R;++F,--R)for(var B=0;B<D;++B)for(var N=0;N<4;++N){var G=4*(D*F+B)+N,X=4*(D*R+B)+N,J=O[G];O[G]=O[X],O[X]=J}}function I(O,D,P){for(var F=0;F<P;++F)for(var R=0;R<D;++R){var B=4*(D*F+R),N=O[B+3];if(N>0)for(var G=255/N,X=0;X<3;++X)O[B+X]=Math.min(G*O[B+X],255)}}k.toImage=function(O){var D=this;O||(O="png"),D.staticMode&&D.container.appendChild(a),D.glplot.redraw();var P=D.glplot.gl,F=P.drawingBufferWidth,R=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var B=new Uint8Array(F*R*4);P.readPixels(0,0,F,R,P.RGBA,P.UNSIGNED_BYTE,B),w(B,F,R),I(B,F,R);var N=document.createElement("canvas");N.width=F,N.height=R;var G=N.getContext("2d",{willReadFrequently:!0}),X=G.createImageData(F,R);X.data.set(B),G.putImageData(X,0,0);var J;switch(O){case"jpeg":J=N.toDataURL("image/jpeg");break;case"webp":J=N.toDataURL("image/webp");break;default:J=N.toDataURL("image/png")}return D.staticMode&&D.container.removeChild(a),J},k.setConvert=function(){for(var O=this,D=0;D<3;D++){var P=O.fullSceneLayout[A[D]];e.setConvert(P,O.fullLayout),P.setScale=d.noop}},k.make4thDimension=function(){var O=this,D=O.graphDiv,P=D._fullLayout;O._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(O._mockAxis,P)},Q.exports=x},52094:function(Q){Q.exports=function(U,t,M,E){E=E||U.length;for(var i=new Array(E),C=0;C<E;C++)i[C]=[U[C],t[C],M[C]];return i}},64859:function(Q,U,t){var M=t(25376),E=t(85656),i=t(22548),C=t(92872),T=t(34200),v=t(66741),d=t(92880).extendFlat,r=M({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=i.defaultLine,Q.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:M({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:d(v({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:i.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:i.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:i.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:C.newshape,activeshape:C.activeshape,newselection:T.newselection,activeselection:T.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:d({},E.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:M({editType:"layoutstyle"})}}},47552:function(Q,U,t){var M=t(95376),E="1.13.4",i='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',C=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',i].join(" "),T=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),v=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),d={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:i,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:C,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:C,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:T,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:T,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:v,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},r=M(d);Q.exports={requiredVersion:E,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:d,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+E+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){var C=E.split(" "),T=C[0],v=C[1],d=M.isArrayOrTypedArray(i)?M.mean(i):i,r=.5+d/100,e=1.5+d/100,l=["",""],n=[0,0];switch(T){case"top":l[0]="top",n[1]=-e;break;case"bottom":l[0]="bottom",n[1]=e;break}switch(v){case"left":l[1]="right",n[0]=-r;break;case"right":l[1]="left",n[0]=r;break}var s;return l[0]&&l[1]?s=l.join("-"):l[0]?s=l[0]:l[1]?s=l[1]:s="center",{anchor:s,offset:n}}},33688:function(Q,U,t){var M=t(3480),E=t(3400),i=E.strTranslate,C=E.strScale,T=t(84888).KY,v=t(9616),d=t(33428),r=t(43616),e=t(72736),l=t(14440),n="mapbox",s=U.constants=t(47552);U.name=n,U.attr="subplot",U.idRoot=n,U.idRegex=U.attrRegex=E.counterRegex(n),U.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},U.layoutAttributes=t(5232),U.supplyLayoutDefaults=t(5976),U.plot=function(b){var h=b._fullLayout,_=b.calcdata,a=h._subplots[n];if(M.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var c=o(b,a);M.accessToken=c;for(var f=0;f<a.length;f++){var x=a[f],k=T(_,n,x),y=h[x],A=y._subplot;A||(A=new l(b,x),h[x]._subplot=A),A.viewInitial||(A.viewInitial={center:E.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),A.plot(k,h,b._promises)}},U.clean=function(b,h,_,a){for(var c=a._subplots[n]||[],f=0;f<c.length;f++){var x=c[f];!h[x]&&a[x]._subplot&&a[x]._subplot.destroy()}},U.toSVG=function(b){for(var h=b._fullLayout,_=h._subplots[n],a=h._size,c=0;c<_.length;c++){var f=h[_[c]],x=f.domain,k=f._subplot,y=k.toImage("png"),A=h._glimages.append("svg:image");A.attr({xmlns:v.svg,"xlink:href":y,x:a.l+a.w*x.x[0],y:a.t+a.h*(1-x.y[1]),width:a.w*(x.x[1]-x.x[0]),height:a.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var L=d.select(f._subplot.div),u=L.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!u){var m=h._glimages.append("g");m.attr("transform",i(a.l+a.w*x.x[0]+10,a.t+a.h*(1-x.y[0])-31)),m.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),m.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),m.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),m.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var S=L.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),w=h._glimages.append("g"),I=w.append("text");I.text(S).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":S});var O=r.bBox(I.node()),D=a.w*(x.x[1]-x.x[0]);if(O.width>D/2){var P=S.split("|").join("<br>");I.text(P).attr("data-unformatted",P).call(e.convertToTspans,b),O=r.bBox(I.node())}I.attr("transform",i(-3,-O.height+8)),w.insert("rect",".static-attribution").attr({x:-O.width-6,y:-O.height-3,width:O.width+6,height:O.height+3,fill:"rgba(255, 255, 255, 0.75)"});var F=1;O.width+6>D&&(F=D/(O.width+6));var R=[a.l+a.w*x.x[1],a.t+a.h*(1-x.y[0])];w.attr("transform",i(R[0],R[1])+C(F))}};function o(b,h){var _=b._fullLayout,a=b._context;if(a.mapboxAccessToken==="")return"";for(var c=[],f=[],x=!1,k=!1,y=0;y<h.length;y++){var A=_[h[y]],L=A.accesstoken;p(A.style)&&(L?E.pushUnique(c,L):(p(A._input.style)&&(E.error("Uses Mapbox map style, but did not set an access token."),x=!0),k=!0)),L&&E.pushUnique(f,L)}if(k){var u=x?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw E.error(u),new Error(u)}return c.length?(c.length>1&&E.warn(s.multipleTokensErrorMsg),c[0]):(f.length&&E.log(["Listed mapbox access token(s)",f.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function p(b){return typeof b=="string"&&(s.styleValuesMapbox.indexOf(b)!==-1||b.indexOf("mapbox://")===0||b.indexOf("stamen")===0)}U.updateFx=function(b){for(var h=b._fullLayout,_=h._subplots[n],a=0;a<_.length;a++){var c=h[_[a]]._subplot;c.updateFx(h)}}},22360:function(Q,U,t){var M=t(3400),E=t(72736).sanitizeHTML,i=t(89032),C=t(47552);function T(l,n){this.subplot=l,this.uid=l.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=C.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var v=T.prototype;v.update=function(l){this.visible?this.needsNewImage(l)?this.updateImage(l):this.needsNewSource(l)?(this.removeLayer(),this.updateSource(l),this.updateLayer(l)):this.needsNewLayer(l)?this.updateLayer(l):this.updateStyle(l):(this.updateSource(l),this.updateLayer(l)),this.visible=d(l)},v.needsNewImage=function(l){var n=this.subplot.map;return n.getSource(this.idSource)&&this.sourceType==="image"&&l.sourcetype==="image"&&(this.source!==l.source||JSON.stringify(this.coordinates)!==JSON.stringify(l.coordinates))},v.needsNewSource=function(l){return this.sourceType!==l.sourcetype||JSON.stringify(this.source)!==JSON.stringify(l.source)||this.layerType!==l.type},v.needsNewLayer=function(l){return this.layerType!==l.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},v.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},v.updateImage=function(l){var n=this.subplot.map;n.getSource(this.idSource).updateImage({url:l.source,coordinates:l.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());s!==null&&this.subplot.map.moveLayer(this.idLayer,s)},v.updateSource=function(l){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=l.sourcetype,this.source=l.source,!!d(l)){var s=e(l);n.addSource(this.idSource,s)}},v.findFollowingMapboxLayerId=function(l){if(l==="traces")for(var n=this.subplot.getMapLayers(),s=0;s<n.length;s++){var o=n[s].id;if(typeof o=="string"&&o.indexOf(C.traceLayerPrefix)===0){l=o;break}}return l},v.updateLayer=function(l){var n=this.subplot,s=r(l),o=this.lookupBelow(),p=this.findFollowingMapboxLayerId(o);this.removeLayer(),d(l)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":l.sourcelayer||"",type:l.type,minzoom:l.minzoom,maxzoom:l.maxzoom,layout:s.layout,paint:s.paint},p),this.layerType=l.type,this.below=o},v.updateStyle=function(l){if(d(l)){var n=r(l);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},v.removeLayer=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer)},v.dispose=function(){var l=this.subplot.map;l.getLayer(this.idLayer)&&l.removeLayer(this.idLayer),l.getSource(this.idSource)&&l.removeSource(this.idSource)};function d(l){if(!l.visible)return!1;var n=l.source;if(Array.isArray(n)&&n.length>0){for(var s=0;s<n.length;s++)if(typeof n[s]!="string"||n[s].length===0)return!1;return!0}return M.isPlainObject(n)||typeof n=="string"&&n.length>0}function r(l){var n={},s={};switch(l.type){case"circle":M.extendFlat(s,{"circle-radius":l.circle.radius,"circle-color":l.color,"circle-opacity":l.opacity});break;case"line":M.extendFlat(s,{"line-width":l.line.width,"line-color":l.color,"line-opacity":l.opacity,"line-dasharray":l.line.dash});break;case"fill":M.extendFlat(s,{"fill-color":l.color,"fill-outline-color":l.fill.outlinecolor,"fill-opacity":l.opacity});break;case"symbol":var o=l.symbol,p=i(o.textposition,o.iconsize);M.extendFlat(n,{"icon-image":o.icon+"-15","icon-size":o.iconsize/10,"text-field":o.text,"text-size":o.textfont.size,"text-anchor":p.anchor,"text-offset":p.offset,"symbol-placement":o.placement}),M.extendFlat(s,{"icon-color":l.color,"text-color":o.textfont.color,"text-opacity":l.opacity});break;case"raster":M.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":l.opacity});break}return{layout:n,paint:s}}function e(l){var n=l.sourcetype,s=l.source,o={type:n},p;return n==="geojson"?p="data":n==="vector"?p=typeof s=="string"?"url":"tiles":n==="raster"?(p="tiles",o.tileSize=256):n==="image"&&(p="url",o.coordinates=l.coordinates),o[p]=s,l.sourceattribution&&(o.attribution=E(l.sourceattribution)),o}Q.exports=function(l,n,s){var o=new T(l,n);return o.update(s),o}},5232:function(Q,U,t){var M=t(3400),E=t(76308).defaultLine,i=t(86968).u,C=t(25376),T=t(52904).textposition,v=t(67824).overrideAll,d=t(31780).templatedArray,r=t(47552),e=C({});e.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var l=Q.exports=v({_arrayAttrRegexps:[M.counterRegex("mapbox",".layers",!0)],domain:i({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:d("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:E},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:E}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:e,textposition:M.extendFlat({},T,{arrayOk:!1})}})},"plot","from-root");l.uirevision={valType:"any",editType:"none"}},5976:function(Q,U,t){var M=t(3400),E=t(168),i=t(51272),C=t(5232);Q.exports=function(d,r,e){E(d,r,e,{type:"mapbox",attributes:C,handleDefaults:T,partition:"y",accessToken:r._mapboxAccessToken})};function T(d,r,e,l){e("accesstoken",l.accessToken),e("style"),e("center.lon"),e("center.lat"),e("zoom"),e("bearing"),e("pitch");var n=e("bounds.west"),s=e("bounds.east"),o=e("bounds.south"),p=e("bounds.north");(n===void 0||s===void 0||o===void 0||p===void 0)&&delete r.bounds,i(d,r,{name:"layers",handleItemDefaults:v}),r._input=d}function v(d,r){function e(b,h){return M.coerce(d,r,C.layers,b,h)}var l=e("visible");if(l){var n=e("sourcetype"),s=n==="raster"||n==="image";e("source"),e("sourceattribution"),n==="vector"&&e("sourcelayer"),n==="image"&&e("coordinates");var o;s&&(o="raster");var p=e("type",o);s&&p!=="raster"&&(p=r.type="raster",M.log("Source types *raster* and *image* must drawn *raster* layer type.")),e("below"),e("color"),e("opacity"),e("minzoom"),e("maxzoom"),p==="circle"&&e("circle.radius"),p==="line"&&(e("line.width"),e("line.dash")),p==="fill"&&e("fill.outlinecolor"),p==="symbol"&&(e("symbol.icon"),e("symbol.iconsize"),e("symbol.text"),M.coerceFont(e,"symbol.textfont"),e("symbol.textposition"),e("symbol.placement"))}}},14440:function(Q,U,t){var M=t(3480),E=t(3400),i=t(27144),C=t(24040),T=t(54460),v=t(86476),d=t(93024),r=t(72760),e=r.drawMode,l=r.selectMode,n=t(22676).prepSelect,s=t(22676).clearOutline,o=t(22676).clearSelectionsCache,p=t(22676).selectOnClick,b=t(47552),h=t(22360);function _(y,A){this.id=A,this.gd=y;var L=y._fullLayout,u=y._context;this.container=L._glcontainer.node(),this.isStatic=u.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var a=_.prototype;a.plot=function(y,A,L){var u=this,m=A[u.id];u.map&&m.accesstoken!==u.accessToken&&(u.map.remove(),u.map=null,u.styleObj=null,u.traceHash={},u.layerList=[]);var S;u.map?S=new Promise(function(w,I){u.updateMap(y,A,w,I)}):S=new Promise(function(w,I){u.createMap(y,A,w,I)}),L.push(S)},a.createMap=function(y,A,L,u){var m=this,S=A[m.id],w=m.styleObj=f(S.style,A);m.accessToken=S.accesstoken;var I=S.bounds,O=I?[[I.west,I.south],[I.east,I.north]]:null,D=m.map=new M.Map({container:m.div,style:w.style,center:k(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,maxBounds:O,interactive:!m.isStatic,preserveDrawingBuffer:m.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new M.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",m.rejectOnError(u),m.isStatic||m.initFx(y,A);var P=[];P.push(new Promise(function(F){D.once("load",F)})),P=P.concat(i.fetchTraceGeoData(y)),Promise.all(P).then(function(){m.fillBelowLookup(y,A),m.updateData(y),m.updateLayout(A),m.resolveOnRender(L)}).catch(u)},a.updateMap=function(y,A,L,u){var m=this,S=m.map,w=A[this.id];m.rejectOnError(u);var I=[],O=f(w.style,A);JSON.stringify(m.styleObj)!==JSON.stringify(O)&&(m.styleObj=O,S.setStyle(O.style),m.traceHash={},I.push(new Promise(function(D){S.once("styledata",D)}))),I=I.concat(i.fetchTraceGeoData(y)),Promise.all(I).then(function(){m.fillBelowLookup(y,A),m.updateData(y),m.updateLayout(A),m.resolveOnRender(L)}).catch(u)},a.fillBelowLookup=function(y,A){var L=A[this.id],u=L.layers,m,S,w=this.belowLookup={},I=!1;for(m=0;m<y.length;m++){var O=y[m][0].trace,D=O._module;typeof O.below=="string"?S=O.below:D.getBelow&&(S=D.getBelow(O,this)),S===""&&(I=!0),w["trace-"+O.uid]=S||""}for(m=0;m<u.length;m++){var P=u[m];typeof P.below=="string"?S=P.below:I?S="traces":S="",w["layout-"+m]=S}var F={},R,B;for(R in w)S=w[R],F[S]?F[S].push(R):F[S]=[R];for(S in F){var N=F[S];if(N.length>1)for(m=0;m<N.length;m++)R=N[m],R.indexOf("trace-")===0?(B=R.split("trace-")[1],this.traceHash[B]&&(this.traceHash[B].below=null)):R.indexOf("layout-")===0&&(B=R.split("layout-")[1],this.layerList[B]&&(this.layerList[B].below=null))}};var c={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};a.updateData=function(y){var A=this.traceHash,L,u,m,S,w=y.slice().sort(function(F,R){return c[F[0].trace.type]-c[R[0].trace.type]});for(m=0;m<w.length;m++){var I=w[m];u=I[0].trace,L=A[u.uid];var O=!1;L&&(L.type===u.type?(L.update(I),O=!0):L.dispose()),!O&&u._module&&(A[u.uid]=u._module.plot(this,I))}var D=Object.keys(A);t:for(m=0;m<D.length;m++){var P=D[m];for(S=0;S<y.length;S++)if(u=y[S][0].trace,P===u.uid)continue t;L=A[P],L.dispose(),delete A[P]}},a.updateLayout=function(y){var A=this.map,L=y[this.id];!this.dragging&&!this.wheeling&&(A.setCenter(k(L.center)),A.setZoom(L.zoom),A.setBearing(L.bearing),A.setPitch(L.pitch)),this.updateLayers(y),this.updateFramework(y),this.updateFx(y),this.map.resize(),this.gd._context._scrollZoom.mapbox?A.scrollZoom.enable():A.scrollZoom.disable()},a.resolveOnRender=function(y){var A=this.map;A.on("render",function L(){A.loaded()&&(A.off("render",L),setTimeout(y,10))})},a.rejectOnError=function(y){var A=this.map;function L(){y(new Error(b.mapOnErrorMsg))}A.once("error",L),A.once("style.error",L),A.once("source.error",L),A.once("tile.error",L),A.once("layer.error",L)},a.createFramework=function(y){var A=this,L=A.div=document.createElement("div");L.id=A.uid,L.style.position="absolute",A.container.appendChild(L),A.xaxis={_id:"x",c2p:function(u){return A.project(u).x}},A.yaxis={_id:"y",c2p:function(u){return A.project(u).y}},A.updateFramework(y),A.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},T.setConvert(A.mockAxis,y)},a.initFx=function(y,A){var L=this,u=L.gd,m=L.map;m.on("moveend",function(I){if(L.map){var O=u._fullLayout;if(I.originalEvent||L.wheeling){var D=O[L.id];C.call("_storeDirectGUIEdit",u.layout,O._preGUI,L.getViewEdits(D));var P=L.getView();D._input.center=D.center=P.center,D._input.zoom=D.zoom=P.zoom,D._input.bearing=D.bearing=P.bearing,D._input.pitch=D.pitch=P.pitch,u.emit("plotly_relayout",L.getViewEditsWithDerived(P))}I.originalEvent&&I.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),O._rehover&&O._rehover()}}),m.on("wheel",function(){L.wheeling=!0}),m.on("mousemove",function(I){var O=L.div.getBoundingClientRect(),D=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return O},L.xaxis.p2c=function(){return m.unproject(D).lng},L.yaxis.p2c=function(){return m.unproject(D).lat},u._fullLayout._rehover=function(){u._fullLayout._hoversubplot===L.id&&u._fullLayout[L.id]&&d.hover(u,I,L.id)},d.hover(u,I,L.id),u._fullLayout._hoversubplot=L.id});function S(){d.loneUnhover(A._hoverlayer)}m.on("dragstart",function(){L.dragging=!0,S()}),m.on("zoomstart",S),m.on("mouseout",function(){u._fullLayout._hoversubplot=null});function w(){var I=L.getView();u.emit("plotly_relayouting",L.getViewEditsWithDerived(I))}m.on("drag",w),m.on("zoom",w),m.on("dblclick",function(){var I=u._fullLayout[L.id];C.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,L.getViewEdits(I));var O=L.viewInitial;m.setCenter(k(O.center)),m.setZoom(O.zoom),m.setBearing(O.bearing),m.setPitch(O.pitch);var D=L.getView();I._input.center=I.center=D.center,I._input.zoom=I.zoom=D.zoom,I._input.bearing=I.bearing=D.bearing,I._input.pitch=I.pitch=D.pitch,u.emit("plotly_doubleclick",null),u.emit("plotly_relayout",L.getViewEditsWithDerived(D))}),L.clearOutline=function(){o(L.dragOptions),s(L.dragOptions.gd)},L.onClickInPanFn=function(I){return function(O){var D=u._fullLayout.clickmode;D.indexOf("select")>-1&&p(O.originalEvent,u,[L.xaxis],[L.yaxis],L.id,I),D.indexOf("event")>-1&&d.click(u,O.originalEvent)}}},a.updateFx=function(y){var A=this,L=A.map,u=A.gd;if(A.isStatic)return;function m(O){var D=A.map.unproject(O);return[D.lng,D.lat]}var S=y.dragmode,w;w=function(O,D){if(D.isRect){var P=O.range={};P[A.id]=[m([D.xmin,D.ymin]),m([D.xmax,D.ymax])]}else{var F=O.lassoPoints={};F[A.id]=D.map(m)}};var I=A.dragOptions;A.dragOptions=E.extendDeep(I||{},{dragmode:y.dragmode,element:A.div,gd:u,plotinfo:{id:A.id,domain:y[A.id].domain,xaxis:A.xaxis,yaxis:A.yaxis,fillRangeItems:w},xaxes:[A.xaxis],yaxes:[A.yaxis],subplot:A.id}),L.off("click",A.onClickInPanHandler),l(S)||e(S)?(L.dragPan.disable(),L.on("zoomstart",A.clearOutline),A.dragOptions.prepFn=function(O,D,P){n(O,D,P,A.dragOptions,S)},v.init(A.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",A.clearOutline),A.div.onmousedown=null,A.div.ontouchstart=null,A.div.removeEventListener("touchstart",A.div._ontouchstart),A.onClickInPanHandler=A.onClickInPanFn(A.dragOptions),L.on("click",A.onClickInPanHandler))},a.updateFramework=function(y){var A=y[this.id].domain,L=y._size,u=this.div.style;u.width=L.w*(A.x[1]-A.x[0])+"px",u.height=L.h*(A.y[1]-A.y[0])+"px",u.left=L.l+A.x[0]*L.w+"px",u.top=L.t+(1-A.y[1])*L.h+"px",this.xaxis._offset=L.l+A.x[0]*L.w,this.xaxis._length=L.w*(A.x[1]-A.x[0]),this.yaxis._offset=L.t+(1-A.y[1])*L.h,this.yaxis._length=L.h*(A.y[1]-A.y[0])},a.updateLayers=function(y){var A=y[this.id],L=A.layers,u=this.layerList,m;if(L.length!==u.length){for(m=0;m<u.length;m++)u[m].dispose();for(u=this.layerList=[],m=0;m<L.length;m++)u.push(h(this,m,L[m]))}else for(m=0;m<L.length;m++)u[m].update(L[m])},a.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},a.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},a.setOptions=function(y,A,L){for(var u in L)this.map[A](y,u,L[u])},a.getMapLayers=function(){return this.map.getStyle().layers},a.addLayer=function(y,A){var L=this.map;if(typeof A=="string"){if(A===""){L.addLayer(y,A);return}for(var u=this.getMapLayers(),m=0;m<u.length;m++)if(A===u[m].id){L.addLayer(y,A);return}E.warn(["Trying to add layer with *below* value",A,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(y)},a.project=function(y){return this.map.project(new M.LngLat(y[0],y[1]))},a.getView=function(){var y=this.map,A=y.getCenter(),L=A.lng,u=A.lat,m={lon:L,lat:u},S=y.getCanvas(),w=parseInt(S.style.width),I=parseInt(S.style.height);return{center:m,zoom:y.getZoom(),bearing:y.getBearing(),pitch:y.getPitch(),_derived:{coordinates:[y.unproject([0,0]).toArray(),y.unproject([w,0]).toArray(),y.unproject([w,I]).toArray(),y.unproject([0,I]).toArray()]}}},a.getViewEdits=function(y){for(var A=this.id,L=["center","zoom","bearing","pitch"],u={},m=0;m<L.length;m++){var S=L[m];u[A+"."+S]=y[S]}return u},a.getViewEditsWithDerived=function(y){var A=this.id,L=this.getViewEdits(y);return L[A+"._derived"]=y._derived,L};function f(y,A){var L={};if(E.isPlainObject(y))L.id=y.id,L.style=y;else if(typeof y=="string")if(L.id=y,b.styleValuesMapbox.indexOf(y)!==-1)L.style=x(y);else if(b.stylesNonMapbox[y]){L.style=b.stylesNonMapbox[y];var u=L.style.sources["plotly-"+y],m=u?u.tiles:void 0;m&&m[0]&&m[0].slice(-9)==="?api_key="&&(m[0]+=A._mapboxAccessToken)}else L.style=y;else L.id=b.styleValueDflt,L.style=x(b.styleValueDflt);return L.transition={duration:0,delay:0},L}function x(y){return b.styleUrlPrefix+y+"-"+b.styleUrlSuffix}function k(y){return[y.lon,y.lat]}Q.exports=_},66741:function(Q){Q.exports=function(U){var t=U.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},7316:function(Q,U,t){var M=t(33428),E=t(94336).m_,i=t(57624).SO,C=t(38248),T=t(83160),v=t(24040),d=t(73060),r=t(31780),e=t(3400),l=t(76308),n=t(39032).BADNUM,s=t(79811),o=t(1936).clearOutline,p=t(55308),b=t(85656),h=t(16672),_=t(84888)._M,a=e.relinkPrivateKeys,c=e._,f=Q.exports={};e.extendFlat(f,v),f.attributes=t(45464),f.attributes.type.values=f.allTypes,f.fontAttrs=t(25376),f.layoutAttributes=t(64859),f.fontWeight="normal";var x=f.transformsRegistry,k=t(62460);f.executeAPICommand=k.executeAPICommand,f.computeAPICommandBindings=k.computeAPICommandBindings,f.manageCommandObserver=k.manageCommandObserver,f.hasSimpleAPICommandBindings=k.hasSimpleAPICommandBindings,f.redrawText=function(V){return V=e.getGraphDiv(V),new Promise(function(rt){setTimeout(function(){V._fullLayout&&(v.getComponentMethod("annotations","draw")(V),v.getComponentMethod("legend","draw")(V),v.getComponentMethod("colorbar","draw")(V),rt(f.previousPromises(V)))},300)})},f.resize=function(V){V=e.getGraphDiv(V);var rt,ot=new Promise(function(H,Y){(!V||e.isHidden(V))&&Y(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(rt=V._resolveResize),V._resolveResize=H,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||e.isHidden(V)){H(V);return}delete V.layout.width,delete V.layout.height;var at=V.changed;V.autoplay=!0,v.call("relayout",V,{autosize:!0}).then(function(){V.changed=at,V._resolveResize===H&&(delete V._resolveResize,H(V))})},100)});return rt&&rt(ot),ot},f.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},f.addLinks=function(V){if(!(!V._context.showLink&&!V._context.showSources)){var rt=V._fullLayout,ot=e.ensureSingle(rt._paper,"text","js-plot-link-container",function(ft){ft.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:l.defaultLine,"pointer-events":"all"}).each(function(){var yt=M.select(this);yt.append("tspan").classed("js-link-to-tool",!0),yt.append("tspan").classed("js-link-spacer",!0),yt.append("tspan").classed("js-sourcelinks",!0)})}),H=ot.node(),Y={y:rt._paper.attr("height")-9};document.body.contains(H)&&H.getComputedTextLength()>=rt.width-20?(Y["text-anchor"]="start",Y.x=5):(Y["text-anchor"]="end",Y.x=rt._paper.attr("width")-7),ot.attr(Y);var at=ot.select(".js-link-to-tool"),et=ot.select(".js-link-spacer"),ct=ot.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&y(V,at),et.text(at.text()&&ct.text()?" - ":"")}};function y(V,rt){rt.text("");var ot=rt.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(V._context.linkText+" \xBB");if(V._context.sendData)ot.on("click",function(){f.sendDataToCloud(V)});else{var H=window.location.pathname.split("/"),Y=window.location.search;ot.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+H[2].split(".")[0]+"/"+H[1]+Y})}}f.sendDataToCloud=function(V){var rt=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(rt){V.emit("plotly_beforeexport");var ot=M.select(V).append("div").attr("id","hiddenform").style("display","none"),H=ot.append("form").attr({action:rt+"/external",method:"post",target:"_blank"}),Y=H.append("input").attr({type:"text",name:"data"});return Y.node().value=f.graphJson(V,!1,"keepdata"),H.node().submit(),ot.remove(),V.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],L=["year","month","dayMonth","dayMonthYear"];f.supplyDefaults=function(V,rt){var ot=rt&&rt.skipUpdateCalc,H=V._fullLayout||{};if(H._skipDefaults){delete H._skipDefaults;return}var Y=V._fullLayout={},at=V.layout||{},et=V._fullData||[],ct=V._fullData=[],ft=V.data||[],yt=V.calcdata||[],xt=V._context||{},Ct;V._transitionData||f.createTransitionData(V),Y._dfltTitle={plot:c(V,"Click to enter Plot title"),x:c(V,"Click to enter X axis title"),y:c(V,"Click to enter Y axis title"),colorbar:c(V,"Click to enter Colorscale title"),annotation:c(V,"new text")},Y._traceWord=c(V,"trace");var gt=S(V,A);if(Y._mapboxAccessToken=xt.mapboxAccessToken,H._initialAutoSizeIsDone){var mt=H.width,vt=H.height;f.supplyLayoutGlobalDefaults(at,Y,gt),at.width||(Y.width=mt),at.height||(Y.height=vt),f.sanitizeMargins(Y)}else{f.supplyLayoutGlobalDefaults(at,Y,gt);var At=!at.width||!at.height,Ot=Y.autosize,It=xt.autosizable,St=At&&(Ot||It);St?f.plotAutoSize(V,at,Y):At&&f.sanitizeMargins(Y),!Ot&&At&&(at.width=Y.width,at.height=Y.height)}Y._d3locale=w(gt,Y.separators),Y._extraFormat=S(V,L),Y._initialAutoSizeIsDone=!0,Y._dataLength=ft.length,Y._modules=[],Y._visibleModules=[],Y._basePlotModules=[];var Bt=Y._subplots=m(),re=Y._splomAxes={x:{},y:{}},Yt=Y._splomSubplots={};Y._splomGridDflt={},Y._scatterStackOpts={},Y._firstScatter={},Y._alignmentOpts={},Y._colorAxes={},Y._requestRangeslider={},Y._traceUids=u(et,ft),Y._globalTransforms=(V._context||{}).globalTransforms,f.supplyDataDefaults(ft,ct,at,Y);var he=Object.keys(re.x),Zt=Object.keys(re.y);if(he.length>1&&Zt.length>1){for(v.getComponentMethod("grid","sizeDefaults")(at,Y),Ct=0;Ct<he.length;Ct++)e.pushUnique(Bt.xaxis,he[Ct]);for(Ct=0;Ct<Zt.length;Ct++)e.pushUnique(Bt.yaxis,Zt[Ct]);for(var ae in Yt)e.pushUnique(Bt.cartesian,ae)}if(Y._has=f._hasPlotType.bind(Y),et.length===ct.length)for(Ct=0;Ct<ct.length;Ct++)a(ct[Ct],et[Ct]);f.supplyLayoutModuleDefaults(at,Y,ct,V._transitionData);var oe=Y._visibleModules,ce=[];for(Ct=0;Ct<oe.length;Ct++){var ue=oe[Ct].crossTraceDefaults;ue&&e.pushUnique(ce,ue)}for(Ct=0;Ct<ce.length;Ct++)ce[Ct](ct,Y);Y._hasOnlyLargeSploms=Y._basePlotModules.length===1&&Y._basePlotModules[0].name==="splom"&&he.length>15&&Zt.length>15&&Y.shapes.length===0&&Y.images.length===0,f.linkSubplots(ct,Y,et,H),f.cleanPlot(ct,Y,et,H);var ye=!!(H._has&&H._has("gl2d")),Tt=!!(Y._has&&Y._has("gl2d")),Ft=!!(H._has&&H._has("cartesian")),$t=!!(Y._has&&Y._has("cartesian")),Vt=Ft||ye,Nt=$t||Tt;Vt&&!Nt?H._bgLayer.remove():Nt&&!Vt&&(Y._shouldCreateBgLayer=!0),H._zoomlayer&&!V._dragging&&o({_fullLayout:H}),I(ct,Y),a(Y,H),v.getComponentMethod("colorscale","crossTraceDefaults")(ct,Y),Y._preGUI||(Y._preGUI={}),Y._tracePreGUI||(Y._tracePreGUI={});var Mt=Y._tracePreGUI,Et={},Dt;for(Dt in Mt)Et[Dt]="old";for(Ct=0;Ct<ct.length;Ct++)Dt=ct[Ct]._fullInput.uid,Et[Dt]||(Mt[Dt]={}),Et[Dt]="new";for(Dt in Et)Et[Dt]==="old"&&delete Mt[Dt];R(Y),v.getComponentMethod("rangeslider","makeData")(Y),!ot&&yt.length===ct.length&&f.supplyDefaultsUpdateCalc(yt,ct)},f.supplyDefaultsUpdateCalc=function(V,rt){for(var ot=0;ot<rt.length;ot++){var H=rt[ot],Y=(V[ot]||[])[0];if(Y&&Y.trace){var at=Y.trace;if(at._hasCalcTransform){var et=at._arrayAttrs,ct,ft,yt;for(ct=0;ct<et.length;ct++)ft=et[ct],yt=e.nestedProperty(at,ft).get().slice(),e.nestedProperty(H,ft).set(yt)}Y.trace=H}}};function u(V,rt){var ot=rt.length,H=[],Y,at;for(Y=0;Y<V.length;Y++){var et=V[Y]._fullInput;et!==at&&H.push(et),at=et}var ct=H.length,ft=new Array(ot),yt={};function xt(mt,vt){ft[vt]=mt,yt[mt]=1}function Ct(mt,vt){if(mt&&typeof mt=="string"&&!yt[mt])return xt(mt,vt),!0}for(Y=0;Y<ot;Y++){var gt=rt[Y].uid;typeof gt=="number"&&(gt=String(gt)),!Ct(gt,Y)&&(Y<ct&&Ct(H[Y].uid,Y)||xt(e.randstr(yt),Y))}return ft}function m(){var V=v.collectableSubplotTypes,rt={},ot,H;if(!V){V=[];var Y=v.subplotsRegistry;for(var at in Y){var et=Y[at],ct=et.attr;if(ct&&(V.push(at),Array.isArray(ct)))for(H=0;H<ct.length;H++)e.pushUnique(V,ct[H])}}for(ot=0;ot<V.length;ot++)rt[V[ot]]=[];return rt}function S(V,rt){var ot=V._context.locale;ot||(ot="en-US");var H=!1,Y={};function at(Ct){for(var gt=!0,mt=0;mt<rt.length;mt++){var vt=rt[mt];Y[vt]||(Ct[vt]?Y[vt]=Ct[vt]:gt=!1)}gt&&(H=!0)}for(var et=0;et<2;et++){for(var ct=V._context.locales,ft=0;ft<2;ft++){var yt=(ct[ot]||{}).format;if(yt&&(at(yt),H))break;ct=v.localeRegistry}var xt=ot.split("-")[0];if(H||xt===ot)break;ot=xt}return H||at(v.localeRegistry.en.format),Y}function w(V,rt){return V.decimal=rt.charAt(0),V.thousands=rt.charAt(1),{numberFormat:function(ot){try{ot=i(V).format(e.adjustFormat(ot))}catch{return e.warnBadFormat(ot),e.noFormat}return ot},timeFormat:E(V).utcFormat}}function I(V,rt){var ot,H=[];rt.meta&&(ot=rt._meta={meta:rt.meta,layout:{meta:rt.meta}});for(var Y=0;Y<V.length;Y++){var at=V[Y];at.meta?H[at.index]=at._meta={meta:at.meta}:rt.meta&&(at._meta={meta:rt.meta}),rt.meta&&(at._meta.layout={meta:rt.meta})}H.length&&(ot||(ot=rt._meta={}),ot.data=H)}f.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},f._hasPlotType=function(V){var rt,ot=this._basePlotModules||[];for(rt=0;rt<ot.length;rt++)if(ot[rt].name===V)return!0;var H=this._modules||[];for(rt=0;rt<H.length;rt++){var Y=H[rt].name;if(Y===V)return!0;var at=v.modules[Y];if(at&&at.categories[V])return!0}return!1},f.cleanPlot=function(V,rt,ot,H){var Y,at,et=H._basePlotModules||[];for(Y=0;Y<et.length;Y++){var ct=et[Y];ct.clean&&ct.clean(V,rt,ot,H)}var ft=H._has&&H._has("gl"),yt=rt._has&&rt._has("gl");ft&&!yt&&H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.selectAll(".no-webgl").remove(),H._glcanvas=null);var xt=!!H._infolayer;t:for(Y=0;Y<ot.length;Y++){var Ct=ot[Y],gt=Ct.uid;for(at=0;at<V.length;at++){var mt=V[at];if(gt===mt.uid)continue t}xt&&H._infolayer.select(".cb"+gt).remove()}},f.linkSubplots=function(V,rt,ot,H){var Y,at,et=H._plots||{},ct=rt._plots={},ft=rt._subplots,yt={_fullData:V,_fullLayout:rt},xt=ft.cartesian.concat(ft.gl2d||[]);for(Y=0;Y<xt.length;Y++){var Ct=xt[Y],gt=et[Ct],mt=s.getFromId(yt,Ct,"x"),vt=s.getFromId(yt,Ct,"y"),At;for(gt?At=ct[Ct]=gt:(At=ct[Ct]={},At.id=Ct),mt._counterAxes.push(vt._id),vt._counterAxes.push(mt._id),mt._subplotsWith.push(Ct),vt._subplotsWith.push(Ct),At.xaxis=mt,At.yaxis=vt,At._hasClipOnAxisFalse=!1,at=0;at<V.length;at++){var Ot=V[at];if(Ot.xaxis===At.xaxis._id&&Ot.yaxis===At.yaxis._id&&Ot.cliponaxis===!1){At._hasClipOnAxisFalse=!0;break}}}var It=s.list(yt,null,!0),St;for(Y=0;Y<It.length;Y++){St=It[Y];var Bt=null;St.overlaying&&(Bt=s.getFromId(yt,St.overlaying),Bt&&Bt.overlaying&&(St.overlaying=!1,Bt=null)),St._mainAxis=Bt||St,Bt&&(St.domain=Bt.domain.slice()),St._anchorAxis=St.anchor==="free"?null:s.getFromId(yt,St.anchor)}for(Y=0;Y<It.length;Y++)if(St=It[Y],St._counterAxes.sort(s.idSort),St._subplotsWith.sort(e.subplotSort),St._mainSubplot=O(St,rt),St._counterAxes.length&&(St.spikemode&&St.spikemode.indexOf("across")!==-1||St.automargin&&St.mirror&&St.anchor!=="free"||v.getComponentMethod("rangeslider","isVisible")(St))){var re=1,Yt=0;for(at=0;at<St._counterAxes.length;at++){var he=s.getFromId(yt,St._counterAxes[at]);re=Math.min(re,he.domain[0]),Yt=Math.max(Yt,he.domain[1])}re<Yt&&(St._counterDomainMin=re,St._counterDomainMax=Yt)}};function O(V,rt){var ot={_fullLayout:rt},H=V._id.charAt(0)==="x",Y=V._mainAxis._anchorAxis,at="",et="",ct="";if(Y&&(ct=Y._mainAxis._id,at=H?V._id+ct:ct+V._id),!at||!rt._plots[at]){at="";for(var ft=V._counterAxes,yt=0;yt<ft.length;yt++){var xt=ft[yt],Ct=H?V._id+xt:xt+V._id;et||(et=Ct);var gt=s.getFromId(ot,xt);if(ct&&gt.overlaying===ct){at=Ct;break}}}return at||et}f.clearExpandedTraceDefaultColors=function(V){var rt,ot,H;function Y(et,ct,ft,yt){ot[yt]=ct,ot.length=yt+1,et.valType==="color"&&et.dflt===void 0&&rt.push(ot.join("."))}for(ot=[],rt=V._module._colorAttrs,rt||(V._module._colorAttrs=rt=[],d.crawl(V._module.attributes,Y)),H=0;H<rt.length;H++){var at=e.nestedProperty(V,"_input."+rt[H]);at.get()||e.nestedProperty(V,rt[H]).set(null)}},f.supplyDataDefaults=function(V,rt,ot,H){var Y=H._modules,at=H._visibleModules,et=H._basePlotModules,ct=0,ft=0,yt,xt,Ct;H._transformModules=[];function gt(Zt){rt.push(Zt);var ae=Zt._module;ae&&(e.pushUnique(Y,ae),Zt.visible===!0&&e.pushUnique(at,ae),e.pushUnique(et,Zt._module.basePlotModule),ct++,Zt._input.visible!==!1&&ft++)}var mt={},vt=[],At=(ot.template||{}).data||{},Ot=r.traceTemplater(At);for(yt=0;yt<V.length;yt++){if(Ct=V[yt],xt=Ot.newTrace(Ct),xt.uid=H._traceUids[yt],f.supplyTraceDefaults(Ct,xt,ft,H,yt),xt.index=yt,xt._input=Ct,xt._expandedIndex=ct,xt.transforms&&xt.transforms.length)for(var It=Ct.visible!==!1&&xt.visible===!1,St=P(xt,rt,ot,H),Bt=0;Bt<St.length;Bt++){var re=St[Bt],Yt={_template:xt._template,type:xt.type,uid:xt.uid+Bt};It&&re.visible===!1&&delete re.visible,f.supplyTraceDefaults(re,Yt,ct,H,yt),a(Yt,re),Yt.index=yt,Yt._input=Ct,Yt._fullInput=xt,Yt._expandedIndex=ct,Yt._expandedInput=re,gt(Yt)}else xt._fullInput=xt,xt._expandedInput=xt,gt(xt);v.traceIs(xt,"carpetAxis")&&(mt[xt.carpet]=xt),v.traceIs(xt,"carpetDependent")&&vt.push(yt)}for(yt=0;yt<vt.length;yt++)if(xt=rt[vt[yt]],!!xt.visible){var he=mt[xt.carpet];if(xt._carpet=he,!he||!he.visible){xt.visible=!1;continue}xt.xaxis=he.xaxis,xt.yaxis=he.yaxis}},f.supplyAnimationDefaults=function(V){V=V||{};var rt,ot={};function H(Y,at){return e.coerce(V||{},ot,b,Y,at)}if(H("mode"),H("direction"),H("fromcurrent"),Array.isArray(V.frame))for(ot.frame=[],rt=0;rt<V.frame.length;rt++)ot.frame[rt]=f.supplyAnimationFrameDefaults(V.frame[rt]||{});else ot.frame=f.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(ot.transition=[],rt=0;rt<V.transition.length;rt++)ot.transition[rt]=f.supplyAnimationTransitionDefaults(V.transition[rt]||{});else ot.transition=f.supplyAnimationTransitionDefaults(V.transition||{});return ot},f.supplyAnimationFrameDefaults=function(V){var rt={};function ot(H,Y){return e.coerce(V||{},rt,b.frame,H,Y)}return ot("duration"),ot("redraw"),rt},f.supplyAnimationTransitionDefaults=function(V){var rt={};function ot(H,Y){return e.coerce(V||{},rt,b.transition,H,Y)}return ot("duration"),ot("easing"),rt},f.supplyFrameDefaults=function(V){var rt={};function ot(H,Y){return e.coerce(V,rt,h,H,Y)}return ot("group"),ot("name"),ot("traces"),ot("baseframe"),ot("data"),ot("layout"),rt},f.supplyTraceDefaults=function(V,rt,ot,H,Y){var at=H.colorway||l.defaults,et=at[ot%at.length],ct;function ft(Bt,re){return e.coerce(V,rt,f.attributes,Bt,re)}var yt=ft("visible");ft("type"),ft("name",H._traceWord+" "+Y),ft("uirevision",H.uirevision);var xt=f.getModule(rt);if(rt._module=xt,xt){var Ct=xt.basePlotModule,gt=Ct.attr,mt=Ct.attributes;if(gt&&mt){var vt=H._subplots,At="";if(yt||Ct.name!=="gl2d"){if(Array.isArray(gt))for(ct=0;ct<gt.length;ct++){var Ot=gt[ct],It=e.coerce(V,rt,mt,Ot);vt[Ot]&&e.pushUnique(vt[Ot],It),At+=It}else At=e.coerce(V,rt,mt,gt);vt[Ct.name]&&e.pushUnique(vt[Ct.name],At)}}}if(yt){if(ft("customdata"),ft("ids"),ft("meta"),v.traceIs(rt,"showLegend")?(e.coerce(V,rt,xt.attributes.showlegend?xt.attributes:f.attributes,"showlegend"),ft("legend"),ft("legendwidth"),ft("legendgroup"),ft("legendgrouptitle.text"),ft("legendrank"),rt._dfltShowLegend=!0):rt._dfltShowLegend=!1,xt&&xt.supplyDefaults(V,rt,et,H),v.traceIs(rt,"noOpacity")||ft("opacity"),v.traceIs(rt,"notLegendIsolatable")&&(rt.visible=!!rt.visible),v.traceIs(rt,"noHover")||(rt.hovertemplate||e.coerceHoverinfo(V,rt,H),rt.type!=="parcats"&&v.getComponentMethod("fx","supplyDefaults")(V,rt,et,H)),xt&&xt.selectPoints){var St=ft("selectedpoints");e.isTypedArray(St)&&(rt.selectedpoints=Array.from(St))}f.supplyTransformDefaults(V,rt,H)}return rt};function D(V){var rt=V.transforms;if(Array.isArray(rt)&&rt.length)for(var ot=0;ot<rt.length;ot++){var H=rt[ot],Y=H._module||x[H.type];if(Y&&Y.makesData)return!0}return!1}f.hasMakesDataTransform=D,f.supplyTransformDefaults=function(V,rt,ot){if(rt._length||D(V)){var H=ot._globalTransforms||[],Y=ot._transformModules||[];if(!(!Array.isArray(V.transforms)&&H.length===0))for(var at=V.transforms||[],et=H.concat(at),ct=rt.transforms=[],ft=0;ft<et.length;ft++){var yt=et[ft],xt=yt.type,Ct=x[xt],gt,mt=!(yt._module&&yt._module===Ct),vt=Ct&&typeof Ct.transform=="function";Ct||e.warn("Unrecognized transform type "+xt+"."),Ct&&Ct.supplyDefaults&&(mt||vt)?(gt=Ct.supplyDefaults(yt,rt,ot,V),gt.type=xt,gt._module=Ct,e.pushUnique(Y,Ct)):gt=e.extendFlat({},yt),ct.push(gt)}}};function P(V,rt,ot,H){for(var Y=V.transforms,at=[V],et=0;et<Y.length;et++){var ct=Y[et],ft=x[ct.type];ft&&ft.transform&&(at=ft.transform(at,{transform:ct,fullTrace:V,fullData:rt,layout:ot,fullLayout:H,transformIndex:et}))}return at}f.supplyLayoutGlobalDefaults=function(V,rt,ot){function H(Ct,gt){return e.coerce(V,rt,f.layoutAttributes,Ct,gt)}var Y=V.template;e.isPlainObject(Y)&&(rt.template=Y,rt._template=Y.layout,rt._dataTemplate=Y.data),H("autotypenumbers");var at=e.coerceFont(H,"font"),et=at.size;e.coerceFont(H,"title.font",e.extendFlat({},at,{size:Math.round(et*1.4)})),H("title.text",rt._dfltTitle.plot),H("title.xref");var ct=H("title.yref");H("title.pad.t"),H("title.pad.r"),H("title.pad.b"),H("title.pad.l");var ft=H("title.automargin");H("title.x"),H("title.xanchor"),H("title.y"),H("title.yanchor"),ft&&(ct==="paper"&&(rt.title.y!==0&&(rt.title.y=1),rt.title.yanchor==="auto"&&(rt.title.yanchor=rt.title.y===0?"top":"bottom")),ct==="container"&&(rt.title.y==="auto"&&(rt.title.y=1),rt.title.yanchor==="auto"&&(rt.title.yanchor=rt.title.y<.5?"bottom":"top")));var yt=H("uniformtext.mode");yt&&H("uniformtext.minsize"),H("autosize",!(V.width&&V.height)),H("width"),H("height"),H("minreducedwidth"),H("minreducedheight"),H("margin.l"),H("margin.r"),H("margin.t"),H("margin.b"),H("margin.pad"),H("margin.autoexpand"),V.width&&V.height&&f.sanitizeMargins(rt),v.getComponentMethod("grid","sizeDefaults")(V,rt),H("paper_bgcolor"),H("separators",ot.decimal+ot.thousands),H("hidesources"),H("colorway"),H("datarevision");var xt=H("uirevision");H("editrevision",xt),H("selectionrevision",xt),v.getComponentMethod("modebar","supplyLayoutDefaults")(V,rt),v.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,rt,H),v.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(V,rt,H),H("meta"),e.isPlainObject(V.transition)&&(H("transition.duration"),H("transition.easing"),H("transition.ordering")),v.getComponentMethod("calendars","handleDefaults")(V,rt,"calendar"),v.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,rt,H),e.coerce(V,rt,p,"scattermode")};function F(V){return typeof V=="string"&&V.substr(V.length-2)==="px"&&parseFloat(V)}f.plotAutoSize=function(V,rt,ot){var H=V._context||{},Y=H.frameMargins,at,et,ct=e.isPlotDiv(V);if(ct&&V.emit("plotly_autosize"),H.fillFrame)at=window.innerWidth,et=window.innerHeight,document.body.style.overflow="hidden";else{var ft=ct?window.getComputedStyle(V):{};if(at=F(ft.width)||F(ft.maxWidth)||ot.width,et=F(ft.height)||F(ft.maxHeight)||ot.height,C(Y)&&Y>0){var yt=1-2*Y;at=Math.round(yt*at),et=Math.round(yt*et)}}var xt=f.layoutAttributes.width.min,Ct=f.layoutAttributes.height.min;at<xt&&(at=xt),et<Ct&&(et=Ct);var gt=!rt.width&&Math.abs(ot.width-at)>1,mt=!rt.height&&Math.abs(ot.height-et)>1;(mt||gt)&&(gt&&(ot.width=at),mt&&(ot.height=et)),V._initialAutoSize||(V._initialAutoSize={width:at,height:et}),f.sanitizeMargins(ot)},f.supplyLayoutModuleDefaults=function(V,rt,ot,H){var Y=v.componentsRegistry,at=rt._basePlotModules,et,ct,ft,yt=v.subplotsRegistry.cartesian;for(et in Y)ft=Y[et],ft.includeBasePlot&&ft.includeBasePlot(V,rt);at.length||at.push(yt),rt._has("cartesian")&&(v.getComponentMethod("grid","contentDefaults")(V,rt),yt.finalizeSubplots(V,rt));for(var xt in rt._subplots)rt._subplots[xt].sort(e.subplotSort);for(ct=0;ct<at.length;ct++)ft=at[ct],ft.supplyLayoutDefaults&&ft.supplyLayoutDefaults(V,rt,ot);var Ct=rt._modules;for(ct=0;ct<Ct.length;ct++)ft=Ct[ct],ft.supplyLayoutDefaults&&ft.supplyLayoutDefaults(V,rt,ot);var gt=rt._transformModules;for(ct=0;ct<gt.length;ct++)ft=gt[ct],ft.supplyLayoutDefaults&&ft.supplyLayoutDefaults(V,rt,ot,H);for(et in Y)ft=Y[et],ft.supplyLayoutDefaults&&ft.supplyLayoutDefaults(V,rt,ot)},f.purge=function(V){var rt=V._fullLayout||{};rt._glcontainer!==void 0&&(rt._glcontainer.selectAll(".gl-canvas").remove(),rt._glcontainer.remove(),rt._glcanvas=null),rt._modeBar&&rt._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},f.style=function(V){var rt=V._fullLayout._visibleModules,ot=[],H;for(H=0;H<rt.length;H++){var Y=rt[H];Y.style&&e.pushUnique(ot,Y.style)}for(H=0;H<ot.length;H++)ot[H](V)},f.sanitizeMargins=function(V){if(!(!V||!V.margin)){var rt=V.width,ot=V.height,H=V.margin,Y=rt-(H.l+H.r),at=ot-(H.t+H.b),et;Y<0&&(et=(rt-1)/(H.l+H.r),H.l=Math.floor(et*H.l),H.r=Math.floor(et*H.r)),at<0&&(et=(ot-1)/(H.t+H.b),H.t=Math.floor(et*H.t),H.b=Math.floor(et*H.b))}},f.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},f.allowAutoMargin=function(V,rt){V._fullLayout._pushmarginIds[rt]=1};function R(V){var rt=V.margin;if(!V._size){var ot=V._size={l:Math.round(rt.l),r:Math.round(rt.r),t:Math.round(rt.t),b:Math.round(rt.b),p:Math.round(rt.pad)};ot.w=Math.round(V.width)-ot.l-ot.r,ot.h=Math.round(V.height)-ot.t-ot.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={}),V._reservedMargin||(V._reservedMargin={})}var B=2,N=2;f.autoMargin=function(V,rt,ot){var H=V._fullLayout,Y=H.width,at=H.height,et=H.margin,ct=H.minreducedwidth,ft=H.minreducedheight,yt=e.constrain(Y-et.l-et.r,B,ct),xt=e.constrain(at-et.t-et.b,N,ft),Ct=Math.max(0,Y-yt),gt=Math.max(0,at-xt),mt=H._pushmargin,vt=H._pushmarginIds;if(et.autoexpand!==!1){if(!ot)delete mt[rt],delete vt[rt];else{var At=ot.pad;if(At===void 0&&(At=Math.min(12,et.l,et.r,et.t,et.b)),Ct){var Ot=(ot.l+ot.r)/Ct;Ot>1&&(ot.l/=Ot,ot.r/=Ot)}if(gt){var It=(ot.t+ot.b)/gt;It>1&&(ot.t/=It,ot.b/=It)}var St=ot.xl!==void 0?ot.xl:ot.x,Bt=ot.xr!==void 0?ot.xr:ot.x,re=ot.yt!==void 0?ot.yt:ot.y,Yt=ot.yb!==void 0?ot.yb:ot.y;mt[rt]={l:{val:St,size:ot.l+At},r:{val:Bt,size:ot.r+At},b:{val:Yt,size:ot.b+At},t:{val:re,size:ot.t+At}},vt[rt]=1}if(!H._replotting)return f.doAutoMargin(V)}};function G(V){if("_redrawFromAutoMarginCount"in V._fullLayout)return!1;var rt=s.list(V,"",!0);for(var ot in rt)if(rt[ot].autoshift||rt[ot].shift)return!0;return!1}f.doAutoMargin=function(V){var rt=V._fullLayout,ot=rt.width,H=rt.height;rt._size||(rt._size={}),R(rt);var Y=rt._size,at=rt.margin,et={t:0,b:0,l:0,r:0},ct=e.extendFlat({},Y),ft=at.l,yt=at.r,xt=at.t,Ct=at.b,gt=rt._pushmargin,mt=rt._pushmarginIds,vt=rt.minreducedwidth,At=rt.minreducedheight;if(at.autoexpand!==!1){for(var Ot in gt)mt[Ot]||delete gt[Ot];var It=V._fullLayout._reservedMargin;for(var St in It)for(var Bt in It[St]){var re=It[St][Bt];et[Bt]=Math.max(et[Bt],re)}gt.base={l:{val:0,size:ft},r:{val:1,size:yt},t:{val:1,size:xt},b:{val:0,size:Ct}};for(var Yt in et){var he=0;for(var Zt in gt)Zt!=="base"&&C(gt[Zt][Yt].size)&&(he=gt[Zt][Yt].size>he?gt[Zt][Yt].size:he);var ae=Math.max(0,at[Yt]-he);et[Yt]=Math.max(0,et[Yt]-ae)}for(var oe in gt){var ce=gt[oe].l||{},ue=gt[oe].b||{},ye=ce.val,Tt=ce.size,Ft=ue.val,$t=ue.size,Vt=ot-et.r-et.l,Nt=H-et.t-et.b;for(var Mt in gt){if(C(Tt)&&gt[Mt].r){var Et=gt[Mt].r.val,Dt=gt[Mt].r.size;if(Et>ye){var dt=(Tt*Et+(Dt-Vt)*ye)/(Et-ye),ht=(Dt*(1-ye)+(Tt-Vt)*(1-Et))/(Et-ye);dt+ht>ft+yt&&(ft=dt,yt=ht)}}if(C($t)&&gt[Mt].t){var bt=gt[Mt].t.val,Pt=gt[Mt].t.size;if(bt>Ft){var Gt=($t*bt+(Pt-Nt)*Ft)/(bt-Ft),te=(Pt*(1-Ft)+($t-Nt)*(1-bt))/(bt-Ft);Gt+te>Ct+xt&&(Ct=Gt,xt=te)}}}}}var ne=e.constrain(ot-at.l-at.r,B,vt),je=e.constrain(H-at.t-at.b,N,At),Ne=Math.max(0,ot-ne),ge=Math.max(0,H-je);if(Ne){var _e=(ft+yt)/Ne;_e>1&&(ft/=_e,yt/=_e)}if(ge){var De=(Ct+xt)/ge;De>1&&(Ct/=De,xt/=De)}if(Y.l=Math.round(ft)+et.l,Y.r=Math.round(yt)+et.r,Y.t=Math.round(xt)+et.t,Y.b=Math.round(Ct)+et.b,Y.p=Math.round(at.pad),Y.w=Math.round(ot)-Y.l-Y.r,Y.h=Math.round(H)-Y.t-Y.b,!rt._replotting&&(f.didMarginChange(ct,Y)||G(V))){"_redrawFromAutoMarginCount"in rt?rt._redrawFromAutoMarginCount++:rt._redrawFromAutoMarginCount=1;var hr=3*(1+Object.keys(mt).length);if(rt._redrawFromAutoMarginCount<hr)return v.call("_doPlot",V);rt._size=ct,e.warn("Too many auto-margin redraws.")}X(V)};function X(V){var rt=s.list(V,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ot){for(var H=0;H<rt.length;H++){var Y=rt[H][ot];Y&&Y()}})}var J=["l","r","t","b","p","w","h"];f.didMarginChange=function(V,rt){for(var ot=0;ot<J.length;ot++){var H=J[ot],Y=V[H],at=rt[H];if(!C(Y)||Math.abs(at-Y)>1)return!0}return!1},f.graphJson=function(V,rt,ot,H,Y,at){(Y&&rt&&!V._fullData||Y&&!rt&&!V._fullLayout)&&f.supplyDefaults(V);var et=Y?V._fullData:V.data,ct=Y?V._fullLayout:V.layout,ft=(V._transitionData||{})._frames;function yt(gt,mt){if(typeof gt=="function")return mt?"_function_":null;if(e.isPlainObject(gt)){var vt={},At;return Object.keys(gt).sort().forEach(function(Bt){if(["_","["].indexOf(Bt.charAt(0))===-1){if(typeof gt[Bt]=="function"){mt&&(vt[Bt]="_function");return}if(ot==="keepdata"){if(Bt.substr(Bt.length-3)==="src")return}else if(ot==="keepstream"){if(At=gt[Bt+"src"],typeof At=="string"&&At.indexOf(":")>0&&!e.isPlainObject(gt.stream))return}else if(ot!=="keepall"&&(At=gt[Bt+"src"],typeof At=="string"&&At.indexOf(":")>0))return;vt[Bt]=yt(gt[Bt],mt)}}),vt}var Ot=Array.isArray(gt),It=e.isTypedArray(gt);if((Ot||It)&&gt.dtype&&gt.shape){var St=gt.bdata;return yt({dtype:gt.dtype,shape:gt.shape,bdata:e.isArrayBuffer(St)?T.encode(St):St},mt)}return Ot?gt.map(function(Bt){return yt(Bt,mt)}):It?e.simpleMap(gt,e.identity):e.isJSDate(gt)?e.ms2DateTimeLocal(+gt):gt}var xt={data:(et||[]).map(function(gt){var mt=yt(gt);return rt&&delete mt.fit,mt})};if(!rt&&(xt.layout=yt(ct),Y)){var Ct=ct._size;xt.layout.computed={margin:{b:Ct.b,l:Ct.l,r:Ct.r,t:Ct.t}}}return ft&&(xt.frames=yt(ft)),at&&(xt.config=yt(V._context,!0)),H==="object"?xt:JSON.stringify(xt)},f.modifyFrames=function(V,rt){var ot,H,Y,at=V._transitionData._frames,et=V._transitionData._frameHash;for(ot=0;ot<rt.length;ot++)switch(H=rt[ot],H.type){case"replace":Y=H.value;var ct=(at[H.index]||{}).name,ft=Y.name;at[H.index]=et[ft]=Y,ft!==ct&&(delete et[ct],et[ft]=Y);break;case"insert":Y=H.value,et[Y.name]=Y,at.splice(H.index,0,Y);break;case"delete":Y=at[H.index],delete et[Y.name],at.splice(H.index,1);break}return Promise.resolve()},f.computeFrame=function(V,rt){var ot=V._transitionData._frameHash,H,Y,at,et;if(!rt)throw new Error("computeFrame must be given a string frame name");var ct=ot[rt.toString()];if(!ct)return!1;for(var ft=[ct],yt=[ct.name];ct.baseframe&&(ct=ot[ct.baseframe.toString()])&&yt.indexOf(ct.name)===-1;)ft.push(ct),yt.push(ct.name);for(var xt={};ct=ft.pop();)if(ct.layout&&(xt.layout=f.extendLayout(xt.layout,ct.layout)),ct.data){if(xt.data||(xt.data=[]),Y=ct.traces,!Y)for(Y=[],H=0;H<ct.data.length;H++)Y[H]=H;for(xt.traces||(xt.traces=[]),H=0;H<ct.data.length;H++)at=Y[H],at!=null&&(et=xt.traces.indexOf(at),et===-1&&(et=xt.data.length,xt.traces[et]=at),xt.data[et]=f.extendTrace(xt.data[et],ct.data[H]))}return xt},f.recomputeFrameHash=function(V){for(var rt=V._transitionData._frameHash={},ot=V._transitionData._frames,H=0;H<ot.length;H++){var Y=ot[H];Y&&Y.name&&(rt[Y.name]=Y)}},f.extendObjectWithContainers=function(V,rt,ot){var H,Y,at,et,ct,ft,yt,xt,Ct=e.extendDeepNoArrays({},rt||{}),gt=e.expandObjectPaths(Ct),mt={};if(ot&&ot.length)for(at=0;at<ot.length;at++)H=e.nestedProperty(gt,ot[at]),Y=H.get(),Y===void 0?e.nestedProperty(mt,ot[at]).set(null):(H.set(null),e.nestedProperty(mt,ot[at]).set(Y));if(V=e.extendDeepNoArrays(V||{},gt),ot&&ot.length){for(at=0;at<ot.length;at++)if(ct=e.nestedProperty(mt,ot[at]),yt=ct.get(),!!yt){for(ft=e.nestedProperty(V,ot[at]),xt=ft.get(),Array.isArray(xt)||(xt=[],ft.set(xt)),et=0;et<yt.length;et++){var vt=yt[et];vt===null?xt[et]=null:xt[et]=f.extendObjectWithContainers(xt[et],vt)}ft.set(xt)}}return V},f.dataArrayContainers=["transforms","dimensions"],f.layoutArrayContainers=v.layoutArrayContainers,f.extendTrace=function(V,rt){return f.extendObjectWithContainers(V,rt,f.dataArrayContainers)},f.extendLayout=function(V,rt){return f.extendObjectWithContainers(V,rt,f.layoutArrayContainers)},f.transition=function(V,rt,ot,H,Y,at){var et={redraw:Y.redraw},ct={},ft=[];return et.prepareFn=function(){for(var yt=Array.isArray(rt)?rt.length:0,xt=H.slice(0,yt),Ct=0;Ct<xt.length;Ct++){var gt=xt[Ct],mt=V._fullData[gt],vt=mt._module;if(vt){if(vt.animatable){var At=vt.basePlotModule.name;ct[At]||(ct[At]=[]),ct[At].push(gt)}V.data[xt[Ct]]=f.extendTrace(V.data[xt[Ct]],rt[Ct])}}var Ot=e.expandObjectPaths(e.extendDeepNoArrays({},ot)),It=/^[xy]axis[0-9]*$/;for(var St in Ot)It.test(St)&&delete Ot[St].range;f.extendLayout(V.layout,Ot),delete V.calcdata,f.supplyDefaults(V),f.doCalcdata(V);var Bt=e.expandObjectPaths(ot);if(Bt){var re=V._fullLayout._plots;for(var Yt in re){var he=re[Yt],Zt=he.xaxis,ae=he.yaxis,oe=Zt.range.slice(),ce=ae.range.slice(),ue=null,ye=null,Tt=null,Ft=null;Array.isArray(Bt[Zt._name+".range"])?ue=Bt[Zt._name+".range"].slice():Array.isArray((Bt[Zt._name]||{}).range)&&(ue=Bt[Zt._name].range.slice()),Array.isArray(Bt[ae._name+".range"])?ye=Bt[ae._name+".range"].slice():Array.isArray((Bt[ae._name]||{}).range)&&(ye=Bt[ae._name].range.slice()),oe&&ue&&(Zt.r2l(oe[0])!==Zt.r2l(ue[0])||Zt.r2l(oe[1])!==Zt.r2l(ue[1]))&&(Tt={xr0:oe,xr1:ue}),ce&&ye&&(ae.r2l(ce[0])!==ae.r2l(ye[0])||ae.r2l(ce[1])!==ae.r2l(ye[1]))&&(Ft={yr0:ce,yr1:ye}),(Tt||Ft)&&ft.push(e.extendFlat({plotinfo:he},Tt,Ft))}}return Promise.resolve()},et.runFn=function(yt){var xt,Ct=V._fullLayout._basePlotModules,gt=ft.length,mt;if(ot)for(mt=0;mt<Ct.length;mt++)Ct[mt].transitionAxes&&Ct[mt].transitionAxes(V,ft,at,yt);gt?(xt=e.extendFlat({},at),xt.duration=0,delete ct.cartesian):xt=at;for(var vt in ct){var At=ct[vt],Ot=V._fullData[At[0]]._module;Ot.basePlotModule.plot(V,At,xt,yt)}},it(V,at,et)},f.transitionFromReact=function(V,rt,ot,H){var Y=V._fullLayout,at=Y.transition,et={},ct=[];return et.prepareFn=function(){var ft=Y._plots;et.redraw=!1,rt.anim==="some"&&(et.redraw=!0),ot.anim==="some"&&(et.redraw=!0);for(var yt in ft){var xt=ft[yt],Ct=xt.xaxis,gt=xt.yaxis,mt=H[Ct._name].range.slice(),vt=H[gt._name].range.slice(),At=Ct.range.slice(),Ot=gt.range.slice();Ct.setScale(),gt.setScale();var It=null,St=null;(Ct.r2l(mt[0])!==Ct.r2l(At[0])||Ct.r2l(mt[1])!==Ct.r2l(At[1]))&&(It={xr0:mt,xr1:At}),(gt.r2l(vt[0])!==gt.r2l(Ot[0])||gt.r2l(vt[1])!==gt.r2l(Ot[1]))&&(St={yr0:vt,yr1:Ot}),(It||St)&&ct.push(e.extendFlat({plotinfo:xt},It,St))}return Promise.resolve()},et.runFn=function(ft){for(var yt=V._fullData,xt=V._fullLayout,Ct=xt._basePlotModules,gt,mt,vt,At=[],Ot=0;Ot<yt.length;Ot++)At.push(Ot);function It(){if(V._fullLayout)for(var Bt=0;Bt<Ct.length;Bt++)Ct[Bt].transitionAxes&&Ct[Bt].transitionAxes(V,ct,gt,ft)}function St(){if(V._fullLayout)for(var Bt=0;Bt<Ct.length;Bt++)Ct[Bt].plot(V,vt,mt,ft)}ct.length&&rt.anim?at.ordering==="traces first"?(gt=e.extendFlat({},at,{duration:0}),vt=At,mt=at,setTimeout(It,at.duration),St()):(gt=at,vt=null,mt=e.extendFlat({},at,{duration:0}),setTimeout(St,gt.duration),It()):ct.length?(gt=at,It()):rt.anim&&(vt=At,mt=at,St())},it(V,at,et)};function it(V,rt,ot){var H=!1;function Y(Ct){var gt=Promise.resolve();if(!Ct)return gt;for(;Ct.length;)gt=gt.then(Ct.shift());return gt}function at(Ct){if(Ct)for(;Ct.length;)Ct.shift()}function et(){return V.emit("plotly_transitioning",[]),new Promise(function(Ct){V._transitioning=!0,rt.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){H=!0}),ot.redraw&&V._transitionData._interruptCallbacks.push(function(){return v.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var gt=0,mt=0;function vt(){return gt++,function(){mt++,!H&&mt===gt&&ct(Ct)}}ot.runFn(vt),setTimeout(vt())})}function ct(Ct){if(V._transitionData)return at(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ot.redraw)return v.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(Ct)}function ft(){if(V._transitionData)return V._transitioning=!1,Y(V._transitionData._interruptCallbacks)}var yt=[f.previousPromises,ft,ot.prepareFn,f.rehover,f.reselect,et],xt=e.syncOrAsync(yt,V);return(!xt||!xt.then)&&(xt=Promise.resolve()),xt.then(function(){return V})}f.doCalcdata=function(V,rt){var ot=s.list(V),H=V._fullData,Y=V._fullLayout,at,et,ct,ft,yt=new Array(H.length),xt=(V.calcdata||[]).slice();for(V.calcdata=yt,Y._numBoxes=0,Y._numViolins=0,Y._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,Y._piecolormap={},Y._sunburstcolormap={},Y._treemapcolormap={},Y._iciclecolormap={},Y._funnelareacolormap={},ct=0;ct<H.length;ct++)if(Array.isArray(rt)&&rt.indexOf(ct)===-1){yt[ct]=xt[ct];continue}for(ct=0;ct<H.length;ct++)at=H[ct],at._arrayAttrs=d.findArrayAttributes(at),at._extremes={};var Ct=Y._subplots.polar||[];for(ct=0;ct<Ct.length;ct++)ot.push(Y[Ct[ct]].radialaxis,Y[Ct[ct]].angularaxis);for(var gt in Y._colorAxes){var mt=Y[gt];mt.cauto!==!1&&(delete mt.cmin,delete mt.cmax)}var vt=!1;function At(St){if(at=H[St],et=at._module,at.visible===!0&&at.transforms){if(et&&et.calc){var Bt=et.calc(V,at);Bt[0]&&Bt[0].t&&Bt[0].t._scene&&delete Bt[0].t._scene.dirty}for(ft=0;ft<at.transforms.length;ft++){var re=at.transforms[ft];et=x[re.type],et&&et.calcTransform&&(at._hasCalcTransform=!0,vt=!0,et.calcTransform(V,at,re))}}}function Ot(St,Bt){if(at=H[St],et=at._module,!!et.isContainer===Bt){var re=[];if(at.visible===!0&&at._length!==0){delete at._indexToPoints;var Yt=at.transforms||[];for(ft=Yt.length-1;ft>=0;ft--)if(Yt[ft].enabled){at._indexToPoints=Yt[ft]._indexToPoints;break}et&&et.calc&&(re=et.calc(V,at))}(!Array.isArray(re)||!re[0])&&(re=[{x:n,y:n}]),re[0].t||(re[0].t={}),re[0].trace=at,yt[St]=re}}for(Z(ot,H,Y),ct=0;ct<H.length;ct++)Ot(ct,!0);for(ct=0;ct<H.length;ct++)At(ct);for(vt&&Z(ot,H,Y),ct=0;ct<H.length;ct++)Ot(ct,!0);for(ct=0;ct<H.length;ct++)Ot(ct,!1);$(V);var It=q(ot,V);if(It.length){for(Y._numBoxes=0,Y._numViolins=0,ct=0;ct<It.length;ct++)Ot(It[ct],!0);for(ct=0;ct<It.length;ct++)Ot(It[ct],!1);$(V)}v.getComponentMethod("fx","calc")(V),v.getComponentMethod("errorbars","calc")(V)};var nt=/(total|sum|min|max|mean|median) (ascending|descending)/;function q(V,rt){var ot=[],H,Y,at,et,ct;function ft(Mt,Et,Dt){var dt=Et._id.charAt(0);if(Mt==="histogram2dcontour"){var ht=Et._counterAxes[0],bt=s.getFromId(rt,ht),Pt=dt==="x"||ht==="x"&&bt.type==="category",Gt=dt==="y"||ht==="y"&&bt.type==="category";return function(te,ne){return te===0||ne===0||Pt&&te===Dt[ne].length-1||Gt&&ne===Dt.length-1?-1:(dt==="y"?ne:te)-1}}else return function(te,ne){return dt==="y"?ne:te}}var yt={min:function(Mt){return e.aggNums(Math.min,null,Mt)},max:function(Mt){return e.aggNums(Math.max,null,Mt)},sum:function(Mt){return e.aggNums(function(Et,Dt){return Et+Dt},null,Mt)},total:function(Mt){return e.aggNums(function(Et,Dt){return Et+Dt},null,Mt)},mean:function(Mt){return e.mean(Mt)},median:function(Mt){return e.median(Mt)}};function xt(Mt,Et){return Mt[1]-Et[1]}function Ct(Mt,Et){return Et[1]-Mt[1]}for(H=0;H<V.length;H++){var gt=V[H];if(gt.type==="category"){var mt=gt.categoryorder.match(nt);if(mt){var vt=mt[1],At=mt[2],Ot=gt._id.charAt(0),It=Ot==="x",St=[];for(Y=0;Y<gt._categories.length;Y++)St.push([gt._categories[Y],[]]);for(Y=0;Y<gt._traceIndices.length;Y++){var Bt=gt._traceIndices[Y],re=rt._fullData[Bt];if(re.visible===!0){var Yt=re.type;v.traceIs(re,"histogram")&&(delete re._xautoBinFinished,delete re._yautoBinFinished);var he=Yt==="splom",Zt=Yt==="scattergl",ae=rt.calcdata[Bt];for(at=0;at<ae.length;at++){var oe=ae[at],ce,ue;if(he){var ye=re._axesDim[gt._id];if(!It){var Tt=re._diag[ye][0];Tt&&(gt=rt._fullLayout[s.id2name(Tt)])}var Ft=oe.trace.dimensions[ye].values;for(et=0;et<Ft.length;et++)for(ce=gt._categoriesMap[Ft[et]],ct=0;ct<oe.trace.dimensions.length;ct++)if(ct!==ye){var $t=oe.trace.dimensions[ct];St[ce][1].push($t.values[et])}}else if(Zt){for(et=0;et<oe.t.x.length;et++)It?(ce=oe.t.x[et],ue=oe.t.y[et]):(ce=oe.t.y[et],ue=oe.t.x[et]),St[ce][1].push(ue);oe.t&&oe.t._scene&&delete oe.t._scene.dirty}else if(oe.hasOwnProperty("z")){ue=oe.z;var Vt=ft(re.type,gt,ue);for(et=0;et<ue.length;et++)for(ct=0;ct<ue[et].length;ct++)ce=Vt(ct,et),ce+1&&St[ce][1].push(ue[et][ct])}else for(ce=oe.p,ce===void 0&&(ce=oe[Ot]),ue=oe.s,ue===void 0&&(ue=oe.v),ue===void 0&&(ue=It?oe.y:oe.x),Array.isArray(ue)||(ue===void 0?ue=[]:ue=[ue]),et=0;et<ue.length;et++)St[ce][1].push(ue[et])}}}gt._categoriesValue=St;var Nt=[];for(Y=0;Y<St.length;Y++)Nt.push([St[Y][0],yt[vt](St[Y][1])]);Nt.sort(At==="descending"?Ct:xt),gt._categoriesAggregatedValue=Nt,gt._initialCategories=Nt.map(function(Mt){return Mt[0]}),ot=ot.concat(gt.sortByInitialCategories())}}}return ot}function Z(V,rt,ot){var H={};function Y(ft){ft.clearCalc(),ft.type==="multicategory"&&ft.setupMultiCategory(rt),H[ft._id]=1}e.simpleMap(V,Y);for(var at=ot._axisMatchGroups||[],et=0;et<at.length;et++)for(var ct in at[et])H[ct]||Y(ot[s.id2name(ct)])}function $(V){var rt=V._fullLayout,ot=rt._visibleModules,H={},Y,at,et;for(at=0;at<ot.length;at++){var ct=ot[at],ft=ct.crossTraceCalc;if(ft){var yt=ct.basePlotModule.name;H[yt]?e.pushUnique(H[yt],ft):H[yt]=[ft]}}for(et in H){var xt=H[et],Ct=rt._subplots[et];if(Array.isArray(Ct))for(Y=0;Y<Ct.length;Y++){var gt=Ct[Y],mt=et==="cartesian"?rt._plots[gt]:rt[gt];for(at=0;at<xt.length;at++)xt[at](V,mt,gt)}else for(at=0;at<xt.length;at++)xt[at](V)}}f.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},f.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},f.reselect=function(V){var rt=V._fullLayout,ot=(V.layout||{}).selections,H=rt._previousSelections;rt._previousSelections=ot;var Y=rt._reselect||JSON.stringify(ot)!==JSON.stringify(H);v.getComponentMethod("selections","reselect")(V,Y)},f.generalUpdatePerTraceModule=function(V,rt,ot,H){var Y=rt.traceHash,at={},et;for(et=0;et<ot.length;et++){var ct=ot[et],ft=ct[0].trace;ft.visible&&(at[ft.type]=at[ft.type]||[],at[ft.type].push(ct))}for(var yt in Y)if(!at[yt]){var xt=Y[yt][0],Ct=xt[0].trace;Ct.visible=!1,at[yt]=[xt]}for(var gt in at){var mt=at[gt],vt=mt[0][0].trace._module;vt.plot(V,rt,e.filterVisible(mt),H)}rt.traceHash=at},f.plotBasePlot=function(V,rt,ot,H,Y){var at=v.getModule(V),et=_(rt.calcdata,at)[0];at.plot(rt,et,H,Y)},f.cleanBasePlot=function(V,rt,ot,H,Y){var at=Y._has&&Y._has(V),et=ot._has&&ot._has(V);at&&!et&&Y["_"+V+"layer"].selectAll("g.trace").remove()}},39360:function(Q){Q.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(Q,U,t){var M=t(3400),E=t(92065).tester,i=M.findIndexOfMin,C=M.isAngleInsideSector,T=M.angleDelta,v=M.angleDist;function d(c,f,x,k,y){if(!C(f,k))return!1;var A,L;x[0]<x[1]?(A=x[0],L=x[1]):(A=x[1],L=x[0]);var u=E(s(A,k[0],k[1],y)),m=E(s(L,k[0],k[1],y)),S=[c*Math.cos(f),c*Math.sin(f)];return m.contains(S)&&!u.contains(S)}function r(c,f,x,k){var y,A,L=k[0],u=k[1],m=b(Math.sin(f)-Math.sin(c)),S=b(Math.cos(f)-Math.cos(c)),w=Math.tan(x),I=b(1/w),O=m/S,D=u-O*L;return I?m&&S?(y=D/(w-O),A=w*y):S?(y=u*I,A=u):(y=L,A=L*w):m&&S?(y=0,A=D):S?(y=0,A=u):y=A=NaN,[y,A]}function e(c,f,x,k){var y=-f*x,A=f*f+1,L=2*(f*y-x),u=y*y+x*x-c*c,m=Math.sqrt(L*L-4*A*u),S=(-L+m)/(2*A),w=(-L-m)/(2*A);return[[S,f*S+y+k],[w,f*w+y+k]]}function l(c,f){var x=f.length,k=new Array(x+1),y;for(y=0;y<x;y++){var A=f[y];k[y]=[c*Math.cos(A),c*Math.sin(A)]}return k[y]=k[0].slice(),k}function n(c,f,x,k){var y=k.length,A=[],L,u;function m(B){return[c*Math.cos(B),c*Math.sin(B)]}function S(B,N,G){return r(B,N,G,m(B))}function w(B){return M.mod(B,y)}function I(B){return C(B,[f,x])}var O=i(k,function(B){return I(B)?v(B,f):1/0}),D=S(k[O],k[w(O-1)],f);for(A.push(D),L=O,u=0;u<y;L++,u++){var P=k[w(L)];if(!I(P))break;A.push(m(P))}var F=i(k,function(B){return I(B)?v(B,x):1/0}),R=S(k[F],k[w(F+1)],x);return A.push(R),A.push([0,0]),A.push(A[0].slice()),A}function s(c,f,x,k){return M.isFullCircle([f,x])?l(c,k):n(c,f,x,k)}function o(c,f,x,k){for(var y=1/0,A=1/0,L=s(c,f,x,k),u=0;u<L.length;u++){var m=L[u];y=Math.min(y,m[0]),A=Math.min(A,-m[1])}return[y,A]}function p(c,f){var x=function(A){var L=T(A,c);return L>0?L:1/0},k=i(f,x),y=M.mod(k+1,f.length);return[f[k],f[y]]}function b(c){return Math.abs(c)>1e-10?c:0}function h(c,f,x){f=f||0,x=x||0;for(var k=c.length,y=new Array(k),A=0;A<k;A++){var L=c[A];y[A]=[f+L[0],x-L[1]]}return y}function _(c,f,x,k,y,A){var L=s(c,f,x,k);return"M"+h(L,y,A).join("L")}function a(c,f,x,k,y,A,L){var u,m;c<f?(u=c,m=f):(u=f,m=c);var S=h(s(u,x,k,y),A,L),w=h(s(m,x,k,y),A,L);return"M"+w.reverse().join("L")+"M"+S.join("L")}Q.exports={isPtInsidePolygon:d,findPolygonOffset:o,findEnclosingVertexAngles:p,findIntersectionXY:r,findXYatLength:e,clampTiny:b,pathPolygon:_,pathPolygonAnnulus:a}},40872:function(Q,U,t){var M=t(84888).KY,E=t(3400).counterRegex,i=t(62400),C=t(39360),T=C.attr,v=C.name,d=E(v),r={};r[T]={valType:"subplotid",dflt:v,editType:"calc"};function e(n){for(var s=n._fullLayout,o=n.calcdata,p=s._subplots[v],b=0;b<p.length;b++){var h=p[b],_=M(o,v,h),a=s[h]._subplot;a||(a=i(n,h),s[h]._subplot=a),a.plot(_,s,n._promises)}}function l(n,s,o,p){for(var b=p._subplots[v]||[],h=p._has&&p._has("gl"),_=s._has&&s._has("gl"),a=h&&!_,c=0;c<b.length;c++){var f=b[c],x=p[f]._subplot;if(!s[f]&&x){x.framework.remove(),x.layers["radial-axis-title"].remove();for(var k in x.clipPaths)x.clipPaths[k].remove()}a&&x._scene&&(x._scene.destroy(),x._scene=null)}}Q.exports={attr:T,name:v,idRoot:v,idRegex:d,attrRegex:d,attributes:r,layoutAttributes:t(95300),supplyLayoutDefaults:t(84380),plot:e,clean:l,toSVG:t(57952).toSVG}},95300:function(Q,U,t){var M=t(22548),E=t(94724),i=t(86968).u,C=t(3400).extendFlat,T=t(67824).overrideAll,v=T({color:E.color,showline:C({},E.showline,{dflt:!0}),linecolor:E.linecolor,linewidth:E.linewidth,showgrid:C({},E.showgrid,{dflt:!0}),gridcolor:E.gridcolor,gridwidth:E.gridwidth,griddash:E.griddash},"plot","from-root"),d=T({tickmode:E.minor.tickmode,nticks:E.nticks,tick0:E.tick0,dtick:E.dtick,tickvals:E.tickvals,ticktext:E.ticktext,ticks:E.ticks,ticklen:E.ticklen,tickwidth:E.tickwidth,tickcolor:E.tickcolor,ticklabelstep:E.ticklabelstep,showticklabels:E.showticklabels,labelalias:E.labelalias,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,showexponent:E.showexponent,exponentformat:E.exponentformat,minexponent:E.minexponent,separatethousands:E.separatethousands,tickfont:E.tickfont,tickangle:E.tickangle,tickformat:E.tickformat,tickformatstops:E.tickformatstops,layer:E.layer},"plot","from-root"),r={visible:C({},E.visible,{dflt:!0}),type:C({},E.type,{values:["-","linear","log","date","category"]}),autotypenumbers:E.autotypenumbers,autorangeoptions:{minallowed:E.autorangeoptions.minallowed,maxallowed:E.autorangeoptions.maxallowed,clipmin:E.autorangeoptions.clipmin,clipmax:E.autorangeoptions.clipmax,include:E.autorangeoptions.include,editType:"plot"},autorange:C({},E.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:C({},E.minallowed,{editType:"plot"}),maxallowed:C({},E.maxallowed,{editType:"plot"}),range:C({},E.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:E.categoryorder,categoryarray:E.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:E.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:C({},E.title.text,{editType:"plot",dflt:""}),font:C({},E.title.font,{editType:"plot"}),editType:"plot"},hoverformat:E.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:E._deprecated.title,titlefont:E._deprecated.titlefont}};C(r,v,d);var e={visible:C({},E.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:E.autotypenumbers,categoryorder:E.categoryorder,categoryarray:E.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:E.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};C(e,v,d),Q.exports={domain:i({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:M.background},radialaxis:r,angularaxis:e,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(Q,U,t){var M=t(3400),E=t(76308),i=t(31780),C=t(168),T=t(84888).op,v=t(26332),d=t(25404),r=t(95936),e=t(42568),l=t(22416),n=t(42136),s=t(76808),o=t(52976),p=t(95300),b=t(57696),h=t(39360),_=h.axisNames;function a(f,x,k,y){var A=k("bgcolor");y.bgColor=E.combine(A,y.paper_bgcolor);var L=k("sector");k("hole");var u=T(y.fullData,h.name,y.id),m=y.layoutOut,S;function w(rt,ot){return k(S+"."+rt,ot)}for(var I=0;I<_.length;I++){S=_[I],M.isPlainObject(f[S])||(f[S]={});var O=f[S],D=i.newContainer(x,S);D._id=D._name=S,D._attr=y.id+"."+S,D._traceIndices=u.map(function(rt){return rt._expandedIndex});var P=h.axisName2dataArray[S],F=c(O,D,w,u,P,y);l(O,D,w,{axData:u,dataAttr:P});var R=w("visible");switch(b(D,x,m),w("uirevision",x.uirevision),D._m=1,S){case"radialaxis":w("minallowed"),w("maxallowed");var B=w("range"),N=D.getAutorangeDflt(B),G=w("autorange",N),X;B&&(B[0]===null&&B[1]===null||(B[0]===null||B[1]===null)&&(G==="reversed"||G===!0)||B[0]!==null&&(G==="min"||G==="max reversed")||B[1]!==null&&(G==="max"||G==="min reversed"))&&(B=void 0,delete D.range,D.autorange=!0,X=!0),X||(N=D.getAutorangeDflt(B),G=w("autorange",N)),O.autorange=G,G&&(s(w,G,B),(F==="linear"||F==="-")&&w("rangemode"),D.isReversed()&&(D._m=-1)),D.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(F==="date"){M.log("Polar plots do not support date angular axes yet.");for(var J=0;J<u.length;J++)u[J].visible=!1;F=O.type=D.type="linear"}w(F==="linear"?"thetaunit":"period");var it=w("direction");w("rotation",{counterclockwise:0,clockwise:90}[it]);break}if(e(O,D,w,D.type,{tickSuffixDflt:D.thetaunit==="degrees"?"\xB0":void 0}),R){var nt,q,Z,$,V=y.font||{};nt=w("color"),q=nt===O.color?nt:V.color,Z=V.size,$=V.family,v(O,D,w,D.type),r(O,D,w,D.type,{font:{color:q,size:Z,family:$},noAutotickangles:S==="angularaxis"}),d(O,D,w,{outerTicks:!0}),n(O,D,w,{dfltColor:nt,bgColor:y.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:p[S]}),w("layer"),S==="radialaxis"&&(w("side"),w("angle",L[0]),w("title.text"),M.coerceFont(w,"title.font",{color:q,size:M.bigFont(Z),family:$}))}F!=="category"&&w("hoverformat"),D._input=O}x.angularaxis.type==="category"&&k("gridshape")}function c(f,x,k,y,A,L){var u=k("autotypenumbers",L.autotypenumbersDflt),m=k("type");if(m==="-"){for(var S,w=0;w<y.length;w++)if(y[w].visible){S=y[w];break}S&&S[A]&&(x.type=o(S[A],"gregorian",{noMultiCategory:!0,autotypenumbers:u})),x.type==="-"?x.type="linear":f.type=x.type}return x.type}Q.exports=function(f,x,k){C(f,x,k,{type:h.name,attributes:p,handleDefaults:a,font:x.font,autotypenumbersDflt:x.autotypenumbers,paper_bgcolor:x.paper_bgcolor,fullData:k,layoutOut:x})}},62400:function(Q,U,t){var M=t(33428),E=t(49760),i=t(24040),C=t(3400),T=C.strRotate,v=C.strTranslate,d=t(76308),r=t(43616),e=t(7316),l=t(54460),n=t(78344),s=t(57696),o=t(19280).doAutoRange,p=t(51184),b=t(86476),h=t(93024),_=t(81668),a=t(22676).prepSelect,c=t(22676).selectOnClick,f=t(22676).clearOutline,x=t(93972),k=t(73696),y=t(39172).redrawReglTraces,A=t(84284).MID_SHIFT,L=t(39360),u=t(57384),m=t(36416),S=m.smith,w=m.reactanceArc,I=m.resistanceArc,O=m.smithTransform,D=C._,P=C.mod,F=C.deg2rad,R=C.rad2deg;function B(nt,q,Z){this.isSmith=Z||!1,this.id=q,this.gd=nt,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var $=nt._fullLayout,V="clip"+$._uid+q;this.clipIds.forTraces=V+"-for-traces",this.clipPaths.forTraces=$._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=$["_"+(Z?"smith":"polar")+"layer"].append("g").attr("class",q),this.getHole=function(rt){return this.isSmith?0:rt.hole},this.getSector=function(rt){return this.isSmith?[0,360]:rt.sector},this.getRadial=function(rt){return this.isSmith?rt.realaxis:rt.radialaxis},this.getAngular=function(rt){return this.isSmith?rt.imaginaryaxis:rt.angularaxis},Z||(this.radialTickLayout=null,this.angularTickLayout=null)}var N=B.prototype;Q.exports=function(nt,q,Z){return new B(nt,q,Z)},N.plot=function(nt,q){for(var Z=this,$=q[Z.id],V=!1,rt=0;rt<nt.length;rt++){var ot=nt[rt][0].trace;if(ot.cliponaxis===!1){V=!0;break}}Z._hasClipOnAxisFalse=V,Z.updateLayers(q,$),Z.updateLayout(q,$),e.generalUpdatePerTraceModule(Z.gd,Z,nt,$),Z.updateFx(q,$),Z.isSmith&&(delete $.realaxis.range,delete $.imaginaryaxis.range)},N.updateLayers=function(nt,q){var Z=this,$=Z.isSmith,V=Z.layers,rt=Z.getRadial(q),ot=Z.getAngular(q),H=L.layerNames,Y=H.indexOf("frontplot"),at=H.slice(0,Y),et=ot.layer==="below traces",ct=rt.layer==="below traces";et&&at.push("angular-line"),ct&&at.push("radial-line"),et&&at.push("angular-axis"),ct&&at.push("radial-axis"),at.push("frontplot"),et||at.push("angular-line"),ct||at.push("radial-line"),et||at.push("angular-axis"),ct||at.push("radial-axis");var ft=($?"smith":"polar")+"sublayer",yt=Z.framework.selectAll("."+ft).data(at,String);yt.enter().append("g").attr("class",function(xt){return ft+" "+xt}).each(function(xt){var Ct=V[xt]=M.select(this);switch(xt){case"frontplot":$||Ct.append("g").classed("barlayer",!0),Ct.append("g").classed("scatterlayer",!0);break;case"backplot":Ct.append("g").classed("maplayer",!0);break;case"plotbg":V.bg=Ct.append("path");break;case"radial-grid":Ct.style("fill","none");break;case"angular-grid":Ct.style("fill","none");break;case"radial-line":Ct.append("line").style("fill","none");break;case"angular-line":Ct.append("path").style("fill","none");break}}),yt.order()},N.updateLayout=function(nt,q){var Z=this,$=Z.layers,V=nt._size,rt=Z.getRadial(q),ot=Z.getAngular(q),H=q.domain.x,Y=q.domain.y;Z.xOffset=V.l+V.w*H[0],Z.yOffset=V.t+V.h*(1-Y[1]);var at=Z.xLength=V.w*(H[1]-H[0]),et=Z.yLength=V.h*(Y[1]-Y[0]),ct=Z.getSector(q);Z.sectorInRad=ct.map(F);var ft=Z.sectorBBox=X(ct),yt=ft[2]-ft[0],xt=ft[3]-ft[1],Ct=et/at,gt=Math.abs(xt/yt),mt,vt,At,Ot,It;Ct>gt?(mt=at,vt=at*gt,It=(et-vt)/V.h/2,At=[H[0],H[1]],Ot=[Y[0]+It,Y[1]-It]):(mt=et/gt,vt=et,It=(at-mt)/V.w/2,At=[H[0]+It,H[1]-It],Ot=[Y[0],Y[1]]),Z.xLength2=mt,Z.yLength2=vt,Z.xDomain2=At,Z.yDomain2=Ot;var St=Z.xOffset2=V.l+V.w*At[0],Bt=Z.yOffset2=V.t+V.h*(1-Ot[1]),re=Z.radius=mt/yt,Yt=Z.innerRadius=Z.getHole(q)*re,he=Z.cx=St-re*ft[0],Zt=Z.cy=Bt+re*ft[3],ae=Z.cxx=he-St,oe=Z.cyy=Zt-Bt,ce=rt.side,ue;ce==="counterclockwise"?(ue=ce,ce="top"):ce==="clockwise"&&(ue=ce,ce="bottom"),Z.radialAxis=Z.mockAxis(nt,q,rt,{_id:"x",side:ce,_trueSide:ue,domain:[Yt/V.w,re/V.w]}),Z.angularAxis=Z.mockAxis(nt,q,ot,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(nt,q),Z.updateAngularAxis(nt,q),Z.updateRadialAxis(nt,q),Z.updateRadialAxisTitle(nt,q),Z.xaxis=Z.mockCartesianAxis(nt,q,{_id:"x",domain:At}),Z.yaxis=Z.mockCartesianAxis(nt,q,{_id:"y",domain:Ot});var ye=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",ye).attr("transform",v(ae,oe)),$.frontplot.attr("transform",v(St,Bt)).call(r.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),$.bg.attr("d",ye).attr("transform",v(he,Zt)).call(d.fill,q.bgcolor)},N.mockAxis=function(nt,q,Z,$){var V=C.extendFlat({},Z,$);return s(V,q,nt),V},N.mockCartesianAxis=function(nt,q,Z){var $=this,V=$.isSmith,rt=Z._id,ot=C.extendFlat({type:"linear"},Z);n(ot,nt);var H={x:[0,2],y:[1,3]};return ot.setRange=function(){var Y=$.sectorBBox,at=H[rt],et=$.radialAxis._rl,ct=(et[1]-et[0])/(1-$.getHole(q));ot.range=[Y[at[0]]*ct,Y[at[1]]*ct]},ot.isPtWithinRange=rt==="x"&&!V?function(Y){return $.isPtInside(Y)}:function(){return!0},ot.setRange(),ot.setScale(),ot},N.doAutoRange=function(nt,q){var Z=this,$=Z.gd,V=Z.radialAxis,rt=Z.getRadial(q);o($,V);var ot=V.range;if(rt.range=ot.slice(),rt._input.range=ot.slice(),V._rl=[V.r2l(ot[0],null,"gregorian"),V.r2l(ot[1],null,"gregorian")],V.minallowed!==void 0){var H=V.r2l(V.minallowed);V._rl[0]>V._rl[1]?V._rl[1]=Math.max(V._rl[1],H):V._rl[0]=Math.max(V._rl[0],H)}if(V.maxallowed!==void 0){var Y=V.r2l(V.maxallowed);V._rl[0]<V._rl[1]?V._rl[1]=Math.min(V._rl[1],Y):V._rl[0]=Math.min(V._rl[0],Y)}},N.updateRadialAxis=function(nt,q){var Z=this,$=Z.gd,V=Z.layers,rt=Z.radius,ot=Z.innerRadius,H=Z.cx,Y=Z.cy,at=Z.getRadial(q),et=P(Z.getSector(q)[0],360),ct=Z.radialAxis,ft=ot<rt,yt=Z.isSmith;yt||(Z.fillViewInitialKey("radialaxis.angle",at.angle),Z.fillViewInitialKey("radialaxis.range",ct.range.slice()),ct.setGeometry()),ct.tickangle==="auto"&&et>90&&et<=270&&(ct.tickangle=180);var xt=yt?function(re){var Yt=O(Z,S([re.x,0]));return v(Yt[0]-H,Yt[1]-Y)}:function(re){return v(ct.l2p(re.x)+ot,0)},Ct=yt?function(re){return I(Z,re.x,-1/0,1/0)}:function(re){return Z.pathArc(ct.r2p(re.x)+ot)},gt=G(at);if(Z.radialTickLayout!==gt&&(V["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=gt),ft){ct.setScale();var mt=0,vt=yt?(ct.tickvals||[]).filter(function(re){return re>=0}).map(function(re){return l.tickText(ct,re,!0,!1)}):l.calcTicks(ct),At=yt?vt:l.clipEnds(ct,vt),Ot=l.getTickSigns(ct)[2];yt&&((ct.ticks==="top"&&ct.side==="bottom"||ct.ticks==="bottom"&&ct.side==="top")&&(Ot=-Ot),ct.ticks==="top"&&ct.side==="top"&&(mt=-ct.ticklen),ct.ticks==="bottom"&&ct.side==="bottom"&&(mt=ct.ticklen)),l.drawTicks($,ct,{vals:vt,layer:V["radial-axis"],path:l.makeTickPath(ct,0,Ot),transFn:xt,crisp:!1}),l.drawGrid($,ct,{vals:At,layer:V["radial-grid"],path:Ct,transFn:C.noop,crisp:!1}),l.drawLabels($,ct,{vals:vt,layer:V["radial-axis"],transFn:xt,labelFns:l.makeLabelFns(ct,mt)})}var It=Z.radialAxisAngle=Z.vangles?R(J(F(at.angle),Z.vangles)):at.angle,St=v(H,Y),Bt=St+T(-It);it(V["radial-axis"],ft&&(at.showticklabels||at.ticks),{transform:Bt}),it(V["radial-grid"],ft&&at.showgrid,{transform:yt?"":St}),it(V["radial-line"].select("line"),ft&&at.showline,{x1:yt?-rt:ot,y1:0,x2:rt,y2:0,transform:Bt}).attr("stroke-width",at.linewidth).call(d.stroke,at.linecolor)},N.updateRadialAxisTitle=function(nt,q,Z){if(!this.isSmith){var $=this,V=$.gd,rt=$.radius,ot=$.cx,H=$.cy,Y=$.getRadial(q),at=$.id+"title",et=0;if(Y.title){var ct=r.bBox($.layers["radial-axis"].node()).height,ft=Y.title.font.size,yt=Y.side;et=yt==="top"?ft:yt==="counterclockwise"?-(ct+ft*.4):ct+ft*.8}var xt=Z!==void 0?Z:$.radialAxisAngle,Ct=F(xt),gt=Math.cos(Ct),mt=Math.sin(Ct),vt=ot+rt/2*gt+et*mt,At=H-rt/2*mt+et*gt;$.layers["radial-axis-title"]=_.draw(V,at,{propContainer:Y,propName:$.id+".radialaxis.title",placeholder:D(V,"Click to enter radial axis title"),attributes:{x:vt,y:At,"text-anchor":"middle"},transform:{rotate:-xt}})}},N.updateAngularAxis=function(nt,q){var Z=this,$=Z.gd,V=Z.layers,rt=Z.radius,ot=Z.innerRadius,H=Z.cx,Y=Z.cy,at=Z.getAngular(q),et=Z.angularAxis,ct=Z.isSmith;ct||(Z.fillViewInitialKey("angularaxis.rotation",at.rotation),et.setGeometry(),et.setScale());var ft=ct?function(Yt){var he=O(Z,S([0,Yt.x]));return Math.atan2(he[0]-H,he[1]-Y)-Math.PI/2}:function(Yt){return et.t2g(Yt.x)};et.type==="linear"&&et.thetaunit==="radians"&&(et.tick0=R(et.tick0),et.dtick=R(et.dtick));var yt=function(Yt){return v(H+rt*Math.cos(Yt),Y-rt*Math.sin(Yt))},xt=ct?function(Yt){var he=O(Z,S([0,Yt.x]));return v(he[0],he[1])}:function(Yt){return yt(ft(Yt))},Ct=ct?function(Yt){var he=O(Z,S([0,Yt.x])),Zt=Math.atan2(he[0]-H,he[1]-Y)-Math.PI/2;return v(he[0],he[1])+T(-R(Zt))}:function(Yt){var he=ft(Yt);return yt(he)+T(-R(he))},gt=ct?function(Yt){return w(Z,Yt.x,0,1/0)}:function(Yt){var he=ft(Yt),Zt=Math.cos(he),ae=Math.sin(he);return"M"+[H+ot*Zt,Y-ot*ae]+"L"+[H+rt*Zt,Y-rt*ae]},mt=l.makeLabelFns(et,0),vt=mt.labelStandoff,At={};At.xFn=function(Yt){var he=ft(Yt);return Math.cos(he)*vt},At.yFn=function(Yt){var he=ft(Yt),Zt=Math.sin(he)>0?.2:1;return-Math.sin(he)*(vt+Yt.fontSize*Zt)+Math.abs(Math.cos(he))*(Yt.fontSize*A)},At.anchorFn=function(Yt){var he=ft(Yt),Zt=Math.cos(he);return Math.abs(Zt)<.1?"middle":Zt>0?"start":"end"},At.heightFn=function(Yt,he,Zt){var ae=ft(Yt);return-.5*(1+Math.sin(ae))*Zt};var Ot=G(at);Z.angularTickLayout!==Ot&&(V["angular-axis"].selectAll("."+et._id+"tick").remove(),Z.angularTickLayout=Ot);var It=ct?[1/0].concat(et.tickvals||[]).map(function(Yt){return l.tickText(et,Yt,!0,!1)}):l.calcTicks(et);ct&&(It[0].text="\u221E",It[0].fontSize*=1.75);var St;if(q.gridshape==="linear"?(St=It.map(ft),C.angleDelta(St[0],St[1])<0&&(St=St.slice().reverse())):St=null,Z.vangles=St,et.type==="category"&&(It=It.filter(function(Yt){return C.isAngleInsideSector(ft(Yt),Z.sectorInRad)})),et.visible){var Bt=et.ticks==="inside"?-1:1,re=(et.linewidth||1)/2;l.drawTicks($,et,{vals:It,layer:V["angular-axis"],path:"M"+Bt*re+",0h"+Bt*et.ticklen,transFn:Ct,crisp:!1}),l.drawGrid($,et,{vals:It,layer:V["angular-grid"],path:gt,transFn:C.noop,crisp:!1}),l.drawLabels($,et,{vals:It,layer:V["angular-axis"],repositionOnUpdate:!0,transFn:xt,labelFns:At})}it(V["angular-line"].select("path"),at.showline,{d:Z.pathSubplot(),transform:v(H,Y)}).attr("stroke-width",at.linewidth).call(d.stroke,at.linecolor)},N.updateFx=function(nt,q){if(!this.gd._context.staticPlot){var Z=!this.isSmith;Z&&(this.updateAngularDrag(nt),this.updateRadialDrag(nt,q,0),this.updateRadialDrag(nt,q,1)),this.updateHoverAndMainDrag(nt)}},N.updateHoverAndMainDrag=function(nt){var q=this,Z=q.isSmith,$=q.gd,V=q.layers,rt=nt._zoomlayer,ot=L.MINZOOM,H=L.OFFEDGE,Y=q.radius,at=q.innerRadius,et=q.cx,ct=q.cy,ft=q.cxx,yt=q.cyy,xt=q.sectorInRad,Ct=q.vangles,gt=q.radialAxis,mt=u.clampTiny,vt=u.findXYatLength,At=u.findEnclosingVertexAngles,Ot=L.cornerHalfWidth,It=L.cornerLen/2,St,Bt,re=p.makeDragger(V,"path","maindrag",nt.dragmode===!1?"none":"crosshair");M.select(re).attr("d",q.pathSubplot()).attr("transform",v(et,ct)),re.onmousemove=function(ge){h.hover($,ge,q.id),$._fullLayout._lasthover=re,$._fullLayout._hoversubplot=q.id},re.onmouseout=function(ge){$._dragging||b.unhover($,ge)};var Yt={element:re,gd:$,subplot:q.id,plotinfo:{id:q.id,xaxis:q.xaxis,yaxis:q.yaxis},xaxes:[q.xaxis],yaxes:[q.yaxis]},he,Zt,ae,oe,ce,ue,ye,Tt,Ft;function $t(ge,_e){return Math.sqrt(ge*ge+_e*_e)}function Vt(ge,_e){return $t(ge-ft,_e-yt)}function Nt(ge,_e){return Math.atan2(yt-_e,ge-ft)}function Mt(ge,_e){return[ge*Math.cos(_e),ge*Math.sin(-_e)]}function Et(ge,_e){if(ge===0)return q.pathSector(2*Ot);var De=It/ge,hr=_e-De,fe=_e+De,Be=Math.max(0,Math.min(ge,Y)),He=Be-Ot,pr=Be+Ot;return"M"+Mt(He,hr)+"A"+[He,He]+" 0,0,0 "+Mt(He,fe)+"L"+Mt(pr,fe)+"A"+[pr,pr]+" 0,0,1 "+Mt(pr,hr)+"Z"}function Dt(ge,_e,De){if(ge===0)return q.pathSector(2*Ot);var hr=Mt(ge,_e),fe=Mt(ge,De),Be=mt((hr[0]+fe[0])/2),He=mt((hr[1]+fe[1])/2),pr,Ze;if(Be&&He){var Xt=He/Be,ie=-1/Xt,pe=vt(Ot,Xt,Be,He);pr=vt(It,ie,pe[0][0],pe[0][1]),Ze=vt(It,ie,pe[1][0],pe[1][1])}else{var ke,Ce;He?(ke=It,Ce=Ot):(ke=Ot,Ce=It),pr=[[Be-ke,He-Ce],[Be+ke,He-Ce]],Ze=[[Be-ke,He+Ce],[Be+ke,He+Ce]]}return"M"+pr.join("L")+"L"+Ze.reverse().join("L")+"Z"}function dt(){ae=null,oe=null,ce=q.pathSubplot(),ue=!1;var ge=$._fullLayout[q.id];ye=E(ge.bgcolor).getLuminance(),Tt=p.makeZoombox(rt,ye,et,ct,ce),Tt.attr("fill-rule","evenodd"),Ft=p.makeCorners(rt,et,ct),f($)}function ht(ge,_e){return _e=Math.max(Math.min(_e,Y),at),ge<H?ge=0:Y-ge<H?ge=Y:_e<H?_e=0:Y-_e<H&&(_e=Y),Math.abs(_e-ge)>ot?(ge<_e?(ae=ge,oe=_e):(ae=_e,oe=ge),!0):(ae=null,oe=null,!1)}function bt(ge,_e){ge=ge||ce,_e=_e||"M0,0Z",Tt.attr("d",ge),Ft.attr("d",_e),p.transitionZoombox(Tt,Ft,ue,ye),ue=!0;var De={};je(De),$.emit("plotly_relayouting",De)}function Pt(ge,_e){ge=ge*St,_e=_e*Bt;var De=he+ge,hr=Zt+_e,fe=Vt(he,Zt),Be=Math.min(Vt(De,hr),Y),He=Nt(he,Zt),pr,Ze;ht(fe,Be)&&(pr=ce+q.pathSector(oe),ae&&(pr+=q.pathSector(ae)),Ze=Et(ae,He)+Et(oe,He)),bt(pr,Ze)}function Gt(ge,_e,De,hr){var fe=u.findIntersectionXY(De,hr,De,[ge-ft,yt-_e]);return $t(fe[0],fe[1])}function te(ge,_e){var De=he+ge,hr=Zt+_e,fe=Nt(he,Zt),Be=Nt(De,hr),He=At(fe,Ct),pr=At(Be,Ct),Ze=Gt(he,Zt,He[0],He[1]),Xt=Math.min(Gt(De,hr,pr[0],pr[1]),Y),ie,pe;ht(Ze,Xt)&&(ie=ce+q.pathSector(oe),ae&&(ie+=q.pathSector(ae)),pe=[Dt(ae,He[0],He[1]),Dt(oe,He[0],He[1])].join(" ")),bt(ie,pe)}function ne(){if(p.removeZoombox($),!(ae===null||oe===null)){var ge={};je(ge),p.showDoubleClickNotifier($),i.call("_guiRelayout",$,ge)}}function je(ge){var _e=gt._rl,De=(_e[1]-_e[0])/(1-at/Y)/Y,hr=[_e[0]+(ae-at)*De,_e[0]+(oe-at)*De];ge[q.id+".radialaxis.range"]=hr}function Ne(ge,_e){var De=$._fullLayout.clickmode;if(p.removeZoombox($),ge===2){var hr={};for(var fe in q.viewInitial)hr[q.id+"."+fe]=q.viewInitial[fe];$.emit("plotly_doubleclick",null),i.call("_guiRelayout",$,hr)}De.indexOf("select")>-1&&ge===1&&c(_e,$,[q.xaxis],[q.yaxis],q.id,Yt),De.indexOf("event")>-1&&h.click($,_e,q.id)}Yt.prepFn=function(ge,_e,De){var hr=$._fullLayout.dragmode,fe=re.getBoundingClientRect();$._fullLayout._calcInverseTransform($);var Be=$._fullLayout._invTransform;St=$._fullLayout._invScaleX,Bt=$._fullLayout._invScaleY;var He=C.apply3DTransform(Be)(_e-fe.left,De-fe.top);if(he=He[0],Zt=He[1],Ct){var pr=u.findPolygonOffset(Y,xt[0],xt[1],Ct);he+=ft+pr[0],Zt+=yt+pr[1]}switch(hr){case"zoom":Yt.clickFn=Ne,Z||(Ct?Yt.moveFn=te:Yt.moveFn=Pt,Yt.doneFn=ne,dt());break;case"select":case"lasso":a(ge,_e,De,Yt,hr);break}},b.init(Yt)},N.updateRadialDrag=function(nt,q,Z){var $=this,V=$.gd,rt=$.layers,ot=$.radius,H=$.innerRadius,Y=$.cx,at=$.cy,et=$.radialAxis,ct=L.radialDragBoxSize,ft=ct/2;if(!et.visible)return;var yt=F($.radialAxisAngle),xt=et._rl,Ct=xt[0],gt=xt[1],mt=xt[Z],vt=.75*(xt[1]-xt[0])/(1-$.getHole(q))/ot,At,Ot,It;Z?(At=Y+(ot+ft)*Math.cos(yt),Ot=at-(ot+ft)*Math.sin(yt),It="radialdrag"):(At=Y+(H-ft)*Math.cos(yt),Ot=at-(H-ft)*Math.sin(yt),It="radialdrag-inner");var St=p.makeRectDragger(rt,It,"crosshair",-ft,-ft,ct,ct),Bt={element:St,gd:V};nt.dragmode===!1&&(Bt.dragmode=!1),it(M.select(St),et.visible&&H<ot,{transform:v(At,Ot)});var re,Yt,he;function Zt(ye,Tt){if(re)re(ye,Tt);else{var Ft=[ye,-Tt],$t=[Math.cos(yt),Math.sin(yt)],Vt=Math.abs(C.dot(Ft,$t)/Math.sqrt(C.dot(Ft,Ft)));isNaN(Vt)||(re=Vt<.5?ce:ue)}var Nt={};ae(Nt),V.emit("plotly_relayouting",Nt)}function ae(ye){Yt!==null?ye[$.id+".radialaxis.angle"]=Yt:he!==null&&(ye[$.id+".radialaxis.range["+Z+"]"]=he)}function oe(){Yt!==null?i.call("_guiRelayout",V,$.id+".radialaxis.angle",Yt):he!==null&&i.call("_guiRelayout",V,$.id+".radialaxis.range["+Z+"]",he)}function ce(ye,Tt){if(Z!==0){var Ft=At+ye,$t=Ot+Tt;Yt=Math.atan2(at-$t,Ft-Y),$.vangles&&(Yt=J(Yt,$.vangles)),Yt=R(Yt);var Vt=v(Y,at)+T(-Yt);rt["radial-axis"].attr("transform",Vt),rt["radial-line"].select("line").attr("transform",Vt);var Nt=$.gd._fullLayout,Mt=Nt[$.id];$.updateRadialAxisTitle(Nt,Mt,Yt)}}function ue(ye,Tt){var Ft=C.dot([ye,-Tt],[Math.cos(yt),Math.sin(yt)]);if(he=mt-vt*Ft,vt>0!=(Z?he>Ct:he<gt)){he=null;return}var $t=V._fullLayout,Vt=$t[$.id];et.range[Z]=he,et._rl[Z]=he,$.updateRadialAxis($t,Vt),$.xaxis.setRange(),$.xaxis.setScale(),$.yaxis.setRange(),$.yaxis.setScale();var Nt=!1;for(var Mt in $.traceHash){var Et=$.traceHash[Mt],Dt=C.filterVisible(Et),dt=Et[0][0].trace._module;dt.plot(V,$,Dt,Vt),i.traceIs(Mt,"gl")&&Dt.length&&(Nt=!0)}Nt&&(k(V),y(V))}Bt.prepFn=function(){re=null,Yt=null,he=null,Bt.moveFn=Zt,Bt.doneFn=oe,f(V)},Bt.clampFn=function(ye,Tt){return Math.sqrt(ye*ye+Tt*Tt)<L.MINDRAG&&(ye=0,Tt=0),[ye,Tt]},b.init(Bt)},N.updateAngularDrag=function(nt){var q=this,Z=q.gd,$=q.layers,V=q.radius,rt=q.angularAxis,ot=q.cx,H=q.cy,Y=q.cxx,at=q.cyy,et=L.angularDragBoxSize,ct=p.makeDragger($,"path","angulardrag",nt.dragmode===!1?"none":"move"),ft={element:ct,gd:Z};nt.dragmode===!1?ft.dragmode=!1:M.select(ct).attr("d",q.pathAnnulus(V,V+et)).attr("transform",v(ot,H)).call(x,"move");function yt(he,Zt){return Math.atan2(at+et-Zt,he-Y-et)}var xt=$.frontplot.select(".scatterlayer").selectAll(".trace"),Ct=xt.selectAll(".point"),gt=xt.selectAll(".textpoint"),mt,vt,At,Ot,It,St;function Bt(he,Zt){var ae=q.gd._fullLayout,oe=ae[q.id],ce=mt+he*nt._invScaleX,ue=vt+Zt*nt._invScaleY,ye=yt(ce,ue),Tt=R(ye-St);if(Ot=At+Tt,$.frontplot.attr("transform",v(q.xOffset2,q.yOffset2)+T([-Tt,Y,at])),q.vangles){It=q.radialAxisAngle+Tt;var Ft=v(ot,H)+T(-Tt),$t=v(ot,H)+T(-It);$.bg.attr("transform",Ft),$["radial-grid"].attr("transform",Ft),$["radial-axis"].attr("transform",$t),$["radial-line"].select("line").attr("transform",$t),q.updateRadialAxisTitle(ae,oe,It)}else q.clipPaths.forTraces.select("path").attr("transform",v(Y,at)+T(Tt));Ct.each(function(){var ht=M.select(this),bt=r.getTranslate(ht);ht.attr("transform",v(bt.x,bt.y)+T([Tt]))}),gt.each(function(){var ht=M.select(this),bt=ht.select("text"),Pt=r.getTranslate(ht);ht.attr("transform",T([Tt,bt.attr("x"),bt.attr("y")])+v(Pt.x,Pt.y))}),rt.rotation=C.modHalf(Ot,360),q.updateAngularAxis(ae,oe),q._hasClipOnAxisFalse&&!C.isFullCircle(q.sectorInRad)&&xt.call(r.hideOutsideRangePoints,q);var Vt=!1;for(var Nt in q.traceHash)if(i.traceIs(Nt,"gl")){var Mt=q.traceHash[Nt],Et=C.filterVisible(Mt),Dt=Mt[0][0].trace._module;Dt.plot(Z,q,Et,oe),Et.length&&(Vt=!0)}Vt&&(k(Z),y(Z));var dt={};re(dt),Z.emit("plotly_relayouting",dt)}function re(he){he[q.id+".angularaxis.rotation"]=Ot,q.vangles&&(he[q.id+".radialaxis.angle"]=It)}function Yt(){gt.select("text").attr("transform",null);var he={};re(he),i.call("_guiRelayout",Z,he)}ft.prepFn=function(he,Zt,ae){var oe=nt[q.id];At=oe.angularaxis.rotation;var ce=ct.getBoundingClientRect();mt=Zt-ce.left,vt=ae-ce.top,Z._fullLayout._calcInverseTransform(Z);var ue=C.apply3DTransform(nt._invTransform)(mt,vt);mt=ue[0],vt=ue[1],St=yt(mt,vt),ft.moveFn=Bt,ft.doneFn=Yt,f(Z)},q.vangles&&!C.isFullCircle(q.sectorInRad)&&(ft.prepFn=C.noop,x(M.select(ct),null)),b.init(ft)},N.isPtInside=function(nt){if(this.isSmith)return!0;var q=this.sectorInRad,Z=this.vangles,$=this.angularAxis.c2g(nt.theta),V=this.radialAxis,rt=V.c2l(nt.r),ot=V._rl,H=Z?u.isPtInsidePolygon:C.isPtInsideSector;return H(rt,$,ot,q,Z)},N.pathArc=function(nt){var q=this.sectorInRad,Z=this.vangles,$=Z?u.pathPolygon:C.pathArc;return $(nt,q[0],q[1],Z)},N.pathSector=function(nt){var q=this.sectorInRad,Z=this.vangles,$=Z?u.pathPolygon:C.pathSector;return $(nt,q[0],q[1],Z)},N.pathAnnulus=function(nt,q){var Z=this.sectorInRad,$=this.vangles,V=$?u.pathPolygonAnnulus:C.pathAnnulus;return V(nt,q,Z[0],Z[1],$)},N.pathSubplot=function(){var nt=this.innerRadius,q=this.radius;return nt?this.pathAnnulus(nt,q):this.pathSector(q)},N.fillViewInitialKey=function(nt,q){nt in this.viewInitial||(this.viewInitial[nt]=q)};function G(nt){var q=nt.ticks+String(nt.ticklen)+String(nt.showticklabels);return"side"in nt&&(q+=nt.side),q}function X(nt){var q=nt[0],Z=nt[1],$=Z-q,V=P(q,360),rt=V+$,ot=Math.cos(F(V)),H=Math.sin(F(V)),Y=Math.cos(F(rt)),at=Math.sin(F(rt)),et,ct,ft,yt;return V<=90&&rt>=90||V>90&&rt>=450?yt=1:H<=0&&at<=0?yt=0:yt=Math.max(H,at),V<=180&&rt>=180||V>180&&rt>=540?et=-1:ot>=0&&Y>=0?et=0:et=Math.min(ot,Y),V<=270&&rt>=270||V>270&&rt>=630?ct=-1:H>=0&&at>=0?ct=0:ct=Math.min(H,at),rt>=360?ft=1:ot<=0&&Y<=0?ft=0:ft=Math.max(ot,Y),[et,ct,ft,yt]}function J(nt,q){var Z=function(V){return C.angleDist(nt,V)},$=C.findIndexOfMin(q,Z);return q[$]}function it(nt,q,Z){return q?(nt.attr("display",null),nt.attr(Z)):nt&&nt.attr("display","none"),nt}},57696:function(Q,U,t){var M=t(3400),E=t(78344),i=M.deg2rad,C=M.rad2deg;Q.exports=function(e,l,n){switch(E(e,n),e._id){case"x":case"radialaxis":T(e,l);break;case"angularaxis":r(e,l);break}};function T(e,l){var n=l._subplot;e.setGeometry=function(){var s=e._rl[0],o=e._rl[1],p=n.innerRadius,b=(n.radius-p)/(o-s),h=p/b,_=s>o?function(a){return a<=0}:function(a){return a>=0};e.c2g=function(a){var c=e.c2l(a)-s;return(_(c)?c:0)+h},e.g2c=function(a){return e.l2c(a+s-h)},e.g2p=function(a){return a*b},e.c2p=function(a){return e.g2p(e.c2g(a))}}}function v(e,l){return l==="degrees"?i(e):e}function d(e,l){return l==="degrees"?C(e):e}function r(e,l){var n=e.type;if(n==="linear"){var s=e.d2c,o=e.c2d;e.d2c=function(p,b){return v(s(p),b)},e.c2d=function(p,b){return o(d(p,b))}}e.makeCalcdata=function(p,b){var h=p[b],_=p._length,a,c,f=function(L){return e.d2c(L,p.thetaunit)};if(h)for(a=new Array(_),c=0;c<_;c++)a[c]=f(h[c]);else{var x=b+"0",k="d"+b,y=x in p?f(p[x]):0,A=p[k]?f(p[k]):(e.period||2*Math.PI)/_;for(a=new Array(_),c=0;c<_;c++)a[c]=y+c*A}return a},e.setGeometry=function(){var p=l.sector,b=p.map(i),h={clockwise:-1,counterclockwise:1}[e.direction],_=i(e.rotation),a=function(u){return h*u+_},c=function(u){return(u-_)/h},f,x,k,y;switch(n){case"linear":x=f=M.identity,y=i,k=C,e.range=M.isFullCircle(b)?[p[0],p[0]+360]:b.map(c).map(C);break;case"category":var A=e._categories.length,L=e.period?Math.max(e.period,A):A;L===0&&(L=1),x=y=function(u){return u*2*Math.PI/L},f=k=function(u){return u*L/Math.PI/2},e.range=[0,L];break}e.c2g=function(u){return a(x(u))},e.g2c=function(u){return f(c(u))},e.t2g=function(u){return a(y(u))},e.g2t=function(u){return k(c(u))}}}},55012:function(Q){Q.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(Q){function U(T){return T<0?-1:T>0?1:0}function t(T){var v=T[0],d=T[1];if(!isFinite(v)||!isFinite(d))return[1,0];var r=(v+1)*(v+1)+d*d;return[(v*v+d*d-1)/r,2*d/r]}function M(T,v){var d=v[0],r=v[1];return[d*T.radius+T.cx,-r*T.radius+T.cy]}function E(T,v){return v*T.radius}function i(T,v,d,r){var e=M(T,t([d,v])),l=e[0],n=e[1],s=M(T,t([r,v])),o=s[0],p=s[1];if(v===0)return["M"+l+","+n,"L"+o+","+p].join(" ");var b=E(T,1/Math.abs(v));return["M"+l+","+n,"A"+b+","+b+" 0 0,"+(v<0?1:0)+" "+o+","+p].join(" ")}function C(T,v,d,r){var e=E(T,1/(v+1)),l=M(T,t([v,d])),n=l[0],s=l[1],o=M(T,t([v,r])),p=o[0],b=o[1];if(U(d)!==U(r)){var h=M(T,t([v,0])),_=h[0],a=h[1];return["M"+n+","+s,"A"+e+","+e+" 0 0,"+(0<d?0:1)+" "+_+","+a,"A"+e+","+e+" 0 0,"+(r<0?0:1)+p+","+b].join(" ")}return["M"+n+","+s,"A"+e+","+e+" 0 0,"+(r<d?0:1)+" "+p+","+b].join(" ")}Q.exports={smith:t,reactanceArc:i,resistanceArc:C,smithTransform:M}},47788:function(Q,U,t){var M=t(84888).KY,E=t(3400).counterRegex,i=t(62400),C=t(55012),T=C.attr,v=C.name,d=E(v),r={};r[T]={valType:"subplotid",dflt:v,editType:"calc"};function e(n){for(var s=n._fullLayout,o=n.calcdata,p=s._subplots[v],b=0;b<p.length;b++){var h=p[b],_=M(o,v,h),a=s[h]._subplot;a||(a=i(n,h,!0),s[h]._subplot=a),a.plot(_,s,n._promises)}}function l(n,s,o,p){for(var b=p._subplots[v]||[],h=0;h<b.length;h++){var _=b[h],a=p[_]._subplot;if(!s[_]&&a){a.framework.remove();for(var c in a.clipPaths)a.clipPaths[c].remove()}}}Q.exports={attr:T,name:v,idRoot:v,idRegex:d,attrRegex:d,attributes:r,layoutAttributes:t(6183),supplyLayoutDefaults:t(22836),plot:e,clean:l,toSVG:t(57952).toSVG}},6183:function(Q,U,t){var M=t(22548),E=t(94724),i=t(86968).u,C=t(3400).extendFlat,T=t(67824).overrideAll,v=T({color:E.color,showline:C({},E.showline,{dflt:!0}),linecolor:E.linecolor,linewidth:E.linewidth,showgrid:C({},E.showgrid,{dflt:!0}),gridcolor:E.gridcolor,gridwidth:E.gridwidth,griddash:E.griddash},"plot","from-root"),d=T({ticklen:E.ticklen,tickwidth:C({},E.tickwidth,{dflt:2}),tickcolor:E.tickcolor,showticklabels:E.showticklabels,labelalias:E.labelalias,showtickprefix:E.showtickprefix,tickprefix:E.tickprefix,showticksuffix:E.showticksuffix,ticksuffix:E.ticksuffix,tickfont:E.tickfont,tickformat:E.tickformat,hoverformat:E.hoverformat,layer:E.layer},"plot","from-root"),r=C({visible:C({},E.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:C({},E.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},v,d),e=C({visible:C({},E.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:E.ticks,editType:"calc"},v,d);Q.exports={domain:i({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:M.background},realaxis:r,imaginaryaxis:e,editType:"calc"}},22836:function(Q,U,t){var M=t(3400),E=t(76308),i=t(31780),C=t(168),T=t(84888).op,v=t(42568),d=t(95936),r=t(42136),e=t(78344),l=t(6183),n=t(55012),s=n.axisNames,o=b(function(h){return M.isTypedArray(h)&&(h=Array.from(h)),h.slice().reverse().map(function(_){return-_}).concat([0]).concat(h)},String);function p(h,_,a,c){var f=a("bgcolor");c.bgColor=E.combine(f,c.paper_bgcolor);var x=T(c.fullData,n.name,c.id),k=c.layoutOut,y;function A(N,G){return a(y+"."+N,G)}for(var L=0;L<s.length;L++){y=s[L],M.isPlainObject(h[y])||(h[y]={});var u=h[y],m=i.newContainer(_,y);m._id=m._name=y,m._attr=c.id+"."+y,m._traceIndices=x.map(function(N){return N._expandedIndex});var S=A("visible");if(m.type="linear",e(m,k),v(u,m,A,m.type),S){var w=y==="realaxis";if(w&&A("side"),w)A("tickvals");else{var I=o(_.realaxis.tickvals||l.realaxis.tickvals.dflt);A("tickvals",I)}M.isTypedArray(m.tickvals)&&(m.tickvals=Array.from(m.tickvals));var O,D,P,F,R=c.font||{};S&&(O=A("color"),D=O===u.color?O:R.color,P=R.size,F=R.family),d(u,m,A,m.type,{noAutotickangles:!0,noTicklabelstep:!0,noAng:!w,noExp:!0,font:{color:D,size:P,family:F}}),M.coerce2(h,_,l,y+".ticklen"),M.coerce2(h,_,l,y+".tickwidth"),M.coerce2(h,_,l,y+".tickcolor",_.color);var B=A("ticks");B||(delete _[y].ticklen,delete _[y].tickwidth,delete _[y].tickcolor),r(u,m,A,{dfltColor:O,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[y]}),A("layer")}A("hoverformat"),delete m.type,m._input=u}}Q.exports=function(h,_,a){C(h,_,a,{noUirevision:!0,type:n.name,attributes:l,handleDefaults:p,font:_.font,paper_bgcolor:_.paper_bgcolor,fullData:a,layoutOut:_})};function b(h,_){var a={};return function(c){var f=_?_(c):c;if(f in a)return a[f];var x=h(c);return a[f]=x,x}}},168:function(Q,U,t){var M=t(3400),E=t(31780),i=t(86968).Q;Q.exports=function(C,T,v,d){var r=d.type,e=d.attributes,l=d.handleDefaults,n=d.partition||"x",s=T._subplots[r],o=s.length,p=o&&s[0].replace(/\d+$/,""),b,h;function _(x,k){return M.coerce(b,h,e,x,k)}for(var a=0;a<o;a++){var c=s[a];C[c]?b=C[c]:b=C[c]={},h=E.newContainer(T,c,p),d.noUirevision||_("uirevision",T.uirevision);var f={};f[n]=[a/o,(a+1)/o],i(h,T,_,f),d.id=c,l(b,h,_,d)}}},21776:function(Q,U,t){var M=t(26880);M.FORMAT_LINK,M.DATE_FORMAT_LINK;function E(i){var C=i.description?" "+i.description:"",T=i.keys||[];if(T.length>0){for(var v=[],d=0;d<T.length;d++)v[d]="`"+T[d]+"`";C=C+"Finally, the template string has access to ",T.length===1?C=C+"variable "+v[0]:C=C+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return C}U.Ks=function(i,C){i=i||{},C=C||{},E(C);var T={valType:"string",dflt:"",editType:i.editType||"none"};return i.arrayOk!==!1&&(T.arrayOk=!0),T},U.Gw=function(i,C){i=i||{},C=C||{},E(C);var T={valType:"string",dflt:"",editType:i.editType||"calc"};return i.arrayOk!==!1&&(T.arrayOk=!0),T},U.ye=function(i,C){i=i||{},C=C||{},i.newshape,E(C);var T={valType:"string",dflt:"",editType:i.editType||"arraydraw"};return T}},19352:function(Q,U,t){var M=t(24696),E=t(84888).KY,i=t(3400).counterRegex,C="ternary";U.name=C;var T=U.attr="subplot";U.idRoot=C,U.idRegex=U.attrRegex=i(C);var v=U.attributes={};v[T]={valType:"subplotid",dflt:"ternary",editType:"calc"},U.layoutAttributes=t(86379),U.supplyLayoutDefaults=t(38536),U.plot=function(d){for(var r=d._fullLayout,e=d.calcdata,l=r._subplots[C],n=0;n<l.length;n++){var s=l[n],o=E(e,C,s),p=r[s]._subplot;p||(p=new M({id:s,graphDiv:d,container:r._ternarylayer.node()},r),r[s]._subplot=p),p.plot(o,r,d._promises)}},U.clean=function(d,r,e,l){for(var n=l._subplots[C]||[],s=0;s<n.length;s++){var o=n[s],p=l[o]._subplot;!r[o]&&p&&(p.plotContainer.remove(),p.clipDef.remove(),p.clipDefRelative.remove(),p.layers["a-title"].remove(),p.layers["b-title"].remove(),p.layers["c-title"].remove())}}},86379:function(Q,U,t){var M=t(22548),E=t(86968).u,i=t(94724),C=t(67824).overrideAll,T=t(92880).extendFlat,v={title:{text:i.title.text,font:i.title.font},color:i.color,tickmode:i.minor.tickmode,nticks:T({},i.nticks,{dflt:6,min:1}),tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,labelalias:i.labelalias,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,minexponent:i.minexponent,separatethousands:i.separatethousands,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:T({},i.showline,{dflt:!0}),linecolor:i.linecolor,linewidth:i.linewidth,showgrid:T({},i.showgrid,{dflt:!0}),gridcolor:i.gridcolor,gridwidth:i.gridwidth,griddash:i.griddash,layer:i.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},d=Q.exports=C({domain:E({name:"ternary"}),bgcolor:{valType:"color",dflt:M.background},sum:{valType:"number",dflt:1,min:0},aaxis:v,baxis:v,caxis:v},"plot","from-root");d.uirevision={valType:"any",editType:"none"},d.aaxis.uirevision=d.baxis.uirevision=d.caxis.uirevision={valType:"any",editType:"none"}},38536:function(Q,U,t){var M=t(76308),E=t(31780),i=t(3400),C=t(168),T=t(95936),v=t(42568),d=t(25404),r=t(26332),e=t(42136),l=t(86379),n=["aaxis","baxis","caxis"];Q.exports=function(p,b,h){C(p,b,h,{type:"ternary",attributes:l,handleDefaults:s,font:b.font,paper_bgcolor:b.paper_bgcolor})};function s(p,b,h,_){var a=h("bgcolor"),c=h("sum");_.bgColor=M.combine(a,_.paper_bgcolor);for(var f,x,k,y=0;y<n.length;y++)f=n[y],x=p[f]||{},k=E.newContainer(b,f),k._name=f,o(x,k,_,b);var A=b.aaxis,L=b.baxis,u=b.caxis;A.min+L.min+u.min>=c&&(A.min=0,L.min=0,u.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function o(p,b,h,_){var a=l[b._name];function c(m,S){return i.coerce(p,b,a,m,S)}c("uirevision",_.uirevision),b.type="linear";var f=c("color"),x=f!==a.color.dflt?f:h.font.color,k=b._name,y=k.charAt(0).toUpperCase(),A="Component "+y,L=c("title.text",A);b._hovertitle=L===A?L:y,i.coerceFont(c,"title.font",{family:h.font.family,size:i.bigFont(h.font.size),color:x}),c("min"),r(p,b,c,"linear"),v(p,b,c,"linear"),T(p,b,c,"linear",{noAutotickangles:!0}),d(p,b,c,{outerTicks:!0});var u=c("showticklabels");u&&(i.coerceFont(c,"tickfont",{family:h.font.family,size:h.font.size,color:x}),c("tickangle"),c("tickformat")),e(p,b,c,{dfltColor:f,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a}),c("hoverformat"),c("layer")}},24696:function(Q,U,t){var M=t(33428),E=t(49760),i=t(24040),C=t(3400),T=C.strTranslate,v=C._,d=t(76308),r=t(43616),e=t(78344),l=t(92880).extendFlat,n=t(7316),s=t(54460),o=t(86476),p=t(93024),b=t(72760),h=b.freeMode,_=b.rectMode,a=t(81668),c=t(22676).prepSelect,f=t(22676).selectOnClick,x=t(22676).clearOutline,k=t(22676).clearSelectionsCache,y=t(33816);function A(R,B){this.id=R.id,this.graphDiv=R.graphDiv,this.init(B),this.makeFramework(B),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}Q.exports=A;var L=A.prototype;L.init=function(R){this.container=R._ternarylayer,this.defs=R._defs,this.layoutId=R._uid,this.traceHash={},this.layers={}},L.plot=function(R,B){var N=this,G=B[N.id],X=B._size;N._hasClipOnAxisFalse=!1;for(var J=0;J<R.length;J++){var it=R[J][0].trace;if(it.cliponaxis===!1){N._hasClipOnAxisFalse=!0;break}}N.updateLayers(G),N.adjustLayout(G,X),n.generalUpdatePerTraceModule(N.graphDiv,N,R,G),N.layers.plotbg.select("path").call(d.fill,G.bgcolor)},L.makeFramework=function(R){var B=this,N=B.graphDiv,G=R[B.id],X=B.clipId="clip"+B.layoutId+B.id,J=B.clipIdRelative="clip-relative"+B.layoutId+B.id;B.clipDef=C.ensureSingleById(R._clips,"clipPath",X,function(it){it.append("path").attr("d","M0,0Z")}),B.clipDefRelative=C.ensureSingleById(R._clips,"clipPath",J,function(it){it.append("path").attr("d","M0,0Z")}),B.plotContainer=C.ensureSingle(B.container,"g",B.id),B.updateLayers(G),r.setClipUrl(B.layers.backplot,X,N),r.setClipUrl(B.layers.grids,X,N)},L.updateLayers=function(R){var B=this,N=B.layers,G=["draglayer","plotbg","backplot","grids"];R.aaxis.layer==="below traces"&&G.push("aaxis","aline"),R.baxis.layer==="below traces"&&G.push("baxis","bline"),R.caxis.layer==="below traces"&&G.push("caxis","cline"),G.push("frontplot"),R.aaxis.layer==="above traces"&&G.push("aaxis","aline"),R.baxis.layer==="above traces"&&G.push("baxis","bline"),R.caxis.layer==="above traces"&&G.push("caxis","cline");var X=B.plotContainer.selectAll("g.toplevel").data(G,String),J=["agrid","bgrid","cgrid"];X.enter().append("g").attr("class",function(it){return"toplevel "+it}).each(function(it){var nt=M.select(this);N[it]=nt,it==="frontplot"?nt.append("g").classed("scatterlayer",!0):it==="backplot"?nt.append("g").classed("maplayer",!0):it==="plotbg"?nt.append("path").attr("d","M0,0Z"):it==="aline"||it==="bline"||it==="cline"?nt.append("path"):it==="grids"&&J.forEach(function(q){N[q]=nt.append("g").classed("grid "+q,!0)})}),X.order()};var u=Math.sqrt(4/3);L.adjustLayout=function(R,B){var N=this,G=R.domain,X=(G.x[0]+G.x[1])/2,J=(G.y[0]+G.y[1])/2,it=G.x[1]-G.x[0],nt=G.y[1]-G.y[0],q=it*B.w,Z=nt*B.h,$=R.sum,V=R.aaxis.min,rt=R.baxis.min,ot=R.caxis.min,H,Y,at,et,ct,ft;q>u*Z?(et=Z,at=et*u):(at=q,et=at/u),ct=it*at/q,ft=nt*et/Z,H=B.l+B.w*X-at/2,Y=B.t+B.h*(1-J)-et/2,N.x0=H,N.y0=Y,N.w=at,N.h=et,N.sum=$,N.xaxis={type:"linear",range:[V+2*ot-$,$-V-2*rt],domain:[X-ct/2,X+ct/2],_id:"x"},e(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(Bt){return Bt.a>=N.aaxis.range[0]&&Bt.a<=N.aaxis.range[1]&&Bt.b>=N.baxis.range[1]&&Bt.b<=N.baxis.range[0]&&Bt.c>=N.caxis.range[1]&&Bt.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[V,$-rt-ot],domain:[J-ft/2,J+ft/2],_id:"y"},e(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var yt=N.yaxis.domain[0],xt=N.aaxis=l({},R.aaxis,{range:[V,$-rt-ot],side:"left",tickangle:(+R.aaxis.tickangle||0)-30,domain:[yt,yt+ft*u],anchor:"free",position:0,_id:"y",_length:at});e(xt,N.graphDiv._fullLayout),xt.setScale();var Ct=N.baxis=l({},R.baxis,{range:[$-V-ot,rt],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:at});e(Ct,N.graphDiv._fullLayout),Ct.setScale();var gt=N.caxis=l({},R.caxis,{range:[$-V-rt,ot],side:"right",tickangle:(+R.caxis.tickangle||0)+30,domain:[yt,yt+ft*u],anchor:"free",position:0,_id:"y",_length:at});e(gt,N.graphDiv._fullLayout),gt.setScale();var mt="M"+H+","+(Y+et)+"h"+at+"l-"+at/2+",-"+et+"Z";N.clipDef.select("path").attr("d",mt),N.layers.plotbg.select("path").attr("d",mt);var vt="M0,"+et+"h"+at+"l-"+at/2+",-"+et+"Z";N.clipDefRelative.select("path").attr("d",vt);var At=T(H,Y);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",At),N.clipDefRelative.select("path").attr("transform",null);var Ot=T(H-Ct._offset,Y+et);N.layers.baxis.attr("transform",Ot),N.layers.bgrid.attr("transform",Ot);var It=T(H+at/2,Y)+"rotate(30)"+T(0,-xt._offset);N.layers.aaxis.attr("transform",It),N.layers.agrid.attr("transform",It);var St=T(H+at/2,Y)+"rotate(-30)"+T(0,-gt._offset);N.layers.caxis.attr("transform",St),N.layers.cgrid.attr("transform",St),N.drawAxes(!0),N.layers.aline.select("path").attr("d",xt.showline?"M"+H+","+(Y+et)+"l"+at/2+",-"+et:"M0,0").call(d.stroke,xt.linecolor||"#000").style("stroke-width",(xt.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",Ct.showline?"M"+H+","+(Y+et)+"h"+at:"M0,0").call(d.stroke,Ct.linecolor||"#000").style("stroke-width",(Ct.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",gt.showline?"M"+(H+at/2)+","+Y+"l"+at/2+","+et:"M0,0").call(d.stroke,gt.linecolor||"#000").style("stroke-width",(gt.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),r.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},L.drawAxes=function(R){var B=this,N=B.graphDiv,G=B.id.substr(7)+"title",X=B.layers,J=B.aaxis,it=B.baxis,nt=B.caxis;if(B.drawAx(J),B.drawAx(it),B.drawAx(nt),R){var q=Math.max(J.showticklabels?J.tickfont.size/2:0,(nt.showticklabels?nt.tickfont.size*.75:0)+(nt.ticks==="outside"?nt.ticklen*.87:0)),Z=(it.showticklabels?it.tickfont.size:0)+(it.ticks==="outside"?it.ticklen:0)+3;X["a-title"]=a.draw(N,"a"+G,{propContainer:J,propName:B.id+".aaxis.title",placeholder:v(N,"Click to enter Component A title"),attributes:{x:B.x0+B.w/2,y:B.y0-J.title.font.size/3-q,"text-anchor":"middle"}}),X["b-title"]=a.draw(N,"b"+G,{propContainer:it,propName:B.id+".baxis.title",placeholder:v(N,"Click to enter Component B title"),attributes:{x:B.x0-Z,y:B.y0+B.h+it.title.font.size*.83+Z,"text-anchor":"middle"}}),X["c-title"]=a.draw(N,"c"+G,{propContainer:nt,propName:B.id+".caxis.title",placeholder:v(N,"Click to enter Component C title"),attributes:{x:B.x0+B.w+Z,y:B.y0+B.h+nt.title.font.size*.83+Z,"text-anchor":"middle"}})}},L.drawAx=function(R){var B=this,N=B.graphDiv,G=R._name,X=G.charAt(0),J=R._id,it=B.layers[G],nt=30,q=X+"tickLayout",Z=m(R);B[q]!==Z&&(it.selectAll("."+J+"tick").remove(),B[q]=Z),R.setScale();var $=s.calcTicks(R),V=s.clipEnds(R,$),rt=s.makeTransTickFn(R),ot=s.getTickSigns(R)[2],H=C.deg2rad(nt),Y=ot*(R.linewidth||1)/2,at=ot*R.ticklen,et=B.w,ct=B.h,ft=X==="b"?"M0,"+Y+"l"+Math.sin(H)*at+","+Math.cos(H)*at:"M"+Y+",0l"+Math.cos(H)*at+","+-Math.sin(H)*at,yt={a:"M0,0l"+ct+",-"+et/2,b:"M0,0l-"+et/2+",-"+ct,c:"M0,0l-"+ct+","+et/2}[X];s.drawTicks(N,R,{vals:R.ticks==="inside"?V:$,layer:it,path:ft,transFn:rt,crisp:!1}),s.drawGrid(N,R,{vals:V,layer:B.layers[X+"grid"],path:yt,transFn:rt,crisp:!1}),s.drawLabels(N,R,{vals:$,layer:it,transFn:rt,labelFns:s.makeLabelFns(R,0,nt)})};function m(R){return R.ticks+String(R.ticklen)+String(R.showticklabels)}var S=y.MINZOOM/2+.87,w="m-0.87,.5h"+S+"v3h-"+(S+5.2)+"l"+(S/2+2.6)+",-"+(S*.87+4.5)+"l2.6,1.5l-"+S/2+","+S*.87+"Z",I="m0.87,.5h-"+S+"v3h"+(S+5.2)+"l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-2.6,1.5l"+S/2+","+S*.87+"Z",O="m0,1l"+S/2+","+S*.87+"l2.6,-1.5l-"+(S/2+2.6)+",-"+(S*.87+4.5)+"l-"+(S/2+2.6)+","+(S*.87+4.5)+"l2.6,1.5l"+S/2+",-"+S*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",P=!0;L.clearOutline=function(){k(this.dragOptions),x(this.dragOptions.gd)},L.initInteractions=function(){var R=this,B=R.layers.plotbg.select("path").node(),N=R.graphDiv,G=N._fullLayout._zoomlayer,X,J;this.dragOptions={element:B,gd:N,plotinfo:{id:R.id,domain:N._fullLayout[R.id].domain,xaxis:R.xaxis,yaxis:R.yaxis},subplot:R.id,prepFn:function(Ot,It,St){R.dragOptions.xaxes=[R.xaxis],R.dragOptions.yaxes=[R.yaxis],X=N._fullLayout._invScaleX,J=N._fullLayout._invScaleY;var Bt=R.dragOptions.dragmode=N._fullLayout.dragmode;h(Bt)?R.dragOptions.minDrag=1:R.dragOptions.minDrag=void 0,Bt==="zoom"?(R.dragOptions.moveFn=Ct,R.dragOptions.clickFn=et,R.dragOptions.doneFn=gt,ct(Ot,It,St)):Bt==="pan"?(R.dragOptions.moveFn=vt,R.dragOptions.clickFn=et,R.dragOptions.doneFn=At,mt(),R.clearOutline(N)):(_(Bt)||h(Bt))&&c(Ot,It,St,R.dragOptions,Bt)}};var it,nt,q,Z,$,V,rt,ot,H,Y;function at(Ot){var It={};return It[R.id+".aaxis.min"]=Ot.a,It[R.id+".baxis.min"]=Ot.b,It[R.id+".caxis.min"]=Ot.c,It}function et(Ot,It){var St=N._fullLayout.clickmode;F(N),Ot===2&&(N.emit("plotly_doubleclick",null),i.call("_guiRelayout",N,at({a:0,b:0,c:0}))),St.indexOf("select")>-1&&Ot===1&&f(It,N,[R.xaxis],[R.yaxis],R.id,R.dragOptions),St.indexOf("event")>-1&&p.click(N,It,R.id)}function ct(Ot,It,St){var Bt=B.getBoundingClientRect();it=It-Bt.left,nt=St-Bt.top,N._fullLayout._calcInverseTransform(N);var re=N._fullLayout._invTransform,Yt=C.apply3DTransform(re)(it,nt);it=Yt[0],nt=Yt[1],q={a:R.aaxis.range[0],b:R.baxis.range[1],c:R.caxis.range[1]},$=q,Z=R.aaxis.range[1]-q.a,V=E(R.graphDiv._fullLayout[R.id].bgcolor).getLuminance(),rt="M0,"+R.h+"L"+R.w/2+", 0L"+R.w+","+R.h+"Z",ot=!1,H=G.append("path").attr("class","zoombox").attr("transform",T(R.x0,R.y0)).style({fill:V>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",rt),Y=G.append("path").attr("class","zoombox-corners").attr("transform",T(R.x0,R.y0)).style({fill:d.background,stroke:d.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),R.clearOutline(N)}function ft(Ot,It){return 1-It/R.h}function yt(Ot,It){return 1-(Ot+(R.h-It)/Math.sqrt(3))/R.w}function xt(Ot,It){return(Ot-(R.h-It)/Math.sqrt(3))/R.w}function Ct(Ot,It){var St=it+Ot*X,Bt=nt+It*J,re=Math.max(0,Math.min(1,ft(it,nt),ft(St,Bt))),Yt=Math.max(0,Math.min(1,yt(it,nt),yt(St,Bt))),he=Math.max(0,Math.min(1,xt(it,nt),xt(St,Bt))),Zt=(re/2+he)*R.w,ae=(1-re/2-Yt)*R.w,oe=(Zt+ae)/2,ce=ae-Zt,ue=(1-re)*R.h,ye=ue-ce/u;ce<y.MINZOOM?($=q,H.attr("d",rt),Y.attr("d","M0,0Z")):($={a:q.a+re*Z,b:q.b+Yt*Z,c:q.c+he*Z},H.attr("d",rt+"M"+Zt+","+ue+"H"+ae+"L"+oe+","+ye+"L"+Zt+","+ue+"Z"),Y.attr("d","M"+it+","+nt+D+"M"+Zt+","+ue+w+"M"+ae+","+ue+I+"M"+oe+","+ye+O)),ot||(H.transition().style("fill",V>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Y.transition().style("opacity",1).duration(200),ot=!0),N.emit("plotly_relayouting",at($))}function gt(){F(N),$!==q&&(i.call("_guiRelayout",N,at($)),P&&N.data&&N._context.showTips&&(C.notifier(v(N,"Double-click to zoom back out"),"long"),P=!1))}function mt(){q={a:R.aaxis.range[0],b:R.baxis.range[1],c:R.caxis.range[1]},$=q}function vt(Ot,It){var St=Ot/R.xaxis._m,Bt=It/R.yaxis._m;$={a:q.a-Bt,b:q.b+(St+Bt)/2,c:q.c-(St-Bt)/2};var re=[$.a,$.b,$.c].sort(C.sorterAsc),Yt={a:re.indexOf($.a),b:re.indexOf($.b),c:re.indexOf($.c)};re[0]<0&&(re[1]+re[0]/2<0?(re[2]+=re[0]+re[1],re[0]=re[1]=0):(re[2]+=re[0]/2,re[1]+=re[0]/2,re[0]=0),$={a:re[Yt.a],b:re[Yt.b],c:re[Yt.c]},It=(q.a-$.a)*R.yaxis._m,Ot=(q.c-$.c-q.b+$.b)*R.xaxis._m);var he=T(R.x0+Ot,R.y0+It);R.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",he);var Zt=T(-Ot,-It);R.clipDefRelative.select("path").attr("transform",Zt),R.aaxis.range=[$.a,R.sum-$.b-$.c],R.baxis.range=[R.sum-$.a-$.c,$.b],R.caxis.range=[R.sum-$.a-$.b,$.c],R.drawAxes(!1),R._hasClipOnAxisFalse&&R.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,R),N.emit("plotly_relayouting",at($))}function At(){i.call("_guiRelayout",N,at($))}B.onmousemove=function(Ot){p.hover(N,Ot,R.id),N._fullLayout._lasthover=B,N._fullLayout._hoversubplot=R.id},B.onmouseout=function(Ot){N._dragging||o.unhover(N,Ot)},o.init(this.dragOptions)};function F(R){M.select(R).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},24040:function(Q,U,t){var M=t(24248),E=t(16628),i=t(52416),C=t(63620),T=t(52200).addStyleRule,v=t(92880),d=t(45464),r=t(64859),e=v.extendFlat,l=v.extendDeepAll;U.modules={},U.allCategories={},U.allTypes=[],U.subplotsRegistry={},U.transformsRegistry={},U.componentsRegistry={},U.layoutArrayContainers=[],U.layoutArrayRegexes=[],U.traceLayoutAttributes={},U.localeRegistry={},U.apiMethodRegistry={},U.collectableSubplotTypes=null,U.register=function(x){if(U.collectableSubplotTypes=null,x)x&&!Array.isArray(x)&&(x=[x]);else throw new Error("No argument passed to Plotly.register.");for(var k=0;k<x.length;k++){var y=x[k];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":n(y);break;case"transform":p(y);break;case"component":o(y);break;case"locale":b(y);break;case"apiMethod":var A=y.name;U.apiMethodRegistry[A]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},U.getModule=function(x){var k=U.modules[f(x)];return k?k._module:!1},U.traceIs=function(x,k){if(x=f(x),x==="various")return!1;var y=U.modules[x];return y||(x&&M.log("Unrecognized trace type "+x+"."),y=U.modules[d.type.dflt]),!!y.categories[k]},U.getTransformIndices=function(x,k){for(var y=[],A=x.transforms||[],L=0;L<A.length;L++)A[L].type===k&&y.push(L);return y},U.hasTransform=function(x,k){for(var y=x.transforms||[],A=0;A<y.length;A++)if(y[A].type===k)return!0;return!1},U.getComponentMethod=function(x,k){var y=U.componentsRegistry[x];return y&&y[k]||E},U.call=function(){var x=arguments[0],k=[].slice.call(arguments,1);return U.apiMethodRegistry[x].apply(null,k)};function n(x){var k=x.name,y=x.categories,A=x.meta;if(U.modules[k]){M.log("Type "+k+" already registered");return}U.subplotsRegistry[x.basePlotModule.name]||s(x.basePlotModule);for(var L={},u=0;u<y.length;u++)L[y[u]]=!0,U.allCategories[y[u]]=!0;U.modules[k]={_module:x,categories:L},A&&Object.keys(A).length&&(U.modules[k].meta=A),U.allTypes.push(k);for(var m in U.componentsRegistry)_(m,k);x.layoutAttributes&&e(U.traceLayoutAttributes,x.layoutAttributes);var S=x.basePlotModule,w=S.name;if(w==="mapbox"){var I=S.constants.styleRules;for(var O in I)T(".js-plotly-plot .plotly .mapboxgl-"+O,I[O])}(w==="geo"||w==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function s(x){var k=x.name;if(U.subplotsRegistry[k]){M.log("Plot type "+k+" already registered.");return}h(x),U.subplotsRegistry[k]=x;for(var y in U.componentsRegistry)c(y,x.name)}function o(x){if(typeof x.name!="string")throw new Error("Component module *name* must be a string.");var k=x.name;U.componentsRegistry[k]=x,x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&i(U.layoutArrayContainers,k),h(x));for(var y in U.modules)_(k,y);for(var A in U.subplotsRegistry)c(k,A);for(var L in U.transformsRegistry)a(k,L);x.schema&&x.schema.layout&&l(r,x.schema.layout)}function p(x){if(typeof x.name!="string")throw new Error("Transform module *name* must be a string.");var k="Transform module "+x.name,y=typeof x.transform=="function",A=typeof x.calcTransform=="function";if(!y&&!A)throw new Error(k+" is missing a *transform* or *calcTransform* method.");y&&A&&M.log([k+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),C(x.attributes)||M.log(k+" registered without an *attributes* object."),typeof x.supplyDefaults!="function"&&M.log(k+" registered without a *supplyDefaults* method."),U.transformsRegistry[x.name]=x;for(var L in U.componentsRegistry)a(L,x.name)}function b(x){var k=x.name,y=k.split("-")[0],A=x.dictionary,L=x.format,u=A&&Object.keys(A).length,m=L&&Object.keys(L).length,S=U.localeRegistry,w=S[k];if(w||(S[k]=w={}),y!==k){var I=S[y];I||(S[y]=I={}),u&&I.dictionary===w.dictionary&&(I.dictionary=A),m&&I.format===w.format&&(I.format=L)}u&&(w.dictionary=A),m&&(w.format=L)}function h(x){if(x.layoutAttributes){var k=x.layoutAttributes._arrayAttrRegexps;if(k)for(var y=0;y<k.length;y++)i(U.layoutArrayRegexes,k[y])}}function _(x,k){var y=U.componentsRegistry[x].schema;if(!(!y||!y.traces)){var A=y.traces[k];A&&l(U.modules[k]._module.attributes,A)}}function a(x,k){var y=U.componentsRegistry[x].schema;if(!(!y||!y.transforms)){var A=y.transforms[k];A&&l(U.transformsRegistry[k].attributes,A)}}function c(x,k){var y=U.componentsRegistry[x].schema;if(!(!y||!y.subplots)){var A=U.subplotsRegistry[k],L=A.layoutAttributes,u=A.attr==="subplot"?A.name:A.attr;Array.isArray(u)&&(u=u[0]);var m=y.subplots[u];L&&m&&l(L,m)}}function f(x){return typeof x=="object"&&(x=x.type),x}},91536:function(Q,U,t){var M=t(24040),E=t(3400),i=E.extendFlat,C=E.extendDeep;function T(d){var r;switch(d){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function v(d){var r=["xaxis","yaxis","zaxis"];return r.indexOf(d.slice(0,5))>-1}Q.exports=function(d,r){var e,l=d.data,n=d.layout,s=C([],l),o=C({},n,T(r.tileClass)),p=d._context||{};if(r.width&&(o.width=r.width),r.height&&(o.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){o.annotations=[];var b=Object.keys(o);for(e=0;e<b.length;e++)v(b[e])&&(o[b[e]].title={text:""});for(e=0;e<s.length;e++){var h=s[e];h.showscale=!1,h.marker&&(h.marker.showscale=!1),M.traceIs(h,"pie-like")&&(h.textposition="none")}}if(Array.isArray(r.annotations))for(e=0;e<r.annotations.length;e++)o.annotations.push(r.annotations[e]);var _=Object.keys(o).filter(function(k){return k.match(/^scene\d*$/)});if(_.length){var a={};for(r.tileClass==="thumbnail"&&(a={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),e=0;e<_.length;e++){var c=o[_[e]];c.xaxis||(c.xaxis={}),c.yaxis||(c.yaxis={}),c.zaxis||(c.zaxis={}),i(c.xaxis,a),i(c.yaxis,a),i(c.zaxis,a),c._scene=null}}var f=document.createElement("div");r.tileClass&&(f.className=r.tileClass);var x={gd:f,td:f,layout:o,data:s,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return r.setBackground!=="transparent"&&(x.config.setBackground=r.setBackground||"opaque"),x.gd.defaultLayout=T(r.tileClass),x}},39792:function(Q,U,t){var M=t(3400),E=t(67024),i=t(48616),C=t(81792);function T(v,d){var r;return M.isPlainObject(v)||(r=M.getGraphDiv(v)),d=d||{},d.format=d.format||"png",d.width=d.width||null,d.height=d.height||null,d.imageDataOnly=!0,new Promise(function(e,l){r&&r._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),M.isIE()&&d.format!=="svg"&&l(new Error(C.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var n=E(v,d),s=d.filename||v.fn||"newplot";s+="."+d.format.replace("-","."),n.then(function(o){return r&&(r._snapshotInProgress=!1),i(o,s,d.format)}).then(function(o){e(o)}).catch(function(o){r&&(r._snapshotInProgress=!1),l(o)})})}Q.exports=T},48616:function(Q,U,t){var M=t(3400),E=t(81792);function i(C,T,v){var d=document.createElement("a"),r="download"in d,e=new Promise(function(l,n){var s,o;if(M.isIE())return s=E.createBlob(C,"svg"),window.navigator.msSaveBlob(s,T),s=null,l(T);if(r)return s=E.createBlob(C,v),o=E.createObjectURL(s),d.href=o,d.download=T,document.body.appendChild(d),d.click(),document.body.removeChild(d),E.revokeObjectURL(o),s=null,l(T);if(M.isSafari()){var p=v==="svg"?",":";base64,";return E.octetStream(p+encodeURIComponent(C)),l(T)}n(new Error("download error"))});return e}Q.exports=i},81792:function(Q,U,t){var M=t(24040);U.getDelay=function(C){return C._has&&(C._has("gl3d")||C._has("gl2d")||C._has("mapbox"))?500:0},U.getRedrawFunc=function(C){return function(){M.getComponentMethod("colorbar","draw")(C)}},U.encodeSVG=function(C){return"data:image/svg+xml,"+encodeURIComponent(C)},U.encodeJSON=function(C){return"data:application/json,"+encodeURIComponent(C)};var E=window.URL||window.webkitURL;U.createObjectURL=function(C){return E.createObjectURL(C)},U.revokeObjectURL=function(C){return E.revokeObjectURL(C)},U.createBlob=function(C,T){if(T==="svg")return new window.Blob([C],{type:"image/svg+xml;charset=utf-8"});if(T==="full-json")return new window.Blob([C],{type:"application/json;charset=utf-8"});var v=i(window.atob(C));return new window.Blob([v],{type:"image/"+T})},U.octetStream=function(C){document.location.href="data:application/octet-stream"+C};function i(C){for(var T=C.length,v=new ArrayBuffer(T),d=new Uint8Array(v),r=0;r<T;r++)d[r]=C.charCodeAt(r);return v}U.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,U.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(Q,U,t){var M=t(81792),E={getDelay:M.getDelay,getRedrawFunc:M.getRedrawFunc,clone:t(91536),toSVG:t(37164),svgToImg:t(63268),toImage:t(61808),downloadImage:t(39792)};Q.exports=E},63268:function(Q,U,t){var M=t(3400),E=t(61252).EventEmitter,i=t(81792);function C(T){var v=T.emitter||new E,d=new Promise(function(r,e){var l=window.Image,n=T.svg,s=T.format||"png";if(M.isIE()&&s!=="svg"){var o=new Error(i.MSG_IE_BAD_FORMAT);return e(o),T.promise?d:v.emit("error",o)}var p=T.canvas,b=T.scale||1,h=T.width||300,_=T.height||150,a=b*h,c=b*_,f=p.getContext("2d",{willReadFrequently:!0}),x=new l,k,y;s==="svg"||M.isSafari()?y=i.encodeSVG(n):(k=i.createBlob(n,"svg"),y=i.createObjectURL(k)),p.width=a,p.height=c,x.onload=function(){var A;switch(k=null,i.revokeObjectURL(y),s!=="svg"&&f.drawImage(x,0,0,a,c),s){case"jpeg":A=p.toDataURL("image/jpeg");break;case"png":A=p.toDataURL("image/png");break;case"webp":A=p.toDataURL("image/webp");break;case"svg":A=y;break;default:var L="Image format is not jpeg, png, svg or webp.";if(e(new Error(L)),!T.promise)return v.emit("error",L)}r(A),T.promise||v.emit("success",A)},x.onerror=function(A){if(k=null,i.revokeObjectURL(y),e(A),!T.promise)return v.emit("error",A)},x.src=y});return T.promise?d:v}Q.exports=C},61808:function(Q,U,t){var M=t(61252).EventEmitter,E=t(24040),i=t(3400),C=t(81792),T=t(91536),v=t(37164),d=t(63268);function r(e,l){var n=new M,s=T(e,{format:"png"}),o=s.gd;o.style.position="absolute",o.style.left="-5000px",document.body.appendChild(o);function p(){var h=C.getDelay(o._fullLayout);setTimeout(function(){var _=v(o),a=document.createElement("canvas");a.id=i.randstr(),n=d({format:l.format,width:o._fullLayout.width,height:o._fullLayout.height,canvas:a,emitter:n,svg:_}),n.clean=function(){o&&document.body.removeChild(o)}},h)}var b=C.getRedrawFunc(o);return E.call("_doPlot",o,s.data,s.layout,s.config).then(b).then(p).catch(function(h){n.emit("error",h)}),n}Q.exports=r},37164:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(76308),T=t(9616),v=/"/g,d="TOBESTRIPPED",r=new RegExp('("'+d+")|("+d+'")',"g");function e(n){var s=M.select("body").append("div").style({display:"none"}).html(""),o=n.replace(/(&[^;]*;)/gi,function(p){return p==="&lt;"?"&#60;":p==="&rt;"?"&#62;":p.indexOf("<")!==-1||p.indexOf(">")!==-1?"":s.html(p).text()});return s.remove(),o}function l(n){return n.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}Q.exports=function(n,s,o){var p=n._fullLayout,b=p._paper,h=p._toppaper,_=p.width,a=p.height,c;b.insert("rect",":first-child").call(i.setRect,0,0,_,a).call(C.fill,p.paper_bgcolor);var f=p._basePlotModules||[];for(c=0;c<f.length;c++){var x=f[c];x.toSVG&&x.toSVG(n)}if(h){var k=h.node().childNodes,y=Array.prototype.slice.call(k);for(c=0;c<y.length;c++){var A=y[c];A.childNodes.length&&b.node().appendChild(A)}}p._draggers&&p._draggers.remove(),b.node().style.background="",b.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var u=M.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){u.remove();return}else u.style({visibility:null,display:null});var m=this.style.fontFamily;m&&m.indexOf('"')!==-1&&u.style("font-family",m.replace(v,d))}),b.selectAll(".gradient_filled,.pattern_filled").each(function(){var u=M.select(this),m=this.style.fill;m&&m.indexOf("url(")!==-1&&u.style("fill",m.replace(v,d));var S=this.style.stroke;S&&S.indexOf("url(")!==-1&&u.style("stroke",S.replace(v,d))}),(s==="pdf"||s==="eps")&&b.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),b.node().setAttributeNS(T.xmlns,"xmlns",T.svg),b.node().setAttributeNS(T.xmlns,"xmlns:xlink",T.xlink),s==="svg"&&o&&(b.attr("width",o*_),b.attr("height",o*a),b.attr("viewBox","0 0 "+_+" "+a));var L=new window.XMLSerializer().serializeToString(b.node());return L=e(L),L=l(L),L=L.replace(r,"'"),E.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},84664:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){for(var C=0;C<E.length;C++)E[C].i=C;M.mergeArray(i.text,E,"tx"),M.mergeArray(i.hovertext,E,"htx");var T=i.marker;if(T){M.mergeArray(T.opacity,E,"mo",!0),M.mergeArray(T.color,E,"mc");var v=T.line;v&&(M.mergeArray(v.color,E,"mlc"),M.mergeArrayCastPositive(v.width,E,"mlw"))}}},20832:function(Q,U,t){var M=t(52904),E=t(29736).axisHoverFormat,i=t(21776).Ks,C=t(21776).Gw,T=t(49084),v=t(25376),d=t(78048),r=t(98192).c,e=t(92880).extendFlat,l=v({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=M.marker,s=n.line,o=e({},s.width,{dflt:0}),p=e({width:o,editType:"calc"},T("marker.line")),b=e({line:p,editType:"calc"},T("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r,cornerradius:{valType:"any",editType:"calc"}});Q.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),text:M.text,texttemplate:C({editType:"plot"},{keys:d.eventDataKeys}),hovertext:M.hovertext,hovertemplate:i({},{keys:d.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:e({},l,{}),insidetextfont:e({},l,{}),outsidetextfont:e({},l,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:e({},M.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:b,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:{opacity:M.selected.marker.opacity,color:M.selected.marker.color,editType:"style"},textfont:M.selected.textfont,editType:"style"},unselected:{marker:{opacity:M.unselected.marker.opacity,color:M.unselected.marker.color,editType:"style"},textfont:M.unselected.textfont,editType:"style"},zorder:M.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(Q,U,t){var M=t(54460),E=t(1220),i=t(94288).hasColorscale,C=t(47128),T=t(84664),v=t(4500);Q.exports=function(d,r){var e=M.getFromId(d,r.xaxis||"x"),l=M.getFromId(d,r.yaxis||"y"),n,s,o,p,b,h,_={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(n=e.makeCalcdata(r,"x",_),o=l.makeCalcdata(r,"y"),p=E(r,l,"y",o),b=!!r.yperiodalignment,h="y"):(n=l.makeCalcdata(r,"y",_),o=e.makeCalcdata(r,"x"),p=E(r,e,"x",o),b=!!r.xperiodalignment,h="x"),s=p.vals;for(var a=Math.min(s.length,n.length),c=new Array(a),f=0;f<a;f++)c[f]={p:s[f],s:n[f]},b&&(c[f].orig_p=o[f],c[f][h+"End"]=p.ends[f],c[f][h+"Start"]=p.starts[f]),r.ids&&(c[f].id=String(r.ids[f]));return i(r,"marker")&&C(d,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),i(r,"marker.line")&&C(d,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(c,r),v(c,r),c}},78048:function(Q){Q.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(Q,U,t){var M=t(38248),E=t(3400).isArrayOrTypedArray,i=t(39032).BADNUM,C=t(24040),T=t(54460),v=t(71888).getAxisGroup,d=t(72592);function r(w,I){for(var O=I.xaxis,D=I.yaxis,P=w._fullLayout,F=w._fullData,R=w.calcdata,B=[],N=[],G=0;G<F.length;G++){var X=F[G];if(X.visible===!0&&C.traceIs(X,"bar")&&X.xaxis===O._id&&X.yaxis===D._id&&(X.orientation==="h"?B.push(R[G]):N.push(R[G]),X._computePh))for(var J=w.calcdata[G],it=0;it<J.length;it++)typeof J[it].ph0=="function"&&(J[it].ph0=J[it].ph0()),typeof J[it].ph1=="function"&&(J[it].ph1=J[it].ph1())}var nt={xCat:O.type==="category"||O.type==="multicategory",yCat:D.type==="category"||D.type==="multicategory",mode:P.barmode,norm:P.barnorm,gap:P.bargap,groupgap:P.bargroupgap};e(w,O,D,N,nt),e(w,D,O,B,nt)}function e(w,I,O,D,P){if(D.length){var F,R,B,N,G;switch(s(O,D),P.mode){case"overlay":o(I,O,D,P);break;case"group":for(F=[],R=[],B=0;B<D.length;B++)N=D[B],G=N[0].trace,G.offset===void 0?R.push(N):F.push(N);R.length&&p(w,I,O,R,P),F.length&&o(I,O,F,P);break;case"stack":case"relative":for(F=[],R=[],B=0;B<D.length;B++)N=D[B],G=N[0].trace,G.base===void 0?R.push(N):F.push(N);n(R),R.length&&b(w,I,O,R,P),F.length&&o(I,O,F,P);break}l(D),m(D,I)}}function l(w){var I,O,D,P,F,R,B;for(I=0;I<w.length;I++)O=w[I],D=O[0].trace,P=O[0].t,P.cornerradiusvalue===void 0&&(F=D.marker?D.marker.cornerradius:void 0,F!==void 0&&(R=M(F)?+F:+F.slice(0,-1),B=M(F)?"px":"%",P.cornerradiusvalue=R,P.cornerradiusform=B))}function n(w){if(!(w.length<2)){var I,O,D,P,F,R,B;for(I=0;I<w.length&&(O=w[I],D=O[0].trace,F=D.marker?D.marker.cornerradius:void 0,F===void 0);I++);if(F!==void 0)for(R=M(F)?+F:+F.slice(0,-1),B=M(F)?"px":"%",I=0;I<w.length;I++)O=w[I],P=O[0].t,P.cornerradiusvalue=R,P.cornerradiusform=B}}function s(w,I){var O,D;for(O=0;O<I.length;O++){var P=I[O],F=P[0].trace,R=F.type==="funnel"?F._base:F.base,B,N=F.orientation==="h"?F.xcalendar:F.ycalendar,G=w.type==="category"||w.type==="multicategory"?function(){return null}:w.d2c;if(E(R)){for(D=0;D<Math.min(R.length,P.length);D++)B=G(R[D],0,N),M(B)?(P[D].b=+B,P[D].hasB=1):P[D].b=0;for(;D<P.length;D++)P[D].b=0}else{B=G(R,0,N);var X=M(B);for(B=X?B:0,D=0;D<P.length;D++)P[D].b=B,X&&(P[D].hasB=1)}}}function o(w,I,O,D){for(var P=0;P<O.length;P++){var F=O[P],R=new d([F],{posAxis:w,sepNegVal:!1,overlapNoMerge:!D.norm});h(w,R,D),D.norm?(y(R),L(I,R,D)):x(I,R)}}function p(w,I,O,D,P){var F=new d(D,{posAxis:I,sepNegVal:!1,overlapNoMerge:!P.norm});_(w,I,F,P),A(F,I),P.norm?(y(F),L(O,F,P)):x(O,F)}function b(w,I,O,D,P){var F=new d(D,{posAxis:I,sepNegVal:P.mode==="relative",overlapNoMerge:!(P.norm||P.mode==="stack"||P.mode==="relative")});h(I,F,P),k(O,F,P);for(var R=0;R<D.length;R++)for(var B=D[R],N=0;N<B.length;N++){var G=B[N];if(G.s!==i){var X=G.b+G.s===F.get(G.p,G.s);X&&(G._outmost=!0)}}P.norm&&L(O,F,P)}function h(w,I,O){for(var D=I.minDiff,P=I.traces,F=D*(1-O.gap),R=F,B=R*(1-(O.groupgap||0)),N=-B/2,G=0;G<P.length;G++){var X=P[G],J=X[0].t;J.barwidth=B,J.poffset=N,J.bargroupwidth=F,J.bardelta=D}I.binWidth=P[0][0].t.barwidth/100,a(I),c(w,I),f(w,I)}function _(w,I,O,D){for(var P=w._fullLayout,F=O.positions,R=O.distinctPositions,B=O.minDiff,N=O.traces,G=N.length,X=F.length!==R.length,J=B*(1-D.gap),it=v(P,I._id)+N[0][0].trace.orientation,nt=P._alignmentOpts[it]||{},q=0;q<G;q++){var Z=N[q],$=Z[0].trace,V=nt[$.alignmentgroup]||{},rt=Object.keys(V.offsetGroups||{}).length,ot;rt?ot=J/rt:ot=X?J/G:J;var H=ot*(1-(D.groupgap||0)),Y;rt?Y=((2*$._offsetIndex+1-rt)*ot-H)/2:Y=X?((2*q+1-G)*ot-H)/2:-H/2;var at=Z[0].t;at.barwidth=H,at.poffset=Y,at.bargroupwidth=J,at.bardelta=B}O.binWidth=N[0][0].t.barwidth/100,a(O),c(I,O),f(I,O,X)}function a(w){var I=w.traces,O,D;for(O=0;O<I.length;O++){var P=I[O],F=P[0],R=F.trace,B=F.t,N=R._offset||R.offset,G=B.poffset,X;if(E(N)){for(X=Array.prototype.slice.call(N,0,P.length),D=0;D<X.length;D++)M(X[D])||(X[D]=G);for(D=X.length;D<P.length;D++)X.push(G);B.poffset=X}else N!==void 0&&(B.poffset=N);var J=R._width||R.width,it=B.barwidth;if(E(J)){var nt=Array.prototype.slice.call(J,0,P.length);for(D=0;D<nt.length;D++)M(nt[D])||(nt[D]=it);for(D=nt.length;D<P.length;D++)nt.push(it);if(B.barwidth=nt,N===void 0){for(X=[],D=0;D<P.length;D++)X.push(G+(it-nt[D])/2);B.poffset=X}}else J!==void 0&&(B.barwidth=J,N===void 0&&(B.poffset=G+(it-J)/2))}}function c(w,I){for(var O=I.traces,D=S(w),P=0;P<O.length;P++)for(var F=O[P],R=F[0].t,B=R.poffset,N=E(B),G=R.barwidth,X=E(G),J=0;J<F.length;J++){var it=F[J],nt=it.w=X?G[J]:G;it.p===void 0&&(it.p=it[D],it["orig_"+D]=it[D]);var q=(N?B[J]:B)+nt/2;it[D]=it.p+q}}function f(w,I,O){var D=I.traces,P=I.minDiff,F=P/2;T.minDtick(w,I.minDiff,I.distinctPositions[0],O);for(var R=0;R<D.length;R++){var B=D[R],N=B[0],G=N.trace,X=[],J,it,nt,q;for(q=0;q<B.length;q++)J=B[q],it=J.p-F,nt=J.p+F,X.push(it,nt);if(G.width||G.offset){var Z=N.t,$=Z.poffset,V=Z.barwidth,rt=E($),ot=E(V);for(q=0;q<B.length;q++){J=B[q];var H=rt?$[q]:$,Y=ot?V[q]:V;it=J.p+H,nt=it+Y,X.push(it,nt)}}G._extremes[w._id]=T.findExtremes(w,X,{padded:!1})}}function x(w,I){for(var O=I.traces,D=S(w),P=0;P<O.length;P++){for(var F=O[P],R=F[0].trace,B=R.type==="scatter",N=R.orientation==="v",G=[],X=!1,J=0;J<F.length;J++){var it=F[J],nt=B?0:it.b,q=B?N?it.y:it.x:nt+it.s;it[D]=q,G.push(q),it.hasB&&G.push(nt),(!it.hasB||!it.b)&&(X=!0)}R._extremes[w._id]=T.findExtremes(w,G,{tozero:X,padded:!0})}}function k(w,I,O){var D=S(w),P=I.traces,F,R,B,N,G,X;for(N=0;N<P.length;N++)if(F=P[N],R=F[0].trace,R.type==="funnel")for(G=0;G<F.length;G++)X=F[G],X.s!==i&&I.put(X.p,-.5*X.s);for(N=0;N<P.length;N++){F=P[N],R=F[0].trace,B=R.type==="funnel";var J=[];for(G=0;G<F.length;G++)if(X=F[G],X.s!==i){var it;B?it=X.s:it=X.s+X.b;var nt=I.put(X.p,it),q=nt+it;X.b=nt,X[D]=q,O.norm||(J.push(q),X.hasB&&J.push(nt))}O.norm||(R._extremes[w._id]=T.findExtremes(w,J,{tozero:!0,padded:!0}))}}function y(w){for(var I=w.traces,O=0;O<I.length;O++)for(var D=I[O],P=0;P<D.length;P++){var F=D[P];F.s!==i&&w.put(F.p,F.b+F.s)}}function A(w,I){for(var O=w.traces,D=0;D<O.length;D++){var P=O[D],F=P[0].trace;if(F.base===void 0)for(var R=new d([P],{posAxis:I,sepNegVal:!0,overlapNoMerge:!0}),B=0;B<P.length;B++){var N=P[B];if(N.p!==i){var G=R.put(N.p,N.b+N.s);G&&(N.b=G)}}}}function L(w,I,O){var D=I.traces,P=S(w),F=O.norm==="fraction"?1:100,R=F/1e9,B=w.l2c(w.c2l(0)),N=O.mode==="stack"?F:B;function G(Y){return M(w.c2l(Y))&&(Y<B-R||Y>N+R||!M(B))}for(var X=0;X<D.length;X++){for(var J=D[X],it=J[0].trace,nt=[],q=!1,Z=!1,$=0;$<J.length;$++){var V=J[$];if(V.s!==i){var rt=Math.abs(F/I.get(V.p,V.s));V.b*=rt,V.s*=rt;var ot=V.b,H=ot+V.s;V[P]=H,nt.push(H),Z=Z||G(H),V.hasB&&(nt.push(ot),Z=Z||G(ot)),(!V.hasB||!V.b)&&(q=!0)}}it._extremes[w._id]=T.findExtremes(w,nt,{tozero:q,padded:Z})}}function u(w,I,O,D){for(var P=S(D),F=0;F<w.length;F++)for(var R=w[F],B=0;B<R.length;B++){var N=R[B],G=N[P];N._sMin=I[G],N._sMax=O[G]}}function m(w,I){var O=S(I),D={},P,F,R,B=1/0,N=-1/0;for(P=0;P<w.length;P++)for(R=w[P],F=0;F<R.length;F++){var G=R[F].p;M(G)&&(B=Math.min(B,G),N=Math.max(N,G))}var X=1e4/(N-B),J=D.round=function(ct){return String(Math.round(X*(ct-B)))},it={},nt={},q=w.some(function(ct){var ft=ct[0].trace;return"marker"in ft&&ft.marker.cornerradius});for(P=0;P<w.length;P++){R=w[P],R[0].t.extents=D;var Z=R[0].t.poffset,$=E(Z);for(F=0;F<R.length;F++){var V=R[F],rt=V[O]-V.w/2;if(M(rt)){var ot=V[O]+V.w/2,H=J(V.p);D[H]?D[H]=[Math.min(rt,D[H][0]),Math.max(ot,D[H][1])]:D[H]=[rt,ot]}if(V.p0=V.p+($?Z[F]:Z),V.p1=V.p0+V.w,V.s0=V.b,V.s1=V.s0+V.s,q){var Y=Math.min(V.s0,V.s1)||0,at=Math.max(V.s0,V.s1)||0,et=V[O];it[et]=et in it?Math.min(it[et],Y):Y,nt[et]=et in nt?Math.max(nt[et],at):at}}}q&&u(w,it,nt,I)}function S(w){return w._id.charAt(0)}Q.exports={crossTraceCalc:r,setGroupPositions:e}},31508:function(Q,U,t){var M=t(38248),E=t(3400),i=t(76308),C=t(24040),T=t(43980),v=t(31147),d=t(55592),r=t(20011),e=t(20832),l=E.coerceFont;function n(b,h,_,a){function c(A,L){return E.coerce(b,h,e,A,L)}var f=T(b,h,a,c);if(!f){h.visible=!1;return}v(b,h,a,c),c("xhoverformat"),c("yhoverformat"),c("zorder"),c("orientation",h.x&&!h.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");p(b,h,a,c,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),d(b,h,c,_,a);var k=(h.marker.line||{}).color,y=C.getComponentMethod("errorbars","supplyDefaults");y(b,h,k||i.defaultLine,{axis:"y"}),y(b,h,k||i.defaultLine,{axis:"x",inherit:"y"}),E.coerceSelectionMarkerOpacity(h,c)}function s(b,h){var _,a;function c(k,y){return E.coerce(a._input,a,e,k,y)}for(var f=0;f<b.length;f++)if(a=b[f],a.type==="bar"){_=a._input;var x=c("marker.cornerradius",h.barcornerradius);a.marker&&(a.marker.cornerradius=o(x)),h.barmode==="group"&&r(_,a,h,c)}}function o(b){if(M(b)){if(b=+b,b>=0)return b}else if(typeof b=="string"&&(b=b.trim(),b.slice(-1)==="%"&&M(b.slice(0,-1))&&(b=+b.slice(0,-1),b>=0)))return b+"%"}function p(b,h,_,a,c,f){f=f||{};var x=f.moduleHasSelected!==!1,k=f.moduleHasUnselected!==!1,y=f.moduleHasConstrain!==!1,A=f.moduleHasCliponaxis!==!1,L=f.moduleHasTextangle!==!1,u=f.moduleHasInsideanchor!==!1,m=!!f.hasPathbar,S=Array.isArray(c)||c==="auto",w=S||c==="inside",I=S||c==="outside";if(w||I){var O=l(a,"textfont",_.font),D=E.extendFlat({},O),P=b.textfont&&b.textfont.color,F=!P;if(F&&delete D.color,l(a,"insidetextfont",D),m){var R=E.extendFlat({},O);F&&delete R.color,l(a,"pathbar.textfont",R)}I&&l(a,"outsidetextfont",O),x&&a("selected.textfont.color"),k&&a("unselected.textfont.color"),y&&a("constraintext"),A&&a("cliponaxis"),L&&a("textangle"),a("texttemplate")}w&&u&&a("insidetextanchor")}Q.exports={supplyDefaults:n,crossTraceDefaults:s,handleText:p,validateCornerradius:o}},52160:function(Q){Q.exports=function(U,t,M){return U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),M.orientation==="h"?(U.label=U.y,U.value=U.x):(U.label=U.x,U.value=U.y),U}},60444:function(Q,U,t){var M=t(38248),E=t(49760),i=t(3400).isArrayOrTypedArray;U.coerceString=function(C,T,v){if(typeof T=="string"){if(T||!C.noBlank)return T}else if((typeof T=="number"||T===!0)&&!C.strict)return String(T);return v!==void 0?v:C.dflt},U.coerceNumber=function(C,T,v){if(M(T)){T=+T;var d=C.min,r=C.max,e=d!==void 0&&T<d||r!==void 0&&T>r;if(!e)return T}return v!==void 0?v:C.dflt},U.coerceColor=function(C,T,v){return E(T).isValid()?T:v!==void 0?v:C.dflt},U.coerceEnumerated=function(C,T,v){return C.coerceNumber&&(T=+T),C.values.indexOf(T)!==-1?T:v!==void 0?v:C.dflt},U.getValue=function(C,T){var v;return i(C)?T<C.length&&(v=C[T]):v=C,v},U.getLineWidth=function(C,T){var v=0<T.mlw?T.mlw:i(C.marker.line.width)?0:C.marker.line.width;return v}},63400:function(Q,U,t){var M=t(93024),E=t(24040),i=t(76308),C=t(3400).fillText,T=t(60444).getLineWidth,v=t(54460).hoverLabelText,d=t(39032).BADNUM;function r(n,s,o,p,b){var h=e(n,s,o,p,b);if(h){var _=h.cd,a=_[0].trace,c=_[h.index];return h.color=l(a,c),E.getComponentMethod("errorbars","hoverInfo")(c,a,h),[h]}}function e(n,s,o,p,b){var h=n.cd,_=h[0].trace,a=h[0].t,c=p==="closest",f=_.type==="waterfall",x=n.maxHoverDistance,k=n.maxSpikeDistance,y,A,L,u,m,S,w;_.orientation==="h"?(y=o,A=s,L="y",u="x",m=nt,S=X):(y=s,A=o,L="x",u="y",S=nt,m=X);var I=_[L+"period"],O=c||I;function D(ct){return F(ct,-1)}function P(ct){return F(ct,1)}function F(ct,ft){var yt=ct.w;return ct[L]+ft*yt/2}function R(ct){return ct[L+"End"]-ct[L+"Start"]}var B=c?D:I?function(ct){return ct.p-R(ct)/2}:function(ct){return Math.min(D(ct),ct.p-a.bardelta/2)},N=c?P:I?function(ct){return ct.p+R(ct)/2}:function(ct){return Math.max(P(ct),ct.p+a.bardelta/2)};function G(ct,ft,yt){return b.finiteRange&&(yt=0),M.inbox(ct-y,ft-y,yt+Math.min(1,Math.abs(ft-ct)/w)-1)}function X(ct){return G(B(ct),N(ct),x)}function J(ct){return G(D(ct),P(ct),k)}function it(ct){var ft=ct[u];if(f){var yt=Math.abs(ct.rawS)||0;A>0?ft+=yt:A<0&&(ft-=yt)}return ft}function nt(ct){var ft=A,yt=ct.b,xt=it(ct);return M.inbox(yt-ft,xt-ft,x+(xt-ft)/(xt-yt)-1)}function q(ct){var ft=A,yt=ct.b,xt=it(ct);return M.inbox(yt-ft,xt-ft,k+(xt-ft)/(xt-yt)-1)}var Z=n[L+"a"],$=n[u+"a"];w=Math.abs(Z.r2c(Z.range[1])-Z.r2c(Z.range[0]));function V(ct){return(m(ct)+S(ct))/2}var rt=M.getDistanceFunction(p,m,S,V);if(M.getClosest(h,rt,n),n.index!==!1&&h[n.index].p!==d){O||(B=function(ct){return Math.min(D(ct),ct.p-a.bargroupwidth/2)},N=function(ct){return Math.max(P(ct),ct.p+a.bargroupwidth/2)});var ot=n.index,H=h[ot],Y=_.base?H.b+H.s:H.s;n[u+"0"]=n[u+"1"]=$.c2p(H[u],!0),n[u+"LabelVal"]=Y;var at=a.extents[a.extents.round(H.p)];n[L+"0"]=Z.c2p(c?B(H):at[0],!0),n[L+"1"]=Z.c2p(c?N(H):at[1],!0);var et=H.orig_p!==void 0;return n[L+"LabelVal"]=et?H.orig_p:H.p,n.labelLabel=v(Z,n[L+"LabelVal"],_[L+"hoverformat"]),n.valueLabel=v($,n[u+"LabelVal"],_[u+"hoverformat"]),n.baseLabel=v($,H.b,_[u+"hoverformat"]),n.spikeDistance=(q(H)+J(H))/2,n[L+"Spike"]=Z.c2p(H.p,!0),C(H,_,n),n.hovertemplate=_.hovertemplate,n}}function l(n,s){var o=s.mcc||n.marker.color,p=s.mlcc||n.marker.line.color,b=T(n,s);if(i.opacity(o))return o;if(i.opacity(p)&&b)return p}Q.exports={hoverPoints:r,hoverOnBars:e,getTraceColor:l}},51132:function(Q,U,t){Q.exports={attributes:t(20832),layoutAttributes:t(39324),supplyDefaults:t(31508).supplyDefaults,crossTraceDefaults:t(31508).crossTraceDefaults,supplyLayoutDefaults:t(37156),calc:t(71820),crossTraceCalc:t(96376).crossTraceCalc,colorbar:t(5528),arraysToCalcdata:t(84664),plot:t(98184).plot,style:t(60100).style,styleOnSelect:t(60100).styleOnSelect,hoverPoints:t(63400).hoverPoints,eventData:t(52160),selectPoints:t(45784),moduleType:"trace",name:"bar",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(Q){Q.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(Q,U,t){var M=t(24040),E=t(54460),i=t(3400),C=t(39324),T=t(31508).validateCornerradius;Q.exports=function(v,d,r){function e(f,x){return i.coerce(v,d,C,f,x)}for(var l=!1,n=!1,s=!1,o={},p=e("barmode"),b=0;b<r.length;b++){var h=r[b];if(M.traceIs(h,"bar")&&h.visible)l=!0;else continue;if(p==="group"){var _=h.xaxis+h.yaxis;o[_]&&(s=!0),o[_]=!0}if(h.visible&&h.type==="histogram"){var a=E.getFromId({_fullLayout:d},h[h.orientation==="v"?"xaxis":"yaxis"]);a.type!=="category"&&(n=!0)}}if(!l){delete d.barmode;return}p!=="overlay"&&e("barnorm"),e("bargap",n&&!s?0:.2),e("bargroupgap");var c=e("barcornerradius");d.barcornerradius=T(c)}},98184:function(Q,U,t){var M=t(33428),E=t(38248),i=t(3400),C=t(72736),T=t(76308),v=t(43616),d=t(24040),r=t(54460).tickText,e=t(82744),l=e.recordMinTextSize,n=e.clearMinTextSize,s=t(60100),o=t(60444),p=t(78048),b=t(20832),h=b.text,_=b.textposition,a=t(10624).appendArrayPointValue,c=p.TEXTPAD;function f(X){return X.id}function x(X){if(X.ids)return f}function k(X){return(X>0)-(X<0)}function y(X,J){return X<J?1:-1}function A(X,J,it,nt){var q=[],Z=[],$=nt?J:it,V=nt?it:J;return q[0]=$.c2p(X.s0,!0),Z[0]=V.c2p(X.p0,!0),q[1]=$.c2p(X.s1,!0),Z[1]=V.c2p(X.p1,!0),nt?[q,Z]:[Z,q]}function L(X,J,it,nt){if(!J.uniformtext.mode&&u(it)){var q;return nt&&(q=nt()),X.transition().duration(it.duration).ease(it.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()})}else return X}function u(X){return X&&X.duration>0}function m(X,J,it,nt,q,Z){var $=J.xaxis,V=J.yaxis,rt=X._fullLayout,ot=X._context.staticPlot;q||(q={mode:rt.barmode,norm:rt.barmode,gap:rt.bargap,groupgap:rt.bargroupgap},n("bar",rt));var H=i.makeTraceGroups(nt,it,"trace bars").each(function(Y){var at=M.select(this),et=Y[0].trace,ct=Y[0].t,ft=et.type==="waterfall",yt=et.type==="funnel",xt=et.type==="histogram",Ct=et.type==="bar",gt=Ct||yt,mt=0;ft&&et.connector.visible&&et.connector.mode==="between"&&(mt=et.connector.line.width/2);var vt=et.orientation==="h",At=u(q),Ot=i.ensureSingle(at,"g","points"),It=x(et),St=Ot.selectAll("g.point").data(i.identity,It);St.enter().append("g").classed("point",!0),St.exit().remove(),St.each(function(re,Yt){var he=M.select(this),Zt=A(re,$,V,vt),ae=Zt[0][0],oe=Zt[0][1],ce=Zt[1][0],ue=Zt[1][1],ye=(vt?oe-ae:ue-ce)===0;ye&&gt&&o.getLineWidth(et,re)&&(ye=!1),ye||(ye=!E(ae)||!E(oe)||!E(ce)||!E(ue)),re.isBlank=ye,ye&&(vt?oe=ae:ue=ce),mt&&!ye&&(vt?(ae-=y(ae,oe)*mt,oe+=y(ae,oe)*mt):(ce-=y(ce,ue)*mt,ue+=y(ce,ue)*mt));var Tt,Ft;if(et.type==="waterfall"){if(!ye){var $t=et[re.dir].marker;Tt=$t.line.width,Ft=$t.color}}else Tt=o.getLineWidth(et,re),Ft=re.mc||et.marker.color;function Vt(ie){var pe=M.round(Tt/2%1,2);return q.gap===0&&q.groupgap===0?M.round(Math.round(ie)-pe,2):ie}function Nt(ie,pe,ke){return ke&&ie===pe?ie:Math.abs(ie-pe)>=2?Vt(ie):ie>pe?Math.ceil(ie):Math.floor(ie)}var Mt=T.opacity(Ft),Et=Mt<1||Tt>.01?Vt:Nt;X._context.staticPlot||(ae=Et(ae,oe,vt),oe=Et(oe,ae,vt),ce=Et(ce,ue,!vt),ue=Et(ue,ce,!vt));var Dt=vt?$.c2p:V.c2p,dt;re.s0>0?dt=re._sMax:re.s0<0?dt=re._sMin:dt=re.s1>0?re._sMax:re._sMin;function ht(ie,pe){if(!ie)return 0;var ke=Math.abs(vt?ue-ce:oe-ae),Ce=Math.abs(vt?oe-ae:ue-ce),Fe=Et(Math.abs(Dt(dt,!0)-Dt(0,!0))),Re=re.hasB?Math.min(ke/2,Ce/2):Math.min(ke/2,Fe),be;if(pe==="%"){var Ge=Math.min(50,ie);be=ke*(Ge/100)}else be=ie;return Et(Math.max(Math.min(be,Re),0))}var bt=Ct||xt?ht(ct.cornerradiusvalue,ct.cornerradiusform):0,Pt,Gt,te="M"+ae+","+ce+"V"+ue+"H"+oe+"V"+ce+"Z",ne=0;if(bt&&re.s){var je=k(re.s0)===0||k(re.s)===k(re.s0)?re.s1:re.s0;if(ne=Et(re.hasB?0:Math.abs(Dt(dt,!0)-Dt(je,!0))),ne<bt){var Ne=y(ae,oe),ge=y(ce,ue),_e=Ne===-ge?1:0;if(vt)if(re.hasB)Pt="M"+(ae+bt*Ne)+","+ce+"A "+bt+","+bt+" 0 0 "+_e+" "+ae+","+(ce+bt*ge)+"V"+(ue-bt*ge)+"A "+bt+","+bt+" 0 0 "+_e+" "+(ae+bt*Ne)+","+ue+"H"+(oe-bt*Ne)+"A "+bt+","+bt+" 0 0 "+_e+" "+oe+","+(ue-bt*ge)+"V"+(ce+bt*ge)+"A "+bt+","+bt+" 0 0 "+_e+" "+(oe-bt*Ne)+","+ce+"Z";else{Gt=Math.abs(oe-ae)+ne;var De=Gt<bt?bt-Math.sqrt(Gt*(2*bt-Gt)):0,hr=ne>0?Math.sqrt(ne*(2*bt-ne)):0,fe=Ne>0?Math.max:Math.min;Pt="M"+ae+","+ce+"V"+(ue-De*ge)+"H"+fe(oe-(bt-ne)*Ne,ae)+"A "+bt+","+bt+" 0 0 "+_e+" "+oe+","+(ue-bt*ge-hr)+"V"+(ce+bt*ge+hr)+"A "+bt+","+bt+" 0 0 "+_e+" "+fe(oe-(bt-ne)*Ne,ae)+","+(ce+De*ge)+"Z"}else if(re.hasB)Pt="M"+(ae+bt*Ne)+","+ce+"A "+bt+","+bt+" 0 0 "+_e+" "+ae+","+(ce+bt*ge)+"V"+(ue-bt*ge)+"A "+bt+","+bt+" 0 0 "+_e+" "+(ae+bt*Ne)+","+ue+"H"+(oe-bt*Ne)+"A "+bt+","+bt+" 0 0 "+_e+" "+oe+","+(ue-bt*ge)+"V"+(ce+bt*ge)+"A "+bt+","+bt+" 0 0 "+_e+" "+(oe-bt*Ne)+","+ce+"Z";else{Gt=Math.abs(ue-ce)+ne;var Be=Gt<bt?bt-Math.sqrt(Gt*(2*bt-Gt)):0,He=ne>0?Math.sqrt(ne*(2*bt-ne)):0,pr=ge>0?Math.max:Math.min;Pt="M"+(ae+Be*Ne)+","+ce+"V"+pr(ue-(bt-ne)*ge,ce)+"A "+bt+","+bt+" 0 0 "+_e+" "+(ae+bt*Ne-He)+","+ue+"H"+(oe-bt*Ne+He)+"A "+bt+","+bt+" 0 0 "+_e+" "+(oe-Be*Ne)+","+pr(ue-(bt-ne)*ge,ce)+"V"+ce+"Z"}}else Pt=te}else Pt=te;var Ze=L(i.ensureSingle(he,"path"),rt,q,Z);if(Ze.style("vector-effect",ot?"none":"non-scaling-stroke").attr("d",isNaN((oe-ae)*(ue-ce))||ye&&X._context.staticPlot?"M0,0Z":Pt).call(v.setClipUrl,J.layerClipId,X),!rt.uniformtext.mode&&At){var Xt=v.makePointStyleFns(et);v.singlePointStyle(re,Ze,et,Xt,X)}S(X,J,he,Y,Yt,ae,oe,ce,ue,bt,ne,q,Z),J.layerClipId&&v.hideOutsideRangePoint(re,he.select("text"),$,V,et.xcalendar,et.ycalendar)});var Bt=et.cliponaxis===!1;v.setClipUrl(at,Bt?null:J.layerClipId,X)});d.getComponentMethod("errorbars","plot")(X,H,J,q)}function S(X,J,it,nt,q,Z,$,V,rt,ot,H,Y,at){var et=J.xaxis,ct=J.yaxis,ft=X._fullLayout,yt;function xt(Gt,te,ne){var je=i.ensureSingle(Gt,"text").text(te).attr({class:"bartext bartext-"+yt,"text-anchor":"middle","data-notex":1}).call(v.font,ne).call(C.convertToTspans,X);return je}var Ct=nt[0].trace,gt=Ct.orientation==="h",mt=R(ft,nt,q,et,ct);yt=B(Ct,q);var vt=Y.mode==="stack"||Y.mode==="relative",At=nt[q],Ot=!vt||At._outmost,It=At.hasB,St=ot&&ot-H>c;if(!mt||yt==="none"||(At.isBlank||Z===$||V===rt)&&(yt==="auto"||yt==="inside")){it.select("text").remove();return}var Bt=ft.font,re=s.getBarColor(nt[q],Ct),Yt=s.getInsideTextFont(Ct,q,Bt,re),he=s.getOutsideTextFont(Ct,q,Bt),Zt=Ct.insidetextanchor||"end",ae=it.datum();gt?et.type==="log"&&ae.s0<=0&&(et.range[0]<et.range[1]?Z=0:Z=et._length):ct.type==="log"&&ae.s0<=0&&(ct.range[0]<ct.range[1]?V=ct._length:V=0);var oe=Math.abs($-Z),ce=Math.abs(rt-V),ue=oe-2*c,ye=ce-2*c,Tt,Ft,$t,Vt,Nt;if(yt==="outside"&&!Ot&&!At.hasB&&(yt="inside"),yt==="auto")if(Ot){yt="inside",Nt=i.ensureUniformFontSize(X,Yt),Tt=xt(it,mt,Nt),Ft=v.bBox(Tt.node()),$t=Ft.width,Vt=Ft.height;var Mt=$t>0&&Vt>0,Et;St?It?Et=w(ue-2*ot,ye,$t,Vt,gt)||w(ue,ye-2*ot,$t,Vt,gt):gt?Et=w(ue-(ot-H),ye,$t,Vt,gt)||w(ue,ye-2*(ot-H),$t,Vt,gt):Et=w(ue,ye-(ot-H),$t,Vt,gt)||w(ue-2*(ot-H),ye,$t,Vt,gt):Et=w(ue,ye,$t,Vt,gt),Mt&&Et?yt="inside":(yt="outside",Tt.remove(),Tt=null)}else yt="inside";if(!Tt){Nt=i.ensureUniformFontSize(X,yt==="outside"?he:Yt),Tt=xt(it,mt,Nt);var Dt=Tt.attr("transform");if(Tt.attr("transform",""),Ft=v.bBox(Tt.node()),$t=Ft.width,Vt=Ft.height,Tt.attr("transform",Dt),$t<=0||Vt<=0){Tt.remove();return}}var dt=Ct.textangle,ht,bt;yt==="outside"?(bt=Ct.constraintext==="both"||Ct.constraintext==="outside",ht=F(Z,$,V,rt,Ft,{isHorizontal:gt,constrained:bt,angle:dt})):(bt=Ct.constraintext==="both"||Ct.constraintext==="inside",ht=D(Z,$,V,rt,Ft,{isHorizontal:gt,constrained:bt,angle:dt,anchor:Zt,hasB:It,r:ot,overhead:H})),ht.fontSize=Nt.size,l(Ct.type==="histogram"?"bar":Ct.type,ht,ft),At.transform=ht;var Pt=L(Tt,ft,Y,at);i.setTransormAndDisplay(Pt,ht)}function w(X,J,it,nt,q){if(X<0||J<0)return!1;var Z=it<=X&&nt<=J,$=it<=J&&nt<=X,V=q?X>=it*(J/nt):J>=nt*(X/it);return Z||$||V}function I(X){return X==="auto"?0:X}function O(X,J){var it=Math.PI/180*J,nt=Math.abs(Math.sin(it)),q=Math.abs(Math.cos(it));return{x:X.width*q+X.height*nt,y:X.width*nt+X.height*q}}function D(X,J,it,nt,q,Z){var $=!!Z.isHorizontal,V=!!Z.constrained,rt=Z.angle||0,ot=Z.anchor,H=ot==="end",Y=ot==="start",at=Z.leftToRight||0,et=(at+1)/2,ct=1-et,ft=Z.hasB,yt=Z.r,xt=Z.overhead,Ct=q.width,gt=q.height,mt=Math.abs(J-X),vt=Math.abs(nt-it),At=mt>2*c&&vt>2*c?c:0;mt-=2*At,vt-=2*At;var Ot=I(rt);rt==="auto"&&!(Ct<=mt&&gt<=vt)&&(Ct>mt||gt>vt)&&(!(Ct>vt||gt>mt)||Ct<gt!=mt<vt)&&(Ot+=90);var It=O(q,Ot),St,Bt;if(yt&&yt-xt>c){var re=P(X,J,it,nt,It,yt,xt,$,ft);St=re.scale,Bt=re.pad}else St=1,V&&(St=Math.min(1,mt/It.x,vt/It.y)),Bt=0;var Yt=q.left*ct+q.right*et,he=(q.top+q.bottom)/2,Zt=(X+c)*ct+(J-c)*et,ae=(it+nt)/2,oe=0,ce=0;if(Y||H){var ue=($?It.x:It.y)/2;yt&&(H||ft)&&(At+=Bt);var ye=$?y(X,J):y(it,nt);$?Y?(Zt=X+ye*At,oe=-ye*ue):(Zt=J-ye*At,oe=ye*ue):Y?(ae=it+ye*At,ce=-ye*ue):(ae=nt-ye*At,ce=ye*ue)}return{textX:Yt,textY:he,targetX:Zt,targetY:ae,anchorX:oe,anchorY:ce,scale:St,rotate:Ot}}function P(X,J,it,nt,q,Z,$,V,rt){var ot=Math.max(0,Math.abs(J-X)-2*c),H=Math.max(0,Math.abs(nt-it)-2*c),Y=Z-c,at=$?Y-Math.sqrt(Y*Y-(Y-$)*(Y-$)):Y,et=rt?Y*2:V?Y-$:2*at,ct=rt?Y*2:V?2*at:Y-$,ft,yt,xt,Ct,gt;return q.y/q.x>=H/(ot-et)?Ct=H/q.y:q.y/q.x<=(H-ct)/ot?Ct=ot/q.x:!rt&&V?(ft=q.x*q.x+q.y*q.y/4,yt=-2*q.x*(ot-Y)-q.y*(H/2-Y),xt=(ot-Y)*(ot-Y)+(H/2-Y)*(H/2-Y)-Y*Y,Ct=(-yt+Math.sqrt(yt*yt-4*ft*xt))/(2*ft)):rt?(ft=(q.x*q.x+q.y*q.y)/4,yt=-q.x*(ot/2-Y)-q.y*(H/2-Y),xt=(ot/2-Y)*(ot/2-Y)+(H/2-Y)*(H/2-Y)-Y*Y,Ct=(-yt+Math.sqrt(yt*yt-4*ft*xt))/(2*ft)):(ft=q.x*q.x/4+q.y*q.y,yt=-q.x*(ot/2-Y)-2*q.y*(H-Y),xt=(ot/2-Y)*(ot/2-Y)+(H-Y)*(H-Y)-Y*Y,Ct=(-yt+Math.sqrt(yt*yt-4*ft*xt))/(2*ft)),Ct=Math.min(1,Ct),V?gt=Math.max(0,Y-Math.sqrt(Math.max(0,Y*Y-(Y-(H-q.y*Ct)/2)*(Y-(H-q.y*Ct)/2)))-$):gt=Math.max(0,Y-Math.sqrt(Math.max(0,Y*Y-(Y-(ot-q.x*Ct)/2)*(Y-(ot-q.x*Ct)/2)))-$),{scale:Ct,pad:gt}}function F(X,J,it,nt,q,Z){var $=!!Z.isHorizontal,V=!!Z.constrained,rt=Z.angle||0,ot=q.width,H=q.height,Y=Math.abs(J-X),at=Math.abs(nt-it),et;$?et=at>2*c?c:0:et=Y>2*c?c:0;var ct=1;V&&(ct=$?Math.min(1,at/H):Math.min(1,Y/ot));var ft=I(rt),yt=O(q,ft),xt=($?yt.x:yt.y)/2,Ct=(q.left+q.right)/2,gt=(q.top+q.bottom)/2,mt=(X+J)/2,vt=(it+nt)/2,At=0,Ot=0,It=$?y(J,X):y(it,nt);return $?(mt=J-It*et,At=It*xt):(vt=nt+It*et,Ot=-It*xt),{textX:Ct,textY:gt,targetX:mt,targetY:vt,anchorX:At,anchorY:Ot,scale:ct,rotate:ft}}function R(X,J,it,nt,q){var Z=J[0].trace,$=Z.texttemplate,V;return $?V=N(X,J,it,nt,q):Z.textinfo?V=G(J,it,nt,q):V=o.getValue(Z.text,it),o.coerceString(h,V)}function B(X,J){var it=o.getValue(X.textposition,J);return o.coerceEnumerated(_,it)}function N(X,J,it,nt,q){var Z=J[0].trace,$=i.castOption(Z,it,"texttemplate");if(!$)return"";var V=Z.type==="histogram",rt=Z.type==="waterfall",ot=Z.type==="funnel",H=Z.orientation==="h",Y,at,et,ct;H?(Y="y",at=q,et="x",ct=nt):(Y="x",at=nt,et="y",ct=q);function ft(At){return r(at,at.c2l(At),!0).text}function yt(At){return r(ct,ct.c2l(At),!0).text}var xt=J[it],Ct={};Ct.label=xt.p,Ct.labelLabel=Ct[Y+"Label"]=ft(xt.p);var gt=i.castOption(Z,xt.i,"text");(gt===0||gt)&&(Ct.text=gt),Ct.value=xt.s,Ct.valueLabel=Ct[et+"Label"]=yt(xt.s);var mt={};a(mt,Z,xt.i),(V||mt.x===void 0)&&(mt.x=H?Ct.value:Ct.label),(V||mt.y===void 0)&&(mt.y=H?Ct.label:Ct.value),(V||mt.xLabel===void 0)&&(mt.xLabel=H?Ct.valueLabel:Ct.labelLabel),(V||mt.yLabel===void 0)&&(mt.yLabel=H?Ct.labelLabel:Ct.valueLabel),rt&&(Ct.delta=+xt.rawS||xt.s,Ct.deltaLabel=yt(Ct.delta),Ct.final=xt.v,Ct.finalLabel=yt(Ct.final),Ct.initial=Ct.final-Ct.delta,Ct.initialLabel=yt(Ct.initial)),ot&&(Ct.value=xt.s,Ct.valueLabel=yt(Ct.value),Ct.percentInitial=xt.begR,Ct.percentInitialLabel=i.formatPercent(xt.begR),Ct.percentPrevious=xt.difR,Ct.percentPreviousLabel=i.formatPercent(xt.difR),Ct.percentTotal=xt.sumR,Ct.percenTotalLabel=i.formatPercent(xt.sumR));var vt=i.castOption(Z,xt.i,"customdata");return vt&&(Ct.customdata=vt),i.texttemplateString($,Ct,X._d3locale,mt,Ct,Z._meta||{})}function G(X,J,it,nt){var q=X[0].trace,Z=q.orientation==="h",$=q.type==="waterfall",V=q.type==="funnel";function rt(vt){var At=Z?nt:it;return r(At,vt,!0).text}function ot(vt){var At=Z?it:nt;return r(At,+vt,!0).text}var H=q.textinfo,Y=X[J],at=H.split("+"),et=[],ct,ft=function(vt){return at.indexOf(vt)!==-1};if(ft("label")&&et.push(rt(X[J].p)),ft("text")&&(ct=i.castOption(q,Y.i,"text"),(ct===0||ct)&&et.push(ct)),$){var yt=+Y.rawS||Y.s,xt=Y.v,Ct=xt-yt;ft("initial")&&et.push(ot(Ct)),ft("delta")&&et.push(ot(yt)),ft("final")&&et.push(ot(xt))}if(V){ft("value")&&et.push(ot(Y.s));var gt=0;ft("percent initial")&&gt++,ft("percent previous")&&gt++,ft("percent total")&&gt++;var mt=gt>1;ft("percent initial")&&(ct=i.formatPercent(Y.begR),mt&&(ct+=" of initial"),et.push(ct)),ft("percent previous")&&(ct=i.formatPercent(Y.difR),mt&&(ct+=" of previous"),et.push(ct)),ft("percent total")&&(ct=i.formatPercent(Y.sumR),mt&&(ct+=" of total"),et.push(ct))}return et.join("<br>")}Q.exports={plot:m,toMoveInsideBar:D}},45784:function(Q){Q.exports=function(t,M){var E=t.cd,i=t.xaxis,C=t.yaxis,T=E[0].trace,v=T.type==="funnel",d=T.orientation==="h",r=[],e;if(M===!1)for(e=0;e<E.length;e++)E[e].selected=0;else for(e=0;e<E.length;e++){var l=E[e],n="ct"in l?l.ct:U(l,i,C,d,v);M.contains(n,!1,e,t)?(r.push({pointNumber:e,x:i.c2d(l.x),y:C.c2d(l.y)}),l.selected=1):l.selected=0}return r};function U(t,M,E,i,C){var T=M.c2p(i?t.s0:t.p0,!0),v=M.c2p(i?t.s1:t.p1,!0),d=E.c2p(i?t.p0:t.s0,!0),r=E.c2p(i?t.p1:t.s1,!0);return C?[(T+v)/2,(d+r)/2]:i?[v,(d+r)/2]:[(T+v)/2,r]}},72592:function(Q,U,t){Q.exports=E;var M=t(3400).distinctVals;function E(i,C){this.traces=i,this.sepNegVal=C.sepNegVal,this.overlapNoMerge=C.overlapNoMerge;for(var T=1/0,v=C.posAxis._id.charAt(0),d=[],r=0;r<i.length;r++){for(var e=i[r],l=0;l<e.length;l++){var n=e[l],s=n.p;s===void 0&&(s=n[v]),s!==void 0&&d.push(s)}e[0]&&e[0].width1&&(T=Math.min(e[0].width1,T))}this.positions=d;var o=M(d);this.distinctPositions=o.vals,o.vals.length===1&&T!==1/0?this.minDiff=T:this.minDiff=Math.min(o.minDiff,T);var p=(C.posAxis||{}).type;(p==="category"||p==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}E.prototype.put=function(i,C){var T=this.getLabel(i,C),v=this.bins[T]||0;return this.bins[T]=v+C,v},E.prototype.get=function(i,C){var T=this.getLabel(i,C);return this.bins[T]||0},E.prototype.getLabel=function(i,C){var T=C<0&&this.sepNegVal?"v":"^",v=this.overlapNoMerge?i:Math.round(i/this.binWidth);return T+v}},60100:function(Q,U,t){var M=t(33428),E=t(76308),i=t(43616),C=t(3400),T=t(24040),v=t(82744).resizeText,d=t(20832),r=d.textfont,e=d.insidetextfont,l=d.outsidetextfont,n=t(60444);function s(A){var L=M.select(A).selectAll('g[class^="barlayer"]').selectAll("g.trace");v(A,L,"bar");var u=L.size(),m=A._fullLayout;L.style("opacity",function(S){return S[0].trace.opacity}).each(function(S){(m.barmode==="stack"&&u>1||m.bargap===0&&m.bargroupgap===0&&!S[0].trace.marker.line.width)&&M.select(this).attr("shape-rendering","crispEdges")}),L.selectAll("g.points").each(function(S){var w=M.select(this),I=S[0].trace;o(w,I,A)}),T.getComponentMethod("errorbars","style")(L)}function o(A,L,u){i.pointStyle(A.selectAll("path"),L,u),p(A,L,u)}function p(A,L,u){A.selectAll("text").each(function(m){var S=M.select(this),w=C.ensureUniformFontSize(u,a(S,m,L,u));i.font(S,w)})}function b(A,L,u){var m=L[0].trace;m.selectedpoints?h(u,m,A):(o(u,m,A),T.getComponentMethod("errorbars","style")(u))}function h(A,L,u){i.selectedPointStyle(A.selectAll("path"),L),_(A.selectAll("text"),L,u)}function _(A,L,u){A.each(function(m){var S=M.select(this),w;if(m.selected){w=C.ensureUniformFontSize(u,a(S,m,L,u));var I=L.selected.textfont&&L.selected.textfont.color;I&&(w.color=I),i.font(S,w)}else i.selectedTextStyle(S,L)})}function a(A,L,u,m){var S=m._fullLayout.font,w=u.textfont;if(A.classed("bartext-inside")){var I=y(L,u);w=f(u,L.i,S,I)}else A.classed("bartext-outside")&&(w=x(u,L.i,S));return w}function c(A,L,u){return k(r,A.textfont,L,u)}function f(A,L,u,m){var S=c(A,L,u),w=A._input.textfont===void 0||A._input.textfont.color===void 0||Array.isArray(A.textfont.color)&&A.textfont.color[L]===void 0;return w&&(S={color:E.contrast(m),family:S.family,size:S.size}),k(e,A.insidetextfont,L,S)}function x(A,L,u){var m=c(A,L,u);return k(l,A.outsidetextfont,L,m)}function k(A,L,u,m){L=L||{};var S=n.getValue(L.family,u),w=n.getValue(L.size,u),I=n.getValue(L.color,u);return{family:n.coerceString(A.family,S,m.family),size:n.coerceNumber(A.size,w,m.size),color:n.coerceColor(A.color,I,m.color)}}function y(A,L){return L.type==="waterfall"?L[A.dir].marker.color:A.mcc||A.mc||L.marker.color}Q.exports={style:s,styleTextPoints:p,styleOnSelect:b,getInsideTextFont:f,getOutsideTextFont:x,getBarColor:y,resizeText:v}},55592:function(Q,U,t){var M=t(76308),E=t(94288).hasColorscale,i=t(27260),C=t(3400).coercePattern;Q.exports=function(T,v,d,r,e){var l=d("marker.color",r),n=E(T,"marker");n&&i(T,v,e,d,{prefix:"marker.",cLetter:"c"}),d("marker.line.color",M.defaultLine),E(T,"marker.line")&&i(T,v,e,d,{prefix:"marker.line.",cLetter:"c"}),d("marker.line.width"),d("marker.opacity"),C(d,"marker.pattern",l,n),d("selected.marker.color"),d("unselected.marker.color")}},82744:function(Q,U,t){var M=t(33428),E=t(3400);function i(d,r,e){var l=d._fullLayout,n=l["_"+e+"Text_minsize"];if(n){var s=l.uniformtext.mode==="hide",o;switch(e){case"funnelarea":case"pie":case"sunburst":o="g.slice";break;case"treemap":case"icicle":o="g.slice, g.pathbar";break;default:o="g.points > g.point"}r.selectAll(o).each(function(p){var b=p.transform;if(b){b.scale=s&&b.hide?0:n/b.fontSize;var h=M.select(this).select("text");E.setTransormAndDisplay(h,b)}})}}function C(d,r,e){if(e.uniformtext.mode){var l=v(d),n=e.uniformtext.minsize,s=r.scale*r.fontSize;r.hide=s<n,e[l]=e[l]||1/0,r.hide||(e[l]=Math.min(e[l],Math.max(s,n)))}}function T(d,r){var e=v(d);r[e]=void 0}function v(d){return"_"+d+"Text_minsize"}Q.exports={recordMinTextSize:C,clearMinTextSize:T,resizeText:i}},78100:function(Q,U,t){var M=t(21776).Ks,E=t(92880).extendFlat,i=t(8319),C=t(20832);Q.exports={r:i.r,theta:i.theta,r0:i.r0,dr:i.dr,theta0:i.theta0,dtheta:i.dtheta,thetaunit:i.thetaunit,base:E({},C.base,{}),offset:E({},C.offset,{}),width:E({},C.width,{}),text:E({},C.text,{}),hovertext:E({},C.hovertext,{}),marker:T(),hoverinfo:i.hoverinfo,hovertemplate:M(),selected:C.selected,unselected:C.unselected};function T(){var v=E({},C.marker);return delete v.cornerradius,v}},47056:function(Q,U,t){var M=t(94288).hasColorscale,E=t(47128),i=t(3400).isArrayOrTypedArray,C=t(84664),T=t(96376).setGroupPositions,v=t(4500),d=t(24040).traceIs,r=t(3400).extendFlat;function e(n,s){for(var o=n._fullLayout,p=s.subplot,b=o[p].radialaxis,h=o[p].angularaxis,_=b.makeCalcdata(s,"r"),a=h.makeCalcdata(s,"theta"),c=s._length,f=new Array(c),x=_,k=a,y=0;y<c;y++)f[y]={p:k[y],s:x[y]};function A(L){var u=s[L];u!==void 0&&(s["_"+L]=i(u)?h.makeCalcdata(s,L):h.d2c(u,s.thetaunit))}return h.type==="linear"&&(A("width"),A("offset")),M(s,"marker")&&E(n,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),M(s,"marker.line")&&E(n,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),C(f,s),v(f,s),f}function l(n,s,o){for(var p=n.calcdata,b=[],h=0;h<p.length;h++){var _=p[h],a=_[0].trace;a.visible===!0&&d(a,"bar")&&a.subplot===o&&b.push(_)}var c=r({},s.radialaxis,{_id:"x"}),f=s.angularaxis;T(n,f,c,b,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}Q.exports={calc:e,crossTraceCalc:l}},70384:function(Q,U,t){var M=t(3400),E=t(85968).handleRThetaDefaults,i=t(55592),C=t(78100);Q.exports=function(T,v,d,r){function e(n,s){return M.coerce(T,v,C,n,s)}var l=E(T,v,r,e);if(!l){v.visible=!1;return}e("thetaunit"),e("base"),e("offset"),e("width"),e("text"),e("hovertext"),e("hovertemplate"),i(T,v,e,d,r),M.coerceSelectionMarkerOpacity(v,e)}},68896:function(Q,U,t){var M=t(93024),E=t(3400),i=t(63400).getTraceColor,C=E.fillText,T=t(8504).makeHoverPointText,v=t(57384).isPtInsidePolygon;Q.exports=function(d,r,e){var l=d.cd,n=l[0].trace,s=d.subplot,o=s.radialAxis,p=s.angularAxis,b=s.vangles,h=b?v:E.isPtInsideSector,_=d.maxHoverDistance,a=p._period||2*Math.PI,c=Math.abs(o.g2p(Math.sqrt(r*r+e*e))),f=Math.atan2(e,r);o.range[0]>o.range[1]&&(f+=Math.PI);var x=function(L){return h(c,f,[L.rp0,L.rp1],[L.thetag0,L.thetag1],b)?_+Math.min(1,Math.abs(L.thetag1-L.thetag0)/a)-1+(L.rp1-c)/(L.rp1-L.rp0)-1:1/0};if(M.getClosest(l,x,d),d.index!==!1){var k=d.index,y=l[k];d.x0=d.x1=y.ct[0],d.y0=d.y1=y.ct[1];var A=E.extendFlat({},y,{r:y.s,theta:y.p});return C(y,n,d),T(A,n,s,d),d.hovertemplate=n.hovertemplate,d.color=i(n,y),d.xLabelVal=d.yLabelVal=void 0,y.s<0&&(d.idealAlign="left"),[d]}}},94456:function(Q,U,t){Q.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(40872),categories:["polar","bar","showLegend"],attributes:t(78100),layoutAttributes:t(9320),supplyDefaults:t(70384),supplyLayoutDefaults:t(89580),calc:t(47056).calc,crossTraceCalc:t(47056).crossTraceCalc,plot:t(42040),colorbar:t(5528),formatLabels:t(22852),style:t(60100).style,styleOnSelect:t(60100).styleOnSelect,hoverPoints:t(68896),selectPoints:t(45784),meta:{}}},9320:function(Q){Q.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(Q,U,t){var M=t(3400),E=t(9320);Q.exports=function(i,C,T){var v={},d;function r(n,s){return M.coerce(i[d]||{},C[d],E,n,s)}for(var e=0;e<T.length;e++){var l=T[e];l.type==="barpolar"&&l.visible===!0&&(d=l.subplot,v[d]||(r("barmode"),r("bargap"),v[d]=1))}}},42040:function(Q,U,t){var M=t(33428),E=t(38248),i=t(3400),C=t(43616),T=t(57384);Q.exports=function(d,r,e){var l=d._context.staticPlot,n=r.xaxis,s=r.yaxis,o=r.radialAxis,p=r.angularAxis,b=v(r),h=r.layers.frontplot.select("g.barlayer");i.makeTraceGroups(h,e,"trace bars").each(function(){var _=M.select(this),a=i.ensureSingle(_,"g","points"),c=a.selectAll("g.point").data(i.identity);c.enter().append("g").style("vector-effect",l?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),c.exit().remove(),c.each(function(f){var x=M.select(this),k=f.rp0=o.c2p(f.s0),y=f.rp1=o.c2p(f.s1),A=f.thetag0=p.c2g(f.p0),L=f.thetag1=p.c2g(f.p1),u;if(!E(k)||!E(y)||!E(A)||!E(L)||k===y||A===L)u="M0,0Z";else{var m=o.c2g(f.s1),S=(A+L)/2;f.ct=[n.c2p(m*Math.cos(S)),s.c2p(m*Math.sin(S))],u=b(k,y,A,L)}i.ensureSingle(x,"path").attr("d",u)}),C.setClipUrl(_,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,d)})};function v(d){var r=d.cxx,e=d.cyy;return d.vangles?function(l,n,s,o){var p,b;i.angleDelta(s,o)>0?(p=s,b=o):(p=o,b=s);var h=T.findEnclosingVertexAngles(p,d.vangles)[0],_=T.findEnclosingVertexAngles(b,d.vangles)[1],a=[h,(p+b)/2,_];return T.pathPolygonAnnulus(l,n,p,b,a,r,e)}:function(l,n,s,o){return i.pathAnnulus(l,n,s,o,r,e)}}},63188:function(Q,U,t){var M=t(98304),E=t(52904),i=t(20832),C=t(22548),T=t(29736).axisHoverFormat,v=t(21776).Ks,d=t(92880).extendFlat,r=E.marker,e=r.line;Q.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:E.xperiod,yperiod:E.yperiod,xperiod0:E.xperiod0,yperiod0:E.yperiod0,xperiodalignment:E.xperiodalignment,yperiodalignment:E.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:d({},r.symbol,{arrayOk:!1,editType:"plot"}),opacity:d({},r.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:d({},r.angle,{arrayOk:!1,editType:"calc"}),size:d({},r.size,{arrayOk:!1,editType:"calc"}),color:d({},r.color,{arrayOk:!1,editType:"style"}),line:{color:d({},e.color,{arrayOk:!1,dflt:C.defaultLine,editType:"style"}),width:d({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:i.offsetgroup,alignmentgroup:i.alignmentgroup,selected:{marker:E.selected.marker,editType:"style"},unselected:{marker:E.unselected.marker,editType:"style"},text:d({},E.text,{}),hovertext:d({},E.hovertext,{}),hovertemplate:v({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:E.zorder}},62555:function(Q,U,t){var M=t(38248),E=t(54460),i=t(1220),C=t(3400),T=t(39032).BADNUM,v=C._;Q.exports=function(f,x){var k=f._fullLayout,y=E.getFromId(f,x.xaxis||"x"),A=E.getFromId(f,x.yaxis||"y"),L=[],u=x.type==="violin"?"_numViolins":"_numBoxes",m,S,w,I,O,D,P;x.orientation==="h"?(w=y,I="x",O=A,D="y",P=!!x.yperiodalignment):(w=A,I="y",O=y,D="x",P=!!x.xperiodalignment);var F=d(x,D,O,k[u]),R=F[0],B=F[1],N=C.distinctVals(R,O),G=N.vals,X=N.minDiff/2,J,it,nt,q,Z,$,V=(x.boxpoints||x.points)==="all"?C.identity:function(ue){return ue.v<J.lf||ue.v>J.uf};if(x._hasPreCompStats){var rt=x[I],ot=function(ue){return w.d2c((x[ue]||[])[m])},H=1/0,Y=-1/0;for(m=0;m<x._length;m++){var at=R[m];if(M(at)){if(J={},J.pos=J[D]=at,P&&B&&(J.orig_p=B[m]),J.q1=ot("q1"),J.med=ot("median"),J.q3=ot("q3"),it=[],rt&&C.isArrayOrTypedArray(rt[m]))for(S=0;S<rt[m].length;S++)$=w.d2c(rt[m][S]),$!==T&&(Z={v:$,i:[m,S]},n(Z,x,[m,S]),it.push(Z));if(J.pts=it.sort(o),nt=J[I]=it.map(p),q=nt.length,J.med!==T&&J.q1!==T&&J.q3!==T&&J.med>=J.q1&&J.q3>=J.med){var et=ot("lowerfence");J.lf=et!==T&&et<=J.q1?et:b(J,nt,q);var ct=ot("upperfence");J.uf=ct!==T&&ct>=J.q3?ct:h(J,nt,q);var ft=ot("mean");J.mean=ft!==T?ft:q?C.mean(nt,q):(J.q1+J.q3)/2;var yt=ot("sd");J.sd=ft!==T&&yt>=0?yt:q?C.stdev(nt,q,J.mean):J.q3-J.q1,J.lo=_(J),J.uo=a(J);var xt=ot("notchspan");xt=xt!==T&&xt>0?xt:c(J,q),J.ln=J.med-xt,J.un=J.med+xt;var Ct=J.lf,gt=J.uf;x.boxpoints&&nt.length&&(Ct=Math.min(Ct,nt[0]),gt=Math.max(gt,nt[q-1])),x.notched&&(Ct=Math.min(Ct,J.ln),gt=Math.max(gt,J.un)),J.min=Ct,J.max=gt}else{C.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var mt;J.med!==T?mt=J.med:J.q1!==T?J.q3!==T?mt=(J.q1+J.q3)/2:mt=J.q1:J.q3!==T?mt=J.q3:mt=0,J.med=mt,J.q1=J.q3=mt,J.lf=J.uf=mt,J.mean=J.sd=mt,J.ln=J.un=mt,J.min=J.max=mt}H=Math.min(H,J.min),Y=Math.max(Y,J.max),J.pts2=it.filter(V),L.push(J)}}x._extremes[w._id]=E.findExtremes(w,[H,Y],{padded:!0})}else{var vt=w.makeCalcdata(x,I),At=r(G,X),Ot=G.length,It=e(Ot);for(m=0;m<x._length;m++)if($=vt[m],!!M($)){var St=C.findBin(R[m],At);St>=0&&St<Ot&&(Z={v:$,i:m},n(Z,x,m),It[St].push(Z))}var Bt=1/0,re=-1/0,Yt=x.quartilemethod,he=Yt==="exclusive",Zt=Yt==="inclusive";for(m=0;m<Ot;m++)if(It[m].length>0){if(J={},J.pos=J[D]=G[m],it=J.pts=It[m].sort(o),nt=J[I]=it.map(p),q=nt.length,J.min=nt[0],J.max=nt[q-1],J.mean=C.mean(nt,q),J.sd=C.stdev(nt,q,J.mean)*x.sdmultiple,J.med=C.interp(nt,.5),q%2&&(he||Zt)){var ae,oe;he?(ae=nt.slice(0,q/2),oe=nt.slice(q/2+1)):Zt&&(ae=nt.slice(0,q/2+1),oe=nt.slice(q/2)),J.q1=C.interp(ae,.5),J.q3=C.interp(oe,.5)}else J.q1=C.interp(nt,.25),J.q3=C.interp(nt,.75);J.lf=b(J,nt,q),J.uf=h(J,nt,q),J.lo=_(J),J.uo=a(J);var ce=c(J,q);J.ln=J.med-ce,J.un=J.med+ce,Bt=Math.min(Bt,J.ln),re=Math.max(re,J.un),J.pts2=it.filter(V),L.push(J)}x.notched&&C.isTypedArray(vt)&&(vt=Array.from(vt)),x._extremes[w._id]=E.findExtremes(w,x.notched?vt.concat([Bt,re]):vt,{padded:!0})}return s(L,x),L.length>0?(L[0].t={num:k[u],dPos:X,posLetter:D,valLetter:I,labels:{med:v(f,"median:"),min:v(f,"min:"),q1:v(f,"q1:"),q3:v(f,"q3:"),max:v(f,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?v(f,"mean \xB1 \u03C3:").replace("\u03C3",x.sdmultiple===1?"\u03C3":x.sdmultiple+"\u03C3"):v(f,"mean:"),lf:v(f,"lower fence:"),uf:v(f,"upper fence:")}},k[u]++,L):[{t:{empty:!0}}]};function d(f,x,k,y){var A=x in f,L=x+"0"in f,u="d"+x in f;if(A||L&&u){var m=k.makeCalcdata(f,x),S=i(f,k,x,m).vals;return[S,m]}var w;L?w=f[x+"0"]:"name"in f&&(k.type==="category"||M(f.name)&&["linear","log"].indexOf(k.type)!==-1||C.isDateTime(f.name)&&k.type==="date")?w=f.name:w=y;for(var I=k.type==="multicategory"?k.r2c_just_indices(w):k.d2c(w,0,f[x+"calendar"]),O=f._length,D=new Array(O),P=0;P<O;P++)D[P]=I;return[D]}function r(f,x){for(var k=f.length,y=new Array(k+1),A=0;A<k;A++)y[A]=f[A]-x;return y[k]=f[k-1]+x,y}function e(f){for(var x=new Array(f),k=0;k<f;k++)x[k]=[];return x}var l={text:"tx",hovertext:"htx"};function n(f,x,k){for(var y in l)C.isArrayOrTypedArray(x[y])&&(Array.isArray(k)?C.isArrayOrTypedArray(x[y][k[0]])&&(f[l[y]]=x[y][k[0]][k[1]]):f[l[y]]=x[y][k])}function s(f,x){if(C.isArrayOrTypedArray(x.selectedpoints))for(var k=0;k<f.length;k++){for(var y=f[k].pts||[],A={},L=0;L<y.length;L++)A[y[L].i]=L;C.tagSelected(y,x,A)}}function o(f,x){return f.v-x.v}function p(f){return f.v}function b(f,x,k){return k===0?f.q1:Math.min(f.q1,x[Math.min(C.findBin(2.5*f.q1-1.5*f.q3,x,!0)+1,k-1)])}function h(f,x,k){return k===0?f.q3:Math.max(f.q3,x[Math.max(C.findBin(2.5*f.q3-1.5*f.q1,x),0)])}function _(f){return 4*f.q1-3*f.q3}function a(f){return 4*f.q3-3*f.q1}function c(f,x){return x===0?0:1.57*(f.q3-f.q1)/Math.sqrt(x)}},96404:function(Q,U,t){var M=t(54460),E=t(3400),i=t(71888).getAxisGroup,C=["v","h"];function T(d,r){for(var e=d.calcdata,l=r.xaxis,n=r.yaxis,s=0;s<C.length;s++){for(var o=C[s],p=o==="h"?n:l,b=[],h=0;h<e.length;h++){var _=e[h],a=_[0].t,c=_[0].trace;c.visible===!0&&(c.type==="box"||c.type==="candlestick")&&!a.empty&&(c.orientation||"v")===o&&c.xaxis===l._id&&c.yaxis===n._id&&b.push(h)}v("box",d,b,p)}}function v(d,r,e,l){var n=r.calcdata,s=r._fullLayout,o=l._id,p=o.charAt(0),b,h,_,a=[],c=0;for(b=0;b<e.length;b++)for(_=n[e[b]],h=0;h<_.length;h++)a.push(l.c2l(_[h].pos,!0)),c+=(_[h].pts2||[]).length;if(a.length){var f=E.distinctVals(a);(l.type==="category"||l.type==="multicategory")&&(f.minDiff=1);var x=f.minDiff/2;M.minDtick(l,f.minDiff,f.vals[0],!0);var k=d==="violin"?"_numViolins":"_numBoxes",y=s[k],A=s[d+"mode"]==="group"&&y>1,L=1-s[d+"gap"],u=1-s[d+"groupgap"];for(b=0;b<e.length;b++){_=n[e[b]];var m=_[0].trace,S=_[0].t,w=m.width,I=m.side,O,D,P,F;if(w)O=D=F=w/2,P=0;else if(O=x,A){var R=i(s,l._id)+m.orientation,B=s._alignmentOpts[R]||{},N=B[m.alignmentgroup]||{},G=Object.keys(N.offsetGroups||{}).length,X=G||y,J=G?m._offsetIndex:S.num;D=O*L*u/X,P=2*O*(-.5+(J+.5)/X)*L,F=O*L/X}else D=O*L*u,P=0,F=O;S.dPos=O,S.bPos=P,S.bdPos=D,S.wHover=F;var it,nt,q=P+D,Z,$,V,rt,ot,H,Y=!!w,at=(m.boxpoints||m.points)&&c>0;if(I==="positive"?(it=O*(w?1:.5),Z=q,nt=Z=P):I==="negative"?(it=Z=P,nt=O*(w?1:.5),$=q):(it=nt=O,Z=$=q),at){var et=m.pointpos,ct=m.jitter,ft=m.marker.size/2,yt=0;et+ct>=0&&(yt=q*(et+ct),yt>it?(Y=!0,ot=ft,V=yt):yt>Z&&(ot=ft,V=it)),yt<=it&&(V=it);var xt=0;et-ct<=0&&(xt=-q*(et-ct),xt>nt?(Y=!0,H=ft,rt=xt):xt>$&&(H=ft,rt=nt)),xt<=nt&&(rt=nt)}else V=it,rt=nt;var Ct=new Array(_.length);for(h=0;h<_.length;h++)Ct[h]=_[h].pos;m._extremes[o]=M.findExtremes(l,Ct,{padded:Y,vpadminus:rt,vpadplus:V,vpadLinearized:!0,ppadminus:{x:H,y:ot}[p],ppadplus:{x:ot,y:H}[p]})}}}Q.exports={crossTraceCalc:T,setPositionOffset:v}},90624:function(Q,U,t){var M=t(3400),E=t(24040),i=t(76308),C=t(31147),T=t(20011),v=t(52976),d=t(63188);function r(s,o,p,b){function h(u,m){return M.coerce(s,o,d,u,m)}if(e(s,o,h,b),o.visible!==!1){C(s,o,b,h),h("xhoverformat"),h("yhoverformat");var _=o._hasPreCompStats;_&&(h("lowerfence"),h("upperfence")),h("line.color",(s.marker||{}).color||p),h("line.width"),h("fillcolor",i.addOpacity(o.line.color,.5));var a=!1;if(_){var c=h("mean"),f=h("sd");c&&c.length&&(a=!0,f&&f.length&&(a="sd"))}h("whiskerwidth");var x=h("sizemode"),k;x==="quartiles"&&(k=h("boxmean",a)),h("showwhiskers",x==="quartiles"),(x==="sd"||k==="sd")&&h("sdmultiple"),h("width"),h("quartilemethod");var y=!1;if(_){var A=h("notchspan");A&&A.length&&(y=!0)}else M.validate(s.notchwidth,d.notchwidth)&&(y=!0);var L=h("notched",y);L&&h("notchwidth"),l(s,o,h,{prefix:"box"}),h("zorder")}}function e(s,o,p,b){function h(G){var X=0;return G&&G.length&&(X+=1,M.isArrayOrTypedArray(G[0])&&G[0].length&&(X+=1)),X}function _(G){return M.validate(s[G],d[G])}var a=p("y"),c=p("x"),f;if(o.type==="box"){var x=p("q1"),k=p("median"),y=p("q3");o._hasPreCompStats=x&&x.length&&k&&k.length&&y&&y.length,f=Math.min(M.minRowLength(x),M.minRowLength(k),M.minRowLength(y))}var A=h(a),L=h(c),u=A&&M.minRowLength(a),m=L&&M.minRowLength(c),S=b.calendar,w={autotypenumbers:b.autotypenumbers},I,O;if(o._hasPreCompStats)switch(String(L)+String(A)){case"00":var D=_("x0")||_("dx"),P=_("y0")||_("dy");P&&!D?I="h":I="v",O=f;break;case"10":I="v",O=Math.min(f,m);break;case"20":I="h",O=Math.min(f,c.length);break;case"01":I="h",O=Math.min(f,u);break;case"02":I="v",O=Math.min(f,a.length);break;case"12":I="v",O=Math.min(f,m,a.length);break;case"21":I="h",O=Math.min(f,c.length,u);break;case"11":O=0;break;case"22":var F=!1,R;for(R=0;R<c.length;R++)if(v(c[R],S,w)==="category"){F=!0;break}if(F)I="v",O=Math.min(f,m,a.length);else{for(R=0;R<a.length;R++)if(v(a[R],S,w)==="category"){F=!0;break}F?(I="h",O=Math.min(f,c.length,u)):(I="v",O=Math.min(f,m,a.length))}break}else A>0?(I="v",L>0?O=Math.min(m,u):O=Math.min(u)):L>0?(I="h",O=Math.min(m)):O=0;if(!O){o.visible=!1;return}o._length=O;var B=p("orientation",I);o._hasPreCompStats?B==="v"&&L===0?(p("x0",0),p("dx",1)):B==="h"&&A===0&&(p("y0",0),p("dy",1)):B==="v"&&L===0?p("x0"):B==="h"&&A===0&&p("y0");var N=E.getComponentMethod("calendars","handleTraceDefaults");N(s,o,["x","y"],b)}function l(s,o,p,b){var h=b.prefix,_=M.coerce2(s,o,d,"marker.outliercolor"),a=p("marker.line.outliercolor"),c="outliers";o._hasPreCompStats?c="all":(_||a)&&(c="suspectedoutliers");var f=p(h+"points",c);f?(p("jitter",f==="all"?.3:0),p("pointpos",f==="all"?-1.5:0),p("marker.symbol"),p("marker.opacity"),p("marker.size"),p("marker.angle"),p("marker.color",o.line.color),p("marker.line.color"),p("marker.line.width"),f==="suspectedoutliers"&&(p("marker.line.outliercolor",o.marker.color),p("marker.line.outlierwidth")),p("selected.marker.color"),p("unselected.marker.color"),p("selected.marker.size"),p("unselected.marker.size"),p("text"),p("hovertext")):delete o.marker;var x=p("hoveron");(x==="all"||x.indexOf("points")!==-1)&&p("hovertemplate"),M.coerceSelectionMarkerOpacity(o,p)}function n(s,o){var p,b;function h(c){return M.coerce(b._input,b,d,c)}for(var _=0;_<s.length;_++){b=s[_];var a=b.type;(a==="box"||a==="violin")&&(p=b._input,o[a+"mode"]==="group"&&T(p,b,o,h))}}Q.exports={supplyDefaults:r,crossTraceDefaults:n,handleSampleDefaults:e,handlePointsDefaults:l}},10392:function(Q){Q.exports=function(U,t){return t.hoverOnBox&&(U.hoverOnBox=t.hoverOnBox),"xVal"in t&&(U.x=t.xVal),"yVal"in t&&(U.y=t.yVal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U}},27576:function(Q,U,t){var M=t(54460),E=t(3400),i=t(93024),C=t(76308),T=E.fillText;function v(e,l,n,s){var o=e.cd,p=o[0].trace,b=p.hoveron,h=[],_;return b.indexOf("boxes")!==-1&&(h=h.concat(d(e,l,n,s))),b.indexOf("points")!==-1&&(_=r(e,l,n)),s==="closest"?_?[_]:h:(_&&h.push(_),h)}function d(e,l,n,s){var o=e.cd,p=e.xa,b=e.ya,h=o[0].trace,_=o[0].t,a=h.type==="violin",c,f,x,k,y,A,L,u,m,S,w,I=_.bdPos,O,D,P=_.wHover,F=function(xt){return x.c2l(xt.pos)+_.bPos-x.c2l(A)};a&&h.side!=="both"?(h.side==="positive"&&(m=function(xt){var Ct=F(xt);return i.inbox(Ct,Ct+P,S)},O=I,D=0),h.side==="negative"&&(m=function(xt){var Ct=F(xt);return i.inbox(Ct-P,Ct,S)},O=0,D=I)):(m=function(xt){var Ct=F(xt);return i.inbox(Ct-P,Ct+P,S)},O=D=I);var R;a?R=function(xt){return i.inbox(xt.span[0]-y,xt.span[1]-y,S)}:R=function(xt){return i.inbox(xt.min-y,xt.max-y,S)},h.orientation==="h"?(y=l,A=n,L=R,u=m,c="y",x=b,f="x",k=p):(y=n,A=l,L=m,u=R,c="x",x=p,f="y",k=b);var B=Math.min(1,I/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));S=e.maxHoverDistance-B,w=e.maxSpikeDistance-B;function N(xt){return(L(xt)+u(xt))/2}var G=i.getDistanceFunction(s,L,u,N);if(i.getClosest(o,G,e),e.index===!1)return[];var X=o[e.index],J=h.line.color,it=(h.marker||{}).color;C.opacity(J)&&h.line.width?e.color=J:C.opacity(it)&&h.boxpoints?e.color=it:e.color=h.fillcolor,e[c+"0"]=x.c2p(X.pos+_.bPos-D,!0),e[c+"1"]=x.c2p(X.pos+_.bPos+O,!0),e[c+"LabelVal"]=X.orig_p!==void 0?X.orig_p:X.pos;var nt=c+"Spike";e.spikeDistance=N(X)*w/S,e[nt]=x.c2p(X.pos,!0);var q=h.boxmean||h.sizemode==="sd"||(h.meanline||{}).visible,Z=h.boxpoints||h.points,$=Z&&q?["max","uf","q3","med","mean","q1","lf","min"]:Z&&!q?["max","uf","q3","med","q1","lf","min"]:!Z&&q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],V=k.range[1]<k.range[0];h.orientation===(V?"v":"h")&&$.reverse();for(var rt=e.spikeDistance,ot=e[nt],H=[],Y=0;Y<$.length;Y++){var at=$[Y];if(at in X){var et=X[at],ct=k.c2p(et,!0),ft=E.extendFlat({},e);ft.attr=at,ft[f+"0"]=ft[f+"1"]=ct,ft[f+"LabelVal"]=et,ft[f+"Label"]=(_.labels?_.labels[at]+" ":"")+M.hoverLabelText(k,et,h[f+"hoverformat"]),ft.hoverOnBox=!0,at==="mean"&&"sd"in X&&(h.boxmean==="sd"||h.sizemode==="sd")&&(ft[f+"err"]=X.sd),ft.hovertemplate=!1,H.push(ft)}}e.name="",e.spikeDistance=void 0,e[nt]=void 0;for(var yt=0;yt<H.length;yt++)H[yt].attr!=="med"?(H[yt].name="",H[yt].spikeDistance=void 0,H[yt][nt]=void 0):(H[yt].spikeDistance=rt,H[yt][nt]=ot);return H}function r(e,l,n){for(var s=e.cd,o=e.xa,p=e.ya,b=s[0].trace,h=o.c2p(l),_=p.c2p(n),a,c=function(R){var B=Math.max(3,R.mrc||0);return Math.max(Math.abs(o.c2p(R.x)-h)-B,1-3/B)},f=function(R){var B=Math.max(3,R.mrc||0);return Math.max(Math.abs(p.c2p(R.y)-_)-B,1-3/B)},x=i.quadrature(c,f),k=!1,y,A,L=0;L<s.length;L++){y=s[L];for(var u=0;u<(y.pts||[]).length;u++){A=y.pts[u];var m=x(A);m<=e.distance&&(e.distance=m,k=[L,u])}}if(!k)return!1;y=s[k[0]],A=y.pts[k[1]];var S=o.c2p(A.x,!0),w=p.c2p(A.y,!0),I=A.mrc||1;a=E.extendFlat({},e,{index:A.i,color:(b.marker||{}).color,name:b.name,x0:S-I,x1:S+I,y0:w-I,y1:w+I,spikeDistance:e.distance,hovertemplate:b.hovertemplate});var O=y.orig_p,D=O!==void 0?O:y.pos,P;b.orientation==="h"?(P=p,a.xLabelVal=A.x,a.yLabelVal=D):(P=o,a.xLabelVal=D,a.yLabelVal=A.y);var F=P._id.charAt(0);return a[F+"Spike"]=P.c2p(y.pos,!0),T(A,b,a),a}Q.exports={hoverPoints:v,hoverOnBoxes:d,hoverOnPoints:r}},67244:function(Q,U,t){Q.exports={attributes:t(63188),layoutAttributes:t(16560),supplyDefaults:t(90624).supplyDefaults,crossTraceDefaults:t(90624).crossTraceDefaults,supplyLayoutDefaults:t(68832).supplyLayoutDefaults,calc:t(62555),crossTraceCalc:t(96404).crossTraceCalc,plot:t(18728).plot,style:t(25776).style,styleOnSelect:t(25776).styleOnSelect,hoverPoints:t(27576).hoverPoints,eventData:t(10392),selectPoints:t(8264),moduleType:"trace",name:"box",basePlotModule:t(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(Q){Q.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(Q,U,t){var M=t(24040),E=t(3400),i=t(16560);function C(v,d,r,e,l){for(var n=l+"Layout",s=!1,o=0;o<r.length;o++){var p=r[o];if(M.traceIs(p,n)){s=!0;break}}s&&(e(l+"mode"),e(l+"gap"),e(l+"groupgap"))}function T(v,d,r){function e(l,n){return E.coerce(v,d,i,l,n)}C(v,d,r,e,"box")}Q.exports={supplyLayoutDefaults:T,_supply:C}},18728:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=5,T=.01;function v(l,n,s,o){var p=l._context.staticPlot,b=n.xaxis,h=n.yaxis;E.makeTraceGroups(o,s,"trace boxes").each(function(_){var a=M.select(this),c=_[0],f=c.t,x=c.trace;if(f.wdPos=f.bdPos*x.whiskerwidth,x.visible!==!0||f.empty){a.remove();return}var k,y;x.orientation==="h"?(k=h,y=b):(k=b,y=h),d(a,{pos:k,val:y},x,f,p),r(a,{x:b,y:h},x,f),e(a,{pos:k,val:y},x,f)})}function d(l,n,s,o,p){var b=s.orientation==="h",h=n.val,_=n.pos,a=!!_.rangebreaks,c=o.bPos,f=o.wdPos||0,x=o.bPosPxOffset||0,k=s.whiskerwidth||0,y=s.showwhiskers!==!1,A=s.notched||!1,L=A?1-2*s.notchwidth:1,u,m;Array.isArray(o.bdPos)?(u=o.bdPos[0],m=o.bdPos[1]):(u=o.bdPos,m=o.bdPos);var S=l.selectAll("path.box").data(s.type!=="violin"||s.box.visible?E.identity:[]);S.enter().append("path").style("vector-effect",p?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(w){if(w.empty)return M.select(this).attr("d","M0,0Z");var I=_.c2l(w.pos+c,!0),O=_.l2p(I-u)+x,D=_.l2p(I+m)+x,P=a?(O+D)/2:_.l2p(I)+x,F=s.whiskerwidth,R=a?O*F+(1-F)*P:_.l2p(I-f)+x,B=a?D*F+(1-F)*P:_.l2p(I+f)+x,N=_.l2p(I-u*L)+x,G=_.l2p(I+m*L)+x,X=s.sizemode==="sd",J=h.c2p(X?w.mean-w.sd:w.q1,!0),it=X?h.c2p(w.mean+w.sd,!0):h.c2p(w.q3,!0),nt=E.constrain(X?h.c2p(w.mean,!0):h.c2p(w.med,!0),Math.min(J,it)+1,Math.max(J,it)-1),q=w.lf===void 0||s.boxpoints===!1||X,Z=h.c2p(q?w.min:w.lf,!0),$=h.c2p(q?w.max:w.uf,!0),V=h.c2p(w.ln,!0),rt=h.c2p(w.un,!0);b?M.select(this).attr("d","M"+nt+","+N+"V"+G+"M"+J+","+O+"V"+D+(A?"H"+V+"L"+nt+","+G+"L"+rt+","+D:"")+"H"+it+"V"+O+(A?"H"+rt+"L"+nt+","+N+"L"+V+","+O:"")+"Z"+(y?"M"+J+","+P+"H"+Z+"M"+it+","+P+"H"+$+(k===0?"":"M"+Z+","+R+"V"+B+"M"+$+","+R+"V"+B):"")):M.select(this).attr("d","M"+N+","+nt+"H"+G+"M"+O+","+J+"H"+D+(A?"V"+V+"L"+G+","+nt+"L"+D+","+rt:"")+"V"+it+"H"+O+(A?"V"+rt+"L"+N+","+nt+"L"+O+","+V:"")+"Z"+(y?"M"+P+","+J+"V"+Z+"M"+P+","+it+"V"+$+(k===0?"":"M"+R+","+Z+"H"+B+"M"+R+","+$+"H"+B):""))})}function r(l,n,s,o){var p=n.x,b=n.y,h=o.bdPos,_=o.bPos,a=s.boxpoints||s.points;E.seedPseudoRandom();var c=function(k){return k.forEach(function(y){y.t=o,y.trace=s}),k},f=l.selectAll("g.points").data(a?c:[]);f.enter().append("g").attr("class","points"),f.exit().remove();var x=f.selectAll("path").data(function(k){var y,A=k.pts2,L=Math.max((k.max-k.min)/10,k.q3-k.q1),u=L*1e-9,m=L*T,S=[],w=0,I;if(s.jitter){if(L===0)for(w=1,S=new Array(A.length),y=0;y<A.length;y++)S[y]=1;else for(y=0;y<A.length;y++){var O=Math.max(0,y-C),D=A[O].v,P=Math.min(A.length-1,y+C),F=A[P].v;a!=="all"&&(A[y].v<k.lf?F=Math.min(F,k.lf):D=Math.max(D,k.uf));var R=Math.sqrt(m*(P-O)/(F-D+u))||0;R=E.constrain(Math.abs(R),0,1),S.push(R),w=Math.max(R,w)}I=s.jitter*2/(w||1)}for(y=0;y<A.length;y++){var B=A[y],N=B.v,G=s.jitter?I*S[y]*(E.pseudoRandom()-.5):0,X=k.pos+_+h*(s.pointpos+G);s.orientation==="h"?(B.y=X,B.x=N):(B.x=X,B.y=N),a==="suspectedoutliers"&&N<k.uo&&N>k.lo&&(B.so=!0)}return A});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(i.translatePoints,p,b)}function e(l,n,s,o){var p=n.val,b=n.pos,h=!!b.rangebreaks,_=o.bPos,a=o.bPosPxOffset||0,c=s.boxmean||(s.meanline||{}).visible,f,x;Array.isArray(o.bdPos)?(f=o.bdPos[0],x=o.bdPos[1]):(f=o.bdPos,x=o.bdPos);var k=l.selectAll("path.mean").data(s.type==="box"&&s.boxmean||s.type==="violin"&&s.box.visible&&s.meanline.visible?E.identity:[]);k.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),k.exit().remove(),k.each(function(y){var A=b.c2l(y.pos+_,!0),L=b.l2p(A-f)+a,u=b.l2p(A+x)+a,m=h?(L+u)/2:b.l2p(A)+a,S=p.c2p(y.mean,!0),w=p.c2p(y.mean-y.sd,!0),I=p.c2p(y.mean+y.sd,!0);s.orientation==="h"?M.select(this).attr("d","M"+S+","+L+"V"+u+(c==="sd"?"m0,0L"+w+","+m+"L"+S+","+L+"L"+I+","+m+"Z":"")):M.select(this).attr("d","M"+L+","+S+"H"+u+(c==="sd"?"m0,0L"+m+","+w+"L"+L+","+S+"L"+m+","+I+"Z":""))})}Q.exports={plot:v,plotBoxAndWhiskers:d,plotPoints:r,plotBoxMean:e}},8264:function(Q){Q.exports=function(U,t){var M=U.cd,E=U.xaxis,i=U.yaxis,C=[],T,v;if(t===!1)for(T=0;T<M.length;T++)for(v=0;v<(M[T].pts||[]).length;v++)M[T].pts[v].selected=0;else for(T=0;T<M.length;T++)for(v=0;v<(M[T].pts||[]).length;v++){var d=M[T].pts[v],r=E.c2p(d.x),e=i.c2p(d.y);t.contains([r,e],null,d.i,U)?(C.push({pointNumber:d.i,x:E.c2d(d.x),y:i.c2d(d.y)}),d.selected=1):d.selected=0}return C}},25776:function(Q,U,t){var M=t(33428),E=t(76308),i=t(43616);function C(v,d,r){var e=r||M.select(v).selectAll("g.trace.boxes");e.style("opacity",function(l){return l[0].trace.opacity}),e.each(function(l){var n=M.select(this),s=l[0].trace,o=s.line.width;function p(_,a,c,f){_.style("stroke-width",a+"px").call(E.stroke,c).call(E.fill,f)}var b=n.selectAll("path.box");if(s.type==="candlestick")b.each(function(_){if(!_.empty){var a=M.select(this),c=s[_.dir];p(a,c.line.width,c.line.color,c.fillcolor),a.style("opacity",s.selectedpoints&&!_.selected?.3:1)}});else{p(b,o,s.line.color,s.fillcolor),n.selectAll("path.mean").style({"stroke-width":o,"stroke-dasharray":2*o+"px,"+o+"px"}).call(E.stroke,s.line.color);var h=n.selectAll("path.point");i.pointStyle(h,s,v)}})}function T(v,d,r){var e=d[0].trace,l=r.selectAll("path.point");e.selectedpoints?i.selectedPointStyle(l,e):i.pointStyle(l,e,v)}Q.exports={style:C,styleOnSelect:T}},64216:function(Q,U,t){var M=t(3400).extendFlat,E=t(29736).axisHoverFormat,i=t(20279),C=t(63188);function T(v){return{line:{color:M({},C.line.color,{dflt:v}),width:C.line.width,editType:"style"},fillcolor:C.fillcolor,editType:"style"}}Q.exports={xperiod:i.xperiod,xperiod0:i.xperiod0,xperiodalignment:i.xperiodalignment,xhoverformat:E("x"),yhoverformat:E("y"),x:i.x,open:i.open,high:i.high,low:i.low,close:i.close,line:{width:M({},C.line.width,{}),editType:"style"},increasing:T(i.increasing.line.color.dflt),decreasing:T(i.decreasing.line.color.dflt),text:i.text,hovertext:i.hovertext,whiskerwidth:M({},C.whiskerwidth,{dflt:0}),hoverlabel:i.hoverlabel,zorder:C.zorder}},46283:function(Q,U,t){var M=t(3400),E=t(54460),i=t(1220),C=t(42812).calcCommon;Q.exports=function(v,d){var r=v._fullLayout,e=E.getFromId(v,d.xaxis),l=E.getFromId(v,d.yaxis),n=e.makeCalcdata(d,"x"),s=i(d,e,"x",n).vals,o=C(v,d,n,s,l,T);return o.length?(M.extendFlat(o[0].t,{num:r._numBoxes,dPos:M.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,o):[{t:{empty:!0}}]};function T(v,d,r,e){return{min:r,q1:Math.min(v,e),med:e,q3:Math.max(v,e),max:d}}},64588:function(Q,U,t){var M=t(3400),E=t(76308),i=t(52744),C=t(31147),T=t(64216);Q.exports=function(d,r,e,l){function n(o,p){return M.coerce(d,r,T,o,p)}var s=i(d,r,n,l);if(!s){r.visible=!1;return}C(d,r,l,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),v(d,r,n,"increasing"),v(d,r,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),l._requestRangeslider[r.xaxis]=!0,n("zorder")};function v(d,r,e,l){var n=e(l+".line.color");e(l+".line.width",r.line.width),e(l+".fillcolor",E.addOpacity(n,.5))}},61712:function(Q,U,t){Q.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(64216),layoutAttributes:t(16560),supplyLayoutDefaults:t(68832).supplyLayoutDefaults,crossTraceCalc:t(96404).crossTraceCalc,supplyDefaults:t(64588),calc:t(46283),plot:t(18728).plot,layerName:"boxlayer",style:t(25776).style,hoverPoints:t(18720).hoverPoints,selectPoints:t(97384)}},93504:function(Q,U,t){var M=t(63856),E=t(31780);Q.exports=function(C,T,v,d,r){var e=d("a");e||(d("da"),d("a0"));var l=d("b");l||(d("db"),d("b0")),i(C,T,v,r)};function i(C,T,v,d){var r=["aaxis","baxis"];r.forEach(function(e){var l=e.charAt(0),n=C[e]||{},s=E.newContainer(T,e),o={noAutotickangles:!0,noTicklabelstep:!0,tickfont:"x",id:l+"axis",letter:l,font:T.font,name:e,data:C[l],calendar:T.calendar,dfltColor:d,bgColor:v.paper_bgcolor,autotypenumbersDflt:v.autotypenumbers,fullLayout:v};M(n,s,o),s._categories=s._categories||[],!C[e]&&n.type!=="-"&&(C[e]={type:n.type})})}},51676:function(Q,U,t){var M=t(3400).isArrayOrTypedArray;Q.exports=function(i){return E(i,0)};function E(i,C){if(!M(i)||C>=10)return null;for(var T=1/0,v=-1/0,d=i.length,r=0;r<d;r++){var e=i[r];if(M(e)){var l=E(e,C+1);l&&(T=Math.min(l[0],T),v=Math.max(l[1],v))}else T=Math.min(e,T),v=Math.max(e,v)}return[T,v]}},85720:function(Q,U,t){var M=t(25376),E=t(98692),i=t(22548),C=M({editType:"calc"}),T=t(52904).zorder;C.family.dflt='"Open Sans", verdana, arial, sans-serif',C.size.dflt=12,C.color.dflt=i.defaultLine,Q.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:E,baxis:E,font:C,color:{valType:"color",dflt:i.defaultLine,editType:"plot"},transforms:void 0,zorder:T}},77712:function(Q,U,t){var M=t(3400).isArrayOrTypedArray;Q.exports=function(E,i,C,T){var v,d,r,e,l,n,s,o,p,b,h,_,a,c=M(C)?"a":"b",f=c==="a"?E.aaxis:E.baxis,x=f.smoothing,k=c==="a"?E.a2i:E.b2j,y=c==="a"?C:T,A=c==="a"?T:C,L=c==="a"?i.a.length:i.b.length,u=c==="a"?i.b.length:i.a.length,m=Math.floor(c==="a"?E.b2j(A):E.a2i(A)),S=c==="a"?function(J){return E.evalxy([],J,m)}:function(J){return E.evalxy([],m,J)};x&&(r=Math.max(0,Math.min(u-2,m)),e=m-r,d=c==="a"?function(J,it){return E.dxydi([],J,r,it,e)}:function(J,it){return E.dxydj([],r,J,e,it)});var w=k(y[0]),I=k(y[1]),O=w<I?1:-1,D=(I-w)*1e-8,P=O>0?Math.floor:Math.ceil,F=O>0?Math.ceil:Math.floor,R=O>0?Math.min:Math.max,B=O>0?Math.max:Math.min,N=P(w+D),G=F(I-D);s=S(w);var X=[[s]];for(v=N;v*O<G*O;v+=O)l=[],h=B(w,v),_=R(I,v+O),a=_-h,n=Math.max(0,Math.min(L-2,Math.floor(.5*(h+_)))),o=S(_),x&&(p=d(n,h-n),b=d(n,_-n),l.push([s[0]+p[0]/3*a,s[1]+p[1]/3*a]),l.push([o[0]-b[0]/3*a,o[1]-b[1]/3*a])),l.push(o),X.push(l),s=o;return X}},98692:function(Q,U,t){var M=t(25376),E=t(22548),i=t(94724),C=t(29736).descriptionWithDates,T=t(67824).overrideAll,v=t(98192).u,d=t(92880).extendFlat;Q.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:M({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:i.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:d({},i.labelalias,{editType:"calc"}),tickfont:M({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:C("tick label")},tickformatstops:T(i.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:E.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:d({},v,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:d({},v,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:E.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:M({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(Q,U,t){var M=t(85720),E=t(76308).addOpacity,i=t(24040),C=t(3400),T=t(26332),v=t(95936),d=t(42568),r=t(22416),e=t(78344),l=t(52976);Q.exports=function(s,o,p){var b=p.letter,h=p.font||{},_=M[b+"axis"];function a(B,N){return C.coerce(s,o,_,B,N)}function c(B,N){return C.coerce2(s,o,_,B,N)}p.name&&(o._name=p.name,o._id=p.name),a("autotypenumbers",p.autotypenumbersDflt);var f=a("type");if(f==="-"&&(p.data&&n(o,p.data),o.type==="-"?o.type="linear":f=s.type=o.type),a("smoothing"),a("cheatertype"),a("showticklabels"),a("labelprefix",b+" = "),a("labelsuffix"),a("showtickprefix"),a("showticksuffix"),a("separatethousands"),a("tickformat"),a("exponentformat"),a("minexponent"),a("showexponent"),a("categoryorder"),a("tickmode"),a("tickvals"),a("ticktext"),a("tick0"),a("dtick"),o.tickmode==="array"&&(a("arraytick0"),a("arraydtick")),a("labelpadding"),o._hovertitle=b,f==="date"){var x=i.getComponentMethod("calendars","handleDefaults");x(s,o,"calendar",p.calendar)}e(o,p.fullLayout),o.c2p=C.identity;var k=a("color",p.dfltColor),y=k===s.color?k:h.color,A=a("title.text");A&&(C.coerceFont(a,"title.font",{family:h.family,size:C.bigFont(h.size),color:y}),a("title.offset")),a("tickangle");var L=a("autorange",!o.isValidRange(s.range));L&&a("rangemode"),a("range"),o.cleanRange(),a("fixedrange"),T(s,o,a,f),d(s,o,a,f,p),v(s,o,a,f,p),r(s,o,a,{data:p.data,dataAttr:b});var u=c("gridcolor",E(k,.3)),m=c("gridwidth"),S=c("griddash"),w=a("showgrid");w||(delete o.gridcolor,delete o.gridwidth,delete o.griddash);var I=c("startlinecolor",k),O=c("startlinewidth",m),D=a("startline",o.showgrid||!!I||!!O);D||(delete o.startlinecolor,delete o.startlinewidth);var P=c("endlinecolor",k),F=c("endlinewidth",m),R=a("endline",o.showgrid||!!P||!!F);return R||(delete o.endlinecolor,delete o.endlinewidth),w?(a("minorgridcount"),a("minorgridwidth",m),a("minorgriddash",S),a("minorgridcolor",E(u,.06)),o.minorgridcount||(delete o.minorgridwidth,delete o.minorgriddash,delete o.minorgridcolor)):(delete o.gridcolor,delete o.gridwidth,delete o.griddash),o.showticklabels==="none"&&(delete o.tickfont,delete o.tickangle,delete o.showexponent,delete o.exponentformat,delete o.minexponent,delete o.tickformat,delete o.showticksuffix,delete o.showtickprefix),o.showticksuffix||delete o.ticksuffix,o.showtickprefix||delete o.tickprefix,a("tickmode"),o};function n(s,o){if(s.type==="-"){var p=s._id,b=p.charAt(0),h=b+"calendar",_=s[h];s.type=l(o,_,{autotypenumbers:s.autotypenumbers})}}},58744:function(Q,U,t){var M=t(54460),E=t(3400).isArray1D,i=t(60776),C=t(51676),T=t(19216),v=t(14724),d=t(24944),r=t(26136),e=t(51512),l=t(2872),n=t(81e3);Q.exports=function(s,o){var p=M.getFromId(s,o.xaxis),b=M.getFromId(s,o.yaxis),h=o.aaxis,_=o.baxis,a=o.x,c=o.y,f=[];a&&E(a)&&f.push("x"),c&&E(c)&&f.push("y"),f.length&&l(o,h,_,"a","b",f);var x=o._a=o._a||o.a,k=o._b=o._b||o.b;a=o._x||o.x,c=o._y||o.y;var y={};if(o._cheater){var A=h.cheatertype==="index"?x.length:x,L=_.cheatertype==="index"?k.length:k;a=i(A,L,o.cheaterslope)}o._x=a=r(a),o._y=c=r(c),e(a,x,k),e(c,x,k),n(o),o.setScale();var u=C(a),m=C(c),S=.5*(u[1]-u[0]),w=.5*(u[1]+u[0]),I=.5*(m[1]-m[0]),O=.5*(m[1]+m[0]),D=1.3;return u=[w-S*D,w+S*D],m=[O-I*D,O+I*D],o._extremes[p._id]=M.findExtremes(p,u,{padded:!0}),o._extremes[b._id]=M.findExtremes(b,m,{padded:!0}),T(o,"a","b"),T(o,"b","a"),v(o,h),v(o,_),y.clipsegments=d(o._xctrl,o._yctrl,h,_),y.x=a,y.y=c,y.a=x,y.b=k,[y]}},24944:function(Q){Q.exports=function(U,t,M,E){var i,C,T,v=[],d=!!M.smoothing,r=!!E.smoothing,e=U[0].length-1,l=U.length-1;for(i=0,C=[],T=[];i<=e;i++)C[i]=U[0][i],T[i]=t[0][i];for(v.push({x:C,y:T,bicubic:d}),i=0,C=[],T=[];i<=l;i++)C[i]=U[i][e],T[i]=t[i][e];for(v.push({x:C,y:T,bicubic:r}),i=e,C=[],T=[];i>=0;i--)C[e-i]=U[l][i],T[e-i]=t[l][i];for(v.push({x:C,y:T,bicubic:d}),i=l,C=[],T=[];i>=0;i--)C[l-i]=U[i][0],T[l-i]=t[i][0];return v.push({x:C,y:T,bicubic:r}),v}},19216:function(Q,U,t){var M=t(54460),E=t(92880).extendFlat;Q.exports=function(i,C,T){var v,d,r,e,l,n,s,o,p,b,h,_,a,c,f=i["_"+C],x=i[C+"axis"],k=x._gridlines=[],y=x._minorgridlines=[],A=x._boundarylines=[],L=i["_"+T],u=i[T+"axis"];x.tickmode==="array"&&(x.tickvals=f.slice());var m=i._xctrl,S=i._yctrl,w=m[0].length,I=m.length,O=i._a.length,D=i._b.length;M.prepTicks(x),x.tickmode==="array"&&delete x.tickvals;var P=x.smoothing?3:1;function F(B){var N,G,X,J,it,nt,q,Z,$,V,rt,ot,H=[],Y=[],at={};if(C==="b")for(G=i.b2j(B),X=Math.floor(Math.max(0,Math.min(D-2,G))),J=G-X,at.length=D,at.crossLength=O,at.xy=function(et){return i.evalxy([],et,G)},at.dxy=function(et,ct){return i.dxydi([],et,X,ct,J)},N=0;N<O;N++)nt=Math.min(O-2,N),q=N-nt,Z=i.evalxy([],N,G),u.smoothing&&N>0&&($=i.dxydi([],N-1,X,0,J),H.push(it[0]+$[0]/3),Y.push(it[1]+$[1]/3),V=i.dxydi([],N-1,X,1,J),H.push(Z[0]-V[0]/3),Y.push(Z[1]-V[1]/3)),H.push(Z[0]),Y.push(Z[1]),it=Z;else for(N=i.a2i(B),nt=Math.floor(Math.max(0,Math.min(O-2,N))),q=N-nt,at.length=O,at.crossLength=D,at.xy=function(et){return i.evalxy([],N,et)},at.dxy=function(et,ct){return i.dxydj([],nt,et,q,ct)},G=0;G<D;G++)X=Math.min(D-2,G),J=G-X,Z=i.evalxy([],N,G),u.smoothing&&G>0&&(rt=i.dxydj([],nt,G-1,q,0),H.push(it[0]+rt[0]/3),Y.push(it[1]+rt[1]/3),ot=i.dxydj([],nt,G-1,q,1),H.push(Z[0]-ot[0]/3),Y.push(Z[1]-ot[1]/3)),H.push(Z[0]),Y.push(Z[1]),it=Z;return at.axisLetter=C,at.axis=x,at.crossAxis=u,at.value=B,at.constvar=T,at.index=o,at.x=H,at.y=Y,at.smoothing=u.smoothing,at}function R(B){var N,G,X,J,it,nt=[],q=[],Z={};if(Z.length=f.length,Z.crossLength=L.length,C==="b")for(X=Math.max(0,Math.min(D-2,B)),it=Math.min(1,Math.max(0,B-X)),Z.xy=function($){return i.evalxy([],$,B)},Z.dxy=function($,V){return i.dxydi([],$,X,V,it)},N=0;N<w;N++)nt[N]=m[B*P][N],q[N]=S[B*P][N];else for(G=Math.max(0,Math.min(O-2,B)),J=Math.min(1,Math.max(0,B-G)),Z.xy=function($){return i.evalxy([],B,$)},Z.dxy=function($,V){return i.dxydj([],G,$,J,V)},N=0;N<I;N++)nt[N]=m[N][B*P],q[N]=S[N][B*P];return Z.axisLetter=C,Z.axis=x,Z.crossAxis=u,Z.value=f[B],Z.constvar=T,Z.index=B,Z.x=nt,Z.y=q,Z.smoothing=u.smoothing,Z}if(x.tickmode==="array"){for(e=5e-15,l=[Math.floor((f.length-1-x.arraytick0)/x.arraydtick*(1+e)),Math.ceil(-x.arraytick0/x.arraydtick/(1+e))].sort(function(B,N){return B-N}),n=l[0]-1,s=l[1]+1,o=n;o<s;o++)d=x.arraytick0+x.arraydtick*o,!(d<0||d>f.length-1)&&k.push(E(R(d),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(o=n;o<s;o++)if(r=x.arraytick0+x.arraydtick*o,h=Math.min(r+x.arraydtick,f.length-1),!(r<0||r>f.length-1)&&!(h<0||h>f.length-1))for(_=f[r],a=f[h],v=0;v<x.minorgridcount;v++)c=h-r,!(c<=0)&&(b=_+(a-_)*(v+1)/(x.minorgridcount+1)*(x.arraydtick/c),!(b<f[0]||b>f[f.length-1])&&y.push(E(F(b),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash})));x.startline&&A.push(E(R(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&A.push(E(R(f.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(e=5e-15,l=[Math.floor((f[f.length-1]-x.tick0)/x.dtick*(1+e)),Math.ceil((f[0]-x.tick0)/x.dtick/(1+e))].sort(function(B,N){return B-N}),n=l[0],s=l[1],o=n;o<=s;o++)p=x.tick0+x.dtick*o,k.push(E(F(p),{color:x.gridcolor,width:x.gridwidth,dash:x.griddash}));for(o=n-1;o<s+1;o++)for(p=x.tick0+x.dtick*o,v=0;v<x.minorgridcount;v++)b=p+x.dtick*(v+1)/(x.minorgridcount+1),!(b<f[0]||b>f[f.length-1])&&y.push(E(F(b),{color:x.minorgridcolor,width:x.minorgridwidth,dash:x.minorgriddash}));x.startline&&A.push(E(F(f[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&A.push(E(F(f[f.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}}},14724:function(Q,U,t){var M=t(54460),E=t(92880).extendFlat;Q.exports=function(i,C){var T,v,d,r,e,l=C._labels=[],n=C._gridlines;for(T=0;T<n.length;T++)e=n[T],["start","both"].indexOf(C.showticklabels)!==-1&&(v=M.tickText(C,e.value),E(v,{prefix:d,suffix:r,endAnchor:!0,xy:e.xy(0),dxy:e.dxy(0,0),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:T===0,isLast:T===n.length-1}),l.push(v)),["end","both"].indexOf(C.showticklabels)!==-1&&(v=M.tickText(C,e.value),E(v,{endAnchor:!1,xy:e.xy(e.crossLength-1),dxy:e.dxy(e.crossLength-2,1),axis:e.axis,length:e.crossAxis.length,font:e.axis.tickfont,isFirst:T===0,isLast:T===n.length-1}),l.push(v))}},62284:function(Q){var U=.5;Q.exports=function(t,M,E,i){var C=t[0]-M[0],T=t[1]-M[1],v=E[0]-M[0],d=E[1]-M[1],r=Math.pow(C*C+T*T,U/2),e=Math.pow(v*v+d*d,U/2),l=(e*e*C-r*r*v)*i,n=(e*e*T-r*r*d)*i,s=e*(r+e)*3,o=r*(r+e)*3;return[[M[0]+(s&&l/s),M[1]+(s&&n/s)],[M[0]-(o&&l/o),M[1]-(o&&n/o)]]}},60776:function(Q,U,t){var M=t(3400).isArrayOrTypedArray;Q.exports=function(E,i,C){var T,v,d,r,e,l,n=[],s=M(E)?E.length:E,o=M(i)?i.length:i,p=M(E)?E:null,b=M(i)?i:null;p&&(d=(p.length-1)/(p[p.length-1]-p[0])/(s-1)),b&&(r=(b.length-1)/(b[b.length-1]-b[0])/(o-1));var h,_=1/0,a=-1/0;for(v=0;v<o;v++)for(n[v]=[],l=b?(b[v]-b[0])*r:v/(o-1),T=0;T<s;T++)e=p?(p[T]-p[0])*d:T/(s-1),h=e-l*C,_=Math.min(h,_),a=Math.max(h,a),n[v][T]=h;var c=1/(a-_),f=-_*c;for(v=0;v<o;v++)for(T=0;T<s;T++)n[v][T]=c*n[v][T]+f;return n}},30180:function(Q,U,t){var M=t(62284),E=t(3400).ensureArray;function i(C,T,v){var d=-.5*v[0]+1.5*T[0],r=-.5*v[1]+1.5*T[1];return[(2*d+C[0])/3,(2*r+C[1])/3]}Q.exports=function(C,T,v,d,r,e){var l,n,s,o,p,b,h,_,a,c,f=v[0].length,x=v.length,k=r?3*f-2:f,y=e?3*x-2:x;for(C=E(C,y),T=E(T,y),s=0;s<y;s++)C[s]=E(C[s],k),T[s]=E(T[s],k);for(n=0,o=0;n<x;n++,o+=e?3:1)for(p=C[o],b=T[o],h=v[n],_=d[n],l=0,s=0;l<f;l++,s+=r?3:1)p[s]=h[l],b[s]=_[l];if(r)for(n=0,o=0;n<x;n++,o+=e?3:1){for(l=1,s=3;l<f-1;l++,s+=3)a=M([v[n][l-1],d[n][l-1]],[v[n][l],d[n][l]],[v[n][l+1],d[n][l+1]],r),C[o][s-1]=a[0][0],T[o][s-1]=a[0][1],C[o][s+1]=a[1][0],T[o][s+1]=a[1][1];c=i([C[o][0],T[o][0]],[C[o][2],T[o][2]],[C[o][3],T[o][3]]),C[o][1]=c[0],T[o][1]=c[1],c=i([C[o][k-1],T[o][k-1]],[C[o][k-3],T[o][k-3]],[C[o][k-4],T[o][k-4]]),C[o][k-2]=c[0],T[o][k-2]=c[1]}if(e)for(s=0;s<k;s++){for(o=3;o<y-3;o+=3)a=M([C[o-3][s],T[o-3][s]],[C[o][s],T[o][s]],[C[o+3][s],T[o+3][s]],e),C[o-1][s]=a[0][0],T[o-1][s]=a[0][1],C[o+1][s]=a[1][0],T[o+1][s]=a[1][1];c=i([C[0][s],T[0][s]],[C[2][s],T[2][s]],[C[3][s],T[3][s]]),C[1][s]=c[0],T[1][s]=c[1],c=i([C[y-1][s],T[y-1][s]],[C[y-3][s],T[y-3][s]],[C[y-4][s],T[y-4][s]]),C[y-2][s]=c[0],T[y-2][s]=c[1]}if(r&&e)for(o=1;o<y;o+=(o+1)%3===0?2:1){for(s=3;s<k-3;s+=3)a=M([C[o][s-3],T[o][s-3]],[C[o][s],T[o][s]],[C[o][s+3],T[o][s+3]],r),C[o][s-1]=.5*(C[o][s-1]+a[0][0]),T[o][s-1]=.5*(T[o][s-1]+a[0][1]),C[o][s+1]=.5*(C[o][s+1]+a[1][0]),T[o][s+1]=.5*(T[o][s+1]+a[1][1]);c=i([C[o][0],T[o][0]],[C[o][2],T[o][2]],[C[o][3],T[o][3]]),C[o][1]=.5*(C[o][1]+c[0]),T[o][1]=.5*(T[o][1]+c[1]),c=i([C[o][k-1],T[o][k-1]],[C[o][k-3],T[o][k-3]],[C[o][k-4],T[o][k-4]]),C[o][k-2]=.5*(C[o][k-2]+c[0]),T[o][k-2]=.5*(T[o][k-2]+c[1])}return[C,T]}},24588:function(Q){Q.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(Q){Q.exports=function(U,t,M){return t&&M?function(E,i,C,T,v){E||(E=[]);var d,r,e,l,n,s;i*=3,C*=3;var o=T*T,p=1-T,b=p*p,h=p*T*2,_=-3*b,a=3*(b-h),c=3*(h-o),f=3*o,x=v*v,k=x*v,y=1-v,A=y*y,L=A*y;for(s=0;s<U.length;s++)n=U[s],d=_*n[C][i]+a*n[C][i+1]+c*n[C][i+2]+f*n[C][i+3],r=_*n[C+1][i]+a*n[C+1][i+1]+c*n[C+1][i+2]+f*n[C+1][i+3],e=_*n[C+2][i]+a*n[C+2][i+1]+c*n[C+2][i+2]+f*n[C+2][i+3],l=_*n[C+3][i]+a*n[C+3][i+1]+c*n[C+3][i+2]+f*n[C+3][i+3],E[s]=L*d+3*(A*v*r+y*x*e)+k*l;return E}:t?function(E,i,C,T,v){E||(E=[]);var d,r,e,l;i*=3;var n=T*T,s=1-T,o=s*s,p=s*T*2,b=-3*o,h=3*(o-p),_=3*(p-n),a=3*n,c=1-v;for(e=0;e<U.length;e++)l=U[e],d=b*l[C][i]+h*l[C][i+1]+_*l[C][i+2]+a*l[C][i+3],r=b*l[C+1][i]+h*l[C+1][i+1]+_*l[C+1][i+2]+a*l[C+1][i+3],E[e]=c*d+v*r;return E}:M?function(E,i,C,T,v){E||(E=[]);var d,r,e,l,n,s;C*=3;var o=v*v,p=o*v,b=1-v,h=b*b,_=h*b;for(n=0;n<U.length;n++)s=U[n],d=s[C][i+1]-s[C][i],r=s[C+1][i+1]-s[C+1][i],e=s[C+2][i+1]-s[C+2][i],l=s[C+3][i+1]-s[C+3][i],E[n]=_*d+3*(h*v*r+b*o*e)+p*l;return E}:function(E,i,C,T,v){E||(E=[]);var d,r,e,l,n=1-v;for(e=0;e<U.length;e++)l=U[e],d=l[C][i+1]-l[C][i],r=l[C+1][i+1]-l[C+1][i],E[e]=n*d+v*r;return E}}},24464:function(Q){Q.exports=function(U,t,M){return t&&M?function(E,i,C,T,v){E||(E=[]);var d,r,e,l,n,s;i*=3,C*=3;var o=T*T,p=o*T,b=1-T,h=b*b,_=h*b,a=v*v,c=1-v,f=c*c,x=c*v*2,k=-3*f,y=3*(f-x),A=3*(x-a),L=3*a;for(s=0;s<U.length;s++)n=U[s],d=k*n[C][i]+y*n[C+1][i]+A*n[C+2][i]+L*n[C+3][i],r=k*n[C][i+1]+y*n[C+1][i+1]+A*n[C+2][i+1]+L*n[C+3][i+1],e=k*n[C][i+2]+y*n[C+1][i+2]+A*n[C+2][i+2]+L*n[C+3][i+2],l=k*n[C][i+3]+y*n[C+1][i+3]+A*n[C+2][i+3]+L*n[C+3][i+3],E[s]=_*d+3*(h*T*r+b*o*e)+p*l;return E}:t?function(E,i,C,T,v){E||(E=[]);var d,r,e,l,n,s;i*=3;var o=v*v,p=o*v,b=1-v,h=b*b,_=h*b;for(n=0;n<U.length;n++)s=U[n],d=s[C+1][i]-s[C][i],r=s[C+1][i+1]-s[C][i+1],e=s[C+1][i+2]-s[C][i+2],l=s[C+1][i+3]-s[C][i+3],E[n]=_*d+3*(h*v*r+b*o*e)+p*l;return E}:M?function(E,i,C,T,v){E||(E=[]);var d,r,e,l;C*=3;var n=1-T,s=v*v,o=1-v,p=o*o,b=o*v*2,h=-3*p,_=3*(p-b),a=3*(b-s),c=3*s;for(e=0;e<U.length;e++)l=U[e],d=h*l[C][i]+_*l[C+1][i]+a*l[C+2][i]+c*l[C+3][i],r=h*l[C][i+1]+_*l[C+1][i+1]+a*l[C+2][i+1]+c*l[C+3][i+1],E[e]=n*d+T*r;return E}:function(E,i,C,T,v){E||(E=[]);var d,r,e,l,n=1-T;for(e=0;e<U.length;e++)l=U[e],d=l[C+1][i]-l[C][i],r=l[C+1][i+1]-l[C][i+1],E[e]=n*d+T*r;return E}}},29056:function(Q){Q.exports=function(U,t,M,E,i){var C=t-2,T=M-2;return E&&i?function(v,d,r){v||(v=[]);var e,l,n,s,o,p,b=Math.max(0,Math.min(Math.floor(d),C)),h=Math.max(0,Math.min(Math.floor(r),T)),_=Math.max(0,Math.min(1,d-b)),a=Math.max(0,Math.min(1,r-h));b*=3,h*=3;var c=_*_,f=c*_,x=1-_,k=x*x,y=k*x,A=a*a,L=A*a,u=1-a,m=u*u,S=m*u;for(p=0;p<U.length;p++)o=U[p],e=y*o[h][b]+3*(k*_*o[h][b+1]+x*c*o[h][b+2])+f*o[h][b+3],l=y*o[h+1][b]+3*(k*_*o[h+1][b+1]+x*c*o[h+1][b+2])+f*o[h+1][b+3],n=y*o[h+2][b]+3*(k*_*o[h+2][b+1]+x*c*o[h+2][b+2])+f*o[h+2][b+3],s=y*o[h+3][b]+3*(k*_*o[h+3][b+1]+x*c*o[h+3][b+2])+f*o[h+3][b+3],v[p]=S*e+3*(m*a*l+u*A*n)+L*s;return v}:E?function(v,d,r){v||(v=[]);var e=Math.max(0,Math.min(Math.floor(d),C)),l=Math.max(0,Math.min(Math.floor(r),T)),n=Math.max(0,Math.min(1,d-e)),s=Math.max(0,Math.min(1,r-l)),o,p,b,h,_,a;e*=3;var c=n*n,f=c*n,x=1-n,k=x*x,y=k*x,A=1-s;for(_=0;_<U.length;_++)a=U[_],o=A*a[l][e]+s*a[l+1][e],p=A*a[l][e+1]+s*a[l+1][e+1],b=A*a[l][e+2]+s*a[l+1][e+1],h=A*a[l][e+3]+s*a[l+1][e+1],v[_]=y*o+3*(k*n*p+x*c*b)+f*h;return v}:i?function(v,d,r){v||(v=[]);var e=Math.max(0,Math.min(Math.floor(d),C)),l=Math.max(0,Math.min(Math.floor(r),T)),n=Math.max(0,Math.min(1,d-e)),s=Math.max(0,Math.min(1,r-l)),o,p,b,h,_,a;l*=3;var c=s*s,f=c*s,x=1-s,k=x*x,y=k*x,A=1-n;for(_=0;_<U.length;_++)a=U[_],o=A*a[l][e]+n*a[l][e+1],p=A*a[l+1][e]+n*a[l+1][e+1],b=A*a[l+2][e]+n*a[l+2][e+1],h=A*a[l+3][e]+n*a[l+3][e+1],v[_]=y*o+3*(k*s*p+x*c*b)+f*h;return v}:function(v,d,r){v||(v=[]);var e=Math.max(0,Math.min(Math.floor(d),C)),l=Math.max(0,Math.min(Math.floor(r),T)),n=Math.max(0,Math.min(1,d-e)),s=Math.max(0,Math.min(1,r-l)),o,p,b,h,_=1-s,a=1-n;for(b=0;b<U.length;b++)h=U[b],o=a*h[l][e]+n*h[l][e+1],p=a*h[l+1][e]+n*h[l+1][e+1],v[b]=_*o+s*p;return v}}},38356:function(Q,U,t){var M=t(3400),E=t(86411),i=t(93504),C=t(85720),T=t(22548);Q.exports=function(v,d,r,e){function l(o,p){return M.coerce(v,d,C,o,p)}d._clipPathId="clip"+d.uid+"carpet";var n=l("color",T.defaultLine);if(M.coerceFont(l,"font"),l("carpet"),i(v,d,e,l,n),!d.a||!d.b){d.visible=!1;return}d.a.length<3&&(d.aaxis.smoothing=0),d.b.length<3&&(d.baxis.smoothing=0);var s=E(v,d,l);s||(d.visible=!1),d._cheater&&l("cheaterslope"),l("zorder")}},95856:function(Q,U,t){Q.exports={attributes:t(85720),supplyDefaults:t(38356),plot:t(164),calc:t(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(Q){Q.exports=function(U,t){for(var M=U._fullData.length,E,i=0;i<M;i++){var C=U._fullData[i];if(C.index!==t.index&&C.type==="carpet"&&(E||(E=C),C.carpet===t.carpet))return C}return E}},53416:function(Q){Q.exports=function(U,t,M){if(U.length===0)return"";var E,i=[],C=M?3:1;for(E=0;E<U.length;E+=C)i.push(U[E]+","+t[E]),M&&E<U.length-C&&(i.push("C"),i.push([U[E+1]+","+t[E+1],U[E+2]+","+t[E+2]+" "].join(" ")));return i.join(M?"":"L")}},87072:function(Q,U,t){var M=t(3400).isArrayOrTypedArray;Q.exports=function(E,i,C){var T;for(M(E)?E.length>i.length&&(E=E.slice(0,i.length)):E=[],T=0;T<i.length;T++)E[T]=C(i[T]);return E}},15584:function(Q){Q.exports=function(U,t,M,E,i,C){var T=i[0]*U.dpdx(t),v=i[1]*U.dpdy(M),d=1,r=1;if(C){var e=Math.sqrt(i[0]*i[0]+i[1]*i[1]),l=Math.sqrt(C[0]*C[0]+C[1]*C[1]),n=(i[0]*C[0]+i[1]*C[1])/e/l;r=Math.max(0,n)}var s=Math.atan2(v,T)*180/Math.PI;return s<-90?(s+=180,d=-d):s>90&&(s-=180,d=-d),{angle:s,flip:d,p:U.c2p(E,t,M),offsetMultplier:r}}},164:function(Q,U,t){var M=t(33428),E=t(43616),i=t(87072),C=t(53416),T=t(15584),v=t(72736),d=t(3400),r=d.strRotate,e=d.strTranslate,l=t(84284);Q.exports=function(a,c,f,x){var k=a._context.staticPlot,y=c.xaxis,A=c.yaxis,L=a._fullLayout,u=L._clips;d.makeTraceGroups(x,f,"trace").each(function(m){var S=M.select(this),w=m[0],I=w.trace,O=I.aaxis,D=I.baxis,P=d.ensureSingle(S,"g","minorlayer"),F=d.ensureSingle(S,"g","majorlayer"),R=d.ensureSingle(S,"g","boundarylayer"),B=d.ensureSingle(S,"g","labellayer");S.style("opacity",I.opacity),s(y,A,F,O,"a",O._gridlines,!0),s(y,A,F,D,"b",D._gridlines,!0),s(y,A,P,O,"a",O._minorgridlines,!0),s(y,A,P,D,"b",D._minorgridlines,!0),s(y,A,R,O,"a-boundary",O._boundarylines,k),s(y,A,R,D,"b-boundary",D._boundarylines,k);var N=o(a,y,A,I,w,B,O._labels,"a-label"),G=o(a,y,A,I,w,B,D._labels,"b-label");p(a,B,I,w,y,A,N,G),n(I,w,u,y,A)})};function n(a,c,f,x,k){var y,A,L,u,m=f.select("#"+a._clipPathId);m.size()||(m=f.append("clipPath").classed("carpetclip",!0));var S=d.ensureSingle(m,"path","carpetboundary"),w=c.clipsegments,I=[];for(u=0;u<w.length;u++)y=w[u],A=i([],y.x,x.c2p),L=i([],y.y,k.c2p),I.push(C(A,L,y.bicubic));var O="M"+I.join("L")+"Z";m.attr("id",a._clipPathId),S.attr("d",O)}function s(a,c,f,x,k,y,A){var L="const-"+k+"-lines",u=f.selectAll("."+L).data(y);u.enter().append("path").classed(L,!0).style("vector-effect",A?"none":"non-scaling-stroke"),u.each(function(m){var S=m,w=S.x,I=S.y,O=i([],w,a.c2p),D=i([],I,c.c2p),P="M"+C(O,D,S.smoothing),F=M.select(this);F.attr("d",P).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",E.dashStyle(S.dash,S.width)).style("fill","none")}),u.exit().remove()}function o(a,c,f,x,k,y,A,L){var u=y.selectAll("text."+L).data(A);u.enter().append("text").classed(L,!0);var m=0,S={};return u.each(function(w,I){var O;if(w.axis.tickangle==="auto")O=T(x,c,f,w.xy,w.dxy);else{var D=(w.axis.tickangle+180)*Math.PI/180;O=T(x,c,f,w.xy,[Math.cos(D),Math.sin(D)])}I||(S={angle:O.angle,flip:O.flip});var P=(w.endAnchor?-1:1)*O.flip,F=M.select(this).attr({"text-anchor":P>0?"start":"end","data-notex":1}).call(E.font,w.font).text(w.text).call(v.convertToTspans,a),R=E.bBox(this);F.attr("transform",e(O.p[0],O.p[1])+r(O.angle)+e(w.axis.labelpadding*P,R.height*.3)),m=Math.max(m,R.width+w.axis.labelpadding)}),u.exit().remove(),S.maxExtent=m,S}function p(a,c,f,x,k,y,A,L){var u,m,S,w,I=d.aggNums(Math.min,null,f.a),O=d.aggNums(Math.max,null,f.a),D=d.aggNums(Math.min,null,f.b),P=d.aggNums(Math.max,null,f.b);u=.5*(I+O),m=D,S=f.ab2xy(u,m,!0),w=f.dxyda_rough(u,m),A.angle===void 0&&d.extendFlat(A,T(f,k,y,S,f.dxydb_rough(u,m))),_(a,c,f,x,S,w,f.aaxis,k,y,A,"a-title"),u=I,m=.5*(D+P),S=f.ab2xy(u,m,!0),w=f.dxydb_rough(u,m),L.angle===void 0&&d.extendFlat(L,T(f,k,y,S,f.dxyda_rough(u,m))),_(a,c,f,x,S,w,f.baxis,k,y,L,"b-title")}var b=l.LINE_SPACING,h=(1-l.MID_SHIFT)/b+1;function _(a,c,f,x,k,y,A,L,u,m,S){var w=[];A.title.text&&w.push(A.title.text);var I=c.selectAll("text."+S).data(w),O=m.maxExtent;I.enter().append("text").classed(S,!0),I.each(function(){var D=T(f,L,u,k,y);["start","both"].indexOf(A.showticklabels)===-1&&(O=0);var P=A.title.font.size;O+=P+A.title.offset;var F=m.angle+(m.flip<0?180:0),R=(F-D.angle+450)%360,B=R>90&&R<270,N=M.select(this);N.text(A.title.text).call(v.convertToTspans,a),B&&(O=(-v.lineCount(N)+h)*b*P-O),N.attr("transform",e(D.p[0],D.p[1])+r(D.angle)+e(0,O)).attr("text-anchor","middle").call(E.font,A.title.font)}),I.exit().remove()}},81e3:function(Q,U,t){var M=t(24588),E=t(14952).findBin,i=t(30180),C=t(29056),T=t(26435),v=t(24464);Q.exports=function(d){var r=d._a,e=d._b,l=r.length,n=e.length,s=d.aaxis,o=d.baxis,p=r[0],b=r[l-1],h=e[0],_=e[n-1],a=r[r.length-1]-r[0],c=e[e.length-1]-e[0],f=a*M.RELATIVE_CULL_TOLERANCE,x=c*M.RELATIVE_CULL_TOLERANCE;p-=f,b+=f,h-=x,_+=x,d.isVisible=function(k,y){return k>p&&k<b&&y>h&&y<_},d.isOccluded=function(k,y){return k<p||k>b||y<h||y>_},d.setScale=function(){var k=d._x,y=d._y,A=i(d._xctrl,d._yctrl,k,y,s.smoothing,o.smoothing);d._xctrl=A[0],d._yctrl=A[1],d.evalxy=C([d._xctrl,d._yctrl],l,n,s.smoothing,o.smoothing),d.dxydi=T([d._xctrl,d._yctrl],s.smoothing,o.smoothing),d.dxydj=v([d._xctrl,d._yctrl],s.smoothing,o.smoothing)},d.i2a=function(k){var y=Math.max(0,Math.floor(k[0]),l-2),A=k[0]-y;return(1-A)*r[y]+A*r[y+1]},d.j2b=function(k){var y=Math.max(0,Math.floor(k[1]),l-2),A=k[1]-y;return(1-A)*e[y]+A*e[y+1]},d.ij2ab=function(k){return[d.i2a(k[0]),d.j2b(k[1])]},d.a2i=function(k){var y=Math.max(0,Math.min(E(k,r),l-2)),A=r[y],L=r[y+1];return Math.max(0,Math.min(l-1,y+(k-A)/(L-A)))},d.b2j=function(k){var y=Math.max(0,Math.min(E(k,e),n-2)),A=e[y],L=e[y+1];return Math.max(0,Math.min(n-1,y+(k-A)/(L-A)))},d.ab2ij=function(k){return[d.a2i(k[0]),d.b2j(k[1])]},d.i2c=function(k,y){return d.evalxy([],k,y)},d.ab2xy=function(k,y,A){if(!A&&(k<r[0]||k>r[l-1]|y<e[0]||y>e[n-1]))return[!1,!1];var L=d.a2i(k),u=d.b2j(y),m=d.evalxy([],L,u);if(A){var S=0,w=0,I=[],O,D,P,F;k<r[0]?(O=0,D=0,S=(k-r[0])/(r[1]-r[0])):k>r[l-1]?(O=l-2,D=1,S=(k-r[l-1])/(r[l-1]-r[l-2])):(O=Math.max(0,Math.min(l-2,Math.floor(L))),D=L-O),y<e[0]?(P=0,F=0,w=(y-e[0])/(e[1]-e[0])):y>e[n-1]?(P=n-2,F=1,w=(y-e[n-1])/(e[n-1]-e[n-2])):(P=Math.max(0,Math.min(n-2,Math.floor(u))),F=u-P),S&&(d.dxydi(I,O,P,D,F),m[0]+=I[0]*S,m[1]+=I[1]*S),w&&(d.dxydj(I,O,P,D,F),m[0]+=I[0]*w,m[1]+=I[1]*w)}return m},d.c2p=function(k,y,A){return[y.c2p(k[0]),A.c2p(k[1])]},d.p2x=function(k,y,A){return[y.p2c(k[0]),A.p2c(k[1])]},d.dadi=function(k){var y=Math.max(0,Math.min(r.length-2,k));return r[y+1]-r[y]},d.dbdj=function(k){var y=Math.max(0,Math.min(e.length-2,k));return e[y+1]-e[y]},d.dxyda=function(k,y,A,L){var u=d.dxydi(null,k,y,A,L),m=d.dadi(k,A);return[u[0]/m,u[1]/m]},d.dxydb=function(k,y,A,L){var u=d.dxydj(null,k,y,A,L),m=d.dbdj(y,L);return[u[0]/m,u[1]/m]},d.dxyda_rough=function(k,y,A){var L=a*(A||.1),u=d.ab2xy(k+L,y,!0),m=d.ab2xy(k-L,y,!0);return[(u[0]-m[0])*.5/L,(u[1]-m[1])*.5/L]},d.dxydb_rough=function(k,y,A){var L=c*(A||.1),u=d.ab2xy(k,y+L,!0),m=d.ab2xy(k,y-L,!0);return[(u[0]-m[0])*.5/L,(u[1]-m[1])*.5/L]},d.dpdx=function(k){return k._m},d.dpdy=function(k){return k._m}}},51512:function(Q,U,t){var M=t(3400);Q.exports=function(E,i,C){var T,v,d,r=[],e=[],l=E[0].length,n=E.length;function s(G,X){var J=0,it,nt=0;return G>0&&(it=E[X][G-1])!==void 0&&(nt++,J+=it),G<l-1&&(it=E[X][G+1])!==void 0&&(nt++,J+=it),X>0&&(it=E[X-1][G])!==void 0&&(nt++,J+=it),X<n-1&&(it=E[X+1][G])!==void 0&&(nt++,J+=it),J/Math.max(1,nt)}var o=0;for(T=0;T<l;T++)for(v=0;v<n;v++)E[v][T]===void 0&&(r.push(T),e.push(v),E[v][T]=s(T,v)),o=Math.max(o,Math.abs(E[v][T]));if(!r.length)return E;var p,b,h,_,a,c,f,x,k,y,A,L=1e-5,u=0,m=100,S=0,w=r.length;do{for(u=0,d=0;d<w;d++){T=r[d],v=e[d];var I=0,O=0,D,P,F,R,B,N;T===0?(B=Math.min(l-1,2),F=i[B],R=i[1],D=E[v][B],P=E[v][1],O+=P+(P-D)*(i[0]-R)/(R-F),I++):T===l-1&&(B=Math.max(0,l-3),F=i[B],R=i[l-2],D=E[v][B],P=E[v][l-2],O+=P+(P-D)*(i[l-1]-R)/(R-F),I++),(T===0||T===l-1)&&v>0&&v<n-1&&(p=C[v+1]-C[v],b=C[v]-C[v-1],O+=(b*E[v+1][T]+p*E[v-1][T])/(b+p),I++),v===0?(N=Math.min(n-1,2),F=C[N],R=C[1],D=E[N][T],P=E[1][T],O+=P+(P-D)*(C[0]-R)/(R-F),I++):v===n-1&&(N=Math.max(0,n-3),F=C[N],R=C[n-2],D=E[N][T],P=E[n-2][T],O+=P+(P-D)*(C[n-1]-R)/(R-F),I++),(v===0||v===n-1)&&T>0&&T<l-1&&(p=i[T+1]-i[T],b=i[T]-i[T-1],O+=(b*E[v][T+1]+p*E[v][T-1])/(b+p),I++),I?O/=I:(h=i[T+1]-i[T],_=i[T]-i[T-1],a=C[v+1]-C[v],c=C[v]-C[v-1],f=h*_*(h+_),x=a*c*(a+c),O=(f*(c*E[v+1][T]+a*E[v-1][T])+x*(_*E[v][T+1]+h*E[v][T-1]))/(x*(_+h)+f*(c+a))),k=O-E[v][T],y=k/o,u+=y*y,A=I?0:.85,E[v][T]+=k*(1+A)}u=Math.sqrt(u)}while(S++<m&&u>L);return M.log("Smoother converged to",u,"after",S,"iterations"),E}},86411:function(Q,U,t){var M=t(3400).isArray1D;Q.exports=function(E,i,C){var T=C("x"),v=T&&T.length,d=C("y"),r=d&&d.length;if(!v&&!r)return!1;if(i._cheater=!T,(!v||M(T))&&(!r||M(d))){var e=v?T.length:1/0;r&&(e=Math.min(e,d.length)),i.a&&i.a.length&&(e=Math.min(e,i.a.length)),i.b&&i.b.length&&(e=Math.min(e,i.b.length)),i._length=e}else i._length=null;return!0}},83372:function(Q,U,t){var M=t(21776).Ks,E=t(6096),i=t(49084),C=t(45464),T=t(22548).defaultLine,v=t(92880).extendFlat,d=E.marker.line;Q.exports=v({locations:{valType:"data_array",editType:"calc"},locationmode:E.locationmode,z:{valType:"data_array",editType:"calc"},geojson:v({},E.geojson,{}),featureidkey:E.featureidkey,text:v({},E.text,{}),hovertext:v({},E.hovertext,{}),marker:{line:{color:v({},d.color,{dflt:T}),width:v({},d.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:E.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:E.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:v({},C.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:M(),showlegend:v({},C.showlegend,{dflt:!1})},i("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(Q,U,t){var M=t(38248),E=t(39032).BADNUM,i=t(47128),C=t(20148),T=t(4500);function v(d){return d&&typeof d=="string"}Q.exports=function(d,r){var e=r._length,l=new Array(e),n;r.geojson?n=function(h){return v(h)||M(h)}:n=v;for(var s=0;s<e;s++){var o=l[s]={},p=r.locations[s],b=r.z[s];n(p)&&M(b)?(o.loc=p,o.z=b):(o.loc=null,o.z=E),o.index=s}return C(l,r),i(d,r,{vals:r.z,containerStr:"",cLetter:"z"}),T(l,r),l}},30972:function(Q,U,t){var M=t(3400),E=t(27260),i=t(83372);Q.exports=function(C,T,v,d){function r(b,h){return M.coerce(C,T,i,b,h)}var e=r("locations"),l=r("z");if(!(e&&e.length&&M.isArrayOrTypedArray(l)&&l.length)){T.visible=!1;return}T._length=Math.min(e.length,l.length);var n=r("geojson"),s;(typeof n=="string"&&n!==""||M.isPlainObject(n))&&(s="geojson-id");var o=r("locationmode",s);o==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var p=r("marker.line.width");p&&r("marker.line.color"),r("marker.opacity"),E(C,T,d,r,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(T,r)}},52428:function(Q){Q.exports=function(U,t,M,E,i){U.location=t.location,U.z=t.z;var C=E[i];return C.fIn&&C.fIn.properties&&(U.properties=C.fIn.properties),U.ct=C.ct,U}},69224:function(Q,U,t){var M=t(54460),E=t(83372),i=t(3400).fillText;Q.exports=function(T,v,d){var r=T.cd,e=r[0].trace,l=T.subplot,n,s,o,p,b=[v,d],h=[v+360,d];for(s=0;s<r.length;s++)if(n=r[s],p=!1,n._polygons){for(o=0;o<n._polygons.length;o++)n._polygons[o].contains(b)&&(p=!p),n._polygons[o].contains(h)&&(p=!p);if(p)break}if(!(!p||!n))return T.x0=T.x1=T.xa.c2p(n.ct),T.y0=T.y1=T.ya.c2p(n.ct),T.index=n.index,T.location=n.loc,T.z=n.z,T.zLabel=M.tickText(l.mockAxis,l.mockAxis.c2l(n.z),"hover").text,T.hovertemplate=n.hovertemplate,C(T,e,n),[T]};function C(T,v,d){if(!v.hovertemplate){var r=d.hi||v.hoverinfo,e=String(d.loc),l=r==="all"?E.hoverinfo.flags:r.split("+"),n=l.indexOf("name")!==-1,s=l.indexOf("location")!==-1,o=l.indexOf("z")!==-1,p=l.indexOf("text")!==-1,b=!n&&s,h=[];b?T.nameOverride=e:(n&&(T.nameOverride=v.name),s&&h.push(e)),o&&h.push(T.zLabel),p&&i(d,v,h),T.extraText=h.join("<br>")}}},54272:function(Q,U,t){Q.exports={attributes:t(83372),supplyDefaults:t(30972),colorbar:t(96288),calc:t(7924),calcGeoJSON:t(88364).calcGeoJSON,plot:t(88364).plot,style:t(7947).style,styleOnSelect:t(7947).styleOnSelect,hoverPoints:t(69224),eventData:t(52428),selectPoints:t(17328),moduleType:"trace",name:"choropleth",basePlotModule:t(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(Q,U,t){var M=t(33428),E=t(3400),i=t(27144),C=t(59972).getTopojsonFeatures,T=t(19280).findExtremes,v=t(7947).style;function d(e,l,n){var s=l.layers.backplot.select(".choroplethlayer");E.makeTraceGroups(s,n,"trace choropleth").each(function(o){var p=M.select(this),b=p.selectAll("path.choroplethlocation").data(E.identity);b.enter().append("path").classed("choroplethlocation",!0),b.exit().remove(),v(e,o)})}function r(e,l){for(var n=e[0].trace,s=l[n.geo],o=s._subplot,p=n.locationmode,b=n._length,h=p==="geojson-id"?i.extractTraceFeature(e):C(n,o.topojson),_=[],a=[],c=0;c<b;c++){var f=e[c],x=p==="geojson-id"?f.fOut:i.locationToFeature(p,f.loc,h);if(x){f.geojson=x,f.ct=x.properties.ct,f._polygons=i.feature2polygons(x);var k=i.computeBbox(x);_.push(k[0],k[2]),a.push(k[1],k[3])}else f.geojson=null}if(s.fitbounds==="geojson"&&p==="geojson-id"){var y=i.computeBbox(i.getTraceGeojson(n));_=[y[0],y[2]],a=[y[1],y[3]]}var A={padded:!0};n._extremes.lon=T(s.lonaxis._ax,_,A),n._extremes.lat=T(s.lataxis._ax,a,A)}Q.exports={calcGeoJSON:r,plot:d}},17328:function(Q){Q.exports=function(U,t){var M=U.cd,E=U.xaxis,i=U.yaxis,C=[],T,v,d,r,e;if(t===!1)for(T=0;T<M.length;T++)M[T].selected=0;else for(T=0;T<M.length;T++)v=M[T],d=v.ct,d&&(r=E.c2p(d),e=i.c2p(d),t.contains([r,e],null,T,U)?(C.push({pointNumber:T,lon:d[0],lat:d[1]}),v.selected=1):v.selected=0);return C}},7947:function(Q,U,t){var M=t(33428),E=t(76308),i=t(43616),C=t(8932);function T(r,e){e&&v(r,e)}function v(r,e){var l=e[0].trace,n=e[0].node3,s=n.selectAll(".choroplethlocation"),o=l.marker||{},p=o.line||{},b=C.makeColorScaleFuncFromTrace(l);s.each(function(h){M.select(this).attr("fill",b(h.z)).call(E.stroke,h.mlc||p.color).call(i.dashLine,"",h.mlw||p.width||0).style("opacity",o.opacity)}),i.selectedPointStyle(s,l)}function d(r,e){var l=e[0].node3,n=e[0].trace;n.selectedpoints?i.selectedPointStyle(l.selectAll(".choroplethlocation"),n):v(r,e)}Q.exports={style:T,styleOnSelect:d}},45608:function(Q,U,t){var M=t(83372),E=t(49084),i=t(21776).Ks,C=t(45464),T=t(92880).extendFlat;Q.exports=T({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:T({},M.featureidkey,{}),below:{valType:"string",editType:"plot"},text:M.text,hovertext:M.hovertext,marker:{line:{color:T({},M.marker.line.color,{editType:"plot"}),width:T({},M.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:T({},M.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:T({},M.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:T({},M.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:M.hoverinfo,hovertemplate:i({},{keys:["properties"]}),showlegend:T({},C.showlegend,{dflt:!1})},E("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(Q,U,t){var M=t(38248),E=t(3400),i=t(8932),C=t(43616),T=t(44808).makeBlank,v=t(27144);function d(e){var l=e[0].trace,n=l.visible===!0&&l._length!==0,s={layout:{visibility:"none"},paint:{}},o={layout:{visibility:"none"},paint:{}},p=l._opts={fill:s,line:o,geojson:T()};if(!n)return p;var b=v.extractTraceFeature(e);if(!b)return p;var h=i.makeColorScaleFuncFromTrace(l),_=l.marker,a=_.line||{},c;E.isArrayOrTypedArray(_.opacity)&&(c=function(m){var S=m.mo;return M(S)?+E.constrain(S,0,1):0});var f;E.isArrayOrTypedArray(a.color)&&(f=function(m){return m.mlc});var x;E.isArrayOrTypedArray(a.width)&&(x=function(m){return m.mlw});for(var k=0;k<e.length;k++){var y=e[k],A=y.fOut;if(A){var L=A.properties;L.fc=h(y.z),c&&(L.mo=c(y)),f&&(L.mlc=f(y)),x&&(L.mlw=x(y)),y.ct=L.ct,y._polygons=v.feature2polygons(A)}}var u=c?{type:"identity",property:"mo"}:_.opacity;return E.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":u}),E.extendFlat(o.paint,{"line-color":f?{type:"identity",property:"mlc"}:a.color,"line-width":x?{type:"identity",property:"mlw"}:a.width,"line-opacity":u}),s.layout.visibility="visible",o.layout.visibility="visible",p.geojson={type:"FeatureCollection",features:b},r(e),p}function r(e){var l=e[0].trace,n=l._opts,s;if(l.selectedpoints){for(var o=C.makeSelectedPointStyleFns(l),p=0;p<e.length;p++){var b=e[p];b.fOut&&(b.fOut.properties.mo2=o.selectedOpacityFn(b))}s={type:"identity",property:"mo2"}}else s=E.isArrayOrTypedArray(l.marker.opacity)?{type:"identity",property:"mo"}:l.marker.opacity;return E.extendFlat(n.fill.paint,{"fill-opacity":s}),E.extendFlat(n.line.paint,{"line-opacity":s}),n}Q.exports={convert:d,convertOnSelect:r}},9352:function(Q,U,t){var M=t(3400),E=t(27260),i=t(45608);Q.exports=function(C,T,v,d){function r(o,p){return M.coerce(C,T,i,o,p)}var e=r("locations"),l=r("z"),n=r("geojson");if(!M.isArrayOrTypedArray(e)||!e.length||!M.isArrayOrTypedArray(l)||!l.length||!(typeof n=="string"&&n!==""||M.isPlainObject(n))){T.visible=!1;return}r("featureidkey"),T._length=Math.min(e.length,l.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var s=r("marker.line.width");s&&r("marker.line.color"),r("marker.opacity"),E(C,T,d,r,{prefix:"",cLetter:"z"}),M.coerceSelectionMarkerOpacity(T,r)}},85404:function(Q,U,t){Q.exports={attributes:t(45608),supplyDefaults:t(9352),colorbar:t(96288),calc:t(7924),plot:t(61288),hoverPoints:t(69224),eventData:t(52428),selectPoints:t(17328),styleOnSelect:function(M,E){if(E){var i=E[0].trace;i._glTrace.updateOnSelect(E)}},getBelow:function(M,E){for(var i=E.getMapLayers(),C=i.length-2;C>=0;C--){var T=i[C].id;if(typeof T=="string"&&T.indexOf("water")===0){for(var v=C+1;v<i.length;v++)if(T=i[v].id,typeof T=="string"&&T.indexOf("plotly-")===-1)return T}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(Q,U,t){var M=t(13504).convert,E=t(13504).convertOnSelect,i=t(47552).traceLayerPrefix;function C(v,d){this.type="choroplethmapbox",this.subplot=v,this.uid=d,this.sourceId="source-"+d,this.layerList=[["fill",i+d+"-fill"],["line",i+d+"-line"]],this.below=null}var T=C.prototype;T.update=function(v){this._update(M(v)),v[0].trace._glTrace=this},T.updateOnSelect=function(v){this._update(E(v))},T._update=function(v){var d=this.subplot,r=this.layerList,e=d.belowLookup["trace-"+this.uid];d.map.getSource(this.sourceId).setData(v.geojson),e!==this.below&&(this._removeLayers(),this._addLayers(v,e),this.below=e);for(var l=0;l<r.length;l++){var n=r[l],s=n[0],o=n[1],p=v[s];d.setOptions(o,"setLayoutProperty",p.layout),p.layout.visibility==="visible"&&d.setOptions(o,"setPaintProperty",p.paint)}},T._addLayers=function(v,d){for(var r=this.subplot,e=this.layerList,l=this.sourceId,n=0;n<e.length;n++){var s=e[n],o=s[0],p=v[o];r.addLayer({type:o,id:s[1],source:l,layout:p.layout,paint:p.paint},d)}},T._removeLayers=function(){for(var v=this.subplot.map,d=this.layerList,r=d.length-1;r>=0;r--)v.removeLayer(d[r][1])},T.dispose=function(){var v=this.subplot.map;this._removeLayers(),v.removeSource(this.sourceId)},Q.exports=function(v,d){var r=d[0].trace,e=new C(v,r.uid),l=e.sourceId,n=M(d),s=e.below=v.belowLookup["trace-"+r.uid];return v.map.addSource(l,{type:"geojson",data:n.geojson}),e._addLayers(n,s),d[0].trace._glTrace=e,e}},86040:function(Q,U,t){var M=t(49084),E=t(29736).axisHoverFormat,i=t(21776).Ks,C=t(52948),T=t(45464),v=t(92880).extendFlat,d={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["norm"]}),uhoverformat:E("u",1),vhoverformat:E("v",1),whoverformat:E("w",1),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),showlegend:v({},T.showlegend,{dflt:!1})};v(d,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(e){d[e]=C[e]}),d.hoverinfo=v({},T.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),d.transforms=void 0,Q.exports=d},83344:function(Q,U,t){var M=t(47128);Q.exports=function(E,i){for(var C=i.u,T=i.v,v=i.w,d=Math.min(i.x.length,i.y.length,i.z.length,C.length,T.length,v.length),r=-1/0,e=1/0,l=0;l<d;l++){var n=C[l],s=T[l],o=v[l],p=Math.sqrt(n*n+s*s+o*o);r=Math.max(r,p),e=Math.min(e,p)}i._len=d,i._normMax=r,M(E,i,{vals:[e,r],containerStr:"",cLetter:"c"})}},6648:function(Q,U,t){var M=t(67792).gl_cone3d,E=t(67792).gl_cone3d.createConeMesh,i=t(3400).simpleMap,C=t(33040).parseColorScale,T=t(8932).extractOpts,v=t(3400).isArrayOrTypedArray,d=t(52094);function r(b,h){this.scene=b,this.uid=h,this.mesh=null,this.data=null}var e=r.prototype;e.handlePick=function(b){if(b.object===this.mesh){var h=b.index=b.data.index,_=this.data.x[h],a=this.data.y[h],c=this.data.z[h],f=this.data.u[h],x=this.data.v[h],k=this.data.w[h];b.traceCoordinate=[_,a,c,f,x,k,Math.sqrt(f*f+x*x+k*k)];var y=this.data.hovertext||this.data.text;return v(y)&&y[h]!==void 0?b.textLabel=y[h]:y&&(b.textLabel=y),!0}};var l={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(b,h){var _=b.fullSceneLayout,a=b.dataScale,c={};function f(L,u){var m=_[u],S=a[l[u]];return i(L,function(w){return m.d2l(w)*S})}c.vectors=d(f(h.u,"xaxis"),f(h.v,"yaxis"),f(h.w,"zaxis"),h._len),c.positions=d(f(h.x,"xaxis"),f(h.y,"yaxis"),f(h.z,"zaxis"),h._len);var x=T(h);c.colormap=C(h),c.vertexIntensityBounds=[x.min/h._normMax,x.max/h._normMax],c.coneOffset=n[h.anchor];var k=h.sizemode;k==="scaled"?c.coneSize=h.sizeref||.5:k==="absolute"?c.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:k==="raw"&&(c.coneSize=h.sizeref),c.coneSizemode=k;var y=M(c),A=h.lightposition;return y.lightPosition=[A.x,A.y,A.z],y.ambient=h.lighting.ambient,y.diffuse=h.lighting.diffuse,y.specular=h.lighting.specular,y.roughness=h.lighting.roughness,y.fresnel=h.lighting.fresnel,y.opacity=h.opacity,h._pad=s[h.anchor]*y.vectorScale*y.coneScale*h._normMax,y}e.update=function(b){this.data=b;var h=o(this.scene,b);this.mesh.update(h)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(b,h){var _=b.glplot.gl,a=o(b,h),c=E(_,a),f=new r(b,h.uid);return f.mesh=c,f.data=h,c._trace=f,b.glplot.add(c),f}Q.exports=p},86096:function(Q,U,t){var M=t(3400),E=t(27260),i=t(86040);Q.exports=function(C,T,v,d){function r(h,_){return M.coerce(C,T,i,h,_)}var e=r("u"),l=r("v"),n=r("w"),s=r("x"),o=r("y"),p=r("z");if(!e||!e.length||!l||!l.length||!n||!n.length||!s||!s.length||!o||!o.length||!p||!p.length){T.visible=!1;return}var b=r("sizemode");r("sizeref",b==="raw"?1:.5),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),E(C,T,d,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),T._length=null}},26048:function(Q,U,t){Q.exports={moduleType:"trace",name:"cone",basePlotModule:t(12536),categories:["gl3d","showLegend"],attributes:t(86040),supplyDefaults:t(86096),colorbar:{min:"cmin",max:"cmax"},calc:t(83344),plot:t(6648),eventData:function(M,E){return M.norm=E.traceCoordinate[6],M},meta:{}}},67104:function(Q,U,t){var M=t(83328),E=t(52904),i=t(29736),C=i.axisHoverFormat,T=i.descriptionOnlyNumbers,v=t(49084),d=t(98192).u,r=t(25376),e=t(92880).extendFlat,l=t(69104),n=l.COMPARISON_OPS2,s=l.INTERVAL_OPS,o=E.line;Q.exports=e({z:M.z,x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:E.xperiod0,yperiod0:E.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,text:M.text,hovertext:M.hovertext,transpose:M.transpose,xtype:M.xtype,ytype:M.ytype,xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z",1),hovertemplate:M.hovertemplate,texttemplate:e({},M.texttemplate,{}),textfont:e({},M.textfont,{}),hoverongaps:M.hoverongaps,connectgaps:e({},M.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:T("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:e({},o.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:d,smoothing:e({},o.smoothing,{}),editType:"plot"},zorder:E.zorder},v("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(Q,U,t){var M=t(8932),E=t(19512),i=t(54444),C=t(46960);Q.exports=function(T,v){var d=E(T,v),r=d[0].z;i(v,r);var e=v.contours,l=M.extractOpts(v),n;if(e.coloring==="heatmap"&&l.auto&&v.autocontour===!1){var s=e.start,o=C(e),p=e.size||1,b=Math.floor((o-s)/p)+1;isFinite(p)||(p=1,b=1);var h=s-p/2,_=h+b*p;n=[h,_]}else n=r;return M.calc(T,v,{vals:n,cLetter:"z"}),d}},56008:function(Q){Q.exports=function(U,t){var M=U[0],E=M.z,i;switch(t.type){case"levels":var C=Math.min(E[0][0],E[0][1]);for(i=0;i<U.length;i++){var T=U[i];T.prefixBoundary=!T.edgepaths.length&&(C>T.level||T.starts.length&&C===T.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var v=M.x.length,d=M.y.length,r=-1/0,e=1/0;for(i=0;i<d;i++)e=Math.min(e,E[i][0]),e=Math.min(e,E[i][v-1]),r=Math.max(r,E[i][0]),r=Math.max(r,E[i][v-1]);for(i=1;i<v-1;i++)e=Math.min(e,E[0][i]),e=Math.min(e,E[d-1][i]),r=Math.max(r,E[0][i]),r=Math.max(r,E[d-1][i]);var l=t.value,n,s;switch(t._operation){case">":l>r&&(M.prefixBoundary=!0);break;case"<":(l<e||M.starts.length&&l===e)&&(M.prefixBoundary=!0);break;case"[]":n=Math.min(l[0],l[1]),s=Math.max(l[0],l[1]),(s<e||n>r||M.starts.length&&s===e)&&(M.prefixBoundary=!0);break;case"][":n=Math.min(l[0],l[1]),s=Math.max(l[0],l[1]),n<e&&s>r&&(M.prefixBoundary=!0);break}break}}},55296:function(Q,U,t){var M=t(8932),E=t(41076),i=t(46960);function C(T,v,d){var r=v.contours,e=v.line,l=r.size||1,n=r.coloring,s=E(v,{isColorbar:!0});if(n==="heatmap"){var o=M.extractOpts(v);d._fillgradient=o.reversescale?M.flipScale(o.colorscale):o.colorscale,d._zrange=[o.min,o.max]}else n==="fill"&&(d._fillcolor=s);d._line={color:n==="lines"?s:e.color,width:r.showlines!==!1?e.width:0,dash:e.dash},d._levels={start:r.start,end:i(r),size:l}}Q.exports={min:"zmin",max:"zmax",calc:C}},93252:function(Q){Q.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(Q,U,t){var M=t(38248),E=t(17428),i=t(76308),C=i.addOpacity,T=i.opacity,v=t(69104),d=t(3400).isArrayOrTypedArray,r=v.CONSTRAINT_REDUCTION,e=v.COMPARISON_OPS2;Q.exports=function(n,s,o,p,b,h){var _=s.contours,a,c,f,x=o("contours.operation");if(_._operation=r[x],l(o,_),x==="="?a=_.showlines=!0:(a=o("contours.showlines"),f=o("fillcolor",C((n.line||{}).color||b,.5))),a){var k=f&&T(f)?C(s.fillcolor,1):b;c=o("line.color",k),o("line.width",2),o("line.dash")}o("line.smoothing"),E(o,p,c,h)};function l(n,s){var o;e.indexOf(s.operation)===-1?(n("contours.value",[0,1]),d(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:M(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(n("contours.value",0),M(s.value)||(d(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},3212:function(Q,U,t){var M=t(69104),E=t(38248);Q.exports={"[]":C("[]"),"][":C("]["),">":T(">"),"<":T("<"),"=":T("=")};function i(v,d){var r=Array.isArray(d),e;function l(n){return E(n)?+n:null}return M.COMPARISON_OPS2.indexOf(v)!==-1?e=l(r?d[0]:d):M.INTERVAL_OPS.indexOf(v)!==-1?e=r?[l(d[0]),l(d[1])]:[l(d),l(d)]:M.SET_OPS.indexOf(v)!==-1&&(e=r?d.map(l):[l(d)]),e}function C(v){return function(d){d=i(v,d);var r=Math.min(d[0],d[1]),e=Math.max(d[0],d[1]);return{start:r,end:e,size:e-r}}}function T(v){return function(d){return d=i(v,d),{start:d,end:1/0,size:1/0}}}},84952:function(Q){Q.exports=function(U,t,M,E){var i=E("contours.start"),C=E("contours.end"),T=i===!1||C===!1,v=M("contours.size"),d;T?d=t.autocontour=!0:d=M("autocontour",!1),(d||!v)&&M("ncontours")}},82172:function(Q,U,t){var M=t(3400);Q.exports=function(i,C){var T,v,d,r=function(n){return n.reverse()},e=function(n){return n};switch(C){case"=":case"<":return i;case">":for(i.length!==1&&M.warn("Contour data invalid for the specified inequality operation."),v=i[0],T=0;T<v.edgepaths.length;T++)v.edgepaths[T]=r(v.edgepaths[T]);for(T=0;T<v.paths.length;T++)v.paths[T]=r(v.paths[T]);for(T=0;T<v.starts.length;T++)v.starts[T]=r(v.starts[T]);return i;case"][":var l=r;r=e,e=l;case"[]":for(i.length!==2&&M.warn("Contour data invalid for the specified inequality range operation."),v=E(i[0]),d=E(i[1]),T=0;T<v.edgepaths.length;T++)v.edgepaths[T]=r(v.edgepaths[T]);for(T=0;T<v.paths.length;T++)v.paths[T]=r(v.paths[T]);for(T=0;T<v.starts.length;T++)v.starts[T]=r(v.starts[T]);for(;d.edgepaths.length;)v.edgepaths.push(e(d.edgepaths.shift()));for(;d.paths.length;)v.paths.push(e(d.paths.shift()));for(;d.starts.length;)v.starts.push(e(d.starts.shift()));return[v]}};function E(i){return M.extendFlat({},i,{edgepaths:M.extendDeep([],i.edgepaths),paths:M.extendDeep([],i.paths),starts:M.extendDeep([],i.starts)})}},57004:function(Q,U,t){var M=t(3400),E=t(51264),i=t(31147),C=t(95536),T=t(84952),v=t(97680),d=t(39096),r=t(67104);Q.exports=function(e,l,n,s){function o(_,a){return M.coerce(e,l,r,_,a)}function p(_){return M.coerce2(e,l,r,_)}var b=E(e,l,o,s);if(!b){l.visible=!1;return}i(e,l,s,o),o("xhoverformat"),o("yhoverformat"),o("text"),o("hovertext"),o("hoverongaps"),o("hovertemplate");var h=o("contours.type")==="constraint";o("connectgaps",M.isArray1D(l.z)),h?C(e,l,o,s,n):(T(e,l,o,p),v(e,l,o,s)),l.contours&&l.contours.coloring==="heatmap"&&d(o,s),o("zorder")}},61512:function(Q,U,t){var M=t(3400),E=t(3212),i=t(46960);Q.exports=function(C,T,v){for(var d=C.type==="constraint"?E[C._operation](C.value):C,r=d.size,e=[],l=i(d),n=v.trace._carpetTrace,s=n?{xaxis:n.aaxis,yaxis:n.baxis,x:v.a,y:v.b}:{xaxis:T.xaxis,yaxis:T.yaxis,x:v.x,y:v.y},o=d.start;o<l;o+=r)if(e.push(M.extendFlat({level:o,crossings:{},starts:[],edgepaths:[],paths:[],z:v.z,smoothing:v.trace.line.smoothing},s)),e.length>1e3){M.warn("Too many contours, clipping at 1000",C);break}return e}},46960:function(Q){Q.exports=function(U){return U.end+U.size/1e6}},88748:function(Q,U,t){var M=t(3400),E=t(93252);Q.exports=function(r,e,l){var n,s,o,p,b;for(e=e||.01,l=l||.01,o=0;o<r.length;o++){for(p=r[o],b=0;b<p.starts.length;b++)s=p.starts[b],T(p,s,"edge",e,l);for(n=0;Object.keys(p.crossings).length&&n<1e4;)n++,s=Object.keys(p.crossings)[0].split(",").map(Number),T(p,s,void 0,e,l);n===1e4&&M.log("Infinite loop in contour?")}};function i(r,e,l,n){return Math.abs(r[0]-e[0])<l&&Math.abs(r[1]-e[1])<n}function C(r,e){var l=r[2]-e[2],n=r[3]-e[3];return Math.sqrt(l*l+n*n)}function T(r,e,l,n,s){var o=e.join(","),p=r.crossings[o],b=v(p,l,e),h=[d(r,e,[-b[0],-b[1]])],_=r.z.length,a=r.z[0].length,c=e.slice(),f=b.slice(),x;for(x=0;x<1e4;x++){if(p>20?(p=E.CHOOSESADDLE[p][(b[0]||b[1])<0?0:1],r.crossings[o]=E.SADDLEREMAINDER[p]):delete r.crossings[o],b=E.NEWDELTA[p],!b){M.log("Found bad marching index:",p,e,r.level);break}h.push(d(r,e,b)),e[0]+=b[0],e[1]+=b[1],o=e.join(","),i(h[h.length-1],h[h.length-2],n,s)&&h.pop();var k=b[0]&&(e[0]<0||e[0]>a-2)||b[1]&&(e[1]<0||e[1]>_-2),y=e[0]===c[0]&&e[1]===c[1]&&b[0]===f[0]&&b[1]===f[1];if(y||l&&k)break;p=r.crossings[o]}x===1e4&&M.log("Infinite loop in contour?");var A=i(h[0],h[h.length-1],n,s),L=0,u=.2*r.smoothing,m=[],S=0,w,I,O,D,P,F,R,B,N,G,X;for(x=1;x<h.length;x++)R=C(h[x],h[x-1]),L+=R,m.push(R);var J=L/m.length*u;function it(Z){return h[Z%h.length]}for(x=h.length-2;x>=S;x--)if(w=m[x],w<J){for(O=0,I=x-1;I>=S&&w+m[I]<J;I--)w+=m[I];if(A&&x===h.length-2)for(O=0;O<I&&w+m[O]<J;O++)w+=m[O];P=x-I+O+1,F=Math.floor((x+I+O+2)/2),!A&&x===h.length-2?D=h[h.length-1]:!A&&I===-1?D=h[0]:P%2?D=it(F):D=[(it(F)[0]+it(F+1)[0])/2,(it(F)[1]+it(F+1)[1])/2],h.splice(I+1,x-I+1,D),x=I+1,O&&(S=O),A&&(x===h.length-2?h[O]=h[h.length-1]:x===0&&(h[h.length-1]=h[0]))}for(h.splice(0,S),x=0;x<h.length;x++)h[x].length=2;if(!(h.length<2))if(A)h.pop(),r.paths.push(h);else{l||M.log("Unclosed interior contour?",r.level,c.join(","),h.join("L"));var nt=!1;for(B=0;B<r.edgepaths.length;B++)if(G=r.edgepaths[B],!nt&&i(G[0],h[h.length-1],n,s)){h.pop(),nt=!0;var q=!1;for(N=0;N<r.edgepaths.length;N++)if(X=r.edgepaths[N],i(X[X.length-1],h[0],n,s)){q=!0,h.shift(),r.edgepaths.splice(B,1),N===B?r.paths.push(h.concat(X)):(N>B&&N--,r.edgepaths[N]=X.concat(h,G));break}q||(r.edgepaths[B]=h.concat(G))}for(B=0;B<r.edgepaths.length&&!nt;B++)G=r.edgepaths[B],i(G[G.length-1],h[0],n,s)&&(h.shift(),r.edgepaths[B]=G.concat(h),nt=!0);nt||r.edgepaths.push(h)}}function v(r,e,l){var n=0,s=0;return r>20&&e?r===208||r===1114?n=l[0]===0?1:-1:s=l[1]===0?1:-1:E.BOTTOMSTART.indexOf(r)!==-1?s=1:E.LEFTSTART.indexOf(r)!==-1?n=1:E.TOPSTART.indexOf(r)!==-1?s=-1:n=-1,[n,s]}function d(r,e,l){var n=e[0]+Math.max(l[0],0),s=e[1]+Math.max(l[1],0),o=r.z[s][n],p=r.xaxis,b=r.yaxis;if(l[1]){var h=(r.level-o)/(r.z[s][n+1]-o),_=(h!==1?(1-h)*p.c2l(r.x[n]):0)+(h!==0?h*p.c2l(r.x[n+1]):0);return[p.c2p(p.l2c(_),!0),b.c2p(r.y[s],!0),n+h,s]}else{var a=(r.level-o)/(r.z[s+1][n]-o),c=(a!==1?(1-a)*b.c2l(r.y[s]):0)+(a!==0?a*b.c2l(r.y[s+1]):0);return[p.c2p(r.x[n],!0),b.c2p(b.l2c(c),!0),n,s+a]}}},38200:function(Q,U,t){var M=t(76308),E=t(55512);Q.exports=function(i,C,T,v,d){d||(d={}),d.isContour=!0;var r=E(i,C,T,v,d);return r&&r.forEach(function(e){var l=e.trace;l.contours.type==="constraint"&&(l.fillcolor&&M.opacity(l.fillcolor)?e.color=M.addOpacity(l.fillcolor,1):l.contours.showlines&&M.opacity(l.line.color)&&(e.color=M.addOpacity(l.line.color,1)))}),r}},66240:function(Q,U,t){Q.exports={attributes:t(67104),supplyDefaults:t(57004),calc:t(20688),plot:t(23676).plot,style:t(52440),colorbar:t(55296),hoverPoints:t(38200),moduleType:"trace",name:"contour",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(Q,U,t){var M=t(3400);Q.exports=function(E,i,C,T){T||(T={});var v=E("contours.showlabels");if(v){var d=i.font;M.coerceFont(E,"contours.labelfont",{family:d.family,size:d.size,color:C}),E("contours.labelformat")}T.hasHover!==!1&&E("zhoverformat")}},41076:function(Q,U,t){var M=t(33428),E=t(8932),i=t(46960);Q.exports=function(C){var T=C.contours,v=T.start,d=i(T),r=T.size||1,e=Math.floor((d-v)/r)+1,l=T.coloring==="lines"?0:1,n=E.extractOpts(C);isFinite(r)||(r=1,e=1);var s=n.reversescale?E.flipScale(n.colorscale):n.colorscale,o=s.length,p=new Array(o),b=new Array(o),h,_,a=n.min,c=n.max;if(T.coloring==="heatmap"){for(_=0;_<o;_++)h=s[_],p[_]=h[0]*(c-a)+a,b[_]=h[1];var f=M.extent([a,c,T.start,T.start+r*(e-1)]),x=f[a<c?0:1],k=f[a<c?1:0];x!==a&&(p.splice(0,0,x),b.splice(0,0,b[0])),k!==c&&(p.push(k),b.push(b[b.length-1]))}else{var y=C._input&&typeof C._input.zmin=="number"&&typeof C._input.zmax=="number";for(y&&(v<=a||d>=c)&&(v<=a&&(v=a),d>=c&&(d=c),e=Math.floor((d-v)/r)+1,l=0),_=0;_<o;_++)h=s[_],p[_]=(h[0]*(e+l-1)-l/2)*r+v,b[_]=h[1];(y||C.autocontour)&&(p[0]>a&&(p.unshift(a),b.unshift(b[0])),p[p.length-1]<c&&(p.push(c),b.push(b[b.length-1])))}return E.makeColorScaleFunc({domain:p,range:b},{noNumericCheck:!0})}},72424:function(Q,U,t){var M=t(93252);Q.exports=function(i){var C=i[0].z,T=C.length,v=C[0].length,d=T===2||v===2,r,e,l,n,s,o,p,b,h;for(e=0;e<T-1;e++)for(n=[],e===0&&(n=n.concat(M.BOTTOMSTART)),e===T-2&&(n=n.concat(M.TOPSTART)),r=0;r<v-1;r++)for(l=n.slice(),r===0&&(l=l.concat(M.LEFTSTART)),r===v-2&&(l=l.concat(M.RIGHTSTART)),s=r+","+e,o=[[C[e][r],C[e][r+1]],[C[e+1][r],C[e+1][r+1]]],h=0;h<i.length;h++)b=i[h],p=E(b.level,o),p&&(b.crossings[s]=p,l.indexOf(p)!==-1&&(b.starts.push([r,e]),d&&l.indexOf(p,l.indexOf(p)+1)!==-1&&b.starts.push([r,e])))};function E(i,C){var T=(C[0][0]>i?0:1)+(C[0][1]>i?0:2)+(C[1][1]>i?0:4)+(C[1][0]>i?0:8);if(T===5||T===10){var v=(C[0][0]+C[0][1]+C[1][0]+C[1][1])/4;return i>v?T===5?713:1114:T===5?104:208}return T===15?0:T}},23676:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(8932),T=t(72736),v=t(54460),d=t(78344),r=t(41420),e=t(72424),l=t(88748),n=t(61512),s=t(82172),o=t(56008),p=t(93252),b=p.LABELOPTIMIZER;U.plot=function(y,A,L,u){var m=A.xaxis,S=A.yaxis;E.makeTraceGroups(u,L,"contour").each(function(w){var I=M.select(this),O=w[0],D=O.trace,P=O.x,F=O.y,R=D.contours,B=n(R,A,O),N=E.ensureSingle(I,"g","heatmapcoloring"),G=[];R.coloring==="heatmap"&&(G=[w]),r(y,A,G,N),e(B),l(B);var X=m.c2p(P[0],!0),J=m.c2p(P[P.length-1],!0),it=S.c2p(F[0],!0),nt=S.c2p(F[F.length-1],!0),q=[[X,nt],[J,nt],[J,it],[X,it]],Z=B;R.type==="constraint"&&(Z=s(B,R._operation)),h(I,q,R),_(I,Z,q,R),c(I,B,y,O,R),x(I,A,y,O,q)})};function h(y,A,L){var u=E.ensureSingle(y,"g","contourbg"),m=u.selectAll("path").data(L.coloring==="fill"?[0]:[]);m.enter().append("path"),m.exit().remove(),m.attr("d","M"+A.join("L")+"Z").style("stroke","none")}function _(y,A,L,u){var m=u.coloring==="fill"||u.type==="constraint"&&u._operation!=="=",S="M"+L.join("L")+"Z";m&&o(A,u);var w=E.ensureSingle(y,"g","contourfill"),I=w.selectAll("path").data(m?A:[]);I.enter().append("path"),I.exit().remove(),I.each(function(O){var D=(O.prefixBoundary?S:"")+a(O,L);D?M.select(this).attr("d",D).style("stroke","none"):M.select(this).remove()})}function a(y,A){var L="",u=0,m=y.edgepaths.map(function(J,it){return it}),S=!0,w,I,O,D,P,F;function R(J){return Math.abs(J[1]-A[0][1])<.01}function B(J){return Math.abs(J[1]-A[2][1])<.01}function N(J){return Math.abs(J[0]-A[0][0])<.01}function G(J){return Math.abs(J[0]-A[2][0])<.01}for(;m.length;){for(F=i.smoothopen(y.edgepaths[u],y.smoothing),L+=S?F:F.replace(/^M/,"L"),m.splice(m.indexOf(u),1),w=y.edgepaths[u][y.edgepaths[u].length-1],D=-1,O=0;O<4;O++){if(!w){E.log("Missing end?",u,y);break}for(R(w)&&!G(w)?I=A[1]:N(w)?I=A[0]:B(w)?I=A[3]:G(w)&&(I=A[2]),P=0;P<y.edgepaths.length;P++){var X=y.edgepaths[P][0];Math.abs(w[0]-I[0])<.01?Math.abs(w[0]-X[0])<.01&&(X[1]-w[1])*(I[1]-X[1])>=0&&(I=X,D=P):Math.abs(w[1]-I[1])<.01?Math.abs(w[1]-X[1])<.01&&(X[0]-w[0])*(I[0]-X[0])>=0&&(I=X,D=P):E.log("endpt to newendpt is not vert. or horz.",w,I,X)}if(w=I,D>=0)break;L+="L"+I}if(D===y.edgepaths.length){E.log("unclosed perimeter path");break}u=D,S=m.indexOf(u)===-1,S&&(u=m[0],L+="Z")}for(u=0;u<y.paths.length;u++)L+=i.smoothclosed(y.paths[u],y.smoothing);return L}function c(y,A,L,u,m){var S=L._context.staticPlot,w=E.ensureSingle(y,"g","contourlines"),I=m.showlines!==!1,O=m.showlabels,D=I&&O,P=U.createLines(w,I||O,A,S),F=U.createLineClip(w,D,L,u.trace.uid),R=y.selectAll("g.contourlabels").data(O?[0]:[]);if(R.exit().remove(),R.enter().append("g").classed("contourlabels",!0),O){var B=[],N=[];E.clearLocationCache();var G=U.labelFormatter(L,u),X=i.tester.append("text").attr("data-notex",1).call(i.font,m.labelfont),J=A[0].xaxis,it=A[0].yaxis,nt=J._length,q=it._length,Z=J.range,$=it.range,V=E.aggNums(Math.min,null,u.x),rt=E.aggNums(Math.max,null,u.x),ot=E.aggNums(Math.min,null,u.y),H=E.aggNums(Math.max,null,u.y),Y=Math.max(J.c2p(V,!0),0),at=Math.min(J.c2p(rt,!0),nt),et=Math.max(it.c2p(H,!0),0),ct=Math.min(it.c2p(ot,!0),q),ft={};Z[0]<Z[1]?(ft.left=Y,ft.right=at):(ft.left=at,ft.right=Y),$[0]<$[1]?(ft.top=et,ft.bottom=ct):(ft.top=ct,ft.bottom=et),ft.middle=(ft.top+ft.bottom)/2,ft.center=(ft.left+ft.right)/2,B.push([[ft.left,ft.top],[ft.right,ft.top],[ft.right,ft.bottom],[ft.left,ft.bottom]]);var yt=Math.sqrt(nt*nt+q*q),xt=p.LABELDISTANCE*yt/Math.max(1,A.length/p.LABELINCREASE);P.each(function(Ct){var gt=U.calcTextOpts(Ct.level,G,X,L);M.select(this).selectAll("path").each(function(){var mt=this,vt=E.getVisibleSegment(mt,ft,gt.height/2);if(vt&&!(vt.len<(gt.width+gt.height)*p.LABELMIN))for(var At=Math.min(Math.ceil(vt.len/xt),p.LABELMAX),Ot=0;Ot<At;Ot++){var It=U.findBestTextLocation(mt,vt,gt,N,ft);if(!It)break;U.addLabelData(It,gt,N,B)}})}),X.remove(),U.drawLabels(R,N,L,F,D?B:null)}O&&!I&&P.remove()}U.createLines=function(y,A,L,u){var m=L[0].smoothing,S=y.selectAll("g.contourlevel").data(A?L:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),A){var w=S.selectAll("path.openline").data(function(O){return O.pedgepaths||O.edgepaths});w.exit().remove(),w.enter().append("path").classed("openline",!0),w.attr("d",function(O){return i.smoothopen(O,m)}).style("stroke-miterlimit",1).style("vector-effect",u?"none":"non-scaling-stroke");var I=S.selectAll("path.closedline").data(function(O){return O.ppaths||O.paths});I.exit().remove(),I.enter().append("path").classed("closedline",!0),I.attr("d",function(O){return i.smoothclosed(O,m)}).style("stroke-miterlimit",1).style("vector-effect",u?"none":"non-scaling-stroke")}return S},U.createLineClip=function(y,A,L,u){var m=L._fullLayout._clips,S=A?"clipline"+u:null,w=m.selectAll("#"+S).data(A?[0]:[]);return w.exit().remove(),w.enter().append("clipPath").classed("contourlineclip",!0).attr("id",S),i.setClipUrl(y,S,L),w},U.labelFormatter=function(y,A){var L=y._fullLayout,u=A.trace,m=u.contours,S={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(m.labelformat)S.tickformat=m.labelformat,d(S,L);else{var w=C.extractOpts(u);if(w&&w.colorbar&&w.colorbar._axis)S=w.colorbar._axis;else{if(m.type==="constraint"){var I=m.value;E.isArrayOrTypedArray(I)?S.range=[I[0],I[I.length-1]]:S.range=[I,I]}else S.range=[m.start,m.end],S.nticks=(m.end-m.start)/m.size;S.range[0]===S.range[1]&&(S.range[1]+=S.range[0]||1),S.nticks||(S.nticks=1e3),d(S,L),v.prepTicks(S),S._tmin=null,S._tmax=null}}return function(O){return v.tickText(S,O).text}},U.calcTextOpts=function(y,A,L,u){var m=A(y);L.text(m).call(T.convertToTspans,u);var S=L.node(),w=i.bBox(S,!0);return{text:m,width:w.width,height:w.height,fontSize:+S.style["font-size"].replace("px",""),level:y,dy:(w.top+w.bottom)/2}},U.findBestTextLocation=function(y,A,L,u,m){var S=L.width,w,I,O,D,P;A.isClosed?(I=A.len/b.INITIALSEARCHPOINTS,w=A.min+I/2,O=A.max):(I=(A.len-S)/(b.INITIALSEARCHPOINTS+1),w=A.min+I+S/2,O=A.max-(I+S)/2);for(var F=1/0,R=0;R<b.ITERATIONS;R++){for(var B=w;B<O;B+=I){var N=E.getTextLocation(y,A.total,B,S),G=f(N,L,u,m);G<F&&(F=G,P=N,D=B)}if(F>b.MAXCOST*2)break;R&&(I/=2),w=D-I/2,O=w+I*1.5}if(F<=b.MAXCOST)return P};function f(y,A,L,u){var m=A.width/2,S=A.height/2,w=y.x,I=y.y,O=y.theta,D=Math.cos(O)*m,P=Math.sin(O)*m,F=(w>u.center?u.right-w:w-u.left)/(D+Math.abs(Math.sin(O)*S)),R=(I>u.middle?u.bottom-I:I-u.top)/(Math.abs(P)+Math.cos(O)*S);if(F<1||R<1)return 1/0;var B=b.EDGECOST*(1/(F-1)+1/(R-1));B+=b.ANGLECOST*O*O;for(var N=w-D,G=I-P,X=w+D,J=I+P,it=0;it<L.length;it++){var nt=L[it],q=Math.cos(nt.theta)*nt.width/2,Z=Math.sin(nt.theta)*nt.width/2,$=E.segmentDistance(N,G,X,J,nt.x-q,nt.y-Z,nt.x+q,nt.y+Z)*2/(A.height+nt.height),V=nt.level===A.level,rt=V?b.SAMELEVELDISTANCE:1;if($<=rt)return 1/0;var ot=b.NEIGHBORCOST*(V?b.SAMELEVELFACTOR:1);B+=ot/($-rt)}return B}U.addLabelData=function(y,A,L,u){var m=A.fontSize,S=A.width+m/3,w=Math.max(0,A.height-m/3),I=y.x,O=y.y,D=y.theta,P=Math.sin(D),F=Math.cos(D),R=function(N,G){return[I+N*F-G*P,O+N*P+G*F]},B=[R(-S/2,-w/2),R(-S/2,w/2),R(S/2,w/2),R(S/2,-w/2)];L.push({text:A.text,x:I,y:O,dy:A.dy,theta:D,level:A.level,width:S,height:w}),u.push(B)},U.drawLabels=function(y,A,L,u,m){var S=y.selectAll("text").data(A,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(S.exit().remove(),S.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var P=D.x+Math.sin(D.theta)*D.dy,F=D.y-Math.cos(D.theta)*D.dy;M.select(this).text(D.text).attr({x:P,y:F,transform:"rotate("+180*D.theta/Math.PI+" "+P+" "+F+")"}).call(T.convertToTspans,L)}),m){for(var w="",I=0;I<m.length;I++)w+="M"+m[I].join("L")+"Z";var O=E.ensureSingle(u,"path","");O.attr("d",w)}};function x(y,A,L,u,m){var S=u.trace,w=L._fullLayout._clips,I="clip"+S.uid,O=w.selectAll("#"+I).data(S.connectgaps?[]:[0]);if(O.enter().append("clipPath").classed("contourclip",!0).attr("id",I),O.exit().remove(),S.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:A.xaxis,yaxis:A.yaxis,x:u.x,y:u.y,z:k(u),smoothing:0};e([D]),l([D]),o([D],{type:"levels"});var P=E.ensureSingle(O,"path","");P.attr("d",(D.prefixBoundary?"M"+m.join("L")+"Z":"")+a(D,m))}else I=null;i.setClipUrl(y,I,L)}function k(y){var A=y.trace._emptypoints,L=[],u=y.z.length,m=y.z[0].length,S,w=[],I;for(S=0;S<m;S++)w.push(1);for(S=0;S<u;S++)L.push(w.slice());for(S=0;S<A.length;S++)I=A[S],L[I[0]][I[1]]=0;return y.zmask=L,L}},54444:function(Q,U,t){var M=t(54460),E=t(3400);Q.exports=function(C,T){var v=C.contours;if(C.autocontour){var d=C.zmin,r=C.zmax;(C.zauto||d===void 0)&&(d=E.aggNums(Math.min,null,T)),(C.zauto||r===void 0)&&(r=E.aggNums(Math.max,null,T));var e=i(d,r,C.ncontours);v.size=e.dtick,v.start=M.tickFirst(e),e.range.reverse(),v.end=M.tickFirst(e),v.start===d&&(v.start+=v.size),v.end===r&&(v.end-=v.size),v.start>v.end&&(v.start=v.end=(v.start+v.end)/2),C._input.contours||(C._input.contours={}),E.extendFlat(C._input.contours,{start:v.start,end:v.end,size:v.size}),C._input.autocontour=!0}else if(v.type!=="constraint"){var l=v.start,n=v.end,s=C._input.contours;if(l>n&&(v.start=s.start=n,n=v.end=s.end=l,l=v.start),!(v.size>0)){var o;l===n?o=1:o=i(l,n,C.ncontours).dtick,s.size=v.size=o}}};function i(C,T,v){var d={type:"linear",range:[C,T]};return M.autoTicks(d,(T-C)/(v||15)),d}},52440:function(Q,U,t){var M=t(33428),E=t(43616),i=t(41648),C=t(41076);Q.exports=function(T){var v=M.select(T).selectAll("g.contour");v.style("opacity",function(d){return d[0].trace.opacity}),v.each(function(d){var r=M.select(this),e=d[0].trace,l=e.contours,n=e.line,s=l.size||1,o=l.start,p=l.type==="constraint",b=!p&&l.coloring==="lines",h=!p&&l.coloring==="fill",_=b||h?C(e):null;r.selectAll("g.contourlevel").each(function(f){M.select(this).selectAll("path").call(E.lineGroupStyle,n.width,b?_(f.level):n.color,n.dash)});var a=l.labelfont;if(r.selectAll("g.contourlabels text").each(function(f){E.font(M.select(this),{family:a.family,size:a.size,color:a.color||(b?_(f.level):n.color)})}),p)r.selectAll("g.contourfill path").style("fill",e.fillcolor);else if(h){var c;r.selectAll("g.contourfill path").style("fill",function(f){return c===void 0&&(c=f.level),_(f.level+.5*s)}),c===void 0&&(c=o),r.selectAll("g.contourbg path").style("fill",_(c-.5*s))}}),i(T)}},97680:function(Q,U,t){var M=t(27260),E=t(17428);Q.exports=function(i,C,T,v,d){var r=T("contours.coloring"),e,l="";r==="fill"&&(e=T("contours.showlines")),e!==!1&&(r!=="lines"&&(l=T("line.color","#000")),T("line.width",.5),T("line.dash")),r!=="none"&&(i.showlegend!==!0&&(C.showlegend=!1),C._dfltShowLegend=!1,M(i,C,v,T,{prefix:"",cLetter:"z"})),T("line.smoothing"),E(T,v,l,d)}},37960:function(Q,U,t){var M=t(83328),E=t(67104),i=t(49084),C=t(92880).extendFlat,T=E.contours;Q.exports=C({carpet:{valType:"string",editType:"calc"},z:M.z,a:M.x,a0:M.x0,da:M.dx,b:M.y,b0:M.y0,db:M.dy,text:M.text,hovertext:M.hovertext,transpose:M.transpose,atype:M.xtype,btype:M.ytype,fillcolor:E.fillcolor,autocontour:E.autocontour,ncontours:E.ncontours,contours:{type:T.type,start:T.start,end:T.end,size:T.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:T.showlines,showlabels:T.showlabels,labelfont:T.labelfont,labelformat:T.labelformat,operation:T.operation,value:T.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:E.line.color,width:E.line.width,dash:E.line.dash,smoothing:E.line.smoothing,editType:"plot"},zorder:E.zorder,transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},30572:function(Q,U,t){var M=t(47128),E=t(3400),i=t(2872),C=t(26136),T=t(70448),v=t(11240),d=t(35744),r=t(3252),e=t(50948),l=t(54444);Q.exports=function(s,o){var p=o._carpetTrace=e(s,o);if(!(!p||!p.visible||p.visible==="legendonly")){if(!o.a||!o.b){var b=s.data[p.index],h=s.data[o.index];h.a||(h.a=b.a),h.b||(h.b=b.b),r(h,o,o._defaultColor,s._fullLayout)}var _=n(s,o);return l(o,o._z),_}};function n(s,o){var p=o._carpetTrace,b=p.aaxis,h=p.baxis,_,a,c,f,x,k,y;b._minDtick=0,h._minDtick=0,E.isArray1D(o.z)&&i(o,b,h,"a","b",["z"]),_=o._a=o._a||o.a,f=o._b=o._b||o.b,_=_?b.makeCalcdata(o,"_a"):[],f=f?h.makeCalcdata(o,"_b"):[],a=o.a0||0,c=o.da||1,x=o.b0||0,k=o.db||1,y=o._z=C(o._z||o.z,o.transpose),o._emptypoints=v(y),T(y,o._emptypoints);var A=E.maxRowLength(y),L=o.xtype==="scaled"?"":_,u=d(o,L,a,c,A,b),m=o.ytype==="scaled"?"":f,S=d(o,m,x,k,y.length,h),w={a:u,b:S,z:y};return o.contours.type==="levels"&&o.contours.coloring!=="none"&&M(s,o,{vals:y,containerStr:"",cLetter:"z"}),[w]}},3252:function(Q,U,t){var M=t(3400),E=t(51264),i=t(37960),C=t(95536),T=t(84952),v=t(97680);Q.exports=function(d,r,e,l){function n(b,h){return M.coerce(d,r,i,b,h)}function s(b){return M.coerce2(d,r,i,b)}if(n("carpet"),d.a&&d.b){var o=E(d,r,n,l,"a","b");if(!o){r.visible=!1;return}n("text");var p=n("contours.type")==="constraint";p?C(d,r,n,l,e,{hasHover:!1}):(T(d,r,n,s),v(d,r,n,l,{hasHover:!1}))}else r._defaultColor=e,r._length=null;n("zorder")}},40448:function(Q,U,t){Q.exports={attributes:t(37960),supplyDefaults:t(3252),colorbar:t(55296),calc:t(30572),plot:t(94440),style:t(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:t(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(Q,U,t){var M=t(33428),E=t(87072),i=t(53416),C=t(43616),T=t(3400),v=t(72424),d=t(88748),r=t(23676),e=t(93252),l=t(82172),n=t(61512),s=t(56008),o=t(50948),p=t(77712);Q.exports=function(A,L,u,m){var S=L.xaxis,w=L.yaxis;T.makeTraceGroups(m,u,"contour").each(function(I){var O=M.select(this),D=I[0],P=D.trace,F=P._carpetTrace=o(A,P),R=A.calcdata[F.index][0];if(!F.visible||F.visible==="legendonly")return;var B=D.a,N=D.b,G=P.contours,X=n(G,L,D),J=G.type==="constraint",it=G._operation,nt=J?it==="="?"lines":"fill":G.coloring;function q(ft){var yt=F.ab2xy(ft[0],ft[1],!0);return[S.c2p(yt[0]),w.c2p(yt[1])]}var Z=[[B[0],N[N.length-1]],[B[B.length-1],N[N.length-1]],[B[B.length-1],N[0]],[B[0],N[0]]];v(X);var $=(B[B.length-1]-B[0])*1e-8,V=(N[N.length-1]-N[0])*1e-8;d(X,$,V);var rt=X;G.type==="constraint"&&(rt=l(X,it)),b(X,q);var ot,H,Y,at,et=[];for(at=R.clipsegments.length-1;at>=0;at--)ot=R.clipsegments[at],H=E([],ot.x,S.c2p),Y=E([],ot.y,w.c2p),H.reverse(),Y.reverse(),et.push(i(H,Y,ot.bicubic));var ct="M"+et.join("L")+"Z";x(O,R.clipsegments,S,w,J,nt),k(P,O,S,w,rt,Z,q,F,R,nt,ct),h(O,X,A,D,G,L,F),C.setClipUrl(O,F._clipPathId,A)})};function b(A,L){var u,m,S,w,I,O,D,P,F;for(u=0;u<A.length;u++){for(w=A[u],I=w.pedgepaths=[],O=w.ppaths=[],m=0;m<w.edgepaths.length;m++){for(F=w.edgepaths[m],D=[],S=0;S<F.length;S++)D[S]=L(F[S]);I.push(D)}for(m=0;m<w.paths.length;m++){for(F=w.paths[m],P=[],S=0;S<F.length;S++)P[S]=L(F[S]);O.push(P)}}}function h(A,L,u,m,S,w,I){var O=u._context.staticPlot,D=T.ensureSingle(A,"g","contourlines"),P=S.showlines!==!1,F=S.showlabels,R=P&&F,B=r.createLines(D,P||F,L,O),N=r.createLineClip(D,R,u,m.trace.uid),G=A.selectAll("g.contourlabels").data(F?[0]:[]);if(G.exit().remove(),G.enter().append("g").classed("contourlabels",!0),F){var X=w.xaxis,J=w.yaxis,it=X._length,nt=J._length,q=[[[0,0],[it,0],[it,nt],[0,nt]]],Z=[];T.clearLocationCache();var $=r.labelFormatter(u,m),V=C.tester.append("text").attr("data-notex",1).call(C.font,S.labelfont),rt={left:0,right:it,center:it/2,top:0,bottom:nt,middle:nt/2},ot=Math.sqrt(it*it+nt*nt),H=e.LABELDISTANCE*ot/Math.max(1,L.length/e.LABELINCREASE);B.each(function(Y){var at=r.calcTextOpts(Y.level,$,V,u);M.select(this).selectAll("path").each(function(et){var ct=this,ft=T.getVisibleSegment(ct,rt,at.height/2);if(ft&&(_(ct,et,Y,ft,I,at.height),!(ft.len<(at.width+at.height)*e.LABELMIN)))for(var yt=Math.min(Math.ceil(ft.len/H),e.LABELMAX),xt=0;xt<yt;xt++){var Ct=r.findBestTextLocation(ct,ft,at,Z,rt);if(!Ct)break;r.addLabelData(Ct,at,Z,q)}})}),V.remove(),r.drawLabels(G,Z,u,N,R?q:null)}F&&!P&&B.remove()}function _(A,L,u,m,S,w){for(var I,O=0;O<u.pedgepaths.length;O++)L===u.pedgepaths[O]&&(I=u.edgepaths[O]);if(!I)return;var D=S.a[0],P=S.a[S.a.length-1],F=S.b[0],R=S.b[S.b.length-1];function B(it,nt){var q=0,Z,$=.1;return(Math.abs(it[0]-D)<$||Math.abs(it[0]-P)<$)&&(Z=c(S.dxydb_rough(it[0],it[1],$)),q=Math.max(q,w*f(nt,Z)/2)),(Math.abs(it[1]-F)<$||Math.abs(it[1]-R)<$)&&(Z=c(S.dxyda_rough(it[0],it[1],$)),q=Math.max(q,w*f(nt,Z)/2)),q}var N=a(A,0,1),G=a(A,m.total,m.total-1),X=B(I[0],N),J=m.total-B(I[I.length-1],G);m.min<X&&(m.min=X),m.max>J&&(m.max=J),m.len=m.max-m.min}function a(A,L,u){var m=A.getPointAtLength(L),S=A.getPointAtLength(u),w=S.x-m.x,I=S.y-m.y,O=Math.sqrt(w*w+I*I);return[w/O,I/O]}function c(A){var L=Math.sqrt(A[0]*A[0]+A[1]*A[1]);return[A[0]/L,A[1]/L]}function f(A,L){var u=Math.abs(A[0]*L[0]+A[1]*L[1]),m=Math.sqrt(1-u*u);return m/u}function x(A,L,u,m,S,w){var I,O,D,P,F=T.ensureSingle(A,"g","contourbg"),R=F.selectAll("path").data(w==="fill"&&!S?[0]:[]);R.enter().append("path"),R.exit().remove();var B=[];for(P=0;P<L.length;P++)I=L[P],O=E([],I.x,u.c2p),D=E([],I.y,m.c2p),B.push(i(O,D,I.bicubic));R.attr("d","M"+B.join("L")+"Z").style("stroke","none")}function k(A,L,u,m,S,w,I,O,D,P,F){var R=P==="fill";R&&s(S,A.contours);var B=T.ensureSingle(L,"g","contourfill"),N=B.selectAll("path").data(R?S:[]);N.enter().append("path"),N.exit().remove(),N.each(function(G){var X=(G.prefixBoundary?F:"")+y(A,G,w,I,O,D,u,m);X?M.select(this).attr("d",X).style("stroke","none"):M.select(this).remove()})}function y(A,L,u,m,S,w,I,O){var D,P="",F=L.edgepaths.map(function(at,et){return et}),R=!0,B,N,G,X,J,it,nt=Math.abs(u[0][0]-u[2][0])*1e-4,q=Math.abs(u[0][1]-u[2][1])*1e-4;function Z(at){return Math.abs(at[1]-u[0][1])<q}function $(at){return Math.abs(at[1]-u[2][1])<q}function V(at){return Math.abs(at[0]-u[0][0])<nt}function rt(at){return Math.abs(at[0]-u[2][0])<nt}function ot(at,et){var ct,ft,yt,xt,Ct="";for(Z(at)&&!rt(at)||$(at)&&!V(at)?(xt=S.aaxis,yt=p(S,w,[at[0],et[0]],.5*(at[1]+et[1]))):(xt=S.baxis,yt=p(S,w,.5*(at[0]+et[0]),[at[1],et[1]])),ct=1;ct<yt.length;ct++)for(Ct+=xt.smoothing?"C":"L",ft=0;ft<yt[ct].length;ft++){var gt=yt[ct][ft];Ct+=[I.c2p(gt[0]),O.c2p(gt[1])]+" "}return Ct}for(D=0,B=null;F.length;){var H=L.edgepaths[D][0];for(B&&(P+=ot(B,H)),it=C.smoothopen(L.edgepaths[D].map(m),L.smoothing),P+=R?it:it.replace(/^M/,"L"),F.splice(F.indexOf(D),1),B=L.edgepaths[D][L.edgepaths[D].length-1],X=-1,G=0;G<4;G++){if(!B){T.log("Missing end?",D,L);break}for(Z(B)&&!rt(B)?N=u[1]:V(B)?N=u[0]:$(B)?N=u[3]:rt(B)&&(N=u[2]),J=0;J<L.edgepaths.length;J++){var Y=L.edgepaths[J][0];Math.abs(B[0]-N[0])<nt?Math.abs(B[0]-Y[0])<nt&&(Y[1]-B[1])*(N[1]-Y[1])>=0&&(N=Y,X=J):Math.abs(B[1]-N[1])<q?Math.abs(B[1]-Y[1])<q&&(Y[0]-B[0])*(N[0]-Y[0])>=0&&(N=Y,X=J):T.log("endpt to newendpt is not vert. or horz.",B,N,Y)}if(X>=0)break;P+=ot(B,N),B=N}if(X===L.edgepaths.length){T.log("unclosed perimeter path");break}D=X,R=F.indexOf(D)===-1,R&&(D=F[0],P+=ot(B,N)+"Z",B=null)}for(D=0;D<L.paths.length;D++)P+=C.smoothclosed(L.paths[D].map(m),L.smoothing);return P}},33928:function(Q,U,t){var M=t(49084),E=t(21776).Ks,i=t(45464),C=t(31512),T=t(92880).extendFlat;Q.exports=T({lon:C.lon,lat:C.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:C.text,hovertext:C.hovertext,hoverinfo:T({},i.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:E(),showlegend:T({},i.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(Q,U,t){var M=t(38248),E=t(3400).isArrayOrTypedArray,i=t(39032).BADNUM,C=t(47128),T=t(3400)._;Q.exports=function(v,d){for(var r=d._length,e=new Array(r),l=d.z,n=E(l)&&l.length,s=0;s<r;s++){var o=e[s]={},p=d.lon[s],b=d.lat[s];if(o.lonlat=M(p)&&M(b)?[+p,+b]:[i,i],n){var h=l[s];o.z=M(h)?h:i}}return C(v,d,{vals:n?l:[0,1],containerStr:"",cLetter:"z"}),r&&(e[0].t={labels:{lat:T(v,"lat:")+" ",lon:T(v,"lon:")+" "}}),e}},4629:function(Q,U,t){var M=t(38248),E=t(3400),i=t(76308),C=t(8932),T=t(39032).BADNUM,v=t(44808).makeBlank;Q.exports=function(d){var r=d[0].trace,e=r.visible===!0&&r._length!==0,l={layout:{visibility:"none"},paint:{}},n=r._opts={heatmap:l,geojson:v()};if(!e)return n;var s=[],o,p=r.z,b=r.radius,h=E.isArrayOrTypedArray(p)&&p.length,_=E.isArrayOrTypedArray(b);for(o=0;o<d.length;o++){var a=d[o],c=a.lonlat;if(c[0]!==T){var f={};if(h){var x=a.z;f.z=x!==T?x:0}_&&(f.r=M(b[o])&&b[o]>0?+b[o]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:c},properties:f})}}var k=C.extractOpts(r),y=k.reversescale?C.flipScale(k.colorscale):k.colorscale,A=y[0][1],L=i.opacity(A)<1?A:i.addOpacity(A,0),u=["interpolate",["linear"],["heatmap-density"],0,L];for(o=1;o<y.length;o++)u.push(y[o][0],y[o][1]);var m=["interpolate",["linear"],["get","z"],k.min,0,k.max,1];return E.extendFlat(n.heatmap.paint,{"heatmap-weight":h?m:1/(k.max-k.min),"heatmap-color":u,"heatmap-radius":_?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),n.geojson={type:"FeatureCollection",features:s},n.heatmap.layout.visibility="visible",n}},97664:function(Q,U,t){var M=t(3400),E=t(27260),i=t(33928);Q.exports=function(C,T,v,d){function r(s,o){return M.coerce(C,T,i,s,o)}var e=r("lon")||[],l=r("lat")||[],n=Math.min(e.length,l.length);if(!n){T.visible=!1;return}T._length=n,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),E(C,T,d,r,{prefix:"",cLetter:"z"})}},96176:function(Q){Q.exports=function(U,t){return U.lon=t.lon,U.lat=t.lat,U.z=t.z,U}},25336:function(Q,U,t){var M=t(54460),E=t(63312).hoverPoints,i=t(63312).getExtraText;Q.exports=function(C,T,v){var d=E(C,T,v);if(d){var r=d[0],e=r.cd,l=e[0].trace,n=e[r.index];if(delete r.color,"z"in n){var s=r.subplot.mockAxis;r.z=n.z,r.zLabel=M.tickText(s,s.c2l(n.z),"hover").text}return r.extraText=i(l,n,e[0].t.labels),[r]}}},15088:function(Q,U,t){Q.exports={attributes:t(33928),supplyDefaults:t(97664),colorbar:t(96288),formatLabels:t(11960),calc:t(90876),plot:t(35256),hoverPoints:t(25336),eventData:t(96176),getBelow:function(M,E){for(var i=E.getMapLayers(),C=0;C<i.length;C++){var T=i[C],v=T.id;if(T.type==="symbol"&&typeof v=="string"&&v.indexOf("plotly-")===-1)return v}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(Q,U,t){var M=t(4629),E=t(47552).traceLayerPrefix;function i(T,v){this.type="densitymapbox",this.subplot=T,this.uid=v,this.sourceId="source-"+v,this.layerList=[["heatmap",E+v+"-heatmap"]],this.below=null}var C=i.prototype;C.update=function(T){var v=this.subplot,d=this.layerList,r=M(T),e=v.belowLookup["trace-"+this.uid];v.map.getSource(this.sourceId).setData(r.geojson),e!==this.below&&(this._removeLayers(),this._addLayers(r,e),this.below=e);for(var l=0;l<d.length;l++){var n=d[l],s=n[0],o=n[1],p=r[s];v.setOptions(o,"setLayoutProperty",p.layout),p.layout.visibility==="visible"&&v.setOptions(o,"setPaintProperty",p.paint)}},C._addLayers=function(T,v){for(var d=this.subplot,r=this.layerList,e=this.sourceId,l=0;l<r.length;l++){var n=r[l],s=n[0],o=T[s];d.addLayer({type:s,id:n[1],source:e,layout:o.layout,paint:o.paint},v)}},C._removeLayers=function(){for(var T=this.subplot.map,v=this.layerList,d=v.length-1;d>=0;d--)T.removeLayer(v[d][1])},C.dispose=function(){var T=this.subplot.map;this._removeLayers(),T.removeSource(this.sourceId)},Q.exports=function(T,v){var d=v[0].trace,r=new i(T,d.uid),e=r.sourceId,l=M(v),n=r.below=T.belowLookup["trace-"+d.uid];return T.map.addSource(e,{type:"geojson",data:l.geojson}),r._addLayers(l,n),r}},74248:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){for(var C=0;C<E.length;C++)E[C].i=C;M.mergeArray(i.text,E,"tx"),M.mergeArray(i.hovertext,E,"htx");var T=i.marker;if(T){M.mergeArray(T.opacity,E,"mo"),M.mergeArray(T.color,E,"mc");var v=T.line;v&&(M.mergeArray(v.color,E,"mlc"),M.mergeArrayCastPositive(v.width,E,"mlw"))}}},20088:function(Q,U,t){var M=t(20832),E=t(52904).line,i=t(45464),C=t(29736).axisHoverFormat,T=t(21776).Ks,v=t(21776).Gw,d=t(74732),r=t(92880).extendFlat,e=t(76308);Q.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:C("x"),yhoverformat:C("y"),hovertext:M.hovertext,hovertemplate:T({},{keys:d.eventDataKeys}),hoverinfo:r({},i.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),text:M.text,textposition:M.textposition,insidetextanchor:r({},M.insidetextanchor,{dflt:"middle"}),textangle:r({},M.textangle,{dflt:0}),textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:r({},M.orientation,{}),offset:r({},M.offset,{arrayOk:!1}),width:r({},M.width,{arrayOk:!1}),marker:l(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},E.color,{dflt:e.defaultLine}),width:r({},E.width,{dflt:0,editType:"plot"}),dash:E.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,zorder:M.zorder};function l(){var n=r({},M.marker);return delete n.pattern,delete n.cornerradius,n}},23096:function(Q,U,t){var M=t(54460),E=t(1220),i=t(74248),C=t(4500),T=t(39032).BADNUM;Q.exports=function(d,r){var e=M.getFromId(d,r.xaxis||"x"),l=M.getFromId(d,r.yaxis||"y"),n,s,o,p,b,h,_,a;r.orientation==="h"?(n=e.makeCalcdata(r,"x"),o=l.makeCalcdata(r,"y"),p=E(r,l,"y",o),b=!!r.yperiodalignment,h="y"):(n=l.makeCalcdata(r,"y"),o=e.makeCalcdata(r,"x"),p=E(r,e,"x",o),b=!!r.xperiodalignment,h="x"),s=p.vals;var c=Math.min(s.length,n.length),f=new Array(c);for(r._base=[],_=0;_<c;_++){n[_]<0&&(n[_]=T);var x=!1;n[_]!==T&&_+1<c&&n[_+1]!==T&&(x=!0),a=f[_]={p:s[_],s:n[_],cNext:x},r._base[_]=-.5*a.s,b&&(f[_].orig_p=o[_],f[_][h+"End"]=p.ends[_],f[_][h+"Start"]=p.starts[_]),r.ids&&(a.id=String(r.ids[_])),_===0&&(f[0].vTotal=0),f[0].vTotal+=v(a.s),a.begR=v(a.s)/v(f[0].s)}var k;for(_=0;_<c;_++)a=f[_],a.s!==T&&(a.sumR=a.s/f[0].vTotal,a.difR=k!==void 0?a.s/k:1,k=a.s);return i(f,r),C(f,r),f};function v(d){return d===T?0:d}},74732:function(Q){Q.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(Q,U,t){var M=t(96376).setGroupPositions;Q.exports=function(E,i){var C=E._fullLayout,T=E._fullData,v=E.calcdata,d=i.xaxis,r=i.yaxis,e=[],l=[],n=[],s,o;for(o=0;o<T.length;o++){var p=T[o],b=p.orientation==="h";p.visible===!0&&p.xaxis===d._id&&p.yaxis===r._id&&p.type==="funnel"&&(s=v[o],b?n.push(s):l.push(s),e.push(s))}var h={mode:C.funnelmode,norm:C.funnelnorm,gap:C.funnelgap,groupgap:C.funnelgroupgap};for(M(E,d,r,l,h),M(E,r,d,n,h),o=0;o<e.length;o++){s=e[o];for(var _=0;_<s.length;_++)_+1<s.length&&(s[_].nextP0=s[_+1].p0,s[_].nextS0=s[_+1].s0,s[_].nextP1=s[_+1].p1,s[_].nextS1=s[_+1].s1)}}},45432:function(Q,U,t){var M=t(3400),E=t(20011),i=t(31508).handleText,C=t(43980),T=t(31147),v=t(20088),d=t(76308);function r(n,s,o,p){function b(k,y){return M.coerce(n,s,v,k,y)}var h=C(n,s,p,b);if(!h){s.visible=!1;return}T(n,s,p,b),b("xhoverformat"),b("yhoverformat"),b("orientation",s.y&&!s.x?"v":"h"),b("offset"),b("width");var _=b("text");b("hovertext"),b("hovertemplate");var a=b("textposition");i(n,s,p,b,a,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s.textposition!=="none"&&!s.texttemplate&&b("textinfo",M.isArrayOrTypedArray(_)?"text+value":"value");var c=b("marker.color",o);b("marker.line.color",d.defaultLine),b("marker.line.width");var f=b("connector.visible");if(f){b("connector.fillcolor",e(c));var x=b("connector.line.width");x&&(b("connector.line.color"),b("connector.line.dash"))}b("zorder")}function e(n){var s=M.isArrayOrTypedArray(n)?"#000":n;return d.addOpacity(s,.5*d.opacity(s))}function l(n,s){var o,p;function b(_){return M.coerce(p._input,p,v,_)}if(s.funnelmode==="group")for(var h=0;h<n.length;h++)p=n[h],o=p._input,E(o,p,s,b)}Q.exports={supplyDefaults:r,crossTraceDefaults:l}},34580:function(Q){Q.exports=function(U,t){return U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(U.percentInitial=t.percentInitial),"percentPrevious"in t&&(U.percentPrevious=t.percentPrevious),"percentTotal"in t&&(U.percentTotal=t.percentTotal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U}},31488:function(Q,U,t){var M=t(76308).opacity,E=t(63400).hoverOnBars,i=t(3400).formatPercent;Q.exports=function(T,v,d,r,e){var l=E(T,v,d,r,e);if(l){var n=l.cd,s=n[0].trace,o=s.orientation==="h",p=l.index,b=n[p],h=o?"x":"y";l[h+"LabelVal"]=b.s,l.percentInitial=b.begR,l.percentInitialLabel=i(b.begR,1),l.percentPrevious=b.difR,l.percentPreviousLabel=i(b.difR,1),l.percentTotal=b.sumR,l.percentTotalLabel=i(b.sumR,1);var _=b.hi||s.hoverinfo,a=[];if(_&&_!=="none"&&_!=="skip"){var c=_==="all",f=_.split("+"),x=function(k){return c||f.indexOf(k)!==-1};x("percent initial")&&a.push(l.percentInitialLabel+" of initial"),x("percent previous")&&a.push(l.percentPreviousLabel+" of previous"),x("percent total")&&a.push(l.percentTotalLabel+" of total")}return l.extraText=a.join("<br>"),l.color=C(s,b),[l]}};function C(T,v){var d=T.marker,r=v.mc||d.color,e=v.mlc||d.line.color,l=v.mlw||d.line.width;if(M(r))return r;if(M(e)&&l)return e}},94704:function(Q,U,t){Q.exports={attributes:t(20088),layoutAttributes:t(7076),supplyDefaults:t(45432).supplyDefaults,crossTraceDefaults:t(45432).crossTraceDefaults,supplyLayoutDefaults:t(11631),calc:t(23096),crossTraceCalc:t(4804),plot:t(42200),style:t(44544).style,hoverPoints:t(31488),eventData:t(34580),selectPoints:t(45784),moduleType:"trace",name:"funnel",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(Q){Q.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(Q,U,t){var M=t(3400),E=t(7076);Q.exports=function(i,C,T){var v=!1;function d(l,n){return M.coerce(i,C,E,l,n)}for(var r=0;r<T.length;r++){var e=T[r];if(e.visible&&e.type==="funnel"){v=!0;break}}v&&(d("funnelmode"),d("funnelgap",.2),d("funnelgroupgap"))}},42200:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(39032).BADNUM,T=t(98184),v=t(82744).clearMinTextSize;Q.exports=function(l,n,s,o){var p=l._fullLayout;v("funnel",p),d(l,n,s,o),r(l,n,s,o),T.plot(l,n,s,o,{mode:p.funnelmode,norm:p.funnelmode,gap:p.funnelgap,groupgap:p.funnelgroupgap})};function d(l,n,s,o){var p=n.xaxis,b=n.yaxis;E.makeTraceGroups(o,s,"trace bars").each(function(h){var _=M.select(this),a=h[0].trace,c=E.ensureSingle(_,"g","regions");if(!a.connector||!a.connector.visible){c.remove();return}var f=a.orientation==="h",x=c.selectAll("g.region").data(E.identity);x.enter().append("g").classed("region",!0),x.exit().remove();var k=x.size();x.each(function(y,A){if(!(A!==k-1&&!y.cNext)){var L=e(y,p,b,f),u=L[0],m=L[1],S="";u[0]!==C&&m[0]!==C&&u[1]!==C&&m[1]!==C&&u[2]!==C&&m[2]!==C&&u[3]!==C&&m[3]!==C&&(f?S+="M"+u[0]+","+m[1]+"L"+u[2]+","+m[2]+"H"+u[3]+"L"+u[1]+","+m[1]+"Z":S+="M"+u[1]+","+m[1]+"L"+u[2]+","+m[3]+"V"+m[2]+"L"+u[1]+","+m[0]+"Z"),S===""&&(S="M0,0Z"),E.ensureSingle(M.select(this),"path").attr("d",S).call(i.setClipUrl,n.layerClipId,l)}})})}function r(l,n,s,o){var p=n.xaxis,b=n.yaxis;E.makeTraceGroups(o,s,"trace bars").each(function(h){var _=M.select(this),a=h[0].trace,c=E.ensureSingle(_,"g","lines");if(!a.connector||!a.connector.visible||!a.connector.line.width){c.remove();return}var f=a.orientation==="h",x=c.selectAll("g.line").data(E.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var k=x.size();x.each(function(y,A){if(!(A!==k-1&&!y.cNext)){var L=e(y,p,b,f),u=L[0],m=L[1],S="";u[3]!==void 0&&m[3]!==void 0&&(f?(S+="M"+u[0]+","+m[1]+"L"+u[2]+","+m[2],S+="M"+u[1]+","+m[1]+"L"+u[3]+","+m[2]):(S+="M"+u[1]+","+m[1]+"L"+u[2]+","+m[3],S+="M"+u[1]+","+m[0]+"L"+u[2]+","+m[2])),S===""&&(S="M0,0Z"),E.ensureSingle(M.select(this),"path").attr("d",S).call(i.setClipUrl,n.layerClipId,l)}})})}function e(l,n,s,o){var p=[],b=[],h=o?n:s,_=o?s:n;return p[0]=h.c2p(l.s0,!0),b[0]=_.c2p(l.p0,!0),p[1]=h.c2p(l.s1,!0),b[1]=_.c2p(l.p1,!0),p[2]=h.c2p(l.nextS0,!0),b[2]=_.c2p(l.nextP0,!0),p[3]=h.c2p(l.nextS1,!0),b[3]=_.c2p(l.nextP1,!0),o?[p,b]:[b,p]}},44544:function(Q,U,t){var M=t(33428),E=t(43616),i=t(76308),C=t(13448).DESELECTDIM,T=t(60100),v=t(82744).resizeText,d=T.styleTextPoints;function r(e,l,n){var s=n||M.select(e).selectAll('g[class^="funnellayer"]').selectAll("g.trace");v(e,s,"funnel"),s.style("opacity",function(o){return o[0].trace.opacity}),s.each(function(o){var p=M.select(this),b=o[0].trace;p.selectAll(".point > path").each(function(h){if(!h.isBlank){var _=b.marker;M.select(this).call(i.fill,h.mc||_.color).call(i.stroke,h.mlc||_.line.color).call(E.dashLine,_.line.dash,h.mlw||_.line.width).style("opacity",b.selectedpoints&&!h.selected?C:1)}}),d(p,b,e),p.selectAll(".regions").each(function(){M.select(this).selectAll("path").style("stroke-width",0).call(i.fill,b.connector.fillcolor)}),p.selectAll(".lines").each(function(){var h=b.connector.line;E.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}Q.exports={style:r}},22332:function(Q,U,t){var M=t(74996),E=t(45464),i=t(86968).u,C=t(21776).Ks,T=t(21776).Gw,v=t(92880).extendFlat;Q.exports={labels:M.labels,label0:M.label0,dlabel:M.dlabel,values:M.values,marker:{colors:M.marker.colors,line:{color:v({},M.marker.line.color,{dflt:null}),width:v({},M.marker.line.width,{dflt:1}),editType:"calc"},pattern:M.marker.pattern,editType:"calc"},text:M.text,hovertext:M.hovertext,scalegroup:v({},M.scalegroup,{}),textinfo:v({},M.textinfo,{flags:["label","text","value","percent"]}),texttemplate:T({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:v({},E.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:C({},{keys:["label","color","value","text","percent"]}),textposition:v({},M.textposition,{values:["inside","none"],dflt:"inside"}),textfont:M.textfont,insidetextfont:M.insidetextfont,title:{text:M.title.text,font:M.title.font,position:v({},M.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:i({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(Q,U,t){var M=t(7316);U.name="funnelarea",U.plot=function(E,i,C,T){M.plotBasePlot(U.name,E,i,C,T)},U.clean=function(E,i,C,T){M.cleanBasePlot(U.name,E,i,C,T)}},54e3:function(Q,U,t){var M=t(45768);function E(C,T){return M.calc(C,T)}function i(C){M.crossTraceCalc(C,{type:"funnelarea"})}Q.exports={calc:E,crossTraceCalc:i}},92688:function(Q,U,t){var M=t(3400),E=t(22332),i=t(86968).Q,C=t(31508).handleText,T=t(74174).handleLabelsAndValues,v=t(74174).handleMarkerDefaults;Q.exports=function(d,r,e,l){function n(x,k){return M.coerce(d,r,E,x,k)}var s=n("labels"),o=n("values"),p=T(s,o),b=p.len;if(r._hasLabels=p.hasLabels,r._hasValues=p.hasValues,!r._hasLabels&&r._hasValues&&(n("label0"),n("dlabel")),!b){r.visible=!1;return}r._length=b,v(d,r,l,n),n("scalegroup");var h=n("text"),_=n("texttemplate"),a;if(_||(a=n("textinfo",Array.isArray(h)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),_||a&&a!=="none"){var c=n("textposition");C(d,r,l,n,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else a==="none"&&n("textposition","none");i(r,l,n);var f=n("title.text");f&&(n("title.position"),M.coerceFont(n,"title.font",l.font)),n("aspectratio"),n("baseratio")}},62396:function(Q,U,t){Q.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(91248),categories:["pie-like","funnelarea","showLegend"],attributes:t(22332),layoutAttributes:t(61280),supplyDefaults:t(92688),supplyLayoutDefaults:t(35384),calc:t(54e3).calc,crossTraceCalc:t(54e3).crossTraceCalc,plot:t(39472),style:t(62096),styleOne:t(10528),meta:{}}},61280:function(Q,U,t){var M=t(85204).hiddenlabels;Q.exports={hiddenlabels:M,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(Q,U,t){var M=t(3400),E=t(61280);Q.exports=function(i,C){function T(v,d){return M.coerce(i,C,E,v,d)}T("hiddenlabels"),T("funnelareacolorway",C.colorway),T("extendfunnelareacolors")}},39472:function(Q,U,t){var M=t(33428),E=t(43616),i=t(3400),C=i.strScale,T=i.strTranslate,v=t(72736),d=t(98184),r=d.toMoveInsideBar,e=t(82744),l=e.recordMinTextSize,n=e.clearMinTextSize,s=t(69656),o=t(37820),p=o.attachFxHandlers,b=o.determineInsideTextFont,h=o.layoutAreas,_=o.prerenderTitles,a=o.positionTitleOutside,c=o.formatSliceLabel;Q.exports=function(y,A){var L=y._context.staticPlot,u=y._fullLayout;n("funnelarea",u),_(A,y),h(A,u._size),i.makeTraceGroups(u._funnelarealayer,A,"trace").each(function(m){var S=M.select(this),w=m[0],I=w.trace;k(m),S.each(function(){var O=M.select(this).selectAll("g.slice").data(m);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(P,F){if(P.hidden){M.select(this).selectAll("path,g").remove();return}P.pointNumber=P.i,P.curveNumber=I.index;var R=w.cx,B=w.cy,N=M.select(this),G=N.selectAll("path.surface").data([P]);G.enter().append("path").classed("surface",!0).style({"pointer-events":L?"none":"all"}),N.call(p,y,m);var X="M"+(R+P.TR[0])+","+(B+P.TR[1])+f(P.TR,P.BR)+f(P.BR,P.BL)+f(P.BL,P.TL)+"Z";G.attr("d",X),c(y,P,w);var J=s.castOption(I.textposition,P.pts),it=N.selectAll("g.slicetext").data(P.text&&J!=="none"?[0]:[]);it.enter().append("g").classed("slicetext",!0),it.exit().remove(),it.each(function(){var nt=i.ensureSingle(M.select(this),"text","",function(Y){Y.attr("data-notex",1)}),q=i.ensureUniformFontSize(y,b(I,P,u.font));nt.text(P.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(E.font,q).call(v.convertToTspans,y);var Z=E.bBox(nt.node()),$,V,rt,ot=Math.min(P.BL[1],P.BR[1])+B,H=Math.max(P.TL[1],P.TR[1])+B;V=Math.max(P.TL[0],P.BL[0])+R,rt=Math.min(P.TR[0],P.BR[0])+R,$=r(V,rt,ot,H,Z,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),$.fontSize=q.size,l(I.type,$,u),m[F].transform=$,i.setTransormAndDisplay(nt,$)})});var D=M.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var P=i.ensureSingle(M.select(this),"text","",function(B){B.attr("data-notex",1)}),F=I.title.text;I._meta&&(F=i.templateString(F,I._meta)),P.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(E.font,I.title.font).call(v.convertToTspans,y);var R=a(w,u._size);P.attr("transform",T(R.x,R.y)+C(Math.min(1,R.scale))+T(R.tx,R.ty))})})})};function f(y,A){var L=A[0]-y[0],u=A[1]-y[1];return"l"+L+","+u}function x(y,A){return[.5*(y[0]+A[0]),.5*(y[1]+A[1])]}function k(y){if(!y.length)return;var A=y[0],L=A.trace,u=L.aspectratio,m=L.baseratio;m>.999&&(m=.999);var S=Math.pow(m,2),w=A.vTotal,I=w*S/(1-S),O=w,D=I/w;function P(){var et=Math.sqrt(D);return{x:et,y:-et}}function F(){var et=P();return[et.x,et.y]}var R,B=[];B.push(F());var N,G;for(N=y.length-1;N>-1;N--)if(G=y[N],!G.hidden){var X=G.v/O;D+=X,B.push(F())}var J=1/0,it=-1/0;for(N=0;N<B.length;N++)R=B[N],J=Math.min(J,R[1]),it=Math.max(it,R[1]);for(N=0;N<B.length;N++)B[N][1]-=(it+J)/2;var nt=B[B.length-1][0],q=A.r,Z=(it-J)/2,$=q/nt,V=q/Z*u;for(A.r=V*Z,N=0;N<B.length;N++)B[N][0]*=$,B[N][1]*=V;R=B[0];var rt=[-R[0],R[1]],ot=[R[0],R[1]],H=0;for(N=y.length-1;N>-1;N--)if(G=y[N],!G.hidden){H+=1;var Y=B[H][0],at=B[H][1];G.TL=[-Y,at],G.TR=[Y,at],G.BL=rt,G.BR=ot,G.pxmid=x(G.TR,G.BR),rt=G.TL,ot=G.TR}}},62096:function(Q,U,t){var M=t(33428),E=t(10528),i=t(82744).resizeText;Q.exports=function(C){var T=C._fullLayout._funnelarealayer.selectAll(".trace");i(C,T,"funnelarea"),T.each(function(v){var d=v[0],r=d.trace,e=M.select(this);e.style({opacity:r.opacity}),e.selectAll("path.surface").each(function(l){M.select(this).call(E,l,r,C)})})}},83328:function(Q,U,t){var M=t(52904),E=t(45464),i=t(25376),C=t(29736).axisHoverFormat,T=t(21776).Ks,v=t(21776).Gw,d=t(49084),r=t(92880).extendFlat;Q.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},M.x,{impliedEdits:{xtype:"array"}}),x0:r({},M.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},M.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},M.y,{impliedEdits:{ytype:"array"}}),y0:r({},M.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},M.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},M.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},M.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},M.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},M.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},M.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},M.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z",1),hovertemplate:T(),texttemplate:v({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:i({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},E.showlegend,{dflt:!1}),zorder:M.zorder},{transforms:void 0},d("",{cLetter:"z",autoColorDflt:!1}))},19512:function(Q,U,t){var M=t(24040),E=t(3400),i=t(54460),C=t(1220),T=t(55480),v=t(47128),d=t(2872),r=t(26136),e=t(70448),l=t(11240),n=t(35744),s=t(39032).BADNUM;Q.exports=function(b,h){var _=i.getFromId(b,h.xaxis||"x"),a=i.getFromId(b,h.yaxis||"y"),c=M.traceIs(h,"contour"),f=M.traceIs(h,"histogram"),x=M.traceIs(h,"gl2d"),k=c?"best":h.zsmooth,y,A,L,u,m,S,w,I,O,D,P;if(_._minDtick=0,a._minDtick=0,f)P=T(b,h),u=P.orig_x,y=P.x,A=P.x0,L=P.dx,I=P.orig_y,m=P.y,S=P.y0,w=P.dy,O=P.z;else{var F=h.z;E.isArray1D(F)?(d(h,_,a,"x","y",["z"]),y=h._x,m=h._y,F=h._z):(u=h.x?_.makeCalcdata(h,"x"):[],I=h.y?a.makeCalcdata(h,"y"):[],y=C(h,_,"x",u).vals,m=C(h,a,"y",I).vals,h._x=y,h._y=m),A=h.x0,L=h.dx,S=h.y0,w=h.dy,O=r(F,h,_,a)}(_.rangebreaks||a.rangebreaks)&&(O=p(y,m,O),f||(y=o(y),m=o(m),h._x=y,h._y=m)),!f&&(c||h.connectgaps)&&(h._emptypoints=l(O),e(O,h._emptypoints));function R(Z){k=h._input.zsmooth=h.zsmooth=!1,E.warn('cannot use zsmooth: "fast": '+Z)}function B(Z){if(Z.length>1){var $=(Z[Z.length-1]-Z[0])/(Z.length-1),V=Math.abs($/100);for(D=0;D<Z.length-1;D++)if(Math.abs(Z[D+1]-Z[D]-$)>V)return!1}return!0}h._islinear=!1,_.type==="log"||a.type==="log"?k==="fast"&&R("log axis found"):B(y)?B(m)?h._islinear=!0:k==="fast"&&R("y scale is not linear"):k==="fast"&&R("x scale is not linear");var N=E.maxRowLength(O),G=h.xtype==="scaled"?"":y,X=n(h,G,A,L,N,_),J=h.ytype==="scaled"?"":m,it=n(h,J,S,w,O.length,a);x||(h._extremes[_._id]=i.findExtremes(_,X),h._extremes[a._id]=i.findExtremes(a,it));var nt={x:X,y:it,z:O,text:h._text||h.text,hovertext:h._hovertext||h.hovertext};if(h.xperiodalignment&&u&&(nt.orig_x=u),h.yperiodalignment&&I&&(nt.orig_y=I),G&&G.length===X.length-1&&(nt.xCenter=G),J&&J.length===it.length-1&&(nt.yCenter=J),f&&(nt.xRanges=P.xRanges,nt.yRanges=P.yRanges,nt.pts=P.pts),c||v(b,h,{vals:O,cLetter:"z"}),c&&h.contours&&h.contours.coloring==="heatmap"){var q={type:h.type==="contour"?"heatmap":"histogram2d",xcalendar:h.xcalendar,ycalendar:h.ycalendar};nt.xfill=n(q,G,A,L,N,_),nt.yfill=n(q,J,S,w,O.length,a)}return[nt]};function o(b){for(var h=[],_=b.length,a=0;a<_;a++){var c=b[a];c!==s&&h.push(c)}return h}function p(b,h,_){for(var a=[],c=-1,f=0;f<_.length;f++)if(h[f]!==s){c++,a[c]=[];for(var x=0;x<_[f].length;x++)b[x]!==s&&a[c].push(_[f][x])}return a}},26136:function(Q,U,t){var M=t(38248),E=t(3400),i=t(39032).BADNUM;Q.exports=function(C,T,v,d){var r,e,l,n,s,o;function p(f){if(M(f))return+f}if(T&&T.transpose){for(r=0,s=0;s<C.length;s++)r=Math.max(r,C[s].length);if(r===0)return!1;l=function(f){return f.length},n=function(f,x,k){return(f[k]||[])[x]}}else r=C.length,l=function(f,x){return f[x].length},n=function(f,x,k){return(f[x]||[])[k]};var b=function(f,x,k){return x===i||k===i?i:n(f,x,k)};function h(f){if(T&&T.type!=="carpet"&&T.type!=="contourcarpet"&&f&&f.type==="category"&&T["_"+f._id.charAt(0)].length){var x=f._id.charAt(0),k={},y=T["_"+x+"CategoryMap"]||T[x];for(s=0;s<y.length;s++)k[y[s]]=s;return function(A){var L=k[f._categories[A]];return L+1?L:i}}else return E.identity}var _=h(v),a=h(d);d&&d.type==="category"&&(r=d._categories.length);var c=new Array(r);for(s=0;s<r;s++)for(v&&v.type==="category"?e=v._categories.length:e=l(C,s),c[s]=new Array(e),o=0;o<e;o++)c[s][o]=p(b(C,a(s),_(o)));return c}},96288:function(Q){Q.exports={min:"zmin",max:"zmax"}},2872:function(Q,U,t){var M=t(3400),E=t(39032).BADNUM,i=t(1220);Q.exports=function(C,T,v,d,r,e){var l=C._length,n=T.makeCalcdata(C,d),s=v.makeCalcdata(C,r);n=i(C,T,d,n).vals,s=i(C,v,r,s).vals;var o=C.text,p=o!==void 0&&M.isArray1D(o),b=C.hovertext,h=b!==void 0&&M.isArray1D(b),_,a,c=M.distinctVals(n),f=c.vals,x=M.distinctVals(s),k=x.vals,y=[],A,L,u=k.length,m=f.length;for(_=0;_<e.length;_++)y[_]=M.init2dArray(u,m);p&&(A=M.init2dArray(u,m)),h&&(L=M.init2dArray(u,m));var S=M.init2dArray(u,m);for(_=0;_<l;_++)if(n[_]!==E&&s[_]!==E){var w=M.findBin(n[_]+c.minDiff/2,f),I=M.findBin(s[_]+x.minDiff/2,k);for(a=0;a<e.length;a++){var O=e[a],D=C[O],P=y[a];P[I][w]=D[_],S[I][w]=_}p&&(A[I][w]=o[_]),h&&(L[I][w]=b[_])}for(C["_"+d]=f,C["_"+r]=k,a=0;a<e.length;a++)C["_"+e[a]]=y[a];p&&(C._text=A),h&&(C._hovertext=L),T&&T.type==="category"&&(C["_"+d+"CategoryMap"]=f.map(function(F){return T._categories[F]})),v&&v.type==="category"&&(C["_"+r+"CategoryMap"]=k.map(function(F){return v._categories[F]})),C._after2before=S}},24480:function(Q,U,t){var M=t(3400),E=t(51264),i=t(39096),C=t(31147),T=t(82748),v=t(27260),d=t(83328);Q.exports=function(r,e,l,n){function s(p,b){return M.coerce(r,e,d,p,b)}var o=E(r,e,s,n);if(!o){e.visible=!1;return}C(r,e,n,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),i(s,n),T(r,e,s,n),s("hoverongaps"),s("connectgaps",M.isArray1D(e.z)&&e.zsmooth!==!1),v(r,e,n,s,{prefix:"",cLetter:"z"}),s("zorder")}},11240:function(Q,U,t){var M=t(3400).maxRowLength;Q.exports=function(E){var i=[],C={},T=[],v=E[0],d=[],r=[0,0,0],e=M(E),l,n,s,o,p,b,h,_;for(n=0;n<E.length;n++)for(l=d,d=v,v=E[n+1]||[],s=0;s<e;s++)d[s]===void 0&&(b=(d[s-1]!==void 0?1:0)+(d[s+1]!==void 0?1:0)+(l[s]!==void 0?1:0)+(v[s]!==void 0?1:0),b?(n===0&&b++,s===0&&b++,n===E.length-1&&b++,s===d.length-1&&b++,b<4&&(C[[n,s]]=[n,s,b]),i.push([n,s,b])):T.push([n,s]));for(;T.length;){for(h={},_=!1,p=T.length-1;p>=0;p--)o=T[p],n=o[0],s=o[1],b=((C[[n-1,s]]||r)[2]+(C[[n+1,s]]||r)[2]+(C[[n,s-1]]||r)[2]+(C[[n,s+1]]||r)[2])/20,b&&(h[o]=[n,s,b],T.splice(p,1),_=!0);if(!_)throw"findEmpties iterated with no new neighbors";for(o in h)C[o]=h[o],i.push(h[o])}return i.sort(function(a,c){return c[2]-a[2]})}},55512:function(Q,U,t){var M=t(93024),E=t(3400),i=E.isArrayOrTypedArray,C=t(54460),T=t(8932).extractOpts;Q.exports=function(v,d,r,e,l){l||(l={});var n=l.isContour,s=v.cd[0],o=s.trace,p=v.xa,b=v.ya,h=s.x,_=s.y,a=s.z,c=s.xCenter,f=s.yCenter,x=s.zmask,k=o.zhoverformat,y=h,A=_,L,u,m,S;if(v.index!==!1){try{m=Math.round(v.index[1]),S=Math.round(v.index[0])}catch{E.error("Error hovering on heatmap, pointNumber must be [row,col], found:",v.index);return}if(m<0||m>=a[0].length||S<0||S>a.length)return}else{if(M.inbox(d-h[0],d-h[h.length-1],0)>0||M.inbox(r-_[0],r-_[_.length-1],0)>0)return;if(n){var w;for(y=[2*h[0]-h[1]],w=1;w<h.length;w++)y.push((h[w]+h[w-1])/2);for(y.push([2*h[h.length-1]-h[h.length-2]]),A=[2*_[0]-_[1]],w=1;w<_.length;w++)A.push((_[w]+_[w-1])/2);A.push([2*_[_.length-1]-_[_.length-2]])}m=Math.max(0,Math.min(y.length-2,E.findBin(d,y))),S=Math.max(0,Math.min(A.length-2,E.findBin(r,A)))}var I=p.c2p(h[m]),O=p.c2p(h[m+1]),D=b.c2p(_[S]),P=b.c2p(_[S+1]),F,R;n?(F=s.orig_x||h,R=s.orig_y||_,O=I,L=F[m],P=D,u=R[S]):(F=s.orig_x||c||h,R=s.orig_y||f||_,L=c?F[m]:(F[m]+F[m+1])/2,u=f?R[S]:(R[S]+R[S+1])/2,p&&p.type==="category"&&(L=h[m]),b&&b.type==="category"&&(u=_[S]),o.zsmooth&&(I=O=p.c2p(L),D=P=b.c2p(u)));var B=a[S][m];if(x&&!x[S][m]&&(B=void 0),!(B===void 0&&!o.hoverongaps)){var N;i(s.hovertext)&&i(s.hovertext[S])?N=s.hovertext[S][m]:i(s.text)&&i(s.text[S])&&(N=s.text[S][m]);var G=T(o),X={type:"linear",range:[G.min,G.max],hoverformat:k,_separators:p._separators,_numFormat:p._numFormat},J=C.tickText(X,B,"hover").text;return[E.extendFlat(v,{index:o._after2before?o._after2before[S][m]:[S,m],distance:v.maxHoverDistance,spikeDistance:v.maxSpikeDistance,x0:I,x1:O,y0:D,y1:P,xLabelVal:L,yLabelVal:u,zLabelVal:B,zLabel:J,text:N})]}}},81932:function(Q,U,t){Q.exports={attributes:t(83328),supplyDefaults:t(24480),calc:t(19512),plot:t(41420),colorbar:t(96288),style:t(41648),hoverPoints:t(55512),moduleType:"trace",name:"heatmap",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(Q,U,t){var M=t(3400),E=.01,i=[[-1,0],[1,0],[0,-1],[0,1]];function C(v){return .5-.25*Math.min(1,v*.5)}Q.exports=function(v,d){var r=1,e;for(T(v,d),e=0;e<d.length&&!(d[e][2]<4);e++);for(d=d.slice(e),e=0;e<100&&r>E;e++)r=T(v,d,C(r));return r>E&&M.log("interp2d didn't converge quickly",r),v};function T(v,d,r){var e=0,l,n,s,o,p,b,h,_,a,c,f,x,k;for(o=0;o<d.length;o++){for(l=d[o],n=l[0],s=l[1],f=v[n][s],c=0,a=0,p=0;p<4;p++)b=i[p],h=v[n+b[0]],h&&(_=h[s+b[1]],_!==void 0&&(c===0?x=k=_:(x=Math.min(x,_),k=Math.max(k,_)),a++,c+=_));if(a===0)throw"iterateInterp2d order is wrong: no defined neighbors";v[n][s]=c/a,f===void 0?a<4&&(e=1):(v[n][s]=(1+r)*v[n][s]-r*f,k>x&&(e=Math.max(e,Math.abs(v[n][s]-f)/(k-x))))}return e}},39096:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){E("texttemplate");var C=M.extendFlat({},i.font,{color:"auto",size:"auto"});M.coerceFont(E,"textfont",C)}},35744:function(Q,U,t){var M=t(24040),E=t(3400).isArrayOrTypedArray;Q.exports=function(i,C,T,v,d,r){var e=[],l=M.traceIs(i,"contour"),n=M.traceIs(i,"histogram"),s=M.traceIs(i,"gl2d"),o,p,b,h=E(C)&&C.length>1;if(h&&!n&&r.type!=="category"){var _=C.length;if(_<=d){if(l||s)e=Array.from(C).slice(0,d);else if(d===1)r.type==="log"?e=[.5*C[0],2*C[0]]:e=[C[0]-.5,C[0]+.5];else if(r.type==="log"){for(e=[Math.pow(C[0],1.5)/Math.pow(C[1],.5)],b=1;b<_;b++)e.push(Math.sqrt(C[b-1]*C[b]));e.push(Math.pow(C[_-1],1.5)/Math.pow(C[_-2],.5))}else{for(e=[1.5*C[0]-.5*C[1]],b=1;b<_;b++)e.push((C[b-1]+C[b])*.5);e.push(1.5*C[_-1]-.5*C[_-2])}if(_<d){var a=e[e.length-1],c;if(r.type==="log")for(c=a/e[e.length-2],b=_;b<d;b++)a*=c,e.push(a);else for(c=a-e[e.length-2],b=_;b<d;b++)a+=c,e.push(a)}}else return l?C.slice(0,d):C.slice(0,d+1)}else{var f=i[r._id.charAt(0)+"calendar"];if(n)o=r.r2c(T,0,f);else if(E(C)&&C.length===1)o=C[0];else if(T===void 0)o=0;else{var x=r.type==="log"?r.d2c:r.r2c;o=x(T,0,f)}for(p=v||1,b=l||s?0:-.5;b<d;b++)e.push(o+p*b)}return e}},41420:function(Q,U,t){var M=t(33428),E=t(49760),i=t(24040),C=t(43616),T=t(54460),v=t(3400),d=t(72736),r=t(76688),e=t(76308),l=t(8932).extractOpts,n=t(8932).makeColorScaleFuncFromTrace,s=t(9616),o=t(84284),p=o.LINE_SPACING,b=t(9188),h=t(2264).STYLE,_="heatmap-label";function a(y){return y.selectAll("g."+_)}function c(y){a(y).remove()}Q.exports=function(y,A,L,u){var m=A.xaxis,S=A.yaxis;v.makeTraceGroups(u,L,"hm").each(function(w){var I=M.select(this),O=w[0],D=O.trace,P=D.xgap||0,F=D.ygap||0,R=O.z,B=O.x,N=O.y,G=O.xCenter,X=O.yCenter,J=i.traceIs(D,"contour"),it=J?"best":D.zsmooth,nt=R.length,q=v.maxRowLength(R),Z=!1,$=!1,V,rt,ot,H,Y,at,et,ct;for(at=0;V===void 0&&at<B.length-1;)V=m.c2p(B[at]),at++;for(at=B.length-1;rt===void 0&&at>0;)rt=m.c2p(B[at]),at--;for(rt<V&&(ot=rt,rt=V,V=ot,Z=!0),at=0;H===void 0&&at<N.length-1;)H=S.c2p(N[at]),at++;for(at=N.length-1;Y===void 0&&at>0;)Y=S.c2p(N[at]),at--;Y<H&&(ot=H,H=Y,Y=ot,$=!0),J&&(G=B,X=N,B=O.xfill,N=O.yfill);var ft="default";if(it?ft=it==="best"?"smooth":"fast":D._islinear&&P===0&&F===0&&b()&&(ft="fast"),ft!=="fast"){var yt=it==="best"?0:.5;V=Math.max(-yt*m._length,V),rt=Math.min((1+yt)*m._length,rt),H=Math.max(-yt*S._length,H),Y=Math.min((1+yt)*S._length,Y)}var xt=Math.round(rt-V),Ct=Math.round(Y-H),gt=V>=m._length||rt<=0||H>=S._length||Y<=0;if(gt){var mt=I.selectAll("image").data([]);mt.exit().remove(),c(I);return}var vt,At;ft==="fast"?(vt=q,At=nt):(vt=xt,At=Ct);var Ot=document.createElement("canvas");Ot.width=vt,Ot.height=At;var It=Ot.getContext("2d",{willReadFrequently:!0}),St=n(D,{noNumericCheck:!0,returnArray:!0}),Bt,re;ft==="fast"?(Bt=Z?function($r){return q-1-$r}:v.identity,re=$?function($r){return nt-1-$r}:v.identity):(Bt=function($r){return v.constrain(Math.round(m.c2p(B[$r])-V),0,xt)},re=function($r){return v.constrain(Math.round(S.c2p(N[$r])-H),0,Ct)});var Yt=re(0),he=[Yt,Yt],Zt=Z?0:1,ae=$?0:1,oe=0,ce=0,ue=0,ye=0,Tt,Ft,$t,Vt,Nt;function Mt($r,fn){if($r!==void 0){var on=St($r);return on[0]=Math.round(on[0]),on[1]=Math.round(on[1]),on[2]=Math.round(on[2]),oe+=fn,ce+=on[0]*fn,ue+=on[1]*fn,ye+=on[2]*fn,on}return[0,0,0,0]}function Et($r,fn,on,In){var En=$r[on.bin0];if(En===void 0)return Mt(void 0,1);var $n=$r[on.bin1],ri=fn[on.bin0],ui=fn[on.bin1],ni=$n-En||0,zn=ri-En||0,ur;return $n===void 0?ui===void 0?ur=0:ri===void 0?ur=2*(ui-En):ur=(2*ui-ri-En)*2/3:ui===void 0?ri===void 0?ur=0:ur=(2*En-$n-ri)*2/3:ri===void 0?ur=(2*ui-$n-En)*2/3:ur=ui+En-$n-ri,Mt(En+on.frac*ni+In.frac*(zn+on.frac*ur))}if(ft!=="default"){var Dt=0,dt;try{dt=new Uint8Array(vt*At*4)}catch{dt=new Array(vt*At*4)}if(ft==="smooth"){var ht=G||B,bt=X||N,Pt=new Array(ht.length),Gt=new Array(bt.length),te=new Array(xt),ne=G?x:f,je=X?x:f,Ne,ge,_e;for(at=0;at<ht.length;at++)Pt[at]=Math.round(m.c2p(ht[at])-V);for(at=0;at<bt.length;at++)Gt[at]=Math.round(S.c2p(bt[at])-H);for(at=0;at<xt;at++)te[at]=ne(at,Pt);for(et=0;et<Ct;et++)for(Ne=je(et,Gt),ge=R[Ne.bin0],_e=R[Ne.bin1],at=0;at<xt;at++,Dt+=4)Nt=Et(ge,_e,te[at],Ne),k(dt,Dt,Nt)}else for(et=0;et<nt;et++)for(Vt=R[et],he=re(et),at=0;at<q;at++)Nt=Mt(Vt[at],1),Dt=(he*q+Bt(at))*4,k(dt,Dt,Nt);var De=It.createImageData(vt,At);try{De.data.set(dt)}catch{var hr=De.data,fe=hr.length;for(et=0;et<fe;et++)hr[et]=dt[et]}It.putImageData(De,0,0)}else{var Be=Math.floor(P/2),He=Math.floor(F/2);for(et=0;et<nt;et++)if(Vt=R[et],he.reverse(),he[ae]=re(et+1),!(he[0]===he[1]||he[0]===void 0||he[1]===void 0))for(Ft=Bt(0),Tt=[Ft,Ft],at=0;at<q;at++)Tt.reverse(),Tt[Zt]=Bt(at+1),!(Tt[0]===Tt[1]||Tt[0]===void 0||Tt[1]===void 0)&&($t=Vt[at],Nt=Mt($t,(Tt[1]-Tt[0])*(he[1]-he[0])),It.fillStyle="rgba("+Nt.join(",")+")",It.fillRect(Tt[0]+Be,he[0]+He,Tt[1]-Tt[0]-P,he[1]-he[0]-F))}ce=Math.round(ce/oe),ue=Math.round(ue/oe),ye=Math.round(ye/oe);var pr=E("rgb("+ce+","+ue+","+ye+")");y._hmpixcount=(y._hmpixcount||0)+oe,y._hmlumcount=(y._hmlumcount||0)+oe*pr.getLuminance();var Ze=I.selectAll("image").data(w);Ze.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),Ze.attr({height:Ct,width:xt,x:V,y:H,"xlink:href":Ot.toDataURL("image/png")}),ft==="fast"&&!it&&Ze.attr("style",h),c(I);var Xt=D.texttemplate;if(Xt){var ie=l(D),pe={type:"linear",range:[ie.min,ie.max],_separators:m._separators,_numFormat:m._numFormat},ke=D.type==="histogram2dcontour",Ce=D.type==="contour",Fe=Ce?1:0,Re=Ce?nt-1:nt,be=Ce?1:0,Ge=Ce?q-1:q,Ke=[];for(at=Fe;at<Re;at++){var or;if(Ce)or=O.y[at];else if(ke){if(at===0||at===nt-1)continue;or=O.y[at]}else if(O.yCenter)or=O.yCenter[at];else{if(at+1===nt&&O.y[at+1]===void 0)continue;or=(O.y[at]+O.y[at+1])/2}var sr=Math.round(S.c2p(or));if(!(0>sr||sr>S._length))for(et=be;et<Ge;et++){var zt;if(Ce)zt=O.x[et];else if(ke){if(et===0||et===q-1)continue;zt=O.x[et]}else if(O.xCenter)zt=O.xCenter[et];else{if(et+1===q&&O.x[et+1]===void 0)continue;zt=(O.x[et]+O.x[et+1])/2}var Ut=Math.round(m.c2p(zt));if(!(0>Ut||Ut>m._length)){var Me=r({x:zt,y:or},D,y._fullLayout);Me.x=zt,Me.y=or;var Te=O.z[at][et];Te===void 0?(Me.z="",Me.zLabel=""):(Me.z=Te,Me.zLabel=T.tickText(pe,Te,"hover").text);var qe=O.text&&O.text[at]&&O.text[at][et];(qe===void 0||qe===!1)&&(qe=""),Me.text=qe;var Qe=v.texttemplateString(Xt,Me,y._fullLayout._d3locale,Me,D._meta||{});if(Qe){var Je=Qe.split("<br>"),We=Je.length,Oe=0;for(ct=0;ct<We;ct++)Oe=Math.max(Oe,Je[ct].length);Ke.push({l:We,c:Oe,t:Qe,x:Ut,y:sr,z:Te})}}}}var rr=D.textfont,cr=rr.family,lr=rr.size,nr=y._fullLayout.font.size;if(!lr||lr==="auto"){var Sr=1/0,kr=1/0,Mr=0,rn=0;for(ct=0;ct<Ke.length;ct++){var Ur=Ke[ct];if(Mr=Math.max(Mr,Ur.l),rn=Math.max(rn,Ur.c),ct<Ke.length-1){var pn=Ke[ct+1],yn=Math.abs(pn.x-Ur.x),yr=Math.abs(pn.y-Ur.y);yn&&(Sr=Math.min(Sr,yn)),yr&&(kr=Math.min(kr,yr))}}!isFinite(Sr)||!isFinite(kr)?lr=nr:(Sr-=P,kr-=F,Sr/=rn,kr/=Mr,Sr/=p/2,kr/=p,lr=Math.min(Math.floor(Sr),Math.floor(kr),nr))}if(lr<=0||!isFinite(lr))return;var Cr=function($r){return $r.x},Dr=function($r){return $r.y-lr*($r.l*p/2-1)},Nr=a(I).data(Ke);Nr.enter().append("g").classed(_,1).append("text").attr("text-anchor","middle").each(function($r){var fn=M.select(this),on=rr.color;(!on||on==="auto")&&(on=e.contrast($r.z===void 0?y._fullLayout.plot_bgcolor:"rgba("+St($r.z).join()+")")),fn.attr("data-notex",1).call(d.positionText,Cr($r),Dr($r)).call(C.font,cr,lr,on).text($r.t).call(d.convertToTspans,y)})}})};function f(y,A){var L=A.length-2,u=v.constrain(v.findBin(y,A),0,L),m=A[u],S=A[u+1],w=v.constrain(u+(y-m)/(S-m)-.5,0,L),I=Math.round(w),O=Math.abs(w-I);return!w||w===L||!O?{bin0:I,bin1:I,frac:0}:{bin0:I,frac:O,bin1:Math.round(I+O/(w-I))}}function x(y,A){var L=A.length-1,u=v.constrain(v.findBin(y,A),0,L),m=A[u],S=A[u+1],w=(y-m)/(S-m)||0;return w<=0?{bin0:u,bin1:u,frac:0}:w<.5?{bin0:u,bin1:u+1,frac:w}:{bin0:u+1,bin1:u,frac:1-w}}function k(y,A,L){y[A]=L[0],y[A+1]=L[1],y[A+2]=L[2],y[A+3]=Math.round(L[3]*255)}},41648:function(Q,U,t){var M=t(33428);Q.exports=function(E){M.select(E).selectAll(".hm image").style("opacity",function(i){return i.trace.opacity})}},82748:function(Q){Q.exports=function(U,t,M){var E=M("zsmooth");E===!1&&(M("xgap"),M("ygap")),M("zhoverformat")}},51264:function(Q,U,t){var M=t(38248),E=t(3400),i=t(24040);Q.exports=function(v,d,r,e,l,n){var s=r("z");l=l||"x",n=n||"y";var o,p;if(s===void 0||!s.length)return 0;if(E.isArray1D(s)){o=r(l),p=r(n);var b=E.minRowLength(o),h=E.minRowLength(p);if(b===0||h===0)return 0;d._length=Math.min(b,h,s.length)}else{if(o=C(l,r),p=C(n,r),!T(s))return 0;r("transpose"),d._length=null}if(v.type==="heatmapgl")return!0;var _=i.getComponentMethod("calendars","handleTraceDefaults");return _(v,d,[l,n],e),!0};function C(v,d){var r=d(v),e=r?d(v+"type","array"):"scaled";return e==="scaled"&&(d(v+"0"),d("d"+v)),r}function T(v){for(var d=!0,r=!1,e=!1,l,n=0;n<v.length;n++){if(l=v[n],!E.isArrayOrTypedArray(l)){d=!1;break}l.length>0&&(r=!0);for(var s=0;s<l.length;s++)if(M(l[s])){e=!0;break}}return d&&r&&e}},74512:function(Q,U,t){for(var M=t(83328),E=t(49084),i=t(92880).extendFlat,C=t(67824).overrideAll,T=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],v={},d=0;d<T.length;d++){var r=T[d];v[r]=M[r]}v.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},i(v,E("",{cLetter:"z",autoColorDflt:!1})),Q.exports=C(v,"calc","nested")},84656:function(Q,U,t){var M=t(67792).gl_heatmap2d,E=t(54460),i=t(43080);function C(r,e){this.scene=r,this.uid=e,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=M(r.glplot,this.options),this.heatmap._trace=this}var T=C.prototype;T.handlePick=function(r){var e=this.options,l=e.shape,n=r.pointId,s=n%l[0],o=Math.floor(n/l[0]),p=n;return{trace:this,dataCoord:r.dataCoord,traceCoord:[e.x[s],e.y[o],e.z[p]],textLabel:this.textLabels[n],name:this.name,pointIndex:[o,s],hoverinfo:this.hoverinfo}},T.update=function(r,e){var l=e[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var n=l.z;this.options.z=[].concat.apply([],n);var s=n[0].length,o=n.length;this.options.shape=[s,o],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=r.zsmooth;var p=v(r);this.options.colorLevels=p.colorLevels,this.options.colorValues=p.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var b=this.scene.xaxis,h=this.scene.yaxis,_,a;r.zsmooth===!1&&(_={ppad:l.x[1]-l.x[0]},a={ppad:l.y[1]-l.y[0]}),r._extremes[b._id]=E.findExtremes(b,l.x,_),r._extremes[h._id]=E.findExtremes(h,l.y,a)},T.dispose=function(){this.heatmap.dispose()};function v(r){for(var e=r.colorscale,l=r.zmin,n=r.zmax,s=e.length,o=new Array(s),p=new Array(4*s),b=0;b<s;b++){var h=e[b],_=i(h[1]);o[b]=l+h[0]*(n-l);for(var a=0;a<4;a++)p[4*b+a]=_[a]}return{colorLevels:o,colorValues:p}}function d(r,e,l){var n=new C(r,e.uid);return n.update(e,l),n}Q.exports=d},86464:function(Q,U,t){var M=t(3400),E=t(51264),i=t(27260),C=t(74512);Q.exports=function(T,v,d,r){function e(n,s){return M.coerce(T,v,C,n,s)}var l=E(T,v,e,r);if(!l){v.visible=!1;return}e("text"),e("zsmooth"),i(T,v,r,e,{prefix:"",cLetter:"z"})}},45536:function(Q,U,t){Q.exports={attributes:t(74512),supplyDefaults:t(86464),colorbar:t(96288),calc:t(19512),plot:t(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:t(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(Q,U,t){var M=t(20832),E=t(29736).axisHoverFormat,i=t(21776).Ks,C=t(21776).Gw,T=t(25376),v=t(11120),d=t(73316),r=t(92880).extendFlat;Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:E("x"),yhoverformat:E("y"),text:r({},M.text,{}),hovertext:r({},M.hovertext,{}),orientation:M.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:v("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:v("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({},{keys:d.eventDataKeys}),texttemplate:C({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},M.textposition,{arrayOk:!1}),textfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:T({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:M.insidetextanchor,textangle:M.textangle,cliponaxis:M.cliponaxis,constraintext:M.constraintext,marker:M.marker,offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,_deprecated:{bardir:M._deprecated.bardir},zorder:M.zorder}},2e3:function(Q){Q.exports=function(U,t){for(var M=U.length,E=0,i=0;i<M;i++)t[i]?(U[i]/=t[i],E+=U[i]):U[i]=null;return E}},11120:function(Q){Q.exports=function(U,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(Q,U,t){var M=t(38248);Q.exports={count:function(E,i,C){return C[E]++,1},sum:function(E,i,C,T){var v=T[i];return M(v)?(v=Number(v),C[E]+=v,v):0},avg:function(E,i,C,T,v){var d=T[i];return M(d)&&(d=Number(d),C[E]+=d,v[E]++),0},min:function(E,i,C,T){var v=T[i];if(M(v))if(v=Number(v),M(C[E])){if(C[E]>v){var d=v-C[E];return C[E]=v,d}}else return C[E]=v,v;return 0},max:function(E,i,C,T){var v=T[i];if(M(v))if(v=Number(v),M(C[E])){if(C[E]<v){var d=v-C[E];return C[E]=v,d}}else return C[E]=v,v;return 0}}},67712:function(Q,U,t){var M=t(39032),E=M.ONEAVGYEAR,i=M.ONEAVGMONTH,C=M.ONEDAY,T=M.ONEHOUR,v=M.ONEMIN,d=M.ONESEC,r=t(54460).tickIncrement;Q.exports=function(o,p,b,h,_){var a=-1.1*p,c=-.1*p,f=o-c,x=b[0],k=b[1],y=Math.min(e(x+c,x+f,h,_),e(k+c,k+f,h,_)),A=Math.min(e(x+a,x+c,h,_),e(k+a,k+c,h,_)),L,u;if(y>A&&A<Math.abs(k-x)/4e3?(L=y,u=!1):(L=Math.min(y,A),u=!0),h.type==="date"&&L>C){var m=L===E?1:6,S=L===E?"M12":"M1";return function(w,I){var O=h.c2d(w,E,_),D=O.indexOf("-",m);D>0&&(O=O.substr(0,D));var P=h.d2c(O,0,_);if(P<w){var F=r(P,S,!1,_);(P+F)/2<w+o&&(P=F)}return I&&u?r(P,S,!0,_):P}}return function(w,I){var O=L*Math.round(w/L);return O+L/10<w&&O+L*.9<w+o&&(O+=L),I&&u&&(O-=L),O}};function e(o,p,b,h){if(o*p<=0)return 1/0;for(var _=Math.abs(p-o),a=b.type==="date",c=l(_,a),f=0;f<10;f++){var x=l(c*80,a);if(c===x)break;if(n(x,o,p,a,b,h))c=x;else break}return c}function l(o,p){return p&&o>d?o>C?o>E*1.1?E:o>i*1.1?i:C:o>T?T:o>v?v:d:Math.pow(10,Math.floor(Math.log(o)/Math.LN10))}function n(o,p,b,h,_,a){if(h&&o>C){var c=s(p,_,a),f=s(b,_,a),x=o===E?0:1;return c[x]!==f[x]}return Math.floor(b/o)-Math.floor(p/o)>.1}function s(o,p,b){var h=p.c2d(o,E,b).split("-");return h[0]===""&&(h.unshift(),h[0]="-"+h[0]),h}},35852:function(Q,U,t){var M=t(38248),E=t(3400),i=t(24040),C=t(54460),T=t(84664),v=t(16964),d=t(10648),r=t(2e3),e=t(67712);function l(b,h){var _=[],a=[],c=h.orientation==="h",f=C.getFromId(b,c?h.yaxis:h.xaxis),x=c?"y":"x",k={x:"y",y:"x"}[x],y=h[x+"calendar"],A=h.cumulative,L,u=n(b,h,f,x),m=u[0],S=u[1],w=typeof m.size=="string",I=[],O=w?I:m,D=[],P=[],F=[],R=0,B=h.histnorm,N=h.histfunc,G=B.indexOf("density")!==-1,X,J,it;A.enabled&&G&&(B=B.replace(/ ?density$/,""),G=!1);var nt=N==="max"||N==="min",q=nt?null:0,Z=v.count,$=d[B],V=!1,rt=function(It){return f.r2c(It,0,y)},ot;for(E.isArrayOrTypedArray(h[k])&&N!=="count"&&(ot=h[k],V=N==="avg",Z=v[N]),L=rt(m.start),J=rt(m.end)+(L-C.tickIncrement(L,m.size,!1,y))/1e6;L<J&&_.length<1e6&&(X=C.tickIncrement(L,m.size,!1,y),_.push((L+X)/2),a.push(q),F.push([]),I.push(L),G&&D.push(1/(X-L)),V&&P.push(0),!(X<=L));)L=X;I.push(L),!w&&f.type==="date"&&(O={start:rt(O.start),end:rt(O.end),size:O.size}),b._fullLayout._roundFnOpts||(b._fullLayout._roundFnOpts={});var H=h["_"+x+"bingroup"],Y={leftGap:1/0,rightGap:1/0};H&&(b._fullLayout._roundFnOpts[H]||(b._fullLayout._roundFnOpts[H]=Y),Y=b._fullLayout._roundFnOpts[H]);var at=a.length,et=!0,ct=Y.leftGap,ft=Y.rightGap,yt={};for(L=0;L<S.length;L++){var xt=S[L];it=E.findBin(xt,O),it>=0&&it<at&&(R+=Z(it,L,a,ot,P),et&&F[it].length&&xt!==S[F[it][0]]&&(et=!1),F[it].push(L),yt[L]=it,ct=Math.min(ct,xt-I[it]),ft=Math.min(ft,I[it+1]-xt))}Y.leftGap=ct,Y.rightGap=ft;var Ct;et||(Ct=function(It,St){return function(){var Bt=b._fullLayout._roundFnOpts[H];return e(Bt.leftGap,Bt.rightGap,I,f,y)(It,St)}}),V&&(R=r(a,P)),$&&$(a,R,D),A.enabled&&p(a,A.direction,A.currentbin);var gt=Math.min(_.length,a.length),mt=[],vt=0,At=gt-1;for(L=0;L<gt;L++)if(a[L]){vt=L;break}for(L=gt-1;L>=vt;L--)if(a[L]){At=L;break}for(L=vt;L<=At;L++)if(M(_[L])&&M(a[L])){var Ot={p:_[L],s:a[L],b:0};A.enabled||(Ot.pts=F[L],et?Ot.ph0=Ot.ph1=F[L].length?S[F[L][0]]:_[L]:(h._computePh=!0,Ot.ph0=Ct(I[L]),Ot.ph1=Ct(I[L+1],!0))),mt.push(Ot)}return mt.length===1&&(mt[0].width1=C.tickIncrement(mt[0].p,m.size,!1,y)-mt[0].p),T(mt,h),E.isArrayOrTypedArray(h.selectedpoints)&&E.tagSelected(mt,h,yt),mt}function n(b,h,_,a,c){var f=a+"bins",x=b._fullLayout,k=h["_"+a+"bingroup"],y=x._histogramBinOpts[k],A=x.barmode==="overlay",L,u,m,S,w,I,O,D=function(xt){return _.r2c(xt,0,S)},P=function(xt){return _.c2r(xt,0,S)},F=_.type==="date"?function(xt){return xt||xt===0?E.cleanDate(xt,null,S):null}:function(xt){return M(xt)?Number(xt):null};function R(xt,Ct,gt){Ct[xt+"Found"]?(Ct[xt]=F(Ct[xt]),Ct[xt]===null&&(Ct[xt]=gt[xt])):(I[xt]=Ct[xt]=gt[xt],E.nestedProperty(u[0],f+"."+xt).set(gt[xt]))}if(h["_"+a+"autoBinFinished"])delete h["_"+a+"autoBinFinished"];else{u=y.traces;var B=[],N=!0,G=!1,X=!1;for(L=0;L<u.length;L++)if(m=u[L],m.visible){var J=y.dirs[L];w=m["_"+J+"pos0"]=_.makeCalcdata(m,J),B=E.concat(B,w),delete m["_"+a+"autoBinFinished"],h.visible===!0&&(N?N=!1:(delete m._autoBin,m["_"+a+"autoBinFinished"]=1),i.traceIs(m,"2dMap")&&(G=!0),m.type==="histogram2dcontour"&&(X=!0))}S=u[0][a+"calendar"];var it=C.autoBin(B,_,y.nbins,G,S,y.sizeFound&&y.size),nt=u[0]._autoBin={};if(I=nt[y.dirs[0]]={},X&&(y.size||(it.start=P(C.tickIncrement(D(it.start),it.size,!0,S))),y.end===void 0&&(it.end=P(C.tickIncrement(D(it.end),it.size,!1,S)))),A&&!i.traceIs(h,"2dMap")&&it._dataSpan===0&&_.type!=="category"&&_.type!=="multicategory"&&h.bingroup===""&&typeof h.xbins>"u"){if(c)return[it,w,!0];it=s(b,h,_,a,f)}O=m.cumulative||{},O.enabled&&O.currentbin!=="include"&&(O.direction==="decreasing"?it.start=P(C.tickIncrement(D(it.start),it.size,!0,S)):it.end=P(C.tickIncrement(D(it.end),it.size,!1,S))),y.size=it.size,y.sizeFound||(I.size=it.size,E.nestedProperty(u[0],f+".size").set(it.size)),R("start",y,it),R("end",y,it)}w=h["_"+a+"pos0"],delete h["_"+a+"pos0"];var q=h._input[f]||{},Z=E.extendFlat({},y),$=y.start,V=_.r2l(q.start),rt=V!==void 0;if((y.startFound||rt)&&V!==_.r2l($)){var ot=rt?V:E.aggNums(Math.min,null,w),H={type:_.type==="category"||_.type==="multicategory"?"linear":_.type,r2l:_.r2l,dtick:y.size,tick0:$,calendar:S,range:[ot,C.tickIncrement(ot,y.size,!1,S)].map(_.l2r)},Y=C.tickFirst(H);Y>_.r2l(ot)&&(Y=C.tickIncrement(Y,y.size,!0,S)),Z.start=_.l2r(Y),rt||E.nestedProperty(h,f+".start").set(Z.start)}var at=y.end,et=_.r2l(q.end),ct=et!==void 0;if((y.endFound||ct)&&et!==_.r2l(at)){var ft=ct?et:E.aggNums(Math.max,null,w);Z.end=_.l2r(ft),ct||E.nestedProperty(h,f+".start").set(Z.end)}var yt="autobin"+a;return h._input[yt]===!1&&(h._input[f]=E.extendFlat({},h[f]||{}),delete h._input[yt],delete h[yt]),[Z,w]}function s(b,h,_,a,c){var f=b._fullLayout,x=o(b,h),k=!1,y=1/0,A=[h],L,u,m;for(L=0;L<x.length;L++)if(u=x[L],u===h)k=!0;else if(!k)m=f._histogramBinOpts[u["_"+a+"bingroup"]],y=Math.min(y,m.size||u[c].size);else{var S=n(b,u,_,a,!0),w=S[0],I=S[2];u["_"+a+"autoBinFinished"]=1,u["_"+a+"pos0"]=S[1],I?A.push(u):y=Math.min(y,w.size)}var O=new Array(A.length);for(L=0;L<A.length;L++)for(var D=A[L]["_"+a+"pos0"],P=0;P<D.length;P++)if(D[P]!==void 0){O[L]=D[P];break}for(isFinite(y)||(y=E.distinctVals(O).minDiff),L=0;L<A.length;L++){u=A[L];var F=u[a+"calendar"],R={start:_.c2r(O[L]-y/2,0,F),end:_.c2r(O[L]+y/2,0,F),size:y};u._input[c]=u[c]=R,m=f._histogramBinOpts[u["_"+a+"bingroup"]],m&&E.extendFlat(m,R)}return h[c]}function o(b,h){for(var _=h.xaxis,a=h.yaxis,c=h.orientation,f=[],x=b._fullData,k=0;k<x.length;k++){var y=x[k];y.type==="histogram"&&y.visible===!0&&y.orientation===c&&y.xaxis===_&&y.yaxis===a&&f.push(y)}return f}function p(b,h,_){var a,c,f;function x(y){f=b[y],b[y]/=2}function k(y){c=b[y],b[y]=f+c/2,f+=c}if(_==="half")if(h==="increasing")for(x(0),a=1;a<b.length;a++)k(a);else for(x(b.length-1),a=b.length-2;a>=0;a--)k(a);else if(h==="increasing"){for(a=1;a<b.length;a++)b[a]+=b[a-1];_==="exclude"&&(b.unshift(0),b.pop())}else{for(a=b.length-2;a>=0;a--)b[a]+=b[a+1];_==="exclude"&&(b.push(0),b.shift())}}Q.exports={calc:l,calcAllAutoBins:n}},73316:function(Q){Q.exports={eventDataKeys:["binNumber"]}},80536:function(Q,U,t){var M=t(3400),E=t(79811),i=t(24040).traceIs,C=t(20011),T=t(31508).validateCornerradius,v=M.nestedProperty,d=t(71888).getAxisGroup,r=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];Q.exports=function(l,n){var s=n._histogramBinOpts={},o=[],p={},b=[],h,_,a,c,f,x,k;function y(J,it){return M.coerce(h._input,h,h._module.attributes,J,it)}function A(J){return J.orientation==="v"?"x":"y"}function L(J,it){var nt=E.getFromTrace({_fullLayout:n},J,it);return nt.type}function u(J,it,nt){var q=J.uid+"__"+nt;it||(it=q);var Z=L(J,nt),$=J[nt+"calendar"]||"",V=s[it],rt=!0;V&&(Z===V.axType&&$===V.calendar?(rt=!1,V.traces.push(J),V.dirs.push(nt)):(it=q,Z!==V.axType&&M.warn(["Attempted to group the bins of trace",J.index,"set on a","type:"+Z,"axis","with bins on","type:"+V.axType,"axis."].join(" ")),$!==V.calendar&&M.warn(["Attempted to group the bins of trace",J.index,"set with a",$,"calendar","with bins",V.calendar?"on a "+V.calendar+" calendar":"w/o a set calendar"].join(" ")))),rt&&(s[it]={traces:[J],dirs:[nt],axType:Z,calendar:J[nt+"calendar"]||""}),J["_"+nt+"bingroup"]=it}for(f=0;f<l.length;f++)if(h=l[f],i(h,"histogram")){if(o.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,h.type==="histogram"){var m=y("marker.cornerradius",n.barcornerradius);h.marker&&(h.marker.cornerradius=T(m))}i(h,"2dMap")||C(h._input,h,n,y)}var S=n._alignmentOpts||{};for(f=0;f<o.length;f++){if(h=o[f],a="",!i(h,"2dMap")){if(c=A(h),n.barmode==="group"&&h.alignmentgroup){var w=h[c+"axis"],I=d(n,w)+h.orientation;(S[I]||{})[h.alignmentgroup]&&(a=I)}!a&&n.barmode!=="overlay"&&(a=d(n,h.xaxis)+d(n,h.yaxis)+A(h))}a?(p[a]||(p[a]=[]),p[a].push(h)):b.push(h)}for(a in p){if(_=p[a],_.length===1){b.push(_[0]);continue}var O=!1;for(_.length&&(h=_[0],O=y("bingroup")),a=O||a,f=0;f<_.length;f++){h=_[f];var D=h._input.bingroup;D&&D!==a&&M.warn(["Trace",h.index,"must match","within bingroup",a+".","Ignoring its bingroup:",D,"setting."].join(" ")),h.bingroup=a,u(h,a,A(h))}}for(f=0;f<b.length;f++){h=b[f];var P=y("bingroup");if(i(h,"2dMap"))for(k=0;k<2;k++){c=e[k];var F=y(c+"bingroup",P?P+"__"+c:null);u(h,F,c)}else u(h,P,A(h))}for(a in s){var R=s[a];for(_=R.traces,x=0;x<r.length;x++){var B=r[x],N=B.name,G,X;if(!(N==="nbins"&&R.sizeFound)){for(f=0;f<_.length;f++){if(h=_[f],c=R.dirs[f],G=B.aStr[c],v(h._input,G).get()!==void 0){R[N]=y(G),R[N+"Found"]=!0;break}X=(h._autoBin||{})[c]||{},X[N]&&v(h,G).set(X[N])}if(N==="start"||N==="end")for(;f<_.length;f++)h=_[f],h["_"+c+"bingroup"]&&(X=(h._autoBin||{})[c]||{},y(G,X[N]));N==="nbins"&&!R.sizeFound&&!R.nbinsFound&&(h=_[0],R[N]=y(G))}}}}},6616:function(Q,U,t){var M=t(24040),E=t(3400),i=t(76308),C=t(31508).handleText,T=t(55592),v=t(40196);Q.exports=function(d,r,e,l){function n(A,L){return E.coerce(d,r,v,A,L)}var s=n("x"),o=n("y"),p=n("cumulative.enabled");p&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var b=n("textposition");C(d,r,l,n,b,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var h=n("orientation",o&&!s?"h":"v"),_=h==="v"?"x":"y",a=h==="v"?"y":"x",c=s&&o?Math.min(E.minRowLength(s)&&E.minRowLength(o)):E.minRowLength(r[_]||[]);if(!c){r.visible=!1;return}r._length=c;var f=M.getComponentMethod("calendars","handleTraceDefaults");f(d,r,["x","y"],l);var x=r[a];x&&n("histfunc"),n("histnorm"),n("autobin"+_),T(d,r,n,e,l),E.coerceSelectionMarkerOpacity(r,n);var k=(r.marker.line||{}).color,y=M.getComponentMethod("errorbars","supplyDefaults");y(d,r,k||i.defaultLine,{axis:"y"}),y(d,r,k||i.defaultLine,{axis:"x",inherit:"y"}),n("zorder")}},84980:function(Q){Q.exports=function(U,t,M,E,i){if(U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(U.z=t.zLabelVal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),!(M.cumulative||{}).enabled){var C=Array.isArray(i)?E[0].pts[i[0]][i[1]]:E[i].pts;U.pointNumbers=C,U.binNumber=U.pointNumber,delete U.pointNumber,delete U.pointIndex;var T;if(M._indexToPoints){T=[];for(var v=0;v<C.length;v++)T=T.concat(M._indexToPoints[C[v]])}else T=C;U.pointIndices=T}return U}},43339:function(Q,U,t){var M=t(63400).hoverPoints,E=t(54460).hoverLabelText;Q.exports=function(i,C,T,v,d){var r=M(i,C,T,v,d);if(r){i=r[0];var e=i.cd[i.index],l=i.cd[0].trace;if(!l.cumulative.enabled){var n=l.orientation==="h"?"y":"x";i[n+"Label"]=E(i[n+"a"],[e.ph0,e.ph1],l[n+"hoverformat"])}return r}}},42600:function(Q,U,t){Q.exports={attributes:t(40196),layoutAttributes:t(39324),supplyDefaults:t(6616),crossTraceDefaults:t(80536),supplyLayoutDefaults:t(37156),calc:t(35852).calc,crossTraceCalc:t(96376).crossTraceCalc,plot:t(98184).plot,layerName:"barlayer",style:t(60100).style,styleOnSelect:t(60100).styleOnSelect,colorbar:t(5528),hoverPoints:t(43339),selectPoints:t(45784),eventData:t(84980),moduleType:"trace",name:"histogram",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(Q){Q.exports={percent:function(U,t){for(var M=U.length,E=100/t,i=0;i<M;i++)U[i]*=E},probability:function(U,t){for(var M=U.length,E=0;E<M;E++)U[E]/=t},density:function(U,t,M,E){var i=U.length;E=E||1;for(var C=0;C<i;C++)U[C]*=M[C]*E},"probability density":function(U,t,M,E){var i=U.length;E&&(t/=E);for(var C=0;C<i;C++)U[C]*=M[C]/t}}},37008:function(Q,U,t){var M=t(40196),E=t(11120),i=t(83328),C=t(45464),T=t(29736).axisHoverFormat,v=t(21776).Ks,d=t(21776).Gw,r=t(49084),e=t(92880).extendFlat;Q.exports=e({x:M.x,y:M.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:E("x"),nbinsy:M.nbinsy,ybins:E("y"),autobinx:M.autobinx,autobiny:M.autobiny,bingroup:e({},M.bingroup,{}),xbingroup:e({},M.bingroup,{}),ybingroup:e({},M.bingroup,{}),xgap:i.xgap,ygap:i.ygap,zsmooth:i.zsmooth,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:v({},{keys:"z"}),texttemplate:d({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:i.textfont,showlegend:e({},C.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},55480:function(Q,U,t){var M=t(3400),E=t(54460),i=t(16964),C=t(10648),T=t(2e3),v=t(67712),d=t(35852).calcAllAutoBins;Q.exports=function(n,s){var o=E.getFromId(n,s.xaxis),p=E.getFromId(n,s.yaxis),b=s.xcalendar,h=s.ycalendar,_=function(Vt){return o.r2c(Vt,0,b)},a=function(Vt){return p.r2c(Vt,0,h)},c=function(Vt){return o.c2r(Vt,0,b)},f=function(Vt){return p.c2r(Vt,0,h)},x,k,y,A,L=d(n,s,o,"x"),u=L[0],m=L[1],S=d(n,s,p,"y"),w=S[0],I=S[1],O=s._length;m.length>O&&m.splice(O,m.length-O),I.length>O&&I.splice(O,I.length-O);var D=[],P=[],F=[],R=typeof u.size=="string",B=typeof w.size=="string",N=[],G=[],X=R?N:u,J=B?G:w,it=0,nt=[],q=[],Z=s.histnorm,$=s.histfunc,V=Z.indexOf("density")!==-1,rt=$==="max"||$==="min",ot=rt?null:0,H=i.count,Y=C[Z],at=!1,et=[],ct=[],ft="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";ft&&$!=="count"&&(at=$==="avg",H=i[$]);var yt=u.size,xt=_(u.start),Ct=_(u.end)+(xt-E.tickIncrement(xt,yt,!1,b))/1e6;for(x=xt;x<Ct;x=E.tickIncrement(x,yt,!1,b))P.push(ot),N.push(x),at&&F.push(0);N.push(x);var gt=P.length,mt=(x-xt)/gt,vt=c(xt+mt/2),At=w.size,Ot=a(w.start),It=a(w.end)+(Ot-E.tickIncrement(Ot,At,!1,h))/1e6;for(x=Ot;x<It;x=E.tickIncrement(x,At,!1,h)){D.push(P.slice()),G.push(x);var St=new Array(gt);for(k=0;k<gt;k++)St[k]=[];q.push(St),at&&nt.push(F.slice())}G.push(x);var Bt=D.length,re=(x-Ot)/Bt,Yt=f(Ot+re/2);V&&(et=r(P.length,X,mt,R),ct=r(D.length,J,re,B)),!R&&o.type==="date"&&(X=e(_,X)),!B&&p.type==="date"&&(J=e(a,J));var he=!0,Zt=!0,ae=new Array(gt),oe=new Array(Bt),ce=1/0,ue=1/0,ye=1/0,Tt=1/0;for(x=0;x<O;x++){var Ft=m[x],$t=I[x];y=M.findBin(Ft,X),A=M.findBin($t,J),y>=0&&y<gt&&A>=0&&A<Bt&&(it+=H(y,x,D[A],ft,nt[A]),q[A][y].push(x),he&&(ae[y]===void 0?ae[y]=Ft:ae[y]!==Ft&&(he=!1)),Zt&&(oe[A]===void 0?oe[A]=$t:oe[A]!==$t&&(Zt=!1)),ce=Math.min(ce,Ft-N[y]),ue=Math.min(ue,N[y+1]-Ft),ye=Math.min(ye,$t-G[A]),Tt=Math.min(Tt,G[A+1]-$t))}if(at)for(A=0;A<Bt;A++)it+=T(D[A],nt[A]);if(Y)for(A=0;A<Bt;A++)Y(D[A],it,et,ct[A]);return{x:m,xRanges:l(N,he&&ae,ce,ue,o,b),x0:vt,dx:mt,y:I,yRanges:l(G,Zt&&oe,ye,Tt,p,h),y0:Yt,dy:re,z:D,pts:q}};function r(n,s,o,p){var b=new Array(n),h;if(p)for(h=0;h<n;h++)b[h]=1/(s[h+1]-s[h]);else{var _=1/o;for(h=0;h<n;h++)b[h]=_}return b}function e(n,s){return{start:n(s.start),end:n(s.end),size:s.size}}function l(n,s,o,p,b,h){var _,a=n.length-1,c=new Array(a),f=v(o,p,n,b,h);for(_=0;_<a;_++){var x=(s||[])[_];c[_]=x===void 0?[f(n[_]),f(n[_+1],!0)]:[x,x]}return c}},99784:function(Q,U,t){var M=t(3400),E=t(56408),i=t(82748),C=t(27260),T=t(39096),v=t(37008);Q.exports=function(d,r,e,l){function n(s,o){return M.coerce(d,r,v,s,o)}E(d,r,n,l),r.visible!==!1&&(i(d,r,n,l),C(d,r,l,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),T(n,l),n("xhoverformat"),n("yhoverformat"))}},59576:function(Q,U,t){var M=t(55512),E=t(54460).hoverLabelText;Q.exports=function(i,C,T,v,d){var r=M(i,C,T,v,d);if(r){i=r[0];var e=i.index,l=e[0],n=e[1],s=i.cd[0],o=s.trace,p=s.xRanges[n],b=s.yRanges[l];return i.xLabel=E(i.xa,[p[0],p[1]],o.xhoverformat),i.yLabel=E(i.ya,[b[0],b[1]],o.yhoverformat),r}}},21536:function(Q,U,t){Q.exports={attributes:t(37008),supplyDefaults:t(99784),crossTraceDefaults:t(80536),calc:t(19512),plot:t(41420),layerName:"heatmaplayer",colorbar:t(96288),style:t(41648),hoverPoints:t(59576),eventData:t(84980),moduleType:"trace",name:"histogram2d",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(Q,U,t){var M=t(24040),E=t(3400);Q.exports=function(i,C,T,v){var d=T("x"),r=T("y"),e=E.minRowLength(d),l=E.minRowLength(r);if(!e||!l){C.visible=!1;return}C._length=Math.min(e,l);var n=M.getComponentMethod("calendars","handleTraceDefaults");n(i,C,["x","y"],v);var s=T("z")||T("marker.color");s&&T("histfunc"),T("histnorm"),T("autobinx"),T("autobiny")}},81220:function(Q,U,t){var M=t(37008),E=t(67104),i=t(49084),C=t(29736).axisHoverFormat,T=t(92880).extendFlat;Q.exports=T({x:M.x,y:M.y,z:M.z,marker:M.marker,histnorm:M.histnorm,histfunc:M.histfunc,nbinsx:M.nbinsx,xbins:M.xbins,nbinsy:M.nbinsy,ybins:M.ybins,autobinx:M.autobinx,autobiny:M.autobiny,bingroup:M.bingroup,xbingroup:M.xbingroup,ybingroup:M.ybingroup,autocontour:E.autocontour,ncontours:E.ncontours,contours:E.contours,line:{color:E.line.color,width:T({},E.line.width,{dflt:.5}),dash:E.line.dash,smoothing:E.line.smoothing,editType:"plot"},xhoverformat:C("x"),yhoverformat:C("y"),zhoverformat:C("z",1),hovertemplate:M.hovertemplate,texttemplate:E.texttemplate,textfont:E.textfont},i("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(Q,U,t){var M=t(3400),E=t(56408),i=t(84952),C=t(97680),T=t(39096),v=t(81220);Q.exports=function(d,r,e,l){function n(o,p){return M.coerce(d,r,v,o,p)}function s(o){return M.coerce2(d,r,v,o)}E(d,r,n,l),r.visible!==!1&&(i(d,r,n,s),C(d,r,n,l),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&T(n,l))}},65664:function(Q,U,t){Q.exports={attributes:t(81220),supplyDefaults:t(3704),crossTraceDefaults:t(80536),calc:t(20688),plot:t(23676).plot,layerName:"contourlayer",style:t(52440),colorbar:t(55296),hoverPoints:t(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(49084),C=t(86968).u,T=t(74996),v=t(424),d=t(40516),r=t(32984),e=t(92880).extendFlat,l=t(98192).c;Q.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:d.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:e({colors:v.marker.colors,line:v.marker.line,pattern:l,editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),leaf:v.leaf,pathbar:d.pathbar,text:T.text,textinfo:v.textinfo,texttemplate:E({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:T.hovertext,hoverinfo:v.hoverinfo,hovertemplate:M({},{keys:r.eventDataKeys}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:d.outsidetextfont,textposition:d.textposition,sort:T.sort,root:v.root,domain:C({name:"icicle",trace:!0,editType:"calc"})}},59564:function(Q,U,t){var M=t(7316);U.name="icicle",U.plot=function(E,i,C,T){M.plotBasePlot(U.name,E,i,C,T)},U.clean=function(E,i,C,T){M.cleanBasePlot(U.name,E,i,C,T)}},73876:function(Q,U,t){var M=t(3776);U.r=function(E,i){return M.calc(E,i)},U.q=function(E){return M._runCrossTraceCalc("icicle",E)}},7045:function(Q,U,t){var M=t(3400),E=t(97376),i=t(76308),C=t(86968).Q,T=t(31508).handleText,v=t(78048).TEXTPAD,d=t(74174).handleMarkerDefaults,r=t(8932),e=r.hasColorscale,l=r.handleDefaults;Q.exports=function(n,s,o,p){function b(y,A){return M.coerce(n,s,E,y,A)}var h=b("labels"),_=b("parents");if(!h||!h.length||!_||!_.length){s.visible=!1;return}var a=b("values");a&&a.length?b("branchvalues"):b("count"),b("level"),b("maxdepth"),b("tiling.orientation"),b("tiling.flip"),b("tiling.pad");var c=b("text");b("texttemplate"),s.texttemplate||b("textinfo",M.isArrayOrTypedArray(c)?"text+label":"label"),b("hovertext"),b("hovertemplate");var f=b("pathbar.visible"),x="auto";T(n,s,p,b,x,{hasPathbar:f,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition"),d(n,s,p,b);var k=s._hasColorscale=e(n,"marker","colors")||(n.marker||{}).coloraxis;k&&l(n,s,p,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",k?1:.7),s._hovered={marker:{line:{width:2,color:i.contrast(p.paper_bgcolor)}}},f&&(b("pathbar.thickness",s.pathbar.textfont.size+2*v),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),C(s,p,b),s._length=null}},67880:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(72736),T=t(25132),v=t(47192).styleOne,d=t(32984),r=t(78176),e=t(45716),l=t(96488).formatSliceLabel,n=!1;Q.exports=function(s,o,p,b,h){var _=h.width,a=h.height,c=h.viewX,f=h.viewY,x=h.pathSlice,k=h.toMoveInsideSlice,y=h.strTransform,A=h.hasTransition,L=h.handleSlicesExit,u=h.makeUpdateSliceInterpolator,m=h.makeUpdateTextInterpolator,S=h.prevEntry,w={},I=s._context.staticPlot,O=s._fullLayout,D=o[0],P=D.trace,F=P.textposition.indexOf("left")!==-1,R=P.textposition.indexOf("right")!==-1,B=P.textposition.indexOf("bottom")!==-1,N=T(p,[_,a],{flipX:P.tiling.flip.indexOf("x")>-1,flipY:P.tiling.flip.indexOf("y")>-1,orientation:P.tiling.orientation,pad:{inner:P.tiling.pad},maxDepth:P._maxDepth}),G=N.descendants(),X=1/0,J=-1/0;G.forEach(function($){var V=$.depth;V>=P._maxDepth?($.x0=$.x1=($.x0+$.x1)/2,$.y0=$.y1=($.y0+$.y1)/2):(X=Math.min(X,V),J=Math.max(J,V))}),b=b.data(G,r.getPtId),P._maxVisibleLayers=isFinite(J)?J-X+1:0,b.enter().append("g").classed("slice",!0),L(b,n,w,[_,a],x),b.order();var it=null;if(A&&S){var nt=r.getPtId(S);b.each(function($){it===null&&r.getPtId($)===nt&&(it={x0:$.x0,x1:$.x1,y0:$.y0,y1:$.y1})})}var q=function(){return it||{x0:0,x1:_,y0:0,y1:a}},Z=b;return A&&(Z=Z.transition().each("end",function(){var $=M.select(this);r.setSliceCursor($,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function($){$._x0=c($.x0),$._x1=c($.x1),$._y0=f($.y0),$._y1=f($.y1),$._hoverX=c($.x1-P.tiling.pad),$._hoverY=f(B?$.y1-P.tiling.pad/2:$.y0+P.tiling.pad/2);var V=M.select(this),rt=E.ensureSingle(V,"path","surface",function(at){at.style("pointer-events",I?"none":"all")});A?rt.transition().attrTween("d",function(at){var et=u(at,n,q(),[_,a],{orientation:P.tiling.orientation,flipX:P.tiling.flip.indexOf("x")>-1,flipY:P.tiling.flip.indexOf("y")>-1});return function(ct){return x(et(ct))}}):rt.attr("d",x),V.call(e,p,s,o,{styleOne:v,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,s,{isTransitioning:s._transitioning}),rt.call(v,$,P,s,{hovered:!1}),$.x0===$.x1||$.y0===$.y1?$._text="":$._text=l($,p,P,o,O)||"";var ot=E.ensureSingle(V,"g","slicetext"),H=E.ensureSingle(ot,"text","",function(at){at.attr("data-notex",1)}),Y=E.ensureUniformFontSize(s,r.determineTextFont(P,$,O.font));H.text($._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":F?"start":"middle").call(i.font,Y).call(C.convertToTspans,s),$.textBB=i.bBox(H.node()),$.transform=k($,{fontSize:Y.size}),$.transform.fontSize=Y.size,A?H.transition().attrTween("transform",function(at){var et=m(at,n,q(),[_,a]);return function(ct){return y(et(ct))}}):H.attr("transform",y($))}),it}},29044:function(Q,U,t){Q.exports={moduleType:"trace",name:"icicle",basePlotModule:t(59564),categories:[],animatable:!0,attributes:t(97376),layoutAttributes:t(90676),supplyDefaults:t(7045),supplyLayoutDefaults:t(4304),calc:t(73876).r,crossTraceCalc:t(73876).q,plot:t(38364),style:t(47192).style,colorbar:t(5528),meta:{}}},90676:function(Q){Q.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(Q,U,t){var M=t(3400),E=t(90676);Q.exports=function(i,C){function T(v,d){return M.coerce(i,C,E,v,d)}T("iciclecolorway",C.colorway),T("extendiciclecolors")}},25132:function(Q,U,t){var M=t(74148),E=t(83024);Q.exports=function(i,C,T){var v=T.flipX,d=T.flipY,r=T.orientation==="h",e=T.maxDepth,l=C[0],n=C[1];e&&(l=(i.height+1)*C[0]/Math.min(i.height+1,e),n=(i.height+1)*C[1]/Math.min(i.height+1,e));var s=M.partition().padding(T.pad.inner).size(r?[C[1],l]:[C[0],n])(i);return(r||v||d)&&E(s,C,{swapXY:r,flipX:v,flipY:d}),s}},38364:function(Q,U,t){var M=t(95808),E=t(67880);Q.exports=function(i,C,T,v){return M(i,C,T,v,{type:"icicle",drawDescendants:E})}},47192:function(Q,U,t){var M=t(33428),E=t(76308),i=t(3400),C=t(82744).resizeText,T=t(60404);function v(r){var e=r._fullLayout._iciclelayer.selectAll(".trace");C(r,e,"icicle"),e.each(function(l){var n=M.select(this),s=l[0],o=s.trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(p){M.select(this).call(d,p,o,r)})})}function d(r,e,l,n){var s=e.data.data,o=!e.children,p=s.i,b=i.castOption(l,p,"marker.line.color")||E.defaultLine,h=i.castOption(l,p,"marker.line.width")||0;r.call(T,e,l,n).style("stroke-width",h).call(E.stroke,b).style("opacity",o?l.leaf.opacity:null)}Q.exports={style:v,styleOne:d}},95188:function(Q,U,t){for(var M=t(45464),E=t(52904).zorder,i=t(21776).Ks,C=t(92880).extendFlat,T=t(47797).colormodel,v=["rgb","rgba","rgba256","hsl","hsla"],d=[],r=[],e=0;e<v.length;e++){var l=T[v[e]];d.push("For the `"+v[e]+"` colormodel, it is ["+(l.zminDflt||l.min).join(", ")+"]."),r.push("For the `"+v[e]+"` colormodel, it is ["+(l.zmaxDflt||l.max).join(", ")+"].")}Q.exports=C({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:v,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:C({},M.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:i({},{keys:["z","color","colormodel"]}),zorder:E,transforms:void 0})},93336:function(Q,U,t){var M=t(3400),E=t(47797),i=t(38248),C=t(54460),T=t(3400).maxRowLength,v=t(18712).i;Q.exports=function(l,n){var s,o;if(n._hasZ)s=n.z.length,o=T(n.z);else if(n._hasSource){var p=v(n.source);s=p.height,o=p.width}var b=C.getFromId(l,n.xaxis||"x"),h=C.getFromId(l,n.yaxis||"y"),_=b.d2c(n.x0)-n.dx/2,a=h.d2c(n.y0)-n.dy/2,c,f=[_,_+o*n.dx],x=[a,a+s*n.dy];if(b&&b.type==="log")for(c=0;c<o;c++)f.push(_+c*n.dx);if(h&&h.type==="log")for(c=0;c<s;c++)x.push(a+c*n.dy);n._extremes[b._id]=C.findExtremes(b,f),n._extremes[h._id]=C.findExtremes(h,x),n._scaler=e(n);var k={x0:_,y0:a,z:n.z,w:o,h:s};return[k]};function d(l,n,s,o){return function(p){return M.constrain((p-l)*n,s,o)}}function r(l,n){return function(s){return M.constrain(s,l,n)}}function e(l){var n=E.colormodel[l.colormodel],s=n.colormodel||l.colormodel,o=s.length;l._sArray=[];for(var p=0;p<o;p++)n.min[p]!==l.zmin[p]||n.max[p]!==l.zmax[p]?l._sArray.push(d(l.zmin[p],(n.max[p]-n.min[p])/(l.zmax[p]-l.zmin[p]),n.min[p],n.max[p])):l._sArray.push(r(n.min[p],n.max[p]));return function(b){for(var h=b.slice(0,o),_=0;_<o;_++){var a=h[_];if(!i(a))return!1;h[_]=l._sArray[_](a)}return h}}},47797:function(Q){Q.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(U){return U.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(U){return U.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(U){return U.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(U){var t=U.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(U){var t=U.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xB0","%","%",""]}}}},13188:function(Q,U,t){var M=t(3400),E=t(95188),i=t(47797),C=t(81792).IMAGE_URL_PREFIX;Q.exports=function(T,v){function d(l,n){return M.coerce(T,v,E,l,n)}d("source"),v.source&&!v.source.match(C)&&delete v.source,v._hasSource=!!v.source;var r=d("z");if(v._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!v._hasZ&&!v._hasSource){v.visible=!1;return}d("x0"),d("y0"),d("dx"),d("dy");var e;v._hasZ?(d("colormodel","rgb"),e=i.colormodel[v.colormodel],d("zmin",e.zminDflt||e.min),d("zmax",e.zmaxDflt||e.max)):v._hasSource&&(v.colormodel="rgba256",e=i.colormodel[v.colormodel],v.zmin=e.zminDflt,v.zmax=e.zmaxDflt),d("zsmooth"),d("text"),d("hovertext"),d("hovertemplate"),v._length=null,d("zorder")}},79972:function(Q){Q.exports=function(U,t){return"xVal"in t&&(U.x=t.xVal),"yVal"in t&&(U.y=t.yVal),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U.color=t.color,U.colormodel=t.trace.colormodel,U.z||(U.z=t.color),U}},18712:function(Q,U,t){var M=t(19480),E=t(81792).IMAGE_URL_PREFIX,i=t(33576).Buffer;U.i=function(C){var T=C.replace(E,""),v=new i(T,"base64");return M(v)}},24892:function(Q,U,t){var M=t(93024),E=t(3400),i=E.isArrayOrTypedArray,C=t(47797);Q.exports=function(T,v,d){var r=T.cd[0],e=r.trace,l=T.xa,n=T.ya;if(!(M.inbox(v-r.x0,v-(r.x0+r.w*e.dx),0)>0||M.inbox(d-r.y0,d-(r.y0+r.h*e.dy),0)>0)){var s=Math.floor((v-r.x0)/e.dx),o=Math.floor(Math.abs(d-r.y0)/e.dy),p;if(e._hasZ?p=r.z[o][s]:e._hasSource&&(p=e._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,o,1,1).data),!!p){var b=r.hi||e.hoverinfo,h;if(b){var _=b.split("+");_.indexOf("all")!==-1&&(_=["color"]),_.indexOf("color")!==-1&&(h=!0)}var a=C.colormodel[e.colormodel],c=a.colormodel||e.colormodel,f=c.length,x=e._scaler(p),k=a.suffix,y=[];(e.hovertemplate||h)&&(y.push("["+[x[0]+k[0],x[1]+k[1],x[2]+k[2]].join(", ")),f===4&&y.push(", "+x[3]+k[3]),y.push("]"),y=y.join(""),T.extraText=c.toUpperCase()+": "+y);var A;i(e.hovertext)&&i(e.hovertext[o])?A=e.hovertext[o][s]:i(e.text)&&i(e.text[o])&&(A=e.text[o][s]);var L=n.c2p(r.y0+(o+.5)*e.dy),u=r.x0+(s+.5)*e.dx,m=r.y0+(o+.5)*e.dy,S="["+p.slice(0,e.colormodel.length).join(", ")+"]";return[E.extendFlat(T,{index:[o,s],x0:l.c2p(r.x0+s*e.dx),x1:l.c2p(r.x0+(s+1)*e.dx),y0:L,y1:L,color:x,xVal:u,xLabelVal:u,yVal:m,yLabelVal:m,zLabelVal:S,text:A,hovertemplateLabels:{zLabel:S,colorLabel:y,"color[0]Label":x[0]+k[0],"color[1]Label":x[1]+k[1],"color[2]Label":x[2]+k[2],"color[3]Label":x[3]+k[3]}})]}}}},48928:function(Q,U,t){Q.exports={attributes:t(95188),supplyDefaults:t(13188),calc:t(93336),plot:t(63715),style:t(28576),hoverPoints:t(24892),eventData:t(79972),moduleType:"trace",name:"image",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(Q,U,t){var M=t(33428),E=t(3400),i=E.strTranslate,C=t(9616),T=t(47797),v=t(9188),d=t(2264).STYLE;Q.exports=function(r,e,l,n){var s=e.xaxis,o=e.yaxis,p=!r._context._exportedPlot&&v();E.makeTraceGroups(n,l,"im").each(function(b){var h=M.select(this),_=b[0],a=_.trace,c=(a.zsmooth==="fast"||a.zsmooth===!1&&p)&&!a._hasZ&&a._hasSource&&s.type==="linear"&&o.type==="linear";a._realImage=c;var f=_.z,x=_.x0,k=_.y0,y=_.w,A=_.h,L=a.dx,u=a.dy,m,S,w,I,O,D;for(D=0;m===void 0&&D<y;)m=s.c2p(x+D*L),D++;for(D=y;S===void 0&&D>0;)S=s.c2p(x+D*L),D--;for(D=0;I===void 0&&D<A;)I=o.c2p(k+D*u),D++;for(D=A;O===void 0&&D>0;)O=o.c2p(k+D*u),D--;if(S<m&&(w=S,S=m,m=w),O<I&&(w=I,I=O,O=w),!c){var P=.5;m=Math.max(-P*s._length,m),S=Math.min((1+P)*s._length,S),I=Math.max(-P*o._length,I),O=Math.min((1+P)*o._length,O)}var F=Math.round(S-m),R=Math.round(O-I),B=F<=0||R<=0;if(B){var N=h.selectAll("image").data([]);N.exit().remove();return}function G(ot){var H=document.createElement("canvas");H.width=F,H.height=R;var Y=H.getContext("2d",{willReadFrequently:!0}),at=function(Ot){return E.constrain(Math.round(s.c2p(x+Ot*L)-m),0,F)},et=function(Ot){return E.constrain(Math.round(o.c2p(k+Ot*u)-I),0,R)},ct=T.colormodel[a.colormodel],ft=ct.colormodel||a.colormodel,yt=ct.fmt,xt;for(D=0;D<_.w;D++){var Ct=at(D),gt=at(D+1);if(!(gt===Ct||isNaN(gt)||isNaN(Ct)))for(var mt=0;mt<_.h;mt++){var vt=et(mt),At=et(mt+1);At===vt||isNaN(At)||isNaN(vt)||!ot(D,mt)||(xt=a._scaler(ot(D,mt)),xt?Y.fillStyle=ft+"("+yt(xt).join(",")+")":Y.fillStyle="rgba(0,0,0,0)",Y.fillRect(Ct,vt,gt-Ct,At-vt))}}return H}var X=h.selectAll("image").data([b]);X.enter().append("svg:image").attr({xmlns:C.svg,preserveAspectRatio:"none"}),X.exit().remove();var J=a.zsmooth===!1?d:"";if(c){var it=E.simpleMap(s.range,s.r2l),nt=E.simpleMap(o.range,o.r2l),q=it[1]<it[0],Z=nt[1]>nt[0];if(q||Z){var $=m+F/2,V=I+R/2;J+="transform:"+i($+"px",V+"px")+"scale("+(q?-1:1)+","+(Z?-1:1)+")"+i(-$+"px",-V+"px")+";"}}X.attr("style",J);var rt=new Promise(function(ot){if(a._hasZ)ot();else if(a._hasSource)if(a._canvas&&a._canvas.el.width===y&&a._canvas.el.height===A&&a._canvas.source===a.source)ot();else{var H=document.createElement("canvas");H.width=y,H.height=A;var Y=H.getContext("2d",{willReadFrequently:!0});a._image=a._image||new Image;var at=a._image;at.onload=function(){Y.drawImage(at,0,0),a._canvas={el:H,source:a.source},ot()},at.setAttribute("src",a.source)}}).then(function(){var ot,H;if(a._hasZ)H=G(function(et,ct){var ft=f[ct][et];return E.isTypedArray(ft)&&(ft=Array.from(ft)),ft}),ot=H.toDataURL("image/png");else if(a._hasSource)if(c)ot=a.source;else{var Y=a._canvas.el.getContext("2d",{willReadFrequently:!0}),at=Y.getImageData(0,0,y,A).data;H=G(function(et,ct){var ft=4*(ct*y+et);return[at[ft],at[ft+1],at[ft+2],at[ft+3]]}),ot=H.toDataURL("image/png")}X.attr({"xlink:href":ot,height:R,width:F,x:m,y:I})});r._promises.push(rt)})}},28576:function(Q,U,t){var M=t(33428);Q.exports=function(E){M.select(E).selectAll(".im image").style("opacity",function(i){return i[0].trace.opacity})}},89864:function(Q,U,t){var M=t(92880).extendFlat,E=t(92880).extendDeep,i=t(67824).overrideAll,C=t(25376),T=t(22548),v=t(86968).u,d=t(94724),r=t(31780).templatedArray,e=t(48164),l=t(29736).descriptionOnlyNumbers,n=C({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:T.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},o={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=r("step",E({},s,{range:o}));Q.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:v({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:M({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:l("value")},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:l("value")},increasing:{symbol:{valType:"string",dflt:e.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:e.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:e.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:e.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:M({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:E({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:T.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:i({range:o,visible:M({},d.visible,{dflt:!0}),tickmode:d.minor.tickmode,nticks:d.nticks,tick0:d.tick0,dtick:d.dtick,tickvals:d.tickvals,ticktext:d.ticktext,ticks:M({},d.ticks,{dflt:"outside"}),ticklen:d.ticklen,tickwidth:d.tickwidth,tickcolor:d.tickcolor,ticklabelstep:d.ticklabelstep,showticklabels:d.showticklabels,labelalias:d.labelalias,tickfont:C({}),tickangle:d.tickangle,tickformat:d.tickformat,tickformatstops:d.tickformatstops,tickprefix:d.tickprefix,showtickprefix:d.showtickprefix,ticksuffix:d.ticksuffix,showticksuffix:d.showticksuffix,separatethousands:d.separatethousands,exponentformat:d.exponentformat,minexponent:d.minexponent,showexponent:d.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:M({},s.line.color,{}),width:M({},s.line.width,{dflt:1}),editType:"plot"},thickness:M({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(Q,U,t){var M=t(7316);U.name="indicator",U.plot=function(E,i,C,T){M.plotBasePlot(U.name,E,i,C,T)},U.clean=function(E,i,C,T){M.cleanBasePlot(U.name,E,i,C,T)}},79136:function(Q){function U(t,M){var E=[],i=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var C=M._lastValue,T=C;return M._hasDelta&&typeof M.delta.reference=="number"&&(T=M.delta.reference),E[0]={y:i,lastY:C,delta:i-T,relativeDelta:(i-T)/T},E}Q.exports={calc:U}},12096:function(Q){Q.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(Q,U,t){var M=t(3400),E=t(89864),i=t(86968).Q,C=t(31780),T=t(51272),v=t(12096),d=t(26332),r=t(25404),e=t(95936),l=t(42568);function n(o,p,b,h){function _(D,P){return M.coerce(o,p,E,D,P)}i(p,h,_),_("mode"),p._hasNumber=p.mode.indexOf("number")!==-1,p._hasDelta=p.mode.indexOf("delta")!==-1,p._hasGauge=p.mode.indexOf("gauge")!==-1;var a=_("value");p._range=[0,typeof a=="number"?1.5*a:1];var c=new Array(2),f;p._hasNumber&&(_("number.valueformat"),_("number.font.color",h.font.color),_("number.font.family",h.font.family),_("number.font.size"),p.number.font.size===void 0&&(p.number.font.size=v.defaultNumberFontSize,c[0]=!0),_("number.prefix"),_("number.suffix"),f=p.number.font.size);var x;p._hasDelta&&(_("delta.font.color",h.font.color),_("delta.font.family",h.font.family),_("delta.font.size"),p.delta.font.size===void 0&&(p.delta.font.size=(p._hasNumber?.5:1)*(f||v.defaultNumberFontSize),c[1]=!0),_("delta.reference",p.value),_("delta.relative"),_("delta.valueformat",p.delta.relative?"2%":""),_("delta.increasing.symbol"),_("delta.increasing.color"),_("delta.decreasing.symbol"),_("delta.decreasing.color"),_("delta.position"),_("delta.prefix"),_("delta.suffix"),x=p.delta.font.size),p._scaleNumbers=(!p._hasNumber||c[0])&&(!p._hasDelta||c[1])||!1,_("title.font.color",h.font.color),_("title.font.family",h.font.family),_("title.font.size",.25*(f||x||v.defaultNumberFontSize)),_("title.text");var k,y,A,L;function u(D,P){return M.coerce(k,y,E.gauge,D,P)}function m(D,P){return M.coerce(A,L,E.gauge.axis,D,P)}if(p._hasGauge){k=o.gauge,k||(k={}),y=C.newContainer(p,"gauge"),u("shape");var S=p._isBullet=p.gauge.shape==="bullet";S||_("title.align","center");var w=p._isAngular=p.gauge.shape==="angular";w||_("align","center"),u("bgcolor",h.paper_bgcolor),u("borderwidth"),u("bordercolor"),u("bar.color"),u("bar.line.color"),u("bar.line.width");var I=v.valueThickness*(p.gauge.shape==="bullet"?.5:1);u("bar.thickness",I),T(k,y,{name:"steps",handleItemDefaults:s}),u("threshold.value"),u("threshold.thickness"),u("threshold.line.width"),u("threshold.line.color"),A={},k&&(A=k.axis||{}),L=C.newContainer(y,"axis"),m("visible"),p._range=m("range",p._range);var O={noAutotickangles:!0,outerTicks:!0};d(A,L,m,"linear"),l(A,L,m,"linear",O),e(A,L,m,"linear",O),r(A,L,m,O)}else _("title.align","center"),_("align","center"),p._isAngular=p._isBullet=!1;p._length=null}function s(o,p){function b(h,_){return M.coerce(o,p,E.gauge.steps,h,_)}b("color"),b("line.color"),b("line.width"),b("range"),b("thickness")}Q.exports={supplyDefaults:n}},43480:function(Q,U,t){Q.exports={moduleType:"trace",name:"indicator",basePlotModule:t(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(89864),supplyDefaults:t(20424).supplyDefaults,calc:t(79136).calc,plot:t(97864),meta:{}}},97864:function(Q,U,t){var M=t(33428),E=t(67756).qy,i=t(67756).Gz,C=t(3400),T=C.strScale,v=C.strTranslate,d=C.rad2deg,r=t(84284).MID_SHIFT,e=t(43616),l=t(12096),n=t(72736),s=t(54460),o=t(28336),p=t(37668),b=t(94724),h=t(76308),_={left:"start",center:"middle",right:"end"},a={left:0,center:.5,right:1},c=/[yzafpnµmkMGTPEZY]/;function f(O){return O&&O.duration>0}Q.exports=function(O,D,P,F){var R=O._fullLayout,B;f(P)&&F&&(B=F()),C.makeTraceGroups(R._indicatorlayer,D,"trace").each(function(N){var G=N[0],X=G.trace,J=M.select(this),it=X._hasGauge,nt=X._isAngular,q=X._isBullet,Z=X.domain,$={w:R._size.w*(Z.x[1]-Z.x[0]),h:R._size.h*(Z.y[1]-Z.y[0]),l:R._size.l+R._size.w*Z.x[0],r:R._size.r+R._size.w*(1-Z.x[1]),t:R._size.t+R._size.h*(1-Z.y[1]),b:R._size.b+R._size.h*Z.y[0]},V=$.l+$.w/2,rt=$.t+$.h/2,ot=Math.min($.w/2,$.h),H=l.innerRadius*ot,Y,at,et,ct=X.align||"center";if(at=rt,!it)Y=$.l+a[ct]*$.w,et=function(It){return m(It,$.w,$.h)};else if(nt&&(Y=V,at=rt+ot/2,et=function(It){return S(It,.9*H)}),q){var ft=l.bulletPadding,yt=1-l.bulletNumberDomainSize+ft;Y=$.l+(yt+(1-yt)*a[ct])*$.w,et=function(It){return m(It,(l.bulletNumberDomainSize-ft)*$.w,$.h)}}y(O,J,N,{numbersX:Y,numbersY:at,numbersScaler:et,transitionOpts:P,onComplete:B});var xt,Ct;it&&(xt={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},Ct={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var gt=J.selectAll("g.angular").data(nt?N:[]);gt.exit().remove();var mt=J.selectAll("g.angularaxis").data(nt?N:[]);mt.exit().remove(),nt&&k(O,J,N,{radius:ot,innerRadius:H,gauge:gt,layer:mt,size:$,gaugeBg:xt,gaugeOutline:Ct,transitionOpts:P,onComplete:B});var vt=J.selectAll("g.bullet").data(q?N:[]);vt.exit().remove();var At=J.selectAll("g.bulletaxis").data(q?N:[]);At.exit().remove(),q&&x(O,J,N,{gauge:vt,layer:At,size:$,gaugeBg:xt,gaugeOutline:Ct,transitionOpts:P,onComplete:B});var Ot=J.selectAll("text.title").data(N);Ot.exit().remove(),Ot.enter().append("text").classed("title",!0),Ot.attr("text-anchor",function(){return q?_.right:_[X.title.align]}).text(X.title.text).call(e.font,X.title.font).call(n.convertToTspans,O),Ot.attr("transform",function(){var It=$.l+$.w*a[X.title.align],St,Bt=l.titlePadding,re=e.bBox(Ot.node());if(it){if(nt)if(X.gauge.axis.visible){var Yt=e.bBox(mt.node());St=Yt.top-Bt-re.bottom}else St=$.t+$.h/2-ot/2-re.bottom-Bt;q&&(St=at-(re.top+re.bottom)/2,It=$.l-l.bulletPadding*$.w)}else St=X._numbersTop-Bt-re.bottom;return v(It,St)})})};function x(O,D,P,F){var R=P[0].trace,B=F.gauge,N=F.layer,G=F.gaugeBg,X=F.gaugeOutline,J=F.size,it=R.domain,nt=F.transitionOpts,q=F.onComplete,Z,$,V,rt,ot;B.enter().append("g").classed("bullet",!0),B.attr("transform",v(J.l,J.t)),N.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),N.selectAll("g.xbulletaxistick,path,text").remove();var H=J.h,Y=R.gauge.bar.thickness*H,at=it.x[0],et=it.x[0]+(it.x[1]-it.x[0])*(R._hasNumber||R._hasDelta?1-l.bulletNumberDomainSize:1);Z=u(O,R.gauge.axis),Z._id="xbulletaxis",Z.domain=[at,et],Z.setScale(),$=s.calcTicks(Z),V=s.makeTransTickFn(Z),rt=s.getTickSigns(Z)[2],ot=J.t+J.h,Z.visible&&(s.drawTicks(O,Z,{vals:Z.ticks==="inside"?s.clipEnds(Z,$):$,layer:N,path:s.makeTickPath(Z,ot,rt),transFn:V}),s.drawLabels(O,Z,{vals:$,layer:N,transFn:V,labelFns:s.makeLabelFns(Z,ot)}));function ct(vt){vt.attr("width",function(At){return Math.max(0,Z.c2p(At.range[1])-Z.c2p(At.range[0]))}).attr("x",function(At){return Z.c2p(At.range[0])}).attr("y",function(At){return .5*(1-At.thickness)*H}).attr("height",function(At){return At.thickness*H})}var ft=[G].concat(R.gauge.steps),yt=B.selectAll("g.bg-bullet").data(ft);yt.enter().append("g").classed("bg-bullet",!0).append("rect"),yt.select("rect").call(ct).call(A),yt.exit().remove();var xt=B.selectAll("g.value-bullet").data([R.gauge.bar]);xt.enter().append("g").classed("value-bullet",!0).append("rect"),xt.select("rect").attr("height",Y).attr("y",(H-Y)/2).call(A),f(nt)?xt.select("rect").transition().duration(nt.duration).ease(nt.easing).each("end",function(){q&&q()}).each("interrupt",function(){q&&q()}).attr("width",Math.max(0,Z.c2p(Math.min(R.gauge.axis.range[1],P[0].y)))):xt.select("rect").attr("width",typeof P[0].y=="number"?Math.max(0,Z.c2p(Math.min(R.gauge.axis.range[1],P[0].y))):0),xt.exit().remove();var Ct=P.filter(function(){return R.gauge.threshold.value||R.gauge.threshold.value===0}),gt=B.selectAll("g.threshold-bullet").data(Ct);gt.enter().append("g").classed("threshold-bullet",!0).append("line"),gt.select("line").attr("x1",Z.c2p(R.gauge.threshold.value)).attr("x2",Z.c2p(R.gauge.threshold.value)).attr("y1",(1-R.gauge.threshold.thickness)/2*H).attr("y2",(1-(1-R.gauge.threshold.thickness)/2)*H).call(h.stroke,R.gauge.threshold.line.color).style("stroke-width",R.gauge.threshold.line.width),gt.exit().remove();var mt=B.selectAll("g.gauge-outline").data([X]);mt.enter().append("g").classed("gauge-outline",!0).append("rect"),mt.select("rect").call(ct).call(A),mt.exit().remove()}function k(O,D,P,F){var R=P[0].trace,B=F.size,N=F.radius,G=F.innerRadius,X=F.gaugeBg,J=F.gaugeOutline,it=[B.l+B.w/2,B.t+B.h/2+N/2],nt=F.gauge,q=F.layer,Z=F.transitionOpts,$=F.onComplete,V=Math.PI/2;function rt(Zt){var ae=R.gauge.axis.range[0],oe=R.gauge.axis.range[1],ce=(Zt-ae)/(oe-ae)*Math.PI-V;return ce<-V?-V:ce>V?V:ce}function ot(Zt){return M.svg.arc().innerRadius((G+N)/2-Zt/2*(N-G)).outerRadius((G+N)/2+Zt/2*(N-G)).startAngle(-V)}function H(Zt){Zt.attr("d",function(ae){return ot(ae.thickness).startAngle(rt(ae.range[0])).endAngle(rt(ae.range[1]))()})}var Y,at,et,ct;nt.enter().append("g").classed("angular",!0),nt.attr("transform",v(it[0],it[1])),q.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),q.selectAll("g.xangularaxistick,path,text").remove(),Y=u(O,R.gauge.axis),Y.type="linear",Y.range=R.gauge.axis.range,Y._id="xangularaxis",Y.ticklabeloverflow="allow",Y.setScale();var ft=function(Zt){return(Y.range[0]-Zt.x)/(Y.range[1]-Y.range[0])*Math.PI+Math.PI},yt={},xt=s.makeLabelFns(Y,0),Ct=xt.labelStandoff;yt.xFn=function(Zt){var ae=ft(Zt);return Math.cos(ae)*Ct},yt.yFn=function(Zt){var ae=ft(Zt),oe=Math.sin(ae)>0?.2:1;return-Math.sin(ae)*(Ct+Zt.fontSize*oe)+Math.abs(Math.cos(ae))*(Zt.fontSize*r)},yt.anchorFn=function(Zt){var ae=ft(Zt),oe=Math.cos(ae);return Math.abs(oe)<.1?"middle":oe>0?"start":"end"},yt.heightFn=function(Zt,ae,oe){var ce=ft(Zt);return-.5*(1+Math.sin(ce))*oe};var gt=function(Zt){return v(it[0]+N*Math.cos(Zt),it[1]-N*Math.sin(Zt))};et=function(Zt){return gt(ft(Zt))};var mt=function(Zt){var ae=ft(Zt);return gt(ae)+"rotate("+-d(ae)+")"};if(at=s.calcTicks(Y),ct=s.getTickSigns(Y)[2],Y.visible){ct=Y.ticks==="inside"?-1:1;var vt=(Y.linewidth||1)/2;s.drawTicks(O,Y,{vals:at,layer:q,path:"M"+ct*vt+",0h"+ct*Y.ticklen,transFn:mt}),s.drawLabels(O,Y,{vals:at,layer:q,transFn:et,labelFns:yt})}var At=[X].concat(R.gauge.steps),Ot=nt.selectAll("g.bg-arc").data(At);Ot.enter().append("g").classed("bg-arc",!0).append("path"),Ot.select("path").call(H).call(A),Ot.exit().remove();var It=ot(R.gauge.bar.thickness),St=nt.selectAll("g.value-arc").data([R.gauge.bar]);St.enter().append("g").classed("value-arc",!0).append("path");var Bt=St.select("path");f(Z)?(Bt.transition().duration(Z.duration).ease(Z.easing).each("end",function(){$&&$()}).each("interrupt",function(){$&&$()}).attrTween("d",L(It,rt(P[0].lastY),rt(P[0].y))),R._lastValue=P[0].y):Bt.attr("d",typeof P[0].y=="number"?It.endAngle(rt(P[0].y)):"M0,0Z"),Bt.call(A),St.exit().remove(),At=[];var re=R.gauge.threshold.value;(re||re===0)&&At.push({range:[re,re],color:R.gauge.threshold.color,line:{color:R.gauge.threshold.line.color,width:R.gauge.threshold.line.width},thickness:R.gauge.threshold.thickness});var Yt=nt.selectAll("g.threshold-arc").data(At);Yt.enter().append("g").classed("threshold-arc",!0).append("path"),Yt.select("path").call(H).call(A),Yt.exit().remove();var he=nt.selectAll("g.gauge-outline").data([J]);he.enter().append("g").classed("gauge-outline",!0).append("path"),he.select("path").call(H).call(A),he.exit().remove()}function y(O,D,P,F){var R=P[0].trace,B=F.numbersX,N=F.numbersY,G=R.align||"center",X=_[G],J=F.transitionOpts,it=F.onComplete,nt=C.ensureSingle(D,"g","numbers"),q,Z,$,V=[];R._hasNumber&&V.push("number"),R._hasDelta&&(V.push("delta"),R.delta.position==="left"&&V.reverse());var rt=nt.selectAll("text").data(V);rt.enter().append("text"),rt.attr("text-anchor",function(){return X}).attr("class",function(gt){return gt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),rt.exit().remove();function ot(gt,mt,vt,At){if(gt.match("s")&&vt>=0!=At>=0&&!mt(vt).slice(-1).match(c)&&!mt(At).slice(-1).match(c)){var Ot=gt.slice().replace("s","f").replace(/\d+/,function(St){return parseInt(St)-1}),It=u(O,{tickformat:Ot});return function(St){return Math.abs(St)<1?s.tickText(It,St).text:mt(St)}}else return mt}function H(){var gt=u(O,{tickformat:R.number.valueformat},R._range);gt.setScale(),s.prepTicks(gt);var mt=function(St){return s.tickText(gt,St).text},vt=R.number.suffix,At=R.number.prefix,Ot=nt.select("text.number");function It(){var St=typeof P[0].y=="number"?At+mt(P[0].y)+vt:"-";Ot.text(St).call(e.font,R.number.font).call(n.convertToTspans,O)}return f(J)?Ot.transition().duration(J.duration).ease(J.easing).each("end",function(){It(),it&&it()}).each("interrupt",function(){It(),it&&it()}).attrTween("text",function(){var St=M.select(this),Bt=i(P[0].lastY,P[0].y);R._lastValue=P[0].y;var re=ot(R.number.valueformat,mt,P[0].lastY,P[0].y);return function(Yt){St.text(At+re(Bt(Yt))+vt)}}):It(),q=w(At+mt(P[0].y)+vt,R.number.font,X,O),Ot}function Y(){var gt=u(O,{tickformat:R.delta.valueformat},R._range);gt.setScale(),s.prepTicks(gt);var mt=function(Yt){return s.tickText(gt,Yt).text},vt=R.delta.suffix,At=R.delta.prefix,Ot=function(Yt){var he=R.delta.relative?Yt.relativeDelta:Yt.delta;return he},It=function(Yt,he){return Yt===0||typeof Yt!="number"||isNaN(Yt)?"-":(Yt>0?R.delta.increasing.symbol:R.delta.decreasing.symbol)+At+he(Yt)+vt},St=function(Yt){return Yt.delta>=0?R.delta.increasing.color:R.delta.decreasing.color};R._deltaLastValue===void 0&&(R._deltaLastValue=Ot(P[0]));var Bt=nt.select("text.delta");Bt.call(e.font,R.delta.font).call(h.fill,St({delta:R._deltaLastValue}));function re(){Bt.text(It(Ot(P[0]),mt)).call(h.fill,St(P[0])).call(n.convertToTspans,O)}return f(J)?Bt.transition().duration(J.duration).ease(J.easing).tween("text",function(){var Yt=M.select(this),he=Ot(P[0]),Zt=R._deltaLastValue,ae=ot(R.delta.valueformat,mt,Zt,he),oe=i(Zt,he);return R._deltaLastValue=he,function(ce){Yt.text(It(oe(ce),ae)),Yt.call(h.fill,St({delta:oe(ce)}))}}).each("end",function(){re(),it&&it()}).each("interrupt",function(){re(),it&&it()}):re(),Z=w(It(Ot(P[0]),mt),R.delta.font,X,O),Bt}var at=R.mode+R.align,et;if(R._hasDelta&&(et=Y(),at+=R.delta.position+R.delta.font.size+R.delta.font.family+R.delta.valueformat,at+=R.delta.increasing.symbol+R.delta.decreasing.symbol,$=Z),R._hasNumber&&(H(),at+=R.number.font.size+R.number.font.family+R.number.valueformat+R.number.suffix+R.number.prefix,$=q),R._hasDelta&&R._hasNumber){var ct=[(q.left+q.right)/2,(q.top+q.bottom)/2],ft=[(Z.left+Z.right)/2,(Z.top+Z.bottom)/2],yt,xt,Ct=.75*R.delta.font.size;R.delta.position==="left"&&(yt=I(R,"deltaPos",0,-1*(q.width*a[R.align]+Z.width*(1-a[R.align])+Ct),at,Math.min),xt=ct[1]-ft[1],$={width:q.width+Z.width+Ct,height:Math.max(q.height,Z.height),left:Z.left+yt,right:q.right,top:Math.min(q.top,Z.top+xt),bottom:Math.max(q.bottom,Z.bottom+xt)}),R.delta.position==="right"&&(yt=I(R,"deltaPos",0,q.width*(1-a[R.align])+Z.width*a[R.align]+Ct,at,Math.max),xt=ct[1]-ft[1],$={width:q.width+Z.width+Ct,height:Math.max(q.height,Z.height),left:q.left,right:Z.right+yt,top:Math.min(q.top,Z.top+xt),bottom:Math.max(q.bottom,Z.bottom+xt)}),R.delta.position==="bottom"&&(yt=null,xt=Z.height,$={width:Math.max(q.width,Z.width),height:q.height+Z.height,left:Math.min(q.left,Z.left),right:Math.max(q.right,Z.right),top:q.bottom-q.height,bottom:q.bottom+Z.height}),R.delta.position==="top"&&(yt=null,xt=q.top,$={width:Math.max(q.width,Z.width),height:q.height+Z.height,left:Math.min(q.left,Z.left),right:Math.max(q.right,Z.right),top:q.bottom-q.height-Z.height,bottom:q.bottom}),et.attr({dx:yt,dy:xt})}(R._hasNumber||R._hasDelta)&&nt.attr("transform",function(){var gt=F.numbersScaler($);at+=gt[2];var mt=I(R,"numbersScale",1,gt[0],at,Math.min),vt;R._scaleNumbers||(mt=1),R._isAngular?vt=N-mt*$.bottom:vt=N-mt*($.top+$.bottom)/2,R._numbersTop=mt*$.top+vt;var At=$[G];G==="center"&&(At=($.left+$.right)/2);var Ot=B-mt*At;return Ot=I(R,"numbersTranslate",0,Ot,at,Math.max),v(Ot,vt)+T(mt)})}function A(O){O.each(function(D){h.stroke(M.select(this),D.line.color)}).each(function(D){h.fill(M.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function L(O,D,P){return function(){var F=E(D,P);return function(R){return O.endAngle(F(R))()}}}function u(O,D,P){var F=O._fullLayout,R=C.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},D),B={type:"linear",_id:"x"+D._id},N={letter:"x",font:F.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function G(X,J){return C.coerce(R,B,b,X,J)}return o(R,B,G,N,F),p(R,B,G,N),B}function m(O,D,P){var F=Math.min(D/O.width,P/O.height);return[F,O,D+"x"+P]}function S(O,D){var P=Math.sqrt(O.width/2*(O.width/2)+O.height*O.height),F=D/P;return[F,O,D]}function w(O,D,P,F){var R=document.createElementNS("http://www.w3.org/2000/svg","text"),B=M.select(R);return B.text(O).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",O).call(n.convertToTspans,F).call(e.font,D),e.bBox(B.node())}function I(O,D,P,F,R,B){var N="_cache"+D;O[N]&&O[N].key===R||(O[N]={key:R,value:P});var G=C.aggNums(B,null,[O[N].value,F],2);return O[N].value=G,G}},50048:function(Q,U,t){var M=t(49084),E=t(29736).axisHoverFormat,i=t(21776).Ks,C=t(52948),T=t(45464),v=t(92880).extendFlat,d=t(67824).overrideAll;function r(n){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function e(n){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var l=Q.exports=d(v({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:e(),y:e(),z:e()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:i(),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),valuehoverformat:E("value",1),showlegend:v({},T.showlegend,{dflt:!1})},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:C.opacity,lightposition:C.lightposition,lighting:C.lighting,flatshading:C.flatshading,contour:C.contour,hoverinfo:v({},T.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},62624:function(Q,U,t){var M=t(47128),E=t(3832).processGrid,i=t(3832).filter;Q.exports=function(C,T){T._len=Math.min(T.x.length,T.y.length,T.z.length,T.value.length),T._x=i(T.x,T._len),T._y=i(T.y,T._len),T._z=i(T.z,T._len),T._value=i(T.value,T._len);var v=E(T);T._gridFill=v.fill,T._Xs=v.Xs,T._Ys=v.Ys,T._Zs=v.Zs,T._len=v.len;for(var d=1/0,r=-1/0,e=0;e<T._len;e++){var l=T._value[e];d=Math.min(d,l),r=Math.max(r,l)}T._minValues=d,T._maxValues=r,T._vMin=T.isomin===void 0||T.isomin===null?d:T.isomin,T._vMax=T.isomax===void 0||T.isomin===null?r:T.isomax,M(C,T,{vals:[T._vMin,T._vMax],containerStr:"",cLetter:"c"})}},31460:function(Q,U,t){var M=t(67792).gl_mesh3d,E=t(33040).parseColorScale,i=t(3400).isArrayOrTypedArray,C=t(43080),T=t(8932).extractOpts,v=t(52094),d=function(o,p){for(var b=p.length-1;b>0;b--){var h=Math.min(p[b],p[b-1]),_=Math.max(p[b],p[b-1]);if(_>h&&h<o&&o<=_)return{id:b,distRatio:(_-o)/(_-h)}}return{id:0,distRatio:0}};function r(o,p,b){this.scene=o,this.uid=b,this.mesh=p,this.name="",this.data=null,this.showContour=!1}var e=r.prototype;e.handlePick=function(o){if(o.object===this.mesh){var p=o.data.index,b=this.data._meshX[p],h=this.data._meshY[p],_=this.data._meshZ[p],a=this.data._Ys.length,c=this.data._Zs.length,f=d(b,this.data._Xs).id,x=d(h,this.data._Ys).id,k=d(_,this.data._Zs).id,y=o.index=k+c*x+c*a*f;o.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var A=this.data.hovertext||this.data.text;return i(A)&&A[y]!==void 0?o.textLabel=A[y]:A&&(o.textLabel=A),!0}},e.update=function(o){var p=this.scene,b=p.fullSceneLayout;this.data=n(o);function h(x,k,y,A){return k.map(function(L){return x.d2l(L,0,A)*y})}var _=v(h(b.xaxis,o._meshX,p.dataScale[0],o.xcalendar),h(b.yaxis,o._meshY,p.dataScale[1],o.ycalendar),h(b.zaxis,o._meshZ,p.dataScale[2],o.zcalendar)),a=v(o._meshI,o._meshJ,o._meshK),c={positions:_,cells:a,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:C(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},f=T(o);c.vertexIntensity=o._meshIntensity,c.vertexIntensityBounds=[f.min,f.max],c.colormap=E(o),this.mesh.update(c)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var l=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(o){o._meshI=[],o._meshJ=[],o._meshK=[];var p=o.surface.show,b=o.spaceframe.show,h=o.surface.fill,_=o.spaceframe.fill,a=!1,c=!1,f=0,x,k,y=o._Xs,A=o._Ys,L=o._Zs,u=y.length,m=A.length,S=L.length,w=l.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),I=function(Vt,Nt,Mt){switch(w){case 5:return Mt+S*Nt+S*m*Vt;case 4:return Mt+S*Vt+S*u*Nt;case 3:return Nt+m*Mt+m*S*Vt;case 2:return Nt+m*Vt+m*u*Mt;case 1:return Vt+u*Mt+u*S*Nt;default:return Vt+u*Nt+u*m*Mt}},O=o._minValues,D=o._maxValues,P=o._vMin,F=o._vMax,R,B,N,G;function X(Vt,Nt,Mt){for(var Et=G.length,Dt=k;Dt<Et;Dt++)if(Vt===R[Dt]&&Nt===B[Dt]&&Mt===N[Dt])return Dt;return-1}function J(){k=x}function it(){R=[],B=[],N=[],G=[],x=0,J()}function nt(Vt,Nt,Mt,Et){return R.push(Vt),B.push(Nt),N.push(Mt),G.push(Et),x++,x-1}function q(Vt,Nt,Mt){return o._meshI.push(Vt),o._meshJ.push(Nt),o._meshK.push(Mt),f++,f-1}function Z(Vt,Nt,Mt){for(var Et=[],Dt=0;Dt<Vt.length;Dt++)Et[Dt]=(Vt[Dt]+Nt[Dt]+Mt[Dt])/3;return Et}function $(Vt,Nt,Mt){for(var Et=[],Dt=0;Dt<Vt.length;Dt++)Et[Dt]=Vt[Dt]*(1-Mt)+Mt*Nt[Dt];return Et}var V;function rt(Vt){V=Vt}function ot(Vt,Nt){var Mt=Vt[0],Et=Vt[1],Dt=Vt[2],dt=Z(Mt,Et,Dt),ht=Math.sqrt(1-V),bt=$(dt,Mt,ht),Pt=$(dt,Et,ht),Gt=$(dt,Dt,ht),te=Nt[0],ne=Nt[1],je=Nt[2];return{xyzv:[[Mt,Et,Pt],[Pt,bt,Mt],[Et,Dt,Gt],[Gt,Pt,Et],[Dt,Mt,bt],[bt,Gt,Dt]],abc:[[te,ne,-1],[-1,-1,te],[ne,je,-1],[-1,-1,ne],[je,te,-1],[-1,-1,je]]}}function H(Vt,Nt){return Vt==="all"||Vt===null?!0:Vt.indexOf(Nt)>-1}function Y(Vt,Nt){return Vt===null?Nt:Vt}function at(Vt,Nt,Mt){J();var Et=[Nt],Dt=[Mt];if(V>=1)Et=[Nt],Dt=[Mt];else if(V>0){var dt=ot(Nt,Mt);Et=dt.xyzv,Dt=dt.abc}for(var ht=0;ht<Et.length;ht++){Nt=Et[ht],Mt=Dt[ht];for(var bt=[],Pt=0;Pt<3;Pt++){var Gt=Nt[Pt][0],te=Nt[Pt][1],ne=Nt[Pt][2],je=Nt[Pt][3],Ne=Mt[Pt]>-1?Mt[Pt]:X(Gt,te,ne);Ne>-1?bt[Pt]=Ne:bt[Pt]=nt(Gt,te,ne,Y(Vt,je))}q(bt[0],bt[1],bt[2])}}function et(Vt,Nt,Mt){var Et=function(Dt,dt,ht){at(Vt,[Nt[Dt],Nt[dt],Nt[ht]],[Mt[Dt],Mt[dt],Mt[ht]])};Et(0,1,2),Et(2,3,0)}function ct(Vt,Nt,Mt){var Et=function(Dt,dt,ht){at(Vt,[Nt[Dt],Nt[dt],Nt[ht]],[Mt[Dt],Mt[dt],Mt[ht]])};Et(0,1,2),Et(3,0,1),Et(2,3,0),Et(1,2,3)}function ft(Vt,Nt,Mt,Et){var Dt=Vt[3];Dt<Mt&&(Dt=Mt),Dt>Et&&(Dt=Et);for(var dt=(Vt[3]-Dt)/(Vt[3]-Nt[3]+1e-9),ht=[],bt=0;bt<4;bt++)ht[bt]=(1-dt)*Vt[bt]+dt*Nt[bt];return ht}function yt(Vt,Nt,Mt){return Vt>=Nt&&Vt<=Mt}function xt(Vt){var Nt=.001*(F-P);return Vt>=P-Nt&&Vt<=F+Nt}function Ct(Vt){for(var Nt=[],Mt=0;Mt<4;Mt++){var Et=Vt[Mt];Nt.push([o._x[Et],o._y[Et],o._z[Et],o._value[Et]])}return Nt}var gt=3;function mt(Vt,Nt,Mt,Et,Dt,dt){dt||(dt=1),Mt=[-1,-1,-1];var ht=!1,bt=[yt(Nt[0][3],Et,Dt),yt(Nt[1][3],Et,Dt),yt(Nt[2][3],Et,Dt)];if(!bt[0]&&!bt[1]&&!bt[2])return!1;var Pt=function(te,ne,je){return xt(ne[0][3])&&xt(ne[1][3])&&xt(ne[2][3])?(at(te,ne,je),!0):dt<gt?mt(te,ne,je,P,F,++dt):!1};if(bt[0]&&bt[1]&&bt[2])return Pt(Vt,Nt,Mt)||ht;var Gt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(te){if(bt[te[0]]&&bt[te[1]]&&!bt[te[2]]){var ne=Nt[te[0]],je=Nt[te[1]],Ne=Nt[te[2]],ge=ft(Ne,ne,Et,Dt),_e=ft(Ne,je,Et,Dt);ht=Pt(Vt,[_e,ge,ne],[-1,-1,Mt[te[0]]])||ht,ht=Pt(Vt,[ne,je,_e],[Mt[te[0]],Mt[te[1]],-1])||ht,Gt=!0}}),Gt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(te){if(bt[te[0]]&&!bt[te[1]]&&!bt[te[2]]){var ne=Nt[te[0]],je=Nt[te[1]],Ne=Nt[te[2]],ge=ft(je,ne,Et,Dt),_e=ft(Ne,ne,Et,Dt);ht=Pt(Vt,[_e,ge,ne],[-1,-1,Mt[te[0]]])||ht,Gt=!0}}),ht}function vt(Vt,Nt,Mt,Et){var Dt=!1,dt=Ct(Nt),ht=[yt(dt[0][3],Mt,Et),yt(dt[1][3],Mt,Et),yt(dt[2][3],Mt,Et),yt(dt[3][3],Mt,Et)];if(!ht[0]&&!ht[1]&&!ht[2]&&!ht[3])return Dt;if(ht[0]&&ht[1]&&ht[2]&&ht[3])return c&&(Dt=ct(Vt,dt,Nt)||Dt),Dt;var bt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Pt){if(ht[Pt[0]]&&ht[Pt[1]]&&ht[Pt[2]]&&!ht[Pt[3]]){var Gt=dt[Pt[0]],te=dt[Pt[1]],ne=dt[Pt[2]],je=dt[Pt[3]];if(c)Dt=at(Vt,[Gt,te,ne],[Nt[Pt[0]],Nt[Pt[1]],Nt[Pt[2]]])||Dt;else{var Ne=ft(je,Gt,Mt,Et),ge=ft(je,te,Mt,Et),_e=ft(je,ne,Mt,Et);Dt=at(null,[Ne,ge,_e],[-1,-1,-1])||Dt}bt=!0}}),bt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Pt){if(ht[Pt[0]]&&ht[Pt[1]]&&!ht[Pt[2]]&&!ht[Pt[3]]){var Gt=dt[Pt[0]],te=dt[Pt[1]],ne=dt[Pt[2]],je=dt[Pt[3]],Ne=ft(ne,Gt,Mt,Et),ge=ft(ne,te,Mt,Et),_e=ft(je,te,Mt,Et),De=ft(je,Gt,Mt,Et);c?(Dt=at(Vt,[Gt,De,Ne],[Nt[Pt[0]],-1,-1])||Dt,Dt=at(Vt,[te,ge,_e],[Nt[Pt[1]],-1,-1])||Dt):Dt=et(null,[Ne,ge,_e,De],[-1,-1,-1,-1])||Dt,bt=!0}}),bt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Pt){if(ht[Pt[0]]&&!ht[Pt[1]]&&!ht[Pt[2]]&&!ht[Pt[3]]){var Gt=dt[Pt[0]],te=dt[Pt[1]],ne=dt[Pt[2]],je=dt[Pt[3]],Ne=ft(te,Gt,Mt,Et),ge=ft(ne,Gt,Mt,Et),_e=ft(je,Gt,Mt,Et);c?(Dt=at(Vt,[Gt,Ne,ge],[Nt[Pt[0]],-1,-1])||Dt,Dt=at(Vt,[Gt,ge,_e],[Nt[Pt[0]],-1,-1])||Dt,Dt=at(Vt,[Gt,_e,Ne],[Nt[Pt[0]],-1,-1])||Dt):Dt=at(null,[Ne,ge,_e],[-1,-1,-1])||Dt,bt=!0}}),Dt}function At(Vt,Nt,Mt,Et,Dt,dt,ht,bt,Pt,Gt,te){var ne=!1;return a&&(H(Vt,"A")&&(ne=vt(null,[Nt,Mt,Et,dt],Gt,te)||ne),H(Vt,"B")&&(ne=vt(null,[Mt,Et,Dt,Pt],Gt,te)||ne),H(Vt,"C")&&(ne=vt(null,[Mt,dt,ht,Pt],Gt,te)||ne),H(Vt,"D")&&(ne=vt(null,[Et,dt,bt,Pt],Gt,te)||ne),H(Vt,"E")&&(ne=vt(null,[Mt,Et,dt,Pt],Gt,te)||ne)),c&&(ne=vt(Vt,[Mt,Et,dt,Pt],Gt,te)||ne),ne}function Ot(Vt,Nt,Mt,Et,Dt,dt,ht,bt){return[bt[0]===!0?!0:mt(Vt,Ct([Nt,Mt,Et]),[Nt,Mt,Et],dt,ht),bt[1]===!0?!0:mt(Vt,Ct([Et,Dt,Nt]),[Et,Dt,Nt],dt,ht)]}function It(Vt,Nt,Mt,Et,Dt,dt,ht,bt,Pt){return bt?Ot(Vt,Nt,Mt,Dt,Et,dt,ht,Pt):Ot(Vt,Mt,Dt,Et,Nt,dt,ht,Pt)}function St(Vt,Nt,Mt,Et,Dt,dt,ht){var bt=!1,Pt,Gt,te,ne,je=function(){bt=mt(Vt,[Pt,Gt,te],[-1,-1,-1],Dt,dt)||bt,bt=mt(Vt,[te,ne,Pt],[-1,-1,-1],Dt,dt)||bt},Ne=ht[0],ge=ht[1],_e=ht[2];return Ne&&(Pt=$(Ct([I(Nt,Mt-0,Et-0)])[0],Ct([I(Nt-1,Mt-0,Et-0)])[0],Ne),Gt=$(Ct([I(Nt,Mt-0,Et-1)])[0],Ct([I(Nt-1,Mt-0,Et-1)])[0],Ne),te=$(Ct([I(Nt,Mt-1,Et-1)])[0],Ct([I(Nt-1,Mt-1,Et-1)])[0],Ne),ne=$(Ct([I(Nt,Mt-1,Et-0)])[0],Ct([I(Nt-1,Mt-1,Et-0)])[0],Ne),je()),ge&&(Pt=$(Ct([I(Nt-0,Mt,Et-0)])[0],Ct([I(Nt-0,Mt-1,Et-0)])[0],ge),Gt=$(Ct([I(Nt-0,Mt,Et-1)])[0],Ct([I(Nt-0,Mt-1,Et-1)])[0],ge),te=$(Ct([I(Nt-1,Mt,Et-1)])[0],Ct([I(Nt-1,Mt-1,Et-1)])[0],ge),ne=$(Ct([I(Nt-1,Mt,Et-0)])[0],Ct([I(Nt-1,Mt-1,Et-0)])[0],ge),je()),_e&&(Pt=$(Ct([I(Nt-0,Mt-0,Et)])[0],Ct([I(Nt-0,Mt-0,Et-1)])[0],_e),Gt=$(Ct([I(Nt-0,Mt-1,Et)])[0],Ct([I(Nt-0,Mt-1,Et-1)])[0],_e),te=$(Ct([I(Nt-1,Mt-1,Et)])[0],Ct([I(Nt-1,Mt-1,Et-1)])[0],_e),ne=$(Ct([I(Nt-1,Mt-0,Et)])[0],Ct([I(Nt-1,Mt-0,Et-1)])[0],_e),je()),bt}function Bt(Vt,Nt,Mt,Et,Dt,dt,ht,bt,Pt,Gt,te,ne){var je=Vt;return ne?(a&&Vt==="even"&&(je=null),At(je,Nt,Mt,Et,Dt,dt,ht,bt,Pt,Gt,te)):(a&&Vt==="odd"&&(je=null),At(je,Pt,bt,ht,dt,Dt,Et,Mt,Nt,Gt,te))}function re(Vt,Nt,Mt,Et,Dt){for(var dt=[],ht=0,bt=0;bt<Nt.length;bt++)for(var Pt=Nt[bt],Gt=1;Gt<S;Gt++)for(var te=1;te<m;te++)dt.push(It(Vt,I(Pt,te-1,Gt-1),I(Pt,te-1,Gt),I(Pt,te,Gt-1),I(Pt,te,Gt),Mt,Et,(Pt+te+Gt)%2,Dt&&Dt[ht]?Dt[ht]:[])),ht++;return dt}function Yt(Vt,Nt,Mt,Et,Dt){for(var dt=[],ht=0,bt=0;bt<Nt.length;bt++)for(var Pt=Nt[bt],Gt=1;Gt<u;Gt++)for(var te=1;te<S;te++)dt.push(It(Vt,I(Gt-1,Pt,te-1),I(Gt,Pt,te-1),I(Gt-1,Pt,te),I(Gt,Pt,te),Mt,Et,(Gt+Pt+te)%2,Dt&&Dt[ht]?Dt[ht]:[])),ht++;return dt}function he(Vt,Nt,Mt,Et,Dt){for(var dt=[],ht=0,bt=0;bt<Nt.length;bt++)for(var Pt=Nt[bt],Gt=1;Gt<m;Gt++)for(var te=1;te<u;te++)dt.push(It(Vt,I(te-1,Gt-1,Pt),I(te-1,Gt,Pt),I(te,Gt-1,Pt),I(te,Gt,Pt),Mt,Et,(te+Gt+Pt)%2,Dt&&Dt[ht]?Dt[ht]:[])),ht++;return dt}function Zt(Vt,Nt,Mt){for(var Et=1;Et<S;Et++)for(var Dt=1;Dt<m;Dt++)for(var dt=1;dt<u;dt++)Bt(Vt,I(dt-1,Dt-1,Et-1),I(dt-1,Dt-1,Et),I(dt-1,Dt,Et-1),I(dt-1,Dt,Et),I(dt,Dt-1,Et-1),I(dt,Dt-1,Et),I(dt,Dt,Et-1),I(dt,Dt,Et),Nt,Mt,(dt+Dt+Et)%2)}function ae(Vt,Nt,Mt){c=!0,Zt(Vt,Nt,Mt),c=!1}function oe(Vt,Nt,Mt){a=!0,Zt(Vt,Nt,Mt),a=!1}function ce(Vt,Nt,Mt,Et,Dt,dt){for(var ht=[],bt=0,Pt=0;Pt<Nt.length;Pt++)for(var Gt=Nt[Pt],te=1;te<S;te++)for(var ne=1;ne<m;ne++)ht.push(St(Vt,Gt,ne,te,Mt,Et,Dt[Pt],dt&&dt[bt]?dt[bt]:[])),bt++;return ht}function ue(Vt,Nt,Mt,Et,Dt,dt){for(var ht=[],bt=0,Pt=0;Pt<Nt.length;Pt++)for(var Gt=Nt[Pt],te=1;te<u;te++)for(var ne=1;ne<S;ne++)ht.push(St(Vt,te,Gt,ne,Mt,Et,Dt[Pt],dt&&dt[bt]?dt[bt]:[])),bt++;return ht}function ye(Vt,Nt,Mt,Et,Dt,dt){for(var ht=[],bt=0,Pt=0;Pt<Nt.length;Pt++)for(var Gt=Nt[Pt],te=1;te<m;te++)for(var ne=1;ne<u;ne++)ht.push(St(Vt,ne,te,Gt,Mt,Et,Dt[Pt],dt&&dt[bt]?dt[bt]:[])),bt++;return ht}function Tt(Vt,Nt){for(var Mt=[],Et=Vt;Et<Nt;Et++)Mt.push(Et);return Mt}function Ft(){for(var Vt=0;Vt<u;Vt++)for(var Nt=0;Nt<m;Nt++)for(var Mt=0;Mt<S;Mt++){var Et=I(Vt,Nt,Mt);nt(o._x[Et],o._y[Et],o._z[Et],o._value[Et])}}function $t(){it(),Ft();var Vt=null;if(b&&_&&(rt(_),ae(Vt,P,F)),p&&h){rt(h);for(var Nt=o.surface.pattern,Mt=o.surface.count,Et=0;Et<Mt;Et++){var Dt=Mt===1?.5:Et/(Mt-1),dt=(1-Dt)*P+Dt*F,ht=Math.abs(dt-O),bt=Math.abs(dt-D),Pt=ht>bt?[O,dt]:[dt,D];oe(Nt,Pt[0],Pt[1])}}var Gt=[[Math.min(P,D),Math.max(P,D)],[Math.min(O,F),Math.max(O,F)]];["x","y","z"].forEach(function(te){for(var ne=[],je=0;je<Gt.length;je++){var Ne=0,ge=Gt[je][0],_e=Gt[je][1],De=o.slices[te];if(De.show&&De.fill){rt(De.fill);var hr=[],fe=[],Be=[];if(De.locations.length)for(var He=0;He<De.locations.length;He++){var pr=d(De.locations[He],te==="x"?y:te==="y"?A:L);pr.distRatio===0?hr.push(pr.id):pr.id>0&&(fe.push(pr.id),te==="x"?Be.push([pr.distRatio,0,0]):te==="y"?Be.push([0,pr.distRatio,0]):Be.push([0,0,pr.distRatio]))}else te==="x"?hr=Tt(1,u-1):te==="y"?hr=Tt(1,m-1):hr=Tt(1,S-1);fe.length>0&&(te==="x"?ne[Ne]=ce(Vt,fe,ge,_e,Be,ne[Ne]):te==="y"?ne[Ne]=ue(Vt,fe,ge,_e,Be,ne[Ne]):ne[Ne]=ye(Vt,fe,ge,_e,Be,ne[Ne]),Ne++),hr.length>0&&(te==="x"?ne[Ne]=re(Vt,hr,ge,_e,ne[Ne]):te==="y"?ne[Ne]=Yt(Vt,hr,ge,_e,ne[Ne]):ne[Ne]=he(Vt,hr,ge,_e,ne[Ne]),Ne++)}var Ze=o.caps[te];Ze.show&&Ze.fill&&(rt(Ze.fill),te==="x"?ne[Ne]=re(Vt,[0,u-1],ge,_e,ne[Ne]):te==="y"?ne[Ne]=Yt(Vt,[0,m-1],ge,_e,ne[Ne]):ne[Ne]=he(Vt,[0,S-1],ge,_e,ne[Ne]),Ne++)}}),f===0&&it(),o._meshX=R,o._meshY=B,o._meshZ=N,o._meshIntensity=G,o._Xs=y,o._Ys=A,o._Zs=L}return $t(),o}function s(o,p){var b=o.glplot.gl,h=M({gl:b}),_=new r(o,h,p.uid);return h._trace=_,_.update(p),o.glplot.add(h),_}Q.exports={findNearestOnAxis:d,generateIsoMeshes:n,createIsosurfaceTrace:s}},70548:function(Q,U,t){var M=t(3400),E=t(24040),i=t(50048),C=t(27260);function T(d,r,e,l){function n(s,o){return M.coerce(d,r,i,s,o)}v(d,r,e,l,n)}function v(d,r,e,l,n){var s=n("isomin"),o=n("isomax");o!=null&&s!==void 0&&s!==null&&s>o&&(r.isomin=null,r.isomax=null);var p=n("x"),b=n("y"),h=n("z"),_=n("value");if(!p||!p.length||!b||!b.length||!h||!h.length||!_||!_.length){r.visible=!1;return}var a=E.getComponentMethod("calendars","handleTraceDefaults");a(d,r,["x","y","z"],l),n("valuehoverformat"),["x","y","z"].forEach(function(k){n(k+"hoverformat");var y="caps."+k,A=n(y+".show");A&&n(y+".fill");var L="slices."+k,u=n(L+".show");u&&(n(L+".fill"),n(L+".locations"))});var c=n("spaceframe.show");c&&n("spaceframe.fill");var f=n("surface.show");f&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var x=n("contour.show");x&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(k){n(k)}),C(d,r,l,n,{prefix:"",cLetter:"c"}),r._length=null}Q.exports={supplyDefaults:T,supplyIsoDefaults:v}},6296:function(Q,U,t){Q.exports={attributes:t(50048),supplyDefaults:t(70548).supplyDefaults,calc:t(62624),colorbar:{min:"cmin",max:"cmax"},plot:t(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(Q,U,t){var M=t(49084),E=t(29736).axisHoverFormat,i=t(21776).Ks,C=t(16716),T=t(45464),v=t(92880).extendFlat;Q.exports=v({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:i({editType:"calc"}),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},M("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:C.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:v({},C.contours.x.show,{}),color:C.contours.x.color,width:C.contours.x.width,editType:"calc"},lightposition:{x:v({},C.lightposition.x,{dflt:1e5}),y:v({},C.lightposition.y,{dflt:1e5}),z:v({},C.lightposition.z,{dflt:0}),editType:"calc"},lighting:v({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},C.lighting),hoverinfo:v({},T.hoverinfo,{editType:"calc"}),showlegend:v({},T.showlegend,{dflt:!1})})},1876:function(Q,U,t){var M=t(47128);Q.exports=function(E,i){i.intensity&&M(E,i,{vals:i.intensity,containerStr:"",cLetter:"c"})}},576:function(Q,U,t){var M=t(67792).gl_mesh3d,E=t(67792).delaunay_triangulate,i=t(67792).alpha_shape,C=t(67792).convex_hull,T=t(33040).parseColorScale,v=t(3400).isArrayOrTypedArray,d=t(43080),r=t(8932).extractOpts,e=t(52094);function l(a,c,f){this.scene=a,this.uid=f,this.mesh=c,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=l.prototype;n.handlePick=function(a){if(a.object===this.mesh){var c=a.index=a.data.index;a.data._cellCenter?a.traceCoordinate=a.data.dataCoordinate:a.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]];var f=this.data.hovertext||this.data.text;return v(f)&&f[c]!==void 0?a.textLabel=f[c]:f&&(a.textLabel=f),!0}};function s(a){for(var c=[],f=a.length,x=0;x<f;x++)c[x]=d(a[x]);return c}function o(a,c,f,x){for(var k=[],y=c.length,A=0;A<y;A++)k[A]=a.d2l(c[A],0,x)*f;return k}function p(a){for(var c=[],f=a.length,x=0;x<f;x++)c[x]=Math.round(a[x]);return c}function b(a,c){for(var f=["x","y","z"].indexOf(a),x=[],k=c.length,y=0;y<k;y++)x[y]=[c[y][(f+1)%3],c[y][(f+2)%3]];return E(x)}function h(a,c){for(var f=a.length,x=0;x<f;x++)if(a[x]<=-.5||a[x]>=c-.5)return!1;return!0}n.update=function(a){var c=this.scene,f=c.fullSceneLayout;this.data=a;var x=a.x.length,k=e(o(f.xaxis,a.x,c.dataScale[0],a.xcalendar),o(f.yaxis,a.y,c.dataScale[1],a.ycalendar),o(f.zaxis,a.z,c.dataScale[2],a.zcalendar)),y;if(a.i&&a.j&&a.k){if(a.i.length!==a.j.length||a.j.length!==a.k.length||!h(a.i,x)||!h(a.j,x)||!h(a.k,x))return;y=e(p(a.i),p(a.j),p(a.k))}else a.alphahull===0?y=C(k):a.alphahull>0?y=i(a.alphahull,k):y=b(a.delaunayaxis,k);var A={positions:k,cells:y,lightPosition:[a.lightposition.x,a.lightposition.y,a.lightposition.z],ambient:a.lighting.ambient,diffuse:a.lighting.diffuse,specular:a.lighting.specular,roughness:a.lighting.roughness,fresnel:a.lighting.fresnel,vertexNormalsEpsilon:a.lighting.vertexnormalsepsilon,faceNormalsEpsilon:a.lighting.facenormalsepsilon,opacity:a.opacity,contourEnable:a.contour.show,contourColor:d(a.contour.color).slice(0,3),contourWidth:a.contour.width,useFacetNormals:a.flatshading};if(a.intensity){var L=r(a);this.color="#fff";var u=a.intensitymode;A[u+"Intensity"]=a.intensity,A[u+"IntensityBounds"]=[L.min,L.max],A.colormap=T(a)}else a.vertexcolor?(this.color=a.vertexcolor[0],A.vertexColors=s(a.vertexcolor)):a.facecolor?(this.color=a.facecolor[0],A.cellColors=s(a.facecolor)):(this.color=a.color,A.meshColor=d(a.color));this.mesh.update(A)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function _(a,c){var f=a.glplot.gl,x=M({gl:f}),k=new l(a,x,c.uid);return x._trace=k,k.update(c),a.glplot.add(x),k}Q.exports=_},74212:function(Q,U,t){var M=t(24040),E=t(3400),i=t(27260),C=t(52948);Q.exports=function(T,v,d,r){function e(p,b){return E.coerce(T,v,C,p,b)}function l(p){var b=p.map(function(h){var _=e(h);return _&&E.isArrayOrTypedArray(_)?_:null});return b.every(function(h){return h&&h.length===b[0].length})&&b}var n=l(["x","y","z"]);if(!n){v.visible=!1;return}if(l(["i","j","k"]),v.i&&(!v.j||!v.k)||v.j&&(!v.k||!v.i)||v.k&&(!v.i||!v.j)){v.visible=!1;return}var s=M.getComponentMethod("calendars","handleTraceDefaults");s(T,v,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(p){e(p)});var o=e("contour.show");o&&(e("contour.color"),e("contour.width")),"intensity"in T?(e("intensity"),e("intensitymode"),i(T,v,r,e,{prefix:"",cLetter:"c"})):(v.showscale=!1,"facecolor"in T?e("facecolor"):"vertexcolor"in T?e("vertexcolor"):e("color",d)),e("text"),e("hovertext"),e("hovertemplate"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),v._length=null}},7404:function(Q,U,t){Q.exports={attributes:t(52948),supplyDefaults:t(74212),calc:t(1876),colorbar:{min:"cmin",max:"cmax"},plot:t(576),moduleType:"trace",name:"mesh3d",basePlotModule:t(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(Q,U,t){var M=t(3400).extendFlat,E=t(52904),i=t(29736).axisHoverFormat,C=t(98192).u,T=t(55756),v=t(48164),d=v.INCREASING.COLOR,r=v.DECREASING.COLOR,e=E.line;function l(n){return{line:{color:M({},e.color,{dflt:n}),width:e.width,dash:C,editType:"style"},editType:"style"}}Q.exports={xperiod:E.xperiod,xperiod0:E.xperiod0,xperiodalignment:E.xperiodalignment,xhoverformat:i("x"),yhoverformat:i("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:M({},e.width,{}),dash:M({},C,{}),editType:"style"},increasing:l(d),decreasing:l(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:M({},T.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:E.zorder}},42812:function(Q,U,t){var M=t(3400),E=M._,i=t(54460),C=t(1220),T=t(39032).BADNUM;function v(l,n){var s=i.getFromId(l,n.xaxis),o=i.getFromId(l,n.yaxis),p=e(l,s,n),b=n._minDiff;n._minDiff=null;var h=n._origX;n._origX=null;var _=n._xcalc;n._xcalc=null;var a=r(l,n,h,_,o,d);return n._extremes[s._id]=i.findExtremes(s,_,{vpad:b/2}),a.length?(M.extendFlat(a[0].t,{wHover:b/2,tickLen:p}),a):[{t:{empty:!0}}]}function d(l,n,s,o){return{o:l,h:n,l:s,c:o}}function r(l,n,s,o,p,b){for(var h=p.makeCalcdata(n,"open"),_=p.makeCalcdata(n,"high"),a=p.makeCalcdata(n,"low"),c=p.makeCalcdata(n,"close"),f=M.isArrayOrTypedArray(n.text),x=M.isArrayOrTypedArray(n.hovertext),k=!0,y=null,A=!!n.xperiodalignment,L=[],u=0;u<o.length;u++){var m=o[u],S=h[u],w=_[u],I=a[u],O=c[u];if(m!==T&&S!==T&&w!==T&&I!==T&&O!==T){O===S?y!==null&&O!==y&&(k=O>y):k=O>S,y=O;var D=b(S,w,I,O);D.pos=m,D.yc=(S+O)/2,D.i=u,D.dir=k?"increasing":"decreasing",D.x=D.pos,D.y=[I,w],A&&(D.orig_p=s[u]),f&&(D.tx=n.text[u]),x&&(D.htx=n.hovertext[u]),L.push(D)}else L.push({pos:m,empty:!0})}return n._extremes[p._id]=i.findExtremes(p,M.concat(a,_),{padded:!0}),L.length&&(L[0].t={labels:{open:E(l,"open:")+" ",high:E(l,"high:")+" ",low:E(l,"low:")+" ",close:E(l,"close:")+" "}}),L}function e(l,n,s){var o=s._minDiff;if(!o){var p=l._fullData,b=[];o=1/0;var h;for(h=0;h<p.length;h++){var _=p[h];if(_.type==="ohlc"&&_.visible===!0&&_.xaxis===n._id){b.push(_);var a=n.makeCalcdata(_,"x");_._origX=a;var c=C(s,n,"x",a).vals;_._xcalc=c;var f=M.distinctVals(c).minDiff;f&&isFinite(f)&&(o=Math.min(o,f))}}for(o===1/0&&(o=1),h=0;h<b.length;h++)b[h]._minDiff=o}return o*s.tickwidth}Q.exports={calc:v,calcCommon:r}},23860:function(Q,U,t){var M=t(3400),E=t(52744),i=t(31147),C=t(20279);Q.exports=function(v,d,r,e){function l(s,o){return M.coerce(v,d,C,s,o)}var n=E(v,d,l,e);if(!n){d.visible=!1;return}i(v,d,e,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),l("line.dash"),T(v,d,l,"increasing"),T(v,d,l,"decreasing"),l("text"),l("hovertext"),l("tickwidth"),e._requestRangeslider[d.xaxis]=!0,l("zorder")};function T(v,d,r,e){r(e+".line.color"),r(e+".line.width",d.line.width),r(e+".line.dash",d.line.dash)}},18720:function(Q,U,t){var M=t(54460),E=t(3400),i=t(93024),C=t(76308),T=t(3400).fillText,v=t(48164),d={increasing:v.INCREASING.SYMBOL,decreasing:v.DECREASING.SYMBOL};function r(s,o,p,b){var h=s.cd,_=h[0].trace;return _.hoverlabel.split?l(s,o,p,b):n(s,o,p,b)}function e(s,o,p,b){var h=s.cd,_=s.xa,a=h[0].trace,c=h[0].t,f=a.type,x=f==="ohlc"?"l":"min",k=f==="ohlc"?"h":"max",y,A,L=c.bPos||0,u=function(G){return G.pos+L-o},m=c.bdPos||c.tickLen,S=c.wHover,w=Math.min(1,m/Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0])));y=s.maxHoverDistance-w,A=s.maxSpikeDistance-w;function I(G){var X=u(G);return i.inbox(X-S,X+S,y)}function O(G){var X=G[x],J=G[k];return X===J||i.inbox(X-p,J-p,y)}function D(G){return(I(G)+O(G))/2}var P=i.getDistanceFunction(b,I,O,D);if(i.getClosest(h,P,s),s.index===!1)return null;var F=h[s.index];if(F.empty)return null;var R=F.dir,B=a[R],N=B.line.color;return C.opacity(N)&&B.line.width?s.color=N:s.color=B.fillcolor,s.x0=_.c2p(F.pos+L-m,!0),s.x1=_.c2p(F.pos+L+m,!0),s.xLabelVal=F.orig_p!==void 0?F.orig_p:F.pos,s.spikeDistance=D(F)*A/y,s.xSpike=_.c2p(F.pos,!0),s}function l(s,o,p,b){var h=s.cd,_=s.ya,a=h[0].trace,c=h[0].t,f=[],x=e(s,o,p,b);if(!x)return[];var k=x.index,y=h[k],A=y.hi||a.hoverinfo,L=A.split("+"),u=A==="all",m=u||L.indexOf("y")!==-1;if(!m)return[];for(var S=["high","open","close","low"],w={},I=0;I<S.length;I++){var O=S[I],D=a[O][x.index],P=_.c2p(D,!0),F;D in w?(F=w[D],F.yLabel+="<br>"+c.labels[O]+M.hoverLabelText(_,D,a.yhoverformat)):(F=E.extendFlat({},x),F.y0=F.y1=P,F.yLabelVal=D,F.yLabel=c.labels[O]+M.hoverLabelText(_,D,a.yhoverformat),F.name="",f.push(F),w[D]=F)}return f}function n(s,o,p,b){var h=s.cd,_=s.ya,a=h[0].trace,c=h[0].t,f=e(s,o,p,b);if(!f)return[];var x=f.index,k=h[x],y=f.index=k.i,A=k.dir;function L(D){return c.labels[D]+M.hoverLabelText(_,a[D][y],a.yhoverformat)}var u=k.hi||a.hoverinfo,m=u.split("+"),S=u==="all",w=S||m.indexOf("y")!==-1,I=S||m.indexOf("text")!==-1,O=w?[L("open"),L("high"),L("low"),L("close")+"  "+d[A]]:[];return I&&T(k,a,O),f.extraText=O.join("<br>"),f.y0=f.y1=_.c2p(k.yc,!0),[f]}Q.exports={hoverPoints:r,hoverSplit:l,hoverOnPoints:n}},65456:function(Q,U,t){Q.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(20279),supplyDefaults:t(23860),calc:t(42812).calc,plot:t(36664),style:t(14008),hoverPoints:t(18720).hoverPoints,selectPoints:t(97384)}},52744:function(Q,U,t){var M=t(24040),E=t(3400);Q.exports=function(i,C,T,v){var d=T("x"),r=T("open"),e=T("high"),l=T("low"),n=T("close");T("hoverlabel.split");var s=M.getComponentMethod("calendars","handleTraceDefaults");if(s(i,C,["x"],v),!!(r&&e&&l&&n)){var o=Math.min(r.length,e.length,l.length,n.length);return d&&(o=Math.min(o,E.minRowLength(d))),C._length=o,o}}},36664:function(Q,U,t){var M=t(33428),E=t(3400);Q.exports=function(i,C,T,v){var d=C.yaxis,r=C.xaxis,e=!!r.rangebreaks;E.makeTraceGroups(v,T,"trace ohlc").each(function(l){var n=M.select(this),s=l[0],o=s.t,p=s.trace;if(p.visible!==!0||o.empty){n.remove();return}var b=o.tickLen,h=n.selectAll("path").data(E.identity);h.enter().append("path"),h.exit().remove(),h.attr("d",function(_){if(_.empty)return"M0,0Z";var a=r.c2p(_.pos-b,!0),c=r.c2p(_.pos+b,!0),f=e?(a+c)/2:r.c2p(_.pos,!0),x=d.c2p(_.o,!0),k=d.c2p(_.h,!0),y=d.c2p(_.l,!0),A=d.c2p(_.c,!0);return"M"+a+","+x+"H"+f+"M"+f+","+k+"V"+y+"M"+c+","+A+"H"+f})})}},97384:function(Q){Q.exports=function(U,t){var M=U.cd,E=U.xaxis,i=U.yaxis,C=[],T,v=M[0].t.bPos||0;if(t===!1)for(T=0;T<M.length;T++)M[T].selected=0;else for(T=0;T<M.length;T++){var d=M[T];t.contains([E.c2p(d.pos+v),i.c2p(d.yc)],null,d.i,U)?(C.push({pointNumber:d.i,x:E.c2d(d.pos),y:i.c2d(d.yc)}),d.selected=1):d.selected=0}return C}},14008:function(Q,U,t){var M=t(33428),E=t(43616),i=t(76308);Q.exports=function(C,T,v){var d=v||M.select(C).selectAll("g.ohlclayer").selectAll("g.trace");d.style("opacity",function(r){return r[0].trace.opacity}),d.each(function(r){var e=r[0].trace;M.select(this).selectAll("path").each(function(l){if(!l.empty){var n=e[l.dir].line;M.select(this).style("fill","none").call(i.stroke,n.color).call(E.dashLine,n.dash,n.width).style("opacity",e.selectedpoints&&!l.selected?.3:1)}})})}},72140:function(Q,U,t){var M=t(92880).extendFlat,E=t(45464),i=t(25376),C=t(49084),T=t(21776).Ks,v=t(86968).u,d=M({editType:"calc"},C("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:T({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});Q.exports={domain:v({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:M({},E.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:T({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:i({editType:"calc"}),tickfont:i({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:d,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(Q,U,t){var M=t(84888)._M,E=t(60268),i="parcats";U.name=i,U.plot=function(C,T,v,d){var r=M(C.calcdata,i);if(r.length){var e=r[0];E(C,e,v,d)}},U.clean=function(C,T,v,d){var r=d._has&&d._has("parcats"),e=T._has&&T._has("parcats");r&&!e&&d._paperdiv.selectAll(".parcats").remove()}},69136:function(Q,U,t){var M=t(71688).wrap,E=t(94288).hasColorscale,i=t(47128),C=t(68944),T=t(43616),v=t(3400),d=t(38248);Q.exports=function(a,c){var f=v.filterVisible(c.dimensions);if(f.length===0)return[];var x=f.map(function(nt){var q;if(nt.categoryorder==="trace")q=null;else if(nt.categoryorder==="array")q=nt.categoryarray;else{q=C(nt.values);for(var Z=!0,$=0;$<q.length;$++)if(!d(q[$])){Z=!1;break}q.sort(Z?v.sorterAsc:void 0),nt.categoryorder==="category descending"&&(q=q.reverse())}return p(nt.values,q)}),k,y,A;v.isArrayOrTypedArray(c.counts)?k=c.counts:k=[c.counts],b(f),f.forEach(function(nt,q){h(nt,x[q])});var L=c.line,u;L?(E(c,"line")&&i(a,c,{vals:c.line.color,containerStr:"line",cLetter:"c"}),u=T.tryColorscale(L)):u=v.identity;function m(nt){var q,Z;return v.isArrayOrTypedArray(L.color)?(q=L.color[nt%L.color.length],Z=q):q=L.color,{color:u(q),rawColor:Z}}var S=f[0].values.length,w={},I=x.map(function(nt){return nt.inds});A=0;var O,D;for(O=0;O<S;O++){var P=[];for(D=0;D<I.length;D++)P.push(I[D][O]);y=k[O%k.length],A+=y;var F=m(O),R=P+"-"+F.rawColor;w[R]===void 0&&(w[R]=s(P,F.color,F.rawColor)),o(w[R],O,y)}var B=f.map(function(nt,q){return e(q,nt._index,nt._displayindex,nt.label,A)});for(O=0;O<S;O++)for(y=k[O%k.length],D=0;D<B.length;D++){var N=B[D].containerInd,G=x[D].inds[O],X=B[D].categories;if(X[G]===void 0){var J=c.dimensions[N]._categoryarray[G],it=c.dimensions[N]._ticktext[G];X[G]=l(D,G,J,it)}n(X[G],O,y)}return M(r(B,w,A))};function r(a,c,f){var x=a.map(function(k){return k.categories.length}).reduce(function(k,y){return Math.max(k,y)});return{dimensions:a,paths:c,trace:void 0,maxCats:x,count:f}}function e(a,c,f,x,k){return{dimensionInd:a,containerInd:c,displayInd:f,dimensionLabel:x,count:k,categories:[],dragX:null}}function l(a,c,f,x){return{dimensionInd:a,categoryInd:c,categoryValue:f,displayInd:c,categoryLabel:x,valueInds:[],count:0,dragY:null}}function n(a,c,f){a.valueInds.push(c),a.count+=f}function s(a,c,f){return{categoryInds:a,color:c,rawColor:f,valueInds:[],count:0}}function o(a,c,f){a.valueInds.push(c),a.count+=f}function p(a,c){c==null?c=[]:c=c.map(function(m){return m});var f={},x={},k=[];c.forEach(function(m,S){f[m]=0,x[m]=S});for(var y=0;y<a.length;y++){var A=a[y],L;f[A]===void 0?(f[A]=1,L=c.push(A)-1,x[A]=L):(f[A]++,L=x[A]),k.push(L)}var u=c.map(function(m){return f[m]});return{uniqueValues:c,uniqueCounts:u,inds:k}}function b(a){var c=a.map(function(x){return x.displayindex}),f;if(_(c))for(f=0;f<a.length;f++)a[f]._displayindex=a[f].displayindex;else for(f=0;f<a.length;f++)a[f]._displayindex=f}function h(a,c){a._categoryarray=c.uniqueValues,a.ticktext===null||a.ticktext===void 0?a._ticktext=[]:a._ticktext=a.ticktext.slice();for(var f=a._ticktext.length;f<c.uniqueValues.length;f++)a._ticktext.push(c.uniqueValues[f])}function _(a){for(var c=new Array(a.length),f=0;f<a.length;f++){if(a[f]<0||a[f]>=a.length||c[a[f]]!==void 0)return!1;c[a[f]]=!0}return!0}},76671:function(Q,U,t){var M=t(3400),E=t(94288).hasColorscale,i=t(27260),C=t(86968).Q,T=t(51272),v=t(72140),d=t(26284),r=t(38116).isTypedArraySpec;function e(n,s,o,p,b){b("line.shape"),b("line.hovertemplate");var h=b("line.color",p.colorway[0]);if(E(n,"line")&&M.isArrayOrTypedArray(h)){if(h.length)return b("line.colorscale"),i(n,s,p,b,{prefix:"line.",cLetter:"c"}),h.length;s.line.color=o}return 1/0}function l(n,s){function o(f,x){return M.coerce(n,s,v.dimensions,f,x)}var p=o("values"),b=o("visible");if(p&&p.length||(b=s.visible=!1),b){o("label"),o("displayindex",s._index);var h=n.categoryarray,_=M.isArrayOrTypedArray(h)&&h.length>0||r(h),a;_&&(a="array");var c=o("categoryorder",a);c==="array"?(o("categoryarray"),o("ticktext")):(delete n.categoryarray,delete n.ticktext),!_&&c==="array"&&(s.categoryorder="trace")}}Q.exports=function(n,s,o,p){function b(f,x){return M.coerce(n,s,v,f,x)}var h=T(n,s,{name:"dimensions",handleItemDefaults:l}),_=e(n,s,o,p,b);C(s,p,b),(!Array.isArray(h)||!h.length)&&(s.visible=!1),d(s,h,"values",_),b("hoveron"),b("hovertemplate"),b("arrangement"),b("bundlecolors"),b("sortpaths"),b("counts");var a={family:p.font.family,size:Math.round(p.font.size),color:p.font.color};M.coerceFont(b,"labelfont",a);var c={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};M.coerceFont(b,"tickfont",c)}},22020:function(Q,U,t){Q.exports={attributes:t(72140),supplyDefaults:t(76671),calc:t(69136),plot:t(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(91800),categories:["noOpacity"],meta:{}}},51036:function(Q,U,t){var M=t(33428),E=t(67756).Gz,i=t(36424),C=t(93024),T=t(3400),v=T.strTranslate,d=t(43616),r=t(49760),e=t(72736);function l(V,rt,ot,H){var Y=rt._context.staticPlot,at=V.map(it.bind(0,rt,ot)),et=H.selectAll("g.parcatslayer").data([null]);et.enter().append("g").attr("class","parcatslayer").style("pointer-events",Y?"none":"all");var ct=et.selectAll("g.trace.parcats").data(at,n),ft=ct.enter().append("g").attr("class","trace parcats");ct.attr("transform",function(Bt){return v(Bt.x,Bt.y)}),ft.append("g").attr("class","paths");var yt=ct.select("g.paths"),xt=yt.selectAll("path.path").data(function(Bt){return Bt.paths},n);xt.attr("fill",function(Bt){return Bt.model.color});var Ct=xt.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Bt){return Bt.model.color}).attr("fill-opacity",0);c(Ct),xt.attr("d",function(Bt){return Bt.svgD}),Ct.empty()||xt.sort(o),xt.exit().remove(),xt.on("mouseover",p).on("mouseout",b).on("click",a),ft.append("g").attr("class","dimensions");var gt=ct.select("g.dimensions"),mt=gt.selectAll("g.dimension").data(function(Bt){return Bt.dimensions},n);mt.enter().append("g").attr("class","dimension"),mt.attr("transform",function(Bt){return v(Bt.x,0)}),mt.exit().remove();var vt=mt.selectAll("g.category").data(function(Bt){return Bt.categories},n),At=vt.enter().append("g").attr("class","category");vt.attr("transform",function(Bt){return v(0,Bt.y)}),At.append("rect").attr("class","catrect").attr("pointer-events","none"),vt.select("rect.catrect").attr("fill","none").attr("width",function(Bt){return Bt.width}).attr("height",function(Bt){return Bt.height}),k(At);var Ot=vt.selectAll("rect.bandrect").data(function(Bt){return Bt.bands},n);Ot.each(function(){T.raiseToTop(this)}),Ot.attr("fill",function(Bt){return Bt.color});var It=Ot.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Bt){return Bt.color}).attr("fill-opacity",0);Ot.attr("fill",function(Bt){return Bt.color}).attr("width",function(Bt){return Bt.width}).attr("height",function(Bt){return Bt.height}).attr("y",function(Bt){return Bt.y}).attr("cursor",function(Bt){return Bt.parcatsViewModel.arrangement==="fixed"?"default":Bt.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),A(It),Ot.exit().remove(),At.append("text").attr("class","catlabel").attr("pointer-events","none");var St=rt._fullLayout.paper_bgcolor;vt.select("text.catlabel").attr("text-anchor",function(Bt){return s(Bt)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",e.makeTextShadow(St)).style("fill","rgb(0, 0, 0)").attr("x",function(Bt){return s(Bt)?Bt.width+5:-5}).attr("y",function(Bt){return Bt.height/2}).text(function(Bt){return Bt.model.categoryLabel}).each(function(Bt){d.font(M.select(this),Bt.parcatsViewModel.categorylabelfont),e.convertToTspans(M.select(this),rt)}),At.append("text").attr("class","dimlabel"),vt.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Bt){return Bt.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Bt){return Bt.width/2}).attr("y",-5).text(function(Bt,re){return re===0?Bt.parcatsViewModel.model.dimensions[Bt.model.dimensionInd].dimensionLabel:null}).each(function(Bt){d.font(M.select(this),Bt.parcatsViewModel.labelfont)}),vt.selectAll("rect.bandrect").on("mouseover",P).on("mouseout",F),vt.exit().remove(),mt.call(M.behavior.drag().origin(function(Bt){return{x:Bt.x,y:0}}).on("dragstart",R).on("drag",B).on("dragend",N)),ct.each(function(Bt){Bt.traceSelection=M.select(this),Bt.pathSelection=M.select(this).selectAll("g.paths").selectAll("path.path"),Bt.dimensionSelection=M.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ct.exit().remove()}Q.exports=function(V,rt,ot,H){l(ot,V,H,rt)};function n(V){return V.key}function s(V){var rt=V.parcatsViewModel.dimensions.length,ot=V.parcatsViewModel.dimensions[rt-1].model.dimensionInd;return V.model.dimensionInd===ot}function o(V,rt){return V.model.rawColor>rt.model.rawColor?1:V.model.rawColor<rt.model.rawColor?-1:0}function p(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){T.raiseToTop(this),f(M.select(this));var rt=h(V),ot=_(V);if(V.parcatsViewModel.graphDiv.emit("plotly_hover",{points:rt,event:M.event,constraints:ot}),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var H=M.mouse(this)[0],Y=V.parcatsViewModel.graphDiv,at=V.parcatsViewModel.trace,et=Y._fullLayout,ct=et._paperdiv.node().getBoundingClientRect(),ft=V.parcatsViewModel.graphDiv.getBoundingClientRect(),yt,xt,Ct;for(Ct=0;Ct<V.leftXs.length-1;Ct++)if(V.leftXs[Ct]+V.dimWidths[Ct]-2<=H&&H<=V.leftXs[Ct+1]+2){var gt=V.parcatsViewModel.dimensions[Ct],mt=V.parcatsViewModel.dimensions[Ct+1];yt=(gt.x+gt.width+mt.x)/2,xt=(V.topYs[Ct]+V.topYs[Ct+1]+V.height)/2;break}var vt=V.parcatsViewModel.x+yt,At=V.parcatsViewModel.y+xt,Ot=r.mostReadable(V.model.color,["black","white"]),It=V.model.count,St=It/V.parcatsViewModel.model.count,Bt={countLabel:It,probabilityLabel:St.toFixed(3)},re=[];V.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&re.push(["Count:",Bt.countLabel].join(" ")),V.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&re.push(["P:",Bt.probabilityLabel].join(" "));var Yt=re.join("<br>"),he=M.mouse(Y)[0];C.loneHover({trace:at,x:vt-ct.left+ft.left,y:At-ct.top+ft.top,text:Yt,color:V.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ot,idealAlign:he<vt?"right":"left",hovertemplate:(at.line||{}).hovertemplate,hovertemplateLabels:Bt,eventData:[{data:at._input,fullData:at,count:It,probability:St}]},{container:et._hoverlayer.node(),outerContainer:et._paper.node(),gd:Y})}}}function b(V){if(!V.parcatsViewModel.dragDimension&&(c(M.select(this)),C.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),V.parcatsViewModel.pathSelection.sort(o),V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var rt=h(V),ot=_(V);V.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:rt,event:M.event,constraints:ot})}}function h(V){for(var rt=[],ot=G(V.parcatsViewModel),H=0;H<V.model.valueInds.length;H++){var Y=V.model.valueInds[H];rt.push({curveNumber:ot,pointNumber:Y})}return rt}function _(V){for(var rt={},ot=V.parcatsViewModel.model.dimensions,H=0;H<ot.length;H++){var Y=ot[H],at=Y.categories[V.model.categoryInds[H]];rt[Y.containerInd]=at.categoryValue}return V.model.rawColor!==void 0&&(rt.color=V.model.rawColor),rt}function a(V){if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var rt=h(V),ot=_(V);V.parcatsViewModel.graphDiv.emit("plotly_click",{points:rt,event:M.event,constraints:ot})}}function c(V){V.attr("fill",function(rt){return rt.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function f(V){V.attr("fill-opacity",.8).attr("stroke",function(rt){return r.mostReadable(rt.model.color,["black","white"])}).attr("stroke-width",.3)}function x(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function k(V){V.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y(V){V.attr("stroke","black").attr("stroke-width",1.5)}function A(V){V.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function L(V){var rt=V.parcatsViewModel.pathSelection,ot=V.categoryViewModel.model.dimensionInd,H=V.categoryViewModel.model.categoryInd;return rt.filter(function(Y){return Y.model.categoryInds[ot]===H&&Y.model.color===V.color})}function u(V){var rt=M.select(V.parentNode).selectAll("rect.bandrect");rt.each(function(ot){var H=L(ot);f(H),H.each(function(){T.raiseToTop(this)})}),x(M.select(V.parentNode))}function m(V){var rt=M.select(V).datum(),ot=L(rt);f(ot),ot.each(function(){T.raiseToTop(this)}),M.select(V.parentNode).selectAll("rect.bandrect").filter(function(H){return H.color===rt.color}).each(function(){T.raiseToTop(this),y(M.select(this))})}function S(V,rt,ot){var H=M.select(V).datum(),Y=H.categoryViewModel.model,at=H.parcatsViewModel.graphDiv,et=M.select(V.parentNode).selectAll("rect.bandrect"),ct=[];et.each(function(yt){var xt=L(yt);xt.each(function(Ct){Array.prototype.push.apply(ct,h(Ct))})});var ft={};ft[Y.dimensionInd]=Y.categoryValue,at.emit(rt,{points:ct,event:ot,constraints:ft})}function w(V,rt,ot){var H=M.select(V).datum(),Y=H.categoryViewModel.model,at=H.parcatsViewModel.graphDiv,et=L(H),ct=[];et.each(function(yt){Array.prototype.push.apply(ct,h(yt))});var ft={};ft[Y.dimensionInd]=Y.categoryValue,H.rawColor!==void 0&&(ft.color=H.rawColor),at.emit(rt,{points:ct,event:ot,constraints:ft})}function I(V,rt,ot){V._fullLayout._calcInverseTransform(V);var H=V._fullLayout._invScaleX,Y=V._fullLayout._invScaleY,at=M.select(ot.parentNode).select("rect.catrect"),et=at.node().getBoundingClientRect(),ct=at.datum(),ft=ct.parcatsViewModel,yt=ft.model.dimensions[ct.model.dimensionInd],xt=ft.trace,Ct=et.top+et.height/2,gt,mt;ft.dimensions.length>1&&yt.displayInd===ft.dimensions.length-1?(gt=et.left,mt="left"):(gt=et.left+et.width,mt="right");var vt=ct.model.count,At=ct.model.categoryLabel,Ot=vt/ct.parcatsViewModel.model.count,It={countLabel:vt,categoryLabel:At,probabilityLabel:Ot.toFixed(3)},St=[];ct.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&St.push(["Count:",It.countLabel].join(" ")),ct.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&St.push(["P("+It.categoryLabel+"):",It.probabilityLabel].join(" "));var Bt=St.join("<br>");return{trace:xt,x:H*(gt-rt.left),y:Y*(Ct-rt.top),text:Bt,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:mt,hovertemplate:xt.hovertemplate,hovertemplateLabels:It,eventData:[{data:xt._input,fullData:xt,count:vt,category:At,probability:Ot}]}}function O(V,rt,ot){var H=[];return M.select(ot.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Y=this;H.push(I(V,rt,Y))}),H}function D(V,rt,ot){V._fullLayout._calcInverseTransform(V);var H=V._fullLayout._invScaleX,Y=V._fullLayout._invScaleY,at=ot.getBoundingClientRect(),et=M.select(ot).datum(),ct=et.categoryViewModel,ft=ct.parcatsViewModel,yt=ft.model.dimensions[ct.model.dimensionInd],xt=ft.trace,Ct=at.y+at.height/2,gt,mt;ft.dimensions.length>1&&yt.displayInd===ft.dimensions.length-1?(gt=at.left,mt="left"):(gt=at.left+at.width,mt="right");var vt=ct.model.categoryLabel,At=et.parcatsViewModel.model.count,Ot=0;et.categoryViewModel.bands.forEach(function(ce){ce.color===et.color&&(Ot+=ce.count)});var It=ct.model.count,St=0;ft.pathSelection.each(function(ce){ce.model.color===et.color&&(St+=ce.model.count)});var Bt=Ot/At,re=Ot/St,Yt=Ot/It,he={countLabel:Ot,categoryLabel:vt,probabilityLabel:Bt.toFixed(3)},Zt=[];ct.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Zt.push(["Count:",he.countLabel].join(" ")),ct.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Zt.push("P(color \u2229 "+vt+"): "+he.probabilityLabel),Zt.push("P("+vt+" | color): "+re.toFixed(3)),Zt.push("P(color | "+vt+"): "+Yt.toFixed(3)));var ae=Zt.join("<br>"),oe=r.mostReadable(et.color,["black","white"]);return{trace:xt,x:H*(gt-rt.left),y:Y*(Ct-rt.top),text:ae,color:et.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:oe,fontSize:10,idealAlign:mt,hovertemplate:xt.hovertemplate,hovertemplateLabels:he,eventData:[{data:xt._input,fullData:xt,category:vt,count:At,probability:Bt,categorycount:It,colorcount:St,bandcolorcount:Ot}]}}function P(V){if(!V.parcatsViewModel.dragDimension&&V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var rt=M.mouse(this)[1];if(rt<-1)return;var ot=V.parcatsViewModel.graphDiv,H=ot._fullLayout,Y=H._paperdiv.node().getBoundingClientRect(),at=V.parcatsViewModel.hoveron,et=this;if(at==="color"?(m(et),w(et,"plotly_hover",M.event)):(u(et),S(et,"plotly_hover",M.event)),V.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ct;at==="category"?ct=I(ot,Y,et):at==="color"?ct=D(ot,Y,et):at==="dimension"&&(ct=O(ot,Y,et)),ct&&C.loneHover(ct,{container:H._hoverlayer.node(),outerContainer:H._paper.node(),gd:ot})}}}function F(V){var rt=V.parcatsViewModel;if(!rt.dragDimension&&(c(rt.pathSelection),k(rt.dimensionSelection.selectAll("g.category")),A(rt.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),C.loneUnhover(rt.graphDiv._fullLayout._hoverlayer.node()),rt.pathSelection.sort(o),rt.hoverinfoItems.indexOf("skip")===-1)){var ot=V.parcatsViewModel.hoveron,H=this;ot==="color"?w(H,"plotly_unhover",M.event):S(H,"plotly_unhover",M.event)}}function R(V){V.parcatsViewModel.arrangement!=="fixed"&&(V.dragDimensionDisplayInd=V.model.displayInd,V.initialDragDimensionDisplayInds=V.parcatsViewModel.model.dimensions.map(function(rt){return rt.displayInd}),V.dragHasMoved=!1,V.dragCategoryDisplayInd=null,M.select(this).selectAll("g.category").select("rect.catrect").each(function(rt){var ot=M.mouse(this)[0],H=M.mouse(this)[1];-2<=ot&&ot<=rt.width+2&&-2<=H&&H<=rt.height+2&&(V.dragCategoryDisplayInd=rt.model.displayInd,V.initialDragCategoryDisplayInds=V.model.categories.map(function(Y){return Y.displayInd}),rt.model.dragY=rt.y,T.raiseToTop(this.parentNode),M.select(this.parentNode).selectAll("rect.bandrect").each(function(Y){Y.y<H&&H<=Y.y+Y.height&&(V.potentialClickBand=this)}))}),V.parcatsViewModel.dragDimension=V,C.loneUnhover(V.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function B(V){if(V.parcatsViewModel.arrangement!=="fixed"&&(V.dragHasMoved=!0,V.dragDimensionDisplayInd!==null)){var rt=V.dragDimensionDisplayInd,ot=rt-1,H=rt+1,Y=V.parcatsViewModel.dimensions[rt];if(V.dragCategoryDisplayInd!==null){var at=Y.categories[V.dragCategoryDisplayInd];at.model.dragY+=M.event.dy;var et=at.model.dragY,ct=at.model.displayInd,ft=Y.categories,yt=ft[ct-1],xt=ft[ct+1];yt!==void 0&&et<yt.y+yt.height/2&&(at.model.displayInd=yt.model.displayInd,yt.model.displayInd=ct),xt!==void 0&&et+at.height>xt.y+xt.height/2&&(at.model.displayInd=xt.model.displayInd,xt.model.displayInd=ct),V.dragCategoryDisplayInd=at.model.displayInd}if(V.dragCategoryDisplayInd===null||V.parcatsViewModel.arrangement==="freeform"){Y.model.dragX=M.event.x;var Ct=V.parcatsViewModel.dimensions[ot],gt=V.parcatsViewModel.dimensions[H];Ct!==void 0&&Y.model.dragX<Ct.x+Ct.width&&(Y.model.displayInd=Ct.model.displayInd,Ct.model.displayInd=rt),gt!==void 0&&Y.model.dragX+Y.width>gt.x&&(Y.model.displayInd=gt.model.displayInd,gt.model.displayInd=V.dragDimensionDisplayInd),V.dragDimensionDisplayInd=Y.model.displayInd}Z(V.parcatsViewModel),q(V.parcatsViewModel),J(V.parcatsViewModel),X(V.parcatsViewModel)}}function N(V){if(V.parcatsViewModel.arrangement!=="fixed"&&V.dragDimensionDisplayInd!==null){M.select(this).selectAll("text").attr("font-weight","normal");var rt={},ot=G(V.parcatsViewModel),H=V.parcatsViewModel.model.dimensions.map(function(gt){return gt.displayInd}),Y=V.initialDragDimensionDisplayInds.some(function(gt,mt){return gt!==H[mt]});Y&&H.forEach(function(gt,mt){var vt=V.parcatsViewModel.model.dimensions[mt].containerInd;rt["dimensions["+vt+"].displayindex"]=gt});var at=!1;if(V.dragCategoryDisplayInd!==null){var et=V.model.categories.map(function(gt){return gt.displayInd});if(at=V.initialDragCategoryDisplayInds.some(function(gt,mt){return gt!==et[mt]}),at){var ct=V.model.categories.slice().sort(function(gt,mt){return gt.displayInd-mt.displayInd}),ft=ct.map(function(gt){return gt.categoryValue}),yt=ct.map(function(gt){return gt.categoryLabel});rt["dimensions["+V.model.containerInd+"].categoryarray"]=[ft],rt["dimensions["+V.model.containerInd+"].ticktext"]=[yt],rt["dimensions["+V.model.containerInd+"].categoryorder"]="array"}}if(V.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!V.dragHasMoved&&V.potentialClickBand&&(V.parcatsViewModel.hoveron==="color"?w(V.potentialClickBand,"plotly_click",M.event.sourceEvent):S(V.potentialClickBand,"plotly_click",M.event.sourceEvent)),V.model.dragX=null,V.dragCategoryDisplayInd!==null){var xt=V.parcatsViewModel.dimensions[V.dragDimensionDisplayInd].categories[V.dragCategoryDisplayInd];xt.model.dragY=null,V.dragCategoryDisplayInd=null}V.dragDimensionDisplayInd=null,V.parcatsViewModel.dragDimension=null,V.dragHasMoved=null,V.potentialClickBand=null,Z(V.parcatsViewModel),q(V.parcatsViewModel);var Ct=M.transition().duration(300).ease("cubic-in-out");Ct.each(function(){J(V.parcatsViewModel,!0),X(V.parcatsViewModel,!0)}).each("end",function(){(Y||at)&&i.restyle(V.parcatsViewModel.graphDiv,rt,[ot])})}}function G(V){for(var rt,ot=V.graphDiv._fullData,H=0;H<ot.length;H++)if(V.key===ot[H].uid){rt=H;break}return rt}function X(V,rt){rt===void 0&&(rt=!1);function ot(H){return rt?H.transition():H}V.pathSelection.data(function(H){return H.paths},n),ot(V.pathSelection).attr("d",function(H){return H.svgD})}function J(V,rt){rt===void 0&&(rt=!1);function ot(ft){return rt?ft.transition():ft}V.dimensionSelection.data(function(ft){return ft.dimensions},n);var H=V.dimensionSelection.selectAll("g.category").data(function(ft){return ft.categories},n);ot(V.dimensionSelection).attr("transform",function(ft){return v(ft.x,0)}),ot(H).attr("transform",function(ft){return v(0,ft.y)});var Y=H.select(".dimlabel");Y.text(function(ft,yt){return yt===0?ft.parcatsViewModel.model.dimensions[ft.model.dimensionInd].dimensionLabel:null});var at=H.select(".catlabel");at.attr("text-anchor",function(ft){return s(ft)?"start":"end"}).attr("x",function(ft){return s(ft)?ft.width+5:-5}).each(function(ft){var yt,xt;s(ft)?(yt=ft.width+5,xt="start"):(yt=-5,xt="end"),M.select(this).selectAll("tspan").attr("x",yt).attr("text-anchor",xt)});var et=H.selectAll("rect.bandrect").data(function(ft){return ft.bands},n),ct=et.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ft){return ft.color}).attr("fill-opacity",0);et.attr("fill",function(ft){return ft.color}).attr("width",function(ft){return ft.width}).attr("height",function(ft){return ft.height}).attr("y",function(ft){return ft.y}),A(ct),et.each(function(){T.raiseToTop(this)}),et.exit().remove()}function it(V,rt,ot){var H=ot[0],Y=rt.margin||{l:80,r:80,t:100,b:80},at=H.trace,et=at.domain,ct=rt.width,ft=rt.height,yt=Math.floor(ct*(et.x[1]-et.x[0])),xt=Math.floor(ft*(et.y[1]-et.y[0])),Ct=et.x[0]*ct+Y.l,gt=rt.height-et.y[1]*rt.height+Y.t,mt=at.line.shape,vt;at.hoverinfo==="all"?vt=["count","probability"]:vt=(at.hoverinfo||"").split("+");var At={trace:at,key:at.uid,model:H,x:Ct,y:gt,width:yt,height:xt,hoveron:at.hoveron,hoverinfoItems:vt,arrangement:at.arrangement,bundlecolors:at.bundlecolors,sortpaths:at.sortpaths,labelfont:at.labelfont,categorylabelfont:at.tickfont,pathShape:mt,dragDimension:null,margin:Y,paths:[],dimensions:[],graphDiv:V,traceSelection:null,pathSelection:null,dimensionSelection:null};return H.dimensions&&(Z(At),q(At)),At}function nt(V,rt,ot,H,Y){var at=[],et=[],ct,ft;for(ft=0;ft<ot.length-1;ft++)ct=E(ot[ft]+V[ft],V[ft+1]),at.push(ct(Y)),et.push(ct(1-Y));var yt="M "+V[0]+","+rt[0];for(yt+="l"+ot[0]+",0 ",ft=1;ft<ot.length;ft++)yt+="C"+at[ft-1]+","+rt[ft-1]+" "+et[ft-1]+","+rt[ft]+" "+V[ft]+","+rt[ft],yt+="l"+ot[ft]+",0 ";for(yt+="l0,"+H+" ",yt+="l -"+ot[ot.length-1]+",0 ",ft=ot.length-2;ft>=0;ft--)yt+="C"+et[ft]+","+(rt[ft+1]+H)+" "+at[ft]+","+(rt[ft]+H)+" "+(V[ft]+ot[ft])+","+(rt[ft]+H),yt+="l-"+ot[ft]+",0 ";return yt+="Z",yt}function q(V){var rt=V.dimensions,ot=V.model,H=rt.map(function(Tt){return Tt.categories.map(function(Ft){return Ft.y})}),Y=V.model.dimensions.map(function(Tt){return Tt.categories.map(function(Ft){return Ft.displayInd})}),at=V.model.dimensions.map(function(Tt){return Tt.displayInd}),et=V.dimensions.map(function(Tt){return Tt.model.dimensionInd}),ct=rt.map(function(Tt){return Tt.x}),ft=rt.map(function(Tt){return Tt.width}),yt=[];for(var xt in ot.paths)ot.paths.hasOwnProperty(xt)&&yt.push(ot.paths[xt]);function Ct(Tt){var Ft=Tt.categoryInds.map(function(Vt,Nt){return Y[Nt][Vt]}),$t=et.map(function(Vt){return Ft[Vt]});return $t}yt.sort(function(Tt,Ft){var $t=Ct(Tt),Vt=Ct(Ft);return V.sortpaths==="backward"&&($t.reverse(),Vt.reverse()),$t.push(Tt.valueInds[0]),Vt.push(Ft.valueInds[0]),V.bundlecolors&&($t.unshift(Tt.rawColor),Vt.unshift(Ft.rawColor)),$t<Vt?-1:$t>Vt?1:0});for(var gt=new Array(yt.length),mt=rt[0].model.count,vt=rt[0].categories.map(function(Tt){return Tt.height}).reduce(function(Tt,Ft){return Tt+Ft}),At=0;At<yt.length;At++){var Ot=yt[At],It;mt>0?It=vt*(Ot.count/mt):It=0;for(var St=new Array(H.length),Bt=0;Bt<Ot.categoryInds.length;Bt++){var re=Ot.categoryInds[Bt],Yt=Y[Bt][re],he=at[Bt];St[he]=H[he][Yt],H[he][Yt]+=It;var Zt=V.dimensions[he].categories[Yt],ae=Zt.bands.length,oe=Zt.bands[ae-1];if(oe===void 0||Ot.rawColor!==oe.rawColor){var ce=oe===void 0?0:oe.y+oe.height;Zt.bands.push({key:ce,color:Ot.color,rawColor:Ot.rawColor,height:It,width:Zt.width,count:Ot.count,y:ce,categoryViewModel:Zt,parcatsViewModel:V})}else{var ue=Zt.bands[ae-1];ue.height+=It,ue.count+=Ot.count}}var ye;V.pathShape==="hspline"?ye=nt(ct,St,ft,It,.5):ye=nt(ct,St,ft,It,0),gt[At]={key:Ot.valueInds[0],model:Ot,height:It,leftXs:ct,topYs:St,dimWidths:ft,svgD:ye,parcatsViewModel:V}}V.paths=gt}function Z(V){var rt=V.model.dimensions.map(function(et){return{displayInd:et.displayInd,dimensionInd:et.dimensionInd}});rt.sort(function(et,ct){return et.displayInd-ct.displayInd});var ot=[];for(var H in rt){var Y=rt[H].dimensionInd,at=V.model.dimensions[Y];ot.push($(V,at))}V.dimensions=ot}function $(V,rt){var ot=40,H=16,Y=V.model.dimensions.length,at=rt.displayInd,et,ct,ft;Y>1?et=(V.width-2*ot-H)/(Y-1):et=0,ct=ot,ft=ct+et*at;var yt=[],xt=V.model.maxCats,Ct=rt.categories.length,gt=8,mt=rt.count,vt=V.height-gt*(xt-1),At,Ot,It,St,Bt,re=(xt-Ct)*gt/2,Yt=rt.categories.map(function(he){return{displayInd:he.displayInd,categoryInd:he.categoryInd}});for(Yt.sort(function(he,Zt){return he.displayInd-Zt.displayInd}),Bt=0;Bt<Ct;Bt++)St=Yt[Bt].categoryInd,Ot=rt.categories[St],mt>0?At=Ot.count/mt*vt:At=0,It={key:Ot.valueInds[0],model:Ot,width:H,height:At,y:Ot.dragY!==null?Ot.dragY:re,bands:[],parcatsViewModel:V},re=re+At+gt,yt.push(It);return{key:rt.dimensionInd,x:rt.dragX!==null?rt.dragX:ft,y:0,width:H,model:rt,categories:yt,parcatsViewModel:V,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},60268:function(Q,U,t){var M=t(51036);Q.exports=function(E,i,C,T){var v=E._fullLayout,d=v._paper,r=v._size;M(E,d,i,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},C,T)}},82296:function(Q,U,t){var M=t(49084),E=t(94724),i=t(25376),C=t(86968).u,T=t(92880).extendFlat,v=t(31780).templatedArray;Q.exports={domain:C({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:i({editType:"plot"}),tickfont:i({editType:"plot"}),rangefont:i({editType:"plot"}),dimensions:v("dimension",{label:{valType:"string",editType:"plot"},tickvals:T({},E.tickvals,{editType:"plot"}),ticktext:T({},E.ticktext,{editType:"plot"}),tickformat:T({},E.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:T({editType:"calc"},M("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(Q,U,t){var M=t(30140),E=t(33428),i=t(71688).keyFun,C=t(71688).repeat,T=t(3400).sorterAsc,v=t(3400).strTranslate,d=M.bar.snapRatio;function r(N,G){return N*(1-d)+G*d}var e=M.bar.snapClose;function l(N,G){return N*(1-e)+G*e}function n(N,G,X,J){if(s(X,J))return X;var it=N?-1:1,nt=0,q=G.length-1;if(it<0){var Z=nt;nt=q,q=Z}for(var $=G[nt],V=$,rt=nt;it*rt<it*q;rt+=it){var ot=rt+it,H=G[ot];if(it*X<it*l($,H))return r($,V);if(it*X<it*H||ot===q)return r(H,$);V=$,$=H}}function s(N,G){for(var X=0;X<G.length;X++)if(N>=G[X][0]&&N<=G[X][1])return!0;return!1}function o(N){N.attr("x",-M.bar.captureWidth/2).attr("width",M.bar.captureWidth)}function p(N){N.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function b(N){if(!N.brush.filterSpecified)return"0,"+N.height;for(var G=h(N.brush.filter.getConsolidated(),N.height),X=[0],J,it,nt,q=G.length?G[0][0]:null,Z=0;Z<G.length;Z++)J=G[Z],it=J[1]-J[0],X.push(q),X.push(it),nt=Z+1,nt<G.length&&(q=G[nt][0]-J[1]);return X.push(N.height),X}function h(N,G){return N.map(function(X){return X.map(function(J){return Math.max(0,J*G)}).sort(T)})}function _(N,G){var X=M.bar.handleHeight;if(!(G>N[1]+X||G<N[0]-X))return G>=.9*N[1]+.1*N[0]?"n":G<=.9*N[0]+.1*N[1]?"s":"ns"}function a(){E.select(document.body).style("cursor",null)}function c(N){N.attr("stroke-dasharray",b)}function f(N,G){var X=E.select(N).selectAll(".highlight, .highlight-shadow"),J=G?X.transition().duration(M.bar.snapDuration).each("end",G):X;c(J)}function x(N,G){var X=N.brush,J=X.filterSpecified,it=NaN,nt={},q;if(J){var Z=N.height,$=X.filter.getConsolidated(),V=h($,Z),rt=NaN,ot=NaN,H=NaN;for(q=0;q<=V.length;q++){var Y=V[q];if(Y&&Y[0]<=G&&G<=Y[1]){rt=q;break}else if(ot=q?q-1:NaN,Y&&Y[0]>G){H=q;break}}if(it=rt,isNaN(it)&&(isNaN(ot)||isNaN(H)?it=isNaN(ot)?H:ot:it=G-V[ot][1]<V[H][0]-G?ot:H),!isNaN(it)){var at=V[it],et=_(at,G);et&&(nt.interval=$[it],nt.intervalPix=at,nt.region=et)}}if(N.ordinal&&!nt.region){var ct=N.unitTickvals,ft=N.unitToPaddedPx.invert(G);for(q=0;q<ct.length;q++){var yt=[ct[Math.max(q-1,0)]*.25+ct[q]*.75,ct[Math.min(q+1,ct.length-1)]*.25+ct[q]*.75];if(ft>=yt[0]&&ft<=yt[1]){nt.clickableOrdinalRange=yt;break}}}return nt}function k(N,G){E.event.sourceEvent.stopPropagation();var X=G.height-E.mouse(N)[1]-2*M.verticalPadding,J=G.unitToPaddedPx.invert(X),it=G.brush,nt=x(G,X),q=nt.interval,Z=it.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar=nt.region==="ns",Z.grabbingBar){var $=q.map(G.unitToPaddedPx);Z.grabPoint=X-$[0]-M.verticalPadding,Z.barLength=$[1]-$[0]}Z.clickableOrdinalRange=nt.clickableOrdinalRange,Z.stayingIntervals=G.multiselect&&it.filterSpecified?it.filter.getConsolidated():[],q&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(V){return V[0]!==q[0]&&V[1]!==q[1]})),Z.startExtent=nt.region?q[nt.region==="s"?1:0]:J,G.parent.inBrushDrag=!0,Z.brushStartCallback()}function y(N,G){E.event.sourceEvent.stopPropagation();var X=G.height-E.mouse(N)[1]-2*M.verticalPadding,J=G.brush.svgBrush;J.wasDragged=!0,J._dragging=!0,J.grabbingBar?J.newExtent=[X-J.grabPoint,X+J.barLength-J.grabPoint].map(G.unitToPaddedPx.invert):J.newExtent=[J.startExtent,G.unitToPaddedPx.invert(X)].sort(T),G.brush.filterSpecified=!0,J.extent=J.stayingIntervals.concat([J.newExtent]),J.brushCallback(G),f(N.parentNode)}function A(N,G){var X=G.brush,J=X.filter,it=X.svgBrush;it._dragging||(L(N,G),y(N,G),G.brush.svgBrush.wasDragged=!1),it._dragging=!1;var nt=E.event;nt.sourceEvent.stopPropagation();var q=it.grabbingBar;if(it.grabbingBar=!1,it.grabLocation=void 0,G.parent.inBrushDrag=!1,a(),!it.wasDragged){it.wasDragged=void 0,it.clickableOrdinalRange?X.filterSpecified&&G.multiselect?it.extent.push(it.clickableOrdinalRange):(it.extent=[it.clickableOrdinalRange],X.filterSpecified=!0):q?(it.extent=it.stayingIntervals,it.extent.length===0&&O(X)):O(X),it.brushCallback(G),f(N.parentNode),it.brushEndCallback(X.filterSpecified?J.getConsolidated():[]);return}var Z=function(){J.set(J.getConsolidated())};if(G.ordinal){var $=G.unitTickvals;$[$.length-1]<$[0]&&$.reverse(),it.newExtent=[n(0,$,it.newExtent[0],it.stayingIntervals),n(1,$,it.newExtent[1],it.stayingIntervals)];var V=it.newExtent[1]>it.newExtent[0];it.extent=it.stayingIntervals.concat(V?[it.newExtent]:[]),it.extent.length||O(X),it.brushCallback(G),V?f(N.parentNode,Z):(Z(),f(N.parentNode))}else Z();it.brushEndCallback(X.filterSpecified?J.getConsolidated():[])}function L(N,G){var X=G.height-E.mouse(N)[1]-2*M.verticalPadding,J=x(G,X),it="crosshair";J.clickableOrdinalRange?it="pointer":J.region&&(it=J.region+"-resize"),E.select(document.body).style("cursor",it)}function u(N){N.on("mousemove",function(G){E.event.preventDefault(),G.parent.inBrushDrag||L(this,G)}).on("mouseleave",function(G){G.parent.inBrushDrag||a()}).call(E.behavior.drag().on("dragstart",function(G){k(this,G)}).on("drag",function(G){y(this,G)}).on("dragend",function(G){A(this,G)}))}function m(N,G){return N[0]-G[0]}function S(N,G,X){var J=X._context.staticPlot,it=N.selectAll(".background").data(C);it.enter().append("rect").classed("background",!0).call(o).call(p).style("pointer-events",J?"none":"auto").attr("transform",v(0,M.verticalPadding)),it.call(u).attr("height",function(Z){return Z.height-M.verticalPadding});var nt=N.selectAll(".highlight-shadow").data(C);nt.enter().append("line").classed("highlight-shadow",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width+M.bar.strokeWidth).attr("stroke",G).attr("opacity",M.bar.strokeOpacity).attr("stroke-linecap","butt"),nt.attr("y1",function(Z){return Z.height}).call(c);var q=N.selectAll(".highlight").data(C);q.enter().append("line").classed("highlight",!0).attr("x",-M.bar.width/2).attr("stroke-width",M.bar.width-M.bar.strokeWidth).attr("stroke",M.bar.fillColor).attr("opacity",M.bar.fillOpacity).attr("stroke-linecap","butt"),q.attr("y1",function(Z){return Z.height}).call(c)}function w(N,G,X){var J=N.selectAll("."+M.cn.axisBrush).data(C,i);J.enter().append("g").classed(M.cn.axisBrush,!0),S(J,G,X)}function I(N){return N.svgBrush.extent.map(function(G){return G.slice()})}function O(N){N.filterSpecified=!1,N.svgBrush.extent=[[-1/0,1/0]]}function D(N){return function(G){var X=G.brush,J=I(X),it=J.slice();X.filter.set(it),N()}}function P(N){for(var G=N.slice(),X=[],J,it=G.shift();it;){for(J=it.slice();(it=G.shift())&&it[0]<=J[1];)J[1]=Math.max(J[1],it[1]);X.push(J)}return X.length===1&&X[0][0]>X[0][1]&&(X=[]),X}function F(){var N=[],G,X;return{set:function(J){N=J.map(function(it){return it.slice().sort(T)}).sort(m),N.length===1&&N[0][0]===-1/0&&N[0][1]===1/0&&(N=[[0,-1]]),G=P(N),X=N.reduce(function(it,nt){return[Math.min(it[0],nt[0]),Math.max(it[1],nt[1])]},[1/0,-1/0])},get:function(){return N.slice()},getConsolidated:function(){return G},getBounds:function(){return X}}}function R(N,G,X,J,it,nt){var q=F();return q.set(X),{filter:q,filterSpecified:G,svgBrush:{extent:[],brushStartCallback:J,brushCallback:D(it),brushEndCallback:nt}}}function B(N,G){if(Array.isArray(N[0])?(N=N.map(function(J){return J.sort(T)}),G.multiselect?N=P(N.sort(m)):N=[N[0]]):N=[N.sort(T)],G.tickvals){var X=G.tickvals.slice().sort(T);if(N=N.map(function(J){var it=[n(0,X,J[0],[]),n(1,X,J[1],[])];if(it[1]>it[0])return it}).filter(function(J){return J}),!N.length)return}return N.length>1?N:N[0]}Q.exports={makeBrush:R,ensureAxisBrush:w,cleanRanges:B}},61664:function(Q,U,t){Q.exports={attributes:t(82296),supplyDefaults:t(60664),calc:t(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(Q,U,t){var M=t(33428),E=t(84888)._M,i=t(24196),C=t(9616);U.name="parcoords",U.plot=function(T){var v=E(T.calcdata,"parcoords")[0];v.length&&i(T,v)},U.clean=function(T,v,d,r){var e=r._has&&r._has("parcoords"),l=v._has&&v._has("parcoords");e&&!l&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},U.toSVG=function(T){var v=T._fullLayout._glimages,d=M.select(T).selectAll(".svg-container"),r=d.filter(function(l,n){return n===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function e(){var l=this,n=l.toDataURL("image/png"),s=v.append("svg:image");s.attr({xmlns:C.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:l.style.width,height:l.style.height})}r.each(e),window.setTimeout(function(){M.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(Q,U,t){var M=t(3400).isArrayOrTypedArray,E=t(8932),i=t(71688).wrap;Q.exports=function(T,v){var d,r;return E.hasColorscale(v,"line")&&M(v.line.color)?(d=v.line.color,r=E.extractOpts(v.line).colorscale,E.calc(T,v,{vals:d,containerStr:"line",cLetter:"c"})):(d=C(v._length),r=[[0,v.line.color],[1,v.line.color]]),i({lineColor:d,cscale:r})};function C(T){for(var v=new Array(T),d=0;d<T;d++)v[d]=.5;return v}},30140:function(Q){Q.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(Q,U,t){var M=t(3400),E=t(94288).hasColorscale,i=t(27260),C=t(86968).Q,T=t(51272),v=t(54460),d=t(82296),r=t(71864),e=t(30140).maxDimensionCount,l=t(26284);function n(o,p,b,h,_){var a=_("line.color",b);if(E(o,"line")&&M.isArrayOrTypedArray(a)){if(a.length)return _("line.colorscale"),i(o,p,h,_,{prefix:"line.",cLetter:"c"}),a.length;p.line.color=b}return 1/0}function s(o,p,b,h){function _(k,y){return M.coerce(o,p,d.dimensions,k,y)}var a=_("values"),c=_("visible");if(a&&a.length||(c=p.visible=!1),c){_("label"),_("tickvals"),_("ticktext"),_("tickformat");var f=_("range");p._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:f},v.setConvert(p._ax,h.layout),_("multiselect");var x=_("constraintrange");x&&(p.constraintrange=r.cleanRanges(x,p))}}Q.exports=function(o,p,b,h){function _(k,y){return M.coerce(o,p,d,k,y)}var a=o.dimensions;Array.isArray(a)&&a.length>e&&(M.log("parcoords traces support up to "+e+" dimensions at the moment"),a.splice(e));var c=T(o,p,{name:"dimensions",layout:h,handleItemDefaults:s}),f=n(o,p,b,h,_);C(p,h,_),(!Array.isArray(c)||!c.length)&&(p.visible=!1),l(p,c,"values",f);var x={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};M.coerceFont(_,"labelfont",x),M.coerceFont(_,"tickfont",x),M.coerceFont(_,"rangefont",x),_("labelangle"),_("labelside"),_("unselected.line.color"),_("unselected.line.opacity")}},95724:function(Q,U,t){var M=t(3400).isTypedArray;U.convertTypedArray=function(E){return M(E)?Array.prototype.slice.call(E):E},U.isOrdinal=function(E){return!!E.tickvals},U.isVisible=function(E){return E.visible||!("visible"in E)}},29928:function(Q,U,t){var M=t(61664);M.plot=t(24196),Q.exports=M},51352:function(Q,U,t){var M=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),E=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),i=t(30140).maxDimensionCount,C=t(3400),T=1e-6,v=2048,d=new Uint8Array(4),r=new Uint8Array(4),e={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function l(A){A.read({x:0,y:0,width:1,height:1,data:d})}function n(A,L,u,m,S){var w=A._gl;w.enable(w.SCISSOR_TEST),w.scissor(L,u,m,S),A.clear({color:[0,0,0,0],depth:1})}function s(A,L,u,m,S,w){var I=w.key;function O(D){var P=Math.min(m,S-D*m);D===0&&(window.cancelAnimationFrame(u.currentRafs[I]),delete u.currentRafs[I],n(A,w.scissorX,w.scissorY,w.scissorWidth,w.viewBoxSize[1])),!u.clearOnly&&(w.count=2*P,w.offset=2*D*m,L(w),D*m+P<S&&(u.currentRafs[I]=window.requestAnimationFrame(function(){O(D+1)})),u.drawCompleted=!1)}u.drawCompleted||(l(A),u.drawCompleted=!0),O(0)}function o(A){return Math.max(T,Math.min(1-T,A))}function p(A,L){for(var u=new Array(256),m=0;m<256;m++)u[m]=A(m/255).concat(L);return u}function b(A,L){return(A>>>8*L)%256/255}function h(A,L,u){for(var m=new Array(A*(i+4)),S=0,w=0;w<A;w++){for(var I=0;I<i;I++)m[S++]=I<L.length?L[I].paddedUnitValues[w]:.5;m[S++]=b(w,2),m[S++]=b(w,1),m[S++]=b(w,0),m[S++]=o(u[w])}return m}function _(A,L,u){for(var m=new Array(L*8),S=0,w=0;w<L;w++)for(var I=0;I<2;I++)for(var O=0;O<4;O++){var D=A*4+O,P=u[w*64+D];D===63&&I===0&&(P*=-1),m[S++]=P}return m}function a(A){var L="0"+A;return L.substr(L.length-2)}function c(A){return A<i?"p"+a(A+1)+"_"+a(A+4):"colors"}function f(A,L,u){for(var m=0;m<=i;m+=4)A[c(m)](_(m/4,L,u))}function x(A){for(var L={},u=0;u<=i;u+=4)L[c(u)]=A.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function k(A,L,u,m,S,w,I,O,D,P,F,R,B,N){for(var G=[[],[]],X=0;X<64;X++)G[0][X]=X===S?1:0,G[1][X]=X===w?1:0;I*=N,O*=N,D*=N,P*=N;var J=A.lines.canvasOverdrag*N,it=A.domain,nt=A.canvasWidth*N,q=A.canvasHeight*N,Z=A.pad.l*N,$=A.pad.b*N,V=A.layoutHeight*N,rt=A.layoutWidth*N,ot=A.deselectedLines.color,H=A.deselectedLines.opacity,Y=C.extendFlat({key:F,resolution:[nt,q],viewBoxPos:[I+J,O],viewBoxSize:[D,P],i0:S,i1:w,dim0A:G[0].slice(0,16),dim0B:G[0].slice(16,32),dim0C:G[0].slice(32,48),dim0D:G[0].slice(48,64),dim1A:G[1].slice(0,16),dim1B:G[1].slice(16,32),dim1C:G[1].slice(32,48),dim1D:G[1].slice(48,64),drwLayer:R,contextColor:[ot[0]/255,ot[1]/255,ot[2]/255,H!=="auto"?ot[3]*H:Math.max(1/255,Math.pow(1/A.lines.color.length,1/3))],scissorX:(m===L?0:I+J)+(Z-J)+rt*it.x[0],scissorWidth:(m===u?nt-I+J:D+.5)+(m===L?I+J:0),scissorY:O+$+V*it.y[0],scissorHeight:P,viewportX:Z-J+rt*it.x[0],viewportY:$+V*it.y[0],viewportWidth:nt,viewportHeight:q},B);return Y}function y(A){var L=v-1,u=Math.max(0,Math.floor(A[0]*L),0),m=Math.min(L,Math.ceil(A[1]*L),L);return[Math.min(u,m),Math.max(u,m)]}Q.exports=function(A,L){var u=L.context,m=L.pick,S=L.regl,w=S._gl,I=w.getParameter(w.ALIASED_LINE_WIDTH_RANGE),O=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},P,F,R,B,N=x(S),G,X=S.texture(e),J=[];nt(L);var it=S({profile:!1,blend:{enable:u,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!u,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:S.prop("scissorX"),y:S.prop("scissorY"),width:S.prop("scissorWidth"),height:S.prop("scissorHeight")}},viewport:{x:S.prop("viewportX"),y:S.prop("viewportY"),width:S.prop("viewportWidth"),height:S.prop("viewportHeight")},dither:!1,vert:M,frag:E,primitive:"lines",lineWidth:O,attributes:N,uniforms:{resolution:S.prop("resolution"),viewBoxPos:S.prop("viewBoxPos"),viewBoxSize:S.prop("viewBoxSize"),dim0A:S.prop("dim0A"),dim1A:S.prop("dim1A"),dim0B:S.prop("dim0B"),dim1B:S.prop("dim1B"),dim0C:S.prop("dim0C"),dim1C:S.prop("dim1C"),dim0D:S.prop("dim0D"),dim1D:S.prop("dim1D"),loA:S.prop("loA"),hiA:S.prop("hiA"),loB:S.prop("loB"),hiB:S.prop("hiB"),loC:S.prop("loC"),hiC:S.prop("hiC"),loD:S.prop("loD"),hiD:S.prop("hiD"),palette:X,contextColor:S.prop("contextColor"),maskTexture:S.prop("maskTexture"),drwLayer:S.prop("drwLayer"),maskHeight:S.prop("maskHeight")},offset:S.prop("offset"),count:S.prop("count")});function nt(ot){P=ot.model,F=ot.viewModel,R=F.dimensions.slice(),B=R[0]?R[0].values.length:0;var H=P.lines,Y=m?H.color.map(function(et,ct){return ct/H.color.length}):H.color,at=h(B,R,Y);f(N,B,at),!u&&!m&&(X=S.texture(C.extendFlat({data:p(P.unitToColor,255)},e)))}function q(ot){var H,Y,at,et=[[],[]];for(at=0;at<64;at++){var ct=!ot&&at<R.length?R[at].brush.filter.getBounds():[-1/0,1/0];et[0][at]=ct[0],et[1][at]=ct[1]}var ft=v*8,yt=new Array(ft);for(H=0;H<ft;H++)yt[H]=255;if(!ot)for(H=0;H<R.length;H++){var xt=H%8,Ct=(H-xt)/8,gt=Math.pow(2,xt),mt=R[H],vt=mt.brush.filter.get();if(!(vt.length<2)){var At=y(vt[0])[1];for(Y=1;Y<vt.length;Y++){var Ot=y(vt[Y]);for(at=At+1;at<Ot[0];at++)yt[at*8+Ct]&=~gt;At=Math.max(At,Ot[1])}}}var It={shape:[8,v],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:yt};return G?G(It):G=S.texture(It),{maskTexture:G,maskHeight:v,loA:et[0].slice(0,16),loB:et[0].slice(16,32),loC:et[0].slice(32,48),loD:et[0].slice(48,64),hiA:et[1].slice(0,16),hiB:et[1].slice(16,32),hiC:et[1].slice(32,48),hiD:et[1].slice(48,64)}}function Z(ot,H,Y){var at=ot.length,et,ct,ft,yt=1/0,xt=-1/0;for(et=0;et<at;et++)ot[et].dim0.canvasX<yt&&(yt=ot[et].dim0.canvasX,ct=et),ot[et].dim1.canvasX>xt&&(xt=ot[et].dim1.canvasX,ft=et);at===0&&n(S,0,0,P.canvasWidth,P.canvasHeight);var Ct=q(u);for(et=0;et<at;et++){var gt=ot[et],mt=gt.dim0.crossfilterDimensionIndex,vt=gt.dim1.crossfilterDimensionIndex,At=gt.canvasX,Ot=gt.canvasY,It=At+gt.panelSizeX,St=gt.plotGlPixelRatio;if(H||!J[mt]||J[mt][0]!==At||J[mt][1]!==It){J[mt]=[At,It];var Bt=k(P,ct,ft,et,mt,vt,At,Ot,gt.panelSizeX,gt.panelSizeY,gt.dim0.crossfilterDimensionIndex,u?0:m?2:1,Ct,St);D.clearOnly=Y;var re=H?P.lines.blockLineCount:B;s(S,it,D,re,B,Bt)}}}function $(ot,H){return S.read({x:ot,y:H,width:1,height:1,data:r}),r}function V(ot,H,Y,at){var et=new Uint8Array(4*Y*at);return S.read({x:ot,y:H,width:Y,height:at,data:et}),et}function rt(){A.style["pointer-events"]="none",X.destroy(),G&&G.destroy();for(var ot in N)N[ot].destroy()}return{render:Z,readPixel:$,readPixels:V,destroy:rt,update:nt}}},26284:function(Q){Q.exports=function(U,t,M,E){E||(E=1/0);var i,C;for(i=0;i<t.length;i++)C=t[i],C.visible&&(E=Math.min(E,C[M].length));for(E===1/0&&(E=0),U._length=E,i=0;i<t.length;i++)C=t[i],C.visible&&(C._length=E);return E}},36336:function(Q,U,t){var M=t(33428),E=t(3400),i=E.isArrayOrTypedArray,C=E.numberFormat,T=t(96824),v=t(54460),d=E.strRotate,r=E.strTranslate,e=t(72736),l=t(43616),n=t(8932),s=t(71688),o=s.keyFun,p=s.repeat,b=s.unwrap,h=t(95724),_=t(30140),a=t(71864),c=t(51352);function f(J,it,nt){return E.aggNums(J,null,it,nt)}function x(J,it){return y(f(Math.min,J,it),f(Math.max,J,it))}function k(J){var it=J.range;return it?y(it[0],it[1]):x(J.values,J._length)}function y(J,it){return(isNaN(J)||!isFinite(J))&&(J=0),(isNaN(it)||!isFinite(it))&&(it=0),J===it&&(J===0?(J-=1,it+=1):(J*=.9,it*=1.1)),[J,it]}function A(J,it){return it?function(nt,q){var Z=it[q];return Z??J(nt)}:J}function L(J,it,nt,q,Z){var $=k(nt);return q?M.scale.ordinal().domain(q.map(A(C(nt.tickformat),Z))).range(q.map(function(V){var rt=(V-$[0])/($[1]-$[0]);return J-it+rt*(2*it-J)})):M.scale.linear().domain($).range([J-it,it])}function u(J,it){return M.scale.linear().range([it,J-it])}function m(J,it){return M.scale.linear().domain(k(J)).range([it,1-it])}function S(J){if(J.tickvals){var it=k(J);return M.scale.ordinal().domain(J.tickvals).range(J.tickvals.map(function(nt){return(nt-it[0])/(it[1]-it[0])}))}}function w(J){var it=J.map(function($){return $[0]}),nt=J.map(function($){var V=T($[1]);return M.rgb("rgb("+V[0]+","+V[1]+","+V[2]+")")}),q=function($){return function(V){return V[$]}},Z="rgb".split("").map(function($){return M.scale.linear().clamp(!0).domain(it).range(nt.map(q($)))});return function($){return Z.map(function(V){return V($)})}}function I(J){return J.dimensions.some(function(it){return it.brush.filterSpecified})}function O(J,it,nt){var q=b(it),Z=q.trace,$=h.convertTypedArray(q.lineColor),V=Z.line,rt={color:T(Z.unselected.line.color),opacity:Z.unselected.line.opacity},ot=n.extractOpts(V),H=ot.reversescale?n.flipScale(q.cscale):q.cscale,Y=Z.domain,at=Z.dimensions,et=J.width,ct=Z.labelangle,ft=Z.labelside,yt=Z.labelfont,xt=Z.tickfont,Ct=Z.rangefont,gt=E.extendDeepNoArrays({},V,{color:$.map(M.scale.linear().domain(k({values:$,range:[ot.min,ot.max],_length:Z._length}))),blockLineCount:_.blockLineCount,canvasOverdrag:_.overdrag*_.canvasPixelRatio}),mt=Math.floor(et*(Y.x[1]-Y.x[0])),vt=Math.floor(J.height*(Y.y[1]-Y.y[0])),At=J.margin||{l:80,r:80,t:100,b:80},Ot=mt,It=vt;return{key:nt,colCount:at.filter(h.isVisible).length,dimensions:at,tickDistance:_.tickDistance,unitToColor:w(H),lines:gt,deselectedLines:rt,labelAngle:ct,labelSide:ft,labelFont:yt,tickFont:xt,rangeFont:Ct,layoutWidth:et,layoutHeight:J.height,domain:Y,translateX:Y.x[0]*et,translateY:J.height-Y.y[1]*J.height,pad:At,canvasWidth:Ot*_.canvasPixelRatio+2*gt.canvasOverdrag,canvasHeight:It*_.canvasPixelRatio,width:Ot,height:It,canvasPixelRatio:_.canvasPixelRatio}}function D(J,it,nt){var q=nt.width,Z=nt.height,$=nt.dimensions,V=nt.canvasPixelRatio,rt=function(et){return q*et/Math.max(1,nt.colCount-1)},ot=_.verticalPadding/Z,H=u(Z,_.verticalPadding),Y={key:nt.key,xScale:rt,model:nt,inBrushDrag:!1},at={};return Y.dimensions=$.filter(h.isVisible).map(function(et,ct){var ft=m(et,ot),yt=at[et.label];at[et.label]=(yt||0)+1;var xt=et.label+(yt?"__"+yt:""),Ct=et.constraintrange,gt=Ct&&Ct.length;gt&&!i(Ct[0])&&(Ct=[Ct]);var mt=gt?Ct.map(function(Zt){return Zt.map(ft)}):[[-1/0,1/0]],vt=function(){var Zt=Y;Zt.focusLayer&&Zt.focusLayer.render(Zt.panels,!0);var ae=I(Zt);!J.contextShown()&&ae?(Zt.contextLayer&&Zt.contextLayer.render(Zt.panels,!0),J.contextShown(!0)):J.contextShown()&&!ae&&(Zt.contextLayer&&Zt.contextLayer.render(Zt.panels,!0,!0),J.contextShown(!1))},At=et.values;At.length>et._length&&(At=At.slice(0,et._length));var Ot=et.tickvals,It;function St(Zt,ae){return{val:Zt,text:It[ae]}}function Bt(Zt,ae){return Zt.val-ae.val}if(i(Ot)&&Ot.length){E.isTypedArray(Ot)&&(Ot=Array.from(Ot)),It=et.ticktext,!i(It)||!It.length?It=Ot.map(C(et.tickformat)):It.length>Ot.length?It=It.slice(0,Ot.length):Ot.length>It.length&&(Ot=Ot.slice(0,It.length));for(var re=1;re<Ot.length;re++)if(Ot[re]<Ot[re-1]){for(var Yt=Ot.map(St).sort(Bt),he=0;he<Ot.length;he++)Ot[he]=Yt[he].val,It[he]=Yt[he].text;break}}else Ot=void 0;return At=h.convertTypedArray(At),{key:xt,label:et.label,tickFormat:et.tickformat,tickvals:Ot,ticktext:It,ordinal:h.isOrdinal(et),multiselect:et.multiselect,xIndex:ct,crossfilterDimensionIndex:ct,visibleIndex:et._index,height:Z,values:At,paddedUnitValues:At.map(ft),unitTickvals:Ot&&Ot.map(ft),xScale:rt,x:rt(ct),canvasX:rt(ct)*V,unitToPaddedPx:H,domainScale:L(Z,_.verticalPadding,et,Ot,It),ordinalScale:S(et),parent:Y,model:nt,brush:a.makeBrush(J,gt,mt,function(){J.linePickActive(!1)},vt,function(Zt){if(Y.focusLayer.render(Y.panels,!0),Y.pickLayer&&Y.pickLayer.render(Y.panels,!0),J.linePickActive(!0),it&&it.filterChanged){var ae=ft.invert,oe=Zt.map(function(ce){return ce.map(ae).sort(E.sorterAsc)}).sort(function(ce,ue){return ce[0]-ue[0]});it.filterChanged(Y.key,et._index,oe)}})}}),Y}function P(J){J.classed(_.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function F(){var J=!0,it=!1;return{linePickActive:function(nt){return arguments.length?J=!!nt:J},contextShown:function(nt){return arguments.length?it=!!nt:it}}}function R(J,it){var nt=it==="top"?1:-1,q=J*Math.PI/180,Z=Math.sin(q),$=Math.cos(q);return{dir:nt,dx:Z,dy:$,degrees:J}}function B(J,it,nt){for(var q=it.panels||(it.panels=[]),Z=J.data(),$=0;$<Z.length-1;$++){var V=q[$]||(q[$]={}),rt=Z[$],ot=Z[$+1];V.dim0=rt,V.dim1=ot,V.canvasX=rt.canvasX,V.panelSizeX=ot.canvasX-rt.canvasX,V.panelSizeY=it.model.canvasHeight,V.y=0,V.canvasY=0,V.plotGlPixelRatio=nt}}function N(J){for(var it=0;it<J.length;it++)for(var nt=0;nt<J[it].length;nt++)for(var q=J[it][nt].trace,Z=q.dimensions,$=0;$<Z.length;$++){var V=Z[$].values,rt=Z[$]._ax;rt&&(rt.range?rt.range=y(rt.range[0],rt.range[1]):rt.range=x(V,q._length),rt.dtick||(rt.dtick=.01*(Math.abs(rt.range[1]-rt.range[0])||1)),rt.tickformat=Z[$].tickformat,v.calcTicks(rt),rt.cleanRange())}}function G(J,it){return v.tickText(J._ax,it,!1).text}function X(J,it){if(J.ordinal)return"";var nt=J.domainScale.domain(),q=nt[it?nt.length-1:0];return G(J.model.dimensions[J.visibleIndex],q)}Q.exports=function(J,it,nt,q){var Z=J._context.staticPlot,$=J._fullLayout,V=$._toppaper,rt=$._glcontainer,ot=J._context.plotGlPixelRatio,H=J._fullLayout.paper_bgcolor;N(it);var Y=F(),at=it.filter(function(Yt){return b(Yt).trace.visible}).map(O.bind(0,nt)).map(D.bind(0,Y,q));rt.each(function(Yt,he){return E.extendFlat(Yt,at[he])});var et=rt.selectAll(".gl-canvas").each(function(Yt){Yt.viewModel=at[0],Yt.viewModel.plotGlPixelRatio=ot,Yt.viewModel.paperColor=H,Yt.model=Yt.viewModel?Yt.viewModel.model:null}),ct=null,ft=et.filter(function(Yt){return Yt.pick});ft.style("pointer-events",Z?"none":"auto").on("mousemove",function(Yt){if(Y.linePickActive()&&Yt.lineLayer&&q&&q.hover){var he=M.event,Zt=this.width,ae=this.height,oe=M.mouse(this),ce=oe[0],ue=oe[1];if(ce<0||ue<0||ce>=Zt||ue>=ae)return;var ye=Yt.lineLayer.readPixel(ce,ae-1-ue),Tt=ye[3]!==0,Ft=Tt?ye[2]+256*(ye[1]+256*ye[0]):null,$t={x:ce,y:ue,clientX:he.clientX,clientY:he.clientY,dataIndex:Yt.model.key,curveNumber:Ft};Ft!==ct&&(Tt?q.hover($t):q.unhover&&q.unhover($t),ct=Ft)}}),et.style("opacity",function(Yt){return Yt.pick?0:1}),V.style("background","rgba(255, 255, 255, 0)");var yt=V.selectAll("."+_.cn.parcoords).data(at,o);yt.exit().remove(),yt.enter().append("g").classed(_.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),yt.attr("transform",function(Yt){return r(Yt.model.translateX,Yt.model.translateY)});var xt=yt.selectAll("."+_.cn.parcoordsControlView).data(p,o);xt.enter().append("g").classed(_.cn.parcoordsControlView,!0),xt.attr("transform",function(Yt){return r(Yt.model.pad.l,Yt.model.pad.t)});var Ct=xt.selectAll("."+_.cn.yAxis).data(function(Yt){return Yt.dimensions},o);Ct.enter().append("g").classed(_.cn.yAxis,!0),xt.each(function(Yt){B(Ct,Yt,ot)}),et.each(function(Yt){if(Yt.viewModel){!Yt.lineLayer||q?Yt.lineLayer=c(this,Yt):Yt.lineLayer.update(Yt),(Yt.key||Yt.key===0)&&(Yt.viewModel[Yt.key]=Yt.lineLayer);var he=!Yt.context||q;Yt.lineLayer.render(Yt.viewModel.panels,he)}}),Ct.attr("transform",function(Yt){return r(Yt.xScale(Yt.xIndex),0)}),Ct.call(M.behavior.drag().origin(function(Yt){return Yt}).on("drag",function(Yt){var he=Yt.parent;Y.linePickActive(!1),Yt.x=Math.max(-_.overdrag,Math.min(Yt.model.width+_.overdrag,M.event.x)),Yt.canvasX=Yt.x*Yt.model.canvasPixelRatio,Ct.sort(function(Zt,ae){return Zt.x-ae.x}).each(function(Zt,ae){Zt.xIndex=ae,Zt.x=Yt===Zt?Zt.x:Zt.xScale(Zt.xIndex),Zt.canvasX=Zt.x*Zt.model.canvasPixelRatio}),B(Ct,he,ot),Ct.filter(function(Zt){return Math.abs(Yt.xIndex-Zt.xIndex)!==0}).attr("transform",function(Zt){return r(Zt.xScale(Zt.xIndex),0)}),M.select(this).attr("transform",r(Yt.x,0)),Ct.each(function(Zt,ae,oe){oe===Yt.parent.key&&(he.dimensions[ae]=Zt)}),he.contextLayer&&he.contextLayer.render(he.panels,!1,!I(he)),he.focusLayer.render&&he.focusLayer.render(he.panels)}).on("dragend",function(Yt){var he=Yt.parent;Yt.x=Yt.xScale(Yt.xIndex),Yt.canvasX=Yt.x*Yt.model.canvasPixelRatio,B(Ct,he,ot),M.select(this).attr("transform",function(Zt){return r(Zt.x,0)}),he.contextLayer&&he.contextLayer.render(he.panels,!1,!I(he)),he.focusLayer&&he.focusLayer.render(he.panels),he.pickLayer&&he.pickLayer.render(he.panels,!0),Y.linePickActive(!0),q&&q.axesMoved&&q.axesMoved(he.key,he.dimensions.map(function(Zt){return Zt.crossfilterDimensionIndex}))})),Ct.exit().remove();var gt=Ct.selectAll("."+_.cn.axisOverlays).data(p,o);gt.enter().append("g").classed(_.cn.axisOverlays,!0),gt.selectAll("."+_.cn.axis).remove();var mt=gt.selectAll("."+_.cn.axis).data(p,o);mt.enter().append("g").classed(_.cn.axis,!0),mt.each(function(Yt){var he=Yt.model.height/Yt.model.tickDistance,Zt=Yt.domainScale,ae=Zt.domain();M.select(this).call(M.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(he,Yt.tickFormat).tickValues(Yt.ordinal?ae:null).tickFormat(function(oe){return h.isOrdinal(Yt)?oe:G(Yt.model.dimensions[Yt.visibleIndex],oe)}).scale(Zt)),l.font(mt.selectAll("text"),Yt.model.tickFont)}),mt.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),mt.selectAll("text").style("text-shadow",e.makeTextShadow(H)).style("cursor","default");var vt=gt.selectAll("."+_.cn.axisHeading).data(p,o);vt.enter().append("g").classed(_.cn.axisHeading,!0);var At=vt.selectAll("."+_.cn.axisTitle).data(p,o);At.enter().append("text").classed(_.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",Z?"none":"auto"),At.text(function(Yt){return Yt.label}).each(function(Yt){var he=M.select(this);l.font(he,Yt.model.labelFont),e.convertToTspans(he,J)}).attr("transform",function(Yt){var he=R(Yt.model.labelAngle,Yt.model.labelSide),Zt=_.axisTitleOffset;return(he.dir>0?"":r(0,2*Zt+Yt.model.height))+d(he.degrees)+r(-Zt*he.dx,-Zt*he.dy)}).attr("text-anchor",function(Yt){var he=R(Yt.model.labelAngle,Yt.model.labelSide),Zt=Math.abs(he.dx),ae=Math.abs(he.dy);return 2*Zt>ae?he.dir*he.dx<0?"start":"end":"middle"});var Ot=gt.selectAll("."+_.cn.axisExtent).data(p,o);Ot.enter().append("g").classed(_.cn.axisExtent,!0);var It=Ot.selectAll("."+_.cn.axisExtentTop).data(p,o);It.enter().append("g").classed(_.cn.axisExtentTop,!0),It.attr("transform",r(0,-_.axisExtentOffset));var St=It.selectAll("."+_.cn.axisExtentTopText).data(p,o);St.enter().append("text").classed(_.cn.axisExtentTopText,!0).call(P),St.text(function(Yt){return X(Yt,!0)}).each(function(Yt){l.font(M.select(this),Yt.model.rangeFont)});var Bt=Ot.selectAll("."+_.cn.axisExtentBottom).data(p,o);Bt.enter().append("g").classed(_.cn.axisExtentBottom,!0),Bt.attr("transform",function(Yt){return r(0,Yt.model.height+_.axisExtentOffset)});var re=Bt.selectAll("."+_.cn.axisExtentBottomText).data(p,o);re.enter().append("text").classed(_.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(P),re.text(function(Yt){return X(Yt,!1)}).each(function(Yt){l.font(M.select(this),Yt.model.rangeFont)}),a.ensureAxisBrush(gt,H,J)}},24196:function(Q,U,t){var M=t(36336),E=t(5048),i=t(95724).isVisible,C={};function T(r,e,l){var n=e.indexOf(l),s=r.indexOf(n);return s===-1&&(s+=e.length),s}function v(r,e){return function(l,n){return T(r,e,l)-T(r,e,n)}}var d=Q.exports=function(r,e){var l=r._fullLayout,n=E(r,[],C);if(n){var s={},o={},p={},b={},h=l._size;e.forEach(function(x,k){var y=x[0].trace;p[k]=y.index;var A=b[k]=y._fullInput.index;s[k]=r.data[A].dimensions,o[k]=r.data[A].dimensions.slice()});var _=function(x,k,y){var A=o[x][k],L=y.map(function(O){return O.slice()}),u="dimensions["+k+"].constraintrange",m=l._tracePreGUI[r._fullData[p[x]]._fullInput.uid];if(m[u]===void 0){var S=A.constraintrange;m[u]=S||null}var w=r._fullData[p[x]].dimensions[k];L.length?(L.length===1&&(L=L[0]),A.constraintrange=L,w.constraintrange=L.slice(),L=[L]):(delete A.constraintrange,delete w.constraintrange,L=null);var I={};I[u]=L,r.emit("plotly_restyle",[I,[b[x]]])},a=function(x){r.emit("plotly_hover",x)},c=function(x){r.emit("plotly_unhover",x)},f=function(x,k){var y=v(k,o[x].filter(i));s[x].sort(y),o[x].filter(function(A){return!i(A)}).sort(function(A){return o[x].indexOf(A)}).forEach(function(A){s[x].splice(s[x].indexOf(A),1),s[x].splice(o[x].indexOf(A),0,A)}),r.emit("plotly_restyle",[{dimensions:[s[x]]},[b[x]]])};M(r,e,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{filterChanged:_,hover:a,unhover:c,axesMoved:f})}};d.reglPrecompiled=C},74996:function(Q,U,t){var M=t(45464),E=t(86968).u,i=t(25376),C=t(22548),T=t(21776).Ks,v=t(21776).Gw,d=t(92880).extendFlat,r=t(98192).c,e=i({editType:"plot",arrayOk:!0,colorEditType:"plot"});Q.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:C.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:r,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:d({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","percent","text"]}),texttemplate:v({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:d({},e,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:d({},e,{}),outsidetextfont:d({},e,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:d({},e,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:E({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:d({},e,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(Q,U,t){var M=t(7316);U.name="pie",U.plot=function(E,i,C,T){M.plotBasePlot(U.name,E,i,C,T)},U.clean=function(E,i,C,T){M.cleanBasePlot(U.name,E,i,C,T)}},45768:function(Q,U,t){var M=t(38248),E=t(49760),i=t(76308),C={};function T(e,l){var n=[],s=e._fullLayout,o=s.hiddenlabels||[],p=l.labels,b=l.marker.colors||[],h=l.values,_=l._length,a=l._hasValues&&_,c,f;if(l.dlabel)for(p=new Array(_),c=0;c<_;c++)p[c]=String(l.label0+c*l.dlabel);var x={},k=v(s["_"+l.type+"colormap"]),y=0,A=!1;for(c=0;c<_;c++){var L,u,m;if(a){if(L=h[c],!M(L))continue;L=+L}else L=1;u=p[c],(u===void 0||u==="")&&(u=c),u=String(u);var S=x[u];S===void 0?(x[u]=n.length,m=o.indexOf(u)!==-1,m||(y+=L),n.push({v:L,label:u,color:k(b[c],u),i:c,pts:[c],hidden:m})):(A=!0,f=n[S],f.v+=L,f.pts.push(c),f.hidden||(y+=L),f.color===!1&&b[c]&&(f.color=k(b[c],u)))}n=n.filter(function(I){return I.v>=0});var w=l.type==="funnelarea"?A:l.sort;return w&&n.sort(function(I,O){return O.v-I.v}),n[0]&&(n[0].vTotal=y),n}function v(e){return function(l,n){return!l||(l=E(l),!l.isValid())?!1:(l=i.addOpacity(l,l.getAlpha()),e[n]||(e[n]=l),l)}}function d(e,l){var n=(l||{}).type;n||(n="pie");var s=e._fullLayout,o=e.calcdata,p=s[n+"colorway"],b=s["_"+n+"colormap"];s["extend"+n+"colors"]&&(p=r(p,C));for(var h=0,_=0;_<o.length;_++){var a=o[_],c=a[0].trace.type;if(c===n)for(var f=0;f<a.length;f++){var x=a[f];x.color===!1&&(b[x.label]?x.color=b[x.label]:(b[x.label]=x.color=p[h%p.length],h++))}}}function r(e,l){var n,s=JSON.stringify(e),o=l[s];if(!o){for(o=e.slice(),n=0;n<e.length;n++)o.push(E(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)o.push(E(e[n]).darken(20).toHexString());l[s]=o}return o}Q.exports={calc:T,crossTraceCalc:d,makePullColorFn:v,generateExtendedColors:r}},74174:function(Q,U,t){var M=t(38248),E=t(3400),i=t(74996),C=t(86968).Q,T=t(31508).handleText,v=t(3400).coercePattern;function d(l,n){var s=E.isArrayOrTypedArray(l),o=E.isArrayOrTypedArray(n),p=Math.min(s?l.length:1/0,o?n.length:1/0);if(isFinite(p)||(p=0),p&&o){for(var b,h=0;h<p;h++){var _=n[h];if(M(_)&&_>0){b=!0;break}}b||(p=0)}return{hasLabels:s,hasValues:o,len:p}}function r(l,n,s,o,p){var b=o("marker.line.width");b&&o("marker.line.color",p?void 0:s.paper_bgcolor);var h=o("marker.colors");v(o,"marker.pattern",h),l.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=l.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=s.paper_bgcolor)}function e(l,n,s,o){function p(S,w){return E.coerce(l,n,i,S,w)}var b=p("labels"),h=p("values"),_=d(b,h),a=_.len;if(n._hasLabels=_.hasLabels,n._hasValues=_.hasValues,!n._hasLabels&&n._hasValues&&(p("label0"),p("dlabel")),!a){n.visible=!1;return}n._length=a,r(l,n,o,p,!0),p("scalegroup");var c=p("text"),f=p("texttemplate"),x;if(f||(x=p("textinfo",E.isArrayOrTypedArray(c)?"text+percent":"percent")),p("hovertext"),p("hovertemplate"),f||x&&x!=="none"){var k=p("textposition");T(l,n,o,p,k,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var y=Array.isArray(k)||k==="auto",A=y||k==="outside";A&&p("automargin"),(k==="inside"||k==="auto"||Array.isArray(k))&&p("insidetextorientation")}else x==="none"&&p("textposition","none");C(n,o,p);var L=p("hole"),u=p("title.text");if(u){var m=p("title.position",L?"middle center":"top center");!L&&m==="middle center"&&(n.title.position="top center"),E.coerceFont(p,"title.font",o.font)}p("sort"),p("direction"),p("rotation"),p("pull")}Q.exports={handleLabelsAndValues:d,handleMarkerDefaults:r,supplyDefaults:e}},53644:function(Q,U,t){var M=t(10624).appendArrayMultiPointValues;Q.exports=function(E,i){var C={curveNumber:i.index,pointNumbers:E.pts,data:i._input,fullData:i,label:E.label,color:E.color,value:E.v,percent:E.percent,text:E.text,bbox:E.bbox,v:E.v};return E.pts.length===1&&(C.pointNumber=C.i=E.pts[0]),M(C,i,E.pts),i.type==="funnelarea"&&(delete C.v,delete C.i),C}},21552:function(Q,U,t){var M=t(43616),E=t(76308);Q.exports=function(i,C,T,v){var d=T.marker.pattern;d&&d.shape?M.pointStyle(i,T,v,C):E.fill(i,C.color)}},69656:function(Q,U,t){var M=t(3400);function E(i){return i.indexOf("e")!==-1?i.replace(/[.]?0+e/,"e"):i.indexOf(".")!==-1?i.replace(/[.]?0+$/,""):i}U.formatPiePercent=function(i,C){var T=E((i*100).toPrecision(3));return M.numSeparate(T,C)+"%"},U.formatPieValue=function(i,C){var T=E(i.toPrecision(10));return M.numSeparate(T,C)},U.getFirstFilled=function(i,C){if(M.isArrayOrTypedArray(i))for(var T=0;T<C.length;T++){var v=i[C[T]];if(v||v===0||v==="")return v}},U.castOption=function(i,C){if(M.isArrayOrTypedArray(i))return U.getFirstFilled(i,C);if(i)return i},U.getRotationAngle=function(i){return(i==="auto"?0:i)*Math.PI/180}},75792:function(Q,U,t){Q.exports={attributes:t(74996),supplyDefaults:t(74174).supplyDefaults,supplyLayoutDefaults:t(90248),layoutAttributes:t(85204),calc:t(45768).calc,crossTraceCalc:t(45768).crossTraceCalc,plot:t(37820).plot,style:t(22152),styleOne:t(10528),moduleType:"trace",name:"pie",basePlotModule:t(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(Q){Q.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(Q,U,t){var M=t(3400),E=t(85204);Q.exports=function(i,C){function T(v,d){return M.coerce(i,C,E,v,d)}T("hiddenlabels"),T("piecolorway",C.colorway),T("extendpiecolors")}},37820:function(Q,U,t){var M=t(33428),E=t(7316),i=t(93024),C=t(76308),T=t(43616),v=t(3400),d=v.strScale,r=v.strTranslate,e=t(72736),l=t(82744),n=l.recordMinTextSize,s=l.clearMinTextSize,o=t(78048).TEXTPAD,p=t(69656),b=t(53644),h=t(3400).isValidTextValue;function _(Z,$){var V=Z._context.staticPlot,rt=Z._fullLayout,ot=rt._size;s("pie",rt),k($,Z),G($,ot);var H=v.makeTraceGroups(rt._pielayer,$,"trace").each(function(Y){var at=M.select(this),et=Y[0],ct=et.trace;J(Y),at.attr("stroke-linejoin","round"),at.each(function(){var ft=M.select(this).selectAll("g.slice").data(Y);ft.enter().append("g").classed("slice",!0),ft.exit().remove();var yt=[[[],[]],[[],[]]],xt=!1;ft.each(function(St,Bt){if(St.hidden){M.select(this).selectAll("path,g").remove();return}St.pointNumber=St.i,St.curveNumber=ct.index,yt[St.pxmid[1]<0?0:1][St.pxmid[0]<0?0:1].push(St);var re=et.cx,Yt=et.cy,he=M.select(this),Zt=he.selectAll("path.surface").data([St]);if(Zt.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),he.call(c,Z,Y),ct.pull){var ae=+p.castOption(ct.pull,St.pts)||0;ae>0&&(re+=ae*St.pxmid[0],Yt+=ae*St.pxmid[1])}St.cxFinal=re,St.cyFinal=Yt;function oe(Vt,Nt,Mt,Et){var Dt=Et*(Nt[0]-Vt[0]),dt=Et*(Nt[1]-Vt[1]);return"a"+Et*et.r+","+Et*et.r+" 0 "+St.largeArc+(Mt?" 1 ":" 0 ")+Dt+","+dt}var ce=ct.hole;if(St.v===et.vTotal){var ue="M"+(re+St.px0[0])+","+(Yt+St.px0[1])+oe(St.px0,St.pxmid,!0,1)+oe(St.pxmid,St.px0,!0,1)+"Z";ce?Zt.attr("d","M"+(re+ce*St.px0[0])+","+(Yt+ce*St.px0[1])+oe(St.px0,St.pxmid,!1,ce)+oe(St.pxmid,St.px0,!1,ce)+"Z"+ue):Zt.attr("d",ue)}else{var ye=oe(St.px0,St.px1,!0,1);if(ce){var Tt=1-ce;Zt.attr("d","M"+(re+ce*St.px1[0])+","+(Yt+ce*St.px1[1])+oe(St.px1,St.px0,!1,ce)+"l"+Tt*St.px0[0]+","+Tt*St.px0[1]+ye+"Z")}else Zt.attr("d","M"+re+","+Yt+"l"+St.px0[0]+","+St.px0[1]+ye+"Z")}nt(Z,St,et);var Ft=p.castOption(ct.textposition,St.pts),$t=he.selectAll("g.slicetext").data(St.text&&Ft!=="none"?[0]:[]);$t.enter().append("g").classed("slicetext",!0),$t.exit().remove(),$t.each(function(){var Vt=v.ensureSingle(M.select(this),"text","",function(Pt){Pt.attr("data-notex",1)}),Nt=v.ensureUniformFontSize(Z,Ft==="outside"?f(ct,St,rt.font):x(ct,St,rt.font));Vt.text(St.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(T.font,Nt).call(e.convertToTspans,Z);var Mt=T.bBox(Vt.node()),Et;if(Ft==="outside")Et=O(Mt,St);else if(Et=y(Mt,St,et),Ft==="auto"&&Et.scale<1){var Dt=v.ensureUniformFontSize(Z,ct.outsidetextfont);Vt.call(T.font,Dt),Mt=T.bBox(Vt.node()),Et=O(Mt,St)}var dt=Et.textPosAngle,ht=dt===void 0?St.pxmid:it(et.r,dt);if(Et.targetX=re+ht[0]*Et.rCenter+(Et.x||0),Et.targetY=Yt+ht[1]*Et.rCenter+(Et.y||0),q(Et,Mt),Et.outside){var bt=Et.targetY;St.yLabelMin=bt-Mt.height/2,St.yLabelMid=bt,St.yLabelMax=bt+Mt.height/2,St.labelExtraX=0,St.labelExtraY=0,xt=!0}Et.fontSize=Nt.size,n(ct.type,Et,rt),Y[Bt].transform=Et,v.setTransormAndDisplay(Vt,Et)})});var Ct=M.select(this).selectAll("g.titletext").data(ct.title.text?[0]:[]);if(Ct.enter().append("g").classed("titletext",!0),Ct.exit().remove(),Ct.each(function(){var St=v.ensureSingle(M.select(this),"text","",function(Yt){Yt.attr("data-notex",1)}),Bt=ct.title.text;ct._meta&&(Bt=v.templateString(Bt,ct._meta)),St.text(Bt).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(T.font,ct.title.font).call(e.convertToTspans,Z);var re;ct.title.position==="middle center"?re=D(et):re=P(et,ot),St.attr("transform",r(re.x,re.y)+d(Math.min(1,re.scale))+r(re.tx,re.ty))}),xt&&N(yt,ct),a(ft,ct),xt&&ct.automargin){var gt=T.bBox(at.node()),mt=ct.domain,vt=ot.w*(mt.x[1]-mt.x[0]),At=ot.h*(mt.y[1]-mt.y[0]),Ot=(.5*vt-et.r)/ot.w,It=(.5*At-et.r)/ot.h;E.autoMargin(Z,"pie."+ct.uid+".automargin",{xl:mt.x[0]-Ot,xr:mt.x[1]+Ot,yb:mt.y[0]-It,yt:mt.y[1]+It,l:Math.max(et.cx-et.r-gt.left,0),r:Math.max(gt.right-(et.cx+et.r),0),b:Math.max(gt.bottom-(et.cy+et.r),0),t:Math.max(et.cy-et.r-gt.top,0),pad:5})}})});setTimeout(function(){H.selectAll("tspan").each(function(){var Y=M.select(this);Y.attr("dy")&&Y.attr("dy",Y.attr("dy"))})},0)}function a(Z,$){Z.each(function(V){var rt=M.select(this);if(!V.labelExtraX&&!V.labelExtraY){rt.select("path.textline").remove();return}var ot=rt.select("g.slicetext text");V.transform.targetX+=V.labelExtraX,V.transform.targetY+=V.labelExtraY,v.setTransormAndDisplay(ot,V.transform);var H=V.cxFinal+V.pxmid[0],Y=V.cyFinal+V.pxmid[1],at="M"+H+","+Y,et=(V.yLabelMax-V.yLabelMin)*(V.pxmid[0]<0?-1:1)/4;if(V.labelExtraX){var ct=V.labelExtraX*V.pxmid[1]/V.pxmid[0],ft=V.yLabelMid+V.labelExtraY-(V.cyFinal+V.pxmid[1]);Math.abs(ct)>Math.abs(ft)?at+="l"+ft*V.pxmid[0]/V.pxmid[1]+","+ft+"H"+(H+V.labelExtraX+et):at+="l"+V.labelExtraX+","+ct+"v"+(ft-ct)+"h"+et}else at+="V"+(V.yLabelMid+V.labelExtraY)+"h"+et;v.ensureSingle(rt,"path","textline").call(C.stroke,$.outsidetextfont.color).attr({"stroke-width":Math.min(2,$.outsidetextfont.size/8),d:at,fill:"none"})})}function c(Z,$,V){var rt=V[0],ot=rt.cx,H=rt.cy,Y=rt.trace,at=Y.type==="funnelarea";"_hasHoverLabel"in Y||(Y._hasHoverLabel=!1),"_hasHoverEvent"in Y||(Y._hasHoverEvent=!1),Z.on("mouseover",function(et){var ct=$._fullLayout,ft=$._fullData[Y.index];if(!($._dragging||ct.hovermode===!1)){var yt=ft.hoverinfo;if(Array.isArray(yt)&&(yt=i.castHoverinfo({hoverinfo:[p.castOption(yt,et.pts)],_module:Y._module},ct,0)),yt==="all"&&(yt="label+text+value+percent+name"),ft.hovertemplate||yt!=="none"&&yt!=="skip"&&yt){var xt=et.rInscribed||0,Ct=ot+et.pxmid[0]*(1-xt),gt=H+et.pxmid[1]*(1-xt),mt=ct.separators,vt=[];if(yt&&yt.indexOf("label")!==-1&&vt.push(et.label),et.text=p.castOption(ft.hovertext||ft.text,et.pts),yt&&yt.indexOf("text")!==-1){var At=et.text;v.isValidTextValue(At)&&vt.push(At)}et.value=et.v,et.valueLabel=p.formatPieValue(et.v,mt),yt&&yt.indexOf("value")!==-1&&vt.push(et.valueLabel),et.percent=et.v/rt.vTotal,et.percentLabel=p.formatPiePercent(et.percent,mt),yt&&yt.indexOf("percent")!==-1&&vt.push(et.percentLabel);var Ot=ft.hoverlabel,It=Ot.font,St=[];i.loneHover({trace:Y,x0:Ct-xt*rt.r,x1:Ct+xt*rt.r,y:gt,_x0:at?ot+et.TL[0]:Ct-xt*rt.r,_x1:at?ot+et.TR[0]:Ct+xt*rt.r,_y0:at?H+et.TL[1]:gt-xt*rt.r,_y1:at?H+et.BL[1]:gt+xt*rt.r,text:vt.join("<br>"),name:ft.hovertemplate||yt.indexOf("name")!==-1?ft.name:void 0,idealAlign:et.pxmid[0]<0?"left":"right",color:p.castOption(Ot.bgcolor,et.pts)||et.color,borderColor:p.castOption(Ot.bordercolor,et.pts),fontFamily:p.castOption(It.family,et.pts),fontSize:p.castOption(It.size,et.pts),fontColor:p.castOption(It.color,et.pts),nameLength:p.castOption(Ot.namelength,et.pts),textAlign:p.castOption(Ot.align,et.pts),hovertemplate:p.castOption(ft.hovertemplate,et.pts),hovertemplateLabels:et,eventData:[b(et,ft)]},{container:ct._hoverlayer.node(),outerContainer:ct._paper.node(),gd:$,inOut_bbox:St}),et.bbox=St[0],Y._hasHoverLabel=!0}Y._hasHoverEvent=!0,$.emit("plotly_hover",{points:[b(et,ft)],event:M.event})}}),Z.on("mouseout",function(et){var ct=$._fullLayout,ft=$._fullData[Y.index],yt=M.select(this).datum();Y._hasHoverEvent&&(et.originalEvent=M.event,$.emit("plotly_unhover",{points:[b(yt,ft)],event:M.event}),Y._hasHoverEvent=!1),Y._hasHoverLabel&&(i.loneUnhover(ct._hoverlayer.node()),Y._hasHoverLabel=!1)}),Z.on("click",function(et){var ct=$._fullLayout,ft=$._fullData[Y.index];$._dragging||ct.hovermode===!1||($._hoverdata=[b(et,ft)],i.click($,M.event))})}function f(Z,$,V){var rt=p.castOption(Z.outsidetextfont.color,$.pts)||p.castOption(Z.textfont.color,$.pts)||V.color,ot=p.castOption(Z.outsidetextfont.family,$.pts)||p.castOption(Z.textfont.family,$.pts)||V.family,H=p.castOption(Z.outsidetextfont.size,$.pts)||p.castOption(Z.textfont.size,$.pts)||V.size;return{color:rt,family:ot,size:H}}function x(Z,$,V){var rt=p.castOption(Z.insidetextfont.color,$.pts);!rt&&Z._input.textfont&&(rt=p.castOption(Z._input.textfont.color,$.pts));var ot=p.castOption(Z.insidetextfont.family,$.pts)||p.castOption(Z.textfont.family,$.pts)||V.family,H=p.castOption(Z.insidetextfont.size,$.pts)||p.castOption(Z.textfont.size,$.pts)||V.size;return{color:rt||C.contrast($.color),family:ot,size:H}}function k(Z,$){for(var V,rt,ot=0;ot<Z.length;ot++)if(V=Z[ot][0],rt=V.trace,rt.title.text){var H=rt.title.text;rt._meta&&(H=v.templateString(H,rt._meta));var Y=T.tester.append("text").attr("data-notex",1).text(H).call(T.font,rt.title.font).call(e.convertToTspans,$),at=T.bBox(Y.node(),!0);V.titleBox={width:at.width,height:at.height},Y.remove()}}function y(Z,$,V){var rt=V.r||$.rpx1,ot=$.rInscribed,H=$.startangle===$.stopangle;if(H)return{rCenter:1-ot,scale:0,rotate:0,textPosAngle:0};var Y=$.ring,at=Y===1&&Math.abs($.startangle-$.stopangle)===Math.PI*2,et=$.halfangle,ct=$.midangle,ft=V.trace.insidetextorientation,yt=ft==="horizontal",xt=ft==="tangential",Ct=ft==="radial",gt=ft==="auto",mt=[],vt;if(!gt){var At=function(he,Zt){if(A($,he)){var ae=Math.abs(he-$.startangle),oe=Math.abs(he-$.stopangle),ce=ae<oe?ae:oe;Zt==="tan"?vt=u(Z,rt,Y,ce,0):vt=L(Z,rt,Y,ce,Math.PI/2),vt.textPosAngle=he,mt.push(vt)}},Ot;if(yt||xt){for(Ot=4;Ot>=-4;Ot-=2)At(Math.PI*Ot,"tan");for(Ot=4;Ot>=-4;Ot-=2)At(Math.PI*(Ot+1),"tan")}if(yt||Ct){for(Ot=4;Ot>=-4;Ot-=2)At(Math.PI*(Ot+1.5),"rad");for(Ot=4;Ot>=-4;Ot-=2)At(Math.PI*(Ot+.5),"rad")}}if(at||gt||yt){var It=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if(vt={scale:ot*rt*2/It,rCenter:1-ot,rotate:0},vt.textPosAngle=($.startangle+$.stopangle)/2,vt.scale>=1)return vt;mt.push(vt)}(gt||Ct)&&(vt=L(Z,rt,Y,et,ct),vt.textPosAngle=($.startangle+$.stopangle)/2,mt.push(vt)),(gt||xt)&&(vt=u(Z,rt,Y,et,ct),vt.textPosAngle=($.startangle+$.stopangle)/2,mt.push(vt));for(var St=0,Bt=0,re=0;re<mt.length;re++){var Yt=mt[re].scale;if(Bt<Yt&&(Bt=Yt,St=re),!gt&&Bt>=1)break}return mt[St]}function A(Z,$){var V=Z.startangle,rt=Z.stopangle;return V>$&&$>rt||V<$&&$<rt}function L(Z,$,V,rt,ot){$=Math.max(0,$-2*o);var H=Z.width/Z.height,Y=w(H,rt,$,V);return{scale:Y*2/Z.height,rCenter:m(H,Y/$),rotate:S(ot)}}function u(Z,$,V,rt,ot){$=Math.max(0,$-2*o);var H=Z.height/Z.width,Y=w(H,rt,$,V);return{scale:Y*2/Z.width,rCenter:m(H,Y/$),rotate:S(ot+Math.PI/2)}}function m(Z,$){return Math.cos($)-Z*$}function S(Z){return(180/Math.PI*Z+720)%180-90}function w(Z,$,V,rt){var ot=Z+1/(2*Math.tan($));return V*Math.min(1/(Math.sqrt(ot*ot+.5)+ot),rt/(Math.sqrt(Z*Z+rt/2)+Z))}function I(Z,$){return Z.v===$.vTotal&&!$.trace.hole?1:Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2)}function O(Z,$){var V=$.pxmid[0],rt=$.pxmid[1],ot=Z.width/2,H=Z.height/2;return V<0&&(ot*=-1),rt<0&&(H*=-1),{scale:1,rCenter:1,rotate:0,x:ot+Math.abs(H)*(ot>0?1:-1)/2,y:H/(1+V*V/(rt*rt)),outside:!0}}function D(Z){var $=Math.sqrt(Z.titleBox.width*Z.titleBox.width+Z.titleBox.height*Z.titleBox.height);return{x:Z.cx,y:Z.cy,scale:Z.trace.hole*Z.r*2/$,tx:0,ty:-Z.titleBox.height/2+Z.trace.title.font.size}}function P(Z,$){var V=1,rt=1,ot,H=Z.trace,Y={x:Z.cx,y:Z.cy},at={tx:0,ty:0};at.ty+=H.title.font.size,ot=B(H),H.title.position.indexOf("top")!==-1?(Y.y-=(1+ot)*Z.r,at.ty-=Z.titleBox.height):H.title.position.indexOf("bottom")!==-1&&(Y.y+=(1+ot)*Z.r);var et=F(Z.r,Z.trace.aspectratio),ct=$.w*(H.domain.x[1]-H.domain.x[0])/2;return H.title.position.indexOf("left")!==-1?(ct=ct+et,Y.x-=(1+ot)*et,at.tx+=Z.titleBox.width/2):H.title.position.indexOf("center")!==-1?ct*=2:H.title.position.indexOf("right")!==-1&&(ct=ct+et,Y.x+=(1+ot)*et,at.tx-=Z.titleBox.width/2),V=ct/Z.titleBox.width,rt=R(Z,$)/Z.titleBox.height,{x:Y.x,y:Y.y,scale:Math.min(V,rt),tx:at.tx,ty:at.ty}}function F(Z,$){return Z/($===void 0?1:$)}function R(Z,$){var V=Z.trace,rt=$.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(Z.titleBox.height,rt/2)}function B(Z){var $=Z.pull;if(!$)return 0;var V;if(v.isArrayOrTypedArray($))for($=0,V=0;V<Z.pull.length;V++)Z.pull[V]>$&&($=Z.pull[V]);return $}function N(Z,$){var V,rt,ot,H,Y,at,et,ct,ft,yt,xt,Ct,gt;function mt(It,St){return It.pxmid[1]-St.pxmid[1]}function vt(It,St){return St.pxmid[1]-It.pxmid[1]}function At(It,St){St||(St={});var Bt=St.labelExtraY+(rt?St.yLabelMax:St.yLabelMin),re=rt?It.yLabelMin:It.yLabelMax,Yt=rt?It.yLabelMax:It.yLabelMin,he=It.cyFinal+Y(It.px0[1],It.px1[1]),Zt=Bt-re,ae,oe,ce,ue,ye,Tt;if(Zt*et>0&&(It.labelExtraY=Zt),!!v.isArrayOrTypedArray($.pull))for(oe=0;oe<yt.length;oe++)ce=yt[oe],!(ce===It||(p.castOption($.pull,It.pts)||0)>=(p.castOption($.pull,ce.pts)||0))&&((It.pxmid[1]-ce.pxmid[1])*et>0?(ue=ce.cyFinal+Y(ce.px0[1],ce.px1[1]),Zt=ue-re-It.labelExtraY,Zt*et>0&&(It.labelExtraY+=Zt)):(Yt+It.labelExtraY-he)*et>0&&(ae=3*at*Math.abs(oe-yt.indexOf(It)),ye=ce.cxFinal+H(ce.px0[0],ce.px1[0]),Tt=ye+ae-(It.cxFinal+It.pxmid[0])-It.labelExtraX,Tt*at>0&&(It.labelExtraX+=Tt)))}for(rt=0;rt<2;rt++)for(ot=rt?mt:vt,Y=rt?Math.max:Math.min,et=rt?1:-1,V=0;V<2;V++){for(H=V?Math.max:Math.min,at=V?1:-1,ct=Z[rt][V],ct.sort(ot),ft=Z[1-rt][V],yt=ft.concat(ct),Ct=[],xt=0;xt<ct.length;xt++)ct[xt].yLabelMid!==void 0&&Ct.push(ct[xt]);for(gt=!1,xt=0;rt&&xt<ft.length;xt++)if(ft[xt].yLabelMid!==void 0){gt=ft[xt];break}for(xt=0;xt<Ct.length;xt++){var Ot=xt&&Ct[xt-1];gt&&!xt&&(Ot=gt),At(Ct[xt],Ot)}}}function G(Z,$){for(var V=[],rt=0;rt<Z.length;rt++){var ot=Z[rt][0],H=ot.trace,Y=H.domain,at=$.w*(Y.x[1]-Y.x[0]),et=$.h*(Y.y[1]-Y.y[0]);H.title.text&&H.title.position!=="middle center"&&(et-=R(ot,$));var ct=at/2,ft=et/2;H.type==="funnelarea"&&!H.scalegroup&&(ft/=H.aspectratio),ot.r=Math.min(ct,ft)/(1+B(H)),ot.cx=$.l+$.w*(H.domain.x[1]+H.domain.x[0])/2,ot.cy=$.t+$.h*(1-H.domain.y[0])-et/2,H.title.text&&H.title.position.indexOf("bottom")!==-1&&(ot.cy-=R(ot,$)),H.scalegroup&&V.indexOf(H.scalegroup)===-1&&V.push(H.scalegroup)}X(Z,V)}function X(Z,$){for(var V,rt,ot,H=0;H<$.length;H++){var Y=1/0,at=$[H];for(rt=0;rt<Z.length;rt++)if(V=Z[rt][0],ot=V.trace,ot.scalegroup===at){var et;if(ot.type==="pie")et=V.r*V.r;else if(ot.type==="funnelarea"){var ct,ft;ot.aspectratio>1?(ct=V.r,ft=ct/ot.aspectratio):(ft=V.r,ct=ft*ot.aspectratio),ct*=(1+ot.baseratio)/2,et=ct*ft}Y=Math.min(Y,et/V.vTotal)}for(rt=0;rt<Z.length;rt++)if(V=Z[rt][0],ot=V.trace,ot.scalegroup===at){var yt=Y*V.vTotal;ot.type==="funnelarea"&&(yt/=(1+ot.baseratio)/2,yt/=ot.aspectratio),V.r=Math.sqrt(yt)}}}function J(Z){var $=Z[0],V=$.r,rt=$.trace,ot=p.getRotationAngle(rt.rotation),H=2*Math.PI/$.vTotal,Y="px0",at="px1",et,ct,ft;if(rt.direction==="counterclockwise"){for(et=0;et<Z.length&&Z[et].hidden;et++);if(et===Z.length)return;ot+=H*Z[et].v,H*=-1,Y="px1",at="px0"}for(ft=it(V,ot),et=0;et<Z.length;et++)ct=Z[et],!ct.hidden&&(ct[Y]=ft,ct.startangle=ot,ot+=H*ct.v/2,ct.pxmid=it(V,ot),ct.midangle=ot,ot+=H*ct.v/2,ft=it(V,ot),ct.stopangle=ot,ct[at]=ft,ct.largeArc=ct.v>$.vTotal/2?1:0,ct.halfangle=Math.PI*Math.min(ct.v/$.vTotal,.5),ct.ring=1-rt.hole,ct.rInscribed=I(ct,$))}function it(Z,$){return[Z*Math.sin($),-Z*Math.cos($)]}function nt(Z,$,V){var rt=Z._fullLayout,ot=V.trace,H=ot.texttemplate,Y=ot.textinfo;if(!H&&Y&&Y!=="none"){var at=Y.split("+"),et=function(St){return at.indexOf(St)!==-1},ct=et("label"),ft=et("text"),yt=et("value"),xt=et("percent"),Ct=rt.separators,gt;if(gt=ct?[$.label]:[],ft){var mt=p.getFirstFilled(ot.text,$.pts);h(mt)&&gt.push(mt)}yt&&gt.push(p.formatPieValue($.v,Ct)),xt&&gt.push(p.formatPiePercent($.v/V.vTotal,Ct)),$.text=gt.join("<br>")}function vt(St){return{label:St.label,value:St.v,valueLabel:p.formatPieValue(St.v,rt.separators),percent:St.v/V.vTotal,percentLabel:p.formatPiePercent(St.v/V.vTotal,rt.separators),color:St.color,text:St.text,customdata:v.castOption(ot,St.i,"customdata")}}if(H){var At=v.castOption(ot,$.i,"texttemplate");if(!At)$.text="";else{var Ot=vt($),It=p.getFirstFilled(ot.text,$.pts);(h(It)||It==="")&&(Ot.text=It),$.text=v.texttemplateString(At,Ot,Z._fullLayout._d3locale,Ot,ot._meta||{})}}}function q(Z,$){var V=Z.rotate*Math.PI/180,rt=Math.cos(V),ot=Math.sin(V),H=($.left+$.right)/2,Y=($.top+$.bottom)/2;Z.textX=H*rt-Y*ot,Z.textY=H*ot+Y*rt,Z.noCenter=!0}Q.exports={plot:_,formatSliceLabel:nt,transformInsideText:y,determineInsideTextFont:x,positionTitleOutside:P,prerenderTitles:k,layoutAreas:G,attachFxHandlers:c,computeTransform:q}},22152:function(Q,U,t){var M=t(33428),E=t(10528),i=t(82744).resizeText;Q.exports=function(C){var T=C._fullLayout._pielayer.selectAll(".trace");i(C,T,"pie"),T.each(function(v){var d=v[0],r=d.trace,e=M.select(this);e.style({opacity:r.opacity}),e.selectAll("path.surface").each(function(l){M.select(this).call(E,l,r,C)})})}},10528:function(Q,U,t){var M=t(76308),E=t(69656).castOption,i=t(21552);Q.exports=function(C,T,v,d){var r=v.marker.line,e=E(r.color,T.pts)||M.defaultLine,l=E(r.width,T.pts)||0;C.call(i,T,v,d).style("stroke-width",l).call(M.stroke,e)}},35484:function(Q,U,t){var M=t(52904);Q.exports={x:M.x,y:M.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:M.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(Q,U,t){var M=t(67792).gl_pointcloud2d,E=t(3400).isArrayOrTypedArray,i=t(43080),C=t(19280).findExtremes,T=t(44928);function v(e,l){this.scene=e,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=M(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var d=v.prototype;d.handlePick=function(e){var l=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[l*2],this.pickXYData[l*2+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:E(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},d.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=T(e,{})},d.updateFast=function(e){var l=this.xData=this.pickXData=e.x,n=this.yData=this.pickYData=e.y,s=this.pickXYData=e.xy,o=e.xbounds&&e.ybounds,p=e.indices,b,h,_,a=this.bounds,c,f,x;if(s){if(_=s,b=s.length>>>1,o)a[0]=e.xbounds[0],a[2]=e.xbounds[1],a[1]=e.ybounds[0],a[3]=e.ybounds[1];else for(x=0;x<b;x++)c=_[x*2],f=_[x*2+1],c<a[0]&&(a[0]=c),c>a[2]&&(a[2]=c),f<a[1]&&(a[1]=f),f>a[3]&&(a[3]=f);if(p)h=p;else for(h=new Int32Array(b),x=0;x<b;x++)h[x]=x}else for(b=l.length,_=new Float32Array(2*b),h=new Int32Array(b),x=0;x<b;x++)c=l[x],f=n[x],h[x]=x,_[x*2]=c,_[x*2+1]=f,c<a[0]&&(a[0]=c),c>a[2]&&(a[2]=c),f<a[1]&&(a[1]=f),f>a[3]&&(a[3]=f);this.idToIndex=h,this.pointcloudOptions.idToIndex=h,this.pointcloudOptions.positions=_;var k=i(e.marker.color),y=i(e.marker.border.color),A=e.opacity*e.marker.opacity;k[3]*=A,this.pointcloudOptions.color=k;var L=e.marker.blend;if(L===null){var u=100;L=l.length<u||n.length<u}this.pointcloudOptions.blend=L,y[3]*=A,this.pointcloudOptions.borderColor=y;var m=e.marker.sizemin,S=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=m,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var w=this.scene.xaxis,I=this.scene.yaxis,O=S/2||.5;e._extremes[w._id]=C(w,[a[0],a[2]],{ppad:O}),e._extremes[I._id]=C(I,[a[1],a[3]],{ppad:O})},d.dispose=function(){this.pointcloud.dispose()};function r(e,l){var n=new v(e,l.uid);return n.update(l),n}Q.exports=r},41904:function(Q,U,t){var M=t(3400),E=t(35484);Q.exports=function(i,C,T){function v(d,r){return M.coerce(i,C,E,d,r)}v("x"),v("y"),v("xbounds"),v("ybounds"),i.xy&&i.xy instanceof Float32Array&&(C.xy=i.xy),i.indices&&i.indices instanceof Int32Array&&(C.indices=i.indices),v("text"),v("marker.color",T),v("marker.opacity"),v("marker.blend"),v("marker.sizemin"),v("marker.sizemax"),v("marker.border.color",T),v("marker.border.arearatio"),C._length=null}},156:function(Q,U,t){Q.exports={attributes:t(35484),supplyDefaults:t(41904),calc:t(41484),plot:t(11072),moduleType:"trace",name:"pointcloud",basePlotModule:t(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(Q,U,t){var M=t(25376),E=t(45464),i=t(22548),C=t(55756),T=t(86968).u,v=t(21776).Ks,d=t(49084),r=t(31780).templatedArray,e=t(29736).descriptionOnlyNumbers,l=t(92880).extendFlat,n=t(67824).overrideAll,s=Q.exports=n({hoverinfo:l({},E.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:C.hoverlabel,domain:T({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:e("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:M({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:C.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:i.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:C.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:l(d().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");s.transforms=void 0},10760:function(Q,U,t){var M=t(67824).overrideAll,E=t(84888)._M,i=t(59596),C=t(65460),T=t(93972),v=t(86476),d=t(22676).prepSelect,r=t(3400),e=t(24040),l="sankey";U.name=l,U.baseLayoutAttrOverrides=M({hoverlabel:C.hoverlabel},"plot","nested"),U.plot=function(s){var o=E(s.calcdata,l)[0];i(s,o),U.updateFx(s)},U.clean=function(s,o,p,b){var h=b._has&&b._has(l),_=o._has&&o._has(l);h&&!_&&(b._paperdiv.selectAll(".sankey").remove(),b._paperdiv.selectAll(".bgsankey").remove())},U.updateFx=function(s){for(var o=0;o<s._fullData.length;o++)n(s,o)};function n(s,o){var p=s._fullData[o],b=s._fullLayout,h=b.dragmode,_=b.dragmode==="pan"?"move":"crosshair",a=p._bgRect;if(a&&!(h==="pan"||h==="zoom")){T(a,_);var c={_id:"x",c2p:r.identity,_offset:p._sankey.translateX,_length:p._sankey.width},f={_id:"y",c2p:r.identity,_offset:p._sankey.translateY,_length:p._sankey.height},x={gd:s,element:a.node(),plotinfo:{id:o,xaxis:c,yaxis:f,fillRangeItems:r.noop},subplot:o,xaxes:[c],yaxes:[f],doneFnCompleted:function(k){var y=s._fullData[o],A,L=y.node.groups.slice(),u=[];function m(O){for(var D=y._sankey.graph.nodes,P=0;P<D.length;P++)if(D[P].pointNumber===O)return D[P]}for(var S=0;S<k.length;S++){var w=m(k[S].pointNumber);if(w)if(w.group){for(var I=0;I<w.childrenNodes.length;I++)u.push(w.childrenNodes[I].pointNumber);L[w.pointNumber-y.node._count]=!1}else u.push(w.pointNumber)}A=L.filter(Boolean).concat([u]),e.call("_guiRestyle",s,{"node.groups":[A]},o)}};x.prepFn=function(k,y,A){d(k,y,A,x,h)},v.init(x)}}},48068:function(Q,U,t){var M=t(78484),E=t(3400),i=t(71688).wrap,C=E.isArrayOrTypedArray,T=E.isIndex,v=t(8932);function d(e){var l=e.node,n=e.link,s=[],o=C(n.color),p=C(n.hovercolor),b=C(n.customdata),h={},_={},a=n.colorscales.length,c;for(c=0;c<a;c++){var f=n.colorscales[c],x=v.extractScale(f,{cLetter:"c"}),k=v.makeColorScaleFunc(x);_[f.label]=k}var y=0;for(c=0;c<n.value.length;c++)n.source[c]>y&&(y=n.source[c]),n.target[c]>y&&(y=n.target[c]);var A=y+1;e.node._count=A;var L,u=e.node.groups,m={};for(c=0;c<u.length;c++){var S=u[c];for(L=0;L<S.length;L++){var w=S[L],I=A+c;m.hasOwnProperty(w)?E.warn("Node "+w+" is already part of a group."):m[w]=I}}var O={source:[],target:[]};for(c=0;c<n.value.length;c++){var D=n.value[c],P=n.source[c],F=n.target[c];if(D>0&&T(P,A)&&T(F,A)&&!(m.hasOwnProperty(P)&&m.hasOwnProperty(F)&&m[P]===m[F])){m.hasOwnProperty(F)&&(F=m[F]),m.hasOwnProperty(P)&&(P=m[P]),P=+P,F=+F,h[P]=h[F]=!0;var R="";n.label&&n.label[c]&&(R=n.label[c]);var B=null;R&&_.hasOwnProperty(R)&&(B=_[R]),s.push({pointNumber:c,label:R,color:o?n.color[c]:n.color,hovercolor:p?n.hovercolor[c]:n.hovercolor,customdata:b?n.customdata[c]:n.customdata,concentrationscale:B,source:P,target:F,value:+D}),O.source.push(P),O.target.push(F)}}var N=A+u.length,G=C(l.color),X=C(l.customdata),J=[];for(c=0;c<N;c++)if(h[c]){var it=l.label[c];J.push({group:c>A-1,childrenNodes:[],pointNumber:c,label:it,color:G?l.color[c]:l.color,customdata:X?l.customdata[c]:l.customdata})}var nt=!1;return r(N,O.source,O.target)&&(nt=!0),{circular:nt,links:s,nodes:J,groups:u,groupLookup:m}}function r(e,l,n){for(var s=E.init2dArray(e,0),o=0;o<Math.min(l.length,n.length);o++)if(E.isIndex(l[o],e)&&E.isIndex(n[o],e)){if(l[o]===n[o])return!0;s[l[o]].push(n[o])}var p=M(s);return p.components.some(function(b){return b.length>1})}Q.exports=function(e,l){var n=d(l);return i({circular:n.circular,_nodes:n.nodes,_links:n.links,_groups:n.groups,_groupLookup:n.groupLookup})}},11820:function(Q){Q.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(Q,U,t){var M=t(3400),E=t(41440),i=t(76308),C=t(49760),T=t(86968).Q,v=t(16132),d=t(31780),r=t(51272);Q.exports=function(l,n,s,o){function p(w,I){return M.coerce(l,n,E,w,I)}var b=M.extendDeep(o.hoverlabel,l.hoverlabel),h=l.node,_=d.newContainer(n,"node");function a(w,I){return M.coerce(h,_,E.node,w,I)}a("label"),a("groups"),a("x"),a("y"),a("pad"),a("thickness"),a("line.color"),a("line.width"),a("hoverinfo",l.hoverinfo),v(h,_,a,b),a("hovertemplate"),a("align");var c=o.colorway,f=function(w){return c[w%c.length]};a("color",_.label.map(function(w,I){return i.addOpacity(f(I),.8)})),a("customdata");var x=l.link||{},k=d.newContainer(n,"link");function y(w,I){return M.coerce(x,k,E.link,w,I)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",l.hoverinfo),v(x,k,y,b),y("hovertemplate");var A=C(o.paper_bgcolor).getLuminance()<.333,L=A?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)",u=y("color",L);function m(w){var I=C(w);if(!I.isValid())return w;var O=I.getAlpha();return O<=.8?I.setAlpha(O+.2):I=A?I.brighten():I.darken(),I.toRgbString()}y("hovercolor",Array.isArray(u)?u.map(m):m(u)),y("customdata"),r(x,k,{name:"colorscales",handleItemDefaults:e}),T(n,o,p),p("orientation"),p("valueformat"),p("valuesuffix");var S;_.x.length&&_.y.length&&(S="freeform"),p("arrangement",S),M.coerceFont(p,"textfont",M.extendFlat({},o.font)),n._length=null};function e(l,n){function s(o,p){return M.coerce(l,n,E.link.colorscales,o,p)}s("label"),s("cmin"),s("cmax"),s("colorscale")}},45499:function(Q,U,t){Q.exports={attributes:t(41440),supplyDefaults:t(47140),calc:t(48068),plot:t(59596),moduleType:"trace",name:"sankey",basePlotModule:t(10760),selectPoints:t(81128),categories:["noOpacity"],meta:{}}},59596:function(Q,U,t){var M=t(33428),E=t(3400),i=E.numberFormat,C=t(83248),T=t(93024),v=t(76308),d=t(11820).cn,r=E._;function e(f){return f!==""}function l(f,x){return f.filter(function(k){return k.key===x.traceId})}function n(f,x){M.select(f).select("path").style("fill-opacity",x),M.select(f).select("rect").style("fill-opacity",x)}function s(f){M.select(f).select("text.name").style("fill","black")}function o(f){return function(x){return f.node.sourceLinks.indexOf(x.link)!==-1||f.node.targetLinks.indexOf(x.link)!==-1}}function p(f){return function(x){return x.node.sourceLinks.indexOf(f.link)!==-1||x.node.targetLinks.indexOf(f.link)!==-1}}function b(f,x,k){x&&k&&l(k,x).selectAll("."+d.sankeyLink).filter(o(x)).call(_.bind(0,x,k,!1))}function h(f,x,k){x&&k&&l(k,x).selectAll("."+d.sankeyLink).filter(o(x)).call(a.bind(0,x,k,!1))}function _(f,x,k,y){y.style("fill",function(A){if(!A.link.concentrationscale)return A.tinyColorHoverHue}).style("fill-opacity",function(A){if(!A.link.concentrationscale)return A.tinyColorHoverAlpha}),y.each(function(A){var L=A.link.label;L!==""&&l(x,f).selectAll("."+d.sankeyLink).filter(function(u){return u.link.label===L}).style("fill",function(u){if(!u.link.concentrationscale)return u.tinyColorHoverHue}).style("fill-opacity",function(u){if(!u.link.concentrationscale)return u.tinyColorHoverAlpha})}),k&&l(x,f).selectAll("."+d.sankeyNode).filter(p(f)).call(b)}function a(f,x,k,y){y.style("fill",function(A){return A.tinyColorHue}).style("fill-opacity",function(A){return A.tinyColorAlpha}),y.each(function(A){var L=A.link.label;L!==""&&l(x,f).selectAll("."+d.sankeyLink).filter(function(u){return u.link.label===L}).style("fill",function(u){return u.tinyColorHue}).style("fill-opacity",function(u){return u.tinyColorAlpha})}),k&&l(x,f).selectAll(d.sankeyNode).filter(p(f)).call(h)}function c(f,x){var k=f.hoverlabel||{},y=E.nestedProperty(k,x).get();return Array.isArray(y)?!1:y}Q.exports=function(f,x){for(var k=f._fullLayout,y=k._paper,A=k._size,L=0;L<f._fullData.length;L++)if(f._fullData[L].visible&&f._fullData[L].type===d.sankey&&!f._fullData[L]._viewInitial){var u=f._fullData[L].node;f._fullData[L]._viewInitial={node:{groups:u.groups.slice(),x:u.x.slice(),y:u.y.slice()}}}var m=function(J,it){var nt=it.link;nt.originalEvent=M.event,f._hoverdata=[nt],T.click(f,{target:!0})},S=function(J,it,nt){f._fullLayout.hovermode!==!1&&(M.select(J).call(_.bind(0,it,nt,!0)),it.link.trace.link.hoverinfo!=="skip"&&(it.link.fullData=it.link.trace,f.emit("plotly_hover",{event:M.event,points:[it.link]})))},w=r(f,"source:")+" ",I=r(f,"target:")+" ",O=r(f,"concentration:")+" ",D=r(f,"incoming flow count:")+" ",P=r(f,"outgoing flow count:")+" ",F=function(J,it){if(f._fullLayout.hovermode===!1)return;var nt=it.link.trace.link;if(nt.hoverinfo==="none"||nt.hoverinfo==="skip")return;var q=[];function Z(at){var et,ct;at.circular?(et=(at.circularPathData.leftInnerExtent+at.circularPathData.rightInnerExtent)/2,ct=at.circularPathData.verticalFullExtent):(et=(at.source.x1+at.target.x0)/2,ct=(at.y0+at.y1)/2);var ft=[et,ct];return at.trace.orientation==="v"&&ft.reverse(),ft[0]+=it.parent.translateX,ft[1]+=it.parent.translateY,ft}for(var $=0,V=0;V<it.flow.links.length;V++){var rt=it.flow.links[V];if(!(f._fullLayout.hovermode==="closest"&&it.link.pointNumber!==rt.pointNumber)){it.link.pointNumber===rt.pointNumber&&($=V),rt.fullData=rt.trace,nt=it.link.trace.link;var ot=Z(rt),H={valueLabel:i(it.valueFormat)(rt.value)+it.valueSuffix};q.push({x:ot[0],y:ot[1],name:H.valueLabel,text:[rt.label||"",w+rt.source.label,I+rt.target.label,rt.concentrationscale?O+i("%0.2f")(rt.flow.labelConcentration):""].filter(e).join("<br>"),color:c(nt,"bgcolor")||v.addOpacity(rt.color,1),borderColor:c(nt,"bordercolor"),fontFamily:c(nt,"font.family"),fontSize:c(nt,"font.size"),fontColor:c(nt,"font.color"),nameLength:c(nt,"namelength"),textAlign:c(nt,"align"),idealAlign:M.event.x<ot[0]?"right":"left",hovertemplate:nt.hovertemplate,hovertemplateLabels:H,eventData:[rt]})}}var Y=T.loneHover(q,{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:f,anchorIndex:$});Y.each(function(){var at=this;it.link.concentrationscale||n(at,.65),s(at)})},R=function(J,it,nt){f._fullLayout.hovermode!==!1&&(M.select(J).call(a.bind(0,it,nt,!0)),it.link.trace.link.hoverinfo!=="skip"&&(it.link.fullData=it.link.trace,f.emit("plotly_unhover",{event:M.event,points:[it.link]})),T.loneUnhover(k._hoverlayer.node()))},B=function(J,it,nt){var q=it.node;q.originalEvent=M.event,f._hoverdata=[q],M.select(J).call(h,it,nt),T.click(f,{target:!0})},N=function(J,it,nt){f._fullLayout.hovermode!==!1&&(M.select(J).call(b,it,nt),it.node.trace.node.hoverinfo!=="skip"&&(it.node.fullData=it.node.trace,f.emit("plotly_hover",{event:M.event,points:[it.node]})))},G=function(J,it){if(f._fullLayout.hovermode!==!1){var nt=it.node.trace.node;if(!(nt.hoverinfo==="none"||nt.hoverinfo==="skip")){var q=M.select(J).select("."+d.nodeRect),Z=f._fullLayout._paperdiv.node().getBoundingClientRect(),$=q.node().getBoundingClientRect(),V=$.left-2-Z.left,rt=$.right+2-Z.left,ot=$.top+$.height/4-Z.top,H={valueLabel:i(it.valueFormat)(it.node.value)+it.valueSuffix};it.node.fullData=it.node.trace,f._fullLayout._calcInverseTransform(f);var Y=f._fullLayout._invScaleX,at=f._fullLayout._invScaleY,et=T.loneHover({x0:Y*V,x1:Y*rt,y:at*ot,name:i(it.valueFormat)(it.node.value)+it.valueSuffix,text:[it.node.label,D+it.node.targetLinks.length,P+it.node.sourceLinks.length].filter(e).join("<br>"),color:c(nt,"bgcolor")||it.tinyColorHue,borderColor:c(nt,"bordercolor"),fontFamily:c(nt,"font.family"),fontSize:c(nt,"font.size"),fontColor:c(nt,"font.color"),nameLength:c(nt,"namelength"),textAlign:c(nt,"align"),idealAlign:"left",hovertemplate:nt.hovertemplate,hovertemplateLabels:H,eventData:[it.node]},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:f});n(et,.85),s(et)}}},X=function(J,it,nt){f._fullLayout.hovermode!==!1&&(M.select(J).call(h,it,nt),it.node.trace.node.hoverinfo!=="skip"&&(it.node.fullData=it.node.trace,f.emit("plotly_unhover",{event:M.event,points:[it.node]})),T.loneUnhover(k._hoverlayer.node()))};C(f,y,x,{width:A.w,height:A.h,margin:{t:A.t,r:A.r,b:A.b,l:A.l}},{linkEvents:{hover:S,follow:F,unhover:R,select:m},nodeEvents:{hover:N,follow:G,unhover:X,select:B}})}},83248:function(Q,U,t){var M=t(49812),E=t(67756).Gz,i=t(33428),C=t(26800),T=t(48932),v=t(11820),d=t(49760),r=t(76308),e=t(43616),l=t(3400),n=l.strTranslate,s=l.strRotate,o=t(71688),p=o.keyFun,b=o.repeat,h=o.unwrap,_=t(72736),a=t(24040),c=t(84284),f=c.CAP_SHIFT,x=c.LINE_SPACING,k=3;function y($,V,rt){var ot=h(V),H=ot.trace,Y=H.domain,at=H.orientation==="h",et=H.node.pad,ct=H.node.thickness,ft={justify:C.sankeyJustify,left:C.sankeyLeft,right:C.sankeyRight,center:C.sankeyCenter}[H.node.align],yt=$.width*(Y.x[1]-Y.x[0]),xt=$.height*(Y.y[1]-Y.y[0]),Ct=ot._nodes,gt=ot._links,mt=ot.circular,vt;mt?vt=T.sankeyCircular().circularLinkGap(0):vt=C.sankey(),vt.iterations(v.sankeyIterations).size(at?[yt,xt]:[xt,yt]).nodeWidth(ct).nodePadding(et).nodeId(function(Tt){return Tt.pointNumber}).nodeAlign(ft).nodes(Ct).links(gt);var At=vt();vt.nodePadding()<et&&l.warn("node.pad was reduced to ",vt.nodePadding()," to fit within the figure.");var Ot,It,St;for(var Bt in ot._groupLookup){var re=parseInt(ot._groupLookup[Bt]),Yt;for(Ot=0;Ot<At.nodes.length;Ot++)if(At.nodes[Ot].pointNumber===re){Yt=At.nodes[Ot];break}if(Yt){var he={pointNumber:parseInt(Bt),x0:Yt.x0,x1:Yt.x1,y0:Yt.y0,y1:Yt.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};At.nodes.unshift(he),Yt.childrenNodes.unshift(he)}}function Zt(){for(Ot=0;Ot<At.nodes.length;Ot++){var Tt=At.nodes[Ot],Ft={},$t,Vt;for(It=0;It<Tt.targetLinks.length;It++)Vt=Tt.targetLinks[It],$t=Vt.source.pointNumber+":"+Vt.target.pointNumber,Ft.hasOwnProperty($t)||(Ft[$t]=[]),Ft[$t].push(Vt);var Nt=Object.keys(Ft);for(It=0;It<Nt.length;It++){$t=Nt[It];var Mt=Ft[$t],Et=0,Dt={};for(St=0;St<Mt.length;St++)Vt=Mt[St],Dt[Vt.label]||(Dt[Vt.label]=0),Dt[Vt.label]+=Vt.value,Et+=Vt.value;for(St=0;St<Mt.length;St++)Vt=Mt[St],Vt.flow={value:Et,labelConcentration:Dt[Vt.label]/Et,concentration:Vt.value/Et,links:Mt},Vt.concentrationscale&&(Vt.color=d(Vt.concentrationscale(Vt.flow.labelConcentration)))}var dt=0;for(It=0;It<Tt.sourceLinks.length;It++)dt+=Tt.sourceLinks[It].value;for(It=0;It<Tt.sourceLinks.length;It++)Vt=Tt.sourceLinks[It],Vt.concentrationOut=Vt.value/dt;var ht=0;for(It=0;It<Tt.targetLinks.length;It++)ht+=Tt.targetLinks[It].value;for(It=0;It<Tt.targetLinks.length;It++)Vt=Tt.targetLinks[It],Vt.concenrationIn=Vt.value/ht}}Zt();function ae(Tt){Tt.forEach(function(Ft){var $t,Vt,Nt=0,Mt=Ft.length,Et;for(Ft.sort(function(Dt,dt){return Dt.y0-dt.y0}),Et=0;Et<Mt;++Et)$t=Ft[Et],$t.y0>=Nt||(Vt=Nt-$t.y0,Vt>1e-6&&($t.y0+=Vt,$t.y1+=Vt)),Nt=$t.y1+et})}function oe(Tt){var Ft=Tt.map(function(dt,ht){return{x0:dt.x0,index:ht}}).sort(function(dt,ht){return dt.x0-ht.x0}),$t=[],Vt=-1,Nt,Mt=-1/0,Et;for(Ot=0;Ot<Ft.length;Ot++){var Dt=Tt[Ft[Ot].index];Dt.x0>Mt+ct&&(Vt+=1,Nt=Dt.x0),Mt=Dt.x0,$t[Vt]||($t[Vt]=[]),$t[Vt].push(Dt),Et=Nt-Dt.x0,Dt.x0+=Et,Dt.x1+=Et}return $t}if(H.node.x.length&&H.node.y.length){for(Ot=0;Ot<Math.min(H.node.x.length,H.node.y.length,At.nodes.length);Ot++)if(H.node.x[Ot]&&H.node.y[Ot]){var ce=[H.node.x[Ot]*yt,H.node.y[Ot]*xt];At.nodes[Ot].x0=ce[0]-ct/2,At.nodes[Ot].x1=ce[0]+ct/2;var ue=At.nodes[Ot].y1-At.nodes[Ot].y0;At.nodes[Ot].y0=ce[1]-ue/2,At.nodes[Ot].y1=ce[1]+ue/2}if(H.arrangement==="snap"){Ct=At.nodes;var ye=oe(Ct);ae(ye)}vt.update(At)}return{circular:mt,key:rt,trace:H,guid:l.randstr(),horizontal:at,width:yt,height:xt,nodePad:H.node.pad,nodeLineColor:H.node.line.color,nodeLineWidth:H.node.line.width,linkLineColor:H.link.line.color,linkLineWidth:H.link.line.width,linkArrowLength:H.link.arrowlen,valueFormat:H.valueformat,valueSuffix:H.valuesuffix,textFont:H.textfont,translateX:Y.x[0]*$.width+$.margin.l,translateY:$.height-Y.y[1]*$.height+$.margin.t,dragParallel:at?xt:yt,dragPerpendicular:at?yt:xt,arrangement:H.arrangement,sankey:vt,graph:At,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function A($,V,rt){var ot=d(V.color),H=d(V.hovercolor),Y=V.source.label+"|"+V.target.label,at=Y+"__"+rt;return V.trace=$.trace,V.curveNumber=$.trace.index,{circular:$.circular,key:at,traceId:$.key,pointNumber:V.pointNumber,link:V,tinyColorHue:r.tinyRGB(ot),tinyColorAlpha:ot.getAlpha(),tinyColorHoverHue:r.tinyRGB(H),tinyColorHoverAlpha:H.getAlpha(),linkPath:u,linkLineColor:$.linkLineColor,linkLineWidth:$.linkLineWidth,linkArrowLength:$.linkArrowLength,valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,parent:$,interactionState:$.interactionState,flow:V.flow}}function L($,V){var rt="",ot=$.width/2,H=$.circularPathData;return $.circularLinkType==="top"?rt="M "+(H.targetX-V)+" "+(H.targetY+ot)+" L"+(H.rightInnerExtent-V)+" "+(H.targetY+ot)+"A"+(H.rightLargeArcRadius+ot)+" "+(H.rightSmallArcRadius+ot)+" 0 0 1 "+(H.rightFullExtent-ot-V)+" "+(H.targetY-H.rightSmallArcRadius)+"L"+(H.rightFullExtent-ot-V)+" "+H.verticalRightInnerExtent+"A"+(H.rightLargeArcRadius+ot)+" "+(H.rightLargeArcRadius+ot)+" 0 0 1 "+(H.rightInnerExtent-V)+" "+(H.verticalFullExtent-ot)+"L"+H.leftInnerExtent+" "+(H.verticalFullExtent-ot)+"A"+(H.leftLargeArcRadius+ot)+" "+(H.leftLargeArcRadius+ot)+" 0 0 1 "+(H.leftFullExtent+ot)+" "+H.verticalLeftInnerExtent+"L"+(H.leftFullExtent+ot)+" "+(H.sourceY-H.leftSmallArcRadius)+"A"+(H.leftLargeArcRadius+ot)+" "+(H.leftSmallArcRadius+ot)+" 0 0 1 "+H.leftInnerExtent+" "+(H.sourceY+ot)+"L"+H.sourceX+" "+(H.sourceY+ot)+"L"+H.sourceX+" "+(H.sourceY-ot)+"L"+H.leftInnerExtent+" "+(H.sourceY-ot)+"A"+(H.leftLargeArcRadius-ot)+" "+(H.leftSmallArcRadius-ot)+" 0 0 0 "+(H.leftFullExtent-ot)+" "+(H.sourceY-H.leftSmallArcRadius)+"L"+(H.leftFullExtent-ot)+" "+H.verticalLeftInnerExtent+"A"+(H.leftLargeArcRadius-ot)+" "+(H.leftLargeArcRadius-ot)+" 0 0 0 "+H.leftInnerExtent+" "+(H.verticalFullExtent+ot)+"L"+(H.rightInnerExtent-V)+" "+(H.verticalFullExtent+ot)+"A"+(H.rightLargeArcRadius-ot)+" "+(H.rightLargeArcRadius-ot)+" 0 0 0 "+(H.rightFullExtent+ot-V)+" "+H.verticalRightInnerExtent+"L"+(H.rightFullExtent+ot-V)+" "+(H.targetY-H.rightSmallArcRadius)+"A"+(H.rightLargeArcRadius-ot)+" "+(H.rightSmallArcRadius-ot)+" 0 0 0 "+(H.rightInnerExtent-V)+" "+(H.targetY-ot)+"L"+(H.targetX-V)+" "+(H.targetY-ot)+(V>0?"L"+H.targetX+" "+H.targetY:"")+"Z":rt="M "+(H.targetX-V)+" "+(H.targetY-ot)+" L"+(H.rightInnerExtent-V)+" "+(H.targetY-ot)+"A"+(H.rightLargeArcRadius+ot)+" "+(H.rightSmallArcRadius+ot)+" 0 0 0 "+(H.rightFullExtent-ot-V)+" "+(H.targetY+H.rightSmallArcRadius)+"L"+(H.rightFullExtent-ot-V)+" "+H.verticalRightInnerExtent+"A"+(H.rightLargeArcRadius+ot)+" "+(H.rightLargeArcRadius+ot)+" 0 0 0 "+(H.rightInnerExtent-V)+" "+(H.verticalFullExtent+ot)+"L"+H.leftInnerExtent+" "+(H.verticalFullExtent+ot)+"A"+(H.leftLargeArcRadius+ot)+" "+(H.leftLargeArcRadius+ot)+" 0 0 0 "+(H.leftFullExtent+ot)+" "+H.verticalLeftInnerExtent+"L"+(H.leftFullExtent+ot)+" "+(H.sourceY+H.leftSmallArcRadius)+"A"+(H.leftLargeArcRadius+ot)+" "+(H.leftSmallArcRadius+ot)+" 0 0 0 "+H.leftInnerExtent+" "+(H.sourceY-ot)+"L"+H.sourceX+" "+(H.sourceY-ot)+"L"+H.sourceX+" "+(H.sourceY+ot)+"L"+H.leftInnerExtent+" "+(H.sourceY+ot)+"A"+(H.leftLargeArcRadius-ot)+" "+(H.leftSmallArcRadius-ot)+" 0 0 1 "+(H.leftFullExtent-ot)+" "+(H.sourceY+H.leftSmallArcRadius)+"L"+(H.leftFullExtent-ot)+" "+H.verticalLeftInnerExtent+"A"+(H.leftLargeArcRadius-ot)+" "+(H.leftLargeArcRadius-ot)+" 0 0 1 "+H.leftInnerExtent+" "+(H.verticalFullExtent-ot)+"L"+(H.rightInnerExtent-V)+" "+(H.verticalFullExtent-ot)+"A"+(H.rightLargeArcRadius-ot)+" "+(H.rightLargeArcRadius-ot)+" 0 0 1 "+(H.rightFullExtent+ot-V)+" "+H.verticalRightInnerExtent+"L"+(H.rightFullExtent+ot-V)+" "+(H.targetY+H.rightSmallArcRadius)+"A"+(H.rightLargeArcRadius-ot)+" "+(H.rightSmallArcRadius-ot)+" 0 0 1 "+(H.rightInnerExtent-V)+" "+(H.targetY+ot)+"L"+(H.targetX-V)+" "+(H.targetY+ot)+(V>0?"L"+H.targetX+" "+H.targetY:"")+"Z",rt}function u(){var $=.5;function V(rt){var ot=rt.linkArrowLength;if(rt.link.circular)return L(rt.link,ot);var H=Math.abs((rt.link.target.x0-rt.link.source.x1)/2);ot>H&&(ot=H);var Y=rt.link.source.x1,at=rt.link.target.x0-ot,et=E(Y,at),ct=et($),ft=et(1-$),yt=rt.link.y0-rt.link.width/2,xt=rt.link.y0+rt.link.width/2,Ct=rt.link.y1-rt.link.width/2,gt=rt.link.y1+rt.link.width/2,mt="M"+Y+","+yt,vt="C"+ct+","+yt+" "+ft+","+Ct+" "+at+","+Ct,At="C"+ft+","+gt+" "+ct+","+xt+" "+Y+","+xt,Ot=ot>0?"L"+(at+ot)+","+(Ct+rt.link.width/2):"";return Ot+="L"+at+","+gt,mt+vt+Ot+At+"Z"}return V}function m($,V){var rt=d(V.color),ot=v.nodePadAcross,H=$.nodePad/2;V.dx=V.x1-V.x0,V.dy=V.y1-V.y0;var Y=V.dx,at=Math.max(.5,V.dy),et="node_"+V.pointNumber;return V.group&&(et=l.randstr()),V.trace=$.trace,V.curveNumber=$.trace.index,{index:V.pointNumber,key:et,partOfGroup:V.partOfGroup||!1,group:V.group,traceId:$.key,trace:$.trace,node:V,nodePad:$.nodePad,nodeLineColor:$.nodeLineColor,nodeLineWidth:$.nodeLineWidth,textFont:$.textFont,size:$.horizontal?$.height:$.width,visibleWidth:Math.ceil(Y),visibleHeight:at,zoneX:-ot,zoneY:-H,zoneWidth:Y+2*ot,zoneHeight:at+2*H,labelY:$.horizontal?V.dy/2+1:V.dx/2+1,left:V.originalLayer===1,sizeAcross:$.width,forceLayouts:$.forceLayouts,horizontal:$.horizontal,darkBackground:rt.getBrightness()<=128,tinyColorHue:r.tinyRGB(rt),tinyColorAlpha:rt.getAlpha(),valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,graph:$.graph,arrangement:$.arrangement,uniqueNodeLabelPathId:[$.guid,$.key,et].join("_"),interactionState:$.interactionState,figure:$}}function S($){$.attr("transform",function(V){return n(V.node.x0.toFixed(3),V.node.y0.toFixed(3))})}function w($){$.call(S)}function I($,V){$.call(w),V.attr("d",u())}function O($){$.attr("width",function(V){return V.node.x1-V.node.x0}).attr("height",function(V){return V.visibleHeight})}function D($){return $.link.width>1||$.linkLineWidth>0}function P($){var V=n($.translateX,$.translateY);return V+($.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function F($,V,rt){$.on(".basic",null).on("mouseover.basic",function(ot){!ot.interactionState.dragInProgress&&!ot.partOfGroup&&(rt.hover(this,ot,V),ot.interactionState.hovered=[this,ot])}).on("mousemove.basic",function(ot){!ot.interactionState.dragInProgress&&!ot.partOfGroup&&(rt.follow(this,ot),ot.interactionState.hovered=[this,ot])}).on("mouseout.basic",function(ot){!ot.interactionState.dragInProgress&&!ot.partOfGroup&&(rt.unhover(this,ot,V),ot.interactionState.hovered=!1)}).on("click.basic",function(ot){ot.interactionState.hovered&&(rt.unhover(this,ot,V),ot.interactionState.hovered=!1),!ot.interactionState.dragInProgress&&!ot.partOfGroup&&rt.select(this,ot,V)})}function R($,V,rt,ot){var H=i.behavior.drag().origin(function(Y){return{x:Y.node.x0+Y.visibleWidth/2,y:Y.node.y0+Y.visibleHeight/2}}).on("dragstart",function(Y){if(Y.arrangement!=="fixed"&&(l.ensureSingle(ot._fullLayout._infolayer,"g","dragcover",function(et){ot._fullLayout._dragCover=et}),l.raiseToTop(this),Y.interactionState.dragInProgress=Y.node,it(Y.node),Y.interactionState.hovered&&(rt.nodeEvents.unhover.apply(0,Y.interactionState.hovered),Y.interactionState.hovered=!1),Y.arrangement==="snap")){var at=Y.traceId+"|"+Y.key;Y.forceLayouts[at]?Y.forceLayouts[at].alpha(1):B($,at,Y),N($,V,Y,at,ot)}}).on("drag",function(Y){if(Y.arrangement!=="fixed"){var at=i.event.x,et=i.event.y;Y.arrangement==="snap"?(Y.node.x0=at-Y.visibleWidth/2,Y.node.x1=at+Y.visibleWidth/2,Y.node.y0=et-Y.visibleHeight/2,Y.node.y1=et+Y.visibleHeight/2):(Y.arrangement==="freeform"&&(Y.node.x0=at-Y.visibleWidth/2,Y.node.x1=at+Y.visibleWidth/2),et=Math.max(0,Math.min(Y.size-Y.visibleHeight/2,et)),Y.node.y0=et-Y.visibleHeight/2,Y.node.y1=et+Y.visibleHeight/2),it(Y.node),Y.arrangement!=="snap"&&(Y.sankey.update(Y.graph),I($.filter(nt(Y)),V))}}).on("dragend",function(Y){if(Y.arrangement!=="fixed"){Y.interactionState.dragInProgress=!1;for(var at=0;at<Y.node.childrenNodes.length;at++)Y.node.childrenNodes[at].x=Y.node.x,Y.node.childrenNodes[at].y=Y.node.y;Y.arrangement!=="snap"&&X(Y,ot)}});$.on(".drag",null).call(H)}function B($,V,rt,ot){q(rt.graph.nodes);var H=rt.graph.nodes.filter(function(Y){return Y.originalX===rt.node.originalX}).filter(function(Y){return!Y.partOfGroup});rt.forceLayouts[V]=M.forceSimulation(H).alphaDecay(0).force("collide",M.forceCollide().radius(function(Y){return Y.dy/2+rt.nodePad/2}).strength(1).iterations(v.forceIterations)).force("constrain",G($,V,H,rt)).stop()}function N($,V,rt,ot,H){window.requestAnimationFrame(function Y(){var at;for(at=0;at<v.forceTicksPerFrame;at++)rt.forceLayouts[ot].tick();var et=rt.graph.nodes;if(Z(et),rt.sankey.update(rt.graph),I($.filter(nt(rt)),V),rt.forceLayouts[ot].alpha()>0)window.requestAnimationFrame(Y);else{var ct=rt.node.originalX;rt.node.x0=ct-rt.visibleWidth/2,rt.node.x1=ct+rt.visibleWidth/2,X(rt,H)}})}function G($,V,rt,ot){return function(){for(var H=0,Y=0;Y<rt.length;Y++){var at=rt[Y];at===ot.interactionState.dragInProgress?(at.x=at.lastDraggedX,at.y=at.lastDraggedY):(at.vx=(at.originalX-at.x)/v.forceTicksPerFrame,at.y=Math.min(ot.size-at.dy/2,Math.max(at.dy/2,at.y))),H=Math.max(H,Math.abs(at.vx),Math.abs(at.vy))}!ot.interactionState.dragInProgress&&H<.1&&ot.forceLayouts[V].alpha()>0&&ot.forceLayouts[V].alpha(0)}}function X($,V){for(var rt=[],ot=[],H=0;H<$.graph.nodes.length;H++){var Y=($.graph.nodes[H].x0+$.graph.nodes[H].x1)/2,at=($.graph.nodes[H].y0+$.graph.nodes[H].y1)/2;rt.push(Y/$.figure.width),ot.push(at/$.figure.height)}a.call("_guiRestyle",V,{"node.x":[rt],"node.y":[ot]},$.trace.index).then(function(){V._fullLayout._dragCover&&V._fullLayout._dragCover.remove()})}function J($){var V=[],rt;for(rt=0;rt<$.length;rt++)$[rt].originalX=($[rt].x0+$[rt].x1)/2,$[rt].originalY=($[rt].y0+$[rt].y1)/2,V.indexOf($[rt].originalX)===-1&&V.push($[rt].originalX);for(V.sort(function(ot,H){return ot-H}),rt=0;rt<$.length;rt++)$[rt].originalLayerIndex=V.indexOf($[rt].originalX),$[rt].originalLayer=$[rt].originalLayerIndex/(V.length-1)}function it($){$.lastDraggedX=$.x0+$.dx/2,$.lastDraggedY=$.y0+$.dy/2}function nt($){return function(V){return V.node.originalX===$.node.originalX}}function q($){for(var V=0;V<$.length;V++)$[V].y=($[V].y0+$[V].y1)/2,$[V].x=($[V].x0+$[V].x1)/2}function Z($){for(var V=0;V<$.length;V++)$[V].y0=$[V].y-$[V].dy/2,$[V].y1=$[V].y0+$[V].dy,$[V].x0=$[V].x-$[V].dx/2,$[V].x1=$[V].x0+$[V].dx}Q.exports=function($,V,rt,ot,H){var Y=$._context.staticPlot,at=!1;l.ensureSingle($._fullLayout._infolayer,"g","first-render",function(){at=!0});var et=$._fullLayout._dragCover,ct=rt.filter(function(At){return h(At).trace.visible}).map(y.bind(null,ot)),ft=V.selectAll("."+v.cn.sankey).data(ct,p);ft.exit().remove(),ft.enter().append("g").classed(v.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",Y?"none":"auto").attr("transform",P),ft.each(function(At,Ot){$._fullData[Ot]._sankey=At;var It="bgsankey-"+At.trace.uid+"-"+Ot;l.ensureSingle($._fullLayout._draggers,"rect",It),$._fullData[Ot]._bgRect=i.select("."+It),$._fullData[Ot]._bgRect.style("pointer-events",Y?"none":"all").attr("width",At.width).attr("height",At.height).attr("x",At.translateX).attr("y",At.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ft.transition().ease(v.ease).duration(v.duration).attr("transform",P);var yt=ft.selectAll("."+v.cn.sankeyLinks).data(b,p);yt.enter().append("g").classed(v.cn.sankeyLinks,!0).style("fill","none");var xt=yt.selectAll("."+v.cn.sankeyLink).data(function(At){var Ot=At.graph.links;return Ot.filter(function(It){return It.value}).map(A.bind(null,At))},p);xt.enter().append("path").classed(v.cn.sankeyLink,!0).call(F,ft,H.linkEvents),xt.style("stroke",function(At){return D(At)?r.tinyRGB(d(At.linkLineColor)):At.tinyColorHue}).style("stroke-opacity",function(At){return D(At)?r.opacity(At.linkLineColor):At.tinyColorAlpha}).style("fill",function(At){return At.tinyColorHue}).style("fill-opacity",function(At){return At.tinyColorAlpha}).style("stroke-width",function(At){return D(At)?At.linkLineWidth:1}).attr("d",u()),xt.style("opacity",function(){return $._context.staticPlot||at||et?1:0}).transition().ease(v.ease).duration(v.duration).style("opacity",1),xt.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var Ct=ft.selectAll("."+v.cn.sankeyNodeSet).data(b,p);Ct.enter().append("g").classed(v.cn.sankeyNodeSet,!0),Ct.style("cursor",function(At){switch(At.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var gt=Ct.selectAll("."+v.cn.sankeyNode).data(function(At){var Ot=At.graph.nodes;return J(Ot),Ot.map(m.bind(null,At))},p);gt.enter().append("g").classed(v.cn.sankeyNode,!0).call(S).style("opacity",function(At){return($._context.staticPlot||at)&&!At.partOfGroup?1:0}),gt.call(F,ft,H.nodeEvents).call(R,xt,H,$),gt.transition().ease(v.ease).duration(v.duration).call(S).style("opacity",function(At){return At.partOfGroup?0:1}),gt.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var mt=gt.selectAll("."+v.cn.nodeRect).data(b);mt.enter().append("rect").classed(v.cn.nodeRect,!0).call(O),mt.style("stroke-width",function(At){return At.nodeLineWidth}).style("stroke",function(At){return r.tinyRGB(d(At.nodeLineColor))}).style("stroke-opacity",function(At){return r.opacity(At.nodeLineColor)}).style("fill",function(At){return At.tinyColorHue}).style("fill-opacity",function(At){return At.tinyColorAlpha}),mt.transition().ease(v.ease).duration(v.duration).call(O);var vt=gt.selectAll("."+v.cn.nodeLabel).data(b);vt.enter().append("text").classed(v.cn.nodeLabel,!0).style("cursor","default"),vt.attr("data-notex",1).text(function(At){return At.node.label}).each(function(At){var Ot=i.select(this);e.font(Ot,At.textFont),_.convertToTspans(Ot,$)}).style("text-shadow",_.makeTextShadow($._fullLayout.paper_bgcolor)).attr("text-anchor",function(At){return At.horizontal&&At.left?"end":"start"}).attr("transform",function(At){var Ot=i.select(this),It=_.lineCount(Ot),St=At.textFont.size*((It-1)*x-f),Bt=At.nodeLineWidth/2+k,re=((At.horizontal?At.visibleHeight:At.visibleWidth)-St)/2;At.horizontal&&(At.left?Bt=-Bt:Bt+=At.visibleWidth);var Yt=At.horizontal?"":"scale(-1,1)"+s(90);return n(At.horizontal?Bt:re,At.horizontal?re:Bt)+Yt}),vt.transition().ease(v.ease).duration(v.duration)}},81128:function(Q){Q.exports=function(U,t){for(var M=U.cd,E=[],i=M[0].trace,C=i._sankey.graph.nodes,T=0;T<C.length;T++){var v=C[T];if(!v.partOfGroup){var d=[(v.x0+v.x1)/2,(v.y0+v.y1)/2];i.orientation==="v"&&d.reverse(),t&&t.contains(d,!1,T,U)&&E.push({pointNumber:v.pointNumber})}}return E}},20148:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){for(var C=0;C<E.length;C++)E[C].i=C;M.mergeArray(i.text,E,"tx"),M.mergeArray(i.texttemplate,E,"txt"),M.mergeArray(i.hovertext,E,"htx"),M.mergeArray(i.customdata,E,"data"),M.mergeArray(i.textposition,E,"tp"),i.textfont&&(M.mergeArrayCastPositive(i.textfont.size,E,"ts"),M.mergeArray(i.textfont.color,E,"tc"),M.mergeArray(i.textfont.family,E,"tf"));var T=i.marker;if(T){M.mergeArrayCastPositive(T.size,E,"ms"),M.mergeArrayCastPositive(T.opacity,E,"mo"),M.mergeArray(T.symbol,E,"mx"),M.mergeArray(T.angle,E,"ma"),M.mergeArray(T.standoff,E,"mf"),M.mergeArray(T.color,E,"mc");var v=T.line;T.line&&(M.mergeArray(v.color,E,"mlc"),M.mergeArrayCastPositive(v.width,E,"mlw"));var d=T.gradient;d&&d.type!=="none"&&(M.mergeArray(d.type,E,"mgt"),M.mergeArray(d.color,E,"mgc"))}}},52904:function(Q,U,t){var M=t(29736).axisHoverFormat,E=t(21776).Gw,i=t(21776).Ks,C=t(49084),T=t(25376),v=t(98192).u,d=t(98192).c,r=t(43616),e=t(88200),l=t(92880).extendFlat,n=t(98304);function s(b){return{valType:"any",dflt:0,editType:"calc"}}function o(b){return{valType:"any",editType:"calc"}}function p(b){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}Q.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:p(),yperiodalignment:p(),xhoverformat:M("x"),yhoverformat:M("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:E({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:e.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:l({},v,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:n(!0),fillgradient:l({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:d,marker:l({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:l({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},C("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},C("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:T({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(Q,U,t){var M=t(38248),E=t(3400),i=t(54460),C=t(1220),T=t(39032).BADNUM,v=t(43028),d=t(90136),r=t(20148),e=t(4500);function l(h,_){var a=h._fullLayout,c=_._xA=i.getFromId(h,_.xaxis||"x","x"),f=_._yA=i.getFromId(h,_.yaxis||"y","y"),x=c.makeCalcdata(_,"x"),k=f.makeCalcdata(_,"y"),y=C(_,c,"x",x),A=C(_,f,"y",k),L=y.vals,u=A.vals,m=_._length,S=new Array(m),w=_.ids,I=b(_,a,c,f),O=!1,D,P,F,R,B,N;o(a,_);var G="x",X="y",J;if(I)E.pushUnique(I.traceIndices,_._expandedIndex),D=I.orientation==="v",D?(X="s",J="x"):(G="s",J="y"),B=I.stackgaps==="interpolate";else{var it=s(_,m);n(h,_,c,f,L,u,it)}var nt=!!_.xperiodalignment,q=!!_.yperiodalignment;for(P=0;P<m;P++){var Z=S[P]={},$=M(L[P]),V=M(u[P]);$&&V?(Z[G]=L[P],Z[X]=u[P],nt&&(Z.orig_x=x[P],Z.xEnd=y.ends[P],Z.xStart=y.starts[P]),q&&(Z.orig_y=k[P],Z.yEnd=A.ends[P],Z.yStart=A.starts[P])):I&&(D?$:V)?(Z[J]=D?L[P]:u[P],Z.gap=!0,B?(Z.s=T,O=!0):Z.s=0):Z[G]=Z[X]=T,w&&(Z.id=String(w[P]))}if(r(S,_),d(h,_),e(S,_),I){for(P=0;P<S.length;)S[P][J]===T?S.splice(P,1):P++;if(E.sort(S,function(Y,at){return Y[J]-at[J]||Y.i-at.i}),O){for(P=0;P<S.length-1&&S[P].gap;)P++;for(N=S[P].s,N||(N=S[P].s=0),F=0;F<P;F++)S[F].s=N;for(R=S.length-1;R>P&&S[R].gap;)R--;for(N=S[R].s,F=S.length-1;F>R;F--)S[F].s=N;for(;P<R;)if(P++,S[P].gap){for(F=P+1;S[F].gap;)F++;for(var rt=S[P-1][J],ot=S[P-1].s,H=(S[F].s-ot)/(S[F][J]-rt);P<F;)S[P].s=ot+(S[P][J]-rt)*H,P++}}}return S}function n(h,_,a,c,f,x,k){var y=_._length,A=h._fullLayout,L=a._id,u=c._id,m=A._firstScatter[p(_)]===_.uid,S=(b(_,A,a,c)||{}).orientation,w=_.fill;a._minDtick=0,c._minDtick=0;var I={padded:!0},O={padded:!0};k&&(I.ppad=O.ppad=k);var D=y<2||f[0]!==f[y-1]||x[0]!==x[y-1];D&&(w==="tozerox"||w==="tonextx"&&(m||S==="h"))?I.tozero=!0:!(_.error_y||{}).visible&&(w==="tonexty"||w==="tozeroy"||!v.hasMarkers(_)&&!v.hasText(_))&&(I.padded=!1,I.ppad=0),D&&(w==="tozeroy"||w==="tonexty"&&(m||S==="v"))?O.tozero=!0:(w==="tonextx"||w==="tozerox")&&(O.padded=!1),L&&(_._extremes[L]=i.findExtremes(a,f,I)),u&&(_._extremes[u]=i.findExtremes(c,x,O))}function s(h,_){if(v.hasMarkers(h)){var a=h.marker,c=1.6*(h.marker.sizeref||1),f;if(h.marker.sizemode==="area"?f=function(L){return Math.max(Math.sqrt((L||0)/c),3)}:f=function(L){return Math.max((L||0)/c,3)},E.isArrayOrTypedArray(a.size)){var x={type:"linear"};i.setConvert(x);for(var k=x.makeCalcdata(h.marker,"size"),y=new Array(_),A=0;A<_;A++)y[A]=f(k[A]);return y}else return f(a.size)}}function o(h,_){var a=p(_),c=h._firstScatter;c[a]||(c[a]=_.uid)}function p(h){var _=h.stackgroup;return h.xaxis+h.yaxis+h.type+(_?"-"+_:"")}function b(h,_,a,c){var f=h.stackgroup;if(f){var x=_._scatterStackOpts[a._id+c._id][f],k=x.orientation==="v"?c:a;if(k.type==="linear"||k.type==="log")return x}}Q.exports={calc:l,calcMarkerSize:s,calcAxisExpansion:n,setFirstScatter:o,getStackOpts:b}},4500:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){M.isArrayOrTypedArray(i.selectedpoints)&&M.tagSelected(E,i)}},90136:function(Q,U,t){var M=t(94288).hasColorscale,E=t(47128),i=t(43028);Q.exports=function(C,T){i.hasLines(T)&&M(T,"line")&&E(C,T,{vals:T.line.color,containerStr:"line",cLetter:"c"}),i.hasMarkers(T)&&(M(T,"marker")&&E(C,T,{vals:T.marker.color,containerStr:"marker",cLetter:"c"}),M(T,"marker.line")&&E(C,T,{vals:T.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(Q){Q.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(Q,U,t){var M=t(16356),E=t(96376).setGroupPositions;function i(v,d){for(var r=d.xaxis,e=d.yaxis,l=v._fullLayout,n=v._fullData,s=v.calcdata,o=[],p=[],b=0;b<n.length;b++){var h=n[b];h.visible===!0&&h.type==="scatter"&&h.xaxis===r._id&&h.yaxis===e._id&&(h.orientation==="h"?o.push(s[b]):h.orientation==="v"&&p.push(s[b]))}var _={mode:l.scattermode,gap:l.scattergap};E(v,r,e,p,_),E(v,e,r,o,_)}Q.exports=function(v,d){v._fullLayout.scattermode==="group"&&i(v,d);var r=d.xaxis,e=d.yaxis,l=r._id+e._id,n=v._fullLayout._scatterStackOpts[l];if(n){var s=v.calcdata,o,p,b,h,_,a,c,f,x,k,y,A,L,u,m;for(var S in n){k=n[S];var w=k.traceIndices;if(w.length){for(y=k.stackgaps==="interpolate",A=k.groupnorm,k.orientation==="v"?(L="x",u="y"):(L="y",u="x"),m=new Array(w.length),o=0;o<m.length;o++)m[o]=!1;a=s[w[0]];var I=new Array(a.length);for(o=0;o<a.length;o++)I[o]=a[o][L];for(o=1;o<w.length;o++){for(_=s[w[o]],p=b=0;p<_.length;p++){for(c=_[p][L];c>I[b]&&b<I.length;b++)C(_,p,I[b],o,m,y,L),p++;if(c!==I[b]){for(h=0;h<o;h++)C(s[w[h]],b,c,h,m,y,L);I.splice(b,0,c)}b++}for(;b<I.length;b++)C(_,p,I[b],o,m,y,L),p++}var O=I.length;for(p=0;p<a.length;p++){for(f=a[p][u]=a[p].s,o=1;o<w.length;o++)_=s[w[o]],_[0].trace._rawLength=_[0].trace._length,_[0].trace._length=O,f+=_[p].s,_[p][u]=f;if(A)for(x=(A==="fraction"?f:f/100)||1,o=0;o<w.length;o++){var D=s[w[o]][p];D[u]/=x,D.sNorm=D.s/x}}for(o=0;o<w.length;o++){_=s[w[o]];var P=_[0].trace,F=M.calcMarkerSize(P,P._rawLength),R=Array.isArray(F);if(F&&m[o]||R){var B=F;for(F=new Array(O),p=0;p<O;p++)F[p]=_[p].gap?0:R?B[_[p].i]:B}var N=new Array(O),G=new Array(O);for(p=0;p<O;p++)N[p]=_[p].x,G[p]=_[p].y;M.calcAxisExpansion(v,P,r,e,N,G,F),_[0].t.orientation=k.orientation}}}}};function C(v,d,r,e,l,n,s){l[e]=!0;var o={i:null,gap:!0,s:0};if(o[s]=r,v.splice(d,0,o),d&&r===v[d-1][s]){var p=v[d-1];o.s=p.s,o.i=p.i,o.gap=p.gap}else n&&(o.s=T(v,d,r,s));d||(v[0].t=v[1].t,v[0].trace=v[1].trace,delete v[1].t,delete v[1].trace)}function T(v,d,r,e){var l=v[d-1],n=v[d+1];return n?l?l.s+(n.s-l.s)*(r-l[e])/(n[e]-l[e]):n.s:l.s}},35036:function(Q,U,t){var M=t(3400),E=t(20011),i=t(52904);Q.exports=function(C,T){var v,d,r;function e(p){return M.coerce(d._input,d,i,p)}if(T.scattermode==="group")for(r=0;r<C.length;r++)d=C[r],d.type==="scatter"&&(v=d._input,E(v,d,T,e));for(r=0;r<C.length;r++){var l=C[r];if(l.type==="scatter"){var n=l.fill;if(!(n==="none"||n==="toself")&&(l.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var s=r-1;s>=0;s--){var o=C[s];if(o.type==="scatter"&&o.xaxis===l.xaxis&&o.yaxis===l.yaxis){o.opacity=void 0;break}}}}}},18800:function(Q,U,t){var M=t(3400),E=t(24040),i=t(52904),C=t(88200),T=t(43028),v=t(43980),d=t(31147),r=t(43912),e=t(74428),l=t(66828),n=t(11731),s=t(124),o=t(70840),p=t(3400).coercePattern;Q.exports=function(b,h,_,a){function c(m,S){return M.coerce(b,h,i,m,S)}var f=v(b,h,a,c);if(f||(h.visible=!1),!!h.visible){d(b,h,a,c),c("xhoverformat"),c("yhoverformat"),c("zorder");var x=r(b,h,a,c);a.scattermode==="group"&&h.orientation===void 0&&c("orientation","v");var k=!x&&f<C.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("mode",k),T.hasMarkers(h)&&e(b,h,_,a,c,{gradient:!0}),T.hasLines(h)&&(l(b,h,_,a,c,{backoff:!0}),n(b,h,c),c("connectgaps"),c("line.simplify")),T.hasText(h)&&(c("texttemplate"),s(b,h,a,c));var y=[];(T.hasMarkers(h)||T.hasText(h))&&(c("cliponaxis"),c("marker.maxdisplayed"),y.push("points")),c("fill",x?x.fillDflt:"none"),h.fill!=="none"&&(o(b,h,_,c,{moduleHasFillgradient:!0}),T.hasLines(h)||n(b,h,c),p(c,"fillpattern",h.fillcolor,!1));var A=(h.line||{}).color,L=(h.marker||{}).color;(h.fill==="tonext"||h.fill==="toself")&&y.push("fills"),c("hoveron",y.join("+")||"points"),h.hoveron!=="fills"&&c("hovertemplate");var u=E.getComponentMethod("errorbars","supplyDefaults");u(b,h,A||L||_,{axis:"y"}),u(b,h,A||L||_,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(h,c)}}},98304:function(Q){Q.exports=function(U){return{valType:"color",editType:"style",anim:!0}}},70840:function(Q,U,t){var M=t(76308),E=t(3400).isArrayOrTypedArray;function i(C){for(var T=M.interpolate(C[0][1],C[1][1],.5),v=2;v<C.length;v++){var d=M.interpolate(C[v-1][1],C[v][1],.5);T=M.interpolate(T,d,C[v-1][0]/C[v][0])}return T}Q.exports=function(C,T,v,d,r){r||(r={});var e=!1;if(T.marker){var l=T.marker.color,n=(T.marker.line||{}).color;l&&!E(l)?e=l:n&&!E(n)&&(e=n)}var s;if(r.moduleHasFillgradient){var o=d("fillgradient.type");if(o!=="none"){d("fillgradient.start"),d("fillgradient.stop");var p=d("fillgradient.colorscale");p&&(s=i(p))}}d("fillcolor",M.addOpacity((T.line||{}).color||e||s||v,.5))}},76688:function(Q,U,t){var M=t(54460);Q.exports=function(E,i,C){var T={},v={_fullLayout:C},d=M.getFromTrace(v,i,"x"),r=M.getFromTrace(v,i,"y"),e=E.orig_x;e===void 0&&(e=E.x);var l=E.orig_y;return l===void 0&&(l=E.y),T.xLabel=M.tickText(d,d.c2l(e),!0).text,T.yLabel=M.tickText(r,r.c2l(l),!0).text,T}},44928:function(Q,U,t){var M=t(76308),E=t(43028);Q.exports=function(i,C){var T,v;if(i.mode==="lines")return T=i.line.color,T&&M.opacity(T)?T:i.fillcolor;if(i.mode==="none")return i.fill?i.fillcolor:"";var d=C.mcc||(i.marker||{}).color,r=C.mlcc||((i.marker||{}).line||{}).color;return v=d&&M.opacity(d)?d:r&&M.opacity(r)&&(C.mlw||((i.marker||{}).line||{}).width)?r:"",v?M.opacity(v)<.3?M.addOpacity(v,.3):v:(T=(i.line||{}).color,T&&M.opacity(T)&&E.hasLines(i)&&i.line.width?T:i.fillcolor)}},20011:function(Q,U,t){var M=t(71888).getAxisGroup;Q.exports=function(E,i,C,T){var v=i.orientation,d=i[{v:"x",h:"y"}[v]+"axis"],r=M(C,d)+v,e=C._alignmentOpts||{},l=T("alignmentgroup"),n=e[r];n||(n=e[r]={});var s=n[l];s?s.traces.push(i):s=n[l]={traces:[i],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var o=T("offsetgroup"),p=s.offsetGroups,b=p[o];o&&(b||(b=p[o]={offsetIndex:Object.keys(p).length}),i._offsetIndex=b.offsetIndex)}},98723:function(Q,U,t){var M=t(3400),E=t(93024),i=t(24040),C=t(44928),T=t(76308),v=M.fillText;Q.exports=function(d,r,e,l){var n=d.cd,s=n[0].trace,o=d.xa,p=d.ya,b=o.c2p(r),h=p.c2p(e),_=[b,h],a=s.hoveron||"",c=s.mode.indexOf("markers")!==-1?3:.5,f=!!s.xperiodalignment,x=!!s.yperiodalignment;if(a.indexOf("points")!==-1){var k=function(X){if(f){var J=o.c2p(X.xStart),it=o.c2p(X.xEnd);return b>=Math.min(J,it)&&b<=Math.max(J,it)?0:1/0}var nt=Math.max(3,X.mrc||0),q=1-1/nt,Z=Math.abs(o.c2p(X.x)-b);return Z<nt?q*Z/nt:Z-nt+q},y=function(X){if(x){var J=p.c2p(X.yStart),it=p.c2p(X.yEnd);return h>=Math.min(J,it)&&h<=Math.max(J,it)?0:1/0}var nt=Math.max(3,X.mrc||0),q=1-1/nt,Z=Math.abs(p.c2p(X.y)-h);return Z<nt?q*Z/nt:Z-nt+q},A=function(X){var J=Math.max(c,X.mrc||0),it=o.c2p(X.x)-b,nt=p.c2p(X.y)-h;return Math.max(Math.sqrt(it*it+nt*nt)-J,1-c/J)},L=E.getDistanceFunction(l,k,y,A);if(E.getClosest(n,L,d),d.index!==!1){var u=n[d.index],m=o.c2p(u.x,!0),S=p.c2p(u.y,!0),w=u.mrc||1;d.index=u.i;var I=n[0].t.orientation,O=I&&(u.sNorm||u.s),D=I==="h"?O:u.orig_x!==void 0?u.orig_x:u.x,P=I==="v"?O:u.orig_y!==void 0?u.orig_y:u.y;return M.extendFlat(d,{color:C(s,u),x0:m-w,x1:m+w,xLabelVal:D,y0:S-w,y1:S+w,yLabelVal:P,spikeDistance:A(u),hovertemplate:s.hovertemplate}),v(u,s,d),i.getComponentMethod("errorbars","hoverInfo")(u,s,d),[d]}}function F(X){if(!X)return!1;var J=X.node();try{var it=new DOMPoint(_[0],_[1]);return J.isPointInFill(it)}catch{var nt=J.ownerSVGElement.createSVGPoint();return nt.x=_[0],nt.y=_[1],J.isPointInFill(nt)}}function R(X){var J,it=[],nt=1/0,q=-1/0,Z=1/0,$=-1/0,V;for(J=0;J<X.length;J++){var rt=X[J];rt.contains(_)&&(it.push(rt),Z=Math.min(Z,rt.ymin),$=Math.max($,rt.ymax))}if(it.length===0)return null;Z=Math.max(Z,0),$=Math.min($,p._length),V=(Z+$)/2;var ot,H,Y,at,et,ct,ft;for(J=0;J<it.length;J++)for(H=it[J].pts,ot=1;ot<H.length;ot++)ct=H[ot-1][1],ft=H[ot][1],ct>V!=ft>=V&&(at=H[ot-1][0],et=H[ot][0],ft-ct&&(Y=at+(et-at)*(V-ct)/(ft-ct),nt=Math.min(nt,Y),q=Math.max(q,Y)));return nt=Math.max(nt,0),q=Math.min(q,o._length),{x0:nt,x1:q,y0:V,y1:V}}if(a.indexOf("fills")!==-1&&s._fillElement){var B=F(s._fillElement)&&!F(s._fillExclusionElement);if(B){var N=R(s._polygons);N===null&&(N={x0:_[0],x1:_[0],y0:_[1],y1:_[1]});var G=T.defaultLine;return T.opacity(s.fillcolor)?G=s.fillcolor:T.opacity((s.line||{}).color)&&(G=s.line.color),M.extendFlat(d,{distance:d.maxHoverDistance,x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1,color:G,hovertemplate:!1}),delete d.index,s.text&&!M.isArrayOrTypedArray(s.text)?d.text=String(s.text):d.text=s.name,[d]}}}},65875:function(Q,U,t){var M=t(43028);Q.exports={hasLines:M.hasLines,hasMarkers:M.hasMarkers,hasText:M.hasText,isBubble:M.isBubble,attributes:t(52904),layoutAttributes:t(55308),supplyDefaults:t(18800),crossTraceDefaults:t(35036),supplyLayoutDefaults:t(59748),calc:t(16356).calc,crossTraceCalc:t(96664),arraysToCalcdata:t(20148),plot:t(96504),colorbar:t(5528),formatLabels:t(76688),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(98723),selectPoints:t(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(Q){Q.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(Q,U,t){var M=t(3400),E=t(55308);Q.exports=function(i,C){function T(d,r){return M.coerce(i,C,E,d,r)}var v=C.barmode==="group";C.scattermode==="group"&&T("scattergap",v?C.bargap:.2)}},66828:function(Q,U,t){var M=t(3400).isArrayOrTypedArray,E=t(94288).hasColorscale,i=t(27260);Q.exports=function(C,T,v,d,r,e){e||(e={});var l=(C.marker||{}).color;if(l&&l._inputArray&&(l=l._inputArray),r("line.color",v),E(C,"line"))i(C,T,d,r,{prefix:"line.",cLetter:"c"});else{var n=(M(l)?!1:l)||v;r("line.color",n)}r("line.width"),e.noDash||r("line.dash"),e.backoff&&r("line.backoff")}},52340:function(Q,U,t){var M=t(43616),E=t(39032),i=E.BADNUM,C=E.LOG_CLIP,T=C+.5,v=C-.5,d=t(3400),r=d.segmentsIntersect,e=d.constrain,l=t(88200);Q.exports=function(n,s){var o=s.trace||{},p=s.xaxis,b=s.yaxis,h=p.type==="log",_=b.type==="log",a=p._length,c=b._length,f=s.backoff,x=o.marker,k=s.connectGaps,y=s.baseTolerance,A=s.shape,L=A==="linear",u=o.fill&&o.fill!=="none",m=[],S=l.minTolerance,w=n.length,I=new Array(w),O=0,D,P,F,R,B,N,G,X,J,it,nt,q,Z,$,V,rt;function ot(Gt){var te=n[Gt];if(!te)return!1;var ne=s.linearized?p.l2p(te.x):p.c2p(te.x),je=s.linearized?b.l2p(te.y):b.c2p(te.y);if(ne===i){if(h&&(ne=p.c2p(te.x,!0)),ne===i)return!1;_&&je===i&&(ne*=Math.abs(p._m*c*(p._m>0?T:v)/(b._m*a*(b._m>0?T:v)))),ne*=1e3}if(je===i){if(_&&(je=b.c2p(te.y,!0)),je===i)return!1;je*=1e3}return[ne,je]}function H(Gt,te,ne,je){var Ne=ne-Gt,ge=je-te,_e=.5-Gt,De=.5-te,hr=Ne*Ne+ge*ge,fe=Ne*_e+ge*De;if(fe>0&&fe<hr){var Be=_e*ge-De*Ne;if(Be*Be<hr)return!0}}var Y,at;function et(Gt,te){var ne=Gt[0]/a,je=Gt[1]/c,Ne=Math.max(0,-ne,ne-1,-je,je-1);return Ne&&Y!==void 0&&H(ne,je,Y,at)&&(Ne=0),Ne&&te&&H(ne,je,te[0]/a,te[1]/c)&&(Ne=0),(1+l.toleranceGrowth*Ne)*y}function ct(Gt,te){var ne=Gt[0]-te[0],je=Gt[1]-te[1];return Math.sqrt(ne*ne+je*je)}var ft=l.maxScreensAway,yt=-a*ft,xt=a*(1+ft),Ct=-c*ft,gt=c*(1+ft),mt=[[yt,Ct,xt,Ct],[xt,Ct,xt,gt],[xt,gt,yt,gt],[yt,gt,yt,Ct]],vt,At,Ot,It,St,Bt;function re(Gt,te){for(var ne=[],je=0,Ne=0;Ne<4;Ne++){var ge=mt[Ne],_e=r(Gt[0],Gt[1],te[0],te[1],ge[0],ge[1],ge[2],ge[3]);_e&&(!je||Math.abs(_e.x-ne[0][0])>1||Math.abs(_e.y-ne[0][1])>1)&&(_e=[_e.x,_e.y],je&&ct(_e,Gt)<ct(ne[0],Gt)?ne.unshift(_e):ne.push(_e),je++)}return ne}function Yt(Gt){if(Gt[0]<yt||Gt[0]>xt||Gt[1]<Ct||Gt[1]>gt)return[e(Gt[0],yt,xt),e(Gt[1],Ct,gt)]}function he(Gt,te){if(Gt[0]===te[0]&&(Gt[0]===yt||Gt[0]===xt)||Gt[1]===te[1]&&(Gt[1]===Ct||Gt[1]===gt))return!0}function Zt(Gt,te){var ne=[],je=Yt(Gt),Ne=Yt(te);return je&&Ne&&he(je,Ne)||(je&&ne.push(je),Ne&&ne.push(Ne)),ne}function ae(Gt,te,ne){return function(je,Ne){var ge=Yt(je),_e=Yt(Ne),De=[];if(ge&&_e&&he(ge,_e))return De;ge&&De.push(ge),_e&&De.push(_e);var hr=2*d.constrain((je[Gt]+Ne[Gt])/2,te,ne)-((ge||je)[Gt]+(_e||Ne)[Gt]);if(hr){var fe;ge&&_e?fe=hr>0==ge[Gt]>_e[Gt]?ge:_e:fe=ge||_e,fe[Gt]+=hr}return De}}var oe;A==="linear"||A==="spline"?oe=re:A==="hv"||A==="vh"?oe=Zt:A==="hvh"?oe=ae(0,yt,xt):A==="vhv"&&(oe=ae(1,Ct,gt));function ce(Gt,te){var ne=te[0]-Gt[0],je=(te[1]-Gt[1])/ne,Ne=(Gt[1]*te[0]-te[1]*Gt[0])/ne;return Ne>0?[je>0?yt:xt,gt]:[je>0?xt:yt,Ct]}function ue(Gt){var te=Gt[0],ne=Gt[1],je=te===I[O-1][0],Ne=ne===I[O-1][1];if(!(je&&Ne))if(O>1){var ge=te===I[O-2][0],_e=ne===I[O-2][1];je&&(te===yt||te===xt)&&ge?_e?O--:I[O-1]=Gt:Ne&&(ne===Ct||ne===gt)&&_e?ge?O--:I[O-1]=Gt:I[O++]=Gt}else I[O++]=Gt}function ye(Gt){I[O-1][0]!==Gt[0]&&I[O-1][1]!==Gt[1]&&ue([Ot,It]),ue(Gt),St=null,Ot=It=0}var Tt=d.isArrayOrTypedArray(x);function Ft(Gt){if(Gt&&f&&(Gt.i=D,Gt.d=n,Gt.trace=o,Gt.marker=Tt?x[Gt.i]:x,Gt.backoff=f),Y=Gt[0]/a,at=Gt[1]/c,vt=Gt[0]<yt?yt:Gt[0]>xt?xt:0,At=Gt[1]<Ct?Ct:Gt[1]>gt?gt:0,vt||At){if(!O)I[O++]=[vt||Gt[0],At||Gt[1]];else if(St){var te=oe(St,Gt);te.length>1&&(ye(te[0]),I[O++]=te[1])}else Bt=oe(I[O-1],Gt)[0],I[O++]=Bt;var ne=I[O-1];vt&&At&&(ne[0]!==vt||ne[1]!==At)?(St&&(Ot!==vt&&It!==At?ue(Ot&&It?ce(St,Gt):[Ot||vt,It||At]):Ot&&It&&ue([Ot,It])),ue([vt,At])):Ot-vt&&It-At&&ue([vt||Ot,At||It]),St=Gt,Ot=vt,It=At}else St&&ye(oe(St,Gt)[0]),I[O++]=Gt}for(D=0;D<w;D++)if(P=ot(D),!!P){for(O=0,St=null,Ft(P),D++;D<w;D++){if(R=ot(D),!R){if(k)continue;break}if(!L||!s.simplify){Ft(R);continue}var $t=ot(D+1);if(it=ct(R,P),!(!(u&&(O===0||O===w-1))&&it<et(R,$t)*S)){for(X=[(R[0]-P[0])/it,(R[1]-P[1])/it],B=P,nt=it,q=$=V=0,G=!1,F=R,D++;D<n.length;D++){if(N=$t,$t=ot(D+1),!N){if(k)continue;break}if(J=[N[0]-P[0],N[1]-P[1]],rt=J[0]*X[1]-J[1]*X[0],$=Math.min($,rt),V=Math.max(V,rt),V-$>et(N,$t))break;F=N,Z=J[0]*X[0]+J[1]*X[1],Z>nt?(nt=Z,R=N,G=!1):Z<q&&(q=Z,B=N,G=!0)}if(G?(Ft(R),F!==B&&Ft(B)):(B!==P&&Ft(B),F!==R&&Ft(R)),Ft(F),D>=n.length||!N)break;Ft(N),P=N}}St&&ue([Ot||St[0],It||St[1]]),m.push(I.slice(0,O))}var Vt=A.slice(A.length-1);if(f&&Vt!=="h"&&Vt!=="v"){for(var Nt=!1,Mt=-1,Et=[],Dt=0;Dt<m.length;Dt++)for(var dt=0;dt<m[Dt].length-1;dt++){var ht=m[Dt][dt],bt=m[Dt][dt+1],Pt=M.applyBackoff(bt,ht);(Pt[0]!==bt[0]||Pt[1]!==bt[1])&&(Nt=!0),Et[Mt+1]||(Mt++,Et[Mt]=[ht,[Pt[0],Pt[1]]])}return Nt?Et:m}return m}},11731:function(Q){Q.exports=function(U,t,M){var E=M("line.shape");E==="spline"&&M("line.smoothing")}},14328:function(Q){var U={tonextx:1,tonexty:1,tonext:1};Q.exports=function(t,M,E){var i,C,T,v,d,r={},e=!1,l=-1,n=0,s=-1;for(C=0;C<E.length;C++)i=E[C][0].trace,T=i.stackgroup||"",T?T in r?d=r[T]:(d=r[T]=n,n++):i.fill in U&&s>=0?d=s:(d=s=n,n++),d<l&&(e=!0),i._groupIndex=l=d;var o=E.slice();e&&o.sort(function(b,h){var _=b[0].trace,a=h[0].trace;return _._groupIndex-a._groupIndex||_.index-a.index});var p={};for(C=0;C<o.length;C++)i=o[C][0].trace,T=i.stackgroup||"",i.visible===!0?(i._nexttrace=null,i.fill in U&&(v=p[T],i._prevtrace=v||null,v&&(v._nexttrace=i)),i._ownfill=i.fill&&(i.fill.substr(0,6)==="tozero"||i.fill==="toself"||i.fill.substr(0,2)==="to"&&!i._prevtrace),p[T]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return o}},7152:function(Q,U,t){var M=t(38248);Q.exports=function(E,i){i||(i=2);var C=E.marker,T=C.sizeref||1,v=C.sizemin||0,d=C.sizemode==="area"?function(r){return Math.sqrt(r/T)}:function(r){return r/T};return function(r){var e=d(r/i);return M(e)&&e>0?Math.max(e,v):0}}},5528:function(Q){Q.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(Q,U,t){var M=t(76308),E=t(94288).hasColorscale,i=t(27260),C=t(43028);Q.exports=function(T,v,d,r,e,l){var n=C.isBubble(T),s=(T.line||{}).color,o;if(l=l||{},s&&(d=s),e("marker.symbol"),e("marker.opacity",n?.7:1),e("marker.size"),l.noAngle||(e("marker.angle"),l.noAngleRef||e("marker.angleref"),l.noStandOff||e("marker.standoff")),e("marker.color",d),E(T,"marker")&&i(T,v,r,e,{prefix:"marker.",cLetter:"c"}),l.noSelect||(e("selected.marker.color"),e("unselected.marker.color"),e("selected.marker.size"),e("unselected.marker.size")),l.noLine||(s&&!Array.isArray(s)&&v.marker.color!==s?o=s:n?o=M.background:o=M.defaultLine,e("marker.line.color",o),E(T,"marker.line")&&i(T,v,r,e,{prefix:"marker.line.",cLetter:"c"}),e("marker.line.width",n?1:0)),n&&(e("marker.sizeref"),e("marker.sizemin"),e("marker.sizemode")),l.gradient){var p=e("marker.gradient.type");p!=="none"&&e("marker.gradient.color")}}},31147:function(Q,U,t){var M=t(3400).dateTick0,E=t(39032),i=E.ONEWEEK;function C(T,v){return T%i===0?M(v,1):M(v,0)}Q.exports=function(T,v,d,r,e){if(e||(e={x:!0,y:!0}),e.x){var l=r("xperiod");l&&(r("xperiod0",C(l,v.xcalendar)),r("xperiodalignment"))}if(e.y){var n=r("yperiod");n&&(r("yperiod0",C(n,v.ycalendar)),r("yperiodalignment"))}}},96504:function(Q,U,t){var M=t(33428),E=t(24040),i=t(3400),C=i.ensureSingle,T=i.identity,v=t(43616),d=t(43028),r=t(52340),e=t(14328),l=t(92065).tester;Q.exports=function(p,b,h,_,a,c){var f,x,k=!a,y=!!a&&a.duration>0,A=e(p,b,h);if(f=_.selectAll("g.trace").data(A,function(u){return u[0].trace.uid}),f.enter().append("g").attr("class",function(u){return"trace scatter trace"+u[0].trace.uid}).style("stroke-miterlimit",2),f.order(),n(p,f,b),y){c&&(x=c());var L=M.transition().duration(a.duration).ease(a.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()});L.each(function(){_.selectAll("g.trace").each(function(u,m){s(p,m,b,u,A,this,a)})})}else f.each(function(u,m){s(p,m,b,u,A,this,a)});k&&f.exit().remove(),_.selectAll("path:not([d])").remove()};function n(p,b,h){b.each(function(_){var a=C(M.select(this),"g","fills");v.setClipUrl(a,h.layerClipId,p);var c=_[0].trace,f=[];c._ownfill&&f.push("_ownFill"),c._nexttrace&&f.push("_nextFill");var x=a.selectAll("g").data(f,T);x.enter().append("g"),x.exit().each(function(k){c[k]=null}).remove(),x.order().each(function(k){c[k]=C(M.select(this),"path","js-fill")})})}function s(p,b,h,_,a,c,f){var x=p._context.staticPlot,k;o(p,b,h,_,a);var y=!!f&&f.duration>0;function A(ye){return y?ye.transition():ye}var L=h.xaxis,u=h.yaxis,m=_[0].trace,S=m.line,w=M.select(c),I=C(w,"g","errorbars"),O=C(w,"g","lines"),D=C(w,"g","points"),P=C(w,"g","text");if(E.getComponentMethod("errorbars","plot")(p,I,h,f),m.visible!==!0)return;A(w).style("opacity",m.opacity);var F,R,B=m.fill.charAt(m.fill.length-1);B!=="x"&&B!=="y"&&(B="");var N,G;B==="y"?(N=1,G=u.c2p(0,!0)):B==="x"&&(N=0,G=L.c2p(0,!0)),_[0][h.isRangePlot?"nodeRangePlot3":"node3"]=w;var X="",J=[],it=m._prevtrace,nt=null,q=null;it&&(X=it._prevRevpath||"",R=it._nextFill,J=it._ownPolygons,nt=it._fillsegments,q=it._fillElement);var Z,$,V="",rt="",ot,H,Y,at,et,ct,ft=[];m._polygons=[];var yt=[],xt=[],Ct=i.noop;if(F=m._ownFill,d.hasLines(m)||m.fill!=="none"){R&&R.datum(_),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(ot=v.steps(S.shape),H=v.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?ot=H=function(ye){var Tt=ye[ye.length-1];return ye.length>1&&ye[0][0]===Tt[0]&&ye[0][1]===Tt[1]?v.smoothclosed(ye.slice(1),S.smoothing):v.smoothopen(ye,S.smoothing)}:ot=H=function(ye){return"M"+ye.join("L")},Y=function(ye){return H(ye.reverse())},xt=r(_,{xaxis:L,yaxis:u,trace:m,connectGaps:m.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:m.fill}),yt=new Array(xt.length);var gt=0;for(k=0;k<xt.length;k++){var mt,vt=xt[k];!mt||!B?(mt=vt.slice(),yt[gt]=mt,gt++):mt.push.apply(mt,vt)}m._fillElement=null,m._fillExclusionElement=q,m._fillsegments=yt.slice(0,gt),yt=m._fillsegments,xt.length&&(at=xt[0][0].slice(),et=xt[xt.length-1],ct=et[et.length-1].slice()),Ct=function(ye){return function(Tt){if(Z=ot(Tt),$=Y(Tt),V?B?(V+="L"+Z.substr(1),rt=$+("L"+rt.substr(1))):(V+="Z"+Z,rt=$+"Z"+rt):(V=Z,rt=$),d.hasLines(m)){var Ft=M.select(this);if(Ft.datum(_),ye)A(Ft.style("opacity",0).attr("d",Z).call(v.lineGroupStyle)).style("opacity",1);else{var $t=A(Ft);$t.attr("d",Z),v.singleLineStyle(_,$t)}}}}}var At=O.selectAll(".js-line").data(xt);A(At.exit()).style("opacity",0).remove(),At.each(Ct(!1)),At.enter().append("path").classed("js-line",!0).style("vector-effect",x?"none":"non-scaling-stroke").call(v.lineGroupStyle).each(Ct(!0)),v.setClipUrl(At,h.layerClipId,p);function Ot(ye){A(ye).attr("d","M0,0Z")}var It=function(){var ye=new Array(yt.length);for(k=0;k<yt.length;k++)ye[k]=l(yt[k]);return ye},St=function(ye){var Tt,Ft;if(!ye||ye.length===0)for(Tt=new Array(yt.length),Ft=0;Ft<yt.length;Ft++){var $t=yt[Ft][0].slice(),Vt=yt[Ft][yt[Ft].length-1].slice();$t[N]=Vt[N]=G;var Nt=[Vt,$t],Mt=Nt.concat(yt[Ft]);Tt[Ft]=l(Mt)}else{for(Tt=new Array(ye.length-1+yt.length),Ft=0;Ft<ye.length-1;Ft++)Tt[Ft]=l(ye[Ft]);var Et=ye[ye.length-1].slice();for(Et.reverse(),Ft=0;Ft<yt.length;Ft++)Tt[ye.length-1+Ft]=l(yt[Ft].concat(Et))}return Tt};xt.length?(F?(F.datum(_),at&&ct&&(B?(at[N]=ct[N]=G,A(F).attr("d","M"+ct+"L"+at+"L"+V.substr(1)).call(v.singleFillStyle,p),ft=St(null)):(A(F).attr("d",V+"Z").call(v.singleFillStyle,p),ft=It())),m._polygons=ft,m._fillElement=F):R&&(m.fill.substr(0,6)==="tonext"&&V&&X?(m.fill==="tonext"?(A(R).attr("d",V+"Z"+X+"Z").call(v.singleFillStyle,p),ft=It(),m._polygons=ft.concat(J)):(A(R).attr("d",V+"L"+X.substr(1)+"Z").call(v.singleFillStyle,p),ft=St(nt),m._polygons=ft),m._fillElement=R):Ot(R)),m._prevRevpath=rt):(F?Ot(F):R&&Ot(R),m._prevRevpath=null),m._ownPolygons=ft;function Bt(ye){return ye.filter(function(Tt){return!Tt.gap&&Tt.vis})}function re(ye){return ye.filter(function(Tt){return Tt.vis})}function Yt(ye){return ye.filter(function(Tt){return!Tt.gap})}function he(ye){return ye.id}function Zt(ye){if(ye.ids)return he}function ae(){return!1}function oe(ye,Tt,Ft){var $t,Vt,Nt,Mt=Ft[0].trace,Et=d.hasMarkers(Mt),Dt=d.hasText(Mt),dt=Zt(Mt),ht=ae,bt=ae;if(Et||Dt){var Pt=T,Gt=Mt.stackgroup,te=Gt&&p._fullLayout._scatterStackOpts[L._id+u._id][Gt].stackgaps==="infer zero";Mt.marker.maxdisplayed||Mt._needsCull?Pt=te?re:Bt:Gt&&!te&&(Pt=Yt),Et&&(ht=Pt),Dt&&(bt=Pt)}Vt=ye.selectAll("path.point"),$t=Vt.data(ht,dt);var ne=$t.enter().append("path").classed("point",!0);y&&ne.call(v.pointStyle,Mt,p).call(v.translatePoints,L,u).style("opacity",0).transition().style("opacity",1),$t.order();var je;Et&&(je=v.makePointStyleFns(Mt)),$t.each(function(Ne){var ge=M.select(this),_e=A(ge);Nt=v.translatePoint(Ne,_e,L,u),Nt?(v.singlePointStyle(Ne,_e,Mt,je,p),h.layerClipId&&v.hideOutsideRangePoint(Ne,_e,L,u,Mt.xcalendar,Mt.ycalendar),Mt.customdata&&ge.classed("plotly-customdata",Ne.data!==null&&Ne.data!==void 0)):_e.remove()}),y?$t.exit().transition().style("opacity",0).remove():$t.exit().remove(),Vt=Tt.selectAll("g"),$t=Vt.data(bt,dt),$t.enter().append("g").classed("textpoint",!0).append("text"),$t.order(),$t.each(function(Ne){var ge=M.select(this),_e=A(ge.select("text"));Nt=v.translatePoint(Ne,_e,L,u),Nt?h.layerClipId&&v.hideOutsideRangePoint(Ne,ge,L,u,Mt.xcalendar,Mt.ycalendar):ge.remove()}),$t.selectAll("text").call(v.textPointStyle,Mt,p).each(function(Ne){var ge=L.c2p(Ne.x),_e=u.c2p(Ne.y);M.select(this).selectAll("tspan.line").each(function(){A(M.select(this)).attr({x:ge,y:_e})})}),$t.exit().remove()}D.datum(_),P.datum(_),oe(D,P,_);var ce=m.cliponaxis===!1,ue=ce?null:h.layerClipId;v.setClipUrl(D,ue,p),v.setClipUrl(P,ue,p)}function o(p,b,h,_,a){var c=h.xaxis,f=h.yaxis,x=M.extent(i.simpleMap(c.range,c.r2c)),k=M.extent(i.simpleMap(f.range,f.r2c)),y=_[0].trace;if(d.hasMarkers(y)){var A=y.marker.maxdisplayed;if(A!==0){var L=_.filter(function(w){return w.x>=x[0]&&w.x<=x[1]&&w.y>=k[0]&&w.y<=k[1]}),u=Math.ceil(L.length/A),m=0;a.forEach(function(w,I){var O=w[0].trace;d.hasMarkers(O)&&O.marker.maxdisplayed>0&&I<b&&m++});var S=Math.round(m*u/3+Math.floor(m/3)*u/7.1);_.forEach(function(w){delete w.vis}),L.forEach(function(w,I){Math.round((I+S)%u)===0&&(w.vis=!0)})}}}},91560:function(Q,U,t){var M=t(43028);Q.exports=function(E,i){var C=E.cd,T=E.xaxis,v=E.yaxis,d=[],r=C[0].trace,e,l,n,s,o=!M.hasMarkers(r)&&!M.hasText(r);if(o)return[];if(i===!1)for(e=0;e<C.length;e++)C[e].selected=0;else for(e=0;e<C.length;e++)l=C[e],n=T.c2p(l.x),s=v.c2p(l.y),l.i!==null&&i.contains([n,s],!1,e,E)?(d.push({pointNumber:l.i,x:T.c2d(l.x),y:v.c2d(l.y)}),l.selected=1):l.selected=0;return d}},43912:function(Q){var U=["orientation","groupnorm","stackgaps"];Q.exports=function(t,M,E,i){var C=E._scatterStackOpts,T=i("stackgroup");if(T){var v=M.xaxis+M.yaxis,d=C[v];d||(d=C[v]={});var r=d[T],e=!1;r?r.traces.push(M):(r=d[T]={traceIndices:[],traces:[M]},e=!0);for(var l={orientation:M.x&&!M.y?"h":"v"},n=0;n<U.length;n++){var s=U[n],o=s+"Found";if(!r[o]){var p=t[s]!==void 0,b=s==="orientation";if((p||e)&&(r[s]=i(s,l[s]),b&&(r.fillDflt=r[s]==="h"?"tonextx":"tonexty"),p&&(r[o]=!0,!e&&(delete r.traces[0][s],b))))for(var h=0;h<r.traces.length-1;h++){var _=r.traces[h];_._input.fill!==_.fill&&(_.fill=r.fillDflt)}}}return r}}},49224:function(Q,U,t){var M=t(33428),E=t(43616),i=t(24040);function C(r){var e=M.select(r).selectAll("g.trace.scatter");e.style("opacity",function(l){return l[0].trace.opacity}),e.selectAll("g.points").each(function(l){var n=M.select(this),s=l.trace||l[0].trace;T(n,s,r)}),e.selectAll("g.text").each(function(l){var n=M.select(this),s=l.trace||l[0].trace;v(n,s,r)}),e.selectAll("g.trace path.js-line").call(E.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(E.fillGroupStyle,r,!1),i.getComponentMethod("errorbars","style")(e)}function T(r,e,l){E.pointStyle(r.selectAll("path.point"),e,l)}function v(r,e,l){E.textPointStyle(r.selectAll("text"),e,l)}function d(r,e,l){var n=e[0].trace;n.selectedpoints?(E.selectedPointStyle(l.selectAll("path.point"),n),E.selectedTextStyle(l.selectAll("text"),n)):(T(l,n,r),v(l,n,r))}Q.exports={style:C,stylePoints:T,styleText:v,styleOnSelect:d}},43028:function(Q,U,t){var M=t(3400),E=t(38116).isTypedArraySpec;Q.exports={hasLines:function(i){return i.visible&&i.mode&&i.mode.indexOf("lines")!==-1},hasMarkers:function(i){return i.visible&&(i.mode&&i.mode.indexOf("markers")!==-1||i.type==="splom")},hasText:function(i){return i.visible&&i.mode&&i.mode.indexOf("text")!==-1},isBubble:function(i){var C=i.marker;return M.isPlainObject(C)&&(M.isArrayOrTypedArray(C.size)||E(C.size))}}},124:function(Q,U,t){var M=t(3400);Q.exports=function(E,i,C,T,v){v=v||{},T("textposition"),M.coerceFont(T,"textfont",v.font||C.font),v.noSelect||(T("selected.textfont.color"),T("unselected.textfont.color"))}},43980:function(Q,U,t){var M=t(3400),E=t(24040);Q.exports=function(i,C,T,v){var d=v("x"),r=v("y"),e,l=E.getComponentMethod("calendars","handleTraceDefaults");if(l(i,C,["x","y"],T),d){var n=M.minRowLength(d);r?e=Math.min(n,M.minRowLength(r)):(e=n,v("y0"),v("dy"))}else{if(!r)return 0;e=M.minRowLength(r),v("x0"),v("dx")}return C._length=e,e}},91592:function(Q,U,t){var M=t(52904),E=t(49084),i=t(29736).axisHoverFormat,C=t(21776).Ks,T=t(21776).Gw,v=t(45464),d=t(99168),r=t(87792),e=t(92880).extendFlat,l=t(67824).overrideAll,n=t(95376),s=M.line,o=M.marker,p=o.line,b=e({width:s.width,dash:{valType:"enumerated",values:n(d),dflt:"solid"}},E("line"));function h(a){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}}}var _=Q.exports=l({x:M.x,y:M.y,z:{valType:"data_array"},text:e({},M.text,{}),texttemplate:T({},{}),hovertext:e({},M.hovertext,{}),hovertemplate:C(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),mode:e({},M.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:h(),y:h(),z:h()},connectgaps:M.connectgaps,line:b,marker:e({symbol:{valType:"enumerated",values:n(r),dflt:"circle",arrayOk:!0},size:e({},o.size,{dflt:8}),sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,opacity:e({},o.opacity,{arrayOk:!1}),colorbar:o.colorbar,line:e({width:e({},p.width,{arrayOk:!1})},E("marker.line"))},E("marker")),textposition:e({},M.textposition,{dflt:"top center"}),textfont:{color:M.textfont.color,size:M.textfont.size,family:e({},M.textfont.family,{arrayOk:!1})},opacity:v.opacity,hoverinfo:e({},v.hoverinfo)},"calc","nested");_.x.editType=_.y.editType=_.z.editType="calc+clearAxisTypes"},41484:function(Q,U,t){var M=t(20148),E=t(90136);Q.exports=function(i,C){var T=[{x:!1,y:!1,trace:C,t:{}}];return M(T,C),E(i,C),T}},45156:function(Q,U,t){var M=t(24040);function E(T,v,d,r){if(!v||!v.visible)return null;for(var e=M.getComponentMethod("errorbars","makeComputeError")(v),l=new Array(T.length),n=0;n<T.length;n++){var s=e(+T[n],n);if(r.type==="log"){var o=r.c2l(T[n]),p=T[n]-s[0],b=T[n]+s[1];if(l[n]=[(r.c2l(p,!0)-o)*d,(r.c2l(b,!0)-o)*d],p>0){var h=r.c2l(p);r._lowerLogErrorBound||(r._lowerLogErrorBound=h),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,h)}}else l[n]=[-s[0]*d,s[1]*d]}return l}function i(T){for(var v=0;v<T.length;v++)if(T[v])return T[v].length;return 0}function C(T,v,d){var r=[E(T.x,T.error_x,v[0],d.xaxis),E(T.y,T.error_y,v[1],d.yaxis),E(T.z,T.error_z,v[2],d.zaxis)],e=i(r);if(e===0)return null;for(var l=new Array(e),n=0;n<e;n++){for(var s=[[0,0,0],[0,0,0]],o=0;o<3;o++)if(r[o])for(var p=0;p<2;p++)s[p][o]=r[o][n][p];l[n]=s}return l}Q.exports=C},41064:function(Q,U,t){var M=t(67792).gl_line3d,E=t(67792).gl_scatter3d,i=t(67792).gl_error3d,C=t(67792).gl_mesh3d,T=t(67792).delaunay_triangulate,v=t(3400),d=t(43080),r=t(33040).formatColor,e=t(7152),l=t(99168),n=t(87792),s=t(54460),o=t(10624).appendArrayPointValue,p=t(45156);function b(w,I){this.scene=w,this.uid=I,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=b.prototype;h.handlePick=function(w){if(w.object&&(w.object===this.linePlot||w.object===this.delaunayMesh||w.object===this.textMarkers||w.object===this.scatterPlot)){var I=w.index=w.data.index;return w.object.highlight&&w.object.highlight(null),this.scatterPlot&&(w.object=this.scatterPlot,this.scatterPlot.highlight(w.data)),w.textLabel="",this.textLabels&&(v.isArrayOrTypedArray(this.textLabels)?(this.textLabels[I]||this.textLabels[I]===0)&&(w.textLabel=this.textLabels[I]):w.textLabel=this.textLabels),w.traceCoordinate=[this.data.x[I],this.data.y[I],this.data.z[I]],!0}};function _(w,I,O){var D=(O+1)%3,P=(O+2)%3,F=[],R=[],B;for(B=0;B<w.length;++B){var N=w[B];isNaN(N[D])||!isFinite(N[D])||isNaN(N[P])||!isFinite(N[P])||(F.push([N[D],N[P]]),R.push(B))}var G=T(F);for(B=0;B<G.length;++B)for(var X=G[B],J=0;J<X.length;++J)X[J]=R[X[J]];return{positions:w,cells:G,meshColor:I}}function a(w){for(var I=[0,0,0],O=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],P=0;P<3;P++){var F=w[P];F&&F.copy_zstyle!==!1&&w[2].visible!==!1&&(F=w[2]),!(!F||!F.visible)&&(I[P]=F.width/2,O[P]=d(F.color),D[P]=F.thickness)}return{capSize:I,color:O,lineWidth:D}}function c(w){return w==null?0:w.indexOf("left")>-1?-1:w.indexOf("right")>-1?1:0}function f(w){return w==null?0:w.indexOf("top")>-1?-1:w.indexOf("bottom")>-1?1:0}function x(w){var I=0,O=0,D=[I,O];if(Array.isArray(w))for(var P=0;P<w.length;P++)D[P]=[I,O],w[P]&&(D[P][0]=c(w[P]),D[P][1]=f(w[P]));else D[0]=c(w),D[1]=f(w);return D}function k(w,I){return I(w*4)}function y(w){return n[w]}function A(w,I,O,D,P){var F=null;if(v.isArrayOrTypedArray(w)){F=[];for(var R=0;R<I;R++)w[R]===void 0?F[R]=D:F[R]=O(w[R],P)}else F=O(w,v.identity);return F}function L(w,I){var O=[],D=w.fullSceneLayout,P=w.dataScale,F=D.xaxis,R=D.yaxis,B=D.zaxis,N=I.marker,G=I.line,X=I.x||[],J=I.y||[],it=I.z||[],nt=X.length,q=I.xcalendar,Z=I.ycalendar,$=I.zcalendar,V,rt,ot,H,Y,at;for(Y=0;Y<nt;Y++)V=F.d2l(X[Y],0,q)*P[0],rt=R.d2l(J[Y],0,Z)*P[1],ot=B.d2l(it[Y],0,$)*P[2],O[Y]=[V,rt,ot];if(Array.isArray(I.text))at=I.text;else if(v.isTypedArray(I.text))at=Array.from(I.text);else if(I.text!==void 0)for(at=new Array(nt),Y=0;Y<nt;Y++)at[Y]=I.text;function et(Yt,he){var Zt=D[Yt];return s.tickText(Zt,Zt.d2l(he),!0).text}var ct=I.texttemplate;if(ct){var ft=w.fullLayout,yt=ft._d3locale,xt=Array.isArray(ct),Ct=xt?Math.min(ct.length,nt):nt,gt=xt?function(Yt){return ct[Yt]}:function(){return ct};for(at=new Array(Ct),Y=0;Y<Ct;Y++){var mt={x:X[Y],y:J[Y],z:it[Y]},vt={xLabel:et("xaxis",X[Y]),yLabel:et("yaxis",J[Y]),zLabel:et("zaxis",it[Y])},At={};o(At,I,Y);var Ot=I._meta||{};at[Y]=v.texttemplateString(gt(Y),vt,yt,At,mt,Ot)}}if(H={position:O,mode:I.mode,text:at},"line"in I&&(H.lineColor=r(G,1,nt),H.lineWidth=G.width,H.lineDashes=G.dash),"marker"in I){var It=e(I);H.scatterColor=r(N,1,nt),H.scatterSize=A(N.size,nt,k,20,It),H.scatterMarker=A(N.symbol,nt,y,"\u25CF"),H.scatterLineWidth=N.line.width,H.scatterLineColor=r(N.line,1,nt),H.scatterAngle=0}"textposition"in I&&(H.textOffset=x(I.textposition),H.textColor=r(I.textfont,1,nt),H.textSize=A(I.textfont.size,nt,v.identity,12),H.textFont=I.textfont.family,H.textAngle=0);var St=["x","y","z"];for(H.project=[!1,!1,!1],H.projectScale=[1,1,1],H.projectOpacity=[1,1,1],Y=0;Y<3;++Y){var Bt=I.projection[St[Y]];(H.project[Y]=Bt.show)&&(H.projectOpacity[Y]=Bt.opacity,H.projectScale[Y]=Bt.scale)}H.errorBounds=p(I,P,D);var re=a([I.error_x,I.error_y,I.error_z]);return H.errorColor=re.color,H.errorLineWidth=re.lineWidth,H.errorCapSize=re.capSize,H.delaunayAxis=I.surfaceaxis,H.delaunayColor=d(I.surfacecolor),H}function u(w){if(v.isArrayOrTypedArray(w)){var I=w[0];return v.isArrayOrTypedArray(I)&&(w=I),"rgb("+w.slice(0,3).map(function(O){return Math.round(O*255)})+")"}return null}function m(w){return v.isArrayOrTypedArray(w)?w.length===4&&typeof w[0]=="number"?u(w):w.map(u):null}h.update=function(w){var I=this.scene.glplot.gl,O,D,P,F,R=l.solid;this.data=w;var B=L(this.scene,w);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in l&&(R=l[B.lineDashes]),this.color=m(B.scatterColor)||m(B.lineColor),this.dataPoints=B.position,O={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:R[0],dashScale:R[1],opacity:w.opacity,connectGaps:w.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(O):(this.linePlot=M(O),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var N=w.opacity;if(w.marker&&w.marker.opacity!==void 0&&(N*=w.marker.opacity),D={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:N,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=E(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),F={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:w.opacity},this.textLabels=w.hovertext||w.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(F):(this.textMarkers=E(F),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),P={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:w.opacity},this.errorBars?B.errorBounds?this.errorBars.update(P):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=i(P),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var G=_(B.position,B.delaunayColor,B.delaunayAxis);G.opacity=w.opacity,this.delaunayMesh?this.delaunayMesh.update(G):(G.gl=I,this.delaunayMesh=C(G),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function S(w,I){var O=new b(w,I.uid);return O.update(I),O}Q.exports=S},83484:function(Q,U,t){var M=t(24040),E=t(3400),i=t(43028),C=t(74428),T=t(66828),v=t(124),d=t(91592);Q.exports=function(e,l,n,s){function o(x,k){return E.coerce(e,l,d,x,k)}var p=r(e,l,o,s);if(!p){l.visible=!1;return}o("text"),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat"),o("zhoverformat"),o("mode"),i.hasMarkers(l)&&C(e,l,n,s,o,{noSelect:!0,noAngle:!0}),i.hasLines(l)&&(o("connectgaps"),T(e,l,n,s,o)),i.hasText(l)&&(o("texttemplate"),v(e,l,s,o,{noSelect:!0}));var b=(l.line||{}).color,h=(l.marker||{}).color;o("surfaceaxis")>=0&&o("surfacecolor",b||h);for(var _=["x","y","z"],a=0;a<3;++a){var c="projection."+_[a];o(c+".show")&&(o(c+".opacity"),o(c+".scale"))}var f=M.getComponentMethod("errorbars","supplyDefaults");f(e,l,b||h||n,{axis:"z"}),f(e,l,b||h||n,{axis:"y",inherit:"z"}),f(e,l,b||h||n,{axis:"x",inherit:"z"})};function r(e,l,n,s){var o=0,p=n("x"),b=n("y"),h=n("z"),_=M.getComponentMethod("calendars","handleTraceDefaults");return _(e,l,["x","y","z"],s),p&&b&&h&&(o=Math.min(p.length,b.length,h.length),l._length=l._xlength=l._ylength=l._zlength=o),o}},3296:function(Q,U,t){Q.exports={plot:t(41064),attributes:t(91592),markerSymbols:t(87792),supplyDefaults:t(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(41484),moduleType:"trace",name:"scatter3d",basePlotModule:t(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(Q,U,t){var M=t(98304),E=t(52904),i=t(45464),C=t(21776).Ks,T=t(21776).Gw,v=t(49084),d=t(92880).extendFlat,r=E.marker,e=E.line,l=r.line;Q.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:d({},E.mode,{dflt:"markers"}),text:d({},E.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:d({},E.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:d({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:E.connectgaps,fill:d({},E.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M(),marker:d({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,angle:r.angle,angleref:r.angleref,standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:d({width:l.width,editType:"calc"},v("marker.line")),gradient:r.gradient,editType:"calc"},v("marker")),textfont:E.textfont,textposition:E.textposition,selected:E.selected,unselected:E.unselected,hoverinfo:d({},i.hoverinfo,{flags:["a","b","text","name"]}),hoveron:E.hoveron,hovertemplate:C(),zorder:E.zorder}},48228:function(Q,U,t){var M=t(38248),E=t(90136),i=t(20148),C=t(4500),T=t(16356).calcMarkerSize,v=t(50948);Q.exports=function(d,r){var e=r._carpetTrace=v(d,r);if(!(!e||!e.visible||e.visible==="legendonly")){var l;r.xaxis=e.xaxis,r.yaxis=e.yaxis;var n=r._length,s=new Array(n),o,p,b=!1;for(l=0;l<n;l++)if(o=r.a[l],p=r.b[l],M(o)&&M(p)){var h=e.ab2xy(+o,+p,!0),_=e.isVisible(+o,+p);_||(b=!0),s[l]={x:h[0],y:h[1],a:o,b:p,vis:_}}else s[l]={x:!1,y:!1};return r._needsCull=b,s[0].carpet=e,s[0].trace=r,T(r,n),E(d,r),i(s,r),C(s,r),s}}},6176:function(Q,U,t){var M=t(3400),E=t(88200),i=t(43028),C=t(74428),T=t(66828),v=t(11731),d=t(124),r=t(70840),e=t(90372);Q.exports=function(l,n,s,o){function p(x,k){return M.coerce(l,n,e,x,k)}p("carpet"),n.xaxis="x",n.yaxis="y";var b=p("a"),h=p("b"),_=Math.min(b.length,h.length);if(!_){n.visible=!1;return}n._length=_,p("text"),p("texttemplate"),p("hovertext");var a=_<E.PTS_LINESONLY?"lines+markers":"lines";p("mode",a),i.hasMarkers(n)&&C(l,n,s,o,p,{gradient:!0}),i.hasLines(n)&&(T(l,n,s,o,p,{backoff:!0}),v(l,n,p),p("connectgaps")),i.hasText(n)&&d(l,n,o,p);var c=[];(i.hasMarkers(n)||i.hasText(n))&&(p("marker.maxdisplayed"),c.push("points")),p("fill"),n.fill!=="none"&&(r(l,n,s,p),i.hasLines(n)||v(l,n,p)),(n.fill==="tonext"||n.fill==="toself")&&c.push("fills");var f=p("hoveron",c.join("+")||"points");f!=="fills"&&p("hovertemplate"),p("zorder"),M.coerceSelectionMarkerOpacity(n,p)}},89307:function(Q){Q.exports=function(U,t,M,E,i){var C=E[i];return U.a=C.a,U.b=C.b,U.y=C.y,U}},52364:function(Q){Q.exports=function(U,t){var M={},E=t._carpet,i=E.ab2ij([U.a,U.b]),C=Math.floor(i[0]),T=i[0]-C,v=Math.floor(i[1]),d=i[1]-v,r=E.evalxy([],C,v,T,d);return M.yLabel=r[1].toFixed(3),M}},58960:function(Q,U,t){var M=t(98723),E=t(3400).fillText;Q.exports=function(i,C,T,v){var d=M(i,C,T,v);if(!d||d[0].index===!1)return;var r=d[0];if(r.index===void 0){var e=1-r.y0/i.ya._length,l=i.xa._length,n=l*e/2,s=l-n;return r.x0=Math.max(Math.min(r.x0,s),n),r.x1=Math.max(Math.min(r.x1,s),n),d}var o=r.cd[r.index];r.a=o.a,r.b=o.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var p=r.trace,b=p._carpet,h=p._module.formatLabels(o,p);r.yLabel=h.yLabel,delete r.text;var _=[];function a(x,k){var y;x.labelprefix&&x.labelprefix.length>0?y=x.labelprefix.replace(/ = $/,""):y=x._hovertitle,_.push(y+": "+k.toFixed(3)+x.labelsuffix)}if(!p.hovertemplate){var c=o.hi||p.hoverinfo,f=c.split("+");f.indexOf("all")!==-1&&(f=["a","b","text"]),f.indexOf("a")!==-1&&a(b.aaxis,o.a),f.indexOf("b")!==-1&&a(b.baxis,o.b),_.push("y: "+r.yLabel),f.indexOf("text")!==-1&&E(o,p,_),r.extraText=_.join("<br>")}return d}},4184:function(Q,U,t){Q.exports={attributes:t(90372),supplyDefaults:t(6176),colorbar:t(5528),formatLabels:t(52364),calc:t(48228),plot:t(20036),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(58960),selectPoints:t(91560),eventData:t(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:t(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(Q,U,t){var M=t(96504),E=t(54460),i=t(43616);Q.exports=function(C,T,v,d){var r,e,l,n=v[0][0].carpet,s=E.getFromId(C,n.xaxis||"x"),o=E.getFromId(C,n.yaxis||"y"),p={xaxis:s,yaxis:o,plot:T.plot};for(r=0;r<v.length;r++)e=v[r][0].trace,e._xA=s,e._yA=o;for(M(C,p,v,d),r=0;r<v.length;r++)e=v[r][0].trace,l=d.selectAll("g.trace"+e.uid+" .js-line"),i.setClipUrl(l,v[r][0].carpet._clipPathId,C)}},6096:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(98304),C=t(52904),T=t(45464),v=t(49084),d=t(98192).u,r=t(92880).extendFlat,e=t(67824).overrideAll,l=C.marker,n=C.line,s=l.line;Q.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:r({},C.mode,{dflt:"markers"}),text:r({},C.text,{}),texttemplate:E({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:r({},C.hovertext,{}),textfont:C.textfont,textposition:C.textposition,line:{color:n.color,width:n.width,dash:d},connectgaps:C.connectgaps,marker:r({symbol:l.symbol,opacity:l.opacity,angle:l.angle,angleref:r({},l.angleref,{values:["previous","up","north"]}),standoff:l.standoff,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,colorbar:l.colorbar,line:r({width:s.width},v("marker.line")),gradient:l.gradient},v("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:i(),selected:C.selected,unselected:C.unselected,hoverinfo:r({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:M()},"calc","nested")},25212:function(Q,U,t){var M=t(38248),E=t(39032).BADNUM,i=t(90136),C=t(20148),T=t(4500),v=t(3400).isArrayOrTypedArray,d=t(3400)._;function r(e){return e&&typeof e=="string"}Q.exports=function(e,l){var n=v(l.locations),s=n?l.locations.length:l._length,o=new Array(s),p;l.geojson?p=function(f){return r(f)||M(f)}:p=r;for(var b=0;b<s;b++){var h=o[b]={};if(n){var _=l.locations[b];h.loc=p(_)?_:null}else{var a=l.lon[b],c=l.lat[b];M(a)&&M(c)?h.lonlat=[+a,+c]:h.lonlat=[E,E]}}return C(o,l),i(e,l),T(o,l),s&&(o[0].t={labels:{lat:d(e,"lat:")+" ",lon:d(e,"lon:")+" "}}),o}},86188:function(Q,U,t){var M=t(3400),E=t(43028),i=t(74428),C=t(66828),T=t(124),v=t(70840),d=t(6096);Q.exports=function(r,e,l,n){function s(f,x){return M.coerce(r,e,d,f,x)}var o=s("locations"),p;if(o&&o.length){var b=s("geojson"),h;(typeof b=="string"&&b!==""||M.isPlainObject(b))&&(h="geojson-id");var _=s("locationmode",h);_==="geojson-id"&&s("featureidkey"),p=o.length}else{var a=s("lon")||[],c=s("lat")||[];p=Math.min(a.length,c.length)}if(!p){e.visible=!1;return}e._length=p,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),E.hasMarkers(e)&&i(r,e,l,n,s,{gradient:!0}),E.hasLines(e)&&(C(r,e,l,n,s),s("connectgaps")),E.hasText(e)&&(s("texttemplate"),T(r,e,n,s)),s("fill"),e.fill!=="none"&&v(r,e,l,s),M.coerceSelectionMarkerOpacity(e,s)}},58544:function(Q){Q.exports=function(U,t,M,E,i){U.lon=t.lon,U.lat=t.lat,U.location=t.loc?t.loc:null;var C=E[i];return C.fIn&&C.fIn.properties&&(U.properties=C.fIn.properties),U}},56696:function(Q,U,t){var M=t(54460);Q.exports=function(E,i,C){var T={},v=C[i.geo]._subplot,d=v.mockAxis,r=E.lonlat;return T.lonLabel=M.tickText(d,d.c2l(r[0]),!0).text,T.latLabel=M.tickText(d,d.c2l(r[1]),!0).text,T}},64292:function(Q,U,t){var M=t(93024),E=t(39032).BADNUM,i=t(44928),C=t(3400).fillText,T=t(6096);Q.exports=function(d,r,e){var l=d.cd,n=l[0].trace,s=d.xa,o=d.ya,p=d.subplot,b=p.projection.isLonLatOverEdges,h=p.project;function _(A){var L=A.lonlat;if(L[0]===E||b(L))return 1/0;var u=h(L),m=h([r,e]),S=Math.abs(u[0]-m[0]),w=Math.abs(u[1]-m[1]),I=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(S*S+w*w)-I,1-3/I)}if(M.getClosest(l,_,d),d.index!==!1){var a=l[d.index],c=a.lonlat,f=[s.c2p(c),o.c2p(c)],x=a.mrc||1;d.x0=f[0]-x,d.x1=f[0]+x,d.y0=f[1]-x,d.y1=f[1]+x,d.loc=a.loc,d.lon=c[0],d.lat=c[1];var k={};k[n.geo]={_subplot:p};var y=n._module.formatLabels(a,n,k);return d.lonLabel=y.lonLabel,d.latLabel=y.latLabel,d.color=i(n,a),d.extraText=v(n,a,d,l[0].t.labels),d.hovertemplate=n.hovertemplate,[d]}};function v(d,r,e,l){if(d.hovertemplate)return;var n=r.hi||d.hoverinfo,s=n==="all"?T.hoverinfo.flags:n.split("+"),o=s.indexOf("location")!==-1&&Array.isArray(d.locations),p=s.indexOf("lon")!==-1,b=s.indexOf("lat")!==-1,h=s.indexOf("text")!==-1,_=[];function a(c){return c+"\xB0"}return o?_.push(r.loc):p&&b?_.push("("+a(e.latLabel)+", "+a(e.lonLabel)+")"):p?_.push(l.lon+a(e.lonLabel)):b&&_.push(l.lat+a(e.latLabel)),h&&C(r,d,_),_.join("<br>")}},36952:function(Q,U,t){Q.exports={attributes:t(6096),supplyDefaults:t(86188),colorbar:t(5528),formatLabels:t(56696),calc:t(25212),calcGeoJSON:t(48691).calcGeoJSON,plot:t(48691).plot,style:t(25064),styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(64292),eventData:t(58544),selectPoints:t(8796),moduleType:"trace",name:"scattergeo",basePlotModule:t(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(Q,U,t){var M=t(33428),E=t(3400),i=t(59972).getTopojsonFeatures,C=t(44808),T=t(27144),v=t(19280).findExtremes,d=t(39032).BADNUM,r=t(16356).calcMarkerSize,e=t(43028),l=t(25064);function n(o,p,b){var h=p.layers.frontplot.select(".scatterlayer"),_=E.makeTraceGroups(h,b,"trace scattergeo");function a(c,f){c.lonlat[0]===d&&M.select(f).remove()}_.selectAll("*").remove(),_.each(function(c){var f=M.select(this),x=c[0].trace;if(e.hasLines(x)||x.fill!=="none"){var k=C.calcTraceToLineCoords(c),y=x.fill!=="none"?C.makePolygon(k):C.makeLine(k);f.selectAll("path.js-line").data([{geojson:y,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}e.hasMarkers(x)&&f.selectAll("path.point").data(E.identity).enter().append("path").classed("point",!0).each(function(A){a(A,this)}),e.hasText(x)&&f.selectAll("g").data(E.identity).enter().append("g").append("text").each(function(A){a(A,this)}),l(o,c)})}function s(o,p){var b=o[0].trace,h=p[b.geo],_=h._subplot,a=b._length,c,f;if(E.isArrayOrTypedArray(b.locations)){var x=b.locationmode,k=x==="geojson-id"?T.extractTraceFeature(o):i(b,_.topojson);for(c=0;c<a;c++){f=o[c];var y=x==="geojson-id"?f.fOut:T.locationToFeature(x,f.loc,k);f.lonlat=y?y.properties.ct:[d,d]}}var A={padded:!0},L,u;if(h.fitbounds==="geojson"&&b.locationmode==="geojson-id"){var m=T.computeBbox(T.getTraceGeojson(b));L=[m[0],m[2]],u=[m[1],m[3]]}else{for(L=new Array(a),u=new Array(a),c=0;c<a;c++)f=o[c],L[c]=f.lonlat[0],u[c]=f.lonlat[1];A.ppad=r(b,a)}b._extremes.lon=v(h.lonaxis._ax,L,A),b._extremes.lat=v(h.lataxis._ax,u,A)}Q.exports={calcGeoJSON:s,plot:n}},8796:function(Q,U,t){var M=t(43028),E=t(39032).BADNUM;Q.exports=function(i,C){var T=i.cd,v=i.xaxis,d=i.yaxis,r=[],e=T[0].trace,l,n,s,o,p,b=!M.hasMarkers(e)&&!M.hasText(e);if(b)return[];if(C===!1)for(p=0;p<T.length;p++)T[p].selected=0;else for(p=0;p<T.length;p++)l=T[p],n=l.lonlat,n[0]!==E&&(s=v.c2p(n),o=d.c2p(n),C.contains([s,o],null,p,i)?(r.push({pointNumber:p,lon:n[0],lat:n[1]}),l.selected=1):l.selected=0);return r}},25064:function(Q,U,t){var M=t(33428),E=t(43616),i=t(76308),C=t(49224),T=C.stylePoints,v=C.styleText;Q.exports=function(r,e){e&&d(r,e)};function d(r,e){var l=e[0].trace,n=e[0].node3;n.style("opacity",e[0].trace.opacity),T(n,l,r),v(n,l,r),n.selectAll("path.js-line").style("fill","none").each(function(s){var o=M.select(this),p=s.trace,b=p.line||{};o.call(i.stroke,b.color).call(E.dashLine,b.dash||"",b.width||0),p.fill!=="none"&&o.call(i.fill,p.fillcolor)})}},2876:function(Q,U,t){var M=t(45464),E=t(98304),i=t(52904),C=t(29736).axisHoverFormat,T=t(49084),v=t(95376),d=t(92880).extendFlat,r=t(67824).overrideAll,e=t(67072).DASHES,l=i.line,n=i.marker,s=n.line,o=Q.exports=r({x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:C("x"),yhoverformat:C("y"),text:i.text,hovertext:i.hovertext,textposition:i.textposition,textfont:i.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:l.color,width:l.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:v(e),dflt:"solid"}},marker:d({},T("marker"),{symbol:n.symbol,angle:n.angle,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:d({},T("marker.line"),{width:s.width})}),connectgaps:i.connectgaps,fill:d({},i.fill,{dflt:"none"}),fillcolor:E(),selected:{marker:i.selected.marker,textfont:i.selected.textfont},unselected:{marker:i.unselected.marker,textfont:i.unselected.textfont},opacity:M.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=i.hovertemplate,o.texttemplate=i.texttemplate},64628:function(Q,U,t){var M=t(41272);Q.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(2876),supplyDefaults:t(80220),crossTraceDefaults:t(35036),colorbar:t(5528),formatLabels:t(99396),calc:t(24856),hoverPoints:M.hoverPoints,selectPoints:t(73224),meta:{}}},24856:function(Q,U,t){var M=t(3108),E=t(3400),i=t(79811),C=t(19280).findExtremes,T=t(1220),v=t(16356),d=v.calcMarkerSize,r=v.calcAxisExpansion,e=v.setFirstScatter,l=t(90136),n=t(84236),s=t(74588),o=t(39032).BADNUM,p=t(67072).TOO_MANY_POINTS;Q.exports=function(_,a){var c=_._fullLayout,f=a._xA=i.getFromId(_,a.xaxis,"x"),x=a._yA=i.getFromId(_,a.yaxis,"y"),k=c._plots[a.xaxis+a.yaxis],y=a._length,A=y>=p,L=y*2,u={},m,S=f.makeCalcdata(a,"x"),w=x.makeCalcdata(a,"y"),I=T(a,f,"x",S),O=T(a,x,"y",w),D=I.vals,P=O.vals;a._x=D,a._y=P,a.xperiodalignment&&(a._origX=S,a._xStarts=I.starts,a._xEnds=I.ends),a.yperiodalignment&&(a._origY=w,a._yStarts=O.starts,a._yEnds=O.ends);var F=new Array(L),R=new Array(y);for(m=0;m<y;m++)F[m*2]=D[m]===o?NaN:D[m],F[m*2+1]=P[m]===o?NaN:P[m],R[m]=m;if(f.type==="log")for(m=0;m<L;m+=2)F[m]=f.c2l(F[m]);if(x.type==="log")for(m=1;m<L;m+=2)F[m]=x.c2l(F[m]);A&&f.type!=="log"&&x.type!=="log"?u.tree=M(F):u.ids=R,l(_,a);var B=h(_,k,a,F,D,P),N=s(_,k);e(c,a);var G;return A?B.marker&&(G=B.marker.sizeAvg||Math.max(B.marker.size,3)):G=d(a,y),r(_,a,f,x,D,P,G),B.errorX&&b(a,f,B.errorX),B.errorY&&b(a,x,B.errorY),B.fill&&!N.fill2d&&(N.fill2d=!0),B.marker&&!N.scatter2d&&(N.scatter2d=!0),B.line&&!N.line2d&&(N.line2d=!0),(B.errorX||B.errorY)&&!N.error2d&&(N.error2d=!0),B.text&&!N.glText&&(N.glText=!0),B.marker&&(B.marker.snap=y),N.lineOptions.push(B.line),N.errorXOptions.push(B.errorX),N.errorYOptions.push(B.errorY),N.fillOptions.push(B.fill),N.markerOptions.push(B.marker),N.markerSelectedOptions.push(B.markerSel),N.markerUnselectedOptions.push(B.markerUnsel),N.textOptions.push(B.text),N.textSelectedOptions.push(B.textSel),N.textUnselectedOptions.push(B.textUnsel),N.selectBatch.push([]),N.unselectBatch.push([]),u._scene=N,u.index=N.count,u.x=D,u.y=P,u.positions=F,N.count++,[{x:!1,y:!1,t:u,trace:a}]};function b(_,a,c){var f=_._extremes[a._id],x=C(a,c._bnds,{padded:!0});f.min=f.min.concat(x.min),f.max=f.max.concat(x.max)}function h(_,a,c,f,x,k){var y=n.style(_,c);if(y.marker&&(y.marker.positions=f),y.line&&f.length>1&&E.extendFlat(y.line,n.linePositions(_,c,f)),y.errorX||y.errorY){var A=n.errorBarPositions(_,c,f,x,k);y.errorX&&E.extendFlat(y.errorX,A.x),y.errorY&&E.extendFlat(y.errorY,A.y)}return y.text&&(E.extendFlat(y.text,{positions:f},n.textPosition(_,c,y.text,y.marker)),E.extendFlat(y.textSel,{positions:f},n.textPosition(_,c,y.text,y.markerSel)),E.extendFlat(y.textUnsel,{positions:f},n.textPosition(_,c,y.text,y.markerUnsel))),y}},67072:function(Q){var U=20;Q.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:U,SYMBOL_STROKE:U/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(Q,U,t){var M=t(38248),E=t(20472),i=t(72160),C=t(24040),T=t(3400),v=T.isArrayOrTypedArray,d=t(43616),r=t(79811),e=t(33040).formatColor,l=t(43028),n=t(7152),s=t(80088),o=t(67072),p=t(13448).DESELECTDIM,b={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=t(10624).appendArrayPointValue;function _(D,P){var F,R={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=D._context.plotGlPixelRatio;if(P.visible!==!0)return R;if(l.hasText(P)&&(R.text=a(D,P),R.textSel=x(D,P,P.selected),R.textUnsel=x(D,P,P.unselected)),l.hasMarkers(P)&&(R.marker=c(D,P),R.markerSel=f(D,P,P.selected),R.markerUnsel=f(D,P,P.unselected),!P.unselected&&v(P.marker.opacity))){var N=P.marker.opacity;for(R.markerUnsel.opacity=new Array(N.length),F=0;F<N.length;F++)R.markerUnsel.opacity[F]=p*N[F]}if(l.hasLines(P)){R.line={overlay:!0,thickness:P.line.width*B,color:P.line.color,opacity:P.opacity};var G=(o.DASHES[P.line.dash]||[1]).slice();for(F=0;F<G.length;++F)G[F]*=P.line.width*B;R.line.dashes=G}return P.error_x&&P.error_x.visible&&(R.errorX=k(P,P.error_x,B)),P.error_y&&P.error_y.visible&&(R.errorY=k(P,P.error_y,B)),P.fill&&P.fill!=="none"&&(R.fill={closed:!0,fill:P.fillcolor,thickness:0}),R}function a(D,P){var F=D._fullLayout,R=P._length,B=P.textfont,N=P.textposition,G=v(N)?N:[N],X=B.color,J=B.size,it=B.family,nt={},q,Z=D._context.plotGlPixelRatio,$=P.texttemplate;if($){nt.text=[];var V=F._d3locale,rt=Array.isArray($),ot=rt?Math.min($.length,R):R,H=rt?function(xt){return $[xt]}:function(){return $};for(q=0;q<ot;q++){var Y={i:q},at=P._module.formatLabels(Y,P,F),et={};h(et,P,q);var ct=P._meta||{};nt.text.push(T.texttemplateString(H(q),at,V,et,Y,ct))}}else v(P.text)&&P.text.length<R?nt.text=P.text.slice():nt.text=P.text;if(v(nt.text))for(q=nt.text.length;q<R;q++)nt.text[q]="";for(nt.opacity=P.opacity,nt.font={},nt.align=[],nt.baseline=[],q=0;q<G.length;q++){var ft=G[q].split(/\s+/);switch(ft[1]){case"left":nt.align.push("right");break;case"right":nt.align.push("left");break;default:nt.align.push(ft[1])}switch(ft[0]){case"top":nt.baseline.push("bottom");break;case"bottom":nt.baseline.push("top");break;default:nt.baseline.push(ft[0])}}if(v(X))for(nt.color=new Array(R),q=0;q<R;q++)nt.color[q]=X[q];else nt.color=X;if(v(J)||v(it))for(nt.font=new Array(R),q=0;q<R;q++){var yt=nt.font[q]={};yt.size=(T.isTypedArray(J)?J[q]:v(J)?M(J[q])?J[q]:0:J)*Z,yt.family=v(it)?it[q]:it}else nt.font={size:J*Z,family:it};return nt}function c(D,P){var F=P._length,R=P.marker,B={},N,G=v(R.symbol),X=v(R.angle),J=v(R.color),it=v(R.line.color),nt=v(R.opacity),q=v(R.size),Z=v(R.line.width),$;if(G||($=s.isOpenSymbol(R.symbol)),G||J||it||nt||X){B.symbols=new Array(F),B.angles=new Array(F),B.colors=new Array(F),B.borderColors=new Array(F);var V=R.symbol,rt=R.angle,ot=e(R,R.opacity,F),H=e(R.line,R.opacity,F);if(!v(H[0])){var Y=H;for(H=Array(F),N=0;N<F;N++)H[N]=Y}if(!v(ot[0])){var at=ot;for(ot=Array(F),N=0;N<F;N++)ot[N]=at}if(!v(V)){var et=V;for(V=Array(F),N=0;N<F;N++)V[N]=et}if(!v(rt)){var ct=rt;for(rt=Array(F),N=0;N<F;N++)rt[N]=ct}for(B.symbols=V,B.angles=rt,B.colors=ot,B.borderColors=H,N=0;N<F;N++)G&&($=s.isOpenSymbol(R.symbol[N])),$&&(H[N]=ot[N].slice(),ot[N]=ot[N].slice(),ot[N][3]=0);for(B.opacity=P.opacity,B.markers=new Array(F),N=0;N<F;N++)B.markers[N]=S({mx:B.symbols[N],ma:B.angles[N]},P)}else $?(B.color=i(R.color,"uint8"),B.color[3]=0,B.borderColor=i(R.color,"uint8")):(B.color=i(R.color,"uint8"),B.borderColor=i(R.line.color,"uint8")),B.opacity=P.opacity*R.opacity,B.marker=S({mx:R.symbol,ma:R.angle},P);var ft=1,yt=n(P,ft),xt;if(q||Z){var Ct=B.sizes=new Array(F),gt=B.borderSizes=new Array(F),mt=0,vt;if(q){for(N=0;N<F;N++)Ct[N]=yt(R.size[N]),mt+=Ct[N];vt=mt/F}else for(xt=yt(R.size),N=0;N<F;N++)Ct[N]=xt;if(Z)for(N=0;N<F;N++)gt[N]=R.line.width[N];else for(xt=R.line.width,N=0;N<F;N++)gt[N]=xt;B.sizeAvg=vt}else B.size=yt(R&&R.size||10),B.borderSizes=yt(R.line.width);return B}function f(D,P,F){var R=P.marker,B={};return F&&(F.marker&&F.marker.symbol?B=c(D,T.extendFlat({},R,F.marker)):F.marker&&(F.marker.size&&(B.size=F.marker.size),F.marker.color&&(B.colors=F.marker.color),F.marker.opacity!==void 0&&(B.opacity=F.marker.opacity))),B}function x(D,P,F){var R={};if(!F)return R;if(F.textfont){var B={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:T.extendFlat({},P.textfont)};F.textfont&&T.extendFlat(B.textfont,F.textfont),R=a(D,B)}return R}function k(D,P,F){var R={capSize:P.width*2*F,lineWidth:P.thickness*F,color:P.color};return P.copy_ystyle&&(R=D.error_y),R}var y=o.SYMBOL_SDF_SIZE,A=o.SYMBOL_SIZE,L=o.SYMBOL_STROKE,u={},m=d.symbolFuncs[0](A*.05);function S(D,P){var F=D.mx;if(F==="circle")return null;var R,B,N=d.symbolNumber(F),G=d.symbolFuncs[N%100],X=!!d.symbolNoDot[N%100],J=!!d.symbolNoFill[N%100],it=s.isDotSymbol(F);if(D.ma&&(F+="_"+D.ma),u[F])return u[F];var nt=d.getMarkerAngle(D,P);return it&&!X?R=G(A*1.1,nt)+m:R=G(A,nt),B=E(R,{w:y,h:y,viewBox:[-A,-A,A,A],stroke:J?L:-L}),u[F]=B,B||null}function w(D,P,F){var R=F.length,B=R/2,N,G;if(l.hasLines(P)&&B)if(P.line.shape==="hv"){for(N=[],G=0;G<B-1;G++)isNaN(F[G*2])||isNaN(F[G*2+1])?N.push(NaN,NaN,NaN,NaN):(N.push(F[G*2],F[G*2+1]),!isNaN(F[G*2+2])&&!isNaN(F[G*2+3])?N.push(F[G*2+2],F[G*2+1]):N.push(NaN,NaN));N.push(F[R-2],F[R-1])}else if(P.line.shape==="hvh"){for(N=[],G=0;G<B-1;G++)if(isNaN(F[G*2])||isNaN(F[G*2+1])||isNaN(F[G*2+2])||isNaN(F[G*2+3]))!isNaN(F[G*2])&&!isNaN(F[G*2+1])?N.push(F[G*2],F[G*2+1]):N.push(NaN,NaN),N.push(NaN,NaN);else{var X=(F[G*2]+F[G*2+2])/2;N.push(F[G*2],F[G*2+1],X,F[G*2+1],X,F[G*2+3])}N.push(F[R-2],F[R-1])}else if(P.line.shape==="vhv"){for(N=[],G=0;G<B-1;G++)if(isNaN(F[G*2])||isNaN(F[G*2+1])||isNaN(F[G*2+2])||isNaN(F[G*2+3]))!isNaN(F[G*2])&&!isNaN(F[G*2+1])?N.push(F[G*2],F[G*2+1]):N.push(NaN,NaN),N.push(NaN,NaN);else{var J=(F[G*2+1]+F[G*2+3])/2;N.push(F[G*2],F[G*2+1],F[G*2],J,F[G*2+2],J)}N.push(F[R-2],F[R-1])}else if(P.line.shape==="vh"){for(N=[],G=0;G<B-1;G++)isNaN(F[G*2])||isNaN(F[G*2+1])?N.push(NaN,NaN,NaN,NaN):(N.push(F[G*2],F[G*2+1]),!isNaN(F[G*2+2])&&!isNaN(F[G*2+3])?N.push(F[G*2],F[G*2+3]):N.push(NaN,NaN));N.push(F[R-2],F[R-1])}else N=F;var it=!1;for(G=0;G<N.length;G++)if(isNaN(N[G])){it=!0;break}var nt=it||N.length>o.TOO_MANY_POINTS||l.hasMarkers(P)?"rect":"round";if(it&&P.connectgaps){var q=N[0],Z=N[1];for(G=0;G<N.length;G+=2)isNaN(N[G])||isNaN(N[G+1])?(N[G]=q,N[G+1]=Z):(q=N[G],Z=N[G+1])}return{join:nt,positions:N}}function I(D,P,F,R,B){var N=C.getComponentMethod("errorbars","makeComputeError"),G=r.getFromId(D,P.xaxis,"x"),X=r.getFromId(D,P.yaxis,"y"),J=F.length/2,it={};function nt(q,Z){var $=Z._id.charAt(0),V=P["error_"+$];if(V&&V.visible&&(Z.type==="linear"||Z.type==="log")){for(var rt=N(V),ot={x:0,y:1}[$],H={x:[0,1,2,3],y:[2,3,0,1]}[$],Y=new Float64Array(4*J),at=1/0,et=-1/0,ct=0,ft=0;ct<J;ct++,ft+=4){var yt=q[ct];if(M(yt)){var xt=F[ct*2+ot],Ct=rt(yt,ct),gt=Ct[0],mt=Ct[1];if(M(gt)&&M(mt)){var vt=yt-gt,At=yt+mt;Y[ft+H[0]]=xt-Z.c2l(vt),Y[ft+H[1]]=Z.c2l(At)-xt,Y[ft+H[2]]=0,Y[ft+H[3]]=0,at=Math.min(at,yt-gt),et=Math.max(et,yt+mt)}}}it[$]={positions:F,errors:Y,_bnds:[at,et]}}}return nt(R,G),nt(B,X),it}function O(D,P,F,R){var B=P._length,N={},G;if(l.hasMarkers(P)){var X=F.font,J=F.align,it=F.baseline;for(N.offset=new Array(B),G=0;G<B;G++){var nt=R.sizes?R.sizes[G]:R.size,q=v(X)?X[G].size:X.size,Z=v(J)?J.length>1?J[G]:J[0]:J,$=v(it)?it.length>1?it[G]:it[0]:it,V=b[Z],rt=b[$],ot=nt?nt/.8+1:0,H=-rt*ot-rt*.5;N.offset[G]=[V*ot/q,H/q]}}return N}Q.exports={style:_,markerStyle:c,markerSelection:f,linePositions:w,errorBarPositions:I,textPosition:O}},80220:function(Q,U,t){var M=t(3400),E=t(24040),i=t(80088),C=t(2876),T=t(88200),v=t(43028),d=t(43980),r=t(31147),e=t(74428),l=t(66828),n=t(70840),s=t(124);Q.exports=function(o,p,b,h){function _(L,u){return M.coerce(o,p,C,L,u)}var a=o.marker?i.isOpenSymbol(o.marker.symbol):!1,c=v.isBubble(o),f=d(o,p,h,_);if(!f){p.visible=!1;return}r(o,p,h,_),_("xhoverformat"),_("yhoverformat");var x=f<T.PTS_LINESONLY?"lines+markers":"lines";_("text"),_("hovertext"),_("hovertemplate"),_("mode",x),v.hasMarkers(p)&&(e(o,p,b,h,_,{noAngleRef:!0,noStandOff:!0}),_("marker.line.width",a||c?1:0)),v.hasLines(p)&&(_("connectgaps"),l(o,p,b,h,_),_("line.shape")),v.hasText(p)&&(_("texttemplate"),s(o,p,h,_));var k=(p.line||{}).color,y=(p.marker||{}).color;_("fill"),p.fill!=="none"&&n(o,p,b,_);var A=E.getComponentMethod("errorbars","supplyDefaults");A(o,p,k||y||b,{axis:"y"}),A(o,p,k||y||b,{axis:"x",inherit:"y"}),M.coerceSelectionMarkerOpacity(p,_)}},26768:function(Q,U,t){var M=t(3400),E=t(76308),i=t(13448).DESELECTDIM;function C(T){var v=T[0],d=v.trace,r=v.t,e=r._scene,l=r.index,n=e.selectBatch[l],s=e.unselectBatch[l],o=e.textOptions[l],p=e.textSelectedOptions[l]||{},b=e.textUnselectedOptions[l]||{},h=M.extendFlat({},o),_,a;if(n.length||s.length){var c=p.color,f=b.color,x=o.color,k=M.isArrayOrTypedArray(x);for(h.color=new Array(d._length),_=0;_<n.length;_++)a=n[_],h.color[a]=c||(k?x[a]:x);for(_=0;_<s.length;_++){a=s[_];var y=k?x[a]:x;h.color[a]=f||(c?y:E.addOpacity(y,i))}}e.glText[l].update(h)}Q.exports={styleTextSelection:C}},99396:function(Q,U,t){var M=t(76688);Q.exports=function(E,i,C){var T=E.i;return"x"in E||(E.x=i._x[T]),"y"in E||(E.y=i._y[T]),M(E,i,C)}},80088:function(Q,U,t){var M=t(67072);U.isOpenSymbol=function(E){return typeof E=="string"?M.OPEN_RE.test(E):E%200>100},U.isDotSymbol=function(E){return typeof E=="string"?M.DOT_RE.test(E):E>200}},41272:function(Q,U,t){var M=t(24040),E=t(3400),i=t(44928);function C(v,d,r,e){var l=v.cd,n=l[0].t,s=l[0].trace,o=v.xa,p=v.ya,b=n.x,h=n.y,_=o.c2p(d),a=p.c2p(r),c=v.distance,f;if(n.tree){var x=o.p2c(_-c),k=o.p2c(_+c),y=p.p2c(a-c),A=p.p2c(a+c);e==="x"?f=n.tree.range(Math.min(x,k),Math.min(p._rl[0],p._rl[1]),Math.max(x,k),Math.max(p._rl[0],p._rl[1])):f=n.tree.range(Math.min(x,k),Math.min(y,A),Math.max(x,k),Math.max(y,A))}else f=n.ids;var L,u,m,S,w,I,O,D,P,F=c;if(e==="x"){var R=!!s.xperiodalignment,B=!!s.yperiodalignment;for(w=0;w<f.length;w++){if(L=f[w],m=b[L],I=Math.abs(o.c2p(m)-_),R){var N=o.c2p(s._xStarts[L]),G=o.c2p(s._xEnds[L]);I=_>=Math.min(N,G)&&_<=Math.max(N,G)?0:1/0}if(I<F){if(F=I,S=h[L],O=p.c2p(S)-a,B){var X=p.c2p(s._yStarts[L]),J=p.c2p(s._yEnds[L]);O=a>=Math.min(X,J)&&a<=Math.max(X,J)?0:1/0}P=Math.sqrt(I*I+O*O),u=f[w]}}}else for(w=f.length-1;w>-1;w--)L=f[w],m=b[L],S=h[L],I=o.c2p(m)-_,O=p.c2p(S)-a,D=Math.sqrt(I*I+O*O),D<F&&(F=P=D,u=L);return v.index=u,v.distance=F,v.dxy=P,u===void 0?[v]:[T(v,b,h,s)]}function T(v,d,r,e){var l=v.xa,n=v.ya,s=v.distance,o=v.dxy,p=v.index,b={pointNumber:p,x:d[p],y:r[p]};b.tx=E.isArrayOrTypedArray(e.text)?e.text[p]:e.text,b.htx=Array.isArray(e.hovertext)?e.hovertext[p]:e.hovertext,b.data=Array.isArray(e.customdata)?e.customdata[p]:e.customdata,b.tp=Array.isArray(e.textposition)?e.textposition[p]:e.textposition;var h=e.textfont;h&&(b.ts=E.isArrayOrTypedArray(h.size)?h.size[p]:h.size,b.tc=Array.isArray(h.color)?h.color[p]:h.color,b.tf=Array.isArray(h.family)?h.family[p]:h.family);var _=e.marker;_&&(b.ms=E.isArrayOrTypedArray(_.size)?_.size[p]:_.size,b.mo=E.isArrayOrTypedArray(_.opacity)?_.opacity[p]:_.opacity,b.mx=E.isArrayOrTypedArray(_.symbol)?_.symbol[p]:_.symbol,b.ma=E.isArrayOrTypedArray(_.angle)?_.angle[p]:_.angle,b.mc=E.isArrayOrTypedArray(_.color)?_.color[p]:_.color);var a=_&&_.line;a&&(b.mlc=Array.isArray(a.color)?a.color[p]:a.color,b.mlw=E.isArrayOrTypedArray(a.width)?a.width[p]:a.width);var c=_&&_.gradient;c&&c.type!=="none"&&(b.mgt=Array.isArray(c.type)?c.type[p]:c.type,b.mgc=Array.isArray(c.color)?c.color[p]:c.color);var f=l.c2p(b.x,!0),x=n.c2p(b.y,!0),k=b.mrc||1,y=e.hoverlabel;y&&(b.hbg=Array.isArray(y.bgcolor)?y.bgcolor[p]:y.bgcolor,b.hbc=Array.isArray(y.bordercolor)?y.bordercolor[p]:y.bordercolor,b.hts=E.isArrayOrTypedArray(y.font.size)?y.font.size[p]:y.font.size,b.htc=Array.isArray(y.font.color)?y.font.color[p]:y.font.color,b.htf=Array.isArray(y.font.family)?y.font.family[p]:y.font.family,b.hnl=E.isArrayOrTypedArray(y.namelength)?y.namelength[p]:y.namelength);var A=e.hoverinfo;A&&(b.hi=Array.isArray(A)?A[p]:A);var L=e.hovertemplate;L&&(b.ht=Array.isArray(L)?L[p]:L);var u={};u[v.index]=b;var m=e._origX,S=e._origY,w=E.extendFlat({},v,{color:i(e,b),x0:f-k,x1:f+k,xLabelVal:m?m[p]:b.x,y0:x-k,y1:x+k,yLabelVal:S?S[p]:b.y,cd:u,distance:s,spikeDistance:o,hovertemplate:b.ht});return b.htx?w.text=b.htx:b.tx?w.text=b.tx:e.text&&(w.text=e.text),E.fillText(b,e,w),M.getComponentMethod("errorbars","hoverInfo")(b,e,w),w}Q.exports={hoverPoints:C,calcHover:T}},38983:function(Q,U,t){var M=t(64628);M.plot=t(89876),Q.exports=M},89876:function(Q,U,t){var M=t(38540),E=t(13472),i=t(24544),C=t(23352),T=t(3400),v=t(72760).selectMode,d=t(5048),r=t(43028),e=t(14328),l=t(26768).styleTextSelection,n={};function s(p,b,h,_){var a=p._size,c=p.width*_,f=p.height*_,x=a.l*_,k=a.b*_,y=a.r*_,A=a.t*_,L=a.w*_,u=a.h*_;return[x+b.domain[0]*L,k+h.domain[0]*u,c-y-(1-b.domain[1])*L,f-A-(1-h.domain[1])*u]}var o=Q.exports=function(p,b,h){if(h.length){var _=p._fullLayout,a=b._scene,c=b.xaxis,f=b.yaxis,x,k;if(a){var y=d(p,["ANGLE_instanced_arrays","OES_element_index_uint"],n);if(!y){a.init();return}var A=a.count,L=_._glcanvas.data()[0].regl;if(e(p,b,h),a.dirty){if((a.line2d||a.error2d)&&!(a.scatter2d||a.fill2d||a.glText)&&L.clear({}),a.error2d===!0&&(a.error2d=i(L)),a.line2d===!0&&(a.line2d=E(L)),a.scatter2d===!0&&(a.scatter2d=M(L)),a.fill2d===!0&&(a.fill2d=E(L)),a.glText===!0)for(a.glText=new Array(A),x=0;x<A;x++)a.glText[x]=new C(L);if(a.glText){if(A>a.glText.length){var u=A-a.glText.length;for(x=0;x<u;x++)a.glText.push(new C(L))}else if(A<a.glText.length){var m=a.glText.length-A,S=a.glText.splice(A,m);S.forEach(function(ot){ot.destroy()})}for(x=0;x<A;x++)a.glText[x].update(a.textOptions[x])}if(a.line2d&&(a.line2d.update(a.lineOptions),a.lineOptions=a.lineOptions.map(function(ot){if(ot&&ot.positions){for(var H=ot.positions,Y=0;Y<H.length&&(isNaN(H[Y])||isNaN(H[Y+1]));)Y+=2;for(var at=H.length-2;at>Y&&(isNaN(H[at])||isNaN(H[at+1]));)at-=2;ot.positions=H.slice(Y,at+2)}return ot}),a.line2d.update(a.lineOptions)),a.error2d){var w=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(w)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fillOrder=T.repeat(null,A),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(ot,H){var Y=h[H];if(!(!ot||!Y||!Y[0]||!Y[0].trace)){var at=Y[0],et=at.trace,ct=at.t,ft=a.lineOptions[H],yt,xt,Ct=[];et._ownfill&&Ct.push(H),et._nexttrace&&Ct.push(H+1),Ct.length&&(a.fillOrder[H]=Ct);var gt=[],mt=ft&&ft.positions||ct.positions,vt,At;if(et.fill==="tozeroy"){for(vt=0;vt<mt.length&&isNaN(mt[vt+1]);)vt+=2;for(At=mt.length-2;At>vt&&isNaN(mt[At+1]);)At-=2;mt[vt+1]!==0&&(gt=[mt[vt],0]),gt=gt.concat(mt.slice(vt,At+2)),mt[At+1]!==0&&(gt=gt.concat([mt[At],0]))}else if(et.fill==="tozerox"){for(vt=0;vt<mt.length&&isNaN(mt[vt]);)vt+=2;for(At=mt.length-2;At>vt&&isNaN(mt[At]);)At-=2;mt[vt]!==0&&(gt=[0,mt[vt+1]]),gt=gt.concat(mt.slice(vt,At+2)),mt[At]!==0&&(gt=gt.concat([0,mt[At+1]]))}else if(et.fill==="toself"||et.fill==="tonext"){for(gt=[],yt=0,ot.splitNull=!0,xt=0;xt<mt.length;xt+=2)(isNaN(mt[xt])||isNaN(mt[xt+1]))&&(gt=gt.concat(mt.slice(yt,xt)),gt.push(mt[yt],mt[yt+1]),gt.push(null,null),yt=xt+2);gt=gt.concat(mt.slice(yt)),yt&&gt.push(mt[yt],mt[yt+1])}else{var Ot=et._nexttrace;if(Ot){var It=a.lineOptions[H+1];if(It){var St=It.positions;if(et.fill==="tonexty"){for(gt=mt.slice(),H=Math.floor(St.length/2);H--;){var Bt=St[H*2],re=St[H*2+1];isNaN(Bt)||isNaN(re)||gt.push(Bt,re)}ot.fill=Ot.fillcolor}}}}if(et._prevtrace&&et._prevtrace.fill==="tonext"){var Yt=a.lineOptions[H-1].positions,he=gt.length/2;yt=he;var Zt=[yt];for(xt=0;xt<Yt.length;xt+=2)(isNaN(Yt[xt])||isNaN(Yt[xt+1]))&&(Zt.push(xt/2+he+1),yt=xt+2);gt=gt.concat(Yt),ot.hole=Zt}return ot.fillmode=et.fill,ot.opacity=et.opacity,ot.positions=gt,ot}}),a.fill2d.update(a.fillOptions))}var I=_.dragmode,O=v(I),D=_.clickmode.indexOf("select")>-1;for(x=0;x<A;x++){var P=h[x][0],F=P.trace,R=P.t,B=R.index,N=F._length,G=R.x,X=R.y;if(F.selectedpoints||O||D){if(O||(O=!0),F.selectedpoints){var J=a.selectBatch[B]=T.selIndices2selPoints(F),it={};for(k=0;k<J.length;k++)it[J[k]]=1;var nt=[];for(k=0;k<N;k++)it[k]||nt.push(k);a.unselectBatch[B]=nt}var q=R.xpx=new Array(N),Z=R.ypx=new Array(N);for(k=0;k<N;k++)q[k]=c.c2p(G[k]),Z[k]=f.c2p(X[k])}else R.xpx=R.ypx=null}if(O){if(a.select2d||(a.select2d=M(_._glcanvas.data()[1].regl)),a.scatter2d){var $=new Array(A);for(x=0;x<A;x++)$[x]=a.selectBatch[x].length||a.unselectBatch[x].length?a.markerUnselectedOptions[x]:{};a.scatter2d.update($)}a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.markerSelectedOptions)),a.glText&&h.forEach(function(ot){var H=((ot||[])[0]||{}).trace||{};r.hasText(H)&&l(ot)})}else a.scatter2d&&a.scatter2d.update(a.markerOptions);var V={viewport:s(_,c,f,p._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(f._rl||f.range)[0],(c._rl||c.range)[1],(f._rl||f.range)[1]]},rt=T.repeat(V,a.count);a.fill2d&&a.fill2d.update(rt),a.line2d&&a.line2d.update(rt),a.error2d&&a.error2d.update(rt.concat(rt)),a.scatter2d&&a.scatter2d.update(rt),a.select2d&&a.select2d.update(rt),a.glText&&a.glText.forEach(function(ot){ot.update(V)})}}};o.reglPrecompiled=n},74588:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){var C=i._scene,T={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},v={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return i._scene||(C=i._scene={},C.init=function(){M.extendFlat(C,v,T)},C.init(),C.update=function(d){var r=M.repeat(d,C.count);if(C.fill2d&&C.fill2d.update(r),C.scatter2d&&C.scatter2d.update(r),C.line2d&&C.line2d.update(r),C.error2d&&C.error2d.update(r.concat(r)),C.select2d&&C.select2d.update(r),C.glText)for(var e=0;e<C.count;e++)C.glText[e].update(d)},C.draw=function(){for(var d=C.count,r=C.fill2d,e=C.error2d,l=C.line2d,n=C.scatter2d,s=C.glText,o=C.select2d,p=C.selectBatch,b=C.unselectBatch,h=0;h<d;h++){if(r&&C.fillOrder[h]&&r.draw(C.fillOrder[h]),l&&C.lineOptions[h]&&l.draw(h),e&&(C.errorXOptions[h]&&e.draw(h),C.errorYOptions[h]&&e.draw(h+d)),n&&C.markerOptions[h])if(b[h].length){var _=M.repeat([],C.count);_[h]=b[h],n.draw(_)}else p[h].length||n.draw(h);s[h]&&C.textOptions[h]&&s[h].render()}o&&o.draw(p),C.dirty=!1},C.destroy=function(){C.fill2d&&C.fill2d.destroy&&C.fill2d.destroy(),C.scatter2d&&C.scatter2d.destroy&&C.scatter2d.destroy(),C.error2d&&C.error2d.destroy&&C.error2d.destroy(),C.line2d&&C.line2d.destroy&&C.line2d.destroy(),C.select2d&&C.select2d.destroy&&C.select2d.destroy(),C.glText&&C.glText.forEach(function(d){d.destroy&&d.destroy()}),C.lineOptions=null,C.fillOptions=null,C.markerOptions=null,C.markerSelectedOptions=null,C.markerUnselectedOptions=null,C.errorXOptions=null,C.errorYOptions=null,C.textOptions=null,C.textSelectedOptions=null,C.textUnselectedOptions=null,C.selectBatch=null,C.unselectBatch=null,i._scene=null}),C.dirty||M.extendFlat(C,T),C}},73224:function(Q,U,t){var M=t(43028),E=t(26768).styleTextSelection;Q.exports=function(i,C){var T=i.cd,v=i.xaxis,d=i.yaxis,r=[],e=T[0].trace,l=T[0].t,n=e._length,s=l.x,o=l.y,p=l._scene,b=l.index;if(!p)return r;var h=M.hasText(e),_=M.hasMarkers(e),a=!_&&!h;if(e.visible!==!0||a)return r;var c=[],f=[];if(C!==!1&&!C.degenerate)for(var x=0;x<n;x++)C.contains([l.xpx[x],l.ypx[x]],!1,x,i)?(c.push(x),r.push({pointNumber:x,x:v.c2d(s[x]),y:d.c2d(o[x])})):f.push(x);if(_){var k=p.scatter2d;if(!c.length&&!f.length){var y=new Array(p.count);y[b]=p.markerOptions[b],k.update.apply(k,y)}else if(!p.selectBatch[b].length&&!p.unselectBatch[b].length){var A=new Array(p.count);A[b]=p.markerUnselectedOptions[b],k.update.apply(k,A)}}return p.selectBatch[b]=c,p.unselectBatch[b]=f,h&&E(T),r}},31512:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(98304),C=t(6096),T=t(52904),v=t(5232),d=t(45464),r=t(49084),e=t(92880).extendFlat,l=t(67824).overrideAll,n=t(5232),s=C.line,o=C.marker;Q.exports=l({lon:C.lon,lat:C.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},o.opacity,{dflt:1})},mode:e({},T.mode,{dflt:"markers"}),text:e({},T.text,{}),texttemplate:E({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},T.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:T.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},r("marker")),fill:C.fill,fillcolor:i(),textfont:v.layers.symbol.textfont,textposition:v.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:e({},d.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:M()},"calc","nested")},59392:function(Q,U,t){var M=t(38248),E=t(3400),i=t(39032).BADNUM,C=t(44808),T=t(8932),v=t(43616),d=t(7152),r=t(43028),e=t(89032),l=t(10624).appendArrayPointValue,n=t(72736).NEWLINES,s=t(72736).BR_TAG_ALL;Q.exports=function(f,x){var k=x[0].trace,y=k.visible===!0&&k._length!==0,A=k.fill!=="none",L=r.hasLines(k),u=r.hasMarkers(k),m=r.hasText(k),S=u&&k.marker.symbol==="circle",w=u&&k.marker.symbol!=="circle",I=k.cluster&&k.cluster.enabled,O=o("fill"),D=o("line"),P=o("circle"),F=o("symbol"),R={fill:O,line:D,circle:P,symbol:F};if(!y)return R;var B;if((A||L)&&(B=C.calcTraceToLineCoords(x)),A&&(O.geojson=C.makePolygon(B),O.layout.visibility="visible",E.extendFlat(O.paint,{"fill-color":k.fillcolor})),L&&(D.geojson=C.makeLine(B),D.layout.visibility="visible",E.extendFlat(D.paint,{"line-width":k.line.width,"line-color":k.line.color,"line-opacity":k.opacity})),S){var N=p(x);P.geojson=N.geojson,P.layout.visibility="visible",I&&(P.filter=["!",["has","point_count"]],R.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":c(k.cluster.color,k.cluster.step),"circle-radius":c(k.cluster.size,k.cluster.step),"circle-opacity":c(k.cluster.opacity,k.cluster.step)}},R.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),E.extendFlat(P.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if(S&&I&&(P.filter=["!",["has","point_count"]]),(w||m)&&(F.geojson=b(x,f),E.extendFlat(F.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),w&&(E.extendFlat(F.layout,{"icon-size":k.marker.size/10}),"angle"in k.marker&&k.marker.angle!=="auto"&&E.extendFlat(F.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),F.layout["icon-allow-overlap"]=k.marker.allowoverlap,E.extendFlat(F.paint,{"icon-opacity":k.opacity*k.marker.opacity,"icon-color":k.marker.color})),m)){var G=(k.marker||{}).size,X=e(k.textposition,G);E.extendFlat(F.layout,{"text-size":k.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset,"text-font":k.textfont.family.split(", ")}),E.extendFlat(F.paint,{"text-color":k.textfont.color,"text-opacity":k.opacity})}return R};function o(f){return{type:f,geojson:C.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function p(f){var x=f[0].trace,k=x.marker,y=x.selectedpoints,A=E.isArrayOrTypedArray(k.color),L=E.isArrayOrTypedArray(k.size),u=E.isArrayOrTypedArray(k.opacity),m;function S(X){return x.opacity*X}function w(X){return X/2}var I;A&&(T.hasColorscale(x,"marker")?I=T.makeColorScaleFuncFromTrace(k):I=E.identity);var O;L&&(O=d(x));var D;u&&(D=function(X){var J=M(X)?+E.constrain(X,0,1):0;return S(J)});var P=[];for(m=0;m<f.length;m++){var F=f[m],R=F.lonlat;if(!a(R)){var B={};I&&(B.mcc=F.mcc=I(F.mc)),O&&(B.mrc=F.mrc=O(F.ms)),D&&(B.mo=D(F.mo)),y&&(B.selected=F.selected||0),P.push({type:"Feature",id:m+1,geometry:{type:"Point",coordinates:R},properties:B})}}var N;if(y)for(N=v.makeSelectedPointStyleFns(x),m=0;m<P.length;m++){var G=P[m].properties;N.selectedOpacityFn&&(G.mo=S(N.selectedOpacityFn(G))),N.selectedColorFn&&(G.mcc=N.selectedColorFn(G)),N.selectedSizeFn&&(G.mrc=N.selectedSizeFn(G))}return{geojson:{type:"FeatureCollection",features:P},mcc:A||N&&N.selectedColorFn?{type:"identity",property:"mcc"}:k.color,mrc:L||N&&N.selectedSizeFn?{type:"identity",property:"mrc"}:w(k.size),mo:u||N&&N.selectedOpacityFn?{type:"identity",property:"mo"}:S(k.opacity)}}function b(f,x){for(var k=x._fullLayout,y=f[0].trace,A=y.marker||{},L=A.symbol,u=A.angle,m=L!=="circle"?h(L):_,S=u!=="auto"?h(u,!0):_,w=r.hasText(y)?h(y.text):_,I=[],O=0;O<f.length;O++){var D=f[O];if(!a(D.lonlat)){var P=y.texttemplate,F;if(P){var R=Array.isArray(P)?P[O]||"":P,B=y._module.formatLabels(D,y,k),N={};l(N,y,D.i);var G=y._meta||{};F=E.texttemplateString(R,B,k._d3locale,N,D,G)}else F=w(O);F&&(F=F.replace(n,"").replace(s,`
`)),I.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:m(O),angle:S(O),text:F}})}}return{type:"FeatureCollection",features:I}}function h(f,x){return E.isArrayOrTypedArray(f)?x?function(k){return M(f[k])?+f[k]:0}:function(k){return f[k]}:f?function(){return f}:_}function _(){return""}function a(f){return f[0]===i}function c(f,x){var k;if(E.isArrayOrTypedArray(f)&&E.isArrayOrTypedArray(x)){k=["step",["get","point_count"],f[0]];for(var y=1;y<f.length;y++)k.push(x[y-1],f[y])}else k=f;return k}},15752:function(Q,U,t){var M=t(3400),E=t(43028),i=t(74428),C=t(66828),T=t(124),v=t(70840),d=t(31512),r=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];Q.exports=function(l,n,s,o){function p(A,L){return M.coerce(l,n,d,A,L)}function b(A,L){return M.coerce2(l,n,d,A,L)}var h=e(l,n,p);if(!h){n.visible=!1;return}if(p("text"),p("texttemplate"),p("hovertext"),p("hovertemplate"),p("mode"),p("below"),E.hasMarkers(n)){i(l,n,s,o,p,{noLine:!0,noAngle:!0}),p("marker.allowoverlap"),p("marker.angle");var _=n.marker;_.symbol!=="circle"&&(M.isArrayOrTypedArray(_.size)&&(_.size=_.size[0]),M.isArrayOrTypedArray(_.color)&&(_.color=_.color[0]))}E.hasLines(n)&&(C(l,n,s,o,p,{noDash:!0}),p("connectgaps"));var a=b("cluster.maxzoom"),c=b("cluster.step"),f=b("cluster.color",n.marker&&n.marker.color||s),x=b("cluster.size"),k=b("cluster.opacity"),y=a!==!1||c!==!1||f!==!1||x!==!1||k!==!1;p("cluster.enabled",y),E.hasText(n)&&T(l,n,o,p,{noSelect:!0,font:{family:r.indexOf(o.font.family)!==-1?o.font.family:"Open Sans Regular",size:o.font.size,color:o.font.color}}),p("fill"),n.fill!=="none"&&v(l,n,s,p),M.coerceSelectionMarkerOpacity(n,p)};function e(l,n,s){var o=s("lon")||[],p=s("lat")||[],b=Math.min(o.length,p.length);return n._length=b,b}},37920:function(Q){Q.exports=function(U,t){return U.lon=t.lon,U.lat=t.lat,U}},11960:function(Q,U,t){var M=t(54460);Q.exports=function(E,i,C){var T={},v=C[i.subplot]._subplot,d=v.mockAxis,r=E.lonlat;return T.lonLabel=M.tickText(d,d.c2l(r[0]),!0).text,T.latLabel=M.tickText(d,d.c2l(r[1]),!0).text,T}},63312:function(Q,U,t){var M=t(93024),E=t(3400),i=t(44928),C=E.fillText,T=t(39032).BADNUM,v=t(47552).traceLayerPrefix;function d(e,l,n){var s=e.cd,o=s[0].trace,p=e.xa,b=e.ya,h=e.subplot,_=[],a=v+o.uid+"-circle",c=o.cluster&&o.cluster.enabled;if(c){var f=h.map.queryRenderedFeatures(null,{layers:[a]});_=f.map(function(P){return P.id})}var x=l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360),k=x*360,y=l-k;function A(P){var F=P.lonlat;if(F[0]===T||c&&_.indexOf(P.i+1)===-1)return 1/0;var R=E.modHalf(F[0],360),B=F[1],N=h.project([R,B]),G=N.x-p.c2p([y,B]),X=N.y-b.c2p([R,n]),J=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(G*G+X*X)-J,1-3/J)}if(M.getClosest(s,A,e),e.index!==!1){var L=s[e.index],u=L.lonlat,m=[E.modHalf(u[0],360)+k,u[1]],S=p.c2p(m),w=b.c2p(m),I=L.mrc||1;e.x0=S-I,e.x1=S+I,e.y0=w-I,e.y1=w+I;var O={};O[o.subplot]={_subplot:h};var D=o._module.formatLabels(L,o,O);return e.lonLabel=D.lonLabel,e.latLabel=D.latLabel,e.color=i(o,L),e.extraText=r(o,L,s[0].t.labels),e.hovertemplate=o.hovertemplate,[e]}}function r(e,l,n){if(e.hovertemplate)return;var s=l.hi||e.hoverinfo,o=s.split("+"),p=o.indexOf("all")!==-1,b=o.indexOf("lon")!==-1,h=o.indexOf("lat")!==-1,_=l.lonlat,a=[];function c(f){return f+"\xB0"}return p||b&&h?a.push("("+c(_[1])+", "+c(_[0])+")"):b?a.push(n.lon+c(_[0])):h&&a.push(n.lat+c(_[1])),(p||o.indexOf("text")!==-1)&&C(l,e,a),a.join("<br>")}Q.exports={hoverPoints:d,getExtraText:r}},11572:function(Q,U,t){Q.exports={attributes:t(31512),supplyDefaults:t(15752),colorbar:t(5528),formatLabels:t(11960),calc:t(25212),plot:t(9660),hoverPoints:t(63312).hoverPoints,eventData:t(37920),selectPoints:t(404),styleOnSelect:function(M,E){if(E){var i=E[0].trace;i._glTrace.update(E)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(Q,U,t){var M=t(3400),E=t(59392),i=t(47552).traceLayerPrefix,C={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function T(d,r,e,l){this.type="scattermapbox",this.subplot=d,this.uid=r,this.clusterEnabled=e,this.isHidden=l,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol",cluster:"source-"+r+"-circle",clusterCount:"source-"+r+"-circle"},this.layerIds={fill:i+r+"-fill",line:i+r+"-line",circle:i+r+"-circle",symbol:i+r+"-symbol",cluster:i+r+"-cluster",clusterCount:i+r+"-cluster-count"},this.below=null}var v=T.prototype;v.addSource=function(d,r,e){var l={type:"geojson",data:r.geojson};e&&e.enabled&&M.extendFlat(l,{cluster:!0,clusterMaxZoom:e.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[d]);n?n.setData(r.geojson):this.subplot.map.addSource(this.sourceIds[d],l)},v.setSourceData=function(d,r){this.subplot.map.getSource(this.sourceIds[d]).setData(r.geojson)},v.addLayer=function(d,r,e){var l={type:r.type,id:this.layerIds[d],source:this.sourceIds[d],layout:r.layout,paint:r.paint};r.filter&&(l.filter=r.filter);for(var n=this.layerIds[d],s,o=this.subplot.getMapLayers(),p=0;p<o.length;p++)if(o[p].id===n){s=!0;break}s?(this.subplot.setOptions(n,"setLayoutProperty",l.layout),l.layout.visibility==="visible"&&this.subplot.setOptions(n,"setPaintProperty",l.paint)):this.subplot.addLayer(l,e)},v.update=function(d){var r=d[0].trace,e=this.subplot,l=e.map,n=E(e.gd,d),s=e.belowLookup["trace-"+this.uid],o=!!(r.cluster&&r.cluster.enabled),p=!!this.clusterEnabled,b=this;function h(L){L||b.addSource("circle",n.circle,r.cluster);for(var u=C.cluster,m=0;m<u.length;m++){var S=u[m],w=n[S];b.addLayer(S,w,s)}}function _(L){for(var u=C.cluster,m=u.length-1;m>=0;m--){var S=u[m];l.removeLayer(b.layerIds[S])}L||l.removeSource(b.sourceIds.circle)}function a(L){for(var u=C.nonCluster,m=0;m<u.length;m++){var S=u[m],w=n[S];L||b.addSource(S,w),b.addLayer(S,w,s)}}function c(L){for(var u=C.nonCluster,m=u.length-1;m>=0;m--){var S=u[m];l.removeLayer(b.layerIds[S]),L||l.removeSource(b.sourceIds[S])}}function f(L){p?_(L):c(L)}function x(L){o?h(L):a(L)}function k(){for(var L=o?C.cluster:C.nonCluster,u=0;u<L.length;u++){var m=L[u],S=n[m];S&&(e.setOptions(b.layerIds[m],"setLayoutProperty",S.layout),S.layout.visibility==="visible"&&(m!=="cluster"&&b.setSourceData(m,S),e.setOptions(b.layerIds[m],"setPaintProperty",S.paint)))}}var y=this.isHidden,A=r.visible!==!0;A?y||f():y?A||x():p!==o?(f(),x()):(this.below!==s&&(f(!0),x(!0)),k()),this.clusterEnabled=o,this.isHidden=A,this.below=s,d[0].trace._glTrace=this},v.dispose=function(){for(var d=this.subplot.map,r=this.clusterEnabled?C.cluster:C.nonCluster,e=r.length-1;e>=0;e--){var l=r[e];d.removeLayer(this.layerIds[l]),d.removeSource(this.sourceIds[l])}},Q.exports=function(d,r){var e=r[0].trace,l=e.cluster&&e.cluster.enabled,n=e.visible!==!0,s=new T(d,e.uid,l,n),o=E(d.gd,r),p=s.below=d.belowLookup["trace-"+e.uid],b,h,_;if(l)for(s.addSource("circle",o.circle,e.cluster),b=0;b<C.cluster.length;b++)h=C.cluster[b],_=o[h],s.addLayer(h,_,p);else for(b=0;b<C.nonCluster.length;b++)h=C.nonCluster[b],_=o[h],s.addSource(h,_,e.cluster),s.addLayer(h,_,p);return r[0].trace._glTrace=s,s}},404:function(Q,U,t){var M=t(3400),E=t(43028),i=t(39032).BADNUM;Q.exports=function(C,T){var v=C.cd,d=C.xaxis,r=C.yaxis,e=[],l=v[0].trace,n;if(!E.hasMarkers(l))return[];if(T===!1)for(n=0;n<v.length;n++)v[n].selected=0;else for(n=0;n<v.length;n++){var s=v[n],o=s.lonlat;if(o[0]!==i){var p=[M.modHalf(o[0],360),o[1]],b=[d.c2p(p),r.c2p(p)];T.contains(b,null,n,C)?(e.push({pointNumber:n,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0}}return e}},8319:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(92880).extendFlat,C=t(98304),T=t(52904),v=t(45464),d=T.line;Q.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:E({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:i({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:i({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:i({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:C(),hoverinfo:i({},v.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},58320:function(Q,U,t){var M=t(38248),E=t(39032).BADNUM,i=t(54460),C=t(90136),T=t(20148),v=t(4500),d=t(16356).calcMarkerSize;Q.exports=function(r,e){for(var l=r._fullLayout,n=e.subplot,s=l[n].radialaxis,o=l[n].angularaxis,p=s.makeCalcdata(e,"r"),b=o.makeCalcdata(e,"theta"),h=e._length,_=new Array(h),a=0;a<h;a++){var c=p[a],f=b[a],x=_[a]={};M(c)&&M(f)?(x.r=c,x.theta=f):x.r=E}var k=d(e,h);return e._extremes.x=i.findExtremes(s,p,{ppad:k}),C(r,e),T(_,e),v(_,e),_}},85968:function(Q,U,t){var M=t(3400),E=t(43028),i=t(74428),C=t(66828),T=t(11731),v=t(124),d=t(70840),r=t(88200).PTS_LINESONLY,e=t(8319);function l(s,o,p,b){function h(c,f){return M.coerce(s,o,e,c,f)}var _=n(s,o,b,h);if(!_){o.visible=!1;return}h("thetaunit"),h("mode",_<r?"lines+markers":"lines"),h("text"),h("hovertext"),o.hoveron!=="fills"&&h("hovertemplate"),E.hasMarkers(o)&&i(s,o,p,b,h,{gradient:!0}),E.hasLines(o)&&(C(s,o,p,b,h,{backoff:!0}),T(s,o,h),h("connectgaps")),E.hasText(o)&&(h("texttemplate"),v(s,o,b,h));var a=[];(E.hasMarkers(o)||E.hasText(o))&&(h("cliponaxis"),h("marker.maxdisplayed"),a.push("points")),h("fill"),o.fill!=="none"&&(d(s,o,p,h),E.hasLines(o)||T(s,o,h)),(o.fill==="tonext"||o.fill==="toself")&&a.push("fills"),h("hoveron",a.join("+")||"points"),M.coerceSelectionMarkerOpacity(o,h)}function n(s,o,p,b){var h=b("r"),_=b("theta");M.isTypedArray(h)&&(o.r=h=Array.from(h)),M.isTypedArray(_)&&(o.theta=_=Array.from(_));var a;if(h)_?a=Math.min(h.length,_.length):(a=h.length,b("theta0"),b("dtheta"));else{if(!_)return 0;a=o.theta.length,b("r0"),b("dr")}return o._length=a,a}Q.exports={handleRThetaDefaults:n,supplyDefaults:l}},22852:function(Q,U,t){var M=t(3400),E=t(54460);Q.exports=function(i,C,T){var v={},d=T[C.subplot]._subplot,r,e;d?(r=d.radialAxis,e=d.angularAxis):(d=T[C.subplot],r=d.radialaxis,e=d.angularaxis);var l=r.c2l(i.r);v.rLabel=E.tickText(r,l,!0).text;var n=e.thetaunit==="degrees"?M.rad2deg(i.theta):i.theta;return v.thetaLabel=E.tickText(e,n,!0).text,v}},8504:function(Q,U,t){var M=t(98723);function E(C,T,v,d){var r=M(C,T,v,d);if(!(!r||r[0].index===!1)){var e=r[0];if(e.index===void 0)return r;var l=C.subplot,n=e.cd[e.index],s=e.trace;if(l.isPtInside(n))return e.xLabelVal=void 0,e.yLabelVal=void 0,i(n,s,l,e),e.hovertemplate=s.hovertemplate,r}}function i(C,T,v,d){var r=v.radialAxis,e=v.angularAxis;r._hovertitle="r",e._hovertitle="\u03B8";var l={};l[T.subplot]={_subplot:v};var n=T._module.formatLabels(C,T,l);d.rLabel=n.rLabel,d.thetaLabel=n.thetaLabel;var s=C.hi||T.hoverinfo,o=[];function p(h,_){o.push(h._hovertitle+": "+_)}if(!T.hovertemplate){var b=s.split("+");b.indexOf("all")!==-1&&(b=["r","theta","text"]),b.indexOf("r")!==-1&&p(r,d.rLabel),b.indexOf("theta")!==-1&&p(e,d.thetaLabel),b.indexOf("text")!==-1&&d.text&&(o.push(d.text),delete d.text),d.extraText=o.join("<br>")}}Q.exports={hoverPoints:E,makeHoverPointText:i}},76924:function(Q,U,t){Q.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(8319),supplyDefaults:t(85968).supplyDefaults,colorbar:t(5528),formatLabels:t(22852),calc:t(58320),plot:t(43456),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(8504).hoverPoints,selectPoints:t(91560),meta:{}}},43456:function(Q,U,t){var M=t(96504),E=t(39032).BADNUM;Q.exports=function(i,C,T){for(var v=C.layers.frontplot.select("g.scatterlayer"),d=C.xaxis,r=C.yaxis,e={xaxis:d,yaxis:r,plot:C.framework,layerClipId:C._hasClipOnAxisFalse?C.clipIds.forTraces:null},l=C.radialAxis,n=C.angularAxis,s=0;s<T.length;s++)for(var o=T[s],p=0;p<o.length;p++){p===0&&(o[0].trace._xA=d,o[0].trace._yA=r);var b=o[p],h=b.r;if(h===E)b.x=b.y=E;else{var _=l.c2g(h),a=n.c2g(b.theta);b.x=_*Math.cos(a),b.y=_*Math.sin(a)}}M(i,e,T,v)}},24396:function(Q,U,t){var M=t(8319),E=t(2876),i=t(21776).Gw;Q.exports={mode:M.mode,r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,text:M.text,texttemplate:i({editType:"plot"},{keys:["r","theta","text"]}),hovertext:M.hovertext,hovertemplate:M.hovertemplate,line:{color:E.line.color,width:E.line.width,dash:E.line.dash,editType:"calc"},connectgaps:E.connectgaps,marker:E.marker,fill:E.fill,fillcolor:E.fillcolor,textposition:E.textposition,textfont:E.textfont,hoverinfo:M.hoverinfo,selected:M.selected,unselected:M.unselected}},27160:function(Q,U,t){Q.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(24396),supplyDefaults:t(98608),colorbar:t(5528),formatLabels:t(94120),calc:t(66720),hoverPoints:t(1600).hoverPoints,selectPoints:t(73224),meta:{}}},66720:function(Q,U,t){var M=t(90136),E=t(16356).calcMarkerSize,i=t(84236),C=t(54460),T=t(67072).TOO_MANY_POINTS;Q.exports=function(v,d){var r=v._fullLayout,e=d.subplot,l=r[e].radialaxis,n=r[e].angularaxis,s=d._r=l.makeCalcdata(d,"r"),o=d._theta=n.makeCalcdata(d,"theta"),p=d._length,b={};p<s.length&&(s=s.slice(0,p)),p<o.length&&(o=o.slice(0,p)),b.r=s,b.theta=o,M(v,d);var h=b.opts=i.style(v,d),_;return p<T?_=E(d,p):h.marker&&(_=2*(h.marker.sizeAvg||Math.max(h.marker.size,3))),d._extremes.x=C.findExtremes(l,s,{ppad:_}),[{x:!1,y:!1,t:b,trace:d}]}},98608:function(Q,U,t){var M=t(3400),E=t(43028),i=t(85968).handleRThetaDefaults,C=t(74428),T=t(66828),v=t(124),d=t(70840),r=t(88200).PTS_LINESONLY,e=t(24396);Q.exports=function(l,n,s,o){function p(h,_){return M.coerce(l,n,e,h,_)}var b=i(l,n,o,p);if(!b){n.visible=!1;return}p("thetaunit"),p("mode",b<r?"lines+markers":"lines"),p("text"),p("hovertext"),n.hoveron!=="fills"&&p("hovertemplate"),E.hasMarkers(n)&&C(l,n,s,o,p,{noAngleRef:!0,noStandOff:!0}),E.hasLines(n)&&(T(l,n,s,o,p),p("connectgaps")),E.hasText(n)&&(p("texttemplate"),v(l,n,o,p)),p("fill"),n.fill!=="none"&&d(l,n,s,p),M.coerceSelectionMarkerOpacity(n,p)}},94120:function(Q,U,t){var M=t(22852);Q.exports=function(E,i,C){var T=E.i;return"r"in E||(E.r=i._r[T]),"theta"in E||(E.theta=i._theta[T]),M(E,i,C)}},1600:function(Q,U,t){var M=t(41272),E=t(8504).makeHoverPointText;function i(C,T,v,d){var r=C.cd,e=r[0].t,l=e.r,n=e.theta,s=M.hoverPoints(C,T,v,d);if(!(!s||s[0].index===!1)){var o=s[0];if(o.index===void 0)return s;var p=C.subplot,b=o.cd[o.index],h=o.trace;if(b.r=l[o.index],b.theta=n[o.index],!!p.isPtInside(b))return o.xLabelVal=void 0,o.yLabelVal=void 0,E(b,h,p,o),s}}Q.exports={hoverPoints:i}},62944:function(Q,U,t){var M=t(27160);M.plot=t(56512),Q.exports=M},56512:function(Q,U,t){var M=t(3108),E=t(38248),i=t(89876),C=t(74588),T=t(84236),v=t(3400),d=t(67072).TOO_MANY_POINTS,r={};Q.exports=function(e,l,n){if(n.length){var s=l.radialAxis,o=l.angularAxis,p=C(e,l);return n.forEach(function(b){if(!(!b||!b[0]||!b[0].trace)){var h=b[0],_=h.trace,a=h.t,c=_._length,f=a.r,x=a.theta,k=a.opts,y,A=f.slice(),L=x.slice();for(y=0;y<f.length;y++)l.isPtInside({r:f[y],theta:x[y]})||(A[y]=NaN,L[y]=NaN);var u=new Array(c*2),m=Array(c),S=Array(c);for(y=0;y<c;y++){var w=A[y],I,O;if(E(w)){var D=s.c2g(w),P=o.c2g(L[y],_.thetaunit);I=D*Math.cos(P),O=D*Math.sin(P)}else I=O=NaN;m[y]=u[y*2]=I,S[y]=u[y*2+1]=O}a.tree=M(u),k.marker&&c>=d&&(k.marker.cluster=a.tree),k.marker&&(k.markerSel.positions=k.markerUnsel.positions=k.marker.positions=u),k.line&&u.length>1&&v.extendFlat(k.line,T.linePositions(e,_,u)),k.text&&(v.extendFlat(k.text,{positions:u},T.textPosition(e,_,k.text,k.marker)),v.extendFlat(k.textSel,{positions:u},T.textPosition(e,_,k.text,k.markerSel)),v.extendFlat(k.textUnsel,{positions:u},T.textPosition(e,_,k.text,k.markerUnsel))),k.fill&&!p.fill2d&&(p.fill2d=!0),k.marker&&!p.scatter2d&&(p.scatter2d=!0),k.line&&!p.line2d&&(p.line2d=!0),k.text&&!p.glText&&(p.glText=!0),p.lineOptions.push(k.line),p.fillOptions.push(k.fill),p.markerOptions.push(k.marker),p.markerSelectedOptions.push(k.markerSel),p.markerUnselectedOptions.push(k.markerUnsel),p.textOptions.push(k.text),p.textSelectedOptions.push(k.textSel),p.textUnselectedOptions.push(k.textUnsel),p.selectBatch.push([]),p.unselectBatch.push([]),a.x=m,a.y=S,a.rawx=m,a.rawy=S,a.r=f,a.theta=x,a.positions=u,a._scene=p,a.index=p.count,p.count++}}),i(e,l,n)}},Q.exports.reglPrecompiled=r},69496:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(92880).extendFlat,C=t(98304),T=t(52904),v=t(45464),d=T.line;Q.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:E({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:d.color,width:d.width,dash:d.dash,backoff:d.backoff,shape:i({},d.shape,{values:["linear","spline"]}),smoothing:d.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:i({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:i({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:C(),hoverinfo:i({},v.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:M(),selected:T.selected,unselected:T.unselected}},47507:function(Q,U,t){var M=t(38248),E=t(39032).BADNUM,i=t(90136),C=t(20148),T=t(4500),v=t(16356).calcMarkerSize;Q.exports=function(d,r){for(var e=d._fullLayout,l=r.subplot,n=e[l].realaxis,s=e[l].imaginaryaxis,o=n.makeCalcdata(r,"real"),p=s.makeCalcdata(r,"imag"),b=r._length,h=new Array(b),_=0;_<b;_++){var a=o[_],c=p[_],f=h[_]={};M(a)&&M(c)?(f.real=a,f.imag=c):f.real=E}return v(r,b),i(d,r),C(h,r),T(h,r),h}},76716:function(Q,U,t){var M=t(3400),E=t(43028),i=t(74428),C=t(66828),T=t(11731),v=t(124),d=t(70840),r=t(88200).PTS_LINESONLY,e=t(69496);Q.exports=function(n,s,o,p){function b(a,c){return M.coerce(n,s,e,a,c)}var h=l(n,s,p,b);if(!h){s.visible=!1;return}b("mode",h<r?"lines+markers":"lines"),b("text"),b("hovertext"),s.hoveron!=="fills"&&b("hovertemplate"),E.hasMarkers(s)&&i(n,s,o,p,b,{gradient:!0}),E.hasLines(s)&&(C(n,s,o,p,b,{backoff:!0}),T(n,s,b),b("connectgaps")),E.hasText(s)&&(b("texttemplate"),v(n,s,p,b));var _=[];(E.hasMarkers(s)||E.hasText(s))&&(b("cliponaxis"),b("marker.maxdisplayed"),_.push("points")),b("fill"),s.fill!=="none"&&(d(n,s,o,b),E.hasLines(s)||T(n,s,b)),(s.fill==="tonext"||s.fill==="toself")&&_.push("fills"),b("hoveron",_.join("+")||"points"),M.coerceSelectionMarkerOpacity(s,b)};function l(n,s,o,p){var b=p("real"),h=p("imag"),_;return b&&h&&(_=Math.min(b.length,h.length)),M.isTypedArray(b)&&(s.real=b=Array.from(b)),M.isTypedArray(h)&&(s.imag=h=Array.from(h)),s._length=_,_}},49504:function(Q,U,t){var M=t(54460);Q.exports=function(E,i,C){var T={},v=C[i.subplot]._subplot;return T.realLabel=M.tickText(v.radialAxis,E.real,!0).text,T.imagLabel=M.tickText(v.angularAxis,E.imag,!0).text,T}},25292:function(Q,U,t){var M=t(98723);function E(C,T,v,d){var r=M(C,T,v,d);if(!(!r||r[0].index===!1)){var e=r[0];if(e.index===void 0)return r;var l=C.subplot,n=e.cd[e.index],s=e.trace;if(l.isPtInside(n))return e.xLabelVal=void 0,e.yLabelVal=void 0,i(n,s,l,e),e.hovertemplate=s.hovertemplate,r}}function i(C,T,v,d){var r=v.radialAxis,e=v.angularAxis;r._hovertitle="real",e._hovertitle="imag";var l={};l[T.subplot]={_subplot:v};var n=T._module.formatLabels(C,T,l);d.realLabel=n.realLabel,d.imagLabel=n.imagLabel;var s=C.hi||T.hoverinfo,o=[];function p(h,_){o.push(h._hovertitle+": "+_)}if(!T.hovertemplate){var b=s.split("+");b.indexOf("all")!==-1&&(b=["real","imag","text"]),b.indexOf("real")!==-1&&p(r,d.realLabel),b.indexOf("imag")!==-1&&p(e,d.imagLabel),b.indexOf("text")!==-1&&d.text&&(o.push(d.text),delete d.text),d.extraText=o.join("<br>")}}Q.exports={hoverPoints:E,makeHoverPointText:i}},95443:function(Q,U,t){Q.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(69496),supplyDefaults:t(76716),colorbar:t(5528),formatLabels:t(49504),calc:t(47507),plot:t(34927),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(25292).hoverPoints,selectPoints:t(91560),meta:{}}},34927:function(Q,U,t){var M=t(96504),E=t(39032).BADNUM,i=t(36416),C=i.smith;Q.exports=function(T,v,d){for(var r=v.layers.frontplot.select("g.scatterlayer"),e=v.xaxis,l=v.yaxis,n={xaxis:e,yaxis:l,plot:v.framework,layerClipId:v._hasClipOnAxisFalse?v.clipIds.forTraces:null},s=0;s<d.length;s++)for(var o=d[s],p=0;p<o.length;p++){p===0&&(o[0].trace._xA=e,o[0].trace._yA=l);var b=o[p],h=b.real;if(h===E)b.x=b.y=E;else{var _=C([h,b.imag]);b.x=_[0],b.y=_[1]}}M(T,n,d,r)}},5896:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(98304),C=t(52904),T=t(45464),v=t(49084),d=t(98192).u,r=t(92880).extendFlat,e=C.marker,l=C.line,n=e.line;Q.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:r({},C.mode,{dflt:"markers"}),text:r({},C.text,{}),texttemplate:E({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:r({},C.hovertext,{}),line:{color:l.color,width:l.width,dash:d,backoff:l.backoff,shape:r({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:C.connectgaps,cliponaxis:C.cliponaxis,fill:r({},C.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:i(),marker:r({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:r({width:n.width,editType:"calc"},v("marker.line")),gradient:e.gradient,editType:"calc"},v("marker")),textfont:C.textfont,textposition:C.textposition,selected:C.selected,unselected:C.unselected,hoverinfo:r({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:C.hoveron,hovertemplate:M()}},34335:function(Q,U,t){var M=t(38248),E=t(90136),i=t(20148),C=t(4500),T=t(16356).calcMarkerSize,v=["a","b","c"],d={a:["b","c"],b:["a","c"],c:["a","b"]};Q.exports=function(r,e){var l=r._fullLayout[e.subplot],n=l.sum,s=e.sum||n,o={a:e.a,b:e.b,c:e.c},p,b,h,_,a,c;for(p=0;p<v.length;p++)if(h=v[p],!o[h]){for(a=o[d[h][0]],c=o[d[h][1]],_=new Array(a.length),b=0;b<a.length;b++)_[b]=s-a[b]-c[b];o[h]=_}var f=e._length,x=new Array(f),k,y,A,L,u,m;for(p=0;p<f;p++)k=o.a[p],y=o.b[p],A=o.c[p],M(k)&&M(y)&&M(A)?(k=+k,y=+y,A=+A,L=n/(k+y+A),L!==1&&(k*=L,y*=L,A*=L),m=k,u=A-y,x[p]={x:u,y:m,a:k,b:y,c:A}):x[p]={x:!1,y:!1};return T(e,f),E(r,e),i(x,e),C(x,e),x}},84256:function(Q,U,t){var M=t(3400),E=t(88200),i=t(43028),C=t(74428),T=t(66828),v=t(11731),d=t(124),r=t(70840),e=t(5896);Q.exports=function(l,n,s,o){function p(x,k){return M.coerce(l,n,e,x,k)}var b=p("a"),h=p("b"),_=p("c"),a;if(b?(a=b.length,h?(a=Math.min(a,h.length),_&&(a=Math.min(a,_.length))):_?a=Math.min(a,_.length):a=0):h&&_&&(a=Math.min(h.length,_.length)),!a){n.visible=!1;return}n._length=a,p("sum"),p("text"),p("hovertext"),n.hoveron!=="fills"&&p("hovertemplate");var c=a<E.PTS_LINESONLY?"lines+markers":"lines";p("mode",c),i.hasMarkers(n)&&C(l,n,s,o,p,{gradient:!0}),i.hasLines(n)&&(T(l,n,s,o,p,{backoff:!0}),v(l,n,p),p("connectgaps")),i.hasText(n)&&(p("texttemplate"),d(l,n,o,p));var f=[];(i.hasMarkers(n)||i.hasText(n))&&(p("cliponaxis"),p("marker.maxdisplayed"),f.push("points")),p("fill"),n.fill!=="none"&&(r(l,n,s,p),i.hasLines(n)||v(l,n,p)),(n.fill==="tonext"||n.fill==="toself")&&f.push("fills"),p("hoveron",f.join("+")||"points"),M.coerceSelectionMarkerOpacity(n,p)}},97476:function(Q){Q.exports=function(U,t,M,E,i){if(t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),E[i]){var C=E[i];U.a=C.a,U.b=C.b,U.c=C.c}else U.a=t.a,U.b=t.b,U.c=t.c;return U}},90404:function(Q,U,t){var M=t(54460);Q.exports=function(E,i,C){var T={},v=C[i.subplot]._subplot;return T.aLabel=M.tickText(v.aaxis,E.a,!0).text,T.bLabel=M.tickText(v.baxis,E.b,!0).text,T.cLabel=M.tickText(v.caxis,E.c,!0).text,T}},26596:function(Q,U,t){var M=t(98723);Q.exports=function(E,i,C,T){var v=M(E,i,C,T);if(!v||v[0].index===!1)return;var d=v[0];if(d.index===void 0){var r=1-d.y0/E.ya._length,e=E.xa._length,l=e*r/2,n=e-l;return d.x0=Math.max(Math.min(d.x0,n),l),d.x1=Math.max(Math.min(d.x1,n),l),v}var s=d.cd[d.index],o=d.trace,p=d.subplot;d.a=s.a,d.b=s.b,d.c=s.c,d.xLabelVal=void 0,d.yLabelVal=void 0;var b={};b[o.subplot]={_subplot:p};var h=o._module.formatLabels(s,o,b);d.aLabel=h.aLabel,d.bLabel=h.bLabel,d.cLabel=h.cLabel;var _=s.hi||o.hoverinfo,a=[];function c(x,k){a.push(x._hovertitle+": "+k)}if(!o.hovertemplate){var f=_.split("+");f.indexOf("all")!==-1&&(f=["a","b","c"]),f.indexOf("a")!==-1&&c(p.aaxis,d.aLabel),f.indexOf("b")!==-1&&c(p.baxis,d.bLabel),f.indexOf("c")!==-1&&c(p.caxis,d.cLabel)}return d.extraText=a.join("<br>"),d.hovertemplate=o.hovertemplate,v}},34864:function(Q,U,t){Q.exports={attributes:t(5896),supplyDefaults:t(84256),colorbar:t(5528),formatLabels:t(90404),calc:t(34335),plot:t(88776),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(26596),selectPoints:t(91560),eventData:t(97476),moduleType:"trace",name:"scatterternary",basePlotModule:t(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(Q,U,t){var M=t(96504);Q.exports=function(E,i,C){var T=i.plotContainer;T.select(".scatterlayer").selectAll("*").remove();for(var v=i.xaxis,d=i.yaxis,r={xaxis:v,yaxis:d,plot:T,layerClipId:i._hasClipOnAxisFalse?i.clipIdRelative:null},e=i.layers.frontplot.select("g.scatterlayer"),l=0;l<C.length;l++){var n=C[l];n.length&&(n[0].trace._xA=v,n[0].trace._yA=d)}M(E,r,C,e)}},44524:function(Q,U,t){var M=t(52904),E=t(49084),i=t(29736).axisHoverFormat,C=t(21776).Ks,T=t(2876),v=t(33816).idRegex,d=t(31780).templatedArray,r=t(92880).extendFlat,e=M.marker,l=e.line,n=r(E("marker.line",{editTypeOverride:"calc"}),{width:r({},l.width,{editType:"calc"}),editType:"calc"}),s=r(E("marker"),{symbol:e.symbol,angle:e.angle,size:r({},e.size,{editType:"markerSize"}),sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,opacity:e.opacity,colorbar:e.colorbar,line:n,editType:"calc"});s.color.editType=s.cmin.editType=s.cmax.editType="style";function o(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:v[p],editType:"plot"}}}Q.exports={dimensions:d("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},T.text,{}),hovertext:r({},T.hovertext,{}),hovertemplate:C(),xhoverformat:i("x"),yhoverformat:i("y"),marker:s,xaxes:o("x"),yaxes:o("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:T.selected.marker,editType:"calc"},unselected:{marker:T.unselected.marker,editType:"calc"},opacity:T.opacity}},28888:function(Q,U,t){var M=t(24040),E=t(12704);Q.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(44524),supplyDefaults:t(69544),colorbar:t(5528),calc:t(66821),plot:t(54840),hoverPoints:t(72248).hoverPoints,selectPoints:t(62500),editStyle:t(83156),meta:{}},M.register(E)},99332:function(Q,U,t){var M=t(13472),E=t(24040),i=t(5048),C=t(84888)._M,T=t(57952),v=t(79811).getFromId,d=t(54460).shouldShowZeroLine,r="splom",e={};function l(h){var _=h._fullLayout,a=E.getModule(r),c=C(h.calcdata,a)[0],f=i(h,["ANGLE_instanced_arrays","OES_element_index_uint"],e);f&&(_._hasOnlyLargeSploms&&o(h),a.plot(h,{},c))}function n(h){var _=h.calcdata,a=h._fullLayout;a._hasOnlyLargeSploms&&o(h);for(var c=0;c<_.length;c++){var f=_[c][0],x=f.trace,k=a._splomScenes[x.uid];x.type==="splom"&&k&&k.matrix&&s(h,x,k)}}function s(h,_,a){for(var c=a.matrixOptions.data.length,f=_._visibleDims,x=a.viewOpts.ranges=new Array(c),k=0;k<f.length;k++){var y=f[k],A=x[k]=new Array(4),L=v(h,_._diag[y][0]);L&&(A[0]=L.r2l(L.range[0]),A[2]=L.r2l(L.range[1]));var u=v(h,_._diag[y][1]);u&&(A[1]=u.r2l(u.range[0]),A[3]=u.r2l(u.range[1]))}a.selectBatch.length||a.unselectBatch.length?a.matrix.update({ranges:x},{ranges:x}):a.matrix.update({ranges:x})}function o(h){var _=h._fullLayout,a=_._glcanvas.data()[0].regl,c=_._splomGrid;c||(c=_._splomGrid=M(a)),c.update(p(h))}function p(h){var _=h._context.plotGlPixelRatio,a=h._fullLayout,c=a._size,f=[0,0,a.width*_,a.height*_],x={},k;function y(G,X,J,it,nt,q){J*=_,it*=_,nt*=_,q*=_;var Z=X[G+"color"],$=X[G+"width"],V=String(Z+$);V in x?x[V].data.push(NaN,NaN,J,it,nt,q):x[V]={data:[J,it,nt,q],join:"rect",thickness:$*_,color:Z,viewport:f,range:f,overlay:!1}}for(k in a._splomSubplots){var A=a._plots[k],L=A.xaxis,u=A.yaxis,m=L._gridVals,S=u._gridVals,w=L._offset,I=L._length,O=u._length,D=c.b+u.domain[0]*c.h,P=-u._m,F=-P*u.r2l(u.range[0],u.calendar),R,B;if(L.showgrid)for(k=0;k<m.length;k++)R=w+L.l2p(m[k].x),y("grid",L,R,D,R,D+O);if(u.showgrid)for(k=0;k<S.length;k++)B=D+F+P*S[k].x,y("grid",u,w,B,w+I,B);d(h,L,u)&&(R=w+L.l2p(0),y("zeroline",L,R,D,R,D+O)),d(h,u,L)&&(B=D+F+0,y("zeroline",u,w,B,w+I,B))}var N=[];for(k in x)N.push(x[k]);return N}function b(h,_,a,c){var f={},x;if(c._splomScenes){for(x=0;x<h.length;x++){var k=h[x];k.type==="splom"&&(f[k.uid]=1)}for(x=0;x<a.length;x++){var y=a[x];if(!f[y.uid]){var A=c._splomScenes[y.uid];A&&A.destroy&&A.destroy(),c._splomScenes[y.uid]=null,delete c._splomScenes[y.uid]}}}Object.keys(c._splomScenes||{}).length===0&&delete c._splomScenes,c._splomGrid&&!_._hasOnlyLargeSploms&&c._hasOnlyLargeSploms&&(c._splomGrid.destroy(),c._splomGrid=null,delete c._splomGrid),T.clean(h,_,a,c)}Q.exports={name:r,attr:T.attr,attrRegex:T.attrRegex,layoutAttributes:T.layoutAttributes,supplyLayoutDefaults:T.supplyLayoutDefaults,drawFramework:T.drawFramework,plot:l,drag:n,updateGrid:o,clean:b,updateFx:T.updateFx,toSVG:T.toSVG,reglPrecompiled:e}},66821:function(Q,U,t){var M=t(3400),E=t(79811),i=t(16356).calcMarkerSize,C=t(16356).calcAxisExpansion,T=t(90136),v=t(84236).markerSelection,d=t(84236).markerStyle,r=t(72308),e=t(39032).BADNUM,l=t(67072).TOO_MANY_POINTS;Q.exports=function(n,s){var o=s.dimensions,p=s._length,b={},h=b.cdata=[],_=b.data=[],a=s._visibleDims=[],c,f,x,k,y;function A(w,I){for(var O=w.makeCalcdata({v:I.values,vcalendar:s.calendar},"v"),D=0;D<O.length;D++)O[D]=O[D]===e?NaN:O[D];h.push(O),_.push(w.type==="log"?M.simpleMap(O,w.c2l):O)}for(c=0;c<o.length;c++)if(x=o[c],x.visible){if(k=E.getFromId(n,s._diag[c][0]),y=E.getFromId(n,s._diag[c][1]),k&&y&&k.type!==y.type){M.log("Skipping splom dimension "+c+" with conflicting axis types");continue}k?(A(k,x),y&&y.type==="category"&&(y._categories=k._categories.slice())):A(y,x),a.push(c)}T(n,s),M.extendFlat(b,d(n,s));var L=h.length,u=L*p>l,m;for(u?m=b.sizeAvg||Math.max(b.size,3):m=i(s,p),f=0;f<a.length;f++)c=a[f],x=o[c],k=E.getFromId(n,s._diag[c][0])||{},y=E.getFromId(n,s._diag[c][1])||{},C(n,s,k,y,h[f],h[f],m);var S=r(n,s);return S.matrix||(S.matrix=!0),S.matrixOptions=b,S.selectedOptions=v(n,s,s.selected),S.unselectedOptions=v(n,s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},69544:function(Q,U,t){var M=t(3400),E=t(51272),i=t(44524),C=t(43028),T=t(74428),v=t(26284),d=t(80088).isOpenSymbol;Q.exports=function(l,n,s,o){function p(k,y){return M.coerce(l,n,i,k,y)}var b=E(l,n,{name:"dimensions",handleItemDefaults:r}),h=p("diagonal.visible"),_=p("showupperhalf"),a=p("showlowerhalf"),c=v(n,b,"values");if(!c||!h&&!_&&!a){n.visible=!1;return}p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),T(l,n,s,o,p,{noAngleRef:!0,noStandOff:!0});var f=d(n.marker.symbol),x=C.isBubble(n);p("marker.line.width",f||x?1:0),e(l,n,o,p),M.coerceSelectionMarkerOpacity(n,p)};function r(l,n){function s(p,b){return M.coerce(l,n,i.dimensions,p,b)}s("label");var o=s("values");o&&o.length?s("visible"):n.visible=!1,s("axis.type"),s("axis.matches")}function e(l,n,s,o){var p=n.dimensions,b=p.length,h=n.showupperhalf,_=n.showlowerhalf,a=n.diagonal.visible,c,f,x=new Array(b),k=new Array(b);for(c=0;c<b;c++){var y=c?c+1:"";x[c]="x"+y,k[c]="y"+y}var A=o("xaxes",x),L=o("yaxes",k),u=n._diag=new Array(b);n._xaxes={},n._yaxes={};var m=[],S=[];function w(G,X,J,it){if(G){var nt=G.charAt(0),q=s._splomAxes[nt];if(n["_"+nt+"axes"][G]=1,it.push(G),!(G in q)){var Z=q[G]={};J&&(Z.label=J.label||"",J.visible&&J.axis&&(J.axis.type&&(Z.type=J.axis.type),J.axis.matches&&(Z.matches=X)))}}}var I=!a&&!_,O=!a&&!h;for(n._axesDim={},c=0;c<b;c++){var D=p[c],P=c===0,F=c===b-1,R=P&&I||F&&O?void 0:A[c],B=P&&O||F&&I?void 0:L[c];w(R,B,D,m),w(B,R,D,S),u[c]=[R,B],n._axesDim[R]=c,n._axesDim[B]=c}for(c=0;c<m.length;c++)for(f=0;f<S.length;f++){var N=m[c]+S[f];(c>f&&h||c<f&&_||c===f&&(a||!_||!h))&&(s._splomSubplots[N]=1)}(!_||!a&&h&&_)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}},83156:function(Q,U,t){var M=t(3400),E=t(90136),i=t(84236).markerStyle;Q.exports=function(C,T){var v=T.trace,d=C._fullLayout._splomScenes[v.uid];if(d){E(C,v),M.extendFlat(d.matrixOptions,i(C,v));var r=M.extendFlat({},d.matrixOptions,d.viewOpts);d.matrix.update(r,null)}}},50328:function(Q,U){U.getDimIndex=function(t,M){for(var E=M._id,i=E.charAt(0),C={x:0,y:1}[i],T=t._visibleDims,v=0;v<T.length;v++){var d=T[v];if(t._diag[d][C]===E)return v}return!1}},72248:function(Q,U,t){var M=t(50328),E=t(41272).calcHover,i=t(54460).getFromId,C=t(92880).extendFlat;function T(d,r,e,l,n){n||(n={});var s=(l||"").charAt(0)==="x",o=(l||"").charAt(0)==="y",p=v(d,r,e);if((s||o)&&n.hoversubplots==="axis"&&p[0])for(var b=(s?d.xa:d.ya)._subplotsWith,h=n.gd,_=C({},d),a=0;a<b.length;a++){var c=b[a];if(c!==d.xa._id+d.ya._id){o?_.xa=i(h,c,"x"):_.ya=i(h,c,"y");var f=s||o,x=v(_,r,e,f);p=p.concat(x)}}return p}function v(d,r,e,l){var n=d.cd,s=n[0].trace,o=d.scene,p=o.matrixOptions.cdata,b=d.xa,h=d.ya,_=b.c2p(r),a=h.c2p(e),c=d.distance,f=M.getDimIndex(s,b),x=M.getDimIndex(s,h);if(f===!1||x===!1)return[d];for(var k=p[f],y=p[x],A,L,u=c,m=0;m<k.length;m++)if(!(l&&m!==d.index)){var S=k[m],w=y[m],I=b.c2p(S)-_,O=h.c2p(w)-a,D=Math.sqrt(I*I+O*O);(l||D<u)&&(u=L=D,A=m)}return d.index=A,d.distance=u,d.dxy=L,A===void 0?[d]:[E(d,k,y,s)]}Q.exports={hoverPoints:T}},97924:function(Q,U,t){var M=t(28888);M.basePlotModule=t(99332),Q.exports=M},54840:function(Q,U,t){var M=t(55795),E=t(3400),i=t(79811),C=t(72760).selectMode;Q.exports=function(v,d,r){if(r.length)for(var e=0;e<r.length;e++)T(v,r[e][0])};function T(v,d){var r=v._fullLayout,e=r._size,l=d.trace,n=d.t,s=r._splomScenes[l.uid],o=s.matrixOptions,p=o.cdata,b=r._glcanvas.data()[0].regl,h=r.dragmode,_,a,c,f,x;if(p.length!==0){o.lower=l.showupperhalf,o.upper=l.showlowerhalf,o.diagonal=l.diagonal.visible;var k=l._visibleDims,y=p.length,A=s.viewOpts={};for(A.ranges=new Array(y),A.domains=new Array(y),x=0;x<k.length;x++){c=k[x];var L=A.ranges[x]=new Array(4),u=A.domains[x]=new Array(4);_=i.getFromId(v,l._diag[c][0]),_&&(L[0]=_._rl[0],L[2]=_._rl[1],u[0]=_.domain[0],u[2]=_.domain[1]),a=i.getFromId(v,l._diag[c][1]),a&&(L[1]=a._rl[0],L[3]=a._rl[1],u[1]=a.domain[0],u[3]=a.domain[1])}var m=v._context.plotGlPixelRatio,S=e.l*m,w=e.b*m,I=e.w*m,O=e.h*m;A.viewport=[S,w,I+S,O+w],s.matrix===!0&&(s.matrix=M(b));var D=r.clickmode.indexOf("select")>-1,P=C(h)||!!l.selectedpoints||D,F=!0;if(P){var R=l._length;if(l.selectedpoints){s.selectBatch=l.selectedpoints;var B=l.selectedpoints,N={};for(c=0;c<B.length;c++)N[B[c]]=!0;var G=[];for(c=0;c<R;c++)N[c]||G.push(c);s.unselectBatch=G}var X=n.xpx=new Array(y),J=n.ypx=new Array(y);for(x=0;x<k.length;x++){if(c=k[x],_=i.getFromId(v,l._diag[c][0]),_)for(X[x]=new Array(R),f=0;f<R;f++)X[x][f]=_.c2p(p[x][f]);if(a=i.getFromId(v,l._diag[c][1]),a)for(J[x]=new Array(R),f=0;f<R;f++)J[x][f]=a.c2p(p[x][f])}if(s.selectBatch.length||s.unselectBatch.length){var it=E.extendFlat({},o,s.unselectedOptions,A),nt=E.extendFlat({},o,s.selectedOptions,A);s.matrix.update(it,nt),F=!1}}else n.xpx=n.ypx=null;if(F){var q=E.extendFlat({},o,A);s.matrix.update(q,null)}}}},72308:function(Q,U,t){var M=t(3400);Q.exports=function(E,i){var C=E._fullLayout,T=i.uid,v=C._splomScenes;v||(v=C._splomScenes={});var d={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},e=v[i.uid];return e||(e=v[T]=M.extendFlat({},d,r),e.draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw()),e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy(),e.matrixOptions=null,e.selectBatch=null,e.unselectBatch=null,e=null}),e.dirty||M.extendFlat(e,d),e}},62500:function(Q,U,t){var M=t(3400),E=M.pushUnique,i=t(43028),C=t(50328);Q.exports=function(T,v){var d=T.cd,r=d[0].trace,e=d[0].t,l=T.scene,n=l.matrixOptions.cdata,s=T.xaxis,o=T.yaxis,p=[];if(!l)return p;var b=!i.hasMarkers(r)&&!i.hasText(r);if(r.visible!==!0||b)return p;var h=C.getDimIndex(r,s),_=C.getDimIndex(r,o);if(h===!1||_===!1)return p;var a=e.xpx[h],c=e.ypx[_],f=n[h],x=n[_],k=(T.scene.selectBatch||[]).slice(),y=[];if(v!==!1&&!v.degenerate)for(var A=0;A<f.length;A++)v.contains([a[A],c[A]],null,A,T)?(p.push({pointNumber:A,x:f[A],y:x[A]}),E(k,A)):k.indexOf(A)!==-1?E(k,A):y.push(A);var L=l.matrixOptions;return!k.length&&!y.length?l.matrix.update(L,null):!l.selectBatch.length&&!l.unselectBatch.length&&l.matrix.update(l.unselectedOptions,M.extendFlat({},L,l.selectedOptions,l.viewOpts)),l.selectBatch=k,l.unselectBatch=y,p}},90167:function(Q,U,t){var M=t(49084),E=t(29736).axisHoverFormat,i=t(21776).Ks,C=t(52948),T=t(45464),v=t(92880).extendFlat,d={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:i({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:E("u",1),vhoverformat:E("v",1),whoverformat:E("w",1),xhoverformat:E("x"),yhoverformat:E("y"),zhoverformat:E("z"),showlegend:v({},T.showlegend,{dflt:!1})};v(d,M("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(e){d[e]=C[e]}),d.hoverinfo=v({},T.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),d.transforms=void 0,Q.exports=d},3832:function(Q,U,t){var M=t(3400),E=t(47128);function i(d,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=v(r.u,r._len),r._v=v(r.v,r._len),r._w=v(r.w,r._len),r._x=v(r.x,r._len),r._y=v(r.y,r._len),r._z=v(r.z,r._len);var e=C(r);r._gridFill=e.fill,r._Xs=e.Xs,r._Ys=e.Ys,r._Zs=e.Zs,r._len=e.len;var l=0,n,s,o;r.starts&&(n=v(r.starts.x||[]),s=v(r.starts.y||[]),o=v(r.starts.z||[]),l=Math.min(n.length,s.length,o.length)),r._startsX=n||[],r._startsY=s||[],r._startsZ=o||[];var p=0,b=1/0,h;for(h=0;h<r._len;h++){var _=r._u[h],a=r._v[h],c=r._w[h],f=Math.sqrt(_*_+a*a+c*c);p=Math.max(p,f),b=Math.min(b,f)}for(E(d,r,{vals:[b,p],containerStr:"",cLetter:"c"}),h=0;h<l;h++){var x=n[h];e.xMax=Math.max(e.xMax,x),e.xMin=Math.min(e.xMin,x);var k=s[h];e.yMax=Math.max(e.yMax,k),e.yMin=Math.min(e.yMin,k);var y=o[h];e.zMax=Math.max(e.zMax,y),e.zMin=Math.min(e.zMin,y)}r._slen=l,r._normMax=p,r._xbnds=[e.xMin,e.xMax],r._ybnds=[e.yMin,e.yMax],r._zbnds=[e.zMin,e.zMax]}function C(d){var r=d._x,e=d._y,l=d._z,n=d._len,s,o,p,b=-1/0,h=1/0,_=-1/0,a=1/0,c=-1/0,f=1/0,x="",k,y,A,L,u,m,S,w,I;for(n&&(L=r[0],m=e[0],w=l[0]),n>1&&(u=r[n-1],S=e[n-1],I=l[n-1]),s=0;s<n;s++)b=Math.max(b,r[s]),h=Math.min(h,r[s]),_=Math.max(_,e[s]),a=Math.min(a,e[s]),c=Math.max(c,l[s]),f=Math.min(f,l[s]),!k&&r[s]!==L&&(k=!0,x+="x"),!y&&e[s]!==m&&(y=!0,x+="y"),!A&&l[s]!==w&&(A=!0,x+="z");k||(x+="x"),y||(x+="y"),A||(x+="z");var O=T(d._x),D=T(d._y),P=T(d._z);x=x.replace("x",(L>u?"-":"+")+"x"),x=x.replace("y",(m>S?"-":"+")+"y"),x=x.replace("z",(w>I?"-":"+")+"z");var F=function(){n=0,O=[],D=[],P=[]};(!n||n<O.length*D.length*P.length)&&F();var R=function(ct){return ct==="x"?r:ct==="y"?e:l},B=function(ct){return ct==="x"?O:ct==="y"?D:P},N=function(ct){return ct[n-1]<ct[0]?-1:1},G=R(x[1]),X=R(x[3]),J=R(x[5]),it=B(x[1]).length,nt=B(x[3]).length,q=B(x[5]).length,Z=!1,$=function(ct,ft,yt){return it*(nt*ct+ft)+yt},V=N(R(x[1])),rt=N(R(x[3])),ot=N(R(x[5]));for(s=0;s<q-1;s++){for(o=0;o<nt-1;o++){for(p=0;p<it-1;p++){var H=$(s,o,p),Y=$(s,o,p+1),at=$(s,o+1,p),et=$(s+1,o,p);if((!(G[H]*V<G[Y]*V)||!(X[H]*rt<X[at]*rt)||!(J[H]*ot<J[et]*ot))&&(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(M.warn("Encountered arbitrary coordinates! Unable to input data grid."),F()),{xMin:h,yMin:a,zMin:f,xMax:b,yMax:_,zMax:c,Xs:O,Ys:D,Zs:P,len:n,fill:x}}function T(d){return M.distinctVals(d).vals}function v(d,r){if(r===void 0&&(r=d.length),M.isTypedArray(d))return d.subarray(0,r);for(var e=[],l=0;l<r;l++)e[l]=+d[l];return e}Q.exports={calc:i,filter:v,processGrid:C}},25668:function(Q,U,t){var M=t(67792).gl_streamtube3d,E=M.createTubeMesh,i=t(3400),C=t(33040).parseColorScale,T=t(8932).extractOpts,v=t(52094),d={xaxis:0,yaxis:1,zaxis:2};function r(p,b){this.scene=p,this.uid=b,this.mesh=null,this.data=null}var e=r.prototype;e.handlePick=function(p){var b=this.scene.fullSceneLayout,h=this.scene.dataScale;function _(f,x){var k=b[x],y=h[d[x]];return k.l2c(f)/y}if(p.object===this.mesh){var a=p.data.position,c=p.data.velocity;return p.traceCoordinate=[_(a[0],"xaxis"),_(a[1],"yaxis"),_(a[2],"zaxis"),_(c[0],"xaxis"),_(c[1],"yaxis"),_(c[2],"zaxis"),p.data.intensity*this.data._normMax,p.data.divergence],p.textLabel=this.data.hovertext||this.data.text,!0}};function l(p){var b=p.length,h;return b>2?h=p.slice(1,b-1):b===2?h=[(p[0]+p[1])/2]:h=p,h}function n(p){var b=p.length;return b===1?[.5,.5]:[p[1]-p[0],p[b-1]-p[b-2]]}function s(p,b){var h=p.fullSceneLayout,_=p.dataScale,a=b._len,c={};function f(nt,q){var Z=h[q],$=_[d[q]];return i.simpleMap(nt,function(V){return Z.d2l(V)*$})}if(c.vectors=v(f(b._u,"xaxis"),f(b._v,"yaxis"),f(b._w,"zaxis"),a),!a)return{positions:[],cells:[]};var x=f(b._Xs,"xaxis"),k=f(b._Ys,"yaxis"),y=f(b._Zs,"zaxis");c.meshgrid=[x,k,y],c.gridFill=b._gridFill;var A=b._slen;if(A)c.startingPositions=v(f(b._startsX,"xaxis"),f(b._startsY,"yaxis"),f(b._startsZ,"zaxis"));else{for(var L=k[0],u=l(x),m=l(y),S=new Array(u.length*m.length),w=0,I=0;I<u.length;I++)for(var O=0;O<m.length;O++)S[w++]=[u[I],L,m[O]];c.startingPositions=S}c.colormap=C(b),c.tubeSize=b.sizeref,c.maxLength=b.maxdisplayed;var D=f(b._xbnds,"xaxis"),P=f(b._ybnds,"yaxis"),F=f(b._zbnds,"zaxis"),R=n(x),B=n(k),N=n(y),G=[[D[0]-R[0],P[0]-B[0],F[0]-N[0]],[D[1]+R[1],P[1]+B[1],F[1]+N[1]]],X=M(c,G),J=T(b);X.vertexIntensityBounds=[J.min/b._normMax,J.max/b._normMax];var it=b.lightposition;return X.lightPosition=[it.x,it.y,it.z],X.ambient=b.lighting.ambient,X.diffuse=b.lighting.diffuse,X.specular=b.lighting.specular,X.roughness=b.lighting.roughness,X.fresnel=b.lighting.fresnel,X.opacity=b.opacity,b._pad=X.tubeScale*b.sizeref*2,X}e.update=function(p){this.data=p;var b=s(this.scene,p);this.mesh.update(b)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function o(p,b){var h=p.glplot.gl,_=s(p,b),a=E(h,_),c=new r(p,b.uid);return c.mesh=a,c.data=b,a._trace=c,p.glplot.add(a),c}Q.exports=o},54304:function(Q,U,t){var M=t(3400),E=t(27260),i=t(90167);Q.exports=function(C,T,v,d){function r(b,h){return M.coerce(C,T,i,b,h)}var e=r("u"),l=r("v"),n=r("w"),s=r("x"),o=r("y"),p=r("z");if(!e||!e.length||!l||!l.length||!n||!n.length||!s||!s.length||!o||!o.length||!p||!p.length){T.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),E(C,T,d,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),T._length=null}},15436:function(Q,U,t){Q.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(12536),categories:["gl3d","showLegend"],attributes:t(90167),supplyDefaults:t(54304),colorbar:{min:"cmin",max:"cmax"},calc:t(3832).calc,plot:t(25668),eventData:function(M,E){return M.tubex=M.x,M.tubey=M.y,M.tubez=M.z,M.tubeu=E.traceCoordinate[3],M.tubev=E.traceCoordinate[4],M.tubew=E.traceCoordinate[5],M.norm=E.traceCoordinate[6],M.divergence=E.traceCoordinate[7],delete M.x,delete M.y,delete M.z,M},meta:{}}},424:function(Q,U,t){var M=t(45464),E=t(21776).Ks,i=t(21776).Gw,C=t(49084),T=t(86968).u,v=t(74996),d=t(27328),r=t(92880).extendFlat,e=t(98192).c;Q.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},v.marker.line.color,{dflt:null}),width:r({},v.marker.line.width,{dflt:1}),editType:"calc"},pattern:e,editType:"calc"},C("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:v.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:i({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:v.hovertext,hoverinfo:r({},M.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:E({},{keys:d.eventDataKeys}),textfont:v.textfont,insidetextorientation:v.insidetextorientation,insidetextfont:v.insidetextfont,outsidetextfont:r({},v.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:v.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:T({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(Q,U,t){var M=t(7316);U.name="sunburst",U.plot=function(E,i,C,T){M.plotBasePlot(U.name,E,i,C,T)},U.clean=function(E,i,C,T){M.cleanBasePlot(U.name,E,i,C,T)}},3776:function(Q,U,t){var M=t(74148),E=t(38248),i=t(3400),C=t(8932).makeColorScaleFuncFromTrace,T=t(45768).makePullColorFn,v=t(45768).generateExtendedColors,d=t(8932).calc,r=t(39032).ALMOST_EQUAL,e={},l={},n={};U.calc=function(o,p){var b=o._fullLayout,h=p.ids,_=i.isArrayOrTypedArray(h),a=p.labels,c=p.parents,f=p.values,x=i.isArrayOrTypedArray(f),k=[],y={},A={},L=function(V,rt){y[V]?y[V].push(rt):y[V]=[rt],A[rt]=1},u=function(V){return V||typeof V=="number"},m=function(V){return!x||E(f[V])&&f[V]>=0},S,w,I;_?(S=Math.min(h.length,c.length),w=function(V){return u(h[V])&&m(V)},I=function(V){return String(h[V])}):(S=Math.min(a.length,c.length),w=function(V){return u(a[V])&&m(V)},I=function(V){return String(a[V])}),x&&(S=Math.min(S,f.length));for(var O=0;O<S;O++)if(w(O)){var D=I(O),P=u(c[O])?String(c[O]):"",F={i:O,id:D,pid:P,label:u(a[O])?String(a[O]):""};x&&(F.v=+f[O]),k.push(F),L(P,D)}if(y[""]){if(y[""].length>1){for(var R=i.randstr(),B=0;B<k.length;B++)k[B].pid===""&&(k[B].pid=R);k.unshift({hasMultipleRoots:!0,id:R,pid:"",label:""})}}else{var N=[],G;for(G in y)A[G]||N.push(G);if(N.length===1)G=N[0],k.unshift({hasImpliedRoot:!0,id:G,pid:"",label:G});else return i.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",N.join(", ")].join(" "))}var X;try{X=M.stratify().id(function(V){return V.id}).parentId(function(V){return V.pid})(k)}catch(V){return i.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",V.message].join(" "))}var J=M.hierarchy(X),it=!1;if(x)switch(p.branchvalues){case"remainder":J.sum(function(V){return V.data.v});break;case"total":J.each(function(V){var rt=V.data.data,ot=rt.v;if(V.children){var H=V.children.reduce(function(Y,at){return Y+at.data.data.v},0);if((rt.hasImpliedRoot||rt.hasMultipleRoots)&&(ot=H),ot<H*r)return it=!0,i.warn(["Total value for node",V.data.data.id,"of",p.name,"is smaller than the sum of its children.",`
parent value =`,ot,`
children sum =`,H].join(" "))}V.value=ot});break}else s(J,p,{branches:p.count.indexOf("branches")!==-1,leaves:p.count.indexOf("leaves")!==-1});if(!it){p.sort&&J.sort(function(V,rt){return rt.value-V.value});var nt,q,Z=p.marker.colors||[],$=!!Z.length;return p._hasColorscale?($||(Z=x?p.values:p._values),d(o,p,{vals:Z,containerStr:"marker",cLetter:"c"}),q=C(p.marker)):nt=T(b["_"+p.type+"colormap"]),J.each(function(V){var rt=V.data.data;rt.color=p._hasColorscale?q(Z[rt.i]):nt(Z[rt.i],rt.id)}),k[0].hierarchy=J,k}},U._runCrossTraceCalc=function(o,p){var b=p._fullLayout,h=p.calcdata,_=b[o+"colorway"],a=b["_"+o+"colormap"];b["extend"+o+"colors"]&&(_=v(_,o==="icicle"?n:o==="treemap"?l:e));var c=0,f;function x(L){var u=L.data.data,m=u.id;u.color===!1&&(a[m]?u.color=a[m]:L.parent?L.parent.parent?u.color=L.parent.data.data.color:(a[m]=u.color=_[c%_.length],c++):u.color=f)}for(var k=0;k<h.length;k++){var y=h[k],A=y[0];A.trace.type===o&&A.hierarchy&&(f=A.trace.root.color,A.hierarchy.each(x))}},U.crossTraceCalc=function(o){return U._runCrossTraceCalc("sunburst",o)};function s(o,p,b){var h=0,_=o.children;if(_){for(var a=_.length,c=0;c<a;c++)h+=s(_[c],p,b);b.branches&&h++}else b.leaves&&h++;return o.value=o.data.data.value=h,p._values||(p._values=[]),p._values[o.data.data.i]=h,h}},27328:function(Q){Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(Q,U,t){var M=t(3400),E=t(424),i=t(86968).Q,C=t(31508).handleText,T=t(74174).handleMarkerDefaults,v=t(8932),d=v.hasColorscale,r=v.handleDefaults;Q.exports=function(e,l,n,s){function o(f,x){return M.coerce(e,l,E,f,x)}var p=o("labels"),b=o("parents");if(!p||!p.length||!b||!b.length){l.visible=!1;return}var h=o("values");h&&h.length?o("branchvalues"):o("count"),o("level"),o("maxdepth"),T(e,l,s,o);var _=l._hasColorscale=d(e,"marker","colors")||(e.marker||{}).coloraxis;_&&r(e,l,s,o,{prefix:"marker.",cLetter:"c"}),o("leaf.opacity",_?1:.7);var a=o("text");o("texttemplate"),l.texttemplate||o("textinfo",M.isArrayOrTypedArray(a)?"text+label":"label"),o("hovertext"),o("hovertemplate");var c="auto";C(e,l,s,o,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),o("insidetextorientation"),o("sort"),o("rotation"),o("root.color"),i(l,s,o),l._length=null}},60404:function(Q,U,t){var M=t(43616),E=t(76308);Q.exports=function(i,C,T,v,d){var r=C.data.data,e=r.i,l=d||r.color;if(e>=0){C.i=r.i;var n=T.marker;n.pattern?(!n.colors||!n.pattern.shape)&&(n.color=l,C.color=l):(n.color=l,C.color=l),M.pointStyle(i,T,v,C)}else E.fill(i,l)}},45716:function(Q,U,t){var M=t(33428),E=t(24040),i=t(10624).appendArrayPointValue,C=t(93024),T=t(3400),v=t(95924),d=t(78176),r=t(69656),e=r.formatPieValue;Q.exports=function(n,s,o,p,b){var h=p[0],_=h.trace,a=h.hierarchy,c=_.type==="sunburst",f=_.type==="treemap"||_.type==="icicle";"_hasHoverLabel"in _||(_._hasHoverLabel=!1),"_hasHoverEvent"in _||(_._hasHoverEvent=!1);var x=function(A){var L=o._fullLayout;if(!(o._dragging||L.hovermode===!1)){var u=o._fullData[_.index],m=A.data.data,S=m.i,w=d.isHierarchyRoot(A),I=d.getParent(a,A),O=d.getValue(A),D=function(H){return T.castOption(u,S,H)},P=D("hovertemplate"),F=C.castHoverinfo(u,L,S),R=L.separators,B;if(P||F&&F!=="none"&&F!=="skip"){var N,G;c&&(N=h.cx+A.pxmid[0]*(1-A.rInscribed),G=h.cy+A.pxmid[1]*(1-A.rInscribed)),f&&(N=A._hoverX,G=A._hoverY);var X={},J=[],it=[],nt=function(H){return J.indexOf(H)!==-1};F&&(J=F==="all"?u._module.attributes.hoverinfo.flags:F.split("+")),X.label=m.label,nt("label")&&X.label&&it.push(X.label),m.hasOwnProperty("v")&&(X.value=m.v,X.valueLabel=e(X.value,R),nt("value")&&it.push(X.valueLabel)),X.currentPath=A.currentPath=d.getPath(A.data),nt("current path")&&!w&&it.push(X.currentPath);var q,Z=[],$=function(){Z.indexOf(q)===-1&&(it.push(q),Z.push(q))};X.percentParent=A.percentParent=O/d.getValue(I),X.parent=A.parentString=d.getPtLabel(I),nt("percent parent")&&(q=d.formatPercent(X.percentParent,R)+" of "+X.parent,$()),X.percentEntry=A.percentEntry=O/d.getValue(s),X.entry=A.entry=d.getPtLabel(s),nt("percent entry")&&!w&&!A.onPathbar&&(q=d.formatPercent(X.percentEntry,R)+" of "+X.entry,$()),X.percentRoot=A.percentRoot=O/d.getValue(a),X.root=A.root=d.getPtLabel(a),nt("percent root")&&!w&&(q=d.formatPercent(X.percentRoot,R)+" of "+X.root,$()),X.text=D("hovertext")||D("text"),nt("text")&&(q=X.text,T.isValidTextValue(q)&&it.push(q)),B=[l(A,u,b.eventDataKeys)];var V={trace:u,y:G,_x0:A._x0,_x1:A._x1,_y0:A._y0,_y1:A._y1,text:it.join("<br>"),name:P||nt("name")?u.name:void 0,color:D("hoverlabel.bgcolor")||m.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:X,eventData:B};c&&(V.x0=N-A.rInscribed*A.rpx1,V.x1=N+A.rInscribed*A.rpx1,V.idealAlign=A.pxmid[0]<0?"left":"right"),f&&(V.x=N,V.idealAlign=N<0?"left":"right");var rt=[];C.loneHover(V,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:o,inOut_bbox:rt}),B[0].bbox=rt[0],_._hasHoverLabel=!0}if(f){var ot=n.select("path.surface");b.styleOne(ot,A,u,o,{hovered:!0})}_._hasHoverEvent=!0,o.emit("plotly_hover",{points:B||[l(A,u,b.eventDataKeys)],event:M.event})}},k=function(A){var L=o._fullLayout,u=o._fullData[_.index],m=M.select(this).datum();if(_._hasHoverEvent&&(A.originalEvent=M.event,o.emit("plotly_unhover",{points:[l(m,u,b.eventDataKeys)],event:M.event}),_._hasHoverEvent=!1),_._hasHoverLabel&&(C.loneUnhover(L._hoverlayer.node()),_._hasHoverLabel=!1),f){var S=n.select("path.surface");b.styleOne(S,m,u,o,{hovered:!1})}},y=function(A){var L=o._fullLayout,u=o._fullData[_.index],m=c&&(d.isHierarchyRoot(A)||d.isLeaf(A)),S=d.getPtId(A),w=d.isEntry(A)?d.findEntryWithChild(a,S):d.findEntryWithLevel(a,S),I=d.getPtId(w),O={points:[l(A,u,b.eventDataKeys)],event:M.event};m||(O.nextLevel=I);var D=v.triggerHandler(o,"plotly_"+_.type+"click",O);if(D!==!1&&L.hovermode&&(o._hoverdata=[l(A,u,b.eventDataKeys)],C.click(o,M.event)),!m&&D!==!1&&!o._dragging&&!o._transitioning){E.call("_storeDirectGUIEdit",u,L._tracePreGUI[u.uid],{level:u.level});var P={data:[{level:I}],traces:[_.index]},F={frame:{redraw:!1,duration:b.transitionTime},transition:{duration:b.transitionTime,easing:b.transitionEasing},mode:"immediate",fromcurrent:!0};C.loneUnhover(L._hoverlayer.node()),E.call("animate",o,P,F)}};n.on("mouseover",x),n.on("mouseout",k),n.on("click",y)};function l(n,s,o){for(var p=n.data.data,b={curveNumber:s.index,pointNumber:p.i,data:s._input,fullData:s},h=0;h<o.length;h++){var _=o[h];_ in n&&(b[_]=n[_])}return"parentString"in n&&!d.isHierarchyRoot(n)&&(b.parent=n.parentString),i(b,s,p.i),b}},78176:function(Q,U,t){var M=t(3400),E=t(76308),i=t(93972),C=t(69656);U.findEntryWithLevel=function(r,e){var l;return e&&r.eachAfter(function(n){if(U.getPtId(n)===e)return l=n.copy()}),l||r},U.findEntryWithChild=function(r,e){var l;return r.eachAfter(function(n){for(var s=n.children||[],o=0;o<s.length;o++){var p=s[o];if(U.getPtId(p)===e)return l=n.copy()}}),l||r},U.isEntry=function(r){return!r.parent},U.isLeaf=function(r){return!r.children},U.getPtId=function(r){return r.data.data.id},U.getPtLabel=function(r){return r.data.data.label},U.getValue=function(r){return r.value},U.isHierarchyRoot=function(r){return d(r)===""},U.setSliceCursor=function(r,e,l){var n=l.isTransitioning;if(!n){var s=r.datum();n=l.hideOnRoot&&U.isHierarchyRoot(s)||l.hideOnLeaves&&U.isLeaf(s)}i(r,n?null:"pointer")};function T(r,e,l){return{color:U.getOutsideTextFontKey("color",r,e,l),family:U.getOutsideTextFontKey("family",r,e,l),size:U.getOutsideTextFontKey("size",r,e,l)}}function v(r,e,l,n){var s=(n||{}).onPathbar,o=e.data.data,p=o.i,b=M.castOption(r,p,(s?"pathbar.textfont":"insidetextfont")+".color");return!b&&r._input.textfont&&(b=M.castOption(r._input,p,"textfont.color")),{color:b||E.contrast(o.color),family:U.getInsideTextFontKey("family",r,e,l,n),size:U.getInsideTextFontKey("size",r,e,l,n)}}U.getInsideTextFontKey=function(r,e,l,n,s){var o=(s||{}).onPathbar,p=o?"pathbar.textfont":"insidetextfont",b=l.data.data.i;return M.castOption(e,b,p+"."+r)||M.castOption(e,b,"textfont."+r)||n.size},U.getOutsideTextFontKey=function(r,e,l,n){var s=l.data.data.i;return M.castOption(e,s,"outsidetextfont."+r)||M.castOption(e,s,"textfont."+r)||n.size},U.isOutsideText=function(r,e){return!r._hasColorscale&&U.isHierarchyRoot(e)},U.determineTextFont=function(r,e,l,n){return U.isOutsideText(r,e)?T(r,e,l):v(r,e,l,n)},U.hasTransition=function(r){return!!(r&&r.duration>0)},U.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},U.isHeader=function(r,e){return!(U.isLeaf(r)||r.depth===e._maxDepth-1)};function d(r){return r.data.data.pid}U.getParent=function(r,e){return U.findEntryWithLevel(r,d(e))},U.listPath=function(r,e){var l=r.parent;if(!l)return[];var n=e?[l.data[e]]:[l];return U.listPath(l,e).concat(n)},U.getPath=function(r){return U.listPath(r,"label").join("/")+"/"},U.formatValue=C.formatPieValue,U.formatPercent=function(r,e){var l=M.formatPercent(r,0);return l==="0%"&&(l=C.formatPiePercent(r,e)),l}},5621:function(Q,U,t){Q.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(54904),categories:[],animatable:!0,attributes:t(424),layoutAttributes:t(84920),supplyDefaults:t(25244),supplyLayoutDefaults:t(28732),calc:t(3776).calc,crossTraceCalc:t(3776).crossTraceCalc,plot:t(96488).plot,style:t(85676).style,colorbar:t(5528),meta:{}}},84920:function(Q){Q.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(Q,U,t){var M=t(3400),E=t(84920);Q.exports=function(i,C){function T(v,d){return M.coerce(i,C,E,v,d)}T("sunburstcolorway",C.colorway),T("extendsunburstcolors")}},96488:function(Q,U,t){var M=t(33428),E=t(74148),i=t(67756).qy,C=t(43616),T=t(3400),v=t(72736),d=t(82744),r=d.recordMinTextSize,e=d.clearMinTextSize,l=t(37820),n=t(69656).getRotationAngle,s=l.computeTransform,o=l.transformInsideText,p=t(85676).styleOne,b=t(60100).resizeText,h=t(45716),_=t(27328),a=t(78176);U.plot=function(A,L,u,m){var S=A._fullLayout,w=S._sunburstlayer,I,O,D=!u,P=!S.uniformtext.mode&&a.hasTransition(u);if(e("sunburst",S),I=w.selectAll("g.trace.sunburst").data(L,function(R){return R[0].trace.uid}),I.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),I.order(),P){m&&(O=m());var F=M.transition().duration(u.duration).ease(u.easing).each("end",function(){O&&O()}).each("interrupt",function(){O&&O()});F.each(function(){w.selectAll("g.trace").each(function(R){c(A,R,this,u)})})}else I.each(function(R){c(A,R,this,u)}),S.uniformtext.mode&&b(A,S._sunburstlayer.selectAll(".trace"),"sunburst");D&&I.exit().remove()};function c(A,L,u,m){var S=A._context.staticPlot,w=A._fullLayout,I=!w.uniformtext.mode&&a.hasTransition(m),O=M.select(u),D=O.selectAll("g.slice"),P=L[0],F=P.trace,R=P.hierarchy,B=a.findEntryWithLevel(R,F.level),N=a.getMaxDepth(F),G=w._size,X=F.domain,J=G.w*(X.x[1]-X.x[0]),it=G.h*(X.y[1]-X.y[0]),nt=.5*Math.min(J,it),q=P.cx=G.l+G.w*(X.x[1]+X.x[0])/2,Z=P.cy=G.t+G.h*(1-X.y[0])-it/2;if(!B)return D.remove();var $=null,V={};I&&D.each(function(Bt){V[a.getPtId(Bt)]={rpx0:Bt.rpx0,rpx1:Bt.rpx1,x0:Bt.x0,x1:Bt.x1,transform:Bt.transform},!$&&a.isEntry(Bt)&&($=Bt)});var rt=f(B).descendants(),ot=B.height+1,H=0,Y=N;P.hasMultipleRoots&&a.isHierarchyRoot(B)&&(rt=rt.slice(1),ot-=1,H=1,Y+=1),rt=rt.filter(function(Bt){return Bt.y1<=Y});var at=n(F.rotation);at&&rt.forEach(function(Bt){Bt.x0+=at,Bt.x1+=at});var et=Math.min(ot,N),ct=function(Bt){return(Bt-H)/et*nt},ft=function(Bt,re){return[Bt*Math.cos(re),-Bt*Math.sin(re)]},yt=function(Bt){return T.pathAnnulus(Bt.rpx0,Bt.rpx1,Bt.x0,Bt.x1,q,Z)},xt=function(Bt){return q+k(Bt)[0]*(Bt.transform.rCenter||0)+(Bt.transform.x||0)},Ct=function(Bt){return Z+k(Bt)[1]*(Bt.transform.rCenter||0)+(Bt.transform.y||0)};D=D.data(rt,a.getPtId),D.enter().append("g").classed("slice",!0),I?D.exit().transition().each(function(){var Bt=M.select(this),re=Bt.select("path.surface");re.transition().attrTween("d",function(he){var Zt=At(he);return function(ae){return yt(Zt(ae))}});var Yt=Bt.select("g.slicetext");Yt.attr("opacity",0)}).remove():D.exit().remove(),D.order();var gt=null;if(I&&$){var mt=a.getPtId($);D.each(function(Bt){gt===null&&a.getPtId(Bt)===mt&&(gt=Bt.x1)})}var vt=D;I&&(vt=vt.transition().each("end",function(){var Bt=M.select(this);a.setSliceCursor(Bt,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),vt.each(function(Bt){var re=M.select(this),Yt=T.ensureSingle(re,"path","surface",function(ue){ue.style("pointer-events",S?"none":"all")});Bt.rpx0=ct(Bt.y0),Bt.rpx1=ct(Bt.y1),Bt.xmid=(Bt.x0+Bt.x1)/2,Bt.pxmid=ft(Bt.rpx1,Bt.xmid),Bt.midangle=-(Bt.xmid-Math.PI/2),Bt.startangle=-(Bt.x0-Math.PI/2),Bt.stopangle=-(Bt.x1-Math.PI/2),Bt.halfangle=.5*Math.min(T.angleDelta(Bt.x0,Bt.x1)||Math.PI,Math.PI),Bt.ring=1-Bt.rpx0/Bt.rpx1,Bt.rInscribed=x(Bt),I?Yt.transition().attrTween("d",function(ue){var ye=Ot(ue);return function(Tt){return yt(ye(Tt))}}):Yt.attr("d",yt),re.call(h,B,A,L,{eventDataKeys:_.eventDataKeys,transitionTime:_.CLICK_TRANSITION_TIME,transitionEasing:_.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:A._transitioning}),Yt.call(p,Bt,F,A);var he=T.ensureSingle(re,"g","slicetext"),Zt=T.ensureSingle(he,"text","",function(ue){ue.attr("data-notex",1)}),ae=T.ensureUniformFontSize(A,a.determineTextFont(F,Bt,w.font));Zt.text(U.formatSliceLabel(Bt,B,F,L,w)).classed("slicetext",!0).attr("text-anchor","middle").call(C.font,ae).call(v.convertToTspans,A);var oe=C.bBox(Zt.node());Bt.transform=o(oe,Bt,P),Bt.transform.targetX=xt(Bt),Bt.transform.targetY=Ct(Bt);var ce=function(ue,ye){var Tt=ue.transform;return s(Tt,ye),Tt.fontSize=ae.size,r(F.type,Tt,w),T.getTextTransform(Tt)};I?Zt.transition().attrTween("transform",function(ue){var ye=It(ue);return function(Tt){return ce(ye(Tt),oe)}}):Zt.attr("transform",ce(Bt,oe))});function At(Bt){var re=a.getPtId(Bt),Yt=V[re],he=V[a.getPtId(B)],Zt;if(he){var ae=(Bt.x1>he.x1?2*Math.PI:0)+at;Zt=Bt.rpx1<he.rpx1?{x0:Bt.x0,x1:Bt.x1,rpx0:0,rpx1:0}:{x0:ae,x1:ae,rpx0:Bt.rpx0,rpx1:Bt.rpx1}}else{var oe,ce=a.getPtId(Bt.parent);D.each(function($t){if(a.getPtId($t)===ce)return oe=$t});var ue=oe.children,ye;ue.forEach(function($t,Vt){if(a.getPtId($t)===re)return ye=Vt});var Tt=ue.length,Ft=i(oe.x0,oe.x1);Zt={rpx0:nt,rpx1:nt,x0:Ft(ye/Tt),x1:Ft((ye+1)/Tt)}}return i(Yt,Zt)}function Ot(Bt){var re=V[a.getPtId(Bt)],Yt,he={x0:Bt.x0,x1:Bt.x1,rpx0:Bt.rpx0,rpx1:Bt.rpx1};if(re)Yt=re;else if($)if(Bt.parent)if(gt){var Zt=(Bt.x1>gt?2*Math.PI:0)+at;Yt={x0:Zt,x1:Zt}}else Yt={rpx0:nt,rpx1:nt},T.extendFlat(Yt,St(Bt));else Yt={rpx0:0,rpx1:0};else Yt={x0:at,x1:at};return i(Yt,he)}function It(Bt){var re=V[a.getPtId(Bt)],Yt,he=Bt.transform;if(re)Yt=re;else if(Yt={rpx1:Bt.rpx1,transform:{textPosAngle:he.textPosAngle,scale:0,rotate:he.rotate,rCenter:he.rCenter,x:he.x,y:he.y}},$)if(Bt.parent)if(gt){var Zt=Bt.x1>gt?2*Math.PI:0;Yt.x0=Yt.x1=Zt}else T.extendFlat(Yt,St(Bt));else Yt.x0=Yt.x1=at;else Yt.x0=Yt.x1=at;var ae=i(Yt.transform.textPosAngle,Bt.transform.textPosAngle),oe=i(Yt.rpx1,Bt.rpx1),ce=i(Yt.x0,Bt.x0),ue=i(Yt.x1,Bt.x1),ye=i(Yt.transform.scale,he.scale),Tt=i(Yt.transform.rotate,he.rotate),Ft=he.rCenter===0?3:Yt.transform.rCenter===0?1/3:1,$t=i(Yt.transform.rCenter,he.rCenter),Vt=function(Nt){return $t(Math.pow(Nt,Ft))};return function(Nt){var Mt=oe(Nt),Et=ce(Nt),Dt=ue(Nt),dt=Vt(Nt),ht=ft(Mt,(Et+Dt)/2),bt=ae(Nt),Pt={pxmid:ht,rpx1:Mt,transform:{textPosAngle:bt,rCenter:dt,x:he.x,y:he.y}};return r(F.type,he,w),{transform:{targetX:xt(Pt),targetY:Ct(Pt),scale:ye(Nt),rotate:Tt(Nt),rCenter:dt}}}}function St(Bt){var re=Bt.parent,Yt=V[a.getPtId(re)],he={};if(Yt){var Zt=re.children,ae=Zt.indexOf(Bt),oe=Zt.length,ce=i(Yt.x0,Yt.x1);he.x0=ce(ae/oe),he.x1=ce(ae/oe)}else he.x0=he.x1=0;return he}}function f(A){return E.partition().size([2*Math.PI,A.height+1])(A)}U.formatSliceLabel=function(A,L,u,m,S){var w=u.texttemplate,I=u.textinfo;if(!w&&(!I||I==="none"))return"";var O=S.separators,D=m[0],P=A.data.data,F=D.hierarchy,R=a.isHierarchyRoot(A),B=a.getParent(F,A),N=a.getValue(A);if(!w){var G=I.split("+"),X=function(H){return G.indexOf(H)!==-1},J=[],it;if(X("label")&&P.label&&J.push(P.label),P.hasOwnProperty("v")&&X("value")&&J.push(a.formatValue(P.v,O)),!R){X("current path")&&J.push(a.getPath(A.data));var nt=0;X("percent parent")&&nt++,X("percent entry")&&nt++,X("percent root")&&nt++;var q=nt>1;if(nt){var Z,$=function(H){it=a.formatPercent(Z,O),q&&(it+=" of "+H),J.push(it)};X("percent parent")&&!R&&(Z=N/a.getValue(B),$("parent")),X("percent entry")&&(Z=N/a.getValue(L),$("entry")),X("percent root")&&(Z=N/a.getValue(F),$("root"))}}return X("text")&&(it=T.castOption(u,P.i,"text"),T.isValidTextValue(it)&&J.push(it)),J.join("<br>")}var V=T.castOption(u,P.i,"texttemplate");if(!V)return"";var rt={};P.label&&(rt.label=P.label),P.hasOwnProperty("v")&&(rt.value=P.v,rt.valueLabel=a.formatValue(P.v,O)),rt.currentPath=a.getPath(A.data),R||(rt.percentParent=N/a.getValue(B),rt.percentParentLabel=a.formatPercent(rt.percentParent,O),rt.parent=a.getPtLabel(B)),rt.percentEntry=N/a.getValue(L),rt.percentEntryLabel=a.formatPercent(rt.percentEntry,O),rt.entry=a.getPtLabel(L),rt.percentRoot=N/a.getValue(F),rt.percentRootLabel=a.formatPercent(rt.percentRoot,O),rt.root=a.getPtLabel(F),P.hasOwnProperty("color")&&(rt.color=P.color);var ot=T.castOption(u,P.i,"text");return(T.isValidTextValue(ot)||ot==="")&&(rt.text=ot),rt.customdata=T.castOption(u,P.i,"customdata"),T.texttemplateString(V,rt,S._d3locale,rt,u._meta||{})};function x(A){return A.rpx0===0&&T.isFullCircle([A.x0,A.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(A.halfangle)),A.ring/2))}function k(A){return y(A.rpx1,A.transform.textPosAngle)}function y(A,L){return[A*Math.sin(L),-A*Math.cos(L)]}},85676:function(Q,U,t){var M=t(33428),E=t(76308),i=t(3400),C=t(82744).resizeText,T=t(60404);function v(r){var e=r._fullLayout._sunburstlayer.selectAll(".trace");C(r,e,"sunburst"),e.each(function(l){var n=M.select(this),s=l[0],o=s.trace;n.style("opacity",o.opacity),n.selectAll("path.surface").each(function(p){M.select(this).call(d,p,o,r)})})}function d(r,e,l,n){var s=e.data.data,o=!e.children,p=s.i,b=i.castOption(l,p,"marker.line.color")||E.defaultLine,h=i.castOption(l,p,"marker.line.width")||0;r.call(T,e,l,n).style("stroke-width",h).call(E.stroke,b).style("opacity",o?l.leaf.opacity:null)}Q.exports={style:v,styleOne:d}},16716:function(Q,U,t){var M=t(76308),E=t(49084),i=t(29736).axisHoverFormat,C=t(21776).Ks,T=t(45464),v=t(92880).extendFlat,d=t(67824).overrideAll;function r(n){return{valType:"boolean",dflt:!1}}function e(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:M.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:M.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var l=Q.exports=d(v({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:C(),xhoverformat:i("x"),yhoverformat:i("y"),zhoverformat:i("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},E("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e(),y:e(),z:e()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:v({},E.zauto,{}),zmin:v({},E.zmin,{}),zmax:v({},E.zmax,{})},hoverinfo:v({},T.hoverinfo),showlegend:v({},T.showlegend,{dflt:!1})}),"calc","nested");l.x.editType=l.y.editType=l.z.editType="calc+clearAxisTypes",l.transforms=void 0},56576:function(Q,U,t){var M=t(47128);Q.exports=function(E,i){i.surfacecolor?M(E,i,{vals:i.surfacecolor,containerStr:"",cLetter:"c"}):M(E,i,{vals:i.z,containerStr:"",cLetter:"c"})}},79164:function(Q,U,t){var M=t(67792).gl_surface3d,E=t(67792).ndarray,i=t(67792).ndarray_linear_interpolate.d2,C=t(70448),T=t(11240),v=t(3400).isArrayOrTypedArray,d=t(33040).parseColorScale,r=t(43080),e=t(8932).extractOpts;function l(m,S,w){this.scene=m,this.uid=w,this.surface=S,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=l.prototype;n.getXat=function(m,S,w,I){var O=v(this.data.x)?v(this.data.x[0])?this.data.x[S][m]:this.data.x[m]:m;return w===void 0?O:I.d2l(O,0,w)},n.getYat=function(m,S,w,I){var O=v(this.data.y)?v(this.data.y[0])?this.data.y[S][m]:this.data.y[S]:S;return w===void 0?O:I.d2l(O,0,w)},n.getZat=function(m,S,w,I){var O=this.data.z[S][m];return O===null&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[S][m]),w===void 0?O:I.d2l(O,0,w)},n.handlePick=function(m){if(m.object===this.surface){var S=(m.data.index[0]-1)/this.dataScaleX-1,w=(m.data.index[1]-1)/this.dataScaleY-1,I=Math.max(Math.min(Math.round(S),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(w),this.data._ylength-1),0);m.index=[I,O],m.traceCoordinate=[this.getXat(I,O),this.getYat(I,O),this.getZat(I,O)],m.dataCoordinate=[this.getXat(I,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(I,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(I,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var P=m.dataCoordinate[D];P!=null&&(m.dataCoordinate[D]*=this.scene.dataScale[D])}var F=this.data.hovertext||this.data.text;return v(F)&&F[O]&&F[O][I]!==void 0?m.textLabel=F[O][I]:F?m.textLabel=F:m.textLabel="",m.data.dataCoordinate=m.dataCoordinate.slice(),this.surface.highlight(m.data),this.scene.glplot.spikes.position=m.dataCoordinate,!0}};function s(m){var S=m[0].rgb,w=m[m.length-1].rgb;return S[0]===w[0]&&S[1]===w[1]&&S[2]===w[2]&&S[3]===w[3]}var o=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function p(m,S){if(m<S)return 0;for(var w=0;Math.floor(m%S)===0;)m/=S,w++;return w}function b(m){for(var S=[],w=0;w<o.length;w++){var I=o[w];S.push(p(m,I))}return S}function h(m){for(var S=b(m),w=m,I=0;I<o.length;I++)if(S[I]>0){w=o[I];break}return w}function _(m,S){if(!(m<1||S<1)){for(var w=b(m),I=b(S),O=1,D=0;D<o.length;D++)O*=Math.pow(o[D],Math.max(w[D],I[D]));return O}}function a(m){if(m.length!==0){for(var S=1,w=0;w<m.length;w++)S=_(S,m[w]);return S}}n.calcXnums=function(m){var S,w=[];for(S=1;S<m;S++){var I=this.getXat(S-1,0),O=this.getXat(S,0);O!==I&&I!==void 0&&I!==null&&O!==void 0&&O!==null?w[S-1]=Math.abs(O-I):w[S-1]=0}var D=0;for(S=1;S<m;S++)D+=w[S-1];for(S=1;S<m;S++)w[S-1]===0?w[S-1]=1:w[S-1]=Math.round(D/w[S-1]);return w},n.calcYnums=function(m){var S,w=[];for(S=1;S<m;S++){var I=this.getYat(0,S-1),O=this.getYat(0,S);O!==I&&I!==void 0&&I!==null&&O!==void 0&&O!==null?w[S-1]=Math.abs(O-I):w[S-1]=0}var D=0;for(S=1;S<m;S++)D+=w[S-1];for(S=1;S<m;S++)w[S-1]===0?w[S-1]=1:w[S-1]=Math.round(D/w[S-1]);return w};var c=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],f=c[9],x=c[13];n.estimateScale=function(m,S){for(var w=S===0?this.calcXnums(m):this.calcYnums(m),I=1+a(w);I<f;)I*=2;for(;I>x;)I--,I/=h(I),I++,I<f&&(I=x);var O=Math.round(I/m);return O>1?O:1};function k(m,S,w){var I=w[8]+w[2]*S[0]+w[5]*S[1];return m[0]=(w[6]+w[0]*S[0]+w[3]*S[1])/I,m[1]=(w[7]+w[1]*S[0]+w[4]*S[1])/I,m}function y(m,S,w){return A(m,S,k,w),m}function A(m,S,w,I){for(var O=[0,0],D=m.shape[0],P=m.shape[1],F=0;F<D;F++)for(var R=0;R<P;R++)w(O,[F,R],I),m.set(F,R,i(S,O[0],O[1]));return m}n.refineCoords=function(m){for(var S=this.dataScaleX,w=this.dataScaleY,I=m[0].shape[0],O=m[0].shape[1],D=Math.floor(m[0].shape[0]*S+1)|0,P=Math.floor(m[0].shape[1]*w+1)|0,F=1+I+1,R=1+O+1,B=E(new Float32Array(F*R),[F,R]),N=[1/S,0,0,0,1/w,0,0,0,1],G=0;G<m.length;++G){this.surface.padField(B,m[G]);var X=E(new Float32Array(D*P),[D,P]);y(X,B,N),m[G]=X}};function L(m,S){for(var w=!1,I=0;I<m.length;I++)if(S===m[I]){w=!0;break}w===!1&&m.push(S)}n.setContourLevels=function(){var m=[[],[],[]],S=[!1,!1,!1],w=!1,I,O,D;for(I=0;I<3;++I)if(this.showContour[I]&&(w=!0,this.contourSize[I]>0&&this.contourStart[I]!==null&&this.contourEnd[I]!==null&&this.contourEnd[I]>this.contourStart[I]))for(S[I]=!0,O=this.contourStart[I];O<this.contourEnd[I];O+=this.contourSize[I])D=O*this.scene.dataScale[I],L(m[I],D);if(w){var P=[[],[],[]];for(I=0;I<3;++I)this.showContour[I]&&(P[I]=S[I]?m[I]:this.scene.contourLevels[I]);this.surface.update({levels:P})}},n.update=function(m){var S=this.scene,w=S.fullSceneLayout,I=this.surface,O=d(m),D=S.dataScale,P=m.z[0].length,F=m._ylength,R=S.contourLevels;this.data=m;var B,N,G,X,J=[];for(B=0;B<3;B++)for(J[B]=[],N=0;N<P;N++)J[B][N]=[];for(N=0;N<P;N++)for(G=0;G<F;G++)J[0][N][G]=this.getXat(N,G,m.xcalendar,w.xaxis),J[1][N][G]=this.getYat(N,G,m.ycalendar,w.yaxis),J[2][N][G]=this.getZat(N,G,m.zcalendar,w.zaxis);if(m.connectgaps)for(m._emptypoints=T(J[2]),C(J[2],m._emptypoints),m._interpolatedZ=[],N=0;N<P;N++)for(m._interpolatedZ[N]=[],G=0;G<F;G++)m._interpolatedZ[N][G]=J[2][N][G];for(B=0;B<3;B++)for(N=0;N<P;N++)for(G=0;G<F;G++)X=J[B][N][G],X==null?J[B][N][G]=NaN:X=J[B][N][G]*=D[B];for(B=0;B<3;B++)for(N=0;N<P;N++)for(G=0;G<F;G++)X=J[B][N][G],X!=null&&(this.minValues[B]>X&&(this.minValues[B]=X),this.maxValues[B]<X&&(this.maxValues[B]=X));for(B=0;B<3;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;B<3;B++)for(N=0;N<P;N++)for(G=0;G<F;G++)X=J[B][N][G],X!=null&&(J[B][N][G]-=this.objectOffset[B]);var it=[E(new Float32Array(P*F),[P,F]),E(new Float32Array(P*F),[P,F]),E(new Float32Array(P*F),[P,F])];for(B=0;B<3;B++)for(N=0;N<P;N++)for(G=0;G<F;G++)it[B].set(N,G,J[B][N][G]);J=[];var nt={colormap:O,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!m.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:m.opacityscale,opacity:m.opacity},q=e(m);if(nt.intensityBounds=[q.min,q.max],m.surfacecolor){var Z=E(new Float32Array(P*F),[P,F]);for(N=0;N<P;N++)for(G=0;G<F;G++)Z.set(N,G,m.surfacecolor[G][N]);it.push(Z)}else nt.intensityBounds[0]*=D[2],nt.intensityBounds[1]*=D[2];(x<it[0].shape[0]||x<it[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(it[0].shape[0],0),this.dataScaleY=this.estimateScale(it[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(it)),m.surfacecolor&&(nt.intensity=it.pop());var $=[!0,!0,!0],V=["x","y","z"];for(B=0;B<3;++B){var rt=m.contours[V[B]];$[B]=rt.highlight,nt.showContour[B]=rt.show||rt.highlight,nt.showContour[B]&&(nt.contourProject[B]=[rt.project.x,rt.project.y,rt.project.z],rt.show?(this.showContour[B]=!0,nt.levels[B]=R[B],I.highlightColor[B]=nt.contourColor[B]=r(rt.color),rt.usecolormap?I.highlightTint[B]=nt.contourTint[B]=0:I.highlightTint[B]=nt.contourTint[B]=1,nt.contourWidth[B]=rt.width,this.contourStart[B]=rt.start,this.contourEnd[B]=rt.end,this.contourSize[B]=rt.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),rt.highlight&&(nt.dynamicColor[B]=r(rt.highlightcolor),nt.dynamicWidth[B]=rt.highlightwidth))}s(O)&&(nt.vertexColor=!0),nt.objectOffset=this.objectOffset,nt.coords=it,I.update(nt),I.visible=m.visible,I.enableDynamic=$,I.enableHighlight=$,I.snapToData=!0,"lighting"in m&&(I.ambientLight=m.lighting.ambient,I.diffuseLight=m.lighting.diffuse,I.specularLight=m.lighting.specular,I.roughness=m.lighting.roughness,I.fresnel=m.lighting.fresnel),"lightposition"in m&&(I.lightPosition=[m.lightposition.x,m.lightposition.y,m.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function u(m,S){var w=m.glplot.gl,I=M({gl:w}),O=new l(m,I,S.uid);return I._trace=O,O.update(S),m.glplot.add(I),O}Q.exports=u},60192:function(Q,U,t){var M=t(24040),E=t(3400),i=t(27260),C=t(16716),T=.1;function v(n,s){for(var o=[],p=32,b=0;b<p;b++){var h=b/(p-1),_=s+(1-s)*(1-Math.pow(Math.sin(n*h*Math.PI),2));o.push([h,Math.max(0,Math.min(1,_))])}return o}function d(n){var s=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var o=0;o<n.length;o++){var p=n[o];if(p.length!==2||+p[0]<s)return!1;s=+p[0]}return!0}function r(n,s,o,p){var b,h;function _(m,S){return E.coerce(n,s,C,m,S)}var a=_("x"),c=_("y"),f=_("z");if(!f||!f.length||a&&a.length<1||c&&c.length<1){s.visible=!1;return}s._xlength=Array.isArray(a)&&E.isArrayOrTypedArray(a[0])?f.length:f[0].length,s._ylength=f.length;var x=M.getComponentMethod("calendars","handleTraceDefaults");x(n,s,["x","y","z"],p),_("text"),_("hovertext"),_("hovertemplate"),_("xhoverformat"),_("yhoverformat"),_("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(m){_(m)});var k=_("surfacecolor"),y=["x","y","z"];for(b=0;b<3;++b){var A="contours."+y[b],L=_(A+".show"),u=_(A+".highlight");if(L||u)for(h=0;h<3;++h)_(A+".project."+y[h]);L&&(_(A+".color"),_(A+".width"),_(A+".usecolormap")),u&&(_(A+".highlightcolor"),_(A+".highlightwidth")),_(A+".start"),_(A+".end"),_(A+".size")}k||(l(n,"zmin","cmin"),l(n,"zmax","cmax"),l(n,"zauto","cauto")),i(n,s,p,_,{prefix:"",cLetter:"c"}),e(n,s,p,_),s._length=null}function e(n,s,o,p){var b=p("opacityscale");b==="max"?s.opacityscale=[[0,T],[1,1]]:b==="min"?s.opacityscale=[[0,1],[1,T]]:b==="extremes"?s.opacityscale=v(1,T):d(b)||(s.opacityscale=void 0)}function l(n,s,o){s in n&&!(o in n)&&(n[o]=n[s])}Q.exports={supplyDefaults:r,opacityscaleDefaults:e}},91304:function(Q,U,t){Q.exports={attributes:t(16716),supplyDefaults:t(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(56576),plot:t(79164),moduleType:"trace",name:"surface",basePlotModule:t(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(Q,U,t){var M=t(13916),E=t(92880).extendFlat,i=t(67824).overrideAll,C=t(25376),T=t(86968).u,v=t(29736).descriptionOnlyNumbers,d=Q.exports=i({domain:T({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:E({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:E({},C({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:E({},M.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:E({},C({arrayOk:!0}))}},"calc","from-root");d.transforms=void 0},85852:function(Q,U,t){var M=t(84888)._M,E=t(24752),i="table";U.name=i,U.plot=function(C){var T=M(C.calcdata,i)[0];T.length&&E(C,T)},U.clean=function(C,T,v,d){var r=d._has&&d._has(i),e=T._has&&T._has(i);r&&!e&&d._paperdiv.selectAll(".table").remove()}},39312:function(Q,U,t){var M=t(71688).wrap;Q.exports=function(){return M({})}},23536:function(Q){Q.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(Q,U,t){var M=t(23536),E=t(92880).extendFlat,i=t(38248),C=t(38116).isTypedArray,T=t(38116).isArrayOrTypedArray;Q.exports=function(p,b){var h=r(b.cells.values),_=function(G){return G.slice(b.header.values.length,G.length)},a=r(b.header.values);a.length&&!a[0].length&&(a[0]=[""],a=r(a));var c=a.concat(_(h).map(function(){return e((a[0]||[""]).length)})),f=b.domain,x=Math.floor(p._fullLayout._size.w*(f.x[1]-f.x[0])),k=Math.floor(p._fullLayout._size.h*(f.y[1]-f.y[0])),y=b.header.values.length?c[0].map(function(){return b.header.height}):[M.emptyHeaderHeight],A=h.length?h[0].map(function(){return b.cells.height}):[],L=y.reduce(d,0),u=k-L,m=u+M.uplift,S=s(A,m),w=s(y,L),I=n(w,[]),O=n(S,I),D={},P=b._fullInput.columnorder;T(P)&&(P=Array.from(P)),P=P.concat(_(h.map(function(G,X){return X})));var F=c.map(function(G,X){var J=T(b.columnwidth)?b.columnwidth[Math.min(X,b.columnwidth.length-1)]:b.columnwidth;return i(J)?Number(J):1}),R=F.reduce(d,0);F=F.map(function(G){return G/R*x});var B=Math.max(v(b.header.line.width),v(b.cells.line.width)),N={key:b.uid+p._context.staticPlot,translateX:f.x[0]*p._fullLayout._size.w,translateY:p._fullLayout._size.h*(1-f.y[1]),size:p._fullLayout._size,width:x,maxLineWidth:B,height:k,columnOrder:P,groupHeight:k,rowBlocks:O,headerRowBlocks:I,scrollY:0,cells:E({},b.cells,{values:h}),headerCells:E({},b.header,{values:c}),gdColumns:c.map(function(G){return G[0]}),gdColumnsOriginalOrder:c.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(G,X){var J=D[G];D[G]=(J||0)+1;var it=G+"__"+D[G];return{key:it,label:G,specIndex:X,xIndex:P[X],xScale:l,x:void 0,calcdata:void 0,columnWidth:F[X]}})};return N.columns.forEach(function(G){G.calcdata=N,G.x=l(G)}),N};function v(p){if(T(p)){for(var b=0,h=0;h<p.length;h++)b=Math.max(b,v(p[h]));return b}return p}function d(p,b){return p+b}function r(p){var b=p.slice(),h=1/0,_=0,a;for(a=0;a<b.length;a++)C(b[a])?b[a]=Array.from(b[a]):T(b[a])||(b[a]=[b[a]]),h=Math.min(h,b[a].length),_=Math.max(_,b[a].length);if(h!==_)for(a=0;a<b.length;a++){var c=_-b[a].length;c&&(b[a]=b[a].concat(e(c)))}return b}function e(p){for(var b=new Array(p),h=0;h<p;h++)b[h]="";return b}function l(p){return p.calcdata.columns.reduce(function(b,h){return h.xIndex<p.xIndex?b+h.columnWidth:b},0)}function n(p,b){var h=Object.keys(p);return h.map(function(_){return E({},p[_],{auxiliaryBlocks:b})})}function s(p,b){for(var h={},_,a=0,c=0,f=o(),x=0,k=0,y=0;y<p.length;y++)_=p[y],f.rows.push({rowIndex:y,rowHeight:_}),c+=_,(c>=b||y===p.length-1)&&(h[a]=f,f.key=k++,f.firstRowIndex=x,f.lastRowIndex=y,f=o(),a+=c,x=y+1,c=0);return h}function o(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},53056:function(Q,U,t){var M=t(92880).extendFlat;U.splitToPanels=function(i){var C=[0,0],T=M({},i,{key:"header",type:"header",page:0,prevPages:C,currentRepaint:[null,null],dragHandle:!0,values:i.calcdata.headerCells.values[i.specIndex],rowBlocks:i.calcdata.headerRowBlocks,calcdata:M({},i.calcdata,{cells:i.calcdata.headerCells})}),v=M({},i,{key:"cells1",type:"cells",page:0,prevPages:C,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks}),d=M({},i,{key:"cells2",type:"cells",page:1,prevPages:C,currentRepaint:[null,null],dragHandle:!1,values:i.calcdata.cells.values[i.specIndex],rowBlocks:i.calcdata.rowBlocks});return[v,d,T]},U.splitToCells=function(i){var C=E(i);return(i.values||[]).slice(C[0],C[1]).map(function(T,v){var d=typeof T=="string"&&T.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:v+d,key:C[0]+v,column:i,calcdata:i.calcdata,page:i.page,rowBlocks:i.rowBlocks,value:T}})};function E(i){var C=i.rowBlocks[i.page],T=C?C.rows[0].rowIndex:0,v=C?T+C.rows.length:0;return[T,v]}},53212:function(Q,U,t){var M=t(3400),E=t(60520),i=t(86968).Q;function C(T,v){for(var d=T.columnorder||[],r=T.header.values.length,e=d.slice(0,r),l=e.slice().sort(function(o,p){return o-p}),n=e.map(function(o){return l.indexOf(o)}),s=n.length;s<r;s++)n.push(s);v("columnorder",n)}Q.exports=function(T,v,d,r){function e(l,n){return M.coerce(T,v,E,l,n)}i(v,r,e),e("columnwidth"),e("header.values"),e("header.format"),e("header.align"),e("header.prefix"),e("header.suffix"),e("header.height"),e("header.line.width"),e("header.line.color"),e("header.fill.color"),M.coerceFont(e,"header.font",M.extendFlat({},r.font)),C(v,e),e("cells.values"),e("cells.format"),e("cells.align"),e("cells.prefix"),e("cells.suffix"),e("cells.height"),e("cells.line.width"),e("cells.line.color"),e("cells.fill.color"),M.coerceFont(e,"cells.font",M.extendFlat({},r.font)),v._length=null}},41724:function(Q,U,t){Q.exports={attributes:t(60520),supplyDefaults:t(53212),calc:t(39312),plot:t(24752),moduleType:"trace",name:"table",basePlotModule:t(85852),categories:["noOpacity"],meta:{}}},24752:function(Q,U,t){var M=t(23536),E=t(33428),i=t(3400),C=i.numberFormat,T=t(71688),v=t(43616),d=t(72736),r=t(3400).raiseToTop,e=t(3400).strTranslate,l=t(3400).cancelTransition,n=t(55992),s=t(53056),o=t(76308);Q.exports=function(Y,at){var et=!Y._context.staticPlot,ct=Y._fullLayout._paper.selectAll("."+M.cn.table).data(at.map(function(Yt){var he=T.unwrap(Yt),Zt=he.trace;return n(Y,Zt)}),T.keyFun);ct.exit().remove(),ct.enter().append("g").classed(M.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ct.attr("width",function(Yt){return Yt.width+Yt.size.l+Yt.size.r}).attr("height",function(Yt){return Yt.height+Yt.size.t+Yt.size.b}).attr("transform",function(Yt){return e(Yt.translateX,Yt.translateY)});var ft=ct.selectAll("."+M.cn.tableControlView).data(T.repeat,T.keyFun),yt=ft.enter().append("g").classed(M.cn.tableControlView,!0).style("box-sizing","content-box");if(et){var xt="onwheel"in document?"wheel":"mousewheel";yt.on("mousemove",function(Yt){ft.filter(function(he){return Yt===he}).call(a,Y)}).on(xt,function(Yt){if(!Yt.scrollbarState.wheeling){Yt.scrollbarState.wheeling=!0;var he=Yt.scrollY+E.event.deltaY,Zt=X(Y,ft,null,he)(Yt);Zt||(E.event.stopPropagation(),E.event.preventDefault()),Yt.scrollbarState.wheeling=!1}}).call(a,Y,!0)}ft.attr("transform",function(Yt){return e(Yt.size.l,Yt.size.t)});var Ct=ft.selectAll("."+M.cn.scrollBackground).data(T.repeat,T.keyFun);Ct.enter().append("rect").classed(M.cn.scrollBackground,!0).attr("fill","none"),Ct.attr("width",function(Yt){return Yt.width}).attr("height",function(Yt){return Yt.height}),ft.each(function(Yt){v.setClipUrl(E.select(this),b(Y,Yt),Y)});var gt=ft.selectAll("."+M.cn.yColumn).data(function(Yt){return Yt.columns},T.keyFun);gt.enter().append("g").classed(M.cn.yColumn,!0),gt.exit().remove(),gt.attr("transform",function(Yt){return e(Yt.x,0)}),et&&gt.call(E.behavior.drag().origin(function(Yt){var he=E.select(this);return P(he,Yt,-M.uplift),r(this),Yt.calcdata.columnDragInProgress=!0,a(ft.filter(function(Zt){return Yt.calcdata.key===Zt.key}),Y),Yt}).on("drag",function(Yt){var he=E.select(this),Zt=function(ce){return(Yt===ce?E.event.x:ce.x)+ce.columnWidth/2};Yt.x=Math.max(-M.overdrag,Math.min(Yt.calcdata.width+M.overdrag-Yt.columnWidth,E.event.x));var ae=_(gt).filter(function(ce){return ce.calcdata.key===Yt.calcdata.key}),oe=ae.sort(function(ce,ue){return Zt(ce)-Zt(ue)});oe.forEach(function(ce,ue){ce.xIndex=ue,ce.x=Yt===ce?ce.x:ce.xScale(ce)}),gt.filter(function(ce){return Yt!==ce}).transition().ease(M.transitionEase).duration(M.transitionDuration).attr("transform",function(ce){return e(ce.x,0)}),he.call(l).attr("transform",e(Yt.x,-M.uplift))}).on("dragend",function(Yt){var he=E.select(this),Zt=Yt.calcdata;Yt.x=Yt.xScale(Yt),Yt.calcdata.columnDragInProgress=!1,P(he,Yt,0),O(Y,Zt,Zt.columns.map(function(ae){return ae.xIndex}))})),gt.each(function(Yt){v.setClipUrl(E.select(this),h(Y,Yt),Y)});var mt=gt.selectAll("."+M.cn.columnBlock).data(s.splitToPanels,T.keyFun);mt.enter().append("g").classed(M.cn.columnBlock,!0).attr("id",function(Yt){return Yt.key}),mt.style("cursor",function(Yt){return Yt.dragHandle?"ew-resize":Yt.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var vt=mt.filter(R),At=mt.filter(F);et&&At.call(E.behavior.drag().origin(function(Yt){return E.event.stopPropagation(),Yt}).on("drag",X(Y,ft,-1)).on("dragend",function(){})),c(Y,ft,vt,mt),c(Y,ft,At,mt);var Ot=ft.selectAll("."+M.cn.scrollAreaClip).data(T.repeat,T.keyFun);Ot.enter().append("clipPath").classed(M.cn.scrollAreaClip,!0).attr("id",function(Yt){return b(Y,Yt)});var It=Ot.selectAll("."+M.cn.scrollAreaClipRect).data(T.repeat,T.keyFun);It.enter().append("rect").classed(M.cn.scrollAreaClipRect,!0).attr("x",-M.overdrag).attr("y",-M.uplift).attr("fill","none"),It.attr("width",function(Yt){return Yt.width+2*M.overdrag}).attr("height",function(Yt){return Yt.height+M.uplift});var St=gt.selectAll("."+M.cn.columnBoundary).data(T.repeat,T.keyFun);St.enter().append("g").classed(M.cn.columnBoundary,!0);var Bt=gt.selectAll("."+M.cn.columnBoundaryClippath).data(T.repeat,T.keyFun);Bt.enter().append("clipPath").classed(M.cn.columnBoundaryClippath,!0),Bt.attr("id",function(Yt){return h(Y,Yt)});var re=Bt.selectAll("."+M.cn.columnBoundaryRect).data(T.repeat,T.keyFun);re.enter().append("rect").classed(M.cn.columnBoundaryRect,!0).attr("fill","none"),re.attr("width",function(Yt){return Yt.columnWidth+2*p(Yt)}).attr("height",function(Yt){return Yt.calcdata.height+2*p(Yt)+M.uplift}).attr("x",function(Yt){return-p(Yt)}).attr("y",function(Yt){return-p(Yt)}),G(null,At,ft)};function p(Y){return Math.ceil(Y.calcdata.maxLineWidth/2)}function b(Y,at){return"clip"+Y._fullLayout._uid+"_scrollAreaBottomClip_"+at.key}function h(Y,at){return"clip"+Y._fullLayout._uid+"_columnBoundaryClippath_"+at.calcdata.key+"_"+at.specIndex}function _(Y){return[].concat.apply([],Y.map(function(at){return at})).map(function(at){return at.__data__})}function a(Y,at,et){function ct(mt){var vt=mt.rowBlocks;return $(vt,vt.length-1)+(vt.length?V(vt[vt.length-1],1/0):1)}var ft=Y.selectAll("."+M.cn.scrollbarKit).data(T.repeat,T.keyFun);ft.enter().append("g").classed(M.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ft.each(function(mt){var vt=mt.scrollbarState;vt.totalHeight=ct(mt),vt.scrollableAreaHeight=mt.groupHeight-B(mt),vt.currentlyVisibleHeight=Math.min(vt.totalHeight,vt.scrollableAreaHeight),vt.ratio=vt.currentlyVisibleHeight/vt.totalHeight,vt.barLength=Math.max(vt.ratio*vt.currentlyVisibleHeight,M.goldenRatio*M.scrollbarWidth),vt.barWiggleRoom=vt.currentlyVisibleHeight-vt.barLength,vt.wiggleRoom=Math.max(0,vt.totalHeight-vt.scrollableAreaHeight),vt.topY=vt.barWiggleRoom===0?0:mt.scrollY/vt.wiggleRoom*vt.barWiggleRoom,vt.bottomY=vt.topY+vt.barLength,vt.dragMultiplier=vt.wiggleRoom/vt.barWiggleRoom}).attr("transform",function(mt){var vt=mt.width+M.scrollbarWidth/2+M.scrollbarOffset;return e(vt,B(mt))});var yt=ft.selectAll("."+M.cn.scrollbar).data(T.repeat,T.keyFun);yt.enter().append("g").classed(M.cn.scrollbar,!0);var xt=yt.selectAll("."+M.cn.scrollbarSlider).data(T.repeat,T.keyFun);xt.enter().append("g").classed(M.cn.scrollbarSlider,!0),xt.attr("transform",function(mt){return e(0,mt.scrollbarState.topY||0)});var Ct=xt.selectAll("."+M.cn.scrollbarGlyph).data(T.repeat,T.keyFun);Ct.enter().append("line").classed(M.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",M.scrollbarWidth).attr("stroke-linecap","round").attr("y1",M.scrollbarWidth/2),Ct.attr("y2",function(mt){return mt.scrollbarState.barLength-M.scrollbarWidth/2}).attr("stroke-opacity",function(mt){return mt.columnDragInProgress||!mt.scrollbarState.barWiggleRoom||et?0:.4}),Ct.transition().delay(0).duration(0),Ct.transition().delay(M.scrollbarHideDelay).duration(M.scrollbarHideDuration).attr("stroke-opacity",0);var gt=yt.selectAll("."+M.cn.scrollbarCaptureZone).data(T.repeat,T.keyFun);gt.enter().append("line").classed(M.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",M.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(mt){var vt=E.event.y,At=this.getBoundingClientRect(),Ot=mt.scrollbarState,It=vt-At.top,St=E.scale.linear().domain([0,Ot.scrollableAreaHeight]).range([0,Ot.totalHeight]).clamp(!0);Ot.topY<=It&&It<=Ot.bottomY||X(at,Y,null,St(It-Ot.barLength/2))(mt)}).call(E.behavior.drag().origin(function(mt){return E.event.stopPropagation(),mt.scrollbarState.scrollbarScrollInProgress=!0,mt}).on("drag",X(at,Y)).on("dragend",function(){})),gt.attr("y2",function(mt){return mt.scrollbarState.scrollableAreaHeight}),at._context.staticPlot&&(Ct.remove(),gt.remove())}function c(Y,at,et,ct){var ft=f(et),yt=x(ft);L(yt);var xt=k(yt);m(xt);var Ct=A(yt),gt=y(Ct);u(gt),S(gt,at,ct,Y),Z(yt)}function f(Y){var at=Y.selectAll("."+M.cn.columnCells).data(T.repeat,T.keyFun);return at.enter().append("g").classed(M.cn.columnCells,!0),at.exit().remove(),at}function x(Y){var at=Y.selectAll("."+M.cn.columnCell).data(s.splitToCells,function(et){return et.keyWithinBlock});return at.enter().append("g").classed(M.cn.columnCell,!0),at.exit().remove(),at}function k(Y){var at=Y.selectAll("."+M.cn.cellRect).data(T.repeat,function(et){return et.keyWithinBlock});return at.enter().append("rect").classed(M.cn.cellRect,!0),at}function y(Y){var at=Y.selectAll("."+M.cn.cellText).data(T.repeat,function(et){return et.keyWithinBlock});return at.enter().append("text").classed(M.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){E.event.stopPropagation()}),at}function A(Y){var at=Y.selectAll("."+M.cn.cellTextHolder).data(T.repeat,function(et){return et.keyWithinBlock});return at.enter().append("g").classed(M.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),at}function L(Y){Y.each(function(at,et){var ct=at.calcdata.cells.font,ft=at.column.specIndex,yt={size:D(ct.size,ft,et),color:D(ct.color,ft,et),family:D(ct.family,ft,et)};at.rowNumber=at.key,at.align=D(at.calcdata.cells.align,ft,et),at.cellBorderWidth=D(at.calcdata.cells.line.width,ft,et),at.font=yt})}function u(Y){Y.each(function(at){v.font(E.select(this),at.font)})}function m(Y){Y.attr("width",function(at){return at.column.columnWidth}).attr("stroke-width",function(at){return at.cellBorderWidth}).each(function(at){var et=E.select(this);o.stroke(et,D(at.calcdata.cells.line.color,at.column.specIndex,at.rowNumber)),o.fill(et,D(at.calcdata.cells.fill.color,at.column.specIndex,at.rowNumber))})}function S(Y,at,et,ct){Y.text(function(ft){var yt=ft.column.specIndex,xt=ft.rowNumber,Ct=ft.value,gt=typeof Ct=="string",mt=gt&&Ct.match(/<br>/i),vt=!gt||mt;ft.mayHaveMarkup=gt&&Ct.match(/[<&>]/);var At=w(Ct);ft.latex=At;var Ot=At?"":D(ft.calcdata.cells.prefix,yt,xt)||"",It=At?"":D(ft.calcdata.cells.suffix,yt,xt)||"",St=At?null:D(ft.calcdata.cells.format,yt,xt)||null,Bt=Ot+(St?C(St)(ft.value):ft.value)+It,re;ft.wrappingNeeded=!ft.wrapped&&!vt&&!At&&(re=I(Bt)),ft.cellHeightMayIncrease=mt||At||ft.mayHaveMarkup||(re===void 0?I(Bt):re),ft.needsConvertToTspans=ft.mayHaveMarkup||ft.wrappingNeeded||ft.latex;var Yt;if(ft.wrappingNeeded){var he=M.wrapSplitCharacter===" "?Bt.replace(/<a href=/ig,"<a_href="):Bt,Zt=he.split(M.wrapSplitCharacter),ae=M.wrapSplitCharacter===" "?Zt.map(function(oe){return oe.replace(/<a_href=/ig,"<a href=")}):Zt;ft.fragments=ae.map(function(oe){return{text:oe,width:null}}),ft.fragments.push({fragment:M.wrapSpacer,width:null}),Yt=ae.join(M.lineBreaker)+M.lineBreaker+M.wrapSpacer}else delete ft.fragments,Yt=Bt;return Yt}).attr("dy",function(ft){return ft.needsConvertToTspans?0:"0.75em"}).each(function(ft){var yt=this,xt=E.select(yt),Ct=ft.wrappingNeeded?it:nt;ft.needsConvertToTspans?d.convertToTspans(xt,ct,Ct(et,yt,at,ct,ft)):E.select(yt.parentNode).attr("transform",function(gt){return e(q(gt),M.cellPad)}).attr("text-anchor",function(gt){return{left:"start",center:"middle",right:"end"}[gt.align]})})}function w(Y){return typeof Y=="string"&&Y.match(M.latexCheck)}function I(Y){return Y.indexOf(M.wrapSplitCharacter)!==-1}function O(Y,at,et){var ct=at.gdColumnsOriginalOrder;at.gdColumns.sort(function(ft,yt){return et[ct.indexOf(ft)]-et[ct.indexOf(yt)]}),at.columnorder=et,Y.emit("plotly_restyle")}function D(Y,at,et){if(i.isArrayOrTypedArray(Y)){var ct=Y[Math.min(at,Y.length-1)];return i.isArrayOrTypedArray(ct)?ct[Math.min(et,ct.length-1)]:ct}else return Y}function P(Y,at,et){Y.transition().ease(M.releaseTransitionEase).duration(M.releaseTransitionDuration).attr("transform",e(at.x,et))}function F(Y){return Y.type==="cells"}function R(Y){return Y.type==="header"}function B(Y){var at=Y.rowBlocks.length?Y.rowBlocks[0].auxiliaryBlocks:[];return at.reduce(function(et,ct){return et+V(ct,1/0)},0)}function N(Y,at,et){for(var ct=[],ft=0,yt=0;yt<Y.length;yt++){for(var xt=Y[yt],Ct=xt.rows,gt=0,mt=0;mt<Ct.length;mt++)gt+=Ct[mt].rowHeight;xt.allRowsHeight=gt;var vt=ft+gt,At=at,Ot=At+et;At<vt&&Ot>ft&&ct.push(yt),ft+=gt}return ct}function G(Y,at,et){var ct=_(at)[0];if(ct!==void 0){var ft=ct.rowBlocks,yt=ct.calcdata,xt=$(ft,ft.length),Ct=ct.calcdata.groupHeight-B(ct),gt=yt.scrollY=Math.max(0,Math.min(xt-Ct,yt.scrollY)),mt=N(ft,gt,Ct);mt.length===1&&(mt[0]===ft.length-1?mt.unshift(mt[0]-1):mt.push(mt[0]+1)),mt[0]%2&&mt.reverse(),at.each(function(vt,At){vt.page=mt[At],vt.scrollY=gt}),at.attr("transform",function(vt){var At=$(vt.rowBlocks,vt.page)-vt.scrollY;return e(0,At)}),Y&&(J(Y,et,at,mt,ct.prevPages,ct,0),J(Y,et,at,mt,ct.prevPages,ct,1),a(et,Y))}}function X(Y,at,et,ct){return function(ft){var yt=ft.calcdata?ft.calcdata:ft,xt=at.filter(function(vt){return yt.key===vt.key}),Ct=et||yt.scrollbarState.dragMultiplier,gt=yt.scrollY;yt.scrollY=ct===void 0?yt.scrollY+Ct*E.event.dy:ct;var mt=xt.selectAll("."+M.cn.yColumn).selectAll("."+M.cn.columnBlock).filter(F);return G(Y,mt,xt),yt.scrollY===gt}}function J(Y,at,et,ct,ft,yt,xt){var Ct=ct[xt]!==ft[xt];Ct&&(clearTimeout(yt.currentRepaint[xt]),yt.currentRepaint[xt]=setTimeout(function(){var gt=et.filter(function(mt,vt){return vt===xt&&ct[vt]!==ft[vt]});c(Y,at,gt,et),ft[xt]=ct[xt]}))}function it(Y,at,et,ct){return function(){var ft=E.select(at.parentNode);ft.each(function(yt){var xt=yt.fragments;ft.selectAll("tspan.line").each(function(St,Bt){xt[Bt].width=this.getComputedTextLength()});var Ct=xt[xt.length-1].width,gt=xt.slice(0,-1),mt=[],vt,At,Ot=0,It=yt.column.columnWidth-2*M.cellPad;for(yt.value="";gt.length;)vt=gt.shift(),At=vt.width+Ct,Ot+At>It&&(yt.value+=mt.join(M.wrapSpacer)+M.lineBreaker,mt=[],Ot=0),mt.push(vt.text),Ot+=At;Ot&&(yt.value+=mt.join(M.wrapSpacer)),yt.wrapped=!0}),ft.selectAll("tspan.line").remove(),S(ft.select("."+M.cn.cellText),et,Y,ct),E.select(at.parentNode.parentNode).call(Z)}}function nt(Y,at,et,ct,ft){return function(){if(!ft.settledY){var yt=E.select(at.parentNode),xt=ot(ft),Ct=ft.key-xt.firstRowIndex,gt=xt.rows[Ct].rowHeight,mt=ft.cellHeightMayIncrease?at.parentNode.getBoundingClientRect().height+2*M.cellPad:gt,vt=Math.max(mt,gt),At=vt-xt.rows[Ct].rowHeight;At&&(xt.rows[Ct].rowHeight=vt,Y.selectAll("."+M.cn.columnCell).call(Z),G(null,Y.filter(F),0),a(et,ct,!0)),yt.attr("transform",function(){var Ot=this,It=Ot.parentNode,St=It.getBoundingClientRect(),Bt=E.select(Ot.parentNode).select("."+M.cn.cellRect).node().getBoundingClientRect(),re=Ot.transform.baseVal.consolidate(),Yt=Bt.top-St.top+(re?re.matrix.f:M.cellPad);return e(q(ft,E.select(Ot.parentNode).select("."+M.cn.cellTextHolder).node().getBoundingClientRect().width),Yt)}),ft.settledY=!0}}}function q(Y,at){switch(Y.align){case"left":return M.cellPad;case"right":return Y.column.columnWidth-(at||0)-M.cellPad;case"center":return(Y.column.columnWidth-(at||0))/2;default:return M.cellPad}}function Z(Y){Y.attr("transform",function(at){var et=at.rowBlocks[0].auxiliaryBlocks.reduce(function(xt,Ct){return xt+V(Ct,1/0)},0),ct=ot(at),ft=V(ct,at.key),yt=ft+et;return e(0,yt)}).selectAll("."+M.cn.cellRect).attr("height",function(at){return H(ot(at),at.key).rowHeight})}function $(Y,at){for(var et=0,ct=at-1;ct>=0;ct--)et+=rt(Y[ct]);return et}function V(Y,at){for(var et=0,ct=0;ct<Y.rows.length&&Y.rows[ct].rowIndex<at;ct++)et+=Y.rows[ct].rowHeight;return et}function rt(Y){var at=Y.allRowsHeight;if(at!==void 0)return at;for(var et=0,ct=0;ct<Y.rows.length;ct++)et+=Y.rows[ct].rowHeight;return Y.allRowsHeight=et,et}function ot(Y){return Y.rowBlocks[Y.page]}function H(Y,at){return Y.rows[at-Y.firstRowIndex]}},40516:function(Q,U,t){var M=t(21776).Ks,E=t(21776).Gw,i=t(49084),C=t(86968).u,T=t(74996),v=t(424),d=t(32984),r=t(92880).extendFlat,e=t(98192).c;Q.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:v.marker.colors,pattern:e,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:v.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},T.textfont,{}),editType:"calc"},text:T.text,textinfo:v.textinfo,texttemplate:E({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:T.hovertext,hoverinfo:v.hoverinfo,hovertemplate:M({},{keys:d.eventDataKeys}),textfont:T.textfont,insidetextfont:T.insidetextfont,outsidetextfont:r({},T.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:T.sort,root:v.root,domain:C({name:"treemap",trace:!0,editType:"calc"})}},79516:function(Q,U,t){var M=t(7316);U.name="treemap",U.plot=function(E,i,C,T){M.plotBasePlot(U.name,E,i,C,T)},U.clean=function(E,i,C,T){M.cleanBasePlot(U.name,E,i,C,T)}},97840:function(Q,U,t){var M=t(3776);U.r=function(E,i){return M.calc(E,i)},U.q=function(E){return M._runCrossTraceCalc("treemap",E)}},32984:function(Q){Q.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(Q,U,t){var M=t(3400),E=t(40516),i=t(76308),C=t(86968).Q,T=t(31508).handleText,v=t(78048).TEXTPAD,d=t(74174).handleMarkerDefaults,r=t(8932),e=r.hasColorscale,l=r.handleDefaults;Q.exports=function(n,s,o,p){function b(u,m){return M.coerce(n,s,E,u,m)}var h=b("labels"),_=b("parents");if(!h||!h.length||!_||!_.length){s.visible=!1;return}var a=b("values");a&&a.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var c=b("tiling.packing");c==="squarify"&&b("tiling.squarifyratio"),b("tiling.flip"),b("tiling.pad");var f=b("text");b("texttemplate"),s.texttemplate||b("textinfo",M.isArrayOrTypedArray(f)?"text+label":"label"),b("hovertext"),b("hovertemplate");var x=b("pathbar.visible"),k="auto";T(n,s,p,b,k,{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("textposition");var y=s.textposition.indexOf("bottom")!==-1;d(n,s,p,b);var A=s._hasColorscale=e(n,"marker","colors")||(n.marker||{}).coloraxis;A?l(n,s,p,b,{prefix:"marker.",cLetter:"c"}):b("marker.depthfade",!(s.marker.colors||[]).length);var L=s.textfont.size*2;b("marker.pad.t",y?L/4:L),b("marker.pad.l",L/4),b("marker.pad.r",L/4),b("marker.pad.b",y?L:L/4),b("marker.cornerradius"),s._hovered={marker:{line:{width:2,color:i.contrast(p.paper_bgcolor)}}},x&&(b("pathbar.thickness",s.pathbar.textfont.size+2*v),b("pathbar.side"),b("pathbar.edgeshape")),b("sort"),b("root.color"),C(s,p,b),s._length=null}},95808:function(Q,U,t){var M=t(33428),E=t(78176),i=t(82744),C=i.clearMinTextSize,T=t(60100).resizeText,v=t(52960);Q.exports=function(d,r,e,l,n){var s=n.type,o=n.drawDescendants,p=d._fullLayout,b=p["_"+s+"layer"],h,_,a=!e;if(C(s,p),h=b.selectAll("g.trace."+s).data(r,function(f){return f[0].trace.uid}),h.enter().append("g").classed("trace",!0).classed(s,!0),h.order(),!p.uniformtext.mode&&E.hasTransition(e)){l&&(_=l());var c=M.transition().duration(e.duration).ease(e.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});c.each(function(){b.selectAll("g.trace").each(function(f){v(d,f,this,e,o)})})}else h.each(function(f){v(d,f,this,e,o)}),p.uniformtext.mode&&T(d,b.selectAll(".trace"),s);a&&h.exit().remove()}},27336:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(72736),T=t(13832),v=t(66192).styleOne,d=t(32984),r=t(78176),e=t(45716),l=!0;Q.exports=function(n,s,o,p,b){var h=b.barDifY,_=b.width,a=b.height,c=b.viewX,f=b.viewY,x=b.pathSlice,k=b.toMoveInsideSlice,y=b.strTransform,A=b.hasTransition,L=b.handleSlicesExit,u=b.makeUpdateSliceInterpolator,m=b.makeUpdateTextInterpolator,S={},w=n._context.staticPlot,I=n._fullLayout,O=s[0],D=O.trace,P=O.hierarchy,F=_/D._entryDepth,R=r.listPath(o.data,"id"),B=T(P.copy(),[_,a],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();B=B.filter(function(G){var X=R.indexOf(G.data.id);return X===-1?!1:(G.x0=F*X,G.x1=F*(X+1),G.y0=h,G.y1=h+a,G.onPathbar=!0,!0)}),B.reverse(),p=p.data(B,r.getPtId),p.enter().append("g").classed("pathbar",!0),L(p,l,S,[_,a],x),p.order();var N=p;A&&(N=N.transition().each("end",function(){var G=M.select(this);r.setSliceCursor(G,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),N.each(function(G){G._x0=c(G.x0),G._x1=c(G.x1),G._y0=f(G.y0),G._y1=f(G.y1),G._hoverX=c(G.x1-Math.min(_,a)/2),G._hoverY=f(G.y1-a/2);var X=M.select(this),J=E.ensureSingle(X,"path","surface",function(Z){Z.style("pointer-events",w?"none":"all")});A?J.transition().attrTween("d",function(Z){var $=u(Z,l,S,[_,a]);return function(V){return x($(V))}}):J.attr("d",x),X.call(e,o,n,s,{styleOne:v,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),J.call(v,G,D,n,{hovered:!1}),G._text=(r.getPtLabel(G)||"").split("<br>").join(" ")||"";var it=E.ensureSingle(X,"g","slicetext"),nt=E.ensureSingle(it,"text","",function(Z){Z.attr("data-notex",1)}),q=E.ensureUniformFontSize(n,r.determineTextFont(D,G,I.font,{onPathbar:!0}));nt.text(G._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(i.font,q).call(C.convertToTspans,n),G.textBB=i.bBox(nt.node()),G.transform=k(G,{fontSize:q.size,onPathbar:!0}),G.transform.fontSize=q.size,A?nt.transition().attrTween("transform",function(Z){var $=m(Z,l,S,[_,a]);return function(V){return y($(V))}}):nt.attr("transform",y(G))})}},76477:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(72736),T=t(13832),v=t(66192).styleOne,d=t(32984),r=t(78176),e=t(45716),l=t(96488).formatSliceLabel,n=!1;Q.exports=function(s,o,p,b,h){var _=h.width,a=h.height,c=h.viewX,f=h.viewY,x=h.pathSlice,k=h.toMoveInsideSlice,y=h.strTransform,A=h.hasTransition,L=h.handleSlicesExit,u=h.makeUpdateSliceInterpolator,m=h.makeUpdateTextInterpolator,S=h.prevEntry,w={},I=s._context.staticPlot,O=s._fullLayout,D=o[0],P=D.trace,F=P.textposition.indexOf("left")!==-1,R=P.textposition.indexOf("right")!==-1,B=P.textposition.indexOf("bottom")!==-1,N=!B&&!P.marker.pad.t||B&&!P.marker.pad.b,G=T(p,[_,a],{packing:P.tiling.packing,squarifyratio:P.tiling.squarifyratio,flipX:P.tiling.flip.indexOf("x")>-1,flipY:P.tiling.flip.indexOf("y")>-1,pad:{inner:P.tiling.pad,top:P.marker.pad.t,left:P.marker.pad.l,right:P.marker.pad.r,bottom:P.marker.pad.b}}),X=G.descendants(),J=1/0,it=-1/0;X.forEach(function(V){var rt=V.depth;rt>=P._maxDepth?(V.x0=V.x1=(V.x0+V.x1)/2,V.y0=V.y1=(V.y0+V.y1)/2):(J=Math.min(J,rt),it=Math.max(it,rt))}),b=b.data(X,r.getPtId),P._maxVisibleLayers=isFinite(it)?it-J+1:0,b.enter().append("g").classed("slice",!0),L(b,n,w,[_,a],x),b.order();var nt=null;if(A&&S){var q=r.getPtId(S);b.each(function(V){nt===null&&r.getPtId(V)===q&&(nt={x0:V.x0,x1:V.x1,y0:V.y0,y1:V.y1})})}var Z=function(){return nt||{x0:0,x1:_,y0:0,y1:a}},$=b;return A&&($=$.transition().each("end",function(){var V=M.select(this);r.setSliceCursor(V,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),$.each(function(V){var rt=r.isHeader(V,P);V._x0=c(V.x0),V._x1=c(V.x1),V._y0=f(V.y0),V._y1=f(V.y1),V._hoverX=c(V.x1-P.marker.pad.r),V._hoverY=f(B?V.y1-P.marker.pad.b/2:V.y0+P.marker.pad.t/2);var ot=M.select(this),H=E.ensureSingle(ot,"path","surface",function(yt){yt.style("pointer-events",I?"none":"all")});A?H.transition().attrTween("d",function(yt){var xt=u(yt,n,Z(),[_,a]);return function(Ct){return x(xt(Ct))}}):H.attr("d",x),ot.call(e,p,s,o,{styleOne:v,eventDataKeys:d.eventDataKeys,transitionTime:d.CLICK_TRANSITION_TIME,transitionEasing:d.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,s,{isTransitioning:s._transitioning}),H.call(v,V,P,s,{hovered:!1}),V.x0===V.x1||V.y0===V.y1?V._text="":rt?V._text=N?"":r.getPtLabel(V)||"":V._text=l(V,p,P,o,O)||"";var Y=E.ensureSingle(ot,"g","slicetext"),at=E.ensureSingle(Y,"text","",function(yt){yt.attr("data-notex",1)}),et=E.ensureUniformFontSize(s,r.determineTextFont(P,V,O.font)),ct=V._text||" ",ft=rt&&ct.indexOf("<br>")===-1;at.text(ct).classed("slicetext",!0).attr("text-anchor",R?"end":F||ft?"start":"middle").call(i.font,et).call(C.convertToTspans,s),V.textBB=i.bBox(at.node()),V.transform=k(V,{fontSize:et.size,isHeader:rt}),V.transform.fontSize=et.size,A?at.transition().attrTween("transform",function(yt){var xt=m(yt,n,Z(),[_,a]);return function(Ct){return y(xt(Ct))}}):at.attr("transform",y(V))}),nt}},83024:function(Q){Q.exports=function U(t,M,E){var i;E.swapXY&&(i=t.x0,t.x0=t.y0,t.y0=i,i=t.x1,t.x1=t.y1,t.y1=i),E.flipX&&(i=t.x0,t.x0=M[0]-t.x1,t.x1=M[0]-i),E.flipY&&(i=t.y0,t.y0=M[1]-t.y1,t.y1=M[1]-i);var C=t.children;if(C)for(var T=0;T<C.length;T++)U(C[T],M,E)}},31991:function(Q,U,t){Q.exports={moduleType:"trace",name:"treemap",basePlotModule:t(79516),categories:[],animatable:!0,attributes:t(40516),layoutAttributes:t(45392),supplyDefaults:t(34092),supplyLayoutDefaults:t(77480),calc:t(97840).r,crossTraceCalc:t(97840).q,plot:t(53264),style:t(66192).style,colorbar:t(5528),meta:{}}},45392:function(Q){Q.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(Q,U,t){var M=t(3400),E=t(45392);Q.exports=function(i,C){function T(v,d){return M.coerce(i,C,E,v,d)}T("treemapcolorway",C.colorway),T("extendtreemapcolors")}},13832:function(Q,U,t){var M=t(74148),E=t(83024);Q.exports=function(C,T,v){var d=v.flipX,r=v.flipY,e=v.packing==="dice-slice",l=v.pad[r?"bottom":"top"],n=v.pad[d?"right":"left"],s=v.pad[d?"left":"right"],o=v.pad[r?"top":"bottom"],p;e&&(p=n,n=l,l=p,p=s,s=o,o=p);var b=M.treemap().tile(i(v.packing,v.squarifyratio)).paddingInner(v.pad.inner).paddingLeft(n).paddingRight(s).paddingTop(l).paddingBottom(o).size(e?[T[1],T[0]]:T)(C);return(e||d||r)&&E(b,T,{swapXY:e,flipX:d,flipY:r}),b};function i(C,T){switch(C){case"squarify":return M.treemapSquarify.ratio(T);case"binary":return M.treemapBinary;case"dice":return M.treemapDice;case"slice":return M.treemapSlice;default:return M.treemapSliceDice}}},53264:function(Q,U,t){var M=t(95808),E=t(76477);Q.exports=function(i,C,T,v){return M(i,C,T,v,{type:"treemap",drawDescendants:E})}},52960:function(Q,U,t){var M=t(33428),E=t(67756).qy,i=t(78176),C=t(3400),T=t(78048).TEXTPAD,v=t(98184),d=v.toMoveInsideBar,r=t(82744),e=r.recordMinTextSize,l=t(32984),n=t(27336);function s(o){return i.isHierarchyRoot(o)?"":i.getPtId(o)}Q.exports=function(o,p,b,h,_){var a=o._fullLayout,c=p[0],f=c.trace,x=f.type,k=x==="icicle",y=c.hierarchy,A=i.findEntryWithLevel(y,f.level),L=M.select(b),u=L.selectAll("g.pathbar"),m=L.selectAll("g.slice");if(!A){u.remove(),m.remove();return}var S=i.isHierarchyRoot(A),w=!a.uniformtext.mode&&i.hasTransition(h),I=i.getMaxDepth(f),O=function(Tt){return Tt.data.depth-A.data.depth<I},D=a._size,P=f.domain,F=D.w*(P.x[1]-P.x[0]),R=D.h*(P.y[1]-P.y[0]),B=F,N=f.pathbar.thickness,G=f.marker.line.width+l.gapWithPathbar,X=f.pathbar.visible?f.pathbar.side.indexOf("bottom")>-1?R+G:-(N+G):0,J={x0:B,x1:B,y0:X,y1:X+N},it=function(Tt,Ft,$t){var Vt=f.tiling.pad,Nt=function(dt){return dt-Vt<=Ft.x0},Mt=function(dt){return dt+Vt>=Ft.x1},Et=function(dt){return dt-Vt<=Ft.y0},Dt=function(dt){return dt+Vt>=Ft.y1};return Tt.x0===Ft.x0&&Tt.x1===Ft.x1&&Tt.y0===Ft.y0&&Tt.y1===Ft.y1?{x0:Tt.x0,x1:Tt.x1,y0:Tt.y0,y1:Tt.y1}:{x0:Nt(Tt.x0-Vt)?0:Mt(Tt.x0-Vt)?$t[0]:Tt.x0,x1:Nt(Tt.x1+Vt)?0:Mt(Tt.x1+Vt)?$t[0]:Tt.x1,y0:Et(Tt.y0-Vt)?0:Dt(Tt.y0-Vt)?$t[1]:Tt.y0,y1:Et(Tt.y1+Vt)?0:Dt(Tt.y1+Vt)?$t[1]:Tt.y1}},nt=null,q={},Z={},$=null,V=function(Tt,Ft){return Ft?q[s(Tt)]:Z[s(Tt)]},rt=function(Tt,Ft,$t,Vt){if(Ft)return q[s(y)]||J;var Nt=Z[f.level]||$t;return O(Tt)?it(Tt,Nt,Vt):{}};c.hasMultipleRoots&&S&&I++,f._maxDepth=I,f._backgroundColor=a.paper_bgcolor,f._entryDepth=A.data.depth,f._atRootLevel=S;var ot=-F/2+D.l+D.w*(P.x[1]+P.x[0])/2,H=-R/2+D.t+D.h*(1-(P.y[1]+P.y[0])/2),Y=function(Tt){return ot+Tt},at=function(Tt){return H+Tt},et=at(0),ct=Y(0),ft=function(Tt){return ct+Tt},yt=function(Tt){return et+Tt};function xt(Tt,Ft){return Tt+","+Ft}var Ct=ft(0),gt=function(Tt){Tt.x=Math.max(Ct,Tt.x)},mt=f.pathbar.edgeshape,vt=function(Tt){var Ft=ft(Math.max(Math.min(Tt.x0,Tt.x0),0)),$t=ft(Math.min(Math.max(Tt.x1,Tt.x1),B)),Vt=yt(Tt.y0),Nt=yt(Tt.y1),Mt=N/2,Et={},Dt={};Et.x=Ft,Dt.x=$t,Et.y=Dt.y=(Vt+Nt)/2;var dt={x:Ft,y:Vt},ht={x:$t,y:Vt},bt={x:$t,y:Nt},Pt={x:Ft,y:Nt};return mt===">"?(dt.x-=Mt,ht.x-=Mt,bt.x-=Mt,Pt.x-=Mt):mt==="/"?(bt.x-=Mt,Pt.x-=Mt,Et.x-=Mt/2,Dt.x-=Mt/2):mt==="\\"?(dt.x-=Mt,ht.x-=Mt,Et.x-=Mt/2,Dt.x-=Mt/2):mt==="<"&&(Et.x-=Mt,Dt.x-=Mt),gt(dt),gt(Pt),gt(Et),gt(ht),gt(bt),gt(Dt),"M"+xt(dt.x,dt.y)+"L"+xt(ht.x,ht.y)+"L"+xt(Dt.x,Dt.y)+"L"+xt(bt.x,bt.y)+"L"+xt(Pt.x,Pt.y)+"L"+xt(Et.x,Et.y)+"Z"},At=f[k?"tiling":"marker"].pad,Ot=function(Tt){return f.textposition.indexOf(Tt)!==-1},It=Ot("top"),St=Ot("left"),Bt=Ot("right"),re=Ot("bottom"),Yt=function(Tt){var Ft=Y(Tt.x0),$t=Y(Tt.x1),Vt=at(Tt.y0),Nt=at(Tt.y1),Mt=$t-Ft,Et=Nt-Vt;if(!Mt||!Et)return"";var Dt=f.marker.cornerradius||0,dt=Math.min(Dt,Mt/2,Et/2);dt&&Tt.data&&Tt.data.data&&Tt.data.data.label&&(It&&(dt=Math.min(dt,At.t)),St&&(dt=Math.min(dt,At.l)),Bt&&(dt=Math.min(dt,At.r)),re&&(dt=Math.min(dt,At.b)));var ht=function(bt,Pt){return dt?"a"+xt(dt,dt)+" 0 0 1 "+xt(bt,Pt):""};return"M"+xt(Ft,Vt+dt)+ht(dt,-dt)+"L"+xt($t-dt,Vt)+ht(dt,dt)+"L"+xt($t,Nt-dt)+ht(-dt,dt)+"L"+xt(Ft+dt,Nt)+ht(-dt,-dt)+"Z"},he=function(Tt,Ft){var $t=Tt.x0,Vt=Tt.x1,Nt=Tt.y0,Mt=Tt.y1,Et=Tt.textBB,Dt=It||Ft.isHeader&&!re,dt=Dt?"start":re?"end":"middle",ht=Ot("right"),bt=Ot("left")||Ft.onPathbar,Pt=bt?-1:ht?1:0;if(Ft.isHeader){if($t+=(k?At:At.l)-T,Vt-=(k?At:At.r)-T,$t>=Vt){var Gt=($t+Vt)/2;$t=Gt,Vt=Gt}var te;re?(te=Mt-(k?At:At.b),Nt<te&&te<Mt&&(Nt=te)):(te=Nt+(k?At:At.t),Nt<te&&te<Mt&&(Mt=te))}var ne=d($t,Vt,Nt,Mt,Et,{isHorizontal:!1,constrained:!0,angle:0,anchor:dt,leftToRight:Pt});return ne.fontSize=Ft.fontSize,ne.targetX=Y(ne.targetX),ne.targetY=at(ne.targetY),isNaN(ne.targetX)||isNaN(ne.targetY)?{}:($t!==Vt&&Nt!==Mt&&e(f.type,ne,a),{scale:ne.scale,rotate:ne.rotate,textX:ne.textX,textY:ne.textY,anchorX:ne.anchorX,anchorY:ne.anchorY,targetX:ne.targetX,targetY:ne.targetY})},Zt=function(Tt,Ft){for(var $t,Vt=0,Nt=Tt;!$t&&Vt<I;)Vt++,Nt=Nt.parent,Nt?$t=V(Nt,Ft):Vt=I;return $t||{}},ae=function(Tt,Ft,$t,Vt){var Nt=V(Tt,Ft),Mt;if(Ft)Mt=J;else{var Et=V(A,Ft);Et?Mt=it(Tt,Et,Vt):Mt={}}return E(Nt,Mt)},oe=function(Tt,Ft,$t,Vt,Nt){var Mt=V(Tt,Ft),Et;if(Mt)Et=Mt;else if(Ft)Et=J;else if(nt)if(Tt.parent){var Dt=$||$t;Dt&&!Ft?Et=it(Tt,Dt,Vt):(Et={},C.extendFlat(Et,Zt(Tt,Ft)))}else Et=C.extendFlat({},Tt),k&&(Nt.orientation==="h"?Nt.flipX?Et.x0=Tt.x1:Et.x1=0:Nt.flipY?Et.y0=Tt.y1:Et.y1=0);else Et={};return E(Et,{x0:Tt.x0,x1:Tt.x1,y0:Tt.y0,y1:Tt.y1})},ce=function(Tt,Ft,$t,Vt){var Nt=V(Tt,Ft),Mt={},Et=rt(Tt,Ft,$t,Vt);C.extendFlat(Mt,{transform:he({x0:Et.x0,x1:Et.x1,y0:Et.y0,y1:Et.y1,textBB:Tt.textBB,_text:Tt._text},{isHeader:i.isHeader(Tt,f)})}),Nt?Mt=Nt:Tt.parent&&C.extendFlat(Mt,Zt(Tt,Ft));var Dt=Tt.transform;return Tt.x0!==Tt.x1&&Tt.y0!==Tt.y1&&e(f.type,Dt,a),E(Mt,{transform:{scale:Dt.scale,rotate:Dt.rotate,textX:Dt.textX,textY:Dt.textY,anchorX:Dt.anchorX,anchorY:Dt.anchorY,targetX:Dt.targetX,targetY:Dt.targetY}})},ue=function(Tt,Ft,$t,Vt,Nt){var Mt=Vt[0],Et=Vt[1];w?Tt.exit().transition().each(function(){var Dt=M.select(this),dt=Dt.select("path.surface");dt.transition().attrTween("d",function(bt){var Pt=ae(bt,Ft,$t,[Mt,Et]);return function(Gt){return Nt(Pt(Gt))}});var ht=Dt.select("g.slicetext");ht.attr("opacity",0)}).remove():Tt.exit().remove()},ye=function(Tt){var Ft=Tt.transform;return Tt.x0!==Tt.x1&&Tt.y0!==Tt.y1&&e(f.type,Ft,a),C.getTextTransform({textX:Ft.textX,textY:Ft.textY,anchorX:Ft.anchorX,anchorY:Ft.anchorY,targetX:Ft.targetX,targetY:Ft.targetY,scale:Ft.scale,rotate:Ft.rotate})};w&&(u.each(function(Tt){q[s(Tt)]={x0:Tt.x0,x1:Tt.x1,y0:Tt.y0,y1:Tt.y1},Tt.transform&&(q[s(Tt)].transform={textX:Tt.transform.textX,textY:Tt.transform.textY,anchorX:Tt.transform.anchorX,anchorY:Tt.transform.anchorY,targetX:Tt.transform.targetX,targetY:Tt.transform.targetY,scale:Tt.transform.scale,rotate:Tt.transform.rotate})}),m.each(function(Tt){Z[s(Tt)]={x0:Tt.x0,x1:Tt.x1,y0:Tt.y0,y1:Tt.y1},Tt.transform&&(Z[s(Tt)].transform={textX:Tt.transform.textX,textY:Tt.transform.textY,anchorX:Tt.transform.anchorX,anchorY:Tt.transform.anchorY,targetX:Tt.transform.targetX,targetY:Tt.transform.targetY,scale:Tt.transform.scale,rotate:Tt.transform.rotate}),!nt&&i.isEntry(Tt)&&(nt=Tt)})),$=_(o,p,A,m,{width:F,height:R,viewX:Y,viewY:at,pathSlice:Yt,toMoveInsideSlice:he,prevEntry:nt,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:ce,handleSlicesExit:ue,hasTransition:w,strTransform:ye}),f.pathbar.visible?n(o,p,A,u,{barDifY:X,width:B,height:N,viewX:ft,viewY:yt,pathSlice:vt,toMoveInsideSlice:he,makeUpdateSliceInterpolator:oe,makeUpdateTextInterpolator:ce,handleSlicesExit:ue,hasTransition:w,strTransform:ye}):u.remove()}},66192:function(Q,U,t){var M=t(33428),E=t(76308),i=t(3400),C=t(78176),T=t(82744).resizeText,v=t(60404);function d(e){var l=e._fullLayout._treemaplayer.selectAll(".trace");T(e,l,"treemap"),l.each(function(n){var s=M.select(this),o=n[0],p=o.trace;s.style("opacity",p.opacity),s.selectAll("path.surface").each(function(b){M.select(this).call(r,b,p,e,{hovered:!1})})})}function r(e,l,n,s,o){var p=(o||{}).hovered,b=l.data.data,h=b.i,_,a,c=b.color,f=C.isHierarchyRoot(l),x=1;if(p)_=n._hovered.marker.line.color,a=n._hovered.marker.line.width;else if(f&&c===n.root.color)x=100,_="rgba(0,0,0,0)",a=0;else if(_=i.castOption(n,h,"marker.line.color")||E.defaultLine,a=i.castOption(n,h,"marker.line.width")||0,!n._hasColorscale&&!l.onPathbar){var k=n.marker.depthfade;if(k){var y=E.combine(E.addOpacity(n._backgroundColor,.75),c),A;if(k===!0){var L=C.getMaxDepth(n);isFinite(L)?C.isLeaf(l)?A=0:A=n._maxVisibleLayers-(l.data.depth-n._entryDepth):A=l.data.height+1}else A=l.data.depth-n._entryDepth,n._atRootLevel||A++;if(A>0)for(var u=0;u<A;u++){var m=.5*u/A;c=E.combine(E.addOpacity(y,m),c)}}}e.call(v,l,n,s,c).style("stroke-width",a).call(E.stroke,_).style("opacity",x)}Q.exports={style:d,styleOne:r}},13988:function(Q,U,t){var M=t(63188),E=t(92880).extendFlat,i=t(29736).axisHoverFormat;Q.exports={y:M.y,x:M.x,x0:M.x0,y0:M.y0,xhoverformat:i("x"),yhoverformat:i("y"),name:E({},M.name,{}),orientation:E({},M.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:M.fillcolor,points:E({},M.boxpoints,{}),jitter:E({},M.jitter,{}),pointpos:E({},M.pointpos,{}),width:E({},M.width,{}),marker:M.marker,text:M.text,hovertext:M.hovertext,hovertemplate:M.hovertemplate,quartilemethod:M.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:M.selected,unselected:M.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:M.zorder}},67064:function(Q,U,t){var M=t(3400),E=t(54460),i=t(62555),C=t(63800),T=t(39032).BADNUM;Q.exports=function(e,l){var n=i(e,l);if(n[0].t.empty)return n;for(var s=e._fullLayout,o=E.getFromId(e,l[l.orientation==="h"?"xaxis":"yaxis"]),p=1/0,b=-1/0,h=0,_=0,a=0;a<n.length;a++){var c=n[a],f=c.pts.map(C.extractVal),x=c.bandwidth=d(l,c,f),k=c.span=r(l,c,o,x);if(c.min===c.max&&x===0)k=c.span=[c.min,c.max],c.density=[{v:1,t:k[0]}],c.bandwidth=x,h=Math.max(h,1);else{var y=k[1]-k[0],A=Math.ceil(y/(x/3)),L=y/A;if(!isFinite(L)||!isFinite(A))return M.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var u=C.makeKDE(c,l,f);c.density=new Array(A);for(var m=0,S=k[0];S<k[1]+L/2;m++,S+=L){var w=u(S);c.density[m]={v:w,t:S},h=Math.max(h,w)}}_=Math.max(_,f.length),p=Math.min(p,k[0]),b=Math.max(b,k[1])}var I=E.findExtremes(o,[p,b],{padded:!0});if(l._extremes[o._id]=I,l.width)n[0].t.maxKDE=h;else{var O=s._violinScaleGroupStats,D=l.scalegroup,P=O[D];P?(P.maxKDE=Math.max(P.maxKDE,h),P.maxCount=Math.max(P.maxCount,_)):O[D]={maxKDE:h,maxCount:_}}return n[0].t.labels.kde=M._(e,"kde:"),n};function v(e,l,n){var s=Math.min(l,n/1.349);return 1.059*s*Math.pow(e,-.2)}function d(e,l,n){var s=l.max-l.min;if(!s)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,s/1e4);var o=n.length,p=M.stdev(n,o-1,l.mean);return Math.max(v(o,p,l.q3-l.q1),s/100)}function r(e,l,n,s){var o=e.spanmode,p=e.span||[],b=[l.min,l.max],h=[l.min-2*s,l.max+2*s],_;function a(f){var x=p[f],k=n.type==="multicategory"?n.r2c(x):n.d2c(x,0,e[l.valLetter+"calendar"]);return k===T?h[f]:k}o==="soft"?_=h:o==="hard"?_=b:_=[a(0),a(1)];var c={type:"linear",range:_};return E.setConvert(c),c.cleanRange(),_}},14348:function(Q,U,t){var M=t(96404).setPositionOffset,E=["v","h"];Q.exports=function(i,C){for(var T=i.calcdata,v=C.xaxis,d=C.yaxis,r=0;r<E.length;r++){for(var e=E[r],l=e==="h"?d:v,n=[],s=0;s<T.length;s++){var o=T[s],p=o[0].t,b=o[0].trace;b.visible===!0&&b.type==="violin"&&!p.empty&&b.orientation===e&&b.xaxis===v._id&&b.yaxis===d._id&&n.push(s)}M("violin",i,n,l)}}},36240:function(Q,U,t){var M=t(3400),E=t(76308),i=t(90624),C=t(13988);Q.exports=function(T,v,d,r){function e(L,u){return M.coerce(T,v,C,L,u)}function l(L,u){return M.coerce2(T,v,C,L,u)}if(i.handleSampleDefaults(T,v,e,r),v.visible!==!1){e("bandwidth"),e("side");var n=e("width");n||(e("scalegroup",v.name),e("scalemode"));var s=e("span"),o;Array.isArray(s)&&(o="manual"),e("spanmode",o);var p=e("line.color",(T.marker||{}).color||d),b=e("line.width"),h=e("fillcolor",E.addOpacity(v.line.color,.5));i.handlePointsDefaults(T,v,e,{prefix:""});var _=l("box.width"),a=l("box.fillcolor",h),c=l("box.line.color",p),f=l("box.line.width",b),x=e("box.visible",!!(_||a||c||f));x||(v.box={visible:!1});var k=l("meanline.color",p),y=l("meanline.width",b),A=e("meanline.visible",!!(k||y));A||(v.meanline={visible:!1}),e("quartilemethod"),e("zorder")}}},63800:function(Q,U,t){var M=t(3400),E={gaussian:function(i){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*i*i)}};U.makeKDE=function(i,C,T){var v=T.length,d=E.gaussian,r=i.bandwidth,e=1/(v*r);return function(l){for(var n=0,s=0;s<v;s++)n+=d((l-T[s])/r);return e*n}},U.getPositionOnKdePath=function(i,C,T){var v,d;C.orientation==="h"?(v="y",d="x"):(v="x",d="y");var r=M.findPointOnPath(i.path,T,d,{pathLength:i.pathLength}),e=i.posCenterPx,l=r[v],n=C.side==="both"?2*e-l:e;return[l,n]},U.getKdeValue=function(i,C,T){var v=i.pts.map(U.extractVal),d=U.makeKDE(i,C,v);return d(T)/i.posDensityScale},U.extractVal=function(i){return i.v}},78e3:function(Q,U,t){var M=t(76308),E=t(3400),i=t(54460),C=t(27576),T=t(63800);Q.exports=function(v,d,r,e,l){l||(l={});var n=l.hoverLayer,s=v.cd,o=s[0].trace,p=o.hoveron,b=p.indexOf("violins")!==-1,h=p.indexOf("kde")!==-1,_=[],a,c;if(b||h){var f=C.hoverOnBoxes(v,d,r,e);if(h&&f.length>0){var x=v.xa,k=v.ya,y,A,L,u,m;o.orientation==="h"?(m=d,y="y",L=k,A="x",u=x):(m=r,y="x",L=x,A="y",u=k);var S=s[v.index];if(m>=S.span[0]&&m<=S.span[1]){var w=E.extendFlat({},v),I=u.c2p(m,!0),O=T.getKdeValue(S,o,m),D=T.getPositionOnKdePath(S,o,I),P=L._offset,F=L._length;w[y+"0"]=D[0],w[y+"1"]=D[1],w[A+"0"]=w[A+"1"]=I,w[A+"Label"]=A+": "+i.hoverLabelText(u,m,o[A+"hoverformat"])+", "+s[0].t.labels.kde+" "+O.toFixed(3);for(var R=0,B=0;B<f.length;B++)if(f[B].attr==="med"){R=B;break}w.spikeDistance=f[R].spikeDistance;var N=y+"Spike";w[N]=f[R][N],f[R].spikeDistance=void 0,f[R][N]=void 0,w.hovertemplate=!1,_.push(w),c={},c[y+"1"]=E.constrain(P+D[0],P,P+F),c[y+"2"]=E.constrain(P+D[1],P,P+F),c[A+"1"]=c[A+"2"]=u._offset+I}}b&&(_=_.concat(f))}p.indexOf("points")!==-1&&(a=C.hoverOnPoints(v,d,r));var G=n.selectAll(".violinline-"+o.uid).data(c?[0]:[]);return G.enter().append("line").classed("violinline-"+o.uid,!0).attr("stroke-width",1.5),G.exit().remove(),G.attr(c).call(M.stroke,v.color),e==="closest"?a?[a]:_:(a&&_.push(a),_)}},22869:function(Q,U,t){Q.exports={attributes:t(13988),layoutAttributes:t(98228),supplyDefaults:t(36240),crossTraceDefaults:t(90624).crossTraceDefaults,supplyLayoutDefaults:t(8939),calc:t(67064),crossTraceCalc:t(14348),plot:t(5140),style:t(95908),styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(78e3),selectPoints:t(8264),moduleType:"trace",name:"violin",basePlotModule:t(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(Q,U,t){var M=t(16560),E=t(3400).extendFlat;Q.exports={violinmode:E({},M.boxmode,{}),violingap:E({},M.boxgap,{}),violingroupgap:E({},M.boxgroupgap,{})}},8939:function(Q,U,t){var M=t(3400),E=t(98228),i=t(68832);Q.exports=function(C,T,v){function d(r,e){return M.coerce(C,T,E,r,e)}i._supply(C,T,v,d,"violin")}},5140:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(18728),T=t(52340),v=t(63800);Q.exports=function(d,r,e,l){var n=d._context.staticPlot,s=d._fullLayout,o=r.xaxis,p=r.yaxis;function b(h,_){var a=T(h,{xaxis:o,yaxis:p,trace:_,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return i.smoothopen(a[0],1)}E.makeTraceGroups(l,e,"trace violins").each(function(h){var _=M.select(this),a=h[0],c=a.t,f=a.trace;if(f.visible!==!0||c.empty){_.remove();return}var x=c.bPos,k=c.bdPos,y=r[c.valLetter+"axis"],A=r[c.posLetter+"axis"],L=f.side==="both",u=L||f.side==="positive",m=L||f.side==="negative",S=_.selectAll("path.violin").data(E.identity);S.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),S.exit().remove(),S.each(function(B){var N=M.select(this),G=B.density,X=G.length,J=A.c2l(B.pos+x,!0),it=A.l2p(J),nt;if(f.width)nt=c.maxKDE/k;else{var q=s._violinScaleGroupStats[f.scalegroup];nt=f.scalemode==="count"?q.maxKDE/k*(q.maxCount/B.pts.length):q.maxKDE/k}var Z,$,V,rt,ot,H,Y;if(u){for(H=new Array(X),rt=0;rt<X;rt++)Y=H[rt]={},Y[c.posLetter]=J+G[rt].v/nt,Y[c.valLetter]=y.c2l(G[rt].t,!0);Z=b(H,f)}if(m){for(H=new Array(X),ot=0,rt=X-1;ot<X;ot++,rt--)Y=H[ot]={},Y[c.posLetter]=J-G[rt].v/nt,Y[c.valLetter]=y.c2l(G[rt].t,!0);$=b(H,f)}if(L)V=Z+"L"+$.substr(1)+"Z";else{var at=[it,y.c2p(G[0].t)],et=[it,y.c2p(G[X-1].t)];f.orientation==="h"&&(at.reverse(),et.reverse()),u?V="M"+at+"L"+Z.substr(1)+"L"+et:V="M"+et+"L"+$.substr(1)+"L"+at}N.attr("d",V),B.posCenterPx=it,B.posDensityScale=nt*k,B.path=N.node(),B.pathLength=B.path.getTotalLength()/(L?2:1)});var w=f.box,I=w.width,O=(w.line||{}).width,D,P;L?(D=k*I,P=0):u?(D=[0,k*I/2],P=O*{x:1,y:-1}[c.posLetter]):(D=[k*I/2,0],P=O*{x:-1,y:1}[c.posLetter]),C.plotBoxAndWhiskers(_,{pos:A,val:y},f,{bPos:x,bdPos:D,bPosPxOffset:P}),C.plotBoxMean(_,{pos:A,val:y},f,{bPos:x,bdPos:D,bPosPxOffset:P});var F;!f.box.visible&&f.meanline.visible&&(F=E.identity);var R=_.selectAll("path.meanline").data(F||[]);R.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),R.exit().remove(),R.each(function(B){var N=y.c2p(B.mean,!0),G=v.getPositionOnKdePath(B,f,N);M.select(this).attr("d",f.orientation==="h"?"M"+N+","+G[0]+"V"+G[1]:"M"+G[0]+","+N+"H"+G[1])}),C.plotPoints(_,{x:o,y:p},f,c)})}},95908:function(Q,U,t){var M=t(33428),E=t(76308),i=t(49224).stylePoints;Q.exports=function(C){var T=M.select(C).selectAll("g.trace.violins");T.style("opacity",function(v){return v[0].trace.opacity}),T.each(function(v){var d=v[0].trace,r=M.select(this),e=d.box||{},l=e.line||{},n=d.meanline||{},s=n.width;r.selectAll("path.violin").style("stroke-width",d.line.width+"px").call(E.stroke,d.line.color).call(E.fill,d.fillcolor),r.selectAll("path.box").style("stroke-width",l.width+"px").call(E.stroke,l.color).call(E.fill,e.fillcolor);var o={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};r.selectAll("path.mean").style(o).call(E.stroke,n.color),r.selectAll("path.meanline").style(o).call(E.stroke,n.color),i(r,d,C)})}},58168:function(Q,U,t){var M=t(49084),E=t(50048),i=t(16716),C=t(45464),T=t(92880).extendFlat,v=t(67824).overrideAll,d=Q.exports=v(T({x:E.x,y:E.y,z:E.z,value:E.value,isomin:E.isomin,isomax:E.isomax,surface:E.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:E.slices,caps:E.caps,text:E.text,hovertext:E.hovertext,xhoverformat:E.xhoverformat,yhoverformat:E.yhoverformat,zhoverformat:E.zhoverformat,valuehoverformat:E.valuehoverformat,hovertemplate:E.hovertemplate},M("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:E.colorbar,opacity:E.opacity,opacityscale:i.opacityscale,lightposition:E.lightposition,lighting:E.lighting,flatshading:E.flatshading,contour:E.contour,hoverinfo:T({},C.hoverinfo),showlegend:T({},C.showlegend,{dflt:!1})}),"calc","nested");d.x.editType=d.y.editType=d.z.editType=d.value.editType="calc+clearAxisTypes",d.transforms=void 0},91976:function(Q,U,t){var M=t(67792).gl_mesh3d,E=t(33040).parseColorScale,i=t(3400).isArrayOrTypedArray,C=t(43080),T=t(8932).extractOpts,v=t(52094),d=t(31460).findNearestOnAxis,r=t(31460).generateIsoMeshes;function e(s,o,p){this.scene=s,this.uid=p,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var l=e.prototype;l.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,p=this.data._meshX[o],b=this.data._meshY[o],h=this.data._meshZ[o],_=this.data._Ys.length,a=this.data._Zs.length,c=d(p,this.data._Xs).id,f=d(b,this.data._Ys).id,x=d(h,this.data._Zs).id,k=s.index=x+a*f+a*_*c;s.traceCoordinate=[this.data._meshX[k],this.data._meshY[k],this.data._meshZ[k],this.data._value[k]];var y=this.data.hovertext||this.data.text;return i(y)&&y[k]!==void 0?s.textLabel=y[k]:y&&(s.textLabel=y),!0}},l.update=function(s){var o=this.scene,p=o.fullSceneLayout;this.data=r(s);function b(f,x,k,y){return x.map(function(A){return f.d2l(A,0,y)*k})}var h=v(b(p.xaxis,s._meshX,o.dataScale[0],s.xcalendar),b(p.yaxis,s._meshY,o.dataScale[1],s.ycalendar),b(p.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),_=v(s._meshI,s._meshJ,s._meshK),a={positions:h,cells:_,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:C(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},c=T(s);a.vertexIntensity=s._meshIntensity,a.vertexIntensityBounds=[c.min,c.max],a.colormap=E(s),this.mesh.update(a)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function n(s,o){var p=s.glplot.gl,b=M({gl:p}),h=new e(s,b,o.uid);return b._trace=h,h.update(o),s.glplot.add(b),h}Q.exports=n},12448:function(Q,U,t){var M=t(3400),E=t(58168),i=t(70548).supplyIsoDefaults,C=t(60192).opacityscaleDefaults;Q.exports=function(T,v,d,r){function e(l,n){return M.coerce(T,v,E,l,n)}i(T,v,d,r,e),C(T,v,r,e)}},67776:function(Q,U,t){Q.exports={attributes:t(58168),supplyDefaults:t(12448),calc:t(62624),colorbar:{min:"cmin",max:"cmax"},plot:t(91976),moduleType:"trace",name:"volume",basePlotModule:t(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(Q,U,t){var M=t(20832),E=t(52904).line,i=t(45464),C=t(29736).axisHoverFormat,T=t(21776).Ks,v=t(21776).Gw,d=t(10213),r=t(92880).extendFlat,e=t(76308);function l(n){return{marker:{color:r({},M.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},M.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},M.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}Q.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:C("x"),yhoverformat:C("y"),hovertext:M.hovertext,hovertemplate:T({},{keys:d.eventDataKeys}),hoverinfo:r({},i.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:d.eventDataKeys.concat(["label"])}),text:M.text,textposition:M.textposition,insidetextanchor:M.insidetextanchor,textangle:M.textangle,textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:M.orientation,offset:M.offset,width:M.width,increasing:l(),decreasing:l(),totals:l(),connector:{line:{color:r({},E.color,{dflt:e.defaultLine}),width:r({},E.width,{editType:"plot"}),dash:E.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,zorder:M.zorder}},73540:function(Q,U,t){var M=t(54460),E=t(1220),i=t(3400).mergeArray,C=t(4500),T=t(39032).BADNUM;function v(r){return r==="a"||r==="absolute"}function d(r){return r==="t"||r==="total"}Q.exports=function(r,e){var l=M.getFromId(r,e.xaxis||"x"),n=M.getFromId(r,e.yaxis||"y"),s,o,p,b,h,_;e.orientation==="h"?(s=l.makeCalcdata(e,"x"),p=n.makeCalcdata(e,"y"),b=E(e,n,"y",p),h=!!e.yperiodalignment,_="y"):(s=n.makeCalcdata(e,"y"),p=l.makeCalcdata(e,"x"),b=E(e,l,"x",p),h=!!e.xperiodalignment,_="x"),o=b.vals;for(var a=Math.min(o.length,s.length),c=new Array(a),f=0,x,k=!1,y=0;y<a;y++){var A=s[y]||0,L=!1;(s[y]!==T||d(e.measure[y])||v(e.measure[y]))&&y+1<a&&(s[y+1]!==T||d(e.measure[y+1])||v(e.measure[y+1]))&&(L=!0);var u=c[y]={i:y,p:o[y],s:A,rawS:A,cNext:L};v(e.measure[y])?(f=u.s,u.isSum=!0,u.dir="totals",u.s=f):d(e.measure[y])?(u.isSum=!0,u.dir="totals",u.s=f):(u.isSum=!1,u.dir=u.rawS<0?"decreasing":"increasing",x=u.s,u.s=f+x,f+=x),u.dir==="totals"&&(k=!0),h&&(c[y].orig_p=p[y],c[y][_+"End"]=b.ends[y],c[y][_+"Start"]=b.starts[y]),e.ids&&(u.id=String(e.ids[y])),u.v=(e.base||0)+f}return c.length&&(c[0].hasTotals=k),i(e.text,c,"tx"),i(e.hovertext,c,"htx"),C(c,e),c}},10213:function(Q){Q.exports={eventDataKeys:["initial","delta","final"]}},50152:function(Q,U,t){var M=t(96376).setGroupPositions;Q.exports=function(E,i){var C=E._fullLayout,T=E._fullData,v=E.calcdata,d=i.xaxis,r=i.yaxis,e=[],l=[],n=[],s,o;for(o=0;o<T.length;o++){var p=T[o];p.visible===!0&&p.xaxis===d._id&&p.yaxis===r._id&&p.type==="waterfall"&&(s=v[o],p.orientation==="h"?n.push(s):l.push(s),e.push(s))}var b={mode:C.waterfallmode,norm:C.waterfallnorm,gap:C.waterfallgap,groupgap:C.waterfallgroupgap};for(M(E,d,r,l,b),M(E,r,d,n,b),o=0;o<e.length;o++){s=e[o];for(var h=0;h<s.length;h++){var _=s[h];_.isSum===!1&&(_.s0+=h===0?0:s[h-1].s),h+1<s.length&&(s[h].nextP0=s[h+1].p0,s[h].nextS0=s[h+1].s0)}}}},24224:function(Q,U,t){var M=t(3400),E=t(20011),i=t(31508).handleText,C=t(43980),T=t(31147),v=t(65776),d=t(76308),r=t(48164),e=r.INCREASING.COLOR,l=r.DECREASING.COLOR,n="#4499FF";function s(b,h,_){b(h+".marker.color",_),b(h+".marker.line.color",d.defaultLine),b(h+".marker.line.width")}function o(b,h,_,a){function c(A,L){return M.coerce(b,h,v,A,L)}var f=C(b,h,a,c);if(!f){h.visible=!1;return}T(b,h,a,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",h.x&&!h.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");i(b,h,a,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h.textposition!=="none"&&(c("texttemplate"),h.texttemplate||c("textinfo")),s(c,"increasing",e),s(c,"decreasing",l),s(c,"totals",n);var k=c("connector.visible");if(k){c("connector.mode");var y=c("connector.line.width");y&&(c("connector.line.color"),c("connector.line.dash"))}c("zorder")}function p(b,h){var _,a;function c(x){return M.coerce(a._input,a,v,x)}if(h.waterfallmode==="group")for(var f=0;f<b.length;f++)a=b[f],_=a._input,E(_,a,h,c)}Q.exports={supplyDefaults:o,crossTraceDefaults:p}},53256:function(Q){Q.exports=function(U,t){return U.x="xVal"in t?t.xVal:t.x,U.y="yVal"in t?t.yVal:t.y,"initial"in t&&(U.initial=t.initial),"delta"in t&&(U.delta=t.delta),"final"in t&&(U.final=t.final),t.xa&&(U.xaxis=t.xa),t.ya&&(U.yaxis=t.ya),U}},94196:function(Q,U,t){var M=t(54460).hoverLabelText,E=t(76308).opacity,i=t(63400).hoverOnBars,C=t(48164),T={increasing:C.INCREASING.SYMBOL,decreasing:C.DECREASING.SYMBOL};Q.exports=function(d,r,e,l,n){var s=i(d,r,e,l,n);if(!s)return;var o=s.cd,p=o[0].trace,b=p.orientation==="h",h=b?"x":"y",_=b?d.xa:d.ya;function a(S){return M(_,S,p[h+"hoverformat"])}var c=s.index,f=o[c],x=f.isSum?f.b+f.s:f.rawS;s.initial=f.b+f.s-x,s.delta=x,s.final=s.initial+s.delta;var k=a(Math.abs(s.delta));s.deltaLabel=x<0?"("+k+")":k,s.finalLabel=a(s.final),s.initialLabel=a(s.initial);var y=f.hi||p.hoverinfo,A=[];if(y&&y!=="none"&&y!=="skip"){var L=y==="all",u=y.split("+"),m=function(S){return L||u.indexOf(S)!==-1};f.isSum||(m("final")&&(b?!m("x"):!m("y"))&&A.push(s.finalLabel),m("delta")&&(x<0?A.push(s.deltaLabel+" "+T.decreasing):A.push(s.deltaLabel+" "+T.increasing)),m("initial")&&A.push("Initial: "+s.initialLabel))}return A.length&&(s.extraText=A.join("<br>")),s.color=v(p,f),[s]};function v(d,r){var e=d[r.dir].marker,l=e.color,n=e.line.color,s=e.line.width;if(E(l))return l;if(E(n)&&s)return n}},95952:function(Q,U,t){Q.exports={attributes:t(65776),layoutAttributes:t(91352),supplyDefaults:t(24224).supplyDefaults,crossTraceDefaults:t(24224).crossTraceDefaults,supplyLayoutDefaults:t(59464),calc:t(73540),crossTraceCalc:t(50152),plot:t(64488),style:t(12252).style,hoverPoints:t(94196),eventData:t(53256),selectPoints:t(45784),moduleType:"trace",name:"waterfall",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(Q){Q.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(Q,U,t){var M=t(3400),E=t(91352);Q.exports=function(i,C,T){var v=!1;function d(l,n){return M.coerce(i,C,E,l,n)}for(var r=0;r<T.length;r++){var e=T[r];if(e.visible&&e.type==="waterfall"){v=!0;break}}v&&(d("waterfallmode"),d("waterfallgap",.2),d("waterfallgroupgap"))}},64488:function(Q,U,t){var M=t(33428),E=t(3400),i=t(43616),C=t(39032).BADNUM,T=t(98184),v=t(82744).clearMinTextSize;Q.exports=function(e,l,n,s){var o=e._fullLayout;v("waterfall",o),T.plot(e,l,n,s,{mode:o.waterfallmode,norm:o.waterfallmode,gap:o.waterfallgap,groupgap:o.waterfallgroupgap}),d(e,l,n,s)};function d(e,l,n,s){var o=l.xaxis,p=l.yaxis;E.makeTraceGroups(s,n,"trace bars").each(function(b){var h=M.select(this),_=b[0].trace,a=E.ensureSingle(h,"g","lines");if(!_.connector||!_.connector.visible){a.remove();return}var c=_.orientation==="h",f=_.connector.mode,x=a.selectAll("g.line").data(E.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var k=x.size();x.each(function(y,A){if(!(A!==k-1&&!y.cNext)){var L=r(y,o,p,c),u=L[0],m=L[1],S="";u[0]!==C&&m[0]!==C&&u[1]!==C&&m[1]!==C&&(f==="spanning"&&!y.isSum&&A>0&&(c?S+="M"+u[0]+","+m[1]+"V"+m[0]:S+="M"+u[1]+","+m[0]+"H"+u[0]),f!=="between"&&(y.isSum||A<k-1)&&(c?S+="M"+u[1]+","+m[0]+"V"+m[1]:S+="M"+u[0]+","+m[1]+"H"+u[1]),u[2]!==C&&m[2]!==C&&(c?S+="M"+u[1]+","+m[1]+"V"+m[2]:S+="M"+u[1]+","+m[1]+"H"+u[2])),S===""&&(S="M0,0Z"),E.ensureSingle(M.select(this),"path").attr("d",S).call(i.setClipUrl,l.layerClipId,e)}})})}function r(e,l,n,s){var o=[],p=[],b=s?l:n,h=s?n:l;return o[0]=b.c2p(e.s0,!0),p[0]=h.c2p(e.p0,!0),o[1]=b.c2p(e.s1,!0),p[1]=h.c2p(e.p1,!0),o[2]=b.c2p(e.nextS0,!0),p[2]=h.c2p(e.nextP0,!0),s?[o,p]:[p,o]}},12252:function(Q,U,t){var M=t(33428),E=t(43616),i=t(76308),C=t(13448).DESELECTDIM,T=t(60100),v=t(82744).resizeText,d=T.styleTextPoints;function r(e,l,n){var s=n||M.select(e).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");v(e,s,"waterfall"),s.style("opacity",function(o){return o[0].trace.opacity}),s.each(function(o){var p=M.select(this),b=o[0].trace;p.selectAll(".point > path").each(function(h){if(!h.isBlank){var _=b[h.dir].marker;M.select(this).call(i.fill,_.color).call(i.stroke,_.line.color).call(E.dashLine,_.line.dash,_.line.width).style("opacity",b.selectedpoints&&!h.selected?C:1)}}),d(p,b,e),p.selectAll(".lines").each(function(){var h=b.connector.line;E.lineGroupStyle(M.select(this).selectAll("path"),h.width,h.color,h.dash)})})}Q.exports={style:r}},84224:function(Q,U,t){var M=t(54460),E=t(3400),i=t(73060),C=t(60468).W,T=t(39032).BADNUM;U.moduleType="transform",U.name="aggregate";var v=U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},d=v.aggregations;U.supplyDefaults=function(o,p){var b={},h;function _(w,I){return E.coerce(o,b,v,w,I)}var a=_("enabled");if(!a)return b;var c=i.findArrayAttributes(p),f={};for(h=0;h<c.length;h++)f[c[h]]=1;var x=_("groups");if(!Array.isArray(x)){if(!f[x])return b.enabled=!1,b;f[x]=0}var k=o.aggregations||[],y=b.aggregations=new Array(k.length),A;function L(w,I){return E.coerce(k[h],A,d,w,I)}for(h=0;h<k.length;h++){A={_index:h};var u=L("target"),m=L("func"),S=L("enabled");S&&u&&(f[u]||m==="count"&&f[u]===void 0)?(m==="stddev"&&L("funcmode"),f[u]=0,y[h]=A):y[h]={enabled:!1,_index:h}}for(h=0;h<c.length;h++)f[c[h]]&&y.push({target:c[h],func:d.func.dflt,enabled:!0,_index:-1});return b},U.calcTransform=function(o,p,b){if(b.enabled){var h=b.groups,_=E.getTargetArray(p,{target:h});if(_){var a,c,f,x,k={},y={},A=[],L=C(p.transforms,b),u=_.length;for(p._length&&(u=Math.min(u,p._length)),a=0;a<u;a++)c=_[a],f=k[c],f===void 0?(k[c]=A.length,x=[a],A.push(x),y[k[c]]=L(a)):(A[f].push(a),y[k[c]]=(y[k[c]]||[]).concat(L(a)));b._indexToPoints=y;var m=b.aggregations;for(a=0;a<m.length;a++)r(o,p,A,m[a]);typeof h=="string"&&r(o,p,A,{target:h,func:"first",enabled:!0}),p._length=A.length}}};function r(o,p,b,h){if(h.enabled){for(var _=h.target,a=E.nestedProperty(p,_),c=a.get(),f=M.getDataConversions(o,p,_,c),x=e(h,f),k=new Array(b.length),y=0;y<b.length;y++)k[y]=x(c,b[y]);a.set(k),h.func==="count"&&E.pushUnique(p._arrayAttrs,_)}}function e(o,p){var b=o.func,h=p.d2c,_=p.c2d;switch(b){case"count":return l;case"first":return n;case"last":return s;case"sum":return function(a,c){for(var f=0,x=0;x<c.length;x++){var k=h(a[c[x]]);k!==T&&(f+=k)}return _(f)};case"avg":return function(a,c){for(var f=0,x=0,k=0;k<c.length;k++){var y=h(a[c[k]]);y!==T&&(f+=y,x++)}return x?_(f/x):T};case"min":return function(a,c){for(var f=1/0,x=0;x<c.length;x++){var k=h(a[c[x]]);k!==T&&(f=Math.min(f,k))}return f===1/0?T:_(f)};case"max":return function(a,c){for(var f=-1/0,x=0;x<c.length;x++){var k=h(a[c[x]]);k!==T&&(f=Math.max(f,k))}return f===-1/0?T:_(f)};case"range":return function(a,c){for(var f=1/0,x=-1/0,k=0;k<c.length;k++){var y=h(a[c[k]]);y!==T&&(f=Math.min(f,y),x=Math.max(x,y))}return x===-1/0||f===1/0?T:_(x-f)};case"change":return function(a,c){var f=h(a[c[0]]),x=h(a[c[c.length-1]]);return f===T||x===T?T:_(x-f)};case"median":return function(a,c){for(var f=[],x=0;x<c.length;x++){var k=h(a[c[x]]);k!==T&&f.push(k)}if(!f.length)return T;f.sort(E.sorterAsc);var y=(f.length-1)/2;return _((f[Math.floor(y)]+f[Math.ceil(y)])/2)};case"mode":return function(a,c){for(var f={},x=0,k=T,y=0;y<c.length;y++){var A=h(a[c[y]]);if(A!==T){var L=f[A]=(f[A]||0)+1;L>x&&(x=L,k=A)}}return x?_(k):T};case"rms":return function(a,c){for(var f=0,x=0,k=0;k<c.length;k++){var y=h(a[c[k]]);y!==T&&(f+=y*y,x++)}return x?_(Math.sqrt(f/x)):T};case"stddev":return function(a,c){var f=0,x=0,k=1,y=T,A;for(A=0;A<c.length&&y===T;A++)y=h(a[c[A]]);if(y===T)return T;for(;A<c.length;A++){var L=h(a[c[A]]);if(L!==T){var u=L-y;f+=u,x+=u*u,k++}}var m=o.funcmode==="sample"?k-1:k;return m?Math.sqrt((x-f*f/k)/m):0}}}function l(o,p){return p.length}function n(o,p){return o[p[0]]}function s(o,p){return o[p[p.length-1]]}},76744:function(Q,U,t){var M=t(3400),E=t(24040),i=t(54460),C=t(60468).W,T=t(69104),v=T.COMPARISON_OPS,d=T.INTERVAL_OPS,r=T.SET_OPS;U.moduleType="transform",U.name="filter",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(v).concat(d).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},U.supplyDefaults=function(l){var n={};function s(h,_){return M.coerce(l,n,U.attributes,h,_)}var o=s("enabled");if(o){var p=s("target");if(M.isArrayOrTypedArray(p)&&p.length===0)return n.enabled=!1,n;s("preservegaps"),s("operation"),s("value");var b=E.getComponentMethod("calendars","handleDefaults");b(l,n,"valuecalendar",null),b(l,n,"targetcalendar",null)}return n},U.calcTransform=function(l,n,s){if(!s.enabled)return;var o=M.getTargetArray(n,s);if(!o)return;var p=s.target,b=o.length;n._length&&(b=Math.min(b,n._length));var h=s.targetcalendar,_=n._arrayAttrs,a=s.preservegaps;if(typeof p=="string"){var c=M.nestedProperty(n,p+"calendar").get();c&&(h=c)}var f=i.getDataToCoordFunc(l,n,p,o),x=e(s,f,h),k={},y={},A=0;function L(O,D){for(var P=0;P<_.length;P++){var F=M.nestedProperty(n,_[P]);O(F,D)}}var u,m;a?(u=function(O){k[O.astr]=M.extendDeep([],O.get()),O.set(new Array(b))},m=function(O,D){var P=k[O.astr][D];O.get()[D]=P}):(u=function(O){k[O.astr]=M.extendDeep([],O.get()),O.set([])},m=function(O,D){var P=k[O.astr][D];O.get().push(P)}),L(u);for(var S=C(n.transforms,s),w=0;w<b;w++){var I=x(o[w]);I?(L(m,w),y[A++]=S(w)):a&&A++}s._indexToPoints=y,n._length=A};function e(l,n,s){var o=l.operation,p=l.value,b=M.isArrayOrTypedArray(p);function h(f){return f.indexOf(o)!==-1}var _=function(f){return n(f,0,l.valuecalendar)},a=function(f){return n(f,0,s)},c;switch(h(v)?c=_(b?p[0]:p):h(d)?c=b?[_(p[0]),_(p[1])]:[_(p),_(p)]:h(r)&&(c=b?p.map(_):[_(p)]),o){case"=":return function(f){return a(f)===c};case"!=":return function(f){return a(f)!==c};case"<":return function(f){return a(f)<c};case"<=":return function(f){return a(f)<=c};case">":return function(f){return a(f)>c};case">=":return function(f){return a(f)>=c};case"[]":return function(f){var x=a(f);return x>=c[0]&&x<=c[1]};case"()":return function(f){var x=a(f);return x>c[0]&&x<c[1]};case"[)":return function(f){var x=a(f);return x>=c[0]&&x<c[1]};case"(]":return function(f){var x=a(f);return x>c[0]&&x<=c[1]};case"][":return function(f){var x=a(f);return x<=c[0]||x>=c[1]};case")(":return function(f){var x=a(f);return x<c[0]||x>c[1]};case"](":return function(f){var x=a(f);return x<=c[0]||x>c[1]};case")[":return function(f){var x=a(f);return x<c[0]||x>=c[1]};case"{}":return function(f){return c.indexOf(a(f))!==-1};case"}{":return function(f){return c.indexOf(a(f))===-1}}}},32028:function(Q,U,t){var M=t(3400),E=t(73060),i=t(7316),C=t(60468).W;U.moduleType="transform",U.name="groupby",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},U.supplyDefaults=function(v,d,r){var e,l={};function n(_,a){return M.coerce(v,l,U.attributes,_,a)}var s=n("enabled");if(!s)return l;n("groups"),n("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var o=v.styles,p=l.styles=[];if(o)for(e=0;e<o.length;e++){var b=p[e]={};M.coerce(o[e],p[e],U.attributes.styles,"target");var h=M.coerce(o[e],p[e],U.attributes.styles,"value");M.isPlainObject(h)?b.value=M.extendDeep({},h):h&&delete b.value}return l},U.transform=function(v,d){var r,e,l,n=[];for(e=0;e<v.length;e++)for(r=T(v[e],d),l=0;l<r.length;l++)n.push(r[l]);return n};function T(v,d){var r,e,l,n,s,o,p,b,h,_,a=d.transform,c=d.transformIndex,f=v.transforms[c].groups,x=C(v.transforms,a);if(!M.isArrayOrTypedArray(f)||f.length===0)return[v];var k=M.filterUnique(f),y=new Array(k.length),A=f.length,L=E.findArrayAttributes(v),u=a.styles||[],m={};for(r=0;r<u.length;r++)m[u[r].target]=u[r].value;a.styles&&(_=M.keyedContainer(a,"styles","target","value.name"));var S={},w={};for(r=0;r<k.length;r++){o=k[r],S[o]=r,w[o]=0,p=y[r]=M.extendDeepNoArrays({},v),p._group=o,p.transforms[c]._indexToPoints={};var I=null;for(_&&(I=_.get(o)),I||I===""?p.name=I:p.name=M.templateString(a.nameformat,{trace:v.name,group:o}),b=p.transforms,p.transforms=[],e=0;e<b.length;e++)p.transforms[e]=M.extendDeepNoArrays({},b[e]);for(e=0;e<L.length;e++)M.nestedProperty(p,L[e]).set([])}for(l=0;l<L.length;l++){for(n=L[l],e=0,h=[];e<k.length;e++)h[e]=M.nestedProperty(y[e],n).get();for(s=M.nestedProperty(v,n).get(),e=0;e<A;e++)h[S[f[e]]].push(s[e])}for(e=0;e<A;e++){p=y[S[f[e]]];var O=p.transforms[c]._indexToPoints;O[w[f[e]]]=x(e),w[f[e]]++}for(r=0;r<k.length;r++)o=k[r],p=y[r],i.clearExpandedTraceDefaultColors(p),p=M.extendDeepNoArrays(p,m[o]||{});return y}},60468:function(Q,U){U.W=function(t,M){for(var E,i,C=0;C<t.length&&(E=t[C],E!==M);C++)!E._indexToPoints||E.enabled===!1||(i=E._indexToPoints);var T=i?function(v){return i[v]}:function(v){return[v]};return T}},76272:function(Q,U,t){var M=t(3400),E=t(54460),i=t(60468).W,C=t(39032).BADNUM;U.moduleType="transform",U.name="sort",U.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},U.supplyDefaults=function(d){var r={};function e(n,s){return M.coerce(d,r,U.attributes,n,s)}var l=e("enabled");return l&&(e("target"),e("order")),r},U.calcTransform=function(d,r,e){if(e.enabled){var l=M.getTargetArray(r,e);if(l){var n=e.target,s=l.length;r._length&&(s=Math.min(s,r._length));var o=r._arrayAttrs,p=E.getDataToCoordFunc(d,r,n,l),b=T(e,l,p,s),h=i(r.transforms,e),_={},a,c;for(a=0;a<o.length;a++){var f=M.nestedProperty(r,o[a]),x=f.get(),k=new Array(s);for(c=0;c<s;c++)k[c]=x[b[c]];f.set(k)}for(c=0;c<s;c++)_[c]=h(b[c]);e._indexToPoints=_,r._length=s}}};function T(d,r,e,l){var n=new Array(l),s=new Array(l),o;for(o=0;o<l;o++)n[o]={v:r[o],i:o};for(n.sort(v(d,e)),o=0;o<l;o++)s[o]=n[o].i;return s}function v(d,r){switch(d.order){case"ascending":return function(e,l){var n=r(e.v),s=r(l.v);return n===C?1:s===C?-1:n-s};case"descending":return function(e,l){var n=r(e.v),s=r(l.v);return n===C?1:s===C?-1:s-n}}}},25788:function(Q,U){U.version="2.31.1"},67792:function(Q,U,t){var M=t(4168);(function(){var E={1964:function(v,d,r){v.exports={alpha_shape:r(3502),convex_hull:r(7352),delaunay_triangulate:r(7642),gl_cone3d:r(6405),gl_error3d:r(9165),gl_heatmap2d:r(2510),gl_line3d:r(5714),gl_mesh3d:r(7201),gl_plot2d:r(1850),gl_plot3d:r(4100),gl_pointcloud2d:r(4696),gl_scatter3d:r(8418),gl_select_box:r(3161),gl_spikes2d:r(4098),gl_streamtube3d:r(7815),gl_surface3d:r(9499),ndarray:r(9618),ndarray_linear_interpolate:r(4317)}},4793:function(v,d,r){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/function e(dt,ht){if(!(dt instanceof ht))throw new TypeError("Cannot call a class as a function")}function l(dt,ht){for(var bt=0;bt<ht.length;bt++){var Pt=ht[bt];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(dt,s(Pt.key),Pt)}}function n(dt,ht,bt){return ht&&l(dt.prototype,ht),bt&&l(dt,bt),Object.defineProperty(dt,"prototype",{writable:!1}),dt}function s(dt){var ht=o(dt,"string");return x(ht)=="symbol"?ht:ht+""}function o(dt,ht){if(x(dt)!="object"||!dt)return dt;var bt=dt[Symbol.toPrimitive];if(bt!==void 0){var Pt=bt.call(dt,ht||"default");if(x(Pt)!="object")return Pt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ht==="string"?String:Number)(dt)}function p(dt,ht,bt){return ht=a(ht),b(dt,_()?Reflect.construct(ht,bt||[],a(dt).constructor):ht.apply(dt,bt))}function b(dt,ht){if(ht&&(x(ht)==="object"||typeof ht=="function"))return ht;if(ht!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(dt)}function h(dt){if(dt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dt}function _(){try{var dt=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_=function(){return!!dt})()}function a(dt){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ht){return ht.__proto__||Object.getPrototypeOf(ht)},a(dt)}function c(dt,ht){if(typeof ht!="function"&&ht!==null)throw new TypeError("Super expression must either be null or a function");dt.prototype=Object.create(ht&&ht.prototype,{constructor:{value:dt,writable:!0,configurable:!0}}),Object.defineProperty(dt,"prototype",{writable:!1}),ht&&f(dt,ht)}function f(dt,ht){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(bt,Pt){return bt.__proto__=Pt,bt},f(dt,ht)}function x(dt){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ht){return typeof ht}:function(ht){return ht&&typeof Symbol=="function"&&ht.constructor===Symbol&&ht!==Symbol.prototype?"symbol":typeof ht},x(dt)}var k=r(7507),y=r(3778),A=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;d.hp=S,d.IS=50;var L=2147483647;S.TYPED_ARRAY_SUPPORT=u(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{var dt=new Uint8Array(1),ht={foo:function(){return 42}};return Object.setPrototypeOf(ht,Uint8Array.prototype),Object.setPrototypeOf(dt,ht),dt.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function m(dt){if(dt>L)throw new RangeError('The value "'+dt+'" is invalid for option "size"');var ht=new Uint8Array(dt);return Object.setPrototypeOf(ht,S.prototype),ht}function S(dt,ht,bt){if(typeof dt=="number"){if(typeof ht=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return D(dt)}return w(dt,ht,bt)}S.poolSize=8192;function w(dt,ht,bt){if(typeof dt=="string")return P(dt,ht);if(ArrayBuffer.isView(dt))return R(dt);if(dt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(dt));if(Vt(dt,ArrayBuffer)||dt&&Vt(dt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Vt(dt,SharedArrayBuffer)||dt&&Vt(dt.buffer,SharedArrayBuffer)))return B(dt,ht,bt);if(typeof dt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Pt=dt.valueOf&&dt.valueOf();if(Pt!=null&&Pt!==dt)return S.from(Pt,ht,bt);var Gt=N(dt);if(Gt)return Gt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof dt[Symbol.toPrimitive]=="function")return S.from(dt[Symbol.toPrimitive]("string"),ht,bt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(dt))}S.from=function(dt,ht,bt){return w(dt,ht,bt)},Object.setPrototypeOf(S.prototype,Uint8Array.prototype),Object.setPrototypeOf(S,Uint8Array);function I(dt){if(typeof dt!="number")throw new TypeError('"size" argument must be of type number');if(dt<0)throw new RangeError('The value "'+dt+'" is invalid for option "size"')}function O(dt,ht,bt){return I(dt),dt<=0?m(dt):ht!==void 0?typeof bt=="string"?m(dt).fill(ht,bt):m(dt).fill(ht):m(dt)}S.alloc=function(dt,ht,bt){return O(dt,ht,bt)};function D(dt){return I(dt),m(dt<0?0:G(dt)|0)}S.allocUnsafe=function(dt){return D(dt)},S.allocUnsafeSlow=function(dt){return D(dt)};function P(dt,ht){if((typeof ht!="string"||ht==="")&&(ht="utf8"),!S.isEncoding(ht))throw new TypeError("Unknown encoding: "+ht);var bt=X(dt,ht)|0,Pt=m(bt),Gt=Pt.write(dt,ht);return Gt!==bt&&(Pt=Pt.slice(0,Gt)),Pt}function F(dt){for(var ht=dt.length<0?0:G(dt.length)|0,bt=m(ht),Pt=0;Pt<ht;Pt+=1)bt[Pt]=dt[Pt]&255;return bt}function R(dt){if(Vt(dt,Uint8Array)){var ht=new Uint8Array(dt);return B(ht.buffer,ht.byteOffset,ht.byteLength)}return F(dt)}function B(dt,ht,bt){if(ht<0||dt.byteLength<ht)throw new RangeError('"offset" is outside of buffer bounds');if(dt.byteLength<ht+(bt||0))throw new RangeError('"length" is outside of buffer bounds');var Pt;return ht===void 0&&bt===void 0?Pt=new Uint8Array(dt):bt===void 0?Pt=new Uint8Array(dt,ht):Pt=new Uint8Array(dt,ht,bt),Object.setPrototypeOf(Pt,S.prototype),Pt}function N(dt){if(S.isBuffer(dt)){var ht=G(dt.length)|0,bt=m(ht);return bt.length===0||dt.copy(bt,0,0,ht),bt}if(dt.length!==void 0)return typeof dt.length!="number"||Nt(dt.length)?m(0):F(dt);if(dt.type==="Buffer"&&Array.isArray(dt.data))return F(dt.data)}function G(dt){if(dt>=L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");return dt|0}S.isBuffer=function(dt){return dt!=null&&dt._isBuffer===!0&&dt!==S.prototype},S.compare=function(dt,ht){if(Vt(dt,Uint8Array)&&(dt=S.from(dt,dt.offset,dt.byteLength)),Vt(ht,Uint8Array)&&(ht=S.from(ht,ht.offset,ht.byteLength)),!S.isBuffer(dt)||!S.isBuffer(ht))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(dt===ht)return 0;for(var bt=dt.length,Pt=ht.length,Gt=0,te=Math.min(bt,Pt);Gt<te;++Gt)if(dt[Gt]!==ht[Gt]){bt=dt[Gt],Pt=ht[Gt];break}return bt<Pt?-1:Pt<bt?1:0},S.isEncoding=function(dt){switch(String(dt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(dt,ht){if(!Array.isArray(dt))throw new TypeError('"list" argument must be an Array of Buffers');if(dt.length===0)return S.alloc(0);var bt;if(ht===void 0)for(ht=0,bt=0;bt<dt.length;++bt)ht+=dt[bt].length;var Pt=S.allocUnsafe(ht),Gt=0;for(bt=0;bt<dt.length;++bt){var te=dt[bt];if(Vt(te,Uint8Array))Gt+te.length>Pt.length?(S.isBuffer(te)||(te=S.from(te)),te.copy(Pt,Gt)):Uint8Array.prototype.set.call(Pt,te,Gt);else if(S.isBuffer(te))te.copy(Pt,Gt);else throw new TypeError('"list" argument must be an Array of Buffers');Gt+=te.length}return Pt};function X(dt,ht){if(S.isBuffer(dt))return dt.length;if(ArrayBuffer.isView(dt)||Vt(dt,ArrayBuffer))return dt.byteLength;if(typeof dt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+x(dt));var bt=dt.length,Pt=arguments.length>2&&arguments[2]===!0;if(!Pt&&bt===0)return 0;for(var Gt=!1;;)switch(ht){case"ascii":case"latin1":case"binary":return bt;case"utf8":case"utf-8":return ue(dt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bt*2;case"hex":return bt>>>1;case"base64":return Ft(dt).length;default:if(Gt)return Pt?-1:ue(dt).length;ht=(""+ht).toLowerCase(),Gt=!0}}S.byteLength=X;function J(dt,ht,bt){var Pt=!1;if((ht===void 0||ht<0)&&(ht=0),ht>this.length||((bt===void 0||bt>this.length)&&(bt=this.length),bt<=0)||(bt>>>=0,ht>>>=0,bt<=ht))return"";for(dt||(dt="utf8");;)switch(dt){case"hex":return yt(this,ht,bt);case"utf8":case"utf-8":return Y(this,ht,bt);case"ascii":return ct(this,ht,bt);case"latin1":case"binary":return ft(this,ht,bt);case"base64":return H(this,ht,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xt(this,ht,bt);default:if(Pt)throw new TypeError("Unknown encoding: "+dt);dt=(dt+"").toLowerCase(),Pt=!0}}S.prototype._isBuffer=!0;function it(dt,ht,bt){var Pt=dt[ht];dt[ht]=dt[bt],dt[bt]=Pt}S.prototype.swap16=function(){var dt=this.length;if(dt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ht=0;ht<dt;ht+=2)it(this,ht,ht+1);return this},S.prototype.swap32=function(){var dt=this.length;if(dt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ht=0;ht<dt;ht+=4)it(this,ht,ht+3),it(this,ht+1,ht+2);return this},S.prototype.swap64=function(){var dt=this.length;if(dt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ht=0;ht<dt;ht+=8)it(this,ht,ht+7),it(this,ht+1,ht+6),it(this,ht+2,ht+5),it(this,ht+3,ht+4);return this},S.prototype.toString=function(){var dt=this.length;return dt===0?"":arguments.length===0?Y(this,0,dt):J.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(dt){if(!S.isBuffer(dt))throw new TypeError("Argument must be a Buffer");return this===dt?!0:S.compare(this,dt)===0},S.prototype.inspect=function(){var dt="",ht=d.IS;return dt=this.toString("hex",0,ht).replace(/(.{2})/g,"$1 ").trim(),this.length>ht&&(dt+=" ... "),"<Buffer "+dt+">"},A&&(S.prototype[A]=S.prototype.inspect),S.prototype.compare=function(dt,ht,bt,Pt,Gt){if(Vt(dt,Uint8Array)&&(dt=S.from(dt,dt.offset,dt.byteLength)),!S.isBuffer(dt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+x(dt));if(ht===void 0&&(ht=0),bt===void 0&&(bt=dt?dt.length:0),Pt===void 0&&(Pt=0),Gt===void 0&&(Gt=this.length),ht<0||bt>dt.length||Pt<0||Gt>this.length)throw new RangeError("out of range index");if(Pt>=Gt&&ht>=bt)return 0;if(Pt>=Gt)return-1;if(ht>=bt)return 1;if(ht>>>=0,bt>>>=0,Pt>>>=0,Gt>>>=0,this===dt)return 0;for(var te=Gt-Pt,ne=bt-ht,je=Math.min(te,ne),Ne=this.slice(Pt,Gt),ge=dt.slice(ht,bt),_e=0;_e<je;++_e)if(Ne[_e]!==ge[_e]){te=Ne[_e],ne=ge[_e];break}return te<ne?-1:ne<te?1:0};function nt(dt,ht,bt,Pt,Gt){if(dt.length===0)return-1;if(typeof bt=="string"?(Pt=bt,bt=0):bt>2147483647?bt=2147483647:bt<-2147483648&&(bt=-2147483648),bt=+bt,Nt(bt)&&(bt=Gt?0:dt.length-1),bt<0&&(bt=dt.length+bt),bt>=dt.length){if(Gt)return-1;bt=dt.length-1}else if(bt<0)if(Gt)bt=0;else return-1;if(typeof ht=="string"&&(ht=S.from(ht,Pt)),S.isBuffer(ht))return ht.length===0?-1:q(dt,ht,bt,Pt,Gt);if(typeof ht=="number")return ht=ht&255,typeof Uint8Array.prototype.indexOf=="function"?Gt?Uint8Array.prototype.indexOf.call(dt,ht,bt):Uint8Array.prototype.lastIndexOf.call(dt,ht,bt):q(dt,[ht],bt,Pt,Gt);throw new TypeError("val must be string, number or Buffer")}function q(dt,ht,bt,Pt,Gt){var te=1,ne=dt.length,je=ht.length;if(Pt!==void 0&&(Pt=String(Pt).toLowerCase(),Pt==="ucs2"||Pt==="ucs-2"||Pt==="utf16le"||Pt==="utf-16le")){if(dt.length<2||ht.length<2)return-1;te=2,ne/=2,je/=2,bt/=2}function Ne(fe,Be){return te===1?fe[Be]:fe.readUInt16BE(Be*te)}var ge;if(Gt){var _e=-1;for(ge=bt;ge<ne;ge++)if(Ne(dt,ge)===Ne(ht,_e===-1?0:ge-_e)){if(_e===-1&&(_e=ge),ge-_e+1===je)return _e*te}else _e!==-1&&(ge-=ge-_e),_e=-1}else for(bt+je>ne&&(bt=ne-je),ge=bt;ge>=0;ge--){for(var De=!0,hr=0;hr<je;hr++)if(Ne(dt,ge+hr)!==Ne(ht,hr)){De=!1;break}if(De)return ge}return-1}S.prototype.includes=function(dt,ht,bt){return this.indexOf(dt,ht,bt)!==-1},S.prototype.indexOf=function(dt,ht,bt){return nt(this,dt,ht,bt,!0)},S.prototype.lastIndexOf=function(dt,ht,bt){return nt(this,dt,ht,bt,!1)};function Z(dt,ht,bt,Pt){bt=Number(bt)||0;var Gt=dt.length-bt;Pt?(Pt=Number(Pt),Pt>Gt&&(Pt=Gt)):Pt=Gt;var te=ht.length;Pt>te/2&&(Pt=te/2);var ne;for(ne=0;ne<Pt;++ne){var je=parseInt(ht.substr(ne*2,2),16);if(Nt(je))return ne;dt[bt+ne]=je}return ne}function $(dt,ht,bt,Pt){return $t(ue(ht,dt.length-bt),dt,bt,Pt)}function V(dt,ht,bt,Pt){return $t(ye(ht),dt,bt,Pt)}function rt(dt,ht,bt,Pt){return $t(Ft(ht),dt,bt,Pt)}function ot(dt,ht,bt,Pt){return $t(Tt(ht,dt.length-bt),dt,bt,Pt)}S.prototype.write=function(dt,ht,bt,Pt){if(ht===void 0)Pt="utf8",bt=this.length,ht=0;else if(bt===void 0&&typeof ht=="string")Pt=ht,bt=this.length,ht=0;else if(isFinite(ht))ht=ht>>>0,isFinite(bt)?(bt=bt>>>0,Pt===void 0&&(Pt="utf8")):(Pt=bt,bt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Gt=this.length-ht;if((bt===void 0||bt>Gt)&&(bt=Gt),dt.length>0&&(bt<0||ht<0)||ht>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pt||(Pt="utf8");for(var te=!1;;)switch(Pt){case"hex":return Z(this,dt,ht,bt);case"utf8":case"utf-8":return $(this,dt,ht,bt);case"ascii":case"latin1":case"binary":return V(this,dt,ht,bt);case"base64":return rt(this,dt,ht,bt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,dt,ht,bt);default:if(te)throw new TypeError("Unknown encoding: "+Pt);Pt=(""+Pt).toLowerCase(),te=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(dt,ht,bt){return ht===0&&bt===dt.length?k.fromByteArray(dt):k.fromByteArray(dt.slice(ht,bt))}function Y(dt,ht,bt){bt=Math.min(dt.length,bt);for(var Pt=[],Gt=ht;Gt<bt;){var te=dt[Gt],ne=null,je=te>239?4:te>223?3:te>191?2:1;if(Gt+je<=bt){var Ne=void 0,ge=void 0,_e=void 0,De=void 0;switch(je){case 1:te<128&&(ne=te);break;case 2:Ne=dt[Gt+1],(Ne&192)===128&&(De=(te&31)<<6|Ne&63,De>127&&(ne=De));break;case 3:Ne=dt[Gt+1],ge=dt[Gt+2],(Ne&192)===128&&(ge&192)===128&&(De=(te&15)<<12|(Ne&63)<<6|ge&63,De>2047&&(De<55296||De>57343)&&(ne=De));break;case 4:Ne=dt[Gt+1],ge=dt[Gt+2],_e=dt[Gt+3],(Ne&192)===128&&(ge&192)===128&&(_e&192)===128&&(De=(te&15)<<18|(Ne&63)<<12|(ge&63)<<6|_e&63,De>65535&&De<1114112&&(ne=De))}}ne===null?(ne=65533,je=1):ne>65535&&(ne-=65536,Pt.push(ne>>>10&1023|55296),ne=56320|ne&1023),Pt.push(ne),Gt+=je}return et(Pt)}var at=4096;function et(dt){var ht=dt.length;if(ht<=at)return String.fromCharCode.apply(String,dt);for(var bt="",Pt=0;Pt<ht;)bt+=String.fromCharCode.apply(String,dt.slice(Pt,Pt+=at));return bt}function ct(dt,ht,bt){var Pt="";bt=Math.min(dt.length,bt);for(var Gt=ht;Gt<bt;++Gt)Pt+=String.fromCharCode(dt[Gt]&127);return Pt}function ft(dt,ht,bt){var Pt="";bt=Math.min(dt.length,bt);for(var Gt=ht;Gt<bt;++Gt)Pt+=String.fromCharCode(dt[Gt]);return Pt}function yt(dt,ht,bt){var Pt=dt.length;(!ht||ht<0)&&(ht=0),(!bt||bt<0||bt>Pt)&&(bt=Pt);for(var Gt="",te=ht;te<bt;++te)Gt+=Mt[dt[te]];return Gt}function xt(dt,ht,bt){for(var Pt=dt.slice(ht,bt),Gt="",te=0;te<Pt.length-1;te+=2)Gt+=String.fromCharCode(Pt[te]+Pt[te+1]*256);return Gt}S.prototype.slice=function(dt,ht){var bt=this.length;dt=~~dt,ht=ht===void 0?bt:~~ht,dt<0?(dt+=bt,dt<0&&(dt=0)):dt>bt&&(dt=bt),ht<0?(ht+=bt,ht<0&&(ht=0)):ht>bt&&(ht=bt),ht<dt&&(ht=dt);var Pt=this.subarray(dt,ht);return Object.setPrototypeOf(Pt,S.prototype),Pt};function Ct(dt,ht,bt){if(dt%1!==0||dt<0)throw new RangeError("offset is not uint");if(dt+ht>bt)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUintLE=S.prototype.readUIntLE=function(dt,ht,bt){dt=dt>>>0,ht=ht>>>0,bt||Ct(dt,ht,this.length);for(var Pt=this[dt],Gt=1,te=0;++te<ht&&(Gt*=256);)Pt+=this[dt+te]*Gt;return Pt},S.prototype.readUintBE=S.prototype.readUIntBE=function(dt,ht,bt){dt=dt>>>0,ht=ht>>>0,bt||Ct(dt,ht,this.length);for(var Pt=this[dt+--ht],Gt=1;ht>0&&(Gt*=256);)Pt+=this[dt+--ht]*Gt;return Pt},S.prototype.readUint8=S.prototype.readUInt8=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,1,this.length),this[dt]},S.prototype.readUint16LE=S.prototype.readUInt16LE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,2,this.length),this[dt]|this[dt+1]<<8},S.prototype.readUint16BE=S.prototype.readUInt16BE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,2,this.length),this[dt]<<8|this[dt+1]},S.prototype.readUint32LE=S.prototype.readUInt32LE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,4,this.length),(this[dt]|this[dt+1]<<8|this[dt+2]<<16)+this[dt+3]*16777216},S.prototype.readUint32BE=S.prototype.readUInt32BE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,4,this.length),this[dt]*16777216+(this[dt+1]<<16|this[dt+2]<<8|this[dt+3])},S.prototype.readBigUInt64LE=Et(function(dt){dt=dt>>>0,Zt(dt,"offset");var ht=this[dt],bt=this[dt+7];(ht===void 0||bt===void 0)&&ae(dt,this.length-8);var Pt=ht+this[++dt]*Math.pow(2,8)+this[++dt]*Math.pow(2,16)+this[++dt]*Math.pow(2,24),Gt=this[++dt]+this[++dt]*Math.pow(2,8)+this[++dt]*Math.pow(2,16)+bt*Math.pow(2,24);return BigInt(Pt)+(BigInt(Gt)<<BigInt(32))}),S.prototype.readBigUInt64BE=Et(function(dt){dt=dt>>>0,Zt(dt,"offset");var ht=this[dt],bt=this[dt+7];(ht===void 0||bt===void 0)&&ae(dt,this.length-8);var Pt=ht*Math.pow(2,24)+this[++dt]*Math.pow(2,16)+this[++dt]*Math.pow(2,8)+this[++dt],Gt=this[++dt]*Math.pow(2,24)+this[++dt]*Math.pow(2,16)+this[++dt]*Math.pow(2,8)+bt;return(BigInt(Pt)<<BigInt(32))+BigInt(Gt)}),S.prototype.readIntLE=function(dt,ht,bt){dt=dt>>>0,ht=ht>>>0,bt||Ct(dt,ht,this.length);for(var Pt=this[dt],Gt=1,te=0;++te<ht&&(Gt*=256);)Pt+=this[dt+te]*Gt;return Gt*=128,Pt>=Gt&&(Pt-=Math.pow(2,8*ht)),Pt},S.prototype.readIntBE=function(dt,ht,bt){dt=dt>>>0,ht=ht>>>0,bt||Ct(dt,ht,this.length);for(var Pt=ht,Gt=1,te=this[dt+--Pt];Pt>0&&(Gt*=256);)te+=this[dt+--Pt]*Gt;return Gt*=128,te>=Gt&&(te-=Math.pow(2,8*ht)),te},S.prototype.readInt8=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,1,this.length),this[dt]&128?(255-this[dt]+1)*-1:this[dt]},S.prototype.readInt16LE=function(dt,ht){dt=dt>>>0,ht||Ct(dt,2,this.length);var bt=this[dt]|this[dt+1]<<8;return bt&32768?bt|4294901760:bt},S.prototype.readInt16BE=function(dt,ht){dt=dt>>>0,ht||Ct(dt,2,this.length);var bt=this[dt+1]|this[dt]<<8;return bt&32768?bt|4294901760:bt},S.prototype.readInt32LE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,4,this.length),this[dt]|this[dt+1]<<8|this[dt+2]<<16|this[dt+3]<<24},S.prototype.readInt32BE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,4,this.length),this[dt]<<24|this[dt+1]<<16|this[dt+2]<<8|this[dt+3]},S.prototype.readBigInt64LE=Et(function(dt){dt=dt>>>0,Zt(dt,"offset");var ht=this[dt],bt=this[dt+7];(ht===void 0||bt===void 0)&&ae(dt,this.length-8);var Pt=this[dt+4]+this[dt+5]*Math.pow(2,8)+this[dt+6]*Math.pow(2,16)+(bt<<24);return(BigInt(Pt)<<BigInt(32))+BigInt(ht+this[++dt]*Math.pow(2,8)+this[++dt]*Math.pow(2,16)+this[++dt]*Math.pow(2,24))}),S.prototype.readBigInt64BE=Et(function(dt){dt=dt>>>0,Zt(dt,"offset");var ht=this[dt],bt=this[dt+7];(ht===void 0||bt===void 0)&&ae(dt,this.length-8);var Pt=(ht<<24)+this[++dt]*Math.pow(2,16)+this[++dt]*Math.pow(2,8)+this[++dt];return(BigInt(Pt)<<BigInt(32))+BigInt(this[++dt]*Math.pow(2,24)+this[++dt]*Math.pow(2,16)+this[++dt]*Math.pow(2,8)+bt)}),S.prototype.readFloatLE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,4,this.length),y.read(this,dt,!0,23,4)},S.prototype.readFloatBE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,4,this.length),y.read(this,dt,!1,23,4)},S.prototype.readDoubleLE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,8,this.length),y.read(this,dt,!0,52,8)},S.prototype.readDoubleBE=function(dt,ht){return dt=dt>>>0,ht||Ct(dt,8,this.length),y.read(this,dt,!1,52,8)};function gt(dt,ht,bt,Pt,Gt,te){if(!S.isBuffer(dt))throw new TypeError('"buffer" argument must be a Buffer instance');if(ht>Gt||ht<te)throw new RangeError('"value" argument is out of bounds');if(bt+Pt>dt.length)throw new RangeError("Index out of range")}S.prototype.writeUintLE=S.prototype.writeUIntLE=function(dt,ht,bt,Pt){if(dt=+dt,ht=ht>>>0,bt=bt>>>0,!Pt){var Gt=Math.pow(2,8*bt)-1;gt(this,dt,ht,bt,Gt,0)}var te=1,ne=0;for(this[ht]=dt&255;++ne<bt&&(te*=256);)this[ht+ne]=dt/te&255;return ht+bt},S.prototype.writeUintBE=S.prototype.writeUIntBE=function(dt,ht,bt,Pt){if(dt=+dt,ht=ht>>>0,bt=bt>>>0,!Pt){var Gt=Math.pow(2,8*bt)-1;gt(this,dt,ht,bt,Gt,0)}var te=bt-1,ne=1;for(this[ht+te]=dt&255;--te>=0&&(ne*=256);)this[ht+te]=dt/ne&255;return ht+bt},S.prototype.writeUint8=S.prototype.writeUInt8=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,1,255,0),this[ht]=dt&255,ht+1},S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,2,65535,0),this[ht]=dt&255,this[ht+1]=dt>>>8,ht+2},S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,2,65535,0),this[ht]=dt>>>8,this[ht+1]=dt&255,ht+2},S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,4,4294967295,0),this[ht+3]=dt>>>24,this[ht+2]=dt>>>16,this[ht+1]=dt>>>8,this[ht]=dt&255,ht+4},S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,4,4294967295,0),this[ht]=dt>>>24,this[ht+1]=dt>>>16,this[ht+2]=dt>>>8,this[ht+3]=dt&255,ht+4};function mt(dt,ht,bt,Pt,Gt){he(ht,Pt,Gt,dt,bt,7);var te=Number(ht&BigInt(4294967295));dt[bt++]=te,te=te>>8,dt[bt++]=te,te=te>>8,dt[bt++]=te,te=te>>8,dt[bt++]=te;var ne=Number(ht>>BigInt(32)&BigInt(4294967295));return dt[bt++]=ne,ne=ne>>8,dt[bt++]=ne,ne=ne>>8,dt[bt++]=ne,ne=ne>>8,dt[bt++]=ne,bt}function vt(dt,ht,bt,Pt,Gt){he(ht,Pt,Gt,dt,bt,7);var te=Number(ht&BigInt(4294967295));dt[bt+7]=te,te=te>>8,dt[bt+6]=te,te=te>>8,dt[bt+5]=te,te=te>>8,dt[bt+4]=te;var ne=Number(ht>>BigInt(32)&BigInt(4294967295));return dt[bt+3]=ne,ne=ne>>8,dt[bt+2]=ne,ne=ne>>8,dt[bt+1]=ne,ne=ne>>8,dt[bt]=ne,bt+8}S.prototype.writeBigUInt64LE=Et(function(dt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return mt(this,dt,ht,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeBigUInt64BE=Et(function(dt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return vt(this,dt,ht,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeIntLE=function(dt,ht,bt,Pt){if(dt=+dt,ht=ht>>>0,!Pt){var Gt=Math.pow(2,8*bt-1);gt(this,dt,ht,bt,Gt-1,-Gt)}var te=0,ne=1,je=0;for(this[ht]=dt&255;++te<bt&&(ne*=256);)dt<0&&je===0&&this[ht+te-1]!==0&&(je=1),this[ht+te]=(dt/ne>>0)-je&255;return ht+bt},S.prototype.writeIntBE=function(dt,ht,bt,Pt){if(dt=+dt,ht=ht>>>0,!Pt){var Gt=Math.pow(2,8*bt-1);gt(this,dt,ht,bt,Gt-1,-Gt)}var te=bt-1,ne=1,je=0;for(this[ht+te]=dt&255;--te>=0&&(ne*=256);)dt<0&&je===0&&this[ht+te+1]!==0&&(je=1),this[ht+te]=(dt/ne>>0)-je&255;return ht+bt},S.prototype.writeInt8=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,1,127,-128),dt<0&&(dt=255+dt+1),this[ht]=dt&255,ht+1},S.prototype.writeInt16LE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,2,32767,-32768),this[ht]=dt&255,this[ht+1]=dt>>>8,ht+2},S.prototype.writeInt16BE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,2,32767,-32768),this[ht]=dt>>>8,this[ht+1]=dt&255,ht+2},S.prototype.writeInt32LE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,4,2147483647,-2147483648),this[ht]=dt&255,this[ht+1]=dt>>>8,this[ht+2]=dt>>>16,this[ht+3]=dt>>>24,ht+4},S.prototype.writeInt32BE=function(dt,ht,bt){return dt=+dt,ht=ht>>>0,bt||gt(this,dt,ht,4,2147483647,-2147483648),dt<0&&(dt=4294967295+dt+1),this[ht]=dt>>>24,this[ht+1]=dt>>>16,this[ht+2]=dt>>>8,this[ht+3]=dt&255,ht+4},S.prototype.writeBigInt64LE=Et(function(dt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return mt(this,dt,ht,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),S.prototype.writeBigInt64BE=Et(function(dt){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return vt(this,dt,ht,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function At(dt,ht,bt,Pt,Gt,te){if(bt+Pt>dt.length)throw new RangeError("Index out of range");if(bt<0)throw new RangeError("Index out of range")}function Ot(dt,ht,bt,Pt,Gt){return ht=+ht,bt=bt>>>0,Gt||At(dt,ht,bt,4),y.write(dt,ht,bt,Pt,23,4),bt+4}S.prototype.writeFloatLE=function(dt,ht,bt){return Ot(this,dt,ht,!0,bt)},S.prototype.writeFloatBE=function(dt,ht,bt){return Ot(this,dt,ht,!1,bt)};function It(dt,ht,bt,Pt,Gt){return ht=+ht,bt=bt>>>0,Gt||At(dt,ht,bt,8),y.write(dt,ht,bt,Pt,52,8),bt+8}S.prototype.writeDoubleLE=function(dt,ht,bt){return It(this,dt,ht,!0,bt)},S.prototype.writeDoubleBE=function(dt,ht,bt){return It(this,dt,ht,!1,bt)},S.prototype.copy=function(dt,ht,bt,Pt){if(!S.isBuffer(dt))throw new TypeError("argument should be a Buffer");if(bt||(bt=0),!Pt&&Pt!==0&&(Pt=this.length),ht>=dt.length&&(ht=dt.length),ht||(ht=0),Pt>0&&Pt<bt&&(Pt=bt),Pt===bt||dt.length===0||this.length===0)return 0;if(ht<0)throw new RangeError("targetStart out of bounds");if(bt<0||bt>=this.length)throw new RangeError("Index out of range");if(Pt<0)throw new RangeError("sourceEnd out of bounds");Pt>this.length&&(Pt=this.length),dt.length-ht<Pt-bt&&(Pt=dt.length-ht+bt);var Gt=Pt-bt;return this===dt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ht,bt,Pt):Uint8Array.prototype.set.call(dt,this.subarray(bt,Pt),ht),Gt},S.prototype.fill=function(dt,ht,bt,Pt){if(typeof dt=="string"){if(typeof ht=="string"?(Pt=ht,ht=0,bt=this.length):typeof bt=="string"&&(Pt=bt,bt=this.length),Pt!==void 0&&typeof Pt!="string")throw new TypeError("encoding must be a string");if(typeof Pt=="string"&&!S.isEncoding(Pt))throw new TypeError("Unknown encoding: "+Pt);if(dt.length===1){var Gt=dt.charCodeAt(0);(Pt==="utf8"&&Gt<128||Pt==="latin1")&&(dt=Gt)}}else typeof dt=="number"?dt=dt&255:typeof dt=="boolean"&&(dt=Number(dt));if(ht<0||this.length<ht||this.length<bt)throw new RangeError("Out of range index");if(bt<=ht)return this;ht=ht>>>0,bt=bt===void 0?this.length:bt>>>0,dt||(dt=0);var te;if(typeof dt=="number")for(te=ht;te<bt;++te)this[te]=dt;else{var ne=S.isBuffer(dt)?dt:S.from(dt,Pt),je=ne.length;if(je===0)throw new TypeError('The value "'+dt+'" is invalid for argument "value"');for(te=0;te<bt-ht;++te)this[te+ht]=ne[te%je]}return this};var St={};function Bt(dt,ht,bt){St[dt]=function(Pt){function Gt(){var te;return e(this,Gt),te=p(this,Gt),Object.defineProperty(te,"message",{value:ht.apply(te,arguments),writable:!0,configurable:!0}),te.name="".concat(te.name," [").concat(dt,"]"),te.stack,delete te.name,te}return c(Gt,Pt),n(Gt,[{key:"code",get:function(){return dt},set:function(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(dt,"]: ").concat(this.message)}}])}(bt)}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(dt){return dt?"".concat(dt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Bt("ERR_INVALID_ARG_TYPE",function(dt,ht){return'The "'.concat(dt,'" argument must be of type number. Received type ').concat(x(ht))},TypeError),Bt("ERR_OUT_OF_RANGE",function(dt,ht,bt){var Pt='The value of "'.concat(dt,'" is out of range.'),Gt=bt;return Number.isInteger(bt)&&Math.abs(bt)>Math.pow(2,32)?Gt=re(String(bt)):typeof bt=="bigint"&&(Gt=String(bt),(bt>Math.pow(BigInt(2),BigInt(32))||bt<-Math.pow(BigInt(2),BigInt(32)))&&(Gt=re(Gt)),Gt+="n"),Pt+=" It must be ".concat(ht,". Received ").concat(Gt),Pt},RangeError);function re(dt){for(var ht="",bt=dt.length,Pt=dt[0]==="-"?1:0;bt>=Pt+4;bt-=3)ht="_".concat(dt.slice(bt-3,bt)).concat(ht);return"".concat(dt.slice(0,bt)).concat(ht)}function Yt(dt,ht,bt){Zt(ht,"offset"),(dt[ht]===void 0||dt[ht+bt]===void 0)&&ae(ht,dt.length-(bt+1))}function he(dt,ht,bt,Pt,Gt,te){if(dt>bt||dt<ht){var ne=typeof ht=="bigint"?"n":"",je;throw te>3?ht===0||ht===BigInt(0)?je=">= 0".concat(ne," and < 2").concat(ne," ** ").concat((te+1)*8).concat(ne):je=">= -(2".concat(ne," ** ").concat((te+1)*8-1).concat(ne,") and < 2 ** ")+"".concat((te+1)*8-1).concat(ne):je=">= ".concat(ht).concat(ne," and <= ").concat(bt).concat(ne),new St.ERR_OUT_OF_RANGE("value",je,dt)}Yt(Pt,Gt,te)}function Zt(dt,ht){if(typeof dt!="number")throw new St.ERR_INVALID_ARG_TYPE(ht,"number",dt)}function ae(dt,ht,bt){throw Math.floor(dt)!==dt?(Zt(dt,bt),new St.ERR_OUT_OF_RANGE(bt||"offset","an integer",dt)):ht<0?new St.ERR_BUFFER_OUT_OF_BOUNDS:new St.ERR_OUT_OF_RANGE(bt||"offset",">= ".concat(bt?1:0," and <= ").concat(ht),dt)}var oe=/[^+/0-9A-Za-z-_]/g;function ce(dt){if(dt=dt.split("=")[0],dt=dt.trim().replace(oe,""),dt.length<2)return"";for(;dt.length%4!==0;)dt=dt+"=";return dt}function ue(dt,ht){ht=ht||1/0;for(var bt,Pt=dt.length,Gt=null,te=[],ne=0;ne<Pt;++ne){if(bt=dt.charCodeAt(ne),bt>55295&&bt<57344){if(!Gt){if(bt>56319){(ht-=3)>-1&&te.push(239,191,189);continue}else if(ne+1===Pt){(ht-=3)>-1&&te.push(239,191,189);continue}Gt=bt;continue}if(bt<56320){(ht-=3)>-1&&te.push(239,191,189),Gt=bt;continue}bt=(Gt-55296<<10|bt-56320)+65536}else Gt&&(ht-=3)>-1&&te.push(239,191,189);if(Gt=null,bt<128){if((ht-=1)<0)break;te.push(bt)}else if(bt<2048){if((ht-=2)<0)break;te.push(bt>>6|192,bt&63|128)}else if(bt<65536){if((ht-=3)<0)break;te.push(bt>>12|224,bt>>6&63|128,bt&63|128)}else if(bt<1114112){if((ht-=4)<0)break;te.push(bt>>18|240,bt>>12&63|128,bt>>6&63|128,bt&63|128)}else throw new Error("Invalid code point")}return te}function ye(dt){for(var ht=[],bt=0;bt<dt.length;++bt)ht.push(dt.charCodeAt(bt)&255);return ht}function Tt(dt,ht){for(var bt,Pt,Gt,te=[],ne=0;ne<dt.length&&!((ht-=2)<0);++ne)bt=dt.charCodeAt(ne),Pt=bt>>8,Gt=bt%256,te.push(Gt),te.push(Pt);return te}function Ft(dt){return k.toByteArray(ce(dt))}function $t(dt,ht,bt,Pt){var Gt;for(Gt=0;Gt<Pt&&!(Gt+bt>=ht.length||Gt>=dt.length);++Gt)ht[Gt+bt]=dt[Gt];return Gt}function Vt(dt,ht){return dt instanceof ht||dt!=null&&dt.constructor!=null&&dt.constructor.name!=null&&dt.constructor.name===ht.name}function Nt(dt){return dt!==dt}var Mt=function(){for(var dt="0123456789abcdef",ht=new Array(256),bt=0;bt<16;++bt)for(var Pt=bt*16,Gt=0;Gt<16;++Gt)ht[Pt+Gt]=dt[bt]+dt[Gt];return ht}();function Et(dt){return typeof BigInt>"u"?Dt:dt}function Dt(){throw new Error("BigInt not supported")}},9216:function(v){v.exports=l,v.exports.isMobile=l,v.exports.default=l;var d=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,e=/android|ipad|playbook|silk/i;function l(n){n||(n={});var s=n.ua;if(!s&&typeof navigator<"u"&&(s=navigator.userAgent),s&&s.headers&&typeof s.headers["user-agent"]=="string"&&(s=s.headers["user-agent"]),typeof s!="string")return!1;var o=d.test(s)&&!r.test(s)||!!n.tablet&&e.test(s);return!o&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&s.indexOf("Macintosh")!==-1&&s.indexOf("Safari")!==-1&&(o=!0),o}},6296:function(v,d,r){v.exports=p;var e=r(7261),l=r(9977),n=r(4192);function s(b,h){this._controllerNames=Object.keys(b),this._controllerList=this._controllerNames.map(function(_){return b[_]}),this._mode=h,this._active=b[h],this._active||(this._mode="turntable",this._active=b.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var o=s.prototype;o.flush=function(b){for(var h=this._controllerList,_=0;_<h.length;++_)h[_].flush(b)},o.idle=function(b){for(var h=this._controllerList,_=0;_<h.length;++_)h[_].idle(b)},o.lookAt=function(b,h,_,a){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].lookAt(b,h,_,a)},o.rotate=function(b,h,_,a){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].rotate(b,h,_,a)},o.pan=function(b,h,_,a){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].pan(b,h,_,a)},o.translate=function(b,h,_,a){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].translate(b,h,_,a)},o.setMatrix=function(b,h){for(var _=this._controllerList,a=0;a<_.length;++a)_[a].setMatrix(b,h)},o.setDistanceLimits=function(b,h){for(var _=this._controllerList,a=0;a<_.length;++a)_[a].setDistanceLimits(b,h)},o.setDistance=function(b,h){for(var _=this._controllerList,a=0;a<_.length;++a)_[a].setDistance(b,h)},o.recalcMatrix=function(b){this._active.recalcMatrix(b)},o.getDistance=function(b){return this._active.getDistance(b)},o.getDistanceLimits=function(b){return this._active.getDistanceLimits(b)},o.lastT=function(){return this._active.lastT()},o.setMode=function(b){if(b!==this._mode){var h=this._controllerNames.indexOf(b);if(!(h<0)){var _=this._active,a=this._controllerList[h],c=Math.max(_.lastT(),a.lastT());_.recalcMatrix(c),a.setMatrix(c,_.computedMatrix),this._active=a,this._mode=b,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},o.getMode=function(){return this._mode};function p(b){b=b||{};var h=b.eye||[0,0,1],_=b.center||[0,0,0],a=b.up||[0,1,0],c=b.distanceLimits||[0,1/0],f=b.mode||"turntable",x=e(),k=l(),y=n();return x.setDistanceLimits(c[0],c[1]),x.lookAt(0,h,_,a),k.setDistanceLimits(c[0],c[1]),k.lookAt(0,h,_,a),y.setDistanceLimits(c[0],c[1]),y.lookAt(0,h,_,a),new s({turntable:x,orbit:k,matrix:y},f)}},7169:function(v,d,r){var e=typeof WeakMap>"u"?r(1538):WeakMap,l=r(2762),n=r(8116),s=new e;function o(p){var b=s.get(p),h=b&&(b._triangleBuffer.handle||b._triangleBuffer.buffer);if(!h||!p.isBuffer(h)){var _=l(p,new Float32Array([-1,-1,-1,4,4,-1]));b=n(p,[{buffer:_,type:p.FLOAT,size:2}]),b._triangleBuffer=_,s.set(p,b)}b.bind(),p.drawArrays(p.TRIANGLES,0,3),b.unbind()}v.exports=o},1085:function(v,d,r){var e=r(1371);v.exports=l;function l(n,s,o){s=typeof s=="number"?s:1,o=o||": ";var p=n.split(/\r?\n/),b=String(p.length+s-1).length;return p.map(function(h,_){var a=_+s,c=String(a).length,f=e(a,b-c);return f+o+h}).join(`
`)}},3952:function(v,d,r){v.exports=n;var e=r(3250);function l(s,o){for(var p=new Array(o+1),b=0;b<s.length;++b)p[b]=s[b];for(var b=0;b<=s.length;++b){for(var h=s.length;h<=o;++h){for(var _=new Array(o),a=0;a<o;++a)_[a]=Math.pow(h+1-b,a);p[h]=_}var c=e.apply(void 0,p);if(c)return!0}return!1}function n(s){var o=s.length;if(o===0)return[];if(o===1)return[0];for(var p=s[0].length,b=[s[0]],h=[0],_=1;_<o;++_){if(b.push(s[_]),!l(b,p)){b.pop();continue}if(h.push(_),h.length===p+1)return h}return h}},5995:function(v,d,r){v.exports=n;var e=r(7642),l=r(6037);function n(s,o){return e(o).filter(function(p){for(var b=new Array(p.length),h=0;h<p.length;++h)b[h]=o[p[h]];return l(b)*s<1})}},3502:function(v,d,r){v.exports=n;var e=r(5995),l=r(9127);function n(s,o){return l(e(s,o))}},6468:function(v){v.exports=function(d){return atob(d)}},2642:function(v,d,r){v.exports=n;var e=r(727);function l(s){for(var o=0,p=0;p<s.length;++p)o+=s[p];return o}function n(s,o){for(var p=o.length,b=new Array(p+1),h=0;h<p;++h){for(var _=new Array(p+1),a=0;a<=p;++a)_[a]=s[a][h];b[h]=_}b[p]=new Array(p+1);for(var h=0;h<=p;++h)b[p][h]=1;for(var c=new Array(p+1),h=0;h<p;++h)c[h]=o[h];c[p]=1;var f=e(b,c),x=l(f[p+1]);x===0&&(x=1);for(var k=new Array(p+1),h=0;h<=p;++h)k[h]=l(f[h])/x;return k}},7507:function(v,d){d.byteLength=b,d.toByteArray=_,d.fromByteArray=f;for(var r=[],e=[],l=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=n.length;s<o;++s)r[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function p(x){var k=x.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=x.indexOf("=");y===-1&&(y=k);var A=y===k?0:4-y%4;return[y,A]}function b(x){var k=p(x),y=k[0],A=k[1];return(y+A)*3/4-A}function h(x,k,y){return(k+y)*3/4-y}function _(x){var k,y=p(x),A=y[0],L=y[1],u=new l(h(x,A,L)),m=0,S=L>0?A-4:A,w;for(w=0;w<S;w+=4)k=e[x.charCodeAt(w)]<<18|e[x.charCodeAt(w+1)]<<12|e[x.charCodeAt(w+2)]<<6|e[x.charCodeAt(w+3)],u[m++]=k>>16&255,u[m++]=k>>8&255,u[m++]=k&255;return L===2&&(k=e[x.charCodeAt(w)]<<2|e[x.charCodeAt(w+1)]>>4,u[m++]=k&255),L===1&&(k=e[x.charCodeAt(w)]<<10|e[x.charCodeAt(w+1)]<<4|e[x.charCodeAt(w+2)]>>2,u[m++]=k>>8&255,u[m++]=k&255),u}function a(x){return r[x>>18&63]+r[x>>12&63]+r[x>>6&63]+r[x&63]}function c(x,k,y){for(var A,L=[],u=k;u<y;u+=3)A=(x[u]<<16&16711680)+(x[u+1]<<8&65280)+(x[u+2]&255),L.push(a(A));return L.join("")}function f(x){for(var k,y=x.length,A=y%3,L=[],u=16383,m=0,S=y-A;m<S;m+=u)L.push(c(x,m,m+u>S?S:m+u));return A===1?(k=x[y-1],L.push(r[k>>2]+r[k<<4&63]+"==")):A===2&&(k=(x[y-2]<<8)+x[y-1],L.push(r[k>>10]+r[k>>4&63]+r[k<<2&63]+"=")),L.join("")}},3865:function(v,d,r){var e=r(869);v.exports=l;function l(n,s){return e(n[0].mul(s[1]).add(s[0].mul(n[1])),n[1].mul(s[1]))}},1318:function(v){v.exports=d;function d(r,e){return r[0].mul(e[1]).cmp(e[0].mul(r[1]))}},8697:function(v,d,r){var e=r(869);v.exports=l;function l(n,s){return e(n[0].mul(s[1]),n[1].mul(s[0]))}},7842:function(v,d,r){var e=r(6330),l=r(1533),n=r(2651),s=r(4387),o=r(869),p=r(8697);v.exports=b;function b(h,_){if(e(h))return _?p(h,b(_)):[h[0].clone(),h[1].clone()];var a=0,c,f;if(l(h))c=h.clone();else if(typeof h=="string")c=s(h);else{if(h===0)return[n(0),n(1)];if(h===Math.floor(h))c=n(h);else{for(;h!==Math.floor(h);)h=h*Math.pow(2,256),a-=256;c=n(h)}}if(e(_))c.mul(_[1]),f=_[0].clone();else if(l(_))f=_.clone();else if(typeof _=="string")f=s(_);else if(!_)f=n(1);else if(_===Math.floor(_))f=n(_);else{for(;_!==Math.floor(_);)_=_*Math.pow(2,256),a+=256;f=n(_)}return a>0?c=c.ushln(a):a<0&&(f=f.ushln(-a)),o(c,f)}},6330:function(v,d,r){var e=r(1533);v.exports=l;function l(n){return Array.isArray(n)&&n.length===2&&e(n[0])&&e(n[1])}},5716:function(v,d,r){var e=r(6859);v.exports=l;function l(n){return n.cmp(new e(0))}},1369:function(v,d,r){var e=r(5716);v.exports=l;function l(n){var s=n.length,o=n.words,p=0;if(s===1)p=o[0];else if(s===2)p=o[0]+o[1]*67108864;else for(var b=0;b<s;b++){var h=o[b];p+=h*Math.pow(67108864,b)}return e(n)*p}},4025:function(v,d,r){var e=r(2361),l=r(8828).countTrailingZeros;v.exports=n;function n(s){var o=l(e.lo(s));if(o<32)return o;var p=l(e.hi(s));return p>20?52:p+32}},1533:function(v,d,r){r(6859),v.exports=e;function e(l){return l&&typeof l=="object"&&!!l.words}},2651:function(v,d,r){var e=r(6859),l=r(2361);v.exports=n;function n(s){var o=l.exponent(s);return o<52?new e(s):new e(s*Math.pow(2,52-o)).ushln(o-52)}},869:function(v,d,r){var e=r(2651),l=r(5716);v.exports=n;function n(s,o){var p=l(s),b=l(o);if(p===0)return[e(0),e(1)];if(b===0)return[e(0),e(0)];b<0&&(s=s.neg(),o=o.neg());var h=s.gcd(o);return h.cmpn(1)?[s.div(h),o.div(h)]:[s,o]}},4387:function(v,d,r){var e=r(6859);v.exports=l;function l(n){return new e(n)}},6504:function(v,d,r){var e=r(869);v.exports=l;function l(n,s){return e(n[0].mul(s[0]),n[1].mul(s[1]))}},7721:function(v,d,r){var e=r(5716);v.exports=l;function l(n){return e(n[0])*e(n[1])}},5572:function(v,d,r){var e=r(869);v.exports=l;function l(n,s){return e(n[0].mul(s[1]).sub(n[1].mul(s[0])),n[1].mul(s[1]))}},946:function(v,d,r){var e=r(1369),l=r(4025);v.exports=n;function n(s){var o=s[0],p=s[1];if(o.cmpn(0)===0)return 0;var b=o.abs().divmod(p.abs()),h=b.div,_=e(h),a=b.mod,c=o.negative!==p.negative?-1:1;if(a.cmpn(0)===0)return c*_;if(_){var f=l(_)+4,x=e(a.ushln(f).divRound(p));return c*(_+x*Math.pow(2,-f))}else{var k=p.bitLength()-a.bitLength()+53,x=e(a.ushln(k).divRound(p));return k<1023?c*x*Math.pow(2,-k):(x*=Math.pow(2,-1023),c*x*Math.pow(2,1023-k))}}},2478:function(v){function d(o,p,b,h,_){for(var a=_+1;h<=_;){var c=h+_>>>1,f=o[c],x=b!==void 0?b(f,p):f-p;x>=0?(a=c,_=c-1):h=c+1}return a}function r(o,p,b,h,_){for(var a=_+1;h<=_;){var c=h+_>>>1,f=o[c],x=b!==void 0?b(f,p):f-p;x>0?(a=c,_=c-1):h=c+1}return a}function e(o,p,b,h,_){for(var a=h-1;h<=_;){var c=h+_>>>1,f=o[c],x=b!==void 0?b(f,p):f-p;x<0?(a=c,h=c+1):_=c-1}return a}function l(o,p,b,h,_){for(var a=h-1;h<=_;){var c=h+_>>>1,f=o[c],x=b!==void 0?b(f,p):f-p;x<=0?(a=c,h=c+1):_=c-1}return a}function n(o,p,b,h,_){for(;h<=_;){var a=h+_>>>1,c=o[a],f=b!==void 0?b(c,p):c-p;if(f===0)return a;f<=0?h=a+1:_=a-1}return-1}function s(o,p,b,h,_,a){return typeof b=="function"?a(o,p,b,h===void 0?0:h|0,_===void 0?o.length-1:_|0):a(o,p,void 0,b===void 0?0:b|0,h===void 0?o.length-1:h|0)}v.exports={ge:function(o,p,b,h,_){return s(o,p,b,h,_,d)},gt:function(o,p,b,h,_){return s(o,p,b,h,_,r)},lt:function(o,p,b,h,_){return s(o,p,b,h,_,e)},le:function(o,p,b,h,_){return s(o,p,b,h,_,l)},eq:function(o,p,b,h,_){return s(o,p,b,h,_,n)}}},8828:function(v,d){"use restrict";var r=32;d.INT_BITS=r,d.INT_MAX=2147483647,d.INT_MIN=-1<<r-1,d.sign=function(n){return(n>0)-(n<0)},d.abs=function(n){var s=n>>r-1;return(n^s)-s},d.min=function(n,s){return s^(n^s)&-(n<s)},d.max=function(n,s){return n^(n^s)&-(n<s)},d.isPow2=function(n){return!(n&n-1)&&!!n},d.log2=function(n){var s,o;return s=(n>65535)<<4,n>>>=s,o=(n>255)<<3,n>>>=o,s|=o,o=(n>15)<<2,n>>>=o,s|=o,o=(n>3)<<1,n>>>=o,s|=o,s|n>>1},d.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},d.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function e(n){var s=32;return n&=-n,n&&s--,n&65535&&(s-=16),n&16711935&&(s-=8),n&252645135&&(s-=4),n&858993459&&(s-=2),n&1431655765&&(s-=1),s}d.countTrailingZeros=e,d.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},d.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},d.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var l=new Array(256);(function(n){for(var s=0;s<256;++s){var o=s,p=s,b=7;for(o>>>=1;o;o>>>=1)p<<=1,p|=o&1,--b;n[s]=p<<b&255}})(l),d.reverse=function(n){return l[n&255]<<24|l[n>>>8&255]<<16|l[n>>>16&255]<<8|l[n>>>24&255]},d.interleave2=function(n,s){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,s&=65535,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,n|s<<1},d.deinterleave2=function(n,s){return n=n>>>s&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},d.interleave3=function(n,s,o){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,s&=1023,s=(s|s<<16)&4278190335,s=(s|s<<8)&251719695,s=(s|s<<4)&3272356035,s=(s|s<<2)&1227133513,n|=s<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,n|o<<2},d.deinterleave3=function(n,s){return n=n>>>s&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},d.nextCombination=function(n){var s=n|n-1;return s+1|(~s&-~s)-1>>>e(n)+1}},6859:function(v,d,r){v=r.nmd(v),function(e,l){function n(R,B){if(!R)throw new Error(B||"Assertion failed")}function s(R,B){R.super_=B;var N=function(){};N.prototype=B.prototype,R.prototype=new N,R.prototype.constructor=R}function o(R,B,N){if(o.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((B==="le"||B==="be")&&(N=B,B=10),this._init(R||0,B||10,N||"be"))}typeof e=="object"?e.exports=o:l.BN=o,o.BN=o,o.wordSize=26;var p;try{typeof window<"u"&&typeof window.Buffer<"u"?p=window.Buffer:p=r(7790).Buffer}catch{}o.isBN=function(R){return R instanceof o?!0:R!==null&&typeof R=="object"&&R.constructor.wordSize===o.wordSize&&Array.isArray(R.words)},o.max=function(R,B){return R.cmp(B)>0?R:B},o.min=function(R,B){return R.cmp(B)<0?R:B},o.prototype._init=function(R,B,N){if(typeof R=="number")return this._initNumber(R,B,N);if(typeof R=="object")return this._initArray(R,B,N);B==="hex"&&(B=16),n(B===(B|0)&&B>=2&&B<=36),R=R.toString().replace(/\s+/g,"");var G=0;R[0]==="-"&&(G++,this.negative=1),G<R.length&&(B===16?this._parseHex(R,G,N):(this._parseBase(R,B,G),N==="le"&&this._initArray(this.toArray(),B,N)))},o.prototype._initNumber=function(R,B,N){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[R&67108863],this.length=1):R<4503599627370496?(this.words=[R&67108863,R/67108864&67108863],this.length=2):(n(R<9007199254740992),this.words=[R&67108863,R/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),B,N)},o.prototype._initArray=function(R,B,N){if(n(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var G=0;G<this.length;G++)this.words[G]=0;var X,J,it=0;if(N==="be")for(G=R.length-1,X=0;G>=0;G-=3)J=R[G]|R[G-1]<<8|R[G-2]<<16,this.words[X]|=J<<it&67108863,this.words[X+1]=J>>>26-it&67108863,it+=24,it>=26&&(it-=26,X++);else if(N==="le")for(G=0,X=0;G<R.length;G+=3)J=R[G]|R[G+1]<<8|R[G+2]<<16,this.words[X]|=J<<it&67108863,this.words[X+1]=J>>>26-it&67108863,it+=24,it>=26&&(it-=26,X++);return this.strip()};function b(R,B){var N=R.charCodeAt(B);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function h(R,B,N){var G=b(R,N);return N-1>=B&&(G|=b(R,N-1)<<4),G}o.prototype._parseHex=function(R,B,N){this.length=Math.ceil((R.length-B)/6),this.words=new Array(this.length);for(var G=0;G<this.length;G++)this.words[G]=0;var X=0,J=0,it;if(N==="be")for(G=R.length-1;G>=B;G-=2)it=h(R,B,G)<<X,this.words[J]|=it&67108863,X>=18?(X-=18,J+=1,this.words[J]|=it>>>26):X+=8;else{var nt=R.length-B;for(G=nt%2===0?B+1:B;G<R.length;G+=2)it=h(R,B,G)<<X,this.words[J]|=it&67108863,X>=18?(X-=18,J+=1,this.words[J]|=it>>>26):X+=8}this.strip()};function _(R,B,N,G){for(var X=0,J=Math.min(R.length,N),it=B;it<J;it++){var nt=R.charCodeAt(it)-48;X*=G,nt>=49?X+=nt-49+10:nt>=17?X+=nt-17+10:X+=nt}return X}o.prototype._parseBase=function(R,B,N){this.words=[0],this.length=1;for(var G=0,X=1;X<=67108863;X*=B)G++;G--,X=X/B|0;for(var J=R.length-N,it=J%G,nt=Math.min(J,J-it)+N,q=0,Z=N;Z<nt;Z+=G)q=_(R,Z,Z+G,B),this.imuln(X),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q);if(it!==0){var $=1;for(q=_(R,Z,R.length,B),Z=0;Z<it;Z++)$*=B;this.imuln($),this.words[0]+q<67108864?this.words[0]+=q:this._iaddn(q)}this.strip()},o.prototype.copy=function(R){R.words=new Array(this.length);for(var B=0;B<this.length;B++)R.words[B]=this.words[B];R.length=this.length,R.negative=this.negative,R.red=this.red},o.prototype.clone=function(){var R=new o(null);return this.copy(R),R},o.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(R,B){R=R||10,B=B|0||1;var N;if(R===16||R==="hex"){N="";for(var G=0,X=0,J=0;J<this.length;J++){var it=this.words[J],nt=((it<<G|X)&16777215).toString(16);X=it>>>24-G&16777215,X!==0||J!==this.length-1?N=a[6-nt.length]+nt+N:N=nt+N,G+=2,G>=26&&(G-=26,J--)}for(X!==0&&(N=X.toString(16)+N);N.length%B!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(R===(R|0)&&R>=2&&R<=36){var q=c[R],Z=f[R];N="";var $=this.clone();for($.negative=0;!$.isZero();){var V=$.modn(Z).toString(R);$=$.idivn(Z),$.isZero()?N=V+N:N=a[q-V.length]+V+N}for(this.isZero()&&(N="0"+N);N.length%B!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=this.words[1]*67108864:this.length===3&&this.words[2]===1?R+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(R,B){return n(typeof p<"u"),this.toArrayLike(p,R,B)},o.prototype.toArray=function(R,B){return this.toArrayLike(Array,R,B)},o.prototype.toArrayLike=function(R,B,N){var G=this.byteLength(),X=N||Math.max(1,G);n(G<=X,"byte array longer than desired length"),n(X>0,"Requested array length <= 0"),this.strip();var J=B==="le",it=new R(X),nt,q,Z=this.clone();if(J){for(q=0;!Z.isZero();q++)nt=Z.andln(255),Z.iushrn(8),it[q]=nt;for(;q<X;q++)it[q]=0}else{for(q=0;q<X-G;q++)it[q]=0;for(q=0;!Z.isZero();q++)nt=Z.andln(255),Z.iushrn(8),it[X-q-1]=nt}return it},Math.clz32?o.prototype._countBits=function(R){return 32-Math.clz32(R)}:o.prototype._countBits=function(R){var B=R,N=0;return B>=4096&&(N+=13,B>>>=13),B>=64&&(N+=7,B>>>=7),B>=8&&(N+=4,B>>>=4),B>=2&&(N+=2,B>>>=2),N+B},o.prototype._zeroBits=function(R){if(R===0)return 26;var B=R,N=0;return B&8191||(N+=13,B>>>=13),B&127||(N+=7,B>>>=7),B&15||(N+=4,B>>>=4),B&3||(N+=2,B>>>=2),B&1||N++,N},o.prototype.bitLength=function(){var R=this.words[this.length-1],B=this._countBits(R);return(this.length-1)*26+B};function x(R){for(var B=new Array(R.bitLength()),N=0;N<B.length;N++){var G=N/26|0,X=N%26;B[N]=(R.words[G]&1<<X)>>>X}return B}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,B=0;B<this.length;B++){var N=this._zeroBits(this.words[B]);if(R+=N,N!==26)break}return R},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},o.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var B=0;B<R.length;B++)this.words[B]=this.words[B]|R.words[B];return this.strip()},o.prototype.ior=function(R){return n((this.negative|R.negative)===0),this.iuor(R)},o.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},o.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},o.prototype.iuand=function(R){var B;this.length>R.length?B=R:B=this;for(var N=0;N<B.length;N++)this.words[N]=this.words[N]&R.words[N];return this.length=B.length,this.strip()},o.prototype.iand=function(R){return n((this.negative|R.negative)===0),this.iuand(R)},o.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},o.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},o.prototype.iuxor=function(R){var B,N;this.length>R.length?(B=this,N=R):(B=R,N=this);for(var G=0;G<N.length;G++)this.words[G]=B.words[G]^N.words[G];if(this!==B)for(;G<B.length;G++)this.words[G]=B.words[G];return this.length=B.length,this.strip()},o.prototype.ixor=function(R){return n((this.negative|R.negative)===0),this.iuxor(R)},o.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},o.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},o.prototype.inotn=function(R){n(typeof R=="number"&&R>=0);var B=Math.ceil(R/26)|0,N=R%26;this._expand(B),N>0&&B--;for(var G=0;G<B;G++)this.words[G]=~this.words[G]&67108863;return N>0&&(this.words[G]=~this.words[G]&67108863>>26-N),this.strip()},o.prototype.notn=function(R){return this.clone().inotn(R)},o.prototype.setn=function(R,B){n(typeof R=="number"&&R>=0);var N=R/26|0,G=R%26;return this._expand(N+1),B?this.words[N]=this.words[N]|1<<G:this.words[N]=this.words[N]&~(1<<G),this.strip()},o.prototype.iadd=function(R){var B;if(this.negative!==0&&R.negative===0)return this.negative=0,B=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,B=this.isub(R),R.negative=1,B._normSign();var N,G;this.length>R.length?(N=this,G=R):(N=R,G=this);for(var X=0,J=0;J<G.length;J++)B=(N.words[J]|0)+(G.words[J]|0)+X,this.words[J]=B&67108863,X=B>>>26;for(;X!==0&&J<N.length;J++)B=(N.words[J]|0)+X,this.words[J]=B&67108863,X=B>>>26;if(this.length=N.length,X!==0)this.words[this.length]=X,this.length++;else if(N!==this)for(;J<N.length;J++)this.words[J]=N.words[J];return this},o.prototype.add=function(R){var B;return R.negative!==0&&this.negative===0?(R.negative=0,B=this.sub(R),R.negative^=1,B):R.negative===0&&this.negative!==0?(this.negative=0,B=R.sub(this),this.negative=1,B):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},o.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var B=this.iadd(R);return R.negative=1,B._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var N=this.cmp(R);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var G,X;N>0?(G=this,X=R):(G=R,X=this);for(var J=0,it=0;it<X.length;it++)B=(G.words[it]|0)-(X.words[it]|0)+J,J=B>>26,this.words[it]=B&67108863;for(;J!==0&&it<G.length;it++)B=(G.words[it]|0)+J,J=B>>26,this.words[it]=B&67108863;if(J===0&&it<G.length&&G!==this)for(;it<G.length;it++)this.words[it]=G.words[it];return this.length=Math.max(this.length,it),G!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(R){return this.clone().isub(R)};function k(R,B,N){N.negative=B.negative^R.negative;var G=R.length+B.length|0;N.length=G,G=G-1|0;var X=R.words[0]|0,J=B.words[0]|0,it=X*J,nt=it&67108863,q=it/67108864|0;N.words[0]=nt;for(var Z=1;Z<G;Z++){for(var $=q>>>26,V=q&67108863,rt=Math.min(Z,B.length-1),ot=Math.max(0,Z-R.length+1);ot<=rt;ot++){var H=Z-ot|0;X=R.words[H]|0,J=B.words[ot]|0,it=X*J+V,$+=it/67108864|0,V=it&67108863}N.words[Z]=V|0,q=$|0}return q!==0?N.words[Z]=q|0:N.length--,N.strip()}var y=function(R,B,N){var G=R.words,X=B.words,J=N.words,it=0,nt,q,Z,$=G[0]|0,V=$&8191,rt=$>>>13,ot=G[1]|0,H=ot&8191,Y=ot>>>13,at=G[2]|0,et=at&8191,ct=at>>>13,ft=G[3]|0,yt=ft&8191,xt=ft>>>13,Ct=G[4]|0,gt=Ct&8191,mt=Ct>>>13,vt=G[5]|0,At=vt&8191,Ot=vt>>>13,It=G[6]|0,St=It&8191,Bt=It>>>13,re=G[7]|0,Yt=re&8191,he=re>>>13,Zt=G[8]|0,ae=Zt&8191,oe=Zt>>>13,ce=G[9]|0,ue=ce&8191,ye=ce>>>13,Tt=X[0]|0,Ft=Tt&8191,$t=Tt>>>13,Vt=X[1]|0,Nt=Vt&8191,Mt=Vt>>>13,Et=X[2]|0,Dt=Et&8191,dt=Et>>>13,ht=X[3]|0,bt=ht&8191,Pt=ht>>>13,Gt=X[4]|0,te=Gt&8191,ne=Gt>>>13,je=X[5]|0,Ne=je&8191,ge=je>>>13,_e=X[6]|0,De=_e&8191,hr=_e>>>13,fe=X[7]|0,Be=fe&8191,He=fe>>>13,pr=X[8]|0,Ze=pr&8191,Xt=pr>>>13,ie=X[9]|0,pe=ie&8191,ke=ie>>>13;N.negative=R.negative^B.negative,N.length=19,nt=Math.imul(V,Ft),q=Math.imul(V,$t),q=q+Math.imul(rt,Ft)|0,Z=Math.imul(rt,$t);var Ce=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,nt=Math.imul(H,Ft),q=Math.imul(H,$t),q=q+Math.imul(Y,Ft)|0,Z=Math.imul(Y,$t),nt=nt+Math.imul(V,Nt)|0,q=q+Math.imul(V,Mt)|0,q=q+Math.imul(rt,Nt)|0,Z=Z+Math.imul(rt,Mt)|0;var Fe=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,nt=Math.imul(et,Ft),q=Math.imul(et,$t),q=q+Math.imul(ct,Ft)|0,Z=Math.imul(ct,$t),nt=nt+Math.imul(H,Nt)|0,q=q+Math.imul(H,Mt)|0,q=q+Math.imul(Y,Nt)|0,Z=Z+Math.imul(Y,Mt)|0,nt=nt+Math.imul(V,Dt)|0,q=q+Math.imul(V,dt)|0,q=q+Math.imul(rt,Dt)|0,Z=Z+Math.imul(rt,dt)|0;var Re=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Re>>>26)|0,Re&=67108863,nt=Math.imul(yt,Ft),q=Math.imul(yt,$t),q=q+Math.imul(xt,Ft)|0,Z=Math.imul(xt,$t),nt=nt+Math.imul(et,Nt)|0,q=q+Math.imul(et,Mt)|0,q=q+Math.imul(ct,Nt)|0,Z=Z+Math.imul(ct,Mt)|0,nt=nt+Math.imul(H,Dt)|0,q=q+Math.imul(H,dt)|0,q=q+Math.imul(Y,Dt)|0,Z=Z+Math.imul(Y,dt)|0,nt=nt+Math.imul(V,bt)|0,q=q+Math.imul(V,Pt)|0,q=q+Math.imul(rt,bt)|0,Z=Z+Math.imul(rt,Pt)|0;var be=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(be>>>26)|0,be&=67108863,nt=Math.imul(gt,Ft),q=Math.imul(gt,$t),q=q+Math.imul(mt,Ft)|0,Z=Math.imul(mt,$t),nt=nt+Math.imul(yt,Nt)|0,q=q+Math.imul(yt,Mt)|0,q=q+Math.imul(xt,Nt)|0,Z=Z+Math.imul(xt,Mt)|0,nt=nt+Math.imul(et,Dt)|0,q=q+Math.imul(et,dt)|0,q=q+Math.imul(ct,Dt)|0,Z=Z+Math.imul(ct,dt)|0,nt=nt+Math.imul(H,bt)|0,q=q+Math.imul(H,Pt)|0,q=q+Math.imul(Y,bt)|0,Z=Z+Math.imul(Y,Pt)|0,nt=nt+Math.imul(V,te)|0,q=q+Math.imul(V,ne)|0,q=q+Math.imul(rt,te)|0,Z=Z+Math.imul(rt,ne)|0;var Ge=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,nt=Math.imul(At,Ft),q=Math.imul(At,$t),q=q+Math.imul(Ot,Ft)|0,Z=Math.imul(Ot,$t),nt=nt+Math.imul(gt,Nt)|0,q=q+Math.imul(gt,Mt)|0,q=q+Math.imul(mt,Nt)|0,Z=Z+Math.imul(mt,Mt)|0,nt=nt+Math.imul(yt,Dt)|0,q=q+Math.imul(yt,dt)|0,q=q+Math.imul(xt,Dt)|0,Z=Z+Math.imul(xt,dt)|0,nt=nt+Math.imul(et,bt)|0,q=q+Math.imul(et,Pt)|0,q=q+Math.imul(ct,bt)|0,Z=Z+Math.imul(ct,Pt)|0,nt=nt+Math.imul(H,te)|0,q=q+Math.imul(H,ne)|0,q=q+Math.imul(Y,te)|0,Z=Z+Math.imul(Y,ne)|0,nt=nt+Math.imul(V,Ne)|0,q=q+Math.imul(V,ge)|0,q=q+Math.imul(rt,Ne)|0,Z=Z+Math.imul(rt,ge)|0;var Ke=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,nt=Math.imul(St,Ft),q=Math.imul(St,$t),q=q+Math.imul(Bt,Ft)|0,Z=Math.imul(Bt,$t),nt=nt+Math.imul(At,Nt)|0,q=q+Math.imul(At,Mt)|0,q=q+Math.imul(Ot,Nt)|0,Z=Z+Math.imul(Ot,Mt)|0,nt=nt+Math.imul(gt,Dt)|0,q=q+Math.imul(gt,dt)|0,q=q+Math.imul(mt,Dt)|0,Z=Z+Math.imul(mt,dt)|0,nt=nt+Math.imul(yt,bt)|0,q=q+Math.imul(yt,Pt)|0,q=q+Math.imul(xt,bt)|0,Z=Z+Math.imul(xt,Pt)|0,nt=nt+Math.imul(et,te)|0,q=q+Math.imul(et,ne)|0,q=q+Math.imul(ct,te)|0,Z=Z+Math.imul(ct,ne)|0,nt=nt+Math.imul(H,Ne)|0,q=q+Math.imul(H,ge)|0,q=q+Math.imul(Y,Ne)|0,Z=Z+Math.imul(Y,ge)|0,nt=nt+Math.imul(V,De)|0,q=q+Math.imul(V,hr)|0,q=q+Math.imul(rt,De)|0,Z=Z+Math.imul(rt,hr)|0;var or=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(or>>>26)|0,or&=67108863,nt=Math.imul(Yt,Ft),q=Math.imul(Yt,$t),q=q+Math.imul(he,Ft)|0,Z=Math.imul(he,$t),nt=nt+Math.imul(St,Nt)|0,q=q+Math.imul(St,Mt)|0,q=q+Math.imul(Bt,Nt)|0,Z=Z+Math.imul(Bt,Mt)|0,nt=nt+Math.imul(At,Dt)|0,q=q+Math.imul(At,dt)|0,q=q+Math.imul(Ot,Dt)|0,Z=Z+Math.imul(Ot,dt)|0,nt=nt+Math.imul(gt,bt)|0,q=q+Math.imul(gt,Pt)|0,q=q+Math.imul(mt,bt)|0,Z=Z+Math.imul(mt,Pt)|0,nt=nt+Math.imul(yt,te)|0,q=q+Math.imul(yt,ne)|0,q=q+Math.imul(xt,te)|0,Z=Z+Math.imul(xt,ne)|0,nt=nt+Math.imul(et,Ne)|0,q=q+Math.imul(et,ge)|0,q=q+Math.imul(ct,Ne)|0,Z=Z+Math.imul(ct,ge)|0,nt=nt+Math.imul(H,De)|0,q=q+Math.imul(H,hr)|0,q=q+Math.imul(Y,De)|0,Z=Z+Math.imul(Y,hr)|0,nt=nt+Math.imul(V,Be)|0,q=q+Math.imul(V,He)|0,q=q+Math.imul(rt,Be)|0,Z=Z+Math.imul(rt,He)|0;var sr=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(sr>>>26)|0,sr&=67108863,nt=Math.imul(ae,Ft),q=Math.imul(ae,$t),q=q+Math.imul(oe,Ft)|0,Z=Math.imul(oe,$t),nt=nt+Math.imul(Yt,Nt)|0,q=q+Math.imul(Yt,Mt)|0,q=q+Math.imul(he,Nt)|0,Z=Z+Math.imul(he,Mt)|0,nt=nt+Math.imul(St,Dt)|0,q=q+Math.imul(St,dt)|0,q=q+Math.imul(Bt,Dt)|0,Z=Z+Math.imul(Bt,dt)|0,nt=nt+Math.imul(At,bt)|0,q=q+Math.imul(At,Pt)|0,q=q+Math.imul(Ot,bt)|0,Z=Z+Math.imul(Ot,Pt)|0,nt=nt+Math.imul(gt,te)|0,q=q+Math.imul(gt,ne)|0,q=q+Math.imul(mt,te)|0,Z=Z+Math.imul(mt,ne)|0,nt=nt+Math.imul(yt,Ne)|0,q=q+Math.imul(yt,ge)|0,q=q+Math.imul(xt,Ne)|0,Z=Z+Math.imul(xt,ge)|0,nt=nt+Math.imul(et,De)|0,q=q+Math.imul(et,hr)|0,q=q+Math.imul(ct,De)|0,Z=Z+Math.imul(ct,hr)|0,nt=nt+Math.imul(H,Be)|0,q=q+Math.imul(H,He)|0,q=q+Math.imul(Y,Be)|0,Z=Z+Math.imul(Y,He)|0,nt=nt+Math.imul(V,Ze)|0,q=q+Math.imul(V,Xt)|0,q=q+Math.imul(rt,Ze)|0,Z=Z+Math.imul(rt,Xt)|0;var zt=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(zt>>>26)|0,zt&=67108863,nt=Math.imul(ue,Ft),q=Math.imul(ue,$t),q=q+Math.imul(ye,Ft)|0,Z=Math.imul(ye,$t),nt=nt+Math.imul(ae,Nt)|0,q=q+Math.imul(ae,Mt)|0,q=q+Math.imul(oe,Nt)|0,Z=Z+Math.imul(oe,Mt)|0,nt=nt+Math.imul(Yt,Dt)|0,q=q+Math.imul(Yt,dt)|0,q=q+Math.imul(he,Dt)|0,Z=Z+Math.imul(he,dt)|0,nt=nt+Math.imul(St,bt)|0,q=q+Math.imul(St,Pt)|0,q=q+Math.imul(Bt,bt)|0,Z=Z+Math.imul(Bt,Pt)|0,nt=nt+Math.imul(At,te)|0,q=q+Math.imul(At,ne)|0,q=q+Math.imul(Ot,te)|0,Z=Z+Math.imul(Ot,ne)|0,nt=nt+Math.imul(gt,Ne)|0,q=q+Math.imul(gt,ge)|0,q=q+Math.imul(mt,Ne)|0,Z=Z+Math.imul(mt,ge)|0,nt=nt+Math.imul(yt,De)|0,q=q+Math.imul(yt,hr)|0,q=q+Math.imul(xt,De)|0,Z=Z+Math.imul(xt,hr)|0,nt=nt+Math.imul(et,Be)|0,q=q+Math.imul(et,He)|0,q=q+Math.imul(ct,Be)|0,Z=Z+Math.imul(ct,He)|0,nt=nt+Math.imul(H,Ze)|0,q=q+Math.imul(H,Xt)|0,q=q+Math.imul(Y,Ze)|0,Z=Z+Math.imul(Y,Xt)|0,nt=nt+Math.imul(V,pe)|0,q=q+Math.imul(V,ke)|0,q=q+Math.imul(rt,pe)|0,Z=Z+Math.imul(rt,ke)|0;var Ut=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,nt=Math.imul(ue,Nt),q=Math.imul(ue,Mt),q=q+Math.imul(ye,Nt)|0,Z=Math.imul(ye,Mt),nt=nt+Math.imul(ae,Dt)|0,q=q+Math.imul(ae,dt)|0,q=q+Math.imul(oe,Dt)|0,Z=Z+Math.imul(oe,dt)|0,nt=nt+Math.imul(Yt,bt)|0,q=q+Math.imul(Yt,Pt)|0,q=q+Math.imul(he,bt)|0,Z=Z+Math.imul(he,Pt)|0,nt=nt+Math.imul(St,te)|0,q=q+Math.imul(St,ne)|0,q=q+Math.imul(Bt,te)|0,Z=Z+Math.imul(Bt,ne)|0,nt=nt+Math.imul(At,Ne)|0,q=q+Math.imul(At,ge)|0,q=q+Math.imul(Ot,Ne)|0,Z=Z+Math.imul(Ot,ge)|0,nt=nt+Math.imul(gt,De)|0,q=q+Math.imul(gt,hr)|0,q=q+Math.imul(mt,De)|0,Z=Z+Math.imul(mt,hr)|0,nt=nt+Math.imul(yt,Be)|0,q=q+Math.imul(yt,He)|0,q=q+Math.imul(xt,Be)|0,Z=Z+Math.imul(xt,He)|0,nt=nt+Math.imul(et,Ze)|0,q=q+Math.imul(et,Xt)|0,q=q+Math.imul(ct,Ze)|0,Z=Z+Math.imul(ct,Xt)|0,nt=nt+Math.imul(H,pe)|0,q=q+Math.imul(H,ke)|0,q=q+Math.imul(Y,pe)|0,Z=Z+Math.imul(Y,ke)|0;var Me=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Me>>>26)|0,Me&=67108863,nt=Math.imul(ue,Dt),q=Math.imul(ue,dt),q=q+Math.imul(ye,Dt)|0,Z=Math.imul(ye,dt),nt=nt+Math.imul(ae,bt)|0,q=q+Math.imul(ae,Pt)|0,q=q+Math.imul(oe,bt)|0,Z=Z+Math.imul(oe,Pt)|0,nt=nt+Math.imul(Yt,te)|0,q=q+Math.imul(Yt,ne)|0,q=q+Math.imul(he,te)|0,Z=Z+Math.imul(he,ne)|0,nt=nt+Math.imul(St,Ne)|0,q=q+Math.imul(St,ge)|0,q=q+Math.imul(Bt,Ne)|0,Z=Z+Math.imul(Bt,ge)|0,nt=nt+Math.imul(At,De)|0,q=q+Math.imul(At,hr)|0,q=q+Math.imul(Ot,De)|0,Z=Z+Math.imul(Ot,hr)|0,nt=nt+Math.imul(gt,Be)|0,q=q+Math.imul(gt,He)|0,q=q+Math.imul(mt,Be)|0,Z=Z+Math.imul(mt,He)|0,nt=nt+Math.imul(yt,Ze)|0,q=q+Math.imul(yt,Xt)|0,q=q+Math.imul(xt,Ze)|0,Z=Z+Math.imul(xt,Xt)|0,nt=nt+Math.imul(et,pe)|0,q=q+Math.imul(et,ke)|0,q=q+Math.imul(ct,pe)|0,Z=Z+Math.imul(ct,ke)|0;var Te=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Te>>>26)|0,Te&=67108863,nt=Math.imul(ue,bt),q=Math.imul(ue,Pt),q=q+Math.imul(ye,bt)|0,Z=Math.imul(ye,Pt),nt=nt+Math.imul(ae,te)|0,q=q+Math.imul(ae,ne)|0,q=q+Math.imul(oe,te)|0,Z=Z+Math.imul(oe,ne)|0,nt=nt+Math.imul(Yt,Ne)|0,q=q+Math.imul(Yt,ge)|0,q=q+Math.imul(he,Ne)|0,Z=Z+Math.imul(he,ge)|0,nt=nt+Math.imul(St,De)|0,q=q+Math.imul(St,hr)|0,q=q+Math.imul(Bt,De)|0,Z=Z+Math.imul(Bt,hr)|0,nt=nt+Math.imul(At,Be)|0,q=q+Math.imul(At,He)|0,q=q+Math.imul(Ot,Be)|0,Z=Z+Math.imul(Ot,He)|0,nt=nt+Math.imul(gt,Ze)|0,q=q+Math.imul(gt,Xt)|0,q=q+Math.imul(mt,Ze)|0,Z=Z+Math.imul(mt,Xt)|0,nt=nt+Math.imul(yt,pe)|0,q=q+Math.imul(yt,ke)|0,q=q+Math.imul(xt,pe)|0,Z=Z+Math.imul(xt,ke)|0;var qe=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(qe>>>26)|0,qe&=67108863,nt=Math.imul(ue,te),q=Math.imul(ue,ne),q=q+Math.imul(ye,te)|0,Z=Math.imul(ye,ne),nt=nt+Math.imul(ae,Ne)|0,q=q+Math.imul(ae,ge)|0,q=q+Math.imul(oe,Ne)|0,Z=Z+Math.imul(oe,ge)|0,nt=nt+Math.imul(Yt,De)|0,q=q+Math.imul(Yt,hr)|0,q=q+Math.imul(he,De)|0,Z=Z+Math.imul(he,hr)|0,nt=nt+Math.imul(St,Be)|0,q=q+Math.imul(St,He)|0,q=q+Math.imul(Bt,Be)|0,Z=Z+Math.imul(Bt,He)|0,nt=nt+Math.imul(At,Ze)|0,q=q+Math.imul(At,Xt)|0,q=q+Math.imul(Ot,Ze)|0,Z=Z+Math.imul(Ot,Xt)|0,nt=nt+Math.imul(gt,pe)|0,q=q+Math.imul(gt,ke)|0,q=q+Math.imul(mt,pe)|0,Z=Z+Math.imul(mt,ke)|0;var Qe=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,nt=Math.imul(ue,Ne),q=Math.imul(ue,ge),q=q+Math.imul(ye,Ne)|0,Z=Math.imul(ye,ge),nt=nt+Math.imul(ae,De)|0,q=q+Math.imul(ae,hr)|0,q=q+Math.imul(oe,De)|0,Z=Z+Math.imul(oe,hr)|0,nt=nt+Math.imul(Yt,Be)|0,q=q+Math.imul(Yt,He)|0,q=q+Math.imul(he,Be)|0,Z=Z+Math.imul(he,He)|0,nt=nt+Math.imul(St,Ze)|0,q=q+Math.imul(St,Xt)|0,q=q+Math.imul(Bt,Ze)|0,Z=Z+Math.imul(Bt,Xt)|0,nt=nt+Math.imul(At,pe)|0,q=q+Math.imul(At,ke)|0,q=q+Math.imul(Ot,pe)|0,Z=Z+Math.imul(Ot,ke)|0;var Je=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Je>>>26)|0,Je&=67108863,nt=Math.imul(ue,De),q=Math.imul(ue,hr),q=q+Math.imul(ye,De)|0,Z=Math.imul(ye,hr),nt=nt+Math.imul(ae,Be)|0,q=q+Math.imul(ae,He)|0,q=q+Math.imul(oe,Be)|0,Z=Z+Math.imul(oe,He)|0,nt=nt+Math.imul(Yt,Ze)|0,q=q+Math.imul(Yt,Xt)|0,q=q+Math.imul(he,Ze)|0,Z=Z+Math.imul(he,Xt)|0,nt=nt+Math.imul(St,pe)|0,q=q+Math.imul(St,ke)|0,q=q+Math.imul(Bt,pe)|0,Z=Z+Math.imul(Bt,ke)|0;var We=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(We>>>26)|0,We&=67108863,nt=Math.imul(ue,Be),q=Math.imul(ue,He),q=q+Math.imul(ye,Be)|0,Z=Math.imul(ye,He),nt=nt+Math.imul(ae,Ze)|0,q=q+Math.imul(ae,Xt)|0,q=q+Math.imul(oe,Ze)|0,Z=Z+Math.imul(oe,Xt)|0,nt=nt+Math.imul(Yt,pe)|0,q=q+Math.imul(Yt,ke)|0,q=q+Math.imul(he,pe)|0,Z=Z+Math.imul(he,ke)|0;var Oe=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,nt=Math.imul(ue,Ze),q=Math.imul(ue,Xt),q=q+Math.imul(ye,Ze)|0,Z=Math.imul(ye,Xt),nt=nt+Math.imul(ae,pe)|0,q=q+Math.imul(ae,ke)|0,q=q+Math.imul(oe,pe)|0,Z=Z+Math.imul(oe,ke)|0;var rr=(it+nt|0)+((q&8191)<<13)|0;it=(Z+(q>>>13)|0)+(rr>>>26)|0,rr&=67108863,nt=Math.imul(ue,pe),q=Math.imul(ue,ke),q=q+Math.imul(ye,pe)|0,Z=Math.imul(ye,ke);var cr=(it+nt|0)+((q&8191)<<13)|0;return it=(Z+(q>>>13)|0)+(cr>>>26)|0,cr&=67108863,J[0]=Ce,J[1]=Fe,J[2]=Re,J[3]=be,J[4]=Ge,J[5]=Ke,J[6]=or,J[7]=sr,J[8]=zt,J[9]=Ut,J[10]=Me,J[11]=Te,J[12]=qe,J[13]=Qe,J[14]=Je,J[15]=We,J[16]=Oe,J[17]=rr,J[18]=cr,it!==0&&(J[19]=it,N.length++),N};Math.imul||(y=k);function A(R,B,N){N.negative=B.negative^R.negative,N.length=R.length+B.length;for(var G=0,X=0,J=0;J<N.length-1;J++){var it=X;X=0;for(var nt=G&67108863,q=Math.min(J,B.length-1),Z=Math.max(0,J-R.length+1);Z<=q;Z++){var $=J-Z,V=R.words[$]|0,rt=B.words[Z]|0,ot=V*rt,H=ot&67108863;it=it+(ot/67108864|0)|0,H=H+nt|0,nt=H&67108863,it=it+(H>>>26)|0,X+=it>>>26,it&=67108863}N.words[J]=nt,G=it,it=X}return G!==0?N.words[J]=G:N.length--,N.strip()}function L(R,B,N){var G=new u;return G.mulp(R,B,N)}o.prototype.mulTo=function(R,B){var N,G=this.length+R.length;return this.length===10&&R.length===10?N=y(this,R,B):G<63?N=k(this,R,B):G<1024?N=A(this,R,B):N=L(this,R,B),N};function u(R,B){this.x=R,this.y=B}u.prototype.makeRBT=function(R){for(var B=new Array(R),N=o.prototype._countBits(R)-1,G=0;G<R;G++)B[G]=this.revBin(G,N,R);return B},u.prototype.revBin=function(R,B,N){if(R===0||R===N-1)return R;for(var G=0,X=0;X<B;X++)G|=(R&1)<<B-X-1,R>>=1;return G},u.prototype.permute=function(R,B,N,G,X,J){for(var it=0;it<J;it++)G[it]=B[R[it]],X[it]=N[R[it]]},u.prototype.transform=function(R,B,N,G,X,J){this.permute(J,R,B,N,G,X);for(var it=1;it<X;it<<=1)for(var nt=it<<1,q=Math.cos(2*Math.PI/nt),Z=Math.sin(2*Math.PI/nt),$=0;$<X;$+=nt)for(var V=q,rt=Z,ot=0;ot<it;ot++){var H=N[$+ot],Y=G[$+ot],at=N[$+ot+it],et=G[$+ot+it],ct=V*at-rt*et;et=V*et+rt*at,at=ct,N[$+ot]=H+at,G[$+ot]=Y+et,N[$+ot+it]=H-at,G[$+ot+it]=Y-et,ot!==nt&&(ct=q*V-Z*rt,rt=q*rt+Z*V,V=ct)}},u.prototype.guessLen13b=function(R,B){var N=Math.max(B,R)|1,G=N&1,X=0;for(N=N/2|0;N;N=N>>>1)X++;return 1<<X+1+G},u.prototype.conjugate=function(R,B,N){if(!(N<=1))for(var G=0;G<N/2;G++){var X=R[G];R[G]=R[N-G-1],R[N-G-1]=X,X=B[G],B[G]=-B[N-G-1],B[N-G-1]=-X}},u.prototype.normalize13b=function(R,B){for(var N=0,G=0;G<B/2;G++){var X=Math.round(R[2*G+1]/B)*8192+Math.round(R[2*G]/B)+N;R[G]=X&67108863,X<67108864?N=0:N=X/67108864|0}return R},u.prototype.convert13b=function(R,B,N,G){for(var X=0,J=0;J<B;J++)X=X+(R[J]|0),N[2*J]=X&8191,X=X>>>13,N[2*J+1]=X&8191,X=X>>>13;for(J=2*B;J<G;++J)N[J]=0;n(X===0),n((X&-8192)===0)},u.prototype.stub=function(R){for(var B=new Array(R),N=0;N<R;N++)B[N]=0;return B},u.prototype.mulp=function(R,B,N){var G=2*this.guessLen13b(R.length,B.length),X=this.makeRBT(G),J=this.stub(G),it=new Array(G),nt=new Array(G),q=new Array(G),Z=new Array(G),$=new Array(G),V=new Array(G),rt=N.words;rt.length=G,this.convert13b(R.words,R.length,it,G),this.convert13b(B.words,B.length,Z,G),this.transform(it,J,nt,q,G,X),this.transform(Z,J,$,V,G,X);for(var ot=0;ot<G;ot++){var H=nt[ot]*$[ot]-q[ot]*V[ot];q[ot]=nt[ot]*V[ot]+q[ot]*$[ot],nt[ot]=H}return this.conjugate(nt,q,G),this.transform(nt,q,rt,J,G,X),this.conjugate(rt,J,G),this.normalize13b(rt,G),N.negative=R.negative^B.negative,N.length=R.length+B.length,N.strip()},o.prototype.mul=function(R){var B=new o(null);return B.words=new Array(this.length+R.length),this.mulTo(R,B)},o.prototype.mulf=function(R){var B=new o(null);return B.words=new Array(this.length+R.length),L(this,R,B)},o.prototype.imul=function(R){return this.clone().mulTo(R,this)},o.prototype.imuln=function(R){n(typeof R=="number"),n(R<67108864);for(var B=0,N=0;N<this.length;N++){var G=(this.words[N]|0)*R,X=(G&67108863)+(B&67108863);B>>=26,B+=G/67108864|0,B+=X>>>26,this.words[N]=X&67108863}return B!==0&&(this.words[N]=B,this.length++),this},o.prototype.muln=function(R){return this.clone().imuln(R)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(R){var B=x(R);if(B.length===0)return new o(1);for(var N=this,G=0;G<B.length&&B[G]===0;G++,N=N.sqr());if(++G<B.length)for(var X=N.sqr();G<B.length;G++,X=X.sqr())B[G]!==0&&(N=N.mul(X));return N},o.prototype.iushln=function(R){n(typeof R=="number"&&R>=0);var B=R%26,N=(R-B)/26,G=67108863>>>26-B<<26-B,X;if(B!==0){var J=0;for(X=0;X<this.length;X++){var it=this.words[X]&G,nt=(this.words[X]|0)-it<<B;this.words[X]=nt|J,J=it>>>26-B}J&&(this.words[X]=J,this.length++)}if(N!==0){for(X=this.length-1;X>=0;X--)this.words[X+N]=this.words[X];for(X=0;X<N;X++)this.words[X]=0;this.length+=N}return this.strip()},o.prototype.ishln=function(R){return n(this.negative===0),this.iushln(R)},o.prototype.iushrn=function(R,B,N){n(typeof R=="number"&&R>=0);var G;B?G=(B-B%26)/26:G=0;var X=R%26,J=Math.min((R-X)/26,this.length),it=67108863^67108863>>>X<<X,nt=N;if(G-=J,G=Math.max(0,G),nt){for(var q=0;q<J;q++)nt.words[q]=this.words[q];nt.length=J}if(J!==0)if(this.length>J)for(this.length-=J,q=0;q<this.length;q++)this.words[q]=this.words[q+J];else this.words[0]=0,this.length=1;var Z=0;for(q=this.length-1;q>=0&&(Z!==0||q>=G);q--){var $=this.words[q]|0;this.words[q]=Z<<26-X|$>>>X,Z=$&it}return nt&&Z!==0&&(nt.words[nt.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(R,B,N){return n(this.negative===0),this.iushrn(R,B,N)},o.prototype.shln=function(R){return this.clone().ishln(R)},o.prototype.ushln=function(R){return this.clone().iushln(R)},o.prototype.shrn=function(R){return this.clone().ishrn(R)},o.prototype.ushrn=function(R){return this.clone().iushrn(R)},o.prototype.testn=function(R){n(typeof R=="number"&&R>=0);var B=R%26,N=(R-B)/26,G=1<<B;if(this.length<=N)return!1;var X=this.words[N];return!!(X&G)},o.prototype.imaskn=function(R){n(typeof R=="number"&&R>=0);var B=R%26,N=(R-B)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(B!==0&&N++,this.length=Math.min(N,this.length),B!==0){var G=67108863^67108863>>>B<<B;this.words[this.length-1]&=G}return this.strip()},o.prototype.maskn=function(R){return this.clone().imaskn(R)},o.prototype.iaddn=function(R){return n(typeof R=="number"),n(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(this.words[0]|0)<R?(this.words[0]=R-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},o.prototype._iaddn=function(R){this.words[0]+=R;for(var B=0;B<this.length&&this.words[B]>=67108864;B++)this.words[B]-=67108864,B===this.length-1?this.words[B+1]=1:this.words[B+1]++;return this.length=Math.max(this.length,B+1),this},o.prototype.isubn=function(R){if(n(typeof R=="number"),n(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var B=0;B<this.length&&this.words[B]<0;B++)this.words[B]+=67108864,this.words[B+1]-=1;return this.strip()},o.prototype.addn=function(R){return this.clone().iaddn(R)},o.prototype.subn=function(R){return this.clone().isubn(R)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(R,B,N){var G=R.length+N,X;this._expand(G);var J,it=0;for(X=0;X<R.length;X++){J=(this.words[X+N]|0)+it;var nt=(R.words[X]|0)*B;J-=nt&67108863,it=(J>>26)-(nt/67108864|0),this.words[X+N]=J&67108863}for(;X<this.length-N;X++)J=(this.words[X+N]|0)+it,it=J>>26,this.words[X+N]=J&67108863;if(it===0)return this.strip();for(n(it===-1),it=0,X=0;X<this.length;X++)J=-(this.words[X]|0)+it,it=J>>26,this.words[X]=J&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(R,B){var N=this.length-R.length,G=this.clone(),X=R,J=X.words[X.length-1]|0,it=this._countBits(J);N=26-it,N!==0&&(X=X.ushln(N),G.iushln(N),J=X.words[X.length-1]|0);var nt=G.length-X.length,q;if(B!=="mod"){q=new o(null),q.length=nt+1,q.words=new Array(q.length);for(var Z=0;Z<q.length;Z++)q.words[Z]=0}var $=G.clone()._ishlnsubmul(X,1,nt);$.negative===0&&(G=$,q&&(q.words[nt]=1));for(var V=nt-1;V>=0;V--){var rt=(G.words[X.length+V]|0)*67108864+(G.words[X.length+V-1]|0);for(rt=Math.min(rt/J|0,67108863),G._ishlnsubmul(X,rt,V);G.negative!==0;)rt--,G.negative=0,G._ishlnsubmul(X,1,V),G.isZero()||(G.negative^=1);q&&(q.words[V]=rt)}return q&&q.strip(),G.strip(),B!=="div"&&N!==0&&G.iushrn(N),{div:q||null,mod:G}},o.prototype.divmod=function(R,B,N){if(n(!R.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var G,X,J;return this.negative!==0&&R.negative===0?(J=this.neg().divmod(R,B),B!=="mod"&&(G=J.div.neg()),B!=="div"&&(X=J.mod.neg(),N&&X.negative!==0&&X.iadd(R)),{div:G,mod:X}):this.negative===0&&R.negative!==0?(J=this.divmod(R.neg(),B),B!=="mod"&&(G=J.div.neg()),{div:G,mod:J.mod}):this.negative&R.negative?(J=this.neg().divmod(R.neg(),B),B!=="div"&&(X=J.mod.neg(),N&&X.negative!==0&&X.isub(R)),{div:J.div,mod:X}):R.length>this.length||this.cmp(R)<0?{div:new o(0),mod:this}:R.length===1?B==="div"?{div:this.divn(R.words[0]),mod:null}:B==="mod"?{div:null,mod:new o(this.modn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new o(this.modn(R.words[0]))}:this._wordDiv(R,B)},o.prototype.div=function(R){return this.divmod(R,"div",!1).div},o.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},o.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},o.prototype.divRound=function(R){var B=this.divmod(R);if(B.mod.isZero())return B.div;var N=B.div.negative!==0?B.mod.isub(R):B.mod,G=R.ushrn(1),X=R.andln(1),J=N.cmp(G);return J<0||X===1&&J===0?B.div:B.div.negative!==0?B.div.isubn(1):B.div.iaddn(1)},o.prototype.modn=function(R){n(R<=67108863);for(var B=67108864%R,N=0,G=this.length-1;G>=0;G--)N=(B*N+(this.words[G]|0))%R;return N},o.prototype.idivn=function(R){n(R<=67108863);for(var B=0,N=this.length-1;N>=0;N--){var G=(this.words[N]|0)+B*67108864;this.words[N]=G/R|0,B=G%R}return this.strip()},o.prototype.divn=function(R){return this.clone().idivn(R)},o.prototype.egcd=function(R){n(R.negative===0),n(!R.isZero());var B=this,N=R.clone();B.negative!==0?B=B.umod(R):B=B.clone();for(var G=new o(1),X=new o(0),J=new o(0),it=new o(1),nt=0;B.isEven()&&N.isEven();)B.iushrn(1),N.iushrn(1),++nt;for(var q=N.clone(),Z=B.clone();!B.isZero();){for(var $=0,V=1;!(B.words[0]&V)&&$<26;++$,V<<=1);if($>0)for(B.iushrn($);$-- >0;)(G.isOdd()||X.isOdd())&&(G.iadd(q),X.isub(Z)),G.iushrn(1),X.iushrn(1);for(var rt=0,ot=1;!(N.words[0]&ot)&&rt<26;++rt,ot<<=1);if(rt>0)for(N.iushrn(rt);rt-- >0;)(J.isOdd()||it.isOdd())&&(J.iadd(q),it.isub(Z)),J.iushrn(1),it.iushrn(1);B.cmp(N)>=0?(B.isub(N),G.isub(J),X.isub(it)):(N.isub(B),J.isub(G),it.isub(X))}return{a:J,b:it,gcd:N.iushln(nt)}},o.prototype._invmp=function(R){n(R.negative===0),n(!R.isZero());var B=this,N=R.clone();B.negative!==0?B=B.umod(R):B=B.clone();for(var G=new o(1),X=new o(0),J=N.clone();B.cmpn(1)>0&&N.cmpn(1)>0;){for(var it=0,nt=1;!(B.words[0]&nt)&&it<26;++it,nt<<=1);if(it>0)for(B.iushrn(it);it-- >0;)G.isOdd()&&G.iadd(J),G.iushrn(1);for(var q=0,Z=1;!(N.words[0]&Z)&&q<26;++q,Z<<=1);if(q>0)for(N.iushrn(q);q-- >0;)X.isOdd()&&X.iadd(J),X.iushrn(1);B.cmp(N)>=0?(B.isub(N),G.isub(X)):(N.isub(B),X.isub(G))}var $;return B.cmpn(1)===0?$=G:$=X,$.cmpn(0)<0&&$.iadd(R),$},o.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var B=this.clone(),N=R.clone();B.negative=0,N.negative=0;for(var G=0;B.isEven()&&N.isEven();G++)B.iushrn(1),N.iushrn(1);do{for(;B.isEven();)B.iushrn(1);for(;N.isEven();)N.iushrn(1);var X=B.cmp(N);if(X<0){var J=B;B=N,N=J}else if(X===0||N.cmpn(1)===0)break;B.isub(N)}while(!0);return N.iushln(G)},o.prototype.invm=function(R){return this.egcd(R).a.umod(R)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(R){return this.words[0]&R},o.prototype.bincn=function(R){n(typeof R=="number");var B=R%26,N=(R-B)/26,G=1<<B;if(this.length<=N)return this._expand(N+1),this.words[N]|=G,this;for(var X=G,J=N;X!==0&&J<this.length;J++){var it=this.words[J]|0;it+=X,X=it>>>26,it&=67108863,this.words[J]=it}return X!==0&&(this.words[J]=X,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(R){var B=R<0;if(this.negative!==0&&!B)return-1;if(this.negative===0&&B)return 1;this.strip();var N;if(this.length>1)N=1;else{B&&(R=-R),n(R<=67108863,"Number is too big");var G=this.words[0]|0;N=G===R?0:G<R?-1:1}return this.negative!==0?-N|0:N},o.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var B=this.ucmp(R);return this.negative!==0?-B|0:B},o.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var B=0,N=this.length-1;N>=0;N--){var G=this.words[N]|0,X=R.words[N]|0;if(G!==X){G<X?B=-1:G>X&&(B=1);break}}return B},o.prototype.gtn=function(R){return this.cmpn(R)===1},o.prototype.gt=function(R){return this.cmp(R)===1},o.prototype.gten=function(R){return this.cmpn(R)>=0},o.prototype.gte=function(R){return this.cmp(R)>=0},o.prototype.ltn=function(R){return this.cmpn(R)===-1},o.prototype.lt=function(R){return this.cmp(R)===-1},o.prototype.lten=function(R){return this.cmpn(R)<=0},o.prototype.lte=function(R){return this.cmp(R)<=0},o.prototype.eqn=function(R){return this.cmpn(R)===0},o.prototype.eq=function(R){return this.cmp(R)===0},o.red=function(R){return new P(R)},o.prototype.toRed=function(R){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(R){return this.red=R,this},o.prototype.forceRed=function(R){return n(!this.red,"Already a number in reduction context"),this._forceRed(R)},o.prototype.redAdd=function(R){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},o.prototype.redIAdd=function(R){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},o.prototype.redSub=function(R){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},o.prototype.redISub=function(R){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},o.prototype.redShl=function(R){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},o.prototype.redMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},o.prototype.redIMul=function(R){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(R){return n(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var m={k256:null,p224:null,p192:null,p25519:null};function S(R,B){this.name=R,this.p=new o(B,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}S.prototype._tmp=function(){var R=new o(null);return R.words=new Array(Math.ceil(this.n/13)),R},S.prototype.ireduce=function(R){var B=R,N;do this.split(B,this.tmp),B=this.imulK(B),B=B.iadd(this.tmp),N=B.bitLength();while(N>this.n);var G=N<this.n?-1:B.ucmp(this.p);return G===0?(B.words[0]=0,B.length=1):G>0?B.isub(this.p):B.strip!==void 0?B.strip():B._strip(),B},S.prototype.split=function(R,B){R.iushrn(this.n,0,B)},S.prototype.imulK=function(R){return R.imul(this.k)};function w(){S.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(w,S),w.prototype.split=function(R,B){for(var N=4194303,G=Math.min(R.length,9),X=0;X<G;X++)B.words[X]=R.words[X];if(B.length=G,R.length<=9){R.words[0]=0,R.length=1;return}var J=R.words[9];for(B.words[B.length++]=J&N,X=10;X<R.length;X++){var it=R.words[X]|0;R.words[X-10]=(it&N)<<4|J>>>22,J=it}J>>>=22,R.words[X-10]=J,J===0&&R.length>10?R.length-=10:R.length-=9},w.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var B=0,N=0;N<R.length;N++){var G=R.words[N]|0;B+=G*977,R.words[N]=B&67108863,B=G*64+(B/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R};function I(){S.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(I,S);function O(){S.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(O,S);function D(){S.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(D,S),D.prototype.imulK=function(R){for(var B=0,N=0;N<R.length;N++){var G=(R.words[N]|0)*19+B,X=G&67108863;G>>>=26,R.words[N]=X,B=G}return B!==0&&(R.words[R.length++]=B),R},o._prime=function(R){if(m[R])return m[R];var B;if(R==="k256")B=new w;else if(R==="p224")B=new I;else if(R==="p192")B=new O;else if(R==="p25519")B=new D;else throw new Error("Unknown prime "+R);return m[R]=B,B};function P(R){if(typeof R=="string"){var B=o._prime(R);this.m=B.p,this.prime=B}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}P.prototype._verify1=function(R){n(R.negative===0,"red works only with positives"),n(R.red,"red works only with red numbers")},P.prototype._verify2=function(R,B){n((R.negative|B.negative)===0,"red works only with positives"),n(R.red&&R.red===B.red,"red works only with red numbers")},P.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):R.umod(this.m)._forceRed(this)},P.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},P.prototype.add=function(R,B){this._verify2(R,B);var N=R.add(B);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},P.prototype.iadd=function(R,B){this._verify2(R,B);var N=R.iadd(B);return N.cmp(this.m)>=0&&N.isub(this.m),N},P.prototype.sub=function(R,B){this._verify2(R,B);var N=R.sub(B);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},P.prototype.isub=function(R,B){this._verify2(R,B);var N=R.isub(B);return N.cmpn(0)<0&&N.iadd(this.m),N},P.prototype.shl=function(R,B){return this._verify1(R),this.imod(R.ushln(B))},P.prototype.imul=function(R,B){return this._verify2(R,B),this.imod(R.imul(B))},P.prototype.mul=function(R,B){return this._verify2(R,B),this.imod(R.mul(B))},P.prototype.isqr=function(R){return this.imul(R,R.clone())},P.prototype.sqr=function(R){return this.mul(R,R)},P.prototype.sqrt=function(R){if(R.isZero())return R.clone();var B=this.m.andln(3);if(n(B%2===1),B===3){var N=this.m.add(new o(1)).iushrn(2);return this.pow(R,N)}for(var G=this.m.subn(1),X=0;!G.isZero()&&G.andln(1)===0;)X++,G.iushrn(1);n(!G.isZero());var J=new o(1).toRed(this),it=J.redNeg(),nt=this.m.subn(1).iushrn(1),q=this.m.bitLength();for(q=new o(2*q*q).toRed(this);this.pow(q,nt).cmp(it)!==0;)q.redIAdd(it);for(var Z=this.pow(q,G),$=this.pow(R,G.addn(1).iushrn(1)),V=this.pow(R,G),rt=X;V.cmp(J)!==0;){for(var ot=V,H=0;ot.cmp(J)!==0;H++)ot=ot.redSqr();n(H<rt);var Y=this.pow(Z,new o(1).iushln(rt-H-1));$=$.redMul(Y),Z=Y.redSqr(),V=V.redMul(Z),rt=H}return $},P.prototype.invm=function(R){var B=R._invmp(this.m);return B.negative!==0?(B.negative=0,this.imod(B).redNeg()):this.imod(B)},P.prototype.pow=function(R,B){if(B.isZero())return new o(1).toRed(this);if(B.cmpn(1)===0)return R.clone();var N=4,G=new Array(1<<N);G[0]=new o(1).toRed(this),G[1]=R;for(var X=2;X<G.length;X++)G[X]=this.mul(G[X-1],R);var J=G[0],it=0,nt=0,q=B.bitLength()%26;for(q===0&&(q=26),X=B.length-1;X>=0;X--){for(var Z=B.words[X],$=q-1;$>=0;$--){var V=Z>>$&1;if(J!==G[0]&&(J=this.sqr(J)),V===0&&it===0){nt=0;continue}it<<=1,it|=V,nt++,!(nt!==N&&(X!==0||$!==0))&&(J=this.mul(J,G[it]),nt=0,it=0)}q=26}return J},P.prototype.convertTo=function(R){var B=R.umod(this.m);return B===R?B.clone():B},P.prototype.convertFrom=function(R){var B=R.clone();return B.red=null,B},o.mont=function(R){return new F(R)};function F(R){P.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(F,P),F.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},F.prototype.convertFrom=function(R){var B=this.imod(R.mul(this.rinv));return B.red=null,B},F.prototype.imul=function(R,B){if(R.isZero()||B.isZero())return R.words[0]=0,R.length=1,R;var N=R.imul(B),G=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=N.isub(G).iushrn(this.shift),J=X;return X.cmp(this.m)>=0?J=X.isub(this.m):X.cmpn(0)<0&&(J=X.iadd(this.m)),J._forceRed(this)},F.prototype.mul=function(R,B){if(R.isZero()||B.isZero())return new o(0)._forceRed(this);var N=R.mul(B),G=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=N.isub(G).iushrn(this.shift),J=X;return X.cmp(this.m)>=0?J=X.isub(this.m):X.cmpn(0)<0&&(J=X.iadd(this.m)),J._forceRed(this)},F.prototype.invm=function(R){var B=this.imod(R._invmp(this.m).mul(this.r2));return B._forceRed(this)}}(v,this)},6204:function(v){v.exports=d;function d(r){var e,l,n,s=r.length,o=0;for(e=0;e<s;++e)o+=r[e].length;var p=new Array(o),b=0;for(e=0;e<s;++e){var h=r[e],_=h.length;for(l=0;l<_;++l){var a=p[b++]=new Array(_-1),c=0;for(n=0;n<_;++n)n!==l&&(a[c++]=h[n]);if(l&1){var f=a[1];a[1]=a[0],a[0]=f}}}return p}},6867:function(v,d,r){v.exports=c;var e=r(1888),l=r(855),n=r(7150);function s(f,x){for(var k=0;k<f;++k)if(!(x[k]<=x[k+f]))return!0;return!1}function o(f,x,k,y){for(var A=0,L=0,u=0,m=f.length;u<m;++u){var S=f[u];if(!s(x,S)){for(var w=0;w<2*x;++w)k[A++]=S[w];y[L++]=u}}return L}function p(f,x,k,y){var A=f.length,L=x.length;if(!(A<=0||L<=0)){var u=f[0].length>>>1;if(!(u<=0)){var m,S=e.mallocDouble(2*u*A),w=e.mallocInt32(A);if(A=o(f,u,S,w),A>0){if(u===1&&y)l.init(A),m=l.sweepComplete(u,k,0,A,S,w,0,A,S,w);else{var I=e.mallocDouble(2*u*L),O=e.mallocInt32(L);L=o(x,u,I,O),L>0&&(l.init(A+L),u===1?m=l.sweepBipartite(u,k,0,A,S,w,0,L,I,O):m=n(u,k,y,A,S,w,L,I,O),e.free(I),e.free(O))}e.free(S),e.free(w)}return m}}}var b;function h(f,x){b.push([f,x])}function _(f){return b=[],p(f,f,h,!0),b}function a(f,x){return b=[],p(f,x,h,!1),b}function c(f,x,k){switch(arguments.length){case 1:return _(f);case 2:return typeof x=="function"?p(f,f,x,!0):a(f,x);case 3:return p(f,x,k,!1);default:throw new Error("box-intersect: Invalid arguments")}}},2455:function(v,d){function r(){function n(p,b,h,_,a,c,f,x,k,y,A){for(var L=2*p,u=_,m=L*_;u<a;++u,m+=L){var S=c[b+m],w=c[b+m+p],I=f[u];t:for(var O=x,D=L*x;O<k;++O,D+=L){var P=y[b+D],F=y[b+D+p],R=A[O];if(!(F<S||w<P)){for(var B=b+1;B<p;++B){var N=c[B+m],G=c[B+p+m],X=y[B+D],J=y[B+p+D];if(G<X||J<N)continue t}var it=h(I,R);if(it!==void 0)return it}}}}function s(p,b,h,_,a,c,f,x,k,y,A){for(var L=2*p,u=x,m=L*x;u<k;++u,m+=L){var S=y[b+m],w=y[b+m+p],I=A[u];t:for(var O=_,D=L*_;O<a;++O,D+=L){var P=c[b+D],F=c[b+D+p],R=f[O];if(!(w<P||F<S)){for(var B=b+1;B<p;++B){var N=c[B+D],G=c[B+p+D],X=y[B+m],J=y[B+p+m];if(G<X||J<N)continue t}var it=h(R,I);if(it!==void 0)return it}}}}function o(p,b,h,_,a,c,f,x,k,y,A){return a-_>k-x?n(p,b,h,_,a,c,f,x,k,y,A):s(p,b,h,_,a,c,f,x,k,y,A)}return o}function e(){function n(h,_,a,c,f,x,k,y,A,L,u){for(var m=2*h,S=c,w=m*c;S<f;++S,w+=m){var I=x[_+w],O=x[_+w+h],D=k[S];t:for(var P=y,F=m*y;P<A;++P,F+=m){var R=L[_+F],B=u[P];if(!(R<=I||O<R)){for(var N=_+1;N<h;++N){var G=x[N+w],X=x[N+h+w],J=L[N+F],it=L[N+h+F];if(X<J||it<G)continue t}var nt=a(B,D);if(nt!==void 0)return nt}}}}function s(h,_,a,c,f,x,k,y,A,L,u){for(var m=2*h,S=c,w=m*c;S<f;++S,w+=m){var I=x[_+w],O=x[_+w+h],D=k[S];t:for(var P=y,F=m*y;P<A;++P,F+=m){var R=L[_+F],B=u[P];if(!(R<I||O<R)){for(var N=_+1;N<h;++N){var G=x[N+w],X=x[N+h+w],J=L[N+F],it=L[N+h+F];if(X<J||it<G)continue t}var nt=a(D,B);if(nt!==void 0)return nt}}}}function o(h,_,a,c,f,x,k,y,A,L,u){for(var m=2*h,S=y,w=m*y;S<A;++S,w+=m){var I=L[_+w],O=u[S];t:for(var D=c,P=m*c;D<f;++D,P+=m){var F=x[_+P],R=x[_+P+h],B=k[D];if(!(I<=F||R<I)){for(var N=_+1;N<h;++N){var G=x[N+P],X=x[N+h+P],J=L[N+w],it=L[N+h+w];if(X<J||it<G)continue t}var nt=a(O,B);if(nt!==void 0)return nt}}}}function p(h,_,a,c,f,x,k,y,A,L,u){for(var m=2*h,S=y,w=m*y;S<A;++S,w+=m){var I=L[_+w],O=u[S];t:for(var D=c,P=m*c;D<f;++D,P+=m){var F=x[_+P],R=x[_+P+h],B=k[D];if(!(I<F||R<I)){for(var N=_+1;N<h;++N){var G=x[N+P],X=x[N+h+P],J=L[N+w],it=L[N+h+w];if(X<J||it<G)continue t}var nt=a(B,O);if(nt!==void 0)return nt}}}}function b(h,_,a,c,f,x,k,y,A,L,u,m){return x-f>L-A?c?n(h,_,a,f,x,k,y,A,L,u,m):s(h,_,a,f,x,k,y,A,L,u,m):c?o(h,_,a,f,x,k,y,A,L,u,m):p(h,_,a,f,x,k,y,A,L,u,m)}return b}function l(n){return n?r():e()}d.partial=l(!1),d.full=l(!0)},7150:function(v,d,r){v.exports=R;var e=r(1888),l=r(8828),n=r(2455),s=n.partial,o=n.full,p=r(855),b=r(3545),h=r(8105),_=128,a=1<<22,c=1<<22,f=h("!(lo>=p0)&&!(p1>=hi)"),x=h("lo===p0"),k=h("lo<p0"),y=h("hi<=p0"),A=h("lo<=p0&&p0<=hi"),L=h("lo<p0&&p0<=hi"),u=6,m=2,S=1024,w=e.mallocInt32(S),I=e.mallocDouble(S);function O(B,N){var G=8*l.log2(N+1)*(B+1)|0,X=l.nextPow2(u*G);w.length<X&&(e.free(w),w=e.mallocInt32(X));var J=l.nextPow2(m*G);I.length<J&&(e.free(I),I=e.mallocDouble(J))}function D(B,N,G,X,J,it,nt,q,Z){var $=u*B;w[$]=N,w[$+1]=G,w[$+2]=X,w[$+3]=J,w[$+4]=it,w[$+5]=nt;var V=m*B;I[V]=q,I[V+1]=Z}function P(B,N,G,X,J,it,nt,q,Z,$,V){var rt=2*B,ot=Z*rt,H=$[ot+N];t:for(var Y=J,at=J*rt;Y<it;++Y,at+=rt){var et=nt[at+N],ct=nt[at+N+B];if(!(H<et||ct<H)&&!(X&&H===et)){for(var ft=q[Y],yt=N+1;yt<B;++yt){var et=nt[at+yt],ct=nt[at+yt+B],xt=$[ot+yt],Ct=$[ot+yt+B];if(ct<xt||Ct<et)continue t}var gt;if(X?gt=G(V,ft):gt=G(ft,V),gt!==void 0)return gt}}}function F(B,N,G,X,J,it,nt,q,Z,$){var V=2*B,rt=q*V,ot=Z[rt+N];t:for(var H=X,Y=X*V;H<J;++H,Y+=V){var at=nt[H];if(at!==$){var et=it[Y+N],ct=it[Y+N+B];if(!(ot<et||ct<ot)){for(var ft=N+1;ft<B;++ft){var et=it[Y+ft],ct=it[Y+ft+B],yt=Z[rt+ft],xt=Z[rt+ft+B];if(ct<yt||xt<et)continue t}var Ct=G(at,$);if(Ct!==void 0)return Ct}}}}function R(B,N,G,X,J,it,nt,q,Z){O(B,X+nt);var $=0,V=2*B,rt;for(D($++,0,0,X,0,nt,G?16:0,-1/0,1/0),G||D($++,0,0,nt,0,X,1,-1/0,1/0);$>0;){$-=1;var ot=$*u,H=w[ot],Y=w[ot+1],at=w[ot+2],et=w[ot+3],ct=w[ot+4],ft=w[ot+5],yt=$*m,xt=I[yt],Ct=I[yt+1],gt=ft&1,mt=!!(ft&16),vt=J,At=it,Ot=q,It=Z;if(gt&&(vt=q,At=Z,Ot=J,It=it),!(ft&2&&(at=k(B,H,Y,at,vt,At,Ct),Y>=at))&&!(ft&4&&(Y=y(B,H,Y,at,vt,At,xt),Y>=at))){var St=at-Y,Bt=ct-et;if(mt){if(B*St*(St+Bt)<c){if(rt=p.scanComplete(B,H,N,Y,at,vt,At,et,ct,Ot,It),rt!==void 0)return rt;continue}}else if(B*Math.min(St,Bt)<_){if(rt=s(B,H,N,gt,Y,at,vt,At,et,ct,Ot,It),rt!==void 0)return rt;continue}else if(B*St*Bt<a){if(rt=p.scanBipartite(B,H,N,gt,Y,at,vt,At,et,ct,Ot,It),rt!==void 0)return rt;continue}var re=f(B,H,Y,at,vt,At,xt,Ct);if(Y<re)if(B*(re-Y)<_){if(rt=o(B,H+1,N,Y,re,vt,At,et,ct,Ot,It),rt!==void 0)return rt}else if(H===B-2){if(gt?rt=p.sweepBipartite(B,N,et,ct,Ot,It,Y,re,vt,At):rt=p.sweepBipartite(B,N,Y,re,vt,At,et,ct,Ot,It),rt!==void 0)return rt}else D($++,H+1,Y,re,et,ct,gt,-1/0,1/0),D($++,H+1,et,ct,Y,re,gt^1,-1/0,1/0);if(re<at){var Yt=b(B,H,et,ct,Ot,It),he=Ot[V*Yt+H],Zt=x(B,H,Yt,ct,Ot,It,he);if(Zt<ct&&D($++,H,re,at,Zt,ct,(gt|4)+(mt?16:0),he,Ct),et<Yt&&D($++,H,re,at,et,Yt,(gt|2)+(mt?16:0),xt,he),Yt+1===Zt){if(mt?rt=F(B,H,N,re,at,vt,At,Yt,Ot,It[Yt]):rt=P(B,H,N,gt,re,at,vt,At,Yt,Ot,It[Yt]),rt!==void 0)return rt}else if(Yt<Zt){var ae;if(mt){if(ae=A(B,H,re,at,vt,At,he),re<ae){var oe=x(B,H,re,ae,vt,At,he);if(H===B-2){if(re<oe&&(rt=p.sweepComplete(B,N,re,oe,vt,At,Yt,Zt,Ot,It),rt!==void 0)||oe<ae&&(rt=p.sweepBipartite(B,N,oe,ae,vt,At,Yt,Zt,Ot,It),rt!==void 0))return rt}else re<oe&&D($++,H+1,re,oe,Yt,Zt,16,-1/0,1/0),oe<ae&&(D($++,H+1,oe,ae,Yt,Zt,0,-1/0,1/0),D($++,H+1,Yt,Zt,oe,ae,1,-1/0,1/0))}}else gt?ae=L(B,H,re,at,vt,At,he):ae=A(B,H,re,at,vt,At,he),re<ae&&(H===B-2?gt?rt=p.sweepBipartite(B,N,Yt,Zt,Ot,It,re,ae,vt,At):rt=p.sweepBipartite(B,N,re,ae,vt,At,Yt,Zt,Ot,It):(D($++,H+1,re,ae,Yt,Zt,gt,-1/0,1/0),D($++,H+1,Yt,Zt,re,ae,gt^1,-1/0,1/0)))}}}}}},3545:function(v,d,r){v.exports=o;var e=r(8105),l=e("lo<p0"),n=8;function s(p,b,h,_,a,c){for(var f=2*p,x=f*(h+1)+b,k=h+1;k<_;++k,x+=f)for(var y=a[x],A=k,L=f*(k-1);A>h&&a[L+b]>y;--A,L-=f){for(var u=L,m=L+f,S=0;S<f;++S,++u,++m){var w=a[u];a[u]=a[m],a[m]=w}var I=c[A];c[A]=c[A-1],c[A-1]=I}}function o(p,b,h,_,a,c){if(_<=h+1)return h;for(var f=h,x=_,k=_+h>>>1,y=2*p,A=k,L=a[y*k+b];f<x;){if(x-f<n){s(p,b,f,x,a,c),L=a[y*k+b];break}var u=x-f,m=Math.random()*u+f|0,S=a[y*m+b],w=Math.random()*u+f|0,I=a[y*w+b],O=Math.random()*u+f|0,D=a[y*O+b];S<=I?D>=I?(A=w,L=I):S>=D?(A=m,L=S):(A=O,L=D):I>=D?(A=w,L=I):D>=S?(A=m,L=S):(A=O,L=D);for(var P=y*(x-1),F=y*A,R=0;R<y;++R,++P,++F){var B=a[P];a[P]=a[F],a[F]=B}var N=c[x-1];c[x-1]=c[A],c[A]=N,A=l(p,b,f,x-1,a,c,L);for(var P=y*(x-1),F=y*A,R=0;R<y;++R,++P,++F){var B=a[P];a[P]=a[F],a[F]=B}var N=c[x-1];if(c[x-1]=c[A],c[A]=N,k<A){for(x=A-1;f<x&&a[y*(x-1)+b]===L;)x-=1;x+=1}else if(A<k)for(f=A+1;f<x&&a[y*f+b]===L;)f+=1;else break}return l(p,b,h,k,a,c,a[y*k+b])}},8105:function(v){v.exports=r;var d={"lo===p0":e,"lo<p0":l,"lo<=p0":n,"hi<=p0":s,"lo<p0&&p0<=hi":p,"lo<=p0&&p0<=hi":o,"!(lo>=p0)&&!(p1>=hi)":b};function r(h){return d[h]}function e(h,_,a,c,f,x,k){for(var y=2*h,A=y*a,L=A,u=a,m=_,S=h+_,w=a;c>w;++w,A+=y){var I=f[A+m];if(I===k)if(u===w)u+=1,L+=y;else{for(var O=0;y>O;++O){var D=f[A+O];f[A+O]=f[L],f[L++]=D}var P=x[w];x[w]=x[u],x[u++]=P}}return u}function l(h,_,a,c,f,x,k){for(var y=2*h,A=y*a,L=A,u=a,m=_,S=h+_,w=a;c>w;++w,A+=y){var I=f[A+m];if(I<k)if(u===w)u+=1,L+=y;else{for(var O=0;y>O;++O){var D=f[A+O];f[A+O]=f[L],f[L++]=D}var P=x[w];x[w]=x[u],x[u++]=P}}return u}function n(h,_,a,c,f,x,k){for(var y=2*h,A=y*a,L=A,u=a,m=_,S=h+_,w=a;c>w;++w,A+=y){var I=f[A+S];if(I<=k)if(u===w)u+=1,L+=y;else{for(var O=0;y>O;++O){var D=f[A+O];f[A+O]=f[L],f[L++]=D}var P=x[w];x[w]=x[u],x[u++]=P}}return u}function s(h,_,a,c,f,x,k){for(var y=2*h,A=y*a,L=A,u=a,m=_,S=h+_,w=a;c>w;++w,A+=y){var I=f[A+S];if(I<=k)if(u===w)u+=1,L+=y;else{for(var O=0;y>O;++O){var D=f[A+O];f[A+O]=f[L],f[L++]=D}var P=x[w];x[w]=x[u],x[u++]=P}}return u}function o(h,_,a,c,f,x,k){for(var y=2*h,A=y*a,L=A,u=a,m=_,S=h+_,w=a;c>w;++w,A+=y){var I=f[A+m],O=f[A+S];if(I<=k&&k<=O)if(u===w)u+=1,L+=y;else{for(var D=0;y>D;++D){var P=f[A+D];f[A+D]=f[L],f[L++]=P}var F=x[w];x[w]=x[u],x[u++]=F}}return u}function p(h,_,a,c,f,x,k){for(var y=2*h,A=y*a,L=A,u=a,m=_,S=h+_,w=a;c>w;++w,A+=y){var I=f[A+m],O=f[A+S];if(I<k&&k<=O)if(u===w)u+=1,L+=y;else{for(var D=0;y>D;++D){var P=f[A+D];f[A+D]=f[L],f[L++]=P}var F=x[w];x[w]=x[u],x[u++]=F}}return u}function b(h,_,a,c,f,x,k,y){for(var A=2*h,L=A*a,u=L,m=a,S=_,w=h+_,I=a;c>I;++I,L+=A){var O=f[L+S],D=f[L+w];if(!(O>=k)&&!(y>=D))if(m===I)m+=1,u+=A;else{for(var P=0;A>P;++P){var F=f[L+P];f[L+P]=f[u],f[u++]=F}var R=x[I];x[I]=x[m],x[m++]=R}}return m}},1811:function(v){v.exports=r;var d=32;function r(_,a){a<=4*d?e(0,a-1,_):h(0,a-1,_)}function e(_,a,c){for(var f=2*(_+1),x=_+1;x<=a;++x){for(var k=c[f++],y=c[f++],A=x,L=f-2;A-- >_;){var u=c[L-2],m=c[L-1];if(u<k||u===k&&m<y)break;c[L]=u,c[L+1]=m,L-=2}c[L]=k,c[L+1]=y}}function l(_,a,c){_*=2,a*=2;var f=c[_],x=c[_+1];c[_]=c[a],c[_+1]=c[a+1],c[a]=f,c[a+1]=x}function n(_,a,c){_*=2,a*=2,c[_]=c[a],c[_+1]=c[a+1]}function s(_,a,c,f){_*=2,a*=2,c*=2;var x=f[_],k=f[_+1];f[_]=f[a],f[_+1]=f[a+1],f[a]=f[c],f[a+1]=f[c+1],f[c]=x,f[c+1]=k}function o(_,a,c,f,x){_*=2,a*=2,x[_]=x[a],x[a]=c,x[_+1]=x[a+1],x[a+1]=f}function p(_,a,c){_*=2,a*=2;var f=c[_],x=c[a];return f<x?!1:f===x?c[_+1]>c[a+1]:!0}function b(_,a,c,f){_*=2;var x=f[_];return x<a?!0:x===a?f[_+1]<c:!1}function h(_,a,c){var f=(a-_+1)/6|0,x=_+f,k=a-f,y=_+a>>1,A=y-f,L=y+f,u=x,m=A,S=y,w=L,I=k,O=_+1,D=a-1,P=0;p(u,m,c)&&(P=u,u=m,m=P),p(w,I,c)&&(P=w,w=I,I=P),p(u,S,c)&&(P=u,u=S,S=P),p(m,S,c)&&(P=m,m=S,S=P),p(u,w,c)&&(P=u,u=w,w=P),p(S,w,c)&&(P=S,S=w,w=P),p(m,I,c)&&(P=m,m=I,I=P),p(m,S,c)&&(P=m,m=S,S=P),p(w,I,c)&&(P=w,w=I,I=P);for(var F=c[2*m],R=c[2*m+1],B=c[2*w],N=c[2*w+1],G=2*u,X=2*S,J=2*I,it=2*x,nt=2*y,q=2*k,Z=0;Z<2;++Z){var $=c[G+Z],V=c[X+Z],rt=c[J+Z];c[it+Z]=$,c[nt+Z]=V,c[q+Z]=rt}n(A,_,c),n(L,a,c);for(var ot=O;ot<=D;++ot)if(b(ot,F,R,c))ot!==O&&l(ot,O,c),++O;else if(!b(ot,B,N,c))for(;;)if(b(D,B,N,c)){b(D,F,R,c)?(s(ot,O,D,c),++O,--D):(l(ot,D,c),--D);break}else{if(--D<ot)break;continue}o(_,O-1,F,R,c),o(a,D+1,B,N,c),O-2-_<=d?e(_,O-2,c):h(_,O-2,c),a-(D+2)<=d?e(D+2,a,c):h(D+2,a,c),D-O<=d?e(O,D,c):h(O,D,c)}},855:function(v,d,r){v.exports={init:x,sweepBipartite:A,sweepComplete:L,scanBipartite:u,scanComplete:m};var e=r(1888),l=r(8828),n=r(1811),s=1<<28,o=1024,p=e.mallocInt32(o),b=e.mallocInt32(o),h=e.mallocInt32(o),_=e.mallocInt32(o),a=e.mallocInt32(o),c=e.mallocInt32(o),f=e.mallocDouble(o*8);function x(S){var w=l.nextPow2(S);p.length<w&&(e.free(p),p=e.mallocInt32(w)),b.length<w&&(e.free(b),b=e.mallocInt32(w)),h.length<w&&(e.free(h),h=e.mallocInt32(w)),_.length<w&&(e.free(_),_=e.mallocInt32(w)),a.length<w&&(e.free(a),a=e.mallocInt32(w)),c.length<w&&(e.free(c),c=e.mallocInt32(w));var I=8*w;f.length<I&&(e.free(f),f=e.mallocDouble(I))}function k(S,w,I,O){var D=w[O],P=S[I-1];S[D]=P,w[P]=D}function y(S,w,I,O){S[I]=O,w[O]=I}function A(S,w,I,O,D,P,F,R,B,N){for(var G=0,X=2*S,J=S-1,it=X-1,nt=I;nt<O;++nt){var q=P[nt],Z=X*nt;f[G++]=D[Z+J],f[G++]=-(q+1),f[G++]=D[Z+it],f[G++]=q}for(var nt=F;nt<R;++nt){var q=N[nt]+s,$=X*nt;f[G++]=B[$+J],f[G++]=-q,f[G++]=B[$+it],f[G++]=q}var V=G>>>1;n(f,V);for(var rt=0,ot=0,nt=0;nt<V;++nt){var H=f[2*nt+1]|0;if(H>=s)H=H-s|0,k(h,_,ot--,H);else if(H>=0)k(p,b,rt--,H);else if(H<=-s){H=-H-s|0;for(var Y=0;Y<rt;++Y){var at=w(p[Y],H);if(at!==void 0)return at}y(h,_,ot++,H)}else{H=-H-1|0;for(var Y=0;Y<ot;++Y){var at=w(H,h[Y]);if(at!==void 0)return at}y(p,b,rt++,H)}}}function L(S,w,I,O,D,P,F,R,B,N){for(var G=0,X=2*S,J=S-1,it=X-1,nt=I;nt<O;++nt){var q=P[nt]+1<<1,Z=X*nt;f[G++]=D[Z+J],f[G++]=-q,f[G++]=D[Z+it],f[G++]=q}for(var nt=F;nt<R;++nt){var q=N[nt]+1<<1,$=X*nt;f[G++]=B[$+J],f[G++]=-q|1,f[G++]=B[$+it],f[G++]=q|1}var V=G>>>1;n(f,V);for(var rt=0,ot=0,H=0,nt=0;nt<V;++nt){var Y=f[2*nt+1]|0,at=Y&1;if(nt<V-1&&Y>>1===f[2*nt+3]>>1&&(at=2,nt+=1),Y<0){for(var et=-(Y>>1)-1,ct=0;ct<H;++ct){var ft=w(a[ct],et);if(ft!==void 0)return ft}if(at!==0)for(var ct=0;ct<rt;++ct){var ft=w(p[ct],et);if(ft!==void 0)return ft}if(at!==1)for(var ct=0;ct<ot;++ct){var ft=w(h[ct],et);if(ft!==void 0)return ft}at===0?y(p,b,rt++,et):at===1?y(h,_,ot++,et):at===2&&y(a,c,H++,et)}else{var et=(Y>>1)-1;at===0?k(p,b,rt--,et):at===1?k(h,_,ot--,et):at===2&&k(a,c,H--,et)}}}function u(S,w,I,O,D,P,F,R,B,N,G,X){var J=0,it=2*S,nt=w,q=w+S,Z=1,$=1;O?$=s:Z=s;for(var V=D;V<P;++V){var rt=V+Z,ot=it*V;f[J++]=F[ot+nt],f[J++]=-rt,f[J++]=F[ot+q],f[J++]=rt}for(var V=B;V<N;++V){var rt=V+$,H=it*V;f[J++]=G[H+nt],f[J++]=-rt}var Y=J>>>1;n(f,Y);for(var at=0,V=0;V<Y;++V){var et=f[2*V+1]|0;if(et<0){var rt=-et,ct=!1;if(rt>=s?(ct=!O,rt-=s):(ct=!!O,rt-=1),ct)y(p,b,at++,rt);else{var ft=X[rt],yt=it*rt,xt=G[yt+w+1],Ct=G[yt+w+1+S];t:for(var gt=0;gt<at;++gt){var mt=p[gt],vt=it*mt;if(!(Ct<F[vt+w+1]||F[vt+w+1+S]<xt)){for(var At=w+2;At<S;++At)if(G[yt+At+S]<F[vt+At]||F[vt+At+S]<G[yt+At])continue t;var Ot=R[mt],It;if(O?It=I(ft,Ot):It=I(Ot,ft),It!==void 0)return It}}}}else k(p,b,at--,et-Z)}}function m(S,w,I,O,D,P,F,R,B,N,G){for(var X=0,J=2*S,it=w,nt=w+S,q=O;q<D;++q){var Z=q+s,$=J*q;f[X++]=P[$+it],f[X++]=-Z,f[X++]=P[$+nt],f[X++]=Z}for(var q=R;q<B;++q){var Z=q+1,V=J*q;f[X++]=N[V+it],f[X++]=-Z}var rt=X>>>1;n(f,rt);for(var ot=0,q=0;q<rt;++q){var H=f[2*q+1]|0;if(H<0){var Z=-H;if(Z>=s)p[ot++]=Z-s;else{Z-=1;var Y=G[Z],at=J*Z,et=N[at+w+1],ct=N[at+w+1+S];t:for(var ft=0;ft<ot;++ft){var yt=p[ft],xt=F[yt];if(xt===Y)break;var Ct=J*yt;if(!(ct<P[Ct+w+1]||P[Ct+w+1+S]<et)){for(var gt=w+2;gt<S;++gt)if(N[at+gt+S]<P[Ct+gt]||P[Ct+gt+S]<N[at+gt])continue t;var mt=I(xt,Y);if(mt!==void 0)return mt}}}}else{for(var Z=H-s,ft=ot-1;ft>=0;--ft)if(p[ft]===Z){for(var gt=ft+1;gt<ot;++gt)p[gt-1]=p[gt];break}--ot}}}},2538:function(v,d,r){var e=r(8902),l=r(5542),n=r(2272),s=r(5023);v.exports=_;function o(a){return[Math.min(a[0],a[1]),Math.max(a[0],a[1])]}function p(a,c){return a[0]-c[0]||a[1]-c[1]}function b(a){return a.map(o).sort(p)}function h(a,c,f){return c in a?a[c]:f}function _(a,c,f){Array.isArray(c)?(f=f||{},c=c||[]):(f=c||{},c=[]);var x=!!h(f,"delaunay",!0),k=!!h(f,"interior",!0),y=!!h(f,"exterior",!0),A=!!h(f,"infinity",!1);if(!k&&!y||a.length===0)return[];var L=e(a,c);if(x||k!==y||A){for(var u=l(a.length,b(c)),m=0;m<L.length;++m){var S=L[m];u.addTriangle(S[0],S[1],S[2])}return x&&n(a,u),y?k?A?s(u,0,A):u.cells():s(u,1,A):s(u,-1)}else return L}},2272:function(v,d,r){var e=r(2646)[4];r(2478),v.exports=n;function l(s,o,p,b,h,_){var a=o.opposite(b,h);if(!(a<0)){if(h<b){var c=b;b=h,h=c,c=_,_=a,a=c}o.isConstraint(b,h)||e(s[b],s[h],s[_],s[a])<0&&p.push(b,h)}}function n(s,o){for(var p=[],b=s.length,h=o.stars,_=0;_<b;++_)for(var a=h[_],c=1;c<a.length;c+=2){var f=a[c];if(!(f<_)&&!o.isConstraint(_,f)){for(var x=a[c-1],k=-1,y=1;y<a.length;y+=2)if(a[y-1]===f){k=a[y];break}k<0||e(s[_],s[f],s[x],s[k])<0&&p.push(_,f)}}for(;p.length>0;){for(var f=p.pop(),_=p.pop(),x=-1,k=-1,a=h[_],A=1;A<a.length;A+=2){var L=a[A-1],u=a[A];L===f?k=u:u===f&&(x=L)}x<0||k<0||e(s[_],s[f],s[x],s[k])>=0||(o.flip(_,f),l(s,o,p,x,_,k),l(s,o,p,_,k,x),l(s,o,p,k,f,x),l(s,o,p,f,x,k))}}},5023:function(v,d,r){var e=r(2478);v.exports=b;function l(h,_,a,c,f,x,k){this.cells=h,this.neighbor=_,this.flags=c,this.constraint=a,this.active=f,this.next=x,this.boundary=k}var n=l.prototype;function s(h,_){return h[0]-_[0]||h[1]-_[1]||h[2]-_[2]}n.locate=function(){var h=[0,0,0];return function(_,a,c){var f=_,x=a,k=c;return a<c?a<_&&(f=a,x=c,k=_):c<_&&(f=c,x=_,k=a),f<0?-1:(h[0]=f,h[1]=x,h[2]=k,e.eq(this.cells,h,s))}}();function o(h,_){for(var a=h.cells(),c=a.length,f=0;f<c;++f){var x=a[f],k=x[0],y=x[1],A=x[2];y<A?y<k&&(x[0]=y,x[1]=A,x[2]=k):A<k&&(x[0]=A,x[1]=k,x[2]=y)}a.sort(s);for(var L=new Array(c),f=0;f<L.length;++f)L[f]=0;var u=[],m=[],S=new Array(3*c),w=new Array(3*c),I=null;_&&(I=[]);for(var O=new l(a,S,w,L,u,m,I),f=0;f<c;++f)for(var x=a[f],D=0;D<3;++D){var k=x[D],y=x[(D+1)%3],P=S[3*f+D]=O.locate(y,k,h.opposite(y,k)),F=w[3*f+D]=h.isConstraint(k,y);P<0&&(F?m.push(f):(u.push(f),L[f]=1),_&&I.push([y,k,-1]))}return O}function p(h,_,a){for(var c=0,f=0;f<h.length;++f)_[f]===a&&(h[c++]=h[f]);return h.length=c,h}function b(h,_,a){var c=o(h,a);if(_===0)return a?c.cells.concat(c.boundary):c.cells;for(var f=1,x=c.active,k=c.next,y=c.flags,A=c.cells,L=c.constraint,u=c.neighbor;x.length>0||k.length>0;){for(;x.length>0;){var m=x.pop();if(y[m]!==-f){y[m]=f;for(var S=A[m],w=0;w<3;++w){var I=u[3*m+w];I>=0&&y[I]===0&&(L[3*m+w]?k.push(I):(x.push(I),y[I]=f))}}}var O=k;k=x,x=O,k.length=0,f=-f}var D=p(A,y,_);return a?D.concat(c.boundary):D}},8902:function(v,d,r){var e=r(2478),l=r(3250)[3],n=0,s=1,o=2;v.exports=k;function p(y,A,L,u,m){this.a=y,this.b=A,this.idx=L,this.lowerIds=u,this.upperIds=m}function b(y,A,L,u){this.a=y,this.b=A,this.type=L,this.idx=u}function h(y,A){var L=y.a[0]-A.a[0]||y.a[1]-A.a[1]||y.type-A.type;return L||y.type!==n&&(L=l(y.a,y.b,A.b),L)?L:y.idx-A.idx}function _(y,A){return l(y.a,y.b,A)}function a(y,A,L,u,m){for(var S=e.lt(A,u,_),w=e.gt(A,u,_),I=S;I<w;++I){for(var O=A[I],D=O.lowerIds,P=D.length;P>1&&l(L[D[P-2]],L[D[P-1]],u)>0;)y.push([D[P-1],D[P-2],m]),P-=1;D.length=P,D.push(m);for(var F=O.upperIds,P=F.length;P>1&&l(L[F[P-2]],L[F[P-1]],u)<0;)y.push([F[P-2],F[P-1],m]),P-=1;F.length=P,F.push(m)}}function c(y,A){var L;return y.a[0]<A.a[0]?L=l(y.a,y.b,A.a):L=l(A.b,A.a,y.a),L||(A.b[0]<y.b[0]?L=l(y.a,y.b,A.b):L=l(A.b,A.a,y.b),L||y.idx-A.idx)}function f(y,A,L){var u=e.le(y,L,c),m=y[u],S=m.upperIds,w=S[S.length-1];m.upperIds=[w],y.splice(u+1,0,new p(L.a,L.b,L.idx,[w],S))}function x(y,A,L){var u=L.a;L.a=L.b,L.b=u;var m=e.eq(y,L,c),S=y[m],w=y[m-1];w.upperIds=S.upperIds,y.splice(m,1)}function k(y,A){for(var L=y.length,u=A.length,m=[],S=0;S<L;++S)m.push(new b(y[S],null,n,S));for(var S=0;S<u;++S){var w=A[S],I=y[w[0]],O=y[w[1]];I[0]<O[0]?m.push(new b(I,O,o,S),new b(O,I,s,S)):I[0]>O[0]&&m.push(new b(O,I,o,S),new b(I,O,s,S))}m.sort(h);for(var D=m[0].a[0]-(1+Math.abs(m[0].a[0]))*Math.pow(2,-52),P=[new p([D,1],[D,0],-1,[],[])],F=[],S=0,R=m.length;S<R;++S){var B=m[S],N=B.type;N===n?a(F,P,y,B.a,B.idx):N===o?f(P,y,B):x(P,y,B)}return F}},5542:function(v,d,r){var e=r(2478);v.exports=o;function l(p,b){this.stars=p,this.edges=b}var n=l.prototype;function s(p,b,h){for(var _=1,a=p.length;_<a;_+=2)if(p[_-1]===b&&p[_]===h){p[_-1]=p[a-2],p[_]=p[a-1],p.length=a-2;return}}n.isConstraint=function(){var p=[0,0];function b(h,_){return h[0]-_[0]||h[1]-_[1]}return function(h,_){return p[0]=Math.min(h,_),p[1]=Math.max(h,_),e.eq(this.edges,p,b)>=0}}(),n.removeTriangle=function(p,b,h){var _=this.stars;s(_[p],b,h),s(_[b],h,p),s(_[h],p,b)},n.addTriangle=function(p,b,h){var _=this.stars;_[p].push(b,h),_[b].push(h,p),_[h].push(p,b)},n.opposite=function(p,b){for(var h=this.stars[b],_=1,a=h.length;_<a;_+=2)if(h[_]===p)return h[_-1];return-1},n.flip=function(p,b){var h=this.opposite(p,b),_=this.opposite(b,p);this.removeTriangle(p,b,h),this.removeTriangle(b,p,_),this.addTriangle(p,_,h),this.addTriangle(b,h,_)},n.edges=function(){for(var p=this.stars,b=[],h=0,_=p.length;h<_;++h)for(var a=p[h],c=0,f=a.length;c<f;c+=2)b.push([a[c],a[c+1]]);return b},n.cells=function(){for(var p=this.stars,b=[],h=0,_=p.length;h<_;++h)for(var a=p[h],c=0,f=a.length;c<f;c+=2){var x=a[c],k=a[c+1];h<Math.min(x,k)&&b.push([h,x,k])}return b};function o(p,b){for(var h=new Array(p),_=0;_<p;++_)h[_]=[];return new l(h,b)}},2419:function(v){v.exports=d;function d(r){for(var e=1,l=1;l<r.length;++l)for(var n=0;n<l;++n)if(r[l]<r[n])e=-e;else if(r[n]===r[l])return 0;return e}},3628:function(v,d,r){var e=r(1338),l=r(727);function n(p,b){for(var h=0,_=p.length,a=0;a<_;++a)h+=p[a]*b[a];return h}function s(p){var b=p.length;if(b===0)return[];p[0].length;var h=e([p.length+1,p.length+1],1),_=e([p.length+1],1);h[b][b]=0;for(var a=0;a<b;++a){for(var c=0;c<=a;++c)h[c][a]=h[a][c]=2*n(p[a],p[c]);_[a]=n(p[a],p[a])}for(var f=l(h,_),x=0,k=f[b+1],a=0;a<k.length;++a)x+=k[a];for(var y=new Array(b),a=0;a<b;++a){for(var k=f[a],A=0,c=0;c<k.length;++c)A+=k[c];y[a]=A/x}return y}function o(p){if(p.length===0)return[];for(var b=p[0].length,h=e([b]),_=s(p),a=0;a<p.length;++a)for(var c=0;c<b;++c)h[c]+=p[a][c]*_[a];return h}o.barycenetric=s,v.exports=o},6037:function(v,d,r){v.exports=l;var e=r(3628);function l(n){for(var s=e(n),o=0,p=0;p<n.length;++p)for(var b=n[p],h=0;h<s.length;++h)o+=Math.pow(b[h]-s[h],2);return Math.sqrt(o/n.length)}},332:function(v,d,r){v.exports=I;var e=r(1755),l=r(6867),n=r(1125),s=r(7842),o=r(1318),p=r(946),b=r(5838),h=r(1278),_=r(3637);function a(O){var D=p(O);return[h(D,-1/0),h(D,1/0)]}function c(O,D){for(var P=new Array(D.length),F=0;F<D.length;++F){var R=D[F],B=O[R[0]],N=O[R[1]];P[F]=[h(Math.min(B[0],N[0]),-1/0),h(Math.min(B[1],N[1]),-1/0),h(Math.max(B[0],N[0]),1/0),h(Math.max(B[1],N[1]),1/0)]}return P}function f(O){for(var D=new Array(O.length),P=0;P<O.length;++P){var F=O[P];D[P]=[h(F[0],-1/0),h(F[1],-1/0),h(F[0],1/0),h(F[1],1/0)]}return D}function x(O,D,P){var F=[];return l(P,function(R,B){var N=D[R],G=D[B];if(!(N[0]===G[0]||N[0]===G[1]||N[1]===G[0]||N[1]===G[1])){var X=O[N[0]],J=O[N[1]],it=O[G[0]],nt=O[G[1]];n(X,J,it,nt)&&F.push([R,B])}}),F}function k(O,D,P,F){var R=[];return l(P,F,function(B,N){var G=D[B];if(!(G[0]===N||G[1]===N)){var X=O[N],J=O[G[0]],it=O[G[1]];n(J,it,X,X)&&R.push([B,N])}}),R}function y(O,D,P,F,R){var B,N,G=O.map(function(yt){return[s(yt[0]),s(yt[1])]});for(B=0;B<P.length;++B){var X=P[B];N=X[0];var J=X[1],it=D[N],nt=D[J],q=_(b(O[it[0]]),b(O[it[1]]),b(O[nt[0]]),b(O[nt[1]]));if(q){var Z=O.length;O.push([p(q[0]),p(q[1])]),G.push(q),F.push([N,Z],[J,Z])}}for(F.sort(function(yt,xt){if(yt[0]!==xt[0])return yt[0]-xt[0];var Ct=G[yt[1]],gt=G[xt[1]];return o(Ct[0],gt[0])||o(Ct[1],gt[1])}),B=F.length-1;B>=0;--B){var $=F[B];N=$[0];var V=D[N],rt=V[0],ot=V[1],H=O[rt],Y=O[ot];if((H[0]-Y[0]||H[1]-Y[1])<0){var at=rt;rt=ot,ot=at}V[0]=rt;var et=V[1]=$[1],ct;for(R&&(ct=V[2]);B>0&&F[B-1][0]===N;){var $=F[--B],ft=$[1];R?D.push([et,ft,ct]):D.push([et,ft]),et=ft}R?D.push([et,ot,ct]):D.push([et,ot])}return G}function A(O,D,P){for(var F=D.length,R=new e(F),B=[],N=0;N<D.length;++N){var G=D[N],X=a(G[0]),J=a(G[1]);B.push([h(X[0],-1/0),h(J[0],-1/0),h(X[1],1/0),h(J[1],1/0)])}l(B,function($,V){R.link($,V)});for(var it=!0,nt=new Array(F),N=0;N<F;++N){var q=R.find(N);q!==N&&(it=!1,O[q]=[Math.min(O[N][0],O[q][0]),Math.min(O[N][1],O[q][1])])}if(it)return null;for(var Z=0,N=0;N<F;++N){var q=R.find(N);q===N?(nt[N]=Z,O[Z++]=O[N]):nt[N]=-1}O.length=Z;for(var N=0;N<F;++N)nt[N]<0&&(nt[N]=nt[R.find(N)]);return nt}function L(O,D){return O[0]-D[0]||O[1]-D[1]}function u(O,D){var P=O[0]-D[0]||O[1]-D[1];return P||(O[2]<D[2]?-1:O[2]>D[2]?1:0)}function m(O,D,P){if(O.length!==0){if(D)for(var F=0;F<O.length;++F){var R=O[F],B=D[R[0]],N=D[R[1]];R[0]=Math.min(B,N),R[1]=Math.max(B,N)}else for(var F=0;F<O.length;++F){var R=O[F],B=R[0],N=R[1];R[0]=Math.min(B,N),R[1]=Math.max(B,N)}P?O.sort(u):O.sort(L);for(var G=1,F=1;F<O.length;++F){var X=O[F-1],J=O[F];J[0]===X[0]&&J[1]===X[1]&&(!P||J[2]===X[2])||(O[G++]=J)}O.length=G}}function S(O,D,P){var F=A(O,[],f(O));return m(D,F,P),!!F}function w(O,D,P){var F=c(O,D),R=x(O,D,F),B=f(O),N=k(O,D,F,B),G=y(O,D,R,N,P),X=A(O,G);return m(D,X,P),X?!0:R.length>0||N.length>0}function I(O,D,P){var F;if(P){F=D;for(var R=new Array(D.length),B=0;B<D.length;++B){var N=D[B];R[B]=[N[0],N[1],P[B]]}D=R}for(var G=S(O,D,!!P);w(O,D,!!P);)G=!0;if(P&&G){F.length=0,P.length=0;for(var B=0;B<D.length;++B){var N=D[B];F.push([N[0],N[1]]),P.push(N[2])}}return G}},3637:function(v,d,r){v.exports=_;var e=r(6504),l=r(8697),n=r(5572),s=r(7721),o=r(544),p=r(2653),b=r(8987);function h(a,c){return n(e(a[0],c[1]),e(a[1],c[0]))}function _(a,c,f,x){var k=o(c,a),y=o(x,f),A=h(k,y);if(s(A)===0)return null;var L=o(a,f),u=h(y,L),m=l(u,A),S=b(k,m),w=p(a,S);return w}},3642:function(v){v.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(v,d,r){var e=r(3642),l=r(395);v.exports=n;function n(b){var h,_,a,c,f,x,k,y,m,A,L;if(b||(b={}),y=(b.nshades||72)-1,k=b.format||"hex",x=b.colormap,x||(x="jet"),typeof x=="string"){if(x=x.toLowerCase(),!e[x])throw Error(x+" not a supported colorscale");f=e[x]}else if(Array.isArray(x))f=x.slice();else throw Error("unsupported colormap option",x);if(f.length>y+1)throw new Error(x+" map requires nshades to be at least size "+f.length);Array.isArray(b.alpha)?b.alpha.length!==2?A=[1,1]:A=b.alpha.slice():typeof b.alpha=="number"?A=[b.alpha,b.alpha]:A=[1,1],h=f.map(function(I){return Math.round(I.index*y)}),A[0]=Math.min(Math.max(A[0],0),1),A[1]=Math.min(Math.max(A[1],0),1);var u=f.map(function(I,O){var D=f[O].index,P=f[O].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=A[0]+(A[1]-A[0])*D),P}),m=[];for(L=0;L<h.length-1;++L){c=h[L+1]-h[L],_=u[L],a=u[L+1];for(var S=0;S<c;S++){var w=S/c;m.push([Math.round(l(_[0],a[0],w)),Math.round(l(_[1],a[1],w)),Math.round(l(_[2],a[2],w)),l(_[3],a[3],w)])}}return m.push(f[f.length-1].rgb.concat(A[1])),k==="hex"?m=m.map(o):k==="rgbaString"?m=m.map(p):k==="float"&&(m=m.map(s)),m}function s(b){return[b[0]/255,b[1]/255,b[2]/255,b[3]]}function o(b){for(var h,_="#",a=0;a<3;++a)h=b[a],h=h.toString(16),_+=("00"+h).substr(h.length);return _}function p(b){return"rgba("+b.join(",")+")"}},3140:function(v,d,r){v.exports=b;var e=r(3250),l=r(8572),n=r(9362),s=r(5382),o=r(8210);function p(h,_,a){var c=n(h[0],-_[0]),f=n(h[1],-_[1]),x=n(a[0],-_[0]),k=n(a[1],-_[1]),y=o(s(c,x),s(f,k));return y[y.length-1]>=0}function b(h,_,a,c){var f=e(_,a,c);if(f===0){var x=l(e(h,_,a)),k=l(e(h,_,c));if(x===k){if(x===0){var y=p(h,_,a),A=p(h,_,c);return y===A?0:y?1:-1}return 0}else{if(k===0)return x>0||p(h,_,c)?-1:1;if(x===0)return k>0||p(h,_,a)?1:-1}return l(k-x)}var L=e(h,_,a);if(L>0)return f>0&&e(h,_,c)>0?1:-1;if(L<0)return f>0||e(h,_,c)>0?1:-1;var u=e(h,_,c);return u>0||p(h,_,a)?1:-1}},8572:function(v){v.exports=function(d){return d<0?-1:d>0?1:0}},8507:function(v){v.exports=e;var d=Math.min;function r(l,n){return l-n}function e(l,n){var s=l.length,o=l.length-n.length;if(o)return o;switch(s){case 0:return 0;case 1:return l[0]-n[0];case 2:return l[0]+l[1]-n[0]-n[1]||d(l[0],l[1])-d(n[0],n[1]);case 3:var p=l[0]+l[1],b=n[0]+n[1];if(o=p+l[2]-(b+n[2]),o)return o;var h=d(l[0],l[1]),_=d(n[0],n[1]);return d(h,l[2])-d(_,n[2])||d(h+l[2],p)-d(_+n[2],b);case 4:var a=l[0],c=l[1],f=l[2],x=l[3],k=n[0],y=n[1],A=n[2],L=n[3];return a+c+f+x-(k+y+A+L)||d(a,c,f,x)-d(k,y,A,L,k)||d(a+c,a+f,a+x,c+f,c+x,f+x)-d(k+y,k+A,k+L,y+A,y+L,A+L)||d(a+c+f,a+c+x,a+f+x,c+f+x)-d(k+y+A,k+y+L,k+A+L,y+A+L);default:for(var u=l.slice().sort(r),m=n.slice().sort(r),S=0;S<s;++S)if(o=u[S]-m[S],o)return o;return 0}}},3788:function(v,d,r){var e=r(8507),l=r(2419);v.exports=n;function n(s,o){return e(s,o)||l(s)-l(o)}},7352:function(v,d,r){var e=r(5721),l=r(4750),n=r(2690);v.exports=s;function s(o){var p=o.length;if(p===0)return[];if(p===1)return[[0]];var b=o[0].length;return b===0?[]:b===1?e(o):b===2?l(o):n(o,b)}},5721:function(v){v.exports=d;function d(r){for(var e=0,l=0,n=1;n<r.length;++n)r[n][0]<r[e][0]&&(e=n),r[n][0]>r[l][0]&&(l=n);return e<l?[[e],[l]]:e>l?[[l],[e]]:[[e]]}},4750:function(v,d,r){v.exports=l;var e=r(3090);function l(n){var s=e(n),o=s.length;if(o<=2)return[];for(var p=new Array(o),b=s[o-1],h=0;h<o;++h){var _=s[h];p[h]=[b,_],b=_}return p}},2690:function(v,d,r){v.exports=o;var e=r(8954),l=r(3952);function n(p,b){for(var h=p.length,_=new Array(h),a=0;a<b.length;++a)_[a]=p[b[a]];for(var c=b.length,a=0;a<h;++a)b.indexOf(a)<0&&(_[c++]=p[a]);return _}function s(p,b){for(var h=p.length,_=b.length,a=0;a<h;++a)for(var c=p[a],f=0;f<c.length;++f){var x=c[f];if(x<_)c[f]=b[x];else{x=x-_;for(var k=0;k<_;++k)x>=b[k]&&(x+=1);c[f]=x}}return p}function o(p,b){try{return e(p,!0)}catch{var h=l(p);if(h.length<=b)return[];var _=n(p,h),a=e(_,!0);return s(a,h)}}},4769:function(v){function d(e,l,n,s,o,p){var b=6*o*o-6*o,h=3*o*o-4*o+1,_=-6*o*o+6*o,a=3*o*o-2*o;if(e.length){p||(p=new Array(e.length));for(var c=e.length-1;c>=0;--c)p[c]=b*e[c]+h*l[c]+_*n[c]+a*s[c];return p}return b*e+h*l+_*n[c]+a*s}function r(e,l,n,s,o,p){var b=o-1,h=o*o,_=b*b,a=(1+2*o)*_,c=o*_,f=h*(3-2*o),x=h*b;if(e.length){p||(p=new Array(e.length));for(var k=e.length-1;k>=0;--k)p[k]=a*e[k]+c*l[k]+f*n[k]+x*s[k];return p}return a*e+c*l+f*n+x*s}v.exports=r,v.exports.derivative=d},7642:function(v,d,r){var e=r(8954),l=r(1682);v.exports=p;function n(b,h){this.point=b,this.index=h}function s(b,h){for(var _=b.point,a=h.point,c=_.length,f=0;f<c;++f){var x=a[f]-_[f];if(x)return x}return 0}function o(b,h,_){if(b===1)return _?[[-1,0]]:[];var a=h.map(function(y,A){return[y[0],A]});a.sort(function(y,A){return y[0]-A[0]});for(var c=new Array(b-1),f=1;f<b;++f){var x=a[f-1],k=a[f];c[f-1]=[x[1],k[1]]}return _&&c.push([-1,c[0][1]],[c[b-1][1],-1]),c}function p(b,h){var _=b.length;if(_===0)return[];var a=b[0].length;if(a<1)return[];if(a===1)return o(_,b,h);for(var c=new Array(_),f=1,x=0;x<_;++x){for(var k=b[x],y=new Array(a+1),A=0,L=0;L<a;++L){var u=k[L];y[L]=u,A+=u*u}y[a]=A,c[x]=new n(y,x),f=Math.max(A,f)}l(c,s),_=c.length;for(var m=new Array(_+a+1),S=new Array(_+a+1),w=(a+1)*(a+1)*f,I=new Array(a+1),x=0;x<=a;++x)I[x]=0;I[a]=w,m[0]=I.slice(),S[0]=-1;for(var x=0;x<=a;++x){var y=I.slice();y[x]=1,m[x+1]=y,S[x+1]=-1}for(var x=0;x<_;++x){var O=c[x];m[x+a+1]=O.point,S[x+a+1]=O.index}var D=e(m,!1);if(h?D=D.filter(function(P){for(var F=0,R=0;R<=a;++R){var B=S[P[R]];if(B<0&&++F>=2)return!1;P[R]=B}return!0}):D=D.filter(function(P){for(var F=0;F<=a;++F){var R=S[P[F]];if(R<0)return!1;P[F]=R}return!0}),a&1)for(var x=0;x<D.length;++x){var O=D[x],y=O[0];O[0]=O[1],O[1]=y}return D}},2361:function(v){var d=!1;if(typeof Float64Array<"u"){var r=new Float64Array(1),e=new Uint32Array(r.buffer);if(r[0]=1,d=!0,e[1]===1072693248){let n=function(p,b){return e[0]=p,e[1]=b,r[0]},s=function(p){return r[0]=p,e[0]},o=function(p){return r[0]=p,e[1]};v.exports=function(p){return r[0]=p,[e[0],e[1]]},v.exports.pack=n,v.exports.lo=s,v.exports.hi=o}else if(e[0]===1072693248){let n=function(p,b){return e[1]=p,e[0]=b,r[0]},s=function(p){return r[0]=p,e[1]},o=function(p){return r[0]=p,e[0]};v.exports=function(p){return r[0]=p,[e[1],e[0]]},v.exports.pack=n,v.exports.lo=s,v.exports.hi=o}else d=!1}if(!d){let n=function(p,b){return l.writeUInt32LE(p,0,!0),l.writeUInt32LE(b,4,!0),l.readDoubleLE(0,!0)},s=function(p){return l.writeDoubleLE(p,0,!0),l.readUInt32LE(0,!0)},o=function(p){return l.writeDoubleLE(p,0,!0),l.readUInt32LE(4,!0)};var l=new Buffer(8);v.exports=function(p){return l.writeDoubleLE(p,0,!0),[l.readUInt32LE(0,!0),l.readUInt32LE(4,!0)]},v.exports.pack=n,v.exports.lo=s,v.exports.hi=o}v.exports.sign=function(n){return v.exports.hi(n)>>>31},v.exports.exponent=function(n){var s=v.exports.hi(n);return(s<<1>>>21)-1023},v.exports.fraction=function(n){var s=v.exports.lo(n),o=v.exports.hi(n),p=o&(1<<20)-1;return o&2146435072&&(p+=1048576),[s,p]},v.exports.denormalized=function(n){var s=v.exports.hi(n);return!(s&2146435072)}},1338:function(v){function d(l,n,s){var o=l[s]|0;if(o<=0)return[];var p=new Array(o),b;if(s===l.length-1)for(b=0;b<o;++b)p[b]=n;else for(b=0;b<o;++b)p[b]=d(l,n,s+1);return p}function r(l,n){var s,o;for(s=new Array(l),o=0;o<l;++o)s[o]=n;return s}function e(l,n){switch(typeof n>"u"&&(n=0),typeof l){case"number":if(l>0)return r(l|0,n);break;case"object":if(typeof l.length=="number")return d(l,n,0);break}return[]}v.exports=e},3134:function(v,d,r){v.exports=l;var e=r(1682);function l(n,s){var o=n.length;if(typeof s!="number"){s=0;for(var p=0;p<o;++p){var b=n[p];s=Math.max(s,b[0],b[1])}s=(s|0)+1}s=s|0;for(var h=new Array(s),p=0;p<s;++p)h[p]=[];for(var p=0;p<o;++p){var b=n[p];h[b[0]].push(b[1]),h[b[1]].push(b[0])}for(var _=0;_<s;++_)e(h[_],function(a,c){return a-c});return h}},5033:function(v){v.exports=d;function d(r,e,l){var n=e||0,s=l||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[n*r[12]+r[8],n*r[13]+r[9],n*r[14]+r[10],n*r[15]+r[11]],[s*r[12]-r[8],s*r[13]-r[9],s*r[14]-r[10],s*r[15]-r[11]]]}},9215:function(v,d,r){v.exports=b;var e=r(4769),l=r(2478);function n(h,_,a){return Math.min(_,Math.max(h,a))}function s(h,_,a){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var c=0;c<this.dimension;++c)this.bounds[0][c]=-1/0,this.bounds[1][c]=1/0;this._state=h.slice().reverse(),this._velocity=_.slice().reverse(),this._time=[a],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var o=s.prototype;o.flush=function(h){var _=l.gt(this._time,h)-1;_<=0||(this._time.splice(0,_),this._state.splice(0,_*this.dimension),this._velocity.splice(0,_*this.dimension))},o.curve=function(h){var _=this._time,a=_.length,c=l.le(_,h),f=this._scratch[0],x=this._state,k=this._velocity,y=this.dimension,A=this.bounds;if(c<0)for(var L=y-1,u=0;u<y;++u,--L)f[u]=x[L];else if(c>=a-1)for(var L=x.length-1,m=h-_[a-1],u=0;u<y;++u,--L)f[u]=x[L]+m*k[L];else{for(var L=y*(c+1)-1,S=_[c],w=_[c+1],I=w-S||1,O=this._scratch[1],D=this._scratch[2],P=this._scratch[3],F=this._scratch[4],R=!0,u=0;u<y;++u,--L)O[u]=x[L],P[u]=k[L]*I,D[u]=x[L+y],F[u]=k[L+y]*I,R=R&&O[u]===D[u]&&P[u]===F[u]&&P[u]===0;if(R)for(var u=0;u<y;++u)f[u]=O[u];else e(O,P,D,F,(h-S)/I,f)}for(var B=A[0],N=A[1],u=0;u<y;++u)f[u]=n(B[u],N[u],f[u]);return f},o.dcurve=function(h){var _=this._time,a=_.length,c=l.le(_,h),f=this._scratch[0],x=this._state,k=this._velocity,y=this.dimension;if(c>=a-1)for(var A=x.length-1,L=h-_[a-1],u=0;u<y;++u,--A)f[u]=k[A];else{for(var A=y*(c+1)-1,m=_[c],S=_[c+1],w=S-m||1,I=this._scratch[1],O=this._scratch[2],D=this._scratch[3],P=this._scratch[4],F=!0,u=0;u<y;++u,--A)I[u]=x[A],D[u]=k[A]*w,O[u]=x[A+y],P[u]=k[A+y]*w,F=F&&I[u]===O[u]&&D[u]===P[u]&&D[u]===0;if(F)for(var u=0;u<y;++u)f[u]=0;else{e.derivative(I,D,O,P,(h-m)/w,f);for(var u=0;u<y;++u)f[u]/=w}}return f},o.lastT=function(){var h=this._time;return h[h.length-1]},o.stable=function(){for(var h=this._velocity,_=h.length,a=this.dimension-1;a>=0;--a)if(h[--_])return!1;return!0},o.jump=function(h){var _=this.lastT(),a=this.dimension;if(!(h<_||arguments.length!==a+1)){var c=this._state,f=this._velocity,x=c.length-this.dimension,k=this.bounds,y=k[0],A=k[1];this._time.push(_,h);for(var L=0;L<2;++L)for(var u=0;u<a;++u)c.push(c[x++]),f.push(0);this._time.push(h);for(var u=a;u>0;--u)c.push(n(y[u-1],A[u-1],arguments[u])),f.push(0)}},o.push=function(h){var _=this.lastT(),a=this.dimension;if(!(h<_||arguments.length!==a+1)){var c=this._state,f=this._velocity,x=c.length-this.dimension,k=h-_,y=this.bounds,A=y[0],L=y[1],u=k>1e-6?1/k:0;this._time.push(h);for(var m=a;m>0;--m){var S=n(A[m-1],L[m-1],arguments[m]);c.push(S),f.push((S-c[x++])*u)}}},o.set=function(h){var _=this.dimension;if(!(h<this.lastT()||arguments.length!==_+1)){var a=this._state,c=this._velocity,f=this.bounds,x=f[0],k=f[1];this._time.push(h);for(var y=_;y>0;--y)a.push(n(x[y-1],k[y-1],arguments[y])),c.push(0)}},o.move=function(h){var _=this.lastT(),a=this.dimension;if(!(h<=_||arguments.length!==a+1)){var c=this._state,f=this._velocity,x=c.length-this.dimension,k=this.bounds,y=k[0],A=k[1],L=h-_,u=L>1e-6?1/L:0;this._time.push(h);for(var m=a;m>0;--m){var S=arguments[m];c.push(n(y[m-1],A[m-1],c[x++]+S)),f.push(S*u)}}},o.idle=function(h){var _=this.lastT();if(!(h<_)){var a=this.dimension,c=this._state,f=this._velocity,x=c.length-a,k=this.bounds,y=k[0],A=k[1],L=h-_;this._time.push(h);for(var u=a-1;u>=0;--u)c.push(n(y[u],A[u],c[x]+L*f[x])),f.push(0),x+=1}};function p(h){for(var _=new Array(h),a=0;a<h;++a)_[a]=0;return _}function b(h,_,a){switch(arguments.length){case 0:return new s([0],[0],0);case 1:if(typeof h=="number"){var c=p(h);return new s(c,c,0)}else return new s(h,p(h.length),0);case 2:if(typeof _=="number"){var c=p(h.length);return new s(h,c,+_)}else a=0;case 3:if(h.length!==_.length)throw new Error("state and velocity lengths must match");return new s(h,_,a)}}},3840:function(v){v.exports=y;var d=0,r=1;function e(A,L,u,m,S,w){this._color=A,this.key=L,this.value=u,this.left=m,this.right=S,this._count=w}function l(A){return new e(A._color,A.key,A.value,A.left,A.right,A._count)}function n(A,L){return new e(A,L.key,L.value,L.left,L.right,L._count)}function s(A){A._count=1+(A.left?A.left._count:0)+(A.right?A.right._count:0)}function o(A,L){this._compare=A,this.root=L}var p=o.prototype;Object.defineProperty(p,"keys",{get:function(){var A=[];return this.forEach(function(L,u){A.push(L)}),A}}),Object.defineProperty(p,"values",{get:function(){var A=[];return this.forEach(function(L,u){A.push(u)}),A}}),Object.defineProperty(p,"length",{get:function(){return this.root?this.root._count:0}}),p.insert=function(A,L){for(var u=this._compare,m=this.root,S=[],w=[];m;){var I=u(A,m.key);S.push(m),w.push(I),I<=0?m=m.left:m=m.right}S.push(new e(d,A,L,null,null,1));for(var O=S.length-2;O>=0;--O){var m=S[O];w[O]<=0?S[O]=new e(m._color,m.key,m.value,S[O+1],m.right,m._count+1):S[O]=new e(m._color,m.key,m.value,m.left,S[O+1],m._count+1)}for(var O=S.length-1;O>1;--O){var D=S[O-1],m=S[O];if(D._color===r||m._color===r)break;var P=S[O-2];if(P.left===D)if(D.left===m){var F=P.right;if(F&&F._color===d)D._color=r,P.right=n(r,F),P._color=d,O-=1;else{if(P._color=d,P.left=D.right,D._color=r,D.right=P,S[O-2]=D,S[O-1]=m,s(P),s(D),O>=3){var R=S[O-3];R.left===P?R.left=D:R.right=D}break}}else{var F=P.right;if(F&&F._color===d)D._color=r,P.right=n(r,F),P._color=d,O-=1;else{if(D.right=m.left,P._color=d,P.left=m.right,m._color=r,m.left=D,m.right=P,S[O-2]=m,S[O-1]=D,s(P),s(D),s(m),O>=3){var R=S[O-3];R.left===P?R.left=m:R.right=m}break}}else if(D.right===m){var F=P.left;if(F&&F._color===d)D._color=r,P.left=n(r,F),P._color=d,O-=1;else{if(P._color=d,P.right=D.left,D._color=r,D.left=P,S[O-2]=D,S[O-1]=m,s(P),s(D),O>=3){var R=S[O-3];R.right===P?R.right=D:R.left=D}break}}else{var F=P.left;if(F&&F._color===d)D._color=r,P.left=n(r,F),P._color=d,O-=1;else{if(D.left=m.right,P._color=d,P.right=m.left,m._color=r,m.right=D,m.left=P,S[O-2]=m,S[O-1]=D,s(P),s(D),s(m),O>=3){var R=S[O-3];R.right===P?R.right=m:R.left=m}break}}}return S[0]._color=r,new o(u,S[0])};function b(A,L){if(L.left){var u=b(A,L.left);if(u)return u}var u=A(L.key,L.value);if(u)return u;if(L.right)return b(A,L.right)}function h(A,L,u,m){var S=L(A,m.key);if(S<=0){if(m.left){var w=h(A,L,u,m.left);if(w)return w}var w=u(m.key,m.value);if(w)return w}if(m.right)return h(A,L,u,m.right)}function _(A,L,u,m,S){var w=u(A,S.key),I=u(L,S.key),O;if(w<=0&&(S.left&&(O=_(A,L,u,m,S.left),O)||I>0&&(O=m(S.key,S.value),O)))return O;if(I>0&&S.right)return _(A,L,u,m,S.right)}p.forEach=function(A,L,u){if(this.root)switch(arguments.length){case 1:return b(A,this.root);case 2:return h(L,this._compare,A,this.root);case 3:return this._compare(L,u)>=0?void 0:_(L,u,this._compare,A,this.root)}},Object.defineProperty(p,"begin",{get:function(){for(var A=[],L=this.root;L;)A.push(L),L=L.left;return new a(this,A)}}),Object.defineProperty(p,"end",{get:function(){for(var A=[],L=this.root;L;)A.push(L),L=L.right;return new a(this,A)}}),p.at=function(A){if(A<0)return new a(this,[]);for(var L=this.root,u=[];;){if(u.push(L),L.left){if(A<L.left._count){L=L.left;continue}A-=L.left._count}if(!A)return new a(this,u);if(A-=1,L.right){if(A>=L.right._count)break;L=L.right}else break}return new a(this,[])},p.ge=function(A){for(var L=this._compare,u=this.root,m=[],S=0;u;){var w=L(A,u.key);m.push(u),w<=0&&(S=m.length),w<=0?u=u.left:u=u.right}return m.length=S,new a(this,m)},p.gt=function(A){for(var L=this._compare,u=this.root,m=[],S=0;u;){var w=L(A,u.key);m.push(u),w<0&&(S=m.length),w<0?u=u.left:u=u.right}return m.length=S,new a(this,m)},p.lt=function(A){for(var L=this._compare,u=this.root,m=[],S=0;u;){var w=L(A,u.key);m.push(u),w>0&&(S=m.length),w<=0?u=u.left:u=u.right}return m.length=S,new a(this,m)},p.le=function(A){for(var L=this._compare,u=this.root,m=[],S=0;u;){var w=L(A,u.key);m.push(u),w>=0&&(S=m.length),w<0?u=u.left:u=u.right}return m.length=S,new a(this,m)},p.find=function(A){for(var L=this._compare,u=this.root,m=[];u;){var S=L(A,u.key);if(m.push(u),S===0)return new a(this,m);S<=0?u=u.left:u=u.right}return new a(this,[])},p.remove=function(A){var L=this.find(A);return L?L.remove():this},p.get=function(A){for(var L=this._compare,u=this.root;u;){var m=L(A,u.key);if(m===0)return u.value;m<=0?u=u.left:u=u.right}};function a(A,L){this.tree=A,this._stack=L}var c=a.prototype;Object.defineProperty(c,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(c,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),c.clone=function(){return new a(this.tree,this._stack.slice())};function f(A,L){A.key=L.key,A.value=L.value,A.left=L.left,A.right=L.right,A._color=L._color,A._count=L._count}function x(A){for(var L,u,m,S,w=A.length-1;w>=0;--w){if(L=A[w],w===0){L._color=r;return}if(u=A[w-1],u.left===L){if(m=u.right,m.right&&m.right._color===d){if(m=u.right=l(m),S=m.right=l(m.right),u.right=m.left,m.left=u,m.right=S,m._color=u._color,L._color=r,u._color=r,S._color=r,s(u),s(m),w>1){var I=A[w-2];I.left===u?I.left=m:I.right=m}A[w-1]=m;return}else if(m.left&&m.left._color===d){if(m=u.right=l(m),S=m.left=l(m.left),u.right=S.left,m.left=S.right,S.left=u,S.right=m,S._color=u._color,u._color=r,m._color=r,L._color=r,s(u),s(m),s(S),w>1){var I=A[w-2];I.left===u?I.left=S:I.right=S}A[w-1]=S;return}if(m._color===r)if(u._color===d){u._color=r,u.right=n(d,m);return}else{u.right=n(d,m);continue}else{if(m=l(m),u.right=m.left,m.left=u,m._color=u._color,u._color=d,s(u),s(m),w>1){var I=A[w-2];I.left===u?I.left=m:I.right=m}A[w-1]=m,A[w]=u,w+1<A.length?A[w+1]=L:A.push(L),w=w+2}}else{if(m=u.left,m.left&&m.left._color===d){if(m=u.left=l(m),S=m.left=l(m.left),u.left=m.right,m.right=u,m.left=S,m._color=u._color,L._color=r,u._color=r,S._color=r,s(u),s(m),w>1){var I=A[w-2];I.right===u?I.right=m:I.left=m}A[w-1]=m;return}else if(m.right&&m.right._color===d){if(m=u.left=l(m),S=m.right=l(m.right),u.left=S.right,m.right=S.left,S.right=u,S.left=m,S._color=u._color,u._color=r,m._color=r,L._color=r,s(u),s(m),s(S),w>1){var I=A[w-2];I.right===u?I.right=S:I.left=S}A[w-1]=S;return}if(m._color===r)if(u._color===d){u._color=r,u.left=n(d,m);return}else{u.left=n(d,m);continue}else{if(m=l(m),u.left=m.right,m.right=u,m._color=u._color,u._color=d,s(u),s(m),w>1){var I=A[w-2];I.right===u?I.right=m:I.left=m}A[w-1]=m,A[w]=u,w+1<A.length?A[w+1]=L:A.push(L),w=w+2}}}}c.remove=function(){var A=this._stack;if(A.length===0)return this.tree;var L=new Array(A.length),u=A[A.length-1];L[L.length-1]=new e(u._color,u.key,u.value,u.left,u.right,u._count);for(var m=A.length-2;m>=0;--m){var u=A[m];u.left===A[m+1]?L[m]=new e(u._color,u.key,u.value,L[m+1],u.right,u._count):L[m]=new e(u._color,u.key,u.value,u.left,L[m+1],u._count)}if(u=L[L.length-1],u.left&&u.right){var S=L.length;for(u=u.left;u.right;)L.push(u),u=u.right;var w=L[S-1];L.push(new e(u._color,w.key,w.value,u.left,u.right,u._count)),L[S-1].key=u.key,L[S-1].value=u.value;for(var m=L.length-2;m>=S;--m)u=L[m],L[m]=new e(u._color,u.key,u.value,u.left,L[m+1],u._count);L[S-1].left=L[S]}if(u=L[L.length-1],u._color===d){var I=L[L.length-2];I.left===u?I.left=null:I.right===u&&(I.right=null),L.pop();for(var m=0;m<L.length;++m)L[m]._count--;return new o(this.tree._compare,L[0])}else if(u.left||u.right){u.left?f(u,u.left):u.right&&f(u,u.right),u._color=r;for(var m=0;m<L.length-1;++m)L[m]._count--;return new o(this.tree._compare,L[0])}else{if(L.length===1)return new o(this.tree._compare,null);for(var m=0;m<L.length;++m)L[m]._count--;var O=L[L.length-2];x(L),O.left===u?O.left=null:O.right=null}return new o(this.tree._compare,L[0])},Object.defineProperty(c,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(c,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(c,"index",{get:function(){var A=0,L=this._stack;if(L.length===0){var u=this.tree.root;return u?u._count:0}else L[L.length-1].left&&(A=L[L.length-1].left._count);for(var m=L.length-2;m>=0;--m)L[m+1]===L[m].right&&(++A,L[m].left&&(A+=L[m].left._count));return A},enumerable:!0}),c.next=function(){var A=this._stack;if(A.length!==0){var L=A[A.length-1];if(L.right)for(L=L.right;L;)A.push(L),L=L.left;else for(A.pop();A.length>0&&A[A.length-1].right===L;)L=A[A.length-1],A.pop()}},Object.defineProperty(c,"hasNext",{get:function(){var A=this._stack;if(A.length===0)return!1;if(A[A.length-1].right)return!0;for(var L=A.length-1;L>0;--L)if(A[L-1].left===A[L])return!0;return!1}}),c.update=function(A){var L=this._stack;if(L.length===0)throw new Error("Can't update empty node!");var u=new Array(L.length),m=L[L.length-1];u[u.length-1]=new e(m._color,m.key,A,m.left,m.right,m._count);for(var S=L.length-2;S>=0;--S)m=L[S],m.left===L[S+1]?u[S]=new e(m._color,m.key,m.value,u[S+1],m.right,m._count):u[S]=new e(m._color,m.key,m.value,m.left,u[S+1],m._count);return new o(this.tree._compare,u[0])},c.prev=function(){var A=this._stack;if(A.length!==0){var L=A[A.length-1];if(L.left)for(L=L.left;L;)A.push(L),L=L.right;else for(A.pop();A.length>0&&A[A.length-1].left===L;)L=A[A.length-1],A.pop()}},Object.defineProperty(c,"hasPrev",{get:function(){var A=this._stack;if(A.length===0)return!1;if(A[A.length-1].left)return!0;for(var L=A.length-1;L>0;--L)if(A[L-1].right===A[L])return!0;return!1}});function k(A,L){return A<L?-1:A>L?1:0}function y(A){return new o(A||k,null)}},3837:function(v,d,r){v.exports=m;var e=r(4935),l=r(501),n=r(5304),s=r(6429),o=r(6444),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function b(S,w){return S[0]=w[0],S[1]=w[1],S[2]=w[2],S}function h(S){this.gl=S,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(S)}var _=h.prototype;_.update=function(S){S=S||{};function w(it,nt,q){if(q in S){var Z=S[q],$=this[q],V;(it?Array.isArray(Z)&&Array.isArray(Z[0]):Array.isArray(Z))?this[q]=V=[nt(Z[0]),nt(Z[1]),nt(Z[2])]:this[q]=V=[nt(Z),nt(Z),nt(Z)];for(var rt=0;rt<3;++rt)if(V[rt]!==$[rt])return!0}return!1}var I=w.bind(this,!1,Number),O=w.bind(this,!1,Boolean),D=w.bind(this,!1,String),P=w.bind(this,!0,function(it){if(Array.isArray(it)){if(it.length===3)return[+it[0],+it[1],+it[2],1];if(it.length===4)return[+it[0],+it[1],+it[2],+it[3]]}return[0,0,0,1]}),F,R=!1,B=!1;if("bounds"in S)for(var N=S.bounds,G=0;G<2;++G)for(var X=0;X<3;++X)N[G][X]!==this.bounds[G][X]&&(B=!0),this.bounds[G][X]=N[G][X];if("ticks"in S){F=S.ticks,R=!0,this.autoTicks=!1;for(var G=0;G<3;++G)this.tickSpacing[G]=0}else I("tickSpacing")&&(this.autoTicks=!0,B=!0);if(this._firstInit&&("ticks"in S||"tickSpacing"in S||(this.autoTicks=!0),B=!0,R=!0,this._firstInit=!1),B&&this.autoTicks&&(F=o.create(this.bounds,this.tickSpacing),R=!0),R){for(var G=0;G<3;++G)F[G].sort(function(nt,q){return nt.x-q.x});o.equal(F,this.ticks)?R=!1:this.ticks=F}O("tickEnable"),D("tickFont")&&(R=!0),I("tickSize"),I("tickAngle"),I("tickPad"),P("tickColor");var J=D("labels");D("labelFont")&&(J=!0),O("labelEnable"),I("labelSize"),I("labelPad"),P("labelColor"),O("lineEnable"),O("lineMirror"),I("lineWidth"),P("lineColor"),O("lineTickEnable"),O("lineTickMirror"),I("lineTickLength"),I("lineTickWidth"),P("lineTickColor"),O("gridEnable"),I("gridWidth"),P("gridColor"),O("zeroEnable"),P("zeroLineColor"),I("zeroLineWidth"),O("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(J||R)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&R&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=l(this.gl,this.bounds,this.ticks))};function a(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var c=[new a,new a,new a];function f(S,w,I,O,D){for(var P=S.primalOffset,F=S.primalMinor,R=S.mirrorOffset,B=S.mirrorMinor,N=O[w],G=0;G<3;++G)if(w!==G){var X=P,J=R,it=F,nt=B;N&1<<G&&(X=R,J=P,it=B,nt=F),X[G]=I[0][G],J[G]=I[1][G],D[G]>0?(it[G]=-1,nt[G]=0):(it[G]=0,nt[G]=1)}}var x=[0,0,0],k={model:p,view:p,projection:p,_ortho:!1};_.isOpaque=function(){return!0},_.isTransparent=function(){return!1},_.drawTransparent=function(S){};var y=0,A=[0,0,0],L=[0,0,0],u=[0,0,0];_.draw=function(S){S=S||k;for(var w=this.gl,I=S.model||p,O=S.view||p,D=S.projection||p,P=this.bounds,F=S._ortho||!1,R=s(I,O,D,P,F),B=R.cubeEdges,N=R.axis,G=O[12],X=O[13],J=O[14],it=O[15],nt=F?2:1,q=nt*this.pixelRatio*(D[3]*G+D[7]*X+D[11]*J+D[15]*it)/w.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=B[Z],this.lastCubeProps.axis[Z]=N[Z];for(var $=c,Z=0;Z<3;++Z)f(c[Z],Z,this.bounds,B,N);for(var w=this.gl,V=x,Z=0;Z<3;++Z)this.backgroundEnable[Z]?V[Z]=N[Z]:V[Z]=0;this._background.draw(I,O,D,P,V,this.backgroundColor),this._lines.bind(I,O,D,this);for(var Z=0;Z<3;++Z){var rt=[0,0,0];N[Z]>0?rt[Z]=P[1][Z]:rt[Z]=P[0][Z];for(var ot=0;ot<2;++ot){var H=(Z+1+ot)%3,Y=(Z+1+(ot^1))%3;this.gridEnable[H]&&this._lines.drawGrid(H,Y,this.bounds,rt,this.gridColor[H],this.gridWidth[H]*this.pixelRatio)}for(var ot=0;ot<2;++ot){var H=(Z+1+ot)%3,Y=(Z+1+(ot^1))%3;this.zeroEnable[Y]&&Math.min(P[0][Y],P[1][Y])<=0&&Math.max(P[0][Y],P[1][Y])>=0&&this._lines.drawZero(H,Y,this.bounds,rt,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}}for(var Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,$[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,$[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);for(var at=b(A,$[Z].primalMinor),et=b(L,$[Z].mirrorMinor),ct=this.lineTickLength,ot=0;ot<3;++ot){var ft=q/I[5*ot];at[ot]*=ct[ot]*ft,et[ot]*=ct[ot]*ft}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,$[Z].primalOffset,at,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,$[Z].mirrorOffset,et,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(I,O,D,this.pixelRatio);var yt,xt=.5,Ct,gt;function mt(Bt){gt=[0,0,0],gt[Bt]=1}function vt(Bt,re,Yt){var he=(Bt+1)%3,Zt=(Bt+2)%3,ae=re[he],oe=re[Zt],ce=Yt[he],ue=Yt[Zt];if(ae>0&&ue>0){mt(he);return}else if(ae>0&&ue<0){mt(he);return}else if(ae<0&&ue>0){mt(he);return}else if(ae<0&&ue<0){mt(he);return}else if(oe>0&&ce>0){mt(Zt);return}else if(oe>0&&ce<0){mt(Zt);return}else if(oe<0&&ce>0){mt(Zt);return}else if(oe<0&&ce<0){mt(Zt);return}}for(var Z=0;Z<3;++Z){for(var At=$[Z].primalMinor,Ot=$[Z].mirrorMinor,It=b(u,$[Z].primalOffset),ot=0;ot<3;++ot)this.lineTickEnable[Z]&&(It[ot]+=q*At[ot]*Math.max(this.lineTickLength[ot],0)/I[5*ot]);var St=[0,0,0];if(St[Z]=1,this.tickEnable[Z]){this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,Ct=1,yt=[this.tickAlign[Z],xt,Ct],yt[0]==="auto"?yt[0]=y:yt[0]=parseInt(""+yt[0]),gt=[0,0,0],vt(Z,At,Ot);for(var ot=0;ot<3;++ot)It[ot]+=q*At[ot]*this.tickPad[ot]/I[5*ot];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],It,this.tickColor[Z],St,gt,yt)}if(this.labelEnable[Z]){Ct=0,gt=[0,0,0],this.labels[Z].length>4&&(mt(Z),Ct=1),yt=[this.labelAlign[Z],xt,Ct],yt[0]==="auto"?yt[0]=y:yt[0]=parseInt(""+yt[0]);for(var ot=0;ot<3;++ot)It[ot]+=q*At[ot]*this.labelPad[ot]/I[5*ot];It[Z]+=.5*(P[0][Z]+P[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],It,this.labelColor[Z],[0,0,0],gt,yt)}}this._text.unbind()},_.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function m(S,w){var I=new h(S);return I.update(w),I}},5304:function(v,d,r){v.exports=p;var e=r(2762),l=r(8116),n=r(1879).bg;function s(b,h,_,a){this.gl=b,this.buffer=h,this.vao=_,this.shader=a}var o=s.prototype;o.draw=function(b,h,_,a,c,f){for(var x=!1,k=0;k<3;++k)x=x||c[k];if(x){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:b,view:h,projection:_,bounds:a,enable:c,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},o.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function p(b){for(var h=[],_=[],a=0,c=0;c<3;++c)for(var f=(c+1)%3,x=(c+2)%3,k=[0,0,0],y=[0,0,0],A=-1;A<=1;A+=2){_.push(a,a+2,a+1,a+1,a+2,a+3),k[c]=A,y[c]=A;for(var L=-1;L<=1;L+=2){k[f]=L;for(var u=-1;u<=1;u+=2)k[x]=u,h.push(k[0],k[1],k[2],y[0],y[1],y[2]),a+=1}var m=f;f=x,x=m}var S=e(b,new Float32Array(h)),w=e(b,new Uint16Array(_),b.ELEMENT_ARRAY_BUFFER),I=l(b,[{buffer:S,type:b.FLOAT,size:3,offset:0,stride:24},{buffer:S,type:b.FLOAT,size:3,offset:12,stride:24}],w),O=n(b);return O.attributes.position.location=0,O.attributes.normal.location=1,new s(b,S,I,O)}},6429:function(v,d,r){v.exports=A;var e=r(8828),l=r(6760),n=r(5202),s=r(3250),o=new Array(16),p=new Array(8),b=new Array(8),h=new Array(3),_=[0,0,0];(function(){for(var L=0;L<8;++L)p[L]=[1,1,1,1],b[L]=[1,1,1]})();function a(L,u,m){for(var S=0;S<4;++S){L[S]=m[12+S];for(var w=0;w<3;++w)L[S]+=u[w]*m[4*w+S]}}var c=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(L){for(var u=0;u<c.length;++u)if(L=n.positive(L,c[u]),L.length<3)return 0;for(var m=L[0],S=m[0]/m[3],w=m[1]/m[3],I=0,u=1;u+1<L.length;++u){var O=L[u],D=L[u+1],P=O[0]/O[3],F=O[1]/O[3],R=D[0]/D[3],B=D[1]/D[3],N=P-S,G=F-w,X=R-S,J=B-w;I+=Math.abs(N*J-G*X)}return I}var x=[1,1,1],k=[0,0,0],y={cubeEdges:x,axis:k};function A(L,u,m,S,w){l(o,u,L),l(o,m,o);for(var I=0,O=0;O<2;++O){h[2]=S[O][2];for(var D=0;D<2;++D){h[1]=S[D][1];for(var P=0;P<2;++P)h[0]=S[P][0],a(p[I],h,o),I+=1}}for(var F=-1,O=0;O<8;++O){for(var R=p[O][3],B=0;B<3;++B)b[O][B]=p[O][B]/R;w&&(b[O][2]*=-1),R<0&&(F<0||b[O][2]<b[F][2])&&(F=O)}if(F<0){F=0;for(var N=0;N<3;++N){for(var G=(N+2)%3,X=(N+1)%3,J=-1,it=-1,nt=0;nt<2;++nt){var q=nt<<N,Z=q+(nt<<G)+(1-nt<<X),$=q+(1-nt<<G)+(nt<<X);s(b[q],b[Z],b[$],_)<0||(nt?J=1:it=1)}if(J<0||it<0){it>J&&(F|=1<<N);continue}for(var nt=0;nt<2;++nt){var q=nt<<N,Z=q+(nt<<G)+(1-nt<<X),$=q+(1-nt<<G)+(nt<<X),V=f([p[q],p[Z],p[$],p[q+(1<<G)+(1<<X)]]);nt?J=V:it=V}if(it>J){F|=1<<N;continue}}}for(var rt=7^F,ot=-1,O=0;O<8;++O)O===F||O===rt||(ot<0||b[ot][1]>b[O][1])&&(ot=O);for(var H=-1,O=0;O<3;++O){var Y=ot^1<<O;if(!(Y===F||Y===rt)){H<0&&(H=Y);var X=b[Y];X[0]<b[H][0]&&(H=Y)}}for(var at=-1,O=0;O<3;++O){var Y=ot^1<<O;if(!(Y===F||Y===rt||Y===H)){at<0&&(at=Y);var X=b[Y];X[0]>b[at][0]&&(at=Y)}}var et=x;et[0]=et[1]=et[2]=0,et[e.log2(H^ot)]=ot&H,et[e.log2(ot^at)]=ot&at;var ct=at^7;ct===F||ct===rt?(ct=H^7,et[e.log2(at^ct)]=ct&at):et[e.log2(H^ct)]=ct&H;for(var ft=k,yt=F,N=0;N<3;++N)yt&1<<N?ft[N]=-1:ft[N]=1;return y}},501:function(v,d,r){v.exports=x;var e=r(2762),l=r(8116),n=r(1879).n,s=[0,0,0],o=[0,0,0],p=[0,0,0],b=[0,0,0],h=[1,1];function _(k){return k[0]=k[1]=k[2]=0,k}function a(k,y){return k[0]=y[0],k[1]=y[1],k[2]=y[2],k}function c(k,y,A,L,u,m,S,w){this.gl=k,this.vertBuffer=y,this.vao=A,this.shader=L,this.tickCount=u,this.tickOffset=m,this.gridCount=S,this.gridOffset=w}var f=c.prototype;f.bind=function(k,y,A){this.shader.bind(),this.shader.uniforms.model=k,this.shader.uniforms.view=y,this.shader.uniforms.projection=A,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(k,y,A,L,u){var m=_(o);this.shader.uniforms.majorAxis=o,m[k]=y[1][k]-y[0][k],this.shader.uniforms.minorAxis=m;var S=a(b,A);S[k]+=y[0][k],this.shader.uniforms.offset=S,this.shader.uniforms.lineWidth=u,this.shader.uniforms.color=L;var w=_(p);w[(k+2)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6);var w=_(p);w[(k+1)%3]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(k,y,A,L,u){if(this.tickCount[k]){var m=_(s);m[k]=1,this.shader.uniforms.majorAxis=m,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=A,this.shader.uniforms.color=L,this.shader.uniforms.lineWidth=u;var S=_(p);S[k]=1,this.shader.uniforms.screenAxis=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[k],this.tickOffset[k])}},f.drawGrid=function(k,y,A,L,u,m){if(this.gridCount[k]){var S=_(o);S[y]=A[1][y]-A[0][y],this.shader.uniforms.minorAxis=S;var w=a(b,L);w[y]+=A[0][y],this.shader.uniforms.offset=w;var I=_(s);I[k]=1,this.shader.uniforms.majorAxis=I;var O=_(p);O[k]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=m,this.shader.uniforms.color=u,this.vao.draw(this.gl.TRIANGLES,this.gridCount[k],this.gridOffset[k])}},f.drawZero=function(k,y,A,L,u,m){var S=_(o);this.shader.uniforms.majorAxis=S,S[k]=A[1][k]-A[0][k],this.shader.uniforms.minorAxis=S;var w=a(b,L);w[k]+=A[0][k],this.shader.uniforms.offset=w;var I=_(p);I[y]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=m,this.shader.uniforms.color=u,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function x(k,y,A){var L=[],u=[0,0,0],m=[0,0,0],S=[0,0,0],w=[0,0,0];L.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var I=0;I<3;++I){for(var O=L.length/3|0,D=0;D<A[I].length;++D){var P=+A[I][D].x;L.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var R=L.length/3|0;u[I]=O,m[I]=R-O;for(var O=L.length/3|0,F=0;F<A[I].length;++F){var P=+A[I][F].x;L.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var R=L.length/3|0;S[I]=O,w[I]=R-O}var B=e(k,new Float32Array(L)),N=l(k,[{buffer:B,type:k.FLOAT,size:3,stride:0,offset:0}]),G=n(k);return G.attributes.position.location=0,new c(k,B,N,G,m,u,w,S)}},1879:function(v,d,r){var e=r(3236),l=r(9405),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);d.n=function(_){return l(_,n,s,null,[{name:"position",type:"vec3"}])};var o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),p=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);d.Q=function(_){return l(_,o,p,null,[{name:"position",type:"vec3"}])};var b=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),h=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);d.bg=function(_){return l(_,b,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(v,d,r){v.exports=f;var e=r(2762),l=r(8116),n=r(4359),s=r(1879).Q,o=window||M.global||{},p=o.__TEXT_CACHE||{};o.__TEXT_CACHE={};var b=3;function h(x,k,y,A){this.gl=x,this.shader=k,this.buffer=y,this.vao=A,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var _=h.prototype,a=[0,0];_.bind=function(x,k,y,A){this.vao.bind(),this.shader.bind();var L=this.shader.uniforms;L.model=x,L.view=k,L.projection=y,L.pixelScale=A,a[0]=this.gl.drawingBufferWidth,a[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=a},_.unbind=function(){this.vao.unbind()},_.update=function(x,k,y,A,L){var u=[];function m(B,N,G,X,J,it){var nt=p[G];nt||(nt=p[G]={});var q=nt[N];q||(q=nt[N]=c(N,{triangles:!0,font:G,textAlign:"center",textBaseline:"middle",lineSpacing:J,styletags:it}));for(var Z=(X||12)/12,$=q.positions,V=q.cells,rt=0,ot=V.length;rt<ot;++rt)for(var H=V[rt],Y=2;Y>=0;--Y){var at=$[H[Y]];u.push(Z*at[0],-Z*at[1],B)}}for(var S=[0,0,0],w=[0,0,0],I=[0,0,0],O=[0,0,0],D=1.25,P={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){I[F]=u.length/b|0,m(.5*(x[0][F]+x[1][F]),k[F],y[F],12,D,P),O[F]=(u.length/b|0)-I[F],S[F]=u.length/b|0;for(var R=0;R<A[F].length;++R)A[F][R].text&&m(A[F][R].x,A[F][R].text,A[F][R].font||L,A[F][R].fontSize||12,D,P);w[F]=(u.length/b|0)-S[F]}this.buffer.update(u),this.tickOffset=S,this.tickCount=w,this.labelOffset=I,this.labelCount=O},_.drawTicks=function(x,k,y,A,L,u,m,S){this.tickCount[x]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=L,this.shader.uniforms.angle=y,this.shader.uniforms.scale=k,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=m,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x]))},_.drawLabel=function(x,k,y,A,L,u,m,S){this.labelCount[x]&&(this.shader.uniforms.axis=u,this.shader.uniforms.color=L,this.shader.uniforms.angle=y,this.shader.uniforms.scale=k,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=m,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[x],this.labelOffset[x]))},_.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function c(x,k){try{return n(x,k)}catch(y){return console.warn('error vectorizing text:"'+x+'" error:',y),{cells:[],positions:[]}}}function f(x,k,y,A,L,u){var m=e(x),S=l(x,[{buffer:m,size:3}]),w=s(x);w.attributes.position.location=0;var I=new h(x,w,m,S);return I.update(k,y,A,L,u),I}},6444:function(v,d){d.create=e,d.equal=l;function r(n,s){var o=n+"",p=o.indexOf("."),b=0;p>=0&&(b=o.length-p-1);var h=Math.pow(10,b),_=Math.round(n*s*h),a=_+"";if(a.indexOf("e")>=0)return a;var c=_/h,f=_%h;_<0?(c=-Math.ceil(c)|0,f=-f|0):(c=Math.floor(c)|0,f=f|0);var x=""+c;if(_<0&&(x="-"+x),b){for(var k=""+f;k.length<b;)k="0"+k;return x+"."+k}else return x}function e(n,s){for(var o=[],p=0;p<3;++p){for(var b=[],h=.5*(n[0][p]+n[1][p]),_=0;_*s[p]<=n[1][p];++_)b.push({x:_*s[p],text:r(s[p],_)});for(var _=-1;_*s[p]>=n[0][p];--_)b.push({x:_*s[p],text:r(s[p],_)});o.push(b)}return o}function l(n,s){for(var o=0;o<3;++o){if(n[o].length!==s[o].length)return!1;for(var p=0;p<n[o].length;++p){var b=n[o][p],h=s[o][p];if(b.x!==h.x||b.text!==h.text||b.font!==h.font||b.fontColor!==h.fontColor||b.fontSize!==h.fontSize||b.dx!==h.dx||b.dy!==h.dy)return!1}}return!0}},5445:function(v,d,r){v.exports=y;var e=r(5033),l=r(5202),n=r(6429),s=r(6760),o=r(5665),p=r(5352),b=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function _(A,L,u){this.lo=A,this.hi=L,this.pixelsPerDataUnit=u}var a=[0,0,0,1],c=[0,0,0,1];function f(A,L,u,m,S){for(var w=0;w<3;++w){for(var I=a,O=c,D=0;D<3;++D)O[D]=I[D]=u[D];O[3]=I[3]=1,O[w]+=1,p(O,O,L),O[3]<0&&(A[w]=1/0),I[w]-=1,p(I,I,L),I[3]<0&&(A[w]=1/0);var P=(I[0]/I[3]-O[0]/O[3])*m,F=(I[1]/I[3]-O[1]/O[3])*S;A[w]=.25*Math.sqrt(P*P+F*F)}return A}var x=[new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0),new _(1/0,-1/0,1/0)],k=[0,0,0];function y(A,L,u,m,F){var w=L.model||b,I=L.view||b,O=L.projection||b,D=L._ortho||!1,P=A.bounds,F=F||n(w,I,O,P,D),R=F.axis;s(h,I,w),s(h,O,h);for(var B=x,N=0;N<3;++N)B[N].lo=1/0,B[N].hi=-1/0,B[N].pixelsPerDataUnit=1/0;var G=e(o(h,h));o(h,h);for(var X=0;X<3;++X){var J=(X+1)%3,it=(X+2)%3,nt=k;t:for(var N=0;N<2;++N){var q=[];if(R[X]<0!=!!N){nt[X]=P[N][X];for(var Z=0;Z<2;++Z){nt[J]=P[Z^N][J];for(var $=0;$<2;++$)nt[it]=P[$^Z^N][it],q.push(nt.slice())}for(var V=D?5:4,Z=V;Z===V;++Z){if(q.length===0)continue t;q=l.positive(q,G[Z])}for(var Z=0;Z<q.length;++Z)for(var it=q[Z],rt=f(k,h,it,u,m),$=0;$<3;++$)B[$].lo=Math.min(B[$].lo,it[$]),B[$].hi=Math.max(B[$].hi,it[$]),$!==X&&(B[$].pixelsPerDataUnit=Math.min(B[$].pixelsPerDataUnit,Math.abs(rt[$])))}}}return B}},2762:function(v,d,r){var e=r(1888),l=r(5298),n=r(9618),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function o(c,f,x,k,y){this.gl=c,this.type=f,this.handle=x,this.length=k,this.usage=y}var p=o.prototype;p.bind=function(){this.gl.bindBuffer(this.type,this.handle)},p.unbind=function(){this.gl.bindBuffer(this.type,null)},p.dispose=function(){this.gl.deleteBuffer(this.handle)};function b(c,f,x,k,y,A){var L=y.length*y.BYTES_PER_ELEMENT;if(A<0)return c.bufferData(f,y,k),L;if(L+A>x)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return c.bufferSubData(f,A,y),x}function h(c,f){for(var x=e.malloc(c.length,f),k=c.length,y=0;y<k;++y)x[y]=c[y];return x}function _(c,f){for(var x=1,k=f.length-1;k>=0;--k){if(f[k]!==x)return!1;x*=c[k]}return!0}p.update=function(c,f){if(typeof f!="number"&&(f=-1),this.bind(),typeof c=="object"&&typeof c.shape<"u"){var x=c.dtype;if(s.indexOf(x)<0&&(x="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var k=gl.getExtension("OES_element_index_uint");k&&x!=="uint16"?x="uint32":x="uint16"}if(x===c.dtype&&_(c.shape,c.stride))c.offset===0&&c.data.length===c.shape[0]?this.length=b(this.gl,this.type,this.length,this.usage,c.data,f):this.length=b(this.gl,this.type,this.length,this.usage,c.data.subarray(c.offset,c.shape[0]),f);else{var y=e.malloc(c.size,x),A=n(y,c.shape);l.assign(A,c),f<0?this.length=b(this.gl,this.type,this.length,this.usage,y,f):this.length=b(this.gl,this.type,this.length,this.usage,y.subarray(0,c.size),f),e.free(y)}}else if(Array.isArray(c)){var L;this.type===this.gl.ELEMENT_ARRAY_BUFFER?L=h(c,"uint16"):L=h(c,"float32"),f<0?this.length=b(this.gl,this.type,this.length,this.usage,L,f):this.length=b(this.gl,this.type,this.length,this.usage,L.subarray(0,c.length),f),e.free(L)}else if(typeof c=="object"&&typeof c.length=="number")this.length=b(this.gl,this.type,this.length,this.usage,c,f);else if(typeof c=="number"||c===void 0){if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");c=c|0,c<=0&&(c=1),this.gl.bufferData(this.type,c|0,this.usage),this.length=c}else throw new Error("gl-buffer: Invalid data type")};function a(c,f,x,k){if(x=x||c.ARRAY_BUFFER,k=k||c.DYNAMIC_DRAW,x!==c.ARRAY_BUFFER&&x!==c.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(k!==c.DYNAMIC_DRAW&&k!==c.STATIC_DRAW&&k!==c.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var y=c.createBuffer(),A=new o(c,x,y,0,k);return A.update(f),A}v.exports=a},6405:function(v,d,r){var e=r(2931);v.exports=function(n,s){var o=n.positions,p=n.vectors,b={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return s&&(s[0]=[0,0,0],s[1]=[0,0,0]),b;for(var h=0,_=1/0,a=-1/0,c=1/0,f=-1/0,x=1/0,k=-1/0,y=null,A=null,L=[],u=1/0,m=!1,S=n.coneSizemode==="raw",w=0;w<o.length;w++){var I=o[w];_=Math.min(I[0],_),a=Math.max(I[0],a),c=Math.min(I[1],c),f=Math.max(I[1],f),x=Math.min(I[2],x),k=Math.max(I[2],k);var O=p[w];if(e.length(O)>h&&(h=e.length(O)),w&&!S){var D=2*e.distance(y,I)/(e.length(A)+e.length(O));D?(u=Math.min(u,D),m=!1):m=!0}m||(y=I,A=O),L.push(O)}var P=[_,c,x],F=[a,f,k];s&&(s[0]=P,s[1]=F),h===0&&(h=1);var R=1/h;isFinite(u)||(u=1),b.vectorScale=u;var B=n.coneSize||(S?1:.5);n.absoluteConeSize&&(B=n.absoluteConeSize*R),b.coneScale=B;for(var w=0,N=0;w<o.length;w++)for(var I=o[w],G=I[0],X=I[1],J=I[2],it=L[w],nt=e.length(it)*R,q=0,Z=8;q<Z;q++){b.positions.push([G,X,J,N++]),b.positions.push([G,X,J,N++]),b.positions.push([G,X,J,N++]),b.positions.push([G,X,J,N++]),b.positions.push([G,X,J,N++]),b.positions.push([G,X,J,N++]),b.vectors.push(it),b.vectors.push(it),b.vectors.push(it),b.vectors.push(it),b.vectors.push(it),b.vectors.push(it),b.vertexIntensity.push(nt,nt,nt),b.vertexIntensity.push(nt,nt,nt);var $=b.positions.length;b.cells.push([$-6,$-5,$-4],[$-3,$-2,$-1])}return b};var l=r(614);v.exports.createMesh=r(9060),v.exports.createConeMesh=function(n,s){return v.exports.createMesh(n,s,{shaders:l,traceType:"cone"})}},9060:function(v,d,r){var e=r(9405),l=r(2762),n=r(8116),s=r(7766),o=r(6760),p=r(7608),b=r(9618),h=r(6729),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(L,u,m,S,w,I,O,D,P,F,R){this.gl=L,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=u,this.dirty=!0,this.triShader=m,this.pickShader=S,this.trianglePositions=w,this.triangleVectors=I,this.triangleColors=D,this.triangleUVs=P,this.triangleIds=O,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=R,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=_,this._view=_,this._projection=_,this._resolution=[1,1]}var c=a.prototype;c.isOpaque=function(){return this.opacity>=1},c.isTransparent=function(){return this.opacity<1},c.pickSlots=1,c.setPickBase=function(L){this.pickId=L};function f(L){for(var u=h({colormap:L,nshades:256,format:"rgba"}),m=new Uint8Array(1024),S=0;S<256;++S){for(var w=u[S],I=0;I<3;++I)m[4*S+I]=w[I];m[4*S+3]=w[3]*255}return b(m,[256,256,4],[4,0,1])}function x(L){for(var u=L.length,m=new Array(u),S=0;S<u;++S)m[S]=L[S][2];return m}c.update=function(L){L=L||{};var u=this.gl;this.dirty=!0,"lightPosition"in L&&(this.lightPosition=L.lightPosition),"opacity"in L&&(this.opacity=L.opacity),"ambient"in L&&(this.ambientLight=L.ambient),"diffuse"in L&&(this.diffuseLight=L.diffuse),"specular"in L&&(this.specularLight=L.specular),"roughness"in L&&(this.roughness=L.roughness),"fresnel"in L&&(this.fresnel=L.fresnel),L.tubeScale!==void 0&&(this.tubeScale=L.tubeScale),L.vectorScale!==void 0&&(this.vectorScale=L.vectorScale),L.coneScale!==void 0&&(this.coneScale=L.coneScale),L.coneOffset!==void 0&&(this.coneOffset=L.coneOffset),L.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=u.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=u.LINEAR,this.texture.setPixels(f(L.colormap)),this.texture.generateMipmap());var m=L.cells,S=L.positions,w=L.vectors;if(!(!S||!m||!w)){var I=[],O=[],D=[],P=[],F=[];this.cells=m,this.positions=S,this.vectors=w;var R=L.meshColor||[1,1,1,1],B=L.vertexIntensity,N=1/0,G=-1/0;if(B)if(L.vertexIntensityBounds)N=+L.vertexIntensityBounds[0],G=+L.vertexIntensityBounds[1];else for(var X=0;X<B.length;++X){var J=B[X];N=Math.min(N,J),G=Math.max(G,J)}else for(var X=0;X<S.length;++X){var J=S[X][2];N=Math.min(N,J),G=Math.max(G,J)}B?this.intensity=B:this.intensity=x(S),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var X=0;X<S.length;++X)for(var it=S[X],nt=0;nt<3;++nt)isNaN(it[nt])||!isFinite(it[nt])||(this.bounds[0][nt]=Math.min(this.bounds[0][nt],it[nt]),this.bounds[1][nt]=Math.max(this.bounds[1][nt],it[nt]));var q=0;t:for(var X=0;X<m.length;++X){var Z=m[X];switch(Z.length){case 3:for(var nt=0;nt<3;++nt)for(var $=Z[nt],it=S[$],V=0;V<3;++V)if(isNaN(it[V])||!isFinite(it[V]))continue t;for(var nt=0;nt<3;++nt){var $=Z[2-nt],it=S[$];I.push(it[0],it[1],it[2],it[3]);var rt=w[$];O.push(rt[0],rt[1],rt[2],rt[3]||0);var ot=R;ot.length===3?D.push(ot[0],ot[1],ot[2],1):D.push(ot[0],ot[1],ot[2],ot[3]);var H;B?H=[(B[$]-N)/(G-N),0]:H=[(it[2]-N)/(G-N),0],P.push(H[0],H[1]),F.push(X)}q+=1;break}}this.triangleCount=q,this.trianglePositions.update(I),this.triangleVectors.update(O),this.triangleColors.update(D),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(F))}},c.drawTransparent=c.draw=function(L){L=L||{};for(var u=this.gl,m=L.model||_,S=L.view||_,w=L.projection||_,I=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],O=0;O<3;++O)I[0][O]=Math.max(I[0][O],this.clipBounds[0][O]),I[1][O]=Math.min(I[1][O],this.clipBounds[1][O]);var D={model:m,view:S,projection:w,inverseModel:_.slice(),clipBounds:I,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};D.inverseModel=p(D.inverseModel,D.model),u.disable(u.CULL_FACE),this.texture.bind(0);var P=new Array(16);o(P,D.view,D.model),o(P,D.projection,P),p(P,P);for(var O=0;O<3;++O)D.eyePosition[O]=P[12+O]/P[15];for(var F=P[15],O=0;O<3;++O)F+=this.lightPosition[O]*P[4*O+3];for(var O=0;O<3;++O){for(var R=P[12+O],B=0;B<3;++B)R+=P[4*B+O]*this.lightPosition[B];D.lightPosition[O]=R/F}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=D,this.triangleVAO.bind(),u.drawArrays(u.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},c.drawPick=function(L){L=L||{};for(var u=this.gl,m=L.model||_,S=L.view||_,w=L.projection||_,I=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],O=0;O<3;++O)I[0][O]=Math.max(I[0][O],this.clipBounds[0][O]),I[1][O]=Math.min(I[1][O],this.clipBounds[1][O]);this._model=[].slice.call(m),this._view=[].slice.call(S),this._projection=[].slice.call(w),this._resolution=[u.drawingBufferWidth,u.drawingBufferHeight];var D={model:m,view:S,projection:w,clipBounds:I,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=D,this.triangleCount>0&&(this.triangleVAO.bind(),u.drawArrays(u.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},c.pick=function(L){if(!L||L.id!==this.pickId)return null;var u=L.value[0]+256*L.value[1]+65536*L.value[2],m=this.cells[u],S=this.positions[m[1]].slice(0,3),w={position:S,dataCoordinate:S,index:Math.floor(m[1]/48)};return this.traceType==="cone"?w.index=Math.floor(m[1]/48):this.traceType==="streamtube"&&(w.intensity=this.intensity[m[1]],w.velocity=this.vectors[m[1]].slice(0,3),w.divergence=this.vectors[m[1]][3],w.index=u),w},c.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function k(L,u){var m=e(L,u.meshShader.vertex,u.meshShader.fragment,null,u.meshShader.attributes);return m.attributes.position.location=0,m.attributes.color.location=2,m.attributes.uv.location=3,m.attributes.vector.location=4,m}function y(L,u){var m=e(L,u.pickShader.vertex,u.pickShader.fragment,null,u.pickShader.attributes);return m.attributes.position.location=0,m.attributes.id.location=1,m.attributes.vector.location=4,m}function A(L,u,m){var S=m.shaders;arguments.length===1&&(u=L,L=u.gl);var w=k(L,S),I=y(L,S),O=s(L,b(new Uint8Array([255,255,255,255]),[1,1,4]));O.generateMipmap(),O.minFilter=L.LINEAR_MIPMAP_LINEAR,O.magFilter=L.LINEAR;var D=l(L),P=l(L),F=l(L),R=l(L),B=l(L),N=n(L,[{buffer:D,type:L.FLOAT,size:4},{buffer:B,type:L.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:L.FLOAT,size:4},{buffer:R,type:L.FLOAT,size:2},{buffer:P,type:L.FLOAT,size:4}]),G=new a(L,O,w,I,D,P,B,F,R,N,m.traceType||"cone");return G.update(u),G}v.exports=A},614:function(v,d,r){var e=r(3236),l=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);d.meshShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},d.pickShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(v){v.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(v,d,r){var e=r(737);v.exports=function(l){return e[l]}},9165:function(v,d,r){v.exports=a;var e=r(2762),l=r(8116),n=r(3436),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(c,f,x,k){this.gl=c,this.shader=k,this.buffer=f,this.vao=x,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var p=o.prototype;p.isOpaque=function(){return!this.hasAlpha},p.isTransparent=function(){return this.hasAlpha},p.drawTransparent=p.draw=function(c){var f=this.gl,x=this.shader.uniforms;this.shader.bind();var k=x.view=c.view||s,y=x.projection=c.projection||s;x.model=c.model||s,x.clipBounds=this.clipBounds,x.opacity=this.opacity;var A=k[12],L=k[13],u=k[14],m=k[15],S=c._ortho||!1,w=S?2:1,I=w*this.pixelRatio*(y[3]*A+y[7]*L+y[11]*u+y[15]*m)/f.drawingBufferHeight;this.vao.bind();for(var O=0;O<3;++O)f.lineWidth(this.lineWidth[O]*this.pixelRatio),x.capSize=this.capSize[O]*I,this.lineCount[O]&&f.drawArrays(f.LINES,this.lineOffset[O],this.lineCount[O]);this.vao.unbind()};function b(c,f){for(var x=0;x<3;++x)c[0][x]=Math.min(c[0][x],f[x]),c[1][x]=Math.max(c[1][x],f[x])}var h=function(){for(var c=new Array(3),f=0;f<3;++f){for(var x=[],k=1;k<=2;++k)for(var y=-1;y<=1;y+=2){var A=(k+f)%3,L=[0,0,0];L[A]=y,x.push(L)}c[f]=x}return c}();function _(c,f,x,k){for(var y=h[k],A=0;A<y.length;++A){var L=y[A];c.push(f[0],f[1],f[2],x[0],x[1],x[2],x[3],L[0],L[1],L[2])}return y.length}p.update=function(c){c=c||{},"lineWidth"in c&&(this.lineWidth=c.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in c&&(this.capSize=c.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in c&&(this.opacity=+c.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=c.color||[[0,0,0],[0,0,0],[0,0,0]],x=c.position,k=c.error;if(Array.isArray(f[0])||(f=[f,f,f]),x&&k){var y=[],A=x.length,L=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var u=0;u<3;++u){this.lineOffset[u]=L;t:for(var m=0;m<A;++m){for(var S=x[m],w=0;w<3;++w)if(isNaN(S[w])||!isFinite(S[w]))continue t;var I=k[m],O=f[u];if(Array.isArray(O[0])&&(O=f[m]),O.length===3?O=[O[0],O[1],O[2],1]:O.length===4&&(O=[O[0],O[1],O[2],O[3]],!this.hasAlpha&&O[3]<1&&(this.hasAlpha=!0)),!(isNaN(I[0][u])||isNaN(I[1][u]))){if(I[0][u]<0){var D=S.slice();D[u]+=I[0][u],y.push(S[0],S[1],S[2],O[0],O[1],O[2],O[3],0,0,0,D[0],D[1],D[2],O[0],O[1],O[2],O[3],0,0,0),b(this.bounds,D),L+=2+_(y,D,O,u)}if(I[1][u]>0){var D=S.slice();D[u]+=I[1][u],y.push(S[0],S[1],S[2],O[0],O[1],O[2],O[3],0,0,0,D[0],D[1],D[2],O[0],O[1],O[2],O[3],0,0,0),b(this.bounds,D),L+=2+_(y,D,O,u)}}}this.lineCount[u]=L-this.lineOffset[u]}this.buffer.update(y)}},p.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function a(c){var f=c.gl,x=e(f),k=l(f,[{buffer:x,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:x,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:x,type:f.FLOAT,size:3,offset:28,stride:40}]),y=n(f);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var A=new o(f,x,k,y);return A.update(c),A}},3436:function(v,d,r){var e=r(3236),l=r(9405),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);v.exports=function(o){return l(o,n,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(v,d,r){var e=r(7766);v.exports=L;var l=null,n,s,o,p;function b(u){var m=u.getParameter(u.FRAMEBUFFER_BINDING),S=u.getParameter(u.RENDERBUFFER_BINDING),w=u.getParameter(u.TEXTURE_BINDING_2D);return[m,S,w]}function h(u,m){u.bindFramebuffer(u.FRAMEBUFFER,m[0]),u.bindRenderbuffer(u.RENDERBUFFER,m[1]),u.bindTexture(u.TEXTURE_2D,m[2])}function _(u,m){var S=u.getParameter(m.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(S+1);for(var w=0;w<=S;++w){for(var I=new Array(S),O=0;O<w;++O)I[O]=u.COLOR_ATTACHMENT0+O;for(var O=w;O<S;++O)I[O]=u.NONE;l[w]=I}}function a(u){switch(u){case n:throw new Error("gl-fbo: Framebuffer unsupported");case s:throw new Error("gl-fbo: Framebuffer incomplete attachment");case o:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case p:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(u,m,S,w,I,O){if(!w)return null;var D=e(u,m,S,I,w);return D.magFilter=u.NEAREST,D.minFilter=u.NEAREST,D.mipSamples=1,D.bind(),u.framebufferTexture2D(u.FRAMEBUFFER,O,u.TEXTURE_2D,D.handle,0),D}function f(u,m,S,w,I){var O=u.createRenderbuffer();return u.bindRenderbuffer(u.RENDERBUFFER,O),u.renderbufferStorage(u.RENDERBUFFER,w,m,S),u.framebufferRenderbuffer(u.FRAMEBUFFER,I,u.RENDERBUFFER,O),O}function x(u){var m=b(u.gl),S=u.gl,w=u.handle=S.createFramebuffer(),I=u._shape[0],O=u._shape[1],D=u.color.length,P=u._ext,F=u._useStencil,R=u._useDepth,B=u._colorType;S.bindFramebuffer(S.FRAMEBUFFER,w);for(var N=0;N<D;++N)u.color[N]=c(S,I,O,B,S.RGBA,S.COLOR_ATTACHMENT0+N);D===0?(u._color_rb=f(S,I,O,S.RGBA4,S.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(l[0])):D>1&&P.drawBuffersWEBGL(l[D]);var G=S.getExtension("WEBGL_depth_texture");G?F?u.depth=c(S,I,O,G.UNSIGNED_INT_24_8_WEBGL,S.DEPTH_STENCIL,S.DEPTH_STENCIL_ATTACHMENT):R&&(u.depth=c(S,I,O,S.UNSIGNED_SHORT,S.DEPTH_COMPONENT,S.DEPTH_ATTACHMENT)):R&&F?u._depth_rb=f(S,I,O,S.DEPTH_STENCIL,S.DEPTH_STENCIL_ATTACHMENT):R?u._depth_rb=f(S,I,O,S.DEPTH_COMPONENT16,S.DEPTH_ATTACHMENT):F&&(u._depth_rb=f(S,I,O,S.STENCIL_INDEX,S.STENCIL_ATTACHMENT));var X=S.checkFramebufferStatus(S.FRAMEBUFFER);if(X!==S.FRAMEBUFFER_COMPLETE){u._destroyed=!0,S.bindFramebuffer(S.FRAMEBUFFER,null),S.deleteFramebuffer(u.handle),u.handle=null,u.depth&&(u.depth.dispose(),u.depth=null),u._depth_rb&&(S.deleteRenderbuffer(u._depth_rb),u._depth_rb=null);for(var N=0;N<u.color.length;++N)u.color[N].dispose(),u.color[N]=null;u._color_rb&&(S.deleteRenderbuffer(u._color_rb),u._color_rb=null),h(S,m),a(X)}h(S,m)}function k(u,m,S,w,I,O,D,P){this.gl=u,this._shape=[m|0,S|0],this._destroyed=!1,this._ext=P,this.color=new Array(I);for(var F=0;F<I;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=w,this._useDepth=O,this._useStencil=D;var R=this,B=[m|0,S|0];Object.defineProperties(B,{0:{get:function(){return R._shape[0]},set:function(N){return R.width=N}},1:{get:function(){return R._shape[1]},set:function(N){return R.height=N}}}),this._shapeVector=B,x(this)}var y=k.prototype;function A(u,m,S){if(u._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(u._shape[0]===m&&u._shape[1]===S)){var w=u.gl,I=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(m<0||m>I||S<0||S>I)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");u._shape[0]=m,u._shape[1]=S;for(var O=b(w),D=0;D<u.color.length;++D)u.color[D].shape=u._shape;u._color_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,u._color_rb),w.renderbufferStorage(w.RENDERBUFFER,w.RGBA4,u._shape[0],u._shape[1])),u.depth&&(u.depth.shape=u._shape),u._depth_rb&&(w.bindRenderbuffer(w.RENDERBUFFER,u._depth_rb),u._useDepth&&u._useStencil?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,u._shape[0],u._shape[1]):u._useDepth?w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_COMPONENT16,u._shape[0],u._shape[1]):u._useStencil&&w.renderbufferStorage(w.RENDERBUFFER,w.STENCIL_INDEX,u._shape[0],u._shape[1])),w.bindFramebuffer(w.FRAMEBUFFER,u.handle);var P=w.checkFramebufferStatus(w.FRAMEBUFFER);P!==w.FRAMEBUFFER_COMPLETE&&(u.dispose(),h(w,O),a(P)),h(w,O)}}Object.defineProperties(y,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(u){if(Array.isArray(u)||(u=[u|0,u|0]),u.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var m=u[0]|0,S=u[1]|0;return A(this,m,S),[m,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(u){return u=u|0,A(this,u,this._shape[1]),u},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(u){return u=u|0,A(this,this._shape[0],u),u},enumerable:!1}}),y.bind=function(){if(!this._destroyed){var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,this.handle),u.viewport(0,0,this._shape[0],this._shape[1])}},y.dispose=function(){if(!this._destroyed){this._destroyed=!0;var u=this.gl;u.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(u.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var m=0;m<this.color.length;++m)this.color[m].dispose(),this.color[m]=null;this._color_rb&&(u.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function L(u,m,S,w){n||(n=u.FRAMEBUFFER_UNSUPPORTED,s=u.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=u.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,p=u.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var I=u.getExtension("WEBGL_draw_buffers");if(!l&&I&&_(u,I),Array.isArray(m)&&(w=S,S=m[1]|0,m=m[0]|0),typeof m!="number")throw new Error("gl-fbo: Missing shape parameter");var O=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(m<0||m>O||S<0||S>O)throw new Error("gl-fbo: Parameters are too large for FBO");w=w||{};var D=1;if("color"in w){if(D=Math.max(w.color|0,0),D<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(D>1)if(I){if(D>u.getParameter(I.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+D+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=u.UNSIGNED_BYTE,F=u.getExtension("OES_texture_float");if(w.float&&D>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");P=u.FLOAT}else w.preferFloat&&D>0&&F&&(P=u.FLOAT);var R=!0;"depth"in w&&(R=!!w.depth);var B=!1;return"stencil"in w&&(B=!!w.stencil),new k(u,m,S,P,D,R,B,I)}},2992:function(v,d,r){var e=r(3387).sprintf,l=r(5171),n=r(1848),s=r(1085);v.exports=o;function o(p,b,h){var _=n(b)||"of unknown name (see npm glsl-shader-name)",a="unknown type";h!==void 0&&(a=h===l.FRAGMENT_SHADER?"fragment":"vertex");for(var c=e(`Error compiling %s shader %s:
`,a,_),f=e("%s%s",c,p),x=p.split(`
`),k={},y=0;y<x.length;y++){var A=x[y];if(!(A===""||A==="\0")){var L=parseInt(A.split(":")[2]);if(isNaN(L))throw new Error(e("Could not parse error: %s",A));k[L]=A}}for(var u=s(b).split(`
`),y=0;y<u.length;y++)if(!(!k[y+3]&&!k[y+2]&&!k[y+1])){var m=u[y];if(c+=m+`
`,k[y+1]){var S=k[y+1];S=S.substr(S.split(":",3).join(":").length+1).trim(),c+=e(`^^^ %s

`,S)}}return{long:c.trim(),short:f.trim()}}},2510:function(v,d,r){v.exports=a;var e=r(2478),l=r(7762),n=r(1888),s=r(9405),o=r(2762),p=r(6768);function b(c,f,x,k,y,A,L){this.plot=c,this.shader=f,this.pickShader=x,this.positionBuffer=k,this.weightBuffer=y,this.colorBuffer=A,this.idBuffer=L,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var h=b.prototype,_=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=function(){var c=[1,0,0,0,1,0,0,0,1];return function(){var f=this.plot,x=this.shader,k=this.bounds,y=this.numVertices;if(!(y<=0)){var A=f.gl,L=f.dataBox,u=k[2]-k[0],m=k[3]-k[1],S=L[2]-L[0],w=L[3]-L[1];c[0]=2*u/S,c[4]=2*m/w,c[6]=2*(k[0]-L[0])/S-1,c[7]=2*(k[1]-L[1])/w-1,x.bind();var I=x.uniforms;I.viewTransform=c,I.shape=this.shape;var O=x.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(A.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(A.UNSIGNED_BYTE,!0),A.drawArrays(A.TRIANGLES,0,y)}}}(),h.drawPick=function(){var c=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0];return function(x){var k=this.plot,y=this.pickShader,A=this.bounds,L=this.numVertices;if(!(L<=0)){var u=k.gl,m=k.dataBox,S=A[2]-A[0],w=A[3]-A[1],I=m[2]-m[0],O=m[3]-m[1];c[0]=2*S/I,c[4]=2*w/O,c[6]=2*(A[0]-m[0])/I-1,c[7]=2*(A[1]-m[1])/O-1;for(var D=0;D<4;++D)f[D]=x>>D*8&255;this.pickOffset=x,y.bind();var P=y.uniforms;P.viewTransform=c,P.pickOffset=f,P.shape=this.shape;var F=y.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(u.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(u.UNSIGNED_BYTE,!1),u.drawArrays(u.TRIANGLES,0,L),x+this.shape[0]*this.shape[1]}}}(),h.pick=function(c,f,x){var k=this.pickOffset,y=this.shape[0]*this.shape[1];if(x<k||x>=k+y)return null;var A=x-k,L=this.xData,u=this.yData;return{object:this,pointId:A,dataCoord:[L[A%this.shape[0]],u[A/this.shape[0]|0]]}},h.update=function(c){c=c||{};var f=c.shape||[0,0],x=c.x||l(f[0]),k=c.y||l(f[1]),y=c.z||new Float32Array(f[0]*f[1]),A=c.zsmooth!==!1;this.xData=x,this.yData=k;var L=c.colorLevels||[0],u=c.colorValues||[0,0,0,1],m=L.length,S=this.bounds,w,I,O,D;A?(w=S[0]=x[0],I=S[1]=k[0],O=S[2]=x[x.length-1],D=S[3]=k[k.length-1]):(w=S[0]=x[0]+(x[1]-x[0])/2,I=S[1]=k[0]+(k[1]-k[0])/2,O=S[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,D=S[3]=k[k.length-1]+(k[k.length-1]-k[k.length-2])/2);var P=1/(O-w),F=1/(D-I),R=f[0],B=f[1];this.shape=[R,B];var N=(A?(R-1)*(B-1):R*B)*(_.length>>>1);this.numVertices=N;for(var G=n.mallocUint8(N*4),X=n.mallocFloat32(N*2),J=n.mallocUint8(N*2),it=n.mallocUint32(N),nt=0,q=A?R-1:R,Z=A?B-1:B,$=0;$<Z;++$){var V,rt;A?(V=F*(k[$]-I),rt=F*(k[$+1]-I)):(V=$<B-1?F*(k[$]-(k[$+1]-k[$])/2-I):F*(k[$]-(k[$]-k[$-1])/2-I),rt=$<B-1?F*(k[$]+(k[$+1]-k[$])/2-I):F*(k[$]+(k[$]-k[$-1])/2-I));for(var ot=0;ot<q;++ot){var H,Y;A?(H=P*(x[ot]-w),Y=P*(x[ot+1]-w)):(H=ot<R-1?P*(x[ot]-(x[ot+1]-x[ot])/2-w):P*(x[ot]-(x[ot]-x[ot-1])/2-w),Y=ot<R-1?P*(x[ot]+(x[ot+1]-x[ot])/2-w):P*(x[ot]+(x[ot]-x[ot-1])/2-w));for(var at=0;at<_.length;at+=2){var et=_[at],ct=_[at+1],ft=A?($+ct)*R+(ot+et):$*R+ot,yt=y[ft],xt=e.le(L,yt),Ct,gt,mt,vt;if(xt<0)Ct=u[0],gt=u[1],mt=u[2],vt=u[3];else if(xt===m-1)Ct=u[4*m-4],gt=u[4*m-3],mt=u[4*m-2],vt=u[4*m-1];else{var At=(yt-L[xt])/(L[xt+1]-L[xt]),Ot=1-At,It=4*xt,St=4*(xt+1);Ct=Ot*u[It]+At*u[St],gt=Ot*u[It+1]+At*u[St+1],mt=Ot*u[It+2]+At*u[St+2],vt=Ot*u[It+3]+At*u[St+3]}G[4*nt]=255*Ct,G[4*nt+1]=255*gt,G[4*nt+2]=255*mt,G[4*nt+3]=255*vt,X[2*nt]=H*.5+Y*.5,X[2*nt+1]=V*.5+rt*.5,J[2*nt]=et,J[2*nt+1]=ct,it[nt]=$*R+ot,nt+=1}}}this.positionBuffer.update(X),this.weightBuffer.update(J),this.colorBuffer.update(G),this.idBuffer.update(it),n.free(X),n.free(G),n.free(J),n.free(it)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function a(c,f){var x=c.gl,k=s(x,p.vertex,p.fragment),y=s(x,p.pickVertex,p.pickFragment),A=o(x),L=o(x),u=o(x),m=o(x),S=new b(c,k,y,A,L,u,m);return S.update(f),c.addObject(S),S}},6768:function(v,d,r){var e=r(3236);v.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(v,d,r){var e=r(3236),l=r(9405),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),s=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),o=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),p=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];d.createShader=function(b){return l(b,n,s,null,p)},d.createPickShader=function(b){return l(b,n,o,null,p)}},5714:function(v,d,r){v.exports=u;var e=r(2762),l=r(8116),n=r(7766),s=new Uint8Array(4),o=new Float32Array(s.buffer);function p(m,S,w,I){return s[0]=I,s[1]=w,s[2]=S,s[3]=m,o[0]}var b=r(2478),h=r(9618),_=r(7319),a=_.createShader,c=_.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function x(m,S){for(var w=0,I=0;I<3;++I){var O=m[I]-S[I];w+=O*O}return Math.sqrt(w)}function k(m){for(var S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],w=0;w<3;++w)S[0][w]=Math.max(m[0][w],S[0][w]),S[1][w]=Math.min(m[1][w],S[1][w]);return S}function y(m,S,w,I){this.arcLength=m,this.position=S,this.index=w,this.dataCoordinate=I}function A(m,S,w,I,O,D){this.gl=m,this.shader=S,this.pickShader=w,this.buffer=I,this.vao=O,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=D,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var L=A.prototype;L.isTransparent=function(){return this.hasAlpha},L.isOpaque=function(){return!this.hasAlpha},L.pickSlots=1,L.setPickBase=function(m){this.pickId=m},L.drawTransparent=L.draw=function(m){if(this.vertexCount){var S=this.gl,w=this.shader,I=this.vao;w.bind(),w.uniforms={model:m.model||f,view:m.view||f,projection:m.projection||f,clipBounds:k(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[S.drawingBufferWidth,S.drawingBufferHeight],pixelRatio:this.pixelRatio},I.bind(),I.draw(S.TRIANGLE_STRIP,this.vertexCount),I.unbind()}},L.drawPick=function(m){if(this.vertexCount){var S=this.gl,w=this.pickShader,I=this.vao;w.bind(),w.uniforms={model:m.model||f,view:m.view||f,projection:m.projection||f,pickId:this.pickId,clipBounds:k(this.clipBounds),screenShape:[S.drawingBufferWidth,S.drawingBufferHeight],pixelRatio:this.pixelRatio},I.bind(),I.draw(S.TRIANGLE_STRIP,this.vertexCount),I.unbind()}},L.update=function(m){var S,w;this.dirty=!0;var I=!!m.connectGaps;"dashScale"in m&&(this.dashScale=m.dashScale),this.hasAlpha=!1,"opacity"in m&&(this.opacity=+m.opacity,this.opacity<1&&(this.hasAlpha=!0));var O=[],D=[],P=[],F=0,R=0,B=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=m.position||m.positions;if(N){var G=m.color||m.colors||[0,0,0,1],X=m.lineWidth||1,J=!1;t:for(S=1;S<N.length;++S){var it=N[S-1],nt=N[S];for(D.push(F),P.push(it.slice()),w=0;w<3;++w){if(isNaN(it[w])||isNaN(nt[w])||!isFinite(it[w])||!isFinite(nt[w])){if(!I&&O.length>0){for(var q=0;q<24;++q)O.push(O[O.length-12]);R+=2,J=!0}continue t}B[0][w]=Math.min(B[0][w],it[w],nt[w]),B[1][w]=Math.max(B[1][w],it[w],nt[w])}var Z,$;Array.isArray(G[0])?(Z=G.length>S-1?G[S-1]:G.length>0?G[G.length-1]:[0,0,0,1],$=G.length>S?G[S]:G.length>0?G[G.length-1]:[0,0,0,1]):Z=$=G,Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),$.length===3&&($=[$[0],$[1],$[2],1]),!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0);var V;Array.isArray(X)?V=X.length>S-1?X[S-1]:X.length>0?X[X.length-1]:[0,0,0,1]:V=X;var rt=F;if(F+=x(it,nt),J){for(w=0;w<2;++w)O.push(it[0],it[1],it[2],nt[0],nt[1],nt[2],rt,V,Z[0],Z[1],Z[2],Z[3]);R+=2,J=!1}O.push(it[0],it[1],it[2],nt[0],nt[1],nt[2],rt,V,Z[0],Z[1],Z[2],Z[3],it[0],it[1],it[2],nt[0],nt[1],nt[2],rt,-V,Z[0],Z[1],Z[2],Z[3],nt[0],nt[1],nt[2],it[0],it[1],it[2],F,-V,$[0],$[1],$[2],$[3],nt[0],nt[1],nt[2],it[0],it[1],it[2],F,V,$[0],$[1],$[2],$[3]),R+=4}}if(this.buffer.update(O),D.push(F),P.push(N[N.length-1].slice()),this.bounds=B,this.vertexCount=R,this.points=P,this.arcLength=D,"dashes"in m){var ot=m.dashes,H=ot.slice();for(H.unshift(0),S=1;S<H.length;++S)H[S]=H[S-1]+H[S];var Y=h(new Array(256*4),[256,1,4]);for(S=0;S<256;++S){for(w=0;w<4;++w)Y.set(S,0,w,0);b.le(H,H[H.length-1]*S/255)&1?Y.set(S,0,0,0):Y.set(S,0,0,255)}this.texture.setPixels(Y)}},L.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},L.pick=function(m){if(!m||m.id!==this.pickId)return null;var S=p(m.value[0],m.value[1],m.value[2],0),w=b.le(this.arcLength,S);if(w<0)return null;if(w===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),w);for(var I=this.points[w],O=this.points[Math.min(w+1,this.points.length-1)],D=(S-this.arcLength[w])/(this.arcLength[w+1]-this.arcLength[w]),P=1-D,F=[0,0,0],R=0;R<3;++R)F[R]=P*I[R]+D*O[R];var B=Math.min(D<.5?w:w+1,this.points.length-1);return new y(S,F,B,this.points[B])};function u(m){var S=m.gl||m.scene&&m.scene.gl,w=a(S);w.attributes.position.location=0,w.attributes.nextPosition.location=1,w.attributes.arcLength.location=2,w.attributes.lineWidth.location=3,w.attributes.color.location=4;var I=c(S);I.attributes.position.location=0,I.attributes.nextPosition.location=1,I.attributes.arcLength.location=2,I.attributes.lineWidth.location=3,I.attributes.color.location=4;for(var O=e(S),D=l(S,[{buffer:O,size:3,offset:0,stride:48},{buffer:O,size:3,offset:12,stride:48},{buffer:O,size:1,offset:24,stride:48},{buffer:O,size:1,offset:28,stride:48},{buffer:O,size:4,offset:32,stride:48}]),P=h(new Array(1024),[256,1,4]),F=0;F<1024;++F)P.data[F]=255;var R=n(S,P);R.wrap=S.REPEAT;var B=new A(S,w,I,O,D,R);return B.update(m),B}},1903:function(v){v.exports=d;function d(r){var e=new Float32Array(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},6864:function(v){v.exports=d;function d(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},9921:function(v){v.exports=d;function d(r){var e=r[0],l=r[1],n=r[2],s=r[3],o=r[4],p=r[5],b=r[6],h=r[7],_=r[8],a=r[9],c=r[10],f=r[11],x=r[12],k=r[13],y=r[14],A=r[15],L=e*p-l*o,u=e*b-n*o,m=e*h-s*o,S=l*b-n*p,w=l*h-s*p,I=n*h-s*b,O=_*k-a*x,D=_*y-c*x,P=_*A-f*x,F=a*y-c*k,R=a*A-f*k,B=c*A-f*y;return L*B-u*R+m*F+S*P-w*D+I*O}},7399:function(v){v.exports=d;function d(r,e){var l=e[0],n=e[1],s=e[2],o=e[3],p=l+l,b=n+n,h=s+s,_=l*p,a=n*p,c=n*b,f=s*p,x=s*b,k=s*h,y=o*p,A=o*b,L=o*h;return r[0]=1-c-k,r[1]=a+L,r[2]=f-A,r[3]=0,r[4]=a-L,r[5]=1-_-k,r[6]=x+y,r[7]=0,r[8]=f+A,r[9]=x-y,r[10]=1-_-c,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},6743:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=e[3],b=n+n,h=s+s,_=o+o,a=n*b,c=n*h,f=n*_,x=s*h,k=s*_,y=o*_,A=p*b,L=p*h,u=p*_;return r[0]=1-(x+y),r[1]=c+u,r[2]=f-L,r[3]=0,r[4]=c-u,r[5]=1-(a+y),r[6]=k+A,r[7]=0,r[8]=f+L,r[9]=k-A,r[10]=1-(a+x),r[11]=0,r[12]=l[0],r[13]=l[1],r[14]=l[2],r[15]=1,r}},7894:function(v){v.exports=d;function d(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7608:function(v){v.exports=d;function d(r,e){var l=e[0],n=e[1],s=e[2],o=e[3],p=e[4],b=e[5],h=e[6],_=e[7],a=e[8],c=e[9],f=e[10],x=e[11],k=e[12],y=e[13],A=e[14],L=e[15],u=l*b-n*p,m=l*h-s*p,S=l*_-o*p,w=n*h-s*b,I=n*_-o*b,O=s*_-o*h,D=a*y-c*k,P=a*A-f*k,F=a*L-x*k,R=c*A-f*y,B=c*L-x*y,N=f*L-x*A,G=u*N-m*B+S*R+w*F-I*P+O*D;return G?(G=1/G,r[0]=(b*N-h*B+_*R)*G,r[1]=(s*B-n*N-o*R)*G,r[2]=(y*O-A*I+L*w)*G,r[3]=(f*I-c*O-x*w)*G,r[4]=(h*F-p*N-_*P)*G,r[5]=(l*N-s*F+o*P)*G,r[6]=(A*S-k*O-L*m)*G,r[7]=(a*O-f*S+x*m)*G,r[8]=(p*B-b*F+_*D)*G,r[9]=(n*F-l*B-o*D)*G,r[10]=(k*I-y*S+L*u)*G,r[11]=(c*S-a*I-x*u)*G,r[12]=(b*P-p*R-h*D)*G,r[13]=(l*R-n*P+s*D)*G,r[14]=(y*m-k*w-A*u)*G,r[15]=(a*w-c*m+f*u)*G,r):null}},6582:function(v,d,r){var e=r(7894);v.exports=l;function l(n,s,o,p){var b,h,_,a,c,f,x,k,y,A,L=s[0],u=s[1],m=s[2],S=p[0],w=p[1],I=p[2],O=o[0],D=o[1],P=o[2];return Math.abs(L-O)<1e-6&&Math.abs(u-D)<1e-6&&Math.abs(m-P)<1e-6?e(n):(x=L-O,k=u-D,y=m-P,A=1/Math.sqrt(x*x+k*k+y*y),x*=A,k*=A,y*=A,b=w*y-I*k,h=I*x-S*y,_=S*k-w*x,A=Math.sqrt(b*b+h*h+_*_),A?(A=1/A,b*=A,h*=A,_*=A):(b=0,h=0,_=0),a=k*_-y*h,c=y*b-x*_,f=x*h-k*b,A=Math.sqrt(a*a+c*c+f*f),A?(A=1/A,a*=A,c*=A,f*=A):(a=0,c=0,f=0),n[0]=b,n[1]=a,n[2]=x,n[3]=0,n[4]=h,n[5]=c,n[6]=k,n[7]=0,n[8]=_,n[9]=f,n[10]=y,n[11]=0,n[12]=-(b*L+h*u+_*m),n[13]=-(a*L+c*u+f*m),n[14]=-(x*L+k*u+y*m),n[15]=1,n)}},6760:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=e[3],b=e[4],h=e[5],_=e[6],a=e[7],c=e[8],f=e[9],x=e[10],k=e[11],y=e[12],A=e[13],L=e[14],u=e[15],m=l[0],S=l[1],w=l[2],I=l[3];return r[0]=m*n+S*b+w*c+I*y,r[1]=m*s+S*h+w*f+I*A,r[2]=m*o+S*_+w*x+I*L,r[3]=m*p+S*a+w*k+I*u,m=l[4],S=l[5],w=l[6],I=l[7],r[4]=m*n+S*b+w*c+I*y,r[5]=m*s+S*h+w*f+I*A,r[6]=m*o+S*_+w*x+I*L,r[7]=m*p+S*a+w*k+I*u,m=l[8],S=l[9],w=l[10],I=l[11],r[8]=m*n+S*b+w*c+I*y,r[9]=m*s+S*h+w*f+I*A,r[10]=m*o+S*_+w*x+I*L,r[11]=m*p+S*a+w*k+I*u,m=l[12],S=l[13],w=l[14],I=l[15],r[12]=m*n+S*b+w*c+I*y,r[13]=m*s+S*h+w*f+I*A,r[14]=m*o+S*_+w*x+I*L,r[15]=m*p+S*a+w*k+I*u,r}},4040:function(v){v.exports=d;function d(r,e,l,n,s,o,p){var b=1/(e-l),h=1/(n-s),_=1/(o-p);return r[0]=-2*b,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*_,r[11]=0,r[12]=(e+l)*b,r[13]=(s+n)*h,r[14]=(p+o)*_,r[15]=1,r}},4772:function(v){v.exports=d;function d(r,e,l,n,s){var o=1/Math.tan(e/2),p=1/(n-s);return r[0]=o/l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=o,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(s+n)*p,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*s*n*p,r[15]=0,r}},6079:function(v){v.exports=d;function d(r,e,l,n){var s=n[0],o=n[1],p=n[2],b=Math.sqrt(s*s+o*o+p*p),h,_,a,c,f,x,k,y,A,L,u,m,S,w,I,O,D,P,F,R,B,N,G,X;return Math.abs(b)<1e-6?null:(b=1/b,s*=b,o*=b,p*=b,h=Math.sin(l),_=Math.cos(l),a=1-_,c=e[0],f=e[1],x=e[2],k=e[3],y=e[4],A=e[5],L=e[6],u=e[7],m=e[8],S=e[9],w=e[10],I=e[11],O=s*s*a+_,D=o*s*a+p*h,P=p*s*a-o*h,F=s*o*a-p*h,R=o*o*a+_,B=p*o*a+s*h,N=s*p*a+o*h,G=o*p*a-s*h,X=p*p*a+_,r[0]=c*O+y*D+m*P,r[1]=f*O+A*D+S*P,r[2]=x*O+L*D+w*P,r[3]=k*O+u*D+I*P,r[4]=c*F+y*R+m*B,r[5]=f*F+A*R+S*B,r[6]=x*F+L*R+w*B,r[7]=k*F+u*R+I*B,r[8]=c*N+y*G+m*X,r[9]=f*N+A*G+S*X,r[10]=x*N+L*G+w*X,r[11]=k*N+u*G+I*X,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}},5567:function(v){v.exports=d;function d(r,e,l){var n=Math.sin(l),s=Math.cos(l),o=e[4],p=e[5],b=e[6],h=e[7],_=e[8],a=e[9],c=e[10],f=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=o*s+_*n,r[5]=p*s+a*n,r[6]=b*s+c*n,r[7]=h*s+f*n,r[8]=_*s-o*n,r[9]=a*s-p*n,r[10]=c*s-b*n,r[11]=f*s-h*n,r}},2408:function(v){v.exports=d;function d(r,e,l){var n=Math.sin(l),s=Math.cos(l),o=e[0],p=e[1],b=e[2],h=e[3],_=e[8],a=e[9],c=e[10],f=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=o*s-_*n,r[1]=p*s-a*n,r[2]=b*s-c*n,r[3]=h*s-f*n,r[8]=o*n+_*s,r[9]=p*n+a*s,r[10]=b*n+c*s,r[11]=h*n+f*s,r}},7089:function(v){v.exports=d;function d(r,e,l){var n=Math.sin(l),s=Math.cos(l),o=e[0],p=e[1],b=e[2],h=e[3],_=e[4],a=e[5],c=e[6],f=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=o*s+_*n,r[1]=p*s+a*n,r[2]=b*s+c*n,r[3]=h*s+f*n,r[4]=_*s-o*n,r[5]=a*s-p*n,r[6]=c*s-b*n,r[7]=f*s-h*n,r}},2504:function(v){v.exports=d;function d(r,e,l){var n=l[0],s=l[1],o=l[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*s,r[5]=e[5]*s,r[6]=e[6]*s,r[7]=e[7]*s,r[8]=e[8]*o,r[9]=e[9]*o,r[10]=e[10]*o,r[11]=e[11]*o,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},7656:function(v){v.exports=d;function d(r,e,l){var n=l[0],s=l[1],o=l[2],p,b,h,_,a,c,f,x,k,y,A,L;return e===r?(r[12]=e[0]*n+e[4]*s+e[8]*o+e[12],r[13]=e[1]*n+e[5]*s+e[9]*o+e[13],r[14]=e[2]*n+e[6]*s+e[10]*o+e[14],r[15]=e[3]*n+e[7]*s+e[11]*o+e[15]):(p=e[0],b=e[1],h=e[2],_=e[3],a=e[4],c=e[5],f=e[6],x=e[7],k=e[8],y=e[9],A=e[10],L=e[11],r[0]=p,r[1]=b,r[2]=h,r[3]=_,r[4]=a,r[5]=c,r[6]=f,r[7]=x,r[8]=k,r[9]=y,r[10]=A,r[11]=L,r[12]=p*n+a*s+k*o+e[12],r[13]=b*n+c*s+y*o+e[13],r[14]=h*n+f*s+A*o+e[14],r[15]=_*n+x*s+L*o+e[15]),r}},5665:function(v){v.exports=d;function d(r,e){if(r===e){var l=e[1],n=e[2],s=e[3],o=e[6],p=e[7],b=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=l,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=o,r[11]=e[14],r[12]=s,r[13]=p,r[14]=b}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}},7626:function(v,d,r){var e=r(2642),l=r(9346);v.exports=b;function n(h,_){for(var a=[0,0,0,0],c=0;c<4;++c)for(var f=0;f<4;++f)a[f]+=h[4*c+f]*_[c];return a}function s(h,_,a,c,f){for(var x=n(c,n(a,n(_,[h[0],h[1],h[2],1]))),k=0;k<3;++k)x[k]/=x[3];return[.5*f[0]*(1+x[0]),.5*f[1]*(1-x[1])]}function o(h,_){if(h.length===2){for(var a=0,c=0,f=0;f<2;++f)a+=Math.pow(_[f]-h[0][f],2),c+=Math.pow(_[f]-h[1][f],2);return a=Math.sqrt(a),c=Math.sqrt(c),a+c<1e-6?[1,0]:[c/(a+c),a/(c+a)]}else if(h.length===3){var x=[0,0];return l(h[0],h[1],h[2],_,x),e(h,x)}return[]}function p(h,_){for(var a=[0,0,0],c=0;c<h.length;++c)for(var f=h[c],x=_[c],k=0;k<3;++k)a[k]+=x*f[k];return a}function b(h,_,a,c,f,x){if(h.length===1)return[0,h[0].slice()];for(var k=new Array(h.length),y=0;y<h.length;++y)k[y]=s(h[y],a,c,f,x);for(var A=0,L=1/0,y=0;y<k.length;++y){for(var u=0,m=0;m<2;++m)u+=Math.pow(k[y][m]-_[m],2);u<L&&(L=u,A=y)}for(var S=o(k,_),w=0,y=0;y<3;++y){if(S[y]<-.001||S[y]>1.0001)return null;w+=S[y]}return Math.abs(w-1)>.001?null:[A,p(h,S),S]}},840:function(v,d,r){var e=r(3236),l=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),p=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),b=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),_=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),a=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),c=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);d.meshShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},d.wireShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},d.pointShader={vertex:p,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},d.pickShader={vertex:h,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},d.pointPickShader={vertex:a,fragment:_,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},d.contourShader={vertex:c,fragment:f,attributes:[{name:"position",type:"vec3"}]}},7201:function(v,d,r){var e=1e-6,l=1e-6,n=r(9405),s=r(2762),o=r(8116),p=r(7766),b=r(8406),h=r(6760),_=r(7608),a=r(9618),c=r(6729),f=r(7765),x=r(1888),k=r(840),y=r(7626),A=k.meshShader,L=k.wireShader,u=k.pointShader,m=k.pickShader,S=k.pointPickShader,w=k.contourShader,I=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function O(q,Z,$,V,rt,ot,H,Y,at,et,ct,ft,yt,xt,Ct,gt,mt,vt,At,Ot,It,St,Bt,re,Yt,he,Zt){this.gl=q,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Z,this.dirty=!0,this.triShader=$,this.lineShader=V,this.pointShader=rt,this.pickShader=ot,this.pointPickShader=H,this.contourShader=Y,this.trianglePositions=at,this.triangleColors=ct,this.triangleNormals=yt,this.triangleUVs=ft,this.triangleIds=et,this.triangleVAO=xt,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Ct,this.edgeColors=mt,this.edgeUVs=vt,this.edgeIds=gt,this.edgeVAO=At,this.edgeCount=0,this.pointPositions=Ot,this.pointColors=St,this.pointUVs=Bt,this.pointSizes=re,this.pointIds=It,this.pointVAO=Yt,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=he,this.contourVAO=Zt,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=I,this._view=I,this._projection=I,this._resolution=[1,1]}var D=O.prototype;D.isOpaque=function(){return!this.hasAlpha},D.isTransparent=function(){return this.hasAlpha},D.pickSlots=1,D.setPickBase=function(q){this.pickId=q};function P(q,Z){if(!Z||!Z.length)return 1;for(var $=0;$<Z.length;++$){if(Z.length<2)return 1;if(Z[$][0]===q)return Z[$][1];if(Z[$][0]>q&&$>0){var V=(Z[$][0]-q)/(Z[$][0]-Z[$-1][0]);return Z[$][1]*(1-V)+V*Z[$-1][1]}}return 1}function F(q,Z){for(var $=c({colormap:q,nshades:256,format:"rgba"}),V=new Uint8Array(1024),rt=0;rt<256;++rt){for(var ot=$[rt],H=0;H<3;++H)V[4*rt+H]=ot[H];Z?V[4*rt+3]=255*P(rt/255,Z):V[4*rt+3]=255*ot[3]}return a(V,[256,256,4],[4,0,1])}function R(q){for(var Z=q.length,$=new Array(Z),V=0;V<Z;++V)$[V]=q[V][2];return $}D.highlight=function(q){if(!q||!this.contourEnable){this.contourCount=0;return}for(var Z=f(this.cells,this.intensity,q.intensity),$=Z.cells,V=Z.vertexIds,rt=Z.vertexWeights,ot=$.length,H=x.mallocFloat32(6*ot),Y=0,at=0;at<ot;++at)for(var et=$[at],ct=0;ct<2;++ct){var ft=et[0];et.length===2&&(ft=et[ct]);for(var yt=V[ft][0],xt=V[ft][1],Ct=rt[ft],gt=1-Ct,mt=this.positions[yt],vt=this.positions[xt],At=0;At<3;++At)H[Y++]=Ct*mt[At]+gt*vt[At]}this.contourCount=Y/3|0,this.contourPositions.update(H.subarray(0,Y)),x.free(H)},D.update=function(q){q=q||{};var Z=this.gl;this.dirty=!0,"contourEnable"in q&&(this.contourEnable=q.contourEnable),"contourColor"in q&&(this.contourColor=q.contourColor),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"lightPosition"in q&&(this.lightPosition=q.lightPosition),this.hasAlpha=!1,"opacity"in q&&(this.opacity=q.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in q&&(this.opacityscale=q.opacityscale,this.hasAlpha=!0),"ambient"in q&&(this.ambientLight=q.ambient),"diffuse"in q&&(this.diffuseLight=q.diffuse),"specular"in q&&(this.specularLight=q.specular),"roughness"in q&&(this.roughness=q.roughness),"fresnel"in q&&(this.fresnel=q.fresnel),q.texture?(this.texture.dispose(),this.texture=p(Z,q.texture)):q.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Z.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Z.LINEAR,this.texture.setPixels(F(q.colormap,this.opacityscale)),this.texture.generateMipmap());var $=q.cells,V=q.positions;if(!(!V||!$)){var rt=[],ot=[],H=[],Y=[],at=[],et=[],ct=[],ft=[],yt=[],xt=[],Ct=[],gt=[],mt=[],vt=[];this.cells=$,this.positions=V;var At=q.vertexNormals,Ot=q.cellNormals,It=q.vertexNormalsEpsilon===void 0?e:q.vertexNormalsEpsilon,St=q.faceNormalsEpsilon===void 0?l:q.faceNormalsEpsilon;q.useFacetNormals&&!Ot&&(Ot=b.faceNormals($,V,St)),!Ot&&!At&&(At=b.vertexNormals($,V,It));var Bt=q.vertexColors,re=q.cellColors,Yt=q.meshColor||[1,1,1,1],he=q.vertexUVs,Zt=q.vertexIntensity,ae=q.cellUVs,oe=q.cellIntensity,ce=1/0,ue=-1/0;if(!he&&!ae)if(Zt)if(q.vertexIntensityBounds)ce=+q.vertexIntensityBounds[0],ue=+q.vertexIntensityBounds[1];else for(var ye=0;ye<Zt.length;++ye){var Tt=Zt[ye];ce=Math.min(ce,Tt),ue=Math.max(ue,Tt)}else if(oe)if(q.cellIntensityBounds)ce=+q.cellIntensityBounds[0],ue=+q.cellIntensityBounds[1];else for(var ye=0;ye<oe.length;++ye){var Tt=oe[ye];ce=Math.min(ce,Tt),ue=Math.max(ue,Tt)}else for(var ye=0;ye<V.length;++ye){var Tt=V[ye][2];ce=Math.min(ce,Tt),ue=Math.max(ue,Tt)}Zt?this.intensity=Zt:oe?this.intensity=oe:this.intensity=R(V),this.pickVertex=!(oe||re);var Ft=q.pointSizes,$t=q.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var ye=0;ye<V.length;++ye)for(var Vt=V[ye],Nt=0;Nt<3;++Nt)isNaN(Vt[Nt])||!isFinite(Vt[Nt])||(this.bounds[0][Nt]=Math.min(this.bounds[0][Nt],Vt[Nt]),this.bounds[1][Nt]=Math.max(this.bounds[1][Nt],Vt[Nt]));var Mt=0,Et=0,Dt=0;t:for(var ye=0;ye<$.length;++ye){var dt=$[ye];switch(dt.length){case 1:for(var ht=dt[0],Vt=V[ht],Nt=0;Nt<3;++Nt)if(isNaN(Vt[Nt])||!isFinite(Vt[Nt]))continue t;xt.push(Vt[0],Vt[1],Vt[2]);var bt;Bt?bt=Bt[ht]:re?bt=re[ye]:bt=Yt,this.opacityscale&&Zt?ot.push(bt[0],bt[1],bt[2],this.opacity*P((Zt[ht]-ce)/(ue-ce),this.opacityscale)):bt.length===3?Ct.push(bt[0],bt[1],bt[2],this.opacity):(Ct.push(bt[0],bt[1],bt[2],bt[3]*this.opacity),bt[3]<1&&(this.hasAlpha=!0));var Pt;he?Pt=he[ht]:Zt?Pt=[(Zt[ht]-ce)/(ue-ce),0]:ae?Pt=ae[ye]:oe?Pt=[(oe[ye]-ce)/(ue-ce),0]:Pt=[(Vt[2]-ce)/(ue-ce),0],gt.push(Pt[0],Pt[1]),Ft?mt.push(Ft[ht]):mt.push($t),vt.push(ye),Dt+=1;break;case 2:for(var Nt=0;Nt<2;++Nt)for(var ht=dt[Nt],Vt=V[ht],Gt=0;Gt<3;++Gt)if(isNaN(Vt[Gt])||!isFinite(Vt[Gt]))continue t;for(var Nt=0;Nt<2;++Nt){var ht=dt[Nt],Vt=V[ht];et.push(Vt[0],Vt[1],Vt[2]);var bt;Bt?bt=Bt[ht]:re?bt=re[ye]:bt=Yt,this.opacityscale&&Zt?ot.push(bt[0],bt[1],bt[2],this.opacity*P((Zt[ht]-ce)/(ue-ce),this.opacityscale)):bt.length===3?ct.push(bt[0],bt[1],bt[2],this.opacity):(ct.push(bt[0],bt[1],bt[2],bt[3]*this.opacity),bt[3]<1&&(this.hasAlpha=!0));var Pt;he?Pt=he[ht]:Zt?Pt=[(Zt[ht]-ce)/(ue-ce),0]:ae?Pt=ae[ye]:oe?Pt=[(oe[ye]-ce)/(ue-ce),0]:Pt=[(Vt[2]-ce)/(ue-ce),0],ft.push(Pt[0],Pt[1]),yt.push(ye)}Et+=1;break;case 3:for(var Nt=0;Nt<3;++Nt)for(var ht=dt[Nt],Vt=V[ht],Gt=0;Gt<3;++Gt)if(isNaN(Vt[Gt])||!isFinite(Vt[Gt]))continue t;for(var Nt=0;Nt<3;++Nt){var ht=dt[2-Nt],Vt=V[ht];rt.push(Vt[0],Vt[1],Vt[2]);var bt;Bt?bt=Bt[ht]:re?bt=re[ye]:bt=Yt,bt?this.opacityscale&&Zt?ot.push(bt[0],bt[1],bt[2],this.opacity*P((Zt[ht]-ce)/(ue-ce),this.opacityscale)):bt.length===3?ot.push(bt[0],bt[1],bt[2],this.opacity):(ot.push(bt[0],bt[1],bt[2],bt[3]*this.opacity),bt[3]<1&&(this.hasAlpha=!0)):ot.push(.5,.5,.5,1);var Pt;he?Pt=he[ht]:Zt?Pt=[(Zt[ht]-ce)/(ue-ce),0]:ae?Pt=ae[ye]:oe?Pt=[(oe[ye]-ce)/(ue-ce),0]:Pt=[(Vt[2]-ce)/(ue-ce),0],Y.push(Pt[0],Pt[1]);var te;At?te=At[ht]:te=Ot[ye],H.push(te[0],te[1],te[2]),at.push(ye)}Mt+=1;break}}this.pointCount=Dt,this.edgeCount=Et,this.triangleCount=Mt,this.pointPositions.update(xt),this.pointColors.update(Ct),this.pointUVs.update(gt),this.pointSizes.update(mt),this.pointIds.update(new Uint32Array(vt)),this.edgePositions.update(et),this.edgeColors.update(ct),this.edgeUVs.update(ft),this.edgeIds.update(new Uint32Array(yt)),this.trianglePositions.update(rt),this.triangleColors.update(ot),this.triangleUVs.update(Y),this.triangleNormals.update(H),this.triangleIds.update(new Uint32Array(at))}},D.drawTransparent=D.draw=function(q){q=q||{};for(var Z=this.gl,$=q.model||I,V=q.view||I,rt=q.projection||I,ot=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],H=0;H<3;++H)ot[0][H]=Math.max(ot[0][H],this.clipBounds[0][H]),ot[1][H]=Math.min(ot[1][H],this.clipBounds[1][H]);var Y={model:$,view:V,projection:rt,inverseModel:I.slice(),clipBounds:ot,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=_(Y.inverseModel,Y.model),Z.disable(Z.CULL_FACE),this.texture.bind(0);var at=new Array(16);h(at,Y.view,Y.model),h(at,Y.projection,at),_(at,at);for(var H=0;H<3;++H)Y.eyePosition[H]=at[12+H]/at[15];for(var et=at[15],H=0;H<3;++H)et+=this.lightPosition[H]*at[4*H+3];for(var H=0;H<3;++H){for(var ct=at[12+H],ft=0;ft<3;++ft)ct+=at[4*ft+H]*this.lightPosition[ft];Y.lightPosition[H]=ct/et}if(this.triangleCount>0){var yt=this.triShader;yt.bind(),yt.uniforms=Y,this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var yt=this.lineShader;yt.bind(),yt.uniforms=Y,this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var yt=this.pointShader;yt.bind(),yt.uniforms=Y,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var yt=this.contourShader;yt.bind(),yt.uniforms=Y,this.contourVAO.bind(),Z.drawArrays(Z.LINES,0,this.contourCount),this.contourVAO.unbind()}},D.drawPick=function(q){q=q||{};for(var Z=this.gl,$=q.model||I,V=q.view||I,rt=q.projection||I,ot=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],H=0;H<3;++H)ot[0][H]=Math.max(ot[0][H],this.clipBounds[0][H]),ot[1][H]=Math.min(ot[1][H],this.clipBounds[1][H]);this._model=[].slice.call($),this._view=[].slice.call(V),this._projection=[].slice.call(rt),this._resolution=[Z.drawingBufferWidth,Z.drawingBufferHeight];var Y={model:$,view:V,projection:rt,clipBounds:ot,pickId:this.pickId/255},at=this.pickShader;if(at.bind(),at.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var at=this.pointPickShader;at.bind(),at.uniforms=Y,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}},D.pick=function(q){if(!q||q.id!==this.pickId)return null;for(var Z=q.value[0]+256*q.value[1]+65536*q.value[2],$=this.cells[Z],V=this.positions,rt=new Array($.length),ot=0;ot<$.length;++ot)rt[ot]=V[$[ot]];var H=q.coord[0],Y=q.coord[1];if(!this.pickVertex){var at=this.positions[$[0]],et=this.positions[$[1]],ct=this.positions[$[2]],ft=[(at[0]+et[0]+ct[0])/3,(at[1]+et[1]+ct[1])/3,(at[2]+et[2]+ct[2])/3];return{_cellCenter:!0,position:[H,Y],index:Z,cell:$,cellId:Z,intensity:this.intensity[Z],dataCoordinate:ft}}var yt=y(rt,[H*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!yt)return null;for(var xt=yt[2],Ct=0,ot=0;ot<$.length;++ot)Ct+=xt[ot]*this.intensity[$[ot]];return{position:yt[1],index:$[yt[0]],cell:$,cellId:Z,intensity:Ct,dataCoordinate:this.positions[$[yt[0]]]}},D.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function B(q){var Z=n(q,A.vertex,A.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.normal.location=4,Z}function N(q){var Z=n(q,L.vertex,L.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z}function G(q){var Z=n(q,u.vertex,u.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.pointSize.location=4,Z}function X(q){var Z=n(q,m.vertex,m.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z}function J(q){var Z=n(q,S.vertex,S.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.pointSize.location=4,Z}function it(q){var Z=n(q,w.vertex,w.fragment);return Z.attributes.position.location=0,Z}function nt(q,Z){arguments.length===1&&(Z=q,q=Z.gl);var $=q.getExtension("OES_standard_derivatives")||q.getExtension("MOZ_OES_standard_derivatives")||q.getExtension("WEBKIT_OES_standard_derivatives");if(!$)throw new Error("derivatives not supported");var V=B(q),rt=N(q),ot=G(q),H=X(q),Y=J(q),at=it(q),et=p(q,a(new Uint8Array([255,255,255,255]),[1,1,4]));et.generateMipmap(),et.minFilter=q.LINEAR_MIPMAP_LINEAR,et.magFilter=q.LINEAR;var ct=s(q),ft=s(q),yt=s(q),xt=s(q),Ct=s(q),gt=o(q,[{buffer:ct,type:q.FLOAT,size:3},{buffer:Ct,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ft,type:q.FLOAT,size:4},{buffer:yt,type:q.FLOAT,size:2},{buffer:xt,type:q.FLOAT,size:3}]),mt=s(q),vt=s(q),At=s(q),Ot=s(q),It=o(q,[{buffer:mt,type:q.FLOAT,size:3},{buffer:Ot,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:vt,type:q.FLOAT,size:4},{buffer:At,type:q.FLOAT,size:2}]),St=s(q),Bt=s(q),re=s(q),Yt=s(q),he=s(q),Zt=o(q,[{buffer:St,type:q.FLOAT,size:3},{buffer:he,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Bt,type:q.FLOAT,size:4},{buffer:re,type:q.FLOAT,size:2},{buffer:Yt,type:q.FLOAT,size:1}]),ae=s(q),oe=o(q,[{buffer:ae,type:q.FLOAT,size:3}]),ce=new O(q,et,V,rt,ot,H,Y,at,ct,Ct,ft,yt,xt,gt,mt,Ot,vt,At,It,St,he,Bt,re,Yt,Zt,ae,oe);return ce.update(Z),ce}v.exports=nt},8120:function(v,d,r){v.exports=p;var e=r(2762),l=r(9405),n=r(3603);function s(b,h,_){this.plot=b,this.vbo=h,this.shader=_}var o=s.prototype;o.bind=function(){var b=this.shader;this.vbo.bind(),this.shader.bind(),b.attributes.coord.pointer(),b.uniforms.screenBox=this.plot.screenBox},o.drawBox=function(){var b=[0,0],h=[0,0];return function(_,a,c,f,x){var k=this.plot,y=this.shader,A=k.gl;b[0]=_,b[1]=a,h[0]=c,h[1]=f,y.uniforms.lo=b,y.uniforms.hi=h,y.uniforms.color=x,A.drawArrays(A.TRIANGLE_STRIP,0,4)}}(),o.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function p(b){var h=b.gl,_=e(h,[0,0,0,1,1,0,1,1]),a=l(h,n.boxVert,n.lineFrag);return new s(b,_,a)}},1913:function(v,d,r){v.exports=h;var e=r(2762),l=r(9405),n=r(2478),s=r(3603);function o(_,a,c,f){this.plot=_,this.vbo=a,this.shader=c,this.tickShader=f,this.ticks=[[],[]]}function p(_,a){return _-a}var b=o.prototype;b.draw=function(){var _=[0,0],a=[0,0],c=[0,0];return function(){for(var f=this.plot,x=this.vbo,k=this.shader,y=this.ticks,A=f.gl,L=f._tickBounds,u=f.dataBox,m=f.viewBox,S=f.gridLineWidth,w=f.gridLineColor,I=f.gridLineEnable,O=f.pixelRatio,D=0;D<2;++D){var P=L[D],F=L[D+2],R=F-P,B=.5*(u[D+2]+u[D]),N=u[D+2]-u[D];a[D]=2*R/N,_[D]=2*(P-B)/N}k.bind(),x.bind(),k.attributes.dataCoord.pointer(),k.uniforms.dataShift=_,k.uniforms.dataScale=a;for(var G=0,D=0;D<2;++D){c[0]=c[1]=0,c[D]=1,k.uniforms.dataAxis=c,k.uniforms.lineWidth=S[D]/(m[D+2]-m[D])*O,k.uniforms.color=w[D];var X=y[D].length*6;I[D]&&X&&A.drawArrays(A.TRIANGLES,G,X),G+=X}}}(),b.drawTickMarks=function(){var _=[0,0],a=[0,0],c=[1,0],f=[0,1],x=[0,0],k=[0,0];return function(){for(var y=this.plot,A=this.vbo,L=this.tickShader,u=this.ticks,m=y.gl,S=y._tickBounds,w=y.dataBox,I=y.viewBox,O=y.pixelRatio,D=y.screenBox,P=D[2]-D[0],F=D[3]-D[1],R=I[2]-I[0],B=I[3]-I[1],N=0;N<2;++N){var G=S[N],X=S[N+2],J=X-G,it=.5*(w[N+2]+w[N]),nt=w[N+2]-w[N];a[N]=2*J/nt,_[N]=2*(G-it)/nt}a[0]*=R/P,_[0]*=R/P,a[1]*=B/F,_[1]*=B/F,L.bind(),A.bind(),L.attributes.dataCoord.pointer();var q=L.uniforms;q.dataShift=_,q.dataScale=a;var Z=y.tickMarkLength,$=y.tickMarkWidth,V=y.tickMarkColor,rt=0,ot=u[0].length*6,H=Math.min(n.ge(u[0],(w[0]-S[0])/(S[2]-S[0]),p),u[0].length),Y=Math.min(n.gt(u[0],(w[2]-S[0])/(S[2]-S[0]),p),u[0].length),at=rt+6*H,et=6*Math.max(0,Y-H),ct=Math.min(n.ge(u[1],(w[1]-S[1])/(S[3]-S[1]),p),u[1].length),ft=Math.min(n.gt(u[1],(w[3]-S[1])/(S[3]-S[1]),p),u[1].length),yt=ot+6*ct,xt=6*Math.max(0,ft-ct);x[0]=2*(I[0]-Z[1])/P-1,x[1]=(I[3]+I[1])/F-1,k[0]=Z[1]*O/P,k[1]=$[1]*O/F,xt&&(q.color=V[1],q.tickScale=k,q.dataAxis=f,q.screenOffset=x,m.drawArrays(m.TRIANGLES,yt,xt)),x[0]=(I[2]+I[0])/P-1,x[1]=2*(I[1]-Z[0])/F-1,k[0]=$[0]*O/P,k[1]=Z[0]*O/F,et&&(q.color=V[0],q.tickScale=k,q.dataAxis=c,q.screenOffset=x,m.drawArrays(m.TRIANGLES,at,et)),x[0]=2*(I[2]+Z[3])/P-1,x[1]=(I[3]+I[1])/F-1,k[0]=Z[3]*O/P,k[1]=$[3]*O/F,xt&&(q.color=V[3],q.tickScale=k,q.dataAxis=f,q.screenOffset=x,m.drawArrays(m.TRIANGLES,yt,xt)),x[0]=(I[2]+I[0])/P-1,x[1]=2*(I[3]+Z[2])/F-1,k[0]=$[2]*O/P,k[1]=Z[2]*O/F,et&&(q.color=V[2],q.tickScale=k,q.dataAxis=c,q.screenOffset=x,m.drawArrays(m.TRIANGLES,at,et))}}(),b.update=function(){var _=[1,1,-1,-1,1,-1],a=[1,-1,1,1,-1,-1];return function(c){for(var f=c.ticks,x=c.bounds,k=new Float32Array(18*(f[0].length+f[1].length)),y=this.plot.zeroLineEnable,A=0,L=[[],[]],u=0;u<2;++u)for(var m=L[u],S=f[u],w=x[u],I=x[u+2],O=0;O<S.length;++O){var D=(S[O].x-w)/(I-w);m.push(D);for(var P=0;P<6;++P)k[A++]=D,k[A++]=_[P],k[A++]=a[P]}this.ticks=L,this.vbo.update(k)}}(),b.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function h(_){var a=_.gl,c=e(a),f=l(a,s.gridVert,s.gridFrag),x=l(a,s.tickVert,s.gridFrag),k=new o(_,c,f,x);return k}},4747:function(v,d,r){v.exports=p;var e=r(2762),l=r(9405),n=r(3603);function s(b,h,_){this.plot=b,this.vbo=h,this.shader=_}var o=s.prototype;o.bind=function(){var b=this.shader;this.vbo.bind(),this.shader.bind(),b.attributes.coord.pointer(),b.uniforms.screenBox=this.plot.screenBox},o.drawLine=function(){var b=[0,0],h=[0,0];return function(_,a,c,f,x,k){var y=this.plot,A=this.shader,L=y.gl;b[0]=_,b[1]=a,h[0]=c,h[1]=f,A.uniforms.start=b,A.uniforms.end=h,A.uniforms.width=x*y.pixelRatio,A.uniforms.color=k,L.drawArrays(L.TRIANGLE_STRIP,0,4)}}(),o.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function p(b){var h=b.gl,_=e(h,[-1,-1,-1,1,1,-1,1,1]),a=l(h,n.lineVert,n.lineFrag),c=new s(b,_,a);return c}},3603:function(v,d,r){var e=r(3236),l=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);v.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:l,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:l,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:l,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(v,d,r){v.exports=h;var e=r(2762),l=r(9405),n=r(529),s=r(2478),o=r(3603);function p(_,a,c){this.plot=_,this.vbo=a,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var b=p.prototype;b.drawTicks=function(){var _=[0,0],a=[0,0],c=[0,0];return function(f){var x=this.plot,k=this.shader,y=this.tickX[f],A=this.tickOffset[f],L=x.gl,u=x.viewBox,m=x.dataBox,S=x.screenBox,w=x.pixelRatio,I=x.tickEnable,O=x.tickPad,D=x.tickColor,P=x.tickAngle,F=x.labelEnable,R=x.labelPad,B=x.labelColor,N=x.labelAngle,G=this.labelOffset[f],X=this.labelCount[f],J=s.lt(y,m[f]),it=s.le(y,m[f+2]);_[0]=_[1]=0,_[f]=1,a[f]=(u[2+f]+u[f])/(S[2+f]-S[f])-1;var nt=2/S[2+(f^1)]-S[f^1];a[f^1]=nt*u[f^1]-1,I[f]&&(a[f^1]-=nt*w*O[f],J<it&&A[it]>A[J]&&(k.uniforms.dataAxis=_,k.uniforms.screenOffset=a,k.uniforms.color=D[f],k.uniforms.angle=P[f],L.drawArrays(L.TRIANGLES,A[J],A[it]-A[J]))),F[f]&&X&&(a[f^1]-=nt*w*R[f],k.uniforms.dataAxis=c,k.uniforms.screenOffset=a,k.uniforms.color=B[f],k.uniforms.angle=N[f],L.drawArrays(L.TRIANGLES,G,X)),a[f^1]=nt*u[2+(f^1)]-1,I[f+2]&&(a[f^1]+=nt*w*O[f+2],J<it&&A[it]>A[J]&&(k.uniforms.dataAxis=_,k.uniforms.screenOffset=a,k.uniforms.color=D[f+2],k.uniforms.angle=P[f+2],L.drawArrays(L.TRIANGLES,A[J],A[it]-A[J]))),F[f+2]&&X&&(a[f^1]+=nt*w*R[f+2],k.uniforms.dataAxis=c,k.uniforms.screenOffset=a,k.uniforms.color=B[f+2],k.uniforms.angle=N[f+2],L.drawArrays(L.TRIANGLES,G,X))}}(),b.drawTitle=function(){var _=[0,0],a=[0,0];return function(){var c=this.plot,f=this.shader,x=c.gl,k=c.screenBox,y=c.titleCenter,A=c.titleAngle,L=c.titleColor,u=c.pixelRatio;if(this.titleCount){for(var m=0;m<2;++m)a[m]=2*(y[m]*u-k[m])/(k[2+m]-k[m])-1;f.bind(),f.uniforms.dataAxis=_,f.uniforms.screenOffset=a,f.uniforms.angle=A,f.uniforms.color=L,x.drawArrays(x.TRIANGLES,this.titleOffset,this.titleCount)}}}(),b.bind=function(){var _=[0,0],a=[0,0],c=[0,0];return function(){var f=this.plot,x=this.shader,k=f._tickBounds,y=f.dataBox,A=f.screenBox,L=f.viewBox;x.bind();for(var u=0;u<2;++u){var m=k[u],S=k[u+2],w=S-m,I=.5*(y[u+2]+y[u]),O=y[u+2]-y[u],D=L[u],P=L[u+2],F=P-D,R=A[u],B=A[u+2],N=B-R;a[u]=2*w/O*F/N,_[u]=2*(m-I)/O*F/N}c[1]=2*f.pixelRatio/(A[3]-A[1]),c[0]=c[1]*(A[3]-A[1])/(A[2]-A[0]),x.uniforms.dataScale=a,x.uniforms.dataShift=_,x.uniforms.textScale=c,this.vbo.bind(),x.attributes.textCoordinate.pointer()}}(),b.update=function(_){var a=[],c=_.ticks,f=_.bounds,x,k,y,A,L;for(L=0;L<2;++L){var u=[Math.floor(a.length/3)],m=[-1/0],S=c[L];for(x=0;x<S.length;++x){var w=S[x],I=w.x,O=w.text,D=w.font||"sans-serif";A=w.fontSize||12;for(var P=1/(f[L+2]-f[L]),F=f[L],R=O.split(`
`),B=0;B<R.length;B++)for(y=n(D,R[B]).data,k=0;k<y.length;k+=2)a.push(y[k]*A,-y[k+1]*A-B*A*1.2,(I-F)*P);u.push(Math.floor(a.length/3)),m.push(I)}this.tickOffset[L]=u,this.tickX[L]=m}for(L=0;L<2;++L){for(this.labelOffset[L]=Math.floor(a.length/3),y=n(_.labelFont[L],_.labels[L],{textAlign:"center"}).data,A=_.labelSize[L],x=0;x<y.length;x+=2)a.push(y[x]*A,-y[x+1]*A,0);this.labelCount[L]=Math.floor(a.length/3)-this.labelOffset[L]}for(this.titleOffset=Math.floor(a.length/3),y=n(_.titleFont,_.title).data,A=_.titleSize,x=0;x<y.length;x+=2)a.push(y[x]*A,-y[x+1]*A,0);this.titleCount=Math.floor(a.length/3)-this.titleOffset,this.vbo.update(a)},b.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(_){var a=_.gl,c=e(a),f=l(a,o.textVert,o.textFrag),x=new p(_,c,f);return x}},1850:function(v,d,r){v.exports=a;var e=r(3589),l=r(1913),n=r(2142),s=r(4747),o=r(8120);function p(c,f){this.gl=c,this.pickBuffer=f,this.screenBox=[0,0,c.drawingBufferWidth,c.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var b=p.prototype;b.setDirty=function(){this.dirty=this.pickDirty=!0},b.setOverlayDirty=function(){this.dirty=!0},b.nextDepthValue=function(){return this._depthCounter++/65536},b.draw=function(){return function(){var c=this.gl,f=this.screenBox,x=this.viewBox,k=this.dataBox,y=this.pixelRatio,A=this.grid,L=this.line,u=this.text,m=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,c.bindFramebuffer(c.FRAMEBUFFER,null),c.enable(c.SCISSOR_TEST),c.disable(c.DEPTH_TEST),c.depthFunc(c.LESS),c.depthMask(!1),c.enable(c.BLEND),c.blendEquation(c.FUNC_ADD,c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),this.borderColor){c.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var S=this.borderColor;c.clearColor(S[0]*S[3],S[1]*S[3],S[2]*S[3],S[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}c.scissor(x[0],x[1],x[2]-x[0],x[3]-x[1]),c.viewport(x[0],x[1],x[2]-x[0],x[3]-x[1]);var w=this.backgroundColor;c.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),c.clear(c.COLOR_BUFFER_BIT),A.draw();var I=this.zeroLineEnable,O=this.zeroLineColor,D=this.zeroLineWidth;if(I[0]||I[1]){L.bind();for(var P=0;P<2;++P)if(!(!I[P]||!(k[P]<=0&&k[P+2]>=0))){var F=f[P]-k[P]*(f[P+2]-f[P])/(k[P+2]-k[P]);P===0?L.drawLine(F,f[1],F,f[3],D[P],O[P]):L.drawLine(f[0],F,f[2],F,D[P],O[P])}}for(var P=0;P<m.length;++P)m[P].draw();c.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),c.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),L.bind();var R=this.borderLineEnable,B=this.borderLineWidth,N=this.borderLineColor;R[1]&&L.drawLine(x[0],x[1]-.5*B[1]*y,x[0],x[3]+.5*B[3]*y,B[1],N[1]),R[0]&&L.drawLine(x[0]-.5*B[0]*y,x[1],x[2]+.5*B[2]*y,x[1],B[0],N[0]),R[3]&&L.drawLine(x[2],x[1]-.5*B[1]*y,x[2],x[3]+.5*B[3]*y,B[3],N[3]),R[2]&&L.drawLine(x[0]-.5*B[0]*y,x[3],x[2]+.5*B[2]*y,x[3],B[2],N[2]),u.bind();for(var P=0;P<2;++P)u.drawTicks(P);this.titleEnable&&u.drawTitle();for(var G=this.overlays,P=0;P<G.length;++P)G[P].draw();c.disable(c.SCISSOR_TEST),c.disable(c.BLEND),c.depthMask(!0)}}}(),b.drawPick=function(){return function(){if(!this.static){var c=this.pickBuffer;this.gl,this._pickTimeout=null,c.begin();for(var f=1,x=this.objects,k=0;k<x.length;++k)f=x[k].drawPick(f);c.end()}}}(),b.pick=function(){return function(c,f){if(!this.static){var x=this.pixelRatio,k=this.pickPixelRatio,y=this.viewBox,A=Math.round((c-y[0]/x)*k)|0,L=Math.round((f-y[1]/x)*k)|0,u=this.pickBuffer.query(A,L,this.pickRadius);if(!u)return null;for(var m=u.id+(u.value[0]<<8)+(u.value[1]<<16)+(u.value[2]<<24),S=this.objects,w=0;w<S.length;++w){var I=S[w].pick(A,L,m);if(I)return I}return null}}}();function h(c){for(var f=c.slice(),x=0;x<f.length;++x)f[x]=f[x].slice();return f}function _(c,f){return c.x-f.x}b.setScreenBox=function(c){var f=this.screenBox,x=this.pixelRatio;f[0]=Math.round(c[0]*x)|0,f[1]=Math.round(c[1]*x)|0,f[2]=Math.round(c[2]*x)|0,f[3]=Math.round(c[3]*x)|0,this.setDirty()},b.setDataBox=function(c){var f=this.dataBox,x=f[0]!==c[0]||f[1]!==c[1]||f[2]!==c[2]||f[3]!==c[3];x&&(f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=c[3],this.setDirty())},b.setViewBox=function(c){var f=this.pixelRatio,x=this.viewBox;x[0]=Math.round(c[0]*f)|0,x[1]=Math.round(c[1]*f)|0,x[2]=Math.round(c[2]*f)|0,x[3]=Math.round(c[3]*f)|0;var k=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((c[2]-c[0])*k)|0,Math.round((c[3]-c[1])*k)|0],this.setDirty()},b.update=function(c){c=c||{};var f=this.gl;this.pixelRatio=c.pixelRatio||1;var x=this.pixelRatio;this.pickPixelRatio=Math.max(x,1),this.setScreenBox(c.screenBox||[0,0,f.drawingBufferWidth/x,f.drawingBufferHeight/x]),this.screenBox,this.setViewBox(c.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/x,.125*(this.screenBox[3]-this.screenBox[1])/x,.875*(this.screenBox[2]-this.screenBox[0])/x,.875*(this.screenBox[3]-this.screenBox[1])/x]);var k=this.viewBox,y=(k[2]-k[0])/(k[3]-k[1]);this.setDataBox(c.dataBox||[-10,-10/y,10,10/y]),this.borderColor=c.borderColor!==!1?(c.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(c.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(c.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(c.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(c.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(c.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(c.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(c.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(c.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(c.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(c.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(c.titleCenter||[.5*(k[0]+k[2])/x,(k[3]+120)/x]).slice(),this.titleEnable=!("titleEnable"in c)||!!c.titleEnable,this.titleAngle=c.titleAngle||0,this.titleColor=(c.titleColor||[0,0,0,1]).slice(),this.labelPad=(c.labelPad||[15,15,15,15]).slice(),this.labelAngle=(c.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(c.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(c.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(c.tickPad||[15,15,15,15]).slice(),this.tickAngle=(c.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(c.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(c.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(c.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(c.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(c.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var A=c.ticks||[[],[]],L=this._tickBounds;L[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(var u=0;u<2;++u){var m=A[u].slice(0);m.length!==0&&(m.sort(_),L[u]=Math.min(L[u],m[0].x),L[u+2]=Math.max(L[u+2],m[m.length-1].x))}this.grid.update({bounds:L,ticks:A}),this.text.update({bounds:L,ticks:A,labels:c.labels||["x","y"],labelSize:c.labelSize||[12,12],labelFont:c.labelFont||["sans-serif","sans-serif"],title:c.title||"",titleSize:c.titleSize||18,titleFont:c.titleFont||"sans-serif"}),this.static=!!c.static,this.setDirty()},b.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var c=this.objects.length-1;c>=0;--c)this.objects[c].dispose();this.objects.length=0;for(var c=this.overlays.length-1;c>=0;--c)this.overlays[c].dispose();this.overlays.length=0,this.gl=null},b.addObject=function(c){this.objects.indexOf(c)<0&&(this.objects.push(c),this.setDirty())},b.removeObject=function(c){for(var f=this.objects,x=0;x<f.length;++x)if(f[x]===c){f.splice(x,1),this.setDirty();break}},b.addOverlay=function(c){this.overlays.indexOf(c)<0&&(this.overlays.push(c),this.setOverlayDirty())},b.removeOverlay=function(c){for(var f=this.overlays,x=0;x<f.length;++x)if(f[x]===c){f.splice(x,1),this.setOverlayDirty();break}};function a(c){var f=c.gl,x=e(f,[f.drawingBufferWidth,f.drawingBufferHeight]),k=new p(f,x);return k.grid=l(k),k.text=n(k),k.line=s(k),k.box=o(k),k.update(c),k}},4437:function(v,d,r){v.exports=b;var e=r(3025),l=r(6296),n=r(351),s=r(8512),o=r(24),p=r(7520);function b(h,_){h=h||document.body,_=_||{};var a=[.01,1/0];"distanceLimits"in _&&(a[0]=_.distanceLimits[0],a[1]=_.distanceLimits[1]),"zoomMin"in _&&(a[0]=_.zoomMin),"zoomMax"in _&&(a[1]=_.zoomMax);var c=l({center:_.center||[0,0,0],up:_.up||[0,1,0],eye:_.eye||[0,0,10],mode:_.mode||"orbit",distanceLimits:a}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,k=h.clientWidth,y=h.clientHeight,A={keyBindingMode:"rotate",enableWheel:!0,view:c,element:h,delay:_.delay||16,rotateSpeed:_.rotateSpeed||1,zoomSpeed:_.zoomSpeed||1,translateSpeed:_.translateSpeed||1,flipX:!!_.flipX,flipY:!!_.flipY,modes:c.modes,_ortho:_._ortho||_.projection&&_.projection.type==="orthographic"||!1,tick:function(){var L=e(),u=this.delay,m=L-2*u;c.idle(L-u),c.recalcMatrix(m),c.flush(L-(100+u*2));for(var S=!0,w=c.computedMatrix,I=0;I<16;++I)S=S&&f[I]===w[I],f[I]=w[I];var O=h.clientWidth===k&&h.clientHeight===y;return k=h.clientWidth,y=h.clientHeight,S?!O:(x=Math.exp(c.computedRadius[0]),!0)},lookAt:function(L,u,m){c.lookAt(c.lastT(),L,u,m)},rotate:function(L,u,m){c.rotate(c.lastT(),L,u,m)},pan:function(L,u,m){c.pan(c.lastT(),L,u,m)},translate:function(L,u,m){c.translate(c.lastT(),L,u,m)}};return Object.defineProperties(A,{matrix:{get:function(){return c.computedMatrix},set:function(L){return c.setMatrix(c.lastT(),L),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(L){var u=c.computedUp.slice(),m=c.computedEye.slice(),S=c.computedCenter.slice();if(c.setMode(L),L==="turntable"){var w=e();c._active.lookAt(w,m,S,u),c._active.lookAt(w+500,m,S,[0,0,1]),c._active.flush(w)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(L){return c.lookAt(c.lastT(),null,L),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(L){return c.lookAt(c.lastT(),L),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(L){return c.lookAt(c.lastT(),null,null,L),c.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(L){return c.setDistance(c.lastT(),L),L},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(a)},set:function(L){return c.setDistanceLimits(L),L},enumerable:!0}}),h.addEventListener("contextmenu",function(L){return L.preventDefault(),!1}),A._lastX=-1,A._lastY=-1,A._lastMods={shift:!1,control:!1,alt:!1,meta:!1},A.enableMouseListeners=function(){A.mouseListener=n(h,L),h.addEventListener("touchstart",function(u){var m=o(u.changedTouches[0],h);L(0,m[0],m[1],A._lastMods),L(1,m[0],m[1],A._lastMods)},p?{passive:!0}:!1),h.addEventListener("touchmove",function(u){var m=o(u.changedTouches[0],h);L(1,m[0],m[1],A._lastMods),u.preventDefault()},p?{passive:!1}:!1),h.addEventListener("touchend",function(u){L(0,A._lastX,A._lastY,A._lastMods)},p?{passive:!0}:!1);function L(u,m,S,w){var I=A.keyBindingMode;if(I!==!1){var O=I==="rotate",D=I==="pan",P=I==="zoom",F=!!w.control,R=!!w.alt,B=!!w.shift,N=!!(u&1),G=!!(u&2),X=!!(u&4),J=1/h.clientHeight,it=J*(m-A._lastX),nt=J*(S-A._lastY),q=A.flipX?1:-1,Z=A.flipY?1:-1,$=Math.PI*A.rotateSpeed,V=e();if(A._lastX!==-1&&A._lastY!==-1&&((O&&N&&!F&&!R&&!B||N&&!F&&!R&&B)&&c.rotate(V,q*$*it,-Z*$*nt,0),(D&&N&&!F&&!R&&!B||G||N&&F&&!R&&!B)&&c.pan(V,-A.translateSpeed*it*x,A.translateSpeed*nt*x,0),P&&N&&!F&&!R&&!B||X||N&&!F&&R&&!B)){var rt=-A.zoomSpeed*nt/window.innerHeight*(V-c.lastT())*100;c.pan(V,0,0,x*(Math.exp(rt)-1))}return A._lastX=m,A._lastY=S,A._lastMods=w,!0}}A.wheelListener=s(h,function(u,m){if(A.keyBindingMode!==!1&&A.enableWheel){var S=A.flipX?1:-1,w=A.flipY?1:-1,I=e();if(Math.abs(u)>Math.abs(m))c.rotate(I,0,0,-u*S*Math.PI*A.rotateSpeed/window.innerWidth);else if(!A._ortho){var O=-A.zoomSpeed*w*m/window.innerHeight*(I-c.lastT())/20;c.pan(I,0,0,x*(Math.exp(O)-1))}}},!0)},A.enableMouseListeners(),A}},799:function(v,d,r){var e=r(3236),l=r(9405),n=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),s=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);v.exports=function(o){return l(o,n,s,null,[{name:"position",type:"vec2"}])}},4100:function(v,d,r){var e=r(4437),l=r(3837),n=r(5445),s=r(4449),o=r(3589),p=r(2260),b=r(7169),h=r(351),_=r(4772),a=r(4040),c=r(799),f=r(9216)({tablet:!0,featureDetect:!0});v.exports={createScene:L,createCamera:e};function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function k(m,S){var w=null;try{w=m.getContext("webgl",S),w||(w=m.getContext("experimental-webgl",S))}catch{return null}return w}function y(m){var S=Math.round(Math.log(Math.abs(m))/Math.log(10));if(S<0){var w=Math.round(Math.pow(10,-S));return Math.ceil(m*w)/w}else if(S>0){var w=Math.round(Math.pow(10,S));return Math.ceil(m/w)*w}return Math.ceil(m)}function A(m){return typeof m=="boolean"?m:!0}function L(m){m=m||{},m.camera=m.camera||{};var S=m.canvas;if(!S)if(S=document.createElement("canvas"),m.container){var w=m.container;w.appendChild(S)}else document.body.appendChild(S);var I=m.gl;if(I||(m.glOptions&&(f=!!m.glOptions.preserveDrawingBuffer),I=k(S,m.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f})),!I)throw new Error("webgl not supported");var O=m.bounds||[[-10,-10,-10],[10,10,10]],D=new x,P=p(I,I.drawingBufferWidth,I.drawingBufferHeight,{preferFloat:!f}),F=c(I),R=m.cameraObject&&m.cameraObject._ortho===!0||m.camera.projection&&m.camera.projection.type==="orthographic"||!1,B={eye:m.camera.eye||[2,0,0],center:m.camera.center||[0,0,0],up:m.camera.up||[0,1,0],zoomMin:m.camera.zoomMax||.1,zoomMax:m.camera.zoomMin||100,mode:m.camera.mode||"turntable",_ortho:R},N=m.axes||{},G=l(I,N);G.enable=!N.disable;var X=m.spikes||{},J=s(I,X),it=[],nt=[],q=[],Z=[],$=!0,H=!0,V=new Array(16),rt=new Array(16),ot={view:null,projection:V,model:rt,_ortho:!1},H=!0,Y=[I.drawingBufferWidth,I.drawingBufferHeight],at=m.cameraObject||e(S,B),et={gl:I,contextLost:!1,pixelRatio:m.pixelRatio||1,canvas:S,selection:D,camera:at,axes:G,axesPixels:null,spikes:J,bounds:O,objects:it,shape:Y,aspect:m.aspectRatio||[1,1,1],pickRadius:m.pickRadius||10,zNear:m.zNear||.01,zFar:m.zFar||1e3,fovy:m.fovy||Math.PI/4,clearColor:m.clearColor||[0,0,0,0],autoResize:A(m.autoResize),autoBounds:A(m.autoBounds),autoScale:!!m.autoScale,autoCenter:A(m.autoCenter),clipToBounds:A(m.clipToBounds),snapToData:!!m.snapToData,onselect:m.onselect||null,onrender:m.onrender||null,onclick:m.onclick||null,cameraParams:ot,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Ot){this.aspect[0]=Ot.x,this.aspect[1]=Ot.y,this.aspect[2]=Ot.z,H=!0},setBounds:function(Ot,It){this.bounds[0][Ot]=It.min,this.bounds[1][Ot]=It.max},setClearColor:function(Ot){this.clearColor=Ot},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ct=[I.drawingBufferWidth/et.pixelRatio|0,I.drawingBufferHeight/et.pixelRatio|0];function ft(){if(!et._stopped&&et.autoResize){var Ot=S.parentNode,It=1,St=1;Ot&&Ot!==document.body?(It=Ot.clientWidth,St=Ot.clientHeight):(It=window.innerWidth,St=window.innerHeight);var Bt=Math.ceil(It*et.pixelRatio)|0,re=Math.ceil(St*et.pixelRatio)|0;if(Bt!==S.width||re!==S.height){S.width=Bt,S.height=re;var Yt=S.style;Yt.position=Yt.position||"absolute",Yt.left="0px",Yt.top="0px",Yt.width=It+"px",Yt.height=St+"px",$=!0}}}et.autoResize&&ft(),window.addEventListener("resize",ft);function yt(){for(var Ot=it.length,It=Z.length,St=0;St<It;++St)q[St]=0;t:for(var St=0;St<Ot;++St){var Bt=it[St],re=Bt.pickSlots;if(!re){nt[St]=-1;continue}for(var Yt=0;Yt<It;++Yt)if(q[Yt]+re<255){nt[St]=Yt,Bt.setPickBase(q[Yt]+1),q[Yt]+=re;continue t}var he=o(I,Y);nt[St]=It,Z.push(he),q.push(re),Bt.setPickBase(1),It+=1}for(;It>0&&q[It-1]===0;)q.pop(),Z.pop().dispose()}et.update=function(Ot){et._stopped||($=!0,H=!0)},et.add=function(Ot){et._stopped||(Ot.axes=G,it.push(Ot),nt.push(-1),$=!0,H=!0,yt())},et.remove=function(Ot){if(!et._stopped){var It=it.indexOf(Ot);It<0||(it.splice(It,1),nt.pop(),$=!0,H=!0,yt())}},et.dispose=function(){if(!et._stopped&&(et._stopped=!0,window.removeEventListener("resize",ft),S.removeEventListener("webglcontextlost",xt),et.mouseListener.enabled=!1,!et.contextLost)){G.dispose(),J.dispose();for(var Ot=0;Ot<it.length;++Ot)it[Ot].dispose();P.dispose();for(var Ot=0;Ot<Z.length;++Ot)Z[Ot].dispose();F.dispose(),I=null,G=null,J=null,it=[]}},et._mouseRotating=!1,et._prevButtons=0,et.enableMouseListeners=function(){et.mouseListener=h(S,function(Ot,It,St){if(!et._stopped){var Bt=Z.length,re=it.length,Yt=D.object;D.distance=1/0,D.mouse[0]=It,D.mouse[1]=St,D.object=null,D.screen=null,D.dataCoordinate=D.dataPosition=null;var he=!1;if(Ot&&et._prevButtons)et._mouseRotating=!0;else{et._mouseRotating&&(H=!0),et._mouseRotating=!1;for(var Zt=0;Zt<Bt;++Zt){var ae=Z[Zt].query(It,ct[1]-St-1,et.pickRadius);if(ae){if(ae.distance>D.distance)continue;for(var oe=0;oe<re;++oe){var ce=it[oe];if(nt[oe]===Zt){var ue=ce.pick(ae);ue&&(D.buttons=Ot,D.screen=ae.coord,D.distance=ae.distance,D.object=ce,D.index=ue.distance,D.dataPosition=ue.position,D.dataCoordinate=ue.dataCoordinate,D.data=ue,he=!0)}}}}}Yt&&Yt!==D.object&&(Yt.highlight&&Yt.highlight(null),$=!0),D.object&&(D.object.highlight&&D.object.highlight(D.data),$=!0),he=he||D.object!==Yt,he&&et.onselect&&et.onselect(D),Ot&1&&!(et._prevButtons&1)&&et.onclick&&et.onclick(D),et._prevButtons=Ot}})};function xt(){if(et.contextLost)return!0;I.isContextLost()&&(et.contextLost=!0,et.mouseListener.enabled=!1,et.selection.object=null,et.oncontextloss&&et.oncontextloss())}S.addEventListener("webglcontextlost",xt);function Ct(){if(!xt()){I.colorMask(!0,!0,!0,!0),I.depthMask(!0),I.disable(I.BLEND),I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL);for(var Ot=it.length,It=Z.length,St=0;St<It;++St){var Bt=Z[St];Bt.shape=ct,Bt.begin();for(var re=0;re<Ot;++re)if(nt[re]===St){var Yt=it[re];Yt.drawPick&&(Yt.pixelRatio=1,Yt.drawPick(ot))}Bt.end()}}}var gt=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],mt=[gt[0].slice(),gt[1].slice()];function vt(){if(!xt()){ft();var Ot=et.camera.tick();ot.view=et.camera.matrix,$=$||Ot,H=H||Ot,G.pixelRatio=et.pixelRatio,J.pixelRatio=et.pixelRatio;var It=it.length,St=gt[0],Bt=gt[1];St[0]=St[1]=St[2]=1/0,Bt[0]=Bt[1]=Bt[2]=-1/0;for(var re=0;re<It;++re){var Yt=it[re];Yt.pixelRatio=et.pixelRatio,Yt.axes=et.axes,$=$||!!Yt.dirty,H=H||!!Yt.dirty;var he=Yt.bounds;if(he)for(var Zt=he[0],ae=he[1],oe=0;oe<3;++oe)St[oe]=Math.min(St[oe],Zt[oe]),Bt[oe]=Math.max(Bt[oe],ae[oe])}var ce=et.bounds;if(et.autoBounds)for(var oe=0;oe<3;++oe){if(Bt[oe]<St[oe])St[oe]=-1,Bt[oe]=1;else{St[oe]===Bt[oe]&&(St[oe]-=1,Bt[oe]+=1);var ue=.05*(Bt[oe]-St[oe]);St[oe]=St[oe]-ue,Bt[oe]=Bt[oe]+ue}ce[0][oe]=St[oe],ce[1][oe]=Bt[oe]}for(var ye=!1,oe=0;oe<3;++oe)ye=ye||mt[0][oe]!==ce[0][oe]||mt[1][oe]!==ce[1][oe],mt[0][oe]=ce[0][oe],mt[1][oe]=ce[1][oe];if(H=H||ye,$=$||ye,!!$){if(ye){for(var Tt=[0,0,0],re=0;re<3;++re)Tt[re]=y((ce[1][re]-ce[0][re])/10);G.autoTicks?G.update({bounds:ce,tickSpacing:Tt}):G.update({bounds:ce})}var Ft=I.drawingBufferWidth,$t=I.drawingBufferHeight;Y[0]=Ft,Y[1]=$t,ct[0]=Math.max(Ft/et.pixelRatio,1)|0,ct[1]=Math.max($t/et.pixelRatio,1)|0,u(et,R);for(var re=0;re<It;++re){var Yt=it[re];Yt.axesBounds=ce,et.clipToBounds&&(Yt.clipBounds=ce)}D.object&&(et.snapToData?J.position=D.dataCoordinate:J.position=D.dataPosition,J.bounds=ce),H&&(H=!1,Ct()),et.axesPixels=n(et.axes,ot,Ft,$t),et.onrender&&et.onrender(),I.bindFramebuffer(I.FRAMEBUFFER,null),I.viewport(0,0,Ft,$t),et.clearRGBA(),I.depthMask(!0),I.colorMask(!0,!0,!0,!0),I.enable(I.DEPTH_TEST),I.depthFunc(I.LEQUAL),I.disable(I.BLEND),I.disable(I.CULL_FACE);var Vt=!1;G.enable&&(Vt=Vt||G.isTransparent(),G.draw(ot)),J.axes=G,D.object&&J.draw(ot),I.disable(I.CULL_FACE);for(var re=0;re<It;++re){var Yt=it[re];Yt.axes=G,Yt.pixelRatio=et.pixelRatio,Yt.isOpaque&&Yt.isOpaque()&&Yt.draw(ot),Yt.isTransparent&&Yt.isTransparent()&&(Vt=!0)}if(Vt){P.shape=Y,P.bind(),I.clear(I.DEPTH_BUFFER_BIT),I.colorMask(!1,!1,!1,!1),I.depthMask(!0),I.depthFunc(I.LESS),G.enable&&G.isTransparent()&&G.drawTransparent(ot);for(var re=0;re<It;++re){var Yt=it[re];Yt.isOpaque&&Yt.isOpaque()&&Yt.draw(ot)}I.enable(I.BLEND),I.blendEquation(I.FUNC_ADD),I.blendFunc(I.ONE,I.ONE_MINUS_SRC_ALPHA),I.colorMask(!0,!0,!0,!0),I.depthMask(!1),I.clearColor(0,0,0,0),I.clear(I.COLOR_BUFFER_BIT),G.isTransparent()&&G.drawTransparent(ot);for(var re=0;re<It;++re){var Yt=it[re];Yt.isTransparent&&Yt.isTransparent()&&Yt.drawTransparent(ot)}I.bindFramebuffer(I.FRAMEBUFFER,null),I.blendFunc(I.ONE,I.ONE_MINUS_SRC_ALPHA),I.disable(I.DEPTH_TEST),F.bind(),P.color[0].bind(0),F.uniforms.accumBuffer=0,b(I),I.disable(I.BLEND)}$=!1;for(var re=0;re<It;++re)it[re].dirty=!1}}}function At(){et._stopped||et.contextLost||(vt(),requestAnimationFrame(At))}return et.enableMouseListeners(),At(),et.redraw=function(){et._stopped||($=!0,vt())},et}function u(m,S){var w=m.bounds,I=m.cameraParams,O=I.projection,D=I.model,P=m.gl.drawingBufferWidth,F=m.gl.drawingBufferHeight,R=m.zNear,B=m.zFar,N=m.fovy,G=P/F;S?(a(O,-G,G,-1,1,R,B),I._ortho=!0):(_(O,N,G,R,B),I._ortho=!1);for(var X=0;X<16;++X)D[X]=0;D[15]=1;for(var J=0,X=0;X<3;++X)J=Math.max(J,w[1][X]-w[0][X]);for(var X=0;X<3;++X)m.autoScale?D[5*X]=m.aspect[X]/(w[1][X]-w[0][X]):D[5*X]=1/J,m.autoCenter&&(D[12+X]=-D[5*X]*.5*(w[0][X]+w[1][X]))}},6640:function(v,d,r){var e=r(3236);d.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),d.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),d.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),d.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(v,d,r){var e=r(9405),l=r(2762),n=r(1888),s=r(6640);v.exports=h;function o(_,a,c,f,x){this.plot=_,this.offsetBuffer=a,this.pickBuffer=c,this.shader=f,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var p=o.prototype;p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},p.update=function(_){var a;_=_||{};function c(u,m){return u in _?_[u]:m}this.sizeMin=c("sizeMin",.5),this.sizeMax=c("sizeMax",20),this.color=c("color",[1,0,0,1]).slice(),this.areaRatio=c("areaRatio",1),this.borderColor=c("borderColor",[0,0,0,1]).slice(),this.blend=c("blend",!1);var f=_.positions.length>>>1,x=_.positions instanceof Float32Array,k=_.idToIndex instanceof Int32Array&&_.idToIndex.length>=f,y=_.positions,A=x?y:n.mallocFloat32(y.length),L=k?_.idToIndex:n.mallocInt32(f);if(x||A.set(y),!k)for(A.set(y),a=0;a<f;a++)L[a]=a;this.points=y,this.offsetBuffer.update(A),this.pickBuffer.update(L),x||n.free(A),k||n.free(L),this.pointCount=f,this.pickOffset=0};function b(_,a){var c=0,f=_.length>>>1,x;for(x=0;x<f;x++){var k=_[x*2],y=_[x*2+1];k>=a[0]&&k<=a[2]&&y>=a[1]&&y<=a[3]&&c++}return c}p.unifiedDraw=function(){var _=[1,0,0,0,1,0,0,0,1],a=[0,0,0,0];return function(c){var f=c!==void 0,x=f?this.pickShader:this.shader,k=this.plot.gl,y=this.plot.dataBox;if(this.pointCount===0)return c;var A=y[2]-y[0],L=y[3]-y[1],u=b(this.points,y),m=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));_[0]=2/A,_[4]=2/L,_[6]=-2*y[0]/A-1,_[7]=-2*y[1]/L-1,this.offsetBuffer.bind(),x.bind(),x.attributes.position.pointer(),x.uniforms.matrix=_,x.uniforms.color=this.color,x.uniforms.borderColor=this.borderColor,x.uniforms.pointCloud=m<5,x.uniforms.pointSize=m,x.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(a[0]=c&255,a[1]=c>>8&255,a[2]=c>>16&255,a[3]=c>>24&255,this.pickBuffer.bind(),x.attributes.pickId.pointer(k.UNSIGNED_BYTE),x.uniforms.pickOffset=a,this.pickOffset=c);var S=k.getParameter(k.BLEND),w=k.getParameter(k.DITHER);return S&&!this.blend&&k.disable(k.BLEND),w&&k.disable(k.DITHER),k.drawArrays(k.POINTS,0,this.pointCount),S&&!this.blend&&k.enable(k.BLEND),w&&k.enable(k.DITHER),c+this.pointCount}}(),p.draw=p.unifiedDraw,p.drawPick=p.unifiedDraw,p.pick=function(_,a,c){var f=this.pickOffset,x=this.pointCount;if(c<f||c>=f+x)return null;var k=c-f,y=this.points;return{object:this,pointId:k,dataCoord:[y[2*k],y[2*k+1]]}};function h(_,a){var c=_.gl,f=l(c),x=l(c),k=e(c,s.pointVertex,s.pointFragment),y=e(c,s.pickVertex,s.pickFragment),A=new o(_,f,x,k,y);return A.update(a),_.addObject(A),A}},783:function(v){v.exports=d;function d(r,e,l,n){var s=e[0],o=e[1],p=e[2],b=e[3],h=l[0],_=l[1],a=l[2],c=l[3],f,x,k,y,A;return x=s*h+o*_+p*a+b*c,x<0&&(x=-x,h=-h,_=-_,a=-a,c=-c),1-x>1e-6?(f=Math.acos(x),k=Math.sin(f),y=Math.sin((1-n)*f)/k,A=Math.sin(n*f)/k):(y=1-n,A=n),r[0]=y*s+A*h,r[1]=y*o+A*_,r[2]=y*p+A*a,r[3]=y*b+A*c,r}},5964:function(v){v.exports=function(d){return!d&&d!==0?"":d.toString()}},9366:function(v,d,r){var e=r(4359);v.exports=n;var l={};function n(s,o,p){var b=l[o];if(b||(b=l[o]={}),s in b)return b[s];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:o,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};h.triangles=!0;var _=e(s,h);h.triangles=!1;var a=e(s,h),c,f;if(p&&p!==1){for(c=0;c<_.positions.length;++c)for(f=0;f<_.positions[c].length;++f)_.positions[c][f]/=p;for(c=0;c<a.positions.length;++c)for(f=0;f<a.positions[c].length;++f)a.positions[c][f]/=p}var x=[[1/0,1/0],[-1/0,-1/0]],k=a.positions.length;for(c=0;c<k;++c){var y=a.positions[c];for(f=0;f<2;++f)x[0][f]=Math.min(x[0][f],y[f]),x[1][f]=Math.max(x[1][f],y[f])}return b[s]=[_,a,x]}},1283:function(v,d,r){var e=r(9405),l=r(3236),n=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),s=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),o=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),p=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),b=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],_={vertex:n,fragment:p,attributes:h},a={vertex:s,fragment:p,attributes:h},c={vertex:o,fragment:p,attributes:h},f={vertex:n,fragment:b,attributes:h},x={vertex:s,fragment:b,attributes:h},k={vertex:o,fragment:b,attributes:h};function y(A,L){var u=e(A,L),m=u.attributes;return m.position.location=0,m.color.location=1,m.glyph.location=2,m.id.location=3,u}d.createPerspective=function(A){return y(A,_)},d.createOrtho=function(A){return y(A,a)},d.createProject=function(A){return y(A,c)},d.createPickPerspective=function(A){return y(A,f)},d.createPickOrtho=function(A){return y(A,x)},d.createPickProject=function(A){return y(A,k)}},8418:function(v,d,r){var e=r(5219),l=r(2762),n=r(8116),s=r(1888),o=r(6760),p=r(1283),b=r(9366),h=r(5964),_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];v.exports=nt;function a(q,Z){var $=q[0],V=q[1],rt=q[2],ot=q[3];return q[0]=Z[0]*$+Z[4]*V+Z[8]*rt+Z[12]*ot,q[1]=Z[1]*$+Z[5]*V+Z[9]*rt+Z[13]*ot,q[2]=Z[2]*$+Z[6]*V+Z[10]*rt+Z[14]*ot,q[3]=Z[3]*$+Z[7]*V+Z[11]*rt+Z[15]*ot,q}function c(q,Z,$,V){return a(V,V),a(V,V),a(V,V)}function f(q,Z){this.index=q,this.dataCoordinate=this.position=Z}function x(q){return q===!0||q>1?1:q}function k(q,Z,$,V,rt,ot,H,Y,at,et,ct,ft){this.gl=q,this.pixelRatio=1,this.shader=Z,this.orthoShader=$,this.projectShader=V,this.pointBuffer=rt,this.colorBuffer=ot,this.glyphBuffer=H,this.idBuffer=Y,this.vao=at,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=et,this.pickOrthoShader=ct,this.pickProjectShader=ft,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var y=k.prototype;y.pickSlots=1,y.setPickBase=function(q){this.pickId=q},y.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},y.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var A=[0,0],L=[0,0,0],u=[0,0,0],m=[0,0,0,1],S=[0,0,0,1],w=_.slice(),I=[0,0,0],O=[[0,0,0],[0,0,0]];function D(q){return q[0]=q[1]=q[2]=0,q}function P(q,Z){return q[0]=Z[0],q[1]=Z[1],q[2]=Z[2],q[3]=1,q}function F(q,Z,$,V){return q[0]=Z[0],q[1]=Z[1],q[2]=Z[2],q[$]=V,q}function R(q){for(var Z=O,$=0;$<2;++$)for(var V=0;V<3;++V)Z[$][V]=Math.max(Math.min(q[$][V],1e8),-1e8);return Z}function B(q,Z,$,V){var rt=Z.axesProject,ot=Z.gl,H=q.uniforms,Y=$.model||_,at=$.view||_,et=$.projection||_,ct=Z.axesBounds,ft=R(Z.clipBounds),yt;Z.axes&&Z.axes.lastCubeProps?yt=Z.axes.lastCubeProps.axis:yt=[1,1,1],A[0]=2/ot.drawingBufferWidth,A[1]=2/ot.drawingBufferHeight,q.bind(),H.view=at,H.projection=et,H.screenSize=A,H.highlightId=Z.highlightId,H.highlightScale=Z.highlightScale,H.clipBounds=ft,H.pickGroup=Z.pickId/255,H.pixelRatio=V;for(var xt=0;xt<3;++xt)if(rt[xt]){H.scale=Z.projectScale[xt],H.opacity=Z.projectOpacity[xt];for(var Ct=w,gt=0;gt<16;++gt)Ct[gt]=0;for(var gt=0;gt<4;++gt)Ct[5*gt]=1;Ct[5*xt]=0,yt[xt]<0?Ct[12+xt]=ct[0][xt]:Ct[12+xt]=ct[1][xt],o(Ct,Y,Ct),H.model=Ct;var mt=(xt+1)%3,vt=(xt+2)%3,At=D(L),Ot=D(u);At[mt]=1,Ot[vt]=1;var It=c(et,at,Y,P(m,At)),St=c(et,at,Y,P(S,Ot));if(Math.abs(It[1])>Math.abs(St[1])){var Bt=It;It=St,St=Bt,Bt=At,At=Ot,Ot=Bt;var re=mt;mt=vt,vt=re}It[0]<0&&(At[mt]=-1),St[1]>0&&(Ot[vt]=-1);for(var Yt=0,he=0,gt=0;gt<4;++gt)Yt+=Math.pow(Y[4*mt+gt],2),he+=Math.pow(Y[4*vt+gt],2);At[mt]/=Math.sqrt(Yt),Ot[vt]/=Math.sqrt(he),H.axes[0]=At,H.axes[1]=Ot,H.fragClipBounds[0]=F(I,ft[0],xt,-1e8),H.fragClipBounds[1]=F(I,ft[1],xt,1e8),Z.vao.bind(),Z.vao.draw(ot.TRIANGLES,Z.vertexCount),Z.lineWidth>0&&(ot.lineWidth(Z.lineWidth*V),Z.vao.draw(ot.LINES,Z.lineVertexCount,Z.vertexCount)),Z.vao.unbind()}}var N=[-1e8,-1e8,-1e8],G=[1e8,1e8,1e8],X=[N,G];function J(q,Z,$,V,rt,ot,H){var Y=$.gl;if((ot===$.projectHasAlpha||H)&&B(Z,$,V,rt),ot===$.hasAlpha||H){q.bind();var at=q.uniforms;at.model=V.model||_,at.view=V.view||_,at.projection=V.projection||_,A[0]=2/Y.drawingBufferWidth,A[1]=2/Y.drawingBufferHeight,at.screenSize=A,at.highlightId=$.highlightId,at.highlightScale=$.highlightScale,at.fragClipBounds=X,at.clipBounds=$.axes.bounds,at.opacity=$.opacity,at.pickGroup=$.pickId/255,at.pixelRatio=rt,$.vao.bind(),$.vao.draw(Y.TRIANGLES,$.vertexCount),$.lineWidth>0&&(Y.lineWidth($.lineWidth*rt),$.vao.draw(Y.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}y.draw=function(q){var Z=this.useOrtho?this.orthoShader:this.shader;J(Z,this.projectShader,this,q,this.pixelRatio,!1,!1)},y.drawTransparent=function(q){var Z=this.useOrtho?this.orthoShader:this.shader;J(Z,this.projectShader,this,q,this.pixelRatio,!0,!1)},y.drawPick=function(q){var Z=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;J(Z,this.pickProjectShader,this,q,1,!0,!0)},y.pick=function(q){if(!q||q.id!==this.pickId)return null;var Z=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(Z>=this.pointCount||Z<0)return null;var $=this.points[Z],V=this._selectResult;V.index=Z;for(var rt=0;rt<3;++rt)V.position[rt]=V.dataCoordinate[rt]=$[rt];return V},y.highlight=function(q){if(!q)this.highlightId=[1,1,1,1];else{var Z=q.index,$=Z&255,V=Z>>8&255,rt=Z>>16&255;this.highlightId=[$/255,V/255,rt/255,0]}};function it(q,Z,$,V){var rt;Array.isArray(q)?Z<q.length?rt=q[Z]:rt=void 0:rt=q,rt=h(rt);var ot=!0;e(rt)&&(rt="\u25BC",ot=!1);var H=b(rt,$,V);return{mesh:H[0],lines:H[1],bounds:H[2],visible:ot}}y.update=function(q){if(q=q||{},"perspective"in q&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var Z=!!q.project;this.axesProject=[Z,Z,Z]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var $=+q.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in q){if(Array.isArray(q.projectOpacity))this.projectOpacity=q.projectOpacity.slice();else{var $=+q.projectOpacity;this.projectOpacity=[$,$,$]}for(var V=0;V<3;++V)this.projectOpacity[V]=x(this.projectOpacity[V]),this.projectOpacity[V]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=x(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var rt=q.position,ot=q.font||"normal",H=q.alignment||[0,0],Y,at;if(H.length===2)Y=H[0],at=H[1];else{Y=[],at=[];for(var V=0;V<H.length;++V)Y[V]=H[V][0],at[V]=H[V][1]}var et=[1/0,1/0,1/0],ct=[-1/0,-1/0,-1/0],ft=q.glyph,yt=q.color,xt=q.size,Ct=q.angle,gt=q.lineColor,mt=-1,vt=0,At=0,Ot=0;if(rt.length){Ot=rt.length;t:for(var V=0;V<Ot;++V){for(var It=rt[V],St=0;St<3;++St)if(isNaN(It[St])||!isFinite(It[St]))continue t;var Bt=it(ft,V,ot,this.pixelRatio),re=Bt.mesh,Yt=Bt.lines,he=Bt.bounds;vt+=re.cells.length*3,At+=Yt.edges.length*2}}var Zt=vt+At,ae=s.mallocFloat(3*Zt),oe=s.mallocFloat(4*Zt),ce=s.mallocFloat(2*Zt),ue=s.mallocUint32(Zt);if(Zt>0){var ye=0,Tt=vt,Ft=[0,0,0,1],$t=[0,0,0,1],Vt=Array.isArray(yt)&&Array.isArray(yt[0]),Nt=Array.isArray(gt)&&Array.isArray(gt[0]);t:for(var V=0;V<Ot;++V){mt+=1;for(var It=rt[V],St=0;St<3;++St){if(isNaN(It[St])||!isFinite(It[St]))continue t;ct[St]=Math.max(ct[St],It[St]),et[St]=Math.min(et[St],It[St])}var Bt=it(ft,V,ot,this.pixelRatio),re=Bt.mesh,Yt=Bt.lines,he=Bt.bounds,Mt=Bt.visible;if(!Mt)Ft=[1,1,1,0];else if(Array.isArray(yt)){var Et;if(Vt?V<yt.length?Et=yt[V]:Et=[0,0,0,0]:Et=yt,Et.length===3){for(var St=0;St<3;++St)Ft[St]=Et[St];Ft[3]=1}else if(Et.length===4){for(var St=0;St<4;++St)Ft[St]=Et[St];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else Ft[0]=Ft[1]=Ft[2]=0,Ft[3]=1;if(!Mt)$t=[1,1,1,0];else if(Array.isArray(gt)){var Et;if(Nt?V<gt.length?Et=gt[V]:Et=[0,0,0,0]:Et=gt,Et.length===3){for(var St=0;St<3;++St)$t[St]=Et[St];$t[St]=1}else if(Et.length===4){for(var St=0;St<4;++St)$t[St]=Et[St];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else $t[0]=$t[1]=$t[2]=0,$t[3]=1;var Dt=.5;Mt?Array.isArray(xt)?V<xt.length?Dt=+xt[V]:Dt=12:xt?Dt=+xt:this.useOrtho&&(Dt=12):Dt=0;var dt=0;Array.isArray(Ct)?V<Ct.length?dt=+Ct[V]:dt=0:Ct&&(dt=+Ct);for(var ht=Math.cos(dt),bt=Math.sin(dt),It=rt[V],St=0;St<3;++St)ct[St]=Math.max(ct[St],It[St]),et[St]=Math.min(et[St],It[St]);var Pt=Y,Gt=at,Pt=0;Array.isArray(Y)?V<Y.length?Pt=Y[V]:Pt=0:Y&&(Pt=Y);var Gt=0;Array.isArray(at)?V<at.length?Gt=at[V]:Gt=0:at&&(Gt=at),Pt*=Pt>0?1-he[0][0]:Pt<0?1+he[1][0]:1,Gt*=Gt>0?1-he[0][1]:Gt<0?1+he[1][1]:1;for(var te=[Pt,Gt],ne=re.cells||[],je=re.positions||[],St=0;St<ne.length;++St)for(var Ne=ne[St],ge=0;ge<3;++ge){for(var _e=0;_e<3;++_e)ae[3*ye+_e]=It[_e];for(var _e=0;_e<4;++_e)oe[4*ye+_e]=Ft[_e];ue[ye]=mt;var De=je[Ne[ge]];ce[2*ye]=Dt*(ht*De[0]-bt*De[1]+te[0]),ce[2*ye+1]=Dt*(bt*De[0]+ht*De[1]+te[1]),ye+=1}for(var ne=Yt.edges,je=Yt.positions,St=0;St<ne.length;++St)for(var Ne=ne[St],ge=0;ge<2;++ge){for(var _e=0;_e<3;++_e)ae[3*Tt+_e]=It[_e];for(var _e=0;_e<4;++_e)oe[4*Tt+_e]=$t[_e];ue[Tt]=mt;var De=je[Ne[ge]];ce[2*Tt]=Dt*(ht*De[0]-bt*De[1]+te[0]),ce[2*Tt+1]=Dt*(bt*De[0]+ht*De[1]+te[1]),Tt+=1}}}this.bounds=[et,ct],this.points=rt,this.pointCount=rt.length,this.vertexCount=vt,this.lineVertexCount=At,this.pointBuffer.update(ae),this.colorBuffer.update(oe),this.glyphBuffer.update(ce),this.idBuffer.update(ue),s.free(ae),s.free(oe),s.free(ce),s.free(ue)},y.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function nt(q){var Z=q.gl,$=p.createPerspective(Z),V=p.createOrtho(Z),rt=p.createProject(Z),ot=p.createPickPerspective(Z),H=p.createPickOrtho(Z),Y=p.createPickProject(Z),at=l(Z),et=l(Z),ct=l(Z),ft=l(Z),yt=n(Z,[{buffer:at,size:3,type:Z.FLOAT},{buffer:et,size:4,type:Z.FLOAT},{buffer:ct,size:2,type:Z.FLOAT},{buffer:ft,size:4,type:Z.UNSIGNED_BYTE,normalized:!0}]),xt=new k(Z,$,V,rt,at,et,ct,ft,yt,ot,H,Y);return xt.update(q),xt}},4298:function(v,d,r){var e=r(3236);d.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),d.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(v,d,r){var e=r(9405),l=r(2762),n=r(4298);v.exports=p;function s(b,h,_){this.plot=b,this.boxBuffer=h,this.boxShader=_,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var o=s.prototype;o.draw=function(){if(this.enabled){var b=this.plot,h=this.selectBox,_=this.borderWidth;this.innerFill;var a=this.innerColor;this.outerFill;var c=this.outerColor,f=this.borderColor,x=b.box,k=b.screenBox,y=b.dataBox,A=b.viewBox,L=b.pixelRatio,u=(h[0]-y[0])*(A[2]-A[0])/(y[2]-y[0])+A[0],m=(h[1]-y[1])*(A[3]-A[1])/(y[3]-y[1])+A[1],S=(h[2]-y[0])*(A[2]-A[0])/(y[2]-y[0])+A[0],w=(h[3]-y[1])*(A[3]-A[1])/(y[3]-y[1])+A[1];if(u=Math.max(u,A[0]),m=Math.max(m,A[1]),S=Math.min(S,A[2]),w=Math.min(w,A[3]),!(S<u||w<m)){x.bind();var I=k[2]-k[0],O=k[3]-k[1];if(this.outerFill&&(x.drawBox(0,0,I,m,c),x.drawBox(0,m,u,w,c),x.drawBox(0,w,I,O,c),x.drawBox(S,m,I,w,c)),this.innerFill&&x.drawBox(u,m,S,w,a),_>0){var D=_*L;x.drawBox(u-D,m-D,S+D,m+D,f),x.drawBox(u-D,w-D,S+D,w+D,f),x.drawBox(u-D,m-D,u+D,w+D,f),x.drawBox(S-D,m-D,S+D,w+D,f)}}}},o.update=function(b){b=b||{},this.innerFill=!!b.innerFill,this.outerFill=!!b.outerFill,this.innerColor=(b.innerColor||[0,0,0,.5]).slice(),this.outerColor=(b.outerColor||[0,0,0,.5]).slice(),this.borderColor=(b.borderColor||[0,0,0,1]).slice(),this.borderWidth=b.borderWidth||0,this.selectBox=(b.selectBox||this.selectBox).slice()},o.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function p(b,h){var _=b.gl,a=l(_,[0,0,0,1,1,0,1,1]),c=e(_,n.boxVertex,n.boxFragment),f=new s(b,a,c);return f.update(h),b.addOverlay(f),f}},3589:function(v,d,r){v.exports=_;var e=r(2260),l=r(1888),n=r(9618),s=r(8828).nextPow2,o=function(a,c,f){for(var x=1e8,k=-1,y=-1,A=a.shape[0],L=a.shape[1],u=0;u<A;u++)for(var m=0;m<L;m++){var S=a.get(u,m,0),w=a.get(u,m,1),I=a.get(u,m,2),O=a.get(u,m,3);if(S<255||w<255||I<255||O<255){var D=c-u,P=f-m,F=D*D+P*P;F<x&&(x=F,k=u,y=m)}}return[k,y,x]};function p(a,c,f,x,k){this.coord=[a,c],this.id=f,this.value=x,this.distance=k}function b(a,c,f){this.gl=a,this.fbo=c,this.buffer=f,this._readTimeout=null;var x=this;this._readCallback=function(){x.gl&&(c.bind(),a.readPixels(0,0,c.shape[0],c.shape[1],a.RGBA,a.UNSIGNED_BYTE,x.buffer),x._readTimeout=null)}}var h=b.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(a){if(this.gl){this.fbo.shape=a;var c=this.fbo.shape[0],f=this.fbo.shape[1];if(f*c*4>this.buffer.length){l.free(this.buffer);for(var x=this.buffer=l.mallocUint8(s(f*c*4)),k=0;k<f*c*4;++k)x[k]=255}return a}}}),h.begin=function(){var a=this.gl;this.shape,a&&(this.fbo.bind(),a.clearColor(1,1,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT))},h.end=function(){var a=this.gl;a&&(a.bindFramebuffer(a.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(a,c,f){if(!this.gl)return null;var x=this.fbo.shape.slice();a=a|0,c=c|0,typeof f!="number"&&(f=1);var k=Math.min(Math.max(a-f,0),x[0])|0,y=Math.min(Math.max(a+f,0),x[0])|0,A=Math.min(Math.max(c-f,0),x[1])|0,L=Math.min(Math.max(c+f,0),x[1])|0;if(y<=k||L<=A)return null;var u=[y-k,L-A],m=n(this.buffer,[u[0],u[1],4],[4,x[0]*4,1],4*(k+x[0]*A)),S=o(m.hi(u[0],u[1],1),f,f),w=S[0],I=S[1];if(w<0||Math.pow(this.radius,2)<S[2])return null;var O=m.get(w,I,0),D=m.get(w,I,1),P=m.get(w,I,2),F=m.get(w,I,3);return new p(w+k|0,I+A|0,O,[D,P,F],Math.sqrt(S[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),l.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function _(a,c){var f=c[0],x=c[1],k={},y=e(a,f,x,k),A=l.mallocUint8(f*x*4);return new b(a,y,A)}},9405:function(v,d,r){var e=r(3327),l=r(8731),n=r(216),s=r(5091),o=r(2145),p=r(8866);function b(c){this.gl=c,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=b.prototype;h.bind=function(){this.program||this._relink();var c,f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),x=this.gl.lastAttribCount;if(f>x)for(c=x;c<f;c++)this.gl.enableVertexAttribArray(c);else if(x>f)for(c=f;c<x;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},h.dispose=function(){for(var c=this.gl.lastAttribCount,f=0;f<c;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function _(c,f){return c.name<f.name?-1:1}h.update=function(c,f,x,k){if(!f||arguments.length===1){var y=c;c=y.vertex,f=y.fragment,x=y.uniforms,k=y.attributes}var A=this,L=A.gl,u=A._vref;A._vref=s.shader(L,L.VERTEX_SHADER,c),u&&u.dispose(),A.vertShader=A._vref.shader;var m=this._fref;if(A._fref=s.shader(L,L.FRAGMENT_SHADER,f),m&&m.dispose(),A.fragShader=A._fref.shader,!x||!k){var S=L.createProgram();if(L.attachShader(S,A.fragShader),L.attachShader(S,A.vertShader),L.linkProgram(S),!L.getProgramParameter(S,L.LINK_STATUS)){var w=L.getProgramInfoLog(S);throw new p(w,"Error linking program:"+w)}x=x||o.uniforms(L,S),k=k||o.attributes(L,S),L.deleteProgram(S)}k=k.slice(),k.sort(_);var I=[],O=[],D=[],P;for(P=0;P<k.length;++P){var F=k[P];if(F.type.indexOf("mat")>=0){for(var R=F.type.charAt(F.type.length-1)|0,B=new Array(R),N=0;N<R;++N)B[N]=D.length,O.push(F.name+"["+N+"]"),typeof F.location=="number"?D.push(F.location+N):Array.isArray(F.location)&&F.location.length===R&&typeof F.location[N]=="number"?D.push(F.location[N]|0):D.push(-1);I.push({name:F.name,type:F.type,locations:B})}else I.push({name:F.name,type:F.type,locations:[D.length]}),O.push(F.name),typeof F.location=="number"?D.push(F.location|0):D.push(-1)}var G=0;for(P=0;P<D.length;++P)if(D[P]<0){for(;D.indexOf(G)>=0;)G+=1;D[P]=G}var X=new Array(x.length);function J(){A.program=s.program(L,A._vref,A._fref,O,D);for(var it=0;it<x.length;++it)X[it]=L.getUniformLocation(A.program,x[it].name)}J(),A._relink=J,A.types={uniforms:n(x),attributes:n(k)},A.attributes=l(L,A,I,D),Object.defineProperty(A,"uniforms",e(L,A,x,X))};function a(c,f,x,k,y){var A=new b(c);return A.update(f,x,k,y),A}v.exports=a},8866:function(v){function d(r,e,l){this.shortMessage=e||"",this.longMessage=l||"",this.rawError=r||"",this.message="gl-shader: "+(e||r||"")+(l?`
`+l:""),this.stack=new Error().stack}d.prototype=new Error,d.prototype.name="GLError",d.prototype.constructor=d,v.exports=d},8731:function(v,d,r){v.exports=b;var e=r(8866);function l(h,_,a,c,f,x){this._gl=h,this._wrapper=_,this._index=a,this._locations=c,this._dimension=f,this._constFunc=x}var n=l.prototype;n.pointer=function(h,_,a,c){var f=this,x=f._gl,k=f._locations[f._index];x.vertexAttribPointer(k,f._dimension,h||x.FLOAT,!!_,a||0,c||0),x.enableVertexAttribArray(k)},n.set=function(h,_,a,c){return this._constFunc(this._locations[this._index],h,_,a,c)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=h|0,this._wrapper.program=null),h|0}});var s=[function(h,_,a){return a.length===void 0?h.vertexAttrib1f(_,a):h.vertexAttrib1fv(_,a)},function(h,_,a,c){return a.length===void 0?h.vertexAttrib2f(_,a,c):h.vertexAttrib2fv(_,a)},function(h,_,a,c,f){return a.length===void 0?h.vertexAttrib3f(_,a,c,f):h.vertexAttrib3fv(_,a)},function(h,_,a,c,f,x){return a.length===void 0?h.vertexAttrib4f(_,a,c,f,x):h.vertexAttrib4fv(_,a)}];function o(h,_,a,c,f,x,k){var y=s[f],A=new l(h,_,a,c,f,y);Object.defineProperty(x,k,{set:function(L){return h.disableVertexAttribArray(c[a]),y(h,c[a],L),L},get:function(){return A},enumerable:!0})}function p(h,_,a,c,f,x,k){for(var y=new Array(f),A=new Array(f),L=0;L<f;++L)o(h,_,a[L],c,f,y,L),A[L]=y[L];Object.defineProperty(y,"location",{set:function(S){if(Array.isArray(S))for(var w=0;w<f;++w)A[w].location=S[w];else for(var w=0;w<f;++w)A[w].location=S+w;return S},get:function(){for(var S=new Array(f),w=0;w<f;++w)S[w]=c[a[w]];return S},enumerable:!0}),y.pointer=function(S,w,I,O){S=S||h.FLOAT,w=!!w,I=I||f*f,O=O||0;for(var D=0;D<f;++D){var P=c[a[D]];h.vertexAttribPointer(P,f,S,w,I,O+D*f),h.enableVertexAttribArray(P)}};var u=new Array(f),m=h["vertexAttrib"+f+"fv"];Object.defineProperty(x,k,{set:function(S){for(var w=0;w<f;++w){var I=c[a[w]];if(h.disableVertexAttribArray(I),Array.isArray(S[0]))m.call(h,I,S[w]);else{for(var O=0;O<f;++O)u[O]=S[f*w+O];m.call(h,I,u)}}return S},get:function(){return y},enumerable:!0})}function b(h,_,a,c){for(var f={},x=0,k=a.length;x<k;++x){var y=a[x],A=y.name,L=y.type,u=y.locations;switch(L){case"bool":case"int":case"float":o(h,_,u[0],c,1,f,A);break;default:if(L.indexOf("vec")>=0){var m=L.charCodeAt(L.length-1)-48;if(m<2||m>4)throw new e("","Invalid data type for attribute "+A+": "+L);o(h,_,u[0],c,m,f,A)}else if(L.indexOf("mat")>=0){var m=L.charCodeAt(L.length-1)-48;if(m<2||m>4)throw new e("","Invalid data type for attribute "+A+": "+L);p(h,_,u,c,m,f,A)}else throw new e("","Unknown data type for attribute "+A+": "+L);break}}return f}},3327:function(v,d,r){var e=r(216),l=r(8866);v.exports=o;function n(p){return function(){return p}}function s(p,b){for(var h=new Array(p),_=0;_<p;++_)h[_]=b;return h}function o(p,b,h,_){function a(L){return function(u,m,S){return u.getUniform(m.program,S[L])}}function c(L){return function(u){for(var m=f("",L),S=0;S<m.length;++S){var w=m[S],I=w[0],O=w[1];if(_[O]){var D=u;if(typeof I=="string"&&(I.indexOf(".")===0||I.indexOf("[")===0)){var P=I;if(I.indexOf(".")===0&&(P=I.slice(1)),P.indexOf("]")===P.length-1){var F=P.indexOf("["),R=P.slice(0,F),B=P.slice(F+1,P.length-1);D=R?u[R][B]:u[B]}else D=u[P]}var N=h[O].type,G;switch(N){case"bool":case"int":case"sampler2D":case"samplerCube":p.uniform1i(_[O],D);break;case"float":p.uniform1f(_[O],D);break;default:var X=N.indexOf("vec");if(0<=X&&X<=1&&N.length===4+X){if(G=N.charCodeAt(N.length-1)-48,G<2||G>4)throw new l("","Invalid data type");switch(N.charAt(0)){case"b":case"i":p["uniform"+G+"iv"](_[O],D);break;case"v":p["uniform"+G+"fv"](_[O],D);break;default:throw new l("","Unrecognized data type for vector "+name+": "+N)}}else if(N.indexOf("mat")===0&&N.length===4){if(G=N.charCodeAt(N.length-1)-48,G<2||G>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+N);p["uniformMatrix"+G+"fv"](_[O],!1,D);break}else throw new l("","Unknown uniform data type for "+name+": "+N)}}}}}function f(L,u){if(typeof u!="object")return[[L,u]];var m=[];for(var S in u){var w=u[S],I=L;parseInt(S)+""===S?I+="["+S+"]":I+="."+S,typeof w=="object"?m.push.apply(m,f(I,w)):m.push([I,w])}return m}function x(L){switch(L){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var u=L.indexOf("vec");if(0<=u&&u<=1&&L.length===4+u){var m=L.charCodeAt(L.length-1)-48;if(m<2||m>4)throw new l("","Invalid data type");return L.charAt(0)==="b"?s(m,!1):s(m,0)}else if(L.indexOf("mat")===0&&L.length===4){var m=L.charCodeAt(L.length-1)-48;if(m<2||m>4)throw new l("","Invalid uniform dimension type for matrix "+name+": "+L);return s(m*m,0)}else throw new l("","Unknown uniform data type for "+name+": "+L)}}function k(L,u,m){if(typeof m=="object"){var S=y(m);Object.defineProperty(L,u,{get:n(S),set:c(m),enumerable:!0,configurable:!1})}else _[m]?Object.defineProperty(L,u,{get:a(m),set:c(m),enumerable:!0,configurable:!1}):L[u]=x(h[m].type)}function y(L){var u;if(Array.isArray(L)){u=new Array(L.length);for(var m=0;m<L.length;++m)k(u,m,L[m])}else{u={};for(var S in L)k(u,S,L[S])}return u}var A=e(h,!0);return{get:n(y(A)),set:c(A),enumerable:!0,configurable:!0}}},216:function(v){v.exports=d;function d(r,e){for(var l={},n=0;n<r.length;++n)for(var s=r[n].name,o=s.split("."),p=l,b=0;b<o.length;++b){var h=o[b].split("[");if(h.length>1){h[0]in p||(p[h[0]]=[]),p=p[h[0]];for(var _=1;_<h.length;++_){var a=parseInt(h[_]);_<h.length-1||b<o.length-1?(a in p||(_<h.length-1?p[a]=[]:p[a]={}),p=p[a]):e?p[a]=n:p[a]=r[n].type}}else b<o.length-1?(h[0]in p||(p[h[0]]={}),p=p[h[0]]):e?p[h[0]]=n:p[h[0]]=r[n].type}return l}},2145:function(v,d){d.uniforms=n,d.attributes=s;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},e=null;function l(o,p){if(!e){var b=Object.keys(r);e={};for(var h=0;h<b.length;++h){var _=b[h];e[o[_]]=r[_]}}return e[p]}function n(o,p){for(var b=o.getProgramParameter(p,o.ACTIVE_UNIFORMS),h=[],_=0;_<b;++_){var a=o.getActiveUniform(p,_);if(a){var c=l(o,a.type);if(a.size>1)for(var f=0;f<a.size;++f)h.push({name:a.name.replace("[0]","["+f+"]"),type:c});else h.push({name:a.name,type:c})}}return h}function s(o,p){for(var b=o.getProgramParameter(p,o.ACTIVE_ATTRIBUTES),h=[],_=0;_<b;++_){var a=o.getActiveAttrib(p,_);a&&h.push({name:a.name,type:l(o,a.type)})}return h}},5091:function(v,d,r){d.shader=f,d.program=x;var e=r(8866),l=r(2992),n=typeof WeakMap>"u"?r(606):WeakMap,s=new n,o=0;function p(k,y,A,L,u,m,S){this.id=k,this.src=y,this.type=A,this.shader=L,this.count=m,this.programs=[],this.cache=S}p.prototype.dispose=function(){if(--this.count===0){for(var k=this.cache,y=k.gl,A=this.programs,L=0,u=A.length;L<u;++L){var m=k.programs[A[L]];m&&(delete k.programs[L],y.deleteProgram(m))}y.deleteShader(this.shader),delete k.shaders[this.type===y.FRAGMENT_SHADER|0][this.src]}};function b(k){this.gl=k,this.shaders=[{},{}],this.programs={}}var h=b.prototype;function _(k,y,A){var L=k.createShader(y);if(k.shaderSource(L,A),k.compileShader(L),!k.getShaderParameter(L,k.COMPILE_STATUS)){var u=k.getShaderInfoLog(L);try{var m=l(u,A,y)}catch(S){throw console.warn("Failed to format compiler error: "+S),new e(u,`Error compiling shader:
`+u)}throw new e(u,m.short,m.long)}return L}h.getShaderReference=function(k,y){var A=this.gl,L=this.shaders[k===A.FRAGMENT_SHADER|0],u=L[y];if(!u||!A.isShader(u.shader)){var m=_(A,k,y);u=L[y]=new p(o++,y,k,m,[],1,this)}else u.count+=1;return u};function a(k,y,A,L,u){var m=k.createProgram();k.attachShader(m,y),k.attachShader(m,A);for(var S=0;S<L.length;++S)k.bindAttribLocation(m,u[S],L[S]);if(k.linkProgram(m),!k.getProgramParameter(m,k.LINK_STATUS)){var w=k.getProgramInfoLog(m);throw new e(w,"Error linking program: "+w)}return m}h.getProgram=function(k,y,A,L){var u=[k.id,y.id,A.join(":"),L.join(":")].join("@"),m=this.programs[u];return(!m||!this.gl.isProgram(m))&&(this.programs[u]=m=a(this.gl,k.shader,y.shader,A,L),k.programs.push(u),y.programs.push(u)),m};function c(k){var y=s.get(k);return y||(y=new b(k),s.set(k,y)),y}function f(k,y,A){return c(k).getShaderReference(y,A)}function x(k,y,A,L,u){return c(k).getProgram(y,A,L,u)}},4098:function(v){v.exports=e;function d(l){this.plot=l,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var r=d.prototype;r.update=function(l){l=l||{},this.enable=(l.enable||[!0,!0,!1,!1]).slice(),this.width=(l.width||[1,1,1,1]).slice(),this.color=(l.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(l.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var l=this.enable,n=this.width,s=this.color,o=this.center,p=this.plot,b=p.line,h=p.dataBox,_=p.viewBox;if(b.bind(),h[0]<=o[0]&&o[0]<=h[2]&&h[1]<=o[1]&&o[1]<=h[3]){var a=_[0]+(o[0]-h[0])/(h[2]-h[0])*(_[2]-_[0]),c=_[1]+(o[1]-h[1])/(h[3]-h[1])*(_[3]-_[1]);l[0]&&b.drawLine(a,c,_[0],c,n[0],s[0]),l[1]&&b.drawLine(a,c,a,_[1],n[1],s[1]),l[2]&&b.drawLine(a,c,_[2],c,n[2],s[2]),l[3]&&b.drawLine(a,c,a,_[3],n[3],s[3])}},r.dispose=function(){this.plot.removeOverlay(this)};function e(l,n){var s=new d(l);return s.update(n),l.addOverlay(s),s}},1493:function(v,d,r){var e=r(3236),l=r(9405),n=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),s=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);v.exports=function(o){return l(o,n,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(v,d,r){var e=r(2762),l=r(8116),n=r(1493);v.exports=a;var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function o(c,f,x,k){this.gl=c,this.buffer=f,this.vao=x,this.shader=k,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var p=o.prototype,b=[0,0,0],h=[0,0,0],_=[0,0];p.isTransparent=function(){return!1},p.drawTransparent=function(c){},p.draw=function(c){var f=this.gl,x=this.vao,k=this.shader;x.bind(),k.bind();var y=c.model||s,A=c.view||s,L=c.projection||s,u;this.axes&&(u=this.axes.lastCubeProps.axis);for(var m=b,S=h,w=0;w<3;++w)u&&u[w]<0?(m[w]=this.bounds[0][w],S[w]=this.bounds[1][w]):(m[w]=this.bounds[1][w],S[w]=this.bounds[0][w]);_[0]=f.drawingBufferWidth,_[1]=f.drawingBufferHeight,k.uniforms.model=y,k.uniforms.view=A,k.uniforms.projection=L,k.uniforms.coordinates=[this.position,m,S],k.uniforms.colors=this.colors,k.uniforms.screenShape=_;for(var w=0;w<3;++w)k.uniforms.lineWidth=this.lineWidth[w]*this.pixelRatio,this.enabled[w]&&(x.draw(f.TRIANGLES,6,6*w),this.drawSides[w]&&x.draw(f.TRIANGLES,12,18+12*w));x.unbind()},p.update=function(c){c&&("bounds"in c&&(this.bounds=c.bounds),"position"in c&&(this.position=c.position),"lineWidth"in c&&(this.lineWidth=c.lineWidth),"colors"in c&&(this.colors=c.colors),"enabled"in c&&(this.enabled=c.enabled),"drawSides"in c&&(this.drawSides=c.drawSides))},p.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function a(c,f){var x=[];function k(m,S,w,I,O,D){var P=[m,S,w,0,0,0,1];P[I+3]=1,P[I]=O,x.push.apply(x,P),P[6]=-1,x.push.apply(x,P),P[I]=D,x.push.apply(x,P),x.push.apply(x,P),P[6]=1,x.push.apply(x,P),P[I]=O,x.push.apply(x,P)}k(0,0,0,0,0,1),k(0,0,0,1,0,1),k(0,0,0,2,0,1),k(1,0,0,1,-1,1),k(1,0,0,2,-1,1),k(0,1,0,0,-1,1),k(0,1,0,2,-1,1),k(0,0,1,0,-1,1),k(0,0,1,1,-1,1);var y=e(c,x),A=l(c,[{type:c.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:c.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:c.FLOAT,buffer:y,size:1,offset:24,stride:28}]),L=n(c);L.attributes.position.location=0,L.attributes.color.location=1,L.attributes.weight.location=2;var u=new o(c,y,A,L);return u.update(f),u}},6740:function(v,d,r){var e=r(3236),l=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),o=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);d.meshShader={vertex:l,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},d.pickShader={vertex:s,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(v,d,r){var e=r(2931),l=r(9970),n=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(x,k,y,A){for(var L=x.points,u=x.velocities,m=x.divergences,S=[],w=[],I=[],O=[],D=[],P=[],F=0,R=0,B=l.create(),N=l.create(),G=8,X=0;X<L.length;X++){var J=L[X],it=u[X],nt=m[X];k===0&&(nt=y*.05),R=e.length(it)/A,B=l.create(),e.copy(B,it),B[3]=nt;for(var q=0;q<G;q++)D[q]=[J[0],J[1],J[2],q];if(O.length>0)for(var q=0;q<G;q++){var Z=(q+1)%G;S.push(O[q],D[q],D[Z],D[Z],O[Z],O[q]),I.push(N,B,B,B,N,N),P.push(F,R,R,R,F,F);var $=S.length;w.push([$-6,$-5,$-4],[$-3,$-2,$-1])}var V=O;O=D,D=V;var rt=N;N=B,B=rt;var ot=F;F=R,R=ot}return{positions:S,cells:w,vectors:I,vertexIntensity:P}},o=function(x,k,y,A){for(var L=0,u=0;u<x.length;u++)for(var m=x[u].velocities,S=0;S<m.length;S++)L=Math.max(L,e.length(m[S]));for(var w=x.map(function(J){return s(J,y,A,L)}),I=[],O=[],D=[],P=[],u=0;u<w.length;u++){var F=w[u],R=I.length;I=I.concat(F.positions),D=D.concat(F.vectors),P=P.concat(F.vertexIntensity);for(var S=0;S<F.cells.length;S++){var B=F.cells[S],N=[];O.push(N);for(var G=0;G<B.length;G++)N.push(B[G]+R)}}return{positions:I,cells:O,vectors:D,vertexIntensity:P,colormap:k}},p=function(x,k){var y=x.length,A;for(A=0;A<y;A++){var L=x[A];if(L===k)return A;if(L>k)return A-1}return A},b=function(x,k,y){return x<k?k:x>y?y:x},h=function(x,k,y){var A=k.vectors,L=k.meshgrid,u=x[0],m=x[1],S=x[2],w=L[0].length,I=L[1].length,O=L[2].length,D=p(L[0],u),P=p(L[1],m),F=p(L[2],S),R=D+1,B=P+1,N=F+1;if(D=b(D,0,w-1),R=b(R,0,w-1),P=b(P,0,I-1),B=b(B,0,I-1),F=b(F,0,O-1),N=b(N,0,O-1),D<0||P<0||F<0||R>w-1||B>I-1||N>O-1)return e.create();var G=L[0][D],X=L[0][R],J=L[1][P],it=L[1][B],nt=L[2][F],q=L[2][N],Z=(u-G)/(X-G),$=(m-J)/(it-J),V=(S-nt)/(q-nt);isFinite(Z)||(Z=.5),isFinite($)||($=.5),isFinite(V)||(V=.5);var rt,ot,H,Y,at,et;switch(y.reversedX&&(D=w-1-D,R=w-1-R),y.reversedY&&(P=I-1-P,B=I-1-B),y.reversedZ&&(F=O-1-F,N=O-1-N),y.filled){case 5:at=F,et=N,H=P*O,Y=B*O,rt=D*O*I,ot=R*O*I;break;case 4:at=F,et=N,rt=D*O,ot=R*O,H=P*O*w,Y=B*O*w;break;case 3:H=P,Y=B,at=F*I,et=N*I,rt=D*I*O,ot=R*I*O;break;case 2:H=P,Y=B,rt=D*I,ot=R*I,at=F*I*w,et=N*I*w;break;case 1:rt=D,ot=R,at=F*w,et=N*w,H=P*w*O,Y=B*w*O;break;default:rt=D,ot=R,H=P*w,Y=B*w,at=F*w*I,et=N*w*I;break}var ct=A[rt+H+at],ft=A[rt+H+et],yt=A[rt+Y+at],xt=A[rt+Y+et],Ct=A[ot+H+at],gt=A[ot+H+et],mt=A[ot+Y+at],vt=A[ot+Y+et],At=e.create(),Ot=e.create(),It=e.create(),St=e.create();e.lerp(At,ct,Ct,Z),e.lerp(Ot,ft,gt,Z),e.lerp(It,yt,mt,Z),e.lerp(St,xt,vt,Z);var Bt=e.create(),re=e.create();e.lerp(Bt,At,It,$),e.lerp(re,Ot,St,$);var Yt=e.create();return e.lerp(Yt,Bt,re,V),Yt},_=function(x){var k=1/0;x.sort(function(u,m){return u-m});for(var y=x.length,A=1;A<y;A++){var L=Math.abs(x[A]-x[A-1]);L<k&&(k=L)}return k},a=function(x){for(var k=[],y=[],A=[],L={},u={},m={},S=x.length,w=0;w<S;w++){var I=x[w],O=I[0],D=I[1],P=I[2];L[O]||(k.push(O),L[O]=!0),u[D]||(y.push(D),u[D]=!0),m[P]||(A.push(P),m[P]=!0)}var F=_(k),R=_(y),B=_(A),N=Math.min(F,R,B);return isFinite(N)?N:1};v.exports=function(x,k){var y=x.startingPositions,A=x.maxLength||1e3,L=x.tubeSize||1,u=x.absoluteTubeSize,m=x.gridFill||"+x+y+z",S={};m.indexOf("-x")!==-1&&(S.reversedX=!0),m.indexOf("-y")!==-1&&(S.reversedY=!0),m.indexOf("-z")!==-1&&(S.reversedZ=!0),S.filled=n.indexOf(m.replace(/-/g,"").replace(/\+/g,""));var w=x.getVelocity||function(gt){return h(gt,x,S)},I=x.getDivergence||function(gt,mt){var vt=e.create(),At=1e-4;e.add(vt,gt,[At,0,0]);var Ot=w(vt);e.subtract(Ot,Ot,mt),e.scale(Ot,Ot,1/At),e.add(vt,gt,[0,At,0]);var It=w(vt);e.subtract(It,It,mt),e.scale(It,It,1/At),e.add(vt,gt,[0,0,At]);var St=w(vt);return e.subtract(St,St,mt),e.scale(St,St,1/At),e.add(vt,Ot,It),e.add(vt,vt,St),vt},O=[],D=k[0][0],P=k[0][1],F=k[0][2],R=k[1][0],B=k[1][1],N=k[1][2],G=function(gt){var mt=gt[0],vt=gt[1],At=gt[2];return!(mt<D||mt>R||vt<P||vt>B||At<F||At>N)},X=e.distance(k[0],k[1]),J=10*X/A,it=J*J,nt=1,q=0,Z=y.length;Z>1&&(nt=a(y));for(var $=0;$<Z;$++){var V=e.create();e.copy(V,y[$]);var rt=[V],ot=[],H=w(V),Y=V;ot.push(H);var at=[],et=I(V,H),ct=e.length(et);isFinite(ct)&&ct>q&&(q=ct),at.push(ct),O.push({points:rt,velocities:ot,divergences:at});for(var ft=0;ft<A*100&&rt.length<A&&G(V);){ft++;var yt=e.clone(H),xt=e.squaredLength(yt);if(xt===0)break;if(xt>it&&e.scale(yt,yt,J/Math.sqrt(xt)),e.add(yt,yt,V),H=w(yt),e.squaredDistance(Y,yt)-it>-1e-4*it){rt.push(yt),Y=yt,ot.push(H);var et=I(yt,H),ct=e.length(et);isFinite(ct)&&ct>q&&(q=ct),at.push(ct)}V=yt}}var Ct=o(O,x.colormap,q,nt);return u?Ct.tubeScale=u:(q===0&&(q=1),Ct.tubeScale=L*.5*nt/q),Ct};var c=r(6740),f=r(6405).createMesh;v.exports.createTubeMesh=function(x,k){return f(x,k,{shaders:c,traceType:"streamtube"})}},990:function(v,d,r){var e=r(9405),l=r(3236),n=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),s=l([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),o=l([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),p=l([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);d.createShader=function(b){var h=e(b,n,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},d.createPickShader=function(b){var h=e(b,n,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},d.createContourShader=function(b){var h=e(b,o,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h},d.createPickContourShader=function(b){var h=e(b,o,p,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h}},9499:function(v,d,r){v.exports=ot;var e=r(8828),l=r(2762),n=r(8116),s=r(7766),o=r(1888),p=r(6729),b=r(5298),h=r(9994),_=r(9618),a=r(3711),c=r(6760),f=r(7608),x=r(2478),k=r(6199),y=r(990),A=y.createShader,L=y.createContourShader,u=y.createPickShader,m=y.createPickContourShader,S=4*10,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],I=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],O=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var H=0;H<3;++H){var Y=O[H],at=(H+1)%3,et=(H+2)%3;Y[at+0]=1,Y[et+3]=1,Y[H+6]=1}})();function D(H,Y,at,et,ct){this.position=H,this.index=Y,this.uv=at,this.level=et,this.dataCoordinate=ct}var P=256;function F(H,Y,at,et,ct,ft,yt,xt,Ct,gt,mt,vt,At,Ot,It){this.gl=H,this.shape=Y,this.bounds=at,this.objectOffset=It,this.intensityBounds=[],this._shader=et,this._pickShader=ct,this._coordinateBuffer=ft,this._vao=yt,this._colorMap=xt,this._contourShader=Ct,this._contourPickShader=gt,this._contourBuffer=mt,this._contourVAO=vt,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new D([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=At,this._dynamicVAO=Ot,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[_(o.mallocFloat(1024),[0,0]),_(o.mallocFloat(1024),[0,0]),_(o.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var R=F.prototype;R.genColormap=function(H,Y){var at=!1,et=h([p({colormap:H,nshades:P,format:"rgba"}).map(function(ct,ft){var yt=Y?B(ft/255,Y):ct[3];return yt<1&&(at=!0),[ct[0],ct[1],ct[2],255*yt]})]);return b.divseq(et,255),this.hasAlphaScale=at,et},R.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},R.isOpaque=function(){return!this.isTransparent()},R.pickSlots=1,R.setPickBase=function(H){this.pickId=H};function B(H,Y){if(!Y||!Y.length)return 1;for(var at=0;at<Y.length;++at){if(Y.length<2)return 1;if(Y[at][0]===H)return Y[at][1];if(Y[at][0]>H&&at>0){var et=(Y[at][0]-H)/(Y[at][0]-Y[at-1][0]);return Y[at][1]*(1-et)+et*Y[at-1][1]}}return 1}var N=[0,0,0],G={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function X(H,Y){var at,et,ct,ft=Y.axes&&Y.axes.lastCubeProps.axis||N,yt=Y.showSurface,xt=Y.showContour;for(at=0;at<3;++at)for(yt=yt||Y.surfaceProject[at],et=0;et<3;++et)xt=xt||Y.contourProject[at][et];for(at=0;at<3;++at){var Ct=G.projections[at];for(et=0;et<16;++et)Ct[et]=0;for(et=0;et<4;++et)Ct[5*et]=1;Ct[5*at]=0,Ct[12+at]=Y.axesBounds[+(ft[at]>0)][at],c(Ct,H.model,Ct);var gt=G.clipBounds[at];for(ct=0;ct<2;++ct)for(et=0;et<3;++et)gt[ct][et]=H.clipBounds[ct][et];gt[0][at]=-1e8,gt[1][at]=1e8}return G.showSurface=yt,G.showContour=xt,G}var J={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},it=w.slice(),nt=[1,0,0,0,1,0,0,0,1];function q(H,Y){H=H||{};var at=this.gl;at.disable(at.CULL_FACE),this._colorMap.bind(0);var et=J;et.model=H.model||w,et.view=H.view||w,et.projection=H.projection||w,et.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],et.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],et.objectOffset=this.objectOffset,et.contourColor=this.contourColor[0],et.inverseModel=f(et.inverseModel,et.model);for(var ct=0;ct<2;++ct)for(var ft=et.clipBounds[ct],yt=0;yt<3;++yt)ft[yt]=Math.min(Math.max(this.clipBounds[ct][yt],-1e8),1e8);et.kambient=this.ambientLight,et.kdiffuse=this.diffuseLight,et.kspecular=this.specularLight,et.roughness=this.roughness,et.fresnel=this.fresnel,et.opacity=this.opacity,et.height=0,et.permutation=nt,et.vertexColor=this.vertexColor;var xt=it;for(c(xt,et.view,et.model),c(xt,et.projection,xt),f(xt,xt),ct=0;ct<3;++ct)et.eyePosition[ct]=xt[12+ct]/xt[15];var Ct=xt[15];for(ct=0;ct<3;++ct)Ct+=this.lightPosition[ct]*xt[4*ct+3];for(ct=0;ct<3;++ct){var gt=xt[12+ct];for(yt=0;yt<3;++yt)gt+=xt[4*yt+ct]*this.lightPosition[yt];et.lightPosition[ct]=gt/Ct}var mt=X(et,this);if(mt.showSurface){for(this._shader.bind(),this._shader.uniforms=et,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(at.TRIANGLES,this._vertexCount),ct=0;ct<3;++ct)!this.surfaceProject[ct]||!this.vertexCount||(this._shader.uniforms.model=mt.projections[ct],this._shader.uniforms.clipBounds=mt.clipBounds[ct],this._vao.draw(at.TRIANGLES,this._vertexCount));this._vao.unbind()}if(mt.showContour){var vt=this._contourShader;et.kambient=1,et.kdiffuse=0,et.kspecular=0,et.opacity=1,vt.bind(),vt.uniforms=et;var At=this._contourVAO;for(At.bind(),ct=0;ct<3;++ct)for(vt.uniforms.permutation=O[ct],at.lineWidth(this.contourWidth[ct]*this.pixelRatio),yt=0;yt<this.contourLevels[ct].length;++yt)yt===this.highlightLevel[ct]?(vt.uniforms.contourColor=this.highlightColor[ct],vt.uniforms.contourTint=this.highlightTint[ct]):(yt===0||yt-1===this.highlightLevel[ct])&&(vt.uniforms.contourColor=this.contourColor[ct],vt.uniforms.contourTint=this.contourTint[ct]),this._contourCounts[ct][yt]&&(vt.uniforms.height=this.contourLevels[ct][yt],At.draw(at.LINES,this._contourCounts[ct][yt],this._contourOffsets[ct][yt]));for(ct=0;ct<3;++ct)for(vt.uniforms.model=mt.projections[ct],vt.uniforms.clipBounds=mt.clipBounds[ct],yt=0;yt<3;++yt)if(this.contourProject[ct][yt]){vt.uniforms.permutation=O[yt],at.lineWidth(this.contourWidth[yt]*this.pixelRatio);for(var Ot=0;Ot<this.contourLevels[yt].length;++Ot)Ot===this.highlightLevel[yt]?(vt.uniforms.contourColor=this.highlightColor[yt],vt.uniforms.contourTint=this.highlightTint[yt]):(Ot===0||Ot-1===this.highlightLevel[yt])&&(vt.uniforms.contourColor=this.contourColor[yt],vt.uniforms.contourTint=this.contourTint[yt]),this._contourCounts[yt][Ot]&&(vt.uniforms.height=this.contourLevels[yt][Ot],At.draw(at.LINES,this._contourCounts[yt][Ot],this._contourOffsets[yt][Ot]))}for(At.unbind(),At=this._dynamicVAO,At.bind(),ct=0;ct<3;++ct)if(this._dynamicCounts[ct]!==0)for(vt.uniforms.model=et.model,vt.uniforms.clipBounds=et.clipBounds,vt.uniforms.permutation=O[ct],at.lineWidth(this.dynamicWidth[ct]*this.pixelRatio),vt.uniforms.contourColor=this.dynamicColor[ct],vt.uniforms.contourTint=this.dynamicTint[ct],vt.uniforms.height=this.dynamicLevel[ct],At.draw(at.LINES,this._dynamicCounts[ct],this._dynamicOffsets[ct]),yt=0;yt<3;++yt)this.contourProject[yt][ct]&&(vt.uniforms.model=mt.projections[yt],vt.uniforms.clipBounds=mt.clipBounds[yt],At.draw(at.LINES,this._dynamicCounts[ct],this._dynamicOffsets[ct]));At.unbind()}}R.draw=function(H){return q.call(this,H,!1)},R.drawTransparent=function(H){return q.call(this,H,!0)};var Z={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};R.drawPick=function(H){H=H||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var at=Z;at.model=H.model||w,at.view=H.view||w,at.projection=H.projection||w,at.shape=this._field[2].shape,at.pickId=this.pickId/255,at.lowerBound=this.bounds[0],at.upperBound=this.bounds[1],at.objectOffset=this.objectOffset,at.permutation=nt;for(var et=0;et<2;++et)for(var ct=at.clipBounds[et],ft=0;ft<3;++ft)ct[ft]=Math.min(Math.max(this.clipBounds[et][ft],-1e8),1e8);var yt=X(at,this);if(yt.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=at,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),et=0;et<3;++et)this.surfaceProject[et]&&(this._pickShader.uniforms.model=yt.projections[et],this._pickShader.uniforms.clipBounds=yt.clipBounds[et],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(yt.showContour){var xt=this._contourPickShader;xt.bind(),xt.uniforms=at;var Ct=this._contourVAO;for(Ct.bind(),ft=0;ft<3;++ft)for(Y.lineWidth(this.contourWidth[ft]*this.pixelRatio),xt.uniforms.permutation=O[ft],et=0;et<this.contourLevels[ft].length;++et)this._contourCounts[ft][et]&&(xt.uniforms.height=this.contourLevels[ft][et],Ct.draw(Y.LINES,this._contourCounts[ft][et],this._contourOffsets[ft][et]));for(et=0;et<3;++et)for(xt.uniforms.model=yt.projections[et],xt.uniforms.clipBounds=yt.clipBounds[et],ft=0;ft<3;++ft)if(this.contourProject[et][ft]){xt.uniforms.permutation=O[ft],Y.lineWidth(this.contourWidth[ft]*this.pixelRatio);for(var gt=0;gt<this.contourLevels[ft].length;++gt)this._contourCounts[ft][gt]&&(xt.uniforms.height=this.contourLevels[ft][gt],Ct.draw(Y.LINES,this._contourCounts[ft][gt],this._contourOffsets[ft][gt]))}Ct.unbind()}},R.pick=function(H){if(!H||H.id!==this.pickId)return null;var Y=this._field[2].shape,at=this._pickResult,et=Y[0]*(H.value[0]+(H.value[2]>>4)/16)/255,ct=Math.floor(et),ft=et-ct,yt=Y[1]*(H.value[1]+(H.value[2]&15)/16)/255,xt=Math.floor(yt),Ct=yt-xt;ct+=1,xt+=1;var gt=at.position;gt[0]=gt[1]=gt[2]=0;for(var mt=0;mt<2;++mt)for(var vt=mt?ft:1-ft,At=0;At<2;++At)for(var Ot=At?Ct:1-Ct,It=ct+mt,St=xt+At,Bt=vt*Ot,re=0;re<3;++re)gt[re]+=this._field[re].get(It,St)*Bt;for(var Yt=this._pickResult.level,he=0;he<3;++he)if(Yt[he]=x.le(this.contourLevels[he],gt[he]),Yt[he]<0)this.contourLevels[he].length>0&&(Yt[he]=0);else if(Yt[he]<this.contourLevels[he].length-1){var Zt=this.contourLevels[he][Yt[he]],ae=this.contourLevels[he][Yt[he]+1];Math.abs(Zt-gt[he])>Math.abs(ae-gt[he])&&(Yt[he]+=1)}for(at.index[0]=ft<.5?ct:ct+1,at.index[1]=Ct<.5?xt:xt+1,at.uv[0]=et/Y[0],at.uv[1]=yt/Y[1],re=0;re<3;++re)at.dataCoordinate[re]=this._field[re].get(at.index[0],at.index[1]);return at},R.padField=function(H,Y){var at=Y.shape.slice(),et=H.shape.slice();b.assign(H.lo(1,1).hi(at[0],at[1]),Y),b.assign(H.lo(1).hi(at[0],1),Y.hi(at[0],1)),b.assign(H.lo(1,et[1]-1).hi(at[0],1),Y.lo(0,at[1]-1).hi(at[0],1)),b.assign(H.lo(0,1).hi(1,at[1]),Y.hi(1)),b.assign(H.lo(et[0]-1,1).hi(1,at[1]),Y.lo(at[0]-1)),H.set(0,0,Y.get(0,0)),H.set(0,et[1]-1,Y.get(0,at[1]-1)),H.set(et[0]-1,0,Y.get(at[0]-1,0)),H.set(et[0]-1,et[1]-1,Y.get(at[0]-1,at[1]-1))};function $(H,Y){return Array.isArray(H)?[Y(H[0]),Y(H[1]),Y(H[2])]:[Y(H),Y(H),Y(H)]}function V(H){return Array.isArray(H)?H.length===3?[H[0],H[1],H[2],1]:[H[0],H[1],H[2],H[3]]:[0,0,0,1]}function rt(H){if(Array.isArray(H)){if(Array.isArray(H))return[V(H[0]),V(H[1]),V(H[2])];var Y=V(H);return[Y.slice(),Y.slice(),Y.slice()]}}R.update=function(H){H=H||{},this.objectOffset=H.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in H&&(this.contourWidth=$(H.contourWidth,Number)),"showContour"in H&&(this.showContour=$(H.showContour,Boolean)),"showSurface"in H&&(this.showSurface=!!H.showSurface),"contourTint"in H&&(this.contourTint=$(H.contourTint,Boolean)),"contourColor"in H&&(this.contourColor=rt(H.contourColor)),"contourProject"in H&&(this.contourProject=$(H.contourProject,function(Te){return $(Te,Boolean)})),"surfaceProject"in H&&(this.surfaceProject=H.surfaceProject),"dynamicColor"in H&&(this.dynamicColor=rt(H.dynamicColor)),"dynamicTint"in H&&(this.dynamicTint=$(H.dynamicTint,Number)),"dynamicWidth"in H&&(this.dynamicWidth=$(H.dynamicWidth,Number)),"opacity"in H&&(this.opacity=H.opacity),"opacityscale"in H&&(this.opacityscale=H.opacityscale),"colorBounds"in H&&(this.colorBounds=H.colorBounds),"vertexColor"in H&&(this.vertexColor=H.vertexColor?1:0),"colormap"in H&&this._colorMap.setPixels(this.genColormap(H.colormap,this.opacityscale));var Y=H.field||H.coords&&H.coords[2]||null,at=!1;if(Y||(this._field[2].shape[0]||this._field[2].shape[2]?Y=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Y=this._field[2].hi(0,0)),"field"in H||"coords"in H){var et=(Y.shape[0]+2)*(Y.shape[1]+2);et>this._field[2].data.length&&(o.freeFloat(this._field[2].data),this._field[2].data=o.mallocFloat(e.nextPow2(et))),this._field[2]=_(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var ct=this.shape,ft=0;ft<2;++ft)this._field[2].size>this._field[ft].data.length&&(o.freeFloat(this._field[ft].data),this._field[ft].data=o.mallocFloat(this._field[2].size)),this._field[ft]=_(this._field[ft].data,[ct[0]+2,ct[1]+2]);if(H.coords){var yt=H.coords;if(!Array.isArray(yt)||yt.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(ft=0;ft<2;++ft){var xt=yt[ft];for(At=0;At<2;++At)if(xt.shape[At]!==ct[At])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ft],xt)}}else if(H.ticks){var Ct=H.ticks;if(!Array.isArray(Ct)||Ct.length!==2)throw new Error("gl-surface: invalid ticks");for(ft=0;ft<2;++ft){var gt=Ct[ft];if((Array.isArray(gt)||gt.length)&&(gt=_(gt)),gt.shape[0]!==ct[ft])throw new Error("gl-surface: invalid tick length");var mt=_(gt.data,ct);mt.stride[ft]=gt.stride[0],mt.stride[ft^1]=0,this.padField(this._field[ft],mt)}}else{for(ft=0;ft<2;++ft){var vt=[0,0];vt[ft]=1,this._field[ft]=_(this._field[ft].data,[ct[0]+2,ct[1]+2],vt,0)}this._field[0].set(0,0,0);for(var At=0;At<ct[0];++At)this._field[0].set(At+1,0,At);for(this._field[0].set(ct[0]+1,0,ct[0]-1),this._field[1].set(0,0,0),At=0;At<ct[1];++At)this._field[1].set(0,At+1,At);this._field[1].set(0,ct[1]+1,ct[1]-1)}var Ot=this._field,It=_(o.mallocFloat(Ot[2].size*3*2),[3,ct[0]+2,ct[1]+2,2]);for(ft=0;ft<3;++ft)k(It.pick(ft),Ot[ft],"mirror");var St=_(o.mallocFloat(Ot[2].size*3),[ct[0]+2,ct[1]+2,3]);for(ft=0;ft<ct[0]+2;++ft)for(At=0;At<ct[1]+2;++At){var Bt=It.get(0,ft,At,0),re=It.get(0,ft,At,1),Yt=It.get(1,ft,At,0),he=It.get(1,ft,At,1),Zt=It.get(2,ft,At,0),ae=It.get(2,ft,At,1),oe=Yt*ae-he*Zt,ce=Zt*re-ae*Bt,ue=Bt*he-re*Yt,ye=Math.sqrt(oe*oe+ce*ce+ue*ue);ye<1e-8?(ye=Math.max(Math.abs(oe),Math.abs(ce),Math.abs(ue)),ye<1e-8?(ue=1,ce=oe=0,ye=1):ye=1/ye):ye=1/Math.sqrt(ye),St.set(ft,At,0,oe*ye),St.set(ft,At,1,ce*ye),St.set(ft,At,2,ue*ye)}o.free(It.data);var Tt=[1/0,1/0,1/0],Ft=[-1/0,-1/0,-1/0],$t=1/0,Vt=-1/0,Nt=(ct[0]-1)*(ct[1]-1)*6,Mt=o.mallocFloat(e.nextPow2(10*Nt)),Et=0,Dt=0;for(ft=0;ft<ct[0]-1;++ft)t:for(At=0;At<ct[1]-1;++At){for(var dt=0;dt<2;++dt)for(var ht=0;ht<2;++ht)for(var bt=0;bt<3;++bt){var Pt=this._field[bt].get(1+ft+dt,1+At+ht);if(isNaN(Pt)||!isFinite(Pt))continue t}for(bt=0;bt<6;++bt){var Gt=ft+I[bt][0],te=At+I[bt][1],ne=this._field[0].get(Gt+1,te+1),je=this._field[1].get(Gt+1,te+1);Pt=this._field[2].get(Gt+1,te+1),oe=St.get(Gt+1,te+1,0),ce=St.get(Gt+1,te+1,1),ue=St.get(Gt+1,te+1,2),H.intensity&&(Ne=H.intensity.get(Gt,te));var Ne=H.intensity?H.intensity.get(Gt,te):Pt+this.objectOffset[2];Mt[Et++]=Gt,Mt[Et++]=te,Mt[Et++]=ne,Mt[Et++]=je,Mt[Et++]=Pt,Mt[Et++]=0,Mt[Et++]=Ne,Mt[Et++]=oe,Mt[Et++]=ce,Mt[Et++]=ue,Tt[0]=Math.min(Tt[0],ne+this.objectOffset[0]),Tt[1]=Math.min(Tt[1],je+this.objectOffset[1]),Tt[2]=Math.min(Tt[2],Pt+this.objectOffset[2]),$t=Math.min($t,Ne),Ft[0]=Math.max(Ft[0],ne+this.objectOffset[0]),Ft[1]=Math.max(Ft[1],je+this.objectOffset[1]),Ft[2]=Math.max(Ft[2],Pt+this.objectOffset[2]),Vt=Math.max(Vt,Ne),Dt+=1}}for(H.intensityBounds&&($t=+H.intensityBounds[0],Vt=+H.intensityBounds[1]),ft=6;ft<Et;ft+=10)Mt[ft]=(Mt[ft]-$t)/(Vt-$t);this._vertexCount=Dt,this._coordinateBuffer.update(Mt.subarray(0,Et)),o.freeFloat(Mt),o.free(St.data),this.bounds=[Tt,Ft],this.intensity=H.intensity||this._field[2],(this.intensityBounds[0]!==$t||this.intensityBounds[1]!==Vt)&&(at=!0),this.intensityBounds=[$t,Vt]}if("levels"in H){var ge=H.levels;for(Array.isArray(ge[0])?ge=ge.slice():ge=[[],[],ge],ft=0;ft<3;++ft)ge[ft]=ge[ft].slice(),ge[ft].sort(function(Te,qe){return Te-qe});for(ft=0;ft<3;++ft)for(At=0;At<ge[ft].length;++At)ge[ft][At]-=this.objectOffset[ft];t:for(ft=0;ft<3;++ft){if(ge[ft].length!==this.contourLevels[ft].length){at=!0;break}for(At=0;At<ge[ft].length;++At)if(ge[ft][At]!==this.contourLevels[ft][At]){at=!0;break t}}this.contourLevels=ge}if(at){Ot=this._field,ct=this.shape;for(var _e=[],De=0;De<3;++De){var hr=this.contourLevels[De],fe=[],Be=[],He=[0,0,0];for(ft=0;ft<hr.length;++ft){var pr=a(this._field[De],hr[ft]);fe.push(_e.length/5|0),Dt=0;t:for(At=0;At<pr.cells.length;++At){var Ze=pr.cells[At];for(bt=0;bt<2;++bt){var Xt=pr.positions[Ze[bt]],ie=Xt[0],pe=Math.floor(ie)|0,ke=ie-pe,Ce=Xt[1],Fe=Math.floor(Ce)|0,Re=Ce-Fe,be=!1;e:for(var Ge=0;Ge<3;++Ge){He[Ge]=0;var Ke=(De+Ge+1)%3;for(dt=0;dt<2;++dt){var or=dt?ke:1-ke;for(Gt=Math.min(Math.max(pe+dt,0),ct[0])|0,ht=0;ht<2;++ht){var sr=ht?Re:1-Re;if(te=Math.min(Math.max(Fe+ht,0),ct[1])|0,Ge<2?Pt=this._field[Ke].get(Gt,te):Pt=(this.intensity.get(Gt,te)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Pt)||isNaN(Pt)){be=!0;break e}var zt=or*sr;He[Ge]+=zt*Pt}}}if(!be)_e.push(He[0],He[1],Xt[0],Xt[1],He[2]),Dt+=1;else{if(bt>0){for(var Ut=0;Ut<5;++Ut)_e.pop();Dt-=1}continue t}}}Be.push(Dt)}this._contourOffsets[De]=fe,this._contourCounts[De]=Be}var Me=o.mallocFloat(_e.length);for(ft=0;ft<_e.length;++ft)Me[ft]=_e[ft];this._contourBuffer.update(Me),o.freeFloat(Me)}},R.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var H=0;H<3;++H)o.freeFloat(this._field[H].data)},R.highlight=function(H){var Y;if(!H){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=H.level[Y]:this.highlightLevel[Y]=-1;var at;for(this.snapToData?at=H.dataCoordinate:at=H.position,Y=0;Y<3;++Y)at[Y]-=this.objectOffset[Y];if(!((!this.enableDynamic[0]||at[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||at[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||at[2]===this.dynamicLevel[2]))){for(var et=0,ct=this.shape,ft=o.mallocFloat(12*ct[0]*ct[1]),yt=0;yt<3;++yt){if(!this.enableDynamic[yt]){this.dynamicLevel[yt]=NaN,this._dynamicCounts[yt]=0;continue}this.dynamicLevel[yt]=at[yt];var xt=(yt+1)%3,Ct=(yt+2)%3,gt=this._field[yt],mt=this._field[xt],vt=this._field[Ct],At=a(gt,at[yt]),Ot=At.cells,It=At.positions;for(this._dynamicOffsets[yt]=et,Y=0;Y<Ot.length;++Y)for(var St=Ot[Y],Bt=0;Bt<2;++Bt){var re=It[St[Bt]],Yt=+re[0],he=Yt|0,Zt=Math.min(he+1,ct[0])|0,ae=Yt-he,oe=1-ae,ce=+re[1],ue=ce|0,ye=Math.min(ue+1,ct[1])|0,Tt=ce-ue,Ft=1-Tt,$t=oe*Ft,Vt=oe*Tt,Nt=ae*Ft,Mt=ae*Tt,Et=$t*mt.get(he,ue)+Vt*mt.get(he,ye)+Nt*mt.get(Zt,ue)+Mt*mt.get(Zt,ye),Dt=$t*vt.get(he,ue)+Vt*vt.get(he,ye)+Nt*vt.get(Zt,ue)+Mt*vt.get(Zt,ye);if(isNaN(Et)||isNaN(Dt)){Bt&&(et-=1);break}ft[2*et+0]=Et,ft[2*et+1]=Dt,et+=1}this._dynamicCounts[yt]=et-this._dynamicOffsets[yt]}this._dynamicBuffer.update(ft.subarray(0,2*et)),o.freeFloat(ft)}};function ot(H){var Y=H.gl,at=A(Y),et=u(Y),ct=L(Y),ft=m(Y),yt=l(Y),xt=n(Y,[{buffer:yt,size:4,stride:S,offset:0},{buffer:yt,size:3,stride:S,offset:16},{buffer:yt,size:3,stride:S,offset:28}]),Ct=l(Y),gt=n(Y,[{buffer:Ct,size:4,stride:20,offset:0},{buffer:Ct,size:1,stride:20,offset:16}]),mt=l(Y),vt=n(Y,[{buffer:mt,size:2,type:Y.FLOAT}]),At=s(Y,1,P,Y.RGBA,Y.UNSIGNED_BYTE);At.minFilter=Y.LINEAR,At.magFilter=Y.LINEAR;var Ot=new F(Y,[0,0],[[0,0,0],[0,0,0]],at,et,yt,xt,At,ct,ft,Ct,gt,mt,vt,[0,0,0]),It={levels:[[],[],[]]};for(var St in H)It[St]=H[St];return It.colormap=It.colormap||"jet",Ot.update(It),Ot}},7766:function(v,d,r){var e=r(9618),l=r(5298),n=r(1888);v.exports=m;var s=null,o=null,p=null;function b(S){s=[S.LINEAR,S.NEAREST_MIPMAP_LINEAR,S.LINEAR_MIPMAP_NEAREST,S.LINEAR_MIPMAP_NEAREST],o=[S.NEAREST,S.LINEAR,S.NEAREST_MIPMAP_NEAREST,S.NEAREST_MIPMAP_LINEAR,S.LINEAR_MIPMAP_NEAREST,S.LINEAR_MIPMAP_LINEAR],p=[S.REPEAT,S.CLAMP_TO_EDGE,S.MIRRORED_REPEAT]}function h(S){return typeof HTMLCanvasElement<"u"&&S instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&S instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&S instanceof HTMLVideoElement||typeof ImageData<"u"&&S instanceof ImageData}var _=function(S,w){l.muls(S,w,255)};function a(S,w,I){var O=S.gl,D=O.getParameter(O.MAX_TEXTURE_SIZE);if(w<0||w>D||I<0||I>D)throw new Error("gl-texture2d: Invalid texture size");return S._shape=[w,I],S.bind(),O.texImage2D(O.TEXTURE_2D,0,S.format,w,I,0,S.format,S.type,null),S._mipLevels=[0],S}function c(S,w,I,O,D,P){this.gl=S,this.handle=w,this.format=D,this.type=P,this._shape=[I,O],this._mipLevels=[0],this._magFilter=S.NEAREST,this._minFilter=S.NEAREST,this._wrapS=S.CLAMP_TO_EDGE,this._wrapT=S.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,R=[this._wrapS,this._wrapT];Object.defineProperties(R,[{get:function(){return F._wrapS},set:function(N){return F.wrapS=N}},{get:function(){return F._wrapT},set:function(N){return F.wrapT=N}}]),this._wrapVector=R;var B=[this._shape[0],this._shape[1]];Object.defineProperties(B,[{get:function(){return F._shape[0]},set:function(N){return F.width=N}},{get:function(){return F._shape[1]},set:function(N){return F.height=N}}]),this._shapeVector=B}var f=c.prototype;Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(S){this.bind();var w=this.gl;if(this.type===w.FLOAT&&s.indexOf(S)>=0&&(w.getExtension("OES_texture_float_linear")||(S=w.NEAREST)),o.indexOf(S)<0)throw new Error("gl-texture2d: Unknown filter mode "+S);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,S),this._minFilter=S}},magFilter:{get:function(){return this._magFilter},set:function(S){this.bind();var w=this.gl;if(this.type===w.FLOAT&&s.indexOf(S)>=0&&(w.getExtension("OES_texture_float_linear")||(S=w.NEAREST)),o.indexOf(S)<0)throw new Error("gl-texture2d: Unknown filter mode "+S);return w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,S),this._magFilter=S}},mipSamples:{get:function(){return this._anisoSamples},set:function(S){var w=this._anisoSamples;if(this._anisoSamples=Math.max(S,1)|0,w!==this._anisoSamples){var I=this.gl.getExtension("EXT_texture_filter_anisotropic");I&&this.gl.texParameterf(this.gl.TEXTURE_2D,I.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(S){if(this.bind(),p.indexOf(S)<0)throw new Error("gl-texture2d: Unknown wrap mode "+S);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,S),this._wrapS=S}},wrapT:{get:function(){return this._wrapT},set:function(S){if(this.bind(),p.indexOf(S)<0)throw new Error("gl-texture2d: Unknown wrap mode "+S);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,S),this._wrapT=S}},wrap:{get:function(){return this._wrapVector},set:function(S){if(Array.isArray(S)||(S=[S,S]),S.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var w=0;w<2;++w)if(p.indexOf(S[w])<0)throw new Error("gl-texture2d: Unknown wrap mode "+S);this._wrapS=S[0],this._wrapT=S[1];var I=this.gl;return this.bind(),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,this._wrapS),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,this._wrapT),S}},shape:{get:function(){return this._shapeVector},set:function(S){if(!Array.isArray(S))S=[S|0,S|0];else if(S.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return a(this,S[0]|0,S[1]|0),[S[0]|0,S[1]|0]}},width:{get:function(){return this._shape[0]},set:function(S){return S=S|0,a(this,S,this._shape[1]),S}},height:{get:function(){return this._shape[1]},set:function(S){return S=S|0,a(this,this._shape[0],S),S}}}),f.bind=function(S){var w=this.gl;return S!==void 0&&w.activeTexture(w.TEXTURE0+(S|0)),w.bindTexture(w.TEXTURE_2D,this.handle),S!==void 0?S|0:w.getParameter(w.ACTIVE_TEXTURE)-w.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var S=Math.min(this._shape[0],this._shape[1]),w=0;S>0;++w,S>>>=1)this._mipLevels.indexOf(w)<0&&this._mipLevels.push(w)},f.setPixels=function(S,w,I,O){var D=this.gl;this.bind(),Array.isArray(w)?(O=I,I=w[1]|0,w=w[0]|0):(w=w||0,I=I||0),O=O||0;var P=h(S)?S:S.raw;if(P){var F=this._mipLevels.indexOf(O)<0;F?(D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(O)):D.texSubImage2D(D.TEXTURE_2D,O,w,I,this.format,this.type,P)}else if(S.shape&&S.stride&&S.data){if(S.shape.length<2||w+S.shape[1]>this._shape[1]>>>O||I+S.shape[0]>this._shape[0]>>>O||w<0||I<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");k(D,w,I,O,this.format,this.type,this._mipLevels,S)}else throw new Error("gl-texture2d: Unsupported data type")};function x(S,w){return S.length===3?w[2]===1&&w[1]===S[0]*S[2]&&w[0]===S[2]:w[0]===1&&w[1]===S[0]}function k(S,w,I,O,D,P,F,R){var B=R.dtype,N=R.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var G=0,X=0,J=x(N,R.stride.slice());if(B==="float32"?G=S.FLOAT:B==="float64"?(G=S.FLOAT,J=!1,B="float32"):B==="uint8"?G=S.UNSIGNED_BYTE:(G=S.UNSIGNED_BYTE,J=!1,B="uint8"),N.length===2)X=S.LUMINANCE,N=[N[0],N[1],1],R=e(R.data,N,[R.stride[0],R.stride[1],1],R.offset);else if(N.length===3){if(N[2]===1)X=S.ALPHA;else if(N[2]===2)X=S.LUMINANCE_ALPHA;else if(N[2]===3)X=S.RGB;else if(N[2]===4)X=S.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");N[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((X===S.LUMINANCE||X===S.ALPHA)&&(D===S.LUMINANCE||D===S.ALPHA)&&(X=D),X!==D)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var it=R.size,nt=F.indexOf(O)<0;if(nt&&F.push(O),G===P&&J)R.offset===0&&R.data.length===it?nt?S.texImage2D(S.TEXTURE_2D,O,D,N[0],N[1],0,D,P,R.data):S.texSubImage2D(S.TEXTURE_2D,O,w,I,N[0],N[1],D,P,R.data):nt?S.texImage2D(S.TEXTURE_2D,O,D,N[0],N[1],0,D,P,R.data.subarray(R.offset,R.offset+it)):S.texSubImage2D(S.TEXTURE_2D,O,w,I,N[0],N[1],D,P,R.data.subarray(R.offset,R.offset+it));else{var q;P===S.FLOAT?q=n.mallocFloat32(it):q=n.mallocUint8(it);var Z=e(q,N,[N[2],N[2]*N[0],1]);G===S.FLOAT&&P===S.UNSIGNED_BYTE?_(Z,R):l.assign(Z,R),nt?S.texImage2D(S.TEXTURE_2D,O,D,N[0],N[1],0,D,P,q.subarray(0,it)):S.texSubImage2D(S.TEXTURE_2D,O,w,I,N[0],N[1],D,P,q.subarray(0,it)),P===S.FLOAT?n.freeFloat32(q):n.freeUint8(q)}}function y(S){var w=S.createTexture();return S.bindTexture(S.TEXTURE_2D,w),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.NEAREST),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.NEAREST),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),w}function A(S,w,I,O,D){var P=S.getParameter(S.MAX_TEXTURE_SIZE);if(w<0||w>P||I<0||I>P)throw new Error("gl-texture2d: Invalid texture shape");if(D===S.FLOAT&&!S.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=y(S);return S.texImage2D(S.TEXTURE_2D,0,O,w,I,0,O,D,null),new c(S,F,w,I,O,D)}function L(S,w,I,O,D,P){var F=y(S);return S.texImage2D(S.TEXTURE_2D,0,D,D,P,w),new c(S,F,I,O,D,P)}function u(S,w){var I=w.dtype,O=w.shape.slice(),D=S.getParameter(S.MAX_TEXTURE_SIZE);if(O[0]<0||O[0]>D||O[1]<0||O[1]>D)throw new Error("gl-texture2d: Invalid texture size");var P=x(O,w.stride.slice()),F=0;I==="float32"?F=S.FLOAT:I==="float64"?(F=S.FLOAT,P=!1,I="float32"):I==="uint8"?F=S.UNSIGNED_BYTE:(F=S.UNSIGNED_BYTE,P=!1,I="uint8");var R=0;if(O.length===2)R=S.LUMINANCE,O=[O[0],O[1],1],w=e(w.data,O,[w.stride[0],w.stride[1],1],w.offset);else if(O.length===3)if(O[2]===1)R=S.ALPHA;else if(O[2]===2)R=S.LUMINANCE_ALPHA;else if(O[2]===3)R=S.RGB;else if(O[2]===4)R=S.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===S.FLOAT&&!S.getExtension("OES_texture_float")&&(F=S.UNSIGNED_BYTE,P=!1);var B,N,G=w.size;if(P)w.offset===0&&w.data.length===G?B=w.data:B=w.data.subarray(w.offset,w.offset+G);else{var X=[O[2],O[2]*O[0],1];N=n.malloc(G,I);var J=e(N,O,X,0);(I==="float32"||I==="float64")&&F===S.UNSIGNED_BYTE?_(J,w):l.assign(J,w),B=N.subarray(0,G)}var it=y(S);return S.texImage2D(S.TEXTURE_2D,0,R,O[0],O[1],0,R,F,B),P||n.free(N),new c(S,it,O[0],O[1],R,F)}function m(S){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||b(S),typeof arguments[1]=="number")return A(S,arguments[1],arguments[2],arguments[3]||S.RGBA,arguments[4]||S.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return A(S,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||S.RGBA,arguments[3]||S.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var w=arguments[1],I=h(w)?w:w.raw;if(I)return L(S,I,w.width|0,w.height|0,arguments[2]||S.RGBA,arguments[3]||S.UNSIGNED_BYTE);if(w.shape&&w.data&&w.stride)return u(S,w)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},1433:function(v){function d(r,e,l){e?e.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);var n=r.getParameter(r.MAX_VERTEX_ATTRIBS)|0;if(l){if(l.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var s=0;s<l.length;++s){var o=l[s];if(o.buffer){var p=o.buffer,b=o.size||4,h=o.type||r.FLOAT,_=!!o.normalized,a=o.stride||0,c=o.offset||0;p.bind(),r.enableVertexAttribArray(s),r.vertexAttribPointer(s,b,h,_,a,c)}else{if(typeof o=="number")r.vertexAttrib1f(s,o);else if(o.length===1)r.vertexAttrib1f(s,o[0]);else if(o.length===2)r.vertexAttrib2f(s,o[0],o[1]);else if(o.length===3)r.vertexAttrib3f(s,o[0],o[1],o[2]);else if(o.length===4)r.vertexAttrib4f(s,o[0],o[1],o[2],o[3]);else throw new Error("gl-vao: Invalid vertex attribute");r.disableVertexAttribArray(s)}}for(;s<n;++s)r.disableVertexAttribArray(s)}else{r.bindBuffer(r.ARRAY_BUFFER,null);for(var s=0;s<n;++s)r.disableVertexAttribArray(s)}}v.exports=d},870:function(v,d,r){var e=r(1433);function l(s){this.gl=s,this._elements=null,this._attributes=null,this._elementsType=s.UNSIGNED_SHORT}l.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},l.prototype.update=function(s,o,p){this._elements=o,this._attributes=s,this._elementsType=p||this.gl.UNSIGNED_SHORT},l.prototype.dispose=function(){},l.prototype.unbind=function(){},l.prototype.draw=function(s,o,p){p=p||0;var b=this.gl;this._elements?b.drawElements(s,o,this._elementsType,p):b.drawArrays(s,p,o)};function n(s){return new l(s)}v.exports=n},7518:function(v,d,r){var e=r(1433);function l(o,p,b,h,_,a){this.location=o,this.dimension=p,this.a=b,this.b=h,this.c=_,this.d=a}l.prototype.bind=function(o){switch(this.dimension){case 1:o.vertexAttrib1f(this.location,this.a);break;case 2:o.vertexAttrib2f(this.location,this.a,this.b);break;case 3:o.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:o.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(o,p,b){this.gl=o,this._ext=p,this.handle=b,this._attribs=[],this._useElements=!1,this._elementsType=o.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var o=0;o<this._attribs.length;++o)this._attribs[o].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(o,p,b){if(this.bind(),e(this.gl,p,o),this.unbind(),this._attribs.length=0,o)for(var h=0;h<o.length;++h){var _=o[h];typeof _=="number"?this._attribs.push(new l(h,1,_)):Array.isArray(_)&&this._attribs.push(new l(h,_.length,_[0],_[1],_[2],_[3]))}this._useElements=!!p,this._elementsType=b||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(o,p,b){b=b||0;var h=this.gl;this._useElements?h.drawElements(o,p,this._elementsType,b):h.drawArrays(o,b,p)};function s(o,p){return new n(o,p,p.createVertexArrayOES())}v.exports=s},8116:function(v,d,r){var e=r(7518),l=r(870);function n(o){this.bindVertexArrayOES=o.bindVertexArray.bind(o),this.createVertexArrayOES=o.createVertexArray.bind(o),this.deleteVertexArrayOES=o.deleteVertexArray.bind(o)}function s(o,p,b,h){var _=o.createVertexArray?new n(o):o.getExtension("OES_vertex_array_object"),a;return _?a=e(o,_):a=l(o),a.update(p,b,h),a}v.exports=s},5632:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]+l[0],r[1]=e[1]+l[1],r[2]=e[2]+l[2],r}},8192:function(v,d,r){v.exports=s;var e=r(2825),l=r(3536),n=r(244);function s(o,p){var b=e(o[0],o[1],o[2]),h=e(p[0],p[1],p[2]);l(b,b),l(h,h);var _=n(b,h);return _>1?0:Math.acos(_)}},9226:function(v){v.exports=d;function d(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}},3126:function(v){v.exports=d;function d(r){var e=new Float32Array(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},3990:function(v){v.exports=d;function d(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},1091:function(v){v.exports=d;function d(){var r=new Float32Array(3);return r[0]=0,r[1]=0,r[2]=0,r}},5911:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=l[0],b=l[1],h=l[2];return r[0]=s*h-o*b,r[1]=o*p-n*h,r[2]=n*b-s*p,r}},5455:function(v,d,r){v.exports=r(7056)},7056:function(v){v.exports=d;function d(r,e){var l=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2];return Math.sqrt(l*l+n*n+s*s)}},4008:function(v,d,r){v.exports=r(6690)},6690:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]/l[0],r[1]=e[1]/l[1],r[2]=e[2]/l[2],r}},244:function(v){v.exports=d;function d(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}},2613:function(v){v.exports=1e-6},9922:function(v,d,r){v.exports=l;var e=r(2613);function l(n,s){var o=n[0],p=n[1],b=n[2],h=s[0],_=s[1],a=s[2];return Math.abs(o-h)<=e*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(p-_)<=e*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(b-a)<=e*Math.max(1,Math.abs(b),Math.abs(a))}},9265:function(v){v.exports=d;function d(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}},2681:function(v){v.exports=d;function d(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}},5137:function(v,d,r){v.exports=l;var e=r(1091)();function l(n,s,o,p,b,h){var _,a;for(s||(s=3),o||(o=0),p?a=Math.min(p*s+o,n.length):a=n.length,_=o;_<a;_+=s)e[0]=n[_],e[1]=n[_+1],e[2]=n[_+2],b(e,e,h),n[_]=e[0],n[_+1]=e[1],n[_+2]=e[2];return n}},2825:function(v){v.exports=d;function d(r,e,l){var n=new Float32Array(3);return n[0]=r,n[1]=e,n[2]=l,n}},2931:function(v,d,r){v.exports={EPSILON:r(2613),create:r(1091),clone:r(3126),angle:r(8192),fromValues:r(2825),copy:r(3990),set:r(1463),equals:r(9922),exactEquals:r(9265),add:r(5632),subtract:r(6843),sub:r(2229),multiply:r(5847),mul:r(4505),divide:r(6690),div:r(4008),min:r(8107),max:r(7417),floor:r(2681),ceil:r(9226),round:r(2447),scale:r(6621),scaleAndAdd:r(8489),distance:r(7056),dist:r(5455),squaredDistance:r(2953),sqrDist:r(6141),length:r(1387),len:r(868),squaredLength:r(3066),sqrLen:r(5486),negate:r(5093),inverse:r(811),normalize:r(3536),dot:r(244),cross:r(5911),lerp:r(6658),random:r(7636),transformMat4:r(5673),transformMat3:r(492),transformQuat:r(264),rotateX:r(6894),rotateY:r(109),rotateZ:r(8692),forEach:r(5137)}},811:function(v){v.exports=d;function d(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}},868:function(v,d,r){v.exports=r(1387)},1387:function(v){v.exports=d;function d(r){var e=r[0],l=r[1],n=r[2];return Math.sqrt(e*e+l*l+n*n)}},6658:function(v){v.exports=d;function d(r,e,l,n){var s=e[0],o=e[1],p=e[2];return r[0]=s+n*(l[0]-s),r[1]=o+n*(l[1]-o),r[2]=p+n*(l[2]-p),r}},7417:function(v){v.exports=d;function d(r,e,l){return r[0]=Math.max(e[0],l[0]),r[1]=Math.max(e[1],l[1]),r[2]=Math.max(e[2],l[2]),r}},8107:function(v){v.exports=d;function d(r,e,l){return r[0]=Math.min(e[0],l[0]),r[1]=Math.min(e[1],l[1]),r[2]=Math.min(e[2],l[2]),r}},4505:function(v,d,r){v.exports=r(5847)},5847:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]*l[0],r[1]=e[1]*l[1],r[2]=e[2]*l[2],r}},5093:function(v){v.exports=d;function d(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}},3536:function(v){v.exports=d;function d(r,e){var l=e[0],n=e[1],s=e[2],o=l*l+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o),r}},7636:function(v){v.exports=d;function d(r,e){e=e||1;var l=Math.random()*2*Math.PI,n=Math.random()*2-1,s=Math.sqrt(1-n*n)*e;return r[0]=Math.cos(l)*s,r[1]=Math.sin(l)*s,r[2]=n*e,r}},6894:function(v){v.exports=d;function d(r,e,l,n){var s=l[1],o=l[2],p=e[1]-s,b=e[2]-o,h=Math.sin(n),_=Math.cos(n);return r[0]=e[0],r[1]=s+p*_-b*h,r[2]=o+p*h+b*_,r}},109:function(v){v.exports=d;function d(r,e,l,n){var s=l[0],o=l[2],p=e[0]-s,b=e[2]-o,h=Math.sin(n),_=Math.cos(n);return r[0]=s+b*h+p*_,r[1]=e[1],r[2]=o+b*_-p*h,r}},8692:function(v){v.exports=d;function d(r,e,l,n){var s=l[0],o=l[1],p=e[0]-s,b=e[1]-o,h=Math.sin(n),_=Math.cos(n);return r[0]=s+p*_-b*h,r[1]=o+p*h+b*_,r[2]=e[2],r}},2447:function(v){v.exports=d;function d(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}},6621:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]*l,r[1]=e[1]*l,r[2]=e[2]*l,r}},8489:function(v){v.exports=d;function d(r,e,l,n){return r[0]=e[0]+l[0]*n,r[1]=e[1]+l[1]*n,r[2]=e[2]+l[2]*n,r}},1463:function(v){v.exports=d;function d(r,e,l,n){return r[0]=e,r[1]=l,r[2]=n,r}},6141:function(v,d,r){v.exports=r(2953)},5486:function(v,d,r){v.exports=r(3066)},2953:function(v){v.exports=d;function d(r,e){var l=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2];return l*l+n*n+s*s}},3066:function(v){v.exports=d;function d(r){var e=r[0],l=r[1],n=r[2];return e*e+l*l+n*n}},2229:function(v,d,r){v.exports=r(6843)},6843:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]-l[0],r[1]=e[1]-l[1],r[2]=e[2]-l[2],r}},492:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2];return r[0]=n*l[0]+s*l[3]+o*l[6],r[1]=n*l[1]+s*l[4]+o*l[7],r[2]=n*l[2]+s*l[5]+o*l[8],r}},5673:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=l[3]*n+l[7]*s+l[11]*o+l[15];return p=p||1,r[0]=(l[0]*n+l[4]*s+l[8]*o+l[12])/p,r[1]=(l[1]*n+l[5]*s+l[9]*o+l[13])/p,r[2]=(l[2]*n+l[6]*s+l[10]*o+l[14])/p,r}},264:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=l[0],b=l[1],h=l[2],_=l[3],a=_*n+b*o-h*s,c=_*s+h*n-p*o,f=_*o+p*s-b*n,x=-p*n-b*s-h*o;return r[0]=a*_+x*-p+c*-h-f*-b,r[1]=c*_+x*-b+f*-p-a*-h,r[2]=f*_+x*-h+a*-b-c*-p,r}},4361:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]+l[0],r[1]=e[1]+l[1],r[2]=e[2]+l[2],r[3]=e[3]+l[3],r}},2335:function(v){v.exports=d;function d(r){var e=new Float32Array(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},2933:function(v){v.exports=d;function d(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},7536:function(v){v.exports=d;function d(){var r=new Float32Array(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}},4691:function(v){v.exports=d;function d(r,e){var l=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2],o=e[3]-r[3];return Math.sqrt(l*l+n*n+s*s+o*o)}},1373:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]/l[0],r[1]=e[1]/l[1],r[2]=e[2]/l[2],r[3]=e[3]/l[3],r}},3750:function(v){v.exports=d;function d(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}},3390:function(v){v.exports=d;function d(r,e,l,n){var s=new Float32Array(4);return s[0]=r,s[1]=e,s[2]=l,s[3]=n,s}},9970:function(v,d,r){v.exports={create:r(7536),clone:r(2335),fromValues:r(3390),copy:r(2933),set:r(4578),add:r(4361),subtract:r(6860),multiply:r(3576),divide:r(1373),min:r(2334),max:r(160),scale:r(9288),scaleAndAdd:r(4844),distance:r(4691),squaredDistance:r(7960),length:r(6808),squaredLength:r(483),negate:r(1498),inverse:r(4494),normalize:r(5177),dot:r(3750),lerp:r(2573),random:r(9131),transformMat4:r(5352),transformQuat:r(4041)}},4494:function(v){v.exports=d;function d(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}},6808:function(v){v.exports=d;function d(r){var e=r[0],l=r[1],n=r[2],s=r[3];return Math.sqrt(e*e+l*l+n*n+s*s)}},2573:function(v){v.exports=d;function d(r,e,l,n){var s=e[0],o=e[1],p=e[2],b=e[3];return r[0]=s+n*(l[0]-s),r[1]=o+n*(l[1]-o),r[2]=p+n*(l[2]-p),r[3]=b+n*(l[3]-b),r}},160:function(v){v.exports=d;function d(r,e,l){return r[0]=Math.max(e[0],l[0]),r[1]=Math.max(e[1],l[1]),r[2]=Math.max(e[2],l[2]),r[3]=Math.max(e[3],l[3]),r}},2334:function(v){v.exports=d;function d(r,e,l){return r[0]=Math.min(e[0],l[0]),r[1]=Math.min(e[1],l[1]),r[2]=Math.min(e[2],l[2]),r[3]=Math.min(e[3],l[3]),r}},3576:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]*l[0],r[1]=e[1]*l[1],r[2]=e[2]*l[2],r[3]=e[3]*l[3],r}},1498:function(v){v.exports=d;function d(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}},5177:function(v){v.exports=d;function d(r,e){var l=e[0],n=e[1],s=e[2],o=e[3],p=l*l+n*n+s*s+o*o;return p>0&&(p=1/Math.sqrt(p),r[0]=l*p,r[1]=n*p,r[2]=s*p,r[3]=o*p),r}},9131:function(v,d,r){var e=r(5177),l=r(9288);v.exports=n;function n(s,o){return o=o||1,s[0]=Math.random(),s[1]=Math.random(),s[2]=Math.random(),s[3]=Math.random(),e(s,s),l(s,s,o),s}},9288:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]*l,r[1]=e[1]*l,r[2]=e[2]*l,r[3]=e[3]*l,r}},4844:function(v){v.exports=d;function d(r,e,l,n){return r[0]=e[0]+l[0]*n,r[1]=e[1]+l[1]*n,r[2]=e[2]+l[2]*n,r[3]=e[3]+l[3]*n,r}},4578:function(v){v.exports=d;function d(r,e,l,n,s){return r[0]=e,r[1]=l,r[2]=n,r[3]=s,r}},7960:function(v){v.exports=d;function d(r,e){var l=e[0]-r[0],n=e[1]-r[1],s=e[2]-r[2],o=e[3]-r[3];return l*l+n*n+s*s+o*o}},483:function(v){v.exports=d;function d(r){var e=r[0],l=r[1],n=r[2],s=r[3];return e*e+l*l+n*n+s*s}},6860:function(v){v.exports=d;function d(r,e,l){return r[0]=e[0]-l[0],r[1]=e[1]-l[1],r[2]=e[2]-l[2],r[3]=e[3]-l[3],r}},5352:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=e[3];return r[0]=l[0]*n+l[4]*s+l[8]*o+l[12]*p,r[1]=l[1]*n+l[5]*s+l[9]*o+l[13]*p,r[2]=l[2]*n+l[6]*s+l[10]*o+l[14]*p,r[3]=l[3]*n+l[7]*s+l[11]*o+l[15]*p,r}},4041:function(v){v.exports=d;function d(r,e,l){var n=e[0],s=e[1],o=e[2],p=l[0],b=l[1],h=l[2],_=l[3],a=_*n+b*o-h*s,c=_*s+h*n-p*o,f=_*o+p*s-b*n,x=-p*n-b*s-h*o;return r[0]=a*_+x*-p+c*-h-f*-b,r[1]=c*_+x*-b+f*-p-a*-h,r[2]=f*_+x*-h+a*-b-c*-p,r[3]=e[3],r}},1848:function(v,d,r){var e=r(4905),l=r(6468);v.exports=n;function n(s){for(var o=Array.isArray(s)?s:e(s),p=0;p<o.length;p++){var b=o[p];if(b.type==="preprocessor"){var h=b.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var _=h[1],a=h[2];return(_?l(a):a).trim()}}}}},5874:function(v,d,r){v.exports=w;var e=r(620),l=r(7827),n=r(6852),s=r(7932),o=r(3508),p=999,b=9999,h=0,_=1,a=2,c=3,f=4,x=5,k=6,y=7,A=8,L=9,u=10,m=11,S=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function w(I){var O=0,D=0,P=p,F,R,B=[],N=[],G=1,X=0,J=0,it=!1,nt=!1,q="",Z;I=I||{};var $=n,V=e;I.version==="300 es"&&($=o,V=s);for(var rt={},ot={},O=0;O<$.length;O++)rt[$[O]]=!0;for(var O=0;O<V.length;O++)ot[V[O]]=!0;return function(It){return N=[],It!==null?Y(It):at()};function H(It){It.length&&N.push({type:S[P],data:It,position:J,line:G,column:X})}function Y(It){O=0,It.toString&&(It=It.toString()),q+=It.replace(/\r\n/g,`
`),Z=q.length;for(var St;F=q[O],O<Z;){switch(St=O,P){case h:O=xt();break;case _:O=yt();break;case a:O=ft();break;case c:O=Ct();break;case f:O=vt();break;case m:O=mt();break;case x:O=At();break;case b:O=Ot();break;case L:O=ct();break;case p:O=et();break}if(St!==O)switch(q[St]){case`
`:X=0,++G;break;default:++X;break}}return D+=O,q=q.slice(O),N}function at(It){return B.length&&H(B.join("")),P=u,H("(eof)"),N}function et(){return B=B.length?[]:B,R==="/"&&F==="*"?(J=D+O-1,P=h,R=F,O+1):R==="/"&&F==="/"?(J=D+O-1,P=_,R=F,O+1):F==="#"?(P=a,J=D+O,O):/\s/.test(F)?(P=L,J=D+O,O):(it=/\d/.test(F),nt=/[^\w_]/.test(F),J=D+O,P=it?f:nt?c:b,O)}function ct(){return/[^\s]/g.test(F)?(H(B.join("")),P=p,O):(B.push(F),R=F,O+1)}function ft(){return(F==="\r"||F===`
`)&&R!=="\\"?(H(B.join("")),P=p,O):(B.push(F),R=F,O+1)}function yt(){return ft()}function xt(){return F==="/"&&R==="*"?(B.push(F),H(B.join("")),P=p,O+1):(B.push(F),R=F,O+1)}function Ct(){if(R==="."&&/\d/.test(F))return P=x,O;if(R==="/"&&F==="*")return P=h,O;if(R==="/"&&F==="/")return P=_,O;if(F==="."&&B.length){for(;gt(B););return P=x,O}if(F===";"||F===")"||F==="("){if(B.length)for(;gt(B););return H(F),P=p,O+1}var It=B.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||It){for(;gt(B););return P=p,O}return B.push(F),R=F,O+1}function gt(It){var St=0,Bt,re;do{if(Bt=l.indexOf(It.slice(0,It.length+St).join("")),re=l[Bt],Bt===-1){if(St--+It.length>0)continue;re=It.slice(0,1).join("")}return H(re),J+=re.length,B=B.slice(re.length),B.length}while(!0)}function mt(){return/[^a-fA-F0-9]/.test(F)?(H(B.join("")),P=p,O):(B.push(F),R=F,O+1)}function vt(){return F==="."||/[eE]/.test(F)?(B.push(F),P=x,R=F,O+1):F==="x"&&B.length===1&&B[0]==="0"?(P=m,B.push(F),R=F,O+1):/[^\d]/.test(F)?(H(B.join("")),P=p,O):(B.push(F),R=F,O+1)}function At(){return F==="f"&&(B.push(F),R=F,O+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(R)?(B.push(F),R=F,O+1):/[^\d]/.test(F)?(H(B.join("")),P=p,O):(B.push(F),R=F,O+1)}function Ot(){if(/[^\d\w_]/.test(F)){var It=B.join("");return ot[It]?P=A:rt[It]?P=y:P=k,H(B.join("")),P=p,O}return B.push(F),R=F,O+1}}},3508:function(v,d,r){var e=r(6852);e=e.slice().filter(function(l){return!/^(gl\_|texture)/.test(l)}),v.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(v){v.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(v,d,r){var e=r(620);v.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(v){v.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(v){v.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(v,d,r){var e=r(5874);v.exports=l;function l(n,s){var o=e(s),p=[];return p=p.concat(o(n)),p=p.concat(o(null)),p}},3236:function(v){v.exports=function(d){typeof d=="string"&&(d=[d]);for(var r=[].slice.call(arguments,1),e=[],l=0;l<d.length-1;l++)e.push(d[l],r[l]||"");return e.push(d[l]),e.join("")}},7520:function(v,d,r){var e=r(9507);function l(){var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,s),window.removeEventListener("test",null,s)}catch{n=!1}return n}v.exports=e&&l()},3778:function(v,d){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */d.read=function(r,e,l,n,s){var o,p,b=s*8-n-1,h=(1<<b)-1,_=h>>1,a=-7,c=l?s-1:0,f=l?-1:1,x=r[e+c];for(c+=f,o=x&(1<<-a)-1,x>>=-a,a+=b;a>0;o=o*256+r[e+c],c+=f,a-=8);for(p=o&(1<<-a)-1,o>>=-a,a+=n;a>0;p=p*256+r[e+c],c+=f,a-=8);if(o===0)o=1-_;else{if(o===h)return p?NaN:(x?-1:1)*(1/0);p=p+Math.pow(2,n),o=o-_}return(x?-1:1)*p*Math.pow(2,o-n)},d.write=function(r,e,l,n,s,o){var p,b,h,_=o*8-s-1,a=(1<<_)-1,c=a>>1,f=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:o-1,k=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(b=isNaN(e)?1:0,p=a):(p=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-p))<1&&(p--,h*=2),p+c>=1?e+=f/h:e+=f*Math.pow(2,1-c),e*h>=2&&(p++,h/=2),p+c>=a?(b=0,p=a):p+c>=1?(b=(e*h-1)*Math.pow(2,s),p=p+c):(b=e*Math.pow(2,c-1)*Math.pow(2,s),p=0));s>=8;r[l+x]=b&255,x+=k,b/=256,s-=8);for(p=p<<s|b,_+=s;_>0;r[l+x]=p&255,x+=k,p/=256,_-=8);r[l+x-k]|=y*128}},8954:function(v,d,r){v.exports=c;var e=r(3250),l=r(6803).Fw;function n(f,x,k){this.vertices=f,this.adjacent=x,this.boundary=k,this.lastVisited=-1}n.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var x=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=x};function s(f,x,k){this.vertices=f,this.cell=x,this.index=k}function o(f,x){return l(f.vertices,x.vertices)}function p(f){return function(){var x=this.tuple;return f.apply(this,x)}}function b(f){var x=e[f+1];return x||(x=e),p(x)}var h=[];function _(f,x,k){this.dimension=f,this.vertices=x,this.simplices=k,this.interior=k.filter(function(L){return!L.boundary}),this.tuple=new Array(f+1);for(var y=0;y<=f;++y)this.tuple[y]=this.vertices[y];var A=h[f];A||(A=h[f]=b(f)),this.orient=A}var a=_.prototype;a.handleBoundaryDegeneracy=function(f,x){var k=this.dimension,y=this.vertices.length-1,A=this.tuple,L=this.vertices,u=[f];for(f.lastVisited=-y;u.length>0;){f=u.pop();for(var m=f.adjacent,S=0;S<=k;++S){var w=m[S];if(!(!w.boundary||w.lastVisited<=-y)){for(var I=w.vertices,O=0;O<=k;++O){var D=I[O];D<0?A[O]=x:A[O]=L[D]}var P=this.orient();if(P>0)return w;w.lastVisited=-y,P===0&&u.push(w)}}}return null},a.walk=function(f,x){var k=this.vertices.length-1,y=this.dimension,A=this.vertices,L=this.tuple,u=x?this.interior.length*Math.random()|0:this.interior.length-1,m=this.interior[u];t:for(;!m.boundary;){for(var S=m.vertices,w=m.adjacent,I=0;I<=y;++I)L[I]=A[S[I]];m.lastVisited=k;for(var I=0;I<=y;++I){var O=w[I];if(!(O.lastVisited>=k)){var D=L[I];L[I]=f;var P=this.orient();if(L[I]=D,P<0){m=O;continue t}else O.boundary?O.lastVisited=-k:O.lastVisited=k}}return}return m},a.addPeaks=function(f,x){var k=this.vertices.length-1,y=this.dimension,A=this.vertices,L=this.tuple,u=this.interior,m=this.simplices,S=[x];x.lastVisited=k,x.vertices[x.vertices.indexOf(-1)]=k,x.boundary=!1,u.push(x);for(var w=[];S.length>0;){var x=S.pop(),I=x.vertices,O=x.adjacent,D=I.indexOf(k);if(!(D<0)){for(var P=0;P<=y;++P)if(P!==D){var F=O[P];if(!(!F.boundary||F.lastVisited>=k)){var R=F.vertices;if(F.lastVisited!==-k){for(var B=0,N=0;N<=y;++N)R[N]<0?(B=N,L[N]=f):L[N]=A[R[N]];var G=this.orient();if(G>0){R[B]=k,F.boundary=!1,u.push(F),S.push(F),F.lastVisited=k;continue}else F.lastVisited=-k}var X=F.adjacent,J=I.slice(),it=O.slice(),nt=new n(J,it,!0);m.push(nt);var q=X.indexOf(x);if(!(q<0)){X[q]=nt,it[D]=F,J[P]=-1,it[P]=x,O[P]=nt,nt.flip();for(var N=0;N<=y;++N){var Z=J[N];if(!(Z<0||Z===k)){for(var $=new Array(y-1),V=0,rt=0;rt<=y;++rt){var ot=J[rt];ot<0||rt===N||($[V++]=ot)}w.push(new s($,nt,N))}}}}}}}w.sort(o);for(var P=0;P+1<w.length;P+=2){var H=w[P],Y=w[P+1],at=H.index,et=Y.index;at<0||et<0||(H.cell.adjacent[H.index]=Y.cell,Y.cell.adjacent[Y.index]=H.cell)}},a.insert=function(f,x){var k=this.vertices;k.push(f);var y=this.walk(f,x);if(y){for(var A=this.dimension,L=this.tuple,u=0;u<=A;++u){var m=y.vertices[u];m<0?L[u]=f:L[u]=k[m]}var S=this.orient(L);S<0||S===0&&(y=this.handleBoundaryDegeneracy(y,f),!y)||this.addPeaks(f,y)}},a.boundary=function(){for(var f=this.dimension,x=[],k=this.simplices,y=k.length,A=0;A<y;++A){var L=k[A];if(L.boundary){for(var u=new Array(f),m=L.vertices,S=0,w=0,I=0;I<=f;++I)m[I]>=0?u[S++]=m[I]:w=I&1;if(w===(f&1)){var O=u[0];u[0]=u[1],u[1]=O}x.push(u)}}return x};function c(f,x){var k=f.length;if(k===0)throw new Error("Must have at least d+1 points");var y=f[0].length;if(k<=y)throw new Error("Must input at least d+1 points");var A=f.slice(0,y+1),L=e.apply(void 0,A);if(L===0)throw new Error("Input not in general position");for(var u=new Array(y+1),m=0;m<=y;++m)u[m]=m;L<0&&(u[0]=1,u[1]=0);for(var S=new n(u,new Array(y+1),!1),w=S.adjacent,I=new Array(y+2),m=0;m<=y;++m){for(var O=u.slice(),D=0;D<=y;++D)D===m&&(O[D]=-1);var P=O[0];O[0]=O[1],O[1]=P;var F=new n(O,new Array(y+1),!0);w[m]=F,I[m]=F}I[y+1]=S;for(var m=0;m<=y;++m)for(var O=w[m].vertices,R=w[m].adjacent,D=0;D<=y;++D){var B=O[D];if(B<0){R[D]=S;continue}for(var N=0;N<=y;++N)w[N].vertices.indexOf(B)<0&&(R[D]=w[N])}for(var G=new _(y,A,I),X=!!x,m=y+1;m<k;++m)G.insert(f[m],X);return G.boundary()}},3352:function(v,d,r){var e=r(2478),l=0,n=1,s=2;v.exports=S;function o(w,I,O,D,P){this.mid=w,this.left=I,this.right=O,this.leftPoints=D,this.rightPoints=P,this.count=(I?I.count:0)+(O?O.count:0)+D.length}var p=o.prototype;function b(w,I){w.mid=I.mid,w.left=I.left,w.right=I.right,w.leftPoints=I.leftPoints,w.rightPoints=I.rightPoints,w.count=I.count}function h(w,I){var O=L(I);w.mid=O.mid,w.left=O.left,w.right=O.right,w.leftPoints=O.leftPoints,w.rightPoints=O.rightPoints,w.count=O.count}function _(w,I){var O=w.intervals([]);O.push(I),h(w,O)}function a(w,I){var O=w.intervals([]),D=O.indexOf(I);return D<0?l:(O.splice(D,1),h(w,O),n)}p.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},p.insert=function(w){var I=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(I+1)?_(this,w):this.left.insert(w):this.left=L([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(I+1)?_(this,w):this.right.insert(w):this.right=L([w]);else{var O=e.ge(this.leftPoints,w,y),D=e.ge(this.rightPoints,w,A);this.leftPoints.splice(O,0,w),this.rightPoints.splice(D,0,w)}},p.remove=function(w){var I=this.count-this.leftPoints;if(w[1]<this.mid){if(!this.left)return l;var O=this.right?this.right.count:0;if(4*O>3*(I-1))return a(this,w);var D=this.left.remove(w);return D===s?(this.left=null,this.count-=1,n):(D===n&&(this.count-=1),D)}else if(w[0]>this.mid){if(!this.right)return l;var P=this.left?this.left.count:0;if(4*P>3*(I-1))return a(this,w);var D=this.right.remove(w);return D===s?(this.right=null,this.count-=1,n):(D===n&&(this.count-=1),D)}else{if(this.count===1)return this.leftPoints[0]===w?s:l;if(this.leftPoints.length===1&&this.leftPoints[0]===w){if(this.left&&this.right){for(var F=this,R=this.left;R.right;)F=R,R=R.right;if(F===this)R.right=this.right;else{var B=this.left,D=this.right;F.count-=R.count,F.right=R.left,R.left=B,R.right=D}b(this,R),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?b(this,this.left):b(this,this.right);return n}for(var B=e.ge(this.leftPoints,w,y);B<this.leftPoints.length&&this.leftPoints[B][0]===w[0];++B)if(this.leftPoints[B]===w){this.count-=1,this.leftPoints.splice(B,1);for(var D=e.ge(this.rightPoints,w,A);D<this.rightPoints.length&&this.rightPoints[D][1]===w[1];++D)if(this.rightPoints[D]===w)return this.rightPoints.splice(D,1),n}return l}};function c(w,I,O){for(var D=0;D<w.length&&w[D][0]<=I;++D){var P=O(w[D]);if(P)return P}}function f(w,I,O){for(var D=w.length-1;D>=0&&w[D][1]>=I;--D){var P=O(w[D]);if(P)return P}}function x(w,I){for(var O=0;O<w.length;++O){var D=I(w[O]);if(D)return D}}p.queryPoint=function(w,I){if(w<this.mid){if(this.left){var O=this.left.queryPoint(w,I);if(O)return O}return c(this.leftPoints,w,I)}else if(w>this.mid){if(this.right){var O=this.right.queryPoint(w,I);if(O)return O}return f(this.rightPoints,w,I)}else return x(this.leftPoints,I)},p.queryInterval=function(w,I,O){if(w<this.mid&&this.left){var D=this.left.queryInterval(w,I,O);if(D)return D}if(I>this.mid&&this.right){var D=this.right.queryInterval(w,I,O);if(D)return D}return I<this.mid?c(this.leftPoints,I,O):w>this.mid?f(this.rightPoints,w,O):x(this.leftPoints,O)};function k(w,I){return w-I}function y(w,I){var O=w[0]-I[0];return O||w[1]-I[1]}function A(w,I){var O=w[1]-I[1];return O||w[0]-I[0]}function L(w){if(w.length===0)return null;for(var I=[],O=0;O<w.length;++O)I.push(w[O][0],w[O][1]);I.sort(k);for(var D=I[I.length>>1],P=[],F=[],R=[],O=0;O<w.length;++O){var B=w[O];B[1]<D?P.push(B):D<B[0]?F.push(B):R.push(B)}var N=R,G=R.slice();return N.sort(y),G.sort(A),new o(D,L(P),L(F),N,G)}function u(w){this.root=w}var m=u.prototype;m.insert=function(w){this.root?this.root.insert(w):this.root=new o(w[0],null,null,[w],[w])},m.remove=function(w){if(this.root){var I=this.root.remove(w);return I===s&&(this.root=null),I!==l}return!1},m.queryPoint=function(w,I){if(this.root)return this.root.queryPoint(w,I)},m.queryInterval=function(w,I,O){if(w<=I&&this.root)return this.root.queryInterval(w,I,O)},Object.defineProperty(m,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(m,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function S(w){return!w||w.length===0?new u(null):new u(L(w))}},7762:function(v){function d(r){for(var e=new Array(r),l=0;l<r;++l)e[l]=l;return e}v.exports=d},9507:function(v){v.exports=!0},7163:function(v){/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/v.exports=function(e){return e!=null&&(d(e)||r(e)||!!e._isBuffer)};function d(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function r(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&d(e.slice(0,0))}},5219:function(v){v.exports=function(d){for(var r=d.length,e,l=0;l<r;l++)if(e=d.charCodeAt(l),(e<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},395:function(v){function d(r,e,l){return r*(1-l)+e*l}v.exports=d},2652:function(v,d,r){var e=r(4335),l=r(6864),n=r(1903),s=r(9921),o=r(7608),p=r(5665),b={length:r(1387),normalize:r(3536),dot:r(244),cross:r(5911)},h=l(),_=l(),a=[0,0,0,0],c=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];v.exports=function(A,L,u,m,S,w){if(L||(L=[0,0,0]),u||(u=[0,0,0]),m||(m=[0,0,0]),S||(S=[0,0,0,1]),w||(w=[0,0,0,1]),!e(h,A)||(n(_,h),_[3]=0,_[7]=0,_[11]=0,_[15]=1,Math.abs(s(_)<1e-8)))return!1;var I=h[3],O=h[7],D=h[11],P=h[12],F=h[13],R=h[14],B=h[15];if(I!==0||O!==0||D!==0){a[0]=I,a[1]=O,a[2]=D,a[3]=B;var N=o(_,_);if(!N)return!1;p(_,_),x(S,a,_)}else S[0]=S[1]=S[2]=0,S[3]=1;if(L[0]=P,L[1]=F,L[2]=R,k(c,h),u[0]=b.length(c[0]),b.normalize(c[0],c[0]),m[0]=b.dot(c[0],c[1]),y(c[1],c[1],c[0],1,-m[0]),u[1]=b.length(c[1]),b.normalize(c[1],c[1]),m[0]/=u[1],m[1]=b.dot(c[0],c[2]),y(c[2],c[2],c[0],1,-m[1]),m[2]=b.dot(c[1],c[2]),y(c[2],c[2],c[1],1,-m[2]),u[2]=b.length(c[2]),b.normalize(c[2],c[2]),m[1]/=u[2],m[2]/=u[2],b.cross(f,c[1],c[2]),b.dot(c[0],f)<0)for(var G=0;G<3;G++)u[G]*=-1,c[G][0]*=-1,c[G][1]*=-1,c[G][2]*=-1;return w[0]=.5*Math.sqrt(Math.max(1+c[0][0]-c[1][1]-c[2][2],0)),w[1]=.5*Math.sqrt(Math.max(1-c[0][0]+c[1][1]-c[2][2],0)),w[2]=.5*Math.sqrt(Math.max(1-c[0][0]-c[1][1]+c[2][2],0)),w[3]=.5*Math.sqrt(Math.max(1+c[0][0]+c[1][1]+c[2][2],0)),c[2][1]>c[1][2]&&(w[0]=-w[0]),c[0][2]>c[2][0]&&(w[1]=-w[1]),c[1][0]>c[0][1]&&(w[2]=-w[2]),!0};function x(A,L,u){var m=L[0],S=L[1],w=L[2],I=L[3];return A[0]=u[0]*m+u[4]*S+u[8]*w+u[12]*I,A[1]=u[1]*m+u[5]*S+u[9]*w+u[13]*I,A[2]=u[2]*m+u[6]*S+u[10]*w+u[14]*I,A[3]=u[3]*m+u[7]*S+u[11]*w+u[15]*I,A}function k(A,L){A[0][0]=L[0],A[0][1]=L[1],A[0][2]=L[2],A[1][0]=L[4],A[1][1]=L[5],A[1][2]=L[6],A[2][0]=L[8],A[2][1]=L[9],A[2][2]=L[10]}function y(A,L,u,m,S){A[0]=L[0]*m+u[0]*S,A[1]=L[1]*m+u[1]*S,A[2]=L[2]*m+u[2]*S}},4335:function(v){v.exports=function(d,r){var e=r[15];if(e===0)return!1;for(var l=1/e,n=0;n<16;n++)d[n]=r[n]*l;return!0}},7442:function(v,d,r){var e=r(6658),l=r(7182),n=r(2652),s=r(9921),o=r(8648),p=a(),b=a(),h=a();v.exports=_;function _(x,k,y,A){if(s(k)===0||s(y)===0)return!1;var L=n(k,p.translate,p.scale,p.skew,p.perspective,p.quaternion),u=n(y,b.translate,b.scale,b.skew,b.perspective,b.quaternion);return!L||!u?!1:(e(h.translate,p.translate,b.translate,A),e(h.skew,p.skew,b.skew,A),e(h.scale,p.scale,b.scale,A),e(h.perspective,p.perspective,b.perspective,A),o(h.quaternion,p.quaternion,b.quaternion,A),l(x,h.translate,h.scale,h.skew,h.perspective,h.quaternion),!0)}function a(){return{translate:c(),scale:c(1),skew:c(),perspective:f(),quaternion:f()}}function c(x){return[x||0,x||0,x||0]}function f(){return[0,0,0,1]}},7182:function(v,d,r){var e={identity:r(7894),translate:r(7656),multiply:r(6760),create:r(6864),scale:r(2504),fromRotationTranslation:r(6743)};e.create();var l=e.create();v.exports=function(n,s,o,p,b,h){return e.identity(n),e.fromRotationTranslation(n,h,s),n[3]=b[0],n[7]=b[1],n[11]=b[2],n[15]=b[3],e.identity(l),p[2]!==0&&(l[9]=p[2],e.multiply(n,n,l)),p[1]!==0&&(l[9]=0,l[8]=p[1],e.multiply(n,n,l)),p[0]!==0&&(l[8]=0,l[4]=p[0],e.multiply(n,n,l)),e.scale(n,n,o),n}},4192:function(v,d,r){var e=r(2478),l=r(7442),n=r(7608),s=r(5567),o=r(2408),p=r(7089),b=r(6582),h=r(7656);r(2504);var _=r(3536),a=[0,0,0];v.exports=k;function c(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var f=c.prototype;f.recalcMatrix=function(y){var A=this._time,L=e.le(A,y),u=this.computedMatrix;if(!(L<0)){var m=this._components;if(L===A.length-1)for(var S=16*L,w=0;w<16;++w)u[w]=m[S++];else{for(var I=A[L+1]-A[L],S=16*L,O=this.prevMatrix,D=!0,w=0;w<16;++w)O[w]=m[S++];for(var P=this.nextMatrix,w=0;w<16;++w)P[w]=m[S++],D=D&&O[w]===P[w];if(I<1e-6||D)for(var w=0;w<16;++w)u[w]=O[w];else l(u,O,P,(y-A[L])/I)}var F=this.computedUp;F[0]=u[1],F[1]=u[5],F[2]=u[9],_(F,F);var R=this.computedInverse;n(R,u);var B=this.computedEye,N=R[15];B[0]=R[12]/N,B[1]=R[13]/N,B[2]=R[14]/N;for(var G=this.computedCenter,X=Math.exp(this.computedRadius[0]),w=0;w<3;++w)G[w]=B[w]-u[2+4*w]*X}},f.idle=function(y){if(!(y<this.lastT())){for(var A=this._components,L=A.length-16,u=0;u<16;++u)A.push(A[L++]);this._time.push(y)}},f.flush=function(y){var A=e.gt(this._time,y)-2;A<0||(this._time.splice(0,A),this._components.splice(0,16*A))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(y,A,L,u){this.recalcMatrix(y),A=A||this.computedEye,L=L||a,u=u||this.computedUp,this.setMatrix(y,b(this.computedMatrix,A,L,u));for(var m=0,S=0;S<3;++S)m+=Math.pow(L[S]-A[S],2);m=Math.log(Math.sqrt(m)),this.computedRadius[0]=m},f.rotate=function(y,A,L,u){this.recalcMatrix(y);var m=this.computedInverse;A&&o(m,m,A),L&&s(m,m,L),u&&p(m,m,u),this.setMatrix(y,n(this.computedMatrix,m))};var x=[0,0,0];f.pan=function(y,A,L,u){x[0]=-(A||0),x[1]=-(L||0),x[2]=-(u||0),this.recalcMatrix(y);var m=this.computedInverse;h(m,m,x),this.setMatrix(y,n(m,m))},f.translate=function(y,A,L,u){x[0]=A||0,x[1]=L||0,x[2]=u||0,this.recalcMatrix(y);var m=this.computedMatrix;h(m,m,x),this.setMatrix(y,m)},f.setMatrix=function(y,A){if(!(y<this.lastT())){this._time.push(y);for(var L=0;L<16;++L)this._components.push(A[L])}},f.setDistance=function(y,A){this.computedRadius[0]=A},f.setDistanceLimits=function(y,A){var L=this._limits;L[0]=y,L[1]=A},f.getDistanceLimits=function(y){var A=this._limits;return y?(y[0]=A[0],y[1]=A[1],y):A};function k(y){y=y||{};var A=y.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new c(A)}},3090:function(v,d,r){v.exports=l;var e=r(3250)[3];function l(n){var s=n.length;if(s<3){for(var o=new Array(s),p=0;p<s;++p)o[p]=p;return s===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:o}for(var b=new Array(s),p=0;p<s;++p)b[p]=p;b.sort(function(A,L){var u=n[A][0]-n[L][0];return u||n[A][1]-n[L][1]});for(var h=[b[0],b[1]],_=[b[0],b[1]],p=2;p<s;++p){for(var a=b[p],c=n[a],f=h.length;f>1&&e(n[h[f-2]],n[h[f-1]],c)<=0;)f-=1,h.pop();for(h.push(a),f=_.length;f>1&&e(n[_[f-2]],n[_[f-1]],c)>=0;)f-=1,_.pop();_.push(a)}for(var o=new Array(_.length+h.length-2),x=0,p=0,k=h.length;p<k;++p)o[x++]=h[p];for(var y=_.length-2;y>0;--y)o[x++]=_[y];return o}},351:function(v,d,r){v.exports=l;var e=r(4687);function l(n,s){s||(s=n,n=window);var o=0,p=0,b=0,h={shift:!1,alt:!1,control:!1,meta:!1},_=!1;function a(w){var I=!1;return"altKey"in w&&(I=I||w.altKey!==h.alt,h.alt=!!w.altKey),"shiftKey"in w&&(I=I||w.shiftKey!==h.shift,h.shift=!!w.shiftKey),"ctrlKey"in w&&(I=I||w.ctrlKey!==h.control,h.control=!!w.ctrlKey),"metaKey"in w&&(I=I||w.metaKey!==h.meta,h.meta=!!w.metaKey),I}function c(w,I){var O=e.x(I),D=e.y(I);"buttons"in I&&(w=I.buttons|0),(w!==o||O!==p||D!==b||a(I))&&(o=w|0,p=O||0,b=D||0,s&&s(o,p,b,h))}function f(w){c(0,w)}function x(){(o||p||b||h.shift||h.alt||h.meta||h.control)&&(p=b=0,o=0,h.shift=h.alt=h.control=h.meta=!1,s&&s(0,0,0,h))}function k(w){a(w)&&s&&s(o,p,b,h)}function y(w){e.buttons(w)===0?c(0,w):c(o,w)}function A(w){c(o|e.buttons(w),w)}function L(w){c(o&~e.buttons(w),w)}function u(){_||(_=!0,n.addEventListener("mousemove",y),n.addEventListener("mousedown",A),n.addEventListener("mouseup",L),n.addEventListener("mouseleave",f),n.addEventListener("mouseenter",f),n.addEventListener("mouseout",f),n.addEventListener("mouseover",f),n.addEventListener("blur",x),n.addEventListener("keyup",k),n.addEventListener("keydown",k),n.addEventListener("keypress",k),n!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",k),window.addEventListener("keydown",k),window.addEventListener("keypress",k)))}function m(){_&&(_=!1,n.removeEventListener("mousemove",y),n.removeEventListener("mousedown",A),n.removeEventListener("mouseup",L),n.removeEventListener("mouseleave",f),n.removeEventListener("mouseenter",f),n.removeEventListener("mouseout",f),n.removeEventListener("mouseover",f),n.removeEventListener("blur",x),n.removeEventListener("keyup",k),n.removeEventListener("keydown",k),n.removeEventListener("keypress",k),n!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",k),window.removeEventListener("keydown",k),window.removeEventListener("keypress",k)))}u();var S={element:n};return Object.defineProperties(S,{enabled:{get:function(){return _},set:function(w){w?u():m()},enumerable:!0},buttons:{get:function(){return o},enumerable:!0},x:{get:function(){return p},enumerable:!0},y:{get:function(){return b},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),S}},24:function(v){var d={left:0,top:0};v.exports=r;function r(l,n,s){n=n||l.currentTarget||l.srcElement,Array.isArray(s)||(s=[0,0]);var o=l.clientX||0,p=l.clientY||0,b=e(n);return s[0]=o-b.left,s[1]=p-b.top,s}function e(l){return l===window||l===document||l===document.body?d:l.getBoundingClientRect()}},4687:function(v,d){function r(s){if(typeof s=="object"){if("buttons"in s)return s.buttons;if("which"in s){var o=s.which;if(o===2)return 4;if(o===3)return 2;if(o>0)return 1<<o-1}else if("button"in s){var o=s.button;if(o===1)return 4;if(o===2)return 2;if(o>=0)return 1<<o}}return 0}d.buttons=r;function e(s){return s.target||s.srcElement||window}d.element=e;function l(s){if(typeof s=="object"){if("offsetX"in s)return s.offsetX;var o=e(s),p=o.getBoundingClientRect();return s.clientX-p.left}return 0}d.x=l;function n(s){if(typeof s=="object"){if("offsetY"in s)return s.offsetY;var o=e(s),p=o.getBoundingClientRect();return s.clientY-p.top}return 0}d.y=n},8512:function(v,d,r){var e=r(665);v.exports=l;function l(n,s,o){typeof n=="function"&&(o=!!s,s=n,n=window);var p=e("ex",n),b=function(h){o&&h.preventDefault();var _=h.deltaX||0,a=h.deltaY||0,c=h.deltaZ||0,f=h.deltaMode,x=1;switch(f){case 1:x=p;break;case 2:x=window.innerHeight;break}if(_*=x,a*=x,c*=x,_||a||c)return s(_,a,c,h)};return n.addEventListener("wheel",b),b}},2640:function(v,d,r){var e=r(1888);v.exports=s;var l={"false,0,1":function(o,p,b,h,_){return function(a,c,f,x){var k=a.shape[0]|0,y=a.shape[1]|0,A=a.data,L=a.offset|0,u=a.stride[0]|0,m=a.stride[1]|0,S=L,w,I=-u|0,O=0,D=-m|0,P=0,F=-u-m|0,R=0,B=u|0,N=m-u*k|0,G=0,X=0,J=0,it=2*k|0,nt=h(it),q=h(it),Z=0,$=0,V=-1,rt=-1,ot=0,H=-k|0,Y=k|0,at=0,et=-k-1|0,ct=k-1|0,ft=0,yt=0,xt=0;for(G=0;G<k;++G)nt[Z++]=b(A[S],c,f,x),S+=B;if(S+=N,y>0){if(X=1,nt[Z++]=b(A[S],c,f,x),S+=B,k>0)for(G=1,w=A[S],$=nt[Z]=b(w,c,f,x),ot=nt[Z+V],at=nt[Z+H],ft=nt[Z+et],($!==ot||$!==at||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,ot,at,ft,c,f,x),yt=q[Z]=J++),Z+=1,S+=B,G=2;G<k;++G)w=A[S],$=nt[Z]=b(w,c,f,x),ot=nt[Z+V],at=nt[Z+H],ft=nt[Z+et],($!==ot||$!==at||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,ot,at,ft,c,f,x),yt=q[Z]=J++,ft!==ot&&p(q[Z+V],yt,R,O,ft,ot,c,f,x)),Z+=1,S+=B;for(S+=N,Z=0,xt=V,V=rt,rt=xt,xt=H,H=Y,Y=xt,xt=et,et=ct,ct=xt,X=2;X<y;++X){if(nt[Z++]=b(A[S],c,f,x),S+=B,k>0)for(G=1,w=A[S],$=nt[Z]=b(w,c,f,x),ot=nt[Z+V],at=nt[Z+H],ft=nt[Z+et],($!==ot||$!==at||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,ot,at,ft,c,f,x),yt=q[Z]=J++,ft!==at&&p(q[Z+H],yt,P,R,at,ft,c,f,x)),Z+=1,S+=B,G=2;G<k;++G)w=A[S],$=nt[Z]=b(w,c,f,x),ot=nt[Z+V],at=nt[Z+H],ft=nt[Z+et],($!==ot||$!==at||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,ot,at,ft,c,f,x),yt=q[Z]=J++,ft!==at&&p(q[Z+H],yt,P,R,at,ft,c,f,x),ft!==ot&&p(q[Z+V],yt,R,O,ft,ot,c,f,x)),Z+=1,S+=B;X&1&&(Z=0),xt=V,V=rt,rt=xt,xt=H,H=Y,Y=xt,xt=et,et=ct,ct=xt,S+=N}}_(q),_(nt)}},"false,1,0":function(o,p,b,h,_){return function(a,c,f,x){var k=a.shape[0]|0,y=a.shape[1]|0,A=a.data,L=a.offset|0,u=a.stride[0]|0,m=a.stride[1]|0,S=L,w,I=-u|0,O=0,D=-m|0,P=0,F=-u-m|0,R=0,B=m|0,N=u-m*y|0,G=0,X=0,J=0,it=2*y|0,nt=h(it),q=h(it),Z=0,$=0,V=-1,rt=-1,ot=0,H=-y|0,Y=y|0,at=0,et=-y-1|0,ct=y-1|0,ft=0,yt=0,xt=0;for(X=0;X<y;++X)nt[Z++]=b(A[S],c,f,x),S+=B;if(S+=N,k>0){if(G=1,nt[Z++]=b(A[S],c,f,x),S+=B,y>0)for(X=1,w=A[S],$=nt[Z]=b(w,c,f,x),at=nt[Z+H],ot=nt[Z+V],ft=nt[Z+et],($!==at||$!==ot||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,at,ot,ft,c,f,x),yt=q[Z]=J++),Z+=1,S+=B,X=2;X<y;++X)w=A[S],$=nt[Z]=b(w,c,f,x),at=nt[Z+H],ot=nt[Z+V],ft=nt[Z+et],($!==at||$!==ot||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,at,ot,ft,c,f,x),yt=q[Z]=J++,ft!==ot&&p(q[Z+V],yt,P,R,ot,ft,c,f,x)),Z+=1,S+=B;for(S+=N,Z=0,xt=H,H=Y,Y=xt,xt=V,V=rt,rt=xt,xt=et,et=ct,ct=xt,G=2;G<k;++G){if(nt[Z++]=b(A[S],c,f,x),S+=B,y>0)for(X=1,w=A[S],$=nt[Z]=b(w,c,f,x),at=nt[Z+H],ot=nt[Z+V],ft=nt[Z+et],($!==at||$!==ot||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,at,ot,ft,c,f,x),yt=q[Z]=J++,ft!==at&&p(q[Z+H],yt,R,O,ft,at,c,f,x)),Z+=1,S+=B,X=2;X<y;++X)w=A[S],$=nt[Z]=b(w,c,f,x),at=nt[Z+H],ot=nt[Z+V],ft=nt[Z+et],($!==at||$!==ot||$!==ft)&&(O=A[S+I],P=A[S+D],R=A[S+F],o(G,X,w,O,P,R,$,at,ot,ft,c,f,x),yt=q[Z]=J++,ft!==ot&&p(q[Z+V],yt,P,R,ot,ft,c,f,x),ft!==at&&p(q[Z+H],yt,R,O,ft,at,c,f,x)),Z+=1,S+=B;G&1&&(Z=0),xt=H,H=Y,Y=xt,xt=V,V=rt,rt=xt,xt=et,et=ct,ct=xt,S+=N}}_(q),_(nt)}}};function n(o,p,b,h,_,a){var c=[a,_].join(","),f=l[c];return f(o,p,b,e.mallocUint32,e.freeUint32)}function s(o){function p(x){throw new Error("ndarray-extract-contour: "+x)}typeof o!="object"&&p("Must specify arguments");var b=o.order;Array.isArray(b)||p("Must specify order");var h=o.arrayArguments||1;h<1&&p("Must have at least one array argument");var _=o.scalarArguments||0;_<0&&p("Scalar arg count must be > 0"),typeof o.vertex!="function"&&p("Must specify vertex creation function"),typeof o.cell!="function"&&p("Must specify cell creation function"),typeof o.phase!="function"&&p("Must specify phase function");for(var a=o.getters||[],c=new Array(h),f=0;f<h;++f)a.indexOf(f)>=0?c[f]=!0:c[f]=!1;return n(o.vertex,o.cell,o.phase,_,b,c)}},6199:function(v,d,r){var e=r(1338),l={zero:function(k,y,A,L){var u=k[0],m=A[0];L|=0;var S=0,w=m;for(S=0;S<u;++S)y[L]=0,L+=w},fdTemplate1:function(k,y,A,L,u,m,S){var w=k[0],I=A[0],O=m[0],D=-1*I,P=I;L|=0,S|=0;var F=0,R=I,B=O;for(F=0;F<w;++F)u[S]=.5*(y[L+D]-y[L+P]),L+=R,S+=B},fdTemplate2:function(k,y,A,L,u,m,S,w,I,O){var D=k[0],P=k[1],F=A[0],R=A[1],B=m[0],N=m[1],G=I[0],X=I[1],J=-1*F,it=F,nt=-1*R,q=R;L|=0,S|=0,O|=0;var Z=0,$=0,V=R,rt=F-P*R,ot=N,H=B-P*N,Y=X,at=G-P*X;for($=0;$<D;++$){for(Z=0;Z<P;++Z)u[S]=.5*(y[L+J]-y[L+it]),w[O]=.5*(y[L+nt]-y[L+q]),L+=V,S+=ot,O+=Y;L+=rt,S+=H,O+=at}}},n={cdiff:function(k){var y={};return function(A,L,u){var m=A.dtype,S=A.order,w=L.dtype,I=L.order,O=u.dtype,D=u.order,P=[m,S.join(),w,I.join(),O,D.join()].join(),F=y[P];return F||(y[P]=F=k([m,S,w,I,O,D])),F(A.shape.slice(0),A.data,A.stride,A.offset|0,L.data,L.stride,L.offset|0,u.data,u.stride,u.offset|0)}},zero:function(k){var y={};return function(A){var L=A.dtype,u=A.order,m=[L,u.join()].join(),S=y[m];return S||(y[m]=S=k([L,u])),S(A.shape.slice(0),A.data,A.stride,A.offset|0)}},fdTemplate1:function(k){var y={};return function(A,L){var u=A.dtype,m=A.order,S=L.dtype,w=L.order,I=[u,m.join(),S,w.join()].join(),O=y[I];return O||(y[I]=O=k([u,m,S,w])),O(A.shape.slice(0),A.data,A.stride,A.offset|0,L.data,L.stride,L.offset|0)}},fdTemplate2:function(k){var y={};return function(A,L,u){var m=A.dtype,S=A.order,w=L.dtype,I=L.order,O=u.dtype,D=u.order,P=[m,S.join(),w,I.join(),O,D.join()].join(),F=y[P];return F||(y[P]=F=k([m,S,w,I,O,D])),F(A.shape.slice(0),A.data,A.stride,A.offset|0,L.data,L.stride,L.offset|0,u.data,u.stride,u.offset|0)}}};function s(k){var y=n[k.funcName];return y(o.bind(void 0,k))}function o(k){return l[k.funcName]}function p(k){return s({funcName:k.funcName})}var b={},h={},_=p({funcName:"cdiff"}),a=p({funcName:"zero"});function c(k){return k in b?b[k]:b[k]=p({funcName:"fdTemplate"+k})}function f(k,y,A,L){return function(u,m){var S=m.shape.slice();return S[0]>2&&S[1]>2&&L(m.pick(-1,-1).lo(1,1).hi(S[0]-2,S[1]-2),u.pick(-1,-1,0).lo(1,1).hi(S[0]-2,S[1]-2),u.pick(-1,-1,1).lo(1,1).hi(S[0]-2,S[1]-2)),S[1]>2&&(A(m.pick(0,-1).lo(1).hi(S[1]-2),u.pick(0,-1,1).lo(1).hi(S[1]-2)),y(u.pick(0,-1,0).lo(1).hi(S[1]-2))),S[1]>2&&(A(m.pick(S[0]-1,-1).lo(1).hi(S[1]-2),u.pick(S[0]-1,-1,1).lo(1).hi(S[1]-2)),y(u.pick(S[0]-1,-1,0).lo(1).hi(S[1]-2))),S[0]>2&&(A(m.pick(-1,0).lo(1).hi(S[0]-2),u.pick(-1,0,0).lo(1).hi(S[0]-2)),y(u.pick(-1,0,1).lo(1).hi(S[0]-2))),S[0]>2&&(A(m.pick(-1,S[1]-1).lo(1).hi(S[0]-2),u.pick(-1,S[1]-1,0).lo(1).hi(S[0]-2)),y(u.pick(-1,S[1]-1,1).lo(1).hi(S[0]-2))),u.set(0,0,0,0),u.set(0,0,1,0),u.set(S[0]-1,0,0,0),u.set(S[0]-1,0,1,0),u.set(0,S[1]-1,0,0),u.set(0,S[1]-1,1,0),u.set(S[0]-1,S[1]-1,0,0),u.set(S[0]-1,S[1]-1,1,0),u}}function x(k){var y=k.join(),S=h[y];if(S)return S;for(var A=k.length,L=[_,a],u=1;u<=A;++u)L.push(c(u));var m=f,S=m.apply(void 0,L);return h[y]=S,S}v.exports=function(k,y,A){if(Array.isArray(A)||(typeof A=="string"?A=e(y.dimension,A):A=e(y.dimension,"clamp")),y.size===0)return k;if(y.dimension===0)return k.set(0),k;var L=x(A);return L(k,y)}},4317:function(v){function d(s,o){var p=Math.floor(o),b=o-p,h=0<=p&&p<s.shape[0],_=0<=p+1&&p+1<s.shape[0],a=h?+s.get(p):0,c=_?+s.get(p+1):0;return(1-b)*a+b*c}function r(s,o,p){var b=Math.floor(o),h=o-b,_=0<=b&&b<s.shape[0],a=0<=b+1&&b+1<s.shape[0],c=Math.floor(p),f=p-c,x=0<=c&&c<s.shape[1],k=0<=c+1&&c+1<s.shape[1],y=_&&x?s.get(b,c):0,A=_&&k?s.get(b,c+1):0,L=a&&x?s.get(b+1,c):0,u=a&&k?s.get(b+1,c+1):0;return(1-f)*((1-h)*y+h*L)+f*((1-h)*A+h*u)}function e(s,o,p,b){var h=Math.floor(o),_=o-h,a=0<=h&&h<s.shape[0],c=0<=h+1&&h+1<s.shape[0],f=Math.floor(p),x=p-f,k=0<=f&&f<s.shape[1],y=0<=f+1&&f+1<s.shape[1],A=Math.floor(b),L=b-A,u=0<=A&&A<s.shape[2],m=0<=A+1&&A+1<s.shape[2],S=a&&k&&u?s.get(h,f,A):0,w=a&&y&&u?s.get(h,f+1,A):0,I=c&&k&&u?s.get(h+1,f,A):0,O=c&&y&&u?s.get(h+1,f+1,A):0,D=a&&k&&m?s.get(h,f,A+1):0,P=a&&y&&m?s.get(h,f+1,A+1):0,F=c&&k&&m?s.get(h+1,f,A+1):0,R=c&&y&&m?s.get(h+1,f+1,A+1):0;return(1-L)*((1-x)*((1-_)*S+_*I)+x*((1-_)*w+_*O))+L*((1-x)*((1-_)*D+_*F)+x*((1-_)*P+_*R))}function l(s){var o=s.shape.length|0,p=new Array(o),b=new Array(o),h=new Array(o),_=new Array(o),a,c;for(a=0;a<o;++a)c=+arguments[a+1],p[a]=Math.floor(c),b[a]=c-p[a],h[a]=0<=p[a]&&p[a]<s.shape[a],_[a]=0<=p[a]+1&&p[a]+1<s.shape[a];var f=0,x,k,y;t:for(a=0;a<1<<o;++a){for(k=1,y=s.offset,x=0;x<o;++x)if(a&1<<x){if(!_[x])continue t;k*=b[x],y+=s.stride[x]*(p[x]+1)}else{if(!h[x])continue t;k*=1-b[x],y+=s.stride[x]*p[x]}f+=k*s.data[y]}return f}function n(s,o,p,b){switch(s.shape.length){case 0:return 0;case 1:return d(s,o);case 2:return r(s,o,p);case 3:return e(s,o,p,b);default:return l.apply(void 0,arguments)}}v.exports=n,v.exports.d1=d,v.exports.d2=r,v.exports.d3=e},5298:function(v,d){var r={"float64,2,1,0":function(){return function(b,h,_,a,c){var f=b[0],x=b[1],k=b[2],y=_[0],A=_[1],L=_[2];a|=0;var u=0,m=0,S=0,w=L,I=A-k*L,O=y-x*A;for(S=0;S<f;++S){for(m=0;m<x;++m){for(u=0;u<k;++u)h[a]/=c,a+=w;a+=I}a+=O}}},"uint8,2,0,1,float64,2,1,0":function(){return function(b,h,_,a,c,f,x,k){var y=b[0],A=b[1],L=b[2],u=_[0],m=_[1],S=_[2],w=f[0],I=f[1],O=f[2];a|=0,x|=0;for(var D=a,P=x,F=b[0]|0;F>0;){F<64?(y=F,F=0):(y=64,F-=64);for(var R=b[1]|0;R>0;){R<64?(A=R,R=0):(A=64,R-=64),a=D+F*u+R*m,x=P+F*w+R*I;var B=0,N=0,G=0,X=S,J=u-L*S,it=m-y*u,nt=O,q=w-L*O,Z=I-y*w;for(G=0;G<A;++G){for(N=0;N<y;++N){for(B=0;B<L;++B)h[a]=c[x]*k,a+=X,x+=nt;a+=J,x+=q}a+=it,x+=Z}}}}},"float32,1,0,float32,1,0":function(){return function(b,h,_,a,c,f,x){var k=b[0],y=b[1],A=_[0],L=_[1],u=f[0],m=f[1];a|=0,x|=0;var S=0,w=0,I=L,O=A-y*L,D=m,P=u-y*m;for(w=0;w<k;++w){for(S=0;S<y;++S)h[a]=c[x],a+=I,x+=D;a+=O,x+=P}}},"float32,1,0,float32,0,1":function(){return function(b,h,_,a,c,f,x){var k=b[0],y=b[1],A=_[0],L=_[1],u=f[0],m=f[1];a|=0,x|=0;for(var S=a,w=x,I=b[1]|0;I>0;){I<64?(y=I,I=0):(y=64,I-=64);for(var O=b[0]|0;O>0;){O<64?(k=O,O=0):(k=64,O-=64),a=S+I*L+O*A,x=w+I*m+O*u;var D=0,P=0,F=L,R=A-y*L,B=m,N=u-y*m;for(P=0;P<k;++P){for(D=0;D<y;++D)h[a]=c[x],a+=F,x+=B;a+=R,x+=N}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(b,h,_,a,c,f,x){var k=b[0],y=b[1],A=b[2],L=_[0],u=_[1],m=_[2],S=f[0],w=f[1],I=f[2];a|=0,x|=0;for(var O=a,D=x,P=b[2]|0;P>0;){P<64?(A=P,P=0):(A=64,P-=64);for(var F=b[0]|0;F>0;){F<64?(k=F,F=0):(k=64,F-=64);for(var R=b[1]|0;R>0;){R<64?(y=R,R=0):(y=64,R-=64),a=O+P*m+F*L+R*u,x=D+P*I+F*S+R*w;var B=0,N=0,G=0,X=m,J=L-A*m,it=u-k*L,nt=I,q=S-A*I,Z=w-k*S;for(G=0;G<y;++G){for(N=0;N<k;++N){for(B=0;B<A;++B)h[a]=c[x],a+=X,x+=nt;a+=J,x+=q}a+=it,x+=Z}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(b,h,_,a,c,f,x){var k=b[0],y=b[1],A=b[2],L=_[0],u=_[1],m=_[2],S=f[0],w=f[1],I=f[2];a|=0,x|=0;var O=0,D=0,P=0,F=m,R=L-A*m,B=u-k*L,N=I,G=S-A*I,X=w-k*S;for(P=0;P<y;++P){for(D=0;D<k;++D){for(O=0;O<A;++O)h[a]=c[x],a+=F,x+=N;a+=R,x+=G}a+=B,x+=X}}}};function e(b,h){var _=h.join(","),a=r[_];return a()}var l=e,n={mul:function(b){var h={};return function(_,a,c){var f=_.dtype,x=_.order,k=a.dtype,y=a.order,A=c.dtype,L=c.order,u=[f,x.join(),k,y.join(),A,L.join()].join(),m=h[u];return m||(h[u]=m=b([f,x,k,y,A,L])),m(_.shape.slice(0),_.data,_.stride,_.offset|0,a.data,a.stride,a.offset|0,c.data,c.stride,c.offset|0)}},muls:function(b){var h={};return function(_,a,c){var f=_.dtype,x=_.order,k=a.dtype,y=a.order,A=[f,x.join(),k,y.join()].join(),L=h[A];return L||(h[A]=L=b([f,x,k,y])),L(_.shape.slice(0),_.data,_.stride,_.offset|0,a.data,a.stride,a.offset|0,c)}},mulseq:function(b){var h={};return function(_,a){var c=_.dtype,f=_.order,x=[c,f.join()].join(),k=h[x];return k||(h[x]=k=b([c,f])),k(_.shape.slice(0),_.data,_.stride,_.offset|0,a)}},div:function(b){var h={};return function(_,a,c){var f=_.dtype,x=_.order,k=a.dtype,y=a.order,A=c.dtype,L=c.order,u=[f,x.join(),k,y.join(),A,L.join()].join(),m=h[u];return m||(h[u]=m=b([f,x,k,y,A,L])),m(_.shape.slice(0),_.data,_.stride,_.offset|0,a.data,a.stride,a.offset|0,c.data,c.stride,c.offset|0)}},divs:function(b){var h={};return function(_,a,c){var f=_.dtype,x=_.order,k=a.dtype,y=a.order,A=[f,x.join(),k,y.join()].join(),L=h[A];return L||(h[A]=L=b([f,x,k,y])),L(_.shape.slice(0),_.data,_.stride,_.offset|0,a.data,a.stride,a.offset|0,c)}},divseq:function(b){var h={};return function(_,a){var c=_.dtype,f=_.order,x=[c,f.join()].join(),k=h[x];return k||(h[x]=k=b([c,f])),k(_.shape.slice(0),_.data,_.stride,_.offset|0,a)}},assign:function(b){var h={};return function(_,a){var c=_.dtype,f=_.order,x=a.dtype,k=a.order,y=[c,f.join(),x,k.join()].join(),A=h[y];return A||(h[y]=A=b([c,f,x,k])),A(_.shape.slice(0),_.data,_.stride,_.offset|0,a.data,a.stride,a.offset|0)}}};function s(b){var h=n[b.funcName];return h(l.bind(void 0,b))}function o(b){return s({funcName:b.funcName})}var p={mul:"*",div:"/"};(function(){for(var b in p)d[b]=o({funcName:b}),d[b+"s"]=o({funcName:b+"s"}),d[b+"seq"]=o({funcName:b+"seq"})})(),d.assign=o({funcName:"assign"})},9994:function(v,d,r){var e=r(9618),l=r(8277);v.exports=function(n,s){for(var o=[],p=n,b=1;Array.isArray(p);)o.push(p.length),b*=p.length,p=p[0];return o.length===0?e():(s||(s=e(new Float64Array(b),o)),l(s,n),s)}},8277:function(v){function d(){return function(o,p,b,h,_){var a=o[0],c=o[1],f=o[2],x=b[0],k=b[1],y=b[2],A=[0,0,0];h|=0;var L=0,u=0,m=0,S=y,w=k-f*y,I=x-c*k;for(m=0;m<a;++m){for(u=0;u<c;++u){for(L=0;L<f;++L){{var O=_,D;for(D=0;D<A.length-1;++D)O=O[A[D]];p[h]=O[A[A.length-1]]}h+=S,++A[2]}h+=w,A[2]-=f,++A[1]}h+=I,A[1]-=c,++A[0]}}}function r(){return d()}var e=r;function l(o){var p={};return function(b,h){var _=b.dtype,a=b.order,c=[_,a.join()].join(),f=p[c];return f||(p[c]=f=o([_,a])),f(b.shape.slice(0),b.data,b.stride,b.offset|0,h)}}function n(o){return l(e.bind(void 0,o))}function s(o){return n({funcName:o.funcName})}v.exports=s({funcName:"convert"})},7640:function(v,d,r){var e=r(1888);function l(_){switch(_){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var n={"uint32,1,0":function(_,a){return function(c,f,x,k,y,A,L,u,m,S,w){var I,O,D,P=c*y+k,F,R=_(u),B,N,G,X;for(I=c+1;I<=f;++I){for(O=I,P+=y,D=P,B=0,N=P,F=0;F<u;++F)R[B++]=x[N],N+=m;t:for(;O-- >c;){B=0,N=D-y;e:for(F=0;F<u;++F){if(G=x[N],X=R[B],G<X)break t;if(G>X)break e;N+=S,B+=w}for(B=D,N=D-y,F=0;F<u;++F)x[B]=x[N],B+=m,N+=m;D-=y}for(B=D,N=0,F=0;F<u;++F)x[B]=R[N++],B+=m}a(R)}}};function s(_,a){var c=l(a),f=[a,_].join(","),x=n[f];return c?x(c[0],c[1]):x()}var o={"uint32,1,0":function(_,a,c){return function f(x,k,y,A,L,u,m,S,w,I,O){var D=(k-x+1)/6|0,P=x+D,F=k-D,R=x+k>>1,B=R-D,N=R+D,G=P,X=B,J=R,it=N,nt=F,q=x+1,Z=k-1,$=!0,V,rt,ot,H,Y,at,et,ct,ft,yt=0,xt=0,Ct=0,gt,mt,vt,At,Ot,It,St,Bt,re,Yt,he,Zt,ae,oe,ce,ue,ye=S,Tt=a(ye),Ft=a(ye);mt=L*G,vt=L*X,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=G,G=X,X=rt;break t}if(Ct<0)break t;ue+=I}mt=L*it,vt=L*nt,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=it,it=nt,nt=rt;break t}if(Ct<0)break t;ue+=I}mt=L*G,vt=L*J,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=G,G=J,J=rt;break t}if(Ct<0)break t;ue+=I}mt=L*X,vt=L*J,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=X,X=J,J=rt;break t}if(Ct<0)break t;ue+=I}mt=L*G,vt=L*it,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=G,G=it,it=rt;break t}if(Ct<0)break t;ue+=I}mt=L*J,vt=L*it,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=J,J=it,it=rt;break t}if(Ct<0)break t;ue+=I}mt=L*X,vt=L*nt,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=X,X=nt,nt=rt;break t}if(Ct<0)break t;ue+=I}mt=L*X,vt=L*J,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=X,X=J,J=rt;break t}if(Ct<0)break t;ue+=I}mt=L*it,vt=L*nt,ue=A;t:for(gt=0;gt<S;++gt){if(et=mt+ue,ct=vt+ue,Ct=y[et]-y[ct],Ct>0){rt=it,it=nt,nt=rt;break t}if(Ct<0)break t;ue+=I}for(mt=L*G,vt=L*X,At=L*J,Ot=L*it,It=L*nt,St=L*P,Bt=L*R,re=L*F,ce=0,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,ft=At+ue,Yt=Ot+ue,he=It+ue,Zt=St+ue,ae=Bt+ue,oe=re+ue,Tt[ce]=y[ct],Ft[ce]=y[Yt],$=$&&Tt[ce]===Ft[ce],ot=y[et],H=y[ft],Y=y[he],y[Zt]=ot,y[ae]=H,y[oe]=Y,++ce,ue+=w;for(mt=L*B,vt=L*x,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,y[et]=y[ct],ue+=w;for(mt=L*N,vt=L*k,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,y[et]=y[ct],ue+=w;if($)for(at=q;at<=Z;++at){et=A+at*L,ce=0;t:for(gt=0;gt<S;++gt){if(Ct=y[et]-Tt[ce],Ct!==0)break t;ce+=O,et+=I}if(Ct!==0)if(Ct<0){if(at!==q)for(mt=L*at,vt=L*q,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,V=y[et],y[et]=y[ct],y[ct]=V,ue+=w;++q}else for(;;){et=A+Z*L,ce=0;t:for(gt=0;gt<S;++gt){if(Ct=y[et]-Tt[ce],Ct!==0)break t;ce+=O,et+=I}if(Ct>0)Z--;else if(Ct<0){for(mt=L*at,vt=L*q,At=L*Z,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,ft=At+ue,V=y[et],y[et]=y[ct],y[ct]=y[ft],y[ft]=V,ue+=w;++q,--Z;break}else{for(mt=L*at,vt=L*Z,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,V=y[et],y[et]=y[ct],y[ct]=V,ue+=w;--Z;break}}}else for(at=q;at<=Z;++at){et=A+at*L,ce=0;t:for(gt=0;gt<S;++gt){if(yt=y[et]-Tt[ce],yt!==0)break t;ce+=O,et+=I}if(yt<0){if(at!==q)for(mt=L*at,vt=L*q,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,V=y[et],y[et]=y[ct],y[ct]=V,ue+=w;++q}else{et=A+at*L,ce=0;t:for(gt=0;gt<S;++gt){if(xt=y[et]-Ft[ce],xt!==0)break t;ce+=O,et+=I}if(xt>0)for(;;){et=A+Z*L,ce=0;t:for(gt=0;gt<S;++gt){if(Ct=y[et]-Ft[ce],Ct!==0)break t;ce+=O,et+=I}if(Ct>0){if(--Z<at)break;continue}else{et=A+Z*L,ce=0;t:for(gt=0;gt<S;++gt){if(Ct=y[et]-Tt[ce],Ct!==0)break t;ce+=O,et+=I}if(Ct<0){for(mt=L*at,vt=L*q,At=L*Z,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,ft=At+ue,V=y[et],y[et]=y[ct],y[ct]=y[ft],y[ft]=V,ue+=w;++q,--Z}else{for(mt=L*at,vt=L*Z,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,V=y[et],y[et]=y[ct],y[ct]=V,ue+=w;--Z}break}}}}for(mt=L*x,vt=L*(q-1),ce=0,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,y[et]=y[ct],y[ct]=Tt[ce],++ce,ue+=w;for(mt=L*k,vt=L*(Z+1),ce=0,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,y[et]=y[ct],y[ct]=Ft[ce],++ce,ue+=w;if(q-2-x<=32?_(x,q-2,y,A,L,u,m,S,w,I,O):f(x,q-2,y,A,L,u,m,S,w,I,O),k-(Z+2)<=32?_(Z+2,k,y,A,L,u,m,S,w,I,O):f(Z+2,k,y,A,L,u,m,S,w,I,O),$){c(Tt),c(Ft);return}if(q<P&&Z>F){t:for(;;){for(et=A+q*L,ce=0,ue=A,gt=0;gt<S;++gt){if(y[et]!==Tt[ce])break t;++ce,et+=w}++q}t:for(;;){for(et=A+Z*L,ce=0,ue=A,gt=0;gt<S;++gt){if(y[et]!==Ft[ce])break t;++ce,et+=w}--Z}for(at=q;at<=Z;++at){et=A+at*L,ce=0;t:for(gt=0;gt<S;++gt){if(yt=y[et]-Tt[ce],yt!==0)break t;ce+=O,et+=I}if(yt===0){if(at!==q)for(mt=L*at,vt=L*q,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,V=y[et],y[et]=y[ct],y[ct]=V,ue+=w;++q}else{et=A+at*L,ce=0;t:for(gt=0;gt<S;++gt){if(xt=y[et]-Ft[ce],xt!==0)break t;ce+=O,et+=I}if(xt===0)for(;;){et=A+Z*L,ce=0;t:for(gt=0;gt<S;++gt){if(Ct=y[et]-Ft[ce],Ct!==0)break t;ce+=O,et+=I}if(Ct===0){if(--Z<at)break;continue}else{et=A+Z*L,ce=0;t:for(gt=0;gt<S;++gt){if(Ct=y[et]-Tt[ce],Ct!==0)break t;ce+=O,et+=I}if(Ct<0){for(mt=L*at,vt=L*q,At=L*Z,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,ft=At+ue,V=y[et],y[et]=y[ct],y[ct]=y[ft],y[ft]=V,ue+=w;++q,--Z}else{for(mt=L*at,vt=L*Z,ue=A,gt=0;gt<S;++gt)et=mt+ue,ct=vt+ue,V=y[et],y[et]=y[ct],y[ct]=V,ue+=w;--Z}break}}}}}c(Tt),c(Ft),Z-q<=32?_(q,Z,y,A,L,u,m,S,w,I,O):f(q,Z,y,A,L,u,m,S,w,I,O)}}};function p(_,a,c){var f=l(a),x=[a,_].join(","),k=o[x];return _.length>1&&f?k(c,f[0],f[1]):k(c)}var b={"uint32,1,0":function(_,a){return function(c){var f=c.data,x=c.offset|0,k=c.shape,y=c.stride,A=y[0]|0,L=k[0]|0,u=y[1]|0,m=k[1]|0,S=u,w=u,I=1;L<=32?_(0,L-1,f,x,A,u,L,m,S,w,I):a(0,L-1,f,x,A,u,L,m,S,w,I)}}};function h(_,a){var c=[a,_].join(","),f=b[c],x=s(_,a),k=p(_,a,x);return f(x,k)}v.exports=h},446:function(v,d,r){var e=r(7640),l={};function n(s){var o=s.order,p=s.dtype,b=[o,p],h=b.join(":"),_=l[h];return _||(l[h]=_=e(o,p)),_(s),s}v.exports=n},9618:function(v,d,r){var e=r(7163),l=typeof Float64Array<"u";function n(a,c){return a[0]-c[0]}function s(){var a=this.stride,c=new Array(a.length),f;for(f=0;f<c.length;++f)c[f]=[Math.abs(a[f]),f];c.sort(n);var x=new Array(c.length);for(f=0;f<x.length;++f)x[f]=c[f][1];return x}var o={T:function(a){function c(x){this.data=x}var f=c.prototype;return f.dtype=a,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new c(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(x){return new c(x)}},0:function(a,c){function f(k,y){this.data=k,this.offset=y}var x=f.prototype;return x.dtype=a,x.index=function(){return this.offset},x.dimension=0,x.size=1,x.shape=x.stride=x.order=[],x.lo=x.hi=x.transpose=x.step=function(){return new f(this.data,this.offset)},x.pick=function(){return c(this.data)},x.valueOf=x.get=function(){return a==="generic"?this.data.get(this.offset):this.data[this.offset]},x.set=function(k){return a==="generic"?this.data.set(this.offset,k):this.data[this.offset]=k},function(k,y,A,L){return new f(k,L)}},1:function(a,c,f){function x(y,A,L,u){this.data=y,this.shape=[A],this.stride=[L],this.offset=u|0}var k=x.prototype;return k.dtype=a,k.dimension=1,Object.defineProperty(k,"size",{get:function(){return this.shape[0]}}),k.order=[0],k.set=function(y,A){return a==="generic"?this.data.set(this.offset+this.stride[0]*y,A):this.data[this.offset+this.stride[0]*y]=A},k.get=function(y){return a==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},k.index=function(y){return this.offset+this.stride[0]*y},k.hi=function(y){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,this.stride[0],this.offset)},k.lo=function(y){var A=this.offset,L=0,u=this.shape[0],m=this.stride[0];return typeof y=="number"&&y>=0&&(L=y|0,A+=m*L,u-=L),new x(this.data,u,m,A)},k.step=function(y){var A=this.shape[0],L=this.stride[0],u=this.offset,m=0,S=Math.ceil;return typeof y=="number"&&(m=y|0,m<0?(u+=L*(A-1),A=S(-A/m)):A=S(A/m),L*=m),new x(this.data,A,L,u)},k.transpose=function(y){y=y===void 0?0:y|0;var A=this.shape,L=this.stride;return new x(this.data,A[y],L[y],this.offset)},k.pick=function(y){var A=[],L=[],u=this.offset;typeof y=="number"&&y>=0?u=u+this.stride[0]*y|0:(A.push(this.shape[0]),L.push(this.stride[0]));var m=c[A.length+1];return m(this.data,A,L,u)},function(y,A,L,u){return new x(y,A[0],L[0],u)}},2:function(a,c,f){function x(y,A,L,u,m,S){this.data=y,this.shape=[A,L],this.stride=[u,m],this.offset=S|0}var k=x.prototype;return k.dtype=a,k.dimension=2,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(k,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),k.set=function(y,A,L){return a==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*A,L):this.data[this.offset+this.stride[0]*y+this.stride[1]*A]=L},k.get=function(y,A){return a==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*A):this.data[this.offset+this.stride[0]*y+this.stride[1]*A]},k.index=function(y,A){return this.offset+this.stride[0]*y+this.stride[1]*A},k.hi=function(y,A){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof A!="number"||A<0?this.shape[1]:A|0,this.stride[0],this.stride[1],this.offset)},k.lo=function(y,A){var L=this.offset,u=0,m=this.shape[0],S=this.shape[1],w=this.stride[0],I=this.stride[1];return typeof y=="number"&&y>=0&&(u=y|0,L+=w*u,m-=u),typeof A=="number"&&A>=0&&(u=A|0,L+=I*u,S-=u),new x(this.data,m,S,w,I,L)},k.step=function(y,A){var L=this.shape[0],u=this.shape[1],m=this.stride[0],S=this.stride[1],w=this.offset,I=0,O=Math.ceil;return typeof y=="number"&&(I=y|0,I<0?(w+=m*(L-1),L=O(-L/I)):L=O(L/I),m*=I),typeof A=="number"&&(I=A|0,I<0?(w+=S*(u-1),u=O(-u/I)):u=O(u/I),S*=I),new x(this.data,L,u,m,S,w)},k.transpose=function(y,A){y=y===void 0?0:y|0,A=A===void 0?1:A|0;var L=this.shape,u=this.stride;return new x(this.data,L[y],L[A],u[y],u[A],this.offset)},k.pick=function(y,A){var L=[],u=[],m=this.offset;typeof y=="number"&&y>=0?m=m+this.stride[0]*y|0:(L.push(this.shape[0]),u.push(this.stride[0])),typeof A=="number"&&A>=0?m=m+this.stride[1]*A|0:(L.push(this.shape[1]),u.push(this.stride[1]));var S=c[L.length+1];return S(this.data,L,u,m)},function(y,A,L,u){return new x(y,A[0],A[1],L[0],L[1],u)}},3:function(a,c,f){function x(y,A,L,u,m,S,w,I){this.data=y,this.shape=[A,L,u],this.stride=[m,S,w],this.offset=I|0}var k=x.prototype;return k.dtype=a,k.dimension=3,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(k,"order",{get:function(){var y=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),L=Math.abs(this.stride[2]);return y>A?A>L?[2,1,0]:y>L?[1,2,0]:[1,0,2]:y>L?[2,0,1]:L>A?[0,1,2]:[0,2,1]}}),k.set=function(y,A,L,u){return a==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L,u):this.data[this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L]=u},k.get=function(y,A,L){return a==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L):this.data[this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L]},k.index=function(y,A,L){return this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L},k.hi=function(y,A,L){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof L!="number"||L<0?this.shape[2]:L|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},k.lo=function(y,A,L){var u=this.offset,m=0,S=this.shape[0],w=this.shape[1],I=this.shape[2],O=this.stride[0],D=this.stride[1],P=this.stride[2];return typeof y=="number"&&y>=0&&(m=y|0,u+=O*m,S-=m),typeof A=="number"&&A>=0&&(m=A|0,u+=D*m,w-=m),typeof L=="number"&&L>=0&&(m=L|0,u+=P*m,I-=m),new x(this.data,S,w,I,O,D,P,u)},k.step=function(y,A,L){var u=this.shape[0],m=this.shape[1],S=this.shape[2],w=this.stride[0],I=this.stride[1],O=this.stride[2],D=this.offset,P=0,F=Math.ceil;return typeof y=="number"&&(P=y|0,P<0?(D+=w*(u-1),u=F(-u/P)):u=F(u/P),w*=P),typeof A=="number"&&(P=A|0,P<0?(D+=I*(m-1),m=F(-m/P)):m=F(m/P),I*=P),typeof L=="number"&&(P=L|0,P<0?(D+=O*(S-1),S=F(-S/P)):S=F(S/P),O*=P),new x(this.data,u,m,S,w,I,O,D)},k.transpose=function(y,A,L){y=y===void 0?0:y|0,A=A===void 0?1:A|0,L=L===void 0?2:L|0;var u=this.shape,m=this.stride;return new x(this.data,u[y],u[A],u[L],m[y],m[A],m[L],this.offset)},k.pick=function(y,A,L){var u=[],m=[],S=this.offset;typeof y=="number"&&y>=0?S=S+this.stride[0]*y|0:(u.push(this.shape[0]),m.push(this.stride[0])),typeof A=="number"&&A>=0?S=S+this.stride[1]*A|0:(u.push(this.shape[1]),m.push(this.stride[1])),typeof L=="number"&&L>=0?S=S+this.stride[2]*L|0:(u.push(this.shape[2]),m.push(this.stride[2]));var w=c[u.length+1];return w(this.data,u,m,S)},function(y,A,L,u){return new x(y,A[0],A[1],A[2],L[0],L[1],L[2],u)}},4:function(a,c,f){function x(y,A,L,u,m,S,w,I,O,D){this.data=y,this.shape=[A,L,u,m],this.stride=[S,w,I,O],this.offset=D|0}var k=x.prototype;return k.dtype=a,k.dimension=4,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(k,"order",{get:f}),k.set=function(y,A,L,u,m){return a==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u,m):this.data[this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u]=m},k.get=function(y,A,L,u){return a==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u):this.data[this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u]},k.index=function(y,A,L,u){return this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u},k.hi=function(y,A,L,u){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof L!="number"||L<0?this.shape[2]:L|0,typeof u!="number"||u<0?this.shape[3]:u|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},k.lo=function(y,A,L,u){var m=this.offset,S=0,w=this.shape[0],I=this.shape[1],O=this.shape[2],D=this.shape[3],P=this.stride[0],F=this.stride[1],R=this.stride[2],B=this.stride[3];return typeof y=="number"&&y>=0&&(S=y|0,m+=P*S,w-=S),typeof A=="number"&&A>=0&&(S=A|0,m+=F*S,I-=S),typeof L=="number"&&L>=0&&(S=L|0,m+=R*S,O-=S),typeof u=="number"&&u>=0&&(S=u|0,m+=B*S,D-=S),new x(this.data,w,I,O,D,P,F,R,B,m)},k.step=function(y,A,L,u){var m=this.shape[0],S=this.shape[1],w=this.shape[2],I=this.shape[3],O=this.stride[0],D=this.stride[1],P=this.stride[2],F=this.stride[3],R=this.offset,B=0,N=Math.ceil;return typeof y=="number"&&(B=y|0,B<0?(R+=O*(m-1),m=N(-m/B)):m=N(m/B),O*=B),typeof A=="number"&&(B=A|0,B<0?(R+=D*(S-1),S=N(-S/B)):S=N(S/B),D*=B),typeof L=="number"&&(B=L|0,B<0?(R+=P*(w-1),w=N(-w/B)):w=N(w/B),P*=B),typeof u=="number"&&(B=u|0,B<0?(R+=F*(I-1),I=N(-I/B)):I=N(I/B),F*=B),new x(this.data,m,S,w,I,O,D,P,F,R)},k.transpose=function(y,A,L,u){y=y===void 0?0:y|0,A=A===void 0?1:A|0,L=L===void 0?2:L|0,u=u===void 0?3:u|0;var m=this.shape,S=this.stride;return new x(this.data,m[y],m[A],m[L],m[u],S[y],S[A],S[L],S[u],this.offset)},k.pick=function(y,A,L,u){var m=[],S=[],w=this.offset;typeof y=="number"&&y>=0?w=w+this.stride[0]*y|0:(m.push(this.shape[0]),S.push(this.stride[0])),typeof A=="number"&&A>=0?w=w+this.stride[1]*A|0:(m.push(this.shape[1]),S.push(this.stride[1])),typeof L=="number"&&L>=0?w=w+this.stride[2]*L|0:(m.push(this.shape[2]),S.push(this.stride[2])),typeof u=="number"&&u>=0?w=w+this.stride[3]*u|0:(m.push(this.shape[3]),S.push(this.stride[3]));var I=c[m.length+1];return I(this.data,m,S,w)},function(y,A,L,u){return new x(y,A[0],A[1],A[2],A[3],L[0],L[1],L[2],L[3],u)}},5:function(a,c,f){function x(y,A,L,u,m,S,w,I,O,D,P,F){this.data=y,this.shape=[A,L,u,m,S],this.stride=[w,I,O,D,P],this.offset=F|0}var k=x.prototype;return k.dtype=a,k.dimension=5,Object.defineProperty(k,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(k,"order",{get:f}),k.set=function(y,A,L,u,m,S){return a==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u+this.stride[4]*m,S):this.data[this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u+this.stride[4]*m]=S},k.get=function(y,A,L,u,m){return a==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u+this.stride[4]*m):this.data[this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u+this.stride[4]*m]},k.index=function(y,A,L,u,m){return this.offset+this.stride[0]*y+this.stride[1]*A+this.stride[2]*L+this.stride[3]*u+this.stride[4]*m},k.hi=function(y,A,L,u,m){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof L!="number"||L<0?this.shape[2]:L|0,typeof u!="number"||u<0?this.shape[3]:u|0,typeof m!="number"||m<0?this.shape[4]:m|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},k.lo=function(y,A,L,u,m){var S=this.offset,w=0,I=this.shape[0],O=this.shape[1],D=this.shape[2],P=this.shape[3],F=this.shape[4],R=this.stride[0],B=this.stride[1],N=this.stride[2],G=this.stride[3],X=this.stride[4];return typeof y=="number"&&y>=0&&(w=y|0,S+=R*w,I-=w),typeof A=="number"&&A>=0&&(w=A|0,S+=B*w,O-=w),typeof L=="number"&&L>=0&&(w=L|0,S+=N*w,D-=w),typeof u=="number"&&u>=0&&(w=u|0,S+=G*w,P-=w),typeof m=="number"&&m>=0&&(w=m|0,S+=X*w,F-=w),new x(this.data,I,O,D,P,F,R,B,N,G,X,S)},k.step=function(y,A,L,u,m){var S=this.shape[0],w=this.shape[1],I=this.shape[2],O=this.shape[3],D=this.shape[4],P=this.stride[0],F=this.stride[1],R=this.stride[2],B=this.stride[3],N=this.stride[4],G=this.offset,X=0,J=Math.ceil;return typeof y=="number"&&(X=y|0,X<0?(G+=P*(S-1),S=J(-S/X)):S=J(S/X),P*=X),typeof A=="number"&&(X=A|0,X<0?(G+=F*(w-1),w=J(-w/X)):w=J(w/X),F*=X),typeof L=="number"&&(X=L|0,X<0?(G+=R*(I-1),I=J(-I/X)):I=J(I/X),R*=X),typeof u=="number"&&(X=u|0,X<0?(G+=B*(O-1),O=J(-O/X)):O=J(O/X),B*=X),typeof m=="number"&&(X=m|0,X<0?(G+=N*(D-1),D=J(-D/X)):D=J(D/X),N*=X),new x(this.data,S,w,I,O,D,P,F,R,B,N,G)},k.transpose=function(y,A,L,u,m){y=y===void 0?0:y|0,A=A===void 0?1:A|0,L=L===void 0?2:L|0,u=u===void 0?3:u|0,m=m===void 0?4:m|0;var S=this.shape,w=this.stride;return new x(this.data,S[y],S[A],S[L],S[u],S[m],w[y],w[A],w[L],w[u],w[m],this.offset)},k.pick=function(y,A,L,u,m){var S=[],w=[],I=this.offset;typeof y=="number"&&y>=0?I=I+this.stride[0]*y|0:(S.push(this.shape[0]),w.push(this.stride[0])),typeof A=="number"&&A>=0?I=I+this.stride[1]*A|0:(S.push(this.shape[1]),w.push(this.stride[1])),typeof L=="number"&&L>=0?I=I+this.stride[2]*L|0:(S.push(this.shape[2]),w.push(this.stride[2])),typeof u=="number"&&u>=0?I=I+this.stride[3]*u|0:(S.push(this.shape[3]),w.push(this.stride[3])),typeof m=="number"&&m>=0?I=I+this.stride[4]*m|0:(S.push(this.shape[4]),w.push(this.stride[4]));var O=c[S.length+1];return O(this.data,S,w,I)},function(y,A,L,u){return new x(y,A[0],A[1],A[2],A[3],A[4],L[0],L[1],L[2],L[3],L[4],u)}}};function p(a,c){var f=c===-1?"T":String(c),x=o[f];return c===-1?x(a):c===0?x(a,h[a][0]):x(a,h[a],s)}function b(a){if(e(a))return"buffer";if(l)switch(Object.prototype.toString.call(a)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(a)?"array":"generic"}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function _(a,c,f,x){if(a===void 0){var m=h.array[0];return m([])}else typeof a=="number"&&(a=[a]);c===void 0&&(c=[a.length]);var k=c.length;if(f===void 0){f=new Array(k);for(var y=k-1,A=1;y>=0;--y)f[y]=A,A*=c[y]}if(x===void 0){x=0;for(var y=0;y<k;++y)f[y]<0&&(x-=(c[y]-1)*f[y])}for(var L=b(a),u=h[L];u.length<=k+1;)u.push(p(L,u.length-1));var m=u[k+1];return m(a,c,f,x)}v.exports=_},1278:function(v,d,r){var e=r(2361),l=Math.pow(2,-1074),n=-1>>>0;v.exports=s;function s(o,p){if(isNaN(o)||isNaN(p))return NaN;if(o===p)return o;if(o===0)return p<0?-l:l;var b=e.hi(o),h=e.lo(o);return p>o==o>0?h===n?(b+=1,h=0):h+=1:h===0?(h=n,b-=1):h-=1,e.pack(h,b)}},8406:function(v,d){var r=1e-6,e=1e-6;d.vertexNormals=function(l,n,s){for(var o=n.length,p=new Array(o),b=s===void 0?r:s,h=0;h<o;++h)p[h]=[0,0,0];for(var h=0;h<l.length;++h)for(var _=l[h],a=0,c=_[_.length-1],f=_[0],x=0;x<_.length;++x){a=c,c=f,f=_[(x+1)%_.length];for(var k=n[a],y=n[c],A=n[f],L=new Array(3),u=0,m=new Array(3),S=0,w=0;w<3;++w)L[w]=k[w]-y[w],u+=L[w]*L[w],m[w]=A[w]-y[w],S+=m[w]*m[w];if(u*S>b)for(var I=p[c],O=1/Math.sqrt(u*S),w=0;w<3;++w){var D=(w+1)%3,P=(w+2)%3;I[w]+=O*(m[D]*L[P]-m[P]*L[D])}}for(var h=0;h<o;++h){for(var I=p[h],F=0,w=0;w<3;++w)F+=I[w]*I[w];if(F>b)for(var O=1/Math.sqrt(F),w=0;w<3;++w)I[w]*=O;else for(var w=0;w<3;++w)I[w]=0}return p},d.faceNormals=function(l,n,s){for(var o=l.length,p=new Array(o),b=s===void 0?e:s,h=0;h<o;++h){for(var _=l[h],a=new Array(3),c=0;c<3;++c)a[c]=n[_[c]];for(var f=new Array(3),x=new Array(3),c=0;c<3;++c)f[c]=a[1][c]-a[0][c],x[c]=a[2][c]-a[0][c];for(var k=new Array(3),y=0,c=0;c<3;++c){var A=(c+1)%3,L=(c+2)%3;k[c]=f[A]*x[L]-f[L]*x[A],y+=k[c]*k[c]}y>b?y=1/Math.sqrt(y):y=0;for(var c=0;c<3;++c)k[c]*=y;p[h]=k}return p}},4081:function(v){v.exports=d;function d(r,e,l,n,s,o,p,b,h,_){var a=e+o+_;if(c>0){var c=Math.sqrt(a+1);r[0]=.5*(p-h)/c,r[1]=.5*(b-n)/c,r[2]=.5*(l-o)/c,r[3]=.5*c}else{var f=Math.max(e,o,_),c=Math.sqrt(2*f-a+1);e>=f?(r[0]=.5*c,r[1]=.5*(s+l)/c,r[2]=.5*(b+n)/c,r[3]=.5*(p-h)/c):o>=f?(r[0]=.5*(l+s)/c,r[1]=.5*c,r[2]=.5*(h+p)/c,r[3]=.5*(b-n)/c):(r[0]=.5*(n+b)/c,r[1]=.5*(p+h)/c,r[2]=.5*c,r[3]=.5*(l-s)/c)}return r}},9977:function(v,d,r){v.exports=c;var e=r(9215),l=r(6582),n=r(7399),s=r(7608),o=r(4081);function p(f,x,k){return Math.sqrt(Math.pow(f,2)+Math.pow(x,2)+Math.pow(k,2))}function b(f,x,k,y){return Math.sqrt(Math.pow(f,2)+Math.pow(x,2)+Math.pow(k,2)+Math.pow(y,2))}function h(f,x){var k=x[0],y=x[1],A=x[2],L=x[3],u=b(k,y,A,L);u>1e-6?(f[0]=k/u,f[1]=y/u,f[2]=A/u,f[3]=L/u):(f[0]=f[1]=f[2]=0,f[3]=1)}function _(f,x,k){this.radius=e([k]),this.center=e(x),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var a=_.prototype;a.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},a.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var x=this.computedRotation;h(x,x);var k=this.computedMatrix;n(k,x);var y=this.computedCenter,A=this.computedEye,L=this.computedUp,u=Math.exp(this.computedRadius[0]);A[0]=y[0]+u*k[2],A[1]=y[1]+u*k[6],A[2]=y[2]+u*k[10],L[0]=k[1],L[1]=k[5],L[2]=k[9];for(var m=0;m<3;++m){for(var S=0,w=0;w<3;++w)S+=k[m+4*w]*A[w];k[12+m]=-S}},a.getMatrix=function(f,x){this.recalcMatrix(f);var k=this.computedMatrix;if(x){for(var y=0;y<16;++y)x[y]=k[y];return x}return k},a.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},a.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},a.pan=function(f,x,k,y){x=x||0,k=k||0,y=y||0,this.recalcMatrix(f);var A=this.computedMatrix,L=A[1],u=A[5],m=A[9],S=p(L,u,m);L/=S,u/=S,m/=S;var w=A[0],I=A[4],O=A[8],D=w*L+I*u+O*m;w-=L*D,I-=u*D,O-=m*D;var P=p(w,I,O);w/=P,I/=P,O/=P,A[2],A[6],A[10];var F=w*x+L*k,R=I*x+u*k,B=O*x+m*k;this.center.move(f,F,R,B);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+y),this.radius.set(f,Math.log(N))},a.rotate=function(f,x,k,y){this.recalcMatrix(f),x=x||0,k=k||0;var A=this.computedMatrix,L=A[0],u=A[4],m=A[8],S=A[1],w=A[5],I=A[9],O=A[2],D=A[6],P=A[10],F=x*L+k*S,R=x*u+k*w,B=x*m+k*I,N=-(D*B-P*R),G=-(P*F-O*B),X=-(O*R-D*F),J=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(G,2)-Math.pow(X,2))),it=b(N,G,X,J);it>1e-6?(N/=it,G/=it,X/=it,J/=it):(N=G=X=0,J=1);var nt=this.computedRotation,q=nt[0],Z=nt[1],$=nt[2],V=nt[3],rt=q*J+V*N+Z*X-$*G,ot=Z*J+V*G+$*N-q*X,H=$*J+V*X+q*G-Z*N,Y=V*J-q*N-Z*G-$*X;if(y){N=O,G=D,X=P;var at=Math.sin(y)/p(N,G,X);N*=at,G*=at,X*=at,J=Math.cos(x),rt=rt*J+Y*N+ot*X-H*G,ot=ot*J+Y*G+H*N-rt*X,H=H*J+Y*X+rt*G-ot*N,Y=Y*J-rt*N-ot*G-H*X}var et=b(rt,ot,H,Y);et>1e-6?(rt/=et,ot/=et,H/=et,Y/=et):(rt=ot=H=0,Y=1),this.rotation.set(f,rt,ot,H,Y)},a.lookAt=function(f,x,k,y){this.recalcMatrix(f),k=k||this.computedCenter,x=x||this.computedEye,y=y||this.computedUp;var A=this.computedMatrix;l(A,x,k,y);var L=this.computedRotation;o(L,A[0],A[1],A[2],A[4],A[5],A[6],A[8],A[9],A[10]),h(L,L),this.rotation.set(f,L[0],L[1],L[2],L[3]);for(var u=0,m=0;m<3;++m)u+=Math.pow(k[m]-x[m],2);this.radius.set(f,.5*Math.log(Math.max(u,1e-6))),this.center.set(f,k[0],k[1],k[2])},a.translate=function(f,x,k,y){this.center.move(f,x||0,k||0,y||0)},a.setMatrix=function(f,x){var k=this.computedRotation;o(k,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),h(k,k),this.rotation.set(f,k[0],k[1],k[2],k[3]);var y=this.computedMatrix;s(y,x);var A=y[15];if(Math.abs(A)>1e-6){var L=y[12]/A,u=y[13]/A,m=y[14]/A;this.recalcMatrix(f);var S=Math.exp(this.computedRadius[0]);this.center.set(f,L-y[2]*S,u-y[6]*S,m-y[10]*S),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},a.setDistance=function(f,x){x>0&&this.radius.set(f,Math.log(x))},a.setDistanceLimits=function(f,x){f>0?f=Math.log(f):f=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=x},a.getDistanceLimits=function(f){var x=this.radius.bounds;return f?(f[0]=Math.exp(x[0][0]),f[1]=Math.exp(x[1][0]),f):[Math.exp(x[0][0]),Math.exp(x[1][0])]},a.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},a.fromJSON=function(f){var x=this.lastT(),k=f.center;k&&this.center.set(x,k[0],k[1],k[2]);var y=f.rotation;y&&this.rotation.set(x,y[0],y[1],y[2],y[3]);var A=f.distance;A&&A>0&&this.radius.set(x,Math.log(A)),this.setDistanceLimits(f.zoomMin,f.zoomMax)};function c(f){f=f||{};var x=f.center||[0,0,0],k=f.rotation||[0,0,0,1],y=f.radius||1;x=[].slice.call(x,0,3),k=[].slice.call(k,0,4),h(k,k);var A=new _(k,x,Math.log(y));return A.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&A.lookAt(0,f.eye,f.center,f.up),A}},1371:function(v,d,r){/*!
* pad-left <https://github.com/jonschlinkert/pad-left>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT license.
*/var e=r(3233);v.exports=function(l,n,s){return s=typeof s<"u"?s+"":" ",e(s,n)+l}},3202:function(v){v.exports=function(d,r){r||(r=[0,""]),d=String(d);var e=parseFloat(d,10);return r[0]=e,r[1]=d.match(/[\d.\-\+]*\s*(.*)/)[1]||"",r}},3088:function(v,d,r){v.exports=l;var e=r(3140);function l(n,s){for(var o=s.length|0,p=n.length,b=[new Array(o),new Array(o)],h=0;h<o;++h)b[0][h]=[],b[1][h]=[];for(var h=0;h<p;++h){var _=n[h];b[0][_[0]].push(_),b[1][_[1]].push(_)}for(var a=[],h=0;h<o;++h)b[0][h].length+b[1][h].length===0&&a.push([h]);function c(u,m){var S=b[m][u[m]];S.splice(S.indexOf(u),1)}function f(u,m,S){for(var w,I,O,D=0;D<2;++D)if(b[D][m].length>0){w=b[D][m][0],O=D;break}I=w[O^1];for(var P=0;P<2;++P)for(var F=b[P][m],R=0;R<F.length;++R){var B=F[R],N=B[P^1],G=e(s[u],s[m],s[I],s[N]);G>0&&(w=B,I=N,O=P)}return S||w&&c(w,O),I}function x(u,m){var S=b[m][u][0],w=[u];c(S,m);for(var I=S[m^1],O=m;;){for(;I!==u;)w.push(I),I=f(w[w.length-2],I,!1);if(b[0][u].length+b[1][u].length===0)break;var D=w[w.length-1],P=u,F=w[1],R=f(D,P,!0);if(e(s[D],s[P],s[F],s[R])<0)break;w.push(u),I=f(D,P)}return w}function k(u,m){return m[1]===m[m.length-1]}for(var h=0;h<o;++h)for(var y=0;y<2;++y){for(var A=[];b[y][h].length>0;){b[0][h].length;var L=x(h,y);k(A,L)?A.push.apply(A,L):(A.length>0&&a.push(A),A=L)}A.length>0&&a.push(A)}return a}},5609:function(v,d,r){v.exports=l;var e=r(3134);function l(n,s){for(var o=e(n,s.length),p=new Array(s.length),b=new Array(s.length),h=[],_=0;_<s.length;++_){var a=o[_].length;b[_]=a,p[_]=!0,a<=1&&h.push(_)}for(;h.length>0;){var c=h.pop();p[c]=!1;for(var f=o[c],_=0;_<f.length;++_){var x=f[_];--b[x]===0&&h.push(x)}}for(var k=new Array(s.length),y=[],_=0;_<s.length;++_)if(p[_]){var c=y.length;k[_]=c,y.push(s[_])}else k[_]=-1;for(var A=[],_=0;_<n.length;++_){var L=n[_];p[L[0]]&&p[L[1]]&&A.push([k[L[0]],k[L[1]]])}return[A,y]}},2095:function(v,d,r){v.exports=a;var e=r(3134),l=r(3088),n=r(5085),s=r(5250),o=r(8210),p=r(1682),b=r(5609);function h(c,f){for(var x=new Array(c),k=0;k<c;++k)x[k]=f;return x}function _(c){for(var f=new Array(c),x=0;x<c;++x)f[x]=[];return f}function a(c,f){var x=b(c,f);c=x[0],f=x[1];for(var k=f.length,y=c.length,A=e(c,f.length),L=0;L<k;++L)if(A[L].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u=l(c,f);function m(gt){for(var mt=gt.length,vt=[0],At=0;At<mt;++At){var Ot=f[gt[At]],It=f[gt[(At+1)%mt]],St=s(-Ot[0],Ot[1]),Bt=s(-Ot[0],It[1]),re=s(It[0],Ot[1]),Yt=s(It[0],It[1]);vt=o(vt,o(o(St,Bt),o(re,Yt)))}return vt[vt.length-1]>0}u=u.filter(m);for(var S=u.length,w=new Array(S),I=new Array(S),L=0;L<S;++L){w[L]=L;var O=new Array(S),D=u[L].map(function(mt){return f[mt]}),P=n([D]),F=0;t:for(var R=0;R<S;++R)if(O[R]=0,L!==R){for(var B=u[R],N=B.length,G=0;G<N;++G){var X=P(f[B[G]]);if(X!==0){X<0&&(O[R]=1,F+=1);continue t}}O[R]=1,F+=1}I[L]=[F,L,O]}I.sort(function(gt,mt){return mt[0]-gt[0]});for(var L=0;L<S;++L)for(var O=I[L],J=O[1],it=O[2],R=0;R<S;++R)it[R]&&(w[R]=J);for(var nt=_(S),L=0;L<S;++L)nt[L].push(w[L]),nt[w[L]].push(L);for(var q={},Z=h(k,!1),L=0;L<S;++L)for(var B=u[L],N=B.length,R=0;R<N;++R){var $=B[R],V=B[(R+1)%N],rt=Math.min($,V)+":"+Math.max($,V);if(rt in q){var ot=q[rt];nt[ot].push(L),nt[L].push(ot),Z[$]=Z[V]=!0}else q[rt]=L}function H(gt){for(var mt=gt.length,vt=0;vt<mt;++vt)if(!Z[gt[vt]])return!1;return!0}for(var Y=[],at=h(S,-1),L=0;L<S;++L)w[L]===L&&!H(u[L])?(Y.push(L),at[L]=0):at[L]=-1;for(var x=[];Y.length>0;){var et=Y.pop(),ct=nt[et];p(ct,function(mt,vt){return mt-vt});var ft=ct.length,yt=at[et],xt;if(yt===0){var B=u[et];xt=[B]}for(var L=0;L<ft;++L){var Ct=ct[L];if(!(at[Ct]>=0)&&(at[Ct]=yt^1,Y.push(Ct),yt===0)){var B=u[Ct];H(B)||(B.reverse(),xt.push(B))}}yt===0&&x.push(xt)}return x}},5085:function(v,d,r){v.exports=f;var e=r(3250)[3],l=r(4209),n=r(3352),s=r(2478);function o(){return!0}function p(x){return function(k,y){var A=x[k];return A?!!A.queryPoint(y,o):!1}}function b(x){for(var k={},y=0;y<x.length;++y){var A=x[y],L=A[0][0],u=A[0][1],m=A[1][1],S=[Math.min(u,m),Math.max(u,m)];L in k?k[L].push(S):k[L]=[S]}for(var w={},I=Object.keys(k),y=0;y<I.length;++y){var O=k[I[y]];w[I[y]]=n(O)}return p(w)}function h(x,k){return function(y){var A=s.le(k,y[0]);if(A<0)return 1;var L=x[A];if(!L)if(A>0&&k[A]===y[0])L=x[A-1];else return 1;for(var u=1;L;){var m=L.key,S=e(y,m[0],m[1]);if(m[0][0]<m[1][0])if(S<0)L=L.left;else if(S>0)u=-1,L=L.right;else return 0;else if(S>0)L=L.left;else if(S<0)u=1,L=L.right;else return 0}return u}}function _(x){return 1}function a(x){return function(k){return x(k[0],k[1])?0:1}}function c(x,k){return function(y){return x(y[0],y[1])?0:k(y)}}function f(x){for(var k=x.length,y=[],A=[],L=0,u=0;u<k;++u)for(var m=x[u],S=m.length,w=S-1,I=0;I<S;w=I++){var O=m[w],D=m[I];O[0]===D[0]?A.push([O,D]):y.push([O,D])}if(y.length===0)return A.length===0?_:a(b(A));var P=l(y),F=h(P.slabs,P.coordinates);return A.length===0?F:c(b(A),F)}},9346:function(v){var d=new Float64Array(4),r=new Float64Array(4),e=new Float64Array(4);function l(n,s,o,p,b){d.length<p.length&&(d=new Float64Array(p.length),r=new Float64Array(p.length),e=new Float64Array(p.length));for(var h=0;h<p.length;++h)d[h]=n[h]-p[h],r[h]=s[h]-n[h],e[h]=o[h]-n[h];for(var _=0,a=0,c=0,f=0,x=0,k=0,h=0;h<p.length;++h){var y=r[h],A=e[h],L=d[h];_+=y*y,a+=y*A,c+=A*A,f+=L*y,x+=L*A,k+=L*L}var u=Math.abs(_*c-a*a),m=a*x-c*f,S=a*f-_*x,w;if(m+S<=u)if(m<0)S<0&&f<0?(S=0,-f>=_?(m=1,w=_+2*f+k):(m=-f/_,w=f*m+k)):(m=0,x>=0?(S=0,w=k):-x>=c?(S=1,w=c+2*x+k):(S=-x/c,w=x*S+k));else if(S<0)S=0,f>=0?(m=0,w=k):-f>=_?(m=1,w=_+2*f+k):(m=-f/_,w=f*m+k);else{var I=1/u;m*=I,S*=I,w=m*(_*m+a*S+2*f)+S*(a*m+c*S+2*x)+k}else{var O,D,P,F;m<0?(O=a+f,D=c+x,D>O?(P=D-O,F=_-2*a+c,P>=F?(m=1,S=0,w=_+2*f+k):(m=P/F,S=1-m,w=m*(_*m+a*S+2*f)+S*(a*m+c*S+2*x)+k)):(m=0,D<=0?(S=1,w=c+2*x+k):x>=0?(S=0,w=k):(S=-x/c,w=x*S+k))):S<0?(O=a+x,D=_+f,D>O?(P=D-O,F=_-2*a+c,P>=F?(S=1,m=0,w=c+2*x+k):(S=P/F,m=1-S,w=m*(_*m+a*S+2*f)+S*(a*m+c*S+2*x)+k)):(S=0,D<=0?(m=1,w=_+2*f+k):f>=0?(m=0,w=k):(m=-f/_,w=f*m+k))):(P=c+x-a-f,P<=0?(m=0,S=1,w=c+2*x+k):(F=_-2*a+c,P>=F?(m=1,S=0,w=_+2*f+k):(m=P/F,S=1-m,w=m*(_*m+a*S+2*f)+S*(a*m+c*S+2*x)+k)))}for(var R=1-m-S,h=0;h<p.length;++h)b[h]=R*n[h]+m*s[h]+S*o[h];return w<0?0:w}v.exports=l},8648:function(v,d,r){v.exports=r(783)},2653:function(v,d,r){var e=r(3865);v.exports=l;function l(n,s){for(var o=n.length,p=new Array(o),b=0;b<o;++b)p[b]=e(n[b],s[b]);return p}},5838:function(v,d,r){v.exports=l;var e=r(7842);function l(n){for(var s=new Array(n.length),o=0;o<n.length;++o)s[o]=e(n[o]);return s}},8987:function(v,d,r){var e=r(7842),l=r(6504);v.exports=n;function n(s,o){for(var p=e(o),b=s.length,h=new Array(b),_=0;_<b;++_)h[_]=l(s[_],p);return h}},544:function(v,d,r){var e=r(5572);v.exports=l;function l(n,s){for(var o=n.length,p=new Array(o),b=0;b<o;++b)p[b]=e(n[b],s[b]);return p}},5771:function(v,d,r){var e=r(8507),l=r(3788),n=r(2419);v.exports=s;function s(o){o.sort(l);for(var p=o.length,b=0,h=0;h<p;++h){var _=o[h],a=n(_);if(a!==0){if(b>0){var c=o[b-1];if(e(_,c)===0&&n(c)!==a){b-=1;continue}}o[b++]=_}}return o.length=b,o}},3233:function(v){/*!
* repeat-string <https://github.com/jonschlinkert/repeat-string>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var d="",r;v.exports=e;function e(l,n){if(typeof l!="string")throw new TypeError("expected a string");if(n===1)return l;if(n===2)return l+l;var s=l.length*n;if(r!==l||typeof r>"u")r=l,d="";else if(d.length>=s)return d.substr(0,s);for(;s>d.length&&n>1;)n&1&&(d+=l),n>>=1,l+=l;return d+=l,d=d.substr(0,s),d}},3025:function(v,d,r){v.exports=r.g.performance&&r.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(v){v.exports=d;function d(r){for(var e=r.length,l=r[r.length-1],n=e,s=e-2;s>=0;--s){var o=l,p=r[s];l=o+p;var b=l-o,h=p-b;h&&(r[--n]=l,l=h)}for(var _=0,s=n;s<e;++s){var o=r[s],p=l;l=o+p;var b=l-o,h=p-b;h&&(r[_++]=h)}return r[_++]=l,r.length=_,r}},2962:function(v,d,r){var e=r(5250),l=r(8210),n=r(3012),s=r(7004),o=6;function p(k,y,A,L){return function(u){return L(k(A(u[0][0],u[1][1]),A(-u[0][1],u[1][0])))}}function b(k,y,A,L){return function(u){return L(k(y(k(A(u[1][1],u[2][2]),A(-u[1][2],u[2][1])),u[0][0]),k(y(k(A(u[1][0],u[2][2]),A(-u[1][2],u[2][0])),-u[0][1]),y(k(A(u[1][0],u[2][1]),A(-u[1][1],u[2][0])),u[0][2]))))}}function h(k,y,A,L){return function(u){return L(k(k(y(k(y(k(A(u[2][2],u[3][3]),A(-u[2][3],u[3][2])),u[1][1]),k(y(k(A(u[2][1],u[3][3]),A(-u[2][3],u[3][1])),-u[1][2]),y(k(A(u[2][1],u[3][2]),A(-u[2][2],u[3][1])),u[1][3]))),u[0][0]),y(k(y(k(A(u[2][2],u[3][3]),A(-u[2][3],u[3][2])),u[1][0]),k(y(k(A(u[2][0],u[3][3]),A(-u[2][3],u[3][0])),-u[1][2]),y(k(A(u[2][0],u[3][2]),A(-u[2][2],u[3][0])),u[1][3]))),-u[0][1])),k(y(k(y(k(A(u[2][1],u[3][3]),A(-u[2][3],u[3][1])),u[1][0]),k(y(k(A(u[2][0],u[3][3]),A(-u[2][3],u[3][0])),-u[1][1]),y(k(A(u[2][0],u[3][1]),A(-u[2][1],u[3][0])),u[1][3]))),u[0][2]),y(k(y(k(A(u[2][1],u[3][2]),A(-u[2][2],u[3][1])),u[1][0]),k(y(k(A(u[2][0],u[3][2]),A(-u[2][2],u[3][0])),-u[1][1]),y(k(A(u[2][0],u[3][1]),A(-u[2][1],u[3][0])),u[1][2]))),-u[0][3]))))}}function _(k,y,A,L){return function(u){return L(k(k(y(k(k(y(k(y(k(A(u[3][3],u[4][4]),A(-u[3][4],u[4][3])),u[2][2]),k(y(k(A(u[3][2],u[4][4]),A(-u[3][4],u[4][2])),-u[2][3]),y(k(A(u[3][2],u[4][3]),A(-u[3][3],u[4][2])),u[2][4]))),u[1][1]),y(k(y(k(A(u[3][3],u[4][4]),A(-u[3][4],u[4][3])),u[2][1]),k(y(k(A(u[3][1],u[4][4]),A(-u[3][4],u[4][1])),-u[2][3]),y(k(A(u[3][1],u[4][3]),A(-u[3][3],u[4][1])),u[2][4]))),-u[1][2])),k(y(k(y(k(A(u[3][2],u[4][4]),A(-u[3][4],u[4][2])),u[2][1]),k(y(k(A(u[3][1],u[4][4]),A(-u[3][4],u[4][1])),-u[2][2]),y(k(A(u[3][1],u[4][2]),A(-u[3][2],u[4][1])),u[2][4]))),u[1][3]),y(k(y(k(A(u[3][2],u[4][3]),A(-u[3][3],u[4][2])),u[2][1]),k(y(k(A(u[3][1],u[4][3]),A(-u[3][3],u[4][1])),-u[2][2]),y(k(A(u[3][1],u[4][2]),A(-u[3][2],u[4][1])),u[2][3]))),-u[1][4]))),u[0][0]),y(k(k(y(k(y(k(A(u[3][3],u[4][4]),A(-u[3][4],u[4][3])),u[2][2]),k(y(k(A(u[3][2],u[4][4]),A(-u[3][4],u[4][2])),-u[2][3]),y(k(A(u[3][2],u[4][3]),A(-u[3][3],u[4][2])),u[2][4]))),u[1][0]),y(k(y(k(A(u[3][3],u[4][4]),A(-u[3][4],u[4][3])),u[2][0]),k(y(k(A(u[3][0],u[4][4]),A(-u[3][4],u[4][0])),-u[2][3]),y(k(A(u[3][0],u[4][3]),A(-u[3][3],u[4][0])),u[2][4]))),-u[1][2])),k(y(k(y(k(A(u[3][2],u[4][4]),A(-u[3][4],u[4][2])),u[2][0]),k(y(k(A(u[3][0],u[4][4]),A(-u[3][4],u[4][0])),-u[2][2]),y(k(A(u[3][0],u[4][2]),A(-u[3][2],u[4][0])),u[2][4]))),u[1][3]),y(k(y(k(A(u[3][2],u[4][3]),A(-u[3][3],u[4][2])),u[2][0]),k(y(k(A(u[3][0],u[4][3]),A(-u[3][3],u[4][0])),-u[2][2]),y(k(A(u[3][0],u[4][2]),A(-u[3][2],u[4][0])),u[2][3]))),-u[1][4]))),-u[0][1])),k(y(k(k(y(k(y(k(A(u[3][3],u[4][4]),A(-u[3][4],u[4][3])),u[2][1]),k(y(k(A(u[3][1],u[4][4]),A(-u[3][4],u[4][1])),-u[2][3]),y(k(A(u[3][1],u[4][3]),A(-u[3][3],u[4][1])),u[2][4]))),u[1][0]),y(k(y(k(A(u[3][3],u[4][4]),A(-u[3][4],u[4][3])),u[2][0]),k(y(k(A(u[3][0],u[4][4]),A(-u[3][4],u[4][0])),-u[2][3]),y(k(A(u[3][0],u[4][3]),A(-u[3][3],u[4][0])),u[2][4]))),-u[1][1])),k(y(k(y(k(A(u[3][1],u[4][4]),A(-u[3][4],u[4][1])),u[2][0]),k(y(k(A(u[3][0],u[4][4]),A(-u[3][4],u[4][0])),-u[2][1]),y(k(A(u[3][0],u[4][1]),A(-u[3][1],u[4][0])),u[2][4]))),u[1][3]),y(k(y(k(A(u[3][1],u[4][3]),A(-u[3][3],u[4][1])),u[2][0]),k(y(k(A(u[3][0],u[4][3]),A(-u[3][3],u[4][0])),-u[2][1]),y(k(A(u[3][0],u[4][1]),A(-u[3][1],u[4][0])),u[2][3]))),-u[1][4]))),u[0][2]),k(y(k(k(y(k(y(k(A(u[3][2],u[4][4]),A(-u[3][4],u[4][2])),u[2][1]),k(y(k(A(u[3][1],u[4][4]),A(-u[3][4],u[4][1])),-u[2][2]),y(k(A(u[3][1],u[4][2]),A(-u[3][2],u[4][1])),u[2][4]))),u[1][0]),y(k(y(k(A(u[3][2],u[4][4]),A(-u[3][4],u[4][2])),u[2][0]),k(y(k(A(u[3][0],u[4][4]),A(-u[3][4],u[4][0])),-u[2][2]),y(k(A(u[3][0],u[4][2]),A(-u[3][2],u[4][0])),u[2][4]))),-u[1][1])),k(y(k(y(k(A(u[3][1],u[4][4]),A(-u[3][4],u[4][1])),u[2][0]),k(y(k(A(u[3][0],u[4][4]),A(-u[3][4],u[4][0])),-u[2][1]),y(k(A(u[3][0],u[4][1]),A(-u[3][1],u[4][0])),u[2][4]))),u[1][2]),y(k(y(k(A(u[3][1],u[4][2]),A(-u[3][2],u[4][1])),u[2][0]),k(y(k(A(u[3][0],u[4][2]),A(-u[3][2],u[4][0])),-u[2][1]),y(k(A(u[3][0],u[4][1]),A(-u[3][1],u[4][0])),u[2][2]))),-u[1][4]))),-u[0][3]),y(k(k(y(k(y(k(A(u[3][2],u[4][3]),A(-u[3][3],u[4][2])),u[2][1]),k(y(k(A(u[3][1],u[4][3]),A(-u[3][3],u[4][1])),-u[2][2]),y(k(A(u[3][1],u[4][2]),A(-u[3][2],u[4][1])),u[2][3]))),u[1][0]),y(k(y(k(A(u[3][2],u[4][3]),A(-u[3][3],u[4][2])),u[2][0]),k(y(k(A(u[3][0],u[4][3]),A(-u[3][3],u[4][0])),-u[2][2]),y(k(A(u[3][0],u[4][2]),A(-u[3][2],u[4][0])),u[2][3]))),-u[1][1])),k(y(k(y(k(A(u[3][1],u[4][3]),A(-u[3][3],u[4][1])),u[2][0]),k(y(k(A(u[3][0],u[4][3]),A(-u[3][3],u[4][0])),-u[2][1]),y(k(A(u[3][0],u[4][1]),A(-u[3][1],u[4][0])),u[2][3]))),u[1][2]),y(k(y(k(A(u[3][1],u[4][2]),A(-u[3][2],u[4][1])),u[2][0]),k(y(k(A(u[3][0],u[4][2]),A(-u[3][2],u[4][0])),-u[2][1]),y(k(A(u[3][0],u[4][1]),A(-u[3][1],u[4][0])),u[2][2]))),-u[1][3]))),u[0][4])))))}}function a(k){var y=k===2?p:k===3?b:k===4?h:k===5?_:void 0;return y(l,n,e,s)}var c=[function(){return[0]},function(k){return[k[0][0]]}];function f(k,y,A,L,u,m,S,w){return function(I){switch(I.length){case 0:return k(I);case 1:return y(I);case 2:return A(I);case 3:return L(I);case 4:return u(I);case 5:return m(I)}var O=S[I.length];return O||(O=S[I.length]=w(I.length)),O(I)}}function x(){for(;c.length<o;)c.push(a(c.length));v.exports=f.apply(void 0,c.concat([c,a]));for(var k=0;k<c.length;++k)v.exports[k]=c[k]}x()},1944:function(v,d,r){var e=r(5250),l=r(8210);v.exports=n;function n(s,o){for(var p=e(s[0],o[0]),b=1;b<s.length;++b)p=l(p,e(s[b],o[b]));return p}},2646:function(v,d,r){var e=r(5250),l=r(8210),n=r(8545),s=r(3012),o=6;function p(u){var m=u===3?a:u===4?c:u===5?f:x;return m(l,n,e,s)}function b(){return 0}function h(){return 0}function _(){return 0}function a(u,m,S,w){function I(O,D,P){var F=S(O[0],O[0]),R=w(F,D[0]),B=w(F,P[0]),N=S(D[0],D[0]),G=w(N,O[0]),X=w(N,P[0]),J=S(P[0],P[0]),it=w(J,O[0]),nt=w(J,D[0]),q=u(m(nt,X),m(G,R)),Z=m(it,B),$=m(q,Z);return $[$.length-1]}return I}function c(u,m,S,w){function I(O,D,P,F){var R=u(S(O[0],O[0]),S(O[1],O[1])),B=w(R,D[0]),N=w(R,P[0]),G=w(R,F[0]),X=u(S(D[0],D[0]),S(D[1],D[1])),J=w(X,O[0]),it=w(X,P[0]),nt=w(X,F[0]),q=u(S(P[0],P[0]),S(P[1],P[1])),Z=w(q,O[0]),$=w(q,D[0]),V=w(q,F[0]),rt=u(S(F[0],F[0]),S(F[1],F[1])),ot=w(rt,O[0]),H=w(rt,D[0]),Y=w(rt,P[0]),at=u(u(w(m(Y,V),D[1]),u(w(m(H,nt),-P[1]),w(m($,it),F[1]))),u(w(m(H,nt),O[1]),u(w(m(ot,G),-D[1]),w(m(J,B),F[1])))),et=u(u(w(m(Y,V),O[1]),u(w(m(ot,G),-P[1]),w(m(Z,N),F[1]))),u(w(m($,it),O[1]),u(w(m(Z,N),-D[1]),w(m(J,B),P[1])))),ct=m(at,et);return ct[ct.length-1]}return I}function f(u,m,S,w){function I(O,D,P,F,R){var B=u(S(O[0],O[0]),u(S(O[1],O[1]),S(O[2],O[2]))),N=w(B,D[0]),G=w(B,P[0]),X=w(B,F[0]),J=w(B,R[0]),it=u(S(D[0],D[0]),u(S(D[1],D[1]),S(D[2],D[2]))),nt=w(it,O[0]),q=w(it,P[0]),Z=w(it,F[0]),$=w(it,R[0]),V=u(S(P[0],P[0]),u(S(P[1],P[1]),S(P[2],P[2]))),rt=w(V,O[0]),ot=w(V,D[0]),H=w(V,F[0]),Y=w(V,R[0]),at=u(S(F[0],F[0]),u(S(F[1],F[1]),S(F[2],F[2]))),et=w(at,O[0]),ct=w(at,D[0]),ft=w(at,P[0]),yt=w(at,R[0]),xt=u(S(R[0],R[0]),u(S(R[1],R[1]),S(R[2],R[2]))),Ct=w(xt,O[0]),gt=w(xt,D[0]),mt=w(xt,P[0]),vt=w(xt,F[0]),At=u(u(u(w(u(w(m(vt,yt),P[1]),u(w(m(mt,Y),-F[1]),w(m(ft,H),R[1]))),D[2]),u(w(u(w(m(vt,yt),D[1]),u(w(m(gt,$),-F[1]),w(m(ct,Z),R[1]))),-P[2]),w(u(w(m(mt,Y),D[1]),u(w(m(gt,$),-P[1]),w(m(ot,q),R[1]))),F[2]))),u(w(u(w(m(ft,H),D[1]),u(w(m(ct,Z),-P[1]),w(m(ot,q),F[1]))),-R[2]),u(w(u(w(m(vt,yt),D[1]),u(w(m(gt,$),-F[1]),w(m(ct,Z),R[1]))),O[2]),w(u(w(m(vt,yt),O[1]),u(w(m(Ct,J),-F[1]),w(m(et,X),R[1]))),-D[2])))),u(u(w(u(w(m(gt,$),O[1]),u(w(m(Ct,J),-D[1]),w(m(nt,N),R[1]))),F[2]),u(w(u(w(m(ct,Z),O[1]),u(w(m(et,X),-D[1]),w(m(nt,N),F[1]))),-R[2]),w(u(w(m(ft,H),D[1]),u(w(m(ct,Z),-P[1]),w(m(ot,q),F[1]))),O[2]))),u(w(u(w(m(ft,H),O[1]),u(w(m(et,X),-P[1]),w(m(rt,G),F[1]))),-D[2]),u(w(u(w(m(ct,Z),O[1]),u(w(m(et,X),-D[1]),w(m(nt,N),F[1]))),P[2]),w(u(w(m(ot,q),O[1]),u(w(m(rt,G),-D[1]),w(m(nt,N),P[1]))),-F[2]))))),Ot=u(u(u(w(u(w(m(vt,yt),P[1]),u(w(m(mt,Y),-F[1]),w(m(ft,H),R[1]))),O[2]),w(u(w(m(vt,yt),O[1]),u(w(m(Ct,J),-F[1]),w(m(et,X),R[1]))),-P[2])),u(w(u(w(m(mt,Y),O[1]),u(w(m(Ct,J),-P[1]),w(m(rt,G),R[1]))),F[2]),w(u(w(m(ft,H),O[1]),u(w(m(et,X),-P[1]),w(m(rt,G),F[1]))),-R[2]))),u(u(w(u(w(m(mt,Y),D[1]),u(w(m(gt,$),-P[1]),w(m(ot,q),R[1]))),O[2]),w(u(w(m(mt,Y),O[1]),u(w(m(Ct,J),-P[1]),w(m(rt,G),R[1]))),-D[2])),u(w(u(w(m(gt,$),O[1]),u(w(m(Ct,J),-D[1]),w(m(nt,N),R[1]))),P[2]),w(u(w(m(ot,q),O[1]),u(w(m(rt,G),-D[1]),w(m(nt,N),P[1]))),-R[2])))),It=m(At,Ot);return It[It.length-1]}return I}function x(u,m,S,w){function I(O,D,P,F,R,B){var N=u(u(S(O[0],O[0]),S(O[1],O[1])),u(S(O[2],O[2]),S(O[3],O[3]))),G=w(N,D[0]),X=w(N,P[0]),J=w(N,F[0]),it=w(N,R[0]),nt=w(N,B[0]),q=u(u(S(D[0],D[0]),S(D[1],D[1])),u(S(D[2],D[2]),S(D[3],D[3]))),Z=w(q,O[0]),$=w(q,P[0]),V=w(q,F[0]),rt=w(q,R[0]),ot=w(q,B[0]),H=u(u(S(P[0],P[0]),S(P[1],P[1])),u(S(P[2],P[2]),S(P[3],P[3]))),Y=w(H,O[0]),at=w(H,D[0]),et=w(H,F[0]),ct=w(H,R[0]),ft=w(H,B[0]),yt=u(u(S(F[0],F[0]),S(F[1],F[1])),u(S(F[2],F[2]),S(F[3],F[3]))),xt=w(yt,O[0]),Ct=w(yt,D[0]),gt=w(yt,P[0]),mt=w(yt,R[0]),vt=w(yt,B[0]),At=u(u(S(R[0],R[0]),S(R[1],R[1])),u(S(R[2],R[2]),S(R[3],R[3]))),Ot=w(At,O[0]),It=w(At,D[0]),St=w(At,P[0]),Bt=w(At,F[0]),re=w(At,B[0]),Yt=u(u(S(B[0],B[0]),S(B[1],B[1])),u(S(B[2],B[2]),S(B[3],B[3]))),he=w(Yt,O[0]),Zt=w(Yt,D[0]),ae=w(Yt,P[0]),oe=w(Yt,F[0]),ce=w(Yt,R[0]),ue=u(u(u(w(u(u(w(u(w(m(ce,re),F[1]),u(w(m(oe,vt),-R[1]),w(m(Bt,mt),B[1]))),P[2]),w(u(w(m(ce,re),P[1]),u(w(m(ae,ft),-R[1]),w(m(St,ct),B[1]))),-F[2])),u(w(u(w(m(oe,vt),P[1]),u(w(m(ae,ft),-F[1]),w(m(gt,et),B[1]))),R[2]),w(u(w(m(Bt,mt),P[1]),u(w(m(St,ct),-F[1]),w(m(gt,et),R[1]))),-B[2]))),D[3]),u(w(u(u(w(u(w(m(ce,re),F[1]),u(w(m(oe,vt),-R[1]),w(m(Bt,mt),B[1]))),D[2]),w(u(w(m(ce,re),D[1]),u(w(m(Zt,ot),-R[1]),w(m(It,rt),B[1]))),-F[2])),u(w(u(w(m(oe,vt),D[1]),u(w(m(Zt,ot),-F[1]),w(m(Ct,V),B[1]))),R[2]),w(u(w(m(Bt,mt),D[1]),u(w(m(It,rt),-F[1]),w(m(Ct,V),R[1]))),-B[2]))),-P[3]),w(u(u(w(u(w(m(ce,re),P[1]),u(w(m(ae,ft),-R[1]),w(m(St,ct),B[1]))),D[2]),w(u(w(m(ce,re),D[1]),u(w(m(Zt,ot),-R[1]),w(m(It,rt),B[1]))),-P[2])),u(w(u(w(m(ae,ft),D[1]),u(w(m(Zt,ot),-P[1]),w(m(at,$),B[1]))),R[2]),w(u(w(m(St,ct),D[1]),u(w(m(It,rt),-P[1]),w(m(at,$),R[1]))),-B[2]))),F[3]))),u(u(w(u(u(w(u(w(m(oe,vt),P[1]),u(w(m(ae,ft),-F[1]),w(m(gt,et),B[1]))),D[2]),w(u(w(m(oe,vt),D[1]),u(w(m(Zt,ot),-F[1]),w(m(Ct,V),B[1]))),-P[2])),u(w(u(w(m(ae,ft),D[1]),u(w(m(Zt,ot),-P[1]),w(m(at,$),B[1]))),F[2]),w(u(w(m(gt,et),D[1]),u(w(m(Ct,V),-P[1]),w(m(at,$),F[1]))),-B[2]))),-R[3]),w(u(u(w(u(w(m(Bt,mt),P[1]),u(w(m(St,ct),-F[1]),w(m(gt,et),R[1]))),D[2]),w(u(w(m(Bt,mt),D[1]),u(w(m(It,rt),-F[1]),w(m(Ct,V),R[1]))),-P[2])),u(w(u(w(m(St,ct),D[1]),u(w(m(It,rt),-P[1]),w(m(at,$),R[1]))),F[2]),w(u(w(m(gt,et),D[1]),u(w(m(Ct,V),-P[1]),w(m(at,$),F[1]))),-R[2]))),B[3])),u(w(u(u(w(u(w(m(ce,re),F[1]),u(w(m(oe,vt),-R[1]),w(m(Bt,mt),B[1]))),D[2]),w(u(w(m(ce,re),D[1]),u(w(m(Zt,ot),-R[1]),w(m(It,rt),B[1]))),-F[2])),u(w(u(w(m(oe,vt),D[1]),u(w(m(Zt,ot),-F[1]),w(m(Ct,V),B[1]))),R[2]),w(u(w(m(Bt,mt),D[1]),u(w(m(It,rt),-F[1]),w(m(Ct,V),R[1]))),-B[2]))),O[3]),w(u(u(w(u(w(m(ce,re),F[1]),u(w(m(oe,vt),-R[1]),w(m(Bt,mt),B[1]))),O[2]),w(u(w(m(ce,re),O[1]),u(w(m(he,nt),-R[1]),w(m(Ot,it),B[1]))),-F[2])),u(w(u(w(m(oe,vt),O[1]),u(w(m(he,nt),-F[1]),w(m(xt,J),B[1]))),R[2]),w(u(w(m(Bt,mt),O[1]),u(w(m(Ot,it),-F[1]),w(m(xt,J),R[1]))),-B[2]))),-D[3])))),u(u(u(w(u(u(w(u(w(m(ce,re),D[1]),u(w(m(Zt,ot),-R[1]),w(m(It,rt),B[1]))),O[2]),w(u(w(m(ce,re),O[1]),u(w(m(he,nt),-R[1]),w(m(Ot,it),B[1]))),-D[2])),u(w(u(w(m(Zt,ot),O[1]),u(w(m(he,nt),-D[1]),w(m(Z,G),B[1]))),R[2]),w(u(w(m(It,rt),O[1]),u(w(m(Ot,it),-D[1]),w(m(Z,G),R[1]))),-B[2]))),F[3]),w(u(u(w(u(w(m(oe,vt),D[1]),u(w(m(Zt,ot),-F[1]),w(m(Ct,V),B[1]))),O[2]),w(u(w(m(oe,vt),O[1]),u(w(m(he,nt),-F[1]),w(m(xt,J),B[1]))),-D[2])),u(w(u(w(m(Zt,ot),O[1]),u(w(m(he,nt),-D[1]),w(m(Z,G),B[1]))),F[2]),w(u(w(m(Ct,V),O[1]),u(w(m(xt,J),-D[1]),w(m(Z,G),F[1]))),-B[2]))),-R[3])),u(w(u(u(w(u(w(m(Bt,mt),D[1]),u(w(m(It,rt),-F[1]),w(m(Ct,V),R[1]))),O[2]),w(u(w(m(Bt,mt),O[1]),u(w(m(Ot,it),-F[1]),w(m(xt,J),R[1]))),-D[2])),u(w(u(w(m(It,rt),O[1]),u(w(m(Ot,it),-D[1]),w(m(Z,G),R[1]))),F[2]),w(u(w(m(Ct,V),O[1]),u(w(m(xt,J),-D[1]),w(m(Z,G),F[1]))),-R[2]))),B[3]),w(u(u(w(u(w(m(oe,vt),P[1]),u(w(m(ae,ft),-F[1]),w(m(gt,et),B[1]))),D[2]),w(u(w(m(oe,vt),D[1]),u(w(m(Zt,ot),-F[1]),w(m(Ct,V),B[1]))),-P[2])),u(w(u(w(m(ae,ft),D[1]),u(w(m(Zt,ot),-P[1]),w(m(at,$),B[1]))),F[2]),w(u(w(m(gt,et),D[1]),u(w(m(Ct,V),-P[1]),w(m(at,$),F[1]))),-B[2]))),O[3]))),u(u(w(u(u(w(u(w(m(oe,vt),P[1]),u(w(m(ae,ft),-F[1]),w(m(gt,et),B[1]))),O[2]),w(u(w(m(oe,vt),O[1]),u(w(m(he,nt),-F[1]),w(m(xt,J),B[1]))),-P[2])),u(w(u(w(m(ae,ft),O[1]),u(w(m(he,nt),-P[1]),w(m(Y,X),B[1]))),F[2]),w(u(w(m(gt,et),O[1]),u(w(m(xt,J),-P[1]),w(m(Y,X),F[1]))),-B[2]))),-D[3]),w(u(u(w(u(w(m(oe,vt),D[1]),u(w(m(Zt,ot),-F[1]),w(m(Ct,V),B[1]))),O[2]),w(u(w(m(oe,vt),O[1]),u(w(m(he,nt),-F[1]),w(m(xt,J),B[1]))),-D[2])),u(w(u(w(m(Zt,ot),O[1]),u(w(m(he,nt),-D[1]),w(m(Z,G),B[1]))),F[2]),w(u(w(m(Ct,V),O[1]),u(w(m(xt,J),-D[1]),w(m(Z,G),F[1]))),-B[2]))),P[3])),u(w(u(u(w(u(w(m(ae,ft),D[1]),u(w(m(Zt,ot),-P[1]),w(m(at,$),B[1]))),O[2]),w(u(w(m(ae,ft),O[1]),u(w(m(he,nt),-P[1]),w(m(Y,X),B[1]))),-D[2])),u(w(u(w(m(Zt,ot),O[1]),u(w(m(he,nt),-D[1]),w(m(Z,G),B[1]))),P[2]),w(u(w(m(at,$),O[1]),u(w(m(Y,X),-D[1]),w(m(Z,G),P[1]))),-B[2]))),-F[3]),w(u(u(w(u(w(m(gt,et),D[1]),u(w(m(Ct,V),-P[1]),w(m(at,$),F[1]))),O[2]),w(u(w(m(gt,et),O[1]),u(w(m(xt,J),-P[1]),w(m(Y,X),F[1]))),-D[2])),u(w(u(w(m(Ct,V),O[1]),u(w(m(xt,J),-D[1]),w(m(Z,G),F[1]))),P[2]),w(u(w(m(at,$),O[1]),u(w(m(Y,X),-D[1]),w(m(Z,G),P[1]))),-F[2]))),B[3]))))),ye=u(u(u(w(u(u(w(u(w(m(ce,re),F[1]),u(w(m(oe,vt),-R[1]),w(m(Bt,mt),B[1]))),P[2]),w(u(w(m(ce,re),P[1]),u(w(m(ae,ft),-R[1]),w(m(St,ct),B[1]))),-F[2])),u(w(u(w(m(oe,vt),P[1]),u(w(m(ae,ft),-F[1]),w(m(gt,et),B[1]))),R[2]),w(u(w(m(Bt,mt),P[1]),u(w(m(St,ct),-F[1]),w(m(gt,et),R[1]))),-B[2]))),O[3]),u(w(u(u(w(u(w(m(ce,re),F[1]),u(w(m(oe,vt),-R[1]),w(m(Bt,mt),B[1]))),O[2]),w(u(w(m(ce,re),O[1]),u(w(m(he,nt),-R[1]),w(m(Ot,it),B[1]))),-F[2])),u(w(u(w(m(oe,vt),O[1]),u(w(m(he,nt),-F[1]),w(m(xt,J),B[1]))),R[2]),w(u(w(m(Bt,mt),O[1]),u(w(m(Ot,it),-F[1]),w(m(xt,J),R[1]))),-B[2]))),-P[3]),w(u(u(w(u(w(m(ce,re),P[1]),u(w(m(ae,ft),-R[1]),w(m(St,ct),B[1]))),O[2]),w(u(w(m(ce,re),O[1]),u(w(m(he,nt),-R[1]),w(m(Ot,it),B[1]))),-P[2])),u(w(u(w(m(ae,ft),O[1]),u(w(m(he,nt),-P[1]),w(m(Y,X),B[1]))),R[2]),w(u(w(m(St,ct),O[1]),u(w(m(Ot,it),-P[1]),w(m(Y,X),R[1]))),-B[2]))),F[3]))),u(u(w(u(u(w(u(w(m(oe,vt),P[1]),u(w(m(ae,ft),-F[1]),w(m(gt,et),B[1]))),O[2]),w(u(w(m(oe,vt),O[1]),u(w(m(he,nt),-F[1]),w(m(xt,J),B[1]))),-P[2])),u(w(u(w(m(ae,ft),O[1]),u(w(m(he,nt),-P[1]),w(m(Y,X),B[1]))),F[2]),w(u(w(m(gt,et),O[1]),u(w(m(xt,J),-P[1]),w(m(Y,X),F[1]))),-B[2]))),-R[3]),w(u(u(w(u(w(m(Bt,mt),P[1]),u(w(m(St,ct),-F[1]),w(m(gt,et),R[1]))),O[2]),w(u(w(m(Bt,mt),O[1]),u(w(m(Ot,it),-F[1]),w(m(xt,J),R[1]))),-P[2])),u(w(u(w(m(St,ct),O[1]),u(w(m(Ot,it),-P[1]),w(m(Y,X),R[1]))),F[2]),w(u(w(m(gt,et),O[1]),u(w(m(xt,J),-P[1]),w(m(Y,X),F[1]))),-R[2]))),B[3])),u(w(u(u(w(u(w(m(ce,re),P[1]),u(w(m(ae,ft),-R[1]),w(m(St,ct),B[1]))),D[2]),w(u(w(m(ce,re),D[1]),u(w(m(Zt,ot),-R[1]),w(m(It,rt),B[1]))),-P[2])),u(w(u(w(m(ae,ft),D[1]),u(w(m(Zt,ot),-P[1]),w(m(at,$),B[1]))),R[2]),w(u(w(m(St,ct),D[1]),u(w(m(It,rt),-P[1]),w(m(at,$),R[1]))),-B[2]))),O[3]),w(u(u(w(u(w(m(ce,re),P[1]),u(w(m(ae,ft),-R[1]),w(m(St,ct),B[1]))),O[2]),w(u(w(m(ce,re),O[1]),u(w(m(he,nt),-R[1]),w(m(Ot,it),B[1]))),-P[2])),u(w(u(w(m(ae,ft),O[1]),u(w(m(he,nt),-P[1]),w(m(Y,X),B[1]))),R[2]),w(u(w(m(St,ct),O[1]),u(w(m(Ot,it),-P[1]),w(m(Y,X),R[1]))),-B[2]))),-D[3])))),u(u(u(w(u(u(w(u(w(m(ce,re),D[1]),u(w(m(Zt,ot),-R[1]),w(m(It,rt),B[1]))),O[2]),w(u(w(m(ce,re),O[1]),u(w(m(he,nt),-R[1]),w(m(Ot,it),B[1]))),-D[2])),u(w(u(w(m(Zt,ot),O[1]),u(w(m(he,nt),-D[1]),w(m(Z,G),B[1]))),R[2]),w(u(w(m(It,rt),O[1]),u(w(m(Ot,it),-D[1]),w(m(Z,G),R[1]))),-B[2]))),P[3]),w(u(u(w(u(w(m(ae,ft),D[1]),u(w(m(Zt,ot),-P[1]),w(m(at,$),B[1]))),O[2]),w(u(w(m(ae,ft),O[1]),u(w(m(he,nt),-P[1]),w(m(Y,X),B[1]))),-D[2])),u(w(u(w(m(Zt,ot),O[1]),u(w(m(he,nt),-D[1]),w(m(Z,G),B[1]))),P[2]),w(u(w(m(at,$),O[1]),u(w(m(Y,X),-D[1]),w(m(Z,G),P[1]))),-B[2]))),-R[3])),u(w(u(u(w(u(w(m(St,ct),D[1]),u(w(m(It,rt),-P[1]),w(m(at,$),R[1]))),O[2]),w(u(w(m(St,ct),O[1]),u(w(m(Ot,it),-P[1]),w(m(Y,X),R[1]))),-D[2])),u(w(u(w(m(It,rt),O[1]),u(w(m(Ot,it),-D[1]),w(m(Z,G),R[1]))),P[2]),w(u(w(m(at,$),O[1]),u(w(m(Y,X),-D[1]),w(m(Z,G),P[1]))),-R[2]))),B[3]),w(u(u(w(u(w(m(Bt,mt),P[1]),u(w(m(St,ct),-F[1]),w(m(gt,et),R[1]))),D[2]),w(u(w(m(Bt,mt),D[1]),u(w(m(It,rt),-F[1]),w(m(Ct,V),R[1]))),-P[2])),u(w(u(w(m(St,ct),D[1]),u(w(m(It,rt),-P[1]),w(m(at,$),R[1]))),F[2]),w(u(w(m(gt,et),D[1]),u(w(m(Ct,V),-P[1]),w(m(at,$),F[1]))),-R[2]))),O[3]))),u(u(w(u(u(w(u(w(m(Bt,mt),P[1]),u(w(m(St,ct),-F[1]),w(m(gt,et),R[1]))),O[2]),w(u(w(m(Bt,mt),O[1]),u(w(m(Ot,it),-F[1]),w(m(xt,J),R[1]))),-P[2])),u(w(u(w(m(St,ct),O[1]),u(w(m(Ot,it),-P[1]),w(m(Y,X),R[1]))),F[2]),w(u(w(m(gt,et),O[1]),u(w(m(xt,J),-P[1]),w(m(Y,X),F[1]))),-R[2]))),-D[3]),w(u(u(w(u(w(m(Bt,mt),D[1]),u(w(m(It,rt),-F[1]),w(m(Ct,V),R[1]))),O[2]),w(u(w(m(Bt,mt),O[1]),u(w(m(Ot,it),-F[1]),w(m(xt,J),R[1]))),-D[2])),u(w(u(w(m(It,rt),O[1]),u(w(m(Ot,it),-D[1]),w(m(Z,G),R[1]))),F[2]),w(u(w(m(Ct,V),O[1]),u(w(m(xt,J),-D[1]),w(m(Z,G),F[1]))),-R[2]))),P[3])),u(w(u(u(w(u(w(m(St,ct),D[1]),u(w(m(It,rt),-P[1]),w(m(at,$),R[1]))),O[2]),w(u(w(m(St,ct),O[1]),u(w(m(Ot,it),-P[1]),w(m(Y,X),R[1]))),-D[2])),u(w(u(w(m(It,rt),O[1]),u(w(m(Ot,it),-D[1]),w(m(Z,G),R[1]))),P[2]),w(u(w(m(at,$),O[1]),u(w(m(Y,X),-D[1]),w(m(Z,G),P[1]))),-R[2]))),-F[3]),w(u(u(w(u(w(m(gt,et),D[1]),u(w(m(Ct,V),-P[1]),w(m(at,$),F[1]))),O[2]),w(u(w(m(gt,et),O[1]),u(w(m(xt,J),-P[1]),w(m(Y,X),F[1]))),-D[2])),u(w(u(w(m(Ct,V),O[1]),u(w(m(xt,J),-D[1]),w(m(Z,G),F[1]))),P[2]),w(u(w(m(at,$),O[1]),u(w(m(Y,X),-D[1]),w(m(Z,G),P[1]))),-F[2]))),R[3]))))),Tt=m(ue,ye);return Tt[Tt.length-1]}return I}var k=[b,h,_];function y(u){var m=k[u.length];return m||(m=k[u.length]=p(u.length)),m.apply(void 0,u)}function A(u,m,S,w,I,O,D,P){function F(R,B,N,G,X,J){switch(arguments.length){case 0:case 1:return 0;case 2:return w(R,B);case 3:return I(R,B,N);case 4:return O(R,B,N,G);case 5:return D(R,B,N,G,X);case 6:return P(R,B,N,G,X,J)}for(var it=new Array(arguments.length),nt=0;nt<arguments.length;++nt)it[nt]=arguments[nt];return u(it)}return F}function L(){for(;k.length<=o;)k.push(p(k.length));v.exports=A.apply(void 0,[y].concat(k));for(var u=0;u<=o;++u)v.exports[u]=k[u]}L()},727:function(v,d,r){var e=r(2962),l=6;function n(k){var y=k===2?p:k===3?b:k===4?h:k===5?_:a;return k<6?y(e[k]):y(e)}function s(){return[[0]]}function o(k,y){return[[y[0]],[k[0][0]]]}function p(k){return function(y,A){return[k([[+A[0],+y[0][1]],[+A[1],+y[1][1]]]),k([[+y[0][0],+A[0]],[+y[1][0],+A[1]]]),k(y)]}}function b(k){return function(y,A){return[k([[+A[0],+y[0][1],+y[0][2]],[+A[1],+y[1][1],+y[1][2]],[+A[2],+y[2][1],+y[2][2]]]),k([[+y[0][0],+A[0],+y[0][2]],[+y[1][0],+A[1],+y[1][2]],[+y[2][0],+A[2],+y[2][2]]]),k([[+y[0][0],+y[0][1],+A[0]],[+y[1][0],+y[1][1],+A[1]],[+y[2][0],+y[2][1],+A[2]]]),k(y)]}}function h(k){return function(y,A){return[k([[+A[0],+y[0][1],+y[0][2],+y[0][3]],[+A[1],+y[1][1],+y[1][2],+y[1][3]],[+A[2],+y[2][1],+y[2][2],+y[2][3]],[+A[3],+y[3][1],+y[3][2],+y[3][3]]]),k([[+y[0][0],+A[0],+y[0][2],+y[0][3]],[+y[1][0],+A[1],+y[1][2],+y[1][3]],[+y[2][0],+A[2],+y[2][2],+y[2][3]],[+y[3][0],+A[3],+y[3][2],+y[3][3]]]),k([[+y[0][0],+y[0][1],+A[0],+y[0][3]],[+y[1][0],+y[1][1],+A[1],+y[1][3]],[+y[2][0],+y[2][1],+A[2],+y[2][3]],[+y[3][0],+y[3][1],+A[3],+y[3][3]]]),k([[+y[0][0],+y[0][1],+y[0][2],+A[0]],[+y[1][0],+y[1][1],+y[1][2],+A[1]],[+y[2][0],+y[2][1],+y[2][2],+A[2]],[+y[3][0],+y[3][1],+y[3][2],+A[3]]]),k(y)]}}function _(k){return function(y,A){return[k([[+A[0],+y[0][1],+y[0][2],+y[0][3],+y[0][4]],[+A[1],+y[1][1],+y[1][2],+y[1][3],+y[1][4]],[+A[2],+y[2][1],+y[2][2],+y[2][3],+y[2][4]],[+A[3],+y[3][1],+y[3][2],+y[3][3],+y[3][4]],[+A[4],+y[4][1],+y[4][2],+y[4][3],+y[4][4]]]),k([[+y[0][0],+A[0],+y[0][2],+y[0][3],+y[0][4]],[+y[1][0],+A[1],+y[1][2],+y[1][3],+y[1][4]],[+y[2][0],+A[2],+y[2][2],+y[2][3],+y[2][4]],[+y[3][0],+A[3],+y[3][2],+y[3][3],+y[3][4]],[+y[4][0],+A[4],+y[4][2],+y[4][3],+y[4][4]]]),k([[+y[0][0],+y[0][1],+A[0],+y[0][3],+y[0][4]],[+y[1][0],+y[1][1],+A[1],+y[1][3],+y[1][4]],[+y[2][0],+y[2][1],+A[2],+y[2][3],+y[2][4]],[+y[3][0],+y[3][1],+A[3],+y[3][3],+y[3][4]],[+y[4][0],+y[4][1],+A[4],+y[4][3],+y[4][4]]]),k([[+y[0][0],+y[0][1],+y[0][2],+A[0],+y[0][4]],[+y[1][0],+y[1][1],+y[1][2],+A[1],+y[1][4]],[+y[2][0],+y[2][1],+y[2][2],+A[2],+y[2][4]],[+y[3][0],+y[3][1],+y[3][2],+A[3],+y[3][4]],[+y[4][0],+y[4][1],+y[4][2],+A[4],+y[4][4]]]),k([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+A[0]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+A[1]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+A[2]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+A[3]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+A[4]]]),k(y)]}}function a(k){return function(y,A){return[k([[+A[0],+y[0][1],+y[0][2],+y[0][3],+y[0][4],+y[0][5]],[+A[1],+y[1][1],+y[1][2],+y[1][3],+y[1][4],+y[1][5]],[+A[2],+y[2][1],+y[2][2],+y[2][3],+y[2][4],+y[2][5]],[+A[3],+y[3][1],+y[3][2],+y[3][3],+y[3][4],+y[3][5]],[+A[4],+y[4][1],+y[4][2],+y[4][3],+y[4][4],+y[4][5]],[+A[5],+y[5][1],+y[5][2],+y[5][3],+y[5][4],+y[5][5]]]),k([[+y[0][0],+A[0],+y[0][2],+y[0][3],+y[0][4],+y[0][5]],[+y[1][0],+A[1],+y[1][2],+y[1][3],+y[1][4],+y[1][5]],[+y[2][0],+A[2],+y[2][2],+y[2][3],+y[2][4],+y[2][5]],[+y[3][0],+A[3],+y[3][2],+y[3][3],+y[3][4],+y[3][5]],[+y[4][0],+A[4],+y[4][2],+y[4][3],+y[4][4],+y[4][5]],[+y[5][0],+A[5],+y[5][2],+y[5][3],+y[5][4],+y[5][5]]]),k([[+y[0][0],+y[0][1],+A[0],+y[0][3],+y[0][4],+y[0][5]],[+y[1][0],+y[1][1],+A[1],+y[1][3],+y[1][4],+y[1][5]],[+y[2][0],+y[2][1],+A[2],+y[2][3],+y[2][4],+y[2][5]],[+y[3][0],+y[3][1],+A[3],+y[3][3],+y[3][4],+y[3][5]],[+y[4][0],+y[4][1],+A[4],+y[4][3],+y[4][4],+y[4][5]],[+y[5][0],+y[5][1],+A[5],+y[5][3],+y[5][4],+y[5][5]]]),k([[+y[0][0],+y[0][1],+y[0][2],+A[0],+y[0][4],+y[0][5]],[+y[1][0],+y[1][1],+y[1][2],+A[1],+y[1][4],+y[1][5]],[+y[2][0],+y[2][1],+y[2][2],+A[2],+y[2][4],+y[2][5]],[+y[3][0],+y[3][1],+y[3][2],+A[3],+y[3][4],+y[3][5]],[+y[4][0],+y[4][1],+y[4][2],+A[4],+y[4][4],+y[4][5]],[+y[5][0],+y[5][1],+y[5][2],+A[5],+y[5][4],+y[5][5]]]),k([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+A[0],+y[0][5]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+A[1],+y[1][5]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+A[2],+y[2][5]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+A[3],+y[3][5]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+A[4],+y[4][5]],[+y[5][0],+y[5][1],+y[5][2],+y[5][3],+A[5],+y[5][5]]]),k([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+y[0][4],+A[0]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+y[1][4],+A[1]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+y[2][4],+A[2]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+y[3][4],+A[3]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+y[4][4],+A[4]],[+y[5][0],+y[5][1],+y[5][2],+y[5][3],+y[5][4],+A[5]]]),k(y)]}}var c=[s,o];function f(k,y,A,L,u,m,S,w){return function(I,O){switch(I.length){case 0:return k(I,O);case 1:return y(I,O);case 2:return A(I,O);case 3:return L(I,O);case 4:return u(I,O);case 5:return m(I,O)}var D=S[I.length];return D||(D=S[I.length]=w(I.length)),D(I,O)}}function x(){for(;c.length<l;)c.push(n(c.length));v.exports=f.apply(void 0,c.concat([c,n]));for(var k=0;k<l;++k)v.exports[k]=c[k]}x()},3250:function(v,d,r){var e=r(5250),l=r(8210),n=r(3012),s=r(8545),o=5,p=11102230246251565e-32,b=(3+16*p)*p,h=(7+56*p)*p;function _(m,S,w,I){return function(O,D,P){var F=m(m(S(D[1],P[0]),S(-P[1],D[0])),m(S(O[1],D[0]),S(-D[1],O[0]))),R=m(S(O[1],P[0]),S(-P[1],O[0])),B=I(F,R);return B[B.length-1]}}function a(m,S,w,I){return function(O,D,P,F){var R=m(m(w(m(S(P[1],F[0]),S(-F[1],P[0])),D[2]),m(w(m(S(D[1],F[0]),S(-F[1],D[0])),-P[2]),w(m(S(D[1],P[0]),S(-P[1],D[0])),F[2]))),m(w(m(S(D[1],F[0]),S(-F[1],D[0])),O[2]),m(w(m(S(O[1],F[0]),S(-F[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),F[2])))),B=m(m(w(m(S(P[1],F[0]),S(-F[1],P[0])),O[2]),m(w(m(S(O[1],F[0]),S(-F[1],O[0])),-P[2]),w(m(S(O[1],P[0]),S(-P[1],O[0])),F[2]))),m(w(m(S(D[1],P[0]),S(-P[1],D[0])),O[2]),m(w(m(S(O[1],P[0]),S(-P[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),P[2])))),N=I(R,B);return N[N.length-1]}}function c(m,S,w,I){return function(O,D,P,F,R){var B=m(m(m(w(m(w(m(S(F[1],R[0]),S(-R[1],F[0])),P[2]),m(w(m(S(P[1],R[0]),S(-R[1],P[0])),-F[2]),w(m(S(P[1],F[0]),S(-F[1],P[0])),R[2]))),D[3]),m(w(m(w(m(S(F[1],R[0]),S(-R[1],F[0])),D[2]),m(w(m(S(D[1],R[0]),S(-R[1],D[0])),-F[2]),w(m(S(D[1],F[0]),S(-F[1],D[0])),R[2]))),-P[3]),w(m(w(m(S(P[1],R[0]),S(-R[1],P[0])),D[2]),m(w(m(S(D[1],R[0]),S(-R[1],D[0])),-P[2]),w(m(S(D[1],P[0]),S(-P[1],D[0])),R[2]))),F[3]))),m(w(m(w(m(S(P[1],F[0]),S(-F[1],P[0])),D[2]),m(w(m(S(D[1],F[0]),S(-F[1],D[0])),-P[2]),w(m(S(D[1],P[0]),S(-P[1],D[0])),F[2]))),-R[3]),m(w(m(w(m(S(F[1],R[0]),S(-R[1],F[0])),D[2]),m(w(m(S(D[1],R[0]),S(-R[1],D[0])),-F[2]),w(m(S(D[1],F[0]),S(-F[1],D[0])),R[2]))),O[3]),w(m(w(m(S(F[1],R[0]),S(-R[1],F[0])),O[2]),m(w(m(S(O[1],R[0]),S(-R[1],O[0])),-F[2]),w(m(S(O[1],F[0]),S(-F[1],O[0])),R[2]))),-D[3])))),m(m(w(m(w(m(S(D[1],R[0]),S(-R[1],D[0])),O[2]),m(w(m(S(O[1],R[0]),S(-R[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),R[2]))),F[3]),m(w(m(w(m(S(D[1],F[0]),S(-F[1],D[0])),O[2]),m(w(m(S(O[1],F[0]),S(-F[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),F[2]))),-R[3]),w(m(w(m(S(P[1],F[0]),S(-F[1],P[0])),D[2]),m(w(m(S(D[1],F[0]),S(-F[1],D[0])),-P[2]),w(m(S(D[1],P[0]),S(-P[1],D[0])),F[2]))),O[3]))),m(w(m(w(m(S(P[1],F[0]),S(-F[1],P[0])),O[2]),m(w(m(S(O[1],F[0]),S(-F[1],O[0])),-P[2]),w(m(S(O[1],P[0]),S(-P[1],O[0])),F[2]))),-D[3]),m(w(m(w(m(S(D[1],F[0]),S(-F[1],D[0])),O[2]),m(w(m(S(O[1],F[0]),S(-F[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),F[2]))),P[3]),w(m(w(m(S(D[1],P[0]),S(-P[1],D[0])),O[2]),m(w(m(S(O[1],P[0]),S(-P[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),P[2]))),-F[3]))))),N=m(m(m(w(m(w(m(S(F[1],R[0]),S(-R[1],F[0])),P[2]),m(w(m(S(P[1],R[0]),S(-R[1],P[0])),-F[2]),w(m(S(P[1],F[0]),S(-F[1],P[0])),R[2]))),O[3]),w(m(w(m(S(F[1],R[0]),S(-R[1],F[0])),O[2]),m(w(m(S(O[1],R[0]),S(-R[1],O[0])),-F[2]),w(m(S(O[1],F[0]),S(-F[1],O[0])),R[2]))),-P[3])),m(w(m(w(m(S(P[1],R[0]),S(-R[1],P[0])),O[2]),m(w(m(S(O[1],R[0]),S(-R[1],O[0])),-P[2]),w(m(S(O[1],P[0]),S(-P[1],O[0])),R[2]))),F[3]),w(m(w(m(S(P[1],F[0]),S(-F[1],P[0])),O[2]),m(w(m(S(O[1],F[0]),S(-F[1],O[0])),-P[2]),w(m(S(O[1],P[0]),S(-P[1],O[0])),F[2]))),-R[3]))),m(m(w(m(w(m(S(P[1],R[0]),S(-R[1],P[0])),D[2]),m(w(m(S(D[1],R[0]),S(-R[1],D[0])),-P[2]),w(m(S(D[1],P[0]),S(-P[1],D[0])),R[2]))),O[3]),w(m(w(m(S(P[1],R[0]),S(-R[1],P[0])),O[2]),m(w(m(S(O[1],R[0]),S(-R[1],O[0])),-P[2]),w(m(S(O[1],P[0]),S(-P[1],O[0])),R[2]))),-D[3])),m(w(m(w(m(S(D[1],R[0]),S(-R[1],D[0])),O[2]),m(w(m(S(O[1],R[0]),S(-R[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),R[2]))),P[3]),w(m(w(m(S(D[1],P[0]),S(-P[1],D[0])),O[2]),m(w(m(S(O[1],P[0]),S(-P[1],O[0])),-D[2]),w(m(S(O[1],D[0]),S(-D[1],O[0])),P[2]))),-R[3])))),G=I(B,N);return G[G.length-1]}}function f(m){var S=m===3?_:m===4?a:c;return S(l,e,n,s)}var x=f(3),k=f(4),y=[function(){return 0},function(){return 0},function(m,S){return S[0]-m[0]},function(m,S,w){var I=(m[1]-w[1])*(S[0]-w[0]),O=(m[0]-w[0])*(S[1]-w[1]),D=I-O,P;if(I>0){if(O<=0)return D;P=I+O}else if(I<0){if(O>=0)return D;P=-(I+O)}else return D;var F=b*P;return D>=F||D<=-F?D:x(m,S,w)},function(m,S,w,I){var O=m[0]-I[0],D=S[0]-I[0],P=w[0]-I[0],F=m[1]-I[1],R=S[1]-I[1],B=w[1]-I[1],N=m[2]-I[2],G=S[2]-I[2],X=w[2]-I[2],J=D*B,it=P*R,nt=P*F,q=O*B,Z=O*R,$=D*F,V=N*(J-it)+G*(nt-q)+X*(Z-$),rt=(Math.abs(J)+Math.abs(it))*Math.abs(N)+(Math.abs(nt)+Math.abs(q))*Math.abs(G)+(Math.abs(Z)+Math.abs($))*Math.abs(X),ot=h*rt;return V>ot||-V>ot?V:k(m,S,w,I)}];function A(m){var S=y[m.length];return S||(S=y[m.length]=f(m.length)),S.apply(void 0,m)}function L(m,S,w,I,O,D,P){return function(F,R,B,N,G){switch(arguments.length){case 0:case 1:return 0;case 2:return I(F,R);case 3:return O(F,R,B);case 4:return D(F,R,B,N);case 5:return P(F,R,B,N,G)}for(var X=new Array(arguments.length),J=0;J<arguments.length;++J)X[J]=arguments[J];return m(X)}}function u(){for(;y.length<=o;)y.push(f(y.length));v.exports=L.apply(void 0,[A].concat(y));for(var m=0;m<=o;++m)v.exports[m]=y[m]}u()},5382:function(v,d,r){var e=r(8210),l=r(3012);v.exports=n;function n(s,o){if(s.length===1)return l(o,s[0]);if(o.length===1)return l(s,o[0]);if(s.length===0||o.length===0)return[0];var p=[0];if(s.length<o.length)for(var b=0;b<s.length;++b)p=e(p,l(o,s[b]));else for(var b=0;b<o.length;++b)p=e(p,l(s,o[b]));return p}},3012:function(v,d,r){var e=r(5250),l=r(9362);v.exports=n;function n(s,o){var p=s.length;if(p===1){var b=e(s[0],o);return b[0]?b:[b[1]]}var h=new Array(2*p),_=[.1,.1],a=[.1,.1],c=0;e(s[0],o,_),_[0]&&(h[c++]=_[0]);for(var f=1;f<p;++f){e(s[f],o,a);var x=_[1];l(x,a[0],_),_[0]&&(h[c++]=_[0]);var k=a[1],y=_[1],A=k+y,L=A-k,u=y-L;_[1]=A,u&&(h[c++]=u)}return _[1]&&(h[c++]=_[1]),c===0&&(h[c++]=0),h.length=c,h}},1125:function(v,d,r){v.exports=n;var e=r(3250)[3];function l(s,o,p,b){for(var h=0;h<2;++h){var _=s[h],a=o[h],c=Math.min(_,a),f=Math.max(_,a),x=p[h],k=b[h],y=Math.min(x,k),A=Math.max(x,k);if(A<c||f<y)return!1}return!0}function n(s,o,p,b){var h=e(s,p,b),_=e(o,p,b);if(h>0&&_>0||h<0&&_<0)return!1;var a=e(p,s,o),c=e(b,s,o);return a>0&&c>0||a<0&&c<0?!1:h===0&&_===0&&a===0&&c===0?l(s,o,p,b):!0}},8545:function(v){v.exports=r;function d(e,l){var n=e+l,s=n-e,o=n-s,p=l-s,b=e-o,h=b+p;return h?[h,n]:[n]}function r(e,l){var n=e.length|0,s=l.length|0;if(n===1&&s===1)return d(e[0],-l[0]);var o=n+s,p=new Array(o),b=0,h=0,_=0,a=Math.abs,c=e[h],f=a(c),x=-l[_],k=a(x),y,A;f<k?(A=c,h+=1,h<n&&(c=e[h],f=a(c))):(A=x,_+=1,_<s&&(x=-l[_],k=a(x))),h<n&&f<k||_>=s?(y=c,h+=1,h<n&&(c=e[h],f=a(c))):(y=x,_+=1,_<s&&(x=-l[_],k=a(x)));for(var L=y+A,u=L-y,m=A-u,S=m,w=L,I,O,D,P,F;h<n&&_<s;)f<k?(y=c,h+=1,h<n&&(c=e[h],f=a(c))):(y=x,_+=1,_<s&&(x=-l[_],k=a(x))),A=S,L=y+A,u=L-y,m=A-u,m&&(p[b++]=m),I=w+L,O=I-w,D=I-O,P=L-O,F=w-D,S=F+P,w=I;for(;h<n;)y=c,A=S,L=y+A,u=L-y,m=A-u,m&&(p[b++]=m),I=w+L,O=I-w,D=I-O,P=L-O,F=w-D,S=F+P,w=I,h+=1,h<n&&(c=e[h]);for(;_<s;)y=x,A=S,L=y+A,u=L-y,m=A-u,m&&(p[b++]=m),I=w+L,O=I-w,D=I-O,P=L-O,F=w-D,S=F+P,w=I,_+=1,_<s&&(x=-l[_]);return S&&(p[b++]=S),w&&(p[b++]=w),b||(p[b++]=0),p.length=b,p}},8210:function(v){v.exports=r;function d(e,l){var n=e+l,s=n-e,o=n-s,p=l-s,b=e-o,h=b+p;return h?[h,n]:[n]}function r(e,l){var n=e.length|0,s=l.length|0;if(n===1&&s===1)return d(e[0],l[0]);var o=n+s,p=new Array(o),b=0,h=0,_=0,a=Math.abs,c=e[h],f=a(c),x=l[_],k=a(x),y,A;f<k?(A=c,h+=1,h<n&&(c=e[h],f=a(c))):(A=x,_+=1,_<s&&(x=l[_],k=a(x))),h<n&&f<k||_>=s?(y=c,h+=1,h<n&&(c=e[h],f=a(c))):(y=x,_+=1,_<s&&(x=l[_],k=a(x)));for(var L=y+A,u=L-y,m=A-u,S=m,w=L,I,O,D,P,F;h<n&&_<s;)f<k?(y=c,h+=1,h<n&&(c=e[h],f=a(c))):(y=x,_+=1,_<s&&(x=l[_],k=a(x))),A=S,L=y+A,u=L-y,m=A-u,m&&(p[b++]=m),I=w+L,O=I-w,D=I-O,P=L-O,F=w-D,S=F+P,w=I;for(;h<n;)y=c,A=S,L=y+A,u=L-y,m=A-u,m&&(p[b++]=m),I=w+L,O=I-w,D=I-O,P=L-O,F=w-D,S=F+P,w=I,h+=1,h<n&&(c=e[h]);for(;_<s;)y=x,A=S,L=y+A,u=L-y,m=A-u,m&&(p[b++]=m),I=w+L,O=I-w,D=I-O,P=L-O,F=w-D,S=F+P,w=I,_+=1,_<s&&(x=l[_]);return S&&(p[b++]=S),w&&(p[b++]=w),b||(p[b++]=0),p.length=b,p}},9127:function(v,d,r){v.exports=n;var e=r(6204),l=r(5771);function n(s){return l(e(s))}},7765:function(v,d,r){v.exports=c;var e=r(9618),l=r(1888),n=r(446),s=r(1570);function o(f){for(var x=f.length,k=0,y=0;y<x;++y)k=Math.max(k,f[y].length)|0;return k-1}function p(f,x){for(var k=f.length,y=l.mallocUint8(k),A=0;A<k;++A)y[A]=f[A]<x|0;return y}function b(f,x){for(var k=f.length,y=x*(x+1)/2*k|0,A=l.mallocUint32(y*2),L=0,u=0;u<k;++u)for(var m=f[u],x=m.length,S=0;S<x;++S)for(var w=0;w<S;++w){var I=m[w],O=m[S];A[L++]=Math.min(I,O)|0,A[L++]=Math.max(I,O)|0}var D=L/2|0;n(e(A,[D,2]));for(var P=2,u=2;u<L;u+=2)A[u-2]===A[u]&&A[u-1]===A[u+1]||(A[P++]=A[u],A[P++]=A[u+1]);return e(A,[P/2|0,2])}function h(f,x,k,y){for(var A=f.data,L=f.shape[0],u=l.mallocDouble(L),m=0,S=0;S<L;++S){var w=A[2*S],I=A[2*S+1];if(k[w]!==k[I]){var O=x[w],D=x[I];A[2*m]=w,A[2*m+1]=I,u[m++]=(D-y)/(D-O)}}return f.shape[0]=m,e(u,[m])}function _(f,x){var k=l.mallocInt32(x*2),y=f.shape[0],A=f.data;k[0]=0;for(var L=0,u=0;u<y;++u){var m=A[2*u];if(m!==L){for(k[2*L+1]=u;++L<m;)k[2*L]=u,k[2*L+1]=u;k[2*L]=u}}for(k[2*L+1]=y;++L<x;)k[2*L]=k[2*L+1]=y;return k}function a(f){for(var x=f.shape[0]|0,k=f.data,y=new Array(x),A=0;A<x;++A)y[A]=[k[2*A],k[2*A+1]];return y}function c(f,x,k,y){k=k||0,typeof y>"u"&&(y=o(f));var A=f.length;if(A===0||y<1)return{cells:[],vertexIds:[],vertexWeights:[]};var L=p(x,+k),u=b(f,y),m=h(u,x,L,+k),S=_(u,x.length|0),w=s(y)(f,u.data,S,L),I=a(u),O=[].slice.call(m.data,0,m.shape[0]);return l.free(L),l.free(u.data),l.free(m.data),l.free(S),{cells:w,vertexIds:I,vertexWeights:O}}},1570:function(v){v.exports=r;var d=[function(){function e(l,n,s,o){for(var p=l.length,b=[],h=0;h<p;++h)var _=l[h],a=_.length;return b}return e},function(){function e(n,s,o,p){for(var b=Math.min(o,p)|0,h=Math.max(o,p)|0,_=n[2*b],a=n[2*b+1];_<a;){var c=_+a>>1,f=s[2*c+1];if(f===h)return c;h<f?a=c:_=c+1}return _}function l(n,s,o,p){for(var b=n.length,h=[],_=0;_<b;++_){var a=n[_],c=a.length;if(c===2){var f=(p[a[0]]<<0)+(p[a[1]]<<1);if(f===0||f===3)continue;switch(f){case 0:break;case 1:h.push([e(o,s,a[0],a[1])]);break;case 2:h.push([e(o,s,a[1],a[0])]);break}}}return h}return l},function(){function e(n,s,o,p){for(var b=Math.min(o,p)|0,h=Math.max(o,p)|0,_=n[2*b],a=n[2*b+1];_<a;){var c=_+a>>1,f=s[2*c+1];if(f===h)return c;h<f?a=c:_=c+1}return _}function l(n,s,o,p){for(var b=n.length,h=[],_=0;_<b;++_){var a=n[_],c=a.length;if(c===3){var f=(p[a[0]]<<0)+(p[a[1]]<<1)+(p[a[2]]<<2);if(f===0||f===7)continue;switch(f){case 0:break;case 1:h.push([e(o,s,a[0],a[2]),e(o,s,a[0],a[1])]);break;case 2:h.push([e(o,s,a[1],a[0]),e(o,s,a[1],a[2])]);break;case 3:h.push([e(o,s,a[0],a[2]),e(o,s,a[1],a[2])]);break;case 4:h.push([e(o,s,a[2],a[1]),e(o,s,a[2],a[0])]);break;case 5:h.push([e(o,s,a[2],a[1]),e(o,s,a[0],a[1])]);break;case 6:h.push([e(o,s,a[1],a[0]),e(o,s,a[2],a[0])]);break}}else if(c===2){var f=(p[a[0]]<<0)+(p[a[1]]<<1);if(f===0||f===3)continue;switch(f){case 0:break;case 1:h.push([e(o,s,a[0],a[1])]);break;case 2:h.push([e(o,s,a[1],a[0])]);break}}}return h}return l},function(){function e(n,s,o,p){for(var b=Math.min(o,p)|0,h=Math.max(o,p)|0,_=n[2*b],a=n[2*b+1];_<a;){var c=_+a>>1,f=s[2*c+1];if(f===h)return c;h<f?a=c:_=c+1}return _}function l(n,s,o,p){for(var b=n.length,h=[],_=0;_<b;++_){var a=n[_],c=a.length;if(c===4){var f=(p[a[0]]<<0)+(p[a[1]]<<1)+(p[a[2]]<<2)+(p[a[3]]<<3);if(f===0||f===15)continue;switch(f){case 0:break;case 1:h.push([e(o,s,a[0],a[1]),e(o,s,a[0],a[2]),e(o,s,a[0],a[3])]);break;case 2:h.push([e(o,s,a[1],a[2]),e(o,s,a[1],a[0]),e(o,s,a[1],a[3])]);break;case 3:h.push([e(o,s,a[1],a[2]),e(o,s,a[0],a[2]),e(o,s,a[0],a[3])],[e(o,s,a[1],a[3]),e(o,s,a[1],a[2]),e(o,s,a[0],a[3])]);break;case 4:h.push([e(o,s,a[2],a[0]),e(o,s,a[2],a[1]),e(o,s,a[2],a[3])]);break;case 5:h.push([e(o,s,a[0],a[1]),e(o,s,a[2],a[1]),e(o,s,a[0],a[3])],[e(o,s,a[2],a[1]),e(o,s,a[2],a[3]),e(o,s,a[0],a[3])]);break;case 6:h.push([e(o,s,a[2],a[0]),e(o,s,a[1],a[0]),e(o,s,a[1],a[3])],[e(o,s,a[2],a[3]),e(o,s,a[2],a[0]),e(o,s,a[1],a[3])]);break;case 7:h.push([e(o,s,a[0],a[3]),e(o,s,a[1],a[3]),e(o,s,a[2],a[3])]);break;case 8:h.push([e(o,s,a[3],a[1]),e(o,s,a[3],a[0]),e(o,s,a[3],a[2])]);break;case 9:h.push([e(o,s,a[3],a[1]),e(o,s,a[0],a[1]),e(o,s,a[0],a[2])],[e(o,s,a[3],a[2]),e(o,s,a[3],a[1]),e(o,s,a[0],a[2])]);break;case 10:h.push([e(o,s,a[1],a[0]),e(o,s,a[3],a[0]),e(o,s,a[1],a[2])],[e(o,s,a[3],a[0]),e(o,s,a[3],a[2]),e(o,s,a[1],a[2])]);break;case 11:h.push([e(o,s,a[1],a[2]),e(o,s,a[0],a[2]),e(o,s,a[3],a[2])]);break;case 12:h.push([e(o,s,a[3],a[0]),e(o,s,a[2],a[0]),e(o,s,a[2],a[1])],[e(o,s,a[3],a[1]),e(o,s,a[3],a[0]),e(o,s,a[2],a[1])]);break;case 13:h.push([e(o,s,a[0],a[1]),e(o,s,a[2],a[1]),e(o,s,a[3],a[1])]);break;case 14:h.push([e(o,s,a[2],a[0]),e(o,s,a[1],a[0]),e(o,s,a[3],a[0])]);break}}else if(c===3){var f=(p[a[0]]<<0)+(p[a[1]]<<1)+(p[a[2]]<<2);if(f===0||f===7)continue;switch(f){case 0:break;case 1:h.push([e(o,s,a[0],a[2]),e(o,s,a[0],a[1])]);break;case 2:h.push([e(o,s,a[1],a[0]),e(o,s,a[1],a[2])]);break;case 3:h.push([e(o,s,a[0],a[2]),e(o,s,a[1],a[2])]);break;case 4:h.push([e(o,s,a[2],a[1]),e(o,s,a[2],a[0])]);break;case 5:h.push([e(o,s,a[2],a[1]),e(o,s,a[0],a[1])]);break;case 6:h.push([e(o,s,a[1],a[0]),e(o,s,a[2],a[0])]);break}}else if(c===2){var f=(p[a[0]]<<0)+(p[a[1]]<<1);if(f===0||f===3)continue;switch(f){case 0:break;case 1:h.push([e(o,s,a[0],a[1])]);break;case 2:h.push([e(o,s,a[1],a[0])]);break}}}return h}return l}];function r(e){return d[e]()}},6803:function(v,d,r){r(8828),r(1755);function e(l,n){var s=l.length,o=l.length-n.length,p=Math.min;if(o)return o;switch(s){case 0:return 0;case 1:return l[0]-n[0];case 2:var c=l[0]+l[1]-n[0]-n[1];return c||p(l[0],l[1])-p(n[0],n[1]);case 3:var b=l[0]+l[1],h=n[0]+n[1];if(c=b+l[2]-(h+n[2]),c)return c;var _=p(l[0],l[1]),a=p(n[0],n[1]),c=p(_,l[2])-p(a,n[2]);return c||p(_+l[2],b)-p(a+n[2],h);default:var f=l.slice(0);f.sort();var x=n.slice(0);x.sort();for(var k=0;k<s;++k)if(o=f[k]-x[k],o)return o;return 0}}d.Fw=e},3105:function(v,d){"use restrict";var r=32;d.INT_BITS=r,d.INT_MAX=2147483647,d.INT_MIN=-1<<r-1,d.sign=function(n){return(n>0)-(n<0)},d.abs=function(n){var s=n>>r-1;return(n^s)-s},d.min=function(n,s){return s^(n^s)&-(n<s)},d.max=function(n,s){return n^(n^s)&-(n<s)},d.isPow2=function(n){return!(n&n-1)&&!!n},d.log2=function(n){var s,o;return s=(n>65535)<<4,n>>>=s,o=(n>255)<<3,n>>>=o,s|=o,o=(n>15)<<2,n>>>=o,s|=o,o=(n>3)<<1,n>>>=o,s|=o,s|n>>1},d.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},d.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function e(n){var s=32;return n&=-n,n&&s--,n&65535&&(s-=16),n&16711935&&(s-=8),n&252645135&&(s-=4),n&858993459&&(s-=2),n&1431655765&&(s-=1),s}d.countTrailingZeros=e,d.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},d.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},d.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var l=new Array(256);(function(n){for(var s=0;s<256;++s){var o=s,p=s,b=7;for(o>>>=1;o;o>>>=1)p<<=1,p|=o&1,--b;n[s]=p<<b&255}})(l),d.reverse=function(n){return l[n&255]<<24|l[n>>>8&255]<<16|l[n>>>16&255]<<8|l[n>>>24&255]},d.interleave2=function(n,s){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,s&=65535,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,n|s<<1},d.deinterleave2=function(n,s){return n=n>>>s&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},d.interleave3=function(n,s,o){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,s&=1023,s=(s|s<<16)&4278190335,s=(s|s<<8)&251719695,s=(s|s<<4)&3272356035,s=(s|s<<2)&1227133513,n|=s<<1,o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,n|o<<2},d.deinterleave3=function(n,s){return n=n>>>s&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},d.nextCombination=function(n){var s=n|n-1;return s+1|(~s&-~s)-1>>>e(n)+1}},2014:function(v,d,r){"use restrict";var e=r(3105),l=r(4623);function n(m){for(var S=0,w=Math.max,I=0,O=m.length;I<O;++I)S=w(S,m[I].length);return S-1}d.dimension=n;function s(m){for(var S=-1,w=Math.max,I=0,O=m.length;I<O;++I)for(var D=m[I],P=0,F=D.length;P<F;++P)S=w(S,D[P]);return S+1}d.countVertices=s;function o(m){for(var S=new Array(m.length),w=0,I=m.length;w<I;++w)S[w]=m[w].slice(0);return S}d.cloneCells=o;function p(m,S){var w=m.length,I=m.length-S.length,O=Math.min;if(I)return I;switch(w){case 0:return 0;case 1:return m[0]-S[0];case 2:var B=m[0]+m[1]-S[0]-S[1];return B||O(m[0],m[1])-O(S[0],S[1]);case 3:var D=m[0]+m[1],P=S[0]+S[1];if(B=D+m[2]-(P+S[2]),B)return B;var F=O(m[0],m[1]),R=O(S[0],S[1]),B=O(F,m[2])-O(R,S[2]);return B||O(F+m[2],D)-O(R+S[2],P);default:var N=m.slice(0);N.sort();var G=S.slice(0);G.sort();for(var X=0;X<w;++X)if(I=N[X]-G[X],I)return I;return 0}}d.compareCells=p;function b(m,S){return p(m[0],S[0])}function h(m,S){if(S){for(var w=m.length,I=new Array(w),O=0;O<w;++O)I[O]=[m[O],S[O]];I.sort(b);for(var O=0;O<w;++O)m[O]=I[O][0],S[O]=I[O][1];return m}else return m.sort(p),m}d.normalize=h;function _(m){if(m.length===0)return[];for(var S=1,w=m.length,I=1;I<w;++I){var O=m[I];if(p(O,m[I-1])){if(I===S){S++;continue}m[S++]=O}}return m.length=S,m}d.unique=_;function a(m,S){for(var w=0,I=m.length-1,O=-1;w<=I;){var D=w+I>>1,P=p(m[D],S);P<=0?(P===0&&(O=D),w=D+1):P>0&&(I=D-1)}return O}d.findCell=a;function c(m,S){for(var w=new Array(m.length),I=0,O=w.length;I<O;++I)w[I]=[];for(var D=[],I=0,P=S.length;I<P;++I)for(var F=S[I],R=F.length,B=1,N=1<<R;B<N;++B){D.length=e.popCount(B);for(var G=0,X=0;X<R;++X)B&1<<X&&(D[G++]=F[X]);var J=a(m,D);if(!(J<0))for(;w[J++].push(I),!(J>=m.length||p(m[J],D)!==0););}return w}d.incidence=c;function f(m,S){if(!S)return c(_(k(m,0)),m);for(var w=new Array(S),I=0;I<S;++I)w[I]=[];for(var I=0,O=m.length;I<O;++I)for(var D=m[I],P=0,F=D.length;P<F;++P)w[D[P]].push(I);return w}d.dual=f;function x(m){for(var S=[],w=0,I=m.length;w<I;++w)for(var O=m[w],D=O.length|0,P=1,F=1<<D;P<F;++P){for(var R=[],B=0;B<D;++B)P>>>B&1&&R.push(O[B]);S.push(R)}return h(S)}d.explode=x;function k(m,S){if(S<0)return[];for(var w=[],I=(1<<S+1)-1,O=0;O<m.length;++O)for(var D=m[O],P=I;P<1<<D.length;P=e.nextCombination(P)){for(var F=new Array(S+1),R=0,B=0;B<D.length;++B)P&1<<B&&(F[R++]=D[B]);w.push(F)}return h(w)}d.skeleton=k;function y(m){for(var S=[],w=0,I=m.length;w<I;++w)for(var O=m[w],D=0,P=O.length;D<P;++D){for(var F=new Array(O.length-1),R=0,B=0;R<P;++R)R!==D&&(F[B++]=O[R]);S.push(F)}return h(S)}d.boundary=y;function A(m,S){for(var w=new l(S),I=0;I<m.length;++I)for(var O=m[I],D=0;D<O.length;++D)for(var P=D+1;P<O.length;++P)w.link(O[D],O[P]);for(var F=[],R=w.ranks,I=0;I<R.length;++I)R[I]=-1;for(var I=0;I<m.length;++I){var B=w.find(m[I][0]);R[B]<0?(R[B]=F.length,F.push([m[I].slice(0)])):F[R[B]].push(m[I].slice(0))}return F}function L(m){for(var S=_(h(k(m,0))),w=new l(S.length),I=0;I<m.length;++I)for(var O=m[I],D=0;D<O.length;++D)for(var P=a(S,[O[D]]),F=D+1;F<O.length;++F)w.link(P,a(S,[O[F]]));for(var R=[],B=w.ranks,I=0;I<B.length;++I)B[I]=-1;for(var I=0;I<m.length;++I){var N=w.find(a(S,[m[I][0]]));B[N]<0?(B[N]=R.length,R.push([m[I].slice(0)])):R[B[N]].push(m[I].slice(0))}return R}function u(m,S){return S?A(m,S):L(m)}d.connectedComponents=u},4623:function(v){"use restrict";v.exports=d;function d(r){this.roots=new Array(r),this.ranks=new Array(r);for(var e=0;e<r;++e)this.roots[e]=e,this.ranks[e]=0}d.prototype.length=function(){return this.roots.length},d.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},d.prototype.find=function(r){for(var e=this.roots;e[r]!==r;){var l=e[r];e[r]=e[l],r=l}return r},d.prototype.link=function(r,e){var l=this.find(r),n=this.find(e);if(l!==n){var s=this.ranks,o=this.roots,p=s[l],b=s[n];p<b?o[l]=n:b<p?o[n]=l:(o[n]=l,++s[l])}}},5878:function(v,d,r){v.exports=s;var e=r(3250),l=r(2014);function n(o,p,b){var h=Math.abs(e(o,p,b)),_=Math.sqrt(Math.pow(p[0]-b[0],2)+Math.pow(p[1]-b[1],2));return h/_}function s(o,p,b){for(var h=p.length,_=o.length,a=new Array(h),c=new Array(h),f=new Array(h),x=new Array(h),k=0;k<h;++k)a[k]=c[k]=-1,f[k]=1/0,x[k]=!1;for(var k=0;k<_;++k){var y=o[k];if(y.length!==2)throw new Error("Input must be a graph");var A=y[1],L=y[0];c[L]!==-1?c[L]=-2:c[L]=A,a[A]!==-1?a[A]=-2:a[A]=L}function u(q){if(x[q])return 1/0;var Z=a[q],$=c[q];return Z<0||$<0?1/0:n(p[q],p[Z],p[$])}function m(q,Z){var $=R[q],V=R[Z];R[q]=V,R[Z]=$,B[$]=Z,B[V]=q}function S(q){return f[R[q]]}function w(q){return q&1?q-1>>1:(q>>1)-1}function I(q){for(var Z=S(q);;){var $=Z,V=2*q+1,rt=2*(q+1),ot=q;if(V<G){var H=S(V);H<$&&(ot=V,$=H)}if(rt<G){var Y=S(rt);Y<$&&(ot=rt)}if(ot===q)return q;m(q,ot),q=ot}}function O(q){for(var Z=S(q);q>0;){var $=w(q);if($>=0){var V=S($);if(Z<V){m(q,$),q=$;continue}}return q}}function D(){if(G>0){var q=R[0];return m(0,G-1),G-=1,I(0),q}return-1}function P(q,Z){var $=R[q];return f[$]===Z?q:(f[$]=-1/0,O(q),D(),f[$]=Z,G+=1,O(G-1))}function F(q){if(!x[q]){x[q]=!0;var Z=a[q],$=c[q];a[$]>=0&&(a[$]=Z),c[Z]>=0&&(c[Z]=$),B[Z]>=0&&P(B[Z],u(Z)),B[$]>=0&&P(B[$],u($))}}for(var R=[],B=new Array(h),k=0;k<h;++k){var N=f[k]=u(k);N<1/0?(B[k]=R.length,R.push(k)):B[k]=-1}for(var G=R.length,k=G>>1;k>=0;--k)I(k);for(;;){var X=D();if(X<0||f[X]>b)break;F(X)}for(var J=[],k=0;k<h;++k)x[k]||(B[k]=J.length,J.push(p[k].slice()));J.length;function it(q,Z){if(q[Z]<0)return Z;var $=Z,V=Z;do{var rt=q[V];if(!x[V]||rt<0||rt===V||(V=rt,rt=q[V],!x[V]||rt<0||rt===V))break;V=rt,$=q[$]}while($!==V);for(var ot=Z;ot!==V;ot=q[ot])q[ot]=V;return V}var nt=[];return o.forEach(function(q){var Z=it(a,q[0]),$=it(c,q[1]);if(Z>=0&&$>=0&&Z!==$){var V=B[Z],rt=B[$];V!==rt&&nt.push([V,rt])}}),l.unique(l.normalize(nt)),{positions:J,edges:nt}}},1303:function(v,d,r){v.exports=n;var e=r(3250);function l(s,o){var p,b;if(o[0][0]<o[1][0])p=o[0],b=o[1];else if(o[0][0]>o[1][0])p=o[1],b=o[0];else{var h=Math.min(s[0][1],s[1][1]),_=Math.max(s[0][1],s[1][1]),a=Math.min(o[0][1],o[1][1]),c=Math.max(o[0][1],o[1][1]);return _<a?_-a:h>c?h-c:_-c}var f,x;s[0][1]<s[1][1]?(f=s[0],x=s[1]):(f=s[1],x=s[0]);var k=e(b,p,f);return k||(k=e(b,p,x),k)?k:x-b}function n(s,o){var p,b;if(o[0][0]<o[1][0])p=o[0],b=o[1];else if(o[0][0]>o[1][0])p=o[1],b=o[0];else return l(o,s);var h,_;if(s[0][0]<s[1][0])h=s[0],_=s[1];else if(s[0][0]>s[1][0])h=s[1],_=s[0];else return-l(s,o);var a=e(p,b,_),c=e(p,b,h);if(a<0){if(c<=0)return a}else if(a>0){if(c>=0)return a}else if(c)return c;if(a=e(_,h,b),c=e(_,h,p),a<0){if(c<=0)return a}else if(a>0){if(c>=0)return a}else if(c)return c;return b[0]-_[0]}},4209:function(v,d,r){v.exports=c;var e=r(2478),l=r(3840),n=r(3250),s=r(1303);function o(f,x,k){this.slabs=f,this.coordinates=x,this.horizontal=k}var p=o.prototype;function b(f,x){return f.y-x}function h(f,x){for(var k=null;f;){var y=f.key,A,L;y[0][0]<y[1][0]?(A=y[0],L=y[1]):(A=y[1],L=y[0]);var u=n(A,L,x);if(u<0)f=f.left;else if(u>0)if(x[0]!==y[1][0])k=f,f=f.right;else{var m=h(f.right,x);if(m)return m;f=f.left}else{if(x[0]!==y[1][0])return f;var m=h(f.right,x);if(m)return m;f=f.left}}return k}p.castUp=function(f){var x=e.le(this.coordinates,f[0]);if(x<0)return-1;this.slabs[x];var k=h(this.slabs[x],f),y=-1;if(k&&(y=k.value),this.coordinates[x]===f[0]){var A=null;if(k&&(A=k.key),x>0){var L=h(this.slabs[x-1],f);L&&(A?s(L.key,A)>0&&(A=L.key,y=L.value):(y=L.value,A=L.key))}var u=this.horizontal[x];if(u.length>0){var m=e.ge(u,f[1],b);if(m<u.length){var S=u[m];if(f[1]===S.y){if(S.closed)return S.index;for(;m<u.length-1&&u[m+1].y===f[1];)if(m=m+1,S=u[m],S.closed)return S.index;if(S.y===f[1]&&!S.start){if(m=m+1,m>=u.length)return y;S=u[m]}}if(S.start)if(A){var w=n(A[0],A[1],[f[0],S.y]);A[0][0]>A[1][0]&&(w=-w),w>0&&(y=S.index)}else y=S.index;else S.y!==f[1]&&(y=S.index)}}}return y};function _(f,x,k,y){this.y=f,this.index=x,this.start=k,this.closed=y}function a(f,x,k,y){this.x=f,this.segment=x,this.create=k,this.index=y}function c(f){for(var x=f.length,k=2*x,y=new Array(k),A=0;A<x;++A){var L=f[A],u=L[0][0]<L[1][0];y[2*A]=new a(L[0][0],L,u,A),y[2*A+1]=new a(L[1][0],L,!u,A)}y.sort(function(R,B){var N=R.x-B.x;return N||(N=R.create-B.create,N)?N:Math.min(R.segment[0][1],R.segment[1][1])-Math.min(B.segment[0][1],B.segment[1][1])});for(var m=l(s),S=[],w=[],I=[],O=-1/0,A=0;A<k;){for(var D=y[A].x,P=[];A<k;){var F=y[A];if(F.x!==D)break;A+=1,F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(P.push(new _(F.segment[0][1],F.index,!0,!0)),P.push(new _(F.segment[1][1],F.index,!1,!1))):(P.push(new _(F.segment[1][1],F.index,!0,!1)),P.push(new _(F.segment[0][1],F.index,!1,!0)))):F.create?m=m.insert(F.segment,F.index):m=m.remove(F.segment)}S.push(m.root),w.push(D),I.push(P)}return new o(S,w,I)}},5202:function(v,d,r){var e=r(1944),l=r(8210);v.exports=o,v.exports.positive=p,v.exports.negative=b;function n(h,_){var a=l(e(h,_),[_[_.length-1]]);return a[a.length-1]}function s(h,_,a,c){var f=c-_,x=-_/f;x<0?x=0:x>1&&(x=1);for(var k=1-x,y=h.length,A=new Array(y),L=0;L<y;++L)A[L]=x*h[L]+k*a[L];return A}function o(h,_){for(var a=[],c=[],f=n(h[h.length-1],_),x=h[h.length-1],k=h[0],y=0;y<h.length;++y,x=k){k=h[y];var A=n(k,_);if(f<0&&A>0||f>0&&A<0){var L=s(x,A,k,f);a.push(L),c.push(L.slice())}A<0?c.push(k.slice()):A>0?a.push(k.slice()):(a.push(k.slice()),c.push(k.slice())),f=A}return{positive:a,negative:c}}function p(h,_){for(var a=[],c=n(h[h.length-1],_),f=h[h.length-1],x=h[0],k=0;k<h.length;++k,f=x){x=h[k];var y=n(x,_);(c<0&&y>0||c>0&&y<0)&&a.push(s(f,y,x,c)),y>=0&&a.push(x.slice()),c=y}return a}function b(h,_){for(var a=[],c=n(h[h.length-1],_),f=h[h.length-1],x=h[0],k=0;k<h.length;++k,f=x){x=h[k];var y=n(x,_);(c<0&&y>0||c>0&&y<0)&&a.push(s(f,y,x,c)),y<=0&&a.push(x.slice()),c=y}return a}},3387:function(v,d,r){var e;(function(){var l={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(h){return o(b(h),arguments)}function s(h,_){return n.apply(null,[h].concat(_||[]))}function o(h,_){var a=1,c=h.length,f,x="",k,y,A,L,u,m,S,w;for(k=0;k<c;k++)if(typeof h[k]=="string")x+=h[k];else if(typeof h[k]=="object"){if(A=h[k],A.keys)for(f=_[a],y=0;y<A.keys.length;y++){if(f==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[y],A.keys[y-1]));f=f[A.keys[y]]}else A.param_no?f=_[A.param_no]:f=_[a++];if(l.not_type.test(A.type)&&l.not_primitive.test(A.type)&&f instanceof Function&&(f=f()),l.numeric_arg.test(A.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(n("[sprintf] expecting number but found %T",f));switch(l.number.test(A.type)&&(S=f>=0),A.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,A.width?parseInt(A.width):0);break;case"e":f=A.precision?parseFloat(f).toExponential(A.precision):parseFloat(f).toExponential();break;case"f":f=A.precision?parseFloat(f).toFixed(A.precision):parseFloat(f);break;case"g":f=A.precision?String(Number(f.toPrecision(A.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=A.precision?f.substring(0,A.precision):f;break;case"t":f=String(!!f),f=A.precision?f.substring(0,A.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=A.precision?f.substring(0,A.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=A.precision?f.substring(0,A.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}l.json.test(A.type)?x+=f:(l.number.test(A.type)&&(!S||A.sign)?(w=S?"+":"-",f=f.toString().replace(l.sign,"")):w="",u=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",m=A.width-(w+f).length,L=A.width&&m>0?u.repeat(m):"",x+=A.align?w+f+L:u==="0"?w+L+f:L+w+f)}return x}var p=Object.create(null);function b(h){if(p[h])return p[h];for(var _=h,a,c=[],f=0;_;){if((a=l.text.exec(_))!==null)c.push(a[0]);else if((a=l.modulo.exec(_))!==null)c.push("%");else if((a=l.placeholder.exec(_))!==null){if(a[2]){f|=1;var x=[],k=a[2],y=[];if((y=l.key.exec(k))!==null)for(x.push(y[1]);(k=k.substring(y[0].length))!=="";)if((y=l.key_access.exec(k))!==null)x.push(y[1]);else if((y=l.index_access.exec(k))!==null)x.push(y[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");a[2]=x}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:a[0],param_no:a[1],keys:a[2],sign:a[3],pad_char:a[4],align:a[5],width:a[6],precision:a[7],type:a[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");_=_.substring(a[0].length)}return p[h]=c}d.sprintf=n,d.vsprintf=s,typeof window<"u"&&(window.sprintf=n,window.vsprintf=s,e=(function(){return{sprintf:n,vsprintf:s}}).call(d,r,d,v),e!==void 0&&(v.exports=e))})()},3711:function(v,d,r){v.exports=b;var e=r(2640),l=r(781),n={"2d":function(h,_,a){var c=h({order:_,scalarArguments:3,getters:a==="generic"?[0]:void 0,phase:function(f,x,k,y){return f>y|0},vertex:function(f,x,k,y,A,L,u,m,S,w,I,O,D){var P=(u<<0)+(m<<1)+(S<<2)+(w<<3)|0;if(!(P===0||P===15))switch(P){case 0:I.push([f-.5,x-.5]);break;case 1:I.push([f-.25-.25*(y+k-2*D)/(k-y),x-.25-.25*(A+k-2*D)/(k-A)]);break;case 2:I.push([f-.75-.25*(-y-k+2*D)/(y-k),x-.25-.25*(L+y-2*D)/(y-L)]);break;case 3:I.push([f-.5,x-.5-.5*(A+k+L+y-4*D)/(k-A+y-L)]);break;case 4:I.push([f-.25-.25*(L+A-2*D)/(A-L),x-.75-.25*(-A-k+2*D)/(A-k)]);break;case 5:I.push([f-.5-.5*(y+k+L+A-4*D)/(k-y+A-L),x-.5]);break;case 6:I.push([f-.5-.25*(-y-k+L+A)/(y-k+A-L),x-.5-.25*(-A-k+L+y)/(A-k+y-L)]);break;case 7:I.push([f-.75-.25*(L+A-2*D)/(A-L),x-.75-.25*(L+y-2*D)/(y-L)]);break;case 8:I.push([f-.75-.25*(-L-A+2*D)/(L-A),x-.75-.25*(-L-y+2*D)/(L-y)]);break;case 9:I.push([f-.5-.25*(y+k+-L-A)/(k-y+L-A),x-.5-.25*(A+k+-L-y)/(k-A+L-y)]);break;case 10:I.push([f-.5-.5*(-y-k+-L-A+4*D)/(y-k+L-A),x-.5]);break;case 11:I.push([f-.25-.25*(-L-A+2*D)/(L-A),x-.75-.25*(A+k-2*D)/(k-A)]);break;case 12:I.push([f-.5,x-.5-.5*(-A-k+-L-y+4*D)/(A-k+L-y)]);break;case 13:I.push([f-.75-.25*(y+k-2*D)/(k-y),x-.25-.25*(-L-y+2*D)/(L-y)]);break;case 14:I.push([f-.25-.25*(-y-k+2*D)/(y-k),x-.25-.25*(-A-k+2*D)/(A-k)]);break;case 15:I.push([f-.5,x-.5]);break}},cell:function(f,x,k,y,A,L,u,m,S){A?m.push([f,x]):m.push([x,f])}});return function(f,x){var k=[],y=[];return c(f,k,y,x),{positions:k,cells:y}}}};function s(h,_){var a=h.length+"d",c=n[a];if(c)return c(e,h,_)}function o(h,_){for(var a=l(h,_),c=a.length,f=new Array(c),x=new Array(c),k=0;k<c;++k)f[k]=[a[k]],x[k]=[k];return{positions:f,cells:x}}var p={};function b(h,f){if(h.dimension<=0)return{positions:[],cells:[]};if(h.dimension===1)return o(h,f);var a=h.order.join()+"-"+h.dtype,c=p[a],f=+f||0;return c||(c=p[a]=s(h.order,h.dtype)),c(h,f)}},529:function(v,d,r){v.exports=o;var e=r(4359),l=window||M.global||{},n=l.__TEXT_CACHE||{};l.__TEXT_CACHE={};function s(p){for(var b=p.cells,h=p.positions,_=new Float32Array(b.length*6),a=0,c=0,f=0;f<b.length;++f)for(var x=b[f],k=0;k<3;++k){var y=h[x[k]];_[a++]=y[0],_[a++]=y[1]+1.4,c=Math.max(y[0],c)}return{data:_,shape:c}}function o(p,b,_){var _=_||{},a=n[p];a||(a=n[p]={" ":{data:new Float32Array(0),shape:.2}});var c=a[b];if(!c)if(b.length<=1||!/\d/.test(b))c=a[b]=s(e(b,{triangles:!0,font:p,textAlign:_.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var f=b.split(/(\d|\s)/),x=new Array(f.length),k=0,y=0,A=0;A<f.length;++A)x[A]=o(p,f[A]),k+=x[A].data.length,y+=x[A].shape,A>0&&(y+=.02);for(var L=new Float32Array(k),u=0,m=-.5*y,A=0;A<x.length;++A){for(var S=x[A].data,w=0;w<S.length;w+=2)L[u++]=S[w]+m,L[u++]=S[w+1];m+=x[A].shape+.02}c=a[b]={data:L,shape:y}}return c}},665:function(v,d,r){var e=r(3202);v.exports=o;var l=96;function n(p,b){var h=e(getComputedStyle(p).getPropertyValue(b));return h[0]*o(h[1],p)}function s(p,b){var h=document.createElement("div");h.style["font-size"]="128"+p,b.appendChild(h);var _=n(h,"font-size")/128;return b.removeChild(h),_}function o(p,b){switch(b=b||document.body,p=(p||"px").trim().toLowerCase(),(b===window||b===document)&&(b=document.body),p){case"%":return b.clientHeight/100;case"ch":case"ex":return s(p,b);case"em":return n(b,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return l;case"cm":return l/2.54;case"mm":return l/25.4;case"pt":return l/72;case"pc":return l/6}return 1}},7261:function(v,d,r){v.exports=x;var e=r(9215),l=r(7608),n=r(6079),s=r(5911),o=r(3536),p=r(244);function b(k,y,A){return Math.sqrt(Math.pow(k,2)+Math.pow(y,2)+Math.pow(A,2))}function h(k){return Math.min(1,Math.max(-1,k))}function _(k){var y=Math.abs(k[0]),A=Math.abs(k[1]),L=Math.abs(k[2]),u=[0,0,0];y>Math.max(A,L)?u[2]=1:A>Math.max(y,L)?u[0]=1:u[1]=1;for(var m=0,S=0,w=0;w<3;++w)m+=k[w]*k[w],S+=u[w]*k[w];for(var w=0;w<3;++w)u[w]-=S/m*k[w];return o(u,u),u}function a(k,y,A,L,u,m,S,w){this.center=e(A),this.up=e(L),this.right=e(u),this.radius=e([m]),this.angle=e([S,w]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(k,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var I=0;I<16;++I)this.computedMatrix[I]=.5;this.recalcMatrix(0)}var c=a.prototype;c.setDistanceLimits=function(k,y){k>0?k=Math.log(k):k=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,k),this.radius.bounds[0][0]=k,this.radius.bounds[1][0]=y},c.getDistanceLimits=function(k){var y=this.radius.bounds[0];return k?(k[0]=Math.exp(y[0][0]),k[1]=Math.exp(y[1][0]),k):[Math.exp(y[0][0]),Math.exp(y[1][0])]},c.recalcMatrix=function(k){this.center.curve(k),this.up.curve(k),this.right.curve(k),this.radius.curve(k),this.angle.curve(k);for(var y=this.computedUp,A=this.computedRight,L=0,u=0,m=0;m<3;++m)u+=y[m]*A[m],L+=y[m]*y[m];for(var S=Math.sqrt(L),w=0,m=0;m<3;++m)A[m]-=y[m]*u/L,w+=A[m]*A[m],y[m]/=S;for(var I=Math.sqrt(w),m=0;m<3;++m)A[m]/=I;var O=this.computedToward;s(O,y,A),o(O,O);for(var D=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],F=this.computedAngle[1],R=Math.cos(P),B=Math.sin(P),N=Math.cos(F),G=Math.sin(F),X=this.computedCenter,J=R*N,it=B*N,nt=G,q=-R*G,Z=-B*G,$=N,V=this.computedEye,rt=this.computedMatrix,m=0;m<3;++m){var ot=J*A[m]+it*O[m]+nt*y[m];rt[4*m+1]=q*A[m]+Z*O[m]+$*y[m],rt[4*m+2]=ot,rt[4*m+3]=0}var H=rt[1],Y=rt[5],at=rt[9],et=rt[2],ct=rt[6],ft=rt[10],yt=Y*ft-at*ct,xt=at*et-H*ft,Ct=H*ct-Y*et,gt=b(yt,xt,Ct);yt/=gt,xt/=gt,Ct/=gt,rt[0]=yt,rt[4]=xt,rt[8]=Ct;for(var m=0;m<3;++m)V[m]=X[m]+rt[2+4*m]*D;for(var m=0;m<3;++m){for(var w=0,mt=0;mt<3;++mt)w+=rt[m+4*mt]*V[mt];rt[12+m]=-w}rt[15]=1},c.getMatrix=function(k,y){this.recalcMatrix(k);var A=this.computedMatrix;if(y){for(var L=0;L<16;++L)y[L]=A[L];return y}return A};var f=[0,0,0];c.rotate=function(k,y,A,L){if(this.angle.move(k,y,A),L){this.recalcMatrix(k);var u=this.computedMatrix;f[0]=u[2],f[1]=u[6],f[2]=u[10];for(var m=this.computedUp,S=this.computedRight,w=this.computedToward,I=0;I<3;++I)u[4*I]=m[I],u[4*I+1]=S[I],u[4*I+2]=w[I];n(u,u,L,f);for(var I=0;I<3;++I)m[I]=u[4*I],S[I]=u[4*I+1];this.up.set(k,m[0],m[1],m[2]),this.right.set(k,S[0],S[1],S[2])}},c.pan=function(k,y,A,L){y=y||0,A=A||0,L=L||0,this.recalcMatrix(k);var u=this.computedMatrix;Math.exp(this.computedRadius[0]);var m=u[1],S=u[5],w=u[9],I=b(m,S,w);m/=I,S/=I,w/=I;var O=u[0],D=u[4],P=u[8],F=O*m+D*S+P*w;O-=m*F,D-=S*F,P-=w*F;var R=b(O,D,P);O/=R,D/=R,P/=R;var B=O*y+m*A,N=D*y+S*A,G=P*y+w*A;this.center.move(k,B,N,G);var X=Math.exp(this.computedRadius[0]);X=Math.max(1e-4,X+L),this.radius.set(k,Math.log(X))},c.translate=function(k,y,A,L){this.center.move(k,y||0,A||0,L||0)},c.setMatrix=function(k,y,A,L){var u=1;typeof A=="number"&&(u=A|0),(u<0||u>3)&&(u=1);var m=(u+2)%3;y||(this.recalcMatrix(k),y=this.computedMatrix);var S=y[u],w=y[u+4],I=y[u+8];if(L){var O=Math.abs(S),D=Math.abs(w),P=Math.abs(I),F=Math.max(O,D,P);O===F?(S=S<0?-1:1,w=I=0):P===F?(I=I<0?-1:1,S=w=0):(w=w<0?-1:1,S=I=0)}else{var R=b(S,w,I);S/=R,w/=R,I/=R}var B=y[m],N=y[m+4],G=y[m+8],X=B*S+N*w+G*I;B-=S*X,N-=w*X,G-=I*X;var J=b(B,N,G);B/=J,N/=J,G/=J;var it=w*G-I*N,nt=I*B-S*G,q=S*N-w*B,Z=b(it,nt,q);it/=Z,nt/=Z,q/=Z,this.center.jump(k,It,St,Bt),this.radius.idle(k),this.up.jump(k,S,w,I),this.right.jump(k,B,N,G);var $,V;if(u===2){var rt=y[1],ot=y[5],H=y[9],Y=rt*B+ot*N+H*G,at=rt*it+ot*nt+H*q;yt<0?$=-Math.PI/2:$=Math.PI/2,V=Math.atan2(at,Y)}else{var et=y[2],ct=y[6],ft=y[10],yt=et*S+ct*w+ft*I,xt=et*B+ct*N+ft*G,Ct=et*it+ct*nt+ft*q;$=Math.asin(h(yt)),V=Math.atan2(Ct,xt)}this.angle.jump(k,V,$),this.recalcMatrix(k);var gt=y[2],mt=y[6],vt=y[10],At=this.computedMatrix;l(At,y);var Ot=At[15],It=At[12]/Ot,St=At[13]/Ot,Bt=At[14]/Ot,re=Math.exp(this.computedRadius[0]);this.center.jump(k,It-gt*re,St-mt*re,Bt-vt*re)},c.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},c.idle=function(k){this.center.idle(k),this.up.idle(k),this.right.idle(k),this.radius.idle(k),this.angle.idle(k)},c.flush=function(k){this.center.flush(k),this.up.flush(k),this.right.flush(k),this.radius.flush(k),this.angle.flush(k)},c.setDistance=function(k,y){y>0&&this.radius.set(k,Math.log(y))},c.lookAt=function(k,y,A,L){this.recalcMatrix(k),y=y||this.computedEye,A=A||this.computedCenter,L=L||this.computedUp;var u=L[0],m=L[1],S=L[2],w=b(u,m,S);if(!(w<1e-6)){u/=w,m/=w,S/=w;var I=y[0]-A[0],O=y[1]-A[1],D=y[2]-A[2],P=b(I,O,D);if(!(P<1e-6)){I/=P,O/=P,D/=P;var F=this.computedRight,R=F[0],B=F[1],N=F[2],G=u*R+m*B+S*N;R-=G*u,B-=G*m,N-=G*S;var X=b(R,B,N);if(!(X<.01&&(R=m*D-S*O,B=S*I-u*D,N=u*O-m*I,X=b(R,B,N),X<1e-6))){R/=X,B/=X,N/=X,this.up.set(k,u,m,S),this.right.set(k,R,B,N),this.center.set(k,A[0],A[1],A[2]),this.radius.set(k,Math.log(P));var J=m*N-S*B,it=S*R-u*N,nt=u*B-m*R,q=b(J,it,nt);J/=q,it/=q,nt/=q;var Z=u*I+m*O+S*D,$=R*I+B*O+N*D,V=J*I+it*O+nt*D,rt=Math.asin(h(Z)),ot=Math.atan2(V,$),H=this.angle._state,Y=H[H.length-1],at=H[H.length-2];Y=Y%(2*Math.PI);var et=Math.abs(Y+2*Math.PI-ot),ct=Math.abs(Y-ot),ft=Math.abs(Y-2*Math.PI-ot);et<ct&&(Y+=2*Math.PI),ft<ct&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,at),this.angle.set(k,ot,rt)}}}};function x(k){k=k||{};var y=k.center||[0,0,0],A=k.up||[0,1,0],L=k.right||_(A),u=k.radius||1,m=k.theta||0,S=k.phi||0;if(y=[].slice.call(y,0,3),A=[].slice.call(A,0,3),o(A,A),L=[].slice.call(L,0,3),o(L,L),"eye"in k){var w=k.eye,I=[w[0]-y[0],w[1]-y[1],w[2]-y[2]];s(L,I,A),b(L[0],L[1],L[2])<1e-6?L=_(A):o(L,L),u=b(I[0],I[1],I[2]);var O=p(A,I)/u,D=p(L,I)/u;S=Math.acos(O),m=Math.acos(D)}return u=Math.log(u),new a(k.zoomMin,k.zoomMax,y,A,L,u,m,S)}},5250:function(v){v.exports=r;var d=+(Math.pow(2,27)+1);function r(e,l,n){var s=e*l,o=d*e,p=o-e,b=o-p,h=e-b,_=d*l,a=_-l,c=_-a,f=l-c,x=s-b*c,k=x-h*c,y=k-b*f,A=h*f-y;return n?(n[0]=A,n[1]=s,n):[A,s]}},9362:function(v){v.exports=d;function d(r,e,l){var n=r+e,s=n-r,o=n-s,p=e-s,b=r-o;return l?(l[0]=b+p,l[1]=n,l):[b+p,n]}},1888:function(v,d,r){var e=r(8828),l=r(1338),n=r(4793).hp;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:l([32,0]),UINT16:l([32,0]),UINT32:l([32,0]),BIGUINT64:l([32,0]),INT8:l([32,0]),INT16:l([32,0]),INT32:l([32,0]),BIGINT64:l([32,0]),FLOAT:l([32,0]),DOUBLE:l([32,0]),DATA:l([32,0]),UINT8C:l([32,0]),BUFFER:l([32,0])});var s=typeof Uint8ClampedArray<"u",o=typeof BigUint64Array<"u",p=typeof BigInt64Array<"u",b=r.g.__TYPEDARRAY_POOL;b.UINT8C||(b.UINT8C=l([32,0])),b.BIGUINT64||(b.BIGUINT64=l([32,0])),b.BIGINT64||(b.BIGINT64=l([32,0])),b.BUFFER||(b.BUFFER=l([32,0]));var h=b.DATA,_=b.BUFFER;d.free=function(F){if(n.isBuffer(F))_[e.log2(F.length)].push(F);else{if(Object.prototype.toString.call(F)!=="[object ArrayBuffer]"&&(F=F.buffer),!F)return;var R=F.length||F.byteLength,B=e.log2(R)|0;h[B].push(F)}};function a(F){if(F){var R=F.length||F.byteLength,B=e.log2(R);h[B].push(F)}}function c(F){a(F.buffer)}d.freeUint8=d.freeUint16=d.freeUint32=d.freeBigUint64=d.freeInt8=d.freeInt16=d.freeInt32=d.freeBigInt64=d.freeFloat32=d.freeFloat=d.freeFloat64=d.freeDouble=d.freeUint8Clamped=d.freeDataView=c,d.freeArrayBuffer=a,d.freeBuffer=function(F){_[e.log2(F.length)].push(F)},d.malloc=function(F,R){if(R===void 0||R==="arraybuffer")return f(F);switch(R){case"uint8":return x(F);case"uint16":return k(F);case"uint32":return y(F);case"int8":return A(F);case"int16":return L(F);case"int32":return u(F);case"float":case"float32":return m(F);case"double":case"float64":return S(F);case"uint8_clamped":return w(F);case"bigint64":return O(F);case"biguint64":return I(F);case"buffer":return P(F);case"data":case"dataview":return D(F);default:return null}return null};function f(R){var R=e.nextPow2(R),B=e.log2(R),N=h[B];return N.length>0?N.pop():new ArrayBuffer(R)}d.mallocArrayBuffer=f;function x(F){return new Uint8Array(f(F),0,F)}d.mallocUint8=x;function k(F){return new Uint16Array(f(2*F),0,F)}d.mallocUint16=k;function y(F){return new Uint32Array(f(4*F),0,F)}d.mallocUint32=y;function A(F){return new Int8Array(f(F),0,F)}d.mallocInt8=A;function L(F){return new Int16Array(f(2*F),0,F)}d.mallocInt16=L;function u(F){return new Int32Array(f(4*F),0,F)}d.mallocInt32=u;function m(F){return new Float32Array(f(4*F),0,F)}d.mallocFloat32=d.mallocFloat=m;function S(F){return new Float64Array(f(8*F),0,F)}d.mallocFloat64=d.mallocDouble=S;function w(F){return s?new Uint8ClampedArray(f(F),0,F):x(F)}d.mallocUint8Clamped=w;function I(F){return o?new BigUint64Array(f(8*F),0,F):null}d.mallocBigUint64=I;function O(F){return p?new BigInt64Array(f(8*F),0,F):null}d.mallocBigInt64=O;function D(F){return new DataView(f(F),0,F)}d.mallocDataView=D;function P(F){F=e.nextPow2(F);var R=e.log2(F),B=_[R];return B.length>0?B.pop():new n(F)}d.mallocBuffer=P,d.clearCache=function(){for(var F=0;F<32;++F)b.UINT8[F].length=0,b.UINT16[F].length=0,b.UINT32[F].length=0,b.INT8[F].length=0,b.INT16[F].length=0,b.INT32[F].length=0,b.FLOAT[F].length=0,b.DOUBLE[F].length=0,b.BIGUINT64[F].length=0,b.BIGINT64[F].length=0,b.UINT8C[F].length=0,h[F].length=0,_[F].length=0}},1755:function(v){"use restrict";v.exports=d;function d(e){this.roots=new Array(e),this.ranks=new Array(e);for(var l=0;l<e;++l)this.roots[l]=l,this.ranks[l]=0}var r=d.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.find=function(e){for(var l=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[l]!==e;){var s=n[l];n[l]=e,l=s}return e},r.link=function(e,l){var n=this.find(e),s=this.find(l);if(n!==s){var o=this.ranks,p=this.roots,b=o[n],h=o[s];b<h?p[n]=s:h<b?p[s]=n:(p[s]=n,++o[n])}}},1682:function(v){function d(l,n){for(var s=1,o=l.length,p=l[0],b=l[0],h=1;h<o;++h)if(b=p,p=l[h],n(p,b)){if(h===s){s++;continue}l[s++]=p}return l.length=s,l}function r(l){for(var n=1,s=l.length,o=l[0],p=l[0],b=1;b<s;++b,p=o)if(p=o,o=l[b],o!==p){if(b===n){n++;continue}l[n++]=o}return l.length=n,l}function e(l,n,s){return l.length===0?l:n?(s||l.sort(n),d(l,n)):(s||l.sort(),r(l))}v.exports=e},4359:function(v,d,r){v.exports=s;var e=r(7718),l=null,n=null;typeof document<"u"&&(l=document.createElement("canvas"),l.width=8192,l.height=1024,n=l.getContext("2d"));function s(o,p){return(typeof p!="object"||p===null)&&(p={}),e(o,p.canvas||l,p.context||n,p)}},7718:function(v,d,r){v.exports=O,v.exports.processPixels=I;var e=r(3711),l=r(9618),n=r(5878),s=r(332),o=r(2538),p=r(2095),b="b",h="b|",_="i",a="i|",c="sup",f="+",x="+1",k="sub",y="-",A="-1";function L(D,P,F,R){for(var B="<"+D+">",N="</"+D+">",G=B.length,X=N.length,J=P[0]===f||P[0]===y,it=0,nt=-X;it>-1&&(it=F.indexOf(B,it),!(it===-1||(nt=F.indexOf(N,it+G),nt===-1)||nt<=it));){for(var q=it;q<nt+X;++q)if(q<it+G||q>=nt)R[q]=null,F=F.substr(0,q)+" "+F.substr(q+1);else if(R[q]!==null){var Z=R[q].indexOf(P[0]);Z===-1?R[q]+=P:J&&(R[q]=R[q].substr(0,Z+1)+(1+parseInt(R[q][Z+1]))+R[q].substr(Z+2))}var $=it+G,V=F.substr($,nt-$),rt=V.indexOf(B);rt!==-1?it=rt:it=nt+X}return R}function u(D,P,F){for(var R=P.textAlign||"start",B=P.textBaseline||"alphabetic",N=[1073741824,1073741824],G=[0,0],X=D.length,J=0;J<X;++J)for(var it=D[J],nt=0;nt<2;++nt)N[nt]=Math.min(N[nt],it[nt])|0,G[nt]=Math.max(G[nt],it[nt])|0;var q=0;switch(R){case"center":q=-.5*(N[0]+G[0]);break;case"right":case"end":q=-G[0];break;case"left":case"start":q=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+R+"'")}var Z=0;switch(B){case"hanging":case"top":Z=-N[1];break;case"middle":Z=-.5*(N[1]+G[1]);break;case"alphabetic":case"ideographic":Z=-3*F;break;case"bottom":Z=-G[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+B+"'")}var $=1/F;return"lineHeight"in P?$*=+P.lineHeight:"width"in P?$=P.width/(G[0]-N[0]):"height"in P&&($=P.height/(G[1]-N[1])),D.map(function(V){return[$*(V[0]+q),$*(V[1]+Z)]})}function m(D,P,F,R,B,N){F=F.replace(/\n/g,""),N.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var G="",X=[];for(Y=0;Y<F.length;++Y)X[Y]=G;N.bolds===!0&&(X=L(b,h,F,X)),N.italics===!0&&(X=L(_,a,F,X)),N.superscripts===!0&&(X=L(c,x,F,X)),N.subscripts===!0&&(X=L(k,A,F,X));var J=[],it="";for(Y=0;Y<F.length;++Y)X[Y]!==null&&(it+=F[Y],J.push(X[Y]));var nt=it.split(`
`),q=nt.length,Z=Math.round(B*R),$=R,V=R*2,rt=0,ot=q*Z+V;D.height<ot&&(D.height=ot),P.fillStyle="#000",P.fillRect(0,0,D.width,D.height),P.fillStyle="#fff";var H,Y,at,et,ct,ft=0,yt="";function xt(){if(yt!==""){var Bt=P.measureText(yt).width;P.fillText(yt,$+at,V+et),at+=Bt}}function Ct(){return""+Math.round(ct)+"px "}function gt(Bt,re){var Yt=""+P.font;if(N.subscripts===!0){var he=Bt.indexOf(y),Zt=re.indexOf(y),ae=he>-1?parseInt(Bt[1+he]):0,oe=Zt>-1?parseInt(re[1+Zt]):0;ae!==oe&&(Yt=Yt.replace(Ct(),"?px "),ct*=Math.pow(.75,oe-ae),Yt=Yt.replace("?px ",Ct())),et+=.25*Z*(oe-ae)}if(N.superscripts===!0){var ce=Bt.indexOf(f),ue=re.indexOf(f),ye=ce>-1?parseInt(Bt[1+ce]):0,Tt=ue>-1?parseInt(re[1+ue]):0;ye!==Tt&&(Yt=Yt.replace(Ct(),"?px "),ct*=Math.pow(.75,Tt-ye),Yt=Yt.replace("?px ",Ct())),et-=.25*Z*(Tt-ye)}if(N.bolds===!0){var Ft=Bt.indexOf(h)>-1,$t=re.indexOf(h)>-1;!Ft&&$t&&(Vt?Yt=Yt.replace("italic ","italic bold "):Yt="bold "+Yt),Ft&&!$t&&(Yt=Yt.replace("bold ",""))}if(N.italics===!0){var Vt=Bt.indexOf(a)>-1,Nt=re.indexOf(a)>-1;!Vt&&Nt&&(Yt="italic "+Yt),Vt&&!Nt&&(Yt=Yt.replace("italic ",""))}P.font=Yt}for(H=0;H<q;++H){var mt=nt[H]+`
`;for(at=0,et=H*Z,ct=R,yt="",Y=0;Y<mt.length;++Y){var vt=Y+ft<J.length?J[Y+ft]:J[J.length-1];G===vt?yt+=mt[Y]:(xt(),yt=mt[Y],vt!==void 0&&(gt(G,vt),G=vt))}xt(),ft+=mt.length;var At=Math.round(at+2*$)|0;rt<At&&(rt=At)}var Ot=rt,It=V+Z*q,St=l(P.getImageData(0,0,Ot,It).data,[It,Ot,4]);return St.pick(-1,-1,0).transpose(1,0)}function S(D,P){var F=e(D,128);return P?n(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function w(D,P,F,R){var B=S(D,R),N=u(B.positions,P,F),G=B.edges,X=P.orientation==="ccw";if(s(N,G),P.polygons||P.polygon||P.polyline){for(var J=p(G,N),it=new Array(J.length),nt=0;nt<J.length;++nt){for(var q=J[nt],Z=new Array(q.length),$=0;$<q.length;++$){for(var V=q[$],rt=new Array(V.length),ot=0;ot<V.length;++ot)rt[ot]=N[V[ot]].slice();X&&rt.reverse(),Z[$]=rt}it[nt]=Z}return it}else return P.triangles||P.triangulate||P.triangle?{cells:o(N,G,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:G,positions:N}}function I(D,P,F){try{return w(D,P,F,!0)}catch{}try{return w(D,P,F,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function O(D,P,F,R){var B=64,N=1.25,G={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};R&&(R.size&&R.size>0&&(B=R.size),R.lineSpacing&&R.lineSpacing>0&&(N=R.lineSpacing),R.styletags&&R.styletags.breaklines&&(G.breaklines=!!R.styletags.breaklines),R.styletags&&R.styletags.bolds&&(G.bolds=!!R.styletags.bolds),R.styletags&&R.styletags.italics&&(G.italics=!!R.styletags.italics),R.styletags&&R.styletags.subscripts&&(G.subscripts=!!R.styletags.subscripts),R.styletags&&R.styletags.superscripts&&(G.superscripts=!!R.styletags.superscripts)),F.font=[R.fontStyle,R.fontVariant,R.fontWeight,B+"px",R.font].filter(function(J){return J}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var X=m(P,F,D,B,N,G);return I(X,R,B)}},1538:function(v){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function d(m){m.permitHostObjects___&&m.permitHostObjects___(d)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=d);var r=!1;if(typeof WeakMap=="function"){var e=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var l=new e,n=Object.freeze({});if(l.set(n,1),l.get(n)!==1)r=!0;else{v.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,p=Object.isExtensible,b="weakmap:",h=b+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var _=new ArrayBuffer(25),a=new Uint8Array(_);crypto.getRandomValues(a),h=b+"rand:"+Array.prototype.map.call(a,function(m){return(m%36).toString(36)}).join("")+"___"}function c(m){return!(m.substr(0,b.length)==b&&m.substr(m.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(m){return s(m).filter(c)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(m){return f(m).filter(c)}})}function x(m){if(m!==Object(m))throw new TypeError("Not an object: "+m);var S=m[h];if(S&&S.key===m)return S;if(p(m)){S={key:m};try{return o(m,h,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var m=Object.freeze;o(Object,"freeze",{value:function(I){return x(I),m(I)}});var S=Object.seal;o(Object,"seal",{value:function(I){return x(I),S(I)}});var w=Object.preventExtensions;o(Object,"preventExtensions",{value:function(I){return x(I),w(I)}})})();function k(m){return m.prototype=null,Object.freeze(m)}var y=!1;function A(){!y&&typeof console<"u"&&(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var L=0,u=function(){this instanceof u||A();var m=[],S=[],w=L++;function I(F,R){var B,N=x(F);return N?w in N?N[w]:R:(B=m.indexOf(F),B>=0?S[B]:R)}function O(F){var R=x(F);return R?w in R:m.indexOf(F)>=0}function D(F,R){var B,N=x(F);return N?N[w]=R:(B=m.indexOf(F),B>=0?S[B]=R:(B=m.length,S[B]=R,m[B]=F)),this}function P(F){var R=x(F),B,N;return R?w in R&&delete R[w]:(B=m.indexOf(F),B<0?!1:(N=m.length-1,m[B]=void 0,S[B]=S[N],m[B]=m[N],m.length=N,S.length=N,!0))}return Object.create(u.prototype,{get___:{value:k(I)},has___:{value:k(O)},set___:{value:k(D)},delete___:{value:k(P)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(m,S){return this.get___(m,S)},writable:!0,configurable:!0},has:{value:function(m){return this.has___(m)},writable:!0,configurable:!0},set:{value:function(m,S){return this.set___(m,S)},writable:!0,configurable:!0},delete:{value:function(m){return this.delete___(m)},writable:!0,configurable:!0}}),typeof e=="function"?function(){r&&typeof Proxy<"u"&&(Proxy=void 0);function m(){this instanceof u||A();var S=new e,w=void 0,I=!1;function O(R,B){return w?S.has(R)?S.get(R):w.get___(R,B):S.get(R,B)}function D(R){return S.has(R)||(w?w.has___(R):!1)}var P;r?P=function(R,B){return S.set(R,B),S.has(R)||(w||(w=new u),w.set(R,B)),this}:P=function(R,B){if(I)try{S.set(R,B)}catch{w||(w=new u),w.set___(R,B)}else S.set(R,B);return this};function F(R){var B=!!S.delete(R);return w&&w.delete___(R)||B}return Object.create(u.prototype,{get___:{value:k(O)},has___:{value:k(D)},set___:{value:k(P)},delete___:{value:k(F)},permitHostObjects___:{value:k(function(R){if(R===d)I=!0;else throw new Error("bogus call to permitHostObjects___")})}})}m.prototype=u.prototype,v.exports=m,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),v.exports=u)})()},236:function(v,d,r){var e=r(8284);v.exports=l;function l(){var n={};return function(s){if((typeof s!="object"||s===null)&&typeof s!="function")throw new Error("Weakmap-shim: Key must be object");var o=s.valueOf(n);return o&&o.identity===n?o:e(s,n)}}},8284:function(v){v.exports=d;function d(r,e){var l={identity:e},n=r.valueOf;return Object.defineProperty(r,"valueOf",{value:function(s){return s!==e?n.apply(this,arguments):l},writable:!0}),l}},606:function(v,d,r){var e=r(236);v.exports=l;function l(){var n=e();return{get:function(s,o){var p=n(s);return p.hasOwnProperty("value")?p.value:o},set:function(s,o){return n(s).value=o,this},has:function(s){return"value"in n(s)},delete:function(s){return delete n(s).value}}}},3349:function(v){function d(){return function(o,p,b,h,_,a){var c=o[0],f=b[0],x=[0],k=f;h|=0;var y=0,A=f;for(y=0;y<c;++y){{var L=p[h]-a,u=p[h+k]-a;L>=0!=u>=0&&_.push(x[0]+.5+.5*(L+u)/(L-u))}h+=A,++x[0]}}}function r(){return d()}var e=r;function l(o){var p={};return function(b,h,_){var a=b.dtype,c=b.order,f=[a,c.join()].join(),x=p[f];return x||(p[f]=x=o([a,c])),x(b.shape.slice(0),b.data,b.stride,b.offset|0,h,_)}}function n(o){return l(e.bind(void 0,o))}function s(o){return n({funcName:o.funcName})}v.exports=s({funcName:"zeroCrossings"})},781:function(v,d,r){v.exports=l;var e=r(3349);function l(n,s){var o=[];return s=+s||0,e(n.hi(n.shape[0]-1),o,s),o}},7790:function(){}},i={};function C(v){var d=i[v];if(d!==void 0)return d.exports;var r=i[v]={id:v,loaded:!1,exports:{}};return E[v].call(r.exports,r,r.exports,C),r.loaded=!0,r.exports}(function(){C.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){C.nmd=function(v){return v.paths=[],v.children||(v.children=[]),v}}();var T=C(1964);Q.exports=T})()},33576:function(Q,U,t){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/function M(Tt,Ft){if(!(Tt instanceof Ft))throw new TypeError("Cannot call a class as a function")}function E(Tt,Ft){for(var $t=0;$t<Ft.length;$t++){var Vt=Ft[$t];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(Tt,C(Vt.key),Vt)}}function i(Tt,Ft,$t){return Ft&&E(Tt.prototype,Ft),$t&&E(Tt,$t),Object.defineProperty(Tt,"prototype",{writable:!1}),Tt}function C(Tt){var Ft=T(Tt,"string");return s(Ft)==="symbol"?Ft:String(Ft)}function T(Tt,Ft){if(s(Tt)!=="object"||Tt===null)return Tt;var $t=Tt[Symbol.toPrimitive];if($t!==void 0){var Vt=$t.call(Tt,Ft||"default");if(s(Vt)!=="object")return Vt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ft==="string"?String:Number)(Tt)}function v(Tt,Ft,$t){function Vt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}return Ft=r(Ft),d(Tt,Vt()?Reflect.construct(Ft,$t||[],r(Tt).constructor):Ft.apply(Tt,$t))}function d(Tt,Ft){if(Ft&&(s(Ft)==="object"||typeof Ft=="function"))return Ft;if(Ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(Tt)}function r(Tt){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ft){return Ft.__proto__||Object.getPrototypeOf(Ft)},r(Tt)}function e(Tt){if(Tt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Tt}function l(Tt,Ft){if(typeof Ft!="function"&&Ft!==null)throw new TypeError("Super expression must either be null or a function");Tt.prototype=Object.create(Ft&&Ft.prototype,{constructor:{value:Tt,writable:!0,configurable:!0}}),Object.defineProperty(Tt,"prototype",{writable:!1}),Ft&&n(Tt,Ft)}function n(Tt,Ft){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function($t,Vt){return $t.__proto__=Vt,$t},n(Tt,Ft)}function s(Tt){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ft){return typeof Ft}:function(Ft){return Ft&&typeof Symbol=="function"&&Ft.constructor===Symbol&&Ft!==Symbol.prototype?"symbol":typeof Ft},s(Tt)}var o=t(59968),p=t(35984),b=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;U.Buffer=c,U.SlowBuffer=I,U.INSPECT_MAX_BYTES=50;var h=2147483647;U.kMaxLength=h,c.TYPED_ARRAY_SUPPORT=_(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function _(){try{var Tt=new Uint8Array(1),Ft={foo:function(){return 42}};return Object.setPrototypeOf(Ft,Uint8Array.prototype),Object.setPrototypeOf(Tt,Ft),Tt.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function a(Tt){if(Tt>h)throw new RangeError('The value "'+Tt+'" is invalid for option "size"');var Ft=new Uint8Array(Tt);return Object.setPrototypeOf(Ft,c.prototype),Ft}function c(Tt,Ft,$t){if(typeof Tt=="number"){if(typeof Ft=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(Tt)}return f(Tt,Ft,$t)}c.poolSize=8192;function f(Tt,Ft,$t){if(typeof Tt=="string")return A(Tt,Ft);if(ArrayBuffer.isView(Tt))return u(Tt);if(Tt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(Tt));if(ae(Tt,ArrayBuffer)||Tt&&ae(Tt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ae(Tt,SharedArrayBuffer)||Tt&&ae(Tt.buffer,SharedArrayBuffer)))return m(Tt,Ft,$t);if(typeof Tt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Vt=Tt.valueOf&&Tt.valueOf();if(Vt!=null&&Vt!==Tt)return c.from(Vt,Ft,$t);var Nt=S(Tt);if(Nt)return Nt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Tt[Symbol.toPrimitive]=="function")return c.from(Tt[Symbol.toPrimitive]("string"),Ft,$t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+s(Tt))}c.from=function(Tt,Ft,$t){return f(Tt,Ft,$t)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function x(Tt){if(typeof Tt!="number")throw new TypeError('"size" argument must be of type number');if(Tt<0)throw new RangeError('The value "'+Tt+'" is invalid for option "size"')}function k(Tt,Ft,$t){return x(Tt),Tt<=0?a(Tt):Ft!==void 0?typeof $t=="string"?a(Tt).fill(Ft,$t):a(Tt).fill(Ft):a(Tt)}c.alloc=function(Tt,Ft,$t){return k(Tt,Ft,$t)};function y(Tt){return x(Tt),a(Tt<0?0:w(Tt)|0)}c.allocUnsafe=function(Tt){return y(Tt)},c.allocUnsafeSlow=function(Tt){return y(Tt)};function A(Tt,Ft){if((typeof Ft!="string"||Ft==="")&&(Ft="utf8"),!c.isEncoding(Ft))throw new TypeError("Unknown encoding: "+Ft);var $t=O(Tt,Ft)|0,Vt=a($t),Nt=Vt.write(Tt,Ft);return Nt!==$t&&(Vt=Vt.slice(0,Nt)),Vt}function L(Tt){for(var Ft=Tt.length<0?0:w(Tt.length)|0,$t=a(Ft),Vt=0;Vt<Ft;Vt+=1)$t[Vt]=Tt[Vt]&255;return $t}function u(Tt){if(ae(Tt,Uint8Array)){var Ft=new Uint8Array(Tt);return m(Ft.buffer,Ft.byteOffset,Ft.byteLength)}return L(Tt)}function m(Tt,Ft,$t){if(Ft<0||Tt.byteLength<Ft)throw new RangeError('"offset" is outside of buffer bounds');if(Tt.byteLength<Ft+($t||0))throw new RangeError('"length" is outside of buffer bounds');var Vt;return Ft===void 0&&$t===void 0?Vt=new Uint8Array(Tt):$t===void 0?Vt=new Uint8Array(Tt,Ft):Vt=new Uint8Array(Tt,Ft,$t),Object.setPrototypeOf(Vt,c.prototype),Vt}function S(Tt){if(c.isBuffer(Tt)){var Ft=w(Tt.length)|0,$t=a(Ft);return $t.length===0||Tt.copy($t,0,0,Ft),$t}if(Tt.length!==void 0)return typeof Tt.length!="number"||oe(Tt.length)?a(0):L(Tt);if(Tt.type==="Buffer"&&Array.isArray(Tt.data))return L(Tt.data)}function w(Tt){if(Tt>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return Tt|0}function I(Tt){return+Tt!=Tt&&(Tt=0),c.alloc(+Tt)}c.isBuffer=function(Tt){return Tt!=null&&Tt._isBuffer===!0&&Tt!==c.prototype},c.compare=function(Tt,Ft){if(ae(Tt,Uint8Array)&&(Tt=c.from(Tt,Tt.offset,Tt.byteLength)),ae(Ft,Uint8Array)&&(Ft=c.from(Ft,Ft.offset,Ft.byteLength)),!c.isBuffer(Tt)||!c.isBuffer(Ft))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Tt===Ft)return 0;for(var $t=Tt.length,Vt=Ft.length,Nt=0,Mt=Math.min($t,Vt);Nt<Mt;++Nt)if(Tt[Nt]!==Ft[Nt]){$t=Tt[Nt],Vt=Ft[Nt];break}return $t<Vt?-1:Vt<$t?1:0},c.isEncoding=function(Tt){switch(String(Tt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(Tt,Ft){if(!Array.isArray(Tt))throw new TypeError('"list" argument must be an Array of Buffers');if(Tt.length===0)return c.alloc(0);var $t;if(Ft===void 0)for(Ft=0,$t=0;$t<Tt.length;++$t)Ft+=Tt[$t].length;var Vt=c.allocUnsafe(Ft),Nt=0;for($t=0;$t<Tt.length;++$t){var Mt=Tt[$t];if(ae(Mt,Uint8Array))Nt+Mt.length>Vt.length?(c.isBuffer(Mt)||(Mt=c.from(Mt)),Mt.copy(Vt,Nt)):Uint8Array.prototype.set.call(Vt,Mt,Nt);else if(c.isBuffer(Mt))Mt.copy(Vt,Nt);else throw new TypeError('"list" argument must be an Array of Buffers');Nt+=Mt.length}return Vt};function O(Tt,Ft){if(c.isBuffer(Tt))return Tt.length;if(ArrayBuffer.isView(Tt)||ae(Tt,ArrayBuffer))return Tt.byteLength;if(typeof Tt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+s(Tt));var $t=Tt.length,Vt=arguments.length>2&&arguments[2]===!0;if(!Vt&&$t===0)return 0;for(var Nt=!1;;)switch(Ft){case"ascii":case"latin1":case"binary":return $t;case"utf8":case"utf-8":return Bt(Tt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t*2;case"hex":return $t>>>1;case"base64":return he(Tt).length;default:if(Nt)return Vt?-1:Bt(Tt).length;Ft=(""+Ft).toLowerCase(),Nt=!0}}c.byteLength=O;function D(Tt,Ft,$t){var Vt=!1;if((Ft===void 0||Ft<0)&&(Ft=0),Ft>this.length||(($t===void 0||$t>this.length)&&($t=this.length),$t<=0)||($t>>>=0,Ft>>>=0,$t<=Ft))return"";for(Tt||(Tt="utf8");;)switch(Tt){case"hex":return rt(this,Ft,$t);case"utf8":case"utf-8":return nt(this,Ft,$t);case"ascii":return $(this,Ft,$t);case"latin1":case"binary":return V(this,Ft,$t);case"base64":return it(this,Ft,$t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ot(this,Ft,$t);default:if(Vt)throw new TypeError("Unknown encoding: "+Tt);Tt=(Tt+"").toLowerCase(),Vt=!0}}c.prototype._isBuffer=!0;function P(Tt,Ft,$t){var Vt=Tt[Ft];Tt[Ft]=Tt[$t],Tt[$t]=Vt}c.prototype.swap16=function(){var Tt=this.length;if(Tt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Ft=0;Ft<Tt;Ft+=2)P(this,Ft,Ft+1);return this},c.prototype.swap32=function(){var Tt=this.length;if(Tt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Ft=0;Ft<Tt;Ft+=4)P(this,Ft,Ft+3),P(this,Ft+1,Ft+2);return this},c.prototype.swap64=function(){var Tt=this.length;if(Tt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Ft=0;Ft<Tt;Ft+=8)P(this,Ft,Ft+7),P(this,Ft+1,Ft+6),P(this,Ft+2,Ft+5),P(this,Ft+3,Ft+4);return this},c.prototype.toString=function(){var Tt=this.length;return Tt===0?"":arguments.length===0?nt(this,0,Tt):D.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(Tt){if(!c.isBuffer(Tt))throw new TypeError("Argument must be a Buffer");return this===Tt?!0:c.compare(this,Tt)===0},c.prototype.inspect=function(){var Tt="",Ft=U.INSPECT_MAX_BYTES;return Tt=this.toString("hex",0,Ft).replace(/(.{2})/g,"$1 ").trim(),this.length>Ft&&(Tt+=" ... "),"<Buffer "+Tt+">"},b&&(c.prototype[b]=c.prototype.inspect),c.prototype.compare=function(Tt,Ft,$t,Vt,Nt){if(ae(Tt,Uint8Array)&&(Tt=c.from(Tt,Tt.offset,Tt.byteLength)),!c.isBuffer(Tt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+s(Tt));if(Ft===void 0&&(Ft=0),$t===void 0&&($t=Tt?Tt.length:0),Vt===void 0&&(Vt=0),Nt===void 0&&(Nt=this.length),Ft<0||$t>Tt.length||Vt<0||Nt>this.length)throw new RangeError("out of range index");if(Vt>=Nt&&Ft>=$t)return 0;if(Vt>=Nt)return-1;if(Ft>=$t)return 1;if(Ft>>>=0,$t>>>=0,Vt>>>=0,Nt>>>=0,this===Tt)return 0;for(var Mt=Nt-Vt,Et=$t-Ft,Dt=Math.min(Mt,Et),dt=this.slice(Vt,Nt),ht=Tt.slice(Ft,$t),bt=0;bt<Dt;++bt)if(dt[bt]!==ht[bt]){Mt=dt[bt],Et=ht[bt];break}return Mt<Et?-1:Et<Mt?1:0};function F(Tt,Ft,$t,Vt,Nt){if(Tt.length===0)return-1;if(typeof $t=="string"?(Vt=$t,$t=0):$t>2147483647?$t=2147483647:$t<-2147483648&&($t=-2147483648),$t=+$t,oe($t)&&($t=Nt?0:Tt.length-1),$t<0&&($t=Tt.length+$t),$t>=Tt.length){if(Nt)return-1;$t=Tt.length-1}else if($t<0)if(Nt)$t=0;else return-1;if(typeof Ft=="string"&&(Ft=c.from(Ft,Vt)),c.isBuffer(Ft))return Ft.length===0?-1:R(Tt,Ft,$t,Vt,Nt);if(typeof Ft=="number")return Ft=Ft&255,typeof Uint8Array.prototype.indexOf=="function"?Nt?Uint8Array.prototype.indexOf.call(Tt,Ft,$t):Uint8Array.prototype.lastIndexOf.call(Tt,Ft,$t):R(Tt,[Ft],$t,Vt,Nt);throw new TypeError("val must be string, number or Buffer")}function R(Tt,Ft,$t,Vt,Nt){var Mt=1,Et=Tt.length,Dt=Ft.length;if(Vt!==void 0&&(Vt=String(Vt).toLowerCase(),Vt==="ucs2"||Vt==="ucs-2"||Vt==="utf16le"||Vt==="utf-16le")){if(Tt.length<2||Ft.length<2)return-1;Mt=2,Et/=2,Dt/=2,$t/=2}function dt(te,ne){return Mt===1?te[ne]:te.readUInt16BE(ne*Mt)}var ht;if(Nt){var bt=-1;for(ht=$t;ht<Et;ht++)if(dt(Tt,ht)===dt(Ft,bt===-1?0:ht-bt)){if(bt===-1&&(bt=ht),ht-bt+1===Dt)return bt*Mt}else bt!==-1&&(ht-=ht-bt),bt=-1}else for($t+Dt>Et&&($t=Et-Dt),ht=$t;ht>=0;ht--){for(var Pt=!0,Gt=0;Gt<Dt;Gt++)if(dt(Tt,ht+Gt)!==dt(Ft,Gt)){Pt=!1;break}if(Pt)return ht}return-1}c.prototype.includes=function(Tt,Ft,$t){return this.indexOf(Tt,Ft,$t)!==-1},c.prototype.indexOf=function(Tt,Ft,$t){return F(this,Tt,Ft,$t,!0)},c.prototype.lastIndexOf=function(Tt,Ft,$t){return F(this,Tt,Ft,$t,!1)};function B(Tt,Ft,$t,Vt){$t=Number($t)||0;var Nt=Tt.length-$t;Vt?(Vt=Number(Vt),Vt>Nt&&(Vt=Nt)):Vt=Nt;var Mt=Ft.length;Vt>Mt/2&&(Vt=Mt/2);var Et;for(Et=0;Et<Vt;++Et){var Dt=parseInt(Ft.substr(Et*2,2),16);if(oe(Dt))return Et;Tt[$t+Et]=Dt}return Et}function N(Tt,Ft,$t,Vt){return Zt(Bt(Ft,Tt.length-$t),Tt,$t,Vt)}function G(Tt,Ft,$t,Vt){return Zt(re(Ft),Tt,$t,Vt)}function X(Tt,Ft,$t,Vt){return Zt(he(Ft),Tt,$t,Vt)}function J(Tt,Ft,$t,Vt){return Zt(Yt(Ft,Tt.length-$t),Tt,$t,Vt)}c.prototype.write=function(Tt,Ft,$t,Vt){if(Ft===void 0)Vt="utf8",$t=this.length,Ft=0;else if($t===void 0&&typeof Ft=="string")Vt=Ft,$t=this.length,Ft=0;else if(isFinite(Ft))Ft=Ft>>>0,isFinite($t)?($t=$t>>>0,Vt===void 0&&(Vt="utf8")):(Vt=$t,$t=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Nt=this.length-Ft;if(($t===void 0||$t>Nt)&&($t=Nt),Tt.length>0&&($t<0||Ft<0)||Ft>this.length)throw new RangeError("Attempt to write outside buffer bounds");Vt||(Vt="utf8");for(var Mt=!1;;)switch(Vt){case"hex":return B(this,Tt,Ft,$t);case"utf8":case"utf-8":return N(this,Tt,Ft,$t);case"ascii":case"latin1":case"binary":return G(this,Tt,Ft,$t);case"base64":return X(this,Tt,Ft,$t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,Tt,Ft,$t);default:if(Mt)throw new TypeError("Unknown encoding: "+Vt);Vt=(""+Vt).toLowerCase(),Mt=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function it(Tt,Ft,$t){return Ft===0&&$t===Tt.length?o.fromByteArray(Tt):o.fromByteArray(Tt.slice(Ft,$t))}function nt(Tt,Ft,$t){$t=Math.min(Tt.length,$t);for(var Vt=[],Nt=Ft;Nt<$t;){var Mt=Tt[Nt],Et=null,Dt=Mt>239?4:Mt>223?3:Mt>191?2:1;if(Nt+Dt<=$t){var dt=void 0,ht=void 0,bt=void 0,Pt=void 0;switch(Dt){case 1:Mt<128&&(Et=Mt);break;case 2:dt=Tt[Nt+1],(dt&192)===128&&(Pt=(Mt&31)<<6|dt&63,Pt>127&&(Et=Pt));break;case 3:dt=Tt[Nt+1],ht=Tt[Nt+2],(dt&192)===128&&(ht&192)===128&&(Pt=(Mt&15)<<12|(dt&63)<<6|ht&63,Pt>2047&&(Pt<55296||Pt>57343)&&(Et=Pt));break;case 4:dt=Tt[Nt+1],ht=Tt[Nt+2],bt=Tt[Nt+3],(dt&192)===128&&(ht&192)===128&&(bt&192)===128&&(Pt=(Mt&15)<<18|(dt&63)<<12|(ht&63)<<6|bt&63,Pt>65535&&Pt<1114112&&(Et=Pt))}}Et===null?(Et=65533,Dt=1):Et>65535&&(Et-=65536,Vt.push(Et>>>10&1023|55296),Et=56320|Et&1023),Vt.push(Et),Nt+=Dt}return Z(Vt)}var q=4096;function Z(Tt){var Ft=Tt.length;if(Ft<=q)return String.fromCharCode.apply(String,Tt);for(var $t="",Vt=0;Vt<Ft;)$t+=String.fromCharCode.apply(String,Tt.slice(Vt,Vt+=q));return $t}function $(Tt,Ft,$t){var Vt="";$t=Math.min(Tt.length,$t);for(var Nt=Ft;Nt<$t;++Nt)Vt+=String.fromCharCode(Tt[Nt]&127);return Vt}function V(Tt,Ft,$t){var Vt="";$t=Math.min(Tt.length,$t);for(var Nt=Ft;Nt<$t;++Nt)Vt+=String.fromCharCode(Tt[Nt]);return Vt}function rt(Tt,Ft,$t){var Vt=Tt.length;(!Ft||Ft<0)&&(Ft=0),(!$t||$t<0||$t>Vt)&&($t=Vt);for(var Nt="",Mt=Ft;Mt<$t;++Mt)Nt+=ce[Tt[Mt]];return Nt}function ot(Tt,Ft,$t){for(var Vt=Tt.slice(Ft,$t),Nt="",Mt=0;Mt<Vt.length-1;Mt+=2)Nt+=String.fromCharCode(Vt[Mt]+Vt[Mt+1]*256);return Nt}c.prototype.slice=function(Tt,Ft){var $t=this.length;Tt=~~Tt,Ft=Ft===void 0?$t:~~Ft,Tt<0?(Tt+=$t,Tt<0&&(Tt=0)):Tt>$t&&(Tt=$t),Ft<0?(Ft+=$t,Ft<0&&(Ft=0)):Ft>$t&&(Ft=$t),Ft<Tt&&(Ft=Tt);var Vt=this.subarray(Tt,Ft);return Object.setPrototypeOf(Vt,c.prototype),Vt};function H(Tt,Ft,$t){if(Tt%1!==0||Tt<0)throw new RangeError("offset is not uint");if(Tt+Ft>$t)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(Tt,Ft,$t){Tt=Tt>>>0,Ft=Ft>>>0,$t||H(Tt,Ft,this.length);for(var Vt=this[Tt],Nt=1,Mt=0;++Mt<Ft&&(Nt*=256);)Vt+=this[Tt+Mt]*Nt;return Vt},c.prototype.readUintBE=c.prototype.readUIntBE=function(Tt,Ft,$t){Tt=Tt>>>0,Ft=Ft>>>0,$t||H(Tt,Ft,this.length);for(var Vt=this[Tt+--Ft],Nt=1;Ft>0&&(Nt*=256);)Vt+=this[Tt+--Ft]*Nt;return Vt},c.prototype.readUint8=c.prototype.readUInt8=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,1,this.length),this[Tt]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,2,this.length),this[Tt]|this[Tt+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,2,this.length),this[Tt]<<8|this[Tt+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,4,this.length),(this[Tt]|this[Tt+1]<<8|this[Tt+2]<<16)+this[Tt+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,4,this.length),this[Tt]*16777216+(this[Tt+1]<<16|this[Tt+2]<<8|this[Tt+3])},c.prototype.readBigUInt64LE=ue(function(Tt){Tt=Tt>>>0,At(Tt,"offset");var Ft=this[Tt],$t=this[Tt+7];(Ft===void 0||$t===void 0)&&Ot(Tt,this.length-8);var Vt=Ft+this[++Tt]*Math.pow(2,8)+this[++Tt]*Math.pow(2,16)+this[++Tt]*Math.pow(2,24),Nt=this[++Tt]+this[++Tt]*Math.pow(2,8)+this[++Tt]*Math.pow(2,16)+$t*Math.pow(2,24);return BigInt(Vt)+(BigInt(Nt)<<BigInt(32))}),c.prototype.readBigUInt64BE=ue(function(Tt){Tt=Tt>>>0,At(Tt,"offset");var Ft=this[Tt],$t=this[Tt+7];(Ft===void 0||$t===void 0)&&Ot(Tt,this.length-8);var Vt=Ft*Math.pow(2,24)+this[++Tt]*Math.pow(2,16)+this[++Tt]*Math.pow(2,8)+this[++Tt],Nt=this[++Tt]*Math.pow(2,24)+this[++Tt]*Math.pow(2,16)+this[++Tt]*Math.pow(2,8)+$t;return(BigInt(Vt)<<BigInt(32))+BigInt(Nt)}),c.prototype.readIntLE=function(Tt,Ft,$t){Tt=Tt>>>0,Ft=Ft>>>0,$t||H(Tt,Ft,this.length);for(var Vt=this[Tt],Nt=1,Mt=0;++Mt<Ft&&(Nt*=256);)Vt+=this[Tt+Mt]*Nt;return Nt*=128,Vt>=Nt&&(Vt-=Math.pow(2,8*Ft)),Vt},c.prototype.readIntBE=function(Tt,Ft,$t){Tt=Tt>>>0,Ft=Ft>>>0,$t||H(Tt,Ft,this.length);for(var Vt=Ft,Nt=1,Mt=this[Tt+--Vt];Vt>0&&(Nt*=256);)Mt+=this[Tt+--Vt]*Nt;return Nt*=128,Mt>=Nt&&(Mt-=Math.pow(2,8*Ft)),Mt},c.prototype.readInt8=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,1,this.length),this[Tt]&128?(255-this[Tt]+1)*-1:this[Tt]},c.prototype.readInt16LE=function(Tt,Ft){Tt=Tt>>>0,Ft||H(Tt,2,this.length);var $t=this[Tt]|this[Tt+1]<<8;return $t&32768?$t|4294901760:$t},c.prototype.readInt16BE=function(Tt,Ft){Tt=Tt>>>0,Ft||H(Tt,2,this.length);var $t=this[Tt+1]|this[Tt]<<8;return $t&32768?$t|4294901760:$t},c.prototype.readInt32LE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,4,this.length),this[Tt]|this[Tt+1]<<8|this[Tt+2]<<16|this[Tt+3]<<24},c.prototype.readInt32BE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,4,this.length),this[Tt]<<24|this[Tt+1]<<16|this[Tt+2]<<8|this[Tt+3]},c.prototype.readBigInt64LE=ue(function(Tt){Tt=Tt>>>0,At(Tt,"offset");var Ft=this[Tt],$t=this[Tt+7];(Ft===void 0||$t===void 0)&&Ot(Tt,this.length-8);var Vt=this[Tt+4]+this[Tt+5]*Math.pow(2,8)+this[Tt+6]*Math.pow(2,16)+($t<<24);return(BigInt(Vt)<<BigInt(32))+BigInt(Ft+this[++Tt]*Math.pow(2,8)+this[++Tt]*Math.pow(2,16)+this[++Tt]*Math.pow(2,24))}),c.prototype.readBigInt64BE=ue(function(Tt){Tt=Tt>>>0,At(Tt,"offset");var Ft=this[Tt],$t=this[Tt+7];(Ft===void 0||$t===void 0)&&Ot(Tt,this.length-8);var Vt=(Ft<<24)+this[++Tt]*Math.pow(2,16)+this[++Tt]*Math.pow(2,8)+this[++Tt];return(BigInt(Vt)<<BigInt(32))+BigInt(this[++Tt]*Math.pow(2,24)+this[++Tt]*Math.pow(2,16)+this[++Tt]*Math.pow(2,8)+$t)}),c.prototype.readFloatLE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,4,this.length),p.read(this,Tt,!0,23,4)},c.prototype.readFloatBE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,4,this.length),p.read(this,Tt,!1,23,4)},c.prototype.readDoubleLE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,8,this.length),p.read(this,Tt,!0,52,8)},c.prototype.readDoubleBE=function(Tt,Ft){return Tt=Tt>>>0,Ft||H(Tt,8,this.length),p.read(this,Tt,!1,52,8)};function Y(Tt,Ft,$t,Vt,Nt,Mt){if(!c.isBuffer(Tt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ft>Nt||Ft<Mt)throw new RangeError('"value" argument is out of bounds');if($t+Vt>Tt.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(Tt,Ft,$t,Vt){if(Tt=+Tt,Ft=Ft>>>0,$t=$t>>>0,!Vt){var Nt=Math.pow(2,8*$t)-1;Y(this,Tt,Ft,$t,Nt,0)}var Mt=1,Et=0;for(this[Ft]=Tt&255;++Et<$t&&(Mt*=256);)this[Ft+Et]=Tt/Mt&255;return Ft+$t},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(Tt,Ft,$t,Vt){if(Tt=+Tt,Ft=Ft>>>0,$t=$t>>>0,!Vt){var Nt=Math.pow(2,8*$t)-1;Y(this,Tt,Ft,$t,Nt,0)}var Mt=$t-1,Et=1;for(this[Ft+Mt]=Tt&255;--Mt>=0&&(Et*=256);)this[Ft+Mt]=Tt/Et&255;return Ft+$t},c.prototype.writeUint8=c.prototype.writeUInt8=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,1,255,0),this[Ft]=Tt&255,Ft+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,2,65535,0),this[Ft]=Tt&255,this[Ft+1]=Tt>>>8,Ft+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,2,65535,0),this[Ft]=Tt>>>8,this[Ft+1]=Tt&255,Ft+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,4,4294967295,0),this[Ft+3]=Tt>>>24,this[Ft+2]=Tt>>>16,this[Ft+1]=Tt>>>8,this[Ft]=Tt&255,Ft+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,4,4294967295,0),this[Ft]=Tt>>>24,this[Ft+1]=Tt>>>16,this[Ft+2]=Tt>>>8,this[Ft+3]=Tt&255,Ft+4};function at(Tt,Ft,$t,Vt,Nt){vt(Ft,Vt,Nt,Tt,$t,7);var Mt=Number(Ft&BigInt(4294967295));Tt[$t++]=Mt,Mt=Mt>>8,Tt[$t++]=Mt,Mt=Mt>>8,Tt[$t++]=Mt,Mt=Mt>>8,Tt[$t++]=Mt;var Et=Number(Ft>>BigInt(32)&BigInt(4294967295));return Tt[$t++]=Et,Et=Et>>8,Tt[$t++]=Et,Et=Et>>8,Tt[$t++]=Et,Et=Et>>8,Tt[$t++]=Et,$t}function et(Tt,Ft,$t,Vt,Nt){vt(Ft,Vt,Nt,Tt,$t,7);var Mt=Number(Ft&BigInt(4294967295));Tt[$t+7]=Mt,Mt=Mt>>8,Tt[$t+6]=Mt,Mt=Mt>>8,Tt[$t+5]=Mt,Mt=Mt>>8,Tt[$t+4]=Mt;var Et=Number(Ft>>BigInt(32)&BigInt(4294967295));return Tt[$t+3]=Et,Et=Et>>8,Tt[$t+2]=Et,Et=Et>>8,Tt[$t+1]=Et,Et=Et>>8,Tt[$t]=Et,$t+8}c.prototype.writeBigUInt64LE=ue(function(Tt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return at(this,Tt,Ft,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=ue(function(Tt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return et(this,Tt,Ft,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(Tt,Ft,$t,Vt){if(Tt=+Tt,Ft=Ft>>>0,!Vt){var Nt=Math.pow(2,8*$t-1);Y(this,Tt,Ft,$t,Nt-1,-Nt)}var Mt=0,Et=1,Dt=0;for(this[Ft]=Tt&255;++Mt<$t&&(Et*=256);)Tt<0&&Dt===0&&this[Ft+Mt-1]!==0&&(Dt=1),this[Ft+Mt]=(Tt/Et>>0)-Dt&255;return Ft+$t},c.prototype.writeIntBE=function(Tt,Ft,$t,Vt){if(Tt=+Tt,Ft=Ft>>>0,!Vt){var Nt=Math.pow(2,8*$t-1);Y(this,Tt,Ft,$t,Nt-1,-Nt)}var Mt=$t-1,Et=1,Dt=0;for(this[Ft+Mt]=Tt&255;--Mt>=0&&(Et*=256);)Tt<0&&Dt===0&&this[Ft+Mt+1]!==0&&(Dt=1),this[Ft+Mt]=(Tt/Et>>0)-Dt&255;return Ft+$t},c.prototype.writeInt8=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,1,127,-128),Tt<0&&(Tt=255+Tt+1),this[Ft]=Tt&255,Ft+1},c.prototype.writeInt16LE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,2,32767,-32768),this[Ft]=Tt&255,this[Ft+1]=Tt>>>8,Ft+2},c.prototype.writeInt16BE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,2,32767,-32768),this[Ft]=Tt>>>8,this[Ft+1]=Tt&255,Ft+2},c.prototype.writeInt32LE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,4,2147483647,-2147483648),this[Ft]=Tt&255,this[Ft+1]=Tt>>>8,this[Ft+2]=Tt>>>16,this[Ft+3]=Tt>>>24,Ft+4},c.prototype.writeInt32BE=function(Tt,Ft,$t){return Tt=+Tt,Ft=Ft>>>0,$t||Y(this,Tt,Ft,4,2147483647,-2147483648),Tt<0&&(Tt=4294967295+Tt+1),this[Ft]=Tt>>>24,this[Ft+1]=Tt>>>16,this[Ft+2]=Tt>>>8,this[Ft+3]=Tt&255,Ft+4},c.prototype.writeBigInt64LE=ue(function(Tt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return at(this,Tt,Ft,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=ue(function(Tt){var Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return et(this,Tt,Ft,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ct(Tt,Ft,$t,Vt,Nt,Mt){if($t+Vt>Tt.length)throw new RangeError("Index out of range");if($t<0)throw new RangeError("Index out of range")}function ft(Tt,Ft,$t,Vt,Nt){return Ft=+Ft,$t=$t>>>0,Nt||ct(Tt,Ft,$t,4),p.write(Tt,Ft,$t,Vt,23,4),$t+4}c.prototype.writeFloatLE=function(Tt,Ft,$t){return ft(this,Tt,Ft,!0,$t)},c.prototype.writeFloatBE=function(Tt,Ft,$t){return ft(this,Tt,Ft,!1,$t)};function yt(Tt,Ft,$t,Vt,Nt){return Ft=+Ft,$t=$t>>>0,Nt||ct(Tt,Ft,$t,8),p.write(Tt,Ft,$t,Vt,52,8),$t+8}c.prototype.writeDoubleLE=function(Tt,Ft,$t){return yt(this,Tt,Ft,!0,$t)},c.prototype.writeDoubleBE=function(Tt,Ft,$t){return yt(this,Tt,Ft,!1,$t)},c.prototype.copy=function(Tt,Ft,$t,Vt){if(!c.isBuffer(Tt))throw new TypeError("argument should be a Buffer");if($t||($t=0),!Vt&&Vt!==0&&(Vt=this.length),Ft>=Tt.length&&(Ft=Tt.length),Ft||(Ft=0),Vt>0&&Vt<$t&&(Vt=$t),Vt===$t||Tt.length===0||this.length===0)return 0;if(Ft<0)throw new RangeError("targetStart out of bounds");if($t<0||$t>=this.length)throw new RangeError("Index out of range");if(Vt<0)throw new RangeError("sourceEnd out of bounds");Vt>this.length&&(Vt=this.length),Tt.length-Ft<Vt-$t&&(Vt=Tt.length-Ft+$t);var Nt=Vt-$t;return this===Tt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ft,$t,Vt):Uint8Array.prototype.set.call(Tt,this.subarray($t,Vt),Ft),Nt},c.prototype.fill=function(Tt,Ft,$t,Vt){if(typeof Tt=="string"){if(typeof Ft=="string"?(Vt=Ft,Ft=0,$t=this.length):typeof $t=="string"&&(Vt=$t,$t=this.length),Vt!==void 0&&typeof Vt!="string")throw new TypeError("encoding must be a string");if(typeof Vt=="string"&&!c.isEncoding(Vt))throw new TypeError("Unknown encoding: "+Vt);if(Tt.length===1){var Nt=Tt.charCodeAt(0);(Vt==="utf8"&&Nt<128||Vt==="latin1")&&(Tt=Nt)}}else typeof Tt=="number"?Tt=Tt&255:typeof Tt=="boolean"&&(Tt=Number(Tt));if(Ft<0||this.length<Ft||this.length<$t)throw new RangeError("Out of range index");if($t<=Ft)return this;Ft=Ft>>>0,$t=$t===void 0?this.length:$t>>>0,Tt||(Tt=0);var Mt;if(typeof Tt=="number")for(Mt=Ft;Mt<$t;++Mt)this[Mt]=Tt;else{var Et=c.isBuffer(Tt)?Tt:c.from(Tt,Vt),Dt=Et.length;if(Dt===0)throw new TypeError('The value "'+Tt+'" is invalid for argument "value"');for(Mt=0;Mt<$t-Ft;++Mt)this[Mt+Ft]=Et[Mt%Dt]}return this};var xt={};function Ct(Tt,Ft,$t){xt[Tt]=function(Vt){l(Nt,Vt);function Nt(){var Mt;return M(this,Nt),Mt=v(this,Nt),Object.defineProperty(e(Mt),"message",{value:Ft.apply(e(Mt),arguments),writable:!0,configurable:!0}),Mt.name="".concat(Mt.name," [").concat(Tt,"]"),Mt.stack,delete Mt.name,Mt}return i(Nt,[{key:"code",get:function(){return Tt},set:function(Mt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Mt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Tt,"]: ").concat(this.message)}}]),Nt}($t)}Ct("ERR_BUFFER_OUT_OF_BOUNDS",function(Tt){return Tt?"".concat(Tt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Ct("ERR_INVALID_ARG_TYPE",function(Tt,Ft){return'The "'.concat(Tt,'" argument must be of type number. Received type ').concat(s(Ft))},TypeError),Ct("ERR_OUT_OF_RANGE",function(Tt,Ft,$t){var Vt='The value of "'.concat(Tt,'" is out of range.'),Nt=$t;return Number.isInteger($t)&&Math.abs($t)>Math.pow(2,32)?Nt=gt(String($t)):typeof $t=="bigint"&&(Nt=String($t),($t>Math.pow(BigInt(2),BigInt(32))||$t<-Math.pow(BigInt(2),BigInt(32)))&&(Nt=gt(Nt)),Nt+="n"),Vt+=" It must be ".concat(Ft,". Received ").concat(Nt),Vt},RangeError);function gt(Tt){for(var Ft="",$t=Tt.length,Vt=Tt[0]==="-"?1:0;$t>=Vt+4;$t-=3)Ft="_".concat(Tt.slice($t-3,$t)).concat(Ft);return"".concat(Tt.slice(0,$t)).concat(Ft)}function mt(Tt,Ft,$t){At(Ft,"offset"),(Tt[Ft]===void 0||Tt[Ft+$t]===void 0)&&Ot(Ft,Tt.length-($t+1))}function vt(Tt,Ft,$t,Vt,Nt,Mt){if(Tt>$t||Tt<Ft){var Et=typeof Ft=="bigint"?"n":"",Dt;throw Mt>3?Ft===0||Ft===BigInt(0)?Dt=">= 0".concat(Et," and < 2").concat(Et," ** ").concat((Mt+1)*8).concat(Et):Dt=">= -(2".concat(Et," ** ").concat((Mt+1)*8-1).concat(Et,") and < 2 ** ")+"".concat((Mt+1)*8-1).concat(Et):Dt=">= ".concat(Ft).concat(Et," and <= ").concat($t).concat(Et),new xt.ERR_OUT_OF_RANGE("value",Dt,Tt)}mt(Vt,Nt,Mt)}function At(Tt,Ft){if(typeof Tt!="number")throw new xt.ERR_INVALID_ARG_TYPE(Ft,"number",Tt)}function Ot(Tt,Ft,$t){throw Math.floor(Tt)!==Tt?(At(Tt,$t),new xt.ERR_OUT_OF_RANGE($t||"offset","an integer",Tt)):Ft<0?new xt.ERR_BUFFER_OUT_OF_BOUNDS:new xt.ERR_OUT_OF_RANGE($t||"offset",">= ".concat($t?1:0," and <= ").concat(Ft),Tt)}var It=/[^+/0-9A-Za-z-_]/g;function St(Tt){if(Tt=Tt.split("=")[0],Tt=Tt.trim().replace(It,""),Tt.length<2)return"";for(;Tt.length%4!==0;)Tt=Tt+"=";return Tt}function Bt(Tt,Ft){Ft=Ft||1/0;for(var $t,Vt=Tt.length,Nt=null,Mt=[],Et=0;Et<Vt;++Et){if($t=Tt.charCodeAt(Et),$t>55295&&$t<57344){if(!Nt){if($t>56319){(Ft-=3)>-1&&Mt.push(239,191,189);continue}else if(Et+1===Vt){(Ft-=3)>-1&&Mt.push(239,191,189);continue}Nt=$t;continue}if($t<56320){(Ft-=3)>-1&&Mt.push(239,191,189),Nt=$t;continue}$t=(Nt-55296<<10|$t-56320)+65536}else Nt&&(Ft-=3)>-1&&Mt.push(239,191,189);if(Nt=null,$t<128){if((Ft-=1)<0)break;Mt.push($t)}else if($t<2048){if((Ft-=2)<0)break;Mt.push($t>>6|192,$t&63|128)}else if($t<65536){if((Ft-=3)<0)break;Mt.push($t>>12|224,$t>>6&63|128,$t&63|128)}else if($t<1114112){if((Ft-=4)<0)break;Mt.push($t>>18|240,$t>>12&63|128,$t>>6&63|128,$t&63|128)}else throw new Error("Invalid code point")}return Mt}function re(Tt){for(var Ft=[],$t=0;$t<Tt.length;++$t)Ft.push(Tt.charCodeAt($t)&255);return Ft}function Yt(Tt,Ft){for(var $t,Vt,Nt,Mt=[],Et=0;Et<Tt.length&&!((Ft-=2)<0);++Et)$t=Tt.charCodeAt(Et),Vt=$t>>8,Nt=$t%256,Mt.push(Nt),Mt.push(Vt);return Mt}function he(Tt){return o.toByteArray(St(Tt))}function Zt(Tt,Ft,$t,Vt){var Nt;for(Nt=0;Nt<Vt&&!(Nt+$t>=Ft.length||Nt>=Tt.length);++Nt)Ft[Nt+$t]=Tt[Nt];return Nt}function ae(Tt,Ft){return Tt instanceof Ft||Tt!=null&&Tt.constructor!=null&&Tt.constructor.name!=null&&Tt.constructor.name===Ft.name}function oe(Tt){return Tt!==Tt}var ce=function(){for(var Tt="0123456789abcdef",Ft=new Array(256),$t=0;$t<16;++$t)for(var Vt=$t*16,Nt=0;Nt<16;++Nt)Ft[Vt+Nt]=Tt[$t]+Tt[Nt];return Ft}();function ue(Tt){return typeof BigInt>"u"?ye:Tt}function ye(){throw new Error("BigInt not supported")}},25928:function(Q){Q.exports=E,Q.exports.isMobile=E,Q.exports.default=E;var U=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,M=/android|ipad|playbook|silk/i;function E(i){i||(i={});var C=i.ua;if(!C&&typeof navigator<"u"&&(C=navigator.userAgent),C&&C.headers&&typeof C.headers["user-agent"]=="string"&&(C=C.headers["user-agent"]),typeof C!="string")return!1;var T=U.test(C)&&!t.test(C)||!!i.tablet&&M.test(C);return!T&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&C.indexOf("Macintosh")!==-1&&C.indexOf("Safari")!==-1&&(T=!0),T}},48932:function(Q,U,t){t.r(U),t.d(U,{sankeyCenter:function(){return l},sankeyCircular:function(){return S},sankeyJustify:function(){return e},sankeyLeft:function(){return d},sankeyRight:function(){return r}});var M=t(84706),E=t(34712),i=t(10132),C=t(6688),T=t.n(C);function v(xt){return xt.target.depth}function d(xt){return xt.depth}function r(xt,Ct){return Ct-1-xt.height}function e(xt,Ct){return xt.sourceLinks.length?xt.depth:Ct-1}function l(xt){return xt.targetLinks.length?xt.depth:xt.sourceLinks.length?(0,M.SY)(xt.sourceLinks,v)-1:0}function n(xt){return function(){return xt}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt};function o(xt,Ct){return b(xt.source,Ct.source)||xt.index-Ct.index}function p(xt,Ct){return b(xt.target,Ct.target)||xt.index-Ct.index}function b(xt,Ct){return xt.partOfCycle===Ct.partOfCycle?xt.y0-Ct.y0:xt.circularLinkType==="top"||Ct.circularLinkType==="bottom"?-1:1}function h(xt){return xt.value}function _(xt){return(xt.y0+xt.y1)/2}function a(xt){return _(xt.source)}function c(xt){return _(xt.target)}function f(xt){return xt.index}function x(xt){return xt.nodes}function k(xt){return xt.links}function y(xt,Ct){var gt=xt.get(Ct);if(!gt)throw new Error("missing: "+Ct);return gt}function A(xt,Ct){return Ct(xt)}var L=25,u=10,m=.3;function S(){var xt=0,Ct=0,gt=1,mt=1,vt=24,At,Ot=f,It=e,St=x,Bt=k,re=32,Yt=2,he,Zt=null;function ae(){var Vt={nodes:St.apply(null,arguments),links:Bt.apply(null,arguments)};oe(Vt),w(Vt,Ot,Zt),ce(Vt),Tt(Vt),I(Vt,Ot),Ft(Vt,re,Ot),$t(Vt);for(var Nt=4,Mt=0;Mt<Nt;Mt++)Y(Vt,mt,Ot),at(Vt,mt,Ot),rt(Vt,Ct,mt,Ot),Y(Vt,mt,Ot),at(Vt,mt,Ot);return yt(Vt,Ct,mt),B(Vt,Yt,mt,Ot),Vt}ae.nodeId=function(Vt){return arguments.length?(Ot=typeof Vt=="function"?Vt:n(Vt),ae):Ot},ae.nodeAlign=function(Vt){return arguments.length?(It=typeof Vt=="function"?Vt:n(Vt),ae):It},ae.nodeWidth=function(Vt){return arguments.length?(vt=+Vt,ae):vt},ae.nodePadding=function(Vt){return arguments.length?(At=+Vt,ae):At},ae.nodes=function(Vt){return arguments.length?(St=typeof Vt=="function"?Vt:n(Vt),ae):St},ae.links=function(Vt){return arguments.length?(Bt=typeof Vt=="function"?Vt:n(Vt),ae):Bt},ae.size=function(Vt){return arguments.length?(xt=Ct=0,gt=+Vt[0],mt=+Vt[1],ae):[gt-xt,mt-Ct]},ae.extent=function(Vt){return arguments.length?(xt=+Vt[0][0],gt=+Vt[1][0],Ct=+Vt[0][1],mt=+Vt[1][1],ae):[[xt,Ct],[gt,mt]]},ae.iterations=function(Vt){return arguments.length?(re=+Vt,ae):re},ae.circularLinkGap=function(Vt){return arguments.length?(Yt=+Vt,ae):Yt},ae.nodePaddingRatio=function(Vt){return arguments.length?(he=+Vt,ae):he},ae.sortNodes=function(Vt){return arguments.length?(Zt=Vt,ae):Zt},ae.update=function(Vt){return I(Vt,Ot),$t(Vt),Vt.links.forEach(function(Nt){Nt.circular&&(Nt.circularLinkType=Nt.y0+Nt.y1<mt?"top":"bottom",Nt.source.circularLinkType=Nt.circularLinkType,Nt.target.circularLinkType=Nt.circularLinkType)}),Y(Vt,mt,Ot,!1),at(Vt,mt,Ot),B(Vt,Yt,mt,Ot),Vt};function oe(Vt){Vt.nodes.forEach(function(Mt,Et){Mt.index=Et,Mt.sourceLinks=[],Mt.targetLinks=[]});var Nt=(0,E.kH)(Vt.nodes,Ot);return Vt.links.forEach(function(Mt,Et){Mt.index=Et;var Dt=Mt.source,dt=Mt.target;(typeof Dt>"u"?"undefined":s(Dt))!=="object"&&(Dt=Mt.source=y(Nt,Dt)),(typeof dt>"u"?"undefined":s(dt))!=="object"&&(dt=Mt.target=y(Nt,dt)),Dt.sourceLinks.push(Mt),dt.targetLinks.push(Mt)}),Vt}function ce(Vt){Vt.nodes.forEach(function(Nt){Nt.partOfCycle=!1,Nt.value=Math.max((0,M.oh)(Nt.sourceLinks,h),(0,M.oh)(Nt.targetLinks,h)),Nt.sourceLinks.forEach(function(Mt){Mt.circular&&(Nt.partOfCycle=!0,Nt.circularLinkType=Mt.circularLinkType)}),Nt.targetLinks.forEach(function(Mt){Mt.circular&&(Nt.partOfCycle=!0,Nt.circularLinkType=Mt.circularLinkType)})})}function ue(Vt){var Nt=0,Mt=0,Et=0,Dt=0,dt=(0,M.kv)(Vt.nodes,function(ht){return ht.column});return Vt.links.forEach(function(ht){ht.circular&&(ht.circularLinkType=="top"?Nt=Nt+ht.width:Mt=Mt+ht.width,ht.target.column==0&&(Dt=Dt+ht.width),ht.source.column==dt&&(Et=Et+ht.width))}),Nt=Nt>0?Nt+L+u:Nt,Mt=Mt>0?Mt+L+u:Mt,Et=Et>0?Et+L+u:Et,Dt=Dt>0?Dt+L+u:Dt,{top:Nt,bottom:Mt,left:Dt,right:Et}}function ye(Vt,Nt){var Mt=(0,M.kv)(Vt.nodes,function(Gt){return Gt.column}),Et=gt-xt,Dt=mt-Ct,dt=Et+Nt.right+Nt.left,ht=Dt+Nt.top+Nt.bottom,bt=Et/dt,Pt=Dt/ht;return xt=xt*bt+Nt.left,gt=Nt.right==0?gt:gt*bt,Ct=Ct*Pt+Nt.top,mt=mt*Pt,Vt.nodes.forEach(function(Gt){Gt.x0=xt+Gt.column*((gt-xt-vt)/Mt),Gt.x1=Gt.x0+vt}),Pt}function Tt(Vt){var Nt,Mt,Et;for(Nt=Vt.nodes,Mt=[],Et=0;Nt.length;++Et,Nt=Mt,Mt=[])Nt.forEach(function(Dt){Dt.depth=Et,Dt.sourceLinks.forEach(function(dt){Mt.indexOf(dt.target)<0&&!dt.circular&&Mt.push(dt.target)})});for(Nt=Vt.nodes,Mt=[],Et=0;Nt.length;++Et,Nt=Mt,Mt=[])Nt.forEach(function(Dt){Dt.height=Et,Dt.targetLinks.forEach(function(dt){Mt.indexOf(dt.source)<0&&!dt.circular&&Mt.push(dt.source)})});Vt.nodes.forEach(function(Dt){Dt.column=Math.floor(It.call(null,Dt,Et))})}function Ft(Vt,Nt,Mt){var Et=(0,E.UJ)().key(function(Gt){return Gt.column}).sortKeys(M.XE).entries(Vt.nodes).map(function(Gt){return Gt.values});ht(Mt),Pt();for(var Dt=1,dt=Nt;dt>0;--dt)bt(Dt*=.99,Mt),Pt();function ht(Gt){if(he){var te=1/0;Et.forEach(function(ge){var _e=mt*he/(ge.length+1);te=_e<te?_e:te}),At=te}var ne=(0,M.SY)(Et,function(ge){return(mt-Ct-(ge.length-1)*At)/(0,M.oh)(ge,h)});ne=ne*m,Vt.links.forEach(function(ge){ge.width=ge.value*ne});var je=ue(Vt),Ne=ye(Vt,je);ne=ne*Ne,Vt.links.forEach(function(ge){ge.width=ge.value*ne}),Et.forEach(function(ge){var _e=ge.length;ge.forEach(function(De,hr){De.depth==Et.length-1&&_e==1||De.depth==0&&_e==1?(De.y0=mt/2-De.value*ne,De.y1=De.y0+De.value*ne):De.partOfCycle?P(De,Gt)==0?(De.y0=mt/2+hr,De.y1=De.y0+De.value*ne):De.circularLinkType=="top"?(De.y0=Ct+hr,De.y1=De.y0+De.value*ne):(De.y0=mt-De.value*ne-hr,De.y1=De.y0+De.value*ne):je.top==0||je.bottom==0?(De.y0=(mt-Ct)/_e*hr,De.y1=De.y0+De.value*ne):(De.y0=(mt-Ct)/2-_e/2+hr,De.y1=De.y0+De.value*ne)})})}function bt(Gt,te){var ne=Et.length;Et.forEach(function(je){var Ne=je.length,ge=je[0].depth;je.forEach(function(_e){var De;if((_e.sourceLinks.length||_e.targetLinks.length)&&!(_e.partOfCycle&&P(_e,te)>0))if(ge==0&&Ne==1)De=_e.y1-_e.y0,_e.y0=mt/2-De/2,_e.y1=mt/2+De/2;else if(ge==ne-1&&Ne==1)De=_e.y1-_e.y0,_e.y0=mt/2-De/2,_e.y1=mt/2+De/2;else{var hr=0,fe=(0,M.mo)(_e.sourceLinks,c),Be=(0,M.mo)(_e.targetLinks,a);fe&&Be?hr=(fe+Be)/2:hr=fe||Be;var He=(hr-_(_e))*Gt;_e.y0+=He,_e.y1+=He}})})}function Pt(){Et.forEach(function(Gt){var te,ne,je=Ct,Ne=Gt.length,ge;for(Gt.sort(b),ge=0;ge<Ne;++ge)te=Gt[ge],ne=je-te.y0,ne>0&&(te.y0+=ne,te.y1+=ne),je=te.y1+At;if(ne=je-At-mt,ne>0)for(je=te.y0-=ne,te.y1-=ne,ge=Ne-2;ge>=0;--ge)te=Gt[ge],ne=te.y1+At-je,ne>0&&(te.y0-=ne,te.y1-=ne),je=te.y0})}}function $t(Vt){Vt.nodes.forEach(function(Nt){Nt.sourceLinks.sort(p),Nt.targetLinks.sort(o)}),Vt.nodes.forEach(function(Nt){var Mt=Nt.y0,Et=Mt,Dt=Nt.y1,dt=Dt;Nt.sourceLinks.forEach(function(ht){ht.circular?(ht.y0=Dt-ht.width/2,Dt=Dt-ht.width):(ht.y0=Mt+ht.width/2,Mt+=ht.width)}),Nt.targetLinks.forEach(function(ht){ht.circular?(ht.y1=dt-ht.width/2,dt=dt-ht.width):(ht.y1=Et+ht.width/2,Et+=ht.width)})})}return ae}function w(xt,Ct,gt){var mt=0;if(gt===null){for(var vt=[],At=0;At<xt.links.length;At++){var Ot=xt.links[At],It=Ot.source.index,St=Ot.target.index;vt[It]||(vt[It]=[]),vt[St]||(vt[St]=[]),vt[It].indexOf(St)===-1&&vt[It].push(St)}var Bt=T()(vt);Bt.sort(function(Zt,ae){return Zt.length-ae.length});var re={};for(At=0;At<Bt.length;At++){var Yt=Bt[At],he=Yt.slice(-2);re[he[0]]||(re[he[0]]={}),re[he[0]][he[1]]=!0}xt.links.forEach(function(Zt){var ae=Zt.target.index,oe=Zt.source.index;ae===oe||re[oe]&&re[oe][ae]?(Zt.circular=!0,Zt.circularLinkID=mt,mt=mt+1):Zt.circular=!1})}else xt.links.forEach(function(Zt){Zt.source[gt]<Zt.target[gt]?Zt.circular=!1:(Zt.circular=!0,Zt.circularLinkID=mt,mt=mt+1)})}function I(xt,Ct){var gt=0,mt=0;xt.links.forEach(function(vt){vt.circular&&(vt.source.circularLinkType||vt.target.circularLinkType?vt.circularLinkType=vt.source.circularLinkType?vt.source.circularLinkType:vt.target.circularLinkType:vt.circularLinkType=gt<mt?"top":"bottom",vt.circularLinkType=="top"?gt=gt+1:mt=mt+1,xt.nodes.forEach(function(At){(A(At,Ct)==A(vt.source,Ct)||A(At,Ct)==A(vt.target,Ct))&&(At.circularLinkType=vt.circularLinkType)}))}),xt.links.forEach(function(vt){vt.circular&&(vt.source.circularLinkType==vt.target.circularLinkType&&(vt.circularLinkType=vt.source.circularLinkType),ft(vt,Ct)&&(vt.circularLinkType=vt.source.circularLinkType))})}function O(xt){var Ct=Math.abs(xt.y1-xt.y0),gt=Math.abs(xt.target.x0-xt.source.x1);return Math.atan(gt/Ct)}function D(xt,Ct){return xt.source.column<Ct.target.column?!1:!(xt.target.column>Ct.source.column)}function P(xt,Ct){var gt=0;xt.sourceLinks.forEach(function(vt){gt=vt.circular&&!ft(vt,Ct)?gt+1:gt});var mt=0;return xt.targetLinks.forEach(function(vt){mt=vt.circular&&!ft(vt,Ct)?mt+1:mt}),gt+mt}function F(xt){var Ct=xt.source.sourceLinks,gt=0;Ct.forEach(function(At){gt=At.circular?gt+1:gt});var mt=xt.target.targetLinks,vt=0;return mt.forEach(function(At){vt=At.circular?vt+1:vt}),!(gt>1||vt>1)}function R(xt,Ct,gt){return xt.sort(G),xt.forEach(function(mt,vt){var At=0;if(ft(mt,gt)&&F(mt))mt.circularPathData.verticalBuffer=At+mt.width/2;else{var Ot=0;for(Ot;Ot<vt;Ot++)if(D(xt[vt],xt[Ot])){var It=xt[Ot].circularPathData.verticalBuffer+xt[Ot].width/2+Ct;At=It>At?It:At}mt.circularPathData.verticalBuffer=At+mt.width/2}}),xt}function B(xt,Ct,gt,mt){var vt=5,At=(0,M.SY)(xt.links,function(St){return St.source.y0});xt.links.forEach(function(St){St.circular&&(St.circularPathData={})});var Ot=xt.links.filter(function(St){return St.circularLinkType=="top"});R(Ot,Ct,mt);var It=xt.links.filter(function(St){return St.circularLinkType=="bottom"});R(It,Ct,mt),xt.links.forEach(function(St){if(St.circular){if(St.circularPathData.arcRadius=St.width+u,St.circularPathData.leftNodeBuffer=vt,St.circularPathData.rightNodeBuffer=vt,St.circularPathData.sourceWidth=St.source.x1-St.source.x0,St.circularPathData.sourceX=St.source.x0+St.circularPathData.sourceWidth,St.circularPathData.targetX=St.target.x0,St.circularPathData.sourceY=St.y0,St.circularPathData.targetY=St.y1,ft(St,mt)&&F(St))St.circularPathData.leftSmallArcRadius=u+St.width/2,St.circularPathData.leftLargeArcRadius=u+St.width/2,St.circularPathData.rightSmallArcRadius=u+St.width/2,St.circularPathData.rightLargeArcRadius=u+St.width/2,St.circularLinkType=="bottom"?(St.circularPathData.verticalFullExtent=St.source.y1+L+St.circularPathData.verticalBuffer,St.circularPathData.verticalLeftInnerExtent=St.circularPathData.verticalFullExtent-St.circularPathData.leftLargeArcRadius,St.circularPathData.verticalRightInnerExtent=St.circularPathData.verticalFullExtent-St.circularPathData.rightLargeArcRadius):(St.circularPathData.verticalFullExtent=St.source.y0-L-St.circularPathData.verticalBuffer,St.circularPathData.verticalLeftInnerExtent=St.circularPathData.verticalFullExtent+St.circularPathData.leftLargeArcRadius,St.circularPathData.verticalRightInnerExtent=St.circularPathData.verticalFullExtent+St.circularPathData.rightLargeArcRadius);else{var Bt=St.source.column,re=St.circularLinkType,Yt=xt.links.filter(function(ae){return ae.source.column==Bt&&ae.circularLinkType==re});St.circularLinkType=="bottom"?Yt.sort(J):Yt.sort(X);var he=0;Yt.forEach(function(ae,oe){ae.circularLinkID==St.circularLinkID&&(St.circularPathData.leftSmallArcRadius=u+St.width/2+he,St.circularPathData.leftLargeArcRadius=u+St.width/2+oe*Ct+he),he=he+ae.width}),Bt=St.target.column,Yt=xt.links.filter(function(ae){return ae.target.column==Bt&&ae.circularLinkType==re}),St.circularLinkType=="bottom"?Yt.sort(nt):Yt.sort(it),he=0,Yt.forEach(function(ae,oe){ae.circularLinkID==St.circularLinkID&&(St.circularPathData.rightSmallArcRadius=u+St.width/2+he,St.circularPathData.rightLargeArcRadius=u+St.width/2+oe*Ct+he),he=he+ae.width}),St.circularLinkType=="bottom"?(St.circularPathData.verticalFullExtent=Math.max(gt,St.source.y1,St.target.y1)+L+St.circularPathData.verticalBuffer,St.circularPathData.verticalLeftInnerExtent=St.circularPathData.verticalFullExtent-St.circularPathData.leftLargeArcRadius,St.circularPathData.verticalRightInnerExtent=St.circularPathData.verticalFullExtent-St.circularPathData.rightLargeArcRadius):(St.circularPathData.verticalFullExtent=At-L-St.circularPathData.verticalBuffer,St.circularPathData.verticalLeftInnerExtent=St.circularPathData.verticalFullExtent+St.circularPathData.leftLargeArcRadius,St.circularPathData.verticalRightInnerExtent=St.circularPathData.verticalFullExtent+St.circularPathData.rightLargeArcRadius)}St.circularPathData.leftInnerExtent=St.circularPathData.sourceX+St.circularPathData.leftNodeBuffer,St.circularPathData.rightInnerExtent=St.circularPathData.targetX-St.circularPathData.rightNodeBuffer,St.circularPathData.leftFullExtent=St.circularPathData.sourceX+St.circularPathData.leftLargeArcRadius+St.circularPathData.leftNodeBuffer,St.circularPathData.rightFullExtent=St.circularPathData.targetX-St.circularPathData.rightLargeArcRadius-St.circularPathData.rightNodeBuffer}if(St.circular)St.path=N(St);else{var Zt=(0,i.ak)().source(function(ae){var oe=ae.source.x0+(ae.source.x1-ae.source.x0),ce=ae.y0;return[oe,ce]}).target(function(ae){var oe=ae.target.x0,ce=ae.y1;return[oe,ce]});St.path=Zt(St)}})}function N(xt){var Ct="";return xt.circularLinkType=="top"?Ct="M"+xt.circularPathData.sourceX+" "+xt.circularPathData.sourceY+" L"+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.sourceY+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftSmallArcRadius+" 0 0 0 "+xt.circularPathData.leftFullExtent+" "+(xt.circularPathData.sourceY-xt.circularPathData.leftSmallArcRadius)+" L"+xt.circularPathData.leftFullExtent+" "+xt.circularPathData.verticalLeftInnerExtent+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftLargeArcRadius+" 0 0 0 "+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.verticalFullExtent+" L"+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.verticalFullExtent+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightLargeArcRadius+" 0 0 0 "+xt.circularPathData.rightFullExtent+" "+xt.circularPathData.verticalRightInnerExtent+" L"+xt.circularPathData.rightFullExtent+" "+(xt.circularPathData.targetY-xt.circularPathData.rightSmallArcRadius)+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightSmallArcRadius+" 0 0 0 "+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.targetY+" L"+xt.circularPathData.targetX+" "+xt.circularPathData.targetY:Ct="M"+xt.circularPathData.sourceX+" "+xt.circularPathData.sourceY+" L"+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.sourceY+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftSmallArcRadius+" 0 0 1 "+xt.circularPathData.leftFullExtent+" "+(xt.circularPathData.sourceY+xt.circularPathData.leftSmallArcRadius)+" L"+xt.circularPathData.leftFullExtent+" "+xt.circularPathData.verticalLeftInnerExtent+" A"+xt.circularPathData.leftLargeArcRadius+" "+xt.circularPathData.leftLargeArcRadius+" 0 0 1 "+xt.circularPathData.leftInnerExtent+" "+xt.circularPathData.verticalFullExtent+" L"+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.verticalFullExtent+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightLargeArcRadius+" 0 0 1 "+xt.circularPathData.rightFullExtent+" "+xt.circularPathData.verticalRightInnerExtent+" L"+xt.circularPathData.rightFullExtent+" "+(xt.circularPathData.targetY+xt.circularPathData.rightSmallArcRadius)+" A"+xt.circularPathData.rightLargeArcRadius+" "+xt.circularPathData.rightSmallArcRadius+" 0 0 1 "+xt.circularPathData.rightInnerExtent+" "+xt.circularPathData.targetY+" L"+xt.circularPathData.targetX+" "+xt.circularPathData.targetY,Ct}function G(xt,Ct){return q(xt)==q(Ct)?xt.circularLinkType=="bottom"?J(xt,Ct):X(xt,Ct):q(Ct)-q(xt)}function X(xt,Ct){return xt.y0-Ct.y0}function J(xt,Ct){return Ct.y0-xt.y0}function it(xt,Ct){return xt.y1-Ct.y1}function nt(xt,Ct){return Ct.y1-xt.y1}function q(xt){return xt.target.column-xt.source.column}function Z(xt){return xt.target.x0-xt.source.x1}function $(xt,Ct){var gt=O(xt),mt=Z(Ct)/Math.tan(gt),vt=ct(xt)=="up"?xt.y1+mt:xt.y1-mt;return vt}function V(xt,Ct){var gt=O(xt),mt=Z(Ct)/Math.tan(gt),vt=ct(xt)=="up"?xt.y1-mt:xt.y1+mt;return vt}function rt(xt,Ct,gt,mt){xt.links.forEach(function(vt){if(!vt.circular&&vt.target.column-vt.source.column>1){var At=vt.source.column+1,Ot=vt.target.column-1,It=1,St=Ot-At+1;for(It=1;At<=Ot;At++,It++)xt.nodes.forEach(function(Bt){if(Bt.column==At){var re=It/(St+1),Yt=Math.pow(1-re,3),he=3*re*Math.pow(1-re,2),Zt=3*Math.pow(re,2)*(1-re),ae=Math.pow(re,3),oe=Yt*vt.y0+he*vt.y0+Zt*vt.y1+ae*vt.y1,ce=oe-vt.width/2,ue=oe+vt.width/2,ye;ce>Bt.y0&&ce<Bt.y1?(ye=Bt.y1-ce+10,ye=Bt.circularLinkType=="bottom"?ye:-ye,Bt=H(Bt,ye,Ct,gt),xt.nodes.forEach(function(Tt){A(Tt,mt)==A(Bt,mt)||Tt.column!=Bt.column||ot(Bt,Tt)&&H(Tt,ye,Ct,gt)})):ue>Bt.y0&&ue<Bt.y1?(ye=ue-Bt.y0+10,Bt=H(Bt,ye,Ct,gt),xt.nodes.forEach(function(Tt){A(Tt,mt)==A(Bt,mt)||Tt.column!=Bt.column||Tt.y0<Bt.y1&&Tt.y1>Bt.y1&&H(Tt,ye,Ct,gt)})):ce<Bt.y0&&ue>Bt.y1&&(ye=ue-Bt.y0+10,Bt=H(Bt,ye,Ct,gt),xt.nodes.forEach(function(Tt){A(Tt,mt)==A(Bt,mt)||Tt.column!=Bt.column||Tt.y0<Bt.y1&&Tt.y1>Bt.y1&&H(Tt,ye,Ct,gt)}))}})}})}function ot(xt,Ct){return xt.y0>Ct.y0&&xt.y0<Ct.y1||xt.y1>Ct.y0&&xt.y1<Ct.y1?!0:xt.y0<Ct.y0&&xt.y1>Ct.y1}function H(xt,Ct,gt,mt){return xt.y0+Ct>=gt&&xt.y1+Ct<=mt&&(xt.y0=xt.y0+Ct,xt.y1=xt.y1+Ct,xt.targetLinks.forEach(function(vt){vt.y1=vt.y1+Ct}),xt.sourceLinks.forEach(function(vt){vt.y0=vt.y0+Ct})),xt}function Y(xt,Ct,gt,mt){xt.nodes.forEach(function(vt){mt&&vt.y+(vt.y1-vt.y0)>Ct&&(vt.y=vt.y-(vt.y+(vt.y1-vt.y0)-Ct));var At=xt.links.filter(function(St){return A(St.source,gt)==A(vt,gt)}),Ot=At.length;Ot>1&&At.sort(function(St,Bt){if(!St.circular&&!Bt.circular){if(St.target.column==Bt.target.column)return St.y1-Bt.y1;if(et(St,Bt)){if(St.target.column>Bt.target.column){var re=V(Bt,St);return St.y1-re}if(Bt.target.column>St.target.column){var Yt=V(St,Bt);return Yt-Bt.y1}}else return St.y1-Bt.y1}if(St.circular&&!Bt.circular)return St.circularLinkType=="top"?-1:1;if(Bt.circular&&!St.circular)return Bt.circularLinkType=="top"?1:-1;if(St.circular&&Bt.circular)return St.circularLinkType===Bt.circularLinkType&&St.circularLinkType=="top"?St.target.column===Bt.target.column?St.target.y1-Bt.target.y1:Bt.target.column-St.target.column:St.circularLinkType===Bt.circularLinkType&&St.circularLinkType=="bottom"?St.target.column===Bt.target.column?Bt.target.y1-St.target.y1:St.target.column-Bt.target.column:St.circularLinkType=="top"?-1:1});var It=vt.y0;At.forEach(function(St){St.y0=It+St.width/2,It=It+St.width}),At.forEach(function(St,Bt){if(St.circularLinkType=="bottom"){var re=Bt+1,Yt=0;for(re;re<Ot;re++)Yt=Yt+At[re].width;St.y0=vt.y1-Yt-St.width/2}})})}function at(xt,Ct,gt){xt.nodes.forEach(function(mt){var vt=xt.links.filter(function(It){return A(It.target,gt)==A(mt,gt)}),At=vt.length;At>1&&vt.sort(function(It,St){if(!It.circular&&!St.circular){if(It.source.column==St.source.column)return It.y0-St.y0;if(et(It,St)){if(St.source.column<It.source.column){var Bt=$(St,It);return It.y0-Bt}if(It.source.column<St.source.column){var re=$(It,St);return re-St.y0}}else return It.y0-St.y0}if(It.circular&&!St.circular)return It.circularLinkType=="top"?-1:1;if(St.circular&&!It.circular)return St.circularLinkType=="top"?1:-1;if(It.circular&&St.circular)return It.circularLinkType===St.circularLinkType&&It.circularLinkType=="top"?It.source.column===St.source.column?It.source.y1-St.source.y1:It.source.column-St.source.column:It.circularLinkType===St.circularLinkType&&It.circularLinkType=="bottom"?It.source.column===St.source.column?It.source.y1-St.source.y1:St.source.column-It.source.column:It.circularLinkType=="top"?-1:1});var Ot=mt.y0;vt.forEach(function(It){It.y1=Ot+It.width/2,Ot=Ot+It.width}),vt.forEach(function(It,St){if(It.circularLinkType=="bottom"){var Bt=St+1,re=0;for(Bt;Bt<At;Bt++)re=re+vt[Bt].width;It.y1=mt.y1-re-It.width/2}})})}function et(xt,Ct){return ct(xt)==ct(Ct)}function ct(xt){return xt.y0-xt.y1>0?"up":"down"}function ft(xt,Ct){return A(xt.source,Ct)==A(xt.target,Ct)}function yt(xt,Ct,gt){var mt=xt.nodes,vt=xt.links,At=!1,Ot=!1;if(vt.forEach(function(he){he.circularLinkType=="top"?At=!0:he.circularLinkType=="bottom"&&(Ot=!0)}),At==!1||Ot==!1){var It=(0,M.SY)(mt,function(he){return he.y0}),St=(0,M.kv)(mt,function(he){return he.y1}),Bt=St-It,re=gt-Ct,Yt=re/Bt;mt.forEach(function(he){var Zt=(he.y1-he.y0)*Yt;he.y0=(he.y0-It)*Yt,he.y1=he.y0+Zt}),vt.forEach(function(he){he.y0=(he.y0-It)*Yt,he.y1=(he.y1-It)*Yt,he.width=he.width*Yt})}}},26800:function(Q,U,t){t.r(U),t.d(U,{sankey:function(){return f},sankeyCenter:function(){return d},sankeyJustify:function(){return v},sankeyLeft:function(){return C},sankeyLinkHorizontal:function(){return A},sankeyRight:function(){return T}});var M=t(84706),E=t(34712);function i(L){return L.target.depth}function C(L){return L.depth}function T(L,u){return u-1-L.height}function v(L,u){return L.sourceLinks.length?L.depth:u-1}function d(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?(0,M.SY)(L.sourceLinks,i)-1:0}function r(L){return function(){return L}}function e(L,u){return n(L.source,u.source)||L.index-u.index}function l(L,u){return n(L.target,u.target)||L.index-u.index}function n(L,u){return L.y0-u.y0}function s(L){return L.value}function o(L){return(L.y0+L.y1)/2}function p(L){return o(L.source)*L.value}function b(L){return o(L.target)*L.value}function h(L){return L.index}function _(L){return L.nodes}function a(L){return L.links}function c(L,u){var m=L.get(u);if(!m)throw new Error("missing: "+u);return m}function f(){var L=0,u=0,m=1,S=1,w=24,I=8,O=h,D=v,P=_,F=a,R=32,B=2/3;function N(){var q={nodes:P.apply(null,arguments),links:F.apply(null,arguments)};return G(q),X(q),J(q),it(q),nt(q),q}N.update=function(q){return nt(q),q},N.nodeId=function(q){return arguments.length?(O=typeof q=="function"?q:r(q),N):O},N.nodeAlign=function(q){return arguments.length?(D=typeof q=="function"?q:r(q),N):D},N.nodeWidth=function(q){return arguments.length?(w=+q,N):w},N.nodePadding=function(q){return arguments.length?(I=+q,N):I},N.nodes=function(q){return arguments.length?(P=typeof q=="function"?q:r(q),N):P},N.links=function(q){return arguments.length?(F=typeof q=="function"?q:r(q),N):F},N.size=function(q){return arguments.length?(L=u=0,m=+q[0],S=+q[1],N):[m-L,S-u]},N.extent=function(q){return arguments.length?(L=+q[0][0],m=+q[1][0],u=+q[0][1],S=+q[1][1],N):[[L,u],[m,S]]},N.iterations=function(q){return arguments.length?(R=+q,N):R};function G(q){q.nodes.forEach(function($,V){$.index=V,$.sourceLinks=[],$.targetLinks=[]});var Z=(0,E.kH)(q.nodes,O);q.links.forEach(function($,V){$.index=V;var rt=$.source,ot=$.target;typeof rt!="object"&&(rt=$.source=c(Z,rt)),typeof ot!="object"&&(ot=$.target=c(Z,ot)),rt.sourceLinks.push($),ot.targetLinks.push($)})}function X(q){q.nodes.forEach(function(Z){Z.value=Math.max((0,M.oh)(Z.sourceLinks,s),(0,M.oh)(Z.targetLinks,s))})}function J(q){var Z,$,V;for(Z=q.nodes,$=[],V=0;Z.length;++V,Z=$,$=[])Z.forEach(function(ot){ot.depth=V,ot.sourceLinks.forEach(function(H){$.indexOf(H.target)<0&&$.push(H.target)})});for(Z=q.nodes,$=[],V=0;Z.length;++V,Z=$,$=[])Z.forEach(function(ot){ot.height=V,ot.targetLinks.forEach(function(H){$.indexOf(H.source)<0&&$.push(H.source)})});var rt=(m-L-w)/(V-1);q.nodes.forEach(function(ot){ot.x1=(ot.x0=L+Math.max(0,Math.min(V-1,Math.floor(D.call(null,ot,V))))*rt)+w})}function it(q){var Z=(0,E.UJ)().key(function(at){return at.x0}).sortKeys(M.XE).entries(q.nodes).map(function(at){return at.values});rt(),Y();for(var $=1,V=R;V>0;--V)H($*=.99),Y(),ot($),Y();function rt(){var at=(0,M.kv)(Z,function(ft){return ft.length}),et=B*(S-u)/(at-1);I>et&&(I=et);var ct=(0,M.SY)(Z,function(ft){return(S-u-(ft.length-1)*I)/(0,M.oh)(ft,s)});Z.forEach(function(ft){ft.forEach(function(yt,xt){yt.y1=(yt.y0=xt)+yt.value*ct})}),q.links.forEach(function(ft){ft.width=ft.value*ct})}function ot(at){Z.forEach(function(et){et.forEach(function(ct){if(ct.targetLinks.length){var ft=((0,M.oh)(ct.targetLinks,p)/(0,M.oh)(ct.targetLinks,s)-o(ct))*at;ct.y0+=ft,ct.y1+=ft}})})}function H(at){Z.slice().reverse().forEach(function(et){et.forEach(function(ct){if(ct.sourceLinks.length){var ft=((0,M.oh)(ct.sourceLinks,b)/(0,M.oh)(ct.sourceLinks,s)-o(ct))*at;ct.y0+=ft,ct.y1+=ft}})})}function Y(){Z.forEach(function(at){var et,ct,ft=u,yt=at.length,xt;for(at.sort(n),xt=0;xt<yt;++xt)et=at[xt],ct=ft-et.y0,ct>0&&(et.y0+=ct,et.y1+=ct),ft=et.y1+I;if(ct=ft-I-S,ct>0)for(ft=et.y0-=ct,et.y1-=ct,xt=yt-2;xt>=0;--xt)et=at[xt],ct=et.y1+I-ft,ct>0&&(et.y0-=ct,et.y1-=ct),ft=et.y0})}}function nt(q){q.nodes.forEach(function(Z){Z.sourceLinks.sort(l),Z.targetLinks.sort(e)}),q.nodes.forEach(function(Z){var $=Z.y0,V=$;Z.sourceLinks.forEach(function(rt){rt.y0=$+rt.width/2,$+=rt.width}),Z.targetLinks.forEach(function(rt){rt.y1=V+rt.width/2,V+=rt.width})})}return N}var x=t(10132);function k(L){return[L.source.x1,L.y0]}function y(L){return[L.target.x0,L.y1]}function A(){return(0,x.ak)().source(k).target(y)}},33428:function(Q,U,t){var M,E;(function(){var i={version:"3.8.0"},C=[].slice,T=function(lt){return C.call(lt)},v=self.document;function d(lt){return lt&&(lt.ownerDocument||lt.document||lt).documentElement}function r(lt){return lt&&(lt.ownerDocument&&lt.ownerDocument.defaultView||lt.document&&lt||lt.defaultView)}if(v)try{T(v.documentElement.childNodes)[0].nodeType}catch{T=function(lt){for(var _t=lt.length,Lt=new Array(_t);_t--;)Lt[_t]=lt[_t];return Lt}}if(Date.now||(Date.now=function(){return+new Date}),v)try{v.createElement("DIV").style.setProperty("opacity",0,"")}catch{var e=this.Element.prototype,l=e.setAttribute,n=e.setAttributeNS,s=this.CSSStyleDeclaration.prototype,o=s.setProperty;e.setAttribute=function(lt,_t){l.call(this,lt,_t+"")},e.setAttributeNS=function(lt,_t,Lt){n.call(this,lt,_t,Lt+"")},s.setProperty=function(lt,_t,Lt){o.call(this,lt,_t+"",Lt)}}i.ascending=p;function p(lt,_t){return lt<_t?-1:lt>_t?1:lt>=_t?0:NaN}i.descending=function(lt,_t){return _t<lt?-1:_t>lt?1:_t>=lt?0:NaN},i.min=function(lt,_t){var Lt=-1,Ht=lt.length,Wt,ee;if(arguments.length===1){for(;++Lt<Ht;)if((ee=lt[Lt])!=null&&ee>=ee){Wt=ee;break}for(;++Lt<Ht;)(ee=lt[Lt])!=null&&Wt>ee&&(Wt=ee)}else{for(;++Lt<Ht;)if((ee=_t.call(lt,lt[Lt],Lt))!=null&&ee>=ee){Wt=ee;break}for(;++Lt<Ht;)(ee=_t.call(lt,lt[Lt],Lt))!=null&&Wt>ee&&(Wt=ee)}return Wt},i.max=function(lt,_t){var Lt=-1,Ht=lt.length,Wt,ee;if(arguments.length===1){for(;++Lt<Ht;)if((ee=lt[Lt])!=null&&ee>=ee){Wt=ee;break}for(;++Lt<Ht;)(ee=lt[Lt])!=null&&ee>Wt&&(Wt=ee)}else{for(;++Lt<Ht;)if((ee=_t.call(lt,lt[Lt],Lt))!=null&&ee>=ee){Wt=ee;break}for(;++Lt<Ht;)(ee=_t.call(lt,lt[Lt],Lt))!=null&&ee>Wt&&(Wt=ee)}return Wt},i.extent=function(lt,_t){var Lt=-1,Ht=lt.length,Wt,ee,xe;if(arguments.length===1){for(;++Lt<Ht;)if((ee=lt[Lt])!=null&&ee>=ee){Wt=xe=ee;break}for(;++Lt<Ht;)(ee=lt[Lt])!=null&&(Wt>ee&&(Wt=ee),xe<ee&&(xe=ee))}else{for(;++Lt<Ht;)if((ee=_t.call(lt,lt[Lt],Lt))!=null&&ee>=ee){Wt=xe=ee;break}for(;++Lt<Ht;)(ee=_t.call(lt,lt[Lt],Lt))!=null&&(Wt>ee&&(Wt=ee),xe<ee&&(xe=ee))}return[Wt,xe]};function b(lt){return lt===null?NaN:+lt}function h(lt){return!isNaN(lt)}i.sum=function(lt,_t){var Lt=0,Ht=lt.length,Wt,ee=-1;if(arguments.length===1)for(;++ee<Ht;)h(Wt=+lt[ee])&&(Lt+=Wt);else for(;++ee<Ht;)h(Wt=+_t.call(lt,lt[ee],ee))&&(Lt+=Wt);return Lt},i.mean=function(lt,_t){var Lt=0,Ht=lt.length,Wt,ee=-1,xe=Ht;if(arguments.length===1)for(;++ee<Ht;)h(Wt=b(lt[ee]))?Lt+=Wt:--xe;else for(;++ee<Ht;)h(Wt=b(_t.call(lt,lt[ee],ee)))?Lt+=Wt:--xe;if(xe)return Lt/xe},i.quantile=function(lt,_t){var Lt=(lt.length-1)*_t+1,Ht=Math.floor(Lt),Wt=+lt[Ht-1],ee=Lt-Ht;return ee?Wt+ee*(lt[Ht]-Wt):Wt},i.median=function(lt,_t){var Lt=[],Ht=lt.length,Wt,ee=-1;if(arguments.length===1)for(;++ee<Ht;)h(Wt=b(lt[ee]))&&Lt.push(Wt);else for(;++ee<Ht;)h(Wt=b(_t.call(lt,lt[ee],ee)))&&Lt.push(Wt);if(Lt.length)return i.quantile(Lt.sort(p),.5)},i.variance=function(lt,_t){var Lt=lt.length,Ht=0,Wt,ee,xe=0,me=-1,Ie=0;if(arguments.length===1)for(;++me<Lt;)h(Wt=b(lt[me]))&&(ee=Wt-Ht,Ht+=ee/++Ie,xe+=ee*(Wt-Ht));else for(;++me<Lt;)h(Wt=b(_t.call(lt,lt[me],me)))&&(ee=Wt-Ht,Ht+=ee/++Ie,xe+=ee*(Wt-Ht));if(Ie>1)return xe/(Ie-1)},i.deviation=function(){var lt=i.variance.apply(this,arguments);return lt&&Math.sqrt(lt)};function _(lt){return{left:function(_t,Lt,Ht,Wt){for(arguments.length<3&&(Ht=0),arguments.length<4&&(Wt=_t.length);Ht<Wt;){var ee=Ht+Wt>>>1;lt(_t[ee],Lt)<0?Ht=ee+1:Wt=ee}return Ht},right:function(_t,Lt,Ht,Wt){for(arguments.length<3&&(Ht=0),arguments.length<4&&(Wt=_t.length);Ht<Wt;){var ee=Ht+Wt>>>1;lt(_t[ee],Lt)>0?Wt=ee:Ht=ee+1}return Ht}}}var a=_(p);i.bisectLeft=a.left,i.bisect=i.bisectRight=a.right,i.bisector=function(lt){return _(lt.length===1?function(_t,Lt){return p(lt(_t),Lt)}:lt)},i.shuffle=function(lt,_t,Lt){(Ht=arguments.length)<3&&(Lt=lt.length,Ht<2&&(_t=0));for(var Ht=Lt-_t,Wt,ee;Ht;)ee=Math.random()*Ht--|0,Wt=lt[Ht+_t],lt[Ht+_t]=lt[ee+_t],lt[ee+_t]=Wt;return lt},i.permute=function(lt,_t){for(var Lt=_t.length,Ht=new Array(Lt);Lt--;)Ht[Lt]=lt[_t[Lt]];return Ht},i.pairs=function(lt){for(var _t=0,Lt=lt.length-1,Ht,Wt=lt[0],ee=new Array(Lt<0?0:Lt);_t<Lt;)ee[_t]=[Ht=Wt,Wt=lt[++_t]];return ee},i.transpose=function(lt){if(!(ee=lt.length))return[];for(var _t=-1,Lt=i.min(lt,c),Ht=new Array(Lt);++_t<Lt;)for(var Wt=-1,ee,xe=Ht[_t]=new Array(ee);++Wt<ee;)xe[Wt]=lt[Wt][_t];return Ht};function c(lt){return lt.length}i.zip=function(){return i.transpose(arguments)},i.keys=function(lt){var _t=[];for(var Lt in lt)_t.push(Lt);return _t},i.values=function(lt){var _t=[];for(var Lt in lt)_t.push(lt[Lt]);return _t},i.entries=function(lt){var _t=[];for(var Lt in lt)_t.push({key:Lt,value:lt[Lt]});return _t},i.merge=function(lt){for(var _t=lt.length,Lt,Ht=-1,Wt=0,ee,xe;++Ht<_t;)Wt+=lt[Ht].length;for(ee=new Array(Wt);--_t>=0;)for(xe=lt[_t],Lt=xe.length;--Lt>=0;)ee[--Wt]=xe[Lt];return ee};var f=Math.abs;i.range=function(lt,_t,Lt){if(arguments.length<3&&(Lt=1,arguments.length<2&&(_t=lt,lt=0)),(_t-lt)/Lt===1/0)throw new Error("infinite range");var Ht=[],Wt=x(f(Lt)),ee=-1,xe;if(lt*=Wt,_t*=Wt,Lt*=Wt,Lt<0)for(;(xe=lt+Lt*++ee)>_t;)Ht.push(xe/Wt);else for(;(xe=lt+Lt*++ee)<_t;)Ht.push(xe/Wt);return Ht};function x(lt){for(var _t=1;lt*_t%1;)_t*=10;return _t}function k(lt,_t){for(var Lt in _t)Object.defineProperty(lt.prototype,Lt,{value:_t[Lt],enumerable:!1})}i.map=function(lt,_t){var Lt=new y;if(lt instanceof y)lt.forEach(function(me,Ie){Lt.set(me,Ie)});else if(Array.isArray(lt)){var Ht=-1,Wt=lt.length,ee;if(arguments.length===1)for(;++Ht<Wt;)Lt.set(Ht,lt[Ht]);else for(;++Ht<Wt;)Lt.set(_t.call(lt,ee=lt[Ht],Ht),ee)}else for(var xe in lt)Lt.set(xe,lt[xe]);return Lt};function y(){this._=Object.create(null)}var A="__proto__",L="\0";k(y,{has:S,get:function(lt){return this._[u(lt)]},set:function(lt,_t){return this._[u(lt)]=_t},remove:w,keys:I,values:function(){var lt=[];for(var _t in this._)lt.push(this._[_t]);return lt},entries:function(){var lt=[];for(var _t in this._)lt.push({key:m(_t),value:this._[_t]});return lt},size:O,empty:D,forEach:function(lt){for(var _t in this._)lt.call(this,m(_t),this._[_t])}});function u(lt){return(lt+="")===A||lt[0]===L?L+lt:lt}function m(lt){return(lt+="")[0]===L?lt.slice(1):lt}function S(lt){return u(lt)in this._}function w(lt){return(lt=u(lt))in this._&&delete this._[lt]}function I(){var lt=[];for(var _t in this._)lt.push(m(_t));return lt}function O(){var lt=0;for(var _t in this._)++lt;return lt}function D(){for(var lt in this._)return!1;return!0}i.nest=function(){var lt={},_t=[],Lt=[],Ht,Wt;function ee(me,Ie,ze){if(ze>=_t.length)return Wt?Wt.call(lt,Ie):Ht?Ie.sort(Ht):Ie;for(var Xe=-1,br=Ie.length,wr=_t[ze++],Hr,Jr,Ar,zr=new y,Yr;++Xe<br;)(Yr=zr.get(Hr=wr(Jr=Ie[Xe])))?Yr.push(Jr):zr.set(Hr,[Jr]);return me?(Jr=me(),Ar=function(Qr,en){Jr.set(Qr,ee(me,en,ze))}):(Jr={},Ar=function(Qr,en){Jr[Qr]=ee(me,en,ze)}),zr.forEach(Ar),Jr}function xe(me,Ie){if(Ie>=_t.length)return me;var ze=[],Xe=Lt[Ie++];return me.forEach(function(br,wr){ze.push({key:br,values:xe(wr,Ie)})}),Xe?ze.sort(function(br,wr){return Xe(br.key,wr.key)}):ze}return lt.map=function(me,Ie){return ee(Ie,me,0)},lt.entries=function(me){return xe(ee(i.map,me,0),0)},lt.key=function(me){return _t.push(me),lt},lt.sortKeys=function(me){return Lt[_t.length-1]=me,lt},lt.sortValues=function(me){return Ht=me,lt},lt.rollup=function(me){return Wt=me,lt},lt},i.set=function(lt){var _t=new P;if(lt)for(var Lt=0,Ht=lt.length;Lt<Ht;++Lt)_t.add(lt[Lt]);return _t};function P(){this._=Object.create(null)}k(P,{has:S,add:function(lt){return this._[u(lt+="")]=!0,lt},remove:w,values:I,size:O,empty:D,forEach:function(lt){for(var _t in this._)lt.call(this,m(_t))}}),i.behavior={};function F(lt){return lt}i.rebind=function(lt,_t){for(var Lt=1,Ht=arguments.length,Wt;++Lt<Ht;)lt[Wt=arguments[Lt]]=R(lt,_t,_t[Wt]);return lt};function R(lt,_t,Lt){return function(){var Ht=Lt.apply(_t,arguments);return Ht===_t?lt:Ht}}function B(lt,_t){if(_t in lt)return _t;_t=_t.charAt(0).toUpperCase()+_t.slice(1);for(var Lt=0,Ht=N.length;Lt<Ht;++Lt){var Wt=N[Lt]+_t;if(Wt in lt)return Wt}}var N=["webkit","ms","moz","Moz","o","O"];function G(){}i.dispatch=function(){for(var lt=new X,_t=-1,Lt=arguments.length;++_t<Lt;)lt[arguments[_t]]=J(lt);return lt};function X(){}X.prototype.on=function(lt,_t){var Lt=lt.indexOf("."),Ht="";if(Lt>=0&&(Ht=lt.slice(Lt+1),lt=lt.slice(0,Lt)),lt)return arguments.length<2?this[lt].on(Ht):this[lt].on(Ht,_t);if(arguments.length===2){if(_t==null)for(lt in this)this.hasOwnProperty(lt)&&this[lt].on(Ht,null);return this}};function J(lt){var _t=[],Lt=new y;function Ht(){for(var Wt=_t,ee=-1,xe=Wt.length,me;++ee<xe;)(me=Wt[ee].on)&&me.apply(this,arguments);return lt}return Ht.on=function(Wt,ee){var xe=Lt.get(Wt),me;return arguments.length<2?xe&&xe.on:(xe&&(xe.on=null,_t=_t.slice(0,me=_t.indexOf(xe)).concat(_t.slice(me+1)),Lt.remove(Wt)),ee&&_t.push(Lt.set(Wt,{on:ee})),lt)},Ht}i.event=null;function it(){i.event.preventDefault()}function nt(){for(var lt=i.event,_t;_t=lt.sourceEvent;)lt=_t;return lt}function q(lt){for(var _t=new X,Lt=0,Ht=arguments.length;++Lt<Ht;)_t[arguments[Lt]]=J(_t);return _t.of=function(Wt,ee){return function(xe){try{var me=xe.sourceEvent=i.event;xe.target=lt,i.event=xe,_t[xe.type].apply(Wt,ee)}finally{i.event=me}}},_t}i.requote=function(lt){return lt.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,$={}.__proto__?function(lt,_t){lt.__proto__=_t}:function(lt,_t){for(var Lt in _t)lt[Lt]=_t[Lt]};function V(lt){return $(lt,Y),lt}var rt=function(lt,_t){return _t.querySelector(lt)},ot=function(lt,_t){return _t.querySelectorAll(lt)},H=function(lt,_t){var Lt=lt.matches||lt[B(lt,"matchesSelector")];return H=function(Ht,Wt){return Lt.call(Ht,Wt)},H(lt,_t)};typeof Sizzle=="function"&&(rt=function(lt,_t){return Sizzle(lt,_t)[0]||null},ot=Sizzle,H=Sizzle.matchesSelector),i.selection=function(){return i.select(v.documentElement)};var Y=i.selection.prototype=[];Y.select=function(lt){var _t=[],Lt,Ht,Wt,ee;lt=at(lt);for(var xe=-1,me=this.length;++xe<me;){_t.push(Lt=[]),Lt.parentNode=(Wt=this[xe]).parentNode;for(var Ie=-1,ze=Wt.length;++Ie<ze;)(ee=Wt[Ie])?(Lt.push(Ht=lt.call(ee,ee.__data__,Ie,xe)),Ht&&"__data__"in ee&&(Ht.__data__=ee.__data__)):Lt.push(null)}return V(_t)};function at(lt){return typeof lt=="function"?lt:function(){return rt(lt,this)}}Y.selectAll=function(lt){var _t=[],Lt,Ht;lt=et(lt);for(var Wt=-1,ee=this.length;++Wt<ee;)for(var xe=this[Wt],me=-1,Ie=xe.length;++me<Ie;)(Ht=xe[me])&&(_t.push(Lt=T(lt.call(Ht,Ht.__data__,me,Wt))),Lt.parentNode=Ht);return V(_t)};function et(lt){return typeof lt=="function"?lt:function(){return ot(lt,this)}}var ct="http://www.w3.org/1999/xhtml",ft={svg:"http://www.w3.org/2000/svg",xhtml:ct,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};i.ns={prefix:ft,qualify:function(lt){var _t=lt.indexOf(":"),Lt=lt;return _t>=0&&(Lt=lt.slice(0,_t))!=="xmlns"&&(lt=lt.slice(_t+1)),ft.hasOwnProperty(Lt)?{space:ft[Lt],local:lt}:lt}},Y.attr=function(lt,_t){if(arguments.length<2){if(typeof lt=="string"){var Lt=this.node();return lt=i.ns.qualify(lt),lt.local?Lt.getAttributeNS(lt.space,lt.local):Lt.getAttribute(lt)}for(_t in lt)this.each(yt(_t,lt[_t]));return this}return this.each(yt(lt,_t))};function yt(lt,_t){lt=i.ns.qualify(lt);function Lt(){this.removeAttribute(lt)}function Ht(){this.removeAttributeNS(lt.space,lt.local)}function Wt(){this.setAttribute(lt,_t)}function ee(){this.setAttributeNS(lt.space,lt.local,_t)}function xe(){var Ie=_t.apply(this,arguments);Ie==null?this.removeAttribute(lt):this.setAttribute(lt,Ie)}function me(){var Ie=_t.apply(this,arguments);Ie==null?this.removeAttributeNS(lt.space,lt.local):this.setAttributeNS(lt.space,lt.local,Ie)}return _t==null?lt.local?Ht:Lt:typeof _t=="function"?lt.local?me:xe:lt.local?ee:Wt}function xt(lt){return lt.trim().replace(/\s+/g," ")}Y.classed=function(lt,_t){if(arguments.length<2){if(typeof lt=="string"){var Lt=this.node(),Ht=(lt=gt(lt)).length,Wt=-1;if(_t=Lt.classList){for(;++Wt<Ht;)if(!_t.contains(lt[Wt]))return!1}else for(_t=Lt.getAttribute("class");++Wt<Ht;)if(!Ct(lt[Wt]).test(_t))return!1;return!0}for(_t in lt)this.each(mt(_t,lt[_t]));return this}return this.each(mt(lt,_t))};function Ct(lt){return new RegExp("(?:^|\\s+)"+i.requote(lt)+"(?:\\s+|$)","g")}function gt(lt){return(lt+"").trim().split(/^|\s+/)}function mt(lt,_t){lt=gt(lt).map(vt);var Lt=lt.length;function Ht(){for(var ee=-1;++ee<Lt;)lt[ee](this,_t)}function Wt(){for(var ee=-1,xe=_t.apply(this,arguments);++ee<Lt;)lt[ee](this,xe)}return typeof _t=="function"?Wt:Ht}function vt(lt){var _t=Ct(lt);return function(Lt,Ht){if(Wt=Lt.classList)return Ht?Wt.add(lt):Wt.remove(lt);var Wt=Lt.getAttribute("class")||"";Ht?(_t.lastIndex=0,_t.test(Wt)||Lt.setAttribute("class",xt(Wt+" "+lt))):Lt.setAttribute("class",xt(Wt.replace(_t," ")))}}Y.style=function(lt,_t,Lt){var Ht=arguments.length;if(Ht<3){if(typeof lt!="string"){Ht<2&&(_t="");for(Lt in lt)this.each(At(Lt,lt[Lt],_t));return this}if(Ht<2){var Wt=this.node();return r(Wt).getComputedStyle(Wt,null).getPropertyValue(lt)}Lt=""}return this.each(At(lt,_t,Lt))};function At(lt,_t,Lt){function Ht(){this.style.removeProperty(lt)}function Wt(){this.style.setProperty(lt,_t,Lt)}function ee(){var xe=_t.apply(this,arguments);xe==null?this.style.removeProperty(lt):this.style.setProperty(lt,xe,Lt)}return _t==null?Ht:typeof _t=="function"?ee:Wt}Y.property=function(lt,_t){if(arguments.length<2){if(typeof lt=="string")return this.node()[lt];for(_t in lt)this.each(Ot(_t,lt[_t]));return this}return this.each(Ot(lt,_t))};function Ot(lt,_t){function Lt(){delete this[lt]}function Ht(){this[lt]=_t}function Wt(){var ee=_t.apply(this,arguments);ee==null?delete this[lt]:this[lt]=ee}return _t==null?Lt:typeof _t=="function"?Wt:Ht}Y.text=function(lt){return arguments.length?this.each(typeof lt=="function"?function(){var _t=lt.apply(this,arguments);this.textContent=_t??""}:lt==null?function(){this.textContent=""}:function(){this.textContent=lt}):this.node().textContent},Y.html=function(lt){return arguments.length?this.each(typeof lt=="function"?function(){var _t=lt.apply(this,arguments);this.innerHTML=_t??""}:lt==null?function(){this.innerHTML=""}:function(){this.innerHTML=lt}):this.node().innerHTML},Y.append=function(lt){return lt=It(lt),this.select(function(){return this.appendChild(lt.apply(this,arguments))})};function It(lt){function _t(){var Ht=this.ownerDocument,Wt=this.namespaceURI;return Wt===ct&&Ht.documentElement.namespaceURI===ct?Ht.createElement(lt):Ht.createElementNS(Wt,lt)}function Lt(){return this.ownerDocument.createElementNS(lt.space,lt.local)}return typeof lt=="function"?lt:(lt=i.ns.qualify(lt)).local?Lt:_t}Y.insert=function(lt,_t){return lt=It(lt),_t=at(_t),this.select(function(){return this.insertBefore(lt.apply(this,arguments),_t.apply(this,arguments)||null)})},Y.remove=function(){return this.each(St)};function St(){var lt=this.parentNode;lt&&lt.removeChild(this)}Y.data=function(lt,_t){var Lt=-1,Ht=this.length,Wt,ee;if(!arguments.length){for(lt=new Array(Ht=(Wt=this[0]).length);++Lt<Ht;)(ee=Wt[Lt])&&(lt[Lt]=ee.__data__);return lt}function xe(Xe,br){var wr,Hr=Xe.length,Jr=br.length,Ar=Math.min(Hr,Jr),zr=new Array(Jr),Yr=new Array(Jr),Qr=new Array(Hr),en,Xr;if(_t){var On=new y,Hn=new Array(Hr),ti;for(wr=-1;++wr<Hr;)(en=Xe[wr])&&(On.has(ti=_t.call(en,en.__data__,wr))?Qr[wr]=en:On.set(ti,en),Hn[wr]=ti);for(wr=-1;++wr<Jr;)(en=On.get(ti=_t.call(br,Xr=br[wr],wr)))?en!==!0&&(zr[wr]=en,en.__data__=Xr):Yr[wr]=Bt(Xr),On.set(ti,!0);for(wr=-1;++wr<Hr;)wr in Hn&&On.get(Hn[wr])!==!0&&(Qr[wr]=Xe[wr])}else{for(wr=-1;++wr<Ar;)en=Xe[wr],Xr=br[wr],en?(en.__data__=Xr,zr[wr]=en):Yr[wr]=Bt(Xr);for(;wr<Jr;++wr)Yr[wr]=Bt(br[wr]);for(;wr<Hr;++wr)Qr[wr]=Xe[wr]}Yr.update=zr,Yr.parentNode=zr.parentNode=Qr.parentNode=Xe.parentNode,me.push(Yr),Ie.push(zr),ze.push(Qr)}var me=Zt([]),Ie=V([]),ze=V([]);if(typeof lt=="function")for(;++Lt<Ht;)xe(Wt=this[Lt],lt.call(Wt,Wt.parentNode.__data__,Lt));else for(;++Lt<Ht;)xe(Wt=this[Lt],lt);return Ie.enter=function(){return me},Ie.exit=function(){return ze},Ie};function Bt(lt){return{__data__:lt}}Y.datum=function(lt){return arguments.length?this.property("__data__",lt):this.property("__data__")},Y.filter=function(lt){var _t=[],Lt,Ht,Wt;typeof lt!="function"&&(lt=re(lt));for(var ee=0,xe=this.length;ee<xe;ee++){_t.push(Lt=[]),Lt.parentNode=(Ht=this[ee]).parentNode;for(var me=0,Ie=Ht.length;me<Ie;me++)(Wt=Ht[me])&&lt.call(Wt,Wt.__data__,me,ee)&&Lt.push(Wt)}return V(_t)};function re(lt){return function(){return H(this,lt)}}Y.order=function(){for(var lt=-1,_t=this.length;++lt<_t;)for(var Lt=this[lt],Ht=Lt.length-1,Wt=Lt[Ht],ee;--Ht>=0;)(ee=Lt[Ht])&&(Wt&&Wt!==ee.nextSibling&&Wt.parentNode.insertBefore(ee,Wt),Wt=ee);return this},Y.sort=function(lt){lt=Yt.apply(this,arguments);for(var _t=-1,Lt=this.length;++_t<Lt;)this[_t].sort(lt);return this.order()};function Yt(lt){return arguments.length||(lt=p),function(_t,Lt){return _t&&Lt?lt(_t.__data__,Lt.__data__):!_t-!Lt}}Y.each=function(lt){return he(this,function(_t,Lt,Ht){lt.call(_t,_t.__data__,Lt,Ht)})};function he(lt,_t){for(var Lt=0,Ht=lt.length;Lt<Ht;Lt++)for(var Wt=lt[Lt],ee=0,xe=Wt.length,me;ee<xe;ee++)(me=Wt[ee])&&_t(me,ee,Lt);return lt}Y.call=function(lt){var _t=T(arguments);return lt.apply(_t[0]=this,_t),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var lt=0,_t=this.length;lt<_t;lt++)for(var Lt=this[lt],Ht=0,Wt=Lt.length;Ht<Wt;Ht++){var ee=Lt[Ht];if(ee)return ee}return null},Y.size=function(){var lt=0;return he(this,function(){++lt}),lt};function Zt(lt){return $(lt,ae),lt}var ae=[];i.selection.enter=Zt,i.selection.enter.prototype=ae,ae.append=Y.append,ae.empty=Y.empty,ae.node=Y.node,ae.call=Y.call,ae.size=Y.size,ae.select=function(lt){for(var _t=[],Lt,Ht,Wt,ee,xe,me=-1,Ie=this.length;++me<Ie;){Wt=(ee=this[me]).update,_t.push(Lt=[]),Lt.parentNode=ee.parentNode;for(var ze=-1,Xe=ee.length;++ze<Xe;)(xe=ee[ze])?(Lt.push(Wt[ze]=Ht=lt.call(ee.parentNode,xe.__data__,ze,me)),Ht.__data__=xe.__data__):Lt.push(null)}return V(_t)},ae.insert=function(lt,_t){return arguments.length<2&&(_t=oe(this)),Y.insert.call(this,lt,_t)};function oe(lt){var _t,Lt;return function(Ht,Wt,ee){var xe=lt[ee].update,me=xe.length,Ie;for(ee!=Lt&&(Lt=ee,_t=0),Wt>=_t&&(_t=Wt+1);!(Ie=xe[_t])&&++_t<me;);return Ie}}i.select=function(lt){var _t;return typeof lt=="string"?(_t=[rt(lt,v)],_t.parentNode=v.documentElement):(_t=[lt],_t.parentNode=d(lt)),V([_t])},i.selectAll=function(lt){var _t;return typeof lt=="string"?(_t=T(ot(lt,v)),_t.parentNode=v.documentElement):(_t=T(lt),_t.parentNode=null),V([_t])},Y.on=function(lt,_t,Lt){var Ht=arguments.length;if(Ht<3){if(typeof lt!="string"){Ht<2&&(_t=!1);for(Lt in lt)this.each(ce(Lt,lt[Lt],_t));return this}if(Ht<2)return(Ht=this.node()["__on"+lt])&&Ht._;Lt=!1}return this.each(ce(lt,_t,Lt))};function ce(lt,_t,Lt){var Ht="__on"+lt,Wt=lt.indexOf("."),ee=ye;Wt>0&&(lt=lt.slice(0,Wt));var xe=ue.get(lt);xe&&(lt=xe,ee=Tt);function me(){var Xe=this[Ht];Xe&&(this.removeEventListener(lt,Xe,Xe.$),delete this[Ht])}function Ie(){var Xe=ee(_t,T(arguments));me.call(this),this.addEventListener(lt,this[Ht]=Xe,Xe.$=Lt),Xe._=_t}function ze(){var Xe=new RegExp("^__on([^.]+)"+i.requote(lt)+"$"),br;for(var wr in this)if(br=wr.match(Xe)){var Hr=this[wr];this.removeEventListener(br[1],Hr,Hr.$),delete this[wr]}}return Wt?_t?Ie:me:_t?G:ze}var ue=i.map({mouseenter:"mouseover",mouseleave:"mouseout"});v&&ue.forEach(function(lt){"on"+lt in v&&ue.remove(lt)});function ye(lt,_t){return function(Lt){var Ht=i.event;i.event=Lt,_t[0]=this.__data__;try{lt.apply(this,_t)}finally{i.event=Ht}}}function Tt(lt,_t){var Lt=ye(lt,_t);return function(Ht){var Wt=this,ee=Ht.relatedTarget;(!ee||ee!==Wt&&!(ee.compareDocumentPosition(Wt)&8))&&Lt.call(Wt,Ht)}}var Ft,$t=0;function Vt(lt){var _t=".dragsuppress-"+ ++$t,Lt="click"+_t,Ht=i.select(r(lt)).on("touchmove"+_t,it).on("dragstart"+_t,it).on("selectstart"+_t,it);if(Ft==null&&(Ft="onselectstart"in lt?!1:B(lt.style,"userSelect")),Ft){var Wt=d(lt).style,ee=Wt[Ft];Wt[Ft]="none"}return function(xe){if(Ht.on(_t,null),Ft&&(Wt[Ft]=ee),xe){var me=function(){Ht.on(Lt,null)};Ht.on(Lt,function(){it(),me()},!0),setTimeout(me,0)}}}i.mouse=function(lt){return Mt(lt,nt())};var Nt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Mt(lt,_t){_t.changedTouches&&(_t=_t.changedTouches[0]);var Lt=lt.ownerSVGElement||lt;if(Lt.createSVGPoint){var Ht=Lt.createSVGPoint();if(Nt<0){var Wt=r(lt);if(Wt.scrollX||Wt.scrollY){Lt=i.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ee=Lt[0][0].getScreenCTM();Nt=!(ee.f||ee.e),Lt.remove()}}return Nt?(Ht.x=_t.pageX,Ht.y=_t.pageY):(Ht.x=_t.clientX,Ht.y=_t.clientY),Ht=Ht.matrixTransform(lt.getScreenCTM().inverse()),[Ht.x,Ht.y]}var xe=lt.getBoundingClientRect();return[_t.clientX-xe.left-lt.clientLeft,_t.clientY-xe.top-lt.clientTop]}i.touch=function(lt,_t,Lt){if(arguments.length<3&&(Lt=_t,_t=nt().changedTouches),_t){for(var Ht=0,Wt=_t.length,ee;Ht<Wt;++Ht)if((ee=_t[Ht]).identifier===Lt)return Mt(lt,ee)}},i.behavior.drag=function(){var lt=q(Wt,"drag","dragstart","dragend"),_t=null,Lt=ee(G,i.mouse,r,"mousemove","mouseup"),Ht=ee(Et,i.touch,F,"touchmove","touchend");function Wt(){this.on("mousedown.drag",Lt).on("touchstart.drag",Ht)}function ee(xe,me,Ie,ze,Xe){return function(){var br=this,wr=i.event.target.correspondingElement||i.event.target,Hr=br.parentNode,Jr=lt.of(br,arguments),Ar=0,zr=xe(),Yr=".drag"+(zr==null?"":"-"+zr),Qr,en=i.select(Ie(wr)).on(ze+Yr,Hn).on(Xe+Yr,ti),Xr=Vt(wr),On=me(Hr,zr);_t?(Qr=_t.apply(br,arguments),Qr=[Qr.x-On[0],Qr.y-On[1]]):Qr=[0,0],Jr({type:"dragstart"});function Hn(){var Yn=me(Hr,zr),Kn,ei;Yn&&(Kn=Yn[0]-On[0],ei=Yn[1]-On[1],Ar|=Kn|ei,On=Yn,Jr({type:"drag",x:Yn[0]+Qr[0],y:Yn[1]+Qr[1],dx:Kn,dy:ei}))}function ti(){me(Hr,zr)&&(en.on(ze+Yr,null).on(Xe+Yr,null),Xr(Ar),Jr({type:"dragend"}))}}}return Wt.origin=function(xe){return arguments.length?(_t=xe,Wt):_t},i.rebind(Wt,lt,"on")};function Et(){return i.event.changedTouches[0].identifier}i.touches=function(lt,_t){return arguments.length<2&&(_t=nt().touches),_t?T(_t).map(function(Lt){var Ht=Mt(lt,Lt);return Ht.identifier=Lt.identifier,Ht}):[]};var Dt=1e-6,dt=Dt*Dt,ht=Math.PI,bt=2*ht,Pt=bt-Dt,Gt=ht/2,te=ht/180,ne=180/ht;function je(lt,_t,Lt){return(_t[0]-lt[0])*(Lt[1]-lt[1])-(_t[1]-lt[1])*(Lt[0]-lt[0])}function Ne(lt){return lt>1?Gt:lt<-1?-Gt:Math.asin(lt)}function ge(lt){return((lt=Math.exp(lt))-1/lt)/2}function _e(lt){return((lt=Math.exp(lt))+1/lt)/2}function De(lt){return((lt=Math.exp(2*lt))-1)/(lt+1)}var hr=Math.SQRT2,fe=2,Be=4;i.interpolateZoom=function(lt,_t){var Lt=lt[0],Ht=lt[1],Wt=lt[2],ee=_t[0],xe=_t[1],me=_t[2],Ie=ee-Lt,ze=xe-Ht,Xe=Ie*Ie+ze*ze,br,wr;if(Xe<dt)wr=Math.log(me/Wt)/hr,br=function(Qr){return[Lt+Qr*Ie,Ht+Qr*ze,Wt*Math.exp(hr*Qr*wr)]};else{var Hr=Math.sqrt(Xe),Jr=(me*me-Wt*Wt+Be*Xe)/(2*Wt*fe*Hr),Ar=(me*me-Wt*Wt-Be*Xe)/(2*me*fe*Hr),zr=Math.log(Math.sqrt(Jr*Jr+1)-Jr),Yr=Math.log(Math.sqrt(Ar*Ar+1)-Ar);wr=(Yr-zr)/hr,br=function(Qr){var en=Qr*wr,Xr=_e(zr),On=Wt/(fe*Hr)*(Xr*De(hr*en+zr)-ge(zr));return[Lt+On*Ie,Ht+On*ze,Wt*Xr/_e(hr*en+zr)]}}return br.duration=wr*1e3,br},i.behavior.zoom=function(){var lt={x:0,y:0,k:1},_t,Lt,Ht,Wt=[960,500],ee=He,xe=250,me=0,Ie="mousedown.zoom",ze="mousemove.zoom",Xe="mouseup.zoom",br,wr="touchstart.zoom",Hr,Jr=q(en,"zoomstart","zoom","zoomend"),Ar,zr,Yr,Qr;Ze||(Ze="onwheel"in v?(pr=function(){return-i.event.deltaY*(i.event.deltaMode?120:1)},"wheel"):"onmousewheel"in v?(pr=function(){return i.event.wheelDelta},"mousewheel"):(pr=function(){return-i.event.detail},"MozMousePixelScroll"));function en(Gn){Gn.on(Ie,Ei).on(Ze+".zoom",_a).on("dblclick.zoom",Xi).on(wr,Hi)}en.event=function(Gn){Gn.each(function(){var Pi=Jr.of(this,arguments),pi=lt;Tr?i.select(this).transition().each("start.zoom",function(){lt=this.__chart__||{x:0,y:0,k:1},ei(Pi)}).tween("zoom:zoom",function(){var Fi=Wt[0],oa=Wt[1],Vi=Lt?Lt[0]:Fi/2,Oa=Lt?Lt[1]:oa/2,Pa=i.interpolateZoom([(Vi-lt.x)/lt.k,(Oa-lt.y)/lt.k,Fi/lt.k],[(Vi-pi.x)/pi.k,(Oa-pi.y)/pi.k,Fi/pi.k]);return function(Da){var sa=Pa(Da),Va=Fi/sa[2];this.__chart__=lt={x:Vi-sa[0]*Va,y:Oa-sa[1]*Va,k:Va},Ri(Pi)}}).each("interrupt.zoom",function(){di(Pi)}).each("end.zoom",function(){di(Pi)}):(this.__chart__=lt,ei(Pi),Ri(Pi),di(Pi))})},en.translate=function(Gn){return arguments.length?(lt={x:+Gn[0],y:+Gn[1],k:lt.k},Kn(),en):[lt.x,lt.y]},en.scale=function(Gn){return arguments.length?(lt={x:lt.x,y:lt.y,k:null},Hn(+Gn),Kn(),en):lt.k},en.scaleExtent=function(Gn){return arguments.length?(ee=Gn==null?He:[+Gn[0],+Gn[1]],en):ee},en.center=function(Gn){return arguments.length?(Ht=Gn&&[+Gn[0],+Gn[1]],en):Ht},en.size=function(Gn){return arguments.length?(Wt=Gn&&[+Gn[0],+Gn[1]],en):Wt},en.duration=function(Gn){return arguments.length?(xe=+Gn,en):xe},en.x=function(Gn){return arguments.length?(zr=Gn,Ar=Gn.copy(),lt={x:0,y:0,k:1},en):zr},en.y=function(Gn){return arguments.length?(Qr=Gn,Yr=Gn.copy(),lt={x:0,y:0,k:1},en):Qr};function Xr(Gn){return[(Gn[0]-lt.x)/lt.k,(Gn[1]-lt.y)/lt.k]}function On(Gn){return[Gn[0]*lt.k+lt.x,Gn[1]*lt.k+lt.y]}function Hn(Gn){lt.k=Math.max(ee[0],Math.min(ee[1],Gn))}function ti(Gn,Pi){Pi=On(Pi),lt.x+=Gn[0]-Pi[0],lt.y+=Gn[1]-Pi[1]}function Yn(Gn,Pi,pi,Fi){Gn.__chart__={x:lt.x,y:lt.y,k:lt.k},Hn(Math.pow(2,Fi)),ti(Lt=Pi,pi),Gn=i.select(Gn),xe>0&&(Gn=Gn.transition().duration(xe)),Gn.call(en.event)}function Kn(){zr&&zr.domain(Ar.range().map(function(Gn){return(Gn-lt.x)/lt.k}).map(Ar.invert)),Qr&&Qr.domain(Yr.range().map(function(Gn){return(Gn-lt.y)/lt.k}).map(Yr.invert))}function ei(Gn){me++||Gn({type:"zoomstart"})}function Ri(Gn){Kn(),Gn({type:"zoom",scale:lt.k,translate:[lt.x,lt.y]})}function di(Gn){--me||(Gn({type:"zoomend"}),Lt=null)}function Ei(){var Gn=this,Pi=Jr.of(Gn,arguments),pi=0,Fi=i.select(r(Gn)).on(ze,Oa).on(Xe,Pa),oa=Xr(i.mouse(Gn)),Vi=Vt(Gn);Le.call(Gn),ei(Pi);function Oa(){pi=1,ti(i.mouse(Gn),oa),Ri(Pi)}function Pa(){Fi.on(ze,null).on(Xe,null),Vi(pi),di(Pi)}}function Hi(){var Gn=this,Pi=Jr.of(Gn,arguments),pi={},Fi=0,oa,Vi=".zoom-"+i.event.changedTouches[0].identifier,Oa="touchmove"+Vi,Pa="touchend"+Vi,Da=[],sa=i.select(Gn),Va=Vt(Gn);vi(),ei(Pi),sa.on(Ie,null).on(wr,vi);function Qn(){var Ba=i.touches(Gn);return oa=lt.k,Ba.forEach(function(Zi){Zi.identifier in pi&&(pi[Zi.identifier]=Xr(Zi))}),Ba}function vi(){var Ba=i.event.target;i.select(Ba).on(Oa,ro).on(Pa,uo),Da.push(Ba);for(var Zi=i.event.changedTouches,Sa=0,wa=Zi.length;Sa<wa;++Sa)pi[Zi[Sa].identifier]=null;var zo=Qn(),Wo=Date.now();if(zo.length===1){if(Wo-Hr<500){var ha=zo[0];Yn(Gn,ha,pi[ha.identifier],Math.floor(Math.log(lt.k)/Math.LN2)+1),it()}Hr=Wo}else if(zo.length>1){var ha=zo[0],Gs=zo[1],Di=ha[0]-Gs[0],pa=ha[1]-Gs[1];Fi=Di*Di+pa*pa}}function ro(){var Ba=i.touches(Gn),Zi,Sa,wa,zo;Le.call(Gn);for(var Wo=0,ha=Ba.length;Wo<ha;++Wo,zo=null)if(wa=Ba[Wo],zo=pi[wa.identifier]){if(Sa)break;Zi=wa,Sa=zo}if(zo){var Gs=(Gs=wa[0]-Zi[0])*Gs+(Gs=wa[1]-Zi[1])*Gs,Di=Fi&&Math.sqrt(Gs/Fi);Zi=[(Zi[0]+wa[0])/2,(Zi[1]+wa[1])/2],Sa=[(Sa[0]+zo[0])/2,(Sa[1]+zo[1])/2],Hn(Di*oa)}Hr=null,ti(Zi,Sa),Ri(Pi)}function uo(){if(i.event.touches.length){for(var Ba=i.event.changedTouches,Zi=0,Sa=Ba.length;Zi<Sa;++Zi)delete pi[Ba[Zi].identifier];for(var wa in pi)return void Qn()}i.selectAll(Da).on(Vi,null),sa.on(Ie,Ei).on(wr,Hi),Va(),di(Pi)}}function _a(){var Gn=Jr.of(this,arguments);br?clearTimeout(br):(Le.call(this),_t=Xr(Lt=Ht||i.mouse(this)),ei(Gn)),br=setTimeout(function(){br=null,di(Gn)},50),it(),Hn(Math.pow(2,pr()*.002)*lt.k),ti(Lt,_t),Ri(Gn)}function Xi(){var Gn=i.mouse(this),Pi=Math.log(lt.k)/Math.LN2;Yn(this,Gn,Xr(Gn),i.event.shiftKey?Math.ceil(Pi)-1:Math.floor(Pi)+1)}return i.rebind(en,Jr,"on")};var He=[0,1/0],pr,Ze;i.color=Xt;function Xt(){}Xt.prototype.toString=function(){return this.rgb()+""},i.hsl=ie;function ie(lt,_t,Lt){return this instanceof ie?(this.h=+lt,this.s=+_t,void(this.l=+Lt)):arguments.length<2?lt instanceof ie?new ie(lt.h,lt.s,lt.l):lr(""+lt,nr,ie):new ie(lt,_t,Lt)}var pe=ie.prototype=new Xt;pe.brighter=function(lt){return lt=Math.pow(.7,arguments.length?lt:1),new ie(this.h,this.s,this.l/lt)},pe.darker=function(lt){return lt=Math.pow(.7,arguments.length?lt:1),new ie(this.h,this.s,lt*this.l)},pe.rgb=function(){return ke(this.h,this.s,this.l)};function ke(lt,_t,Lt){var Ht,Wt;lt=isNaN(lt)?0:(lt%=360)<0?lt+360:lt,_t=isNaN(_t)||_t<0?0:_t>1?1:_t,Lt=Lt<0?0:Lt>1?1:Lt,Wt=Lt<=.5?Lt*(1+_t):Lt+_t-Lt*_t,Ht=2*Lt-Wt;function ee(me){return me>360?me-=360:me<0&&(me+=360),me<60?Ht+(Wt-Ht)*me/60:me<180?Wt:me<240?Ht+(Wt-Ht)*(240-me)/60:Ht}function xe(me){return Math.round(ee(me)*255)}return new Je(xe(lt+120),xe(lt),xe(lt-120))}i.hcl=Ce;function Ce(lt,_t,Lt){return this instanceof Ce?(this.h=+lt,this.c=+_t,void(this.l=+Lt)):arguments.length<2?lt instanceof Ce?new Ce(lt.h,lt.c,lt.l):lt instanceof be?Me(lt.l,lt.a,lt.b):Me((lt=Sr((lt=i.rgb(lt)).r,lt.g,lt.b)).l,lt.a,lt.b):new Ce(lt,_t,Lt)}var Fe=Ce.prototype=new Xt;Fe.brighter=function(lt){return new Ce(this.h,this.c,Math.min(100,this.l+Ge*(arguments.length?lt:1)))},Fe.darker=function(lt){return new Ce(this.h,this.c,Math.max(0,this.l-Ge*(arguments.length?lt:1)))},Fe.rgb=function(){return Re(this.h,this.c,this.l).rgb()};function Re(lt,_t,Lt){return isNaN(lt)&&(lt=0),isNaN(_t)&&(_t=0),new be(Lt,Math.cos(lt*=te)*_t,Math.sin(lt)*_t)}i.lab=be;function be(lt,_t,Lt){return this instanceof be?(this.l=+lt,this.a=+_t,void(this.b=+Lt)):arguments.length<2?lt instanceof be?new be(lt.l,lt.a,lt.b):lt instanceof Ce?Re(lt.h,lt.c,lt.l):Sr((lt=Je(lt)).r,lt.g,lt.b):new be(lt,_t,Lt)}var Ge=18,Ke=.95047,or=1,sr=1.08883,zt=be.prototype=new Xt;zt.brighter=function(lt){return new be(Math.min(100,this.l+Ge*(arguments.length?lt:1)),this.a,this.b)},zt.darker=function(lt){return new be(Math.max(0,this.l-Ge*(arguments.length?lt:1)),this.a,this.b)},zt.rgb=function(){return Ut(this.l,this.a,this.b)};function Ut(lt,_t,Lt){var Ht=(lt+16)/116,Wt=Ht+_t/500,ee=Ht-Lt/200;return Wt=Te(Wt)*Ke,Ht=Te(Ht)*or,ee=Te(ee)*sr,new Je(Qe(3.2404542*Wt-1.5371385*Ht-.4985314*ee),Qe(-.969266*Wt+1.8760108*Ht+.041556*ee),Qe(.0556434*Wt-.2040259*Ht+1.0572252*ee))}function Me(lt,_t,Lt){return lt>0?new Ce(Math.atan2(Lt,_t)*ne,Math.sqrt(_t*_t+Lt*Lt),lt):new Ce(NaN,NaN,lt)}function Te(lt){return lt>.206893034?lt*lt*lt:(lt-.13793103448275862)/7.787037}function qe(lt){return lt>.008856?Math.pow(lt,.3333333333333333):7.787037*lt+.13793103448275862}function Qe(lt){return Math.round(255*(lt<=.00304?12.92*lt:1.055*Math.pow(lt,.4166666666666667)-.055))}i.rgb=Je;function Je(lt,_t,Lt){return this instanceof Je?(this.r=~~lt,this.g=~~_t,void(this.b=~~Lt)):arguments.length<2?lt instanceof Je?new Je(lt.r,lt.g,lt.b):lr(""+lt,Je,ke):new Je(lt,_t,Lt)}function We(lt){return new Je(lt>>16,lt>>8&255,lt&255)}function Oe(lt){return We(lt)+""}var rr=Je.prototype=new Xt;rr.brighter=function(lt){lt=Math.pow(.7,arguments.length?lt:1);var _t=this.r,Lt=this.g,Ht=this.b,Wt=30;return!_t&&!Lt&&!Ht?new Je(Wt,Wt,Wt):(_t&&_t<Wt&&(_t=Wt),Lt&&Lt<Wt&&(Lt=Wt),Ht&&Ht<Wt&&(Ht=Wt),new Je(Math.min(255,_t/lt),Math.min(255,Lt/lt),Math.min(255,Ht/lt)))},rr.darker=function(lt){return lt=Math.pow(.7,arguments.length?lt:1),new Je(lt*this.r,lt*this.g,lt*this.b)},rr.hsl=function(){return nr(this.r,this.g,this.b)},rr.toString=function(){return"#"+cr(this.r)+cr(this.g)+cr(this.b)};function cr(lt){return lt<16?"0"+Math.max(0,lt).toString(16):Math.min(255,lt).toString(16)}function lr(lt,_t,Lt){var Ht=0,Wt=0,ee=0,xe,me,Ie;if(xe=/([a-z]+)\((.*)\)/.exec(lt=lt.toLowerCase()),xe)switch(me=xe[2].split(","),xe[1]){case"hsl":return Lt(parseFloat(me[0]),parseFloat(me[1])/100,parseFloat(me[2])/100);case"rgb":return _t(Mr(me[0]),Mr(me[1]),Mr(me[2]))}return(Ie=rn.get(lt))?_t(Ie.r,Ie.g,Ie.b):(lt!=null&&lt.charAt(0)==="#"&&!isNaN(Ie=parseInt(lt.slice(1),16))&&(lt.length===4?(Ht=(Ie&3840)>>4,Ht=Ht>>4|Ht,Wt=Ie&240,Wt=Wt>>4|Wt,ee=Ie&15,ee=ee<<4|ee):lt.length===7&&(Ht=(Ie&16711680)>>16,Wt=(Ie&65280)>>8,ee=Ie&255)),_t(Ht,Wt,ee))}function nr(lt,_t,Lt){var Ht=Math.min(lt/=255,_t/=255,Lt/=255),Wt=Math.max(lt,_t,Lt),ee=Wt-Ht,xe,me,Ie=(Wt+Ht)/2;return ee?(me=Ie<.5?ee/(Wt+Ht):ee/(2-Wt-Ht),lt==Wt?xe=(_t-Lt)/ee+(_t<Lt?6:0):_t==Wt?xe=(Lt-lt)/ee+2:xe=(lt-_t)/ee+4,xe*=60):(xe=NaN,me=Ie>0&&Ie<1?0:xe),new ie(xe,me,Ie)}function Sr(lt,_t,Lt){lt=kr(lt),_t=kr(_t),Lt=kr(Lt);var Ht=qe((.4124564*lt+.3575761*_t+.1804375*Lt)/Ke),Wt=qe((.2126729*lt+.7151522*_t+.072175*Lt)/or),ee=qe((.0193339*lt+.119192*_t+.9503041*Lt)/sr);return be(116*Wt-16,500*(Ht-Wt),200*(Wt-ee))}function kr(lt){return(lt/=255)<=.04045?lt/12.92:Math.pow((lt+.055)/1.055,2.4)}function Mr(lt){var _t=parseFloat(lt);return lt.charAt(lt.length-1)==="%"?Math.round(_t*2.55):_t}var rn=i.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});rn.forEach(function(lt,_t){rn.set(lt,We(_t))});function Ur(lt){return typeof lt=="function"?lt:function(){return lt}}i.functor=Ur,i.xhr=pn(F);function pn(lt){return function(_t,Lt,Ht){return arguments.length===2&&typeof Lt=="function"&&(Ht=Lt,Lt=null),yn(_t,Lt,lt,Ht)}}function yn(lt,_t,Lt,Ht){var Wt={},ee=i.dispatch("beforesend","progress","load","error"),xe={},me=new XMLHttpRequest,Ie=null;self.XDomainRequest&&!("withCredentials"in me)&&/^(http(s)?:)?\/\//.test(lt)&&(me=new XDomainRequest),"onload"in me?me.onload=me.onerror=ze:me.onreadystatechange=function(){me.readyState>3&&ze()};function ze(){var Xe=me.status,br;if(!Xe&&Cr(me)||Xe>=200&&Xe<300||Xe===304){try{br=Lt.call(Wt,me)}catch(wr){ee.error.call(Wt,wr);return}ee.load.call(Wt,br)}else ee.error.call(Wt,me)}return me.onprogress=function(Xe){var br=i.event;i.event=Xe;try{ee.progress.call(Wt,me)}finally{i.event=br}},Wt.header=function(Xe,br){return Xe=(Xe+"").toLowerCase(),arguments.length<2?xe[Xe]:(br==null?delete xe[Xe]:xe[Xe]=br+"",Wt)},Wt.mimeType=function(Xe){return arguments.length?(_t=Xe==null?null:Xe+"",Wt):_t},Wt.responseType=function(Xe){return arguments.length?(Ie=Xe,Wt):Ie},Wt.response=function(Xe){return Lt=Xe,Wt},["get","post"].forEach(function(Xe){Wt[Xe]=function(){return Wt.send.apply(Wt,[Xe].concat(T(arguments)))}}),Wt.send=function(Xe,br,wr){if(arguments.length===2&&typeof br=="function"&&(wr=br,br=null),me.open(Xe,lt,!0),_t!=null&&!("accept"in xe)&&(xe.accept=_t+",*/*"),me.setRequestHeader)for(var Hr in xe)me.setRequestHeader(Hr,xe[Hr]);return _t!=null&&me.overrideMimeType&&me.overrideMimeType(_t),Ie!=null&&(me.responseType=Ie),wr!=null&&Wt.on("error",wr).on("load",function(Jr){wr(null,Jr)}),ee.beforesend.call(Wt,me),me.send(br??null),Wt},Wt.abort=function(){return me.abort(),Wt},i.rebind(Wt,ee,"on"),Ht==null?Wt:Wt.get(yr(Ht))}function yr(lt){return lt.length===1?function(_t,Lt){lt(_t==null?Lt:null)}:lt}function Cr(lt){var _t=lt.responseType;return _t&&_t!=="text"?lt.response:lt.responseText}i.dsv=function(lt,_t){var Lt=new RegExp('["'+lt+`
]`),Ht=lt.charCodeAt(0);function Wt(ze,Xe,br){arguments.length<3&&(br=Xe,Xe=null);var wr=yn(ze,_t,Xe==null?ee:xe(Xe),br);return wr.row=function(Hr){return arguments.length?wr.response((Xe=Hr)==null?ee:xe(Hr)):Xe},wr}function ee(ze){return Wt.parse(ze.responseText)}function xe(ze){return function(Xe){return Wt.parse(Xe.responseText,ze)}}Wt.parse=function(ze,Xe){var br;return Wt.parseRows(ze,function(wr,Hr){if(br)return br(wr,Hr-1);var Jr=function(Ar){for(var zr={},Yr=wr.length,Qr=0;Qr<Yr;++Qr)zr[wr[Qr]]=Ar[Qr];return zr};br=Xe?function(Ar,zr){return Xe(Jr(Ar),zr)}:Jr})},Wt.parseRows=function(ze,Xe){var br={},wr={},Hr=[],Jr=ze.length,Ar=0,zr=0,Yr,Qr;function en(){if(Ar>=Jr)return wr;if(Qr)return Qr=!1,br;var On=Ar;if(ze.charCodeAt(On)===34){for(var Hn=On;Hn++<Jr;)if(ze.charCodeAt(Hn)===34){if(ze.charCodeAt(Hn+1)!==34)break;++Hn}Ar=Hn+2;var ti=ze.charCodeAt(Hn+1);return ti===13?(Qr=!0,ze.charCodeAt(Hn+2)===10&&++Ar):ti===10&&(Qr=!0),ze.slice(On+1,Hn).replace(/""/g,'"')}for(;Ar<Jr;){var ti=ze.charCodeAt(Ar++),Yn=1;if(ti===10)Qr=!0;else if(ti===13)Qr=!0,ze.charCodeAt(Ar)===10&&(++Ar,++Yn);else if(ti!==Ht)continue;return ze.slice(On,Ar-Yn)}return ze.slice(On)}for(;(Yr=en())!==wr;){for(var Xr=[];Yr!==br&&Yr!==wr;)Xr.push(Yr),Yr=en();Xe&&(Xr=Xe(Xr,zr++))==null||Hr.push(Xr)}return Hr},Wt.format=function(ze){if(Array.isArray(ze[0]))return Wt.formatRows(ze);var Xe=new P,br=[];return ze.forEach(function(wr){for(var Hr in wr)Xe.has(Hr)||br.push(Xe.add(Hr))}),[br.map(Ie).join(lt)].concat(ze.map(function(wr){return br.map(function(Hr){return Ie(wr[Hr])}).join(lt)})).join(`
`)},Wt.formatRows=function(ze){return ze.map(me).join(`
`)};function me(ze){return ze.map(Ie).join(lt)}function Ie(ze){return Lt.test(ze)?'"'+ze.replace(/\"/g,'""')+'"':ze}return Wt},i.csv=i.dsv(",","text/csv"),i.tsv=i.dsv("	","text/tab-separated-values");var Dr,Nr,$r,fn,on=this[B(this,"requestAnimationFrame")]||function(lt){setTimeout(lt,17)};i.timer=function(){In.apply(this,arguments)};function In(lt,_t,Lt){var Ht=arguments.length;Ht<2&&(_t=0),Ht<3&&(Lt=Date.now());var Wt=Lt+_t,ee={c:lt,t:Wt,n:null};return Nr?Nr.n=ee:Dr=ee,Nr=ee,$r||(fn=clearTimeout(fn),$r=1,on(En)),ee}function En(){var lt=$n(),_t=ri()-lt;_t>24?(isFinite(_t)&&(clearTimeout(fn),fn=setTimeout(En,_t)),$r=0):($r=1,on(En))}i.timer.flush=function(){$n(),ri()};function $n(){for(var lt=Date.now(),_t=Dr;_t;)lt>=_t.t&&_t.c(lt-_t.t)&&(_t.c=null),_t=_t.n;return lt}function ri(){for(var lt,_t=Dr,Lt=1/0;_t;)_t.c?(_t.t<Lt&&(Lt=_t.t),_t=(lt=_t).n):_t=lt?lt.n=_t.n:Dr=_t.n;return Nr=lt,Lt}i.round=function(lt,_t){return _t?Math.round(lt*(_t=Math.pow(10,_t)))/_t:Math.round(lt)},i.geom={};function ui(lt){return lt[0]}function ni(lt){return lt[1]}i.geom.hull=function(lt){var _t=ui,Lt=ni;if(arguments.length)return Ht(lt);function Ht(Wt){if(Wt.length<3)return[];var ee=Ur(_t),xe=Ur(Lt),me,Ie=Wt.length,ze=[],Xe=[];for(me=0;me<Ie;me++)ze.push([+ee.call(this,Wt[me],me),+xe.call(this,Wt[me],me),me]);for(ze.sort(ur),me=0;me<Ie;me++)Xe.push([ze[me][0],-ze[me][1]]);var br=zn(ze),wr=zn(Xe),Hr=wr[0]===br[0],Jr=wr[wr.length-1]===br[br.length-1],Ar=[];for(me=br.length-1;me>=0;--me)Ar.push(Wt[ze[br[me]][2]]);for(me=+Hr;me<wr.length-Jr;++me)Ar.push(Wt[ze[wr[me]][2]]);return Ar}return Ht.x=function(Wt){return arguments.length?(_t=Wt,Ht):_t},Ht.y=function(Wt){return arguments.length?(Lt=Wt,Ht):Lt},Ht};function zn(lt){for(var _t=lt.length,Lt=[0,1],Ht=2,Wt=2;Wt<_t;Wt++){for(;Ht>1&&je(lt[Lt[Ht-2]],lt[Lt[Ht-1]],lt[Wt])<=0;)--Ht;Lt[Ht++]=Wt}return Lt.slice(0,Ht)}function ur(lt,_t){return lt[0]-_t[0]||lt[1]-_t[1]}i.geom.polygon=function(lt){return $(lt,Gr),lt};var Gr=i.geom.polygon.prototype=[];Gr.area=function(){for(var lt=-1,_t=this.length,Lt,Ht=this[_t-1],Wt=0;++lt<_t;)Lt=Ht,Ht=this[lt],Wt+=Lt[1]*Ht[0]-Lt[0]*Ht[1];return Wt*.5},Gr.centroid=function(lt){var _t=-1,Lt=this.length,Ht=0,Wt=0,ee,xe=this[Lt-1],me;for(arguments.length||(lt=-1/(6*this.area()));++_t<Lt;)ee=xe,xe=this[_t],me=ee[0]*xe[1]-xe[0]*ee[1],Ht+=(ee[0]+xe[0])*me,Wt+=(ee[1]+xe[1])*me;return[Ht*lt,Wt*lt]},Gr.clip=function(lt){for(var _t,Lt=Mn(lt),Ht=-1,Wt=this.length-Mn(this),ee,xe,me=this[Wt-1],Ie,ze,Xe;++Ht<Wt;){for(_t=lt.slice(),lt.length=0,Ie=this[Ht],ze=_t[(xe=_t.length-Lt)-1],ee=-1;++ee<xe;)Xe=_t[ee],qr(Xe,me,Ie)?(qr(ze,me,Ie)||lt.push(an(ze,Xe,me,Ie)),lt.push(Xe)):qr(ze,me,Ie)&&lt.push(an(ze,Xe,me,Ie)),ze=Xe;Lt&&lt.push(lt[0]),me=Ie}return lt};function qr(lt,_t,Lt){return(Lt[0]-_t[0])*(lt[1]-_t[1])<(Lt[1]-_t[1])*(lt[0]-_t[0])}function an(lt,_t,Lt,Ht){var Wt=lt[0],ee=Lt[0],xe=_t[0]-Wt,me=Ht[0]-ee,Ie=lt[1],ze=Lt[1],Xe=_t[1]-Ie,br=Ht[1]-ze,wr=(me*(Ie-ze)-br*(Wt-ee))/(br*xe-me*Xe);return[Wt+wr*xe,Ie+wr*Xe]}function Mn(lt){var _t=lt[0],Lt=lt[lt.length-1];return!(_t[0]-Lt[0]||_t[1]-Lt[1])}var sn,An,Sn,qn=[],ii,Mi,dr=[];function Er(){oo(this),this.edge=this.site=this.circle=null}function gr(lt){var _t=qn.pop()||new Er;return _t.site=lt,_t}function Or(lt){xn(lt),Sn.remove(lt),qn.push(lt),oo(lt)}function vn(lt){var _t=lt.circle,Lt=_t.x,Ht=_t.cy,Wt={x:Lt,y:Ht},ee=lt.P,xe=lt.N,me=[lt];Or(lt);for(var Ie=ee;Ie.circle&&f(Lt-Ie.circle.x)<Dt&&f(Ht-Ie.circle.cy)<Dt;)ee=Ie.P,me.unshift(Ie),Or(Ie),Ie=ee;me.unshift(Ie),xn(Ie);for(var ze=xe;ze.circle&&f(Lt-ze.circle.x)<Dt&&f(Ht-ze.circle.cy)<Dt;)xe=ze.N,me.push(ze),Or(ze),ze=xe;me.push(ze),xn(ze);var Xe=me.length,br;for(br=1;br<Xe;++br)ze=me[br],Ie=me[br-1],_i(ze.edge,Ie.site,ze.site,Wt);Ie=me[0],ze=me[Xe-1],ze.edge=Jn(Ie.site,ze.site,null,Wt),mn(Ie),mn(ze)}function Tn(lt){for(var _t=lt.x,Lt=lt.y,Ht,Wt,ee,xe,me=Sn._;me;)if(ee=ln(me,Lt)-_t,ee>Dt)me=me.L;else if(xe=_t-nn(me,Lt),xe>Dt){if(!me.R){Ht=me;break}me=me.R}else{ee>-Dt?(Ht=me.P,Wt=me):xe>-Dt?(Ht=me,Wt=me.N):Ht=Wt=me;break}var Ie=gr(lt);if(Sn.insert(Ht,Ie),!(!Ht&&!Wt)){if(Ht===Wt){xn(Ht),Wt=gr(Ht.site),Sn.insert(Ie,Wt),Ie.edge=Wt.edge=Jn(Ht.site,Ie.site),mn(Ht),mn(Wt);return}if(!Wt){Ie.edge=Jn(Ht.site,Ie.site);return}xn(Ht),xn(Wt);var ze=Ht.site,Xe=ze.x,br=ze.y,wr=lt.x-Xe,Hr=lt.y-br,Jr=Wt.site,Ar=Jr.x-Xe,zr=Jr.y-br,Yr=2*(wr*zr-Hr*Ar),Qr=wr*wr+Hr*Hr,en=Ar*Ar+zr*zr,Xr={x:(zr*Qr-Hr*en)/Yr+Xe,y:(wr*en-Ar*Qr)/Yr+br};_i(Wt.edge,ze,Jr,Xr),Ie.edge=Jn(ze,lt,null,Xr),Wt.edge=Jn(lt,Jr,null,Xr),mn(Ht),mn(Wt)}}function ln(lt,_t){var Lt=lt.site,Ht=Lt.x,Wt=Lt.y,ee=Wt-_t;if(!ee)return Ht;var xe=lt.P;if(!xe)return-1/0;Lt=xe.site;var me=Lt.x,Ie=Lt.y,ze=Ie-_t;if(!ze)return me;var Xe=me-Ht,br=1/ee-1/ze,wr=Xe/ze;return br?(-wr+Math.sqrt(wr*wr-2*br*(Xe*Xe/(-2*ze)-Ie+ze/2+Wt-ee/2)))/br+Ht:(Ht+me)/2}function nn(lt,_t){var Lt=lt.N;if(Lt)return ln(Lt,_t);var Ht=lt.site;return Ht.y===_t?Ht.x:1/0}function xr(lt){this.site=lt,this.edges=[]}xr.prototype.prepare=function(){for(var lt=this.edges,_t=lt.length,Lt;_t--;)Lt=lt[_t].edge,(!Lt.b||!Lt.a)&&lt.splice(_t,1);return lt.sort(Pr),lt.length};function jr(lt){for(var _t=lt[0][0],Lt=lt[1][0],Ht=lt[0][1],Wt=lt[1][1],ee,xe,me,Ie,ze=An,Xe=ze.length,br,wr,Hr,Jr,Ar,zr;Xe--;)if(br=ze[Xe],!(!br||!br.prepare()))for(Hr=br.edges,Jr=Hr.length,wr=0;wr<Jr;)zr=Hr[wr].end(),me=zr.x,Ie=zr.y,Ar=Hr[++wr%Jr].start(),ee=Ar.x,xe=Ar.y,(f(me-ee)>Dt||f(Ie-xe)>Dt)&&(Hr.splice(wr,0,new ta(ai(br.site,zr,f(me-_t)<Dt&&Wt-Ie>Dt?{x:_t,y:f(ee-_t)<Dt?xe:Wt}:f(Ie-Wt)<Dt&&Lt-me>Dt?{x:f(xe-Wt)<Dt?ee:Lt,y:Wt}:f(me-Lt)<Dt&&Ie-Ht>Dt?{x:Lt,y:f(ee-Lt)<Dt?xe:Ht}:f(Ie-Ht)<Dt&&me-_t>Dt?{x:f(xe-Ht)<Dt?ee:_t,y:Ht}:null),br.site,null)),++Jr)}function Pr(lt,_t){return _t.angle-lt.angle}function Vr(){oo(this),this.x=this.y=this.arc=this.site=this.cy=null}function mn(lt){var _t=lt.P,Lt=lt.N;if(!(!_t||!Lt)){var Ht=_t.site,Wt=lt.site,ee=Lt.site;if(Ht!==ee){var xe=Wt.x,me=Wt.y,Ie=Ht.x-xe,ze=Ht.y-me,Xe=ee.x-xe,br=ee.y-me,wr=2*(Ie*br-ze*Xe);if(!(wr>=-dt)){var Hr=Ie*Ie+ze*ze,Jr=Xe*Xe+br*br,Ar=(br*Hr-ze*Jr)/wr,zr=(Ie*Jr-Xe*Hr)/wr,br=zr+me,Yr=dr.pop()||new Vr;Yr.arc=lt,Yr.site=Wt,Yr.x=Ar+xe,Yr.y=br+Math.sqrt(Ar*Ar+zr*zr),Yr.cy=br,lt.circle=Yr;for(var Qr=null,en=Mi._;en;)if(Yr.y<en.y||Yr.y===en.y&&Yr.x<=en.x)if(en.L)en=en.L;else{Qr=en.P;break}else if(en.R)en=en.R;else{Qr=en;break}Mi.insert(Qr,Yr),Qr||(ii=Yr)}}}}function xn(lt){var _t=lt.circle;_t&&(_t.P||(ii=_t.N),Mi.remove(_t),dr.push(_t),oo(_t),lt.circle=null)}function _n(lt,_t,Lt,Ht){return function(Wt){var ee=Wt.a,xe=Wt.b,me=ee.x,Ie=ee.y,ze=xe.x,Xe=xe.y,br=0,wr=1,Hr=ze-me,Jr=Xe-Ie,Ar;if(Ar=lt-me,!(!Hr&&Ar>0)){if(Ar/=Hr,Hr<0){if(Ar<br)return;Ar<wr&&(wr=Ar)}else if(Hr>0){if(Ar>wr)return;Ar>br&&(br=Ar)}if(Ar=Lt-me,!(!Hr&&Ar<0)){if(Ar/=Hr,Hr<0){if(Ar>wr)return;Ar>br&&(br=Ar)}else if(Hr>0){if(Ar<br)return;Ar<wr&&(wr=Ar)}if(Ar=_t-Ie,!(!Jr&&Ar>0)){if(Ar/=Jr,Jr<0){if(Ar<br)return;Ar<wr&&(wr=Ar)}else if(Jr>0){if(Ar>wr)return;Ar>br&&(br=Ar)}if(Ar=Ht-Ie,!(!Jr&&Ar<0)){if(Ar/=Jr,Jr<0){if(Ar>wr)return;Ar>br&&(br=Ar)}else if(Jr>0){if(Ar<br)return;Ar<wr&&(wr=Ar)}return br>0&&(Wt.a={x:me+br*Hr,y:Ie+br*Jr}),wr<1&&(Wt.b={x:me+wr*Hr,y:Ie+wr*Jr}),Wt}}}}}}function Rn(lt){for(var _t=sn,Lt=_n(lt[0][0],lt[0][1],lt[1][0],lt[1][1]),Ht=_t.length,Wt;Ht--;)Wt=_t[Ht],(!Cn(Wt,lt)||!Lt(Wt)||f(Wt.a.x-Wt.b.x)<Dt&&f(Wt.a.y-Wt.b.y)<Dt)&&(Wt.a=Wt.b=null,_t.splice(Ht,1))}function Cn(lt,_t){var Lt=lt.b;if(Lt)return!0;var Ht=lt.a,Wt=_t[0][0],ee=_t[1][0],xe=_t[0][1],me=_t[1][1],Ie=lt.l,ze=lt.r,Xe=Ie.x,br=Ie.y,wr=ze.x,Hr=ze.y,Jr=(Xe+wr)/2,Ar=(br+Hr)/2,zr,Yr;if(Hr===br){if(Jr<Wt||Jr>=ee)return;if(Xe>wr){if(!Ht)Ht={x:Jr,y:xe};else if(Ht.y>=me)return;Lt={x:Jr,y:me}}else{if(!Ht)Ht={x:Jr,y:me};else if(Ht.y<xe)return;Lt={x:Jr,y:xe}}}else if(zr=(Xe-wr)/(Hr-br),Yr=Ar-zr*Jr,zr<-1||zr>1)if(Xe>wr){if(!Ht)Ht={x:(xe-Yr)/zr,y:xe};else if(Ht.y>=me)return;Lt={x:(me-Yr)/zr,y:me}}else{if(!Ht)Ht={x:(me-Yr)/zr,y:me};else if(Ht.y<xe)return;Lt={x:(xe-Yr)/zr,y:xe}}else if(br<Hr){if(!Ht)Ht={x:Wt,y:zr*Wt+Yr};else if(Ht.x>=ee)return;Lt={x:ee,y:zr*ee+Yr}}else{if(!Ht)Ht={x:ee,y:zr*ee+Yr};else if(Ht.x<Wt)return;Lt={x:Wt,y:zr*Wt+Yr}}return lt.a=Ht,lt.b=Lt,!0}function oi(lt,_t){this.l=lt,this.r=_t,this.a=this.b=null}function Jn(lt,_t,Lt,Ht){var Wt=new oi(lt,_t);return sn.push(Wt),Lt&&_i(Wt,lt,_t,Lt),Ht&&_i(Wt,_t,lt,Ht),An[lt.i].edges.push(new ta(Wt,lt,_t)),An[_t.i].edges.push(new ta(Wt,_t,lt)),Wt}function ai(lt,_t,Lt){var Ht=new oi(lt,null);return Ht.a=_t,Ht.b=Lt,sn.push(Ht),Ht}function _i(lt,_t,Lt,Ht){!lt.a&&!lt.b?(lt.a=Ht,lt.l=_t,lt.r=Lt):lt.l===Lt?lt.b=Ht:lt.a=Ht}function ta(lt,_t,Lt){var Ht=lt.a,Wt=lt.b;this.edge=lt,this.site=_t,this.angle=Lt?Math.atan2(Lt.y-_t.y,Lt.x-_t.x):lt.l===_t?Math.atan2(Wt.x-Ht.x,Ht.y-Wt.y):Math.atan2(Ht.x-Wt.x,Wt.y-Ht.y)}ta.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Yi(){this._=null}function oo(lt){lt.U=lt.C=lt.L=lt.R=lt.P=lt.N=null}Yi.prototype={insert:function(lt,_t){var Lt,Ht,Wt;if(lt){if(_t.P=lt,_t.N=lt.N,lt.N&&(lt.N.P=_t),lt.N=_t,lt.R){for(lt=lt.R;lt.L;)lt=lt.L;lt.L=_t}else lt.R=_t;Lt=lt}else this._?(lt=Ts(this._),_t.P=null,_t.N=lt,lt.P=lt.L=_t,Lt=lt):(_t.P=_t.N=null,this._=_t,Lt=null);for(_t.L=_t.R=null,_t.U=Lt,_t.C=!0,lt=_t;Lt&&Lt.C;)Ht=Lt.U,Lt===Ht.L?(Wt=Ht.R,Wt&&Wt.C?(Lt.C=Wt.C=!1,Ht.C=!0,lt=Ht):(lt===Lt.R&&($a(this,Lt),lt=Lt,Lt=lt.U),Lt.C=!1,Ht.C=!0,Ia(this,Ht))):(Wt=Ht.L,Wt&&Wt.C?(Lt.C=Wt.C=!1,Ht.C=!0,lt=Ht):(lt===Lt.L&&(Ia(this,Lt),lt=Lt,Lt=lt.U),Lt.C=!1,Ht.C=!0,$a(this,Ht))),Lt=lt.U;this._.C=!1},remove:function(lt){lt.N&&(lt.N.P=lt.P),lt.P&&(lt.P.N=lt.N),lt.N=lt.P=null;var _t=lt.U,Lt,Ht=lt.L,Wt=lt.R,ee,xe;if(Ht?Wt?ee=Ts(Wt):ee=Ht:ee=Wt,_t?_t.L===lt?_t.L=ee:_t.R=ee:this._=ee,Ht&&Wt?(xe=ee.C,ee.C=lt.C,ee.L=Ht,Ht.U=ee,ee!==Wt?(_t=ee.U,ee.U=lt.U,lt=ee.R,_t.L=lt,ee.R=Wt,Wt.U=ee):(ee.U=_t,_t=ee,lt=ee.R)):(xe=lt.C,lt=ee),lt&&(lt.U=_t),!xe){if(lt&&lt.C){lt.C=!1;return}do{if(lt===this._)break;if(lt===_t.L){if(Lt=_t.R,Lt.C&&(Lt.C=!1,_t.C=!0,$a(this,_t),Lt=_t.R),Lt.L&&Lt.L.C||Lt.R&&Lt.R.C){(!Lt.R||!Lt.R.C)&&(Lt.L.C=!1,Lt.C=!0,Ia(this,Lt),Lt=_t.R),Lt.C=_t.C,_t.C=Lt.R.C=!1,$a(this,_t),lt=this._;break}}else if(Lt=_t.L,Lt.C&&(Lt.C=!1,_t.C=!0,Ia(this,_t),Lt=_t.L),Lt.L&&Lt.L.C||Lt.R&&Lt.R.C){(!Lt.L||!Lt.L.C)&&(Lt.R.C=!1,Lt.C=!0,$a(this,Lt),Lt=_t.L),Lt.C=_t.C,_t.C=Lt.L.C=!1,Ia(this,_t),lt=this._;break}Lt.C=!0,lt=_t,_t=_t.U}while(!lt.C);lt&&(lt.C=!1)}}};function $a(lt,_t){var Lt=_t,Ht=_t.R,Wt=Lt.U;Wt?Wt.L===Lt?Wt.L=Ht:Wt.R=Ht:lt._=Ht,Ht.U=Wt,Lt.U=Ht,Lt.R=Ht.L,Lt.R&&(Lt.R.U=Lt),Ht.L=Lt}function Ia(lt,_t){var Lt=_t,Ht=_t.L,Wt=Lt.U;Wt?Wt.L===Lt?Wt.L=Ht:Wt.R=Ht:lt._=Ht,Ht.U=Wt,Lt.U=Ht,Lt.L=Ht.R,Lt.L&&(Lt.L.U=Lt),Ht.R=Lt}function Ts(lt){for(;lt.L;)lt=lt.L;return lt}function Gl(lt,_t){var Lt=lt.sort(du).pop(),Ht,Wt,ee;for(sn=[],An=new Array(lt.length),Sn=new Yi,Mi=new Yi;;)if(ee=ii,Lt&&(!ee||Lt.y<ee.y||Lt.y===ee.y&&Lt.x<ee.x))(Lt.x!==Ht||Lt.y!==Wt)&&(An[Lt.i]=new xr(Lt),Tn(Lt),Ht=Lt.x,Wt=Lt.y),Lt=lt.pop();else if(ee)vn(ee.arc);else break;_t&&(Rn(_t),jr(_t));var xe={cells:An,edges:sn};return Sn=Mi=sn=An=null,xe}function du(lt,_t){return _t.y-lt.y||_t.x-lt.x}i.geom.voronoi=function(lt){var _t=ui,Lt=ni,Ht=_t,Wt=Lt,ee=qi;if(lt)return xe(lt);function xe(Ie){var ze=new Array(Ie.length),Xe=ee[0][0],br=ee[0][1],wr=ee[1][0],Hr=ee[1][1];return Gl(me(Ie),ee).cells.forEach(function(Jr,Ar){var zr=Jr.edges,Yr=Jr.site,Qr=ze[Ar]=zr.length?zr.map(function(en){var Xr=en.start();return[Xr.x,Xr.y]}):Yr.x>=Xe&&Yr.x<=wr&&Yr.y>=br&&Yr.y<=Hr?[[Xe,Hr],[wr,Hr],[wr,br],[Xe,br]]:[];Qr.point=Ie[Ar]}),ze}function me(Ie){return Ie.map(function(ze,Xe){return{x:Math.round(Ht(ze,Xe)/Dt)*Dt,y:Math.round(Wt(ze,Xe)/Dt)*Dt,i:Xe}})}return xe.links=function(Ie){return Gl(me(Ie)).edges.filter(function(ze){return ze.l&&ze.r}).map(function(ze){return{source:Ie[ze.l.i],target:Ie[ze.r.i]}})},xe.triangles=function(Ie){var ze=[];return Gl(me(Ie)).cells.forEach(function(Xe,br){for(var wr=Xe.site,Hr=Xe.edges.sort(Pr),Jr=-1,Ar=Hr.length,zr,Yr,Qr=Hr[Ar-1].edge,en=Qr.l===wr?Qr.r:Qr.l;++Jr<Ar;)zr=Qr,Yr=en,Qr=Hr[Jr].edge,en=Qr.l===wr?Qr.r:Qr.l,br<Yr.i&&br<en.i&&Vs(wr,Yr,en)<0&&ze.push([Ie[br],Ie[Yr.i],Ie[en.i]])}),ze},xe.x=function(Ie){return arguments.length?(Ht=Ur(_t=Ie),xe):_t},xe.y=function(Ie){return arguments.length?(Wt=Ur(Lt=Ie),xe):Lt},xe.clipExtent=function(Ie){return arguments.length?(ee=Ie??qi,xe):ee===qi?null:ee},xe.size=function(Ie){return arguments.length?xe.clipExtent(Ie&&[[0,0],Ie]):ee===qi?null:ee&&ee[1]},xe};var qi=[[-1e6,-1e6],[1e6,1e6]];function Vs(lt,_t,Lt){return(lt.x-Lt.x)*(_t.y-lt.y)-(lt.x-_t.x)*(Lt.y-lt.y)}i.geom.delaunay=function(lt){return i.geom.voronoi().triangles(lt)},i.geom.quadtree=function(lt,_t,Lt,Ht,Wt){var ee=ui,xe=ni,me;if(me=arguments.length)return ee=Yl,xe=Ea,me===3&&(Wt=Lt,Ht=_t,Lt=_t=0),Ie(lt);function Ie(ze){var Xe,br=Ur(ee),wr=Ur(xe),Hr,Jr,Ar,zr,Yr,Qr,en,Xr;if(_t!=null)Yr=_t,Qr=Lt,en=Ht,Xr=Wt;else if(en=Xr=-(Yr=Qr=1/0),Hr=[],Jr=[],zr=ze.length,me)for(Ar=0;Ar<zr;++Ar)Xe=ze[Ar],Xe.x<Yr&&(Yr=Xe.x),Xe.y<Qr&&(Qr=Xe.y),Xe.x>en&&(en=Xe.x),Xe.y>Xr&&(Xr=Xe.y),Hr.push(Xe.x),Jr.push(Xe.y);else for(Ar=0;Ar<zr;++Ar){var On=+br(Xe=ze[Ar],Ar),Hn=+wr(Xe,Ar);On<Yr&&(Yr=On),Hn<Qr&&(Qr=Hn),On>en&&(en=On),Hn>Xr&&(Xr=Hn),Hr.push(On),Jr.push(Hn)}var ti=en-Yr,Yn=Xr-Qr;ti>Yn?Xr=Qr+ti:en=Yr+Yn;function Kn(di,Ei,Hi,_a,Xi,Gn,Pi,pi){if(!(isNaN(Hi)||isNaN(_a)))if(di.leaf){var Fi=di.x,oa=di.y;if(Fi!=null)if(f(Fi-Hi)+f(oa-_a)<.01)ei(di,Ei,Hi,_a,Xi,Gn,Pi,pi);else{var Vi=di.point;di.x=di.y=di.point=null,ei(di,Vi,Fi,oa,Xi,Gn,Pi,pi),ei(di,Ei,Hi,_a,Xi,Gn,Pi,pi)}else di.x=Hi,di.y=_a,di.point=Ei}else ei(di,Ei,Hi,_a,Xi,Gn,Pi,pi)}function ei(di,Ei,Hi,_a,Xi,Gn,Pi,pi){var Fi=(Xi+Pi)*.5,oa=(Gn+pi)*.5,Vi=Hi>=Fi,Oa=_a>=oa,Pa=Oa<<1|Vi;di.leaf=!1,di=di.nodes[Pa]||(di.nodes[Pa]=Xa()),Vi?Xi=Fi:Pi=Fi,Oa?Gn=oa:pi=oa,Kn(di,Ei,Hi,_a,Xi,Gn,Pi,pi)}var Ri=Xa();if(Ri.add=function(di){Kn(Ri,di,+br(di,++Ar),+wr(di,Ar),Yr,Qr,en,Xr)},Ri.visit=function(di){ks(di,Ri,Yr,Qr,en,Xr)},Ri.find=function(di){return bl(Ri,di[0],di[1],Yr,Qr,en,Xr)},Ar=-1,_t==null){for(;++Ar<zr;)Kn(Ri,ze[Ar],Hr[Ar],Jr[Ar],Yr,Qr,en,Xr);--Ar}else ze.forEach(Ri.add);return Hr=Jr=ze=Xe=null,Ri}return Ie.x=function(ze){return arguments.length?(ee=ze,Ie):ee},Ie.y=function(ze){return arguments.length?(xe=ze,Ie):xe},Ie.extent=function(ze){return arguments.length?(ze==null?_t=Lt=Ht=Wt=null:(_t=+ze[0][0],Lt=+ze[0][1],Ht=+ze[1][0],Wt=+ze[1][1]),Ie):_t==null?null:[[_t,Lt],[Ht,Wt]]},Ie.size=function(ze){return arguments.length?(ze==null?_t=Lt=Ht=Wt=null:(_t=Lt=0,Ht=+ze[0],Wt=+ze[1]),Ie):_t==null?null:[Ht-_t,Wt-Lt]},Ie};function Yl(lt){return lt.x}function Ea(lt){return lt.y}function Xa(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ks(lt,_t,Lt,Ht,Wt,ee){if(!lt(_t,Lt,Ht,Wt,ee)){var xe=(Lt+Wt)*.5,me=(Ht+ee)*.5,Ie=_t.nodes;Ie[0]&&ks(lt,Ie[0],Lt,Ht,xe,me),Ie[1]&&ks(lt,Ie[1],xe,Ht,Wt,me),Ie[2]&&ks(lt,Ie[2],Lt,me,xe,ee),Ie[3]&&ks(lt,Ie[3],xe,me,Wt,ee)}}function bl(lt,_t,Lt,Ht,Wt,ee,xe){var me=1/0,Ie;return function ze(Xe,br,wr,Hr,Jr){if(!(br>ee||wr>xe||Hr<Ht||Jr<Wt)){if(Ar=Xe.point){var Ar,zr=_t-Xe.x,Yr=Lt-Xe.y,Qr=zr*zr+Yr*Yr;if(Qr<me){var en=Math.sqrt(me=Qr);Ht=_t-en,Wt=Lt-en,ee=_t+en,xe=Lt+en,Ie=Ar}}for(var Xr=Xe.nodes,On=(br+Hr)*.5,Hn=(wr+Jr)*.5,ti=_t>=On,Yn=Lt>=Hn,Kn=Yn<<1|ti,ei=Kn+4;Kn<ei;++Kn)if(Xe=Xr[Kn&3])switch(Kn&3){case 0:ze(Xe,br,wr,On,Hn);break;case 1:ze(Xe,On,wr,Hr,Hn);break;case 2:ze(Xe,br,Hn,On,Jr);break;case 3:ze(Xe,On,Hn,Hr,Jr);break}}}(lt,Ht,Wt,ee,xe),Ie}i.interpolateRgb=ma;function ma(lt,_t){lt=i.rgb(lt),_t=i.rgb(_t);var Lt=lt.r,Ht=lt.g,Wt=lt.b,ee=_t.r-Lt,xe=_t.g-Ht,me=_t.b-Wt;return function(Ie){return"#"+cr(Math.round(Lt+ee*Ie))+cr(Math.round(Ht+xe*Ie))+cr(Math.round(Wt+me*Ie))}}i.interpolateObject=Ms;function Ms(lt,_t){var Lt={},Ht={},Wt;for(Wt in lt)Wt in _t?Lt[Wt]=Fa(lt[Wt],_t[Wt]):Ht[Wt]=lt[Wt];for(Wt in _t)Wt in lt||(Ht[Wt]=_t[Wt]);return function(ee){for(Wt in Lt)Ht[Wt]=Lt[Wt](ee);return Ht}}i.interpolateNumber=ba;function ba(lt,_t){return lt=+lt,_t=+_t,function(Lt){return lt*(1-Lt)+_t*Lt}}i.interpolateString=ka;function ka(lt,_t){var Lt=Ss.lastIndex=za.lastIndex=0,Ht,Wt,ee,xe=-1,me=[],Ie=[];for(lt=lt+"",_t=_t+"";(Ht=Ss.exec(lt))&&(Wt=za.exec(_t));)(ee=Wt.index)>Lt&&(ee=_t.slice(Lt,ee),me[xe]?me[xe]+=ee:me[++xe]=ee),(Ht=Ht[0])===(Wt=Wt[0])?me[xe]?me[xe]+=Wt:me[++xe]=Wt:(me[++xe]=null,Ie.push({i:xe,x:ba(Ht,Wt)})),Lt=za.lastIndex;return Lt<_t.length&&(ee=_t.slice(Lt),me[xe]?me[xe]+=ee:me[++xe]=ee),me.length<2?Ie[0]?(_t=Ie[0].x,function(ze){return _t(ze)+""}):function(){return _t}:(_t=Ie.length,function(ze){for(var Xe=0,br;Xe<_t;++Xe)me[(br=Ie[Xe]).i]=br.x(ze);return me.join("")})}var Ss=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,za=new RegExp(Ss.source,"g");i.interpolate=Fa;function Fa(lt,_t){for(var Lt=i.interpolators.length,Ht;--Lt>=0&&!(Ht=i.interpolators[Lt](lt,_t)););return Ht}i.interpolators=[function(lt,_t){var Lt=typeof _t;return(Lt==="string"?rn.has(_t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(_t)?ma:ka:_t instanceof Xt?ma:Array.isArray(_t)?so:Lt==="object"&&isNaN(_t)?Ms:ba)(lt,_t)}],i.interpolateArray=so;function so(lt,_t){var Lt=[],Ht=[],Wt=lt.length,ee=_t.length,xe=Math.min(lt.length,_t.length),me;for(me=0;me<xe;++me)Lt.push(Fa(lt[me],_t[me]));for(;me<Wt;++me)Ht[me]=lt[me];for(;me<ee;++me)Ht[me]=_t[me];return function(Ie){for(me=0;me<xe;++me)Ht[me]=Lt[me](Ie);return Ht}}var vu=function(){return F},Qa=i.map({linear:vu,poly:gu,quad:function(){return ts},cubic:function(){return Oo},sin:function(){return Ju},exp:function(){return _l},circle:function(){return $u},elastic:Qu,back:tc,bounce:function(){return Wl}}),Ku=i.map({in:F,out:La,"in-out":Hl,"out-in":function(lt){return Hl(La(lt))}});i.ease=function(lt){var _t=lt.indexOf("-"),Lt=_t>=0?lt.slice(0,_t):lt,Ht=_t>=0?lt.slice(_t+1):"in";return Lt=Qa.get(Lt)||vu,Ht=Ku.get(Ht)||F,Ro(Ht(Lt.apply(null,C.call(arguments,1))))};function Ro(lt){return function(_t){return _t<=0?0:_t>=1?1:lt(_t)}}function La(lt){return function(_t){return 1-lt(1-_t)}}function Hl(lt){return function(_t){return .5*(_t<.5?lt(2*_t):2-lt(2-2*_t))}}function ts(lt){return lt*lt}function Oo(lt){return lt*lt*lt}function Vl(lt){if(lt<=0)return 0;if(lt>=1)return 1;var _t=lt*lt,Lt=_t*lt;return 4*(lt<.5?Lt:3*(lt-_t)+Lt-.75)}function gu(lt){return function(_t){return Math.pow(_t,lt)}}function Ju(lt){return 1-Math.cos(lt*Gt)}function _l(lt){return Math.pow(2,10*(lt-1))}function $u(lt){return 1-Math.sqrt(1-lt*lt)}function Qu(lt,_t){var Lt;return arguments.length<2&&(_t=.45),arguments.length?Lt=_t/bt*Math.asin(1/lt):(lt=1,Lt=_t/4),function(Ht){return 1+lt*Math.pow(2,-10*Ht)*Math.sin((Ht-Lt)*bt/_t)}}function tc(lt){return lt||(lt=1.70158),function(_t){return _t*_t*((lt+1)*_t-lt)}}function Wl(lt){return lt<.36363636363636365?7.5625*lt*lt:lt<.7272727272727273?7.5625*(lt-=.5454545454545454)*lt+.75:lt<.9090909090909091?7.5625*(lt-=.8181818181818182)*lt+.9375:7.5625*(lt-=.9545454545454546)*lt+.984375}i.interpolateHcl=ec;function ec(lt,_t){lt=i.hcl(lt),_t=i.hcl(_t);var Lt=lt.h,Ht=lt.c,Wt=lt.l,ee=_t.h-Lt,xe=_t.c-Ht,me=_t.l-Wt;return isNaN(xe)&&(xe=0,Ht=isNaN(Ht)?_t.c:Ht),isNaN(ee)?(ee=0,Lt=isNaN(Lt)?_t.h:Lt):ee>180?ee-=360:ee<-180&&(ee+=360),function(Ie){return Re(Lt+ee*Ie,Ht+xe*Ie,Wt+me*Ie)+""}}i.interpolateHsl=rc;function rc(lt,_t){lt=i.hsl(lt),_t=i.hsl(_t);var Lt=lt.h,Ht=lt.s,Wt=lt.l,ee=_t.h-Lt,xe=_t.s-Ht,me=_t.l-Wt;return isNaN(xe)&&(xe=0,Ht=isNaN(Ht)?_t.s:Ht),isNaN(ee)?(ee=0,Lt=isNaN(Lt)?_t.h:Lt):ee>180?ee-=360:ee<-180&&(ee+=360),function(Ie){return ke(Lt+ee*Ie,Ht+xe*Ie,Wt+me*Ie)+""}}i.interpolateLab=mu;function mu(lt,_t){lt=i.lab(lt),_t=i.lab(_t);var Lt=lt.l,Ht=lt.a,Wt=lt.b,ee=_t.l-Lt,xe=_t.a-Ht,me=_t.b-Wt;return function(Ie){return Ut(Lt+ee*Ie,Ht+xe*Ie,Wt+me*Ie)+""}}i.interpolateRound=yu;function yu(lt,_t){return _t-=lt,function(Lt){return Math.round(lt+_t*Lt)}}i.transform=function(lt){var _t=v.createElementNS(i.ns.prefix.svg,"g");return(i.transform=function(Lt){if(Lt!=null){_t.setAttribute("transform",Lt);var Ht=_t.transform.baseVal.consolidate()}return new ps(Ht?Ht.matrix:xu)})(lt)};function ps(lt){var _t=[lt.a,lt.b],Lt=[lt.c,lt.d],Ht=Ws(_t),Wt=Cs(_t,Lt),ee=Ws(Xs(Lt,_t,-Wt))||0;_t[0]*Lt[1]<Lt[0]*_t[1]&&(_t[0]*=-1,_t[1]*=-1,Ht*=-1,Wt*=-1),this.rotate=(Ht?Math.atan2(_t[1],_t[0]):Math.atan2(-Lt[0],Lt[1]))*ne,this.translate=[lt.e,lt.f],this.scale=[Ht,ee],this.skew=ee?Math.atan2(Wt,ee)*ne:0}ps.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Cs(lt,_t){return lt[0]*_t[0]+lt[1]*_t[1]}function Ws(lt){var _t=Math.sqrt(Cs(lt,lt));return _t&&(lt[0]/=_t,lt[1]/=_t),_t}function Xs(lt,_t,Lt){return lt[0]+=Lt*_t[0],lt[1]+=Lt*_t[1],lt}var xu={a:1,b:0,c:0,d:1,e:0,f:0};i.interpolateTransform=Al;function jo(lt){return lt.length?lt.pop()+",":""}function nc(lt,_t,Lt,Ht){if(lt[0]!==_t[0]||lt[1]!==_t[1]){var Wt=Lt.push("translate(",null,",",null,")");Ht.push({i:Wt-4,x:ba(lt[0],_t[0])},{i:Wt-2,x:ba(lt[1],_t[1])})}else(_t[0]||_t[1])&&Lt.push("translate("+_t+")")}function wl(lt,_t,Lt,Ht){lt!==_t?(lt-_t>180?_t+=360:_t-lt>180&&(lt+=360),Ht.push({i:Lt.push(jo(Lt)+"rotate(",null,")")-2,x:ba(lt,_t)})):_t&&Lt.push(jo(Lt)+"rotate("+_t+")")}function bu(lt,_t,Lt,Ht){lt!==_t?Ht.push({i:Lt.push(jo(Lt)+"skewX(",null,")")-2,x:ba(lt,_t)}):_t&&Lt.push(jo(Lt)+"skewX("+_t+")")}function _u(lt,_t,Lt,Ht){if(lt[0]!==_t[0]||lt[1]!==_t[1]){var Wt=Lt.push(jo(Lt)+"scale(",null,",",null,")");Ht.push({i:Wt-4,x:ba(lt[0],_t[0])},{i:Wt-2,x:ba(lt[1],_t[1])})}else(_t[0]!==1||_t[1]!==1)&&Lt.push(jo(Lt)+"scale("+_t+")")}function Al(lt,_t){var Lt=[],Ht=[];return lt=i.transform(lt),_t=i.transform(_t),nc(lt.translate,_t.translate,Lt,Ht),wl(lt.rotate,_t.rotate,Lt,Ht),bu(lt.skew,_t.skew,Lt,Ht),_u(lt.scale,_t.scale,Lt,Ht),lt=_t=null,function(Wt){for(var ee=-1,xe=Ht.length,me;++ee<xe;)Lt[(me=Ht[ee]).i]=me.x(Wt);return Lt.join("")}}function yo(lt,_t){return _t=(_t-=lt=+lt)||1/_t,function(Lt){return(Lt-lt)/_t}}function Es(lt,_t){return _t=(_t-=lt=+lt)||1/_t,function(Lt){return Math.max(0,Math.min(1,(Lt-lt)/_t))}}i.layout={},i.layout.bundle=function(){return function(lt){for(var _t=[],Lt=-1,Ht=lt.length;++Lt<Ht;)_t.push(ds(lt[Lt]));return _t}};function ds(lt){for(var _t=lt.source,Lt=lt.target,Ht=es(_t,Lt),Wt=[_t];_t!==Ht;)_t=_t.parent,Wt.push(_t);for(var ee=Wt.length;Lt!==Ht;)Wt.splice(ee,0,Lt),Lt=Lt.parent;return Wt}function Zs(lt){for(var _t=[],Lt=lt.parent;Lt!=null;)_t.push(lt),lt=Lt,Lt=Lt.parent;return _t.push(lt),_t}function es(lt,_t){if(lt===_t)return lt;for(var Lt=Zs(lt),Ht=Zs(_t),Wt=Lt.pop(),ee=Ht.pop(),xe=null;Wt===ee;)xe=Wt,Wt=Lt.pop(),ee=Ht.pop();return xe}i.layout.chord=function(){var lt={},_t,Lt,Ht,Wt,ee=0,xe,me,Ie;function ze(){var br={},wr=[],Hr=i.range(Wt),Jr=[],Ar,zr,Yr,Qr,en;for(_t=[],Lt=[],Ar=0,Qr=-1;++Qr<Wt;){for(zr=0,en=-1;++en<Wt;)zr+=Ht[Qr][en];wr.push(zr),Jr.push(i.range(Wt)),Ar+=zr}for(xe&&Hr.sort(function(Ri,di){return xe(wr[Ri],wr[di])}),me&&Jr.forEach(function(Ri,di){Ri.sort(function(Ei,Hi){return me(Ht[di][Ei],Ht[di][Hi])})}),Ar=(bt-ee*Wt)/Ar,zr=0,Qr=-1;++Qr<Wt;){for(Yr=zr,en=-1;++en<Wt;){var Xr=Hr[Qr],On=Jr[Xr][en],Hn=Ht[Xr][On],ti=zr,Yn=zr+=Hn*Ar;br[Xr+"-"+On]={index:Xr,subindex:On,startAngle:ti,endAngle:Yn,value:Hn}}Lt[Xr]={index:Xr,startAngle:Yr,endAngle:zr,value:wr[Xr]},zr+=ee}for(Qr=-1;++Qr<Wt;)for(en=Qr-1;++en<Wt;){var Kn=br[Qr+"-"+en],ei=br[en+"-"+Qr];(Kn.value||ei.value)&&_t.push(Kn.value<ei.value?{source:ei,target:Kn}:{source:Kn,target:ei})}Ie&&Xe()}function Xe(){_t.sort(function(br,wr){return Ie((br.source.value+br.target.value)/2,(wr.source.value+wr.target.value)/2)})}return lt.matrix=function(br){return arguments.length?(Wt=(Ht=br)&&Ht.length,_t=Lt=null,lt):Ht},lt.padding=function(br){return arguments.length?(ee=br,_t=Lt=null,lt):ee},lt.sortGroups=function(br){return arguments.length?(xe=br,_t=Lt=null,lt):xe},lt.sortSubgroups=function(br){return arguments.length?(me=br,_t=null,lt):me},lt.sortChords=function(br){return arguments.length?(Ie=br,_t&&Xe(),lt):Ie},lt.chords=function(){return _t||ze(),_t},lt.groups=function(){return Lt||ze(),Lt},lt},i.layout.force=function(){var lt={},_t=i.dispatch("start","tick","end"),Lt,Ht=[1,1],Wt,ee,xe=.9,me=Zl,Ie=ic,ze=-30,Xe=Tl,br=.1,wr=.64,Hr=[],Jr=[],Ar,zr,Yr;function Qr(Xr){return function(On,Hn,ti,Yn){if(On.point!==Xr){var Kn=On.cx-Xr.x,ei=On.cy-Xr.y,Ri=Yn-Hn,di=Kn*Kn+ei*ei;if(Ri*Ri/wr<di){if(di<Xe){var Ei=On.charge/di;Xr.px-=Kn*Ei,Xr.py-=ei*Ei}return!0}if(On.point&&di&&di<Xe){var Ei=On.pointCharge/di;Xr.px-=Kn*Ei,Xr.py-=ei*Ei}}return!On.charge}}lt.tick=function(){if((ee*=.99)<.005)return Lt=null,_t.end({type:"end",alpha:ee=0}),!0;var Xr=Hr.length,On=Jr.length,Hn,ti,Yn,Kn,ei,Ri,di,Ei,Hi;for(ti=0;ti<On;++ti)Yn=Jr[ti],Kn=Yn.source,ei=Yn.target,Ei=ei.x-Kn.x,Hi=ei.y-Kn.y,(Ri=Ei*Ei+Hi*Hi)&&(Ri=ee*zr[ti]*((Ri=Math.sqrt(Ri))-Ar[ti])/Ri,Ei*=Ri,Hi*=Ri,ei.x-=Ei*(di=Kn.weight+ei.weight?Kn.weight/(Kn.weight+ei.weight):.5),ei.y-=Hi*di,Kn.x+=Ei*(di=1-di),Kn.y+=Hi*di);if((di=ee*br)&&(Ei=Ht[0]/2,Hi=Ht[1]/2,ti=-1,di))for(;++ti<Xr;)Yn=Hr[ti],Yn.x+=(Ei-Yn.x)*di,Yn.y+=(Hi-Yn.y)*di;if(ze)for(va(Hn=i.geom.quadtree(Hr),ee,Yr),ti=-1;++ti<Xr;)(Yn=Hr[ti]).fixed||Hn.visit(Qr(Yn));for(ti=-1;++ti<Xr;)Yn=Hr[ti],Yn.fixed?(Yn.x=Yn.px,Yn.y=Yn.py):(Yn.x-=(Yn.px-(Yn.px=Yn.x))*xe,Yn.y-=(Yn.py-(Yn.py=Yn.y))*xe);_t.tick({type:"tick",alpha:ee})},lt.nodes=function(Xr){return arguments.length?(Hr=Xr,lt):Hr},lt.links=function(Xr){return arguments.length?(Jr=Xr,lt):Jr},lt.size=function(Xr){return arguments.length?(Ht=Xr,lt):Ht},lt.linkDistance=function(Xr){return arguments.length?(me=typeof Xr=="function"?Xr:+Xr,lt):me},lt.distance=lt.linkDistance,lt.linkStrength=function(Xr){return arguments.length?(Ie=typeof Xr=="function"?Xr:+Xr,lt):Ie},lt.friction=function(Xr){return arguments.length?(xe=+Xr,lt):xe},lt.charge=function(Xr){return arguments.length?(ze=typeof Xr=="function"?Xr:+Xr,lt):ze},lt.chargeDistance=function(Xr){return arguments.length?(Xe=Xr*Xr,lt):Math.sqrt(Xe)},lt.gravity=function(Xr){return arguments.length?(br=+Xr,lt):br},lt.theta=function(Xr){return arguments.length?(wr=Xr*Xr,lt):Math.sqrt(wr)},lt.alpha=function(Xr){return arguments.length?(Xr=+Xr,ee?Xr>0?ee=Xr:(Lt.c=null,Lt.t=NaN,Lt=null,_t.end({type:"end",alpha:ee=0})):Xr>0&&(_t.start({type:"start",alpha:ee=Xr}),Lt=In(lt.tick)),lt):ee},lt.start=function(){var Xr,On=Hr.length,Hn=Jr.length,ti=Ht[0],Yn=Ht[1],Kn,ei;for(Xr=0;Xr<On;++Xr)(ei=Hr[Xr]).index=Xr,ei.weight=0;for(Xr=0;Xr<Hn;++Xr)ei=Jr[Xr],typeof ei.source=="number"&&(ei.source=Hr[ei.source]),typeof ei.target=="number"&&(ei.target=Hr[ei.target]),++ei.source.weight,++ei.target.weight;for(Xr=0;Xr<On;++Xr)ei=Hr[Xr],isNaN(ei.x)&&(ei.x=Ri("x",ti)),isNaN(ei.y)&&(ei.y=Ri("y",Yn)),isNaN(ei.px)&&(ei.px=ei.x),isNaN(ei.py)&&(ei.py=ei.y);if(Ar=[],typeof me=="function")for(Xr=0;Xr<Hn;++Xr)Ar[Xr]=+me.call(this,Jr[Xr],Xr);else for(Xr=0;Xr<Hn;++Xr)Ar[Xr]=me;if(zr=[],typeof Ie=="function")for(Xr=0;Xr<Hn;++Xr)zr[Xr]=+Ie.call(this,Jr[Xr],Xr);else for(Xr=0;Xr<Hn;++Xr)zr[Xr]=Ie;if(Yr=[],typeof ze=="function")for(Xr=0;Xr<On;++Xr)Yr[Xr]=+ze.call(this,Hr[Xr],Xr);else for(Xr=0;Xr<On;++Xr)Yr[Xr]=ze;function Ri(di,Ei){if(!Kn){for(Kn=new Array(On),Xi=0;Xi<On;++Xi)Kn[Xi]=[];for(Xi=0;Xi<Hn;++Xi){var Hi=Jr[Xi];Kn[Hi.source.index].push(Hi.target),Kn[Hi.target.index].push(Hi.source)}}for(var _a=Kn[Xr],Xi=-1,Gn=_a.length,Pi;++Xi<Gn;)if(!isNaN(Pi=_a[Xi][di]))return Pi;return Math.random()*Ei}return lt.resume()},lt.resume=function(){return lt.alpha(.1)},lt.stop=function(){return lt.alpha(0)},lt.drag=function(){if(Wt||(Wt=i.behavior.drag().origin(F).on("dragstart.force",Po).on("drag.force",en).on("dragend.force",Xl)),!arguments.length)return Wt;this.on("mouseover.force",Ls).on("mouseout.force",xo).call(Wt)};function en(Xr){Xr.px=i.event.x,Xr.py=i.event.y,lt.resume()}return i.rebind(lt,_t,"on")};function Po(lt){lt.fixed|=2}function Xl(lt){lt.fixed&=-7}function Ls(lt){lt.fixed|=4,lt.px=lt.x,lt.py=lt.y}function xo(lt){lt.fixed&=-5}function va(lt,_t,Lt){var Ht=0,Wt=0;if(lt.charge=0,!lt.leaf)for(var ee=lt.nodes,xe=ee.length,me=-1,Ie;++me<xe;)Ie=ee[me],Ie!=null&&(va(Ie,_t,Lt),lt.charge+=Ie.charge,Ht+=Ie.charge*Ie.cx,Wt+=Ie.charge*Ie.cy);if(lt.point){lt.leaf||(lt.point.x+=Math.random()-.5,lt.point.y+=Math.random()-.5);var ze=_t*Lt[lt.point.index];lt.charge+=lt.pointCharge=ze,Ht+=ze*lt.point.x,Wt+=ze*lt.point.y}lt.cx=Ht/lt.charge,lt.cy=Wt/lt.charge}var Zl=20,ic=1,Tl=1/0;i.layout.hierarchy=function(){var lt=Ml,_t=kl,Lt=Ps;function Ht(Wt){var ee=[Wt],xe=[],me;for(Wt.depth=0;(me=ee.pop())!=null;)if(xe.push(me),(ze=_t.call(Ht,me,me.depth))&&(Ie=ze.length)){for(var Ie,ze,Xe;--Ie>=0;)ee.push(Xe=ze[Ie]),Xe.parent=me,Xe.depth=me.depth+1;Lt&&(me.value=0),me.children=ze}else Lt&&(me.value=+Lt.call(Ht,me,me.depth)||0),delete me.children;return to(Wt,function(br){var wr,Hr;lt&&(wr=br.children)&&wr.sort(lt),Lt&&(Hr=br.parent)&&(Hr.value+=br.value)}),xe}return Ht.sort=function(Wt){return arguments.length?(lt=Wt,Ht):lt},Ht.children=function(Wt){return arguments.length?(_t=Wt,Ht):_t},Ht.value=function(Wt){return arguments.length?(Lt=Wt,Ht):Lt},Ht.revalue=function(Wt){return Lt&&(Os(Wt,function(ee){ee.children&&(ee.value=0)}),to(Wt,function(ee){var xe;ee.children||(ee.value=+Lt.call(Ht,ee,ee.depth)||0),(xe=ee.parent)&&(xe.value+=ee.value)})),Wt},Ht};function Rs(lt,_t){return i.rebind(lt,_t,"sort","children","value"),lt.nodes=lt,lt.links=ac,lt}function Os(lt,_t){for(var Lt=[lt];(lt=Lt.pop())!=null;)if(_t(lt),(Wt=lt.children)&&(Ht=Wt.length))for(var Ht,Wt;--Ht>=0;)Lt.push(Wt[Ht])}function to(lt,_t){for(var Lt=[lt],Ht=[];(lt=Lt.pop())!=null;)if(Ht.push(lt),(xe=lt.children)&&(ee=xe.length))for(var Wt=-1,ee,xe;++Wt<ee;)Lt.push(xe[Wt]);for(;(lt=Ht.pop())!=null;)_t(lt)}function kl(lt){return lt.children}function Ps(lt){return lt.value}function Ml(lt,_t){return _t.value-lt.value}function ac(lt){return i.merge(lt.map(function(_t){return(_t.children||[]).map(function(Lt){return{source:_t,target:Lt}})}))}i.layout.partition=function(){var lt=i.layout.hierarchy(),_t=[1,1];function Lt(ee,xe,me,Ie){var ze=ee.children;if(ee.x=xe,ee.y=ee.depth*Ie,ee.dx=me,ee.dy=Ie,ze&&(br=ze.length)){var Xe=-1,br,wr,Hr;for(me=ee.value?me/ee.value:0;++Xe<br;)Lt(wr=ze[Xe],xe,Hr=wr.value*me,Ie),xe+=Hr}}function Ht(ee){var xe=ee.children,me=0;if(xe&&(ze=xe.length))for(var Ie=-1,ze;++Ie<ze;)me=Math.max(me,Ht(xe[Ie]));return 1+me}function Wt(ee,xe){var me=lt.call(this,ee,xe);return Lt(me[0],0,_t[0],_t[1]/Ht(me[0])),me}return Wt.size=function(ee){return arguments.length?(_t=ee,Wt):_t},Rs(Wt,lt)},i.layout.pie=function(){var lt=Number,_t=wu,Lt=0,Ht=bt,Wt=0;function ee(xe){var me=xe.length,Ie=xe.map(function(Qr,en){return+lt.call(ee,Qr,en)}),ze=+(typeof Lt=="function"?Lt.apply(this,arguments):Lt),Xe=(typeof Ht=="function"?Ht.apply(this,arguments):Ht)-ze,br=Math.min(Math.abs(Xe)/me,+(typeof Wt=="function"?Wt.apply(this,arguments):Wt)),wr=br*(Xe<0?-1:1),Hr=i.sum(Ie),Jr=Hr?(Xe-me*wr)/Hr:0,Ar=i.range(me),zr=[],Yr;return _t!=null&&Ar.sort(_t===wu?function(Qr,en){return Ie[en]-Ie[Qr]}:function(Qr,en){return _t(xe[Qr],xe[en])}),Ar.forEach(function(Qr){zr[Qr]={data:xe[Qr],value:Yr=Ie[Qr],startAngle:ze,endAngle:ze+=Yr*Jr+wr,padAngle:br}}),zr}return ee.value=function(xe){return arguments.length?(lt=xe,ee):lt},ee.sort=function(xe){return arguments.length?(_t=xe,ee):_t},ee.startAngle=function(xe){return arguments.length?(Lt=xe,ee):Lt},ee.endAngle=function(xe){return arguments.length?(Ht=xe,ee):Ht},ee.padAngle=function(xe){return arguments.length?(Wt=xe,ee):Wt},ee};var wu={};i.layout.stack=function(){var lt=F,_t=Ks,Lt=Cl,Ht=$l,Wt=Kl,ee=Jl;function xe(me,Ie){if(!(Jr=me.length))return me;var ze=me.map(function(Qr,en){return lt.call(xe,Qr,en)}),Xe=ze.map(function(Qr){return Qr.map(function(en,Xr){return[Wt.call(xe,en,Xr),ee.call(xe,en,Xr)]})}),br=_t.call(xe,Xe,Ie);ze=i.permute(ze,br),Xe=i.permute(Xe,br);var wr=Lt.call(xe,Xe,Ie),Hr=ze[0].length,Jr,Ar,zr,Yr;for(zr=0;zr<Hr;++zr)for(Ht.call(xe,ze[0][zr],Yr=wr[zr],Xe[0][zr][1]),Ar=1;Ar<Jr;++Ar)Ht.call(xe,ze[Ar][zr],Yr+=Xe[Ar-1][zr][1],Xe[Ar][zr][1]);return me}return xe.values=function(me){return arguments.length?(lt=me,xe):lt},xe.order=function(me){return arguments.length?(_t=typeof me=="function"?me:Is.get(me)||Ks,xe):_t},xe.offset=function(me){return arguments.length?(Lt=typeof me=="function"?me:Sl.get(me)||Cl,xe):Lt},xe.x=function(me){return arguments.length?(Wt=me,xe):Wt},xe.y=function(me){return arguments.length?(ee=me,xe):ee},xe.out=function(me){return arguments.length?(Ht=me,xe):Ht},xe};function Kl(lt){return lt.x}function Jl(lt){return lt.y}function $l(lt,_t,Lt){lt.y0=_t,lt.y=Lt}var Is=i.map({"inside-out":function(lt){var _t=lt.length,Lt,Ht,Wt=lt.map(ea),ee=lt.map(Au),xe=i.range(_t).sort(function(br,wr){return Wt[br]-Wt[wr]}),me=0,Ie=0,ze=[],Xe=[];for(Lt=0;Lt<_t;++Lt)Ht=xe[Lt],me<Ie?(me+=ee[Ht],ze.push(Ht)):(Ie+=ee[Ht],Xe.push(Ht));return Xe.reverse().concat(ze)},reverse:function(lt){return i.range(lt.length).reverse()},default:Ks}),Sl=i.map({silhouette:function(lt){var _t=lt.length,Lt=lt[0].length,Ht=[],Wt=0,ee,xe,me,Ie=[];for(xe=0;xe<Lt;++xe){for(ee=0,me=0;ee<_t;ee++)me+=lt[ee][xe][1];me>Wt&&(Wt=me),Ht.push(me)}for(xe=0;xe<Lt;++xe)Ie[xe]=(Wt-Ht[xe])/2;return Ie},wiggle:function(lt){var _t=lt.length,Lt=lt[0],Ht=Lt.length,Wt,ee,xe,me,Ie,ze,Xe,br,wr,Hr=[];for(Hr[0]=br=wr=0,ee=1;ee<Ht;++ee){for(Wt=0,me=0;Wt<_t;++Wt)me+=lt[Wt][ee][1];for(Wt=0,Ie=0,Xe=Lt[ee][0]-Lt[ee-1][0];Wt<_t;++Wt){for(xe=0,ze=(lt[Wt][ee][1]-lt[Wt][ee-1][1])/(2*Xe);xe<Wt;++xe)ze+=(lt[xe][ee][1]-lt[xe][ee-1][1])/Xe;Ie+=ze*lt[Wt][ee][1]}Hr[ee]=br-=me?Ie/me*Xe:0,br<wr&&(wr=br)}for(ee=0;ee<Ht;++ee)Hr[ee]-=wr;return Hr},expand:function(lt){var _t=lt.length,Lt=lt[0].length,Ht=1/_t,Wt,ee,xe,me=[];for(ee=0;ee<Lt;++ee){for(Wt=0,xe=0;Wt<_t;Wt++)xe+=lt[Wt][ee][1];if(xe)for(Wt=0;Wt<_t;Wt++)lt[Wt][ee][1]/=xe;else for(Wt=0;Wt<_t;Wt++)lt[Wt][ee][1]=Ht}for(ee=0;ee<Lt;++ee)me[ee]=0;return me},zero:Cl});function Ks(lt){return i.range(lt.length)}function Cl(lt){for(var _t=-1,Lt=lt[0].length,Ht=[];++_t<Lt;)Ht[_t]=0;return Ht}function ea(lt){for(var _t=1,Lt=0,Ht=lt[0][1],Wt,ee=lt.length;_t<ee;++_t)(Wt=lt[_t][1])>Ht&&(Lt=_t,Ht=Wt);return Lt}function Au(lt){return lt.reduce(bo,0)}function bo(lt,_t){return lt+_t[1]}i.layout.histogram=function(){var lt=!0,_t=Number,Lt=vs,Ht=Tu;function Wt(ee,xe){for(var me=[],Ie=ee.map(_t,this),ze=Lt.call(this,Ie,xe),Xe=Ht.call(this,ze,Ie,xe),br,xe=-1,wr=Ie.length,Hr=Xe.length-1,Jr=lt?1:1/wr,Ar;++xe<Hr;)br=me[xe]=[],br.dx=Xe[xe+1]-(br.x=Xe[xe]),br.y=0;if(Hr>0)for(xe=-1;++xe<wr;)Ar=Ie[xe],Ar>=ze[0]&&Ar<=ze[1]&&(br=me[i.bisect(Xe,Ar,1,Hr)-1],br.y+=Jr,br.push(ee[xe]));return me}return Wt.value=function(ee){return arguments.length?(_t=ee,Wt):_t},Wt.range=function(ee){return arguments.length?(Lt=Ur(ee),Wt):Lt},Wt.bins=function(ee){return arguments.length?(Ht=typeof ee=="number"?function(xe){return Ql(xe,ee)}:Ur(ee),Wt):Ht},Wt.frequency=function(ee){return arguments.length?(lt=!!ee,Wt):lt},Wt};function Tu(lt,_t){return Ql(lt,Math.ceil(Math.log(_t.length)/Math.LN2+1))}function Ql(lt,_t){for(var Lt=-1,Ht=+lt[0],Wt=(lt[1]-Ht)/_t,ee=[];++Lt<=_t;)ee[Lt]=Wt*Lt+Ht;return ee}function vs(lt){return[i.min(lt),i.max(lt)]}i.layout.pack=function(){var lt=i.layout.hierarchy().sort(rs),_t=0,Lt=[1,1],Ht;function Wt(ee,xe){var me=lt.call(this,ee,xe),Ie=me[0],ze=Lt[0],Xe=Lt[1],br=Ht==null?Math.sqrt:typeof Ht=="function"?Ht:function(){return Ht};if(Ie.x=Ie.y=0,to(Ie,function(Hr){Hr.r=+br(Hr.value)}),to(Ie,_o),_t){var wr=_t*(Ht?1:Math.max(2*Ie.r/ze,2*Ie.r/Xe))/2;to(Ie,function(Hr){Hr.r+=wr}),to(Ie,_o),to(Ie,function(Hr){Hr.r-=wr})}return ns(Ie,ze/2,Xe/2,Ht?1:1/Math.max(2*Ie.r/ze,2*Ie.r/Xe)),me}return Wt.size=function(ee){return arguments.length?(Lt=ee,Wt):Lt},Wt.radius=function(ee){return arguments.length?(Ht=ee==null||typeof ee=="function"?ee:+ee,Wt):Ht},Wt.padding=function(ee){return arguments.length?(_t=+ee,Wt):_t},Rs(Wt,lt)};function rs(lt,_t){return lt.value-_t.value}function El(lt,_t){var Lt=lt._pack_next;lt._pack_next=_t,_t._pack_prev=lt,_t._pack_next=Lt,Lt._pack_prev=_t}function ya(lt,_t){lt._pack_next=_t,_t._pack_prev=lt}function Js(lt,_t){var Lt=_t.x-lt.x,Ht=_t.y-lt.y,Wt=lt.r+_t.r;return .999*Wt*Wt>Lt*Lt+Ht*Ht}function _o(lt){if(!(_t=lt.children)||!(wr=_t.length))return;var _t,Lt=1/0,Ht=-1/0,Wt=1/0,ee=-1/0,xe,me,Ie,ze,Xe,br,wr;function Hr(Xr){Lt=Math.min(Xr.x-Xr.r,Lt),Ht=Math.max(Xr.x+Xr.r,Ht),Wt=Math.min(Xr.y-Xr.r,Wt),ee=Math.max(Xr.y+Xr.r,ee)}if(_t.forEach(Uo),xe=_t[0],xe.x=-xe.r,xe.y=0,Hr(xe),wr>1&&(me=_t[1],me.x=me.r,me.y=0,Hr(me),wr>2))for(Ie=_t[2],wo(xe,me,Ie),Hr(Ie),El(xe,Ie),xe._pack_prev=Ie,El(Ie,me),me=xe._pack_next,ze=3;ze<wr;ze++){wo(xe,me,Ie=_t[ze]);var Jr=0,Ar=1,zr=1;for(Xe=me._pack_next;Xe!==me;Xe=Xe._pack_next,Ar++)if(Js(Xe,Ie)){Jr=1;break}if(Jr==1)for(br=xe._pack_prev;br!==Xe._pack_prev&&!Js(br,Ie);br=br._pack_prev,zr++);Jr?(Ar<zr||Ar==zr&&me.r<xe.r?ya(xe,me=Xe):ya(xe=br,me),ze--):(El(xe,Ie),me=Ie,Hr(Ie))}var Yr=(Lt+Ht)/2,Qr=(Wt+ee)/2,en=0;for(ze=0;ze<wr;ze++)Ie=_t[ze],Ie.x-=Yr,Ie.y-=Qr,en=Math.max(en,Ie.r+Math.sqrt(Ie.x*Ie.x+Ie.y*Ie.y));lt.r=en,_t.forEach(gs)}function Uo(lt){lt._pack_next=lt._pack_prev=lt}function gs(lt){delete lt._pack_next,delete lt._pack_prev}function ns(lt,_t,Lt,Ht){var Wt=lt.children;if(lt.x=_t+=Ht*lt.x,lt.y=Lt+=Ht*lt.y,lt.r*=Ht,Wt)for(var ee=-1,xe=Wt.length;++ee<xe;)ns(Wt[ee],_t,Lt,Ht)}function wo(lt,_t,Lt){var Ht=lt.r+Lt.r,Wt=_t.x-lt.x,ee=_t.y-lt.y;if(Ht&&(Wt||ee)){var xe=_t.r+Lt.r,me=Wt*Wt+ee*ee;xe*=xe,Ht*=Ht;var Ie=.5+(Ht-xe)/(2*me),ze=Math.sqrt(Math.max(0,2*xe*(Ht+me)-(Ht-=me)*Ht-xe*xe))/(2*me);Lt.x=lt.x+Ie*Wt+ze*ee,Lt.y=lt.y+Ie*ee-ze*Wt}else Lt.x=lt.x+Ht,Lt.y=lt.y}i.layout.tree=function(){var lt=i.layout.hierarchy().sort(null).value(null),_t=qo,Lt=[1,1],Ht=null;function Wt(Xe,br){var wr=lt.call(this,Xe,br),Hr=wr[0],Jr=ee(Hr);if(to(Jr,xe),Jr.parent.m=-Jr.z,Os(Jr,me),Ht)Os(Hr,ze);else{var Ar=Hr,zr=Hr,Yr=Hr;Os(Hr,function(On){On.x<Ar.x&&(Ar=On),On.x>zr.x&&(zr=On),On.depth>Yr.depth&&(Yr=On)});var Qr=_t(Ar,zr)/2-Ar.x,en=Lt[0]/(zr.x+_t(zr,Ar)/2+Qr),Xr=Lt[1]/(Yr.depth||1);Os(Hr,function(On){On.x=(On.x+Qr)*en,On.y=On.depth*Xr})}return wr}function ee(Xe){for(var br={A:null,children:[Xe]},wr=[br],Hr;(Hr=wr.pop())!=null;)for(var Jr=Hr.children,Ar,zr=0,Yr=Jr.length;zr<Yr;++zr)wr.push((Jr[zr]=Ar={_:Jr[zr],parent:Hr,children:(Ar=Jr[zr].children)&&Ar.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:zr}).a=Ar);return br.children[0]}function xe(Xe){var br=Xe.children,wr=Xe.parent.children,Hr=Xe.i?wr[Xe.i-1]:null;if(br.length){oc(Xe);var Jr=(br[0].z+br[br.length-1].z)/2;Hr?(Xe.z=Hr.z+_t(Xe._,Hr._),Xe.m=Xe.z-Jr):Xe.z=Jr}else Hr&&(Xe.z=Hr.z+_t(Xe._,Hr._));Xe.parent.A=Ie(Xe,Hr,Xe.parent.A||wr[0])}function me(Xe){Xe._.x=Xe.z+Xe.parent.m,Xe.m+=Xe.parent.m}function Ie(Xe,br,wr){if(br){for(var Hr=Xe,Jr=Xe,Ar=br,zr=Hr.parent.children[0],Yr=Hr.m,Qr=Jr.m,en=Ar.m,Xr=zr.m,On;Ar=fo(Ar),Hr=Ao(Hr),Ar&&Hr;)zr=Ao(zr),Jr=fo(Jr),Jr.a=Xe,On=Ar.z+en-Hr.z-Yr+_t(Ar._,Hr._),On>0&&($s(sc(Ar,Xe,wr),Xe,On),Yr+=On,Qr+=On),en+=Ar.m,Yr+=Hr.m,Xr+=zr.m,Qr+=Jr.m;Ar&&!fo(Jr)&&(Jr.t=Ar,Jr.m+=en-Qr),Hr&&!Ao(zr)&&(zr.t=Hr,zr.m+=Yr-Xr,wr=Xe)}return wr}function ze(Xe){Xe.x*=Lt[0],Xe.y=Xe.depth*Lt[1]}return Wt.separation=function(Xe){return arguments.length?(_t=Xe,Wt):_t},Wt.size=function(Xe){return arguments.length?(Ht=(Lt=Xe)==null?ze:null,Wt):Ht?null:Lt},Wt.nodeSize=function(Xe){return arguments.length?(Ht=(Lt=Xe)==null?null:ze,Wt):Ht?Lt:null},Rs(Wt,lt)};function qo(lt,_t){return lt.parent==_t.parent?1:2}function Ao(lt){var _t=lt.children;return _t.length?_t[0]:lt.t}function fo(lt){var _t=lt.children,Lt;return(Lt=_t.length)?_t[Lt-1]:lt.t}function $s(lt,_t,Lt){var Ht=Lt/(_t.i-lt.i);_t.c-=Ht,_t.s+=Lt,lt.c+=Ht,_t.z+=Lt,_t.m+=Lt}function oc(lt){for(var _t=0,Lt=0,Ht=lt.children,Wt=Ht.length,ee;--Wt>=0;)ee=Ht[Wt],ee.z+=_t,ee.m+=_t,_t+=ee.s+(Lt+=ee.c)}function sc(lt,_t,Lt){return lt.a.parent===_t.parent?lt.a:Lt}i.layout.cluster=function(){var lt=i.layout.hierarchy().sort(null).value(null),_t=qo,Lt=[1,1],Ht=!1;function Wt(ee,xe){var me=lt.call(this,ee,xe),Ie=me[0],ze,Xe=0;to(Ie,function(Ar){var zr=Ar.children;zr&&zr.length?(Ar.x=uc(zr),Ar.y=lc(zr)):(Ar.x=ze?Xe+=_t(Ar,ze):0,Ar.y=0,ze=Ar)});var br=tu(Ie),wr=ku(Ie),Hr=br.x-_t(br,wr)/2,Jr=wr.x+_t(wr,br)/2;return to(Ie,Ht?function(Ar){Ar.x=(Ar.x-Ie.x)*Lt[0],Ar.y=(Ie.y-Ar.y)*Lt[1]}:function(Ar){Ar.x=(Ar.x-Hr)/(Jr-Hr)*Lt[0],Ar.y=(1-(Ie.y?Ar.y/Ie.y:1))*Lt[1]}),me}return Wt.separation=function(ee){return arguments.length?(_t=ee,Wt):_t},Wt.size=function(ee){return arguments.length?(Ht=(Lt=ee)==null,Wt):Ht?null:Lt},Wt.nodeSize=function(ee){return arguments.length?(Ht=(Lt=ee)!=null,Wt):Ht?Lt:null},Rs(Wt,lt)};function lc(lt){return 1+i.max(lt,function(_t){return _t.y})}function uc(lt){return lt.reduce(function(_t,Lt){return _t+Lt.x},0)/lt.length}function tu(lt){var _t=lt.children;return _t&&_t.length?tu(_t[0]):lt}function ku(lt){var _t=lt.children,Lt;return _t&&(Lt=_t.length)?ku(_t[Lt-1]):lt}i.layout.treemap=function(){var lt=i.layout.hierarchy(),_t=Math.round,Lt=[1,1],Ht=null,Wt=zs,ee=!1,xe,me="squarify",Ie=.5*(1+Math.sqrt(5));function ze(Ar,zr){for(var Yr=-1,Qr=Ar.length,en,Xr;++Yr<Qr;)Xr=(en=Ar[Yr]).value*(zr<0?0:zr),en.area=isNaN(Xr)||Xr<=0?0:Xr}function Xe(Ar){var zr=Ar.children;if(zr&&zr.length){var Yr=Wt(Ar),Qr=[],en=zr.slice(),Xr,On=1/0,Hn,ti=me==="slice"?Yr.dx:me==="dice"?Yr.dy:me==="slice-dice"?Ar.depth&1?Yr.dy:Yr.dx:Math.min(Yr.dx,Yr.dy),Yn;for(ze(en,Yr.dx*Yr.dy/Ar.value),Qr.area=0;(Yn=en.length)>0;)Qr.push(Xr=en[Yn-1]),Qr.area+=Xr.area,me!=="squarify"||(Hn=wr(Qr,ti))<=On?(en.pop(),On=Hn):(Qr.area-=Qr.pop().area,Hr(Qr,ti,Yr,!1),ti=Math.min(Yr.dx,Yr.dy),Qr.length=Qr.area=0,On=1/0);Qr.length&&(Hr(Qr,ti,Yr,!0),Qr.length=Qr.area=0),zr.forEach(Xe)}}function br(Ar){var zr=Ar.children;if(zr&&zr.length){var Yr=Wt(Ar),Qr=zr.slice(),en,Xr=[];for(ze(Qr,Yr.dx*Yr.dy/Ar.value),Xr.area=0;en=Qr.pop();)Xr.push(en),Xr.area+=en.area,en.z!=null&&(Hr(Xr,en.z?Yr.dx:Yr.dy,Yr,!Qr.length),Xr.length=Xr.area=0);zr.forEach(br)}}function wr(Ar,zr){for(var Yr=Ar.area,Qr,en=0,Xr=1/0,On=-1,Hn=Ar.length;++On<Hn;)(Qr=Ar[On].area)&&(Qr<Xr&&(Xr=Qr),Qr>en&&(en=Qr));return Yr*=Yr,zr*=zr,Yr?Math.max(zr*en*Ie/Yr,Yr/(zr*Xr*Ie)):1/0}function Hr(Ar,zr,Yr,Qr){var en=-1,Xr=Ar.length,On=Yr.x,Hn=Yr.y,ti=zr?_t(Ar.area/zr):0,Yn;if(zr==Yr.dx){for((Qr||ti>Yr.dy)&&(ti=Yr.dy);++en<Xr;)Yn=Ar[en],Yn.x=On,Yn.y=Hn,Yn.dy=ti,On+=Yn.dx=Math.min(Yr.x+Yr.dx-On,ti?_t(Yn.area/ti):0);Yn.z=!0,Yn.dx+=Yr.x+Yr.dx-On,Yr.y+=ti,Yr.dy-=ti}else{for((Qr||ti>Yr.dx)&&(ti=Yr.dx);++en<Xr;)Yn=Ar[en],Yn.x=On,Yn.y=Hn,Yn.dx=ti,Hn+=Yn.dy=Math.min(Yr.y+Yr.dy-Hn,ti?_t(Yn.area/ti):0);Yn.z=!1,Yn.dy+=Yr.y+Yr.dy-Hn,Yr.x+=ti,Yr.dx-=ti}}function Jr(Ar){var zr=xe||lt(Ar),Yr=zr[0];return Yr.x=Yr.y=0,Yr.value?(Yr.dx=Lt[0],Yr.dy=Lt[1]):Yr.dx=Yr.dy=0,xe&&lt.revalue(Yr),ze([Yr],Yr.dx*Yr.dy/Yr.value),(xe?br:Xe)(Yr),ee&&(xe=zr),zr}return Jr.size=function(Ar){return arguments.length?(Lt=Ar,Jr):Lt},Jr.padding=function(Ar){if(!arguments.length)return Ht;function zr(en){var Xr=Ar.call(Jr,en,en.depth);return Xr==null?zs(en):Ra(en,typeof Xr=="number"?[Xr,Xr,Xr,Xr]:Xr)}function Yr(en){return Ra(en,Ar)}var Qr;return Wt=(Ht=Ar)==null?zs:(Qr=typeof Ar)=="function"?zr:(Qr==="number"&&(Ar=[Ar,Ar,Ar,Ar]),Yr),Jr},Jr.round=function(Ar){return arguments.length?(_t=Ar?Math.round:Number,Jr):_t!=Number},Jr.sticky=function(Ar){return arguments.length?(ee=Ar,xe=null,Jr):ee},Jr.ratio=function(Ar){return arguments.length?(Ie=Ar,Jr):Ie},Jr.mode=function(Ar){return arguments.length?(me=Ar+"",Jr):me},Rs(Jr,lt)};function zs(lt){return{x:lt.x,y:lt.y,dx:lt.dx,dy:lt.dy}}function Ra(lt,_t){var Lt=lt.x+_t[3],Ht=lt.y+_t[0],Wt=lt.dx-_t[1]-_t[3],ee=lt.dy-_t[0]-_t[2];return Wt<0&&(Lt+=Wt/2,Wt=0),ee<0&&(Ht+=ee/2,ee=0),{x:Lt,y:Ht,dx:Wt,dy:ee}}i.random={normal:function(lt,_t){var Lt=arguments.length;return Lt<2&&(_t=1),Lt<1&&(lt=0),function(){var Ht,Wt,ee;do Ht=Math.random()*2-1,Wt=Math.random()*2-1,ee=Ht*Ht+Wt*Wt;while(!ee||ee>1);return lt+_t*Ht*Math.sqrt(-2*Math.log(ee)/ee)}},logNormal:function(){var lt=i.random.normal.apply(i,arguments);return function(){return Math.exp(lt())}},bates:function(lt){var _t=i.random.irwinHall(lt);return function(){return _t()/lt}},irwinHall:function(lt){return function(){for(var _t=0,Lt=0;Lt<lt;Lt++)_t+=Math.random();return _t}}},i.scale={};function lo(lt){var _t=lt[0],Lt=lt[lt.length-1];return _t<Lt?[_t,Lt]:[Lt,_t]}function Fs(lt){return lt.rangeExtent?lt.rangeExtent():lo(lt.range())}function Mu(lt,_t,Lt,Ht){var Wt=Lt(lt[0],lt[1]),ee=Ht(_t[0],_t[1]);return function(xe){return ee(Wt(xe))}}function Qs(lt,_t){var Lt=0,Ht=lt.length-1,Wt=lt[Lt],ee=lt[Ht],xe;return ee<Wt&&(xe=Lt,Lt=Ht,Ht=xe,xe=Wt,Wt=ee,ee=xe),lt[Lt]=_t.floor(Wt),lt[Ht]=_t.ceil(ee),lt}function Go(lt){return lt?{floor:function(_t){return Math.floor(_t/lt)*lt},ceil:function(_t){return Math.ceil(_t/lt)*lt}}:cc}var cc={floor:F,ceil:F};function Su(lt,_t,Lt,Ht){var Wt=[],ee=[],xe=0,me=Math.min(lt.length,_t.length)-1;for(lt[me]<lt[0]&&(lt=lt.slice().reverse(),_t=_t.slice().reverse());++xe<=me;)Wt.push(Lt(lt[xe-1],lt[xe])),ee.push(Ht(_t[xe-1],_t[xe]));return function(Ie){var ze=i.bisect(lt,Ie,1,me)-1;return ee[ze](Wt[ze](Ie))}}i.scale.linear=function(){return Cu([0,1],[0,1],Fa,!1)};function Cu(lt,_t,Lt,Ht){var Wt,ee;function xe(){var Ie=Math.min(lt.length,_t.length)>2?Su:Mu,ze=Ht?Es:yo;return Wt=Ie(lt,_t,ze,Lt),ee=Ie(_t,lt,ze,Fa),me}function me(Ie){return Wt(Ie)}return me.invert=function(Ie){return ee(Ie)},me.domain=function(Ie){return arguments.length?(lt=Ie.map(Number),xe()):lt},me.range=function(Ie){return arguments.length?(_t=Ie,xe()):_t},me.rangeRound=function(Ie){return me.range(Ie).interpolate(yu)},me.clamp=function(Ie){return arguments.length?(Ht=Ie,xe()):Ht},me.interpolate=function(Ie){return arguments.length?(Lt=Ie,xe()):Lt},me.ticks=function(Ie){return To(lt,Ie)},me.tickFormat=function(Ie,ze){return d3_scale_linearTickFormat(lt,Ie,ze)},me.nice=function(Ie){return Eu(lt,Ie),xe()},me.copy=function(){return Cu(lt,_t,Lt,Ht)},xe()}function eu(lt,_t){return i.rebind(lt,_t,"range","rangeRound","interpolate","clamp")}function Eu(lt,_t){return Qs(lt,Go(Za(lt,_t)[2])),Qs(lt,Go(Za(lt,_t)[2])),lt}function Za(lt,_t){_t==null&&(_t=10);var Lt=lo(lt),Ht=Lt[1]-Lt[0],Wt=Math.pow(10,Math.floor(Math.log(Ht/_t)/Math.LN10)),ee=_t/Ht*Wt;return ee<=.15?Wt*=10:ee<=.35?Wt*=5:ee<=.75&&(Wt*=2),Lt[0]=Math.ceil(Lt[0]/Wt)*Wt,Lt[1]=Math.floor(Lt[1]/Wt)*Wt+Wt*.5,Lt[2]=Wt,Lt}function To(lt,_t){return i.range.apply(i,Za(lt,_t))}i.scale.log=function(){return is(i.scale.linear().domain([0,1]),10,!0,[1,10])};function is(lt,_t,Lt,Ht){function Wt(me){return(Lt?Math.log(me<0?0:me):-Math.log(me>0?0:-me))/Math.log(_t)}function ee(me){return Lt?Math.pow(_t,me):-Math.pow(_t,-me)}function xe(me){return lt(Wt(me))}return xe.invert=function(me){return ee(lt.invert(me))},xe.domain=function(me){return arguments.length?(Lt=me[0]>=0,lt.domain((Ht=me.map(Number)).map(Wt)),xe):Ht},xe.base=function(me){return arguments.length?(_t=+me,lt.domain(Ht.map(Wt)),xe):_t},xe.nice=function(){var me=Qs(Ht.map(Wt),Lt?Math:Ds);return lt.domain(me),Ht=me.map(ee),xe},xe.ticks=function(){var me=lo(Ht),Ie=[],ze=me[0],Xe=me[1],br=Math.floor(Wt(ze)),wr=Math.ceil(Wt(Xe)),Hr=_t%1?2:_t;if(isFinite(wr-br)){if(Lt){for(;br<wr;br++)for(var Jr=1;Jr<Hr;Jr++)Ie.push(ee(br)*Jr);Ie.push(ee(br))}else for(Ie.push(ee(br));br++<wr;)for(var Jr=Hr-1;Jr>0;Jr--)Ie.push(ee(br)*Jr);for(br=0;Ie[br]<ze;br++);for(wr=Ie.length;Ie[wr-1]>Xe;wr--);Ie=Ie.slice(br,wr)}return Ie},xe.copy=function(){return is(lt.copy(),_t,Lt,Ht)},eu(xe,lt)}var Ds={floor:function(lt){return-Math.ceil(-lt)},ceil:function(lt){return-Math.floor(-lt)}};i.scale.pow=function(){return Ll(i.scale.linear(),1,[0,1])};function Ll(lt,_t,Lt){var Ht=ms(_t),Wt=ms(1/_t);function ee(xe){return lt(Ht(xe))}return ee.invert=function(xe){return Wt(lt.invert(xe))},ee.domain=function(xe){return arguments.length?(lt.domain((Lt=xe.map(Number)).map(Ht)),ee):Lt},ee.ticks=function(xe){return To(Lt,xe)},ee.tickFormat=function(xe,me){return d3_scale_linearTickFormat(Lt,xe,me)},ee.nice=function(xe){return ee.domain(Eu(Lt,xe))},ee.exponent=function(xe){return arguments.length?(Ht=ms(_t=xe),Wt=ms(1/_t),lt.domain(Lt.map(Ht)),ee):_t},ee.copy=function(){return Ll(lt.copy(),_t,Lt)},eu(ee,lt)}function ms(lt){return function(_t){return _t<0?-Math.pow(-_t,lt):Math.pow(_t,lt)}}i.scale.sqrt=function(){return i.scale.pow().exponent(.5)},i.scale.ordinal=function(){return ys([],{t:"range",a:[[]]})};function ys(lt,_t){var Lt,Ht,Wt;function ee(me){return Ht[((Lt.get(me)||(_t.t==="range"?Lt.set(me,lt.push(me)):NaN))-1)%Ht.length]}function xe(me,Ie){return i.range(lt.length).map(function(ze){return me+Ie*ze})}return ee.domain=function(me){if(!arguments.length)return lt;lt=[],Lt=new y;for(var Ie=-1,ze=me.length,Xe;++Ie<ze;)Lt.has(Xe=me[Ie])||Lt.set(Xe,lt.push(Xe));return ee[_t.t].apply(ee,_t.a)},ee.range=function(me){return arguments.length?(Ht=me,Wt=0,_t={t:"range",a:arguments},ee):Ht},ee.rangePoints=function(me,Ie){arguments.length<2&&(Ie=0);var ze=me[0],Xe=me[1],br=lt.length<2?(ze=(ze+Xe)/2,0):(Xe-ze)/(lt.length-1+Ie);return Ht=xe(ze+br*Ie/2,br),Wt=0,_t={t:"rangePoints",a:arguments},ee},ee.rangeRoundPoints=function(me,Ie){arguments.length<2&&(Ie=0);var ze=me[0],Xe=me[1],br=lt.length<2?(ze=Xe=Math.round((ze+Xe)/2),0):(Xe-ze)/(lt.length-1+Ie)|0;return Ht=xe(ze+Math.round(br*Ie/2+(Xe-ze-(lt.length-1+Ie)*br)/2),br),Wt=0,_t={t:"rangeRoundPoints",a:arguments},ee},ee.rangeBands=function(me,Ie,ze){arguments.length<2&&(Ie=0),arguments.length<3&&(ze=Ie);var Xe=me[1]<me[0],br=me[Xe-0],wr=me[1-Xe],Hr=(wr-br)/(lt.length-Ie+2*ze);return Ht=xe(br+Hr*ze,Hr),Xe&&Ht.reverse(),Wt=Hr*(1-Ie),_t={t:"rangeBands",a:arguments},ee},ee.rangeRoundBands=function(me,Ie,ze){arguments.length<2&&(Ie=0),arguments.length<3&&(ze=Ie);var Xe=me[1]<me[0],br=me[Xe-0],wr=me[1-Xe],Hr=Math.floor((wr-br)/(lt.length-Ie+2*ze));return Ht=xe(br+Math.round((wr-br-(lt.length-Ie)*Hr)/2),Hr),Xe&&Ht.reverse(),Wt=Math.round(Hr*(1-Ie)),_t={t:"rangeRoundBands",a:arguments},ee},ee.rangeBand=function(){return Wt},ee.rangeExtent=function(){return lo(_t.a[0])},ee.copy=function(){return ys(lt,_t)},ee.domain(lt)}i.scale.category10=function(){return i.scale.ordinal().range(Lu)},i.scale.category20=function(){return i.scale.ordinal().range(Yo)},i.scale.category20b=function(){return i.scale.ordinal().range(Bs)},i.scale.category20c=function(){return i.scale.ordinal().range(as)};var Lu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Oe),Yo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Oe),Bs=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Oe),as=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Oe);i.scale.quantile=function(){return Ho([],[])};function Ho(lt,_t){var Lt;function Ht(){var ee=0,xe=_t.length;for(Lt=[];++ee<xe;)Lt[ee-1]=i.quantile(lt,ee/xe);return Wt}function Wt(ee){if(!isNaN(ee=+ee))return _t[i.bisect(Lt,ee)]}return Wt.domain=function(ee){return arguments.length?(lt=ee.map(b).filter(h).sort(p),Ht()):lt},Wt.range=function(ee){return arguments.length?(_t=ee,Ht()):_t},Wt.quantiles=function(){return Lt},Wt.invertExtent=function(ee){return ee=_t.indexOf(ee),ee<0?[NaN,NaN]:[ee>0?Lt[ee-1]:lt[0],ee<Lt.length?Lt[ee]:lt[lt.length-1]]},Wt.copy=function(){return Ho(lt,_t)},Ht()}i.scale.quantize=function(){return tl(0,1,[0,1])};function tl(lt,_t,Lt){var Ht,Wt;function ee(me){return Lt[Math.max(0,Math.min(Wt,Math.floor(Ht*(me-lt))))]}function xe(){return Ht=Lt.length/(_t-lt),Wt=Lt.length-1,ee}return ee.domain=function(me){return arguments.length?(lt=+me[0],_t=+me[me.length-1],xe()):[lt,_t]},ee.range=function(me){return arguments.length?(Lt=me,xe()):Lt},ee.invertExtent=function(me){return me=Lt.indexOf(me),me=me<0?NaN:me/Ht+lt,[me,me+1/Ht]},ee.copy=function(){return tl(lt,_t,Lt)},xe()}i.scale.threshold=function(){return Ns([.5],[0,1])};function Ns(lt,_t){function Lt(Ht){if(Ht<=Ht)return _t[i.bisect(lt,Ht)]}return Lt.domain=function(Ht){return arguments.length?(lt=Ht,Lt):lt},Lt.range=function(Ht){return arguments.length?(_t=Ht,Lt):_t},Lt.invertExtent=function(Ht){return Ht=_t.indexOf(Ht),[lt[Ht-1],lt[Ht]]},Lt.copy=function(){return Ns(lt,_t)},Lt}i.scale.identity=function(){return Ji([0,1])};function Ji(lt){function _t(Lt){return+Lt}return _t.invert=_t,_t.domain=_t.range=function(Lt){return arguments.length?(lt=Lt.map(_t),_t):lt},_t.ticks=function(Lt){return To(lt,Lt)},_t.tickFormat=function(Lt,Ht){return d3_scale_linearTickFormat(lt,Lt,Ht)},_t.copy=function(){return Ji(lt)},_t}i.svg={};function js(){return 0}i.svg.arc=function(){var lt=Ru,_t=Us,Lt=js,Ht=Rl,Wt=el,ee=Ol,xe=ru;function me(){var ze=Math.max(0,+lt.apply(this,arguments)),Xe=Math.max(0,+_t.apply(this,arguments)),br=Wt.apply(this,arguments)-Gt,wr=ee.apply(this,arguments)-Gt,Hr=Math.abs(wr-br),Jr=br>wr?0:1;if(Xe<ze&&(Ar=Xe,Xe=ze,ze=Ar),Hr>=Pt)return Ie(Xe,Jr)+(ze?Ie(ze,1-Jr):"")+"Z";var Ar,zr,Yr,Qr,en=0,Xr=0,On,Hn,ti,Yn,Kn,ei,Ri,di,Ei=[];if((Qr=(+xe.apply(this,arguments)||0)/2)&&(Yr=Ht===Rl?Math.sqrt(ze*ze+Xe*Xe):+Ht.apply(this,arguments),Jr||(Xr*=-1),Xe&&(Xr=Ne(Yr/Xe*Math.sin(Qr))),ze&&(en=Ne(Yr/ze*Math.sin(Qr)))),Xe){On=Xe*Math.cos(br+Xr),Hn=Xe*Math.sin(br+Xr),ti=Xe*Math.cos(wr-Xr),Yn=Xe*Math.sin(wr-Xr);var Hi=Math.abs(wr-br-2*Xr)<=ht?0:1;if(Xr&&rl(On,Hn,ti,Yn)===Jr^Hi){var _a=(br+wr)/2;On=Xe*Math.cos(_a),Hn=Xe*Math.sin(_a),ti=Yn=null}}else On=Hn=0;if(ze){Kn=ze*Math.cos(wr-en),ei=ze*Math.sin(wr-en),Ri=ze*Math.cos(br+en),di=ze*Math.sin(br+en);var Xi=Math.abs(br-wr+2*en)<=ht?0:1;if(en&&rl(Kn,ei,Ri,di)===1-Jr^Xi){var Gn=(br+wr)/2;Kn=ze*Math.cos(Gn),ei=ze*Math.sin(Gn),Ri=di=null}}else Kn=ei=0;if(Hr>Dt&&(Ar=Math.min(Math.abs(Xe-ze)/2,+Lt.apply(this,arguments)))>.001){zr=ze<Xe^Jr?0:1;var Pi=Ar,pi=Ar;if(Hr<ht){var Fi=Ri==null?[Kn,ei]:ti==null?[On,Hn]:an([On,Hn],[Ri,di],[ti,Yn],[Kn,ei]),oa=On-Fi[0],Vi=Hn-Fi[1],Oa=ti-Fi[0],Pa=Yn-Fi[1],Da=1/Math.sin(Math.acos((oa*Oa+Vi*Pa)/(Math.sqrt(oa*oa+Vi*Vi)*Math.sqrt(Oa*Oa+Pa*Pa)))/2),sa=Math.sqrt(Fi[0]*Fi[0]+Fi[1]*Fi[1]);pi=Math.min(Ar,(ze-sa)/(Da-1)),Pi=Math.min(Ar,(Xe-sa)/(Da+1))}if(ti!=null){var Va=nl(Ri==null?[Kn,ei]:[Ri,di],[On,Hn],Xe,Pi,Jr),Qn=nl([ti,Yn],[Kn,ei],Xe,Pi,Jr);Ar===Pi?Ei.push("M",Va[0],"A",Pi,",",Pi," 0 0,",zr," ",Va[1],"A",Xe,",",Xe," 0 ",1-Jr^rl(Va[1][0],Va[1][1],Qn[1][0],Qn[1][1]),",",Jr," ",Qn[1],"A",Pi,",",Pi," 0 0,",zr," ",Qn[0]):Ei.push("M",Va[0],"A",Pi,",",Pi," 0 1,",zr," ",Qn[0])}else Ei.push("M",On,",",Hn);if(Ri!=null){var vi=nl([On,Hn],[Ri,di],ze,-pi,Jr),ro=nl([Kn,ei],ti==null?[On,Hn]:[ti,Yn],ze,-pi,Jr);Ar===pi?Ei.push("L",ro[0],"A",pi,",",pi," 0 0,",zr," ",ro[1],"A",ze,",",ze," 0 ",Jr^rl(ro[1][0],ro[1][1],vi[1][0],vi[1][1]),",",1-Jr," ",vi[1],"A",pi,",",pi," 0 0,",zr," ",vi[0]):Ei.push("L",ro[0],"A",pi,",",pi," 0 0,",zr," ",vi[0])}else Ei.push("L",Kn,",",ei)}else Ei.push("M",On,",",Hn),ti!=null&&Ei.push("A",Xe,",",Xe," 0 ",Hi,",",Jr," ",ti,",",Yn),Ei.push("L",Kn,",",ei),Ri!=null&&Ei.push("A",ze,",",ze," 0 ",Xi,",",1-Jr," ",Ri,",",di);return Ei.push("Z"),Ei.join("")}function Ie(ze,Xe){return"M0,"+ze+"A"+ze+","+ze+" 0 1,"+Xe+" 0,"+-ze+"A"+ze+","+ze+" 0 1,"+Xe+" 0,"+ze}return me.innerRadius=function(ze){return arguments.length?(lt=Ur(ze),me):lt},me.outerRadius=function(ze){return arguments.length?(_t=Ur(ze),me):_t},me.cornerRadius=function(ze){return arguments.length?(Lt=Ur(ze),me):Lt},me.padRadius=function(ze){return arguments.length?(Ht=ze==Rl?Rl:Ur(ze),me):Ht},me.startAngle=function(ze){return arguments.length?(Wt=Ur(ze),me):Wt},me.endAngle=function(ze){return arguments.length?(ee=Ur(ze),me):ee},me.padAngle=function(ze){return arguments.length?(xe=Ur(ze),me):xe},me.centroid=function(){var ze=(+lt.apply(this,arguments)+ +_t.apply(this,arguments))/2,Xe=(+Wt.apply(this,arguments)+ +ee.apply(this,arguments))/2-Gt;return[Math.cos(Xe)*ze,Math.sin(Xe)*ze]},me};var Rl="auto";function Ru(lt){return lt.innerRadius}function Us(lt){return lt.outerRadius}function el(lt){return lt.startAngle}function Ol(lt){return lt.endAngle}function ru(lt){return lt&&lt.padAngle}function rl(lt,_t,Lt,Ht){return(lt-Lt)*_t-(_t-Ht)*lt>0?0:1}function nl(lt,_t,Lt,Ht,Wt){var ee=lt[0]-_t[0],xe=lt[1]-_t[1],me=(Wt?Ht:-Ht)/Math.sqrt(ee*ee+xe*xe),Ie=me*xe,ze=-me*ee,Xe=lt[0]+Ie,br=lt[1]+ze,wr=_t[0]+Ie,Hr=_t[1]+ze,Jr=(Xe+wr)/2,Ar=(br+Hr)/2,zr=wr-Xe,Yr=Hr-br,Qr=zr*zr+Yr*Yr,en=Lt-Ht,Xr=Xe*Hr-wr*br,On=(Yr<0?-1:1)*Math.sqrt(Math.max(0,en*en*Qr-Xr*Xr)),Hn=(Xr*Yr-zr*On)/Qr,ti=(-Xr*zr-Yr*On)/Qr,Yn=(Xr*Yr+zr*On)/Qr,Kn=(-Xr*zr+Yr*On)/Qr,ei=Hn-Jr,Ri=ti-Ar,di=Yn-Jr,Ei=Kn-Ar;return ei*ei+Ri*Ri>di*di+Ei*Ei&&(Hn=Yn,ti=Kn),[[Hn-Ie,ti-ze],[Hn*Lt/en,ti*Lt/en]]}function os(){return!0}function il(lt){var _t=ui,Lt=ni,Ht=os,Wt=Ma,ee=Wt.key,xe=.7;function me(Ie){var ze=[],Xe=[],br=-1,wr=Ie.length,Hr,Jr=Ur(_t),Ar=Ur(Lt);function zr(){ze.push("M",Wt(lt(Xe),xe))}for(;++br<wr;)Ht.call(this,Hr=Ie[br],br)?Xe.push([+Jr.call(this,Hr,br),+Ar.call(this,Hr,br)]):Xe.length&&(zr(),Xe=[]);return Xe.length&&zr(),ze.length?ze.join(""):null}return me.x=function(Ie){return arguments.length?(_t=Ie,me):_t},me.y=function(Ie){return arguments.length?(Lt=Ie,me):Lt},me.defined=function(Ie){return arguments.length?(Ht=Ie,me):Ht},me.interpolate=function(Ie){return arguments.length?(typeof Ie=="function"?ee=Wt=Ie:ee=(Wt=ss.get(Ie)||Ma).key,me):ee},me.tension=function(Ie){return arguments.length?(xe=Ie,me):xe},me}i.svg.line=function(){return il(F)};var ss=i.map({linear:Ma,"linear-closed":Io,step:nu,"step-before":xs,"step-after":Pl,basis:qs,"basis-open":Pu,"basis-closed":ls,bundle:hc,cardinal:Ou,"cardinal-open":al,"cardinal-closed":fc,monotone:zl});ss.forEach(function(lt,_t){_t.key=lt,_t.closed=/-closed$/.test(lt)});function Ma(lt){return lt.length>1?lt.join("L"):lt+"Z"}function Io(lt){return lt.join("L")+"Z"}function nu(lt){for(var _t=0,Lt=lt.length,Ht=lt[0],Wt=[Ht[0],",",Ht[1]];++_t<Lt;)Wt.push("H",(Ht[0]+(Ht=lt[_t])[0])/2,"V",Ht[1]);return Lt>1&&Wt.push("H",Ht[0]),Wt.join("")}function xs(lt){for(var _t=0,Lt=lt.length,Ht=lt[0],Wt=[Ht[0],",",Ht[1]];++_t<Lt;)Wt.push("V",(Ht=lt[_t])[1],"H",Ht[0]);return Wt.join("")}function Pl(lt){for(var _t=0,Lt=lt.length,Ht=lt[0],Wt=[Ht[0],",",Ht[1]];++_t<Lt;)Wt.push("H",(Ht=lt[_t])[0],"V",Ht[1]);return Wt.join("")}function al(lt,_t){return lt.length<4?Ma(lt):lt[1]+Ha(lt.slice(1,-1),ol(lt,_t))}function fc(lt,_t){return lt.length<3?Io(lt):lt[0]+Ha((lt.push(lt[0]),lt),ol([lt[lt.length-2]].concat(lt,[lt[1]]),_t))}function Ou(lt,_t){return lt.length<3?Ma(lt):lt[0]+Ha(lt,ol(lt,_t))}function Ha(lt,_t){if(_t.length<1||lt.length!=_t.length&&lt.length!=_t.length+2)return Ma(lt);var Lt=lt.length!=_t.length,Ht="",Wt=lt[0],ee=lt[1],xe=_t[0],me=xe,Ie=1;if(Lt&&(Ht+="Q"+(ee[0]-xe[0]*2/3)+","+(ee[1]-xe[1]*2/3)+","+ee[0]+","+ee[1],Wt=lt[1],Ie=2),_t.length>1){me=_t[1],ee=lt[Ie],Ie++,Ht+="C"+(Wt[0]+xe[0])+","+(Wt[1]+xe[1])+","+(ee[0]-me[0])+","+(ee[1]-me[1])+","+ee[0]+","+ee[1];for(var ze=2;ze<_t.length;ze++,Ie++)ee=lt[Ie],me=_t[ze],Ht+="S"+(ee[0]-me[0])+","+(ee[1]-me[1])+","+ee[0]+","+ee[1]}if(Lt){var Xe=lt[Ie];Ht+="Q"+(ee[0]+me[0]*2/3)+","+(ee[1]+me[1]*2/3)+","+Xe[0]+","+Xe[1]}return Ht}function ol(lt,_t){for(var Lt=[],Ht=(1-_t)/2,Wt,ee=lt[0],xe=lt[1],me=1,Ie=lt.length;++me<Ie;)Wt=ee,ee=xe,xe=lt[me],Lt.push([Ht*(xe[0]-Wt[0]),Ht*(xe[1]-Wt[1])]);return Lt}function qs(lt){if(lt.length<3)return Ma(lt);var _t=1,Lt=lt.length,Ht=lt[0],Wt=Ht[0],ee=Ht[1],xe=[Wt,Wt,Wt,(Ht=lt[1])[0]],me=[ee,ee,ee,Ht[1]],Ie=[Wt,",",ee,"L",eo(Vo,xe),",",eo(Vo,me)];for(lt.push(lt[Lt-1]);++_t<=Lt;)Ht=lt[_t],xe.shift(),xe.push(Ht[0]),me.shift(),me.push(Ht[1]),us(Ie,xe,me);return lt.pop(),Ie.push("L",Ht),Ie.join("")}function Pu(lt){if(lt.length<4)return Ma(lt);for(var _t=[],Lt=-1,Ht=lt.length,Wt,ee=[0],xe=[0];++Lt<3;)Wt=lt[Lt],ee.push(Wt[0]),xe.push(Wt[1]);for(_t.push(eo(Vo,ee)+","+eo(Vo,xe)),--Lt;++Lt<Ht;)Wt=lt[Lt],ee.shift(),ee.push(Wt[0]),xe.shift(),xe.push(Wt[1]),us(_t,ee,xe);return _t.join("")}function ls(lt){for(var _t,Lt=-1,Ht=lt.length,Wt=Ht+4,ee,xe=[],me=[];++Lt<4;)ee=lt[Lt%Ht],xe.push(ee[0]),me.push(ee[1]);for(_t=[eo(Vo,xe),",",eo(Vo,me)],--Lt;++Lt<Wt;)ee=lt[Lt%Ht],xe.shift(),xe.push(ee[0]),me.shift(),me.push(ee[1]),us(_t,xe,me);return _t.join("")}function hc(lt,_t){var Lt=lt.length-1;if(Lt)for(var Ht=lt[0][0],Wt=lt[0][1],ee=lt[Lt][0]-Ht,xe=lt[Lt][1]-Wt,me=-1,Ie,ze;++me<=Lt;)Ie=lt[me],ze=me/Lt,Ie[0]=_t*Ie[0]+(1-_t)*(Ht+ze*ee),Ie[1]=_t*Ie[1]+(1-_t)*(Wt+ze*xe);return qs(lt)}function eo(lt,_t){return lt[0]*_t[0]+lt[1]*_t[1]+lt[2]*_t[2]+lt[3]*_t[3]}var sl=[0,2/3,1/3,0],Il=[0,1/3,2/3,0],Vo=[0,1/6,2/3,1/6];function us(lt,_t,Lt){lt.push("C",eo(sl,_t),",",eo(sl,Lt),",",eo(Il,_t),",",eo(Il,Lt),",",eo(Vo,_t),",",eo(Vo,Lt))}function iu(lt,_t){return(_t[1]-lt[1])/(_t[0]-lt[0])}function ll(lt){for(var _t=0,Lt=lt.length-1,Ht=[],Wt=lt[0],ee=lt[1],xe=Ht[0]=iu(Wt,ee);++_t<Lt;)Ht[_t]=(xe+(xe=iu(Wt=ee,ee=lt[_t+1])))/2;return Ht[_t]=xe,Ht}function ul(lt){for(var _t=[],Lt,Ht,Wt,ee,xe=ll(lt),me=-1,Ie=lt.length-1;++me<Ie;)Lt=iu(lt[me],lt[me+1]),f(Lt)<Dt?xe[me]=xe[me+1]=0:(Ht=xe[me]/Lt,Wt=xe[me+1]/Lt,ee=Ht*Ht+Wt*Wt,ee>9&&(ee=Lt*3/Math.sqrt(ee),xe[me]=ee*Ht,xe[me+1]=ee*Wt));for(me=-1;++me<=Ie;)ee=(lt[Math.min(Ie,me+1)][0]-lt[Math.max(0,me-1)][0])/(6*(1+xe[me]*xe[me])),_t.push([ee||0,xe[me]*ee||0]);return _t}function zl(lt){return lt.length<3?Ma(lt):lt[0]+Ha(lt,ul(lt))}i.svg.line.radial=function(){var lt=il(Iu);return lt.radius=lt.x,delete lt.x,lt.angle=lt.y,delete lt.y,lt};function Iu(lt){for(var _t,Lt=-1,Ht=lt.length,Wt,ee;++Lt<Ht;)_t=lt[Lt],Wt=_t[0],ee=_t[1]-Gt,_t[0]=Wt*Math.cos(ee),_t[1]=Wt*Math.sin(ee);return lt}function cl(lt){var _t=ui,Lt=ui,Ht=0,Wt=ni,ee=os,xe=Ma,me=xe.key,Ie=xe,ze="L",Xe=.7;function br(wr){var Hr=[],Jr=[],Ar=[],zr=-1,Yr=wr.length,Qr,en=Ur(_t),Xr=Ur(Ht),On=_t===Lt?function(){return ti}:Ur(Lt),Hn=Ht===Wt?function(){return Yn}:Ur(Wt),ti,Yn;function Kn(){Hr.push("M",xe(lt(Ar),Xe),ze,Ie(lt(Jr.reverse()),Xe),"Z")}for(;++zr<Yr;)ee.call(this,Qr=wr[zr],zr)?(Jr.push([ti=+en.call(this,Qr,zr),Yn=+Xr.call(this,Qr,zr)]),Ar.push([+On.call(this,Qr,zr),+Hn.call(this,Qr,zr)])):Jr.length&&(Kn(),Jr=[],Ar=[]);return Jr.length&&Kn(),Hr.length?Hr.join(""):null}return br.x=function(wr){return arguments.length?(_t=Lt=wr,br):Lt},br.x0=function(wr){return arguments.length?(_t=wr,br):_t},br.x1=function(wr){return arguments.length?(Lt=wr,br):Lt},br.y=function(wr){return arguments.length?(Ht=Wt=wr,br):Wt},br.y0=function(wr){return arguments.length?(Ht=wr,br):Ht},br.y1=function(wr){return arguments.length?(Wt=wr,br):Wt},br.defined=function(wr){return arguments.length?(ee=wr,br):ee},br.interpolate=function(wr){return arguments.length?(typeof wr=="function"?me=xe=wr:me=(xe=ss.get(wr)||Ma).key,Ie=xe.reverse||xe,ze=xe.closed?"M":"L",br):me},br.tension=function(wr){return arguments.length?(Xe=wr,br):Xe},br}xs.reverse=Pl,Pl.reverse=xs,i.svg.area=function(){return cl(F)},i.svg.area.radial=function(){var lt=cl(Iu);return lt.radius=lt.x,delete lt.x,lt.innerRadius=lt.x0,delete lt.x0,lt.outerRadius=lt.x1,delete lt.x1,lt.angle=lt.y,delete lt.y,lt.startAngle=lt.y0,delete lt.y0,lt.endAngle=lt.y1,delete lt.y1,lt};function au(lt){return lt.source}function bs(lt){return lt.target}i.svg.chord=function(){var lt=au,_t=bs,Lt=ou,Ht=el,Wt=Ol;function ee(Xe,br){var wr=xe(this,lt,Xe,br),Hr=xe(this,_t,Xe,br);return"M"+wr.p0+Ie(wr.r,wr.p1,wr.a1-wr.a0)+(me(wr,Hr)?ze(wr.r,wr.p1,wr.r,wr.p0):ze(wr.r,wr.p1,Hr.r,Hr.p0)+Ie(Hr.r,Hr.p1,Hr.a1-Hr.a0)+ze(Hr.r,Hr.p1,wr.r,wr.p0))+"Z"}function xe(Xe,br,wr,Hr){var Jr=br.call(Xe,wr,Hr),Ar=Lt.call(Xe,Jr,Hr),zr=Ht.call(Xe,Jr,Hr)-Gt,Yr=Wt.call(Xe,Jr,Hr)-Gt;return{r:Ar,a0:zr,a1:Yr,p0:[Ar*Math.cos(zr),Ar*Math.sin(zr)],p1:[Ar*Math.cos(Yr),Ar*Math.sin(Yr)]}}function me(Xe,br){return Xe.a0==br.a0&&Xe.a1==br.a1}function Ie(Xe,br,wr){return"A"+Xe+","+Xe+" 0 "+ +(wr>ht)+",1 "+br}function ze(Xe,br,wr,Hr){return"Q 0,0 "+Hr}return ee.radius=function(Xe){return arguments.length?(Lt=Ur(Xe),ee):Lt},ee.source=function(Xe){return arguments.length?(lt=Ur(Xe),ee):lt},ee.target=function(Xe){return arguments.length?(_t=Ur(Xe),ee):_t},ee.startAngle=function(Xe){return arguments.length?(Ht=Ur(Xe),ee):Ht},ee.endAngle=function(Xe){return arguments.length?(Wt=Ur(Xe),ee):Wt},ee};function ou(lt){return lt.radius}i.svg.diagonal=function(){var lt=au,_t=bs,Lt=fl;function Ht(Wt,ee){var xe=lt.call(this,Wt,ee),me=_t.call(this,Wt,ee),Ie=(xe.y+me.y)/2,ze=[xe,{x:xe.x,y:Ie},{x:me.x,y:Ie},me];return ze=ze.map(Lt),"M"+ze[0]+"C"+ze[1]+" "+ze[2]+" "+ze[3]}return Ht.source=function(Wt){return arguments.length?(lt=Ur(Wt),Ht):lt},Ht.target=function(Wt){return arguments.length?(_t=Ur(Wt),Ht):_t},Ht.projection=function(Wt){return arguments.length?(Lt=Wt,Ht):Lt},Ht};function fl(lt){return[lt.x,lt.y]}i.svg.diagonal.radial=function(){var lt=i.svg.diagonal(),_t=fl,Lt=lt.projection;return lt.projection=function(Ht){return arguments.length?Lt(zu(_t=Ht)):_t},lt};function zu(lt){return function(){var _t=lt.apply(this,arguments),Lt=_t[0],Ht=_t[1]-Gt;return[Lt*Math.cos(Ht),Lt*Math.sin(Ht)]}}i.svg.symbol=function(){var lt=Kt,_t=qt;function Lt(Ht,Wt){return(ve.get(lt.call(this,Ht,Wt))||se)(_t.call(this,Ht,Wt))}return Lt.type=function(Ht){return arguments.length?(lt=Ur(Ht),Lt):lt},Lt.size=function(Ht){return arguments.length?(_t=Ur(Ht),Lt):_t},Lt};function qt(){return 64}function Kt(){return"circle"}function se(lt){var _t=Math.sqrt(lt/ht);return"M0,"+_t+"A"+_t+","+_t+" 0 1,1 0,"+-_t+"A"+_t+","+_t+" 0 1,1 0,"+_t+"Z"}var ve=i.map({circle:se,cross:function(lt){var _t=Math.sqrt(lt/5)/2;return"M"+-3*_t+","+-_t+"H"+-_t+"V"+-3*_t+"H"+_t+"V"+-_t+"H"+3*_t+"V"+_t+"H"+_t+"V"+3*_t+"H"+-_t+"V"+_t+"H"+-3*_t+"Z"},diamond:function(lt){var _t=Math.sqrt(lt/(2*Ae)),Lt=_t*Ae;return"M0,"+-_t+"L"+Lt+",0 0,"+_t+" "+-Lt+",0Z"},square:function(lt){var _t=Math.sqrt(lt)/2;return"M"+-_t+","+-_t+"L"+_t+","+-_t+" "+_t+","+_t+" "+-_t+","+_t+"Z"},"triangle-down":function(lt){var _t=Math.sqrt(lt/Se),Lt=_t*Se/2;return"M0,"+Lt+"L"+_t+","+-Lt+" "+-_t+","+-Lt+"Z"},"triangle-up":function(lt){var _t=Math.sqrt(lt/Se),Lt=_t*Se/2;return"M0,"+-Lt+"L"+_t+","+Lt+" "+-_t+","+Lt+"Z"}});i.svg.symbolTypes=ve.keys();var Se=Math.sqrt(3),Ae=Math.tan(30*te);Y.transition=function(lt){for(var _t=Tr||++mr,Lt=wn(lt),Ht=[],Wt,ee,xe=Rr||{time:Date.now(),ease:Vl,delay:0,duration:250},me=-1,Ie=this.length;++me<Ie;){Ht.push(Wt=[]);for(var ze=this[me],Xe=-1,br=ze.length;++Xe<br;)(ee=ze[Xe])&&kn(ee,Xe,Lt,_t,xe),Wt.push(ee)}return fr(Ht,Lt,_t)},Y.interrupt=function(lt){return this.each(lt==null?Le:ir(wn(lt)))};var Le=ir(wn());function ir(lt){return function(){var _t,Lt,Ht;(_t=this[lt])&&(Ht=_t[Lt=_t.active])&&(Ht.timer.c=null,Ht.timer.t=NaN,--_t.count?delete _t[Lt]:delete this[lt],_t.active+=.5,Ht.event&&Ht.event.interrupt.call(this,this.__data__,Ht.index))}}function fr(lt,_t,Lt){return $(lt,$e),lt.namespace=_t,lt.id=Lt,lt}var $e=[],mr=0,Tr,Rr;$e.call=Y.call,$e.empty=Y.empty,$e.node=Y.node,$e.size=Y.size,i.transition=function(lt,_t){return lt&&lt.transition?Tr?lt.transition(_t):lt:i.selection().transition(lt)},i.transition.prototype=$e,$e.select=function(lt){var _t=this.id,Lt=this.namespace,Ht=[],Wt,ee,xe;lt=at(lt);for(var me=-1,Ie=this.length;++me<Ie;){Ht.push(Wt=[]);for(var ze=this[me],Xe=-1,br=ze.length;++Xe<br;)(xe=ze[Xe])&&(ee=lt.call(xe,xe.__data__,Xe,me))?("__data__"in xe&&(ee.__data__=xe.__data__),kn(ee,Xe,Lt,_t,xe[Lt][_t]),Wt.push(ee)):Wt.push(null)}return fr(Ht,Lt,_t)},$e.selectAll=function(lt){var _t=this.id,Lt=this.namespace,Ht=[],Wt,ee,xe,me,Ie;lt=et(lt);for(var ze=-1,Xe=this.length;++ze<Xe;)for(var br=this[ze],wr=-1,Hr=br.length;++wr<Hr;)if(xe=br[wr]){Ie=xe[Lt][_t],ee=lt.call(xe,xe.__data__,wr,ze),Ht.push(Wt=[]);for(var Jr=-1,Ar=ee.length;++Jr<Ar;)(me=ee[Jr])&&kn(me,Jr,Lt,_t,Ie),Wt.push(me)}return fr(Ht,Lt,_t)},$e.filter=function(lt){var _t=[],Lt,Ht,Wt;typeof lt!="function"&&(lt=re(lt));for(var ee=0,xe=this.length;ee<xe;ee++){_t.push(Lt=[]);for(var Ht=this[ee],me=0,Ie=Ht.length;me<Ie;me++)(Wt=Ht[me])&&lt.call(Wt,Wt.__data__,me,ee)&&Lt.push(Wt)}return fr(_t,this.namespace,this.id)},$e.tween=function(lt,_t){var Lt=this.id,Ht=this.namespace;return arguments.length<2?this.node()[Ht][Lt].tween.get(lt):he(this,_t==null?function(Wt){Wt[Ht][Lt].tween.remove(lt)}:function(Wt){Wt[Ht][Lt].tween.set(lt,_t)})};function Zr(lt,_t,Lt,Ht){var Wt=lt.id,ee=lt.namespace;return he(lt,typeof Lt=="function"?function(xe,me,Ie){xe[ee][Wt].tween.set(_t,Ht(Lt.call(xe,xe.__data__,me,Ie)))}:(Lt=Ht(Lt),function(xe){xe[ee][Wt].tween.set(_t,Lt)}))}$e.attr=function(lt,_t){if(arguments.length<2){for(_t in lt)this.attr(_t,lt[_t]);return this}var Lt=lt=="transform"?Al:Fa,Ht=i.ns.qualify(lt);function Wt(){this.removeAttribute(Ht)}function ee(){this.removeAttributeNS(Ht.space,Ht.local)}function xe(Ie){return Ie==null?Wt:(Ie+="",function(){var ze=this.getAttribute(Ht),Xe;return ze!==Ie&&(Xe=Lt(ze,Ie),function(br){this.setAttribute(Ht,Xe(br))})})}function me(Ie){return Ie==null?ee:(Ie+="",function(){var ze=this.getAttributeNS(Ht.space,Ht.local),Xe;return ze!==Ie&&(Xe=Lt(ze,Ie),function(br){this.setAttributeNS(Ht.space,Ht.local,Xe(br))})})}return Zr(this,"attr."+lt,_t,Ht.local?me:xe)},$e.attrTween=function(lt,_t){var Lt=i.ns.qualify(lt);function Ht(ee,xe){var me=_t.call(this,ee,xe,this.getAttribute(Lt));return me&&function(Ie){this.setAttribute(Lt,me(Ie))}}function Wt(ee,xe){var me=_t.call(this,ee,xe,this.getAttributeNS(Lt.space,Lt.local));return me&&function(Ie){this.setAttributeNS(Lt.space,Lt.local,me(Ie))}}return this.tween("attr."+lt,Lt.local?Wt:Ht)},$e.style=function(lt,_t,Lt){var Ht=arguments.length;if(Ht<3){if(typeof lt!="string"){Ht<2&&(_t="");for(Lt in lt)this.style(Lt,lt[Lt],_t);return this}Lt=""}function Wt(){this.style.removeProperty(lt)}function ee(xe){return xe==null?Wt:(xe+="",function(){var me=r(this).getComputedStyle(this,null).getPropertyValue(lt),Ie;return me!==xe&&(Ie=Fa(me,xe),function(ze){this.style.setProperty(lt,Ie(ze),Lt)})})}return Zr(this,"style."+lt,_t,ee)},$e.styleTween=function(lt,_t,Lt){arguments.length<3&&(Lt="");function Ht(Wt,ee){var xe=_t.call(this,Wt,ee,r(this).getComputedStyle(this,null).getPropertyValue(lt));return xe&&function(me){this.style.setProperty(lt,xe(me),Lt)}}return this.tween("style."+lt,Ht)},$e.text=function(lt){return Zr(this,"text",lt,dn)};function dn(lt){return lt==null&&(lt=""),function(){this.textContent=lt}}$e.remove=function(){var lt=this.namespace;return this.each("end.transition",function(){var _t;this[lt].count<2&&(_t=this.parentNode)&&_t.removeChild(this)})},$e.ease=function(lt){var _t=this.id,Lt=this.namespace;return arguments.length<1?this.node()[Lt][_t].ease:(typeof lt!="function"&&(lt=i.ease.apply(i,arguments)),he(this,function(Ht){Ht[Lt][_t].ease=lt}))},$e.delay=function(lt){var _t=this.id,Lt=this.namespace;return arguments.length<1?this.node()[Lt][_t].delay:he(this,typeof lt=="function"?function(Ht,Wt,ee){Ht[Lt][_t].delay=+lt.call(Ht,Ht.__data__,Wt,ee)}:(lt=+lt,function(Ht){Ht[Lt][_t].delay=lt}))},$e.duration=function(lt){var _t=this.id,Lt=this.namespace;return arguments.length<1?this.node()[Lt][_t].duration:he(this,typeof lt=="function"?function(Ht,Wt,ee){Ht[Lt][_t].duration=Math.max(1,lt.call(Ht,Ht.__data__,Wt,ee))}:(lt=Math.max(1,lt),function(Ht){Ht[Lt][_t].duration=lt}))},$e.each=function(lt,_t){var Lt=this.id,Ht=this.namespace;if(arguments.length<2){var Wt=Rr,ee=Tr;try{Tr=Lt,he(this,function(xe,me,Ie){Rr=xe[Ht][Lt],lt.call(xe,xe.__data__,me,Ie)})}finally{Rr=Wt,Tr=ee}}else he(this,function(xe){var me=xe[Ht][Lt];(me.event||(me.event=i.dispatch("start","end","interrupt"))).on(lt,_t)});return this},$e.transition=function(){for(var lt=this.id,_t=++mr,Lt=this.namespace,Ht=[],Wt,ee,xe,me,Ie=0,ze=this.length;Ie<ze;Ie++){Ht.push(Wt=[]);for(var ee=this[Ie],Xe=0,br=ee.length;Xe<br;Xe++)(xe=ee[Xe])&&(me=xe[Lt][lt],kn(xe,Xe,Lt,_t,{time:me.time,ease:me.ease,delay:me.delay+me.duration,duration:me.duration})),Wt.push(xe)}return fr(Ht,Lt,_t)};function wn(lt){return lt==null?"__transition__":"__transition_"+lt+"__"}function kn(lt,_t,Lt,Ht,Wt){var ee=lt[Lt]||(lt[Lt]={active:0,count:0}),xe=ee[Ht],me,Ie,ze,Xe,br;function wr(Ar){var zr=xe.delay;if(Ie.t=zr+me,zr<=Ar)return Hr(Ar-zr);Ie.c=Hr}function Hr(Ar){var zr=ee.active,Yr=ee[zr];Yr&&(Yr.timer.c=null,Yr.timer.t=NaN,--ee.count,delete ee[zr],Yr.event&&Yr.event.interrupt.call(lt,lt.__data__,Yr.index));for(var Qr in ee)if(+Qr<Ht){var en=ee[Qr];en.timer.c=null,en.timer.t=NaN,--ee.count,delete ee[Qr]}Ie.c=Jr,In(function(){return Ie.c&&Jr(Ar||1)&&(Ie.c=null,Ie.t=NaN),1},0,me),ee.active=Ht,xe.event&&xe.event.start.call(lt,lt.__data__,_t),br=[],xe.tween.forEach(function(Xr,On){(On=On.call(lt,lt.__data__,_t))&&br.push(On)}),Xe=xe.ease,ze=xe.duration}function Jr(Ar){for(var zr=Ar/ze,Yr=Xe(zr),Qr=br.length;Qr>0;)br[--Qr].call(lt,Yr);if(zr>=1)return xe.event&&xe.event.end.call(lt,lt.__data__,_t),--ee.count?delete ee[Ht]:delete lt[Lt],1}xe||(me=Wt.time,Ie=In(wr,0,me),xe=ee[Ht]={tween:new y,time:me,timer:Ie,delay:Wt.delay,duration:Wt.duration,ease:Wt.ease,index:_t},Wt=null,++ee.count)}i.svg.axis=function(){var lt=i.scale.linear(),_t=jn,Lt=6,Ht=6,Wt=3,ee=[10],xe=null,me;function Ie(ze){ze.each(function(){var Xe=i.select(this),br=this.__chart__||lt,wr=this.__chart__=lt.copy(),Hr=xe??(wr.ticks?wr.ticks.apply(wr,ee):wr.domain()),Jr=me??(wr.tickFormat?wr.tickFormat.apply(wr,ee):F),Ar=Xe.selectAll(".tick").data(Hr,wr),zr=Ar.enter().insert("g",".domain").attr("class","tick").style("opacity",Dt),Yr=i.transition(Ar.exit()).style("opacity",Dt).remove(),Qr=i.transition(Ar.order()).style("opacity",1),en=Math.max(Lt,0)+Wt,Xr,On=Fs(wr),Hn=Xe.selectAll(".domain").data([0]),ti=(Hn.enter().append("path").attr("class","domain"),i.transition(Hn));zr.append("line"),zr.append("text");var Yn=zr.select("line"),Kn=Qr.select("line"),ei=Ar.select("text").text(Jr),Ri=zr.select("text"),di=Qr.select("text"),Ei=_t==="top"||_t==="left"?-1:1,Hi,_a,Xi,Gn;if(_t==="bottom"||_t==="top"?(Xr=Ai,Hi="x",Xi="y",_a="x2",Gn="y2",ei.attr("dy",Ei<0?"0em":".71em").style("text-anchor","middle"),ti.attr("d","M"+On[0]+","+Ei*Ht+"V0H"+On[1]+"V"+Ei*Ht)):(Xr=Si,Hi="y",Xi="x",_a="y2",Gn="x2",ei.attr("dy",".32em").style("text-anchor",Ei<0?"end":"start"),ti.attr("d","M"+Ei*Ht+","+On[0]+"H0V"+On[1]+"H"+Ei*Ht)),Yn.attr(Gn,Ei*Lt),Ri.attr(Xi,Ei*en),Kn.attr(_a,0).attr(Gn,Ei*Lt),di.attr(Hi,0).attr(Xi,Ei*en),wr.rangeBand){var Pi=wr,pi=Pi.rangeBand()/2;br=wr=function(Fi){return Pi(Fi)+pi}}else br.rangeBand?br=wr:Yr.call(Xr,wr,br);zr.call(Xr,br,wr),Qr.call(Xr,wr,wr)})}return Ie.scale=function(ze){return arguments.length?(lt=ze,Ie):lt},Ie.orient=function(ze){return arguments.length?(_t=ze in wi?ze+"":jn,Ie):_t},Ie.ticks=function(){return arguments.length?(ee=T(arguments),Ie):ee},Ie.tickValues=function(ze){return arguments.length?(xe=ze,Ie):xe},Ie.tickFormat=function(ze){return arguments.length?(me=ze,Ie):me},Ie.tickSize=function(ze){var Xe=arguments.length;return Xe?(Lt=+ze,Ht=+arguments[Xe-1],Ie):Lt},Ie.innerTickSize=function(ze){return arguments.length?(Lt=+ze,Ie):Lt},Ie.outerTickSize=function(ze){return arguments.length?(Ht=+ze,Ie):Ht},Ie.tickPadding=function(ze){return arguments.length?(Wt=+ze,Ie):Wt},Ie.tickSubdivide=function(){return arguments.length&&Ie},Ie};var jn="bottom",wi={top:1,right:1,bottom:1,left:1};function Ai(lt,_t,Lt){lt.attr("transform",function(Ht){var Wt=_t(Ht);return"translate("+(isFinite(Wt)?Wt:Lt(Ht))+",0)"})}function Si(lt,_t,Lt){lt.attr("transform",function(Ht){var Wt=_t(Ht);return"translate(0,"+(isFinite(Wt)?Wt:Lt(Ht))+")"})}i.svg.brush=function(){var lt=q(Xe,"brushstart","brush","brushend"),_t=null,Lt=null,Ht=[0,0],Wt=[0,0],ee,xe,me=!0,Ie=!0,ze=zi[0];function Xe(Ar){Ar.each(function(){var zr=i.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Jr).on("touchstart.brush",Jr),Yr=zr.selectAll(".background").data([0]);Yr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),zr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Qr=zr.selectAll(".resize").data(ze,F);Qr.exit().remove(),Qr.enter().append("g").attr("class",function(Hn){return"resize "+Hn}).style("cursor",function(Hn){return Li[Hn]}).append("rect").attr("x",function(Hn){return/[ew]$/.test(Hn)?-3:null}).attr("y",function(Hn){return/^[ns]/.test(Hn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Qr.style("display",Xe.empty()?"none":null);var en=i.transition(zr),Xr=i.transition(Yr),On;_t&&(On=Fs(_t),Xr.attr("x",On[0]).attr("width",On[1]-On[0]),wr(en)),Lt&&(On=Fs(Lt),Xr.attr("y",On[0]).attr("height",On[1]-On[0]),Hr(en)),br(en)})}Xe.event=function(Ar){Ar.each(function(){var zr=lt.of(this,arguments),Yr={x:Ht,y:Wt,i:ee,j:xe},Qr=this.__chart__||Yr;this.__chart__=Yr,Tr?i.select(this).transition().each("start.brush",function(){ee=Qr.i,xe=Qr.j,Ht=Qr.x,Wt=Qr.y,zr({type:"brushstart"})}).tween("brush:brush",function(){var en=so(Ht,Yr.x),Xr=so(Wt,Yr.y);return ee=xe=null,function(On){Ht=Yr.x=en(On),Wt=Yr.y=Xr(On),zr({type:"brush",mode:"resize"})}}).each("end.brush",function(){ee=Yr.i,xe=Yr.j,zr({type:"brush",mode:"resize"}),zr({type:"brushend"})}):(zr({type:"brushstart"}),zr({type:"brush",mode:"resize"}),zr({type:"brushend"}))})};function br(Ar){Ar.selectAll(".resize").attr("transform",function(zr){return"translate("+Ht[+/e$/.test(zr)]+","+Wt[+/^s/.test(zr)]+")"})}function wr(Ar){Ar.select(".extent").attr("x",Ht[0]),Ar.selectAll(".extent,.n>rect,.s>rect").attr("width",Ht[1]-Ht[0])}function Hr(Ar){Ar.select(".extent").attr("y",Wt[0]),Ar.selectAll(".extent,.e>rect,.w>rect").attr("height",Wt[1]-Wt[0])}function Jr(){var Ar=this,zr=i.select(i.event.target),Yr=lt.of(Ar,arguments),Qr=i.select(Ar),en=zr.datum(),Xr=!/^(n|s)$/.test(en)&&_t,On=!/^(e|w)$/.test(en)&&Lt,Hn=zr.classed("extent"),ti=Vt(Ar),Yn,Kn=i.mouse(Ar),ei,Ri=i.select(r(Ar)).on("keydown.brush",Hi).on("keyup.brush",_a);if(i.event.changedTouches?Ri.on("touchmove.brush",Xi).on("touchend.brush",Pi):Ri.on("mousemove.brush",Xi).on("mouseup.brush",Pi),Qr.interrupt().selectAll("*").interrupt(),Hn)Kn[0]=Ht[0]-Kn[0],Kn[1]=Wt[0]-Kn[1];else if(en){var di=+/w$/.test(en),Ei=+/^n/.test(en);ei=[Ht[1-di]-Kn[0],Wt[1-Ei]-Kn[1]],Kn[0]=Ht[di],Kn[1]=Wt[Ei]}else i.event.altKey&&(Yn=Kn.slice());Qr.style("pointer-events","none").selectAll(".resize").style("display",null),i.select("body").style("cursor",zr.style("cursor")),Yr({type:"brushstart"}),Xi();function Hi(){i.event.keyCode==32&&(Hn||(Yn=null,Kn[0]-=Ht[1],Kn[1]-=Wt[1],Hn=2),it())}function _a(){i.event.keyCode==32&&Hn==2&&(Kn[0]+=Ht[1],Kn[1]+=Wt[1],Hn=0,it())}function Xi(){var pi=i.mouse(Ar),Fi=!1;ei&&(pi[0]+=ei[0],pi[1]+=ei[1]),Hn||(i.event.altKey?(Yn||(Yn=[(Ht[0]+Ht[1])/2,(Wt[0]+Wt[1])/2]),Kn[0]=Ht[+(pi[0]<Yn[0])],Kn[1]=Wt[+(pi[1]<Yn[1])]):Yn=null),Xr&&Gn(pi,_t,0)&&(wr(Qr),Fi=!0),On&&Gn(pi,Lt,1)&&(Hr(Qr),Fi=!0),Fi&&(br(Qr),Yr({type:"brush",mode:Hn?"move":"resize"}))}function Gn(pi,Fi,oa){var Vi=Fs(Fi),Oa=Vi[0],Pa=Vi[1],Da=Kn[oa],sa=oa?Wt:Ht,Va=sa[1]-sa[0],Qn,vi;if(Hn&&(Oa-=Da,Pa-=Va+Da),Qn=(oa?Ie:me)?Math.max(Oa,Math.min(Pa,pi[oa])):pi[oa],Hn?vi=(Qn+=Da)+Va:(Yn&&(Da=Math.max(Oa,Math.min(Pa,2*Yn[oa]-Qn))),Da<Qn?(vi=Qn,Qn=Da):vi=Da),sa[0]!=Qn||sa[1]!=vi)return oa?xe=null:ee=null,sa[0]=Qn,sa[1]=vi,!0}function Pi(){Xi(),Qr.style("pointer-events","all").selectAll(".resize").style("display",Xe.empty()?"none":null),i.select("body").style("cursor",null),Ri.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ti(),Yr({type:"brushend"})}}return Xe.x=function(Ar){return arguments.length?(_t=Ar,ze=zi[!_t<<1|!Lt],Xe):_t},Xe.y=function(Ar){return arguments.length?(Lt=Ar,ze=zi[!_t<<1|!Lt],Xe):Lt},Xe.clamp=function(Ar){return arguments.length?(_t&&Lt?(me=!!Ar[0],Ie=!!Ar[1]):_t?me=!!Ar:Lt&&(Ie=!!Ar),Xe):_t&&Lt?[me,Ie]:_t?me:Lt?Ie:null},Xe.extent=function(Ar){var zr,Yr,Qr,en,Xr;return arguments.length?(_t&&(zr=Ar[0],Yr=Ar[1],Lt&&(zr=zr[0],Yr=Yr[0]),ee=[zr,Yr],_t.invert&&(zr=_t(zr),Yr=_t(Yr)),Yr<zr&&(Xr=zr,zr=Yr,Yr=Xr),(zr!=Ht[0]||Yr!=Ht[1])&&(Ht=[zr,Yr])),Lt&&(Qr=Ar[0],en=Ar[1],_t&&(Qr=Qr[1],en=en[1]),xe=[Qr,en],Lt.invert&&(Qr=Lt(Qr),en=Lt(en)),en<Qr&&(Xr=Qr,Qr=en,en=Xr),(Qr!=Wt[0]||en!=Wt[1])&&(Wt=[Qr,en])),Xe):(_t&&(ee?(zr=ee[0],Yr=ee[1]):(zr=Ht[0],Yr=Ht[1],_t.invert&&(zr=_t.invert(zr),Yr=_t.invert(Yr)),Yr<zr&&(Xr=zr,zr=Yr,Yr=Xr))),Lt&&(xe?(Qr=xe[0],en=xe[1]):(Qr=Wt[0],en=Wt[1],Lt.invert&&(Qr=Lt.invert(Qr),en=Lt.invert(en)),en<Qr&&(Xr=Qr,Qr=en,en=Xr))),_t&&Lt?[[zr,Qr],[Yr,en]]:_t?[zr,Yr]:Lt&&[Qr,en])},Xe.clear=function(){return Xe.empty()||(Ht=[0,0],Wt=[0,0],ee=xe=null),Xe},Xe.empty=function(){return!!_t&&Ht[0]==Ht[1]||!!Lt&&Wt[0]==Wt[1]},i.rebind(Xe,lt,"on")};var Li={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];i.text=pn(function(lt){return lt.responseText}),i.json=function(lt,_t){return yn(lt,"application/json",$i,_t)};function $i(lt){return JSON.parse(lt.responseText)}i.html=function(lt,_t){return yn(lt,"text/html",xa,_t)};function xa(lt){var _t=v.createRange();return _t.selectNode(v.body),_t.createContextualFragment(lt.responseText)}i.xml=pn(function(lt){return lt.responseXML}),M=i,E=typeof M=="function"?M.call(U,t,U,Q):M,E!==void 0&&(Q.exports=E)}).apply(self)},3480:function(Q){(function(U,t){Q.exports=t()})(this,function(){var U,t,M;function E(i,C){if(!U)U=C;else if(!t)t=C;else{var T="var sharedChunk = {}; ("+U+")(sharedChunk); ("+t+")(sharedChunk);",v={};U(v),M=C(v),typeof window<"u"&&(M.workerUrl=window.URL.createObjectURL(new Blob([T],{type:"text/javascript"})))}}return E(["exports"],function(i){function C(g,z){return z={exports:{}},g(z,z.exports),z.exports}var T="1.13.4",v=d;function d(g,z,j,st){this.cx=3*g,this.bx=3*(j-g)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(st-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=g,this.p1y=st,this.p2x=j,this.p2y=st}d.prototype.sampleCurveX=function(g){return((this.ax*g+this.bx)*g+this.cx)*g},d.prototype.sampleCurveY=function(g){return((this.ay*g+this.by)*g+this.cy)*g},d.prototype.sampleCurveDerivativeX=function(g){return(3*this.ax*g+2*this.bx)*g+this.cx},d.prototype.solveCurveX=function(g,z){typeof z>"u"&&(z=1e-6);var j,st,pt,wt,Rt;for(pt=g,Rt=0;Rt<8;Rt++){if(wt=this.sampleCurveX(pt)-g,Math.abs(wt)<z)return pt;var Jt=this.sampleCurveDerivativeX(pt);if(Math.abs(Jt)<1e-6)break;pt=pt-wt/Jt}if(j=0,st=1,pt=g,pt<j)return j;if(pt>st)return st;for(;j<st;){if(wt=this.sampleCurveX(pt),Math.abs(wt-g)<z)return pt;g>wt?j=pt:st=pt,pt=(st-j)*.5+j}return pt},d.prototype.solve=function(g,z){return this.sampleCurveY(this.solveCurveX(g,z))};var r=e;function e(g,z){this.x=g,this.y=z}e.prototype={clone:function(){return new e(this.x,this.y)},add:function(g){return this.clone()._add(g)},sub:function(g){return this.clone()._sub(g)},multByPoint:function(g){return this.clone()._multByPoint(g)},divByPoint:function(g){return this.clone()._divByPoint(g)},mult:function(g){return this.clone()._mult(g)},div:function(g){return this.clone()._div(g)},rotate:function(g){return this.clone()._rotate(g)},rotateAround:function(g,z){return this.clone()._rotateAround(g,z)},matMult:function(g){return this.clone()._matMult(g)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(g){return this.x===g.x&&this.y===g.y},dist:function(g){return Math.sqrt(this.distSqr(g))},distSqr:function(g){var z=g.x-this.x,j=g.y-this.y;return z*z+j*j},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(g){return Math.atan2(this.y-g.y,this.x-g.x)},angleWith:function(g){return this.angleWithSep(g.x,g.y)},angleWithSep:function(g,z){return Math.atan2(this.x*z-this.y*g,this.x*g+this.y*z)},_matMult:function(g){var z=g[0]*this.x+g[1]*this.y,j=g[2]*this.x+g[3]*this.y;return this.x=z,this.y=j,this},_add:function(g){return this.x+=g.x,this.y+=g.y,this},_sub:function(g){return this.x-=g.x,this.y-=g.y,this},_mult:function(g){return this.x*=g,this.y*=g,this},_div:function(g){return this.x/=g,this.y/=g,this},_multByPoint:function(g){return this.x*=g.x,this.y*=g.y,this},_divByPoint:function(g){return this.x/=g.x,this.y/=g.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var g=this.y;return this.y=this.x,this.x=-g,this},_rotate:function(g){var z=Math.cos(g),j=Math.sin(g),st=z*this.x-j*this.y,pt=j*this.x+z*this.y;return this.x=st,this.y=pt,this},_rotateAround:function(g,z){var j=Math.cos(g),st=Math.sin(g),pt=z.x+j*(this.x-z.x)-st*(this.y-z.y),wt=z.y+st*(this.x-z.x)+j*(this.y-z.y);return this.x=pt,this.y=wt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(g){return g instanceof e?g:Array.isArray(g)?new e(g[0],g[1]):g};var l=typeof self<"u"?self:{};function n(g,z){if(Array.isArray(g)){if(!Array.isArray(z)||g.length!==z.length)return!1;for(var j=0;j<g.length;j++)if(!n(g[j],z[j]))return!1;return!0}if(typeof g=="object"&&g!==null&&z!==null){if(typeof z!="object")return!1;var st=Object.keys(g);if(st.length!==Object.keys(z).length)return!1;for(var pt in g)if(!n(g[pt],z[pt]))return!1;return!0}return g===z}var s=Math.pow(2,53)-1;function o(g){if(g<=0)return 0;if(g>=1)return 1;var z=g*g,j=z*g;return 4*(g<.5?j:3*(g-z)+j-.75)}function p(g,z,j,st){var pt=new v(g,z,j,st);return function(wt){return pt.solve(wt)}}var b=p(.25,.1,.25,1);function h(g,z,j){return Math.min(j,Math.max(z,g))}function _(g,z,j){var st=j-z,pt=((g-z)%st+st)%st+z;return pt===z?j:pt}function a(g,z,j){if(!g.length)return j(null,[]);var st=g.length,pt=new Array(g.length),wt=null;g.forEach(function(Rt,Jt){z(Rt,function(le,we){le&&(wt=le),pt[Jt]=we,--st===0&&j(wt,pt)})})}function c(g){var z=[];for(var j in g)z.push(g[j]);return z}function f(g,z){var j=[];for(var st in g)st in z||j.push(st);return j}function x(g){for(var z=[],j=arguments.length-1;j-- >0;)z[j]=arguments[j+1];for(var st=0,pt=z;st<pt.length;st+=1){var wt=pt[st];for(var Rt in wt)g[Rt]=wt[Rt]}return g}function k(g,z){for(var j={},st=0;st<z.length;st++){var pt=z[st];pt in g&&(j[pt]=g[pt])}return j}var y=1;function A(){return y++}function L(){function g(z){return z?(z^Math.random()*16>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,g)}return g()}function u(g){return g<=1?1:Math.pow(2,Math.ceil(Math.log(g)/Math.LN2))}function m(g){return g?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(g):!1}function S(g,z){g.forEach(function(j){z[j]&&(z[j]=z[j].bind(z))})}function w(g,z){return g.indexOf(z,g.length-z.length)!==-1}function I(g,z,j){var st={};for(var pt in g)st[pt]=z.call(j||this,g[pt],pt,g);return st}function O(g,z,j){var st={};for(var pt in g)z.call(j||this,g[pt],pt,g)&&(st[pt]=g[pt]);return st}function D(g){return Array.isArray(g)?g.map(D):typeof g=="object"&&g?I(g,D):g}function P(g,z){for(var j=0;j<g.length;j++)if(z.indexOf(g[j])>=0)return!0;return!1}var F={};function R(g){F[g]||(typeof console<"u"&&console.warn(g),F[g]=!0)}function B(g,z,j){return(j.y-g.y)*(z.x-g.x)>(z.y-g.y)*(j.x-g.x)}function N(g){for(var z=0,j=0,st=g.length,pt=st-1,wt=void 0,Rt=void 0;j<st;pt=j++)wt=g[j],Rt=g[pt],z+=(Rt.x-wt.x)*(wt.y+Rt.y);return z}function G(g){var z=g[0],j=g[1],st=g[2];return j+=90,j*=Math.PI/180,st*=Math.PI/180,{x:z*Math.cos(j)*Math.sin(st),y:z*Math.sin(j)*Math.sin(st),z:z*Math.cos(st)}}function X(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function J(g){var z=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,j={};if(g.replace(z,function(pt,wt,Rt,Jt){var le=Rt||Jt;return j[wt]=le?le.toLowerCase():!0,""}),j["max-age"]){var st=parseInt(j["max-age"],10);isNaN(st)?delete j["max-age"]:j["max-age"]=st}return j}var it=null;function nt(g){if(it==null){var z=g.navigator?g.navigator.userAgent:null;it=!!g.safari||!!(z&&(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return it}function q(g){try{var z=l[g];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch{return!1}}function Z(g){return l.btoa(encodeURIComponent(g).replace(/%([0-9A-F]{2})/g,function(z,j){return String.fromCharCode(+("0x"+j))}))}function $(g){return decodeURIComponent(l.atob(g).split("").map(function(z){return"%"+("00"+z.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var V=l.performance&&l.performance.now?l.performance.now.bind(l.performance):Date.now.bind(Date),rt=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame||l.msRequestAnimationFrame,ot=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame||l.msCancelAnimationFrame,H,Y,at={now:V,frame:function(g){var z=rt(g);return{cancel:function(){return ot(z)}}},getImageData:function(g,z){z===void 0&&(z=0);var j=l.document.createElement("canvas"),st=j.getContext("2d");if(!st)throw new Error("failed to create canvas 2d context");return j.width=g.width,j.height=g.height,st.drawImage(g,0,0,g.width,g.height),st.getImageData(-z,-z,g.width+2*z,g.height+2*z)},resolveURL:function(g){return H||(H=l.document.createElement("a")),H.href=g,H.href},hardwareConcurrency:l.navigator&&l.navigator.hardwareConcurrency||4,get devicePixelRatio(){return l.devicePixelRatio},get prefersReducedMotion(){return l.matchMedia?(Y==null&&(Y=l.matchMedia("(prefers-reduced-motion: reduce)")),Y.matches):!1}},et={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ct={supported:!1,testSupport:gt},ft,yt=!1,xt,Ct=!1;l.document&&(xt=l.document.createElement("img"),xt.onload=function(){ft&&mt(ft),ft=null,Ct=!0},xt.onerror=function(){yt=!0,ft=null},xt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function gt(g){yt||!xt||(Ct?mt(g):ft=g)}function mt(g){var z=g.createTexture();g.bindTexture(g.TEXTURE_2D,z);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,xt),g.isContextLost())return;ct.supported=!0}catch{}g.deleteTexture(z),yt=!0}var vt="01";function At(){for(var g="1",z="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",j="",st=0;st<10;st++)j+=z[Math.floor(Math.random()*62)];var pt=12*60*60*1e3,wt=[g,vt,j].join(""),Rt=Date.now()+pt;return{token:wt,tokenExpiresAt:Rt}}var Ot=function(g,z){this._transformRequestFn=g,this._customAccessToken=z,this._createSkuToken()};Ot.prototype._createSkuToken=function(){var g=At();this._skuToken=g.token,this._skuTokenExpiresAt=g.tokenExpiresAt},Ot.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Ot.prototype.transformRequest=function(g,z){return this._transformRequestFn?this._transformRequestFn(g,z)||{url:g}:{url:g}},Ot.prototype.normalizeStyleURL=function(g,z){if(!It(g))return g;var j=Zt(g);return j.path="/styles/v1"+j.path,this._makeAPIURL(j,this._customAccessToken||z)},Ot.prototype.normalizeGlyphsURL=function(g,z){if(!It(g))return g;var j=Zt(g);return j.path="/fonts/v1"+j.path,this._makeAPIURL(j,this._customAccessToken||z)},Ot.prototype.normalizeSourceURL=function(g,z){if(!It(g))return g;var j=Zt(g);return j.path="/v4/"+j.authority+".json",j.params.push("secure"),this._makeAPIURL(j,this._customAccessToken||z)},Ot.prototype.normalizeSpriteURL=function(g,z,j,st){var pt=Zt(g);return It(g)?(pt.path="/styles/v1"+pt.path+"/sprite"+z+j,this._makeAPIURL(pt,this._customAccessToken||st)):(pt.path+=""+z+j,ae(pt))},Ot.prototype.normalizeTileURL=function(g,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),g&&!It(g))return g;var j=Zt(g),st=/(\.(png|jpg)\d*)(?=$)/,pt=/^.+\/v4\//,wt=at.devicePixelRatio>=2||z===512?"@2x":"",Rt=ct.supported?".webp":"$1";j.path=j.path.replace(st,""+wt+Rt),j.path=j.path.replace(pt,"/"),j.path="/v4"+j.path;var Jt=this._customAccessToken||Yt(j.params)||et.ACCESS_TOKEN;return et.REQUIRE_ACCESS_TOKEN&&Jt&&this._skuToken&&j.params.push("sku="+this._skuToken),this._makeAPIURL(j,Jt)},Ot.prototype.canonicalizeTileURL=function(g,z){var j="/v4/",st=/\.[\w]+$/,pt=Zt(g);if(!pt.path.match(/(^\/v4\/)/)||!pt.path.match(st))return g;var wt="mapbox://tiles/";wt+=pt.path.replace(j,"");var Rt=pt.params;return z&&(Rt=Rt.filter(function(Jt){return!Jt.match(/^access_token=/)})),Rt.length&&(wt+="?"+Rt.join("&")),wt},Ot.prototype.canonicalizeTileset=function(g,z){for(var j=z?It(z):!1,st=[],pt=0,wt=g.tiles||[];pt<wt.length;pt+=1){var Rt=wt[pt];Bt(Rt)?st.push(this.canonicalizeTileURL(Rt,j)):st.push(Rt)}return st},Ot.prototype._makeAPIURL=function(g,z){var j="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",st=Zt(et.API_URL);if(g.protocol=st.protocol,g.authority=st.authority,g.protocol==="http"){var pt=g.params.indexOf("secure");pt>=0&&g.params.splice(pt,1)}if(st.path!=="/"&&(g.path=""+st.path+g.path),!et.REQUIRE_ACCESS_TOKEN)return ae(g);if(z=z||et.ACCESS_TOKEN,!z)throw new Error("An API access token is required to use Mapbox GL. "+j);if(z[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+j);return g.params=g.params.filter(function(wt){return wt.indexOf("access_token")===-1}),g.params.push("access_token="+z),ae(g)};function It(g){return g.indexOf("mapbox:")===0}var St=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Bt(g){return St.test(g)}function re(g){return g.indexOf("sku=")>0&&Bt(g)}function Yt(g){for(var z=0,j=g;z<j.length;z+=1){var st=j[z],pt=st.match(/^access_token=(.*)$/);if(pt)return pt[1]}return null}var he=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Zt(g){var z=g.match(he);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function ae(g){var z=g.params.length?"?"+g.params.join("&"):"";return g.protocol+"://"+g.authority+g.path+z}var oe="mapbox.eventData";function ce(g){if(!g)return null;var z=g.split(".");if(!z||z.length!==3)return null;try{var j=JSON.parse($(z[1]));return j}catch{return null}}var ue=function(g){this.type=g,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};ue.prototype.getStorageKey=function(g){var z=ce(et.ACCESS_TOKEN),j="";return z&&z.u?j=Z(z.u):j=et.ACCESS_TOKEN||"",g?oe+"."+g+":"+j:oe+":"+j},ue.prototype.fetchEventData=function(){var g=q("localStorage"),z=this.getStorageKey(),j=this.getStorageKey("uuid");if(g)try{var st=l.localStorage.getItem(z);st&&(this.eventData=JSON.parse(st));var pt=l.localStorage.getItem(j);pt&&(this.anonId=pt)}catch{R("Unable to read from LocalStorage")}},ue.prototype.saveEventData=function(){var g=q("localStorage"),z=this.getStorageKey(),j=this.getStorageKey("uuid");if(g)try{l.localStorage.setItem(j,this.anonId),Object.keys(this.eventData).length>=1&&l.localStorage.setItem(z,JSON.stringify(this.eventData))}catch{R("Unable to write to LocalStorage")}},ue.prototype.processRequests=function(g){},ue.prototype.postEvent=function(g,z,j,st){var pt=this;if(et.EVENTS_URL){var wt=Zt(et.EVENTS_URL);wt.params.push("access_token="+(st||et.ACCESS_TOKEN||""));var Rt={event:this.type,created:new Date(g).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:T,skuId:vt,userId:this.anonId},Jt=z?x(Rt,z):Rt,le={url:ae(wt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Jt])};this.pendingRequest=be(le,function(we){pt.pendingRequest=null,j(we),pt.saveEventData(),pt.processRequests(st)})}},ue.prototype.queueRequest=function(g,z){this.queue.push(g),this.processRequests(z)};var ye=function(g){function z(){g.call(this,"map.load"),this.success={},this.skuToken=""}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.postMapLoadEvent=function(j,st,pt,wt){this.skuToken=pt,(et.EVENTS_URL&&wt||et.ACCESS_TOKEN&&Array.isArray(j)&&j.some(function(Rt){return It(Rt)||Bt(Rt)}))&&this.queueRequest({id:st,timestamp:Date.now()},wt)},z.prototype.processRequests=function(j){var st=this;if(!(this.pendingRequest||this.queue.length===0)){var pt=this.queue.shift(),wt=pt.id,Rt=pt.timestamp;wt&&this.success[wt]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=L()),this.postEvent(Rt,{skuToken:this.skuToken},function(Jt){Jt||wt&&(st.success[wt]=!0)},j))}},z}(ue),Tt=function(g){function z(j){g.call(this,"appUserTurnstile"),this._customAccessToken=j}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.postTurnstileEvent=function(j,st){et.EVENTS_URL&&et.ACCESS_TOKEN&&Array.isArray(j)&&j.some(function(pt){return It(pt)||Bt(pt)})&&this.queueRequest(Date.now(),st)},z.prototype.processRequests=function(j){var st=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var pt=ce(et.ACCESS_TOKEN),wt=pt?pt.u:et.ACCESS_TOKEN,Rt=wt!==this.eventData.tokenU;m(this.anonId)||(this.anonId=L(),Rt=!0);var Jt=this.queue.shift();if(this.eventData.lastSuccess){var le=new Date(this.eventData.lastSuccess),we=new Date(Jt),Pe=(Jt-this.eventData.lastSuccess)/(24*60*60*1e3);Rt=Rt||Pe>=1||Pe<-1||le.getDate()!==we.getDate()}else Rt=!0;if(!Rt)return this.processRequests();this.postEvent(Jt,{"enabled.telemetry":!1},function(Ue){Ue||(st.eventData.lastSuccess=Jt,st.eventData.tokenU=wt)},j)}},z}(ue),Ft=new Tt,$t=Ft.postTurnstileEvent.bind(Ft),Vt=new ye,Nt=Vt.postMapLoadEvent.bind(Vt),Mt="mapbox-tiles",Et=500,Dt=50,dt=1e3*60*7,ht;function bt(){l.caches&&!ht&&(ht=l.caches.open(Mt))}var Pt;function Gt(g,z){if(Pt===void 0)try{new Response(new ReadableStream),Pt=!0}catch{Pt=!1}Pt?z(g.body):g.blob().then(z)}function te(g,z,j){if(bt(),!!ht){var st={status:z.status,statusText:z.statusText,headers:new l.Headers};z.headers.forEach(function(Rt,Jt){return st.headers.set(Jt,Rt)});var pt=J(z.headers.get("Cache-Control")||"");if(!pt["no-store"]){pt["max-age"]&&st.headers.set("Expires",new Date(j+pt["max-age"]*1e3).toUTCString());var wt=new Date(st.headers.get("Expires")).getTime()-j;wt<dt||Gt(z,function(Rt){var Jt=new l.Response(Rt,st);bt(),ht&&ht.then(function(le){return le.put(ne(g.url),Jt)}).catch(function(le){return R(le.message)})})}}}function ne(g){var z=g.indexOf("?");return z<0?g:g.slice(0,z)}function je(g,z){if(bt(),!ht)return z(null);var j=ne(g.url);ht.then(function(st){st.match(j).then(function(pt){var wt=Ne(pt);st.delete(j),wt&&st.put(j,pt.clone()),z(null,pt,wt)}).catch(z)}).catch(z)}function Ne(g){if(!g)return!1;var z=new Date(g.headers.get("Expires")||0),j=J(g.headers.get("Cache-Control")||"");return z>Date.now()&&!j["no-cache"]}var ge=1/0;function _e(g){ge++,ge>Dt&&(g.getActor().send("enforceCacheSizeLimit",Et),ge=0)}function De(g){bt(),ht&&ht.then(function(z){z.keys().then(function(j){for(var st=0;st<j.length-g;st++)z.delete(j[st])})})}function hr(g){var z=l.caches.delete(Mt);g&&z.catch(g).then(function(){return g()})}function fe(g,z){Et=g,Dt=z}var Be;function He(){return Be==null&&(Be=l.OffscreenCanvas&&new l.OffscreenCanvas(1,1).getContext("2d")&&typeof l.createImageBitmap=="function"),Be}var pr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(pr);var Ze=function(g){function z(j,st,pt){st===401&&Bt(pt)&&(j+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),g.call(this,j),this.status=st,this.url=pt,this.name=this.constructor.name,this.message=j}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Xt=X()?function(){return self.worker&&self.worker.referrer}:function(){return(l.location.protocol==="blob:"?l.parent:l).location.href},ie=function(g){return/^file:/.test(g)||/^file:/.test(Xt())&&!/^\w+:/.test(g)};function pe(g,z){var j=new l.AbortController,st=new l.Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,referrer:Xt(),signal:j.signal}),pt=!1,wt=!1,Rt=re(st.url);g.type==="json"&&st.headers.set("Accept","application/json");var Jt=function(we,Pe,Ue){if(!wt){if(we&&we.message!=="SecurityError"&&R(we),Pe&&Ue)return le(Pe);var Ve=Date.now();l.fetch(st).then(function(er){if(er.ok){var _r=Rt?er.clone():null;return le(er,_r,Ve)}else return z(new Ze(er.statusText,er.status,g.url))}).catch(function(er){er.code!==20&&z(new Error(er.message))})}},le=function(we,Pe,Ue){(g.type==="arrayBuffer"?we.arrayBuffer():g.type==="json"?we.json():we.text()).then(function(Ve){wt||(Pe&&Ue&&te(st,Pe,Ue),pt=!0,z(null,Ve,we.headers.get("Cache-Control"),we.headers.get("Expires")))}).catch(function(Ve){wt||z(new Error(Ve.message))})};return Rt?je(st,Jt):Jt(null,null),{cancel:function(){wt=!0,pt||j.abort()}}}function ke(g,z){var j=new l.XMLHttpRequest;j.open(g.method||"GET",g.url,!0),g.type==="arrayBuffer"&&(j.responseType="arraybuffer");for(var st in g.headers)j.setRequestHeader(st,g.headers[st]);return g.type==="json"&&(j.responseType="text",j.setRequestHeader("Accept","application/json")),j.withCredentials=g.credentials==="include",j.onerror=function(){z(new Error(j.statusText))},j.onload=function(){if((j.status>=200&&j.status<300||j.status===0)&&j.response!==null){var pt=j.response;if(g.type==="json")try{pt=JSON.parse(j.response)}catch(wt){return z(wt)}z(null,pt,j.getResponseHeader("Cache-Control"),j.getResponseHeader("Expires"))}else z(new Ze(j.statusText,j.status,g.url))},j.send(g.body),{cancel:function(){return j.abort()}}}var Ce=function(g,z){if(!ie(g.url)){if(l.fetch&&l.Request&&l.AbortController&&l.Request.prototype.hasOwnProperty("signal"))return pe(g,z);if(X()&&self.worker&&self.worker.actor){var j=!0;return self.worker.actor.send("getResource",g,z,void 0,j)}}return ke(g,z)},Fe=function(g,z){return Ce(x(g,{type:"json"}),z)},Re=function(g,z){return Ce(x(g,{type:"arrayBuffer"}),z)},be=function(g,z){return Ce(x(g,{method:"POST"}),z)};function Ge(g){var z=l.document.createElement("a");return z.href=g,z.protocol===l.document.location.protocol&&z.host===l.document.location.host}var Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function or(g,z,j,st){var pt=new l.Image,wt=l.URL;pt.onload=function(){z(null,pt),wt.revokeObjectURL(pt.src),pt.onload=null,l.requestAnimationFrame(function(){pt.src=Ke})},pt.onerror=function(){return z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Rt=new l.Blob([new Uint8Array(g)],{type:"image/png"});pt.cacheControl=j,pt.expires=st,pt.src=g.byteLength?wt.createObjectURL(Rt):Ke}function sr(g,z){var j=new l.Blob([new Uint8Array(g)],{type:"image/png"});l.createImageBitmap(j).then(function(st){z(null,st)}).catch(function(st){z(new Error("Could not load image because of "+st.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var zt,Ut,Me=function(){zt=[],Ut=0};Me();var Te=function(g,z){if(ct.supported&&(g.headers||(g.headers={}),g.headers.accept="image/webp,*/*"),Ut>=et.MAX_PARALLEL_IMAGE_REQUESTS){var j={requestParameters:g,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return zt.push(j),j}Ut++;var st=!1,pt=function(){if(!st)for(st=!0,Ut--;zt.length&&Ut<et.MAX_PARALLEL_IMAGE_REQUESTS;){var Rt=zt.shift(),Jt=Rt.requestParameters,le=Rt.callback,we=Rt.cancelled;we||(Rt.cancel=Te(Jt,le).cancel)}},wt=Re(g,function(Rt,Jt,le,we){pt(),Rt?z(Rt):Jt&&(He()?sr(Jt,z):or(Jt,z,le,we))});return{cancel:function(){wt.cancel(),pt()}}},qe=function(g,z){var j=l.document.createElement("video");j.muted=!0,j.onloadstart=function(){z(null,j)};for(var st=0;st<g.length;st++){var pt=l.document.createElement("source");Ge(g[st])||(j.crossOrigin="Anonymous"),pt.src=g[st],j.appendChild(pt)}return{cancel:function(){}}};function Qe(g,z,j){var st=j[g]&&j[g].indexOf(z)!==-1;st||(j[g]=j[g]||[],j[g].push(z))}function Je(g,z,j){if(j&&j[g]){var st=j[g].indexOf(z);st!==-1&&j[g].splice(st,1)}}var We=function(g,z){z===void 0&&(z={}),x(this,z),this.type=g},Oe=function(g){function z(j,st){st===void 0&&(st={}),g.call(this,"error",x({error:j},st))}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z}(We),rr=function(){};rr.prototype.on=function(g,z){return this._listeners=this._listeners||{},Qe(g,z,this._listeners),this},rr.prototype.off=function(g,z){return Je(g,z,this._listeners),Je(g,z,this._oneTimeListeners),this},rr.prototype.once=function(g,z){return this._oneTimeListeners=this._oneTimeListeners||{},Qe(g,z,this._oneTimeListeners),this},rr.prototype.fire=function(g,z){typeof g=="string"&&(g=new We(g,z||{}));var j=g.type;if(this.listens(j)){g.target=this;for(var st=this._listeners&&this._listeners[j]?this._listeners[j].slice():[],pt=0,wt=st;pt<wt.length;pt+=1){var Rt=wt[pt];Rt.call(this,g)}for(var Jt=this._oneTimeListeners&&this._oneTimeListeners[j]?this._oneTimeListeners[j].slice():[],le=0,we=Jt;le<we.length;le+=1){var Pe=we[le];Je(j,Pe,this._oneTimeListeners),Pe.call(this,g)}var Ue=this._eventedParent;Ue&&(x(g,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Ue.fire(g))}else g instanceof Oe&&console.error(g.error);return this},rr.prototype.listens=function(g){return this._listeners&&this._listeners[g]&&this._listeners[g].length>0||this._oneTimeListeners&&this._oneTimeListeners[g]&&this._oneTimeListeners[g].length>0||this._eventedParent&&this._eventedParent.listens(g)},rr.prototype.setEventedParent=function(g,z){return this._eventedParent=g,this._eventedParentData=z,this};var cr=8,lr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},nr={"*":{type:"source"}},Sr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],kr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Mr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},rn={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Ur={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},pn={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},yn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},yr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Cr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Dr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Nr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$r={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},fn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},on={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},In={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},En={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$n={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ri={type:"array",value:"*"},ui={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},ni={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},zn={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},ur={type:"array",value:"*",minimum:1},Gr={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},qr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],an={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Mn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},sn={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},An={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Sn={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},qn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ii={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Mi={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},dr={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Er={"*":{type:"string"}},gr={$version:cr,$root:lr,sources:nr,source:Sr,source_vector:kr,source_raster:Mr,source_raster_dem:rn,source_geojson:Ur,source_video:pn,source_image:yn,layer:yr,layout:Cr,layout_background:Dr,layout_fill:Nr,layout_circle:$r,layout_heatmap:fn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:on,layout_symbol:In,layout_raster:En,layout_hillshade:$n,filter:ri,filter_operator:ui,geometry_type:ni,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:zn,expression:ur,light:Gr,paint:qr,paint_fill:an,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Mn,paint_circle:sn,paint_heatmap:An,paint_symbol:Sn,paint_raster:qn,paint_hillshade:ii,paint_background:Mi,transition:dr,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Er},Or=function(g,z,j,st){this.message=(g?g+": ":"")+j,st&&(this.identifier=st),z!=null&&z.__line__&&(this.line=z.__line__)};function vn(g){var z=g.key,j=g.value;return j?[new Or(z,j,"constants have been deprecated as of v8")]:[]}function Tn(g){for(var z=[],j=arguments.length-1;j-- >0;)z[j]=arguments[j+1];for(var st=0,pt=z;st<pt.length;st+=1){var wt=pt[st];for(var Rt in wt)g[Rt]=wt[Rt]}return g}function ln(g){return g instanceof Number||g instanceof String||g instanceof Boolean?g.valueOf():g}function nn(g){if(Array.isArray(g))return g.map(nn);if(g instanceof Object&&!(g instanceof Number||g instanceof String||g instanceof Boolean)){var z={};for(var j in g)z[j]=nn(g[j]);return z}return ln(g)}var xr=function(g){function z(j,st){g.call(this,st),this.message=st,this.key=j}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z}(Error),jr=function(g,z){z===void 0&&(z=[]),this.parent=g,this.bindings={};for(var j=0,st=z;j<st.length;j+=1){var pt=st[j],wt=pt[0],Rt=pt[1];this.bindings[wt]=Rt}};jr.prototype.concat=function(g){return new jr(this,g)},jr.prototype.get=function(g){if(this.bindings[g])return this.bindings[g];if(this.parent)return this.parent.get(g);throw new Error(g+" not found in scope.")},jr.prototype.has=function(g){return this.bindings[g]?!0:this.parent?this.parent.has(g):!1};var Pr={kind:"null"},Vr={kind:"number"},mn={kind:"string"},xn={kind:"boolean"},_n={kind:"color"},Rn={kind:"object"},Cn={kind:"value"},oi={kind:"error"},Jn={kind:"collator"},ai={kind:"formatted"},_i={kind:"resolvedImage"};function ta(g,z){return{kind:"array",itemType:g,N:z}}function Yi(g){if(g.kind==="array"){var z=Yi(g.itemType);return typeof g.N=="number"?"array<"+z+", "+g.N+">":g.itemType.kind==="value"?"array":"array<"+z+">"}else return g.kind}var oo=[Pr,Vr,mn,xn,_n,ai,Rn,ta(Cn),_i];function $a(g,z){if(z.kind==="error")return null;if(g.kind==="array"){if(z.kind==="array"&&(z.N===0&&z.itemType.kind==="value"||!$a(g.itemType,z.itemType))&&(typeof g.N!="number"||g.N===z.N))return null}else{if(g.kind===z.kind)return null;if(g.kind==="value")for(var j=0,st=oo;j<st.length;j+=1){var pt=st[j];if(!$a(pt,z))return null}}return"Expected "+Yi(g)+" but found "+Yi(z)+" instead."}function Ia(g,z){return z.some(function(j){return j.kind===g.kind})}function Ts(g,z){return z.some(function(j){return j==="null"?g===null:j==="array"?Array.isArray(g):j==="object"?g&&!Array.isArray(g)&&typeof g=="object":j===typeof g})}var Gl=C(function(g,z){var j={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function st(we){return we=Math.round(we),we<0?0:we>255?255:we}function pt(we){return we<0?0:we>1?1:we}function wt(we){return we[we.length-1]==="%"?st(parseFloat(we)/100*255):st(parseInt(we))}function Rt(we){return we[we.length-1]==="%"?pt(parseFloat(we)/100):pt(parseFloat(we))}function Jt(we,Pe,Ue){return Ue<0?Ue+=1:Ue>1&&(Ue-=1),Ue*6<1?we+(Pe-we)*Ue*6:Ue*2<1?Pe:Ue*3<2?we+(Pe-we)*(2/3-Ue)*6:we}function le(we){var Pe=we.replace(/ /g,"").toLowerCase();if(Pe in j)return j[Pe].slice();if(Pe[0]==="#"){if(Pe.length===4){var Ue=parseInt(Pe.substr(1),16);return Ue>=0&&Ue<=4095?[(Ue&3840)>>4|(Ue&3840)>>8,Ue&240|(Ue&240)>>4,Ue&15|(Ue&15)<<4,1]:null}else if(Pe.length===7){var Ue=parseInt(Pe.substr(1),16);return Ue>=0&&Ue<=16777215?[(Ue&16711680)>>16,(Ue&65280)>>8,Ue&255,1]:null}return null}var Ve=Pe.indexOf("("),er=Pe.indexOf(")");if(Ve!==-1&&er+1===Pe.length){var _r=Pe.substr(0,Ve),Ir=Pe.substr(Ve+1,er-(Ve+1)).split(","),un=1;switch(_r){case"rgba":if(Ir.length!==4)return null;un=Rt(Ir.pop());case"rgb":return Ir.length!==3?null:[wt(Ir[0]),wt(Ir[1]),wt(Ir[2]),un];case"hsla":if(Ir.length!==4)return null;un=Rt(Ir.pop());case"hsl":if(Ir.length!==3)return null;var tn=(parseFloat(Ir[0])%360+360)%360/360,gn=Rt(Ir[1]),bn=Rt(Ir[2]),hn=bn<=.5?bn*(gn+1):bn+gn-bn*gn,Ln=bn*2-hn;return[st(Jt(Ln,hn,tn+1/3)*255),st(Jt(Ln,hn,tn)*255),st(Jt(Ln,hn,tn-1/3)*255),un];default:return null}}return null}try{z.parseCSSColor=le}catch{}}),du=Gl.parseCSSColor,qi=function(g,z,j,st){st===void 0&&(st=1),this.r=g,this.g=z,this.b=j,this.a=st};qi.parse=function(g){if(g){if(g instanceof qi)return g;if(typeof g=="string"){var z=du(g);if(z)return new qi(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},qi.prototype.toString=function(){var g=this.toArray(),z=g[0],j=g[1],st=g[2],pt=g[3];return"rgba("+Math.round(z)+","+Math.round(j)+","+Math.round(st)+","+pt+")"},qi.prototype.toArray=function(){var g=this,z=g.r,j=g.g,st=g.b,pt=g.a;return pt===0?[0,0,0,0]:[z*255/pt,j*255/pt,st*255/pt,pt]},qi.black=new qi(0,0,0,1),qi.white=new qi(1,1,1,1),qi.transparent=new qi(0,0,0,0),qi.red=new qi(1,0,0,1);var Vs=function(g,z,j){g?this.sensitivity=z?"variant":"case":this.sensitivity=z?"accent":"base",this.locale=j,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Vs.prototype.compare=function(g,z){return this.collator.compare(g,z)},Vs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Yl=function(g,z,j,st,pt){this.text=g,this.image=z,this.scale=j,this.fontStack=st,this.textColor=pt},Ea=function(g){this.sections=g};Ea.fromString=function(g){return new Ea([new Yl(g,null,null,null,null)])},Ea.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(g){return g.text.length!==0||g.image&&g.image.name.length!==0})},Ea.factory=function(g){return g instanceof Ea?g:Ea.fromString(g)},Ea.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(g){return g.text}).join("")},Ea.prototype.serialize=function(){for(var g=["format"],z=0,j=this.sections;z<j.length;z+=1){var st=j[z];if(st.image){g.push(["image",st.image.name]);continue}g.push(st.text);var pt={};st.fontStack&&(pt["text-font"]=["literal",st.fontStack.split(",")]),st.scale&&(pt["font-scale"]=st.scale),st.textColor&&(pt["text-color"]=["rgba"].concat(st.textColor.toArray())),g.push(pt)}return g};var Xa=function(g){this.name=g.name,this.available=g.available};Xa.prototype.toString=function(){return this.name},Xa.fromString=function(g){return g?new Xa({name:g,available:!1}):null},Xa.prototype.serialize=function(){return["image",this.name]};function ks(g,z,j,st){if(!(typeof g=="number"&&g>=0&&g<=255&&typeof z=="number"&&z>=0&&z<=255&&typeof j=="number"&&j>=0&&j<=255)){var pt=typeof st=="number"?[g,z,j,st]:[g,z,j];return"Invalid rgba value ["+pt.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof st>"u"||typeof st=="number"&&st>=0&&st<=1?null:"Invalid rgba value ["+[g,z,j,st].join(", ")+"]: 'a' must be between 0 and 1."}function bl(g){if(g===null||typeof g=="string"||typeof g=="boolean"||typeof g=="number"||g instanceof qi||g instanceof Vs||g instanceof Ea||g instanceof Xa)return!0;if(Array.isArray(g)){for(var z=0,j=g;z<j.length;z+=1){var st=j[z];if(!bl(st))return!1}return!0}else if(typeof g=="object"){for(var pt in g)if(!bl(g[pt]))return!1;return!0}else return!1}function ma(g){if(g===null)return Pr;if(typeof g=="string")return mn;if(typeof g=="boolean")return xn;if(typeof g=="number")return Vr;if(g instanceof qi)return _n;if(g instanceof Vs)return Jn;if(g instanceof Ea)return ai;if(g instanceof Xa)return _i;if(Array.isArray(g)){for(var z=g.length,j,st=0,pt=g;st<pt.length;st+=1){var wt=pt[st],Rt=ma(wt);if(!j)j=Rt;else{if(j===Rt)continue;j=Cn;break}}return ta(j||Cn,z)}else return Rn}function Ms(g){var z=typeof g;return g===null?"":z==="string"||z==="number"||z==="boolean"?String(g):g instanceof qi||g instanceof Ea||g instanceof Xa?g.toString():JSON.stringify(g)}var ba=function(g,z){this.type=g,this.value=z};ba.parse=function(g,z){if(g.length!==2)return z.error("'literal' expression requires exactly one argument, but found "+(g.length-1)+" instead.");if(!bl(g[1]))return z.error("invalid value");var j=g[1],st=ma(j),pt=z.expectedType;return st.kind==="array"&&st.N===0&&pt&&pt.kind==="array"&&(typeof pt.N!="number"||pt.N===0)&&(st=pt),new ba(st,j)},ba.prototype.evaluate=function(){return this.value},ba.prototype.eachChild=function(){},ba.prototype.outputDefined=function(){return!0},ba.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof qi?["rgba"].concat(this.value.toArray()):this.value instanceof Ea?this.value.serialize():this.value};var ka=function(g){this.name="ExpressionEvaluationError",this.message=g};ka.prototype.toJSON=function(){return this.message};var Ss={string:mn,number:Vr,boolean:xn,object:Rn},za=function(g,z){this.type=g,this.args=z};za.parse=function(g,z){if(g.length<2)return z.error("Expected at least one argument.");var j=1,st,pt=g[0];if(pt==="array"){var wt;if(g.length>2){var Rt=g[1];if(typeof Rt!="string"||!(Rt in Ss)||Rt==="object")return z.error('The item type argument of "array" must be one of string, number, boolean',1);wt=Ss[Rt],j++}else wt=Cn;var Jt;if(g.length>3){if(g[2]!==null&&(typeof g[2]!="number"||g[2]<0||g[2]!==Math.floor(g[2])))return z.error('The length argument to "array" must be a positive integer literal',2);Jt=g[2],j++}st=ta(wt,Jt)}else st=Ss[pt];for(var le=[];j<g.length;j++){var we=z.parse(g[j],j,Cn);if(!we)return null;le.push(we)}return new za(st,le)},za.prototype.evaluate=function(g){for(var z=0;z<this.args.length;z++){var j=this.args[z].evaluate(g),st=$a(this.type,ma(j));if(st){if(z===this.args.length-1)throw new ka("Expected value to be of type "+Yi(this.type)+", but found "+Yi(ma(j))+" instead.")}else return j}return null},za.prototype.eachChild=function(g){this.args.forEach(g)},za.prototype.outputDefined=function(){return this.args.every(function(g){return g.outputDefined()})},za.prototype.serialize=function(){var g=this.type,z=[g.kind];if(g.kind==="array"){var j=g.itemType;if(j.kind==="string"||j.kind==="number"||j.kind==="boolean"){z.push(j.kind);var st=g.N;(typeof st=="number"||this.args.length>1)&&z.push(st)}}return z.concat(this.args.map(function(pt){return pt.serialize()}))};var Fa=function(g){this.type=ai,this.sections=g};Fa.parse=function(g,z){if(g.length<2)return z.error("Expected at least one argument.");var j=g[1];if(!Array.isArray(j)&&typeof j=="object")return z.error("First argument must be an image or text section.");for(var st=[],pt=!1,wt=1;wt<=g.length-1;++wt){var Rt=g[wt];if(pt&&typeof Rt=="object"&&!Array.isArray(Rt)){pt=!1;var Jt=null;if(Rt["font-scale"]&&(Jt=z.parse(Rt["font-scale"],1,Vr),!Jt))return null;var le=null;if(Rt["text-font"]&&(le=z.parse(Rt["text-font"],1,ta(mn)),!le))return null;var we=null;if(Rt["text-color"]&&(we=z.parse(Rt["text-color"],1,_n),!we))return null;var Pe=st[st.length-1];Pe.scale=Jt,Pe.font=le,Pe.textColor=we}else{var Ue=z.parse(g[wt],1,Cn);if(!Ue)return null;var Ve=Ue.type.kind;if(Ve!=="string"&&Ve!=="value"&&Ve!=="null"&&Ve!=="resolvedImage")return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");pt=!0,st.push({content:Ue,scale:null,font:null,textColor:null})}}return new Fa(st)},Fa.prototype.evaluate=function(g){var z=function(j){var st=j.content.evaluate(g);return ma(st)===_i?new Yl("",st,null,null,null):new Yl(Ms(st),null,j.scale?j.scale.evaluate(g):null,j.font?j.font.evaluate(g).join(","):null,j.textColor?j.textColor.evaluate(g):null)};return new Ea(this.sections.map(z))},Fa.prototype.eachChild=function(g){for(var z=0,j=this.sections;z<j.length;z+=1){var st=j[z];g(st.content),st.scale&&g(st.scale),st.font&&g(st.font),st.textColor&&g(st.textColor)}},Fa.prototype.outputDefined=function(){return!1},Fa.prototype.serialize=function(){for(var g=["format"],z=0,j=this.sections;z<j.length;z+=1){var st=j[z];g.push(st.content.serialize());var pt={};st.scale&&(pt["font-scale"]=st.scale.serialize()),st.font&&(pt["text-font"]=st.font.serialize()),st.textColor&&(pt["text-color"]=st.textColor.serialize()),g.push(pt)}return g};var so=function(g){this.type=_i,this.input=g};so.parse=function(g,z){if(g.length!==2)return z.error("Expected two arguments.");var j=z.parse(g[1],1,mn);return j?new so(j):z.error("No image name provided.")},so.prototype.evaluate=function(g){var z=this.input.evaluate(g),j=Xa.fromString(z);return j&&g.availableImages&&(j.available=g.availableImages.indexOf(z)>-1),j},so.prototype.eachChild=function(g){g(this.input)},so.prototype.outputDefined=function(){return!1},so.prototype.serialize=function(){return["image",this.input.serialize()]};var vu={"to-boolean":xn,"to-color":_n,"to-number":Vr,"to-string":mn},Qa=function(g,z){this.type=g,this.args=z};Qa.parse=function(g,z){if(g.length<2)return z.error("Expected at least one argument.");var j=g[0];if((j==="to-boolean"||j==="to-string")&&g.length!==2)return z.error("Expected one argument.");for(var st=vu[j],pt=[],wt=1;wt<g.length;wt++){var Rt=z.parse(g[wt],wt,Cn);if(!Rt)return null;pt.push(Rt)}return new Qa(st,pt)},Qa.prototype.evaluate=function(g){if(this.type.kind==="boolean")return!!this.args[0].evaluate(g);if(this.type.kind==="color"){for(var z,j,st=0,pt=this.args;st<pt.length;st+=1){var wt=pt[st];if(z=wt.evaluate(g),j=null,z instanceof qi)return z;if(typeof z=="string"){var Rt=g.parseColor(z);if(Rt)return Rt}else if(Array.isArray(z)&&(z.length<3||z.length>4?j="Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":j=ks(z[0],z[1],z[2],z[3]),!j))return new qi(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new ka(j||"Could not parse color from value '"+(typeof z=="string"?z:String(JSON.stringify(z)))+"'")}else if(this.type.kind==="number"){for(var Jt=null,le=0,we=this.args;le<we.length;le+=1){var Pe=we[le];if(Jt=Pe.evaluate(g),Jt===null)return 0;var Ue=Number(Jt);if(!isNaN(Ue))return Ue}throw new ka("Could not convert "+JSON.stringify(Jt)+" to number.")}else return this.type.kind==="formatted"?Ea.fromString(Ms(this.args[0].evaluate(g))):this.type.kind==="resolvedImage"?Xa.fromString(Ms(this.args[0].evaluate(g))):Ms(this.args[0].evaluate(g))},Qa.prototype.eachChild=function(g){this.args.forEach(g)},Qa.prototype.outputDefined=function(){return this.args.every(function(g){return g.outputDefined()})},Qa.prototype.serialize=function(){if(this.type.kind==="formatted")return new Fa([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new so(this.args[0]).serialize();var g=["to-"+this.type.kind];return this.eachChild(function(z){g.push(z.serialize())}),g};var Ku=["Unknown","Point","LineString","Polygon"],Ro=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ro.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ro.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Ku[this.feature.type]:this.feature.type:null},Ro.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ro.prototype.canonicalID=function(){return this.canonical},Ro.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ro.prototype.parseColor=function(g){var z=this._parseColorCache[g];return z||(z=this._parseColorCache[g]=qi.parse(g)),z};var La=function(g,z,j,st){this.name=g,this.type=z,this._evaluate=j,this.args=st};La.prototype.evaluate=function(g){return this._evaluate(g,this.args)},La.prototype.eachChild=function(g){this.args.forEach(g)},La.prototype.outputDefined=function(){return!1},La.prototype.serialize=function(){return[this.name].concat(this.args.map(function(g){return g.serialize()}))},La.parse=function(g,z){var j,st=g[0],pt=La.definitions[st];if(!pt)return z.error('Unknown expression "'+st+'". If you wanted a literal array, use ["literal", [...]].',0);for(var wt=Array.isArray(pt)?pt[0]:pt.type,Rt=Array.isArray(pt)?[[pt[1],pt[2]]]:pt.overloads,Jt=Rt.filter(function(bi){var Ci=bi[0];return!Array.isArray(Ci)||Ci.length===g.length-1}),le=null,we=0,Pe=Jt;we<Pe.length;we+=1){var Ue=Pe[we],Ve=Ue[0],er=Ue[1];le=new Po(z.registry,z.path,null,z.scope);for(var _r=[],Ir=!1,un=1;un<g.length;un++){var tn=g[un],gn=Array.isArray(Ve)?Ve[un-1]:Ve.type,bn=le.parse(tn,1+_r.length,gn);if(!bn){Ir=!0;break}_r.push(bn)}if(!Ir){if(Array.isArray(Ve)&&Ve.length!==_r.length){le.error("Expected "+Ve.length+" arguments, but found "+_r.length+" instead.");continue}for(var hn=0;hn<_r.length;hn++){var Ln=Array.isArray(Ve)?Ve[hn]:Ve.type,Un=_r[hn];le.concat(hn+1).checkSubtype(Ln,Un.type)}if(le.errors.length===0)return new La(st,wt,er,_r)}}if(Jt.length===1)(j=z.errors).push.apply(j,le.errors);else{for(var Wn=Jt.length?Jt:Rt,Xn=Wn.map(function(bi){var Ci=bi[0];return Hl(Ci)}).join(" | "),fi=[],hi=1;hi<g.length;hi++){var gi=z.parse(g[hi],1+fi.length);if(!gi)return null;fi.push(Yi(gi.type))}z.error("Expected arguments of type "+Xn+", but found ("+fi.join(", ")+") instead.")}return null},La.register=function(g,z){La.definitions=z;for(var j in z)g[j]=La};function Hl(g){return Array.isArray(g)?"("+g.map(Yi).join(", ")+")":"("+Yi(g.type)+"...)"}var ts=function(g,z,j){this.type=Jn,this.locale=j,this.caseSensitive=g,this.diacriticSensitive=z};ts.parse=function(g,z){if(g.length!==2)return z.error("Expected one argument.");var j=g[1];if(typeof j!="object"||Array.isArray(j))return z.error("Collator options argument must be an object.");var st=z.parse(j["case-sensitive"]===void 0?!1:j["case-sensitive"],1,xn);if(!st)return null;var pt=z.parse(j["diacritic-sensitive"]===void 0?!1:j["diacritic-sensitive"],1,xn);if(!pt)return null;var wt=null;return j.locale&&(wt=z.parse(j.locale,1,mn),!wt)?null:new ts(st,pt,wt)},ts.prototype.evaluate=function(g){return new Vs(this.caseSensitive.evaluate(g),this.diacriticSensitive.evaluate(g),this.locale?this.locale.evaluate(g):null)},ts.prototype.eachChild=function(g){g(this.caseSensitive),g(this.diacriticSensitive),this.locale&&g(this.locale)},ts.prototype.outputDefined=function(){return!1},ts.prototype.serialize=function(){var g={};return g["case-sensitive"]=this.caseSensitive.serialize(),g["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(g.locale=this.locale.serialize()),["collator",g]};var Oo=8192;function Vl(g,z){g[0]=Math.min(g[0],z[0]),g[1]=Math.min(g[1],z[1]),g[2]=Math.max(g[2],z[0]),g[3]=Math.max(g[3],z[1])}function gu(g){return(180+g)/360}function Ju(g){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360)))/360}function _l(g,z){return!(g[0]<=z[0]||g[2]>=z[2]||g[1]<=z[1]||g[3]>=z[3])}function $u(g,z){var j=gu(g[0]),st=Ju(g[1]),pt=Math.pow(2,z.z);return[Math.round(j*pt*Oo),Math.round(st*pt*Oo)]}function Qu(g,z,j){var st=g[0]-z[0],pt=g[1]-z[1],wt=g[0]-j[0],Rt=g[1]-j[1];return st*Rt-wt*pt===0&&st*wt<=0&&pt*Rt<=0}function tc(g,z,j){return z[1]>g[1]!=j[1]>g[1]&&g[0]<(j[0]-z[0])*(g[1]-z[1])/(j[1]-z[1])+z[0]}function Wl(g,z){for(var j=!1,st=0,pt=z.length;st<pt;st++)for(var wt=z[st],Rt=0,Jt=wt.length;Rt<Jt-1;Rt++){if(Qu(g,wt[Rt],wt[Rt+1]))return!1;tc(g,wt[Rt],wt[Rt+1])&&(j=!j)}return j}function ec(g,z){for(var j=0;j<z.length;j++)if(Wl(g,z[j]))return!0;return!1}function rc(g,z){return g[0]*z[1]-g[1]*z[0]}function mu(g,z,j,st){var pt=g[0]-j[0],wt=g[1]-j[1],Rt=z[0]-j[0],Jt=z[1]-j[1],le=st[0]-j[0],we=st[1]-j[1],Pe=pt*we-le*wt,Ue=Rt*we-le*Jt;return Pe>0&&Ue<0||Pe<0&&Ue>0}function yu(g,z,j,st){var pt=[z[0]-g[0],z[1]-g[1]],wt=[st[0]-j[0],st[1]-j[1]];return rc(wt,pt)===0?!1:!!(mu(g,z,j,st)&&mu(j,st,g,z))}function ps(g,z,j){for(var st=0,pt=j;st<pt.length;st+=1)for(var wt=pt[st],Rt=0;Rt<wt.length-1;++Rt)if(yu(g,z,wt[Rt],wt[Rt+1]))return!0;return!1}function Cs(g,z){for(var j=0;j<g.length;++j)if(!Wl(g[j],z))return!1;for(var st=0;st<g.length-1;++st)if(ps(g[st],g[st+1],z))return!1;return!0}function Ws(g,z){for(var j=0;j<z.length;j++)if(Cs(g,z[j]))return!0;return!1}function Xs(g,z,j){for(var st=[],pt=0;pt<g.length;pt++){for(var wt=[],Rt=0;Rt<g[pt].length;Rt++){var Jt=$u(g[pt][Rt],j);Vl(z,Jt),wt.push(Jt)}st.push(wt)}return st}function xu(g,z,j){for(var st=[],pt=0;pt<g.length;pt++){var wt=Xs(g[pt],z,j);st.push(wt)}return st}function jo(g,z,j,st){if(g[0]<j[0]||g[0]>j[2]){var pt=st*.5,wt=g[0]-j[0]>pt?-st:j[0]-g[0]>pt?st:0;wt===0&&(wt=g[0]-j[2]>pt?-st:j[2]-g[0]>pt?st:0),g[0]+=wt}Vl(z,g)}function nc(g){g[0]=g[1]=1/0,g[2]=g[3]=-1/0}function wl(g,z,j,st){for(var pt=Math.pow(2,st.z)*Oo,wt=[st.x*Oo,st.y*Oo],Rt=[],Jt=0,le=g;Jt<le.length;Jt+=1)for(var we=le[Jt],Pe=0,Ue=we;Pe<Ue.length;Pe+=1){var Ve=Ue[Pe],er=[Ve.x+wt[0],Ve.y+wt[1]];jo(er,z,j,pt),Rt.push(er)}return Rt}function bu(g,z,j,st){for(var pt=Math.pow(2,st.z)*Oo,wt=[st.x*Oo,st.y*Oo],Rt=[],Jt=0,le=g;Jt<le.length;Jt+=1){for(var we=le[Jt],Pe=[],Ue=0,Ve=we;Ue<Ve.length;Ue+=1){var er=Ve[Ue],_r=[er.x+wt[0],er.y+wt[1]];Vl(z,_r),Pe.push(_r)}Rt.push(Pe)}if(z[2]-z[0]<=pt/2){nc(z);for(var Ir=0,un=Rt;Ir<un.length;Ir+=1)for(var tn=un[Ir],gn=0,bn=tn;gn<bn.length;gn+=1){var hn=bn[gn];jo(hn,z,j,pt)}}return Rt}function _u(g,z){var j=[1/0,1/0,-1/0,-1/0],st=[1/0,1/0,-1/0,-1/0],pt=g.canonicalID();if(z.type==="Polygon"){var wt=Xs(z.coordinates,st,pt),Rt=wl(g.geometry(),j,st,pt);if(!_l(j,st))return!1;for(var Jt=0,le=Rt;Jt<le.length;Jt+=1){var we=le[Jt];if(!Wl(we,wt))return!1}}if(z.type==="MultiPolygon"){var Pe=xu(z.coordinates,st,pt),Ue=wl(g.geometry(),j,st,pt);if(!_l(j,st))return!1;for(var Ve=0,er=Ue;Ve<er.length;Ve+=1){var _r=er[Ve];if(!ec(_r,Pe))return!1}}return!0}function Al(g,z){var j=[1/0,1/0,-1/0,-1/0],st=[1/0,1/0,-1/0,-1/0],pt=g.canonicalID();if(z.type==="Polygon"){var wt=Xs(z.coordinates,st,pt),Rt=bu(g.geometry(),j,st,pt);if(!_l(j,st))return!1;for(var Jt=0,le=Rt;Jt<le.length;Jt+=1){var we=le[Jt];if(!Cs(we,wt))return!1}}if(z.type==="MultiPolygon"){var Pe=xu(z.coordinates,st,pt),Ue=bu(g.geometry(),j,st,pt);if(!_l(j,st))return!1;for(var Ve=0,er=Ue;Ve<er.length;Ve+=1){var _r=er[Ve];if(!Ws(_r,Pe))return!1}}return!0}var yo=function(g,z){this.type=xn,this.geojson=g,this.geometries=z};yo.parse=function(g,z){if(g.length!==2)return z.error("'within' expression requires exactly one argument, but found "+(g.length-1)+" instead.");if(bl(g[1])){var j=g[1];if(j.type==="FeatureCollection")for(var st=0;st<j.features.length;++st){var pt=j.features[st].geometry.type;if(pt==="Polygon"||pt==="MultiPolygon")return new yo(j,j.features[st].geometry)}else if(j.type==="Feature"){var wt=j.geometry.type;if(wt==="Polygon"||wt==="MultiPolygon")return new yo(j,j.geometry)}else if(j.type==="Polygon"||j.type==="MultiPolygon")return new yo(j,j)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},yo.prototype.evaluate=function(g){if(g.geometry()!=null&&g.canonicalID()!=null){if(g.geometryType()==="Point")return _u(g,this.geometries);if(g.geometryType()==="LineString")return Al(g,this.geometries)}return!1},yo.prototype.eachChild=function(){},yo.prototype.outputDefined=function(){return!0},yo.prototype.serialize=function(){return["within",this.geojson]};function Es(g){if(g instanceof La&&(g.name==="get"&&g.args.length===1||g.name==="feature-state"||g.name==="has"&&g.args.length===1||g.name==="properties"||g.name==="geometry-type"||g.name==="id"||/^filter-/.test(g.name))||g instanceof yo)return!1;var z=!0;return g.eachChild(function(j){z&&!Es(j)&&(z=!1)}),z}function ds(g){if(g instanceof La&&g.name==="feature-state")return!1;var z=!0;return g.eachChild(function(j){z&&!ds(j)&&(z=!1)}),z}function Zs(g,z){if(g instanceof La&&z.indexOf(g.name)>=0)return!1;var j=!0;return g.eachChild(function(st){j&&!Zs(st,z)&&(j=!1)}),j}var es=function(g,z){this.type=z.type,this.name=g,this.boundExpression=z};es.parse=function(g,z){if(g.length!==2||typeof g[1]!="string")return z.error("'var' expression requires exactly one string literal argument.");var j=g[1];return z.scope.has(j)?new es(j,z.scope.get(j)):z.error('Unknown variable "'+j+'". Make sure "'+j+'" has been bound in an enclosing "let" expression before using it.',1)},es.prototype.evaluate=function(g){return this.boundExpression.evaluate(g)},es.prototype.eachChild=function(){},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){return["var",this.name]};var Po=function(g,z,j,st,pt){z===void 0&&(z=[]),st===void 0&&(st=new jr),pt===void 0&&(pt=[]),this.registry=g,this.path=z,this.key=z.map(function(wt){return"["+wt+"]"}).join(""),this.scope=st,this.errors=pt,this.expectedType=j};Po.prototype.parse=function(g,z,j,st,pt){return pt===void 0&&(pt={}),z?this.concat(z,j,st)._parse(g,pt):this._parse(g,pt)},Po.prototype._parse=function(g,z){(g===null||typeof g=="string"||typeof g=="boolean"||typeof g=="number")&&(g=["literal",g]);function j(we,Pe,Ue){return Ue==="assert"?new za(Pe,[we]):Ue==="coerce"?new Qa(Pe,[we]):we}if(Array.isArray(g)){if(g.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var st=g[0];if(typeof st!="string")return this.error("Expression name must be a string, but found "+typeof st+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var pt=this.registry[st];if(pt){var wt=pt.parse(g,this);if(!wt)return null;if(this.expectedType){var Rt=this.expectedType,Jt=wt.type;if((Rt.kind==="string"||Rt.kind==="number"||Rt.kind==="boolean"||Rt.kind==="object"||Rt.kind==="array")&&Jt.kind==="value")wt=j(wt,Rt,z.typeAnnotation||"assert");else if((Rt.kind==="color"||Rt.kind==="formatted"||Rt.kind==="resolvedImage")&&(Jt.kind==="value"||Jt.kind==="string"))wt=j(wt,Rt,z.typeAnnotation||"coerce");else if(this.checkSubtype(Rt,Jt))return null}if(!(wt instanceof ba)&&wt.type.kind!=="resolvedImage"&&Xl(wt)){var le=new Ro;try{wt=new ba(wt.type,wt.evaluate(le))}catch(we){return this.error(we.message),null}}return wt}return this.error('Unknown expression "'+st+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof g>"u"?this.error("'undefined' value invalid. Use null instead."):typeof g=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof g+" instead.")},Po.prototype.concat=function(g,z,j){var st=typeof g=="number"?this.path.concat(g):this.path,pt=j?this.scope.concat(j):this.scope;return new Po(this.registry,st,z||null,pt,this.errors)},Po.prototype.error=function(g){for(var z=[],j=arguments.length-1;j-- >0;)z[j]=arguments[j+1];var st=""+this.key+z.map(function(pt){return"["+pt+"]"}).join("");this.errors.push(new xr(st,g))},Po.prototype.checkSubtype=function(g,z){var j=$a(g,z);return j&&this.error(j),j};function Xl(g){if(g instanceof es)return Xl(g.boundExpression);if(g instanceof La&&g.name==="error"||g instanceof ts||g instanceof yo)return!1;var z=g instanceof Qa||g instanceof za,j=!0;return g.eachChild(function(st){z?j=j&&Xl(st):j=j&&st instanceof ba}),j?Es(g)&&Zs(g,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ls(g,z){for(var j=g.length-1,st=0,pt=j,wt=0,Rt,Jt;st<=pt;)if(wt=Math.floor((st+pt)/2),Rt=g[wt],Jt=g[wt+1],Rt<=z){if(wt===j||z<Jt)return wt;st=wt+1}else if(Rt>z)pt=wt-1;else throw new ka("Input is not a number.");return 0}var xo=function(g,z,j){this.type=g,this.input=z,this.labels=[],this.outputs=[];for(var st=0,pt=j;st<pt.length;st+=1){var wt=pt[st],Rt=wt[0],Jt=wt[1];this.labels.push(Rt),this.outputs.push(Jt)}};xo.parse=function(g,z){if(g.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(g.length-1)+".");if((g.length-1)%2!==0)return z.error("Expected an even number of arguments.");var j=z.parse(g[1],1,Vr);if(!j)return null;var st=[],pt=null;z.expectedType&&z.expectedType.kind!=="value"&&(pt=z.expectedType);for(var wt=1;wt<g.length;wt+=2){var Rt=wt===1?-1/0:g[wt],Jt=g[wt+1],le=wt,we=wt+1;if(typeof Rt!="number")return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',le);if(st.length&&st[st.length-1][0]>=Rt)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',le);var Pe=z.parse(Jt,we,pt);if(!Pe)return null;pt=pt||Pe.type,st.push([Rt,Pe])}return new xo(pt,j,st)},xo.prototype.evaluate=function(g){var z=this.labels,j=this.outputs;if(z.length===1)return j[0].evaluate(g);var st=this.input.evaluate(g);if(st<=z[0])return j[0].evaluate(g);var pt=z.length;if(st>=z[pt-1])return j[pt-1].evaluate(g);var wt=Ls(z,st);return j[wt].evaluate(g)},xo.prototype.eachChild=function(g){g(this.input);for(var z=0,j=this.outputs;z<j.length;z+=1){var st=j[z];g(st)}},xo.prototype.outputDefined=function(){return this.outputs.every(function(g){return g.outputDefined()})},xo.prototype.serialize=function(){for(var g=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&g.push(this.labels[z]),g.push(this.outputs[z].serialize());return g};function va(g,z,j){return g*(1-j)+z*j}function Zl(g,z,j){return new qi(va(g.r,z.r,j),va(g.g,z.g,j),va(g.b,z.b,j),va(g.a,z.a,j))}function ic(g,z,j){return g.map(function(st,pt){return va(st,z[pt],j)})}var Tl=Object.freeze({__proto__:null,number:va,color:Zl,array:ic}),Rs=.95047,Os=1,to=1.08883,kl=4/29,Ps=6/29,Ml=3*Ps*Ps,ac=Ps*Ps*Ps,wu=Math.PI/180,Kl=180/Math.PI;function Jl(g){return g>ac?Math.pow(g,.3333333333333333):g/Ml+kl}function $l(g){return g>Ps?g*g*g:Ml*(g-kl)}function Is(g){return 255*(g<=.0031308?12.92*g:1.055*Math.pow(g,.4166666666666667)-.055)}function Sl(g){return g/=255,g<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function Ks(g){var z=Sl(g.r),j=Sl(g.g),st=Sl(g.b),pt=Jl((.4124564*z+.3575761*j+.1804375*st)/Rs),wt=Jl((.2126729*z+.7151522*j+.072175*st)/Os),Rt=Jl((.0193339*z+.119192*j+.9503041*st)/to);return{l:116*wt-16,a:500*(pt-wt),b:200*(wt-Rt),alpha:g.a}}function Cl(g){var z=(g.l+16)/116,j=isNaN(g.a)?z:z+g.a/500,st=isNaN(g.b)?z:z-g.b/200;return z=Os*$l(z),j=Rs*$l(j),st=to*$l(st),new qi(Is(3.2404542*j-1.5371385*z-.4985314*st),Is(-.969266*j+1.8760108*z+.041556*st),Is(.0556434*j-.2040259*z+1.0572252*st),g.alpha)}function ea(g,z,j){return{l:va(g.l,z.l,j),a:va(g.a,z.a,j),b:va(g.b,z.b,j),alpha:va(g.alpha,z.alpha,j)}}function Au(g){var z=Ks(g),j=z.l,st=z.a,pt=z.b,wt=Math.atan2(pt,st)*Kl;return{h:wt<0?wt+360:wt,c:Math.sqrt(st*st+pt*pt),l:j,alpha:g.a}}function bo(g){var z=g.h*wu,j=g.c,st=g.l;return Cl({l:st,a:Math.cos(z)*j,b:Math.sin(z)*j,alpha:g.alpha})}function Tu(g,z,j){var st=z-g;return g+j*(st>180||st<-180?st-360*Math.round(st/360):st)}function Ql(g,z,j){return{h:Tu(g.h,z.h,j),c:va(g.c,z.c,j),l:va(g.l,z.l,j),alpha:va(g.alpha,z.alpha,j)}}var vs={forward:Ks,reverse:Cl,interpolate:ea},rs={forward:Au,reverse:bo,interpolate:Ql},El=Object.freeze({__proto__:null,lab:vs,hcl:rs}),ya=function(g,z,j,st,pt){this.type=g,this.operator=z,this.interpolation=j,this.input=st,this.labels=[],this.outputs=[];for(var wt=0,Rt=pt;wt<Rt.length;wt+=1){var Jt=Rt[wt],le=Jt[0],we=Jt[1];this.labels.push(le),this.outputs.push(we)}};ya.interpolationFactor=function(g,z,j,st){var pt=0;if(g.name==="exponential")pt=Js(z,g.base,j,st);else if(g.name==="linear")pt=Js(z,1,j,st);else if(g.name==="cubic-bezier"){var wt=g.controlPoints,Rt=new v(wt[0],wt[1],wt[2],wt[3]);pt=Rt.solve(Js(z,1,j,st))}return pt},ya.parse=function(g,z){var j=g[0],st=g[1],pt=g[2],wt=g.slice(3);if(!Array.isArray(st)||st.length===0)return z.error("Expected an interpolation type expression.",1);if(st[0]==="linear")st={name:"linear"};else if(st[0]==="exponential"){var Rt=st[1];if(typeof Rt!="number")return z.error("Exponential interpolation requires a numeric base.",1,1);st={name:"exponential",base:Rt}}else if(st[0]==="cubic-bezier"){var Jt=st.slice(1);if(Jt.length!==4||Jt.some(function(un){return typeof un!="number"||un<0||un>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);st={name:"cubic-bezier",controlPoints:Jt}}else return z.error("Unknown interpolation type "+String(st[0]),1,0);if(g.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(g.length-1)+".");if((g.length-1)%2!==0)return z.error("Expected an even number of arguments.");if(pt=z.parse(pt,2,Vr),!pt)return null;var le=[],we=null;j==="interpolate-hcl"||j==="interpolate-lab"?we=_n:z.expectedType&&z.expectedType.kind!=="value"&&(we=z.expectedType);for(var Pe=0;Pe<wt.length;Pe+=2){var Ue=wt[Pe],Ve=wt[Pe+1],er=Pe+3,_r=Pe+4;if(typeof Ue!="number")return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',er);if(le.length&&le[le.length-1][0]>=Ue)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',er);var Ir=z.parse(Ve,_r,we);if(!Ir)return null;we=we||Ir.type,le.push([Ue,Ir])}return we.kind!=="number"&&we.kind!=="color"&&!(we.kind==="array"&&we.itemType.kind==="number"&&typeof we.N=="number")?z.error("Type "+Yi(we)+" is not interpolatable."):new ya(we,j,st,pt,le)},ya.prototype.evaluate=function(g){var z=this.labels,j=this.outputs;if(z.length===1)return j[0].evaluate(g);var st=this.input.evaluate(g);if(st<=z[0])return j[0].evaluate(g);var pt=z.length;if(st>=z[pt-1])return j[pt-1].evaluate(g);var wt=Ls(z,st),Rt=z[wt],Jt=z[wt+1],le=ya.interpolationFactor(this.interpolation,st,Rt,Jt),we=j[wt].evaluate(g),Pe=j[wt+1].evaluate(g);return this.operator==="interpolate"?Tl[this.type.kind.toLowerCase()](we,Pe,le):this.operator==="interpolate-hcl"?rs.reverse(rs.interpolate(rs.forward(we),rs.forward(Pe),le)):vs.reverse(vs.interpolate(vs.forward(we),vs.forward(Pe),le))},ya.prototype.eachChild=function(g){g(this.input);for(var z=0,j=this.outputs;z<j.length;z+=1){var st=j[z];g(st)}},ya.prototype.outputDefined=function(){return this.outputs.every(function(g){return g.outputDefined()})},ya.prototype.serialize=function(){var g;this.interpolation.name==="linear"?g=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?g=["linear"]:g=["exponential",this.interpolation.base]:g=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,g,this.input.serialize()],j=0;j<this.labels.length;j++)z.push(this.labels[j],this.outputs[j].serialize());return z};function Js(g,z,j,st){var pt=st-j,wt=g-j;return pt===0?0:z===1?wt/pt:(Math.pow(z,wt)-1)/(Math.pow(z,pt)-1)}var _o=function(g,z){this.type=g,this.args=z};_o.parse=function(g,z){if(g.length<2)return z.error("Expectected at least one argument.");var j=null,st=z.expectedType;st&&st.kind!=="value"&&(j=st);for(var pt=[],wt=0,Rt=g.slice(1);wt<Rt.length;wt+=1){var Jt=Rt[wt],le=z.parse(Jt,1+pt.length,j,void 0,{typeAnnotation:"omit"});if(!le)return null;j=j||le.type,pt.push(le)}var we=st&&pt.some(function(Pe){return $a(st,Pe.type)});return we?new _o(Cn,pt):new _o(j,pt)},_o.prototype.evaluate=function(g){for(var z=null,j=0,st,pt=0,wt=this.args;pt<wt.length;pt+=1){var Rt=wt[pt];if(j++,z=Rt.evaluate(g),z&&z instanceof Xa&&!z.available&&(st||(st=z.name),z=null,j===this.args.length&&(z=st)),z!==null)break}return z},_o.prototype.eachChild=function(g){this.args.forEach(g)},_o.prototype.outputDefined=function(){return this.args.every(function(g){return g.outputDefined()})},_o.prototype.serialize=function(){var g=["coalesce"];return this.eachChild(function(z){g.push(z.serialize())}),g};var Uo=function(g,z){this.type=z.type,this.bindings=[].concat(g),this.result=z};Uo.prototype.evaluate=function(g){return this.result.evaluate(g)},Uo.prototype.eachChild=function(g){for(var z=0,j=this.bindings;z<j.length;z+=1){var st=j[z];g(st[1])}g(this.result)},Uo.parse=function(g,z){if(g.length<4)return z.error("Expected at least 3 arguments, but found "+(g.length-1)+" instead.");for(var j=[],st=1;st<g.length-1;st+=2){var pt=g[st];if(typeof pt!="string")return z.error("Expected string, but found "+typeof pt+" instead.",st);if(/[^a-zA-Z0-9_]/.test(pt))return z.error("Variable names must contain only alphanumeric characters or '_'.",st);var wt=z.parse(g[st+1],st+1);if(!wt)return null;j.push([pt,wt])}var Rt=z.parse(g[g.length-1],g.length-1,z.expectedType,j);return Rt?new Uo(j,Rt):null},Uo.prototype.outputDefined=function(){return this.result.outputDefined()},Uo.prototype.serialize=function(){for(var g=["let"],z=0,j=this.bindings;z<j.length;z+=1){var st=j[z],pt=st[0],wt=st[1];g.push(pt,wt.serialize())}return g.push(this.result.serialize()),g};var gs=function(g,z,j){this.type=g,this.index=z,this.input=j};gs.parse=function(g,z){if(g.length!==3)return z.error("Expected 2 arguments, but found "+(g.length-1)+" instead.");var j=z.parse(g[1],1,Vr),st=z.parse(g[2],2,ta(z.expectedType||Cn));if(!j||!st)return null;var pt=st.type;return new gs(pt.itemType,j,st)},gs.prototype.evaluate=function(g){var z=this.index.evaluate(g),j=this.input.evaluate(g);if(z<0)throw new ka("Array index out of bounds: "+z+" < 0.");if(z>=j.length)throw new ka("Array index out of bounds: "+z+" > "+(j.length-1)+".");if(z!==Math.floor(z))throw new ka("Array index must be an integer, but found "+z+" instead.");return j[z]},gs.prototype.eachChild=function(g){g(this.index),g(this.input)},gs.prototype.outputDefined=function(){return!1},gs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ns=function(g,z){this.type=xn,this.needle=g,this.haystack=z};ns.parse=function(g,z){if(g.length!==3)return z.error("Expected 2 arguments, but found "+(g.length-1)+" instead.");var j=z.parse(g[1],1,Cn),st=z.parse(g[2],2,Cn);return!j||!st?null:Ia(j.type,[xn,mn,Vr,Pr,Cn])?new ns(j,st):z.error("Expected first argument to be of type boolean, string, number or null, but found "+Yi(j.type)+" instead")},ns.prototype.evaluate=function(g){var z=this.needle.evaluate(g),j=this.haystack.evaluate(g);if(!j)return!1;if(!Ts(z,["boolean","string","number","null"]))throw new ka("Expected first argument to be of type boolean, string, number or null, but found "+Yi(ma(z))+" instead.");if(!Ts(j,["string","array"]))throw new ka("Expected second argument to be of type array or string, but found "+Yi(ma(j))+" instead.");return j.indexOf(z)>=0},ns.prototype.eachChild=function(g){g(this.needle),g(this.haystack)},ns.prototype.outputDefined=function(){return!0},ns.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var wo=function(g,z,j){this.type=Vr,this.needle=g,this.haystack=z,this.fromIndex=j};wo.parse=function(g,z){if(g.length<=2||g.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(g.length-1)+" instead.");var j=z.parse(g[1],1,Cn),st=z.parse(g[2],2,Cn);if(!j||!st)return null;if(!Ia(j.type,[xn,mn,Vr,Pr,Cn]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+Yi(j.type)+" instead");if(g.length===4){var pt=z.parse(g[3],3,Vr);return pt?new wo(j,st,pt):null}else return new wo(j,st)},wo.prototype.evaluate=function(g){var z=this.needle.evaluate(g),j=this.haystack.evaluate(g);if(!Ts(z,["boolean","string","number","null"]))throw new ka("Expected first argument to be of type boolean, string, number or null, but found "+Yi(ma(z))+" instead.");if(!Ts(j,["string","array"]))throw new ka("Expected second argument to be of type array or string, but found "+Yi(ma(j))+" instead.");if(this.fromIndex){var st=this.fromIndex.evaluate(g);return j.indexOf(z,st)}return j.indexOf(z)},wo.prototype.eachChild=function(g){g(this.needle),g(this.haystack),this.fromIndex&&g(this.fromIndex)},wo.prototype.outputDefined=function(){return!1},wo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var g=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),g]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var qo=function(g,z,j,st,pt,wt){this.inputType=g,this.type=z,this.input=j,this.cases=st,this.outputs=pt,this.otherwise=wt};qo.parse=function(g,z){if(g.length<5)return z.error("Expected at least 4 arguments, but found only "+(g.length-1)+".");if(g.length%2!==1)return z.error("Expected an even number of arguments.");var j,st;z.expectedType&&z.expectedType.kind!=="value"&&(st=z.expectedType);for(var pt={},wt=[],Rt=2;Rt<g.length-1;Rt+=2){var Jt=g[Rt],le=g[Rt+1];Array.isArray(Jt)||(Jt=[Jt]);var we=z.concat(Rt);if(Jt.length===0)return we.error("Expected at least one branch label.");for(var Pe=0,Ue=Jt;Pe<Ue.length;Pe+=1){var Ve=Ue[Pe];if(typeof Ve!="number"&&typeof Ve!="string")return we.error("Branch labels must be numbers or strings.");if(typeof Ve=="number"&&Math.abs(Ve)>Number.MAX_SAFE_INTEGER)return we.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ve=="number"&&Math.floor(Ve)!==Ve)return we.error("Numeric branch labels must be integer values.");if(!j)j=ma(Ve);else if(we.checkSubtype(j,ma(Ve)))return null;if(typeof pt[String(Ve)]<"u")return we.error("Branch labels must be unique.");pt[String(Ve)]=wt.length}var er=z.parse(le,Rt,st);if(!er)return null;st=st||er.type,wt.push(er)}var _r=z.parse(g[1],1,Cn);if(!_r)return null;var Ir=z.parse(g[g.length-1],g.length-1,st);return!Ir||_r.type.kind!=="value"&&z.concat(1).checkSubtype(j,_r.type)?null:new qo(j,st,_r,pt,wt,Ir)},qo.prototype.evaluate=function(g){var z=this.input.evaluate(g),j=ma(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise;return j.evaluate(g)},qo.prototype.eachChild=function(g){g(this.input),this.outputs.forEach(g),g(this.otherwise)},qo.prototype.outputDefined=function(){return this.outputs.every(function(g){return g.outputDefined()})&&this.otherwise.outputDefined()},qo.prototype.serialize=function(){for(var g=this,z=["match",this.input.serialize()],j=Object.keys(this.cases).sort(),st=[],pt={},wt=0,Rt=j;wt<Rt.length;wt+=1){var Jt=Rt[wt],le=pt[this.cases[Jt]];le===void 0?(pt[this.cases[Jt]]=st.length,st.push([this.cases[Jt],[Jt]])):st[le][1].push(Jt)}for(var we=function(_r){return g.inputType.kind==="number"?Number(_r):_r},Pe=0,Ue=st;Pe<Ue.length;Pe+=1){var Ve=Ue[Pe],le=Ve[0],er=Ve[1];er.length===1?z.push(we(er[0])):z.push(er.map(we)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var Ao=function(g,z,j){this.type=g,this.branches=z,this.otherwise=j};Ao.parse=function(g,z){if(g.length<4)return z.error("Expected at least 3 arguments, but found only "+(g.length-1)+".");if(g.length%2!==0)return z.error("Expected an odd number of arguments.");var j;z.expectedType&&z.expectedType.kind!=="value"&&(j=z.expectedType);for(var st=[],pt=1;pt<g.length-1;pt+=2){var wt=z.parse(g[pt],pt,xn);if(!wt)return null;var Rt=z.parse(g[pt+1],pt+1,j);if(!Rt)return null;st.push([wt,Rt]),j=j||Rt.type}var Jt=z.parse(g[g.length-1],g.length-1,j);return Jt?new Ao(j,st,Jt):null},Ao.prototype.evaluate=function(g){for(var z=0,j=this.branches;z<j.length;z+=1){var st=j[z],pt=st[0],wt=st[1];if(pt.evaluate(g))return wt.evaluate(g)}return this.otherwise.evaluate(g)},Ao.prototype.eachChild=function(g){for(var z=0,j=this.branches;z<j.length;z+=1){var st=j[z],pt=st[0],wt=st[1];g(pt),g(wt)}g(this.otherwise)},Ao.prototype.outputDefined=function(){return this.branches.every(function(g){g[0];var z=g[1];return z.outputDefined()})&&this.otherwise.outputDefined()},Ao.prototype.serialize=function(){var g=["case"];return this.eachChild(function(z){g.push(z.serialize())}),g};var fo=function(g,z,j,st){this.type=g,this.input=z,this.beginIndex=j,this.endIndex=st};fo.parse=function(g,z){if(g.length<=2||g.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(g.length-1)+" instead.");var j=z.parse(g[1],1,Cn),st=z.parse(g[2],2,Vr);if(!j||!st)return null;if(!Ia(j.type,[ta(Cn),mn,Cn]))return z.error("Expected first argument to be of type array or string, but found "+Yi(j.type)+" instead");if(g.length===4){var pt=z.parse(g[3],3,Vr);return pt?new fo(j.type,j,st,pt):null}else return new fo(j.type,j,st)},fo.prototype.evaluate=function(g){var z=this.input.evaluate(g),j=this.beginIndex.evaluate(g);if(!Ts(z,["string","array"]))throw new ka("Expected first argument to be of type array or string, but found "+Yi(ma(z))+" instead.");if(this.endIndex){var st=this.endIndex.evaluate(g);return z.slice(j,st)}return z.slice(j)},fo.prototype.eachChild=function(g){g(this.input),g(this.beginIndex),this.endIndex&&g(this.endIndex)},fo.prototype.outputDefined=function(){return!1},fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var g=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),g]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function $s(g,z){return g==="=="||g==="!="?z.kind==="boolean"||z.kind==="string"||z.kind==="number"||z.kind==="null"||z.kind==="value":z.kind==="string"||z.kind==="number"||z.kind==="value"}function oc(g,z,j){return z===j}function sc(g,z,j){return z!==j}function lc(g,z,j){return z<j}function uc(g,z,j){return z>j}function tu(g,z,j){return z<=j}function ku(g,z,j){return z>=j}function zs(g,z,j,st){return st.compare(z,j)===0}function Ra(g,z,j,st){return!zs(g,z,j,st)}function lo(g,z,j,st){return st.compare(z,j)<0}function Fs(g,z,j,st){return st.compare(z,j)>0}function Mu(g,z,j,st){return st.compare(z,j)<=0}function Qs(g,z,j,st){return st.compare(z,j)>=0}function Go(g,z,j){var st=g!=="=="&&g!=="!=";return function(){function pt(wt,Rt,Jt){this.type=xn,this.lhs=wt,this.rhs=Rt,this.collator=Jt,this.hasUntypedArgument=wt.type.kind==="value"||Rt.type.kind==="value"}return pt.parse=function(wt,Rt){if(wt.length!==3&&wt.length!==4)return Rt.error("Expected two or three arguments.");var Jt=wt[0],le=Rt.parse(wt[1],1,Cn);if(!le)return null;if(!$s(Jt,le.type))return Rt.concat(1).error('"'+Jt+`" comparisons are not supported for type '`+Yi(le.type)+"'.");var we=Rt.parse(wt[2],2,Cn);if(!we)return null;if(!$s(Jt,we.type))return Rt.concat(2).error('"'+Jt+`" comparisons are not supported for type '`+Yi(we.type)+"'.");if(le.type.kind!==we.type.kind&&le.type.kind!=="value"&&we.type.kind!=="value")return Rt.error("Cannot compare types '"+Yi(le.type)+"' and '"+Yi(we.type)+"'.");st&&(le.type.kind==="value"&&we.type.kind!=="value"?le=new za(we.type,[le]):le.type.kind!=="value"&&we.type.kind==="value"&&(we=new za(le.type,[we])));var Pe=null;if(wt.length===4){if(le.type.kind!=="string"&&we.type.kind!=="string"&&le.type.kind!=="value"&&we.type.kind!=="value")return Rt.error("Cannot use collator to compare non-string types.");if(Pe=Rt.parse(wt[3],3,Jn),!Pe)return null}return new pt(le,we,Pe)},pt.prototype.evaluate=function(wt){var Rt=this.lhs.evaluate(wt),Jt=this.rhs.evaluate(wt);if(st&&this.hasUntypedArgument){var le=ma(Rt),we=ma(Jt);if(le.kind!==we.kind||!(le.kind==="string"||le.kind==="number"))throw new ka('Expected arguments for "'+g+'" to be (string, string) or (number, number), but found ('+le.kind+", "+we.kind+") instead.")}if(this.collator&&!st&&this.hasUntypedArgument){var Pe=ma(Rt),Ue=ma(Jt);if(Pe.kind!=="string"||Ue.kind!=="string")return z(wt,Rt,Jt)}return this.collator?j(wt,Rt,Jt,this.collator.evaluate(wt)):z(wt,Rt,Jt)},pt.prototype.eachChild=function(wt){wt(this.lhs),wt(this.rhs),this.collator&&wt(this.collator)},pt.prototype.outputDefined=function(){return!0},pt.prototype.serialize=function(){var wt=[g];return this.eachChild(function(Rt){wt.push(Rt.serialize())}),wt},pt}()}var cc=Go("==",oc,zs),Su=Go("!=",sc,Ra),Cu=Go("<",lc,lo),eu=Go(">",uc,Fs),Eu=Go("<=",tu,Mu),Za=Go(">=",ku,Qs),To=function(g,z,j,st,pt){this.type=mn,this.number=g,this.locale=z,this.currency=j,this.minFractionDigits=st,this.maxFractionDigits=pt};To.parse=function(g,z){if(g.length!==3)return z.error("Expected two arguments.");var j=z.parse(g[1],1,Vr);if(!j)return null;var st=g[2];if(typeof st!="object"||Array.isArray(st))return z.error("NumberFormat options argument must be an object.");var pt=null;if(st.locale&&(pt=z.parse(st.locale,1,mn),!pt))return null;var wt=null;if(st.currency&&(wt=z.parse(st.currency,1,mn),!wt))return null;var Rt=null;if(st["min-fraction-digits"]&&(Rt=z.parse(st["min-fraction-digits"],1,Vr),!Rt))return null;var Jt=null;return st["max-fraction-digits"]&&(Jt=z.parse(st["max-fraction-digits"],1,Vr),!Jt)?null:new To(j,pt,wt,Rt,Jt)},To.prototype.evaluate=function(g){return new Intl.NumberFormat(this.locale?this.locale.evaluate(g):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(g):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(g):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(g):void 0}).format(this.number.evaluate(g))},To.prototype.eachChild=function(g){g(this.number),this.locale&&g(this.locale),this.currency&&g(this.currency),this.minFractionDigits&&g(this.minFractionDigits),this.maxFractionDigits&&g(this.maxFractionDigits)},To.prototype.outputDefined=function(){return!1},To.prototype.serialize=function(){var g={};return this.locale&&(g.locale=this.locale.serialize()),this.currency&&(g.currency=this.currency.serialize()),this.minFractionDigits&&(g["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(g["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),g]};var is=function(g){this.type=Vr,this.input=g};is.parse=function(g,z){if(g.length!==2)return z.error("Expected 1 argument, but found "+(g.length-1)+" instead.");var j=z.parse(g[1],1);return j?j.type.kind!=="array"&&j.type.kind!=="string"&&j.type.kind!=="value"?z.error("Expected argument of type string or array, but found "+Yi(j.type)+" instead."):new is(j):null},is.prototype.evaluate=function(g){var z=this.input.evaluate(g);if(typeof z=="string"||Array.isArray(z))return z.length;throw new ka("Expected value to be of type string or array, but found "+Yi(ma(z))+" instead.")},is.prototype.eachChild=function(g){g(this.input)},is.prototype.outputDefined=function(){return!1},is.prototype.serialize=function(){var g=["length"];return this.eachChild(function(z){g.push(z.serialize())}),g};var Ds={"==":cc,"!=":Su,">":eu,"<":Cu,">=":Za,"<=":Eu,array:za,at:gs,boolean:za,case:Ao,coalesce:_o,collator:ts,format:Fa,image:so,in:ns,"index-of":wo,interpolate:ya,"interpolate-hcl":ya,"interpolate-lab":ya,length:is,let:Uo,literal:ba,match:qo,number:za,"number-format":To,object:za,slice:fo,step:xo,string:za,"to-boolean":Qa,"to-color":Qa,"to-number":Qa,"to-string":Qa,var:es,within:yo};function Ll(g,z){var j=z[0],st=z[1],pt=z[2],wt=z[3];j=j.evaluate(g),st=st.evaluate(g),pt=pt.evaluate(g);var Rt=wt?wt.evaluate(g):1,Jt=ks(j,st,pt,Rt);if(Jt)throw new ka(Jt);return new qi(j/255*Rt,st/255*Rt,pt/255*Rt,Rt)}function ms(g,z){return g in z}function ys(g,z){var j=z[g];return typeof j>"u"?null:j}function Lu(g,z,j,st){for(;j<=st;){var pt=j+st>>1;if(z[pt]===g)return!0;z[pt]>g?st=pt-1:j=pt+1}return!1}function Yo(g){return{type:g}}La.register(Ds,{error:[oi,[mn],function(g,z){var j=z[0];throw new ka(j.evaluate(g))}],typeof:[mn,[Cn],function(g,z){var j=z[0];return Yi(ma(j.evaluate(g)))}],"to-rgba":[ta(Vr,4),[_n],function(g,z){var j=z[0];return j.evaluate(g).toArray()}],rgb:[_n,[Vr,Vr,Vr],Ll],rgba:[_n,[Vr,Vr,Vr,Vr],Ll],has:{type:xn,overloads:[[[mn],function(g,z){var j=z[0];return ms(j.evaluate(g),g.properties())}],[[mn,Rn],function(g,z){var j=z[0],st=z[1];return ms(j.evaluate(g),st.evaluate(g))}]]},get:{type:Cn,overloads:[[[mn],function(g,z){var j=z[0];return ys(j.evaluate(g),g.properties())}],[[mn,Rn],function(g,z){var j=z[0],st=z[1];return ys(j.evaluate(g),st.evaluate(g))}]]},"feature-state":[Cn,[mn],function(g,z){var j=z[0];return ys(j.evaluate(g),g.featureState||{})}],properties:[Rn,[],function(g){return g.properties()}],"geometry-type":[mn,[],function(g){return g.geometryType()}],id:[Cn,[],function(g){return g.id()}],zoom:[Vr,[],function(g){return g.globals.zoom}],"heatmap-density":[Vr,[],function(g){return g.globals.heatmapDensity||0}],"line-progress":[Vr,[],function(g){return g.globals.lineProgress||0}],accumulated:[Cn,[],function(g){return g.globals.accumulated===void 0?null:g.globals.accumulated}],"+":[Vr,Yo(Vr),function(g,z){for(var j=0,st=0,pt=z;st<pt.length;st+=1){var wt=pt[st];j+=wt.evaluate(g)}return j}],"*":[Vr,Yo(Vr),function(g,z){for(var j=1,st=0,pt=z;st<pt.length;st+=1){var wt=pt[st];j*=wt.evaluate(g)}return j}],"-":{type:Vr,overloads:[[[Vr,Vr],function(g,z){var j=z[0],st=z[1];return j.evaluate(g)-st.evaluate(g)}],[[Vr],function(g,z){var j=z[0];return-j.evaluate(g)}]]},"/":[Vr,[Vr,Vr],function(g,z){var j=z[0],st=z[1];return j.evaluate(g)/st.evaluate(g)}],"%":[Vr,[Vr,Vr],function(g,z){var j=z[0],st=z[1];return j.evaluate(g)%st.evaluate(g)}],ln2:[Vr,[],function(){return Math.LN2}],pi:[Vr,[],function(){return Math.PI}],e:[Vr,[],function(){return Math.E}],"^":[Vr,[Vr,Vr],function(g,z){var j=z[0],st=z[1];return Math.pow(j.evaluate(g),st.evaluate(g))}],sqrt:[Vr,[Vr],function(g,z){var j=z[0];return Math.sqrt(j.evaluate(g))}],log10:[Vr,[Vr],function(g,z){var j=z[0];return Math.log(j.evaluate(g))/Math.LN10}],ln:[Vr,[Vr],function(g,z){var j=z[0];return Math.log(j.evaluate(g))}],log2:[Vr,[Vr],function(g,z){var j=z[0];return Math.log(j.evaluate(g))/Math.LN2}],sin:[Vr,[Vr],function(g,z){var j=z[0];return Math.sin(j.evaluate(g))}],cos:[Vr,[Vr],function(g,z){var j=z[0];return Math.cos(j.evaluate(g))}],tan:[Vr,[Vr],function(g,z){var j=z[0];return Math.tan(j.evaluate(g))}],asin:[Vr,[Vr],function(g,z){var j=z[0];return Math.asin(j.evaluate(g))}],acos:[Vr,[Vr],function(g,z){var j=z[0];return Math.acos(j.evaluate(g))}],atan:[Vr,[Vr],function(g,z){var j=z[0];return Math.atan(j.evaluate(g))}],min:[Vr,Yo(Vr),function(g,z){return Math.min.apply(Math,z.map(function(j){return j.evaluate(g)}))}],max:[Vr,Yo(Vr),function(g,z){return Math.max.apply(Math,z.map(function(j){return j.evaluate(g)}))}],abs:[Vr,[Vr],function(g,z){var j=z[0];return Math.abs(j.evaluate(g))}],round:[Vr,[Vr],function(g,z){var j=z[0],st=j.evaluate(g);return st<0?-Math.round(-st):Math.round(st)}],floor:[Vr,[Vr],function(g,z){var j=z[0];return Math.floor(j.evaluate(g))}],ceil:[Vr,[Vr],function(g,z){var j=z[0];return Math.ceil(j.evaluate(g))}],"filter-==":[xn,[mn,Cn],function(g,z){var j=z[0],st=z[1];return g.properties()[j.value]===st.value}],"filter-id-==":[xn,[Cn],function(g,z){var j=z[0];return g.id()===j.value}],"filter-type-==":[xn,[mn],function(g,z){var j=z[0];return g.geometryType()===j.value}],"filter-<":[xn,[mn,Cn],function(g,z){var j=z[0],st=z[1],pt=g.properties()[j.value],wt=st.value;return typeof pt==typeof wt&&pt<wt}],"filter-id-<":[xn,[Cn],function(g,z){var j=z[0],st=g.id(),pt=j.value;return typeof st==typeof pt&&st<pt}],"filter->":[xn,[mn,Cn],function(g,z){var j=z[0],st=z[1],pt=g.properties()[j.value],wt=st.value;return typeof pt==typeof wt&&pt>wt}],"filter-id->":[xn,[Cn],function(g,z){var j=z[0],st=g.id(),pt=j.value;return typeof st==typeof pt&&st>pt}],"filter-<=":[xn,[mn,Cn],function(g,z){var j=z[0],st=z[1],pt=g.properties()[j.value],wt=st.value;return typeof pt==typeof wt&&pt<=wt}],"filter-id-<=":[xn,[Cn],function(g,z){var j=z[0],st=g.id(),pt=j.value;return typeof st==typeof pt&&st<=pt}],"filter->=":[xn,[mn,Cn],function(g,z){var j=z[0],st=z[1],pt=g.properties()[j.value],wt=st.value;return typeof pt==typeof wt&&pt>=wt}],"filter-id->=":[xn,[Cn],function(g,z){var j=z[0],st=g.id(),pt=j.value;return typeof st==typeof pt&&st>=pt}],"filter-has":[xn,[Cn],function(g,z){var j=z[0];return j.value in g.properties()}],"filter-has-id":[xn,[],function(g){return g.id()!==null&&g.id()!==void 0}],"filter-type-in":[xn,[ta(mn)],function(g,z){var j=z[0];return j.value.indexOf(g.geometryType())>=0}],"filter-id-in":[xn,[ta(Cn)],function(g,z){var j=z[0];return j.value.indexOf(g.id())>=0}],"filter-in-small":[xn,[mn,ta(Cn)],function(g,z){var j=z[0],st=z[1];return st.value.indexOf(g.properties()[j.value])>=0}],"filter-in-large":[xn,[mn,ta(Cn)],function(g,z){var j=z[0],st=z[1];return Lu(g.properties()[j.value],st.value,0,st.value.length-1)}],all:{type:xn,overloads:[[[xn,xn],function(g,z){var j=z[0],st=z[1];return j.evaluate(g)&&st.evaluate(g)}],[Yo(xn),function(g,z){for(var j=0,st=z;j<st.length;j+=1){var pt=st[j];if(!pt.evaluate(g))return!1}return!0}]]},any:{type:xn,overloads:[[[xn,xn],function(g,z){var j=z[0],st=z[1];return j.evaluate(g)||st.evaluate(g)}],[Yo(xn),function(g,z){for(var j=0,st=z;j<st.length;j+=1){var pt=st[j];if(pt.evaluate(g))return!0}return!1}]]},"!":[xn,[xn],function(g,z){var j=z[0];return!j.evaluate(g)}],"is-supported-script":[xn,[mn],function(g,z){var j=z[0],st=g.globals&&g.globals.isSupportedScript;return st?st(j.evaluate(g)):!0}],upcase:[mn,[mn],function(g,z){var j=z[0];return j.evaluate(g).toUpperCase()}],downcase:[mn,[mn],function(g,z){var j=z[0];return j.evaluate(g).toLowerCase()}],concat:[mn,Yo(Cn),function(g,z){return z.map(function(j){return Ms(j.evaluate(g))}).join("")}],"resolved-locale":[mn,[Jn],function(g,z){var j=z[0];return j.evaluate(g).resolvedLocale()}]});function Bs(g){return{result:"success",value:g}}function as(g){return{result:"error",value:g}}function Ho(g){return g["property-type"]==="data-driven"||g["property-type"]==="cross-faded-data-driven"}function tl(g){return!!g.expression&&g.expression.parameters.indexOf("zoom")>-1}function Ns(g){return!!g.expression&&g.expression.interpolated}function Ji(g){return g instanceof Number?"number":g instanceof String?"string":g instanceof Boolean?"boolean":Array.isArray(g)?"array":g===null?"null":typeof g}function js(g){return typeof g=="object"&&g!==null&&!Array.isArray(g)}function Rl(g){return g}function Ru(g,z){var j=z.type==="color",st=g.stops&&typeof g.stops[0][0]=="object",pt=st||g.property!==void 0,wt=st||!pt,Rt=g.type||(Ns(z)?"exponential":"interval");if(j&&(g=Tn({},g),g.stops&&(g.stops=g.stops.map(function(Xn){return[Xn[0],qi.parse(Xn[1])]})),g.default?g.default=qi.parse(g.default):g.default=qi.parse(z.default)),g.colorSpace&&g.colorSpace!=="rgb"&&!El[g.colorSpace])throw new Error("Unknown color space: "+g.colorSpace);var Jt,le,we;if(Rt==="exponential")Jt=ru;else if(Rt==="interval")Jt=Ol;else if(Rt==="categorical"){Jt=el,le=Object.create(null);for(var Pe=0,Ue=g.stops;Pe<Ue.length;Pe+=1){var Ve=Ue[Pe];le[Ve[0]]=Ve[1]}we=typeof g.stops[0][0]}else if(Rt==="identity")Jt=rl;else throw new Error('Unknown function type "'+Rt+'"');if(st){for(var er={},_r=[],Ir=0;Ir<g.stops.length;Ir++){var un=g.stops[Ir],tn=un[0].zoom;er[tn]===void 0&&(er[tn]={zoom:tn,type:g.type,property:g.property,default:g.default,stops:[]},_r.push(tn)),er[tn].stops.push([un[0].value,un[1]])}for(var gn=[],bn=0,hn=_r;bn<hn.length;bn+=1){var Ln=hn[bn];gn.push([er[Ln].zoom,Ru(er[Ln],z)])}var Un={name:"linear"};return{kind:"composite",interpolationType:Un,interpolationFactor:ya.interpolationFactor.bind(void 0,Un),zoomStops:gn.map(function(Xn){return Xn[0]}),evaluate:function(Xn,fi){var hi=Xn.zoom;return ru({stops:gn,base:g.base},z,hi).evaluate(hi,fi)}}}else if(wt){var Wn=Rt==="exponential"?{name:"exponential",base:g.base!==void 0?g.base:1}:null;return{kind:"camera",interpolationType:Wn,interpolationFactor:ya.interpolationFactor.bind(void 0,Wn),zoomStops:g.stops.map(function(Xn){return Xn[0]}),evaluate:function(Xn){var fi=Xn.zoom;return Jt(g,z,fi,le,we)}}}else return{kind:"source",evaluate:function(Xn,fi){var hi=fi&&fi.properties?fi.properties[g.property]:void 0;return hi===void 0?Us(g.default,z.default):Jt(g,z,hi,le,we)}}}function Us(g,z,j){if(g!==void 0)return g;if(z!==void 0)return z;if(j!==void 0)return j}function el(g,z,j,st,pt){var wt=typeof j===pt?st[j]:void 0;return Us(wt,g.default,z.default)}function Ol(g,z,j){if(Ji(j)!=="number")return Us(g.default,z.default);var st=g.stops.length;if(st===1||j<=g.stops[0][0])return g.stops[0][1];if(j>=g.stops[st-1][0])return g.stops[st-1][1];var pt=Ls(g.stops.map(function(wt){return wt[0]}),j);return g.stops[pt][1]}function ru(g,z,j){var st=g.base!==void 0?g.base:1;if(Ji(j)!=="number")return Us(g.default,z.default);var pt=g.stops.length;if(pt===1||j<=g.stops[0][0])return g.stops[0][1];if(j>=g.stops[pt-1][0])return g.stops[pt-1][1];var wt=Ls(g.stops.map(function(Ue){return Ue[0]}),j),Rt=nl(j,st,g.stops[wt][0],g.stops[wt+1][0]),Jt=g.stops[wt][1],le=g.stops[wt+1][1],we=Tl[z.type]||Rl;if(g.colorSpace&&g.colorSpace!=="rgb"){var Pe=El[g.colorSpace];we=function(Ue,Ve){return Pe.reverse(Pe.interpolate(Pe.forward(Ue),Pe.forward(Ve),Rt))}}return typeof Jt.evaluate=="function"?{evaluate:function(){for(var Ue=[],Ve=arguments.length;Ve--;)Ue[Ve]=arguments[Ve];var er=Jt.evaluate.apply(void 0,Ue),_r=le.evaluate.apply(void 0,Ue);if(!(er===void 0||_r===void 0))return we(er,_r,Rt)}}:we(Jt,le,Rt)}function rl(g,z,j){return z.type==="color"?j=qi.parse(j):z.type==="formatted"?j=Ea.fromString(j.toString()):z.type==="resolvedImage"?j=Xa.fromString(j.toString()):Ji(j)!==z.type&&(z.type!=="enum"||!z.values[j])&&(j=void 0),Us(j,g.default,z.default)}function nl(g,z,j,st){var pt=st-j,wt=g-j;return pt===0?0:z===1?wt/pt:(Math.pow(z,wt)-1)/(Math.pow(z,pt)-1)}var os=function(g,z){this.expression=g,this._warningHistory={},this._evaluator=new Ro,this._defaultValue=z?Ou(z):null,this._enumValues=z&&z.type==="enum"?z.values:null};os.prototype.evaluateWithoutErrorHandling=function(g,z,j,st,pt,wt){return this._evaluator.globals=g,this._evaluator.feature=z,this._evaluator.featureState=j,this._evaluator.canonical=st,this._evaluator.availableImages=pt||null,this._evaluator.formattedSection=wt,this.expression.evaluate(this._evaluator)},os.prototype.evaluate=function(g,z,j,st,pt,wt){this._evaluator.globals=g,this._evaluator.feature=z||null,this._evaluator.featureState=j||null,this._evaluator.canonical=st,this._evaluator.availableImages=pt||null,this._evaluator.formattedSection=wt||null;try{var Rt=this.expression.evaluate(this._evaluator);if(Rt==null||typeof Rt=="number"&&Rt!==Rt)return this._defaultValue;if(this._enumValues&&!(Rt in this._enumValues))throw new ka("Expected value to be one of "+Object.keys(this._enumValues).map(function(Jt){return JSON.stringify(Jt)}).join(", ")+", but found "+JSON.stringify(Rt)+" instead.");return Rt}catch(Jt){return this._warningHistory[Jt.message]||(this._warningHistory[Jt.message]=!0,typeof console<"u"&&console.warn(Jt.message)),this._defaultValue}};function il(g){return Array.isArray(g)&&g.length>0&&typeof g[0]=="string"&&g[0]in Ds}function ss(g,z){var j=new Po(Ds,[],z?fc(z):void 0),st=j.parse(g,void 0,void 0,void 0,z&&z.type==="string"?{typeAnnotation:"coerce"}:void 0);return st?Bs(new os(st,z)):as(j.errors)}var Ma=function(g,z){this.kind=g,this._styleExpression=z,this.isStateDependent=g!=="constant"&&!ds(z.expression)};Ma.prototype.evaluateWithoutErrorHandling=function(g,z,j,st,pt,wt){return this._styleExpression.evaluateWithoutErrorHandling(g,z,j,st,pt,wt)},Ma.prototype.evaluate=function(g,z,j,st,pt,wt){return this._styleExpression.evaluate(g,z,j,st,pt,wt)};var Io=function(g,z,j,st){this.kind=g,this.zoomStops=j,this._styleExpression=z,this.isStateDependent=g!=="camera"&&!ds(z.expression),this.interpolationType=st};Io.prototype.evaluateWithoutErrorHandling=function(g,z,j,st,pt,wt){return this._styleExpression.evaluateWithoutErrorHandling(g,z,j,st,pt,wt)},Io.prototype.evaluate=function(g,z,j,st,pt,wt){return this._styleExpression.evaluate(g,z,j,st,pt,wt)},Io.prototype.interpolationFactor=function(g,z,j){return this.interpolationType?ya.interpolationFactor(this.interpolationType,g,z,j):0};function nu(g,z){if(g=ss(g,z),g.result==="error")return g;var j=g.value.expression,st=Es(j);if(!st&&!Ho(z))return as([new xr("","data expressions not supported")]);var pt=Zs(j,["zoom"]);if(!pt&&!tl(z))return as([new xr("","zoom expressions not supported")]);var wt=al(j);if(!wt&&!pt)return as([new xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(wt instanceof xr)return as([wt]);if(wt instanceof ya&&!Ns(z))return as([new xr("",'"interpolate" expressions cannot be used with this property')]);if(!wt)return Bs(st?new Ma("constant",g.value):new Ma("source",g.value));var Rt=wt instanceof ya?wt.interpolation:void 0;return Bs(st?new Io("camera",g.value,wt.labels,Rt):new Io("composite",g.value,wt.labels,Rt))}var xs=function(g,z){this._parameters=g,this._specification=z,Tn(this,Ru(this._parameters,this._specification))};xs.deserialize=function(g){return new xs(g._parameters,g._specification)},xs.serialize=function(g){return{_parameters:g._parameters,_specification:g._specification}};function Pl(g,z){if(js(g))return new xs(g,z);if(il(g)){var j=nu(g,z);if(j.result==="error")throw new Error(j.value.map(function(pt){return pt.key+": "+pt.message}).join(", "));return j.value}else{var st=g;return typeof g=="string"&&z.type==="color"&&(st=qi.parse(g)),{kind:"constant",evaluate:function(){return st}}}}function al(g){var z=null;if(g instanceof Uo)z=al(g.result);else if(g instanceof _o)for(var j=0,st=g.args;j<st.length;j+=1){var pt=st[j];if(z=al(pt),z)break}else(g instanceof xo||g instanceof ya)&&g.input instanceof La&&g.input.name==="zoom"&&(z=g);return z instanceof xr||g.eachChild(function(wt){var Rt=al(wt);Rt instanceof xr?z=Rt:!z&&Rt?z=new xr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):z&&Rt&&z!==Rt&&(z=new xr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),z}function fc(g){var z={color:_n,string:mn,number:Vr,enum:mn,boolean:xn,formatted:ai,resolvedImage:_i};return g.type==="array"?ta(z[g.value]||Cn,g.length):z[g.type]}function Ou(g){return g.type==="color"&&js(g.default)?new qi(0,0,0,0):g.type==="color"?qi.parse(g.default)||null:g.default===void 0?null:g.default}function Ha(g){var z=g.key,j=g.value,st=g.valueSpec||{},pt=g.objectElementValidators||{},wt=g.style,Rt=g.styleSpec,Jt=[],le=Ji(j);if(le!=="object")return[new Or(z,j,"object expected, "+le+" found")];for(var we in j){var Pe=we.split(".")[0],Ue=st[Pe]||st["*"],Ve=void 0;if(pt[Pe])Ve=pt[Pe];else if(st[Pe])Ve=Tr;else if(pt["*"])Ve=pt["*"];else if(st["*"])Ve=Tr;else{Jt.push(new Or(z,j[we],'unknown property "'+we+'"'));continue}Jt=Jt.concat(Ve({key:(z&&z+".")+we,value:j[we],valueSpec:Ue,style:wt,styleSpec:Rt,object:j,objectKey:we},j))}for(var er in st)pt[er]||st[er].required&&st[er].default===void 0&&j[er]===void 0&&Jt.push(new Or(z,j,'missing required property "'+er+'"'));return Jt}function ol(g){var z=g.value,j=g.valueSpec,st=g.style,pt=g.styleSpec,wt=g.key,Rt=g.arrayElementValidator||Tr;if(Ji(z)!=="array")return[new Or(wt,z,"array expected, "+Ji(z)+" found")];if(j.length&&z.length!==j.length)return[new Or(wt,z,"array length "+j.length+" expected, length "+z.length+" found")];if(j["min-length"]&&z.length<j["min-length"])return[new Or(wt,z,"array length at least "+j["min-length"]+" expected, length "+z.length+" found")];var Jt={type:j.value,values:j.values};pt.$version<7&&(Jt.function=j.function),Ji(j.value)==="object"&&(Jt=j.value);for(var le=[],we=0;we<z.length;we++)le=le.concat(Rt({array:z,arrayIndex:we,value:z[we],valueSpec:Jt,style:st,styleSpec:pt,key:wt+"["+we+"]"}));return le}function qs(g){var z=g.key,j=g.value,st=g.valueSpec,pt=Ji(j);return pt==="number"&&j!==j&&(pt="NaN"),pt!=="number"?[new Or(z,j,"number expected, "+pt+" found")]:"minimum"in st&&j<st.minimum?[new Or(z,j,j+" is less than the minimum value "+st.minimum)]:"maximum"in st&&j>st.maximum?[new Or(z,j,j+" is greater than the maximum value "+st.maximum)]:[]}function Pu(g){var z=g.valueSpec,j=ln(g.value.type),st,pt={},wt,Rt,Jt=j!=="categorical"&&g.value.property===void 0,le=!Jt,we=Ji(g.value.stops)==="array"&&Ji(g.value.stops[0])==="array"&&Ji(g.value.stops[0][0])==="object",Pe=Ha({key:g.key,value:g.value,valueSpec:g.styleSpec.function,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{stops:Ue,default:_r}});return j==="identity"&&Jt&&Pe.push(new Or(g.key,g.value,'missing required property "property"')),j!=="identity"&&!g.value.stops&&Pe.push(new Or(g.key,g.value,'missing required property "stops"')),j==="exponential"&&g.valueSpec.expression&&!Ns(g.valueSpec)&&Pe.push(new Or(g.key,g.value,"exponential functions not supported")),g.styleSpec.$version>=8&&(le&&!Ho(g.valueSpec)?Pe.push(new Or(g.key,g.value,"property functions not supported")):Jt&&!tl(g.valueSpec)&&Pe.push(new Or(g.key,g.value,"zoom functions not supported"))),(j==="categorical"||we)&&g.value.property===void 0&&Pe.push(new Or(g.key,g.value,'"property" property is required')),Pe;function Ue(Ir){if(j==="identity")return[new Or(Ir.key,Ir.value,'identity function may not have a "stops" property')];var un=[],tn=Ir.value;return un=un.concat(ol({key:Ir.key,value:tn,valueSpec:Ir.valueSpec,style:Ir.style,styleSpec:Ir.styleSpec,arrayElementValidator:Ve})),Ji(tn)==="array"&&tn.length===0&&un.push(new Or(Ir.key,tn,"array must have at least one stop")),un}function Ve(Ir){var un=[],tn=Ir.value,gn=Ir.key;if(Ji(tn)!=="array")return[new Or(gn,tn,"array expected, "+Ji(tn)+" found")];if(tn.length!==2)return[new Or(gn,tn,"array length 2 expected, length "+tn.length+" found")];if(we){if(Ji(tn[0])!=="object")return[new Or(gn,tn,"object expected, "+Ji(tn[0])+" found")];if(tn[0].zoom===void 0)return[new Or(gn,tn,"object stop key must have zoom")];if(tn[0].value===void 0)return[new Or(gn,tn,"object stop key must have value")];if(Rt&&Rt>ln(tn[0].zoom))return[new Or(gn,tn[0].zoom,"stop zoom values must appear in ascending order")];ln(tn[0].zoom)!==Rt&&(Rt=ln(tn[0].zoom),wt=void 0,pt={}),un=un.concat(Ha({key:gn+"[0]",value:tn[0],valueSpec:{zoom:{}},style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{zoom:qs,value:er}}))}else un=un.concat(er({key:gn+"[0]",value:tn[0],valueSpec:{},style:Ir.style,styleSpec:Ir.styleSpec},tn));return il(nn(tn[1]))?un.concat([new Or(gn+"[1]",tn[1],"expressions are not allowed in function stops.")]):un.concat(Tr({key:gn+"[1]",value:tn[1],valueSpec:z,style:Ir.style,styleSpec:Ir.styleSpec}))}function er(Ir,un){var tn=Ji(Ir.value),gn=ln(Ir.value),bn=Ir.value!==null?Ir.value:un;if(!st)st=tn;else if(tn!==st)return[new Or(Ir.key,bn,tn+" stop domain type must match previous stop domain type "+st)];if(tn!=="number"&&tn!=="string"&&tn!=="boolean")return[new Or(Ir.key,bn,"stop domain value must be a number, string, or boolean")];if(tn!=="number"&&j!=="categorical"){var hn="number expected, "+tn+" found";return Ho(z)&&j===void 0&&(hn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Or(Ir.key,bn,hn)]}return j==="categorical"&&tn==="number"&&(!isFinite(gn)||Math.floor(gn)!==gn)?[new Or(Ir.key,bn,"integer expected, found "+gn)]:j!=="categorical"&&tn==="number"&&wt!==void 0&&gn<wt?[new Or(Ir.key,bn,"stop domain values must appear in ascending order")]:(wt=gn,j==="categorical"&&gn in pt?[new Or(Ir.key,bn,"stop domain values must be unique")]:(pt[gn]=!0,[]))}function _r(Ir){return Tr({key:Ir.key,value:Ir.value,valueSpec:z,style:Ir.style,styleSpec:Ir.styleSpec})}}function ls(g){var z=(g.expressionContext==="property"?nu:ss)(nn(g.value),g.valueSpec);if(z.result==="error")return z.value.map(function(st){return new Or(""+g.key+st.key,g.value,st.message)});var j=z.value.expression||z.value._styleExpression.expression;if(g.expressionContext==="property"&&g.propertyKey==="text-font"&&!j.outputDefined())return[new Or(g.key,g.value,'Invalid data expression for "'+g.propertyKey+'". Output values must be contained as literals within the expression.')];if(g.expressionContext==="property"&&g.propertyType==="layout"&&!ds(j))return[new Or(g.key,g.value,'"feature-state" data expressions are not supported with layout properties.')];if(g.expressionContext==="filter"&&!ds(j))return[new Or(g.key,g.value,'"feature-state" data expressions are not supported with filters.')];if(g.expressionContext&&g.expressionContext.indexOf("cluster")===0){if(!Zs(j,["zoom","feature-state"]))return[new Or(g.key,g.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(g.expressionContext==="cluster-initial"&&!Es(j))return[new Or(g.key,g.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function hc(g){var z=g.value,j=g.key,st=Ji(z);return st!=="boolean"?[new Or(j,z,"boolean expected, "+st+" found")]:[]}function eo(g){var z=g.key,j=g.value,st=Ji(j);return st!=="string"?[new Or(z,j,"color expected, "+st+" found")]:du(j)===null?[new Or(z,j,'color expected, "'+j+'" found')]:[]}function sl(g){var z=g.key,j=g.value,st=g.valueSpec,pt=[];return Array.isArray(st.values)?st.values.indexOf(ln(j))===-1&&pt.push(new Or(z,j,"expected one of ["+st.values.join(", ")+"], "+JSON.stringify(j)+" found")):Object.keys(st.values).indexOf(ln(j))===-1&&pt.push(new Or(z,j,"expected one of ["+Object.keys(st.values).join(", ")+"], "+JSON.stringify(j)+" found")),pt}function Il(g){if(g===!0||g===!1)return!0;if(!Array.isArray(g)||g.length===0)return!1;switch(g[0]){case"has":return g.length>=2&&g[1]!=="$id"&&g[1]!=="$type";case"in":return g.length>=3&&(typeof g[1]!="string"||Array.isArray(g[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return g.length!==3||Array.isArray(g[1])||Array.isArray(g[2]);case"any":case"all":for(var z=0,j=g.slice(1);z<j.length;z+=1){var st=j[z];if(!Il(st)&&typeof st!="boolean")return!1}return!0;default:return!0}}var Vo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function us(g){if(g==null)return{filter:function(){return!0},needGeometry:!1};Il(g)||(g=ul(g));var z=ss(g,Vo);if(z.result==="error")throw new Error(z.value.map(function(st){return st.key+": "+st.message}).join(", "));var j=ll(g);return{filter:function(st,pt,wt){return z.value.evaluate(st,pt,{},wt)},needGeometry:j}}function iu(g,z){return g<z?-1:g>z?1:0}function ll(g){if(!Array.isArray(g))return!1;if(g[0]==="within")return!0;for(var z=1;z<g.length;z++)if(ll(g[z]))return!0;return!1}function ul(g){if(!g)return!0;var z=g[0];if(g.length<=1)return z!=="any";var j=z==="=="?zl(g[1],g[2],"=="):z==="!="?bs(zl(g[1],g[2],"==")):z==="<"||z===">"||z==="<="||z===">="?zl(g[1],g[2],z):z==="any"?Iu(g.slice(1)):z==="all"?["all"].concat(g.slice(1).map(ul)):z==="none"?["all"].concat(g.slice(1).map(ul).map(bs)):z==="in"?cl(g[1],g.slice(2)):z==="!in"?bs(cl(g[1],g.slice(2))):z==="has"?au(g[1]):z==="!has"?bs(au(g[1])):z==="within"?g:!0;return j}function zl(g,z,j){switch(g){case"$type":return["filter-type-"+j,z];case"$id":return["filter-id-"+j,z];default:return["filter-"+j,g,z]}}function Iu(g){return["any"].concat(g.map(ul))}function cl(g,z){if(z.length===0)return!1;switch(g){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(j){return typeof j!=typeof z[0]})?["filter-in-large",g,["literal",z.sort(iu)]]:["filter-in-small",g,["literal",z]]}}function au(g){switch(g){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",g]}}function bs(g){return["!",g]}function ou(g){return Il(nn(g.value))?ls(Tn({},g,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fl(g)}function fl(g){var z=g.value,j=g.key;if(Ji(z)!=="array")return[new Or(j,z,"array expected, "+Ji(z)+" found")];var st=g.styleSpec,pt,wt=[];if(z.length<1)return[new Or(j,z,"filter array must have at least 1 element")];switch(wt=wt.concat(sl({key:j+"[0]",value:z[0],valueSpec:st.filter_operator,style:g.style,styleSpec:g.styleSpec})),ln(z[0])){case"<":case"<=":case">":case">=":z.length>=2&&ln(z[1])==="$type"&&wt.push(new Or(j,z,'"$type" cannot be use with operator "'+z[0]+'"'));case"==":case"!=":z.length!==3&&wt.push(new Or(j,z,'filter array for operator "'+z[0]+'" must have 3 elements'));case"in":case"!in":z.length>=2&&(pt=Ji(z[1]),pt!=="string"&&wt.push(new Or(j+"[1]",z[1],"string expected, "+pt+" found")));for(var Rt=2;Rt<z.length;Rt++)pt=Ji(z[Rt]),ln(z[1])==="$type"?wt=wt.concat(sl({key:j+"["+Rt+"]",value:z[Rt],valueSpec:st.geometry_type,style:g.style,styleSpec:g.styleSpec})):pt!=="string"&&pt!=="number"&&pt!=="boolean"&&wt.push(new Or(j+"["+Rt+"]",z[Rt],"string, number, or boolean expected, "+pt+" found"));break;case"any":case"all":case"none":for(var Jt=1;Jt<z.length;Jt++)wt=wt.concat(fl({key:j+"["+Jt+"]",value:z[Jt],style:g.style,styleSpec:g.styleSpec}));break;case"has":case"!has":pt=Ji(z[1]),z.length!==2?wt.push(new Or(j,z,'filter array for "'+z[0]+'" operator must have 2 elements')):pt!=="string"&&wt.push(new Or(j+"[1]",z[1],"string expected, "+pt+" found"));break;case"within":pt=Ji(z[1]),z.length!==2?wt.push(new Or(j,z,'filter array for "'+z[0]+'" operator must have 2 elements')):pt!=="object"&&wt.push(new Or(j+"[1]",z[1],"object expected, "+pt+" found"));break}return wt}function zu(g,z){var j=g.key,st=g.style,pt=g.styleSpec,wt=g.value,Rt=g.objectKey,Jt=pt[z+"_"+g.layerType];if(!Jt)return[];var le=Rt.match(/^(.*)-transition$/);if(z==="paint"&&le&&Jt[le[1]]&&Jt[le[1]].transition)return Tr({key:j,value:wt,valueSpec:pt.transition,style:st,styleSpec:pt});var we=g.valueSpec||Jt[Rt];if(!we)return[new Or(j,wt,'unknown property "'+Rt+'"')];var Pe;if(Ji(wt)==="string"&&Ho(we)&&!we.tokens&&(Pe=/^{([^}]+)}$/.exec(wt)))return[new Or(j,wt,'"'+Rt+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Pe[1])+" }`.")];var Ue=[];return g.layerType==="symbol"&&(Rt==="text-field"&&st&&!st.glyphs&&Ue.push(new Or(j,wt,'use of "text-field" requires a style "glyphs" property')),Rt==="text-font"&&js(nn(wt))&&ln(wt.type)==="identity"&&Ue.push(new Or(j,wt,'"text-font" does not support identity functions'))),Ue.concat(Tr({key:g.key,value:wt,valueSpec:we,style:st,styleSpec:pt,expressionContext:"property",propertyType:z,propertyKey:Rt}))}function qt(g){return zu(g,"paint")}function Kt(g){return zu(g,"layout")}function se(g){var z=[],j=g.value,st=g.key,pt=g.style,wt=g.styleSpec;!j.type&&!j.ref&&z.push(new Or(st,j,'either "type" or "ref" is required'));var Rt=ln(j.type),Jt=ln(j.ref);if(j.id)for(var le=ln(j.id),we=0;we<g.arrayIndex;we++){var Pe=pt.layers[we];ln(Pe.id)===le&&z.push(new Or(st,j.id,'duplicate layer id "'+j.id+'", previously used at line '+Pe.id.__line__))}if("ref"in j){["type","source","source-layer","filter","layout"].forEach(function(_r){_r in j&&z.push(new Or(st,j[_r],'"'+_r+'" is prohibited for ref layers'))});var Ue;pt.layers.forEach(function(_r){ln(_r.id)===Jt&&(Ue=_r)}),Ue?Ue.ref?z.push(new Or(st,j.ref,"ref cannot reference another ref layer")):Rt=ln(Ue.type):z.push(new Or(st,j.ref,'ref layer "'+Jt+'" not found'))}else if(Rt!=="background")if(!j.source)z.push(new Or(st,j,'missing required property "source"'));else{var Ve=pt.sources&&pt.sources[j.source],er=Ve&&ln(Ve.type);Ve?er==="vector"&&Rt==="raster"?z.push(new Or(st,j.source,'layer "'+j.id+'" requires a raster source')):er==="raster"&&Rt!=="raster"?z.push(new Or(st,j.source,'layer "'+j.id+'" requires a vector source')):er==="vector"&&!j["source-layer"]?z.push(new Or(st,j,'layer "'+j.id+'" must specify a "source-layer"')):er==="raster-dem"&&Rt!=="hillshade"?z.push(new Or(st,j.source,"raster-dem source can only be used with layer type 'hillshade'.")):Rt==="line"&&j.paint&&j.paint["line-gradient"]&&(er!=="geojson"||!Ve.lineMetrics)&&z.push(new Or(st,j,'layer "'+j.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new Or(st,j.source,'source "'+j.source+'" not found'))}return z=z.concat(Ha({key:st,value:j,valueSpec:wt.layer,style:g.style,styleSpec:g.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Tr({key:st+".type",value:j.type,valueSpec:wt.layer.type,style:g.style,styleSpec:g.styleSpec,object:j,objectKey:"type"})},filter:ou,layout:function(_r){return Ha({layer:j,key:_r.key,value:_r.value,style:_r.style,styleSpec:_r.styleSpec,objectElementValidators:{"*":function(Ir){return Kt(Tn({layerType:Rt},Ir))}}})},paint:function(_r){return Ha({layer:j,key:_r.key,value:_r.value,style:_r.style,styleSpec:_r.styleSpec,objectElementValidators:{"*":function(Ir){return qt(Tn({layerType:Rt},Ir))}}})}}})),z}function ve(g){var z=g.value,j=g.key,st=Ji(z);return st!=="string"?[new Or(j,z,"string expected, "+st+" found")]:[]}var Se={promoteId:Le};function Ae(g){var z=g.value,j=g.key,st=g.styleSpec,pt=g.style;if(!z.type)return[new Or(j,z,'"type" is required')];var wt=ln(z.type),Rt;switch(wt){case"vector":case"raster":case"raster-dem":return Rt=Ha({key:j,value:z,valueSpec:st["source_"+wt.replace("-","_")],style:g.style,styleSpec:st,objectElementValidators:Se}),Rt;case"geojson":if(Rt=Ha({key:j,value:z,valueSpec:st.source_geojson,style:pt,styleSpec:st,objectElementValidators:Se}),z.cluster)for(var Jt in z.clusterProperties){var le=z.clusterProperties[Jt],we=le[0],Pe=le[1],Ue=typeof we=="string"?[we,["accumulated"],["get",Jt]]:we;Rt.push.apply(Rt,ls({key:j+"."+Jt+".map",value:Pe,expressionContext:"cluster-map"})),Rt.push.apply(Rt,ls({key:j+"."+Jt+".reduce",value:Ue,expressionContext:"cluster-reduce"}))}return Rt;case"video":return Ha({key:j,value:z,valueSpec:st.source_video,style:pt,styleSpec:st});case"image":return Ha({key:j,value:z,valueSpec:st.source_image,style:pt,styleSpec:st});case"canvas":return[new Or(j,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return sl({key:j+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pt,styleSpec:st})}}function Le(g){var z=g.key,j=g.value;if(Ji(j)==="string")return ve({key:z,value:j});var st=[];for(var pt in j)st.push.apply(st,ve({key:z+"."+pt,value:j[pt]}));return st}function ir(g){var z=g.value,j=g.styleSpec,st=j.light,pt=g.style,wt=[],Rt=Ji(z);if(z===void 0)return wt;if(Rt!=="object")return wt=wt.concat([new Or("light",z,"object expected, "+Rt+" found")]),wt;for(var Jt in z){var le=Jt.match(/^(.*)-transition$/);le&&st[le[1]]&&st[le[1]].transition?wt=wt.concat(Tr({key:Jt,value:z[Jt],valueSpec:j.transition,style:pt,styleSpec:j})):st[Jt]?wt=wt.concat(Tr({key:Jt,value:z[Jt],valueSpec:st[Jt],style:pt,styleSpec:j})):wt=wt.concat([new Or(Jt,z[Jt],'unknown property "'+Jt+'"')])}return wt}function fr(g){return ve(g).length===0?[]:ls(g)}function $e(g){return ve(g).length===0?[]:ls(g)}var mr={"*":function(){return[]},array:ol,boolean:hc,number:qs,color:eo,constants:vn,enum:sl,filter:ou,function:Pu,layer:se,object:Ha,source:Ae,light:ir,string:ve,formatted:fr,resolvedImage:$e};function Tr(g){var z=g.value,j=g.valueSpec,st=g.styleSpec;if(j.expression&&js(ln(z)))return Pu(g);if(j.expression&&il(nn(z)))return ls(g);if(j.type&&mr[j.type])return mr[j.type](g);var pt=Ha(Tn({},g,{valueSpec:j.type?st[j.type]:j}));return pt}function Rr(g){var z=g.value,j=g.key,st=ve(g);return st.length||(z.indexOf("{fontstack}")===-1&&st.push(new Or(j,z,'"glyphs" url must include a "{fontstack}" token')),z.indexOf("{range}")===-1&&st.push(new Or(j,z,'"glyphs" url must include a "{range}" token'))),st}function Zr(g,z){z===void 0&&(z=gr);var j=[];return j=j.concat(Tr({key:"",value:g,valueSpec:z.$root,styleSpec:z,style:g,objectElementValidators:{glyphs:Rr,"*":function(){return[]}}})),g.constants&&(j=j.concat(vn({key:"constants",value:g.constants,style:g,styleSpec:z}))),dn(j)}Zr.source=wn(Ae),Zr.light=wn(ir),Zr.layer=wn(se),Zr.filter=wn(ou),Zr.paintProperty=wn(qt),Zr.layoutProperty=wn(Kt);function dn(g){return[].concat(g).sort(function(z,j){return z.line-j.line})}function wn(g){return function(){for(var z=[],j=arguments.length;j--;)z[j]=arguments[j];return dn(g.apply(this,z))}}var kn=Zr,jn=kn.light,wi=kn.paintProperty,Ai=kn.layoutProperty;function Si(g,z){var j=!1;if(z&&z.length)for(var st=0,pt=z;st<pt.length;st+=1){var wt=pt[st];g.fire(new Oe(new Error(wt.message))),j=!0}return j}var Li=$i,zi=3;function $i(g,z,j){var st=this.cells=[];if(g instanceof ArrayBuffer){this.arrayBuffer=g;var pt=new Int32Array(this.arrayBuffer);g=pt[0],z=pt[1],j=pt[2],this.d=z+2*j;for(var wt=0;wt<this.d*this.d;wt++){var Rt=pt[zi+wt],Jt=pt[zi+wt+1];st.push(Rt===Jt?null:pt.subarray(Rt,Jt))}var le=pt[zi+st.length],we=pt[zi+st.length+1];this.keys=pt.subarray(le,we),this.bboxes=pt.subarray(we),this.insert=this._insertReadonly}else{this.d=z+2*j;for(var Pe=0;Pe<this.d*this.d;Pe++)st.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=g,this.padding=j,this.scale=z/g,this.uid=0;var Ue=j/z*g;this.min=-Ue,this.max=g+Ue}$i.prototype.insert=function(g,z,j,st,pt){this._forEachCell(z,j,st,pt,this._insertCell,this.uid++),this.keys.push(g),this.bboxes.push(z),this.bboxes.push(j),this.bboxes.push(st),this.bboxes.push(pt)},$i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$i.prototype._insertCell=function(g,z,j,st,pt,wt){this.cells[pt].push(wt)},$i.prototype.query=function(g,z,j,st,pt){var wt=this.min,Rt=this.max;if(g<=wt&&z<=wt&&Rt<=j&&Rt<=st&&!pt)return Array.prototype.slice.call(this.keys);var Jt=[],le={};return this._forEachCell(g,z,j,st,this._queryCell,Jt,le,pt),Jt},$i.prototype._queryCell=function(g,z,j,st,pt,wt,Rt,Jt){var le=this.cells[pt];if(le!==null)for(var we=this.keys,Pe=this.bboxes,Ue=0;Ue<le.length;Ue++){var Ve=le[Ue];if(Rt[Ve]===void 0){var er=Ve*4;(Jt?Jt(Pe[er+0],Pe[er+1],Pe[er+2],Pe[er+3]):g<=Pe[er+2]&&z<=Pe[er+3]&&j>=Pe[er+0]&&st>=Pe[er+1])?(Rt[Ve]=!0,wt.push(we[Ve])):Rt[Ve]=!1}}},$i.prototype._forEachCell=function(g,z,j,st,pt,wt,Rt,Jt){for(var le=this._convertToCellCoord(g),we=this._convertToCellCoord(z),Pe=this._convertToCellCoord(j),Ue=this._convertToCellCoord(st),Ve=le;Ve<=Pe;Ve++)for(var er=we;er<=Ue;er++){var _r=this.d*er+Ve;if(!(Jt&&!Jt(this._convertFromCellCoord(Ve),this._convertFromCellCoord(er),this._convertFromCellCoord(Ve+1),this._convertFromCellCoord(er+1)))&&pt.call(this,g,z,j,st,_r,wt,Rt,Jt))return}},$i.prototype._convertFromCellCoord=function(g){return(g-this.padding)/this.scale},$i.prototype._convertToCellCoord=function(g){return Math.max(0,Math.min(this.d-1,Math.floor(g*this.scale)+this.padding))},$i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var g=this.cells,z=zi+this.cells.length+1+1,j=0,st=0;st<this.cells.length;st++)j+=this.cells[st].length;var pt=new Int32Array(z+j+this.keys.length+this.bboxes.length);pt[0]=this.extent,pt[1]=this.n,pt[2]=this.padding;for(var wt=z,Rt=0;Rt<g.length;Rt++){var Jt=g[Rt];pt[zi+Rt]=wt,pt.set(Jt,wt),wt+=Jt.length}return pt[zi+g.length]=wt,pt.set(this.keys,wt),wt+=this.keys.length,pt[zi+g.length+1]=wt,pt.set(this.bboxes,wt),wt+=this.bboxes.length,pt.buffer};var xa=l.ImageData,lt=l.ImageBitmap,_t={};function Lt(g,z,j){j===void 0&&(j={}),Object.defineProperty(z,"_classRegistryKey",{value:g,writeable:!1}),_t[g]={klass:z,omit:j.omit||[],shallow:j.shallow||[]}}Lt("Object",Object),Li.serialize=function(g,z){var j=g.toArrayBuffer();return z&&z.push(j),{buffer:j}},Li.deserialize=function(g){return new Li(g.buffer)},Lt("Grid",Li),Lt("Color",qi),Lt("Error",Error),Lt("ResolvedImage",Xa),Lt("StylePropertyFunction",xs),Lt("StyleExpression",os,{omit:["_evaluator"]}),Lt("ZoomDependentExpression",Io),Lt("ZoomConstantExpression",Ma),Lt("CompoundExpression",La,{omit:["_evaluate"]});for(var Ht in Ds)Ds[Ht]._classRegistryKey||Lt("Expression_"+Ht,Ds[Ht]);function Wt(g){return g&&typeof ArrayBuffer<"u"&&(g instanceof ArrayBuffer||g.constructor&&g.constructor.name==="ArrayBuffer")}function ee(g){return lt&&g instanceof lt}function xe(g,z){if(g==null||typeof g=="boolean"||typeof g=="number"||typeof g=="string"||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp)return g;if(Wt(g)||ee(g))return z&&z.push(g),g;if(ArrayBuffer.isView(g)){var j=g;return z&&z.push(j.buffer),j}if(g instanceof xa)return z&&z.push(g.data.buffer),g;if(Array.isArray(g)){for(var st=[],pt=0,wt=g;pt<wt.length;pt+=1){var Rt=wt[pt];st.push(xe(Rt,z))}return st}if(typeof g=="object"){var Jt=g.constructor,le=Jt._classRegistryKey;if(!le)throw new Error("can't serialize object of unregistered class");var we=Jt.serialize?Jt.serialize(g,z):{};if(!Jt.serialize){for(var Pe in g)if(g.hasOwnProperty(Pe)&&!(_t[le].omit.indexOf(Pe)>=0)){var Ue=g[Pe];we[Pe]=_t[le].shallow.indexOf(Pe)>=0?Ue:xe(Ue,z)}g instanceof Error&&(we.message=g.message)}if(we.$name)throw new Error("$name property is reserved for worker serialization logic.");return le!=="Object"&&(we.$name=le),we}throw new Error("can't serialize object of type "+typeof g)}function me(g){if(g==null||typeof g=="boolean"||typeof g=="number"||typeof g=="string"||g instanceof Boolean||g instanceof Number||g instanceof String||g instanceof Date||g instanceof RegExp||Wt(g)||ee(g)||ArrayBuffer.isView(g)||g instanceof xa)return g;if(Array.isArray(g))return g.map(me);if(typeof g=="object"){var z=g.$name||"Object",j=_t[z],st=j.klass;if(!st)throw new Error("can't deserialize unregistered class "+z);if(st.deserialize)return st.deserialize(g);for(var pt=Object.create(st.prototype),wt=0,Rt=Object.keys(g);wt<Rt.length;wt+=1){var Jt=Rt[wt];if(Jt!=="$name"){var le=g[Jt];pt[Jt]=_t[z].shallow.indexOf(Jt)>=0?le:me(le)}}return pt}throw new Error("can't deserialize object of type "+typeof g)}var Ie=function(){this.first=!0};Ie.prototype.update=function(g,z){var j=Math.floor(g);return this.first?(this.first=!1,this.lastIntegerZoom=j,this.lastIntegerZoomTime=0,this.lastZoom=g,this.lastFloorZoom=j,!0):(this.lastFloorZoom>j?(this.lastIntegerZoom=j+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<j&&(this.lastIntegerZoom=j,this.lastIntegerZoomTime=z),g!==this.lastZoom?(this.lastZoom=g,this.lastFloorZoom=j,!0):!1)};var ze={"Latin-1 Supplement":function(g){return g>=128&&g<=255},Arabic:function(g){return g>=1536&&g<=1791},"Arabic Supplement":function(g){return g>=1872&&g<=1919},"Arabic Extended-A":function(g){return g>=2208&&g<=2303},"Hangul Jamo":function(g){return g>=4352&&g<=4607},"Unified Canadian Aboriginal Syllabics":function(g){return g>=5120&&g<=5759},Khmer:function(g){return g>=6016&&g<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(g){return g>=6320&&g<=6399},"General Punctuation":function(g){return g>=8192&&g<=8303},"Letterlike Symbols":function(g){return g>=8448&&g<=8527},"Number Forms":function(g){return g>=8528&&g<=8591},"Miscellaneous Technical":function(g){return g>=8960&&g<=9215},"Control Pictures":function(g){return g>=9216&&g<=9279},"Optical Character Recognition":function(g){return g>=9280&&g<=9311},"Enclosed Alphanumerics":function(g){return g>=9312&&g<=9471},"Geometric Shapes":function(g){return g>=9632&&g<=9727},"Miscellaneous Symbols":function(g){return g>=9728&&g<=9983},"Miscellaneous Symbols and Arrows":function(g){return g>=11008&&g<=11263},"CJK Radicals Supplement":function(g){return g>=11904&&g<=12031},"Kangxi Radicals":function(g){return g>=12032&&g<=12255},"Ideographic Description Characters":function(g){return g>=12272&&g<=12287},"CJK Symbols and Punctuation":function(g){return g>=12288&&g<=12351},Hiragana:function(g){return g>=12352&&g<=12447},Katakana:function(g){return g>=12448&&g<=12543},Bopomofo:function(g){return g>=12544&&g<=12591},"Hangul Compatibility Jamo":function(g){return g>=12592&&g<=12687},Kanbun:function(g){return g>=12688&&g<=12703},"Bopomofo Extended":function(g){return g>=12704&&g<=12735},"CJK Strokes":function(g){return g>=12736&&g<=12783},"Katakana Phonetic Extensions":function(g){return g>=12784&&g<=12799},"Enclosed CJK Letters and Months":function(g){return g>=12800&&g<=13055},"CJK Compatibility":function(g){return g>=13056&&g<=13311},"CJK Unified Ideographs Extension A":function(g){return g>=13312&&g<=19903},"Yijing Hexagram Symbols":function(g){return g>=19904&&g<=19967},"CJK Unified Ideographs":function(g){return g>=19968&&g<=40959},"Yi Syllables":function(g){return g>=40960&&g<=42127},"Yi Radicals":function(g){return g>=42128&&g<=42191},"Hangul Jamo Extended-A":function(g){return g>=43360&&g<=43391},"Hangul Syllables":function(g){return g>=44032&&g<=55215},"Hangul Jamo Extended-B":function(g){return g>=55216&&g<=55295},"Private Use Area":function(g){return g>=57344&&g<=63743},"CJK Compatibility Ideographs":function(g){return g>=63744&&g<=64255},"Arabic Presentation Forms-A":function(g){return g>=64336&&g<=65023},"Vertical Forms":function(g){return g>=65040&&g<=65055},"CJK Compatibility Forms":function(g){return g>=65072&&g<=65103},"Small Form Variants":function(g){return g>=65104&&g<=65135},"Arabic Presentation Forms-B":function(g){return g>=65136&&g<=65279},"Halfwidth and Fullwidth Forms":function(g){return g>=65280&&g<=65519}};function Xe(g){for(var z=0,j=g;z<j.length;z+=1){var st=j[z];if(Jr(st.charCodeAt(0)))return!0}return!1}function br(g){for(var z=0,j=g;z<j.length;z+=1){var st=j[z];if(!wr(st.charCodeAt(0)))return!1}return!0}function wr(g){return!(ze.Arabic(g)||ze["Arabic Supplement"](g)||ze["Arabic Extended-A"](g)||ze["Arabic Presentation Forms-A"](g)||ze["Arabic Presentation Forms-B"](g))}function Hr(g){return g<11904?!1:!!(ze["Bopomofo Extended"](g)||ze.Bopomofo(g)||ze["CJK Compatibility Forms"](g)||ze["CJK Compatibility Ideographs"](g)||ze["CJK Compatibility"](g)||ze["CJK Radicals Supplement"](g)||ze["CJK Strokes"](g)||ze["CJK Symbols and Punctuation"](g)||ze["CJK Unified Ideographs Extension A"](g)||ze["CJK Unified Ideographs"](g)||ze["Enclosed CJK Letters and Months"](g)||ze["Halfwidth and Fullwidth Forms"](g)||ze.Hiragana(g)||ze["Ideographic Description Characters"](g)||ze["Kangxi Radicals"](g)||ze["Katakana Phonetic Extensions"](g)||ze.Katakana(g)||ze["Vertical Forms"](g)||ze["Yi Radicals"](g)||ze["Yi Syllables"](g))}function Jr(g){return g===746||g===747?!0:g<4352?!1:!!(ze["Bopomofo Extended"](g)||ze.Bopomofo(g)||ze["CJK Compatibility Forms"](g)&&!(g>=65097&&g<=65103)||ze["CJK Compatibility Ideographs"](g)||ze["CJK Compatibility"](g)||ze["CJK Radicals Supplement"](g)||ze["CJK Strokes"](g)||ze["CJK Symbols and Punctuation"](g)&&!(g>=12296&&g<=12305)&&!(g>=12308&&g<=12319)&&g!==12336||ze["CJK Unified Ideographs Extension A"](g)||ze["CJK Unified Ideographs"](g)||ze["Enclosed CJK Letters and Months"](g)||ze["Hangul Compatibility Jamo"](g)||ze["Hangul Jamo Extended-A"](g)||ze["Hangul Jamo Extended-B"](g)||ze["Hangul Jamo"](g)||ze["Hangul Syllables"](g)||ze.Hiragana(g)||ze["Ideographic Description Characters"](g)||ze.Kanbun(g)||ze["Kangxi Radicals"](g)||ze["Katakana Phonetic Extensions"](g)||ze.Katakana(g)&&g!==12540||ze["Halfwidth and Fullwidth Forms"](g)&&g!==65288&&g!==65289&&g!==65293&&!(g>=65306&&g<=65310)&&g!==65339&&g!==65341&&g!==65343&&!(g>=65371&&g<=65503)&&g!==65507&&!(g>=65512&&g<=65519)||ze["Small Form Variants"](g)&&!(g>=65112&&g<=65118)&&!(g>=65123&&g<=65126)||ze["Unified Canadian Aboriginal Syllabics"](g)||ze["Unified Canadian Aboriginal Syllabics Extended"](g)||ze["Vertical Forms"](g)||ze["Yijing Hexagram Symbols"](g)||ze["Yi Syllables"](g)||ze["Yi Radicals"](g))}function Ar(g){return!!(ze["Latin-1 Supplement"](g)&&(g===167||g===169||g===174||g===177||g===188||g===189||g===190||g===215||g===247)||ze["General Punctuation"](g)&&(g===8214||g===8224||g===8225||g===8240||g===8241||g===8251||g===8252||g===8258||g===8263||g===8264||g===8265||g===8273)||ze["Letterlike Symbols"](g)||ze["Number Forms"](g)||ze["Miscellaneous Technical"](g)&&(g>=8960&&g<=8967||g>=8972&&g<=8991||g>=8996&&g<=9e3||g===9003||g>=9085&&g<=9114||g>=9150&&g<=9165||g===9167||g>=9169&&g<=9179||g>=9186&&g<=9215)||ze["Control Pictures"](g)&&g!==9251||ze["Optical Character Recognition"](g)||ze["Enclosed Alphanumerics"](g)||ze["Geometric Shapes"](g)||ze["Miscellaneous Symbols"](g)&&!(g>=9754&&g<=9759)||ze["Miscellaneous Symbols and Arrows"](g)&&(g>=11026&&g<=11055||g>=11088&&g<=11097||g>=11192&&g<=11243)||ze["CJK Symbols and Punctuation"](g)||ze.Katakana(g)||ze["Private Use Area"](g)||ze["CJK Compatibility Forms"](g)||ze["Small Form Variants"](g)||ze["Halfwidth and Fullwidth Forms"](g)||g===8734||g===8756||g===8757||g>=9984&&g<=10087||g>=10102&&g<=10131||g===65532||g===65533)}function zr(g){return!(Jr(g)||Ar(g))}function Yr(g){return ze.Arabic(g)||ze["Arabic Supplement"](g)||ze["Arabic Extended-A"](g)||ze["Arabic Presentation Forms-A"](g)||ze["Arabic Presentation Forms-B"](g)}function Qr(g){return g>=1424&&g<=2303||ze["Arabic Presentation Forms-A"](g)||ze["Arabic Presentation Forms-B"](g)}function en(g,z){return!(!z&&Qr(g)||g>=2304&&g<=3583||g>=3840&&g<=4255||ze.Khmer(g))}function Xr(g){for(var z=0,j=g;z<j.length;z+=1){var st=j[z];if(Qr(st.charCodeAt(0)))return!0}return!1}function On(g,z){for(var j=0,st=g;j<st.length;j+=1){var pt=st[j];if(!en(pt.charCodeAt(0),z))return!1}return!0}var Hn={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},ti=null,Yn=Hn.unavailable,Kn=null,ei=function(g){g&&typeof g=="string"&&g.indexOf("NetworkError")>-1&&(Yn=Hn.error),ti&&ti(g)};function Ri(){di.fire(new We("pluginStateChange",{pluginStatus:Yn,pluginURL:Kn}))}var di=new rr,Ei=function(){return Yn},Hi=function(g){return g({pluginStatus:Yn,pluginURL:Kn}),di.on("pluginStateChange",g),g},_a=function(g,z,j){if(j===void 0&&(j=!1),Yn===Hn.deferred||Yn===Hn.loading||Yn===Hn.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Kn=at.resolveURL(g),Yn=Hn.deferred,ti=z,Ri(),j||Xi()},Xi=function(){if(Yn!==Hn.deferred||!Kn)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Yn=Hn.loading,Ri(),Kn&&Re({url:Kn},function(g){g?ei(g):(Yn=Hn.loaded,Ri())})},Gn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Yn===Hn.loaded||Gn.applyArabicShaping!=null},isLoading:function(){return Yn===Hn.loading},setState:function(g){Yn=g.pluginStatus,Kn=g.pluginURL},isParsed:function(){return Gn.applyArabicShaping!=null&&Gn.processBidirectionalText!=null&&Gn.processStyledBidirectionalText!=null},getPluginURL:function(){return Kn}},Pi=function(){!Gn.isLoading()&&!Gn.isLoaded()&&Ei()==="deferred"&&Xi()},pi=function(g,z){this.zoom=g,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ie,this.transition={})};pi.prototype.isSupportedScript=function(g){return On(g,Gn.isLoaded())},pi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},pi.prototype.getCrossfadeParameters=function(){var g=this.zoom,z=g-Math.floor(g),j=this.crossFadingFactor();return g>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*j}:{fromScale:.5,toScale:1,t:1-(1-j)*z}};var Fi=function(g,z){this.property=g,this.value=z,this.expression=Pl(z===void 0?g.specification.default:z,g.specification)};Fi.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Fi.prototype.possiblyEvaluate=function(g,z,j){return this.property.possiblyEvaluate(this,g,z,j)};var oa=function(g){this.property=g,this.value=new Fi(g,void 0)};oa.prototype.transitioned=function(g,z){return new Oa(this.property,this.value,z,x({},g.transition,this.transition),g.now)},oa.prototype.untransitioned=function(){return new Oa(this.property,this.value,null,{},0)};var Vi=function(g){this._properties=g,this._values=Object.create(g.defaultTransitionablePropertyValues)};Vi.prototype.getValue=function(g){return D(this._values[g].value.value)},Vi.prototype.setValue=function(g,z){this._values.hasOwnProperty(g)||(this._values[g]=new oa(this._values[g].property)),this._values[g].value=new Fi(this._values[g].property,z===null?void 0:D(z))},Vi.prototype.getTransition=function(g){return D(this._values[g].transition)},Vi.prototype.setTransition=function(g,z){this._values.hasOwnProperty(g)||(this._values[g]=new oa(this._values[g].property)),this._values[g].transition=D(z)||void 0},Vi.prototype.serialize=function(){for(var g={},z=0,j=Object.keys(this._values);z<j.length;z+=1){var st=j[z],pt=this.getValue(st);pt!==void 0&&(g[st]=pt);var wt=this.getTransition(st);wt!==void 0&&(g[st+"-transition"]=wt)}return g},Vi.prototype.transitioned=function(g,z){for(var j=new Pa(this._properties),st=0,pt=Object.keys(this._values);st<pt.length;st+=1){var wt=pt[st];j._values[wt]=this._values[wt].transitioned(g,z._values[wt])}return j},Vi.prototype.untransitioned=function(){for(var g=new Pa(this._properties),z=0,j=Object.keys(this._values);z<j.length;z+=1){var st=j[z];g._values[st]=this._values[st].untransitioned()}return g};var Oa=function(g,z,j,st,pt){this.property=g,this.value=z,this.begin=pt+st.delay||0,this.end=this.begin+st.duration||0,g.specification.transition&&(st.delay||st.duration)&&(this.prior=j)};Oa.prototype.possiblyEvaluate=function(g,z,j){var st=g.now||0,pt=this.value.possiblyEvaluate(g,z,j),wt=this.prior;if(wt){if(st>this.end)return this.prior=null,pt;if(this.value.isDataDriven())return this.prior=null,pt;if(st<this.begin)return wt.possiblyEvaluate(g,z,j);var Rt=(st-this.begin)/(this.end-this.begin);return this.property.interpolate(wt.possiblyEvaluate(g,z,j),pt,o(Rt))}else return pt};var Pa=function(g){this._properties=g,this._values=Object.create(g.defaultTransitioningPropertyValues)};Pa.prototype.possiblyEvaluate=function(g,z,j){for(var st=new Va(this._properties),pt=0,wt=Object.keys(this._values);pt<wt.length;pt+=1){var Rt=wt[pt];st._values[Rt]=this._values[Rt].possiblyEvaluate(g,z,j)}return st},Pa.prototype.hasTransition=function(){for(var g=0,z=Object.keys(this._values);g<z.length;g+=1){var j=z[g];if(this._values[j].prior)return!0}return!1};var Da=function(g){this._properties=g,this._values=Object.create(g.defaultPropertyValues)};Da.prototype.getValue=function(g){return D(this._values[g].value)},Da.prototype.setValue=function(g,z){this._values[g]=new Fi(this._values[g].property,z===null?void 0:D(z))},Da.prototype.serialize=function(){for(var g={},z=0,j=Object.keys(this._values);z<j.length;z+=1){var st=j[z],pt=this.getValue(st);pt!==void 0&&(g[st]=pt)}return g},Da.prototype.possiblyEvaluate=function(g,z,j){for(var st=new Va(this._properties),pt=0,wt=Object.keys(this._values);pt<wt.length;pt+=1){var Rt=wt[pt];st._values[Rt]=this._values[Rt].possiblyEvaluate(g,z,j)}return st};var sa=function(g,z,j){this.property=g,this.value=z,this.parameters=j};sa.prototype.isConstant=function(){return this.value.kind==="constant"},sa.prototype.constantOr=function(g){return this.value.kind==="constant"?this.value.value:g},sa.prototype.evaluate=function(g,z,j,st){return this.property.evaluate(this.value,this.parameters,g,z,j,st)};var Va=function(g){this._properties=g,this._values=Object.create(g.defaultPossiblyEvaluatedValues)};Va.prototype.get=function(g){return this._values[g]};var Qn=function(g){this.specification=g};Qn.prototype.possiblyEvaluate=function(g,z){return g.expression.evaluate(z)},Qn.prototype.interpolate=function(g,z,j){var st=Tl[this.specification.type];return st?st(g,z,j):g};var vi=function(g,z){this.specification=g,this.overrides=z};vi.prototype.possiblyEvaluate=function(g,z,j,st){return g.expression.kind==="constant"||g.expression.kind==="camera"?new sa(this,{kind:"constant",value:g.expression.evaluate(z,null,{},j,st)},z):new sa(this,g.expression,z)},vi.prototype.interpolate=function(g,z,j){if(g.value.kind!=="constant"||z.value.kind!=="constant")return g;if(g.value.value===void 0||z.value.value===void 0)return new sa(this,{kind:"constant",value:void 0},g.parameters);var st=Tl[this.specification.type];return st?new sa(this,{kind:"constant",value:st(g.value.value,z.value.value,j)},g.parameters):g},vi.prototype.evaluate=function(g,z,j,st,pt,wt){return g.kind==="constant"?g.value:g.evaluate(z,j,st,pt,wt)};var ro=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(j,st,pt,wt){if(j.value===void 0)return new sa(this,{kind:"constant",value:void 0},st);if(j.expression.kind==="constant"){var Rt=j.expression.evaluate(st,null,{},pt,wt),Jt=j.property.specification.type==="resolvedImage",le=Jt&&typeof Rt!="string"?Rt.name:Rt,we=this._calculate(le,le,le,st);return new sa(this,{kind:"constant",value:we},st)}else if(j.expression.kind==="camera"){var Pe=this._calculate(j.expression.evaluate({zoom:st.zoom-1}),j.expression.evaluate({zoom:st.zoom}),j.expression.evaluate({zoom:st.zoom+1}),st);return new sa(this,{kind:"constant",value:Pe},st)}else return new sa(this,j.expression,st)},z.prototype.evaluate=function(j,st,pt,wt,Rt,Jt){if(j.kind==="source"){var le=j.evaluate(st,pt,wt,Rt,Jt);return this._calculate(le,le,le,st)}else return j.kind==="composite"?this._calculate(j.evaluate({zoom:Math.floor(st.zoom)-1},pt,wt),j.evaluate({zoom:Math.floor(st.zoom)},pt,wt),j.evaluate({zoom:Math.floor(st.zoom)+1},pt,wt),st):j.value},z.prototype._calculate=function(j,st,pt,wt){var Rt=wt.zoom;return Rt>wt.zoomHistory.lastIntegerZoom?{from:j,to:st}:{from:pt,to:st}},z.prototype.interpolate=function(j){return j},z}(vi),uo=function(g){this.specification=g};uo.prototype.possiblyEvaluate=function(g,z,j,st){if(g.value!==void 0)if(g.expression.kind==="constant"){var pt=g.expression.evaluate(z,null,{},j,st);return this._calculate(pt,pt,pt,z)}else return this._calculate(g.expression.evaluate(new pi(Math.floor(z.zoom-1),z)),g.expression.evaluate(new pi(Math.floor(z.zoom),z)),g.expression.evaluate(new pi(Math.floor(z.zoom+1),z)),z)},uo.prototype._calculate=function(g,z,j,st){var pt=st.zoom;return pt>st.zoomHistory.lastIntegerZoom?{from:g,to:z}:{from:j,to:z}},uo.prototype.interpolate=function(g){return g};var Ba=function(g){this.specification=g};Ba.prototype.possiblyEvaluate=function(g,z,j,st){return!!g.expression.evaluate(z,null,{},j,st)},Ba.prototype.interpolate=function(){return!1};var Zi=function(g){this.properties=g,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var z in g){var j=g[z];j.specification.overridable&&this.overridableProperties.push(z);var st=this.defaultPropertyValues[z]=new Fi(j,void 0),pt=this.defaultTransitionablePropertyValues[z]=new oa(j);this.defaultTransitioningPropertyValues[z]=pt.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=st.possiblyEvaluate({})}};Lt("DataDrivenProperty",vi),Lt("DataConstantProperty",Qn),Lt("CrossFadedDataDrivenProperty",ro),Lt("CrossFadedProperty",uo),Lt("ColorRampProperty",Ba);var Sa="-transition",wa=function(g){function z(j,st){if(g.call(this),this.id=j.id,this.type=j.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},j.type!=="custom"&&(j=j,this.metadata=j.metadata,this.minzoom=j.minzoom,this.maxzoom=j.maxzoom,j.type!=="background"&&(this.source=j.source,this.sourceLayer=j["source-layer"],this.filter=j.filter),st.layout&&(this._unevaluatedLayout=new Da(st.layout)),st.paint)){this._transitionablePaint=new Vi(st.paint);for(var pt in j.paint)this.setPaintProperty(pt,j.paint[pt],{validate:!1});for(var wt in j.layout)this.setLayoutProperty(wt,j.layout[wt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Va(st.paint)}}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(j){return j==="visibility"?this.visibility:this._unevaluatedLayout.getValue(j)},z.prototype.setLayoutProperty=function(j,st,pt){if(pt===void 0&&(pt={}),st!=null){var wt="layers."+this.id+".layout."+j;if(this._validate(Ai,wt,j,st,pt))return}if(j==="visibility"){this.visibility=st;return}this._unevaluatedLayout.setValue(j,st)},z.prototype.getPaintProperty=function(j){return w(j,Sa)?this._transitionablePaint.getTransition(j.slice(0,-Sa.length)):this._transitionablePaint.getValue(j)},z.prototype.setPaintProperty=function(j,st,pt){if(pt===void 0&&(pt={}),st!=null){var wt="layers."+this.id+".paint."+j;if(this._validate(wi,wt,j,st,pt))return!1}if(w(j,Sa))return this._transitionablePaint.setTransition(j.slice(0,-Sa.length),st||void 0),!1;var Rt=this._transitionablePaint._values[j],Jt=Rt.property.specification["property-type"]==="cross-faded-data-driven",le=Rt.value.isDataDriven(),we=Rt.value;this._transitionablePaint.setValue(j,st),this._handleSpecialPaintPropertyUpdate(j);var Pe=this._transitionablePaint._values[j].value,Ue=Pe.isDataDriven();return Ue||le||Jt||this._handleOverridablePaintPropertyUpdate(j,we,Pe)},z.prototype._handleSpecialPaintPropertyUpdate=function(j){},z.prototype._handleOverridablePaintPropertyUpdate=function(j,st,pt){return!1},z.prototype.isHidden=function(j){return this.minzoom&&j<this.minzoom||this.maxzoom&&j>=this.maxzoom?!0:this.visibility==="none"},z.prototype.updateTransitions=function(j){this._transitioningPaint=this._transitionablePaint.transitioned(j,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(j,st){j.getCrossfadeParameters&&(this._crossfadeParameters=j.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(j,void 0,st)),this.paint=this._transitioningPaint.possiblyEvaluate(j,void 0,st)},z.prototype.serialize=function(){var j={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(j.layout=j.layout||{},j.layout.visibility=this.visibility),O(j,function(st,pt){return st!==void 0&&!(pt==="layout"&&!Object.keys(st).length)&&!(pt==="paint"&&!Object.keys(st).length)})},z.prototype._validate=function(j,st,pt,wt,Rt){return Rt===void 0&&(Rt={}),Rt&&Rt.validate===!1?!1:Si(this,j.call(kn,{key:st,layerType:this.type,objectKey:pt,value:wt,styleSpec:gr,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var j in this.paint._values){var st=this.paint.get(j);if(!(!(st instanceof sa)||!Ho(st.property.specification))&&(st.value.kind==="source"||st.value.kind==="composite")&&st.value.isStateDependent)return!0}return!1},z}(rr),zo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Wo=function(g,z){this._structArray=g,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ha=128,Gs=5,Di=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Di.serialize=function(g,z){return g._trim(),z&&(g.isTransferred=!0,z.push(g.arrayBuffer)),{length:g.length,arrayBuffer:g.arrayBuffer}},Di.deserialize=function(g){var z=Object.create(this.prototype);return z.arrayBuffer=g.arrayBuffer,z.length=g.length,z.capacity=g.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Di.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Di.prototype.clear=function(){this.length=0},Di.prototype.resize=function(g){this.reserve(g),this.length=g},Di.prototype.reserve=function(g){if(g>this.capacity){this.capacity=Math.max(g,Math.floor(this.capacity*Gs),ha),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Di.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function pa(g,z){z===void 0&&(z=1);var j=0,st=0,pt=g.map(function(Rt){var Jt=pc(Rt.type),le=j=bf(j,Math.max(z,Jt)),we=Rt.components||1;return st=Math.max(st,Jt),j+=Jt*we,{name:Rt.name,type:Rt.type,components:we,offset:le}}),wt=bf(j,Math.max(st,z));return{members:pt,size:wt,alignment:z}}function pc(g){return zo[g].BYTES_PER_ELEMENT}function bf(g,z){return Math.ceil(g/z)*z}var su=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st){var pt=this.length;return this.resize(pt+1),this.emplace(pt,j,st)},z.prototype.emplace=function(j,st,pt){var wt=j*2;return this.int16[wt+0]=st,this.int16[wt+1]=pt,j},z}(Di);su.prototype.bytesPerElement=4,Lt("StructArrayLayout2i4",su);var Kc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,j,st,pt,wt)},z.prototype.emplace=function(j,st,pt,wt,Rt){var Jt=j*4;return this.int16[Jt+0]=st,this.int16[Jt+1]=pt,this.int16[Jt+2]=wt,this.int16[Jt+3]=Rt,j},z}(Di);Kc.prototype.bytesPerElement=8,Lt("StructArrayLayout4i8",Kc);var Fl=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt){var le=this.length;return this.resize(le+1),this.emplace(le,j,st,pt,wt,Rt,Jt)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le){var we=j*6;return this.int16[we+0]=st,this.int16[we+1]=pt,this.int16[we+2]=wt,this.int16[we+3]=Rt,this.int16[we+4]=Jt,this.int16[we+5]=le,j},z}(Di);Fl.prototype.bytesPerElement=12,Lt("StructArrayLayout2i4i12",Fl);var Fu=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt){var le=this.length;return this.resize(le+1),this.emplace(le,j,st,pt,wt,Rt,Jt)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le){var we=j*4,Pe=j*8;return this.int16[we+0]=st,this.int16[we+1]=pt,this.uint8[Pe+4]=wt,this.uint8[Pe+5]=Rt,this.uint8[Pe+6]=Jt,this.uint8[Pe+7]=le,j},z}(Di);Fu.prototype.bytesPerElement=8,Lt("StructArrayLayout2i4ub8",Fu);var Du=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st){var pt=this.length;return this.resize(pt+1),this.emplace(pt,j,st)},z.prototype.emplace=function(j,st,pt){var wt=j*2;return this.float32[wt+0]=st,this.float32[wt+1]=pt,j},z}(Di);Du.prototype.bytesPerElement=8,Lt("StructArrayLayout2f8",Du);var ko=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue){var Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve){var er=j*10;return this.uint16[er+0]=st,this.uint16[er+1]=pt,this.uint16[er+2]=wt,this.uint16[er+3]=Rt,this.uint16[er+4]=Jt,this.uint16[er+5]=le,this.uint16[er+6]=we,this.uint16[er+7]=Pe,this.uint16[er+8]=Ue,this.uint16[er+9]=Ve,j},z}(Di);ko.prototype.bytesPerElement=20,Lt("StructArrayLayout10ui20",ko);var Dl=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er){var _r=this.length;return this.resize(_r+1),this.emplace(_r,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r){var Ir=j*12;return this.int16[Ir+0]=st,this.int16[Ir+1]=pt,this.int16[Ir+2]=wt,this.int16[Ir+3]=Rt,this.uint16[Ir+4]=Jt,this.uint16[Ir+5]=le,this.uint16[Ir+6]=we,this.uint16[Ir+7]=Pe,this.int16[Ir+8]=Ue,this.int16[Ir+9]=Ve,this.int16[Ir+10]=er,this.int16[Ir+11]=_r,j},z}(Di);Dl.prototype.bytesPerElement=24,Lt("StructArrayLayout4i4ui4i24",Dl);var Jc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,j,st,pt)},z.prototype.emplace=function(j,st,pt,wt){var Rt=j*3;return this.float32[Rt+0]=st,this.float32[Rt+1]=pt,this.float32[Rt+2]=wt,j},z}(Di);Jc.prototype.bytesPerElement=12,Lt("StructArrayLayout3f12",Jc);var $c=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j){var st=this.length;return this.resize(st+1),this.emplace(st,j)},z.prototype.emplace=function(j,st){var pt=j*1;return this.uint32[pt+0]=st,j},z}(Di);$c.prototype.bytesPerElement=4,Lt("StructArrayLayout1ul4",$c);var dc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt,le,we,Pe){var Ue=this.length;return this.resize(Ue+1),this.emplace(Ue,j,st,pt,wt,Rt,Jt,le,we,Pe)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue){var Ve=j*10,er=j*5;return this.int16[Ve+0]=st,this.int16[Ve+1]=pt,this.int16[Ve+2]=wt,this.int16[Ve+3]=Rt,this.int16[Ve+4]=Jt,this.int16[Ve+5]=le,this.uint32[er+3]=we,this.uint16[Ve+8]=Pe,this.uint16[Ve+9]=Ue,j},z}(Di);dc.prototype.bytesPerElement=20,Lt("StructArrayLayout6i1ul2ui20",dc);var Mc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt){var le=this.length;return this.resize(le+1),this.emplace(le,j,st,pt,wt,Rt,Jt)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le){var we=j*6;return this.int16[we+0]=st,this.int16[we+1]=pt,this.int16[we+2]=wt,this.int16[we+3]=Rt,this.int16[we+4]=Jt,this.int16[we+5]=le,j},z}(Di);Mc.prototype.bytesPerElement=12,Lt("StructArrayLayout2i2i2i12",Mc);var hl=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt){var Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,j,st,pt,wt,Rt)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt){var le=j*4,we=j*8;return this.float32[le+0]=st,this.float32[le+1]=pt,this.float32[le+2]=wt,this.int16[we+6]=Rt,this.int16[we+7]=Jt,j},z}(Di);hl.prototype.bytesPerElement=16,Lt("StructArrayLayout2f1f2i16",hl);var Fo=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,j,st,pt,wt)},z.prototype.emplace=function(j,st,pt,wt,Rt){var Jt=j*12,le=j*3;return this.uint8[Jt+0]=st,this.uint8[Jt+1]=pt,this.float32[le+1]=wt,this.float32[le+2]=Rt,j},z}(Di);Fo.prototype.bytesPerElement=12,Lt("StructArrayLayout2ub2f12",Fo);var pl=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,j,st,pt)},z.prototype.emplace=function(j,st,pt,wt){var Rt=j*3;return this.uint16[Rt+0]=st,this.uint16[Rt+1]=pt,this.uint16[Rt+2]=wt,j},z}(Di);pl.prototype.bytesPerElement=6,Lt("StructArrayLayout3ui6",pl);var vc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn){var bn=this.length;return this.resize(bn+1),this.emplace(bn,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn,bn){var hn=j*24,Ln=j*12,Un=j*48;return this.int16[hn+0]=st,this.int16[hn+1]=pt,this.uint16[hn+2]=wt,this.uint16[hn+3]=Rt,this.uint32[Ln+2]=Jt,this.uint32[Ln+3]=le,this.uint32[Ln+4]=we,this.uint16[hn+10]=Pe,this.uint16[hn+11]=Ue,this.uint16[hn+12]=Ve,this.float32[Ln+7]=er,this.float32[Ln+8]=_r,this.uint8[Un+36]=Ir,this.uint8[Un+37]=un,this.uint8[Un+38]=tn,this.uint32[Ln+10]=gn,this.int16[hn+22]=bn,j},z}(Di);vc.prototype.bytesPerElement=48,Lt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",vc);var Sc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn,bn,hn,Ln,Un,Wn,Xn,fi,hi,gi,bi,Ci){var mi=this.length;return this.resize(mi+1),this.emplace(mi,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn,bn,hn,Ln,Un,Wn,Xn,fi,hi,gi,bi,Ci)},z.prototype.emplace=function(j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn,bn,hn,Ln,Un,Wn,Xn,fi,hi,gi,bi,Ci,mi){var xi=j*34,ji=j*17;return this.int16[xi+0]=st,this.int16[xi+1]=pt,this.int16[xi+2]=wt,this.int16[xi+3]=Rt,this.int16[xi+4]=Jt,this.int16[xi+5]=le,this.int16[xi+6]=we,this.int16[xi+7]=Pe,this.uint16[xi+8]=Ue,this.uint16[xi+9]=Ve,this.uint16[xi+10]=er,this.uint16[xi+11]=_r,this.uint16[xi+12]=Ir,this.uint16[xi+13]=un,this.uint16[xi+14]=tn,this.uint16[xi+15]=gn,this.uint16[xi+16]=bn,this.uint16[xi+17]=hn,this.uint16[xi+18]=Ln,this.uint16[xi+19]=Un,this.uint16[xi+20]=Wn,this.uint16[xi+21]=Xn,this.uint16[xi+22]=fi,this.uint32[ji+12]=hi,this.float32[ji+13]=gi,this.float32[ji+14]=bi,this.float32[ji+15]=Ci,this.float32[ji+16]=mi,j},z}(Di);Sc.prototype.bytesPerElement=68,Lt("StructArrayLayout8i15ui1ul4f68",Sc);var Bu=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j){var st=this.length;return this.resize(st+1),this.emplace(st,j)},z.prototype.emplace=function(j,st){var pt=j*1;return this.float32[pt+0]=st,j},z}(Di);Bu.prototype.bytesPerElement=4,Lt("StructArrayLayout1f4",Bu);var Qc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,j,st,pt)},z.prototype.emplace=function(j,st,pt,wt){var Rt=j*3;return this.int16[Rt+0]=st,this.int16[Rt+1]=pt,this.int16[Rt+2]=wt,j},z}(Di);Qc.prototype.bytesPerElement=6,Lt("StructArrayLayout3i6",Qc);var Bl=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt){var wt=this.length;return this.resize(wt+1),this.emplace(wt,j,st,pt)},z.prototype.emplace=function(j,st,pt,wt){var Rt=j*2,Jt=j*4;return this.uint32[Rt+0]=st,this.uint16[Jt+2]=pt,this.uint16[Jt+3]=wt,j},z}(Di);Bl.prototype.bytesPerElement=8,Lt("StructArrayLayout1ul2ui8",Bl);var gc=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st){var pt=this.length;return this.resize(pt+1),this.emplace(pt,j,st)},z.prototype.emplace=function(j,st,pt){var wt=j*2;return this.uint16[wt+0]=st,this.uint16[wt+1]=pt,j},z}(Di);gc.prototype.bytesPerElement=4,Lt("StructArrayLayout2ui4",gc);var Nu=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j){var st=this.length;return this.resize(st+1),this.emplace(st,j)},z.prototype.emplace=function(j,st){var pt=j*1;return this.uint16[pt+0]=st,j},z}(Di);Nu.prototype.bytesPerElement=2,Lt("StructArrayLayout1ui2",Nu);var lu=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(j,st,pt,wt){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,j,st,pt,wt)},z.prototype.emplace=function(j,st,pt,wt,Rt){var Jt=j*4;return this.float32[Jt+0]=st,this.float32[Jt+1]=pt,this.float32[Jt+2]=wt,this.float32[Jt+3]=Rt,j},z}(Di);lu.prototype.bytesPerElement=16,Lt("StructArrayLayout4f16",lu);var _f=function(g){function z(){g.apply(this,arguments)}g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z;var j={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return j.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},j.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},j.x1.get=function(){return this._structArray.int16[this._pos2+2]},j.y1.get=function(){return this._structArray.int16[this._pos2+3]},j.x2.get=function(){return this._structArray.int16[this._pos2+4]},j.y2.get=function(){return this._structArray.int16[this._pos2+5]},j.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},j.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},j.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},j.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,j),z}(Wo);_f.prototype.size=20;var tf=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.get=function(j){return new _f(this,j)},z}(dc);Lt("CollisionBoxArray",tf);var uu=function(g){function z(){g.apply(this,arguments)}g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z;var j={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return j.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},j.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},j.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},j.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},j.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},j.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},j.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},j.segment.get=function(){return this._structArray.uint16[this._pos2+10]},j.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},j.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},j.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},j.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},j.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},j.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},j.placedOrientation.set=function(st){this._structArray.uint8[this._pos1+37]=st},j.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},j.hidden.set=function(st){this._structArray.uint8[this._pos1+38]=st},j.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},j.crossTileID.set=function(st){this._structArray.uint32[this._pos4+10]=st},j.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,j),z}(Wo);uu.prototype.size=48;var ef=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.get=function(j){return new uu(this,j)},z}(vc);Lt("PlacedSymbolArray",ef);var ju=function(g){function z(){g.apply(this,arguments)}g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z;var j={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return j.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},j.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},j.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},j.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},j.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},j.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},j.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},j.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},j.key.get=function(){return this._structArray.uint16[this._pos2+8]},j.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},j.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},j.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},j.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},j.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},j.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},j.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},j.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},j.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},j.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},j.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},j.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},j.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},j.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},j.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},j.crossTileID.set=function(st){this._structArray.uint32[this._pos4+12]=st},j.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},j.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},j.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},j.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,j),z}(Wo);ju.prototype.size=68;var wf=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.get=function(j){return new ju(this,j)},z}(Sc);Lt("SymbolInstanceArray",wf);var Af=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.getoffsetX=function(j){return this.float32[j*1+0]},z}(Bu);Lt("GlyphOffsetArray",Af);var _s=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.getx=function(j){return this.int16[j*3+0]},z.prototype.gety=function(j){return this.int16[j*3+1]},z.prototype.gettileUnitDistanceFromAnchor=function(j){return this.int16[j*3+2]},z}(Qc);Lt("SymbolLineVertexArray",_s);var Tf=function(g){function z(){g.apply(this,arguments)}g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z;var j={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return j.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},j.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},j.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,j),z}(Wo);Tf.prototype.size=8;var kf=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.get=function(j){return new Tf(this,j)},z}(Bl);Lt("FeatureIndexArray",kf);var Xf=pa([{name:"a_pos",components:2,type:"Int16"}],4),Mf=Xf.members,Na=function(g){g===void 0&&(g=[]),this.segments=g};Na.prototype.prepareSegment=function(g,z,j,st){var pt=this.segments[this.segments.length-1];return g>Na.MAX_VERTEX_ARRAY_LENGTH&&R("Max vertices per segment is "+Na.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+g),(!pt||pt.vertexLength+g>Na.MAX_VERTEX_ARRAY_LENGTH||pt.sortKey!==st)&&(pt={vertexOffset:z.length,primitiveOffset:j.length,vertexLength:0,primitiveLength:0},st!==void 0&&(pt.sortKey=st),this.segments.push(pt)),pt},Na.prototype.get=function(){return this.segments},Na.prototype.destroy=function(){for(var g=0,z=this.segments;g<z.length;g+=1){var j=z[g];for(var st in j.vaos)j.vaos[st].destroy()}},Na.simpleSegment=function(g,z,j,st){return new Na([{vertexOffset:g,primitiveOffset:z,vertexLength:j,primitiveLength:st,vaos:{},sortKey:0}])},Na.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Lt("SegmentVector",Na);function W(g,z){return g=h(Math.floor(g),0,255),z=h(Math.floor(z),0,255),256*g+z}var tt=pa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),K=C(function(g){function z(j,st){var pt,wt,Rt,Jt,le,we,Pe,Ue;for(pt=j.length&3,wt=j.length-pt,Rt=st,le=3432918353,we=461845907,Ue=0;Ue<wt;)Pe=j.charCodeAt(Ue)&255|(j.charCodeAt(++Ue)&255)<<8|(j.charCodeAt(++Ue)&255)<<16|(j.charCodeAt(++Ue)&255)<<24,++Ue,Pe=(Pe&65535)*le+(((Pe>>>16)*le&65535)<<16)&4294967295,Pe=Pe<<15|Pe>>>17,Pe=(Pe&65535)*we+(((Pe>>>16)*we&65535)<<16)&4294967295,Rt^=Pe,Rt=Rt<<13|Rt>>>19,Jt=(Rt&65535)*5+(((Rt>>>16)*5&65535)<<16)&4294967295,Rt=(Jt&65535)+27492+(((Jt>>>16)+58964&65535)<<16);switch(Pe=0,pt){case 3:Pe^=(j.charCodeAt(Ue+2)&255)<<16;case 2:Pe^=(j.charCodeAt(Ue+1)&255)<<8;case 1:Pe^=j.charCodeAt(Ue)&255,Pe=(Pe&65535)*le+(((Pe>>>16)*le&65535)<<16)&4294967295,Pe=Pe<<15|Pe>>>17,Pe=(Pe&65535)*we+(((Pe>>>16)*we&65535)<<16)&4294967295,Rt^=Pe}return Rt^=j.length,Rt^=Rt>>>16,Rt=(Rt&65535)*2246822507+(((Rt>>>16)*2246822507&65535)<<16)&4294967295,Rt^=Rt>>>13,Rt=(Rt&65535)*3266489909+(((Rt>>>16)*3266489909&65535)<<16)&4294967295,Rt^=Rt>>>16,Rt>>>0}g.exports=z}),ut=C(function(g){function z(j,st){for(var pt=j.length,wt=st^pt,Rt=0,Jt;pt>=4;)Jt=j.charCodeAt(Rt)&255|(j.charCodeAt(++Rt)&255)<<8|(j.charCodeAt(++Rt)&255)<<16|(j.charCodeAt(++Rt)&255)<<24,Jt=(Jt&65535)*1540483477+(((Jt>>>16)*1540483477&65535)<<16),Jt^=Jt>>>24,Jt=(Jt&65535)*1540483477+(((Jt>>>16)*1540483477&65535)<<16),wt=(wt&65535)*1540483477+(((wt>>>16)*1540483477&65535)<<16)^Jt,pt-=4,++Rt;switch(pt){case 3:wt^=(j.charCodeAt(Rt+2)&255)<<16;case 2:wt^=(j.charCodeAt(Rt+1)&255)<<8;case 1:wt^=j.charCodeAt(Rt)&255,wt=(wt&65535)*1540483477+(((wt>>>16)*1540483477&65535)<<16)}return wt^=wt>>>13,wt=(wt&65535)*1540483477+(((wt>>>16)*1540483477&65535)<<16),wt^=wt>>>15,wt>>>0}g.exports=z}),kt=K,jt=K,Qt=ut;kt.murmur3=jt,kt.murmur2=Qt;var de=function(){this.ids=[],this.positions=[],this.indexed=!1};de.prototype.add=function(g,z,j,st){this.ids.push(Ye(g)),this.positions.push(z,j,st)},de.prototype.getPositions=function(g){for(var z=Ye(g),j=0,st=this.ids.length-1;j<st;){var pt=j+st>>1;this.ids[pt]>=z?st=pt:j=pt+1}for(var wt=[];this.ids[j]===z;){var Rt=this.positions[3*j],Jt=this.positions[3*j+1],le=this.positions[3*j+2];wt.push({index:Rt,start:Jt,end:le}),j++}return wt},de.serialize=function(g,z){var j=new Float64Array(g.ids),st=new Uint32Array(g.positions);return ar(j,st,0,j.length-1),z&&z.push(j.buffer,st.buffer),{ids:j,positions:st}},de.deserialize=function(g){var z=new de;return z.ids=g.ids,z.positions=g.positions,z.indexed=!0,z};var Ee=Math.pow(2,53)-1;function Ye(g){var z=+g;return!isNaN(z)&&z<=Ee?z:kt(String(g))}function ar(g,z,j,st){for(;j<st;){for(var pt=g[j+st>>1],wt=j-1,Rt=st+1;;){do wt++;while(g[wt]<pt);do Rt--;while(g[Rt]>pt);if(wt>=Rt)break;tr(g,wt,Rt),tr(z,3*wt,3*Rt),tr(z,3*wt+1,3*Rt+1),tr(z,3*wt+2,3*Rt+2)}Rt-j<st-Rt?(ar(g,z,j,Rt),j=Rt+1):(ar(g,z,Rt+1,st),st=Rt)}}function tr(g,z,j){var st=g[z];g[z]=g[j],g[j]=st}Lt("FeaturePositionMap",de);var vr=function(g,z){this.gl=g.gl,this.location=z},Lr=function(g){function z(j,st){g.call(this,j,st),this.current=0}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){this.current!==j&&(this.current=j,this.gl.uniform1i(this.location,j))},z}(vr),Wr=function(g){function z(j,st){g.call(this,j,st),this.current=0}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){this.current!==j&&(this.current=j,this.gl.uniform1f(this.location,j))},z}(vr),Fr=function(g){function z(j,st){g.call(this,j,st),this.current=[0,0]}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){(j[0]!==this.current[0]||j[1]!==this.current[1])&&(this.current=j,this.gl.uniform2f(this.location,j[0],j[1]))},z}(vr),Br=function(g){function z(j,st){g.call(this,j,st),this.current=[0,0,0]}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){(j[0]!==this.current[0]||j[1]!==this.current[1]||j[2]!==this.current[2])&&(this.current=j,this.gl.uniform3f(this.location,j[0],j[1],j[2]))},z}(vr),Kr=function(g){function z(j,st){g.call(this,j,st),this.current=[0,0,0,0]}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){(j[0]!==this.current[0]||j[1]!==this.current[1]||j[2]!==this.current[2]||j[3]!==this.current[3])&&(this.current=j,this.gl.uniform4f(this.location,j[0],j[1],j[2],j[3]))},z}(vr),cn=function(g){function z(j,st){g.call(this,j,st),this.current=qi.transparent}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){(j.r!==this.current.r||j.g!==this.current.g||j.b!==this.current.b||j.a!==this.current.a)&&(this.current=j,this.gl.uniform4f(this.location,j.r,j.g,j.b,j.a))},z}(vr),Fn=new Float32Array(16),Pn=function(g){function z(j,st){g.call(this,j,st),this.current=Fn}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.set=function(j){if(j[12]!==this.current[12]||j[0]!==this.current[0]){this.current=j,this.gl.uniformMatrix4fv(this.location,!1,j);return}for(var st=1;st<16;st++)if(j[st]!==this.current[st]){this.current=j,this.gl.uniformMatrix4fv(this.location,!1,j);break}},z}(vr);function Dn(g){return[W(255*g.r,255*g.g),W(255*g.b,255*g.a)]}var Nn=function(g,z,j){this.value=g,this.uniformNames=z.map(function(st){return"u_"+st}),this.type=j};Nn.prototype.setUniform=function(g,z,j){g.set(j.constantOr(this.value))},Nn.prototype.getBinding=function(g,z,j){return this.type==="color"?new cn(g,z):new Wr(g,z)};var Bn=function(g,z){this.uniformNames=z.map(function(j){return"u_"+j}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Bn.prototype.setConstantPatternPositions=function(g,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=g.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=g.tlbr},Bn.prototype.setUniform=function(g,z,j,st){var pt=st==="u_pattern_to"?this.patternTo:st==="u_pattern_from"?this.patternFrom:st==="u_pixel_ratio_to"?this.pixelRatioTo:st==="u_pixel_ratio_from"?this.pixelRatioFrom:null;pt&&g.set(pt)},Bn.prototype.getBinding=function(g,z,j){return j.substr(0,9)==="u_pattern"?new Kr(g,z):new Wr(g,z)};var Vn=function(g,z,j,st){this.expression=g,this.type=j,this.maxValue=0,this.paintVertexAttributes=z.map(function(pt){return{name:"a_"+pt,type:"Float32",components:j==="color"?2:1,offset:0}}),this.paintVertexArray=new st};Vn.prototype.populatePaintArray=function(g,z,j,st,pt){var wt=this.paintVertexArray.length,Rt=this.expression.evaluate(new pi(0),z,{},st,[],pt);this.paintVertexArray.resize(g),this._setPaintValue(wt,g,Rt)},Vn.prototype.updatePaintArray=function(g,z,j,st){var pt=this.expression.evaluate({zoom:0},j,st);this._setPaintValue(g,z,pt)},Vn.prototype._setPaintValue=function(g,z,j){if(this.type==="color")for(var st=Dn(j),pt=g;pt<z;pt++)this.paintVertexArray.emplace(pt,st[0],st[1]);else{for(var wt=g;wt<z;wt++)this.paintVertexArray.emplace(wt,j);this.maxValue=Math.max(this.maxValue,Math.abs(j))}},Vn.prototype.upload=function(g){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=g.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Vn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Zn=function(g,z,j,st,pt,wt){this.expression=g,this.uniformNames=z.map(function(Rt){return"u_"+Rt+"_t"}),this.type=j,this.useIntegerZoom=st,this.zoom=pt,this.maxValue=0,this.paintVertexAttributes=z.map(function(Rt){return{name:"a_"+Rt,type:"Float32",components:j==="color"?4:2,offset:0}}),this.paintVertexArray=new wt};Zn.prototype.populatePaintArray=function(g,z,j,st,pt){var wt=this.expression.evaluate(new pi(this.zoom),z,{},st,[],pt),Rt=this.expression.evaluate(new pi(this.zoom+1),z,{},st,[],pt),Jt=this.paintVertexArray.length;this.paintVertexArray.resize(g),this._setPaintValue(Jt,g,wt,Rt)},Zn.prototype.updatePaintArray=function(g,z,j,st){var pt=this.expression.evaluate({zoom:this.zoom},j,st),wt=this.expression.evaluate({zoom:this.zoom+1},j,st);this._setPaintValue(g,z,pt,wt)},Zn.prototype._setPaintValue=function(g,z,j,st){if(this.type==="color")for(var pt=Dn(j),wt=Dn(st),Rt=g;Rt<z;Rt++)this.paintVertexArray.emplace(Rt,pt[0],pt[1],wt[0],wt[1]);else{for(var Jt=g;Jt<z;Jt++)this.paintVertexArray.emplace(Jt,j,st);this.maxValue=Math.max(this.maxValue,Math.abs(j),Math.abs(st))}},Zn.prototype.upload=function(g){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=g.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Zn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Zn.prototype.setUniform=function(g,z){var j=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,st=h(this.expression.interpolationFactor(j,this.zoom,this.zoom+1),0,1);g.set(st)},Zn.prototype.getBinding=function(g,z,j){return new Wr(g,z)};var ci=function(g,z,j,st,pt,wt){this.expression=g,this.type=z,this.useIntegerZoom=j,this.zoom=st,this.layerId=wt,this.zoomInPaintVertexArray=new pt,this.zoomOutPaintVertexArray=new pt};ci.prototype.populatePaintArray=function(g,z,j){var st=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(g),this.zoomOutPaintVertexArray.resize(g),this._setPaintValues(st,g,z.patterns&&z.patterns[this.layerId],j)},ci.prototype.updatePaintArray=function(g,z,j,st,pt){this._setPaintValues(g,z,j.patterns&&j.patterns[this.layerId],pt)},ci.prototype._setPaintValues=function(g,z,j,st){if(!(!st||!j)){var pt=j.min,wt=j.mid,Rt=j.max,Jt=st[pt],le=st[wt],we=st[Rt];if(!(!Jt||!le||!we))for(var Pe=g;Pe<z;Pe++)this.zoomInPaintVertexArray.emplace(Pe,le.tl[0],le.tl[1],le.br[0],le.br[1],Jt.tl[0],Jt.tl[1],Jt.br[0],Jt.br[1],le.pixelRatio,Jt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Pe,le.tl[0],le.tl[1],le.br[0],le.br[1],we.tl[0],we.tl[1],we.br[0],we.br[1],le.pixelRatio,we.pixelRatio)}},ci.prototype.upload=function(g){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=g.createVertexBuffer(this.zoomInPaintVertexArray,tt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=g.createVertexBuffer(this.zoomOutPaintVertexArray,tt.members,this.expression.isStateDependent))},ci.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var si=function(g,z,j){this.binders={},this._buffers=[];var st=[];for(var pt in g.paint._values)if(j(pt)){var wt=g.paint.get(pt);if(!(!(wt instanceof sa)||!Ho(wt.property.specification))){var Rt=Ii(pt,g.type),Jt=wt.value,le=wt.property.specification.type,we=wt.property.useIntegerZoom,Pe=wt.property.specification["property-type"],Ue=Pe==="cross-faded"||Pe==="cross-faded-data-driven";if(Jt.kind==="constant")this.binders[pt]=Ue?new Bn(Jt.value,Rt):new Nn(Jt.value,Rt,le),st.push("/u_"+pt);else if(Jt.kind==="source"||Ue){var Ve=yi(pt,le,"source");this.binders[pt]=Ue?new ci(Jt,le,we,z,Ve,g.id):new Vn(Jt,Rt,le,Ve),st.push("/a_"+pt)}else{var er=yi(pt,le,"composite");this.binders[pt]=new Zn(Jt,Rt,le,we,z,er),st.push("/z_"+pt)}}}this.cacheKey=st.sort().join("")};si.prototype.getMaxValue=function(g){var z=this.binders[g];return z instanceof Vn||z instanceof Zn?z.maxValue:0},si.prototype.populatePaintArrays=function(g,z,j,st,pt){for(var wt in this.binders){var Rt=this.binders[wt];(Rt instanceof Vn||Rt instanceof Zn||Rt instanceof ci)&&Rt.populatePaintArray(g,z,j,st,pt)}},si.prototype.setConstantPatternPositions=function(g,z){for(var j in this.binders){var st=this.binders[j];st instanceof Bn&&st.setConstantPatternPositions(g,z)}},si.prototype.updatePaintArrays=function(g,z,j,st,pt){var wt=!1;for(var Rt in g)for(var Jt=z.getPositions(Rt),le=0,we=Jt;le<we.length;le+=1){var Pe=we[le],Ue=j.feature(Pe.index);for(var Ve in this.binders){var er=this.binders[Ve];if((er instanceof Vn||er instanceof Zn||er instanceof ci)&&er.expression.isStateDependent===!0){var _r=st.paint.get(Ve);er.expression=_r.value,er.updatePaintArray(Pe.start,Pe.end,Ue,g[Rt],pt),wt=!0}}}return wt},si.prototype.defines=function(){var g=[];for(var z in this.binders){var j=this.binders[z];(j instanceof Nn||j instanceof Bn)&&g.push.apply(g,j.uniformNames.map(function(st){return"#define HAS_UNIFORM_"+st}))}return g},si.prototype.getBinderAttributes=function(){var g=[];for(var z in this.binders){var j=this.binders[z];if(j instanceof Vn||j instanceof Zn)for(var st=0;st<j.paintVertexAttributes.length;st++)g.push(j.paintVertexAttributes[st].name);else if(j instanceof ci)for(var pt=0;pt<tt.members.length;pt++)g.push(tt.members[pt].name)}return g},si.prototype.getBinderUniforms=function(){var g=[];for(var z in this.binders){var j=this.binders[z];if(j instanceof Nn||j instanceof Bn||j instanceof Zn)for(var st=0,pt=j.uniformNames;st<pt.length;st+=1){var wt=pt[st];g.push(wt)}}return g},si.prototype.getPaintVertexBuffers=function(){return this._buffers},si.prototype.getUniforms=function(g,z){var j=[];for(var st in this.binders){var pt=this.binders[st];if(pt instanceof Nn||pt instanceof Bn||pt instanceof Zn)for(var wt=0,Rt=pt.uniformNames;wt<Rt.length;wt+=1){var Jt=Rt[wt];if(z[Jt]){var le=pt.getBinding(g,z[Jt],Jt);j.push({name:Jt,property:st,binding:le})}}}return j},si.prototype.setUniforms=function(g,z,j,st){for(var pt=0,wt=z;pt<wt.length;pt+=1){var Rt=wt[pt],Jt=Rt.name,le=Rt.property,we=Rt.binding;this.binders[le].setUniform(we,st,j.get(le),Jt)}},si.prototype.updatePaintBuffers=function(g){this._buffers=[];for(var z in this.binders){var j=this.binders[z];if(g&&j instanceof ci){var st=g.fromScale===2?j.zoomInPaintVertexBuffer:j.zoomOutPaintVertexBuffer;st&&this._buffers.push(st)}else(j instanceof Vn||j instanceof Zn)&&j.paintVertexBuffer&&this._buffers.push(j.paintVertexBuffer)}},si.prototype.upload=function(g){for(var z in this.binders){var j=this.binders[z];(j instanceof Vn||j instanceof Zn||j instanceof ci)&&j.upload(g)}this.updatePaintBuffers()},si.prototype.destroy=function(){for(var g in this.binders){var z=this.binders[g];(z instanceof Vn||z instanceof Zn||z instanceof ci)&&z.destroy()}};var li=function(g,z,j){j===void 0&&(j=function(){return!0}),this.programConfigurations={};for(var st=0,pt=g;st<pt.length;st+=1){var wt=pt[st];this.programConfigurations[wt.id]=new si(wt,z,j)}this.needsUpload=!1,this._featureMap=new de,this._bufferOffset=0};li.prototype.populatePaintArrays=function(g,z,j,st,pt,wt){for(var Rt in this.programConfigurations)this.programConfigurations[Rt].populatePaintArrays(g,z,st,pt,wt);z.id!==void 0&&this._featureMap.add(z.id,j,this._bufferOffset,g),this._bufferOffset=g,this.needsUpload=!0},li.prototype.updatePaintArrays=function(g,z,j,st){for(var pt=0,wt=j;pt<wt.length;pt+=1){var Rt=wt[pt];this.needsUpload=this.programConfigurations[Rt.id].updatePaintArrays(g,this._featureMap,z,Rt,st)||this.needsUpload}},li.prototype.get=function(g){return this.programConfigurations[g]},li.prototype.upload=function(g){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(g);this.needsUpload=!1}},li.prototype.destroy=function(){for(var g in this.programConfigurations)this.programConfigurations[g].destroy()};function Ii(g,z){var j={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return j[g]||[g.replace(z+"-","").replace(/-/g,"_")]}function la(g){var z={"line-pattern":{source:ko,composite:ko},"fill-pattern":{source:ko,composite:ko},"fill-extrusion-pattern":{source:ko,composite:ko}};return z[g]}function yi(g,z,j){var st={color:{source:Du,composite:lu},number:{source:Bu,composite:Du}},pt=la(g);return pt&&pt[j]||st[z][j]}Lt("ConstantBinder",Nn),Lt("CrossFadedConstantBinder",Bn),Lt("SourceExpressionBinder",Vn),Lt("CrossFadedCompositeBinder",ci),Lt("CompositeExpressionBinder",Zn),Lt("ProgramConfiguration",si,{omit:["_buffers"]}),Lt("ProgramConfigurationSet",li);var ki=8192,Oi=15,Wi=Math.pow(2,Oi-1)-1,Qi=-Wi-1;function Ki(g){for(var z=ki/g.extent,j=g.loadGeometry(),st=0;st<j.length;st++)for(var pt=j[st],wt=0;wt<pt.length;wt++){var Rt=pt[wt],Jt=Math.round(Rt.x*z),le=Math.round(Rt.y*z);Rt.x=h(Jt,Qi,Wi),Rt.y=h(le,Qi,Wi),(Jt<Rt.x||Jt>Rt.x+1||le<Rt.y||le>Rt.y+1)&&R("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return j}function Bi(g,z){return{type:g.type,id:g.id,properties:g.properties,geometry:z?Ki(g):[]}}function ia(g,z,j,st,pt){g.emplaceBack(z*2+(st+1)/2,j*2+(pt+1)/2)}var Ti=function(g){this.zoom=g.zoom,this.overscaling=g.overscaling,this.layers=g.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=g.index,this.hasPattern=!1,this.layoutVertexArray=new su,this.indexArray=new pl,this.segments=new Na,this.programConfigurations=new li(g.layers,g.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};Ti.prototype.populate=function(g,z,j){var st=this.layers[0],pt=[],wt=null;st.type==="circle"&&(wt=st.layout.get("circle-sort-key"));for(var Rt=0,Jt=g;Rt<Jt.length;Rt+=1){var le=Jt[Rt],we=le.feature,Pe=le.id,Ue=le.index,Ve=le.sourceLayerIndex,er=this.layers[0]._featureFilter.needGeometry,_r=Bi(we,er);if(this.layers[0]._featureFilter.filter(new pi(this.zoom),_r,j)){var Ir=wt?wt.evaluate(_r,{},j):void 0,un={id:Pe,properties:we.properties,type:we.type,sourceLayerIndex:Ve,index:Ue,geometry:er?_r.geometry:Ki(we),patterns:{},sortKey:Ir};pt.push(un)}}wt&&pt.sort(function(fi,hi){return fi.sortKey-hi.sortKey});for(var tn=0,gn=pt;tn<gn.length;tn+=1){var bn=gn[tn],hn=bn,Ln=hn.geometry,Un=hn.index,Wn=hn.sourceLayerIndex,Xn=g[Un].feature;this.addFeature(bn,Ln,Un,j),z.featureIndex.insert(Xn,Ln,Un,Wn,this.index)}},Ti.prototype.update=function(g,z,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(g,z,this.stateDependentLayers,j)},Ti.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ti.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ti.prototype.upload=function(g){this.uploaded||(this.layoutVertexBuffer=g.createVertexBuffer(this.layoutVertexArray,Mf),this.indexBuffer=g.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(g),this.uploaded=!0},Ti.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ti.prototype.addFeature=function(g,z,j,st){for(var pt=0,wt=z;pt<wt.length;pt+=1)for(var Rt=wt[pt],Jt=0,le=Rt;Jt<le.length;Jt+=1){var we=le[Jt],Pe=we.x,Ue=we.y;if(!(Pe<0||Pe>=ki||Ue<0||Ue>=ki)){var Ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,g.sortKey),er=Ve.vertexLength;ia(this.layoutVertexArray,Pe,Ue,-1,-1),ia(this.layoutVertexArray,Pe,Ue,1,-1),ia(this.layoutVertexArray,Pe,Ue,1,1),ia(this.layoutVertexArray,Pe,Ue,-1,1),this.indexArray.emplaceBack(er,er+1,er+2),this.indexArray.emplaceBack(er,er+3,er+2),Ve.vertexLength+=4,Ve.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,g,j,{},st)},Lt("CircleBucket",Ti,{omit:["layers"]});function Ni(g,z){for(var j=0;j<g.length;j++)if(ho(z,g[j]))return!0;for(var st=0;st<z.length;st++)if(ho(g,z[st]))return!0;return!!Xo(g,z)}function Aa(g,z,j){return!!(ho(g,z)||Nl(z,g,j))}function ja(g,z){if(g.length===1)return Zo(z,g[0]);for(var j=0;j<z.length;j++)for(var st=z[j],pt=0;pt<st.length;pt++)if(ho(g,st[pt]))return!0;for(var wt=0;wt<g.length;wt++)if(Zo(z,g[wt]))return!0;for(var Rt=0;Rt<z.length;Rt++)if(Xo(g,z[Rt]))return!0;return!1}function ws(g,z,j){for(var st=0;st<z.length;st++){var pt=z[st];if(g.length>=3){for(var wt=0;wt<pt.length;wt++)if(ho(g,pt[wt]))return!0}if(Ys(g,pt,j))return!0}return!1}function Ys(g,z,j){if(g.length>1){if(Xo(g,z))return!0;for(var st=0;st<z.length;st++)if(Nl(z[st],g,j))return!0}for(var pt=0;pt<g.length;pt++)if(Nl(g[pt],z,j))return!0;return!1}function Xo(g,z){if(g.length===0||z.length===0)return!1;for(var j=0;j<g.length-1;j++)for(var st=g[j],pt=g[j+1],wt=0;wt<z.length-1;wt++){var Rt=z[wt],Jt=z[wt+1];if(dl(st,pt,Rt,Jt))return!0}return!1}function dl(g,z,j,st){return B(g,j,st)!==B(z,j,st)&&B(g,z,j)!==B(g,z,st)}function Nl(g,z,j){var st=j*j;if(z.length===1)return g.distSqr(z[0])<st;for(var pt=1;pt<z.length;pt++){var wt=z[pt-1],Rt=z[pt];if(Mo(g,wt,Rt)<st)return!0}return!1}function Mo(g,z,j){var st=z.distSqr(j);if(st===0)return g.distSqr(z);var pt=((g.x-z.x)*(j.x-z.x)+(g.y-z.y)*(j.y-z.y))/st;return pt<0?g.distSqr(z):pt>1?g.distSqr(j):g.distSqr(j.sub(z)._mult(pt)._add(z))}function Zo(g,z){for(var j=!1,st,pt,wt,Rt=0;Rt<g.length;Rt++){st=g[Rt];for(var Jt=0,le=st.length-1;Jt<st.length;le=Jt++)pt=st[Jt],wt=st[le],pt.y>z.y!=wt.y>z.y&&z.x<(wt.x-pt.x)*(z.y-pt.y)/(wt.y-pt.y)+pt.x&&(j=!j)}return j}function ho(g,z){for(var j=!1,st=0,pt=g.length-1;st<g.length;pt=st++){var wt=g[st],Rt=g[pt];wt.y>z.y!=Rt.y>z.y&&z.x<(Rt.x-wt.x)*(z.y-wt.y)/(Rt.y-wt.y)+wt.x&&(j=!j)}return j}function jl(g,z,j,st,pt){for(var wt=0,Rt=g;wt<Rt.length;wt+=1){var Jt=Rt[wt];if(z<=Jt.x&&j<=Jt.y&&st>=Jt.x&&pt>=Jt.y)return!0}var le=[new r(z,j),new r(z,pt),new r(st,pt),new r(st,j)];if(g.length>2)for(var we=0,Pe=le;we<Pe.length;we+=1){var Ue=Pe[we];if(ho(g,Ue))return!0}for(var Ve=0;Ve<g.length-1;Ve++){var er=g[Ve],_r=g[Ve+1];if(Uu(er,_r,le))return!0}return!1}function Uu(g,z,j){var st=j[0],pt=j[2];if(g.x<st.x&&z.x<st.x||g.x>pt.x&&z.x>pt.x||g.y<st.y&&z.y<st.y||g.y>pt.y&&z.y>pt.y)return!1;var wt=B(g,z,j[0]);return wt!==B(g,z,j[1])||wt!==B(g,z,j[2])||wt!==B(g,z,j[3])}function Ko(g,z,j){var st=z.paint.get(g).value;return st.kind==="constant"?st.value:j.programConfigurations.get(z.id).getMaxValue(g)}function cs(g){return Math.sqrt(g[0]*g[0]+g[1]*g[1])}function Jo(g,z,j,st,pt){if(!z[0]&&!z[1])return g;var wt=r.convert(z)._mult(pt);j==="viewport"&&wt._rotate(-st);for(var Rt=[],Jt=0;Jt<g.length;Jt++){var le=g[Jt];Rt.push(le.sub(wt))}return Rt}var mc=new Zi({"circle-sort-key":new vi(gr.layout_circle["circle-sort-key"])}),Cc=new Zi({"circle-radius":new vi(gr.paint_circle["circle-radius"]),"circle-color":new vi(gr.paint_circle["circle-color"]),"circle-blur":new vi(gr.paint_circle["circle-blur"]),"circle-opacity":new vi(gr.paint_circle["circle-opacity"]),"circle-translate":new Qn(gr.paint_circle["circle-translate"]),"circle-translate-anchor":new Qn(gr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qn(gr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qn(gr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vi(gr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vi(gr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vi(gr.paint_circle["circle-stroke-opacity"])}),yc={paint:Cc,layout:mc},no=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var g=arguments,z=0,j=arguments.length;j--;)z+=g[j]*g[j];return Math.sqrt(z)});function Ec(){var g=new no(4);return no!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}function xc(g,z,j){var st=z[0],pt=z[1],wt=z[2],Rt=z[3],Jt=Math.sin(j),le=Math.cos(j);return g[0]=st*le+wt*Jt,g[1]=pt*le+Rt*Jt,g[2]=st*-Jt+wt*le,g[3]=pt*-Jt+Rt*le,g}function co(){var g=new no(9);return no!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,g}function qu(g,z){var j=Math.sin(z),st=Math.cos(z);return g[0]=st,g[1]=j,g[2]=0,g[3]=-j,g[4]=st,g[5]=0,g[6]=0,g[7]=0,g[8]=1,g}function Lc(){var g=new no(16);return no!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=0,g[12]=0,g[13]=0,g[14]=0),g[0]=1,g[5]=1,g[10]=1,g[15]=1,g}function Rc(g){var z=new no(16);return z[0]=g[0],z[1]=g[1],z[2]=g[2],z[3]=g[3],z[4]=g[4],z[5]=g[5],z[6]=g[6],z[7]=g[7],z[8]=g[8],z[9]=g[9],z[10]=g[10],z[11]=g[11],z[12]=g[12],z[13]=g[13],z[14]=g[14],z[15]=g[15],z}function Ul(g){return g[0]=1,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=1,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,g}function bc(g,z){var j=z[0],st=z[1],pt=z[2],wt=z[3],Rt=z[4],Jt=z[5],le=z[6],we=z[7],Pe=z[8],Ue=z[9],Ve=z[10],er=z[11],_r=z[12],Ir=z[13],un=z[14],tn=z[15],gn=j*Jt-st*Rt,bn=j*le-pt*Rt,hn=j*we-wt*Rt,Ln=st*le-pt*Jt,Un=st*we-wt*Jt,Wn=pt*we-wt*le,Xn=Pe*Ir-Ue*_r,fi=Pe*un-Ve*_r,hi=Pe*tn-er*_r,gi=Ue*un-Ve*Ir,bi=Ue*tn-er*Ir,Ci=Ve*tn-er*un,mi=gn*Ci-bn*bi+hn*gi+Ln*hi-Un*fi+Wn*Xn;return mi?(mi=1/mi,g[0]=(Jt*Ci-le*bi+we*gi)*mi,g[1]=(pt*bi-st*Ci-wt*gi)*mi,g[2]=(Ir*Wn-un*Un+tn*Ln)*mi,g[3]=(Ve*Un-Ue*Wn-er*Ln)*mi,g[4]=(le*hi-Rt*Ci-we*fi)*mi,g[5]=(j*Ci-pt*hi+wt*fi)*mi,g[6]=(un*hn-_r*Wn-tn*bn)*mi,g[7]=(Pe*Wn-Ve*hn+er*bn)*mi,g[8]=(Rt*bi-Jt*hi+we*Xn)*mi,g[9]=(st*hi-j*bi-wt*Xn)*mi,g[10]=(_r*Un-Ir*hn+tn*gn)*mi,g[11]=(Ue*hn-Pe*Un-er*gn)*mi,g[12]=(Jt*fi-Rt*gi-le*Xn)*mi,g[13]=(j*gi-st*fi+pt*Xn)*mi,g[14]=(Ir*bn-_r*Ln-un*gn)*mi,g[15]=(Pe*Ln-Ue*bn+Ve*gn)*mi,g):null}function Ta(g,z,j){var st=z[0],pt=z[1],wt=z[2],Rt=z[3],Jt=z[4],le=z[5],we=z[6],Pe=z[7],Ue=z[8],Ve=z[9],er=z[10],_r=z[11],Ir=z[12],un=z[13],tn=z[14],gn=z[15],bn=j[0],hn=j[1],Ln=j[2],Un=j[3];return g[0]=bn*st+hn*Jt+Ln*Ue+Un*Ir,g[1]=bn*pt+hn*le+Ln*Ve+Un*un,g[2]=bn*wt+hn*we+Ln*er+Un*tn,g[3]=bn*Rt+hn*Pe+Ln*_r+Un*gn,bn=j[4],hn=j[5],Ln=j[6],Un=j[7],g[4]=bn*st+hn*Jt+Ln*Ue+Un*Ir,g[5]=bn*pt+hn*le+Ln*Ve+Un*un,g[6]=bn*wt+hn*we+Ln*er+Un*tn,g[7]=bn*Rt+hn*Pe+Ln*_r+Un*gn,bn=j[8],hn=j[9],Ln=j[10],Un=j[11],g[8]=bn*st+hn*Jt+Ln*Ue+Un*Ir,g[9]=bn*pt+hn*le+Ln*Ve+Un*un,g[10]=bn*wt+hn*we+Ln*er+Un*tn,g[11]=bn*Rt+hn*Pe+Ln*_r+Un*gn,bn=j[12],hn=j[13],Ln=j[14],Un=j[15],g[12]=bn*st+hn*Jt+Ln*Ue+Un*Ir,g[13]=bn*pt+hn*le+Ln*Ve+Un*un,g[14]=bn*wt+hn*we+Ln*er+Un*tn,g[15]=bn*Rt+hn*Pe+Ln*_r+Un*gn,g}function Do(g,z,j){var st=j[0],pt=j[1],wt=j[2],Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn;return z===g?(g[12]=z[0]*st+z[4]*pt+z[8]*wt+z[12],g[13]=z[1]*st+z[5]*pt+z[9]*wt+z[13],g[14]=z[2]*st+z[6]*pt+z[10]*wt+z[14],g[15]=z[3]*st+z[7]*pt+z[11]*wt+z[15]):(Rt=z[0],Jt=z[1],le=z[2],we=z[3],Pe=z[4],Ue=z[5],Ve=z[6],er=z[7],_r=z[8],Ir=z[9],un=z[10],tn=z[11],g[0]=Rt,g[1]=Jt,g[2]=le,g[3]=we,g[4]=Pe,g[5]=Ue,g[6]=Ve,g[7]=er,g[8]=_r,g[9]=Ir,g[10]=un,g[11]=tn,g[12]=Rt*st+Pe*pt+_r*wt+z[12],g[13]=Jt*st+Ue*pt+Ir*wt+z[13],g[14]=le*st+Ve*pt+un*wt+z[14],g[15]=we*st+er*pt+tn*wt+z[15]),g}function Bo(g,z,j){var st=j[0],pt=j[1],wt=j[2];return g[0]=z[0]*st,g[1]=z[1]*st,g[2]=z[2]*st,g[3]=z[3]*st,g[4]=z[4]*pt,g[5]=z[5]*pt,g[6]=z[6]*pt,g[7]=z[7]*pt,g[8]=z[8]*wt,g[9]=z[9]*wt,g[10]=z[10]*wt,g[11]=z[11]*wt,g[12]=z[12],g[13]=z[13],g[14]=z[14],g[15]=z[15],g}function Oc(g,z,j){var st=Math.sin(j),pt=Math.cos(j),wt=z[4],Rt=z[5],Jt=z[6],le=z[7],we=z[8],Pe=z[9],Ue=z[10],Ve=z[11];return z!==g&&(g[0]=z[0],g[1]=z[1],g[2]=z[2],g[3]=z[3],g[12]=z[12],g[13]=z[13],g[14]=z[14],g[15]=z[15]),g[4]=wt*pt+we*st,g[5]=Rt*pt+Pe*st,g[6]=Jt*pt+Ue*st,g[7]=le*pt+Ve*st,g[8]=we*pt-wt*st,g[9]=Pe*pt-Rt*st,g[10]=Ue*pt-Jt*st,g[11]=Ve*pt-le*st,g}function rf(g,z,j){var st=Math.sin(j),pt=Math.cos(j),wt=z[0],Rt=z[1],Jt=z[2],le=z[3],we=z[4],Pe=z[5],Ue=z[6],Ve=z[7];return z!==g&&(g[8]=z[8],g[9]=z[9],g[10]=z[10],g[11]=z[11],g[12]=z[12],g[13]=z[13],g[14]=z[14],g[15]=z[15]),g[0]=wt*pt+we*st,g[1]=Rt*pt+Pe*st,g[2]=Jt*pt+Ue*st,g[3]=le*pt+Ve*st,g[4]=we*pt-wt*st,g[5]=Pe*pt-Rt*st,g[6]=Ue*pt-Jt*st,g[7]=Ve*pt-le*st,g}function Zf(g,z,j,st,pt){var wt=1/Math.tan(z/2),Rt;return g[0]=wt/j,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=wt,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[11]=-1,g[12]=0,g[13]=0,g[15]=0,pt!=null&&pt!==1/0?(Rt=1/(st-pt),g[10]=(pt+st)*Rt,g[14]=2*pt*st*Rt):(g[10]=-1,g[14]=-2*st),g}function Kf(g,z,j,st,pt,wt,Rt){var Jt=1/(z-j),le=1/(st-pt),we=1/(wt-Rt);return g[0]=-2*Jt,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=-2*le,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=2*we,g[11]=0,g[12]=(z+j)*Jt,g[13]=(pt+st)*le,g[14]=(Rt+wt)*we,g[15]=1,g}var _c=Ta;function Jf(){var g=new no(3);return no!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0),g}function Pc(g){var z=new no(3);return z[0]=g[0],z[1]=g[1],z[2]=g[2],z}function $f(g,z,j){return g[0]=z[0]+j[0],g[1]=z[1]+j[1],g[2]=z[2]+j[2],g}function Qf(g,z,j){return g[0]=z[0]-j[0],g[1]=z[1]-j[1],g[2]=z[2]-j[2],g}function nf(g,z,j){return g[0]=z[0]*j,g[1]=z[1]*j,g[2]=z[2]*j,g}function zp(g,z){var j=z[0],st=z[1],pt=z[2],wt=j*j+st*st+pt*pt;return wt>0&&(wt=1/Math.sqrt(wt)),g[0]=z[0]*wt,g[1]=z[1]*wt,g[2]=z[2]*wt,g}function Fp(g,z){return g[0]*z[0]+g[1]*z[1]+g[2]*z[2]}function Dp(g,z,j){var st=z[0],pt=z[1],wt=z[2],Rt=j[0],Jt=j[1],le=j[2];return g[0]=pt*le-wt*Jt,g[1]=wt*Rt-st*le,g[2]=st*Jt-pt*Rt,g}function Bp(g,z,j){var st=z[0],pt=z[1],wt=z[2];return g[0]=st*j[0]+pt*j[3]+wt*j[6],g[1]=st*j[1]+pt*j[4]+wt*j[7],g[2]=st*j[2]+pt*j[5]+wt*j[8],g}var Np=Qf;(function(){var g=Jf();return function(z,j,st,pt,wt,Rt){var Jt,le;for(j||(j=3),st||(st=0),pt?le=Math.min(pt*j+st,z.length):le=z.length,Jt=st;Jt<le;Jt+=j)g[0]=z[Jt],g[1]=z[Jt+1],g[2]=z[Jt+2],wt(g,g,Rt),z[Jt]=g[0],z[Jt+1]=g[1],z[Jt+2]=g[2];return z}})();function jp(){var g=new no(4);return no!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0,g[3]=0),g}function Up(g,z,j){return g[0]=z[0]*j,g[1]=z[1]*j,g[2]=z[2]*j,g[3]=z[3]*j,g}function qp(g,z){return g[0]*z[0]+g[1]*z[1]+g[2]*z[2]+g[3]*z[3]}function Sf(g,z,j){var st=z[0],pt=z[1],wt=z[2],Rt=z[3];return g[0]=j[0]*st+j[4]*pt+j[8]*wt+j[12]*Rt,g[1]=j[1]*st+j[5]*pt+j[9]*wt+j[13]*Rt,g[2]=j[2]*st+j[6]*pt+j[10]*wt+j[14]*Rt,g[3]=j[3]*st+j[7]*pt+j[11]*wt+j[15]*Rt,g}(function(){var g=jp();return function(z,j,st,pt,wt,Rt){var Jt,le;for(j||(j=4),st||(st=0),pt?le=Math.min(pt*j+st,z.length):le=z.length,Jt=st;Jt<le;Jt+=j)g[0]=z[Jt],g[1]=z[Jt+1],g[2]=z[Jt+2],g[3]=z[Jt+3],wt(g,g,Rt),z[Jt]=g[0],z[Jt+1]=g[1],z[Jt+2]=g[2],z[Jt+3]=g[3];return z}})();function Gp(){var g=new no(2);return no!=Float32Array&&(g[0]=0,g[1]=0),g}function Yp(g){var z=g[0],j=g[1];return z*z+j*j}var Hp=Yp;(function(){var g=Gp();return function(z,j,st,pt,wt,Rt){var Jt,le;for(j||(j=2),st||(st=0),pt?le=Math.min(pt*j+st,z.length):le=z.length,Jt=st;Jt<le;Jt+=j)g[0]=z[Jt],g[1]=z[Jt+1],wt(g,g,Rt),z[Jt]=g[0],z[Jt+1]=g[1];return z}})();var Vp=function(g){function z(j){g.call(this,j,yc)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(j){return new Ti(j)},z.prototype.queryRadius=function(j){var st=j;return Ko("circle-radius",this,st)+Ko("circle-stroke-width",this,st)+cs(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(j,st,pt,wt,Rt,Jt,le,we){for(var Pe=Jo(j,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Jt.angle,le),Ue=this.paint.get("circle-radius").evaluate(st,pt),Ve=this.paint.get("circle-stroke-width").evaluate(st,pt),er=Ue+Ve,_r=this.paint.get("circle-pitch-alignment")==="map",Ir=_r?Pe:Wp(Pe,we),un=_r?er*le:er,tn=0,gn=wt;tn<gn.length;tn+=1)for(var bn=gn[tn],hn=0,Ln=bn;hn<Ln.length;hn+=1){var Un=Ln[hn],Wn=_r?Un:kh(Un,we),Xn=un,fi=Sf([],[Un.x,Un.y,0,1],we);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Xn*=fi[3]/Jt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Xn*=Jt.cameraToCenterDistance/fi[3]),Aa(Ir,Wn,Xn))return!0}return!1},z}(wa);function kh(g,z){var j=Sf([],[g.x,g.y,0,1],z);return new r(j[0]/j[3],j[1]/j[3])}function Wp(g,z){return g.map(function(j){return kh(j,z)})}var Mh=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z}(Ti);Lt("HeatmapBucket",Mh,{omit:["layers"]});function th(g,z,j,st){var pt=z.width,wt=z.height;if(!st)st=new Uint8Array(pt*wt*j);else if(st instanceof Uint8ClampedArray)st=new Uint8Array(st.buffer);else if(st.length!==pt*wt*j)throw new RangeError("mismatched image size");return g.width=pt,g.height=wt,g.data=st,g}function Sh(g,z,j){var st=z.width,pt=z.height;if(!(st===g.width&&pt===g.height)){var wt=th({},{width:st,height:pt},j);eh(g,wt,{x:0,y:0},{x:0,y:0},{width:Math.min(g.width,st),height:Math.min(g.height,pt)},j),g.width=st,g.height=pt,g.data=wt.data}}function eh(g,z,j,st,pt,wt){if(pt.width===0||pt.height===0)return z;if(pt.width>g.width||pt.height>g.height||j.x>g.width-pt.width||j.y>g.height-pt.height)throw new RangeError("out of range source coordinates for image copy");if(pt.width>z.width||pt.height>z.height||st.x>z.width-pt.width||st.y>z.height-pt.height)throw new RangeError("out of range destination coordinates for image copy");for(var Rt=g.data,Jt=z.data,le=0;le<pt.height;le++)for(var we=((j.y+le)*g.width+j.x)*wt,Pe=((st.y+le)*z.width+st.x)*wt,Ue=0;Ue<pt.width*wt;Ue++)Jt[Pe+Ue]=Rt[we+Ue];return z}var wc=function(g,z){th(this,g,1,z)};wc.prototype.resize=function(g){Sh(this,g,1)},wc.prototype.clone=function(){return new wc({width:this.width,height:this.height},new Uint8Array(this.data))},wc.copy=function(g,z,j,st,pt){eh(g,z,j,st,pt,1)};var No=function(g,z){th(this,g,4,z)};No.prototype.resize=function(g){Sh(this,g,4)},No.prototype.replace=function(g,z){z?this.data.set(g):g instanceof Uint8ClampedArray?this.data=new Uint8Array(g.buffer):this.data=g},No.prototype.clone=function(){return new No({width:this.width,height:this.height},new Uint8Array(this.data))},No.copy=function(g,z,j,st,pt){eh(g,z,j,st,pt,4)},Lt("AlphaImage",wc),Lt("RGBAImage",No);var Xp=new Zi({"heatmap-radius":new vi(gr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vi(gr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qn(gr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ba(gr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qn(gr.paint_heatmap["heatmap-opacity"])}),Zp={paint:Xp};function Ch(g){var z={},j=g.resolution||256,st=g.clips?g.clips.length:1,pt=g.image||new No({width:j,height:st}),wt=function(gn,bn,hn){z[g.evaluationKey]=hn;var Ln=g.expression.evaluate(z);pt.data[gn+bn+0]=Math.floor(Ln.r*255/Ln.a),pt.data[gn+bn+1]=Math.floor(Ln.g*255/Ln.a),pt.data[gn+bn+2]=Math.floor(Ln.b*255/Ln.a),pt.data[gn+bn+3]=Math.floor(Ln.a*255)};if(g.clips)for(var Rt=0,Jt=0;Rt<st;++Rt,Jt+=j*4)for(var le=0,we=0;le<j;le++,we+=4){var Pe=le/(j-1),Ue=g.clips[Rt],Ve=Ue.start,er=Ue.end,_r=Ve*(1-Pe)+er*Pe;wt(Jt,we,_r)}else for(var Ir=0,un=0;Ir<j;Ir++,un+=4){var tn=Ir/(j-1);wt(0,un,tn)}return pt}var Kp=function(g){function z(j){g.call(this,j,Zp),this._updateColorRamp()}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(j){return new Mh(j)},z.prototype._handleSpecialPaintPropertyUpdate=function(j){j==="heatmap-color"&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){var j=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Ch({expression:j,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},z}(wa),Jp=new Zi({"hillshade-illumination-direction":new Qn(gr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qn(gr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qn(gr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qn(gr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qn(gr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qn(gr.paint_hillshade["hillshade-accent-color"])}),$p={paint:Jp},Qp=function(g){function z(j){g.call(this,j,$p)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},z}(wa),td=pa([{name:"a_pos",components:2,type:"Int16"}],4),ed=td.members,rh=Cf,rd=Cf;function Cf(g,z,j){j=j||2;var st=z&&z.length,pt=st?z[0]*j:g.length,wt=Eh(g,0,pt,j,!0),Rt=[];if(!wt||wt.next===wt.prev)return Rt;var Jt,le,we,Pe,Ue,Ve,er;if(st&&(wt=sd(g,z,wt,j)),g.length>80*j){Jt=we=g[0],le=Pe=g[1];for(var _r=j;_r<pt;_r+=j)Ue=g[_r],Ve=g[_r+1],Ue<Jt&&(Jt=Ue),Ve<le&&(le=Ve),Ue>we&&(we=Ue),Ve>Pe&&(Pe=Ve);er=Math.max(we-Jt,Pe-le),er=er!==0?1/er:0}return af(wt,Rt,j,Jt,le,er),Rt}function Eh(g,z,j,st,pt){var wt,Rt;if(pt===ah(g,z,j,st)>0)for(wt=z;wt<j;wt+=st)Rt=Oh(wt,g[wt],g[wt+1],Rt);else for(wt=j-st;wt>=z;wt-=st)Rt=Oh(wt,g[wt],g[wt+1],Rt);return Rt&&Ef(Rt,Rt.next)&&(sf(Rt),Rt=Rt.next),Rt}function Gu(g,z){if(!g)return g;z||(z=g);var j=g,st;do if(st=!1,!j.steiner&&(Ef(j,j.next)||Ua(j.prev,j,j.next)===0)){if(sf(j),j=z=j.prev,j===j.next)break;st=!0}else j=j.next;while(st||j!==z);return z}function af(g,z,j,st,pt,wt,Rt){if(g){!Rt&&wt&&hd(g,st,pt,wt);for(var Jt=g,le,we;g.prev!==g.next;){if(le=g.prev,we=g.next,wt?id(g,st,pt,wt):nd(g)){z.push(le.i/j),z.push(g.i/j),z.push(we.i/j),sf(g),g=we.next,Jt=we.next;continue}if(g=we,g===Jt){Rt?Rt===1?(g=ad(Gu(g),z,j),af(g,z,j,st,pt,wt,2)):Rt===2&&od(g,z,j,st,pt,wt):af(Gu(g),z,j,st,pt,wt,1);break}}}}function nd(g){var z=g.prev,j=g,st=g.next;if(Ua(z,j,st)>=0)return!1;for(var pt=g.next.next;pt!==g.prev;){if(Ic(z.x,z.y,j.x,j.y,st.x,st.y,pt.x,pt.y)&&Ua(pt.prev,pt,pt.next)>=0)return!1;pt=pt.next}return!0}function id(g,z,j,st){var pt=g.prev,wt=g,Rt=g.next;if(Ua(pt,wt,Rt)>=0)return!1;for(var Jt=pt.x<wt.x?pt.x<Rt.x?pt.x:Rt.x:wt.x<Rt.x?wt.x:Rt.x,le=pt.y<wt.y?pt.y<Rt.y?pt.y:Rt.y:wt.y<Rt.y?wt.y:Rt.y,we=pt.x>wt.x?pt.x>Rt.x?pt.x:Rt.x:wt.x>Rt.x?wt.x:Rt.x,Pe=pt.y>wt.y?pt.y>Rt.y?pt.y:Rt.y:wt.y>Rt.y?wt.y:Rt.y,Ue=nh(Jt,le,z,j,st),Ve=nh(we,Pe,z,j,st),er=g.prevZ,_r=g.nextZ;er&&er.z>=Ue&&_r&&_r.z<=Ve;){if(er!==g.prev&&er!==g.next&&Ic(pt.x,pt.y,wt.x,wt.y,Rt.x,Rt.y,er.x,er.y)&&Ua(er.prev,er,er.next)>=0||(er=er.prevZ,_r!==g.prev&&_r!==g.next&&Ic(pt.x,pt.y,wt.x,wt.y,Rt.x,Rt.y,_r.x,_r.y)&&Ua(_r.prev,_r,_r.next)>=0))return!1;_r=_r.nextZ}for(;er&&er.z>=Ue;){if(er!==g.prev&&er!==g.next&&Ic(pt.x,pt.y,wt.x,wt.y,Rt.x,Rt.y,er.x,er.y)&&Ua(er.prev,er,er.next)>=0)return!1;er=er.prevZ}for(;_r&&_r.z<=Ve;){if(_r!==g.prev&&_r!==g.next&&Ic(pt.x,pt.y,wt.x,wt.y,Rt.x,Rt.y,_r.x,_r.y)&&Ua(_r.prev,_r,_r.next)>=0)return!1;_r=_r.nextZ}return!0}function ad(g,z,j){var st=g;do{var pt=st.prev,wt=st.next.next;!Ef(pt,wt)&&Lh(pt,st,st.next,wt)&&of(pt,wt)&&of(wt,pt)&&(z.push(pt.i/j),z.push(st.i/j),z.push(wt.i/j),sf(st),sf(st.next),st=g=wt),st=st.next}while(st!==g);return Gu(st)}function od(g,z,j,st,pt,wt){var Rt=g;do{for(var Jt=Rt.next.next;Jt!==Rt.prev;){if(Rt.i!==Jt.i&&vd(Rt,Jt)){var le=Rh(Rt,Jt);Rt=Gu(Rt,Rt.next),le=Gu(le,le.next),af(Rt,z,j,st,pt,wt),af(le,z,j,st,pt,wt);return}Jt=Jt.next}Rt=Rt.next}while(Rt!==g)}function sd(g,z,j,st){var pt=[],wt,Rt,Jt,le,we;for(wt=0,Rt=z.length;wt<Rt;wt++)Jt=z[wt]*st,le=wt<Rt-1?z[wt+1]*st:g.length,we=Eh(g,Jt,le,st,!1),we===we.next&&(we.steiner=!0),pt.push(dd(we));for(pt.sort(ld),wt=0;wt<pt.length;wt++)ud(pt[wt],j),j=Gu(j,j.next);return j}function ld(g,z){return g.x-z.x}function ud(g,z){if(z=cd(g,z),z){var j=Rh(z,g);Gu(z,z.next),Gu(j,j.next)}}function cd(g,z){var j=z,st=g.x,pt=g.y,wt=-1/0,Rt;do{if(pt<=j.y&&pt>=j.next.y&&j.next.y!==j.y){var Jt=j.x+(pt-j.y)*(j.next.x-j.x)/(j.next.y-j.y);if(Jt<=st&&Jt>wt){if(wt=Jt,Jt===st){if(pt===j.y)return j;if(pt===j.next.y)return j.next}Rt=j.x<j.next.x?j:j.next}}j=j.next}while(j!==z);if(!Rt)return null;if(st===wt)return Rt;var le=Rt,we=Rt.x,Pe=Rt.y,Ue=1/0,Ve;j=Rt;do st>=j.x&&j.x>=we&&st!==j.x&&Ic(pt<Pe?st:wt,pt,we,Pe,pt<Pe?wt:st,pt,j.x,j.y)&&(Ve=Math.abs(pt-j.y)/(st-j.x),of(j,g)&&(Ve<Ue||Ve===Ue&&(j.x>Rt.x||j.x===Rt.x&&fd(Rt,j)))&&(Rt=j,Ue=Ve)),j=j.next;while(j!==le);return Rt}function fd(g,z){return Ua(g.prev,g,z.prev)<0&&Ua(z.next,g,g.next)<0}function hd(g,z,j,st){var pt=g;do pt.z===null&&(pt.z=nh(pt.x,pt.y,z,j,st)),pt.prevZ=pt.prev,pt.nextZ=pt.next,pt=pt.next;while(pt!==g);pt.prevZ.nextZ=null,pt.prevZ=null,pd(pt)}function pd(g){var z,j,st,pt,wt,Rt,Jt,le,we=1;do{for(j=g,g=null,wt=null,Rt=0;j;){for(Rt++,st=j,Jt=0,z=0;z<we&&(Jt++,st=st.nextZ,!!st);z++);for(le=we;Jt>0||le>0&&st;)Jt!==0&&(le===0||!st||j.z<=st.z)?(pt=j,j=j.nextZ,Jt--):(pt=st,st=st.nextZ,le--),wt?wt.nextZ=pt:g=pt,pt.prevZ=wt,wt=pt;j=st}wt.nextZ=null,we*=2}while(Rt>1);return g}function nh(g,z,j,st,pt){return g=32767*(g-j)*pt,z=32767*(z-st)*pt,g=(g|g<<8)&16711935,g=(g|g<<4)&252645135,g=(g|g<<2)&858993459,g=(g|g<<1)&1431655765,z=(z|z<<8)&16711935,z=(z|z<<4)&252645135,z=(z|z<<2)&858993459,z=(z|z<<1)&1431655765,g|z<<1}function dd(g){var z=g,j=g;do(z.x<j.x||z.x===j.x&&z.y<j.y)&&(j=z),z=z.next;while(z!==g);return j}function Ic(g,z,j,st,pt,wt,Rt,Jt){return(pt-Rt)*(z-Jt)-(g-Rt)*(wt-Jt)>=0&&(g-Rt)*(st-Jt)-(j-Rt)*(z-Jt)>=0&&(j-Rt)*(wt-Jt)-(pt-Rt)*(st-Jt)>=0}function vd(g,z){return g.next.i!==z.i&&g.prev.i!==z.i&&!gd(g,z)&&(of(g,z)&&of(z,g)&&md(g,z)&&(Ua(g.prev,g,z.prev)||Ua(g,z.prev,z))||Ef(g,z)&&Ua(g.prev,g,g.next)>0&&Ua(z.prev,z,z.next)>0)}function Ua(g,z,j){return(z.y-g.y)*(j.x-z.x)-(z.x-g.x)*(j.y-z.y)}function Ef(g,z){return g.x===z.x&&g.y===z.y}function Lh(g,z,j,st){var pt=Rf(Ua(g,z,j)),wt=Rf(Ua(g,z,st)),Rt=Rf(Ua(j,st,g)),Jt=Rf(Ua(j,st,z));return!!(pt!==wt&&Rt!==Jt||pt===0&&Lf(g,j,z)||wt===0&&Lf(g,st,z)||Rt===0&&Lf(j,g,st)||Jt===0&&Lf(j,z,st))}function Lf(g,z,j){return z.x<=Math.max(g.x,j.x)&&z.x>=Math.min(g.x,j.x)&&z.y<=Math.max(g.y,j.y)&&z.y>=Math.min(g.y,j.y)}function Rf(g){return g>0?1:g<0?-1:0}function gd(g,z){var j=g;do{if(j.i!==g.i&&j.next.i!==g.i&&j.i!==z.i&&j.next.i!==z.i&&Lh(j,j.next,g,z))return!0;j=j.next}while(j!==g);return!1}function of(g,z){return Ua(g.prev,g,g.next)<0?Ua(g,z,g.next)>=0&&Ua(g,g.prev,z)>=0:Ua(g,z,g.prev)<0||Ua(g,g.next,z)<0}function md(g,z){var j=g,st=!1,pt=(g.x+z.x)/2,wt=(g.y+z.y)/2;do j.y>wt!=j.next.y>wt&&j.next.y!==j.y&&pt<(j.next.x-j.x)*(wt-j.y)/(j.next.y-j.y)+j.x&&(st=!st),j=j.next;while(j!==g);return st}function Rh(g,z){var j=new ih(g.i,g.x,g.y),st=new ih(z.i,z.x,z.y),pt=g.next,wt=z.prev;return g.next=z,z.prev=g,j.next=pt,pt.prev=j,st.next=j,j.prev=st,wt.next=st,st.prev=wt,st}function Oh(g,z,j,st){var pt=new ih(g,z,j);return st?(pt.next=st.next,pt.prev=st,st.next.prev=pt,st.next=pt):(pt.prev=pt,pt.next=pt),pt}function sf(g){g.next.prev=g.prev,g.prev.next=g.next,g.prevZ&&(g.prevZ.nextZ=g.nextZ),g.nextZ&&(g.nextZ.prevZ=g.prevZ)}function ih(g,z,j){this.i=g,this.x=z,this.y=j,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Cf.deviation=function(g,z,j,st){var pt=z&&z.length,wt=pt?z[0]*j:g.length,Rt=Math.abs(ah(g,0,wt,j));if(pt)for(var Jt=0,le=z.length;Jt<le;Jt++){var we=z[Jt]*j,Pe=Jt<le-1?z[Jt+1]*j:g.length;Rt-=Math.abs(ah(g,we,Pe,j))}var Ue=0;for(Jt=0;Jt<st.length;Jt+=3){var Ve=st[Jt]*j,er=st[Jt+1]*j,_r=st[Jt+2]*j;Ue+=Math.abs((g[Ve]-g[_r])*(g[er+1]-g[Ve+1])-(g[Ve]-g[er])*(g[_r+1]-g[Ve+1]))}return Rt===0&&Ue===0?0:Math.abs((Ue-Rt)/Rt)};function ah(g,z,j,st){for(var pt=0,wt=z,Rt=j-st;wt<j;wt+=st)pt+=(g[Rt]-g[wt])*(g[wt+1]+g[Rt+1]),Rt=wt;return pt}Cf.flatten=function(g){for(var z=g[0][0].length,j={vertices:[],holes:[],dimensions:z},st=0,pt=0;pt<g.length;pt++){for(var wt=0;wt<g[pt].length;wt++)for(var Rt=0;Rt<z;Rt++)j.vertices.push(g[pt][wt][Rt]);pt>0&&(st+=g[pt-1].length,j.holes.push(st))}return j},rh.default=rd;function yd(g,z,j,st,pt){Ph(g,z,j||0,st||g.length-1,pt||xd)}function Ph(g,z,j,st,pt){for(;st>j;){if(st-j>600){var wt=st-j+1,Rt=z-j+1,Jt=Math.log(wt),le=.5*Math.exp(2*Jt/3),we=.5*Math.sqrt(Jt*le*(wt-le)/wt)*(Rt-wt/2<0?-1:1),Pe=Math.max(j,Math.floor(z-Rt*le/wt+we)),Ue=Math.min(st,Math.floor(z+(wt-Rt)*le/wt+we));Ph(g,z,Pe,Ue,pt)}var Ve=g[z],er=j,_r=st;for(lf(g,j,z),pt(g[st],Ve)>0&&lf(g,j,st);er<_r;){for(lf(g,er,_r),er++,_r--;pt(g[er],Ve)<0;)er++;for(;pt(g[_r],Ve)>0;)_r--}pt(g[j],Ve)===0?lf(g,j,_r):(_r++,lf(g,_r,st)),_r<=z&&(j=_r+1),z<=_r&&(st=_r-1)}}function lf(g,z,j){var st=g[z];g[z]=g[j],g[j]=st}function xd(g,z){return g<z?-1:g>z?1:0}function oh(g,z){var j=g.length;if(j<=1)return[g];for(var st=[],pt,wt,Rt=0;Rt<j;Rt++){var Jt=N(g[Rt]);Jt!==0&&(g[Rt].area=Math.abs(Jt),wt===void 0&&(wt=Jt<0),wt===Jt<0?(pt&&st.push(pt),pt=[g[Rt]]):pt.push(g[Rt]))}if(pt&&st.push(pt),z>1)for(var le=0;le<st.length;le++)st[le].length<=z||(yd(st[le],z,1,st[le].length-1,bd),st[le]=st[le].slice(0,z));return st}function bd(g,z){return z.area-g.area}function sh(g,z,j){for(var st=j.patternDependencies,pt=!1,wt=0,Rt=z;wt<Rt.length;wt+=1){var Jt=Rt[wt],le=Jt.paint.get(g+"-pattern");le.isConstant()||(pt=!0);var we=le.constantOr(null);we&&(pt=!0,st[we.to]=!0,st[we.from]=!0)}return pt}function lh(g,z,j,st,pt){for(var wt=pt.patternDependencies,Rt=0,Jt=z;Rt<Jt.length;Rt+=1){var le=Jt[Rt],we=le.paint.get(g+"-pattern"),Pe=we.value;if(Pe.kind!=="constant"){var Ue=Pe.evaluate({zoom:st-1},j,{},pt.availableImages),Ve=Pe.evaluate({zoom:st},j,{},pt.availableImages),er=Pe.evaluate({zoom:st+1},j,{},pt.availableImages);Ue=Ue&&Ue.name?Ue.name:Ue,Ve=Ve&&Ve.name?Ve.name:Ve,er=er&&er.name?er.name:er,wt[Ue]=!0,wt[Ve]=!0,wt[er]=!0,j.patterns[le.id]={min:Ue,mid:Ve,max:er}}}return j}var _d=500,vl=function(g){this.zoom=g.zoom,this.overscaling=g.overscaling,this.layers=g.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=g.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new su,this.indexArray=new pl,this.indexArray2=new gc,this.programConfigurations=new li(g.layers,g.zoom),this.segments=new Na,this.segments2=new Na,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};vl.prototype.populate=function(g,z,j){this.hasPattern=sh("fill",this.layers,z);for(var st=this.layers[0].layout.get("fill-sort-key"),pt=[],wt=0,Rt=g;wt<Rt.length;wt+=1){var Jt=Rt[wt],le=Jt.feature,we=Jt.id,Pe=Jt.index,Ue=Jt.sourceLayerIndex,Ve=this.layers[0]._featureFilter.needGeometry,er=Bi(le,Ve);if(this.layers[0]._featureFilter.filter(new pi(this.zoom),er,j)){var _r=st?st.evaluate(er,{},j,z.availableImages):void 0,Ir={id:we,properties:le.properties,type:le.type,sourceLayerIndex:Ue,index:Pe,geometry:Ve?er.geometry:Ki(le),patterns:{},sortKey:_r};pt.push(Ir)}}st&&pt.sort(function(fi,hi){return fi.sortKey-hi.sortKey});for(var un=0,tn=pt;un<tn.length;un+=1){var gn=tn[un],bn=gn,hn=bn.geometry,Ln=bn.index,Un=bn.sourceLayerIndex;if(this.hasPattern){var Wn=lh("fill",this.layers,gn,this.zoom,z);this.patternFeatures.push(Wn)}else this.addFeature(gn,hn,Ln,j,{});var Xn=g[Ln].feature;z.featureIndex.insert(Xn,hn,Ln,Un,this.index)}},vl.prototype.update=function(g,z,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(g,z,this.stateDependentLayers,j)},vl.prototype.addFeatures=function(g,z,j){for(var st=0,pt=this.patternFeatures;st<pt.length;st+=1){var wt=pt[st];this.addFeature(wt,wt.geometry,wt.index,z,j)}},vl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vl.prototype.upload=function(g){this.uploaded||(this.layoutVertexBuffer=g.createVertexBuffer(this.layoutVertexArray,ed),this.indexBuffer=g.createIndexBuffer(this.indexArray),this.indexBuffer2=g.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(g),this.uploaded=!0},vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},vl.prototype.addFeature=function(g,z,j,st,pt){for(var wt=0,Rt=oh(z,_d);wt<Rt.length;wt+=1){for(var Jt=Rt[wt],le=0,we=0,Pe=Jt;we<Pe.length;we+=1){var Ue=Pe[we];le+=Ue.length}for(var Ve=this.segments.prepareSegment(le,this.layoutVertexArray,this.indexArray),er=Ve.vertexLength,_r=[],Ir=[],un=0,tn=Jt;un<tn.length;un+=1){var gn=tn[un];if(gn.length!==0){gn!==Jt[0]&&Ir.push(_r.length/2);var bn=this.segments2.prepareSegment(gn.length,this.layoutVertexArray,this.indexArray2),hn=bn.vertexLength;this.layoutVertexArray.emplaceBack(gn[0].x,gn[0].y),this.indexArray2.emplaceBack(hn+gn.length-1,hn),_r.push(gn[0].x),_r.push(gn[0].y);for(var Ln=1;Ln<gn.length;Ln++)this.layoutVertexArray.emplaceBack(gn[Ln].x,gn[Ln].y),this.indexArray2.emplaceBack(hn+Ln-1,hn+Ln),_r.push(gn[Ln].x),_r.push(gn[Ln].y);bn.vertexLength+=gn.length,bn.primitiveLength+=gn.length}}for(var Un=rh(_r,Ir),Wn=0;Wn<Un.length;Wn+=3)this.indexArray.emplaceBack(er+Un[Wn],er+Un[Wn+1],er+Un[Wn+2]);Ve.vertexLength+=le,Ve.primitiveLength+=Un.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,g,j,pt,st)},Lt("FillBucket",vl,{omit:["layers","patternFeatures"]});var wd=new Zi({"fill-sort-key":new vi(gr.layout_fill["fill-sort-key"])}),Ad=new Zi({"fill-antialias":new Qn(gr.paint_fill["fill-antialias"]),"fill-opacity":new vi(gr.paint_fill["fill-opacity"]),"fill-color":new vi(gr.paint_fill["fill-color"]),"fill-outline-color":new vi(gr.paint_fill["fill-outline-color"]),"fill-translate":new Qn(gr.paint_fill["fill-translate"]),"fill-translate-anchor":new Qn(gr.paint_fill["fill-translate-anchor"]),"fill-pattern":new ro(gr.paint_fill["fill-pattern"])}),Td={paint:Ad,layout:wd},kd=function(g){function z(j){g.call(this,j,Td)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(j,st){g.prototype.recalculate.call(this,j,st);var pt=this.paint._values["fill-outline-color"];pt.value.kind==="constant"&&pt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(j){return new vl(j)},z.prototype.queryRadius=function(){return cs(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(j,st,pt,wt,Rt,Jt,le){var we=Jo(j,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Jt.angle,le);return ja(we,wt)},z.prototype.isTileClipped=function(){return!0},z}(wa),Md=pa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Sd=Md.members,Ih=zc;function zc(g,z,j,st,pt){this.properties={},this.extent=j,this.type=0,this._pbf=g,this._geometry=-1,this._keys=st,this._values=pt,g.readFields(Cd,this,z)}function Cd(g,z,j){g==1?z.id=j.readVarint():g==2?Ed(j,z):g==3?z.type=j.readVarint():g==4&&(z._geometry=j.pos)}function Ed(g,z){for(var j=g.readVarint()+g.pos;g.pos<j;){var st=z._keys[g.readVarint()],pt=z._values[g.readVarint()];z.properties[st]=pt}}zc.types=["Unknown","Point","LineString","Polygon"],zc.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var z=g.readVarint()+g.pos,j=1,st=0,pt=0,wt=0,Rt=[],Jt;g.pos<z;){if(st<=0){var le=g.readVarint();j=le&7,st=le>>3}if(st--,j===1||j===2)pt+=g.readSVarint(),wt+=g.readSVarint(),j===1&&(Jt&&Rt.push(Jt),Jt=[]),Jt.push(new r(pt,wt));else if(j===7)Jt&&Jt.push(Jt[0].clone());else throw new Error("unknown command "+j)}return Jt&&Rt.push(Jt),Rt},zc.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var z=g.readVarint()+g.pos,j=1,st=0,pt=0,wt=0,Rt=1/0,Jt=-1/0,le=1/0,we=-1/0;g.pos<z;){if(st<=0){var Pe=g.readVarint();j=Pe&7,st=Pe>>3}if(st--,j===1||j===2)pt+=g.readSVarint(),wt+=g.readSVarint(),pt<Rt&&(Rt=pt),pt>Jt&&(Jt=pt),wt<le&&(le=wt),wt>we&&(we=wt);else if(j!==7)throw new Error("unknown command "+j)}return[Rt,le,Jt,we]},zc.prototype.toGeoJSON=function(g,z,j){var st=this.extent*Math.pow(2,j),pt=this.extent*g,wt=this.extent*z,Rt=this.loadGeometry(),Jt=zc.types[this.type],le,we;function Pe(er){for(var _r=0;_r<er.length;_r++){var Ir=er[_r],un=180-(Ir.y+wt)*360/st;er[_r]=[(Ir.x+pt)*360/st-180,360/Math.PI*Math.atan(Math.exp(un*Math.PI/180))-90]}}switch(this.type){case 1:var Ue=[];for(le=0;le<Rt.length;le++)Ue[le]=Rt[le][0];Rt=Ue,Pe(Rt);break;case 2:for(le=0;le<Rt.length;le++)Pe(Rt[le]);break;case 3:for(Rt=Ld(Rt),le=0;le<Rt.length;le++)for(we=0;we<Rt[le].length;we++)Pe(Rt[le][we]);break}Rt.length===1?Rt=Rt[0]:Jt="Multi"+Jt;var Ve={type:"Feature",geometry:{type:Jt,coordinates:Rt},properties:this.properties};return"id"in this&&(Ve.id=this.id),Ve};function Ld(g){var z=g.length;if(z<=1)return[g];for(var j=[],st,pt,wt=0;wt<z;wt++){var Rt=Rd(g[wt]);Rt!==0&&(pt===void 0&&(pt=Rt<0),pt===Rt<0?(st&&j.push(st),st=[g[wt]]):st.push(g[wt]))}return st&&j.push(st),j}function Rd(g){for(var z=0,j=0,st=g.length,pt=st-1,wt,Rt;j<st;pt=j++)wt=g[j],Rt=g[pt],z+=(Rt.x-wt.x)*(wt.y+Rt.y);return z}var zh=Fh;function Fh(g,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=g,this._keys=[],this._values=[],this._features=[],g.readFields(Od,this,z),this.length=this._features.length}function Od(g,z,j){g===15?z.version=j.readVarint():g===1?z.name=j.readString():g===5?z.extent=j.readVarint():g===2?z._features.push(j.pos):g===3?z._keys.push(j.readString()):g===4&&z._values.push(Pd(j))}function Pd(g){for(var z=null,j=g.readVarint()+g.pos;g.pos<j;){var st=g.readVarint()>>3;z=st===1?g.readString():st===2?g.readFloat():st===3?g.readDouble():st===4?g.readVarint64():st===5?g.readVarint():st===6?g.readSVarint():st===7?g.readBoolean():null}return z}Fh.prototype.feature=function(g){if(g<0||g>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[g];var z=this._pbf.readVarint()+this._pbf.pos;return new Ih(this._pbf,z,this.extent,this._keys,this._values)};var Id=zd;function zd(g,z){this.layers=g.readFields(Fd,{},z)}function Fd(g,z,j){if(g===3){var st=new zh(j,j.readVarint()+j.pos);st.length&&(z[st.name]=st)}}var Dd=Id,Bd=Ih,Nd=zh,Fc={VectorTile:Dd,VectorTileFeature:Bd,VectorTileLayer:Nd},jd=Fc.VectorTileFeature.types,Ud=500,uh=Math.pow(2,13);function uf(g,z,j,st,pt,wt,Rt,Jt){g.emplaceBack(z,j,Math.floor(st*uh)*2+Rt,pt*uh*2,wt*uh*2,Math.round(Jt))}var ml=function(g){this.zoom=g.zoom,this.overscaling=g.overscaling,this.layers=g.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=g.index,this.hasPattern=!1,this.layoutVertexArray=new Fl,this.indexArray=new pl,this.programConfigurations=new li(g.layers,g.zoom),this.segments=new Na,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};ml.prototype.populate=function(g,z,j){this.features=[],this.hasPattern=sh("fill-extrusion",this.layers,z);for(var st=0,pt=g;st<pt.length;st+=1){var wt=pt[st],Rt=wt.feature,Jt=wt.id,le=wt.index,we=wt.sourceLayerIndex,Pe=this.layers[0]._featureFilter.needGeometry,Ue=Bi(Rt,Pe);if(this.layers[0]._featureFilter.filter(new pi(this.zoom),Ue,j)){var Ve={id:Jt,sourceLayerIndex:we,index:le,geometry:Pe?Ue.geometry:Ki(Rt),properties:Rt.properties,type:Rt.type,patterns:{}};this.hasPattern?this.features.push(lh("fill-extrusion",this.layers,Ve,this.zoom,z)):this.addFeature(Ve,Ve.geometry,le,j,{}),z.featureIndex.insert(Rt,Ve.geometry,le,we,this.index,!0)}}},ml.prototype.addFeatures=function(g,z,j){for(var st=0,pt=this.features;st<pt.length;st+=1){var wt=pt[st],Rt=wt.geometry;this.addFeature(wt,Rt,wt.index,z,j)}},ml.prototype.update=function(g,z,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(g,z,this.stateDependentLayers,j)},ml.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ml.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ml.prototype.upload=function(g){this.uploaded||(this.layoutVertexBuffer=g.createVertexBuffer(this.layoutVertexArray,Sd),this.indexBuffer=g.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(g),this.uploaded=!0},ml.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ml.prototype.addFeature=function(g,z,j,st,pt){for(var wt=0,Rt=oh(z,Ud);wt<Rt.length;wt+=1){for(var Jt=Rt[wt],le=0,we=0,Pe=Jt;we<Pe.length;we+=1){var Ue=Pe[we];le+=Ue.length}for(var Ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),er=0,_r=Jt;er<_r.length;er+=1){var Ir=_r[er];if(Ir.length!==0&&!Gd(Ir))for(var un=0,tn=0;tn<Ir.length;tn++){var gn=Ir[tn];if(tn>=1){var bn=Ir[tn-1];if(!qd(gn,bn)){Ve.vertexLength+4>Na.MAX_VERTEX_ARRAY_LENGTH&&(Ve=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var hn=gn.sub(bn)._perp()._unit(),Ln=bn.dist(gn);un+Ln>32768&&(un=0),uf(this.layoutVertexArray,gn.x,gn.y,hn.x,hn.y,0,0,un),uf(this.layoutVertexArray,gn.x,gn.y,hn.x,hn.y,0,1,un),un+=Ln,uf(this.layoutVertexArray,bn.x,bn.y,hn.x,hn.y,0,0,un),uf(this.layoutVertexArray,bn.x,bn.y,hn.x,hn.y,0,1,un);var Un=Ve.vertexLength;this.indexArray.emplaceBack(Un,Un+2,Un+1),this.indexArray.emplaceBack(Un+1,Un+2,Un+3),Ve.vertexLength+=4,Ve.primitiveLength+=2}}}}if(Ve.vertexLength+le>Na.MAX_VERTEX_ARRAY_LENGTH&&(Ve=this.segments.prepareSegment(le,this.layoutVertexArray,this.indexArray)),jd[g.type]==="Polygon"){for(var Wn=[],Xn=[],fi=Ve.vertexLength,hi=0,gi=Jt;hi<gi.length;hi+=1){var bi=gi[hi];if(bi.length!==0){bi!==Jt[0]&&Xn.push(Wn.length/2);for(var Ci=0;Ci<bi.length;Ci++){var mi=bi[Ci];uf(this.layoutVertexArray,mi.x,mi.y,0,0,1,1,0),Wn.push(mi.x),Wn.push(mi.y)}}}for(var xi=rh(Wn,Xn),ji=0;ji<xi.length;ji+=3)this.indexArray.emplaceBack(fi+xi[ji],fi+xi[ji+2],fi+xi[ji+1]);Ve.primitiveLength+=xi.length/3,Ve.vertexLength+=le}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,g,j,pt,st)},Lt("FillExtrusionBucket",ml,{omit:["layers","features"]});function qd(g,z){return g.x===z.x&&(g.x<0||g.x>ki)||g.y===z.y&&(g.y<0||g.y>ki)}function Gd(g){return g.every(function(z){return z.x<0})||g.every(function(z){return z.x>ki})||g.every(function(z){return z.y<0})||g.every(function(z){return z.y>ki})}var Yd=new Zi({"fill-extrusion-opacity":new Qn(gr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vi(gr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qn(gr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qn(gr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ro(gr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vi(gr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vi(gr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qn(gr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Hd={paint:Yd},Vd=function(g){function z(j){g.call(this,j,Hd)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.createBucket=function(j){return new ml(j)},z.prototype.queryRadius=function(){return cs(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(j,st,pt,wt,Rt,Jt,le,we){var Pe=Jo(j,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Jt.angle,le),Ue=this.paint.get("fill-extrusion-height").evaluate(st,pt),Ve=this.paint.get("fill-extrusion-base").evaluate(st,pt),er=Zd(Pe,we,Jt,0),_r=Xd(wt,Ve,Ue,we),Ir=_r[0],un=_r[1];return Wd(Ir,un,er)},z}(wa);function cf(g,z){return g.x*z.x+g.y*z.y}function Dh(g,z){if(g.length===1){for(var j=0,st=z[j++],pt;!pt||st.equals(pt);)if(pt=z[j++],!pt)return 1/0;for(;j<z.length;j++){var wt=z[j],Rt=g[0],Jt=pt.sub(st),le=wt.sub(st),we=Rt.sub(st),Pe=cf(Jt,Jt),Ue=cf(Jt,le),Ve=cf(le,le),er=cf(we,Jt),_r=cf(we,le),Ir=Pe*Ve-Ue*Ue,un=(Ve*er-Ue*_r)/Ir,tn=(Pe*_r-Ue*er)/Ir,gn=1-un-tn,bn=st.z*gn+pt.z*un+wt.z*tn;if(isFinite(bn))return bn}return 1/0}else{for(var hn=1/0,Ln=0,Un=z;Ln<Un.length;Ln+=1){var Wn=Un[Ln];hn=Math.min(hn,Wn.z)}return hn}}function Wd(g,z,j){var st=1/0;ja(j,z)&&(st=Dh(j,z[0]));for(var pt=0;pt<z.length;pt++)for(var wt=z[pt],Rt=g[pt],Jt=0;Jt<wt.length-1;Jt++){var le=wt[Jt],we=wt[Jt+1],Pe=Rt[Jt],Ue=Rt[Jt+1],Ve=[le,we,Ue,Pe,le];Ni(j,Ve)&&(st=Math.min(st,Dh(j,Ve)))}return st===1/0?!1:st}function Xd(g,z,j,st){for(var pt=[],wt=[],Rt=st[8]*z,Jt=st[9]*z,le=st[10]*z,we=st[11]*z,Pe=st[8]*j,Ue=st[9]*j,Ve=st[10]*j,er=st[11]*j,_r=0,Ir=g;_r<Ir.length;_r+=1){for(var un=Ir[_r],tn=[],gn=[],bn=0,hn=un;bn<hn.length;bn+=1){var Ln=hn[bn],Un=Ln.x,Wn=Ln.y,Xn=st[0]*Un+st[4]*Wn+st[12],fi=st[1]*Un+st[5]*Wn+st[13],hi=st[2]*Un+st[6]*Wn+st[14],gi=st[3]*Un+st[7]*Wn+st[15],bi=Xn+Rt,Ci=fi+Jt,mi=hi+le,xi=gi+we,ji=Xn+Pe,ra=fi+Ue,ca=hi+Ve,Gi=gi+er,na=new r(bi/xi,Ci/xi);na.z=mi/xi,tn.push(na);var Ui=new r(ji/Gi,ra/Gi);Ui.z=ca/Gi,gn.push(Ui)}pt.push(tn),wt.push(gn)}return[pt,wt]}function Zd(g,z,j,st){for(var pt=[],wt=0,Rt=g;wt<Rt.length;wt+=1){var Jt=Rt[wt],le=[Jt.x,Jt.y,st,1];Sf(le,le,z),pt.push(new r(le[0]/le[3],le[1]/le[3]))}return pt}var Kd=pa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Jd=Kd.members,$d=pa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),Qd=$d.members,t0=Fc.VectorTileFeature.types,Bh=63,e0=Math.cos(75/2*(Math.PI/180)),r0=15,n0=20,i0=15,Nh=1/2,jh=Math.pow(2,i0-1)/Nh,So=function(g){var z=this;this.zoom=g.zoom,this.overscaling=g.overscaling,this.layers=g.layers,this.layerIds=this.layers.map(function(j){return j.id}),this.index=g.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(j){z.gradients[j.id]={}}),this.layoutVertexArray=new Fu,this.layoutVertexArray2=new Du,this.indexArray=new pl,this.programConfigurations=new li(g.layers,g.zoom),this.segments=new Na,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(j){return j.isStateDependent()}).map(function(j){return j.id})};So.prototype.populate=function(g,z,j){this.hasPattern=sh("line",this.layers,z);for(var st=this.layers[0].layout.get("line-sort-key"),pt=[],wt=0,Rt=g;wt<Rt.length;wt+=1){var Jt=Rt[wt],le=Jt.feature,we=Jt.id,Pe=Jt.index,Ue=Jt.sourceLayerIndex,Ve=this.layers[0]._featureFilter.needGeometry,er=Bi(le,Ve);if(this.layers[0]._featureFilter.filter(new pi(this.zoom),er,j)){var _r=st?st.evaluate(er,{},j):void 0,Ir={id:we,properties:le.properties,type:le.type,sourceLayerIndex:Ue,index:Pe,geometry:Ve?er.geometry:Ki(le),patterns:{},sortKey:_r};pt.push(Ir)}}st&&pt.sort(function(fi,hi){return fi.sortKey-hi.sortKey});for(var un=0,tn=pt;un<tn.length;un+=1){var gn=tn[un],bn=gn,hn=bn.geometry,Ln=bn.index,Un=bn.sourceLayerIndex;if(this.hasPattern){var Wn=lh("line",this.layers,gn,this.zoom,z);this.patternFeatures.push(Wn)}else this.addFeature(gn,hn,Ln,j,{});var Xn=g[Ln].feature;z.featureIndex.insert(Xn,hn,Ln,Un,this.index)}},So.prototype.update=function(g,z,j){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(g,z,this.stateDependentLayers,j)},So.prototype.addFeatures=function(g,z,j){for(var st=0,pt=this.patternFeatures;st<pt.length;st+=1){var wt=pt[st];this.addFeature(wt,wt.geometry,wt.index,z,j)}},So.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},So.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},So.prototype.upload=function(g){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=g.createVertexBuffer(this.layoutVertexArray2,Qd)),this.layoutVertexBuffer=g.createVertexBuffer(this.layoutVertexArray,Jd),this.indexBuffer=g.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(g),this.uploaded=!0},So.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},So.prototype.lineFeatureClips=function(g){if(g.properties&&g.properties.hasOwnProperty("mapbox_clip_start")&&g.properties.hasOwnProperty("mapbox_clip_end")){var z=+g.properties.mapbox_clip_start,j=+g.properties.mapbox_clip_end;return{start:z,end:j}}},So.prototype.addFeature=function(g,z,j,st,pt){var wt=this.layers[0].layout,Rt=wt.get("line-join").evaluate(g,{}),Jt=wt.get("line-cap"),le=wt.get("line-miter-limit"),we=wt.get("line-round-limit");this.lineClips=this.lineFeatureClips(g);for(var Pe=0,Ue=z;Pe<Ue.length;Pe+=1){var Ve=Ue[Pe];this.addLine(Ve,g,Rt,Jt,le,we)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,g,j,pt,st)},So.prototype.addLine=function(g,z,j,st,pt,wt){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Rt=0;Rt<g.length-1;Rt++)this.totalDistance+=g[Rt].dist(g[Rt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var Jt=t0[z.type]==="Polygon",le=g.length;le>=2&&g[le-1].equals(g[le-2]);)le--;for(var we=0;we<le-1&&g[we].equals(g[we+1]);)we++;if(!(le<(Jt?3:2))){j==="bevel"&&(pt=1.05);var Pe=this.overscaling<=16?r0*ki/(512*this.overscaling):0,Ue=this.segments.prepareSegment(le*10,this.layoutVertexArray,this.indexArray),Ve,er=void 0,_r=void 0,Ir=void 0,un=void 0;this.e1=this.e2=-1,Jt&&(Ve=g[le-2],un=g[we].sub(Ve)._unit()._perp());for(var tn=we;tn<le;tn++)if(_r=tn===le-1?Jt?g[we+1]:void 0:g[tn+1],!(_r&&g[tn].equals(_r))){un&&(Ir=un),Ve&&(er=Ve),Ve=g[tn],un=_r?_r.sub(Ve)._unit()._perp():Ir,Ir=Ir||un;var gn=Ir.add(un);(gn.x!==0||gn.y!==0)&&gn._unit();var bn=Ir.x*un.x+Ir.y*un.y,hn=gn.x*un.x+gn.y*un.y,Ln=hn!==0?1/hn:1/0,Un=2*Math.sqrt(2-2*hn),Wn=hn<e0&&er&&_r,Xn=Ir.x*un.y-Ir.y*un.x>0;if(Wn&&tn>we){var fi=Ve.dist(er);if(fi>2*Pe){var hi=Ve.sub(Ve.sub(er)._mult(Pe/fi)._round());this.updateDistance(er,hi),this.addCurrentVertex(hi,Ir,0,0,Ue),er=hi}}var gi=er&&_r,bi=gi?j:Jt?"butt":st;if(gi&&bi==="round"&&(Ln<wt?bi="miter":Ln<=2&&(bi="fakeround")),bi==="miter"&&Ln>pt&&(bi="bevel"),bi==="bevel"&&(Ln>2&&(bi="flipbevel"),Ln<pt&&(bi="miter")),er&&this.updateDistance(er,Ve),bi==="miter")gn._mult(Ln),this.addCurrentVertex(Ve,gn,0,0,Ue);else if(bi==="flipbevel"){if(Ln>100)gn=un.mult(-1);else{var Ci=Ln*Ir.add(un).mag()/Ir.sub(un).mag();gn._perp()._mult(Ci*(Xn?-1:1))}this.addCurrentVertex(Ve,gn,0,0,Ue),this.addCurrentVertex(Ve,gn.mult(-1),0,0,Ue)}else if(bi==="bevel"||bi==="fakeround"){var mi=-Math.sqrt(Ln*Ln-1),xi=Xn?mi:0,ji=Xn?0:mi;if(er&&this.addCurrentVertex(Ve,Ir,xi,ji,Ue),bi==="fakeround")for(var ra=Math.round(Un*180/Math.PI/n0),ca=1;ca<ra;ca++){var Gi=ca/ra;if(Gi!==.5){var na=Gi-.5,Ui=1.0904+bn*(-3.2452+bn*(3.55645-bn*1.43519)),da=.848013+bn*(-1.06021+bn*.215638);Gi=Gi+Gi*na*(Gi-1)*(Ui*na*na+da)}var ua=un.sub(Ir)._mult(Gi)._add(Ir)._unit()._mult(Xn?-1:1);this.addHalfVertex(Ve,ua.x,ua.y,!1,Xn,0,Ue)}_r&&this.addCurrentVertex(Ve,un,-xi,-ji,Ue)}else if(bi==="butt")this.addCurrentVertex(Ve,gn,0,0,Ue);else if(bi==="square"){var Ca=er?1:-1;this.addCurrentVertex(Ve,gn,Ca,Ca,Ue)}else bi==="round"&&(er&&(this.addCurrentVertex(Ve,Ir,0,0,Ue),this.addCurrentVertex(Ve,Ir,1,1,Ue,!0)),_r&&(this.addCurrentVertex(Ve,un,-1,-1,Ue,!0),this.addCurrentVertex(Ve,un,0,0,Ue)));if(Wn&&tn<le-1){var ao=Ve.dist(_r);if(ao>2*Pe){var Ya=Ve.add(_r.sub(Ve)._mult(Pe/ao)._round());this.updateDistance(Ve,Ya),this.addCurrentVertex(Ya,un,0,0,Ue),Ve=Ya}}}}},So.prototype.addCurrentVertex=function(g,z,j,st,pt,wt){wt===void 0&&(wt=!1);var Rt=z.x+z.y*j,Jt=z.y-z.x*j,le=-z.x+z.y*st,we=-z.y-z.x*st;this.addHalfVertex(g,Rt,Jt,wt,!1,j,pt),this.addHalfVertex(g,le,we,wt,!0,-st,pt),this.distance>jh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(g,z,j,st,pt,wt))},So.prototype.addHalfVertex=function(g,z,j,st,pt,wt,Rt){var Jt=g.x,le=g.y,we=this.lineClips?this.scaledDistance*(jh-1):this.scaledDistance,Pe=we*Nh;if(this.layoutVertexArray.emplaceBack((Jt<<1)+(st?1:0),(le<<1)+(pt?1:0),Math.round(Bh*z)+128,Math.round(Bh*j)+128,(wt===0?0:wt<0?-1:1)+1|(Pe&63)<<2,Pe>>6),this.lineClips){var Ue=this.scaledDistance-this.lineClips.start,Ve=this.lineClips.end-this.lineClips.start,er=Ue/Ve;this.layoutVertexArray2.emplaceBack(er,this.lineClipsArray.length)}var _r=Rt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,_r),Rt.primitiveLength++),pt?this.e2=_r:this.e1=_r},So.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},So.prototype.updateDistance=function(g,z){this.distance+=g.dist(z),this.updateScaledDistance()},Lt("LineBucket",So,{omit:["layers","patternFeatures"]});var a0=new Zi({"line-cap":new Qn(gr.layout_line["line-cap"]),"line-join":new vi(gr.layout_line["line-join"]),"line-miter-limit":new Qn(gr.layout_line["line-miter-limit"]),"line-round-limit":new Qn(gr.layout_line["line-round-limit"]),"line-sort-key":new vi(gr.layout_line["line-sort-key"])}),o0=new Zi({"line-opacity":new vi(gr.paint_line["line-opacity"]),"line-color":new vi(gr.paint_line["line-color"]),"line-translate":new Qn(gr.paint_line["line-translate"]),"line-translate-anchor":new Qn(gr.paint_line["line-translate-anchor"]),"line-width":new vi(gr.paint_line["line-width"]),"line-gap-width":new vi(gr.paint_line["line-gap-width"]),"line-offset":new vi(gr.paint_line["line-offset"]),"line-blur":new vi(gr.paint_line["line-blur"]),"line-dasharray":new uo(gr.paint_line["line-dasharray"]),"line-pattern":new ro(gr.paint_line["line-pattern"]),"line-gradient":new Ba(gr.paint_line["line-gradient"])}),Uh={paint:o0,layout:a0},s0=function(g){function z(){g.apply(this,arguments)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.possiblyEvaluate=function(j,st){return st=new pi(Math.floor(st.zoom),{now:st.now,fadeDuration:st.fadeDuration,zoomHistory:st.zoomHistory,transition:st.transition}),g.prototype.possiblyEvaluate.call(this,j,st)},z.prototype.evaluate=function(j,st,pt,wt){return st=x({},st,{zoom:Math.floor(st.zoom)}),g.prototype.evaluate.call(this,j,st,pt,wt)},z}(vi),qh=new s0(Uh.paint.properties["line-width"].specification);qh.useIntegerZoom=!0;var l0=function(g){function z(j){g.call(this,j,Uh),this.gradientVersion=0}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(j){if(j==="line-gradient"){var st=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=st._styleExpression.expression instanceof xo,this.gradientVersion=(this.gradientVersion+1)%s}},z.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},z.prototype.recalculate=function(j,st){g.prototype.recalculate.call(this,j,st),this.paint._values["line-floorwidth"]=qh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,j)},z.prototype.createBucket=function(j){return new So(j)},z.prototype.queryRadius=function(j){var st=j,pt=Gh(Ko("line-width",this,st),Ko("line-gap-width",this,st)),wt=Ko("line-offset",this,st);return pt/2+Math.abs(wt)+cs(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(j,st,pt,wt,Rt,Jt,le){var we=Jo(j,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Jt.angle,le),Pe=le/2*Gh(this.paint.get("line-width").evaluate(st,pt),this.paint.get("line-gap-width").evaluate(st,pt)),Ue=this.paint.get("line-offset").evaluate(st,pt);return Ue&&(wt=u0(wt,Ue*le)),ws(we,wt,Pe)},z.prototype.isTileClipped=function(){return!0},z}(wa);function Gh(g,z){return z>0?z+2*g:g}function u0(g,z){for(var j=[],st=new r(0,0),pt=0;pt<g.length;pt++){for(var wt=g[pt],Rt=[],Jt=0;Jt<wt.length;Jt++){var le=wt[Jt-1],we=wt[Jt],Pe=wt[Jt+1],Ue=Jt===0?st:we.sub(le)._unit()._perp(),Ve=Jt===wt.length-1?st:Pe.sub(we)._unit()._perp(),er=Ue._add(Ve)._unit(),_r=er.x*Ve.x+er.y*Ve.y;er._mult(1/_r),Rt.push(er._mult(z)._add(we))}j.push(Rt)}return j}var c0=pa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),f0=pa([{name:"a_projected_pos",components:3,type:"Float32"}],4);pa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var h0=pa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);pa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Yh=pa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),p0=pa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);pa([{name:"triangle",components:3,type:"Uint16"}]),pa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),pa([{type:"Float32",name:"offsetX"}]),pa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function d0(g,z,j){var st=z.layout.get("text-transform").evaluate(j,{});return st==="uppercase"?g=g.toLocaleUpperCase():st==="lowercase"&&(g=g.toLocaleLowerCase()),Gn.applyArabicShaping&&(g=Gn.applyArabicShaping(g)),g}function v0(g,z,j){return g.sections.forEach(function(st){st.text=d0(st.text,z,j)}),g}function g0(g){var z={},j={},st=[],pt=0;function wt(tn){st.push(g[tn]),pt++}function Rt(tn,gn,bn){var hn=j[tn];return delete j[tn],j[gn]=hn,st[hn].geometry[0].pop(),st[hn].geometry[0]=st[hn].geometry[0].concat(bn[0]),hn}function Jt(tn,gn,bn){var hn=z[gn];return delete z[gn],z[tn]=hn,st[hn].geometry[0].shift(),st[hn].geometry[0]=bn[0].concat(st[hn].geometry[0]),hn}function le(tn,gn,bn){var hn=bn?gn[0][gn[0].length-1]:gn[0][0];return tn+":"+hn.x+":"+hn.y}for(var we=0;we<g.length;we++){var Pe=g[we],Ue=Pe.geometry,Ve=Pe.text?Pe.text.toString():null;if(!Ve){wt(we);continue}var er=le(Ve,Ue),_r=le(Ve,Ue,!0);if(er in j&&_r in z&&j[er]!==z[_r]){var Ir=Jt(er,_r,Ue),un=Rt(er,_r,st[Ir].geometry);delete z[er],delete j[_r],j[le(Ve,st[un].geometry,!0)]=un,st[Ir].geometry=null}else er in j?Rt(er,_r,Ue):_r in z?Jt(er,_r,Ue):(wt(we),z[er]=pt-1,j[_r]=pt-1)}return st.filter(function(tn){return tn.geometry})}var ff={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function m0(g){for(var z="",j=0;j<g.length;j++){var st=g.charCodeAt(j+1)||null,pt=g.charCodeAt(j-1)||null,wt=(!st||!zr(st)||ff[g[j+1]])&&(!pt||!zr(pt)||ff[g[j-1]]);wt&&ff[g[j]]?z+=ff[g[j]]:z+=g[j]}return z}var io=24,y0=function(g,z,j,st,pt){var wt,Rt,Jt=pt*8-st-1,le=(1<<Jt)-1,we=le>>1,Pe=-7,Ue=j?pt-1:0,Ve=j?-1:1,er=g[z+Ue];for(Ue+=Ve,wt=er&(1<<-Pe)-1,er>>=-Pe,Pe+=Jt;Pe>0;wt=wt*256+g[z+Ue],Ue+=Ve,Pe-=8);for(Rt=wt&(1<<-Pe)-1,wt>>=-Pe,Pe+=st;Pe>0;Rt=Rt*256+g[z+Ue],Ue+=Ve,Pe-=8);if(wt===0)wt=1-we;else{if(wt===le)return Rt?NaN:(er?-1:1)*(1/0);Rt=Rt+Math.pow(2,st),wt=wt-we}return(er?-1:1)*Rt*Math.pow(2,wt-st)},x0=function(g,z,j,st,pt,wt){var Rt,Jt,le,we=wt*8-pt-1,Pe=(1<<we)-1,Ue=Pe>>1,Ve=pt===23?Math.pow(2,-24)-Math.pow(2,-77):0,er=st?0:wt-1,_r=st?1:-1,Ir=z<0||z===0&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(Jt=isNaN(z)?1:0,Rt=Pe):(Rt=Math.floor(Math.log(z)/Math.LN2),z*(le=Math.pow(2,-Rt))<1&&(Rt--,le*=2),Rt+Ue>=1?z+=Ve/le:z+=Ve*Math.pow(2,1-Ue),z*le>=2&&(Rt++,le/=2),Rt+Ue>=Pe?(Jt=0,Rt=Pe):Rt+Ue>=1?(Jt=(z*le-1)*Math.pow(2,pt),Rt=Rt+Ue):(Jt=z*Math.pow(2,Ue-1)*Math.pow(2,pt),Rt=0));pt>=8;g[j+er]=Jt&255,er+=_r,Jt/=256,pt-=8);for(Rt=Rt<<pt|Jt,we+=pt;we>0;g[j+er]=Rt&255,er+=_r,Rt/=256,we-=8);g[j+er-_r]|=Ir*128},Of={read:y0,write:x0},Pf=fa;function fa(g){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(g)?g:new Uint8Array(g||0),this.pos=0,this.type=0,this.length=this.buf.length}fa.Varint=0,fa.Fixed64=1,fa.Bytes=2,fa.Fixed32=5;var ch=65536*65536,Hh=1/ch,b0=12,Vh=typeof TextDecoder>"u"?null:new TextDecoder("utf8");fa.prototype={destroy:function(){this.buf=null},readFields:function(g,z,j){for(j=j||this.length;this.pos<j;){var st=this.readVarint(),pt=st>>3,wt=this.pos;this.type=st&7,g(pt,z,this),this.pos===wt&&this.skip(st)}return z},readMessage:function(g,z){return this.readFields(g,z,this.readVarint()+this.pos)},readFixed32:function(){var g=If(this.buf,this.pos);return this.pos+=4,g},readSFixed32:function(){var g=Xh(this.buf,this.pos);return this.pos+=4,g},readFixed64:function(){var g=If(this.buf,this.pos)+If(this.buf,this.pos+4)*ch;return this.pos+=8,g},readSFixed64:function(){var g=If(this.buf,this.pos)+Xh(this.buf,this.pos+4)*ch;return this.pos+=8,g},readFloat:function(){var g=Of.read(this.buf,this.pos,!0,23,4);return this.pos+=4,g},readDouble:function(){var g=Of.read(this.buf,this.pos,!0,52,8);return this.pos+=8,g},readVarint:function(g){var z=this.buf,j,st;return st=z[this.pos++],j=st&127,st<128||(st=z[this.pos++],j|=(st&127)<<7,st<128)||(st=z[this.pos++],j|=(st&127)<<14,st<128)||(st=z[this.pos++],j|=(st&127)<<21,st<128)?j:(st=z[this.pos],j|=(st&15)<<28,_0(j,g,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var g=this.readVarint();return g%2===1?(g+1)/-2:g/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var g=this.readVarint()+this.pos,z=this.pos;return this.pos=g,g-z>=b0&&Vh?F0(this.buf,z,g):z0(this.buf,z,g)},readBytes:function(){var g=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,g);return this.pos=g,z},readPackedVarint:function(g,z){if(this.type!==fa.Bytes)return g.push(this.readVarint(z));var j=cu(this);for(g=g||[];this.pos<j;)g.push(this.readVarint(z));return g},readPackedSVarint:function(g){if(this.type!==fa.Bytes)return g.push(this.readSVarint());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readSVarint());return g},readPackedBoolean:function(g){if(this.type!==fa.Bytes)return g.push(this.readBoolean());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readBoolean());return g},readPackedFloat:function(g){if(this.type!==fa.Bytes)return g.push(this.readFloat());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readFloat());return g},readPackedDouble:function(g){if(this.type!==fa.Bytes)return g.push(this.readDouble());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readDouble());return g},readPackedFixed32:function(g){if(this.type!==fa.Bytes)return g.push(this.readFixed32());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readFixed32());return g},readPackedSFixed32:function(g){if(this.type!==fa.Bytes)return g.push(this.readSFixed32());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readSFixed32());return g},readPackedFixed64:function(g){if(this.type!==fa.Bytes)return g.push(this.readFixed64());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readFixed64());return g},readPackedSFixed64:function(g){if(this.type!==fa.Bytes)return g.push(this.readSFixed64());var z=cu(this);for(g=g||[];this.pos<z;)g.push(this.readSFixed64());return g},skip:function(g){var z=g&7;if(z===fa.Varint)for(;this.buf[this.pos++]>127;);else if(z===fa.Bytes)this.pos=this.readVarint()+this.pos;else if(z===fa.Fixed32)this.pos+=4;else if(z===fa.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+z)},writeTag:function(g,z){this.writeVarint(g<<3|z)},realloc:function(g){for(var z=this.length||16;z<this.pos+g;)z*=2;if(z!==this.length){var j=new Uint8Array(z);j.set(this.buf),this.buf=j,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(g){this.realloc(4),Dc(this.buf,g,this.pos),this.pos+=4},writeSFixed32:function(g){this.realloc(4),Dc(this.buf,g,this.pos),this.pos+=4},writeFixed64:function(g){this.realloc(8),Dc(this.buf,g&-1,this.pos),Dc(this.buf,Math.floor(g*Hh),this.pos+4),this.pos+=8},writeSFixed64:function(g){this.realloc(8),Dc(this.buf,g&-1,this.pos),Dc(this.buf,Math.floor(g*Hh),this.pos+4),this.pos+=8},writeVarint:function(g){if(g=+g||0,g>268435455||g<0){A0(g,this);return}this.realloc(4),this.buf[this.pos++]=g&127|(g>127?128:0),!(g<=127)&&(this.buf[this.pos++]=(g>>>=7)&127|(g>127?128:0),!(g<=127)&&(this.buf[this.pos++]=(g>>>=7)&127|(g>127?128:0),!(g<=127)&&(this.buf[this.pos++]=g>>>7&127)))},writeSVarint:function(g){this.writeVarint(g<0?-g*2-1:g*2)},writeBoolean:function(g){this.writeVarint(!!g)},writeString:function(g){g=String(g),this.realloc(g.length*4),this.pos++;var z=this.pos;this.pos=D0(this.buf,g,this.pos);var j=this.pos-z;j>=128&&Wh(z,j,this),this.pos=z-1,this.writeVarint(j),this.pos+=j},writeFloat:function(g){this.realloc(4),Of.write(this.buf,g,this.pos,!0,23,4),this.pos+=4},writeDouble:function(g){this.realloc(8),Of.write(this.buf,g,this.pos,!0,52,8),this.pos+=8},writeBytes:function(g){var z=g.length;this.writeVarint(z),this.realloc(z);for(var j=0;j<z;j++)this.buf[this.pos++]=g[j]},writeRawMessage:function(g,z){this.pos++;var j=this.pos;g(z,this);var st=this.pos-j;st>=128&&Wh(j,st,this),this.pos=j-1,this.writeVarint(st),this.pos+=st},writeMessage:function(g,z,j){this.writeTag(g,fa.Bytes),this.writeRawMessage(z,j)},writePackedVarint:function(g,z){z.length&&this.writeMessage(g,M0,z)},writePackedSVarint:function(g,z){z.length&&this.writeMessage(g,S0,z)},writePackedBoolean:function(g,z){z.length&&this.writeMessage(g,L0,z)},writePackedFloat:function(g,z){z.length&&this.writeMessage(g,C0,z)},writePackedDouble:function(g,z){z.length&&this.writeMessage(g,E0,z)},writePackedFixed32:function(g,z){z.length&&this.writeMessage(g,R0,z)},writePackedSFixed32:function(g,z){z.length&&this.writeMessage(g,O0,z)},writePackedFixed64:function(g,z){z.length&&this.writeMessage(g,P0,z)},writePackedSFixed64:function(g,z){z.length&&this.writeMessage(g,I0,z)},writeBytesField:function(g,z){this.writeTag(g,fa.Bytes),this.writeBytes(z)},writeFixed32Field:function(g,z){this.writeTag(g,fa.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(g,z){this.writeTag(g,fa.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(g,z){this.writeTag(g,fa.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(g,z){this.writeTag(g,fa.Fixed64),this.writeSFixed64(z)},writeVarintField:function(g,z){this.writeTag(g,fa.Varint),this.writeVarint(z)},writeSVarintField:function(g,z){this.writeTag(g,fa.Varint),this.writeSVarint(z)},writeStringField:function(g,z){this.writeTag(g,fa.Bytes),this.writeString(z)},writeFloatField:function(g,z){this.writeTag(g,fa.Fixed32),this.writeFloat(z)},writeDoubleField:function(g,z){this.writeTag(g,fa.Fixed64),this.writeDouble(z)},writeBooleanField:function(g,z){this.writeVarintField(g,!!z)}};function _0(g,z,j){var st=j.buf,pt,wt;if(wt=st[j.pos++],pt=(wt&112)>>4,wt<128||(wt=st[j.pos++],pt|=(wt&127)<<3,wt<128)||(wt=st[j.pos++],pt|=(wt&127)<<10,wt<128)||(wt=st[j.pos++],pt|=(wt&127)<<17,wt<128)||(wt=st[j.pos++],pt|=(wt&127)<<24,wt<128)||(wt=st[j.pos++],pt|=(wt&1)<<31,wt<128))return w0(g,pt,z);throw new Error("Expected varint not more than 10 bytes")}function cu(g){return g.type===fa.Bytes?g.readVarint()+g.pos:g.pos+1}function w0(g,z,j){return j?z*4294967296+(g>>>0):(z>>>0)*4294967296+(g>>>0)}function A0(g,z){var j,st;if(g>=0?(j=g%4294967296|0,st=g/4294967296|0):(j=~(-g%4294967296),st=~(-g/4294967296),j^4294967295?j=j+1|0:(j=0,st=st+1|0)),g>=18446744073709552e3||g<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");z.realloc(10),T0(j,st,z),k0(st,z)}function T0(g,z,j){j.buf[j.pos++]=g&127|128,g>>>=7,j.buf[j.pos++]=g&127|128,g>>>=7,j.buf[j.pos++]=g&127|128,g>>>=7,j.buf[j.pos++]=g&127|128,g>>>=7,j.buf[j.pos]=g&127}function k0(g,z){var j=(g&7)<<4;z.buf[z.pos++]|=j|((g>>>=3)?128:0),g&&(z.buf[z.pos++]=g&127|((g>>>=7)?128:0),g&&(z.buf[z.pos++]=g&127|((g>>>=7)?128:0),g&&(z.buf[z.pos++]=g&127|((g>>>=7)?128:0),g&&(z.buf[z.pos++]=g&127|((g>>>=7)?128:0),g&&(z.buf[z.pos++]=g&127)))))}function Wh(g,z,j){var st=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(Math.LN2*7));j.realloc(st);for(var pt=j.pos-1;pt>=g;pt--)j.buf[pt+st]=j.buf[pt]}function M0(g,z){for(var j=0;j<g.length;j++)z.writeVarint(g[j])}function S0(g,z){for(var j=0;j<g.length;j++)z.writeSVarint(g[j])}function C0(g,z){for(var j=0;j<g.length;j++)z.writeFloat(g[j])}function E0(g,z){for(var j=0;j<g.length;j++)z.writeDouble(g[j])}function L0(g,z){for(var j=0;j<g.length;j++)z.writeBoolean(g[j])}function R0(g,z){for(var j=0;j<g.length;j++)z.writeFixed32(g[j])}function O0(g,z){for(var j=0;j<g.length;j++)z.writeSFixed32(g[j])}function P0(g,z){for(var j=0;j<g.length;j++)z.writeFixed64(g[j])}function I0(g,z){for(var j=0;j<g.length;j++)z.writeSFixed64(g[j])}function If(g,z){return(g[z]|g[z+1]<<8|g[z+2]<<16)+g[z+3]*16777216}function Dc(g,z,j){g[j]=z,g[j+1]=z>>>8,g[j+2]=z>>>16,g[j+3]=z>>>24}function Xh(g,z){return(g[z]|g[z+1]<<8|g[z+2]<<16)+(g[z+3]<<24)}function z0(g,z,j){for(var st="",pt=z;pt<j;){var wt=g[pt],Rt=null,Jt=wt>239?4:wt>223?3:wt>191?2:1;if(pt+Jt>j)break;var le,we,Pe;Jt===1?wt<128&&(Rt=wt):Jt===2?(le=g[pt+1],(le&192)===128&&(Rt=(wt&31)<<6|le&63,Rt<=127&&(Rt=null))):Jt===3?(le=g[pt+1],we=g[pt+2],(le&192)===128&&(we&192)===128&&(Rt=(wt&15)<<12|(le&63)<<6|we&63,(Rt<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null))):Jt===4&&(le=g[pt+1],we=g[pt+2],Pe=g[pt+3],(le&192)===128&&(we&192)===128&&(Pe&192)===128&&(Rt=(wt&15)<<18|(le&63)<<12|(we&63)<<6|Pe&63,(Rt<=65535||Rt>=1114112)&&(Rt=null))),Rt===null?(Rt=65533,Jt=1):Rt>65535&&(Rt-=65536,st+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|Rt&1023),st+=String.fromCharCode(Rt),pt+=Jt}return st}function F0(g,z,j){return Vh.decode(g.subarray(z,j))}function D0(g,z,j){for(var st=0,pt,wt;st<z.length;st++){if(pt=z.charCodeAt(st),pt>55295&&pt<57344)if(wt)if(pt<56320){g[j++]=239,g[j++]=191,g[j++]=189,wt=pt;continue}else pt=wt-55296<<10|pt-56320|65536,wt=null;else{pt>56319||st+1===z.length?(g[j++]=239,g[j++]=191,g[j++]=189):wt=pt;continue}else wt&&(g[j++]=239,g[j++]=191,g[j++]=189,wt=null);pt<128?g[j++]=pt:(pt<2048?g[j++]=pt>>6|192:(pt<65536?g[j++]=pt>>12|224:(g[j++]=pt>>18|240,g[j++]=pt>>12&63|128),g[j++]=pt>>6&63|128),g[j++]=pt&63|128)}return j}var fh=3;function B0(g,z,j){g===1&&j.readMessage(N0,z)}function N0(g,z,j){if(g===3){var st=j.readMessage(j0,{}),pt=st.id,wt=st.bitmap,Rt=st.width,Jt=st.height,le=st.left,we=st.top,Pe=st.advance;z.push({id:pt,bitmap:new wc({width:Rt+2*fh,height:Jt+2*fh},wt),metrics:{width:Rt,height:Jt,left:le,top:we,advance:Pe}})}}function j0(g,z,j){g===1?z.id=j.readVarint():g===2?z.bitmap=j.readBytes():g===3?z.width=j.readVarint():g===4?z.height=j.readVarint():g===5?z.left=j.readSVarint():g===6?z.top=j.readSVarint():g===7&&(z.advance=j.readVarint())}function U0(g){return new Pf(g).readFields(B0,[])}var Zh=fh;function Kh(g){for(var z=0,j=0,st=0,pt=g;st<pt.length;st+=1){var wt=pt[st];z+=wt.w*wt.h,j=Math.max(j,wt.w)}g.sort(function(un,tn){return tn.h-un.h});for(var Rt=Math.max(Math.ceil(Math.sqrt(z/.95)),j),Jt=[{x:0,y:0,w:Rt,h:1/0}],le=0,we=0,Pe=0,Ue=g;Pe<Ue.length;Pe+=1)for(var Ve=Ue[Pe],er=Jt.length-1;er>=0;er--){var _r=Jt[er];if(!(Ve.w>_r.w||Ve.h>_r.h)){if(Ve.x=_r.x,Ve.y=_r.y,we=Math.max(we,Ve.y+Ve.h),le=Math.max(le,Ve.x+Ve.w),Ve.w===_r.w&&Ve.h===_r.h){var Ir=Jt.pop();er<Jt.length&&(Jt[er]=Ir)}else Ve.h===_r.h?(_r.x+=Ve.w,_r.w-=Ve.w):Ve.w===_r.w?(_r.y+=Ve.h,_r.h-=Ve.h):(Jt.push({x:_r.x+Ve.w,y:_r.y,w:_r.w-Ve.w,h:Ve.h}),_r.y+=Ve.h,_r.h-=Ve.h);break}}return{w:le,h:we,fill:z/(le*we)||0}}var $o=1,zf=function(g,z){var j=z.pixelRatio,st=z.version,pt=z.stretchX,wt=z.stretchY,Rt=z.content;this.paddedRect=g,this.pixelRatio=j,this.stretchX=pt,this.stretchY=wt,this.content=Rt,this.version=st},hf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hf.tl.get=function(){return[this.paddedRect.x+$o,this.paddedRect.y+$o]},hf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-$o,this.paddedRect.y+this.paddedRect.h-$o]},hf.tlbr.get=function(){return this.tl.concat(this.br)},hf.displaySize.get=function(){return[(this.paddedRect.w-$o*2)/this.pixelRatio,(this.paddedRect.h-$o*2)/this.pixelRatio]},Object.defineProperties(zf.prototype,hf);var pf=function(g,z){var j={},st={};this.haveRenderCallbacks=[];var pt=[];this.addImages(g,j,pt),this.addImages(z,st,pt);var wt=Kh(pt),Rt=wt.w,Jt=wt.h,le=new No({width:Rt||1,height:Jt||1});for(var we in g){var Pe=g[we],Ue=j[we].paddedRect;No.copy(Pe.data,le,{x:0,y:0},{x:Ue.x+$o,y:Ue.y+$o},Pe.data)}for(var Ve in z){var er=z[Ve],_r=st[Ve].paddedRect,Ir=_r.x+$o,un=_r.y+$o,tn=er.data.width,gn=er.data.height;No.copy(er.data,le,{x:0,y:0},{x:Ir,y:un},er.data),No.copy(er.data,le,{x:0,y:gn-1},{x:Ir,y:un-1},{width:tn,height:1}),No.copy(er.data,le,{x:0,y:0},{x:Ir,y:un+gn},{width:tn,height:1}),No.copy(er.data,le,{x:tn-1,y:0},{x:Ir-1,y:un},{width:1,height:gn}),No.copy(er.data,le,{x:0,y:0},{x:Ir+tn,y:un},{width:1,height:gn})}this.image=le,this.iconPositions=j,this.patternPositions=st};pf.prototype.addImages=function(g,z,j){for(var st in g){var pt=g[st],wt={x:0,y:0,w:pt.data.width+2*$o,h:pt.data.height+2*$o};j.push(wt),z[st]=new zf(wt,pt),pt.hasRenderCallback&&this.haveRenderCallbacks.push(st)}},pf.prototype.patchUpdatedImages=function(g,z){g.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var j in g.updatedImages)this.patchUpdatedImage(this.iconPositions[j],g.getImage(j),z),this.patchUpdatedImage(this.patternPositions[j],g.getImage(j),z)},pf.prototype.patchUpdatedImage=function(g,z,j){if(!(!g||!z)&&g.version!==z.version){g.version=z.version;var st=g.tl,pt=st[0],wt=st[1];j.update(z.data,void 0,{x:pt,y:wt})}},Lt("ImagePosition",zf),Lt("ImageAtlas",pf);var fs={horizontal:1,vertical:2,horizontalOnly:3},df=-17;function q0(g){for(var z=0,j=g;z<j.length;z+=1){var st=j[z];if(st.positionedGlyphs.length!==0)return!1}return!0}var Jh=57344,$h=63743,Bc=function(){this.scale=1,this.fontStack="",this.imageName=null};Bc.forText=function(g,z){var j=new Bc;return j.scale=g||1,j.fontStack=z,j},Bc.forImage=function(g){var z=new Bc;return z.imageName=g,z};var po=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};po.fromFeature=function(g,z){for(var j=new po,st=0;st<g.sections.length;st++){var pt=g.sections[st];pt.image?j.addImageSection(pt):j.addTextSection(pt,z)}return j},po.prototype.length=function(){return this.text.length},po.prototype.getSection=function(g){return this.sections[this.sectionIndex[g]]},po.prototype.getSectionIndex=function(g){return this.sectionIndex[g]},po.prototype.getCharCode=function(g){return this.text.charCodeAt(g)},po.prototype.verticalizePunctuation=function(){this.text=m0(this.text)},po.prototype.trim=function(){for(var g=0,z=0;z<this.text.length&&ql[this.text.charCodeAt(z)];z++)g++;for(var j=this.text.length,st=this.text.length-1;st>=0&&st>=g&&ql[this.text.charCodeAt(st)];st--)j--;this.text=this.text.substring(g,j),this.sectionIndex=this.sectionIndex.slice(g,j)},po.prototype.substring=function(g,z){var j=new po;return j.text=this.text.substring(g,z),j.sectionIndex=this.sectionIndex.slice(g,z),j.sections=this.sections,j},po.prototype.toString=function(){return this.text},po.prototype.getMaxScale=function(){var g=this;return this.sectionIndex.reduce(function(z,j){return Math.max(z,g.sections[j].scale)},0)},po.prototype.addTextSection=function(g,z){this.text+=g.text,this.sections.push(Bc.forText(g.scale,g.fontStack||z));for(var j=this.sections.length-1,st=0;st<g.text.length;++st)this.sectionIndex.push(j)},po.prototype.addImageSection=function(g){var z=g.image?g.image.name:"";if(z.length===0){R("Can't add FormattedSection with an empty image.");return}var j=this.getNextImageSectionCharCode();if(!j){R("Reached maximum number of images "+($h-Jh+2));return}this.text+=String.fromCharCode(j),this.sections.push(Bc.forImage(z)),this.sectionIndex.push(this.sections.length-1)},po.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=$h?null:++this.imageSectionID:(this.imageSectionID=Jh,this.imageSectionID)};function G0(g,z){for(var j=[],st=g.text,pt=0,wt=0,Rt=z;wt<Rt.length;wt+=1){var Jt=Rt[wt];j.push(g.substring(pt,Jt)),pt=Jt}return pt<st.length&&j.push(g.substring(pt,st.length)),j}function Ff(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir){var un=po.fromFeature(g,pt);Ue===fs.vertical&&un.verticalizePunctuation();var tn,gn=Gn.processBidirectionalText,bn=Gn.processStyledBidirectionalText;if(gn&&un.sections.length===1){tn=[];for(var hn=gn(un.toString(),hh(un,we,wt,z,st,er,_r)),Ln=0,Un=hn;Ln<Un.length;Ln+=1){var Wn=Un[Ln],Xn=new po;Xn.text=Wn,Xn.sections=un.sections;for(var fi=0;fi<Wn.length;fi++)Xn.sectionIndex.push(0);tn.push(Xn)}}else if(bn){tn=[];for(var hi=bn(un.text,un.sectionIndex,hh(un,we,wt,z,st,er,_r)),gi=0,bi=hi;gi<bi.length;gi+=1){var Ci=bi[gi],mi=new po;mi.text=Ci[0],mi.sectionIndex=Ci[1],mi.sections=un.sections,tn.push(mi)}}else tn=G0(un,hh(un,we,wt,z,st,er,_r));var xi=[],ji={positionedLines:xi,text:un.toString(),top:Pe[1],bottom:Pe[1],left:Pe[0],right:Pe[0],writingMode:Ue,iconsInText:!1,verticalizable:!1};return V0(ji,z,j,st,tn,Rt,Jt,le,Ue,we,Ve,Ir),q0(xi)?!1:ji}var ql={};ql[9]=!0,ql[10]=!0,ql[11]=!0,ql[12]=!0,ql[13]=!0,ql[32]=!0;var Qo={};Qo[10]=!0,Qo[32]=!0,Qo[38]=!0,Qo[40]=!0,Qo[41]=!0,Qo[43]=!0,Qo[45]=!0,Qo[47]=!0,Qo[173]=!0,Qo[183]=!0,Qo[8203]=!0,Qo[8208]=!0,Qo[8211]=!0,Qo[8231]=!0;function Qh(g,z,j,st,pt,wt){if(z.imageName){var Rt=st[z.imageName];return Rt?Rt.displaySize[0]*z.scale*io/wt+pt:0}else{var Jt=j[z.fontStack],le=Jt&&Jt[g];return le?le.metrics.advance*z.scale+pt:0}}function Y0(g,z,j,st,pt,wt){for(var Rt=0,Jt=0;Jt<g.length();Jt++){var le=g.getSection(Jt);Rt+=Qh(g.getCharCode(Jt),le,st,pt,z,wt)}var we=Math.max(1,Math.ceil(Rt/j));return Rt/we}function tp(g,z,j,st){var pt=Math.pow(g-z,2);return st?g<z?pt/2:pt*2:pt+Math.abs(j)*j}function H0(g,z,j){var st=0;return g===10&&(st-=1e4),j&&(st+=150),(g===40||g===65288)&&(st+=50),(z===41||z===65289)&&(st+=50),st}function ep(g,z,j,st,pt,wt){for(var Rt=null,Jt=tp(z,j,pt,wt),le=0,we=st;le<we.length;le+=1){var Pe=we[le],Ue=z-Pe.x,Ve=tp(Ue,j,pt,wt)+Pe.badness;Ve<=Jt&&(Rt=Pe,Jt=Ve)}return{index:g,x:z,priorBreak:Rt,badness:Jt}}function rp(g){return g?rp(g.priorBreak).concat(g.index):[]}function hh(g,z,j,st,pt,wt,Rt){if(wt!=="point")return[];if(!g)return[];for(var Jt=[],le=Y0(g,z,j,st,pt,Rt),we=g.text.indexOf("\u200B")>=0,Pe=0,Ue=0;Ue<g.length();Ue++){var Ve=g.getSection(Ue),er=g.getCharCode(Ue);if(ql[er]||(Pe+=Qh(er,Ve,st,pt,z,Rt)),Ue<g.length()-1){var _r=Hr(er);(Qo[er]||_r||Ve.imageName)&&Jt.push(ep(Ue+1,Pe,le,Jt,H0(er,g.getCharCode(Ue+1),_r&&we),!1))}}return rp(ep(g.length(),Pe,le,Jt,0,!0))}function ph(g){var z=.5,j=.5;switch(g){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0;break}switch(g){case"bottom":case"bottom-right":case"bottom-left":j=1;break;case"top":case"top-right":case"top-left":j=0;break}return{horizontalAlign:z,verticalAlign:j}}function V0(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue){for(var Ve=0,er=df,_r=0,Ir=0,un=Jt==="right"?1:Jt==="left"?0:.5,tn=0,gn=0,bn=pt;gn<bn.length;gn+=1){var hn=bn[gn];hn.trim();var Ln=hn.getMaxScale(),Un=(Ln-1)*io,Wn={positionedGlyphs:[],lineOffset:0};g.positionedLines[tn]=Wn;var Xn=Wn.positionedGlyphs,fi=0;if(!hn.length()){er+=wt,++tn;continue}for(var hi=0;hi<hn.length();hi++){var gi=hn.getSection(hi),bi=hn.getSectionIndex(hi),Ci=hn.getCharCode(hi),mi=0,xi=null,ji=null,ra=null,ca=io,Gi=!(le===fs.horizontal||!Pe&&!Jr(Ci)||Pe&&(ql[Ci]||Yr(Ci)));if(gi.imageName){var na=st[gi.imageName];if(!na)continue;ra=gi.imageName,g.iconsInText=g.iconsInText||!0,ji=na.paddedRect;var Ui=na.displaySize;gi.scale=gi.scale*io/Ue,xi={width:Ui[0],height:Ui[1],left:$o,top:-Zh,advance:Gi?Ui[1]:Ui[0]};var da=io-Ui[1]*gi.scale;mi=Un+da,ca=xi.advance;var ua=Gi?Ui[0]*gi.scale-io*Ln:Ui[1]*gi.scale-io*Ln;ua>0&&ua>fi&&(fi=ua)}else{var Ca=j[gi.fontStack],ao=Ca&&Ca[Ci];if(ao&&ao.rect)ji=ao.rect,xi=ao.metrics;else{var Ya=z[gi.fontStack],vo=Ya&&Ya[Ci];if(!vo)continue;xi=vo.metrics}mi=(Ln-gi.scale)*io}Gi?(g.verticalizable=!0,Xn.push({glyph:Ci,imageName:ra,x:Ve,y:er+mi,vertical:Gi,scale:gi.scale,fontStack:gi.fontStack,sectionIndex:bi,metrics:xi,rect:ji}),Ve+=ca*gi.scale+we):(Xn.push({glyph:Ci,imageName:ra,x:Ve,y:er+mi,vertical:Gi,scale:gi.scale,fontStack:gi.fontStack,sectionIndex:bi,metrics:xi,rect:ji}),Ve+=xi.advance*gi.scale+we)}if(Xn.length!==0){var go=Ve-we;_r=Math.max(go,_r),W0(Xn,0,Xn.length-1,un,fi)}Ve=0;var mo=wt*Ln+fi;Wn.lineOffset=Math.max(fi,Un),er+=mo,Ir=Math.max(mo,Ir),++tn}var Ja=er-df,Co=ph(Rt),Eo=Co.horizontalAlign,Wa=Co.verticalAlign;X0(g.positionedLines,un,Eo,Wa,_r,Ir,wt,Ja,pt.length),g.top+=-Wa*Ja,g.bottom=g.top+Ja,g.left+=-Eo*_r,g.right=g.left+_r}function W0(g,z,j,st,pt){if(!(!st&&!pt))for(var wt=g[j],Rt=wt.metrics.advance*wt.scale,Jt=(g[j].x+Rt)*st,le=z;le<=j;le++)g[le].x-=Jt,g[le].y+=pt}function X0(g,z,j,st,pt,wt,Rt,Jt,le){var we=(z-j)*pt,Pe=0;wt!==Rt?Pe=-Jt*st-df:Pe=(-st*le+.5)*Rt;for(var Ue=0,Ve=g;Ue<Ve.length;Ue+=1)for(var er=Ve[Ue],_r=0,Ir=er.positionedGlyphs;_r<Ir.length;_r+=1){var un=Ir[_r];un.x+=we,un.y+=Pe}}function Z0(g,z,j){var st=ph(j),pt=st.horizontalAlign,wt=st.verticalAlign,Rt=z[0],Jt=z[1],le=Rt-g.displaySize[0]*pt,we=le+g.displaySize[0],Pe=Jt-g.displaySize[1]*wt,Ue=Pe+g.displaySize[1];return{image:g,top:Pe,bottom:Ue,left:le,right:we}}function np(g,z,j,st,pt,wt){var Rt=g.image,Jt;if(Rt.content){var le=Rt.content,we=Rt.pixelRatio||1;Jt=[le[0]/we,le[1]/we,Rt.displaySize[0]-le[2]/we,Rt.displaySize[1]-le[3]/we]}var Pe=z.left*wt,Ue=z.right*wt,Ve,er,_r,Ir;j==="width"||j==="both"?(Ir=pt[0]+Pe-st[3],er=pt[0]+Ue+st[1]):(Ir=pt[0]+(Pe+Ue-Rt.displaySize[0])/2,er=Ir+Rt.displaySize[0]);var un=z.top*wt,tn=z.bottom*wt;return j==="height"||j==="both"?(Ve=pt[1]+un-st[0],_r=pt[1]+tn+st[2]):(Ve=pt[1]+(un+tn-Rt.displaySize[1])/2,_r=Ve+Rt.displaySize[1]),{image:Rt,top:Ve,right:er,bottom:_r,left:Ir,collisionPadding:Jt}}var Nc=function(g){function z(j,st,pt,wt){g.call(this,j,st),this.angle=pt,wt!==void 0&&(this.segment=wt)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(r);Lt("Anchor",Nc);var yl=128;function dh(g,z){var j=z.expression;if(j.kind==="constant"){var st=j.evaluate(new pi(g+1));return{kind:"constant",layoutSize:st}}else{if(j.kind==="source")return{kind:"source"};for(var pt=j.zoomStops,wt=j.interpolationType,Rt=0;Rt<pt.length&&pt[Rt]<=g;)Rt++;Rt=Math.max(0,Rt-1);for(var Jt=Rt;Jt<pt.length&&pt[Jt]<g+1;)Jt++;Jt=Math.min(pt.length-1,Jt);var le=pt[Rt],we=pt[Jt];if(j.kind==="composite")return{kind:"composite",minZoom:le,maxZoom:we,interpolationType:wt};var Pe=j.evaluate(new pi(le)),Ue=j.evaluate(new pi(we));return{kind:"camera",minZoom:le,maxZoom:we,minSize:Pe,maxSize:Ue,interpolationType:wt}}}function ip(g,z,j){var st=z.uSize,pt=z.uSizeT,wt=j.lowerSize,Rt=j.upperSize;return g.kind==="source"?wt/yl:g.kind==="composite"?va(wt/yl,Rt/yl,pt):st}function ap(g,z){var j=0,st=0;if(g.kind==="constant")st=g.layoutSize;else if(g.kind!=="source"){var pt=g.interpolationType,wt=g.minZoom,Rt=g.maxZoom,Jt=pt?h(ya.interpolationFactor(pt,z,wt,Rt),0,1):0;g.kind==="camera"?st=va(g.minSize,g.maxSize,Jt):j=Jt}return{uSizeT:j,uSize:st}}var K0=Object.freeze({__proto__:null,getSizeData:dh,evaluateSizeForFeature:ip,evaluateSizeForZoom:ap,SIZE_PACK_FACTOR:yl});function op(g,z,j,st,pt){if(z.segment===void 0)return!0;for(var wt=z,Rt=z.segment+1,Jt=0;Jt>-j/2;){if(Rt--,Rt<0)return!1;Jt-=g[Rt].dist(wt),wt=g[Rt]}Jt+=g[Rt].dist(g[Rt+1]),Rt++;for(var le=[],we=0;Jt<j/2;){var Pe=g[Rt-1],Ue=g[Rt],Ve=g[Rt+1];if(!Ve)return!1;var er=Pe.angleTo(Ue)-Ue.angleTo(Ve);for(er=Math.abs((er+3*Math.PI)%(Math.PI*2)-Math.PI),le.push({distance:Jt,angleDelta:er}),we+=er;Jt-le[0].distance>st;)we-=le.shift().angleDelta;if(we>pt)return!1;Rt++,Jt+=Ue.dist(Ve)}return!0}function sp(g){for(var z=0,j=0;j<g.length-1;j++)z+=g[j].dist(g[j+1]);return z}function lp(g,z,j){return g?.6*z*j:0}function up(g,z){return Math.max(g?g.right-g.left:0,z?z.right-z.left:0)}function J0(g,z,j,st,pt,wt){for(var Rt=lp(j,pt,wt),Jt=up(j,st)*wt,le=0,we=sp(g)/2,Pe=0;Pe<g.length-1;Pe++){var Ue=g[Pe],Ve=g[Pe+1],er=Ue.dist(Ve);if(le+er>we){var _r=(we-le)/er,Ir=va(Ue.x,Ve.x,_r),un=va(Ue.y,Ve.y,_r),tn=new Nc(Ir,un,Ve.angleTo(Ue),Pe);return tn._round(),!Rt||op(g,tn,Jt,Rt,z)?tn:void 0}le+=er}}function $0(g,z,j,st,pt,wt,Rt,Jt,le){var we=lp(st,wt,Rt),Pe=up(st,pt),Ue=Pe*Rt,Ve=g[0].x===0||g[0].x===le||g[0].y===0||g[0].y===le;z-Ue<z/4&&(z=Ue+z/4);var er=wt*2,_r=Ve?z/2*Jt%z:(Pe/2+er)*Rt*Jt%z;return cp(g,_r,z,we,j,Ue,Ve,!1,le)}function cp(g,z,j,st,pt,wt,Rt,Jt,le){for(var we=wt/2,Pe=sp(g),Ue=0,Ve=z-j,er=[],_r=0;_r<g.length-1;_r++){for(var Ir=g[_r],un=g[_r+1],tn=Ir.dist(un),gn=un.angleTo(Ir);Ve+j<Ue+tn;){Ve+=j;var bn=(Ve-Ue)/tn,hn=va(Ir.x,un.x,bn),Ln=va(Ir.y,un.y,bn);if(hn>=0&&hn<le&&Ln>=0&&Ln<le&&Ve-we>=0&&Ve+we<=Pe){var Un=new Nc(hn,Ln,gn,_r);Un._round(),(!st||op(g,Un,wt,st,pt))&&er.push(Un)}}Ue+=tn}return!Jt&&!er.length&&!Rt&&(er=cp(g,Ue/2,j,st,pt,wt,Rt,!0,le)),er}function fp(g,z,j,st,pt){for(var wt=[],Rt=0;Rt<g.length;Rt++)for(var Jt=g[Rt],le=void 0,we=0;we<Jt.length-1;we++){var Pe=Jt[we],Ue=Jt[we+1];Pe.x<z&&Ue.x<z||(Pe.x<z?Pe=new r(z,Pe.y+(Ue.y-Pe.y)*((z-Pe.x)/(Ue.x-Pe.x)))._round():Ue.x<z&&(Ue=new r(z,Pe.y+(Ue.y-Pe.y)*((z-Pe.x)/(Ue.x-Pe.x)))._round()),!(Pe.y<j&&Ue.y<j)&&(Pe.y<j?Pe=new r(Pe.x+(Ue.x-Pe.x)*((j-Pe.y)/(Ue.y-Pe.y)),j)._round():Ue.y<j&&(Ue=new r(Pe.x+(Ue.x-Pe.x)*((j-Pe.y)/(Ue.y-Pe.y)),j)._round()),!(Pe.x>=st&&Ue.x>=st)&&(Pe.x>=st?Pe=new r(st,Pe.y+(Ue.y-Pe.y)*((st-Pe.x)/(Ue.x-Pe.x)))._round():Ue.x>=st&&(Ue=new r(st,Pe.y+(Ue.y-Pe.y)*((st-Pe.x)/(Ue.x-Pe.x)))._round()),!(Pe.y>=pt&&Ue.y>=pt)&&(Pe.y>=pt?Pe=new r(Pe.x+(Ue.x-Pe.x)*((pt-Pe.y)/(Ue.y-Pe.y)),pt)._round():Ue.y>=pt&&(Ue=new r(Pe.x+(Ue.x-Pe.x)*((pt-Pe.y)/(Ue.y-Pe.y)),pt)._round()),(!le||!Pe.equals(le[le.length-1]))&&(le=[Pe],wt.push(le)),le.push(Ue)))))}return wt}var jc=$o;function hp(g,z,j,st){var pt=[],wt=g.image,Rt=wt.pixelRatio,Jt=wt.paddedRect.w-2*jc,le=wt.paddedRect.h-2*jc,we=g.right-g.left,Pe=g.bottom-g.top,Ue=wt.stretchX||[[0,Jt]],Ve=wt.stretchY||[[0,le]],er=function(na,Ui){return na+Ui[1]-Ui[0]},_r=Ue.reduce(er,0),Ir=Ve.reduce(er,0),un=Jt-_r,tn=le-Ir,gn=0,bn=_r,hn=0,Ln=Ir,Un=0,Wn=un,Xn=0,fi=tn;if(wt.content&&st){var hi=wt.content;gn=Df(Ue,0,hi[0]),hn=Df(Ve,0,hi[1]),bn=Df(Ue,hi[0],hi[2]),Ln=Df(Ve,hi[1],hi[3]),Un=hi[0]-gn,Xn=hi[1]-hn,Wn=hi[2]-hi[0]-bn,fi=hi[3]-hi[1]-Ln}var gi=function(na,Ui,da,ua){var Ca=Bf(na.stretch-gn,bn,we,g.left),ao=Nf(na.fixed-Un,Wn,na.stretch,_r),Ya=Bf(Ui.stretch-hn,Ln,Pe,g.top),vo=Nf(Ui.fixed-Xn,fi,Ui.stretch,Ir),go=Bf(da.stretch-gn,bn,we,g.left),mo=Nf(da.fixed-Un,Wn,da.stretch,_r),Ja=Bf(ua.stretch-hn,Ln,Pe,g.top),Co=Nf(ua.fixed-Xn,fi,ua.stretch,Ir),Eo=new r(Ca,Ya),Wa=new r(go,Ya),Lo=new r(go,Ja),hs=new r(Ca,Ja),pu=new r(ao/Rt,vo/Rt),Vu=new r(mo/Rt,Co/Rt),Wu=z*Math.PI/180;if(Wu){var Xu=Math.sin(Wu),Xc=Math.cos(Wu),Hs=[Xc,-Xu,Xu,Xc];Eo._matMult(Hs),Wa._matMult(Hs),hs._matMult(Hs),Lo._matMult(Hs)}var Hf=na.stretch+na.fixed,wh=da.stretch+da.fixed,Vf=Ui.stretch+Ui.fixed,Ah=ua.stretch+ua.fixed,As={x:wt.paddedRect.x+jc+Hf,y:wt.paddedRect.y+jc+Vf,w:wh-Hf,h:Ah-Vf},Zc=Wn/Rt/we,Wf=fi/Rt/Pe;return{tl:Eo,tr:Wa,bl:hs,br:Lo,tex:As,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pu,pixelOffsetBR:Vu,minFontScaleX:Zc,minFontScaleY:Wf,isSDF:j}};if(!st||!wt.stretchX&&!wt.stretchY)pt.push(gi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Jt+1},{fixed:0,stretch:le+1}));else for(var bi=pp(Ue,un,_r),Ci=pp(Ve,tn,Ir),mi=0;mi<bi.length-1;mi++)for(var xi=bi[mi],ji=bi[mi+1],ra=0;ra<Ci.length-1;ra++){var ca=Ci[ra],Gi=Ci[ra+1];pt.push(gi(xi,ca,ji,Gi))}return pt}function Df(g,z,j){for(var st=0,pt=0,wt=g;pt<wt.length;pt+=1){var Rt=wt[pt];st+=Math.max(z,Math.min(j,Rt[1]))-Math.max(z,Math.min(j,Rt[0]))}return st}function pp(g,z,j){for(var st=[{fixed:-jc,stretch:0}],pt=0,wt=g;pt<wt.length;pt+=1){var Rt=wt[pt],Jt=Rt[0],le=Rt[1],we=st[st.length-1];st.push({fixed:Jt-we.stretch,stretch:we.stretch}),st.push({fixed:Jt-we.stretch,stretch:we.stretch+(le-Jt)})}return st.push({fixed:z+jc,stretch:j}),st}function Bf(g,z,j,st){return g/z*j+st}function Nf(g,z,j,st){return g-z*j/st}function Q0(g,z,j,st,pt,wt,Rt,Jt){for(var le=st.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,we=[],Pe=0,Ue=z.positionedLines;Pe<Ue.length;Pe+=1)for(var Ve=Ue[Pe],er=0,_r=Ve.positionedGlyphs;er<_r.length;er+=1){var Ir=_r[er];if(Ir.rect){var un=Ir.rect||{},tn=1,gn=Zh+tn,bn=!0,hn=1,Ln=0,Un=(pt||Jt)&&Ir.vertical,Wn=Ir.metrics.advance*Ir.scale/2;if(Jt&&z.verticalizable){var Xn=(Ir.scale-1)*io,fi=(io-Ir.metrics.width*Ir.scale)/2;Ln=Ve.lineOffset/2-(Ir.imageName?-fi:Xn)}if(Ir.imageName){var hi=Rt[Ir.imageName];bn=hi.sdf,hn=hi.pixelRatio,gn=$o/hn}var gi=pt?[Ir.x+Wn,Ir.y]:[0,0],bi=pt?[0,0]:[Ir.x+Wn+j[0],Ir.y+j[1]-Ln],Ci=[0,0];Un&&(Ci=bi,bi=[0,0]);var mi=(Ir.metrics.left-gn)*Ir.scale-Wn+bi[0],xi=(-Ir.metrics.top-gn)*Ir.scale+bi[1],ji=mi+un.w*Ir.scale/hn,ra=xi+un.h*Ir.scale/hn,ca=new r(mi,xi),Gi=new r(ji,xi),na=new r(mi,ra),Ui=new r(ji,ra);if(Un){var da=new r(-Wn,Wn-df),ua=-Math.PI/2,Ca=io/2-Wn,ao=Ir.imageName?Ca:0,Ya=new r(5-df-Ca,-ao),vo=new(Function.prototype.bind.apply(r,[null].concat(Ci)));ca._rotateAround(ua,da)._add(Ya)._add(vo),Gi._rotateAround(ua,da)._add(Ya)._add(vo),na._rotateAround(ua,da)._add(Ya)._add(vo),Ui._rotateAround(ua,da)._add(Ya)._add(vo)}if(le){var go=Math.sin(le),mo=Math.cos(le),Ja=[mo,-go,go,mo];ca._matMult(Ja),Gi._matMult(Ja),na._matMult(Ja),Ui._matMult(Ja)}var Co=new r(0,0),Eo=new r(0,0),Wa=0,Lo=0;we.push({tl:ca,tr:Gi,bl:na,br:Ui,tex:un,writingMode:z.writingMode,glyphOffset:gi,sectionIndex:Ir.sectionIndex,isSDF:bn,pixelOffsetTL:Co,pixelOffsetBR:Eo,minFontScaleX:Wa,minFontScaleY:Lo})}}return we}var jf=function(g,z,j,st,pt,wt,Rt,Jt,le,we){if(this.boxStartIndex=g.length,le){var Pe=wt.top,Ue=wt.bottom,Ve=wt.collisionPadding;Ve&&(Pe-=Ve[1],Ue+=Ve[3]);var er=Ue-Pe;er>0&&(er=Math.max(10,er),this.circleDiameter=er)}else{var _r=wt.top*Rt-Jt,Ir=wt.bottom*Rt+Jt,un=wt.left*Rt-Jt,tn=wt.right*Rt+Jt,gn=wt.collisionPadding;if(gn&&(un-=gn[0]*Rt,_r-=gn[1]*Rt,tn+=gn[2]*Rt,Ir+=gn[3]*Rt),we){var bn=new r(un,_r),hn=new r(tn,_r),Ln=new r(un,Ir),Un=new r(tn,Ir),Wn=we*Math.PI/180;bn._rotate(Wn),hn._rotate(Wn),Ln._rotate(Wn),Un._rotate(Wn),un=Math.min(bn.x,hn.x,Ln.x,Un.x),tn=Math.max(bn.x,hn.x,Ln.x,Un.x),_r=Math.min(bn.y,hn.y,Ln.y,Un.y),Ir=Math.max(bn.y,hn.y,Ln.y,Un.y)}g.emplaceBack(z.x,z.y,un,_r,tn,Ir,j,st,pt)}this.boxEndIndex=g.length},Uc=function(g,z){if(g===void 0&&(g=[]),z===void 0&&(z=t1),this.data=g,this.length=this.data.length,this.compare=z,this.length>0)for(var j=(this.length>>1)-1;j>=0;j--)this._down(j)};Uc.prototype.push=function(g){this.data.push(g),this.length++,this._up(this.length-1)},Uc.prototype.pop=function(){if(this.length!==0){var g=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),g}},Uc.prototype.peek=function(){return this.data[0]},Uc.prototype._up=function(g){for(var z=this,j=z.data,st=z.compare,pt=j[g];g>0;){var wt=g-1>>1,Rt=j[wt];if(st(pt,Rt)>=0)break;j[g]=Rt,g=wt}j[g]=pt},Uc.prototype._down=function(g){for(var z=this,j=z.data,st=z.compare,pt=this.length>>1,wt=j[g];g<pt;){var Rt=(g<<1)+1,Jt=j[Rt],le=Rt+1;if(le<this.length&&st(j[le],Jt)<0&&(Rt=le,Jt=j[le]),st(Jt,wt)>=0)break;j[g]=Jt,g=Rt}j[g]=wt};function t1(g,z){return g<z?-1:g>z?1:0}function e1(g,z,j){z===void 0&&(z=1),j===void 0&&(j=!1);for(var st=1/0,pt=1/0,wt=-1/0,Rt=-1/0,Jt=g[0],le=0;le<Jt.length;le++){var we=Jt[le];(!le||we.x<st)&&(st=we.x),(!le||we.y<pt)&&(pt=we.y),(!le||we.x>wt)&&(wt=we.x),(!le||we.y>Rt)&&(Rt=we.y)}var Pe=wt-st,Ue=Rt-pt,Ve=Math.min(Pe,Ue),er=Ve/2,_r=new Uc([],r1);if(Ve===0)return new r(st,pt);for(var Ir=st;Ir<wt;Ir+=Ve)for(var un=pt;un<Rt;un+=Ve)_r.push(new qc(Ir+er,un+er,er,g));for(var tn=i1(g),gn=_r.length;_r.length;){var bn=_r.pop();(bn.d>tn.d||!tn.d)&&(tn=bn,j&&console.log("found best %d after %d probes",Math.round(1e4*bn.d)/1e4,gn)),!(bn.max-tn.d<=z)&&(er=bn.h/2,_r.push(new qc(bn.p.x-er,bn.p.y-er,er,g)),_r.push(new qc(bn.p.x+er,bn.p.y-er,er,g)),_r.push(new qc(bn.p.x-er,bn.p.y+er,er,g)),_r.push(new qc(bn.p.x+er,bn.p.y+er,er,g)),gn+=4)}return j&&(console.log("num probes: "+gn),console.log("best distance: "+tn.d)),tn.p}function r1(g,z){return z.max-g.max}function qc(g,z,j,st){this.p=new r(g,z),this.h=j,this.d=n1(this.p,st),this.max=this.d+this.h*Math.SQRT2}function n1(g,z){for(var j=!1,st=1/0,pt=0;pt<z.length;pt++)for(var wt=z[pt],Rt=0,Jt=wt.length,le=Jt-1;Rt<Jt;le=Rt++){var we=wt[Rt],Pe=wt[le];we.y>g.y!=Pe.y>g.y&&g.x<(Pe.x-we.x)*(g.y-we.y)/(Pe.y-we.y)+we.x&&(j=!j),st=Math.min(st,Mo(g,we,Pe))}return(j?1:-1)*Math.sqrt(st)}function i1(g){for(var z=0,j=0,st=0,pt=g[0],wt=0,Rt=pt.length,Jt=Rt-1;wt<Rt;Jt=wt++){var le=pt[wt],we=pt[Jt],Pe=le.x*we.y-we.x*le.y;j+=(le.x+we.x)*Pe,st+=(le.y+we.y)*Pe,z+=Pe*3}return new qc(j/z,st/z,0,g)}var Gc=7,vh=Number.POSITIVE_INFINITY;function dp(g,z){function j(pt,wt){var Rt=0,Jt=0;wt<0&&(wt=0);var le=wt/Math.sqrt(2);switch(pt){case"top-right":case"top-left":Jt=le-Gc;break;case"bottom-right":case"bottom-left":Jt=-le+Gc;break;case"bottom":Jt=-wt+Gc;break;case"top":Jt=wt-Gc;break}switch(pt){case"top-right":case"bottom-right":Rt=-le;break;case"top-left":case"bottom-left":Rt=le;break;case"left":Rt=wt;break;case"right":Rt=-wt;break}return[Rt,Jt]}function st(pt,wt,Rt){var Jt=0,le=0;switch(wt=Math.abs(wt),Rt=Math.abs(Rt),pt){case"top-right":case"top-left":case"top":le=Rt-Gc;break;case"bottom-right":case"bottom-left":case"bottom":le=-Rt+Gc;break}switch(pt){case"top-right":case"bottom-right":case"right":Jt=-wt;break;case"top-left":case"bottom-left":case"left":Jt=wt;break}return[Jt,le]}return z[1]!==vh?st(g,z[0],z[1]):j(g,z[0])}function a1(g,z,j,st,pt,wt,Rt){g.createArrays();var Jt=512*g.overscaling;g.tilePixelRatio=ki/Jt,g.compareText={},g.iconsNeedLinear=!1;var le=g.layers[0].layout,we=g.layers[0]._unevaluatedLayout._values,Pe={};if(g.textSizeData.kind==="composite"){var Ue=g.textSizeData,Ve=Ue.minZoom,er=Ue.maxZoom;Pe.compositeTextSizes=[we["text-size"].possiblyEvaluate(new pi(Ve),Rt),we["text-size"].possiblyEvaluate(new pi(er),Rt)]}if(g.iconSizeData.kind==="composite"){var _r=g.iconSizeData,Ir=_r.minZoom,un=_r.maxZoom;Pe.compositeIconSizes=[we["icon-size"].possiblyEvaluate(new pi(Ir),Rt),we["icon-size"].possiblyEvaluate(new pi(un),Rt)]}Pe.layoutTextSize=we["text-size"].possiblyEvaluate(new pi(g.zoom+1),Rt),Pe.layoutIconSize=we["icon-size"].possiblyEvaluate(new pi(g.zoom+1),Rt),Pe.textMaxSize=we["text-size"].possiblyEvaluate(new pi(18));for(var tn=le.get("text-line-height")*io,gn=le.get("text-rotation-alignment")==="map"&&le.get("symbol-placement")!=="point",bn=le.get("text-keep-upright"),hn=le.get("text-size"),Ln=function(){var Xn=Wn[Un],fi=le.get("text-font").evaluate(Xn,{},Rt).join(","),hi=hn.evaluate(Xn,{},Rt),gi=Pe.layoutTextSize.evaluate(Xn,{},Rt),bi=Pe.layoutIconSize.evaluate(Xn,{},Rt),Ci={horizontal:{},vertical:void 0},mi=Xn.text,xi=[0,0];if(mi){var ji=mi.toString(),ra=le.get("text-letter-spacing").evaluate(Xn,{},Rt)*io,ca=br(ji)?ra:0,Gi=le.get("text-anchor").evaluate(Xn,{},Rt),na=le.get("text-variable-anchor");if(!na){var Ui=le.get("text-radial-offset").evaluate(Xn,{},Rt);Ui?xi=dp(Gi,[Ui*io,vh]):xi=le.get("text-offset").evaluate(Xn,{},Rt).map(function(pu){return pu*io})}var da=gn?"center":le.get("text-justify").evaluate(Xn,{},Rt),ua=le.get("symbol-placement"),Ca=ua==="point"?le.get("text-max-width").evaluate(Xn,{},Rt)*io:0,ao=function(){g.allowVerticalPlacement&&Xe(ji)&&(Ci.vertical=Ff(mi,z,j,pt,fi,Ca,tn,Gi,"left",ca,xi,fs.vertical,!0,ua,gi,hi))};if(!gn&&na){for(var Ya=da==="auto"?na.map(function(pu){return gh(pu)}):[da],vo=!1,go=0;go<Ya.length;go++){var mo=Ya[go];if(!Ci.horizontal[mo])if(vo)Ci.horizontal[mo]=Ci.horizontal[0];else{var Ja=Ff(mi,z,j,pt,fi,Ca,tn,"center",mo,ca,xi,fs.horizontal,!1,ua,gi,hi);Ja&&(Ci.horizontal[mo]=Ja,vo=Ja.positionedLines.length===1)}}ao()}else{da==="auto"&&(da=gh(Gi));var Co=Ff(mi,z,j,pt,fi,Ca,tn,Gi,da,ca,xi,fs.horizontal,!1,ua,gi,hi);Co&&(Ci.horizontal[da]=Co),ao(),Xe(ji)&&gn&&bn&&(Ci.vertical=Ff(mi,z,j,pt,fi,Ca,tn,Gi,da,ca,xi,fs.vertical,!1,ua,gi,hi))}}var Eo=void 0,Wa=!1;if(Xn.icon&&Xn.icon.name){var Lo=st[Xn.icon.name];Lo&&(Eo=Z0(pt[Xn.icon.name],le.get("icon-offset").evaluate(Xn,{},Rt),le.get("icon-anchor").evaluate(Xn,{},Rt)),Wa=Lo.sdf,g.sdfIcons===void 0?g.sdfIcons=Lo.sdf:g.sdfIcons!==Lo.sdf&&R("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Lo.pixelRatio!==g.pixelRatio||le.get("icon-rotate").constantOr(1)!==0)&&(g.iconsNeedLinear=!0))}var hs=gp(Ci.horizontal)||Ci.vertical;g.iconsInText=hs?hs.iconsInText:!1,(hs||Eo)&&o1(g,Xn,Ci,Eo,st,Pe,gi,bi,xi,Wa,Rt)},Un=0,Wn=g.features;Un<Wn.length;Un+=1)Ln();wt&&g.generateCollisionDebugBuffers()}function gh(g){switch(g){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function o1(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe){var Ue=wt.textMaxSize.evaluate(z,{});Ue===void 0&&(Ue=Rt);var Ve=g.layers[0].layout,er=Ve.get("icon-offset").evaluate(z,{},Pe),_r=gp(j.horizontal),Ir=24,un=Rt/Ir,tn=g.tilePixelRatio*un,gn=g.tilePixelRatio*Ue/Ir,bn=g.tilePixelRatio*Jt,hn=g.tilePixelRatio*Ve.get("symbol-spacing"),Ln=Ve.get("text-padding")*g.tilePixelRatio,Un=Ve.get("icon-padding")*g.tilePixelRatio,Wn=Ve.get("text-max-angle")/180*Math.PI,Xn=Ve.get("text-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",fi=Ve.get("icon-rotation-alignment")==="map"&&Ve.get("symbol-placement")!=="point",hi=Ve.get("symbol-placement"),gi=hn/2,bi=Ve.get("icon-text-fit"),Ci;st&&bi!=="none"&&(g.allowVerticalPlacement&&j.vertical&&(Ci=np(st,j.vertical,bi,Ve.get("icon-text-fit-padding"),er,un)),_r&&(st=np(st,_r,bi,Ve.get("icon-text-fit-padding"),er,un)));var mi=function(Xc,Hs){Hs.x<0||Hs.x>=ki||Hs.y<0||Hs.y>=ki||s1(g,Hs,Xc,j,st,pt,Ci,g.layers[0],g.collisionBoxArray,z.index,z.sourceLayerIndex,g.index,tn,Ln,Xn,le,bn,Un,fi,er,z,wt,we,Pe,Rt)};if(hi==="line")for(var xi=0,ji=fp(z.geometry,0,0,ki,ki);xi<ji.length;xi+=1)for(var ra=ji[xi],ca=$0(ra,hn,Wn,j.vertical||_r,st,Ir,gn,g.overscaling,ki),Gi=0,na=ca;Gi<na.length;Gi+=1){var Ui=na[Gi],da=_r;(!da||!l1(g,da.text,gi,Ui))&&mi(ra,Ui)}else if(hi==="line-center")for(var ua=0,Ca=z.geometry;ua<Ca.length;ua+=1){var ao=Ca[ua];if(ao.length>1){var Ya=J0(ao,Wn,j.vertical||_r,st,Ir,gn);Ya&&mi(ao,Ya)}}else if(z.type==="Polygon")for(var vo=0,go=oh(z.geometry,0);vo<go.length;vo+=1){var mo=go[vo],Ja=e1(mo,16);mi(mo[0],new Nc(Ja.x,Ja.y,0))}else if(z.type==="LineString")for(var Co=0,Eo=z.geometry;Co<Eo.length;Co+=1){var Wa=Eo[Co];mi(Wa,new Nc(Wa[0].x,Wa[0].y,0))}else if(z.type==="Point")for(var Lo=0,hs=z.geometry;Lo<hs.length;Lo+=1)for(var pu=hs[Lo],Vu=0,Wu=pu;Vu<Wu.length;Vu+=1){var Xu=Wu[Vu];mi([Xu],new Nc(Xu.x,Xu.y,0))}}var vf=255,Yu=vf*yl;function vp(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r){var Ir=Q0(z,j,Jt,pt,wt,Rt,st,g.allowVerticalPlacement),un=g.textSizeData,tn=null;un.kind==="source"?(tn=[yl*pt.layout.get("text-size").evaluate(Rt,{})],tn[0]>Yu&&R(g.layerIds[0]+': Value for "text-size" is >= '+vf+'. Reduce your "text-size".')):un.kind==="composite"&&(tn=[yl*er.compositeTextSizes[0].evaluate(Rt,{},_r),yl*er.compositeTextSizes[1].evaluate(Rt,{},_r)],(tn[0]>Yu||tn[1]>Yu)&&R(g.layerIds[0]+': Value for "text-size" is >= '+vf+'. Reduce your "text-size".')),g.addSymbols(g.text,Ir,tn,Jt,wt,Rt,we,z,le.lineStartIndex,le.lineLength,Ve,_r);for(var gn=0,bn=Pe;gn<bn.length;gn+=1){var hn=bn[gn];Ue[hn]=g.text.placedSymbolArray.length-1}return Ir.length*4}function gp(g){for(var z in g)return g[z];return null}function s1(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve,er,_r,Ir,un,tn,gn,bn,hn,Ln,Un,Wn,Xn){var fi,hi=g.addToLineVertexArray(z,j),gi,bi,Ci,mi,xi=0,ji=0,ra=0,ca=0,Gi=-1,na=-1,Ui={},da=kt(""),ua=0,Ca=0;if(Jt._unevaluatedLayout.getValue("text-radial-offset")===void 0?(fi=Jt.layout.get("text-offset").evaluate(hn,{},Wn).map(function(yf){return yf*io}),ua=fi[0],Ca=fi[1]):(ua=Jt.layout.get("text-radial-offset").evaluate(hn,{},Wn)*io,Ca=vh),g.allowVerticalPlacement&&st.vertical){var ao=Jt.layout.get("text-rotate").evaluate(hn,{},Wn),Ya=ao+90,vo=st.vertical;Ci=new jf(le,z,we,Pe,Ue,vo,Ve,er,_r,Ya),Rt&&(mi=new jf(le,z,we,Pe,Ue,Rt,un,tn,_r,Ya))}if(pt){var go=Jt.layout.get("icon-rotate").evaluate(hn,{}),mo=Jt.layout.get("icon-text-fit")!=="none",Ja=hp(pt,go,Un,mo),Co=Rt?hp(Rt,go,Un,mo):void 0;bi=new jf(le,z,we,Pe,Ue,pt,un,tn,!1,go),xi=Ja.length*4;var Eo=g.iconSizeData,Wa=null;Eo.kind==="source"?(Wa=[yl*Jt.layout.get("icon-size").evaluate(hn,{})],Wa[0]>Yu&&R(g.layerIds[0]+': Value for "icon-size" is >= '+vf+'. Reduce your "icon-size".')):Eo.kind==="composite"&&(Wa=[yl*Ln.compositeIconSizes[0].evaluate(hn,{},Wn),yl*Ln.compositeIconSizes[1].evaluate(hn,{},Wn)],(Wa[0]>Yu||Wa[1]>Yu)&&R(g.layerIds[0]+': Value for "icon-size" is >= '+vf+'. Reduce your "icon-size".')),g.addSymbols(g.icon,Ja,Wa,bn,gn,hn,!1,z,hi.lineStartIndex,hi.lineLength,-1,Wn),Gi=g.icon.placedSymbolArray.length-1,Co&&(ji=Co.length*4,g.addSymbols(g.icon,Co,Wa,bn,gn,hn,fs.vertical,z,hi.lineStartIndex,hi.lineLength,-1,Wn),na=g.icon.placedSymbolArray.length-1)}for(var Lo in st.horizontal){var hs=st.horizontal[Lo];if(!gi){da=kt(hs.text);var pu=Jt.layout.get("text-rotate").evaluate(hn,{},Wn);gi=new jf(le,z,we,Pe,Ue,hs,Ve,er,_r,pu)}var Vu=hs.positionedLines.length===1;if(ra+=vp(g,z,hs,wt,Jt,_r,hn,Ir,hi,st.vertical?fs.horizontal:fs.horizontalOnly,Vu?Object.keys(st.horizontal):[Lo],Ui,Gi,Ln,Wn),Vu)break}st.vertical&&(ca+=vp(g,z,st.vertical,wt,Jt,_r,hn,Ir,hi,fs.vertical,["vertical"],Ui,na,Ln,Wn));var Wu=gi?gi.boxStartIndex:g.collisionBoxArray.length,Xu=gi?gi.boxEndIndex:g.collisionBoxArray.length,Xc=Ci?Ci.boxStartIndex:g.collisionBoxArray.length,Hs=Ci?Ci.boxEndIndex:g.collisionBoxArray.length,Hf=bi?bi.boxStartIndex:g.collisionBoxArray.length,wh=bi?bi.boxEndIndex:g.collisionBoxArray.length,Vf=mi?mi.boxStartIndex:g.collisionBoxArray.length,Ah=mi?mi.boxEndIndex:g.collisionBoxArray.length,As=-1,Zc=function(yf,Op){return yf&&yf.circleDiameter?Math.max(yf.circleDiameter,Op):Op};As=Zc(gi,As),As=Zc(Ci,As),As=Zc(bi,As),As=Zc(mi,As);var Wf=As>-1?1:0;Wf&&(As*=Xn/io),g.glyphOffsetArray.length>=aa.MAX_GLYPHS&&R("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),hn.sortKey!==void 0&&g.addToSortKeyRanges(g.symbolInstances.length,hn.sortKey),g.symbolInstances.emplaceBack(z.x,z.y,Ui.right>=0?Ui.right:-1,Ui.center>=0?Ui.center:-1,Ui.left>=0?Ui.left:-1,Ui.vertical||-1,Gi,na,da,Wu,Xu,Xc,Hs,Hf,wh,Vf,Ah,we,ra,ca,xi,ji,Wf,0,Ve,ua,Ca,As)}function l1(g,z,j,st){var pt=g.compareText;if(!(z in pt))pt[z]=[];else for(var wt=pt[z],Rt=wt.length-1;Rt>=0;Rt--)if(st.dist(wt[Rt])<j)return!0;return pt[z].push(st),!1}var u1=Fc.VectorTileFeature.types,c1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uf(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue,Ve){var er=Jt?Math.min(Yu,Math.round(Jt[0])):0,_r=Jt?Math.min(Yu,Math.round(Jt[1])):0;g.emplaceBack(z,j,Math.round(st*32),Math.round(pt*32),wt,Rt,(er<<1)+(le?1:0),_r,we*16,Pe*16,Ue*256,Ve*256)}function mh(g,z,j){g.emplaceBack(z.x,z.y,j),g.emplaceBack(z.x,z.y,j),g.emplaceBack(z.x,z.y,j),g.emplaceBack(z.x,z.y,j)}function f1(g){for(var z=0,j=g.sections;z<j.length;z+=1){var st=j[z];if(Xr(st.text))return!0}return!1}var Yc=function(g){this.layoutVertexArray=new Dl,this.indexArray=new pl,this.programConfigurations=g,this.segments=new Na,this.dynamicLayoutVertexArray=new Jc,this.opacityVertexArray=new $c,this.placedSymbolArray=new ef};Yc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Yc.prototype.upload=function(g,z,j,st){this.isEmpty()||(j&&(this.layoutVertexBuffer=g.createVertexBuffer(this.layoutVertexArray,c0.members),this.indexBuffer=g.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=g.createVertexBuffer(this.dynamicLayoutVertexArray,f0.members,!0),this.opacityVertexBuffer=g.createVertexBuffer(this.opacityVertexArray,c1,!0),this.opacityVertexBuffer.itemSize=1),(j||st)&&this.programConfigurations.upload(g))},Yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Lt("SymbolBuffers",Yc);var gf=function(g,z,j){this.layoutVertexArray=new g,this.layoutAttributes=z,this.indexArray=new j,this.segments=new Na,this.collisionVertexArray=new Fo};gf.prototype.upload=function(g){this.layoutVertexBuffer=g.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=g.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=g.createVertexBuffer(this.collisionVertexArray,h0.members,!0)},gf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Lt("CollisionBuffers",gf);var aa=function(g){this.collisionBoxArray=g.collisionBoxArray,this.zoom=g.zoom,this.overscaling=g.overscaling,this.layers=g.layers,this.layerIds=this.layers.map(function(Jt){return Jt.id}),this.index=g.index,this.pixelRatio=g.pixelRatio,this.sourceLayerIndex=g.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ul([]),this.placementViewportMatrix=Ul([]);var z=this.layers[0],j=z._unevaluatedLayout._values;this.textSizeData=dh(this.zoom,j["text-size"]),this.iconSizeData=dh(this.zoom,j["icon-size"]);var st=this.layers[0].layout,pt=st.get("symbol-sort-key"),wt=st.get("symbol-z-order");this.canOverlap=st.get("text-allow-overlap")||st.get("icon-allow-overlap")||st.get("text-ignore-placement")||st.get("icon-ignore-placement"),this.sortFeaturesByKey=wt!=="viewport-y"&&pt.constantOr(1)!==void 0;var Rt=wt==="viewport-y"||wt==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Rt&&this.canOverlap,st.get("symbol-placement")==="point"&&(this.writingModes=st.get("text-writing-mode").map(function(Jt){return fs[Jt]})),this.stateDependentLayerIds=this.layers.filter(function(Jt){return Jt.isStateDependent()}).map(function(Jt){return Jt.id}),this.sourceID=g.sourceID};aa.prototype.createArrays=function(){this.text=new Yc(new li(this.layers,this.zoom,function(g){return/^text/.test(g)})),this.icon=new Yc(new li(this.layers,this.zoom,function(g){return/^icon/.test(g)})),this.glyphOffsetArray=new Af,this.lineVertexArray=new _s,this.symbolInstances=new wf},aa.prototype.calculateGlyphDependencies=function(g,z,j,st,pt){for(var wt=0;wt<g.length;wt++)if(z[g.charCodeAt(wt)]=!0,(j||st)&&pt){var Rt=ff[g.charAt(wt)];Rt&&(z[Rt.charCodeAt(0)]=!0)}},aa.prototype.populate=function(g,z,j){var st=this.layers[0],pt=st.layout,wt=pt.get("text-font"),Rt=pt.get("text-field"),Jt=pt.get("icon-image"),le=(Rt.value.kind!=="constant"||Rt.value.value instanceof Ea&&!Rt.value.value.isEmpty()||Rt.value.value.toString().length>0)&&(wt.value.kind!=="constant"||wt.value.value.length>0),we=Jt.value.kind!=="constant"||!!Jt.value.value||Object.keys(Jt.parameters).length>0,Pe=pt.get("symbol-sort-key");if(this.features=[],!(!le&&!we)){for(var Ue=z.iconDependencies,Ve=z.glyphDependencies,er=z.availableImages,_r=new pi(this.zoom),Ir=0,un=g;Ir<un.length;Ir+=1){var tn=un[Ir],gn=tn.feature,bn=tn.id,hn=tn.index,Ln=tn.sourceLayerIndex,Un=st._featureFilter.needGeometry,Wn=Bi(gn,Un);if(st._featureFilter.filter(_r,Wn,j)){Un||(Wn.geometry=Ki(gn));var Xn=void 0;if(le){var fi=st.getValueAndResolveTokens("text-field",Wn,j,er),hi=Ea.factory(fi);f1(hi)&&(this.hasRTLText=!0),(!this.hasRTLText||Ei()==="unavailable"||this.hasRTLText&&Gn.isParsed())&&(Xn=v0(hi,st,Wn))}var gi=void 0;if(we){var bi=st.getValueAndResolveTokens("icon-image",Wn,j,er);bi instanceof Xa?gi=bi:gi=Xa.fromString(bi)}if(!(!Xn&&!gi)){var Ci=this.sortFeaturesByKey?Pe.evaluate(Wn,{},j):void 0,mi={id:bn,text:Xn,icon:gi,index:hn,sourceLayerIndex:Ln,geometry:Wn.geometry,properties:gn.properties,type:u1[gn.type],sortKey:Ci};if(this.features.push(mi),gi&&(Ue[gi.name]=!0),Xn){var xi=wt.evaluate(Wn,{},j).join(","),ji=pt.get("text-rotation-alignment")==="map"&&pt.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(fs.vertical)>=0;for(var ra=0,ca=Xn.sections;ra<ca.length;ra+=1){var Gi=ca[ra];if(Gi.image)Ue[Gi.image.name]=!0;else{var na=Xe(Xn.toString()),Ui=Gi.fontStack||xi,da=Ve[Ui]=Ve[Ui]||{};this.calculateGlyphDependencies(Gi.text,da,ji,this.allowVerticalPlacement,na)}}}}}}pt.get("symbol-placement")==="line"&&(this.features=g0(this.features)),this.sortFeaturesByKey&&this.features.sort(function(ua,Ca){return ua.sortKey-Ca.sortKey})}},aa.prototype.update=function(g,z,j){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(g,z,this.layers,j),this.icon.programConfigurations.updatePaintArrays(g,z,this.layers,j))},aa.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},aa.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},aa.prototype.upload=function(g){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(g),this.iconCollisionBox.upload(g)),this.text.upload(g,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(g,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},aa.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},aa.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},aa.prototype.addToLineVertexArray=function(g,z){var j=this.lineVertexArray.length;if(g.segment!==void 0){for(var st=g.dist(z[g.segment+1]),pt=g.dist(z[g.segment]),wt={},Rt=g.segment+1;Rt<z.length;Rt++)wt[Rt]={x:z[Rt].x,y:z[Rt].y,tileUnitDistanceFromAnchor:st},Rt<z.length-1&&(st+=z[Rt+1].dist(z[Rt]));for(var Jt=g.segment||0;Jt>=0;Jt--)wt[Jt]={x:z[Jt].x,y:z[Jt].y,tileUnitDistanceFromAnchor:pt},Jt>0&&(pt+=z[Jt-1].dist(z[Jt]));for(var le=0;le<z.length;le++){var we=wt[le];this.lineVertexArray.emplaceBack(we.x,we.y,we.tileUnitDistanceFromAnchor)}}return{lineStartIndex:j,lineLength:this.lineVertexArray.length-j}},aa.prototype.addSymbols=function(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe,Ue){for(var Ve=g.indexArray,er=g.layoutVertexArray,_r=g.segments.prepareSegment(4*z.length,er,Ve,this.canOverlap?wt.sortKey:void 0),Ir=this.glyphOffsetArray.length,un=_r.vertexLength,tn=this.allowVerticalPlacement&&Rt===fs.vertical?Math.PI/2:0,gn=wt.text&&wt.text.sections,bn=0;bn<z.length;bn++){var hn=z[bn],Ln=hn.tl,Un=hn.tr,Wn=hn.bl,Xn=hn.br,fi=hn.tex,hi=hn.pixelOffsetTL,gi=hn.pixelOffsetBR,bi=hn.minFontScaleX,Ci=hn.minFontScaleY,mi=hn.glyphOffset,xi=hn.isSDF,ji=hn.sectionIndex,ra=_r.vertexLength,ca=mi[1];Uf(er,Jt.x,Jt.y,Ln.x,ca+Ln.y,fi.x,fi.y,j,xi,hi.x,hi.y,bi,Ci),Uf(er,Jt.x,Jt.y,Un.x,ca+Un.y,fi.x+fi.w,fi.y,j,xi,gi.x,hi.y,bi,Ci),Uf(er,Jt.x,Jt.y,Wn.x,ca+Wn.y,fi.x,fi.y+fi.h,j,xi,hi.x,gi.y,bi,Ci),Uf(er,Jt.x,Jt.y,Xn.x,ca+Xn.y,fi.x+fi.w,fi.y+fi.h,j,xi,gi.x,gi.y,bi,Ci),mh(g.dynamicLayoutVertexArray,Jt,tn),Ve.emplaceBack(ra,ra+1,ra+2),Ve.emplaceBack(ra+1,ra+2,ra+3),_r.vertexLength+=4,_r.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mi[0]),(bn===z.length-1||ji!==z[bn+1].sectionIndex)&&g.programConfigurations.populatePaintArrays(er.length,wt,wt.index,{},Ue,gn&&gn[ji])}g.placedSymbolArray.emplaceBack(Jt.x,Jt.y,Ir,this.glyphOffsetArray.length-Ir,un,le,we,Jt.segment,j?j[0]:0,j?j[1]:0,st[0],st[1],Rt,0,!1,0,Pe)},aa.prototype._addCollisionDebugVertex=function(g,z,j,st,pt,wt){return z.emplaceBack(0,0),g.emplaceBack(j.x,j.y,st,pt,Math.round(wt.x),Math.round(wt.y))},aa.prototype.addCollisionDebugVertices=function(g,z,j,st,pt,wt,Rt){var Jt=pt.segments.prepareSegment(4,pt.layoutVertexArray,pt.indexArray),le=Jt.vertexLength,we=pt.layoutVertexArray,Pe=pt.collisionVertexArray,Ue=Rt.anchorX,Ve=Rt.anchorY;this._addCollisionDebugVertex(we,Pe,wt,Ue,Ve,new r(g,z)),this._addCollisionDebugVertex(we,Pe,wt,Ue,Ve,new r(j,z)),this._addCollisionDebugVertex(we,Pe,wt,Ue,Ve,new r(j,st)),this._addCollisionDebugVertex(we,Pe,wt,Ue,Ve,new r(g,st)),Jt.vertexLength+=4;var er=pt.indexArray;er.emplaceBack(le,le+1),er.emplaceBack(le+1,le+2),er.emplaceBack(le+2,le+3),er.emplaceBack(le+3,le),Jt.primitiveLength+=4},aa.prototype.addDebugCollisionBoxes=function(g,z,j,st){for(var pt=g;pt<z;pt++){var wt=this.collisionBoxArray.get(pt),Rt=wt.x1,Jt=wt.y1,le=wt.x2,we=wt.y2;this.addCollisionDebugVertices(Rt,Jt,le,we,st?this.textCollisionBox:this.iconCollisionBox,wt.anchorPoint,j)}},aa.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gf(Mc,Yh.members,gc),this.iconCollisionBox=new gf(Mc,Yh.members,gc);for(var g=0;g<this.symbolInstances.length;g++){var z=this.symbolInstances.get(g);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},aa.prototype._deserializeCollisionBoxesForSymbol=function(g,z,j,st,pt,wt,Rt,Jt,le){for(var we={},Pe=z;Pe<j;Pe++){var Ue=g.get(Pe);we.textBox={x1:Ue.x1,y1:Ue.y1,x2:Ue.x2,y2:Ue.y2,anchorPointX:Ue.anchorPointX,anchorPointY:Ue.anchorPointY},we.textFeatureIndex=Ue.featureIndex;break}for(var Ve=st;Ve<pt;Ve++){var er=g.get(Ve);we.verticalTextBox={x1:er.x1,y1:er.y1,x2:er.x2,y2:er.y2,anchorPointX:er.anchorPointX,anchorPointY:er.anchorPointY},we.verticalTextFeatureIndex=er.featureIndex;break}for(var _r=wt;_r<Rt;_r++){var Ir=g.get(_r);we.iconBox={x1:Ir.x1,y1:Ir.y1,x2:Ir.x2,y2:Ir.y2,anchorPointX:Ir.anchorPointX,anchorPointY:Ir.anchorPointY},we.iconFeatureIndex=Ir.featureIndex;break}for(var un=Jt;un<le;un++){var tn=g.get(un);we.verticalIconBox={x1:tn.x1,y1:tn.y1,x2:tn.x2,y2:tn.y2,anchorPointX:tn.anchorPointX,anchorPointY:tn.anchorPointY},we.verticalIconFeatureIndex=tn.featureIndex;break}return we},aa.prototype.deserializeCollisionBoxes=function(g){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var j=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(g,j.textBoxStartIndex,j.textBoxEndIndex,j.verticalTextBoxStartIndex,j.verticalTextBoxEndIndex,j.iconBoxStartIndex,j.iconBoxEndIndex,j.verticalIconBoxStartIndex,j.verticalIconBoxEndIndex))}},aa.prototype.hasTextData=function(){return this.text.segments.get().length>0},aa.prototype.hasIconData=function(){return this.icon.segments.get().length>0},aa.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},aa.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},aa.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},aa.prototype.addIndicesForPlacedSymbol=function(g,z){for(var j=g.placedSymbolArray.get(z),st=j.vertexStartIndex+j.numGlyphs*4,pt=j.vertexStartIndex;pt<st;pt+=4)g.indexArray.emplaceBack(pt,pt+1,pt+2),g.indexArray.emplaceBack(pt+1,pt+2,pt+3)},aa.prototype.getSortedSymbolIndexes=function(g){if(this.sortedAngle===g&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var z=Math.sin(g),j=Math.cos(g),st=[],pt=[],wt=[],Rt=0;Rt<this.symbolInstances.length;++Rt){wt.push(Rt);var Jt=this.symbolInstances.get(Rt);st.push(Math.round(z*Jt.anchorX+j*Jt.anchorY)|0),pt.push(Jt.featureIndex)}return wt.sort(function(le,we){return st[le]-st[we]||pt[we]-pt[le]}),wt},aa.prototype.addToSortKeyRanges=function(g,z){var j=this.sortKeyRanges[this.sortKeyRanges.length-1];j&&j.sortKey===z?j.symbolInstanceEnd=g+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:g,symbolInstanceEnd:g+1})},aa.prototype.sortFeatures=function(g){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==g&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(g),this.sortedAngle=g,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var j=0,st=this.symbolInstanceIndexes;j<st.length;j+=1){var pt=st[j],wt=this.symbolInstances.get(pt);this.featureSortOrder.push(wt.featureIndex),[wt.rightJustifiedTextSymbolIndex,wt.centerJustifiedTextSymbolIndex,wt.leftJustifiedTextSymbolIndex].forEach(function(Rt,Jt,le){Rt>=0&&le.indexOf(Rt)===Jt&&z.addIndicesForPlacedSymbol(z.text,Rt)}),wt.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,wt.verticalPlacedTextSymbolIndex),wt.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,wt.placedIconSymbolIndex),wt.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,wt.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Lt("SymbolBucket",aa,{omit:["layers","collisionBoxArray","features","compareText"]}),aa.MAX_GLYPHS=65535,aa.addDynamicAttributes=mh;function h1(g,z){return z.replace(/{([^{}]+)}/g,function(j,st){return st in g?String(g[st]):""})}var p1=new Zi({"symbol-placement":new Qn(gr.layout_symbol["symbol-placement"]),"symbol-spacing":new Qn(gr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qn(gr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vi(gr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qn(gr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qn(gr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qn(gr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qn(gr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qn(gr.layout_symbol["icon-rotation-alignment"]),"icon-size":new vi(gr.layout_symbol["icon-size"]),"icon-text-fit":new Qn(gr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qn(gr.layout_symbol["icon-text-fit-padding"]),"icon-image":new vi(gr.layout_symbol["icon-image"]),"icon-rotate":new vi(gr.layout_symbol["icon-rotate"]),"icon-padding":new Qn(gr.layout_symbol["icon-padding"]),"icon-keep-upright":new Qn(gr.layout_symbol["icon-keep-upright"]),"icon-offset":new vi(gr.layout_symbol["icon-offset"]),"icon-anchor":new vi(gr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qn(gr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qn(gr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qn(gr.layout_symbol["text-rotation-alignment"]),"text-field":new vi(gr.layout_symbol["text-field"]),"text-font":new vi(gr.layout_symbol["text-font"]),"text-size":new vi(gr.layout_symbol["text-size"]),"text-max-width":new vi(gr.layout_symbol["text-max-width"]),"text-line-height":new Qn(gr.layout_symbol["text-line-height"]),"text-letter-spacing":new vi(gr.layout_symbol["text-letter-spacing"]),"text-justify":new vi(gr.layout_symbol["text-justify"]),"text-radial-offset":new vi(gr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qn(gr.layout_symbol["text-variable-anchor"]),"text-anchor":new vi(gr.layout_symbol["text-anchor"]),"text-max-angle":new Qn(gr.layout_symbol["text-max-angle"]),"text-writing-mode":new Qn(gr.layout_symbol["text-writing-mode"]),"text-rotate":new vi(gr.layout_symbol["text-rotate"]),"text-padding":new Qn(gr.layout_symbol["text-padding"]),"text-keep-upright":new Qn(gr.layout_symbol["text-keep-upright"]),"text-transform":new vi(gr.layout_symbol["text-transform"]),"text-offset":new vi(gr.layout_symbol["text-offset"]),"text-allow-overlap":new Qn(gr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qn(gr.layout_symbol["text-ignore-placement"]),"text-optional":new Qn(gr.layout_symbol["text-optional"])}),d1=new Zi({"icon-opacity":new vi(gr.paint_symbol["icon-opacity"]),"icon-color":new vi(gr.paint_symbol["icon-color"]),"icon-halo-color":new vi(gr.paint_symbol["icon-halo-color"]),"icon-halo-width":new vi(gr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vi(gr.paint_symbol["icon-halo-blur"]),"icon-translate":new Qn(gr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qn(gr.paint_symbol["icon-translate-anchor"]),"text-opacity":new vi(gr.paint_symbol["text-opacity"]),"text-color":new vi(gr.paint_symbol["text-color"],{runtimeType:_n,getOverride:function(g){return g.textColor},hasOverride:function(g){return!!g.textColor}}),"text-halo-color":new vi(gr.paint_symbol["text-halo-color"]),"text-halo-width":new vi(gr.paint_symbol["text-halo-width"]),"text-halo-blur":new vi(gr.paint_symbol["text-halo-blur"]),"text-translate":new Qn(gr.paint_symbol["text-translate"]),"text-translate-anchor":new Qn(gr.paint_symbol["text-translate-anchor"])}),yh={paint:d1,layout:p1},Hc=function(g){this.type=g.property.overrides?g.property.overrides.runtimeType:Pr,this.defaultValue=g};Hc.prototype.evaluate=function(g){if(g.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(g.formattedSection))return z.getOverride(g.formattedSection)}return g.feature&&g.featureState?this.defaultValue.evaluate(g.feature,g.featureState):this.defaultValue.property.specification.default},Hc.prototype.eachChild=function(g){if(!this.defaultValue.isConstant()){var z=this.defaultValue.value;g(z._styleExpression.expression)}},Hc.prototype.outputDefined=function(){return!1},Hc.prototype.serialize=function(){return null},Lt("FormatSectionOverride",Hc,{omit:["defaultValue"]});var v1=function(g){function z(j){g.call(this,j,yh)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.recalculate=function(j,st){if(g.prototype.recalculate.call(this,j,st),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var pt=this.layout.get("text-writing-mode");if(pt){for(var wt=[],Rt=0,Jt=pt;Rt<Jt.length;Rt+=1){var le=Jt[Rt];wt.indexOf(le)<0&&wt.push(le)}this.layout._values["text-writing-mode"]=wt}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(j,st,pt,wt){var Rt=this.layout.get(j).evaluate(st,{},pt,wt),Jt=this._unevaluatedLayout._values[j];return!Jt.isDataDriven()&&!il(Jt.value)&&Rt?h1(st.properties,Rt):Rt},z.prototype.createBucket=function(j){return new aa(j)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var j=0,st=yh.paint.overridableProperties;j<st.length;j+=1){var pt=st[j];if(z.hasPaintOverride(this.layout,pt)){var wt=this.paint.get(pt),Rt=new Hc(wt),Jt=new os(Rt,wt.property.specification),le=null;wt.value.kind==="constant"||wt.value.kind==="source"?le=new Ma("source",Jt):le=new Io("composite",Jt,wt.value.zoomStops,wt.value._interpolationType),this.paint._values[pt]=new sa(wt.property,le,wt.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(j,st,pt){return!this.layout||st.isDataDriven()||pt.isDataDriven()?!1:z.hasPaintOverride(this.layout,j)},z.hasPaintOverride=function(j,st){var pt=j.get("text-field"),wt=yh.paint.properties[st],Rt=!1,Jt=function(Pe){for(var Ue=0,Ve=Pe;Ue<Ve.length;Ue+=1){var er=Ve[Ue];if(wt.overrides&&wt.overrides.hasOverride(er)){Rt=!0;return}}};if(pt.value.kind==="constant"&&pt.value.value instanceof Ea)Jt(pt.value.value.sections);else if(pt.value.kind==="source"){var le=function(Pe){if(!Rt)if(Pe instanceof ba&&ma(Pe.value)===ai){var Ue=Pe.value;Jt(Ue.sections)}else Pe instanceof Fa?Jt(Pe.sections):Pe.eachChild(le)},we=pt.value;we._styleExpression&&le(we._styleExpression.expression)}return Rt},z}(wa),g1=new Zi({"background-color":new Qn(gr.paint_background["background-color"]),"background-pattern":new uo(gr.paint_background["background-pattern"]),"background-opacity":new Qn(gr.paint_background["background-opacity"])}),m1={paint:g1},y1=function(g){function z(j){g.call(this,j,m1)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z}(wa),x1=new Zi({"raster-opacity":new Qn(gr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qn(gr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qn(gr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qn(gr.paint_raster["raster-brightness-max"]),"raster-saturation":new Qn(gr.paint_raster["raster-saturation"]),"raster-contrast":new Qn(gr.paint_raster["raster-contrast"]),"raster-resampling":new Qn(gr.paint_raster["raster-resampling"]),"raster-fade-duration":new Qn(gr.paint_raster["raster-fade-duration"])}),b1={paint:x1},_1=function(g){function z(j){g.call(this,j,b1)}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z}(wa);function w1(g){var z=[],j=g.id;return j===void 0&&z.push({message:"layers."+j+': missing required property "id"'}),g.render===void 0&&z.push({message:"layers."+j+': missing required method "render"'}),g.renderingMode&&g.renderingMode!=="2d"&&g.renderingMode!=="3d"&&z.push({message:"layers."+j+': property "renderingMode" must be either "2d" or "3d"'}),z}var A1=function(g){function z(j){g.call(this,j,{}),this.implementation=j}return g&&(z.__proto__=g),z.prototype=Object.create(g&&g.prototype),z.prototype.constructor=z,z.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},z.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(j){this.implementation.onAdd&&this.implementation.onAdd(j,j.painter.context.gl)},z.prototype.onRemove=function(j){this.implementation.onRemove&&this.implementation.onRemove(j,j.painter.context.gl)},z}(wa),T1={circle:Vp,heatmap:Kp,hillshade:Qp,fill:kd,"fill-extrusion":Vd,line:l0,symbol:v1,background:y1,raster:_1};function k1(g){return g.type==="custom"?new A1(g):new T1[g.type](g)}var mp=l.HTMLImageElement,yp=l.HTMLCanvasElement,xp=l.HTMLVideoElement,bp=l.ImageData,qf=l.ImageBitmap,Ac=function(g,z,j,st){this.context=g,this.format=j,this.texture=g.gl.createTexture(),this.update(z,st)};Ac.prototype.update=function(g,z,j){var st=g.width,pt=g.height,wt=(!this.size||this.size[0]!==st||this.size[1]!==pt)&&!j,Rt=this,Jt=Rt.context,le=Jt.gl;if(this.useMipmap=!!(z&&z.useMipmap),le.bindTexture(le.TEXTURE_2D,this.texture),Jt.pixelStoreUnpackFlipY.set(!1),Jt.pixelStoreUnpack.set(1),Jt.pixelStoreUnpackPremultiplyAlpha.set(this.format===le.RGBA&&(!z||z.premultiply!==!1)),wt)this.size=[st,pt],g instanceof mp||g instanceof yp||g instanceof xp||g instanceof bp||qf&&g instanceof qf?le.texImage2D(le.TEXTURE_2D,0,this.format,this.format,le.UNSIGNED_BYTE,g):le.texImage2D(le.TEXTURE_2D,0,this.format,st,pt,0,this.format,le.UNSIGNED_BYTE,g.data);else{var we=j||{x:0,y:0},Pe=we.x,Ue=we.y;g instanceof mp||g instanceof yp||g instanceof xp||g instanceof bp||qf&&g instanceof qf?le.texSubImage2D(le.TEXTURE_2D,0,Pe,Ue,le.RGBA,le.UNSIGNED_BYTE,g):le.texSubImage2D(le.TEXTURE_2D,0,Pe,Ue,st,pt,le.RGBA,le.UNSIGNED_BYTE,g.data)}this.useMipmap&&this.isSizePowerOfTwo()&&le.generateMipmap(le.TEXTURE_2D)},Ac.prototype.bind=function(g,z,j){var st=this,pt=st.context,wt=pt.gl;wt.bindTexture(wt.TEXTURE_2D,this.texture),j===wt.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(j=wt.LINEAR),g!==this.filter&&(wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MAG_FILTER,g),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_MIN_FILTER,j||g),this.filter=g),z!==this.wrap&&(wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_S,z),wt.texParameteri(wt.TEXTURE_2D,wt.TEXTURE_WRAP_T,z),this.wrap=z)},Ac.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Ac.prototype.destroy=function(){var g=this.context,z=g.gl;z.deleteTexture(this.texture),this.texture=null};var xh=function(g){var z=this;this._callback=g,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};xh.prototype.trigger=function(){var g=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){g._triggered=!1,g._callback()},0))},xh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Vc=function(g,z,j){this.target=g,this.parent=z,this.mapId=j,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new xh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?g:l};Vc.prototype.send=function(g,z,j,st,pt){var wt=this;pt===void 0&&(pt=!1);var Rt=Math.round(Math.random()*1e18).toString(36).substring(0,10);j&&(this.callbacks[Rt]=j);var Jt=nt(this.globalScope)?void 0:[];return this.target.postMessage({id:Rt,type:g,hasCallback:!!j,targetMapId:st,mustQueue:pt,sourceMapId:this.mapId,data:xe(z,Jt)},Jt),{cancel:function(){j&&delete wt.callbacks[Rt],wt.target.postMessage({id:Rt,type:"<cancel>",targetMapId:st,sourceMapId:wt.mapId})}}},Vc.prototype.receive=function(g){var z=g.data,j=z.id;if(j&&!(z.targetMapId&&this.mapId!==z.targetMapId))if(z.type==="<cancel>"){delete this.tasks[j];var st=this.cancelCallbacks[j];delete this.cancelCallbacks[j],st&&st()}else X()||z.mustQueue?(this.tasks[j]=z,this.taskQueue.push(j),this.invoker.trigger()):this.processTask(j,z)},Vc.prototype.process=function(){if(this.taskQueue.length){var g=this.taskQueue.shift(),z=this.tasks[g];delete this.tasks[g],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(g,z)}},Vc.prototype.processTask=function(g,z){var j=this;if(z.type==="<response>"){var st=this.callbacks[g];delete this.callbacks[g],st&&(z.error?st(me(z.error)):st(null,me(z.data)))}else{var pt=!1,wt=nt(this.globalScope)?void 0:[],Rt=z.hasCallback?function(Ue,Ve){pt=!0,delete j.cancelCallbacks[g],j.target.postMessage({id:g,type:"<response>",sourceMapId:j.mapId,error:Ue?xe(Ue):null,data:xe(Ve,wt)},wt)}:function(Ue){pt=!0},Jt=null,le=me(z.data);if(this.parent[z.type])Jt=this.parent[z.type](z.sourceMapId,le,Rt);else if(this.parent.getWorkerSource){var we=z.type.split("."),Pe=this.parent.getWorkerSource(z.sourceMapId,we[0],le.source);Jt=Pe[we[1]](le,Rt)}else Rt(new Error("Could not find function "+z.type));!pt&&Jt&&Jt.cancel&&(this.cancelCallbacks[g]=Jt.cancel)}},Vc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function M1(g,z,j){z=Math.pow(2,j)-z-1;var st=_p(g*256,z*256,j),pt=_p((g+1)*256,(z+1)*256,j);return st[0]+","+st[1]+","+pt[0]+","+pt[1]}function _p(g,z,j){var st=2*Math.PI*6378137/256/Math.pow(2,j),pt=g*st-2*Math.PI*6378137/2,wt=z*st-2*Math.PI*6378137/2;return[pt,wt]}var qa=function(g,z){g&&(z?this.setSouthWest(g).setNorthEast(z):g.length===4?this.setSouthWest([g[0],g[1]]).setNorthEast([g[2],g[3]]):this.setSouthWest(g[0]).setNorthEast(g[1]))};qa.prototype.setNorthEast=function(g){return this._ne=g instanceof ga?new ga(g.lng,g.lat):ga.convert(g),this},qa.prototype.setSouthWest=function(g){return this._sw=g instanceof ga?new ga(g.lng,g.lat):ga.convert(g),this},qa.prototype.extend=function(g){var z=this._sw,j=this._ne,st,pt;if(g instanceof ga)st=g,pt=g;else if(g instanceof qa){if(st=g._sw,pt=g._ne,!st||!pt)return this}else{if(Array.isArray(g))if(g.length===4||g.every(Array.isArray)){var wt=g;return this.extend(qa.convert(wt))}else{var Rt=g;return this.extend(ga.convert(Rt))}return this}return!z&&!j?(this._sw=new ga(st.lng,st.lat),this._ne=new ga(pt.lng,pt.lat)):(z.lng=Math.min(st.lng,z.lng),z.lat=Math.min(st.lat,z.lat),j.lng=Math.max(pt.lng,j.lng),j.lat=Math.max(pt.lat,j.lat)),this},qa.prototype.getCenter=function(){return new ga((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},qa.prototype.getSouthWest=function(){return this._sw},qa.prototype.getNorthEast=function(){return this._ne},qa.prototype.getNorthWest=function(){return new ga(this.getWest(),this.getNorth())},qa.prototype.getSouthEast=function(){return new ga(this.getEast(),this.getSouth())},qa.prototype.getWest=function(){return this._sw.lng},qa.prototype.getSouth=function(){return this._sw.lat},qa.prototype.getEast=function(){return this._ne.lng},qa.prototype.getNorth=function(){return this._ne.lat},qa.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},qa.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},qa.prototype.isEmpty=function(){return!(this._sw&&this._ne)},qa.prototype.contains=function(g){var z=ga.convert(g),j=z.lng,st=z.lat,pt=this._sw.lat<=st&&st<=this._ne.lat,wt=this._sw.lng<=j&&j<=this._ne.lng;return this._sw.lng>this._ne.lng&&(wt=this._sw.lng>=j&&j>=this._ne.lng),pt&&wt},qa.convert=function(g){return!g||g instanceof qa?g:new qa(g)};var wp=63710088e-1,ga=function(g,z){if(isNaN(g)||isNaN(z))throw new Error("Invalid LngLat object: ("+g+", "+z+")");if(this.lng=+g,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ga.prototype.wrap=function(){return new ga(_(this.lng,-180,180),this.lat)},ga.prototype.toArray=function(){return[this.lng,this.lat]},ga.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ga.prototype.distanceTo=function(g){var z=Math.PI/180,j=this.lat*z,st=g.lat*z,pt=Math.sin(j)*Math.sin(st)+Math.cos(j)*Math.cos(st)*Math.cos((g.lng-this.lng)*z),wt=wp*Math.acos(Math.min(pt,1));return wt},ga.prototype.toBounds=function(g){g===void 0&&(g=0);var z=40075017,j=360*g/z,st=j/Math.cos(Math.PI/180*this.lat);return new qa(new ga(this.lng-st,this.lat-j),new ga(this.lng+st,this.lat+j))},ga.convert=function(g){if(g instanceof ga)return g;if(Array.isArray(g)&&(g.length===2||g.length===3))return new ga(Number(g[0]),Number(g[1]));if(!Array.isArray(g)&&typeof g=="object"&&g!==null)return new ga(Number("lng"in g?g.lng:g.lon),Number(g.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ap=2*Math.PI*wp;function Tp(g){return Ap*Math.cos(g*Math.PI/180)}function kp(g){return(180+g)/360}function Mp(g){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+g*Math.PI/360)))/360}function Sp(g,z){return g/Tp(z)}function S1(g){return g*360-180}function bh(g){var z=180-g*360;return 360/Math.PI*Math.atan(Math.exp(z*Math.PI/180))-90}function C1(g,z){return g*Tp(bh(z))}function E1(g){return 1/Math.cos(g*Math.PI/180)}var Tc=function(g,z,j){j===void 0&&(j=0),this.x=+g,this.y=+z,this.z=+j};Tc.fromLngLat=function(g,z){z===void 0&&(z=0);var j=ga.convert(g);return new Tc(kp(j.lng),Mp(j.lat),Sp(z,j.lat))},Tc.prototype.toLngLat=function(){return new ga(S1(this.x),bh(this.y))},Tc.prototype.toAltitude=function(){return C1(this.z,this.y)},Tc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ap*E1(bh(this.y))};var kc=function(g,z,j){this.z=g,this.x=z,this.y=j,this.key=mf(0,g,g,z,j)};kc.prototype.equals=function(g){return this.z===g.z&&this.x===g.x&&this.y===g.y},kc.prototype.url=function(g,z){var j=M1(this.x,this.y,this.z),st=L1(this.z,this.x,this.y);return g[(this.x+this.y)%g.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(z==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",j)},kc.prototype.getTilePoint=function(g){var z=Math.pow(2,this.z);return new r((g.x*z-this.x)*ki,(g.y*z-this.y)*ki)},kc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Cp=function(g,z){this.wrap=g,this.canonical=z,this.key=mf(g,z.z,z.z,z.x,z.y)},Ga=function(g,z,j,st,pt){this.overscaledZ=g,this.wrap=z,this.canonical=new kc(j,+st,+pt),this.key=mf(z,g,j,st,pt)};Ga.prototype.equals=function(g){return this.overscaledZ===g.overscaledZ&&this.wrap===g.wrap&&this.canonical.equals(g.canonical)},Ga.prototype.scaledTo=function(g){var z=this.canonical.z-g;return g>this.canonical.z?new Ga(g,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ga(g,this.wrap,g,this.canonical.x>>z,this.canonical.y>>z)},Ga.prototype.calculateScaledKey=function(g,z){var j=this.canonical.z-g;return g>this.canonical.z?mf(this.wrap*+z,g,this.canonical.z,this.canonical.x,this.canonical.y):mf(this.wrap*+z,g,g,this.canonical.x>>j,this.canonical.y>>j)},Ga.prototype.isChildOf=function(g){if(g.wrap!==this.wrap)return!1;var z=this.canonical.z-g.canonical.z;return g.overscaledZ===0||g.overscaledZ<this.overscaledZ&&g.canonical.x===this.canonical.x>>z&&g.canonical.y===this.canonical.y>>z},Ga.prototype.children=function(g){if(this.overscaledZ>=g)return[new Ga(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,j=this.canonical.x*2,st=this.canonical.y*2;return[new Ga(z,this.wrap,z,j,st),new Ga(z,this.wrap,z,j+1,st),new Ga(z,this.wrap,z,j,st+1),new Ga(z,this.wrap,z,j+1,st+1)]},Ga.prototype.isLessThan=function(g){return this.wrap<g.wrap?!0:this.wrap>g.wrap?!1:this.overscaledZ<g.overscaledZ?!0:this.overscaledZ>g.overscaledZ?!1:this.canonical.x<g.canonical.x?!0:this.canonical.x>g.canonical.x?!1:this.canonical.y<g.canonical.y},Ga.prototype.wrapped=function(){return new Ga(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ga.prototype.unwrapTo=function(g){return new Ga(this.overscaledZ,g,this.canonical.z,this.canonical.x,this.canonical.y)},Ga.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ga.prototype.toUnwrapped=function(){return new Cp(this.wrap,this.canonical)},Ga.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ga.prototype.getTilePoint=function(g){return this.canonical.getTilePoint(new Tc(g.x-this.wrap,g.y))};function mf(g,z,j,st,pt){g*=2,g<0&&(g=g*-1-1);var wt=1<<j;return(wt*wt*g+wt*pt+st).toString(36)+j.toString(36)+z.toString(36)}function L1(g,z,j){for(var st="",pt,wt=g;wt>0;wt--)pt=1<<wt-1,st+=(z&pt?1:0)+(j&pt?2:0);return st}Lt("CanonicalTileID",kc),Lt("OverscaledTileID",Ga,{omit:["posMatrix"]});var fu=function(g,z,j){if(this.uid=g,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(j&&j!=="mapbox"&&j!=="terrarium")return R('"'+j+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var st=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=j||"mapbox";for(var pt=0;pt<st;pt++)this.data[this._idx(-1,pt)]=this.data[this._idx(0,pt)],this.data[this._idx(st,pt)]=this.data[this._idx(st-1,pt)],this.data[this._idx(pt,-1)]=this.data[this._idx(pt,0)],this.data[this._idx(pt,st)]=this.data[this._idx(pt,st-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(st,-1)]=this.data[this._idx(st-1,0)],this.data[this._idx(-1,st)]=this.data[this._idx(0,st-1)],this.data[this._idx(st,st)]=this.data[this._idx(st-1,st-1)]};fu.prototype.get=function(g,z){var j=new Uint8Array(this.data.buffer),st=this._idx(g,z)*4,pt=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return pt(j[st],j[st+1],j[st+2])},fu.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},fu.prototype._idx=function(g,z){if(g<-1||g>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(g+1)},fu.prototype._unpackMapbox=function(g,z,j){return(g*256*256+z*256+j)/10-1e4},fu.prototype._unpackTerrarium=function(g,z,j){return g*256+z+j/256-32768},fu.prototype.getPixels=function(){return new No({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},fu.prototype.backfillBorder=function(g,z,j){if(this.dim!==g.dim)throw new Error("dem dimension mismatch");var st=z*this.dim,pt=z*this.dim+this.dim,wt=j*this.dim,Rt=j*this.dim+this.dim;switch(z){case-1:st=pt-1;break;case 1:pt=st+1;break}switch(j){case-1:wt=Rt-1;break;case 1:Rt=wt+1;break}for(var Jt=-z*this.dim,le=-j*this.dim,we=wt;we<Rt;we++)for(var Pe=st;Pe<pt;Pe++)this.data[this._idx(Pe,we)]=g.data[this._idx(Pe+Jt,we+le)]},Lt("DEMData",fu);function R1(g,z){var j={};if(!z)return j;for(var st=function(){var Rt=wt[pt],Jt=Rt.layerIds.map(function(Ue){return z.getLayer(Ue)}).filter(Boolean);if(Jt.length!==0){Rt.layers=Jt,Rt.stateDependentLayerIds&&(Rt.stateDependentLayers=Rt.stateDependentLayerIds.map(function(Ue){return Jt.filter(function(Ve){return Ve.id===Ue})[0]}));for(var le=0,we=Jt;le<we.length;le+=1){var Pe=we[le];j[Pe.id]=Rt}}},pt=0,wt=g;pt<wt.length;pt+=1)st();return j}var Gf=function(g){this._stringToNumber={},this._numberToString=[];for(var z=0;z<g.length;z++){var j=g[z];this._stringToNumber[j]=z,this._numberToString[z]=j}};Gf.prototype.encode=function(g){return this._stringToNumber[g]},Gf.prototype.decode=function(g){return this._numberToString[g]};var Yf=function(g,z,j,st,pt){this.type="Feature",this._vectorTileFeature=g,g._z=z,g._x=j,g._y=st,this.properties=g.properties,this.id=pt},_h={geometry:{configurable:!0}};_h.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},_h.geometry.set=function(g){this._geometry=g},Yf.prototype.toJSON=function(){var g={geometry:this.geometry};for(var z in this)z==="_geometry"||z==="_vectorTileFeature"||(g[z]=this[z]);return g},Object.defineProperties(Yf.prototype,_h);var Wc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Wc.prototype.updateState=function(g,z,j){var st=String(z);if(this.stateChanges[g]=this.stateChanges[g]||{},this.stateChanges[g][st]=this.stateChanges[g][st]||{},x(this.stateChanges[g][st],j),this.deletedStates[g]===null){this.deletedStates[g]={};for(var pt in this.state[g])pt!==st&&(this.deletedStates[g][pt]=null)}else{var wt=this.deletedStates[g]&&this.deletedStates[g][st]===null;if(wt){this.deletedStates[g][st]={};for(var Rt in this.state[g][st])j[Rt]||(this.deletedStates[g][st][Rt]=null)}else for(var Jt in j){var le=this.deletedStates[g]&&this.deletedStates[g][st]&&this.deletedStates[g][st][Jt]===null;le&&delete this.deletedStates[g][st][Jt]}}},Wc.prototype.removeFeatureState=function(g,z,j){var st=this.deletedStates[g]===null;if(!st){var pt=String(z);if(this.deletedStates[g]=this.deletedStates[g]||{},j&&z!==void 0)this.deletedStates[g][pt]!==null&&(this.deletedStates[g][pt]=this.deletedStates[g][pt]||{},this.deletedStates[g][pt][j]=null);else if(z!==void 0){var wt=this.stateChanges[g]&&this.stateChanges[g][pt];if(wt){this.deletedStates[g][pt]={};for(j in this.stateChanges[g][pt])this.deletedStates[g][pt][j]=null}else this.deletedStates[g][pt]=null}else this.deletedStates[g]=null}},Wc.prototype.getState=function(g,z){var j=String(z),st=this.state[g]||{},pt=this.stateChanges[g]||{},wt=x({},st[j],pt[j]);if(this.deletedStates[g]===null)return{};if(this.deletedStates[g]){var Rt=this.deletedStates[g][z];if(Rt===null)return{};for(var Jt in Rt)delete wt[Jt]}return wt},Wc.prototype.initializeTileState=function(g,z){g.setFeatureState(this.state,z)},Wc.prototype.coalesceChanges=function(g,z){var j={};for(var st in this.stateChanges){this.state[st]=this.state[st]||{};var pt={};for(var wt in this.stateChanges[st])this.state[st][wt]||(this.state[st][wt]={}),x(this.state[st][wt],this.stateChanges[st][wt]),pt[wt]=this.state[st][wt];j[st]=pt}for(var Rt in this.deletedStates){this.state[Rt]=this.state[Rt]||{};var Jt={};if(this.deletedStates[Rt]===null)for(var le in this.state[Rt])Jt[le]={},this.state[Rt][le]={};else for(var we in this.deletedStates[Rt]){var Pe=this.deletedStates[Rt][we]===null;if(Pe)this.state[Rt][we]={};else for(var Ue=0,Ve=Object.keys(this.deletedStates[Rt][we]);Ue<Ve.length;Ue+=1){var er=Ve[Ue];delete this.state[Rt][we][er]}Jt[we]=this.state[Rt][we]}j[Rt]=j[Rt]||{},x(j[Rt],Jt)}if(this.stateChanges={},this.deletedStates={},Object.keys(j).length!==0)for(var _r in g){var Ir=g[_r];Ir.setFeatureState(j,z)}};var hu=function(g,z){this.tileID=g,this.x=g.canonical.x,this.y=g.canonical.y,this.z=g.canonical.z,this.grid=new Li(ki,16,0),this.grid3D=new Li(ki,16,0),this.featureIndexArray=new kf,this.promoteId=z};hu.prototype.insert=function(g,z,j,st,pt,wt){var Rt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(j,st,pt);for(var Jt=wt?this.grid3D:this.grid,le=0;le<z.length;le++){for(var we=z[le],Pe=[1/0,1/0,-1/0,-1/0],Ue=0;Ue<we.length;Ue++){var Ve=we[Ue];Pe[0]=Math.min(Pe[0],Ve.x),Pe[1]=Math.min(Pe[1],Ve.y),Pe[2]=Math.max(Pe[2],Ve.x),Pe[3]=Math.max(Pe[3],Ve.y)}Pe[0]<ki&&Pe[1]<ki&&Pe[2]>=0&&Pe[3]>=0&&Jt.insert(Rt,Pe[0],Pe[1],Pe[2],Pe[3])}},hu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Fc.VectorTile(new Pf(this.rawTileData)).layers,this.sourceLayerCoder=new Gf(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},hu.prototype.query=function(g,z,j,st){var pt=this;this.loadVTLayers();for(var wt=g.params||{},Rt=ki/g.tileSize/g.scale,Jt=us(wt.filter),le=g.queryGeometry,we=g.queryPadding*Rt,Pe=Lp(le),Ue=this.grid.query(Pe.minX-we,Pe.minY-we,Pe.maxX+we,Pe.maxY+we),Ve=Lp(g.cameraQueryGeometry),er=this.grid3D.query(Ve.minX-we,Ve.minY-we,Ve.maxX+we,Ve.maxY+we,function(Ln,Un,Wn,Xn){return jl(g.cameraQueryGeometry,Ln-we,Un-we,Wn+we,Xn+we)}),_r=0,Ir=er;_r<Ir.length;_r+=1){var un=Ir[_r];Ue.push(un)}Ue.sort(O1);for(var tn={},gn,bn=function(Ln){var Un=Ue[Ln];if(Un!==gn){gn=Un;var Wn=pt.featureIndexArray.get(Un),Xn=null;pt.loadMatchingFeature(tn,Wn.bucketIndex,Wn.sourceLayerIndex,Wn.featureIndex,Jt,wt.layers,wt.availableImages,z,j,st,function(fi,hi,gi){return Xn||(Xn=Ki(fi)),hi.queryIntersectsFeature(le,fi,gi,Xn,pt.z,g.transform,Rt,g.pixelPosMatrix)})}},hn=0;hn<Ue.length;hn++)bn(hn);return tn},hu.prototype.loadMatchingFeature=function(g,z,j,st,pt,wt,Rt,Jt,le,we,Pe){var Ue=this.bucketLayerIDs[z];if(!(wt&&!P(wt,Ue))){var Ve=this.sourceLayerCoder.decode(j),er=this.vtLayers[Ve],_r=er.feature(st);if(pt.needGeometry){var Ir=Bi(_r,!0);if(!pt.filter(new pi(this.tileID.overscaledZ),Ir,this.tileID.canonical))return}else if(!pt.filter(new pi(this.tileID.overscaledZ),_r))return;for(var un=this.getId(_r,Ve),tn=0;tn<Ue.length;tn++){var gn=Ue[tn];if(!(wt&&wt.indexOf(gn)<0)){var bn=Jt[gn];if(bn){var hn={};un!==void 0&&we&&(hn=we.getState(bn.sourceLayer||"_geojsonTileLayer",un));var Ln=x({},le[gn]);Ln.paint=Ep(Ln.paint,bn.paint,_r,hn,Rt),Ln.layout=Ep(Ln.layout,bn.layout,_r,hn,Rt);var Un=!Pe||Pe(_r,bn,hn);if(Un){var Wn=new Yf(_r,this.z,this.x,this.y,un);Wn.layer=Ln;var Xn=g[gn];Xn===void 0&&(Xn=g[gn]=[]),Xn.push({featureIndex:st,feature:Wn,intersectionZ:Un})}}}}}},hu.prototype.lookupSymbolFeatures=function(g,z,j,st,pt,wt,Rt,Jt){var le={};this.loadVTLayers();for(var we=us(pt),Pe=0,Ue=g;Pe<Ue.length;Pe+=1){var Ve=Ue[Pe];this.loadMatchingFeature(le,j,st,Ve,we,wt,Rt,Jt,z)}return le},hu.prototype.hasLayer=function(g){for(var z=0,j=this.bucketLayerIDs;z<j.length;z+=1)for(var st=j[z],pt=0,wt=st;pt<wt.length;pt+=1){var Rt=wt[pt];if(g===Rt)return!0}return!1},hu.prototype.getId=function(g,z){var j=g.id;if(this.promoteId){var st=typeof this.promoteId=="string"?this.promoteId:this.promoteId[z];j=g.properties[st],typeof j=="boolean"&&(j=Number(j))}return j},Lt("FeatureIndex",hu,{omit:["rawTileData","sourceLayerCoder"]});function Ep(g,z,j,st,pt){return I(g,function(wt,Rt){var Jt=z instanceof Va?z.get(Rt):null;return Jt&&Jt.evaluate?Jt.evaluate(j,st,pt):Jt})}function Lp(g){for(var z=1/0,j=1/0,st=-1/0,pt=-1/0,wt=0,Rt=g;wt<Rt.length;wt+=1){var Jt=Rt[wt];z=Math.min(z,Jt.x),j=Math.min(j,Jt.y),st=Math.max(st,Jt.x),pt=Math.max(pt,Jt.y)}return{minX:z,minY:j,maxX:st,maxY:pt}}function O1(g,z){return z-g}var P1=3e4,Ka=function(g,z){this.tileID=g,this.uid=A(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ka.prototype.registerFadeDuration=function(g){var z=g+this.timeAdded;z<at.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},Ka.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ka.prototype.loadVectorData=function(g,z,j){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!g){this.collisionBoxArray=new tf;return}g.featureIndex&&(this.latestFeatureIndex=g.featureIndex,g.rawTileData?(this.latestRawTileData=g.rawTileData,this.latestFeatureIndex.rawTileData=g.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=g.collisionBoxArray,this.buckets=R1(g.buckets,z.style),this.hasSymbolBuckets=!1;for(var st in this.buckets){var pt=this.buckets[st];if(pt instanceof aa)if(this.hasSymbolBuckets=!0,j)pt.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var wt in this.buckets){var Rt=this.buckets[wt];if(Rt instanceof aa&&Rt.hasRTLText){this.hasRTLText=!0,Pi();break}}this.queryPadding=0;for(var Jt in this.buckets){var le=this.buckets[Jt];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(Jt).queryRadius(le))}g.imageAtlas&&(this.imageAtlas=g.imageAtlas),g.glyphAtlasImage&&(this.glyphAtlasImage=g.glyphAtlasImage)},Ka.prototype.unloadVectorData=function(){for(var g in this.buckets)this.buckets[g].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ka.prototype.getBucket=function(g){return this.buckets[g.id]},Ka.prototype.upload=function(g){for(var z in this.buckets){var j=this.buckets[z];j.uploadPending()&&j.upload(g)}var st=g.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ac(g,this.imageAtlas.image,st.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ac(g,this.glyphAtlasImage,st.ALPHA),this.glyphAtlasImage=null)},Ka.prototype.prepare=function(g){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(g,this.imageAtlasTexture)},Ka.prototype.queryRenderedFeatures=function(g,z,j,st,pt,wt,Rt,Jt,le,we){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:st,cameraQueryGeometry:pt,scale:wt,tileSize:this.tileSize,pixelPosMatrix:we,transform:Jt,params:Rt,queryPadding:this.queryPadding*le},g,z,j)},Ka.prototype.querySourceFeatures=function(g,z){var j=this.latestFeatureIndex;if(!(!j||!j.rawTileData)){var st=j.loadVTLayers(),pt=z?z.sourceLayer:"",wt=st._geojsonTileLayer||st[pt];if(wt)for(var Rt=us(z&&z.filter),Jt=this.tileID.canonical,le=Jt.z,we=Jt.x,Pe=Jt.y,Ue={z:le,x:we,y:Pe},Ve=0;Ve<wt.length;Ve++){var er=wt.feature(Ve);if(Rt.needGeometry){var _r=Bi(er,!0);if(!Rt.filter(new pi(this.tileID.overscaledZ),_r,this.tileID.canonical))continue}else if(!Rt.filter(new pi(this.tileID.overscaledZ),er))continue;var Ir=j.getId(er,pt),un=new Yf(er,le,we,Pe,Ir);un.tile=Ue,g.push(un)}}},Ka.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ka.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ka.prototype.setExpiryData=function(g){var z=this.expirationTime;if(g.cacheControl){var j=J(g.cacheControl);j["max-age"]&&(this.expirationTime=Date.now()+j["max-age"]*1e3)}else g.expires&&(this.expirationTime=new Date(g.expires).getTime());if(this.expirationTime){var st=Date.now(),pt=!1;if(this.expirationTime>st)pt=!1;else if(!z)pt=!0;else if(this.expirationTime<z)pt=!0;else{var wt=this.expirationTime-z;wt?this.expirationTime=st+Math.max(wt,P1):pt=!0}pt?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ka.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ka.prototype.setFeatureState=function(g,z){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(g).length===0)){var j=this.latestFeatureIndex.loadVTLayers();for(var st in this.buckets)if(z.style.hasLayer(st)){var pt=this.buckets[st],wt=pt.layers[0].sourceLayer||"_geojsonTileLayer",Rt=j[wt],Jt=g[wt];if(!(!Rt||!Jt||Object.keys(Jt).length===0)){pt.update(Jt,Rt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var le=z&&z.style&&z.style.getLayer(st);le&&(this.queryPadding=Math.max(this.queryPadding,le.queryRadius(pt)))}}}},Ka.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ka.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<at.now()},Ka.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ka.prototype.setHoldDuration=function(g){this.symbolFadeHoldUntil=at.now()+g},Ka.prototype.setDependencies=function(g,z){for(var j={},st=0,pt=z;st<pt.length;st+=1){var wt=pt[st];j[wt]=!0}this.dependencies[g]=j},Ka.prototype.hasDependency=function(g,z){for(var j=0,st=g;j<st.length;j+=1){var pt=st[j],wt=this.dependencies[pt];if(wt)for(var Rt=0,Jt=z;Rt<Jt.length;Rt+=1){var le=Jt[Rt];if(wt[le])return!0}}return!1};var I1=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Hu=l.performance,Rp=function(g){this._marks={start:[g.url,"start"].join("#"),end:[g.url,"end"].join("#"),measure:g.url.toString()},Hu.mark(this._marks.start)};Rp.prototype.finish=function(){Hu.mark(this._marks.end);var g=Hu.getEntriesByName(this._marks.measure);return g.length===0&&(Hu.measure(this._marks.measure,this._marks.start,this._marks.end),g=Hu.getEntriesByName(this._marks.measure),Hu.clearMarks(this._marks.start),Hu.clearMarks(this._marks.end),Hu.clearMeasures(this._marks.measure)),g},i.Actor=Vc,i.AlphaImage=wc,i.CanonicalTileID=kc,i.CollisionBoxArray=tf,i.Color=qi,i.DEMData=fu,i.DataConstantProperty=Qn,i.DictionaryCoder=Gf,i.EXTENT=ki,i.ErrorEvent=Oe,i.EvaluationParameters=pi,i.Event=We,i.Evented=rr,i.FeatureIndex=hu,i.FillBucket=vl,i.FillExtrusionBucket=ml,i.ImageAtlas=pf,i.ImagePosition=zf,i.LineBucket=So,i.LngLat=ga,i.LngLatBounds=qa,i.MercatorCoordinate=Tc,i.ONE_EM=io,i.OverscaledTileID=Ga,i.Point=r,i.Point$1=r,i.Properties=Zi,i.Protobuf=Pf,i.RGBAImage=No,i.RequestManager=Ot,i.RequestPerformance=Rp,i.ResourceType=pr,i.SegmentVector=Na,i.SourceFeatureState=Wc,i.StructArrayLayout1ui2=Nu,i.StructArrayLayout2f1f2i16=hl,i.StructArrayLayout2i4=su,i.StructArrayLayout3ui6=pl,i.StructArrayLayout4i8=Kc,i.SymbolBucket=aa,i.Texture=Ac,i.Tile=Ka,i.Transitionable=Vi,i.Uniform1f=Wr,i.Uniform1i=Lr,i.Uniform2f=Fr,i.Uniform3f=Br,i.Uniform4f=Kr,i.UniformColor=cn,i.UniformMatrix4f=Pn,i.UnwrappedTileID=Cp,i.ValidationError=Or,i.WritingMode=fs,i.ZoomHistory=Ie,i.add=$f,i.addDynamicAttributes=mh,i.asyncAll=a,i.bezier=p,i.bindAll=S,i.browser=at,i.cacheEntryPossiblyAdded=_e,i.clamp=h,i.clearTileCache=hr,i.clipLine=fp,i.clone=Rc,i.clone$1=D,i.clone$2=Pc,i.collisionCircleLayout=p0,i.config=et,i.create=Lc,i.create$1=co,i.create$2=Ec,i.createCommonjsModule=C,i.createExpression=ss,i.createLayout=pa,i.createStyleLayer=k1,i.cross=Dp,i.deepEqual=n,i.dot=Fp,i.dot$1=qp,i.ease=b,i.emitValidationErrors=Si,i.endsWith=w,i.enforceCacheSizeLimit=De,i.evaluateSizeForFeature=ip,i.evaluateSizeForZoom=ap,i.evaluateVariableOffset=dp,i.evented=di,i.extend=x,i.featureFilter=us,i.filterObject=O,i.fromRotation=qu,i.getAnchorAlignment=ph,i.getAnchorJustification=gh,i.getArrayBuffer=Re,i.getImage=Te,i.getJSON=Fe,i.getRTLTextPluginStatus=Ei,i.getReferrer=Xt,i.getVideo=qe,i.identity=Ul,i.invert=bc,i.isChar=ze,i.isMapboxURL=It,i.keysDifference=f,i.makeRequest=Ce,i.mapObject=I,i.mercatorXfromLng=kp,i.mercatorYfromLat=Mp,i.mercatorZfromAltitude=Sp,i.mul=_c,i.multiply=Ta,i.mvt=Fc,i.nextPowerOfTwo=u,i.normalize=zp,i.number=va,i.offscreenCanvasSupported=He,i.ortho=Kf,i.parseGlyphPBF=U0,i.pbf=Pf,i.performSymbolLayout=a1,i.perspective=Zf,i.pick=k,i.plugin=Gn,i.polygonIntersectsPolygon=Ni,i.postMapLoadEvent=Nt,i.postTurnstileEvent=$t,i.potpack=Kh,i.refProperties=I1,i.register=Lt,i.registerForPluginStateChange=Hi,i.renderColorRamp=Ch,i.rotate=xc,i.rotateX=Oc,i.rotateZ=rf,i.scale=Bo,i.scale$1=Up,i.scale$2=nf,i.setCacheLimits=fe,i.setRTLTextPlugin=_a,i.sphericalToCartesian=G,i.sqrLen=Hp,i.styleSpec=gr,i.sub=Np,i.symbolSize=K0,i.transformMat3=Bp,i.transformMat4=Sf,i.translate=Do,i.triggerPluginCompletionEvent=ei,i.uniqueId=A,i.validateCustomStyleLayer=w1,i.validateLight=jn,i.validateStyle=kn,i.values=c,i.vectorTile=Fc,i.version=T,i.warnOnce=R,i.webpSupported=ct,i.window=l,i.wrap=_}),E(["./shared"],function(i){function C(Xt){var ie=typeof Xt;if(ie==="number"||ie==="boolean"||ie==="string"||Xt===void 0||Xt===null)return JSON.stringify(Xt);if(Array.isArray(Xt)){for(var pe="[",ke=0,Ce=Xt;ke<Ce.length;ke+=1){var Fe=Ce[ke];pe+=C(Fe)+","}return pe+"]"}for(var Re=Object.keys(Xt).sort(),be="{",Ge=0;Ge<Re.length;Ge++)be+=JSON.stringify(Re[Ge])+":"+C(Xt[Re[Ge]])+",";return be+"}"}function T(Xt){for(var ie="",pe=0,ke=i.refProperties;pe<ke.length;pe+=1){var Ce=ke[pe];ie+="/"+C(Xt[Ce])}return ie}function v(Xt,ie){for(var pe={},ke=0;ke<Xt.length;ke++){var Ce=ie&&ie[Xt[ke].id]||T(Xt[ke]);ie&&(ie[Xt[ke].id]=Ce);var Fe=pe[Ce];Fe||(Fe=pe[Ce]=[]),Fe.push(Xt[ke])}var Re=[];for(var be in pe)Re.push(pe[be]);return Re}var d=function(Xt){this.keyCache={},Xt&&this.replace(Xt)};d.prototype.replace=function(Xt){this._layerConfigs={},this._layers={},this.update(Xt,[])},d.prototype.update=function(Xt,ie){for(var pe=this,ke=0,Ce=Xt;ke<Ce.length;ke+=1){var Fe=Ce[ke];this._layerConfigs[Fe.id]=Fe;var Re=this._layers[Fe.id]=i.createStyleLayer(Fe);Re._featureFilter=i.featureFilter(Re.filter),this.keyCache[Fe.id]&&delete this.keyCache[Fe.id]}for(var be=0,Ge=ie;be<Ge.length;be+=1){var Ke=Ge[be];delete this.keyCache[Ke],delete this._layerConfigs[Ke],delete this._layers[Ke]}this.familiesBySource={};for(var or=v(i.values(this._layerConfigs),this.keyCache),sr=0,zt=or;sr<zt.length;sr+=1){var Ut=zt[sr],Me=Ut.map(function(Oe){return pe._layers[Oe.id]}),Te=Me[0];if(Te.visibility!=="none"){var qe=Te.source||"",Qe=this.familiesBySource[qe];Qe||(Qe=this.familiesBySource[qe]={});var Je=Te.sourceLayer||"_geojsonTileLayer",We=Qe[Je];We||(We=Qe[Je]=[]),We.push(Me)}}};var r=1,e=function(Xt){var ie={},pe=[];for(var ke in Xt){var Ce=Xt[ke],Fe=ie[ke]={};for(var Re in Ce){var be=Ce[+Re];if(!(!be||be.bitmap.width===0||be.bitmap.height===0)){var Ge={x:0,y:0,w:be.bitmap.width+2*r,h:be.bitmap.height+2*r};pe.push(Ge),Fe[Re]={rect:Ge,metrics:be.metrics}}}}var Ke=i.potpack(pe),or=Ke.w,sr=Ke.h,zt=new i.AlphaImage({width:or||1,height:sr||1});for(var Ut in Xt){var Me=Xt[Ut];for(var Te in Me){var qe=Me[+Te];if(!(!qe||qe.bitmap.width===0||qe.bitmap.height===0)){var Qe=ie[Ut][Te].rect;i.AlphaImage.copy(qe.bitmap,zt,{x:0,y:0},{x:Qe.x+r,y:Qe.y+r},qe.bitmap)}}}this.image=zt,this.positions=ie};i.register("GlyphAtlas",e);var l=function(Xt){this.tileID=new i.OverscaledTileID(Xt.tileID.overscaledZ,Xt.tileID.wrap,Xt.tileID.canonical.z,Xt.tileID.canonical.x,Xt.tileID.canonical.y),this.uid=Xt.uid,this.zoom=Xt.zoom,this.pixelRatio=Xt.pixelRatio,this.tileSize=Xt.tileSize,this.source=Xt.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Xt.showCollisionBoxes,this.collectResourceTiming=!!Xt.collectResourceTiming,this.returnDependencies=!!Xt.returnDependencies,this.promoteId=Xt.promoteId};l.prototype.parse=function(Xt,ie,pe,ke,Ce){var Fe=this;this.status="parsing",this.data=Xt,this.collisionBoxArray=new i.CollisionBoxArray;var Re=new i.DictionaryCoder(Object.keys(Xt.layers).sort()),be=new i.FeatureIndex(this.tileID,this.promoteId);be.bucketLayerIDs=[];var Ge={},Ke={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:pe},or=ie.familiesBySource[this.source];for(var sr in or){var zt=Xt.layers[sr];if(zt){zt.version===1&&i.warnOnce('Vector tile source "'+this.source+'" layer "'+sr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Ut=Re.encode(sr),Me=[],Te=0;Te<zt.length;Te++){var qe=zt.feature(Te),Qe=be.getId(qe,sr);Me.push({feature:qe,id:Qe,index:Te,sourceLayerIndex:Ut})}for(var Je=0,We=or[sr];Je<We.length;Je+=1){var Oe=We[Je],rr=Oe[0];if(!(rr.minzoom&&this.zoom<Math.floor(rr.minzoom))&&!(rr.maxzoom&&this.zoom>=rr.maxzoom)&&rr.visibility!=="none"){n(Oe,this.zoom,pe);var cr=Ge[rr.id]=rr.createBucket({index:be.bucketLayerIDs.length,layers:Oe,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ut,sourceID:this.source});cr.populate(Me,Ke,this.tileID.canonical),be.bucketLayerIDs.push(Oe.map(function(yn){return yn.id}))}}}}var lr,nr,Sr,kr,Mr=i.mapObject(Ke.glyphDependencies,function(yn){return Object.keys(yn).map(Number)});Object.keys(Mr).length?ke.send("getGlyphs",{uid:this.uid,stacks:Mr},function(yn,yr){lr||(lr=yn,nr=yr,pn.call(Fe))}):nr={};var rn=Object.keys(Ke.iconDependencies);rn.length?ke.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"icons"},function(yn,yr){lr||(lr=yn,Sr=yr,pn.call(Fe))}):Sr={};var Ur=Object.keys(Ke.patternDependencies);Ur.length?ke.send("getImages",{icons:Ur,source:this.source,tileID:this.tileID,type:"patterns"},function(yn,yr){lr||(lr=yn,kr=yr,pn.call(Fe))}):kr={},pn.call(this);function pn(){if(lr)return Ce(lr);if(nr&&Sr&&kr){var yn=new e(nr),yr=new i.ImageAtlas(Sr,kr);for(var Cr in Ge){var Dr=Ge[Cr];Dr instanceof i.SymbolBucket?(n(Dr.layers,this.zoom,pe),i.performSymbolLayout(Dr,nr,yn.positions,Sr,yr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Dr.hasPattern&&(Dr instanceof i.LineBucket||Dr instanceof i.FillBucket||Dr instanceof i.FillExtrusionBucket)&&(n(Dr.layers,this.zoom,pe),Dr.addFeatures(Ke,this.tileID.canonical,yr.patternPositions))}this.status="done",Ce(null,{buckets:i.values(Ge).filter(function(Nr){return!Nr.isEmpty()}),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yn.image,imageAtlas:yr,glyphMap:this.returnDependencies?nr:null,iconMap:this.returnDependencies?Sr:null,glyphPositions:this.returnDependencies?yn.positions:null})}}};function n(Xt,ie,pe){for(var ke=new i.EvaluationParameters(ie),Ce=0,Fe=Xt;Ce<Fe.length;Ce+=1){var Re=Fe[Ce];Re.recalculate(ke,pe)}}function s(Xt,ie){var pe=i.getArrayBuffer(Xt.request,function(ke,Ce,Fe,Re){ke?ie(ke):Ce&&ie(null,{vectorTile:new i.vectorTile.VectorTile(new i.pbf(Ce)),rawData:Ce,cacheControl:Fe,expires:Re})});return function(){pe.cancel(),ie()}}var o=function(Xt,ie,pe,ke){this.actor=Xt,this.layerIndex=ie,this.availableImages=pe,this.loadVectorData=ke||s,this.loading={},this.loaded={}};o.prototype.loadTile=function(Xt,ie){var pe=this,ke=Xt.uid;this.loading||(this.loading={});var Ce=Xt&&Xt.request&&Xt.request.collectResourceTiming?new i.RequestPerformance(Xt.request):!1,Fe=this.loading[ke]=new l(Xt);Fe.abort=this.loadVectorData(Xt,function(Re,be){if(delete pe.loading[ke],Re||!be)return Fe.status="done",pe.loaded[ke]=Fe,ie(Re);var Ge=be.rawData,Ke={};be.expires&&(Ke.expires=be.expires),be.cacheControl&&(Ke.cacheControl=be.cacheControl);var or={};if(Ce){var sr=Ce.finish();sr&&(or.resourceTiming=JSON.parse(JSON.stringify(sr)))}Fe.vectorTile=be.vectorTile,Fe.parse(be.vectorTile,pe.layerIndex,pe.availableImages,pe.actor,function(zt,Ut){if(zt||!Ut)return ie(zt);ie(null,i.extend({rawTileData:Ge.slice(0)},Ut,Ke,or))}),pe.loaded=pe.loaded||{},pe.loaded[ke]=Fe})},o.prototype.reloadTile=function(Xt,ie){var pe=this,ke=this.loaded,Ce=Xt.uid,Fe=this;if(ke&&ke[Ce]){var Re=ke[Ce];Re.showCollisionBoxes=Xt.showCollisionBoxes;var be=function(Ge,Ke){var or=Re.reloadCallback;or&&(delete Re.reloadCallback,Re.parse(Re.vectorTile,Fe.layerIndex,pe.availableImages,Fe.actor,or)),ie(Ge,Ke)};Re.status==="parsing"?Re.reloadCallback=be:Re.status==="done"&&(Re.vectorTile?Re.parse(Re.vectorTile,this.layerIndex,this.availableImages,this.actor,be):be())}},o.prototype.abortTile=function(Xt,ie){var pe=this.loading,ke=Xt.uid;pe&&pe[ke]&&pe[ke].abort&&(pe[ke].abort(),delete pe[ke]),ie()},o.prototype.removeTile=function(Xt,ie){var pe=this.loaded,ke=Xt.uid;pe&&pe[ke]&&delete pe[ke],ie()};var p=i.window.ImageBitmap,b=function(){this.loaded={}};b.prototype.loadTile=function(Xt,ie){var pe=Xt.uid,ke=Xt.encoding,Ce=Xt.rawImageData,Fe=p&&Ce instanceof p?this.getImageData(Ce):Ce,Re=new i.DEMData(pe,Fe,ke);this.loaded=this.loaded||{},this.loaded[pe]=Re,ie(null,Re)},b.prototype.getImageData=function(Xt){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(Xt.width,Xt.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Xt.width,this.offscreenCanvas.height=Xt.height,this.offscreenCanvasContext.drawImage(Xt,0,0,Xt.width,Xt.height);var ie=this.offscreenCanvasContext.getImageData(-1,-1,Xt.width+2,Xt.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new i.RGBAImage({width:ie.width,height:ie.height},ie.data)},b.prototype.removeTile=function(Xt){var ie=this.loaded,pe=Xt.uid;ie&&ie[pe]&&delete ie[pe]};var h=_;function _(Xt,ie){var pe=Xt&&Xt.type,ke;if(pe==="FeatureCollection")for(ke=0;ke<Xt.features.length;ke++)_(Xt.features[ke],ie);else if(pe==="GeometryCollection")for(ke=0;ke<Xt.geometries.length;ke++)_(Xt.geometries[ke],ie);else if(pe==="Feature")_(Xt.geometry,ie);else if(pe==="Polygon")a(Xt.coordinates,ie);else if(pe==="MultiPolygon")for(ke=0;ke<Xt.coordinates.length;ke++)a(Xt.coordinates[ke],ie);return Xt}function a(Xt,ie){if(Xt.length!==0){c(Xt[0],ie);for(var pe=1;pe<Xt.length;pe++)c(Xt[pe],!ie)}}function c(Xt,ie){for(var pe=0,ke=0,Ce=Xt.length,Fe=Ce-1;ke<Ce;Fe=ke++)pe+=(Xt[ke][0]-Xt[Fe][0])*(Xt[Fe][1]+Xt[ke][1]);pe>=0!=!!ie&&Xt.reverse()}var f=i.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(Xt){this._feature=Xt,this.extent=i.EXTENT,this.type=Xt.type,this.properties=Xt.tags,"id"in Xt&&!isNaN(Xt.id)&&(this.id=parseInt(Xt.id,10))};x.prototype.loadGeometry=function(){if(this._feature.type===1){for(var Xt=[],ie=0,pe=this._feature.geometry;ie<pe.length;ie+=1){var ke=pe[ie];Xt.push([new i.Point$1(ke[0],ke[1])])}return Xt}else{for(var Ce=[],Fe=0,Re=this._feature.geometry;Fe<Re.length;Fe+=1){for(var be=Re[Fe],Ge=[],Ke=0,or=be;Ke<or.length;Ke+=1){var sr=or[Ke];Ge.push(new i.Point$1(sr[0],sr[1]))}Ce.push(Ge)}return Ce}},x.prototype.toGeoJSON=function(Xt,ie,pe){return f.call(this,Xt,ie,pe)};var k=function(Xt){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.EXTENT,this.length=Xt.length,this._features=Xt};k.prototype.feature=function(Xt){return new x(this._features[Xt])};var y=i.vectorTile.VectorTileFeature,A=L;function L(Xt,ie){this.options=ie||{},this.features=Xt,this.length=Xt.length}L.prototype.feature=function(Xt){return new u(this.features[Xt],this.options.extent)};function u(Xt,ie){this.id=typeof Xt.id=="number"?Xt.id:void 0,this.type=Xt.type,this.rawGeometry=Xt.type===1?[Xt.geometry]:Xt.geometry,this.properties=Xt.tags,this.extent=ie||4096}u.prototype.loadGeometry=function(){var Xt=this.rawGeometry;this.geometry=[];for(var ie=0;ie<Xt.length;ie++){for(var pe=Xt[ie],ke=[],Ce=0;Ce<pe.length;Ce++)ke.push(new i.Point$1(pe[Ce][0],pe[Ce][1]));this.geometry.push(ke)}return this.geometry},u.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Xt=this.geometry,ie=1/0,pe=-1/0,ke=1/0,Ce=-1/0,Fe=0;Fe<Xt.length;Fe++)for(var Re=Xt[Fe],be=0;be<Re.length;be++){var Ge=Re[be];ie=Math.min(ie,Ge.x),pe=Math.max(pe,Ge.x),ke=Math.min(ke,Ge.y),Ce=Math.max(Ce,Ge.y)}return[ie,ke,pe,Ce]},u.prototype.toGeoJSON=y.prototype.toGeoJSON;var m=O,S=O,w=D,I=A;function O(Xt){var ie=new i.pbf;return P(Xt,ie),ie.finish()}function D(Xt,ie){ie=ie||{};var pe={};for(var ke in Xt)pe[ke]=new A(Xt[ke].features,ie),pe[ke].name=ke,pe[ke].version=ie.version,pe[ke].extent=ie.extent;return O({layers:pe})}function P(Xt,ie){for(var pe in Xt.layers)ie.writeMessage(3,F,Xt.layers[pe])}function F(Xt,ie){ie.writeVarintField(15,Xt.version||1),ie.writeStringField(1,Xt.name||""),ie.writeVarintField(5,Xt.extent||4096);var pe,ke={keys:[],values:[],keycache:{},valuecache:{}};for(pe=0;pe<Xt.length;pe++)ke.feature=Xt.feature(pe),ie.writeMessage(2,R,ke);var Ce=ke.keys;for(pe=0;pe<Ce.length;pe++)ie.writeStringField(3,Ce[pe]);var Fe=ke.values;for(pe=0;pe<Fe.length;pe++)ie.writeMessage(4,J,Fe[pe])}function R(Xt,ie){var pe=Xt.feature;pe.id!==void 0&&ie.writeVarintField(1,pe.id),ie.writeMessage(2,B,Xt),ie.writeVarintField(3,pe.type),ie.writeMessage(4,X,pe)}function B(Xt,ie){var pe=Xt.feature,ke=Xt.keys,Ce=Xt.values,Fe=Xt.keycache,Re=Xt.valuecache;for(var be in pe.properties){var Ge=Fe[be];typeof Ge>"u"&&(ke.push(be),Ge=ke.length-1,Fe[be]=Ge),ie.writeVarint(Ge);var Ke=pe.properties[be],or=typeof Ke;or!=="string"&&or!=="boolean"&&or!=="number"&&(Ke=JSON.stringify(Ke));var sr=or+":"+Ke,zt=Re[sr];typeof zt>"u"&&(Ce.push(Ke),zt=Ce.length-1,Re[sr]=zt),ie.writeVarint(zt)}}function N(Xt,ie){return(ie<<3)+(Xt&7)}function G(Xt){return Xt<<1^Xt>>31}function X(Xt,ie){for(var pe=Xt.loadGeometry(),ke=Xt.type,Ce=0,Fe=0,Re=pe.length,be=0;be<Re;be++){var Ge=pe[be],Ke=1;ke===1&&(Ke=Ge.length),ie.writeVarint(N(1,Ke));for(var or=ke===3?Ge.length-1:Ge.length,sr=0;sr<or;sr++){sr===1&&ke!==1&&ie.writeVarint(N(2,or-1));var zt=Ge[sr].x-Ce,Ut=Ge[sr].y-Fe;ie.writeVarint(G(zt)),ie.writeVarint(G(Ut)),Ce+=zt,Fe+=Ut}ke===3&&ie.writeVarint(N(7,1))}}function J(Xt,ie){var pe=typeof Xt;pe==="string"?ie.writeStringField(1,Xt):pe==="boolean"?ie.writeBooleanField(7,Xt):pe==="number"&&(Xt%1!==0?ie.writeDoubleField(3,Xt):Xt<0?ie.writeSVarintField(6,Xt):ie.writeVarintField(5,Xt))}m.fromVectorTileJs=S,m.fromGeojsonVt=w,m.GeoJSONWrapper=I;function it(Xt,ie,pe,ke,Ce,Fe){if(!(Ce-ke<=pe)){var Re=ke+Ce>>1;nt(Xt,ie,Re,ke,Ce,Fe%2),it(Xt,ie,pe,ke,Re-1,Fe+1),it(Xt,ie,pe,Re+1,Ce,Fe+1)}}function nt(Xt,ie,pe,ke,Ce,Fe){for(;Ce>ke;){if(Ce-ke>600){var Re=Ce-ke+1,be=pe-ke+1,Ge=Math.log(Re),Ke=.5*Math.exp(2*Ge/3),or=.5*Math.sqrt(Ge*Ke*(Re-Ke)/Re)*(be-Re/2<0?-1:1),sr=Math.max(ke,Math.floor(pe-be*Ke/Re+or)),zt=Math.min(Ce,Math.floor(pe+(Re-be)*Ke/Re+or));nt(Xt,ie,pe,sr,zt,Fe)}var Ut=ie[2*pe+Fe],Me=ke,Te=Ce;for(q(Xt,ie,ke,pe),ie[2*Ce+Fe]>Ut&&q(Xt,ie,ke,Ce);Me<Te;){for(q(Xt,ie,Me,Te),Me++,Te--;ie[2*Me+Fe]<Ut;)Me++;for(;ie[2*Te+Fe]>Ut;)Te--}ie[2*ke+Fe]===Ut?q(Xt,ie,ke,Te):(Te++,q(Xt,ie,Te,Ce)),Te<=pe&&(ke=Te+1),pe<=Te&&(Ce=Te-1)}}function q(Xt,ie,pe,ke){Z(Xt,pe,ke),Z(ie,2*pe,2*ke),Z(ie,2*pe+1,2*ke+1)}function Z(Xt,ie,pe){var ke=Xt[ie];Xt[ie]=Xt[pe],Xt[pe]=ke}function $(Xt,ie,pe,ke,Ce,Fe,Re){for(var be=[0,Xt.length-1,0],Ge=[],Ke,or;be.length;){var sr=be.pop(),zt=be.pop(),Ut=be.pop();if(zt-Ut<=Re){for(var Me=Ut;Me<=zt;Me++)Ke=ie[2*Me],or=ie[2*Me+1],Ke>=pe&&Ke<=Ce&&or>=ke&&or<=Fe&&Ge.push(Xt[Me]);continue}var Te=Math.floor((Ut+zt)/2);Ke=ie[2*Te],or=ie[2*Te+1],Ke>=pe&&Ke<=Ce&&or>=ke&&or<=Fe&&Ge.push(Xt[Te]);var qe=(sr+1)%2;(sr===0?pe<=Ke:ke<=or)&&(be.push(Ut),be.push(Te-1),be.push(qe)),(sr===0?Ce>=Ke:Fe>=or)&&(be.push(Te+1),be.push(zt),be.push(qe))}return Ge}function V(Xt,ie,pe,ke,Ce,Fe){for(var Re=[0,Xt.length-1,0],be=[],Ge=Ce*Ce;Re.length;){var Ke=Re.pop(),or=Re.pop(),sr=Re.pop();if(or-sr<=Fe){for(var zt=sr;zt<=or;zt++)rt(ie[2*zt],ie[2*zt+1],pe,ke)<=Ge&&be.push(Xt[zt]);continue}var Ut=Math.floor((sr+or)/2),Me=ie[2*Ut],Te=ie[2*Ut+1];rt(Me,Te,pe,ke)<=Ge&&be.push(Xt[Ut]);var qe=(Ke+1)%2;(Ke===0?pe-Ce<=Me:ke-Ce<=Te)&&(Re.push(sr),Re.push(Ut-1),Re.push(qe)),(Ke===0?pe+Ce>=Me:ke+Ce>=Te)&&(Re.push(Ut+1),Re.push(or),Re.push(qe))}return be}function rt(Xt,ie,pe,ke){var Ce=Xt-pe,Fe=ie-ke;return Ce*Ce+Fe*Fe}var ot=function(Xt){return Xt[0]},H=function(Xt){return Xt[1]},Y=function(Xt,ie,pe,ke,Ce){ie===void 0&&(ie=ot),pe===void 0&&(pe=H),ke===void 0&&(ke=64),Ce===void 0&&(Ce=Float64Array),this.nodeSize=ke,this.points=Xt;for(var Fe=Xt.length<65536?Uint16Array:Uint32Array,Re=this.ids=new Fe(Xt.length),be=this.coords=new Ce(Xt.length*2),Ge=0;Ge<Xt.length;Ge++)Re[Ge]=Ge,be[2*Ge]=ie(Xt[Ge]),be[2*Ge+1]=pe(Xt[Ge]);it(Re,be,ke,0,Re.length-1,0)};Y.prototype.range=function(Xt,ie,pe,ke){return $(this.ids,this.coords,Xt,ie,pe,ke,this.nodeSize)},Y.prototype.within=function(Xt,ie,pe){return V(this.ids,this.coords,Xt,ie,pe,this.nodeSize)};var at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Xt){return Xt}},et=function(Xt){this.options=At(Object.create(at),Xt),this.trees=new Array(this.options.maxZoom+1)};et.prototype.load=function(Xt){var ie=this.options,pe=ie.log,ke=ie.minZoom,Ce=ie.maxZoom,Fe=ie.nodeSize;pe&&console.time("total time");var Re="prepare "+Xt.length+" points";pe&&console.time(Re),this.points=Xt;for(var be=[],Ge=0;Ge<Xt.length;Ge++)Xt[Ge].geometry&&be.push(ft(Xt[Ge],Ge));this.trees[Ce+1]=new Y(be,Ot,It,Fe,Float32Array),pe&&console.timeEnd(Re);for(var Ke=Ce;Ke>=ke;Ke--){var or=+Date.now();be=this._cluster(be,Ke),this.trees[Ke]=new Y(be,Ot,It,Fe,Float32Array),pe&&console.log("z%d: %d clusters in %dms",Ke,be.length,+Date.now()-or)}return pe&&console.timeEnd("total time"),this},et.prototype.getClusters=function(Xt,ie){var pe=((Xt[0]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,Xt[1])),Ce=Xt[2]===180?180:((Xt[2]+180)%360+360)%360-180,Fe=Math.max(-90,Math.min(90,Xt[3]));if(Xt[2]-Xt[0]>=360)pe=-180,Ce=180;else if(pe>Ce){var Re=this.getClusters([pe,ke,180,Fe],ie),be=this.getClusters([-180,ke,Ce,Fe],ie);return Re.concat(be)}for(var Ge=this.trees[this._limitZoom(ie)],Ke=Ge.range(Ct(pe),gt(Fe),Ct(Ce),gt(ke)),or=[],sr=0,zt=Ke;sr<zt.length;sr+=1){var Ut=zt[sr],Me=Ge.points[Ut];or.push(Me.numPoints?yt(Me):this.points[Me.index])}return or},et.prototype.getChildren=function(Xt){var ie=this._getOriginId(Xt),pe=this._getOriginZoom(Xt),ke="No cluster with the specified id.",Ce=this.trees[pe];if(!Ce)throw new Error(ke);var Fe=Ce.points[ie];if(!Fe)throw new Error(ke);for(var Re=this.options.radius/(this.options.extent*Math.pow(2,pe-1)),be=Ce.within(Fe.x,Fe.y,Re),Ge=[],Ke=0,or=be;Ke<or.length;Ke+=1){var sr=or[Ke],zt=Ce.points[sr];zt.parentId===Xt&&Ge.push(zt.numPoints?yt(zt):this.points[zt.index])}if(Ge.length===0)throw new Error(ke);return Ge},et.prototype.getLeaves=function(Xt,ie,pe){ie=ie||10,pe=pe||0;var ke=[];return this._appendLeaves(ke,Xt,ie,pe,0),ke},et.prototype.getTile=function(Xt,ie,pe){var ke=this.trees[this._limitZoom(Xt)],Ce=Math.pow(2,Xt),Fe=this.options,Re=Fe.extent,be=Fe.radius,Ge=be/Re,Ke=(pe-Ge)/Ce,or=(pe+1+Ge)/Ce,sr={features:[]};return this._addTileFeatures(ke.range((ie-Ge)/Ce,Ke,(ie+1+Ge)/Ce,or),ke.points,ie,pe,Ce,sr),ie===0&&this._addTileFeatures(ke.range(1-Ge/Ce,Ke,1,or),ke.points,Ce,pe,Ce,sr),ie===Ce-1&&this._addTileFeatures(ke.range(0,Ke,Ge/Ce,or),ke.points,-1,pe,Ce,sr),sr.features.length?sr:null},et.prototype.getClusterExpansionZoom=function(Xt){for(var ie=this._getOriginZoom(Xt)-1;ie<=this.options.maxZoom;){var pe=this.getChildren(Xt);if(ie++,pe.length!==1)break;Xt=pe[0].properties.cluster_id}return ie},et.prototype._appendLeaves=function(Xt,ie,pe,ke,Ce){for(var Fe=this.getChildren(ie),Re=0,be=Fe;Re<be.length;Re+=1){var Ge=be[Re],Ke=Ge.properties;if(Ke&&Ke.cluster?Ce+Ke.point_count<=ke?Ce+=Ke.point_count:Ce=this._appendLeaves(Xt,Ke.cluster_id,pe,ke,Ce):Ce<ke?Ce++:Xt.push(Ge),Xt.length===pe)break}return Ce},et.prototype._addTileFeatures=function(Xt,ie,pe,ke,Ce,Fe){for(var Re=0,be=Xt;Re<be.length;Re+=1){var Ge=be[Re],Ke=ie[Ge],or=Ke.numPoints,sr={type:1,geometry:[[Math.round(this.options.extent*(Ke.x*Ce-pe)),Math.round(this.options.extent*(Ke.y*Ce-ke))]],tags:or?xt(Ke):this.points[Ke.index].properties},zt=void 0;or?zt=Ke.id:this.options.generateId?zt=Ke.index:this.points[Ke.index].id&&(zt=this.points[Ke.index].id),zt!==void 0&&(sr.id=zt),Fe.features.push(sr)}},et.prototype._limitZoom=function(Xt){return Math.max(this.options.minZoom,Math.min(+Xt,this.options.maxZoom+1))},et.prototype._cluster=function(Xt,ie){for(var pe=[],ke=this.options,Ce=ke.radius,Fe=ke.extent,Re=ke.reduce,be=ke.minPoints,Ge=Ce/(Fe*Math.pow(2,ie)),Ke=0;Ke<Xt.length;Ke++){var or=Xt[Ke];if(!(or.zoom<=ie)){or.zoom=ie;for(var sr=this.trees[ie+1],zt=sr.within(or.x,or.y,Ge),Ut=or.numPoints||1,Me=Ut,Te=0,qe=zt;Te<qe.length;Te+=1){var Qe=qe[Te],Je=sr.points[Qe];Je.zoom>ie&&(Me+=Je.numPoints||1)}if(Me>=be){for(var We=or.x*Ut,Oe=or.y*Ut,rr=Re&&Ut>1?this._map(or,!0):null,cr=(Ke<<5)+(ie+1)+this.points.length,lr=0,nr=zt;lr<nr.length;lr+=1){var Sr=nr[lr],kr=sr.points[Sr];if(!(kr.zoom<=ie)){kr.zoom=ie;var Mr=kr.numPoints||1;We+=kr.x*Mr,Oe+=kr.y*Mr,kr.parentId=cr,Re&&(rr||(rr=this._map(or,!0)),Re(rr,this._map(kr)))}}or.parentId=cr,pe.push(ct(We/Me,Oe/Me,cr,Me,rr))}else if(pe.push(or),Me>1)for(var rn=0,Ur=zt;rn<Ur.length;rn+=1){var pn=Ur[rn],yn=sr.points[pn];yn.zoom<=ie||(yn.zoom=ie,pe.push(yn))}}}return pe},et.prototype._getOriginId=function(Xt){return Xt-this.points.length>>5},et.prototype._getOriginZoom=function(Xt){return(Xt-this.points.length)%32},et.prototype._map=function(Xt,ie){if(Xt.numPoints)return ie?At({},Xt.properties):Xt.properties;var pe=this.points[Xt.index].properties,ke=this.options.map(pe);return ie&&ke===pe?At({},ke):ke};function ct(Xt,ie,pe,ke,Ce){return{x:Xt,y:ie,zoom:1/0,id:pe,parentId:-1,numPoints:ke,properties:Ce}}function ft(Xt,ie){var pe=Xt.geometry.coordinates,ke=pe[0],Ce=pe[1];return{x:Ct(ke),y:gt(Ce),zoom:1/0,index:ie,parentId:-1}}function yt(Xt){return{type:"Feature",id:Xt.id,properties:xt(Xt),geometry:{type:"Point",coordinates:[mt(Xt.x),vt(Xt.y)]}}}function xt(Xt){var ie=Xt.numPoints,pe=ie>=1e4?Math.round(ie/1e3)+"k":ie>=1e3?Math.round(ie/100)/10+"k":ie;return At(At({},Xt.properties),{cluster:!0,cluster_id:Xt.id,point_count:ie,point_count_abbreviated:pe})}function Ct(Xt){return Xt/360+.5}function gt(Xt){var ie=Math.sin(Xt*Math.PI/180),pe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return pe<0?0:pe>1?1:pe}function mt(Xt){return(Xt-.5)*360}function vt(Xt){var ie=(180-Xt*360)*Math.PI/180;return 360*Math.atan(Math.exp(ie))/Math.PI-90}function At(Xt,ie){for(var pe in ie)Xt[pe]=ie[pe];return Xt}function Ot(Xt){return Xt.x}function It(Xt){return Xt.y}function St(Xt,ie,pe,ke){for(var Ce=ke,Fe=pe-ie>>1,Re=pe-ie,be,Ge=Xt[ie],Ke=Xt[ie+1],or=Xt[pe],sr=Xt[pe+1],zt=ie+3;zt<pe;zt+=3){var Ut=Bt(Xt[zt],Xt[zt+1],Ge,Ke,or,sr);if(Ut>Ce)be=zt,Ce=Ut;else if(Ut===Ce){var Me=Math.abs(zt-Fe);Me<Re&&(be=zt,Re=Me)}}Ce>ke&&(be-ie>3&&St(Xt,ie,be,ke),Xt[be+2]=Ce,pe-be>3&&St(Xt,be,pe,ke))}function Bt(Xt,ie,pe,ke,Ce,Fe){var Re=Ce-pe,be=Fe-ke;if(Re!==0||be!==0){var Ge=((Xt-pe)*Re+(ie-ke)*be)/(Re*Re+be*be);Ge>1?(pe=Ce,ke=Fe):Ge>0&&(pe+=Re*Ge,ke+=be*Ge)}return Re=Xt-pe,be=ie-ke,Re*Re+be*be}function re(Xt,ie,pe,ke){var Ce={id:typeof Xt>"u"?null:Xt,type:ie,geometry:pe,tags:ke,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Yt(Ce),Ce}function Yt(Xt){var ie=Xt.geometry,pe=Xt.type;if(pe==="Point"||pe==="MultiPoint"||pe==="LineString")he(Xt,ie);else if(pe==="Polygon"||pe==="MultiLineString")for(var ke=0;ke<ie.length;ke++)he(Xt,ie[ke]);else if(pe==="MultiPolygon")for(ke=0;ke<ie.length;ke++)for(var Ce=0;Ce<ie[ke].length;Ce++)he(Xt,ie[ke][Ce])}function he(Xt,ie){for(var pe=0;pe<ie.length;pe+=3)Xt.minX=Math.min(Xt.minX,ie[pe]),Xt.minY=Math.min(Xt.minY,ie[pe+1]),Xt.maxX=Math.max(Xt.maxX,ie[pe]),Xt.maxY=Math.max(Xt.maxY,ie[pe+1])}function Zt(Xt,ie){var pe=[];if(Xt.type==="FeatureCollection")for(var ke=0;ke<Xt.features.length;ke++)ae(pe,Xt.features[ke],ie,ke);else Xt.type==="Feature"?ae(pe,Xt,ie):ae(pe,{geometry:Xt},ie);return pe}function ae(Xt,ie,pe,ke){if(ie.geometry){var Ce=ie.geometry.coordinates,Fe=ie.geometry.type,Re=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2),be=[],Ge=ie.id;if(pe.promoteId?Ge=ie.properties[pe.promoteId]:pe.generateId&&(Ge=ke||0),Fe==="Point")oe(Ce,be);else if(Fe==="MultiPoint")for(var Ke=0;Ke<Ce.length;Ke++)oe(Ce[Ke],be);else if(Fe==="LineString")ce(Ce,be,Re,!1);else if(Fe==="MultiLineString")if(pe.lineMetrics){for(Ke=0;Ke<Ce.length;Ke++)be=[],ce(Ce[Ke],be,Re,!1),Xt.push(re(Ge,"LineString",be,ie.properties));return}else ue(Ce,be,Re,!1);else if(Fe==="Polygon")ue(Ce,be,Re,!0);else if(Fe==="MultiPolygon")for(Ke=0;Ke<Ce.length;Ke++){var or=[];ue(Ce[Ke],or,Re,!0),be.push(or)}else if(Fe==="GeometryCollection"){for(Ke=0;Ke<ie.geometry.geometries.length;Ke++)ae(Xt,{id:Ge,geometry:ie.geometry.geometries[Ke],properties:ie.properties},pe,ke);return}else throw new Error("Input data is not a valid GeoJSON object.");Xt.push(re(Ge,Fe,be,ie.properties))}}function oe(Xt,ie){ie.push(ye(Xt[0])),ie.push(Tt(Xt[1])),ie.push(0)}function ce(Xt,ie,pe,ke){for(var Ce,Fe,Re=0,be=0;be<Xt.length;be++){var Ge=ye(Xt[be][0]),Ke=Tt(Xt[be][1]);ie.push(Ge),ie.push(Ke),ie.push(0),be>0&&(ke?Re+=(Ce*Ke-Ge*Fe)/2:Re+=Math.sqrt(Math.pow(Ge-Ce,2)+Math.pow(Ke-Fe,2))),Ce=Ge,Fe=Ke}var or=ie.length-3;ie[2]=1,St(ie,0,or,pe),ie[or+2]=1,ie.size=Math.abs(Re),ie.start=0,ie.end=ie.size}function ue(Xt,ie,pe,ke){for(var Ce=0;Ce<Xt.length;Ce++){var Fe=[];ce(Xt[Ce],Fe,pe,ke),ie.push(Fe)}}function ye(Xt){return Xt/360+.5}function Tt(Xt){var ie=Math.sin(Xt*Math.PI/180),pe=.5-.25*Math.log((1+ie)/(1-ie))/Math.PI;return pe<0?0:pe>1?1:pe}function Ft(Xt,ie,pe,ke,Ce,Fe,Re,be){if(pe/=ie,ke/=ie,Fe>=pe&&Re<ke)return Xt;if(Re<pe||Fe>=ke)return null;for(var Ge=[],Ke=0;Ke<Xt.length;Ke++){var or=Xt[Ke],sr=or.geometry,zt=or.type,Ut=Ce===0?or.minX:or.minY,Me=Ce===0?or.maxX:or.maxY;if(Ut>=pe&&Me<ke){Ge.push(or);continue}else if(Me<pe||Ut>=ke)continue;var Te=[];if(zt==="Point"||zt==="MultiPoint")$t(sr,Te,pe,ke,Ce);else if(zt==="LineString")Vt(sr,Te,pe,ke,Ce,!1,be.lineMetrics);else if(zt==="MultiLineString")Mt(sr,Te,pe,ke,Ce,!1);else if(zt==="Polygon")Mt(sr,Te,pe,ke,Ce,!0);else if(zt==="MultiPolygon")for(var qe=0;qe<sr.length;qe++){var Qe=[];Mt(sr[qe],Qe,pe,ke,Ce,!0),Qe.length&&Te.push(Qe)}if(Te.length){if(be.lineMetrics&&zt==="LineString"){for(qe=0;qe<Te.length;qe++)Ge.push(re(or.id,zt,Te[qe],or.tags));continue}(zt==="LineString"||zt==="MultiLineString")&&(Te.length===1?(zt="LineString",Te=Te[0]):zt="MultiLineString"),(zt==="Point"||zt==="MultiPoint")&&(zt=Te.length===3?"Point":"MultiPoint"),Ge.push(re(or.id,zt,Te,or.tags))}}return Ge.length?Ge:null}function $t(Xt,ie,pe,ke,Ce){for(var Fe=0;Fe<Xt.length;Fe+=3){var Re=Xt[Fe+Ce];Re>=pe&&Re<=ke&&(ie.push(Xt[Fe]),ie.push(Xt[Fe+1]),ie.push(Xt[Fe+2]))}}function Vt(Xt,ie,pe,ke,Ce,Fe,Re){for(var be=Nt(Xt),Ge=Ce===0?Dt:dt,Ke=Xt.start,or,sr,zt=0;zt<Xt.length-3;zt+=3){var Ut=Xt[zt],Me=Xt[zt+1],Te=Xt[zt+2],qe=Xt[zt+3],Qe=Xt[zt+4],Je=Ce===0?Ut:Me,We=Ce===0?qe:Qe,Oe=!1;Re&&(or=Math.sqrt(Math.pow(Ut-qe,2)+Math.pow(Me-Qe,2))),Je<pe?We>pe&&(sr=Ge(be,Ut,Me,qe,Qe,pe),Re&&(be.start=Ke+or*sr)):Je>ke?We<ke&&(sr=Ge(be,Ut,Me,qe,Qe,ke),Re&&(be.start=Ke+or*sr)):Et(be,Ut,Me,Te),We<pe&&Je>=pe&&(sr=Ge(be,Ut,Me,qe,Qe,pe),Oe=!0),We>ke&&Je<=ke&&(sr=Ge(be,Ut,Me,qe,Qe,ke),Oe=!0),!Fe&&Oe&&(Re&&(be.end=Ke+or*sr),ie.push(be),be=Nt(Xt)),Re&&(Ke+=or)}var rr=Xt.length-3;Ut=Xt[rr],Me=Xt[rr+1],Te=Xt[rr+2],Je=Ce===0?Ut:Me,Je>=pe&&Je<=ke&&Et(be,Ut,Me,Te),rr=be.length-3,Fe&&rr>=3&&(be[rr]!==be[0]||be[rr+1]!==be[1])&&Et(be,be[0],be[1],be[2]),be.length&&ie.push(be)}function Nt(Xt){var ie=[];return ie.size=Xt.size,ie.start=Xt.start,ie.end=Xt.end,ie}function Mt(Xt,ie,pe,ke,Ce,Fe){for(var Re=0;Re<Xt.length;Re++)Vt(Xt[Re],ie,pe,ke,Ce,Fe,!1)}function Et(Xt,ie,pe,ke){Xt.push(ie),Xt.push(pe),Xt.push(ke)}function Dt(Xt,ie,pe,ke,Ce,Fe){var Re=(Fe-ie)/(ke-ie);return Xt.push(Fe),Xt.push(pe+(Ce-pe)*Re),Xt.push(1),Re}function dt(Xt,ie,pe,ke,Ce,Fe){var Re=(Fe-pe)/(Ce-pe);return Xt.push(ie+(ke-ie)*Re),Xt.push(Fe),Xt.push(1),Re}function ht(Xt,ie){var pe=ie.buffer/ie.extent,ke=Xt,Ce=Ft(Xt,1,-1-pe,pe,0,-1,2,ie),Fe=Ft(Xt,1,1-pe,2+pe,0,-1,2,ie);return(Ce||Fe)&&(ke=Ft(Xt,1,-pe,1+pe,0,-1,2,ie)||[],Ce&&(ke=bt(Ce,1).concat(ke)),Fe&&(ke=ke.concat(bt(Fe,-1)))),ke}function bt(Xt,ie){for(var pe=[],ke=0;ke<Xt.length;ke++){var Ce=Xt[ke],Fe=Ce.type,Re;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")Re=Pt(Ce.geometry,ie);else if(Fe==="MultiLineString"||Fe==="Polygon"){Re=[];for(var be=0;be<Ce.geometry.length;be++)Re.push(Pt(Ce.geometry[be],ie))}else if(Fe==="MultiPolygon")for(Re=[],be=0;be<Ce.geometry.length;be++){for(var Ge=[],Ke=0;Ke<Ce.geometry[be].length;Ke++)Ge.push(Pt(Ce.geometry[be][Ke],ie));Re.push(Ge)}pe.push(re(Ce.id,Fe,Re,Ce.tags))}return pe}function Pt(Xt,ie){var pe=[];pe.size=Xt.size,Xt.start!==void 0&&(pe.start=Xt.start,pe.end=Xt.end);for(var ke=0;ke<Xt.length;ke+=3)pe.push(Xt[ke]+ie,Xt[ke+1],Xt[ke+2]);return pe}function Gt(Xt,ie){if(Xt.transformed)return Xt;var pe=1<<Xt.z,ke=Xt.x,Ce=Xt.y,Fe,Re,be;for(Fe=0;Fe<Xt.features.length;Fe++){var Ge=Xt.features[Fe],Ke=Ge.geometry,or=Ge.type;if(Ge.geometry=[],or===1)for(Re=0;Re<Ke.length;Re+=2)Ge.geometry.push(te(Ke[Re],Ke[Re+1],ie,pe,ke,Ce));else for(Re=0;Re<Ke.length;Re++){var sr=[];for(be=0;be<Ke[Re].length;be+=2)sr.push(te(Ke[Re][be],Ke[Re][be+1],ie,pe,ke,Ce));Ge.geometry.push(sr)}}return Xt.transformed=!0,Xt}function te(Xt,ie,pe,ke,Ce,Fe){return[Math.round(pe*(Xt*ke-Ce)),Math.round(pe*(ie*ke-Fe))]}function ne(Xt,ie,pe,ke,Ce){for(var Fe=ie===Ce.maxZoom?0:Ce.tolerance/((1<<ie)*Ce.extent),Re={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:pe,y:ke,z:ie,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},be=0;be<Xt.length;be++){Re.numFeatures++,je(Re,Xt[be],Fe,Ce);var Ge=Xt[be].minX,Ke=Xt[be].minY,or=Xt[be].maxX,sr=Xt[be].maxY;Ge<Re.minX&&(Re.minX=Ge),Ke<Re.minY&&(Re.minY=Ke),or>Re.maxX&&(Re.maxX=or),sr>Re.maxY&&(Re.maxY=sr)}return Re}function je(Xt,ie,pe,ke){var Ce=ie.geometry,Fe=ie.type,Re=[];if(Fe==="Point"||Fe==="MultiPoint")for(var be=0;be<Ce.length;be+=3)Re.push(Ce[be]),Re.push(Ce[be+1]),Xt.numPoints++,Xt.numSimplified++;else if(Fe==="LineString")Ne(Re,Ce,Xt,pe,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(be=0;be<Ce.length;be++)Ne(Re,Ce[be],Xt,pe,Fe==="Polygon",be===0);else if(Fe==="MultiPolygon")for(var Ge=0;Ge<Ce.length;Ge++){var Ke=Ce[Ge];for(be=0;be<Ke.length;be++)Ne(Re,Ke[be],Xt,pe,!0,be===0)}if(Re.length){var or=ie.tags||null;if(Fe==="LineString"&&ke.lineMetrics){or={};for(var sr in ie.tags)or[sr]=ie.tags[sr];or.mapbox_clip_start=Ce.start/Ce.size,or.mapbox_clip_end=Ce.end/Ce.size}var zt={geometry:Re,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:or};ie.id!==null&&(zt.id=ie.id),Xt.features.push(zt)}}function Ne(Xt,ie,pe,ke,Ce,Fe){var Re=ke*ke;if(ke>0&&ie.size<(Ce?Re:ke)){pe.numPoints+=ie.length/3;return}for(var be=[],Ge=0;Ge<ie.length;Ge+=3)(ke===0||ie[Ge+2]>Re)&&(pe.numSimplified++,be.push(ie[Ge]),be.push(ie[Ge+1])),pe.numPoints++;Ce&&ge(be,Fe),Xt.push(be)}function ge(Xt,ie){for(var pe=0,ke=0,Ce=Xt.length,Fe=Ce-2;ke<Ce;Fe=ke,ke+=2)pe+=(Xt[ke]-Xt[Fe])*(Xt[ke+1]+Xt[Fe+1]);if(pe>0===ie)for(ke=0,Ce=Xt.length;ke<Ce/2;ke+=2){var Re=Xt[ke],be=Xt[ke+1];Xt[ke]=Xt[Ce-2-ke],Xt[ke+1]=Xt[Ce-1-ke],Xt[Ce-2-ke]=Re,Xt[Ce-1-ke]=be}}function _e(Xt,ie){return new De(Xt,ie)}function De(Xt,ie){ie=this.options=fe(Object.create(this.options),ie);var pe=ie.debug;if(pe&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");var ke=Zt(Xt,ie);this.tiles={},this.tileCoords=[],pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ke=ht(ke,ie),ke.length&&this.splitTile(ke,0,0,0),pe&&(ke.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}De.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},De.prototype.splitTile=function(Xt,ie,pe,ke,Ce,Fe,Re){for(var be=[Xt,ie,pe,ke],Ge=this.options,Ke=Ge.debug;be.length;){ke=be.pop(),pe=be.pop(),ie=be.pop(),Xt=be.pop();var or=1<<ie,sr=hr(ie,pe,ke),zt=this.tiles[sr];if(!zt&&(Ke>1&&console.time("creation"),zt=this.tiles[sr]=ne(Xt,ie,pe,ke,Ge),this.tileCoords.push({z:ie,x:pe,y:ke}),Ke)){Ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,pe,ke,zt.numFeatures,zt.numPoints,zt.numSimplified),console.timeEnd("creation"));var Ut="z"+ie;this.stats[Ut]=(this.stats[Ut]||0)+1,this.total++}if(zt.source=Xt,Ce){if(ie===Ge.maxZoom||ie===Ce)continue;var Me=1<<Ce-ie;if(pe!==Math.floor(Fe/Me)||ke!==Math.floor(Re/Me))continue}else if(ie===Ge.indexMaxZoom||zt.numPoints<=Ge.indexMaxPoints)continue;if(zt.source=null,Xt.length!==0){Ke>1&&console.time("clipping");var Te=.5*Ge.buffer/Ge.extent,qe=.5-Te,Qe=.5+Te,Je=1+Te,We,Oe,rr,cr,lr,nr;We=Oe=rr=cr=null,lr=Ft(Xt,or,pe-Te,pe+Qe,0,zt.minX,zt.maxX,Ge),nr=Ft(Xt,or,pe+qe,pe+Je,0,zt.minX,zt.maxX,Ge),Xt=null,lr&&(We=Ft(lr,or,ke-Te,ke+Qe,1,zt.minY,zt.maxY,Ge),Oe=Ft(lr,or,ke+qe,ke+Je,1,zt.minY,zt.maxY,Ge),lr=null),nr&&(rr=Ft(nr,or,ke-Te,ke+Qe,1,zt.minY,zt.maxY,Ge),cr=Ft(nr,or,ke+qe,ke+Je,1,zt.minY,zt.maxY,Ge),nr=null),Ke>1&&console.timeEnd("clipping"),be.push(We||[],ie+1,pe*2,ke*2),be.push(Oe||[],ie+1,pe*2,ke*2+1),be.push(rr||[],ie+1,pe*2+1,ke*2),be.push(cr||[],ie+1,pe*2+1,ke*2+1)}}},De.prototype.getTile=function(Xt,ie,pe){var ke=this.options,Ce=ke.extent,Fe=ke.debug;if(Xt<0||Xt>24)return null;var Re=1<<Xt;ie=(ie%Re+Re)%Re;var be=hr(Xt,ie,pe);if(this.tiles[be])return Gt(this.tiles[be],Ce);Fe>1&&console.log("drilling down to z%d-%d-%d",Xt,ie,pe);for(var Ge=Xt,Ke=ie,or=pe,sr;!sr&&Ge>0;)Ge--,Ke=Math.floor(Ke/2),or=Math.floor(or/2),sr=this.tiles[hr(Ge,Ke,or)];return!sr||!sr.source?null:(Fe>1&&console.log("found parent tile z%d-%d-%d",Ge,Ke,or),Fe>1&&console.time("drilling down"),this.splitTile(sr.source,Ge,Ke,or,Xt,ie,pe),Fe>1&&console.timeEnd("drilling down"),this.tiles[be]?Gt(this.tiles[be],Ce):null)};function hr(Xt,ie,pe){return((1<<Xt)*pe+ie)*32+Xt}function fe(Xt,ie){for(var pe in ie)Xt[pe]=ie[pe];return Xt}function Be(Xt,ie){var pe=Xt.tileID.canonical;if(!this._geoJSONIndex)return ie(null,null);var ke=this._geoJSONIndex.getTile(pe.z,pe.x,pe.y);if(!ke)return ie(null,null);var Ce=new k(ke.features),Fe=m(Ce);(Fe.byteOffset!==0||Fe.byteLength!==Fe.buffer.byteLength)&&(Fe=new Uint8Array(Fe)),ie(null,{vectorTile:Ce,rawData:Fe.buffer})}var He=function(Xt){function ie(pe,ke,Ce,Fe){Xt.call(this,pe,ke,Ce,Be),Fe&&(this.loadGeoJSON=Fe)}return Xt&&(ie.__proto__=Xt),ie.prototype=Object.create(Xt&&Xt.prototype),ie.prototype.constructor=ie,ie.prototype.loadData=function(pe,ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ke,this._pendingLoadDataParams=pe,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ie.prototype._loadData=function(){var pe=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var ke=this._pendingCallback,Ce=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Fe=Ce&&Ce.request&&Ce.request.collectResourceTiming?new i.RequestPerformance(Ce.request):!1;this.loadGeoJSON(Ce,function(Re,be){if(Re||!be)return ke(Re);if(typeof be!="object")return ke(new Error("Input data given to '"+Ce.source+"' is not a valid GeoJSON object."));h(be,!0);try{if(Ce.filter){var Ge=i.createExpression(Ce.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ge.result==="error")throw new Error(Ge.value.map(function(zt){return zt.key+": "+zt.message}).join(", "));var Ke=be.features.filter(function(zt){return Ge.value.evaluate({zoom:0},zt)});be={type:"FeatureCollection",features:Ke}}pe._geoJSONIndex=Ce.cluster?new et(pr(Ce)).load(be.features):_e(be,Ce.geojsonVtOptions)}catch(zt){return ke(zt)}pe.loaded={};var or={};if(Fe){var sr=Fe.finish();sr&&(or.resourceTiming={},or.resourceTiming[Ce.source]=JSON.parse(JSON.stringify(sr)))}ke(null,or)})}},ie.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ie.prototype.reloadTile=function(pe,ke){var Ce=this.loaded,Fe=pe.uid;return Ce&&Ce[Fe]?Xt.prototype.reloadTile.call(this,pe,ke):this.loadTile(pe,ke)},ie.prototype.loadGeoJSON=function(pe,ke){if(pe.request)i.getJSON(pe.request,ke);else if(typeof pe.data=="string")try{return ke(null,JSON.parse(pe.data))}catch{return ke(new Error("Input data given to '"+pe.source+"' is not a valid GeoJSON object."))}else return ke(new Error("Input data given to '"+pe.source+"' is not a valid GeoJSON object."))},ie.prototype.removeSource=function(pe,ke){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ke()},ie.prototype.getClusterExpansionZoom=function(pe,ke){try{ke(null,this._geoJSONIndex.getClusterExpansionZoom(pe.clusterId))}catch(Ce){ke(Ce)}},ie.prototype.getClusterChildren=function(pe,ke){try{ke(null,this._geoJSONIndex.getChildren(pe.clusterId))}catch(Ce){ke(Ce)}},ie.prototype.getClusterLeaves=function(pe,ke){try{ke(null,this._geoJSONIndex.getLeaves(pe.clusterId,pe.limit,pe.offset))}catch(Ce){ke(Ce)}},ie}(o);function pr(Xt){var ie=Xt.superclusterOptions,pe=Xt.clusterProperties;if(!pe||!ie)return ie;for(var ke={},Ce={},Fe={accumulated:null,zoom:0},Re={properties:null},be=Object.keys(pe),Ge=0,Ke=be;Ge<Ke.length;Ge+=1){var or=Ke[Ge],sr=pe[or],zt=sr[0],Ut=sr[1],Me=i.createExpression(Ut),Te=i.createExpression(typeof zt=="string"?[zt,["accumulated"],["get",or]]:zt);ke[or]=Me.value,Ce[or]=Te.value}return ie.map=function(qe){Re.properties=qe;for(var Qe={},Je=0,We=be;Je<We.length;Je+=1){var Oe=We[Je];Qe[Oe]=ke[Oe].evaluate(Fe,Re)}return Qe},ie.reduce=function(qe,Qe){Re.properties=Qe;for(var Je=0,We=be;Je<We.length;Je+=1){var Oe=We[Je];Fe.accumulated=qe[Oe],qe[Oe]=Ce[Oe].evaluate(Fe,Re)}},ie}var Ze=function(Xt){var ie=this;this.self=Xt,this.actor=new i.Actor(Xt,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:o,geojson:He},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(pe,ke){if(ie.workerSourceTypes[pe])throw new Error('Worker source with name "'+pe+'" already registered.');ie.workerSourceTypes[pe]=ke},this.self.registerRTLTextPlugin=function(pe){if(i.plugin.isParsed())throw new Error("RTL text plugin already registered.");i.plugin.applyArabicShaping=pe.applyArabicShaping,i.plugin.processBidirectionalText=pe.processBidirectionalText,i.plugin.processStyledBidirectionalText=pe.processStyledBidirectionalText}};return Ze.prototype.setReferrer=function(Xt,ie){this.referrer=ie},Ze.prototype.setImages=function(Xt,ie,pe){this.availableImages[Xt]=ie;for(var ke in this.workerSources[Xt]){var Ce=this.workerSources[Xt][ke];for(var Fe in Ce)Ce[Fe].availableImages=ie}pe()},Ze.prototype.setLayers=function(Xt,ie,pe){this.getLayerIndex(Xt).replace(ie),pe()},Ze.prototype.updateLayers=function(Xt,ie,pe){this.getLayerIndex(Xt).update(ie.layers,ie.removedIds),pe()},Ze.prototype.loadTile=function(Xt,ie,pe){this.getWorkerSource(Xt,ie.type,ie.source).loadTile(ie,pe)},Ze.prototype.loadDEMTile=function(Xt,ie,pe){this.getDEMWorkerSource(Xt,ie.source).loadTile(ie,pe)},Ze.prototype.reloadTile=function(Xt,ie,pe){this.getWorkerSource(Xt,ie.type,ie.source).reloadTile(ie,pe)},Ze.prototype.abortTile=function(Xt,ie,pe){this.getWorkerSource(Xt,ie.type,ie.source).abortTile(ie,pe)},Ze.prototype.removeTile=function(Xt,ie,pe){this.getWorkerSource(Xt,ie.type,ie.source).removeTile(ie,pe)},Ze.prototype.removeDEMTile=function(Xt,ie){this.getDEMWorkerSource(Xt,ie.source).removeTile(ie)},Ze.prototype.removeSource=function(Xt,ie,pe){if(!(!this.workerSources[Xt]||!this.workerSources[Xt][ie.type]||!this.workerSources[Xt][ie.type][ie.source])){var ke=this.workerSources[Xt][ie.type][ie.source];delete this.workerSources[Xt][ie.type][ie.source],ke.removeSource!==void 0?ke.removeSource(ie,pe):pe()}},Ze.prototype.loadWorkerSource=function(Xt,ie,pe){try{this.self.importScripts(ie.url),pe()}catch(ke){pe(ke.toString())}},Ze.prototype.syncRTLPluginState=function(Xt,ie,pe){try{i.plugin.setState(ie);var ke=i.plugin.getPluginURL();if(i.plugin.isLoaded()&&!i.plugin.isParsed()&&ke!=null){this.self.importScripts(ke);var Ce=i.plugin.isParsed(),Fe=Ce?void 0:new Error("RTL Text Plugin failed to import scripts from "+ke);pe(Fe,Ce)}}catch(Re){pe(Re.toString())}},Ze.prototype.getAvailableImages=function(Xt){var ie=this.availableImages[Xt];return ie||(ie=[]),ie},Ze.prototype.getLayerIndex=function(Xt){var ie=this.layerIndexes[Xt];return ie||(ie=this.layerIndexes[Xt]=new d),ie},Ze.prototype.getWorkerSource=function(Xt,ie,pe){var ke=this;if(this.workerSources[Xt]||(this.workerSources[Xt]={}),this.workerSources[Xt][ie]||(this.workerSources[Xt][ie]={}),!this.workerSources[Xt][ie][pe]){var Ce={send:function(Fe,Re,be){ke.actor.send(Fe,Re,be,Xt)}};this.workerSources[Xt][ie][pe]=new this.workerSourceTypes[ie](Ce,this.getLayerIndex(Xt),this.getAvailableImages(Xt))}return this.workerSources[Xt][ie][pe]},Ze.prototype.getDEMWorkerSource=function(Xt,ie){return this.demWorkerSources[Xt]||(this.demWorkerSources[Xt]={}),this.demWorkerSources[Xt][ie]||(this.demWorkerSources[Xt][ie]=new b),this.demWorkerSources[Xt][ie]},Ze.prototype.enforceCacheSizeLimit=function(Xt,ie){i.enforceCacheSizeLimit(ie)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ze(self)),Ze}),E(["./shared"],function(i){var C=i.createCommonjsModule(function(W){W.exports?W.exports=tt:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=tt,window.mapboxgl.notSupportedReason=K);function tt(Br){return!K(Br)}function K(Br){if(!ut())return"not a browser";if(!kt())return"insufficent Array support";if(!jt())return"insufficient Function support";if(!Qt())return"insufficient Object support";if(!de())return"insufficient JSON support";if(!Ee())return"insufficient worker support";if(!Ye())return"insufficient Uint8ClampedArray support";if(!ar())return"insufficient ArrayBuffer support";if(!tr())return"insufficient Canvas/getImageData support";if(!Lr(Br&&Br.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function ut(){return typeof window<"u"&&typeof document<"u"}function kt(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function jt(){return Function.prototype&&Function.prototype.bind}function Qt(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function de(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function Ee(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Br=new Blob([""],{type:"text/javascript"}),Kr=URL.createObjectURL(Br),cn,Fn;try{Fn=new Worker(Kr),cn=!0}catch{cn=!1}return Fn&&Fn.terminate(),URL.revokeObjectURL(Kr),cn}function Ye(){return"Uint8ClampedArray"in window}function ar(){return ArrayBuffer.isView}function tr(){var Br=document.createElement("canvas");Br.width=Br.height=1;var Kr=Br.getContext("2d");if(!Kr)return!1;var cn=Kr.getImageData(0,0,1,1);return cn&&cn.width===Br.width}var vr={};function Lr(Br){return vr[Br]===void 0&&(vr[Br]=Fr(Br)),vr[Br]}tt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Wr(Br){var Kr=document.createElement("canvas"),cn=Object.create(tt.webGLContextAttributes);return cn.failIfMajorPerformanceCaveat=Br,Kr.probablySupportsContext?Kr.probablySupportsContext("webgl",cn)||Kr.probablySupportsContext("experimental-webgl",cn):Kr.supportsContext?Kr.supportsContext("webgl",cn)||Kr.supportsContext("experimental-webgl",cn):Kr.getContext("webgl",cn)||Kr.getContext("experimental-webgl",cn)}function Fr(Br){var Kr=Wr(Br);if(!Kr)return!1;var cn=Kr.createShader(Kr.VERTEX_SHADER);return!cn||Kr.isContextLost()?!1:(Kr.shaderSource(cn,"void main() {}"),Kr.compileShader(cn),Kr.getShaderParameter(cn,Kr.COMPILE_STATUS)===!0)}}),T={};T.create=function(W,tt,K){var ut=i.window.document.createElement(W);return tt!==void 0&&(ut.className=tt),K&&K.appendChild(ut),ut},T.createNS=function(W,tt){var K=i.window.document.createElementNS(W,tt);return K};var v=i.window.document&&i.window.document.documentElement.style;function d(W){if(!v)return W[0];for(var tt=0;tt<W.length;tt++)if(W[tt]in v)return W[tt];return W[0]}var r=d(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),e;T.disableDrag=function(){v&&r&&(e=v[r],v[r]="none")},T.enableDrag=function(){v&&r&&(v[r]=e)};var l=d(["transform","WebkitTransform"]);T.setTransform=function(W,tt){W.style[l]=tt};var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});i.window.addEventListener("test",s,s),i.window.removeEventListener("test",s,s)}catch{n=!1}T.addEventListener=function(W,tt,K,ut){ut===void 0&&(ut={}),"passive"in ut&&n?W.addEventListener(tt,K,ut):W.addEventListener(tt,K,ut.capture)},T.removeEventListener=function(W,tt,K,ut){ut===void 0&&(ut={}),"passive"in ut&&n?W.removeEventListener(tt,K,ut):W.removeEventListener(tt,K,ut.capture)};var o=function(W){W.preventDefault(),W.stopPropagation(),i.window.removeEventListener("click",o,!0)};T.suppressClick=function(){i.window.addEventListener("click",o,!0),i.window.setTimeout(function(){i.window.removeEventListener("click",o,!0)},0)},T.mousePos=function(W,tt){var K=W.getBoundingClientRect();return new i.Point(tt.clientX-K.left-W.clientLeft,tt.clientY-K.top-W.clientTop)},T.touchPos=function(W,tt){for(var K=W.getBoundingClientRect(),ut=[],kt=0;kt<tt.length;kt++)ut.push(new i.Point(tt[kt].clientX-K.left-W.clientLeft,tt[kt].clientY-K.top-W.clientTop));return ut},T.mouseButton=function(W){return typeof i.window.InstallTrigger<"u"&&W.button===2&&W.ctrlKey&&i.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:W.button},T.remove=function(W){W.parentNode&&W.parentNode.removeChild(W)};function p(W,tt,K){var ut,kt,jt,Qt=i.browser.devicePixelRatio>1?"@2x":"",de=i.getJSON(tt.transformRequest(tt.normalizeSpriteURL(W,Qt,".json"),i.ResourceType.SpriteJSON),function(ar,tr){de=null,jt||(jt=ar,ut=tr,Ye())}),Ee=i.getImage(tt.transformRequest(tt.normalizeSpriteURL(W,Qt,".png"),i.ResourceType.SpriteImage),function(ar,tr){Ee=null,jt||(jt=ar,kt=tr,Ye())});function Ye(){if(jt)K(jt);else if(ut&&kt){var ar=i.browser.getImageData(kt),tr={};for(var vr in ut){var Lr=ut[vr],Wr=Lr.width,Fr=Lr.height,Br=Lr.x,Kr=Lr.y,cn=Lr.sdf,Fn=Lr.pixelRatio,Pn=Lr.stretchX,Dn=Lr.stretchY,Nn=Lr.content,Bn=new i.RGBAImage({width:Wr,height:Fr});i.RGBAImage.copy(ar,Bn,{x:Br,y:Kr},{x:0,y:0},{width:Wr,height:Fr}),tr[vr]={data:Bn,pixelRatio:Fn,sdf:cn,stretchX:Pn,stretchY:Dn,content:Nn}}K(null,tr)}}return{cancel:function(){de&&(de.cancel(),de=null),Ee&&(Ee.cancel(),Ee=null)}}}function b(W){var tt=W.userImage;if(tt&&tt.render){var K=tt.render();if(K)return W.data.replace(new Uint8Array(tt.data.buffer)),!0}return!1}var h=1,_=function(W){function tt(){W.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.RGBAImage({width:1,height:1}),this.dirty=!0}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.isLoaded=function(){return this.loaded},tt.prototype.setLoaded=function(K){if(this.loaded!==K&&(this.loaded=K,K)){for(var ut=0,kt=this.requestors;ut<kt.length;ut+=1){var jt=kt[ut],Qt=jt.ids,de=jt.callback;this._notify(Qt,de)}this.requestors=[]}},tt.prototype.getImage=function(K){return this.images[K]},tt.prototype.addImage=function(K,ut){this._validate(K,ut)&&(this.images[K]=ut)},tt.prototype._validate=function(K,ut){var kt=!0;return this._validateStretch(ut.stretchX,ut.data&&ut.data.width)||(this.fire(new i.ErrorEvent(new Error('Image "'+K+'" has invalid "stretchX" value'))),kt=!1),this._validateStretch(ut.stretchY,ut.data&&ut.data.height)||(this.fire(new i.ErrorEvent(new Error('Image "'+K+'" has invalid "stretchY" value'))),kt=!1),this._validateContent(ut.content,ut)||(this.fire(new i.ErrorEvent(new Error('Image "'+K+'" has invalid "content" value'))),kt=!1),kt},tt.prototype._validateStretch=function(K,ut){if(!K)return!0;for(var kt=0,jt=0,Qt=K;jt<Qt.length;jt+=1){var de=Qt[jt];if(de[0]<kt||de[1]<de[0]||ut<de[1])return!1;kt=de[1]}return!0},tt.prototype._validateContent=function(K,ut){return K?!(K.length!==4||K[0]<0||ut.data.width<K[0]||K[1]<0||ut.data.height<K[1]||K[2]<0||ut.data.width<K[2]||K[3]<0||ut.data.height<K[3]||K[2]<K[0]||K[3]<K[1]):!0},tt.prototype.updateImage=function(K,ut){var kt=this.images[K];ut.version=kt.version+1,this.images[K]=ut,this.updatedImages[K]=!0},tt.prototype.removeImage=function(K){var ut=this.images[K];delete this.images[K],delete this.patterns[K],ut.userImage&&ut.userImage.onRemove&&ut.userImage.onRemove()},tt.prototype.listImages=function(){return Object.keys(this.images)},tt.prototype.getImages=function(K,ut){var kt=!0;if(!this.isLoaded())for(var jt=0,Qt=K;jt<Qt.length;jt+=1){var de=Qt[jt];this.images[de]||(kt=!1)}this.isLoaded()||kt?this._notify(K,ut):this.requestors.push({ids:K,callback:ut})},tt.prototype._notify=function(K,ut){for(var kt={},jt=0,Qt=K;jt<Qt.length;jt+=1){var de=Qt[jt];this.images[de]||this.fire(new i.Event("styleimagemissing",{id:de}));var Ee=this.images[de];Ee?kt[de]={data:Ee.data.clone(),pixelRatio:Ee.pixelRatio,sdf:Ee.sdf,version:Ee.version,stretchX:Ee.stretchX,stretchY:Ee.stretchY,content:Ee.content,hasRenderCallback:!!(Ee.userImage&&Ee.userImage.render)}:i.warnOnce('Image "'+de+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ut(null,kt)},tt.prototype.getPixelSize=function(){var K=this.atlasImage,ut=K.width,kt=K.height;return{width:ut,height:kt}},tt.prototype.getPattern=function(K){var ut=this.patterns[K],kt=this.getImage(K);if(!kt)return null;if(ut&&ut.position.version===kt.version)return ut.position;if(ut)ut.position.version=kt.version;else{var jt=kt.data.width+h*2,Qt=kt.data.height+h*2,de={w:jt,h:Qt,x:0,y:0},Ee=new i.ImagePosition(de,kt);this.patterns[K]={bin:de,position:Ee}}return this._updatePatternAtlas(),this.patterns[K].position},tt.prototype.bind=function(K){var ut=K.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.Texture(K,this.atlasImage,ut.RGBA),this.atlasTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)},tt.prototype._updatePatternAtlas=function(){var K=[];for(var ut in this.patterns)K.push(this.patterns[ut].bin);var kt=i.potpack(K),jt=kt.w,Qt=kt.h,de=this.atlasImage;de.resize({width:jt||1,height:Qt||1});for(var Ee in this.patterns){var Ye=this.patterns[Ee],ar=Ye.bin,tr=ar.x+h,vr=ar.y+h,Lr=this.images[Ee].data,Wr=Lr.width,Fr=Lr.height;i.RGBAImage.copy(Lr,de,{x:0,y:0},{x:tr,y:vr},{width:Wr,height:Fr}),i.RGBAImage.copy(Lr,de,{x:0,y:Fr-1},{x:tr,y:vr-1},{width:Wr,height:1}),i.RGBAImage.copy(Lr,de,{x:0,y:0},{x:tr,y:vr+Fr},{width:Wr,height:1}),i.RGBAImage.copy(Lr,de,{x:Wr-1,y:0},{x:tr-1,y:vr},{width:1,height:Fr}),i.RGBAImage.copy(Lr,de,{x:0,y:0},{x:tr+Wr,y:vr},{width:1,height:Fr})}this.dirty=!0},tt.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},tt.prototype.dispatchRenderCallbacks=function(K){for(var ut=0,kt=K;ut<kt.length;ut+=1){var jt=kt[ut];if(!this.callbackDispatchedThisFrame[jt]){this.callbackDispatchedThisFrame[jt]=!0;var Qt=this.images[jt],de=b(Qt);de&&this.updateImage(jt,Qt)}}},tt}(i.Evented);function a(W,tt,K,ut,kt){var jt=tt*256,Qt=jt+255,de=ut.transformRequest(ut.normalizeGlyphsURL(K).replace("{fontstack}",W).replace("{range}",jt+"-"+Qt),i.ResourceType.Glyphs);i.getArrayBuffer(de,function(Ee,Ye){if(Ee)kt(Ee);else if(Ye){for(var ar={},tr=0,vr=i.parseGlyphPBF(Ye);tr<vr.length;tr+=1){var Lr=vr[tr];ar[Lr.id]=Lr}kt(null,ar)}})}var c=k,f=k,x=1e20;function k(W,tt,K,ut,kt,jt){this.fontSize=W||24,this.buffer=tt===void 0?3:tt,this.cutoff=ut||.25,this.fontFamily=kt||"sans-serif",this.fontWeight=jt||"normal",this.radius=K||8;var Qt=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Qt,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Qt*Qt),this.gridInner=new Float64Array(Qt*Qt),this.f=new Float64Array(Qt),this.d=new Float64Array(Qt),this.z=new Float64Array(Qt+1),this.v=new Int16Array(Qt),this.middle=Math.round(Qt/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}k.prototype.draw=function(W){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(W,this.buffer,this.middle);for(var tt=this.ctx.getImageData(0,0,this.size,this.size),K=new Uint8ClampedArray(this.size*this.size),ut=0;ut<this.size*this.size;ut++){var kt=tt.data[ut*4+3]/255;this.gridOuter[ut]=kt===1?0:kt===0?x:Math.pow(Math.max(0,.5-kt),2),this.gridInner[ut]=kt===1?x:kt===0?0:Math.pow(Math.max(0,kt-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),ut=0;ut<this.size*this.size;ut++){var jt=this.gridOuter[ut]-this.gridInner[ut];K[ut]=Math.max(0,Math.min(255,Math.round(255-255*(jt/this.radius+this.cutoff))))}return K};function y(W,tt,K,ut,kt,jt,Qt){for(var de=0;de<tt;de++){for(var Ee=0;Ee<K;Ee++)ut[Ee]=W[Ee*tt+de];for(A(ut,kt,jt,Qt,K),Ee=0;Ee<K;Ee++)W[Ee*tt+de]=kt[Ee]}for(Ee=0;Ee<K;Ee++){for(de=0;de<tt;de++)ut[de]=W[Ee*tt+de];for(A(ut,kt,jt,Qt,tt),de=0;de<tt;de++)W[Ee*tt+de]=Math.sqrt(kt[de])}}function A(W,tt,K,ut,kt){K[0]=0,ut[0]=-x,ut[1]=+x;for(var jt=1,Qt=0;jt<kt;jt++){for(var de=(W[jt]+jt*jt-(W[K[Qt]]+K[Qt]*K[Qt]))/(2*jt-2*K[Qt]);de<=ut[Qt];)Qt--,de=(W[jt]+jt*jt-(W[K[Qt]]+K[Qt]*K[Qt]))/(2*jt-2*K[Qt]);Qt++,K[Qt]=jt,ut[Qt]=de,ut[Qt+1]=+x}for(jt=0,Qt=0;jt<kt;jt++){for(;ut[Qt+1]<jt;)Qt++;tt[jt]=(jt-K[Qt])*(jt-K[Qt])+W[K[Qt]]}}c.default=f;var L=function(W,tt){this.requestManager=W,this.localIdeographFontFamily=tt,this.entries={}};L.prototype.setURL=function(W){this.url=W},L.prototype.getGlyphs=function(W,tt){var K=this,ut=[];for(var kt in W)for(var jt=0,Qt=W[kt];jt<Qt.length;jt+=1){var de=Qt[jt];ut.push({stack:kt,id:de})}i.asyncAll(ut,function(Ee,Ye){var ar=Ee.stack,tr=Ee.id,vr=K.entries[ar];vr||(vr=K.entries[ar]={glyphs:{},requests:{},ranges:{}});var Lr=vr.glyphs[tr];if(Lr!==void 0){Ye(null,{stack:ar,id:tr,glyph:Lr});return}if(Lr=K._tinySDF(vr,ar,tr),Lr){vr.glyphs[tr]=Lr,Ye(null,{stack:ar,id:tr,glyph:Lr});return}var Wr=Math.floor(tr/256);if(Wr*256>65535){Ye(new Error("glyphs > 65535 not supported"));return}if(vr.ranges[Wr]){Ye(null,{stack:ar,id:tr,glyph:Lr});return}var Fr=vr.requests[Wr];Fr||(Fr=vr.requests[Wr]=[],L.loadGlyphRange(ar,Wr,K.url,K.requestManager,function(Br,Kr){if(Kr){for(var cn in Kr)K._doesCharSupportLocalGlyph(+cn)||(vr.glyphs[+cn]=Kr[+cn]);vr.ranges[Wr]=!0}for(var Fn=0,Pn=Fr;Fn<Pn.length;Fn+=1){var Dn=Pn[Fn];Dn(Br,Kr)}delete vr.requests[Wr]})),Fr.push(function(Br,Kr){Br?Ye(Br):Kr&&Ye(null,{stack:ar,id:tr,glyph:Kr[tr]||null})})},function(Ee,Ye){if(Ee)tt(Ee);else if(Ye){for(var ar={},tr=0,vr=Ye;tr<vr.length;tr+=1){var Lr=vr[tr],Wr=Lr.stack,Fr=Lr.id,Br=Lr.glyph;(ar[Wr]||(ar[Wr]={}))[Fr]=Br&&{id:Br.id,bitmap:Br.bitmap.clone(),metrics:Br.metrics}}tt(null,ar)}})},L.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(i.isChar["CJK Unified Ideographs"](W)||i.isChar["Hangul Syllables"](W)||i.isChar.Hiragana(W)||i.isChar.Katakana(W))},L.prototype._tinySDF=function(W,tt,K){var ut=this.localIdeographFontFamily;if(ut&&this._doesCharSupportLocalGlyph(K)){var kt=W.tinySDF;if(!kt){var jt="400";/bold/i.test(tt)?jt="900":/medium/i.test(tt)?jt="500":/light/i.test(tt)&&(jt="200"),kt=W.tinySDF=new L.TinySDF(24,3,8,.25,ut,jt)}return{id:K,bitmap:new i.AlphaImage({width:30,height:30},kt.draw(String.fromCharCode(K))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},L.loadGlyphRange=a,L.TinySDF=c;var u=function(){this.specification=i.styleSpec.light.position};u.prototype.possiblyEvaluate=function(W,tt){return i.sphericalToCartesian(W.expression.evaluate(tt))},u.prototype.interpolate=function(W,tt,K){return{x:i.number(W.x,tt.x,K),y:i.number(W.y,tt.y,K),z:i.number(W.z,tt.z,K)}};var m=new i.Properties({anchor:new i.DataConstantProperty(i.styleSpec.light.anchor),position:new u,color:new i.DataConstantProperty(i.styleSpec.light.color),intensity:new i.DataConstantProperty(i.styleSpec.light.intensity)}),S="-transition",w=function(W){function tt(K){W.call(this),this._transitionable=new i.Transitionable(m),this.setLight(K),this._transitioning=this._transitionable.untransitioned()}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getLight=function(){return this._transitionable.serialize()},tt.prototype.setLight=function(K,ut){if(ut===void 0&&(ut={}),!this._validate(i.validateLight,K,ut))for(var kt in K){var jt=K[kt];i.endsWith(kt,S)?this._transitionable.setTransition(kt.slice(0,-S.length),jt):this._transitionable.setValue(kt,jt)}},tt.prototype.updateTransitions=function(K){this._transitioning=this._transitionable.transitioned(K,this._transitioning)},tt.prototype.hasTransition=function(){return this._transitioning.hasTransition()},tt.prototype.recalculate=function(K){this.properties=this._transitioning.possiblyEvaluate(K)},tt.prototype._validate=function(K,ut,kt){return kt&&kt.validate===!1?!1:i.emitValidationErrors(this,K.call(i.validateStyle,i.extend({value:ut,style:{glyphs:!0,sprite:!0},styleSpec:i.styleSpec})))},tt}(i.Evented),I=function(W,tt){this.width=W,this.height=tt,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};I.prototype.getDash=function(W,tt){var K=W.join(",")+String(tt);return this.dashEntry[K]||(this.dashEntry[K]=this.addDash(W,tt)),this.dashEntry[K]},I.prototype.getDashRanges=function(W,tt,K){var ut=W.length%2===1,kt=[],jt=ut?-W[W.length-1]*K:0,Qt=W[0]*K,de=!0;kt.push({left:jt,right:Qt,isDash:de,zeroLength:W[0]===0});for(var Ee=W[0],Ye=1;Ye<W.length;Ye++){de=!de;var ar=W[Ye];jt=Ee*K,Ee+=ar,Qt=Ee*K,kt.push({left:jt,right:Qt,isDash:de,zeroLength:ar===0})}return kt},I.prototype.addRoundDash=function(W,tt,K){for(var ut=tt/2,kt=-K;kt<=K;kt++)for(var jt=this.nextRow+K+kt,Qt=this.width*jt,de=0,Ee=W[de],Ye=0;Ye<this.width;Ye++){Ye/Ee.right>1&&(Ee=W[++de]);var ar=Math.abs(Ye-Ee.left),tr=Math.abs(Ye-Ee.right),vr=Math.min(ar,tr),Lr=void 0,Wr=kt/K*(ut+1);if(Ee.isDash){var Fr=ut-Math.abs(Wr);Lr=Math.sqrt(vr*vr+Fr*Fr)}else Lr=ut-Math.sqrt(vr*vr+Wr*Wr);this.data[Qt+Ye]=Math.max(0,Math.min(255,Lr+128))}},I.prototype.addRegularDash=function(W){for(var tt=W.length-1;tt>=0;--tt){var K=W[tt],ut=W[tt+1];K.zeroLength?W.splice(tt,1):ut&&ut.isDash===K.isDash&&(ut.left=K.left,W.splice(tt,1))}var kt=W[0],jt=W[W.length-1];kt.isDash===jt.isDash&&(kt.left=jt.left-this.width,jt.right=kt.right+this.width);for(var Qt=this.width*this.nextRow,de=0,Ee=W[de],Ye=0;Ye<this.width;Ye++){Ye/Ee.right>1&&(Ee=W[++de]);var ar=Math.abs(Ye-Ee.left),tr=Math.abs(Ye-Ee.right),vr=Math.min(ar,tr),Lr=Ee.isDash?vr:-vr;this.data[Qt+Ye]=Math.max(0,Math.min(255,Lr+128))}},I.prototype.addDash=function(W,tt){var K=tt?7:0,ut=2*K+1;if(this.nextRow+ut>this.height)return i.warnOnce("LineAtlas out of space"),null;for(var kt=0,jt=0;jt<W.length;jt++)kt+=W[jt];if(kt!==0){var Qt=this.width/kt,de=this.getDashRanges(W,this.width,Qt);tt?this.addRoundDash(de,Qt,K):this.addRegularDash(de)}var Ee={y:(this.nextRow+K+.5)/this.height,height:2*K/this.height,width:kt};return this.nextRow+=ut,this.dirty=!0,Ee},I.prototype.bind=function(W){var tt=W.gl;this.texture?(tt.bindTexture(tt.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,tt.texSubImage2D(tt.TEXTURE_2D,0,0,0,this.width,this.height,tt.ALPHA,tt.UNSIGNED_BYTE,this.data))):(this.texture=tt.createTexture(),tt.bindTexture(tt.TEXTURE_2D,this.texture),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_WRAP_S,tt.REPEAT),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_WRAP_T,tt.REPEAT),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_MIN_FILTER,tt.LINEAR),tt.texParameteri(tt.TEXTURE_2D,tt.TEXTURE_MAG_FILTER,tt.LINEAR),tt.texImage2D(tt.TEXTURE_2D,0,tt.ALPHA,this.width,this.height,0,tt.ALPHA,tt.UNSIGNED_BYTE,this.data))};var O=function W(tt,K){this.workerPool=tt,this.actors=[],this.currentActor=0,this.id=i.uniqueId();for(var ut=this.workerPool.acquire(this.id),kt=0;kt<ut.length;kt++){var jt=ut[kt],Qt=new W.Actor(jt,K,this.id);Qt.name="Worker "+kt,this.actors.push(Qt)}};O.prototype.broadcast=function(W,tt,K){K=K||function(){},i.asyncAll(this.actors,function(ut,kt){ut.send(W,tt,kt)},K)},O.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},O.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},O.Actor=i.Actor;function D(W,tt,K){var ut=function(kt,jt){if(kt)return K(kt);if(jt){var Qt=i.pick(i.extend(jt,W),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);jt.vector_layers&&(Qt.vectorLayers=jt.vector_layers,Qt.vectorLayerIds=Qt.vectorLayers.map(function(de){return de.id})),Qt.tiles=tt.canonicalizeTileset(Qt,W.url),K(null,Qt)}};return W.url?i.getJSON(tt.transformRequest(tt.normalizeSourceURL(W.url),i.ResourceType.Source),ut):i.browser.frame(function(){return ut(null,W)})}var P=function(W,tt,K){this.bounds=i.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=tt||0,this.maxzoom=K||24};P.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},P.prototype.contains=function(W){var tt=Math.pow(2,W.z),K={minX:Math.floor(i.mercatorXfromLng(this.bounds.getWest())*tt),minY:Math.floor(i.mercatorYfromLat(this.bounds.getNorth())*tt),maxX:Math.ceil(i.mercatorXfromLng(this.bounds.getEast())*tt),maxY:Math.ceil(i.mercatorYfromLat(this.bounds.getSouth())*tt)},ut=W.x>=K.minX&&W.x<K.maxX&&W.y>=K.minY&&W.y<K.maxY;return ut};var F=function(W){function tt(K,ut,kt,jt){if(W.call(this),this.id=K,this.dispatcher=kt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.extend(this,i.pick(ut,["url","scheme","tileSize","promoteId"])),this._options=i.extend({type:"vector"},ut),this._collectResourceTiming=ut.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(jt)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var K=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=D(this._options,this.map._requestManager,function(ut,kt){K._tileJSONRequest=null,K._loaded=!0,ut?K.fire(new i.ErrorEvent(ut)):kt&&(i.extend(K,kt),kt.bounds&&(K.tileBounds=new P(kt.bounds,K.minzoom,K.maxzoom)),i.postTurnstileEvent(kt.tiles,K.map._requestManager._customAccessToken),i.postMapLoadEvent(kt.tiles,K.map._getMapId(),K.map._requestManager._skuToken,K.map._requestManager._customAccessToken),K.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),K.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.hasTile=function(K){return!this.tileBounds||this.tileBounds.contains(K.canonical)},tt.prototype.onAdd=function(K){this.map=K,this.load()},tt.prototype.setSourceProperty=function(K){this._tileJSONRequest&&this._tileJSONRequest.cancel(),K();var ut=this.map.style.sourceCaches[this.id];ut.clearTiles(),this.load()},tt.prototype.setTiles=function(K){var ut=this;return this.setSourceProperty(function(){ut._options.tiles=K}),this},tt.prototype.setUrl=function(K){var ut=this;return this.setSourceProperty(function(){ut.url=K,ut._options.url=K}),this},tt.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},tt.prototype.serialize=function(){return i.extend({},this._options)},tt.prototype.loadTile=function(K,ut){var kt=this.map._requestManager.normalizeTileURL(K.tileID.canonical.url(this.tiles,this.scheme)),jt={request:this.map._requestManager.transformRequest(kt,i.ResourceType.Tile),uid:K.uid,tileID:K.tileID,zoom:K.tileID.overscaledZ,tileSize:this.tileSize*K.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};jt.request.collectResourceTiming=this._collectResourceTiming,!K.actor||K.state==="expired"?(K.actor=this.dispatcher.getActor(),K.request=K.actor.send("loadTile",jt,Qt.bind(this))):K.state==="loading"?K.reloadCallback=ut:K.request=K.actor.send("reloadTile",jt,Qt.bind(this));function Qt(de,Ee){if(delete K.request,K.aborted)return ut(null);if(de&&de.status!==404)return ut(de);Ee&&Ee.resourceTiming&&(K.resourceTiming=Ee.resourceTiming),this.map._refreshExpiredTiles&&Ee&&K.setExpiryData(Ee),K.loadVectorData(Ee,this.map.painter),i.cacheEntryPossiblyAdded(this.dispatcher),ut(null),K.reloadCallback&&(this.loadTile(K,K.reloadCallback),K.reloadCallback=null)}},tt.prototype.abortTile=function(K){K.request&&(K.request.cancel(),delete K.request),K.actor&&K.actor.send("abortTile",{uid:K.uid,type:this.type,source:this.id},void 0)},tt.prototype.unloadTile=function(K){K.unloadVectorData(),K.actor&&K.actor.send("removeTile",{uid:K.uid,type:this.type,source:this.id},void 0)},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented),R=function(W){function tt(K,ut,kt,jt){W.call(this),this.id=K,this.dispatcher=kt,this.setEventedParent(jt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.extend({type:"raster"},ut),i.extend(this,i.pick(ut,["url","scheme","tileSize"]))}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var K=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=D(this._options,this.map._requestManager,function(ut,kt){K._tileJSONRequest=null,K._loaded=!0,ut?K.fire(new i.ErrorEvent(ut)):kt&&(i.extend(K,kt),kt.bounds&&(K.tileBounds=new P(kt.bounds,K.minzoom,K.maxzoom)),i.postTurnstileEvent(kt.tiles),i.postMapLoadEvent(kt.tiles,K.map._getMapId(),K.map._requestManager._skuToken),K.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})),K.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})))})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.onAdd=function(K){this.map=K,this.load()},tt.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},tt.prototype.serialize=function(){return i.extend({},this._options)},tt.prototype.hasTile=function(K){return!this.tileBounds||this.tileBounds.contains(K.canonical)},tt.prototype.loadTile=function(K,ut){var kt=this,jt=this.map._requestManager.normalizeTileURL(K.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);K.request=i.getImage(this.map._requestManager.transformRequest(jt,i.ResourceType.Tile),function(Qt,de){if(delete K.request,K.aborted)K.state="unloaded",ut(null);else if(Qt)K.state="errored",ut(Qt);else if(de){kt.map._refreshExpiredTiles&&K.setExpiryData(de),delete de.cacheControl,delete de.expires;var Ee=kt.map.painter.context,Ye=Ee.gl;K.texture=kt.map.painter.getTileTexture(de.width),K.texture?K.texture.update(de,{useMipmap:!0}):(K.texture=new i.Texture(Ee,de,Ye.RGBA,{useMipmap:!0}),K.texture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE,Ye.LINEAR_MIPMAP_NEAREST),Ee.extTextureFilterAnisotropic&&Ye.texParameterf(Ye.TEXTURE_2D,Ee.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ee.extTextureFilterAnisotropicMax)),K.state="loaded",i.cacheEntryPossiblyAdded(kt.dispatcher),ut(null)}})},tt.prototype.abortTile=function(K,ut){K.request&&(K.request.cancel(),delete K.request),ut()},tt.prototype.unloadTile=function(K,ut){K.texture&&this.map.painter.saveTileTexture(K.texture),ut()},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented),B=function(W){function tt(K,ut,kt,jt){W.call(this,K,ut,kt,jt),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({type:"raster-dem"},ut),this.encoding=ut.encoding||"mapbox"}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},tt.prototype.loadTile=function(K,ut){var kt=this.map._requestManager.normalizeTileURL(K.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);K.request=i.getImage(this.map._requestManager.transformRequest(kt,i.ResourceType.Tile),jt.bind(this)),K.neighboringTiles=this._getNeighboringTiles(K.tileID);function jt(de,Ee){if(delete K.request,K.aborted)K.state="unloaded",ut(null);else if(de)K.state="errored",ut(de);else if(Ee){this.map._refreshExpiredTiles&&K.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Ye=i.window.ImageBitmap&&Ee instanceof i.window.ImageBitmap&&i.offscreenCanvasSupported(),ar=Ye?Ee:i.browser.getImageData(Ee,1),tr={uid:K.uid,coord:K.tileID,source:this.id,rawImageData:ar,encoding:this.encoding};(!K.actor||K.state==="expired")&&(K.actor=this.dispatcher.getActor(),K.actor.send("loadDEMTile",tr,Qt.bind(this)))}}function Qt(de,Ee){de&&(K.state="errored",ut(de)),Ee&&(K.dem=Ee,K.needsHillshadePrepare=!0,K.state="loaded",ut(null))}},tt.prototype._getNeighboringTiles=function(K){var ut=K.canonical,kt=Math.pow(2,ut.z),jt=(ut.x-1+kt)%kt,Qt=ut.x===0?K.wrap-1:K.wrap,de=(ut.x+1+kt)%kt,Ee=ut.x+1===kt?K.wrap+1:K.wrap,Ye={};return Ye[new i.OverscaledTileID(K.overscaledZ,Qt,ut.z,jt,ut.y).key]={backfilled:!1},Ye[new i.OverscaledTileID(K.overscaledZ,Ee,ut.z,de,ut.y).key]={backfilled:!1},ut.y>0&&(Ye[new i.OverscaledTileID(K.overscaledZ,Qt,ut.z,jt,ut.y-1).key]={backfilled:!1},Ye[new i.OverscaledTileID(K.overscaledZ,K.wrap,ut.z,ut.x,ut.y-1).key]={backfilled:!1},Ye[new i.OverscaledTileID(K.overscaledZ,Ee,ut.z,de,ut.y-1).key]={backfilled:!1}),ut.y+1<kt&&(Ye[new i.OverscaledTileID(K.overscaledZ,Qt,ut.z,jt,ut.y+1).key]={backfilled:!1},Ye[new i.OverscaledTileID(K.overscaledZ,K.wrap,ut.z,ut.x,ut.y+1).key]={backfilled:!1},Ye[new i.OverscaledTileID(K.overscaledZ,Ee,ut.z,de,ut.y+1).key]={backfilled:!1}),Ye},tt.prototype.unloadTile=function(K){K.demTexture&&this.map.painter.saveTileTexture(K.demTexture),K.fbo&&(K.fbo.destroy(),delete K.fbo),K.dem&&delete K.dem,delete K.neighboringTiles,K.state="unloaded",K.actor&&K.actor.send("removeDEMTile",{uid:K.uid,source:this.id})},tt}(R),N=function(W){function tt(K,ut,kt,jt){W.call(this),this.id=K,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=kt.getActor(),this.setEventedParent(jt),this._data=ut.data,this._options=i.extend({},ut),this._collectResourceTiming=ut.collectResourceTiming,this._resourceTiming=[],ut.maxzoom!==void 0&&(this.maxzoom=ut.maxzoom),ut.type&&(this.type=ut.type),ut.attribution&&(this.attribution=ut.attribution),this.promoteId=ut.promoteId;var Qt=i.EXTENT/this.tileSize;this.workerOptions=i.extend({source:this.id,cluster:ut.cluster||!1,geojsonVtOptions:{buffer:(ut.buffer!==void 0?ut.buffer:128)*Qt,tolerance:(ut.tolerance!==void 0?ut.tolerance:.375)*Qt,extent:i.EXTENT,maxZoom:this.maxzoom,lineMetrics:ut.lineMetrics||!1,generateId:ut.generateId||!1},superclusterOptions:{maxZoom:ut.clusterMaxZoom!==void 0?Math.min(ut.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,ut.clusterMinPoints||2),extent:i.EXTENT,radius:(ut.clusterRadius||50)*Qt,log:!1,generateId:ut.generateId||!1},clusterProperties:ut.clusterProperties,filter:ut.filter},ut.workerOptions)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var K=this;this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ut){if(ut){K.fire(new i.ErrorEvent(ut));return}var kt={dataType:"source",sourceDataType:"metadata"};K._collectResourceTiming&&K._resourceTiming&&K._resourceTiming.length>0&&(kt.resourceTiming=K._resourceTiming,K._resourceTiming=[]),K.fire(new i.Event("data",kt))})},tt.prototype.onAdd=function(K){this.map=K,this.load()},tt.prototype.setData=function(K){var ut=this;return this._data=K,this.fire(new i.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(kt){if(kt){ut.fire(new i.ErrorEvent(kt));return}var jt={dataType:"source",sourceDataType:"content"};ut._collectResourceTiming&&ut._resourceTiming&&ut._resourceTiming.length>0&&(jt.resourceTiming=ut._resourceTiming,ut._resourceTiming=[]),ut.fire(new i.Event("data",jt))}),this},tt.prototype.getClusterExpansionZoom=function(K,ut){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:K,source:this.id},ut),this},tt.prototype.getClusterChildren=function(K,ut){return this.actor.send("geojson.getClusterChildren",{clusterId:K,source:this.id},ut),this},tt.prototype.getClusterLeaves=function(K,ut,kt,jt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:K,limit:ut,offset:kt},jt),this},tt.prototype._updateWorkerData=function(K){var ut=this;this._loaded=!1;var kt=i.extend({},this.workerOptions),jt=this._data;typeof jt=="string"?(kt.request=this.map._requestManager.transformRequest(i.browser.resolveURL(jt),i.ResourceType.Source),kt.request.collectResourceTiming=this._collectResourceTiming):kt.data=JSON.stringify(jt),this.actor.send(this.type+".loadData",kt,function(Qt,de){ut._removed||de&&de.abandoned||(ut._loaded=!0,de&&de.resourceTiming&&de.resourceTiming[ut.id]&&(ut._resourceTiming=de.resourceTiming[ut.id].slice(0)),ut.actor.send(ut.type+".coalesce",{source:kt.source},null),K(Qt))})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.loadTile=function(K,ut){var kt=this,jt=K.actor?"reloadTile":"loadTile";K.actor=this.actor;var Qt={type:this.type,uid:K.uid,tileID:K.tileID,zoom:K.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:i.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};K.request=this.actor.send(jt,Qt,function(de,Ee){return delete K.request,K.unloadVectorData(),K.aborted?ut(null):de?ut(de):(K.loadVectorData(Ee,kt.map.painter,jt==="reloadTile"),ut(null))})},tt.prototype.abortTile=function(K){K.request&&(K.request.cancel(),delete K.request),K.aborted=!0},tt.prototype.unloadTile=function(K){K.unloadVectorData(),this.actor.send("removeTile",{uid:K.uid,type:this.type,source:this.id})},tt.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},tt.prototype.serialize=function(){return i.extend({},this._options,{type:this.type,data:this._data})},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented),G=i.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),X=function(W){function tt(K,ut,kt,jt){W.call(this),this.id=K,this.dispatcher=kt,this.coordinates=ut.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(jt),this.options=ut}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(K,ut){var kt=this;this._loaded=!1,this.fire(new i.Event("dataloading",{dataType:"source"})),this.url=this.options.url,i.getImage(this.map._requestManager.transformRequest(this.url,i.ResourceType.Image),function(jt,Qt){kt._loaded=!0,jt?kt.fire(new i.ErrorEvent(jt)):Qt&&(kt.image=Qt,K&&(kt.coordinates=K),ut&&ut(),kt._finishLoading())})},tt.prototype.loaded=function(){return this._loaded},tt.prototype.updateImage=function(K){var ut=this;return!this.image||!K.url?this:(this.options.url=K.url,this.load(K.coordinates,function(){ut.texture=null}),this)},tt.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"metadata"})))},tt.prototype.onAdd=function(K){this.map=K,this.load()},tt.prototype.setCoordinates=function(K){var ut=this;this.coordinates=K;var kt=K.map(i.MercatorCoordinate.fromLngLat);this.tileID=J(kt),this.minzoom=this.maxzoom=this.tileID.z;var jt=kt.map(function(Qt){return ut.tileID.getTilePoint(Qt)._round()});return this._boundsArray=new i.StructArrayLayout4i8,this._boundsArray.emplaceBack(jt[0].x,jt[0].y,0,0),this._boundsArray.emplaceBack(jt[1].x,jt[1].y,i.EXTENT,0),this._boundsArray.emplaceBack(jt[3].x,jt[3].y,0,i.EXTENT),this._boundsArray.emplaceBack(jt[2].x,jt[2].y,i.EXTENT,i.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.Event("data",{dataType:"source",sourceDataType:"content"})),this},tt.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var K=this.map.painter.context,ut=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new i.Texture(K,this.image,ut.RGBA),this.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE));for(var kt in this.tiles){var jt=this.tiles[kt];jt.state!=="loaded"&&(jt.state="loaded",jt.texture=this.texture)}}},tt.prototype.loadTile=function(K,ut){this.tileID&&this.tileID.equals(K.tileID.canonical)?(this.tiles[String(K.tileID.wrap)]=K,K.buckets={},ut(null)):(K.state="errored",ut(null))},tt.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},tt.prototype.hasTransition=function(){return!1},tt}(i.Evented);function J(W){for(var tt=1/0,K=1/0,ut=-1/0,kt=-1/0,jt=0,Qt=W;jt<Qt.length;jt+=1){var de=Qt[jt];tt=Math.min(tt,de.x),K=Math.min(K,de.y),ut=Math.max(ut,de.x),kt=Math.max(kt,de.y)}var Ee=ut-tt,Ye=kt-K,ar=Math.max(Ee,Ye),tr=Math.max(0,Math.floor(-Math.log(ar)/Math.LN2)),vr=Math.pow(2,tr);return new i.CanonicalTileID(tr,Math.floor((tt+ut)/2*vr),Math.floor((K+kt)/2*vr))}var it=function(W){function tt(K,ut,kt,jt){W.call(this,K,ut,kt,jt),this.roundZoom=!0,this.type="video",this.options=ut}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){var K=this;this._loaded=!1;var ut=this.options;this.urls=[];for(var kt=0,jt=ut.urls;kt<jt.length;kt+=1){var Qt=jt[kt];this.urls.push(this.map._requestManager.transformRequest(Qt,i.ResourceType.Source).url)}i.getVideo(this.urls,function(de,Ee){K._loaded=!0,de?K.fire(new i.ErrorEvent(de)):Ee&&(K.video=Ee,K.video.loop=!0,K.video.addEventListener("playing",function(){K.map.triggerRepaint()}),K.map&&K.video.play(),K._finishLoading())})},tt.prototype.pause=function(){this.video&&this.video.pause()},tt.prototype.play=function(){this.video&&this.video.play()},tt.prototype.seek=function(K){if(this.video){var ut=this.video.seekable;K<ut.start(0)||K>ut.end(0)?this.fire(new i.ErrorEvent(new i.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ut.start(0)+" and "+ut.end(0)+"-second mark."))):this.video.currentTime=K}},tt.prototype.getVideo=function(){return this.video},tt.prototype.onAdd=function(K){this.map||(this.map=K,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},tt.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var K=this.map.painter.context,ut=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),ut.texSubImage2D(ut.TEXTURE_2D,0,0,0,ut.RGBA,ut.UNSIGNED_BYTE,this.video)):(this.texture=new i.Texture(K,this.video,ut.RGBA),this.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE));for(var kt in this.tiles){var jt=this.tiles[kt];jt.state!=="loaded"&&(jt.state="loaded",jt.texture=this.texture)}}},tt.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},tt.prototype.hasTransition=function(){return this.video&&!this.video.paused},tt}(X),nt=function(W){function tt(K,ut,kt,jt){W.call(this,K,ut,kt,jt),ut.coordinates?(!Array.isArray(ut.coordinates)||ut.coordinates.length!==4||ut.coordinates.some(function(Qt){return!Array.isArray(Qt)||Qt.length!==2||Qt.some(function(de){return typeof de!="number"})}))&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+K,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+K,null,'missing required property "coordinates"'))),ut.animate&&typeof ut.animate!="boolean"&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+K,null,'optional "animate" property must be a boolean value'))),ut.canvas?typeof ut.canvas!="string"&&!(ut.canvas instanceof i.window.HTMLCanvasElement)&&this.fire(new i.ErrorEvent(new i.ValidationError("sources."+K,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.ErrorEvent(new i.ValidationError("sources."+K,null,'missing required property "canvas"'))),this.options=ut,this.animate=ut.animate!==void 0?ut.animate:!0}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof i.window.HTMLCanvasElement?this.options.canvas:i.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new i.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},tt.prototype.getCanvas=function(){return this.canvas},tt.prototype.onAdd=function(K){this.map=K,this.load(),this.canvas&&this.animate&&this.play()},tt.prototype.onRemove=function(){this.pause()},tt.prototype.prepare=function(){var K=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,K=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,K=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ut=this.map.painter.context,kt=ut.gl;this.boundsBuffer||(this.boundsBuffer=ut.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=i.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(K||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.Texture(ut,this.canvas,kt.RGBA,{premultiply:!0});for(var jt in this.tiles){var Qt=this.tiles[jt];Qt.state!=="loaded"&&(Qt.state="loaded",Qt.texture=this.texture)}}},tt.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},tt.prototype.hasTransition=function(){return this._playing},tt.prototype._hasInvalidDimensions=function(){for(var K=0,ut=[this.canvas.width,this.canvas.height];K<ut.length;K+=1){var kt=ut[K];if(isNaN(kt)||kt<=0)return!0}return!1},tt}(X),q={vector:F,raster:R,"raster-dem":B,geojson:N,video:it,image:X,canvas:nt},Z=function(W,tt,K,ut){var kt=new q[tt.type](W,tt,K,ut);if(kt.id!==W)throw new Error("Expected Source id to be "+W+" instead of "+kt.id);return i.bindAll(["load","abort","unload","serialize","prepare"],kt),kt},$=function(W){return q[W]},V=function(W,tt){q[W]=tt};function rt(W,tt){var K=i.identity([]);return i.translate(K,K,[1,1,0]),i.scale(K,K,[W.width*.5,W.height*.5,1]),i.multiply(K,K,W.calculatePosMatrix(tt.toUnwrapped()))}function ot(W,tt,K){if(W)for(var ut=0,kt=W;ut<kt.length;ut+=1){var jt=kt[ut],Qt=tt[jt];if(Qt&&Qt.source===K&&Qt.type==="fill-extrusion")return!0}else for(var de in tt){var Ee=tt[de];if(Ee.source===K&&Ee.type==="fill-extrusion")return!0}return!1}function H(W,tt,K,ut,kt,jt){var Qt=ot(kt&&kt.layers,tt,W.id),de=jt.maxPitchScaleFactor(),Ee=W.tilesIn(ut,de,Qt);Ee.sort(et);for(var Ye=[],ar=0,tr=Ee;ar<tr.length;ar+=1){var vr=tr[ar];Ye.push({wrappedTileID:vr.tileID.wrapped().key,queryResults:vr.tile.queryRenderedFeatures(tt,K,W._state,vr.queryGeometry,vr.cameraQueryGeometry,vr.scale,kt,jt,de,rt(W.transform,vr.tileID))})}var Lr=ct(Ye);for(var Wr in Lr)Lr[Wr].forEach(function(Fr){var Br=Fr.feature,Kr=W.getFeatureState(Br.layer["source-layer"],Br.id);Br.source=Br.layer.source,Br.layer["source-layer"]&&(Br.sourceLayer=Br.layer["source-layer"]),Br.state=Kr});return Lr}function Y(W,tt,K,ut,kt,jt,Qt){for(var de={},Ee=jt.queryRenderedSymbols(ut),Ye=[],ar=0,tr=Object.keys(Ee).map(Number);ar<tr.length;ar+=1){var vr=tr[ar];Ye.push(Qt[vr])}Ye.sort(et);for(var Lr=function(){var cn=Fr[Wr],Fn=cn.featureIndex.lookupSymbolFeatures(Ee[cn.bucketInstanceId],tt,cn.bucketIndex,cn.sourceLayerIndex,kt.filter,kt.layers,kt.availableImages,W);for(var Pn in Fn){var Dn=de[Pn]=de[Pn]||[],Nn=Fn[Pn];Nn.sort(function(ci,si){var li=cn.featureSortOrder;if(li){var Ii=li.indexOf(ci.featureIndex),la=li.indexOf(si.featureIndex);return la-Ii}else return si.featureIndex-ci.featureIndex});for(var Bn=0,Vn=Nn;Bn<Vn.length;Bn+=1){var Zn=Vn[Bn];Dn.push(Zn)}}},Wr=0,Fr=Ye;Wr<Fr.length;Wr+=1)Lr();var Br=function(cn){de[cn].forEach(function(Fn){var Pn=Fn.feature,Dn=W[cn],Nn=K[Dn.source],Bn=Nn.getFeatureState(Pn.layer["source-layer"],Pn.id);Pn.source=Pn.layer.source,Pn.layer["source-layer"]&&(Pn.sourceLayer=Pn.layer["source-layer"]),Pn.state=Bn})};for(var Kr in de)Br(Kr);return de}function at(W,tt){for(var K=W.getRenderableIds().map(function(Ee){return W.getTileByID(Ee)}),ut=[],kt={},jt=0;jt<K.length;jt++){var Qt=K[jt],de=Qt.tileID.canonical.key;kt[de]||(kt[de]=!0,Qt.querySourceFeatures(ut,tt))}return ut}function et(W,tt){var K=W.tileID,ut=tt.tileID;return K.overscaledZ-ut.overscaledZ||K.canonical.y-ut.canonical.y||K.wrap-ut.wrap||K.canonical.x-ut.canonical.x}function ct(W){for(var tt={},K={},ut=0,kt=W;ut<kt.length;ut+=1){var jt=kt[ut],Qt=jt.queryResults,de=jt.wrappedTileID,Ee=K[de]=K[de]||{};for(var Ye in Qt)for(var ar=Qt[Ye],tr=Ee[Ye]=Ee[Ye]||{},vr=tt[Ye]=tt[Ye]||[],Lr=0,Wr=ar;Lr<Wr.length;Lr+=1){var Fr=Wr[Lr];tr[Fr.featureIndex]||(tr[Fr.featureIndex]=!0,vr.push(Fr))}}return tt}var ft=function(W,tt){this.max=W,this.onRemove=tt,this.reset()};ft.prototype.reset=function(){for(var W in this.data)for(var tt=0,K=this.data[W];tt<K.length;tt+=1){var ut=K[tt];ut.timeout&&clearTimeout(ut.timeout),this.onRemove(ut.value)}return this.data={},this.order=[],this},ft.prototype.add=function(W,tt,K){var ut=this,kt=W.wrapped().key;this.data[kt]===void 0&&(this.data[kt]=[]);var jt={value:tt,timeout:void 0};if(K!==void 0&&(jt.timeout=setTimeout(function(){ut.remove(W,jt)},K)),this.data[kt].push(jt),this.order.push(kt),this.order.length>this.max){var Qt=this._getAndRemoveByKey(this.order[0]);Qt&&this.onRemove(Qt)}return this},ft.prototype.has=function(W){return W.wrapped().key in this.data},ft.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},ft.prototype._getAndRemoveByKey=function(W){var tt=this.data[W].shift();return tt.timeout&&clearTimeout(tt.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),tt.value},ft.prototype.getByKey=function(W){var tt=this.data[W];return tt?tt[0].value:null},ft.prototype.get=function(W){if(!this.has(W))return null;var tt=this.data[W.wrapped().key][0];return tt.value},ft.prototype.remove=function(W,tt){if(!this.has(W))return this;var K=W.wrapped().key,ut=tt===void 0?0:this.data[K].indexOf(tt),kt=this.data[K][ut];return this.data[K].splice(ut,1),kt.timeout&&clearTimeout(kt.timeout),this.data[K].length===0&&delete this.data[K],this.onRemove(kt.value),this.order.splice(this.order.indexOf(K),1),this},ft.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var tt=this._getAndRemoveByKey(this.order[0]);tt&&this.onRemove(tt)}return this},ft.prototype.filter=function(W){var tt=[];for(var K in this.data)for(var ut=0,kt=this.data[K];ut<kt.length;ut+=1){var jt=kt[ut];W(jt.value)||tt.push(jt)}for(var Qt=0,de=tt;Qt<de.length;Qt+=1){var Ee=de[Qt];this.remove(Ee.value.tileID,Ee)}};var yt=function(W,tt,K){this.context=W;var ut=W.gl;this.buffer=ut.createBuffer(),this.dynamicDraw=!!K,this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),ut.bufferData(ut.ELEMENT_ARRAY_BUFFER,tt.arrayBuffer,this.dynamicDraw?ut.DYNAMIC_DRAW:ut.STATIC_DRAW),this.dynamicDraw||delete tt.arrayBuffer};yt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},yt.prototype.updateData=function(W){var tt=this.context.gl;this.context.unbindVAO(),this.bind(),tt.bufferSubData(tt.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},yt.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var xt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Ct=function(W,tt,K,ut){this.length=tt.length,this.attributes=K,this.itemSize=tt.bytesPerElement,this.dynamicDraw=ut,this.context=W;var kt=W.gl;this.buffer=kt.createBuffer(),W.bindVertexBuffer.set(this.buffer),kt.bufferData(kt.ARRAY_BUFFER,tt.arrayBuffer,this.dynamicDraw?kt.DYNAMIC_DRAW:kt.STATIC_DRAW),this.dynamicDraw||delete tt.arrayBuffer};Ct.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Ct.prototype.updateData=function(W){var tt=this.context.gl;this.bind(),tt.bufferSubData(tt.ARRAY_BUFFER,0,W.arrayBuffer)},Ct.prototype.enableAttributes=function(W,tt){for(var K=0;K<this.attributes.length;K++){var ut=this.attributes[K],kt=tt.attributes[ut.name];kt!==void 0&&W.enableVertexAttribArray(kt)}},Ct.prototype.setVertexAttribPointers=function(W,tt,K){for(var ut=0;ut<this.attributes.length;ut++){var kt=this.attributes[ut],jt=tt.attributes[kt.name];jt!==void 0&&W.vertexAttribPointer(jt,kt.components,W[xt[kt.type]],!1,this.itemSize,kt.offset+this.itemSize*(K||0))}},Ct.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var gt=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};gt.prototype.get=function(){return this.current},gt.prototype.set=function(W){},gt.prototype.getDefault=function(){return this.default},gt.prototype.setDefault=function(){this.set(this.default)};var mt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return i.Color.transparent},tt.prototype.set=function(K){var ut=this.current;K.r===ut.r&&K.g===ut.g&&K.b===ut.b&&K.a===ut.a&&!this.dirty||(this.gl.clearColor(K.r,K.g,K.b,K.a),this.current=K,this.dirty=!1)},tt}(gt),vt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 1},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.clearDepth(K),this.current=K,this.dirty=!1)},tt}(gt),At=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 0},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.clearStencil(K),this.current=K,this.dirty=!1)},tt}(gt),Ot=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return[!0,!0,!0,!0]},tt.prototype.set=function(K){var ut=this.current;K[0]===ut[0]&&K[1]===ut[1]&&K[2]===ut[2]&&K[3]===ut[3]&&!this.dirty||(this.gl.colorMask(K[0],K[1],K[2],K[3]),this.current=K,this.dirty=!1)},tt}(gt),It=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!0},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.depthMask(K),this.current=K,this.dirty=!1)},tt}(gt),St=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 255},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.stencilMask(K),this.current=K,this.dirty=!1)},tt}(gt),Bt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},tt.prototype.set=function(K){var ut=this.current;K.func===ut.func&&K.ref===ut.ref&&K.mask===ut.mask&&!this.dirty||(this.gl.stencilFunc(K.func,K.ref,K.mask),this.current=K,this.dirty=!1)},tt}(gt),re=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){var K=this.gl;return[K.KEEP,K.KEEP,K.KEEP]},tt.prototype.set=function(K){var ut=this.current;K[0]===ut[0]&&K[1]===ut[1]&&K[2]===ut[2]&&!this.dirty||(this.gl.stencilOp(K[0],K[1],K[2]),this.current=K,this.dirty=!1)},tt}(gt),Yt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;K?ut.enable(ut.STENCIL_TEST):ut.disable(ut.STENCIL_TEST),this.current=K,this.dirty=!1}},tt}(gt),he=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return[0,1]},tt.prototype.set=function(K){var ut=this.current;K[0]===ut[0]&&K[1]===ut[1]&&!this.dirty||(this.gl.depthRange(K[0],K[1]),this.current=K,this.dirty=!1)},tt}(gt),Zt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;K?ut.enable(ut.DEPTH_TEST):ut.disable(ut.DEPTH_TEST),this.current=K,this.dirty=!1}},tt}(gt),ae=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.LESS},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.depthFunc(K),this.current=K,this.dirty=!1)},tt}(gt),oe=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;K?ut.enable(ut.BLEND):ut.disable(ut.BLEND),this.current=K,this.dirty=!1}},tt}(gt),ce=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){var K=this.gl;return[K.ONE,K.ZERO]},tt.prototype.set=function(K){var ut=this.current;K[0]===ut[0]&&K[1]===ut[1]&&!this.dirty||(this.gl.blendFunc(K[0],K[1]),this.current=K,this.dirty=!1)},tt}(gt),ue=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return i.Color.transparent},tt.prototype.set=function(K){var ut=this.current;K.r===ut.r&&K.g===ut.g&&K.b===ut.b&&K.a===ut.a&&!this.dirty||(this.gl.blendColor(K.r,K.g,K.b,K.a),this.current=K,this.dirty=!1)},tt}(gt),ye=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.FUNC_ADD},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.blendEquation(K),this.current=K,this.dirty=!1)},tt}(gt),Tt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;K?ut.enable(ut.CULL_FACE):ut.disable(ut.CULL_FACE),this.current=K,this.dirty=!1}},tt}(gt),Ft=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.BACK},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.cullFace(K),this.current=K,this.dirty=!1)},tt}(gt),$t=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.CCW},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.frontFace(K),this.current=K,this.dirty=!1)},tt}(gt),Vt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.useProgram(K),this.current=K,this.dirty=!1)},tt}(gt),Nt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return this.gl.TEXTURE0},tt.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.activeTexture(K),this.current=K,this.dirty=!1)},tt}(gt),Mt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){var K=this.gl;return[0,0,K.drawingBufferWidth,K.drawingBufferHeight]},tt.prototype.set=function(K){var ut=this.current;K[0]===ut[0]&&K[1]===ut[1]&&K[2]===ut[2]&&K[3]===ut[3]&&!this.dirty||(this.gl.viewport(K[0],K[1],K[2],K[3]),this.current=K,this.dirty=!1)},tt}(gt),Et=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.bindFramebuffer(ut.FRAMEBUFFER,K),this.current=K,this.dirty=!1}},tt}(gt),Dt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.bindRenderbuffer(ut.RENDERBUFFER,K),this.current=K,this.dirty=!1}},tt}(gt),dt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.bindTexture(ut.TEXTURE_2D,K),this.current=K,this.dirty=!1}},tt}(gt),ht=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.bindBuffer(ut.ARRAY_BUFFER,K),this.current=K,this.dirty=!1}},tt}(gt),bt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){var ut=this.gl;ut.bindBuffer(ut.ELEMENT_ARRAY_BUFFER,K),this.current=K,this.dirty=!1},tt}(gt),Pt=function(W){function tt(K){W.call(this,K),this.vao=K.extVertexArrayObject}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt.prototype.set=function(K){!this.vao||K===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(K),this.current=K,this.dirty=!1)},tt}(gt),Gt=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return 4},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.pixelStorei(ut.UNPACK_ALIGNMENT,K),this.current=K,this.dirty=!1}},tt}(gt),te=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.pixelStorei(ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K),this.current=K,this.dirty=!1}},tt}(gt),ne=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return!1},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var ut=this.gl;ut.pixelStorei(ut.UNPACK_FLIP_Y_WEBGL,K),this.current=K,this.dirty=!1}},tt}(gt),je=function(W){function tt(K,ut){W.call(this,K),this.context=K,this.parent=ut}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getDefault=function(){return null},tt}(gt),Ne=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.setDirty=function(){this.dirty=!0},tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ut=this.gl;ut.framebufferTexture2D(ut.FRAMEBUFFER,ut.COLOR_ATTACHMENT0,ut.TEXTURE_2D,K,0),this.current=K,this.dirty=!1}},tt}(je),ge=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ut=this.gl;ut.framebufferRenderbuffer(ut.FRAMEBUFFER,ut.DEPTH_ATTACHMENT,ut.RENDERBUFFER,K),this.current=K,this.dirty=!1}},tt}(je),_e=function(W,tt,K,ut){this.context=W,this.width=tt,this.height=K;var kt=W.gl,jt=this.framebuffer=kt.createFramebuffer();this.colorAttachment=new Ne(W,jt),ut&&(this.depthAttachment=new ge(W,jt))};_e.prototype.destroy=function(){var W=this.context.gl,tt=this.colorAttachment.get();if(tt&&W.deleteTexture(tt),this.depthAttachment){var K=this.depthAttachment.get();K&&W.deleteRenderbuffer(K)}W.deleteFramebuffer(this.framebuffer)};var De=519,hr=function(W,tt,K){this.func=W,this.mask=tt,this.range=K};hr.ReadOnly=!1,hr.ReadWrite=!0,hr.disabled=new hr(De,hr.ReadOnly,[0,1]);var fe=519,Be=7680,He=function(W,tt,K,ut,kt,jt){this.test=W,this.ref=tt,this.mask=K,this.fail=ut,this.depthFail=kt,this.pass=jt};He.disabled=new He({func:fe,mask:0},0,0,Be,Be,Be);var pr=0,Ze=1,Xt=771,ie=function(W,tt,K){this.blendFunction=W,this.blendColor=tt,this.mask=K};ie.Replace=[Ze,pr],ie.disabled=new ie(ie.Replace,i.Color.transparent,[!1,!1,!1,!1]),ie.unblended=new ie(ie.Replace,i.Color.transparent,[!0,!0,!0,!0]),ie.alphaBlended=new ie([Ze,Xt],i.Color.transparent,[!0,!0,!0,!0]);var pe=1029,ke=2305,Ce=function(W,tt,K){this.enable=W,this.mode=tt,this.frontFace=K};Ce.disabled=new Ce(!1,pe,ke),Ce.backCCW=new Ce(!0,pe,ke);var Fe=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new mt(this),this.clearDepth=new vt(this),this.clearStencil=new At(this),this.colorMask=new Ot(this),this.depthMask=new It(this),this.stencilMask=new St(this),this.stencilFunc=new Bt(this),this.stencilOp=new re(this),this.stencilTest=new Yt(this),this.depthRange=new he(this),this.depthTest=new Zt(this),this.depthFunc=new ae(this),this.blend=new oe(this),this.blendFunc=new ce(this),this.blendColor=new ue(this),this.blendEquation=new ye(this),this.cullFace=new Tt(this),this.cullFaceSide=new Ft(this),this.frontFace=new $t(this),this.program=new Vt(this),this.activeTexture=new Nt(this),this.viewport=new Mt(this),this.bindFramebuffer=new Et(this),this.bindRenderbuffer=new Dt(this),this.bindTexture=new dt(this),this.bindVertexBuffer=new ht(this),this.bindElementBuffer=new bt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Pt(this),this.pixelStoreUnpack=new Gt(this),this.pixelStoreUnpackPremultiplyAlpha=new te(this),this.pixelStoreUnpackFlipY=new ne(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=W.getParameter(W.MAX_TEXTURE_SIZE)};Fe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Fe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Fe.prototype.createIndexBuffer=function(W,tt){return new yt(this,W,tt)},Fe.prototype.createVertexBuffer=function(W,tt,K){return new Ct(this,W,tt,K)},Fe.prototype.createRenderbuffer=function(W,tt,K){var ut=this.gl,kt=ut.createRenderbuffer();return this.bindRenderbuffer.set(kt),ut.renderbufferStorage(ut.RENDERBUFFER,W,tt,K),this.bindRenderbuffer.set(null),kt},Fe.prototype.createFramebuffer=function(W,tt,K){return new _e(this,W,tt,K)},Fe.prototype.clear=function(W){var tt=W.color,K=W.depth,ut=this.gl,kt=0;tt&&(kt|=ut.COLOR_BUFFER_BIT,this.clearColor.set(tt),this.colorMask.set([!0,!0,!0,!0])),typeof K<"u"&&(kt|=ut.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(K),this.depthMask.set(!0)),ut.clear(kt)},Fe.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Fe.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Fe.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Fe.prototype.setColorMode=function(W){i.deepEqual(W.blendFunction,ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Fe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Re=function(W){function tt(K,ut,kt){var jt=this;W.call(this),this.id=K,this.dispatcher=kt,this.on("data",function(Qt){Qt.dataType==="source"&&Qt.sourceDataType==="metadata"&&(jt._sourceLoaded=!0),jt._sourceLoaded&&!jt._paused&&Qt.dataType==="source"&&Qt.sourceDataType==="content"&&(jt.reload(),jt.transform&&jt.update(jt.transform))}),this.on("error",function(){jt._sourceErrored=!0}),this._source=Z(K,ut,kt,this),this._tiles={},this._cache=new ft(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new i.SourceFeatureState}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.onAdd=function(K){this.map=K,this._maxTileCacheSize=K?K._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(K)},tt.prototype.onRemove=function(K){this._source&&this._source.onRemove&&this._source.onRemove(K)},tt.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var K in this._tiles){var ut=this._tiles[K];if(ut.state!=="loaded"&&ut.state!=="errored")return!1}return!0},tt.prototype.getSource=function(){return this._source},tt.prototype.pause=function(){this._paused=!0},tt.prototype.resume=function(){if(this._paused){var K=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,K&&this.reload(),this.transform&&this.update(this.transform)}},tt.prototype._loadTile=function(K,ut){return this._source.loadTile(K,ut)},tt.prototype._unloadTile=function(K){if(this._source.unloadTile)return this._source.unloadTile(K,function(){})},tt.prototype._abortTile=function(K){if(this._source.abortTile)return this._source.abortTile(K,function(){})},tt.prototype.serialize=function(){return this._source.serialize()},tt.prototype.prepare=function(K){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ut in this._tiles){var kt=this._tiles[ut];kt.upload(K),kt.prepare(this.map.style.imageManager)}},tt.prototype.getIds=function(){return i.values(this._tiles).map(function(K){return K.tileID}).sort(be).map(function(K){return K.key})},tt.prototype.getRenderableIds=function(K){var ut=this,kt=[];for(var jt in this._tiles)this._isIdRenderable(jt,K)&&kt.push(this._tiles[jt]);return K?kt.sort(function(Qt,de){var Ee=Qt.tileID,Ye=de.tileID,ar=new i.Point(Ee.canonical.x,Ee.canonical.y)._rotate(ut.transform.angle),tr=new i.Point(Ye.canonical.x,Ye.canonical.y)._rotate(ut.transform.angle);return Ee.overscaledZ-Ye.overscaledZ||tr.y-ar.y||tr.x-ar.x}).map(function(Qt){return Qt.tileID.key}):kt.map(function(Qt){return Qt.tileID}).sort(be).map(function(Qt){return Qt.key})},tt.prototype.hasRenderableParent=function(K){var ut=this.findLoadedParent(K,0);return ut?this._isIdRenderable(ut.tileID.key):!1},tt.prototype._isIdRenderable=function(K,ut){return this._tiles[K]&&this._tiles[K].hasData()&&!this._coveredTiles[K]&&(ut||!this._tiles[K].holdingForFade())},tt.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var K in this._tiles)this._tiles[K].state!=="errored"&&this._reloadTile(K,"reloading")},tt.prototype._reloadTile=function(K,ut){var kt=this._tiles[K];kt&&(kt.state!=="loading"&&(kt.state=ut),this._loadTile(kt,this._tileLoaded.bind(this,kt,K,ut)))},tt.prototype._tileLoaded=function(K,ut,kt,jt){if(jt){K.state="errored",jt.status!==404?this._source.fire(new i.ErrorEvent(jt,{tile:K})):this.update(this.transform);return}K.timeAdded=i.browser.now(),kt==="expired"&&(K.refreshedUponExpiration=!0),this._setTileReloadTimer(ut,K),this.getSource().type==="raster-dem"&&K.dem&&this._backfillDEM(K),this._state.initializeTileState(K,this.map?this.map.painter:null),this._source.fire(new i.Event("data",{dataType:"source",tile:K,coord:K.tileID}))},tt.prototype._backfillDEM=function(K){for(var ut=this.getRenderableIds(),kt=0;kt<ut.length;kt++){var jt=ut[kt];if(K.neighboringTiles&&K.neighboringTiles[jt]){var Qt=this.getTileByID(jt);de(K,Qt),de(Qt,K)}}function de(Ee,Ye){Ee.needsHillshadePrepare=!0;var ar=Ye.tileID.canonical.x-Ee.tileID.canonical.x,tr=Ye.tileID.canonical.y-Ee.tileID.canonical.y,vr=Math.pow(2,Ee.tileID.canonical.z),Lr=Ye.tileID.key;ar===0&&tr===0||Math.abs(tr)>1||(Math.abs(ar)>1&&(Math.abs(ar+vr)===1?ar+=vr:Math.abs(ar-vr)===1&&(ar-=vr)),!(!Ye.dem||!Ee.dem)&&(Ee.dem.backfillBorder(Ye.dem,ar,tr),Ee.neighboringTiles&&Ee.neighboringTiles[Lr]&&(Ee.neighboringTiles[Lr].backfilled=!0)))}},tt.prototype.getTile=function(K){return this.getTileByID(K.key)},tt.prototype.getTileByID=function(K){return this._tiles[K]},tt.prototype._retainLoadedChildren=function(K,ut,kt,jt){for(var Qt in this._tiles){var de=this._tiles[Qt];if(!(jt[Qt]||!de.hasData()||de.tileID.overscaledZ<=ut||de.tileID.overscaledZ>kt)){for(var Ee=de.tileID;de&&de.tileID.overscaledZ>ut+1;){var Ye=de.tileID.scaledTo(de.tileID.overscaledZ-1);de=this._tiles[Ye.key],de&&de.hasData()&&(Ee=Ye)}for(var ar=Ee;ar.overscaledZ>ut;)if(ar=ar.scaledTo(ar.overscaledZ-1),K[ar.key]){jt[Ee.key]=Ee;break}}}},tt.prototype.findLoadedParent=function(K,ut){if(K.key in this._loadedParentTiles){var kt=this._loadedParentTiles[K.key];return kt&&kt.tileID.overscaledZ>=ut?kt:null}for(var jt=K.overscaledZ-1;jt>=ut;jt--){var Qt=K.scaledTo(jt),de=this._getLoadedTile(Qt);if(de)return de}},tt.prototype._getLoadedTile=function(K){var ut=this._tiles[K.key];if(ut&&ut.hasData())return ut;var kt=this._cache.getByKey(K.wrapped().key);return kt},tt.prototype.updateCacheSize=function(K){var ut=Math.ceil(K.width/this._source.tileSize)+1,kt=Math.ceil(K.height/this._source.tileSize)+1,jt=ut*kt,Qt=5,de=Math.floor(jt*Qt),Ee=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,de):de;this._cache.setMaxSize(Ee)},tt.prototype.handleWrapJump=function(K){var ut=this._prevLng===void 0?K:this._prevLng,kt=K-ut,jt=kt/360,Qt=Math.round(jt);if(this._prevLng=K,Qt){var de={};for(var Ee in this._tiles){var Ye=this._tiles[Ee];Ye.tileID=Ye.tileID.unwrapTo(Ye.tileID.wrap+Qt),de[Ye.tileID.key]=Ye}this._tiles=de;for(var ar in this._timers)clearTimeout(this._timers[ar]),delete this._timers[ar];for(var tr in this._tiles){var vr=this._tiles[tr];this._setTileReloadTimer(tr,vr)}}},tt.prototype.update=function(K){var ut=this;if(this.transform=K,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(K),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var kt;this.used?this._source.tileID?kt=K.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Zn){return new i.OverscaledTileID(Zn.canonical.z,Zn.wrap,Zn.canonical.z,Zn.canonical.x,Zn.canonical.y)}):(kt=K.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(kt=kt.filter(function(Zn){return ut._source.hasTile(Zn)}))):kt=[];var jt=K.coveringZoomLevel(this._source),Qt=Math.max(jt-tt.maxOverzooming,this._source.minzoom),de=Math.max(jt+tt.maxUnderzooming,this._source.minzoom),Ee=this._updateRetainedTiles(kt,jt);if(Ge(this._source.type)){for(var Ye={},ar={},tr=Object.keys(Ee),vr=0,Lr=tr;vr<Lr.length;vr+=1){var Wr=Lr[vr],Fr=Ee[Wr],Br=this._tiles[Wr];if(!(!Br||Br.fadeEndTime&&Br.fadeEndTime<=i.browser.now())){var Kr=this.findLoadedParent(Fr,Qt);Kr&&(this._addTile(Kr.tileID),Ye[Kr.tileID.key]=Kr.tileID),ar[Wr]=Fr}}this._retainLoadedChildren(ar,jt,de,Ee);for(var cn in Ye)Ee[cn]||(this._coveredTiles[cn]=!0,Ee[cn]=Ye[cn])}for(var Fn in Ee)this._tiles[Fn].clearFadeHold();for(var Pn=i.keysDifference(this._tiles,Ee),Dn=0,Nn=Pn;Dn<Nn.length;Dn+=1){var Bn=Nn[Dn],Vn=this._tiles[Bn];Vn.hasSymbolBuckets&&!Vn.holdingForFade()?Vn.setHoldDuration(this.map._fadeDuration):(!Vn.hasSymbolBuckets||Vn.symbolFadeFinished())&&this._removeTile(Bn)}this._updateLoadedParentTileCache()}},tt.prototype.releaseSymbolFadeTiles=function(){for(var K in this._tiles)this._tiles[K].holdingForFade()&&this._removeTile(K)},tt.prototype._updateRetainedTiles=function(K,ut){for(var kt={},jt={},Qt=Math.max(ut-tt.maxOverzooming,this._source.minzoom),de=Math.max(ut+tt.maxUnderzooming,this._source.minzoom),Ee={},Ye=0,ar=K;Ye<ar.length;Ye+=1){var tr=ar[Ye],vr=this._addTile(tr);kt[tr.key]=tr,!vr.hasData()&&ut<this._source.maxzoom&&(Ee[tr.key]=tr)}this._retainLoadedChildren(Ee,ut,de,kt);for(var Lr=0,Wr=K;Lr<Wr.length;Lr+=1){var Fr=Wr[Lr],Br=this._tiles[Fr.key];if(!Br.hasData()){if(ut+1>this._source.maxzoom){var Kr=Fr.children(this._source.maxzoom)[0],cn=this.getTile(Kr);if(cn&&cn.hasData()){kt[Kr.key]=Kr;continue}}else{var Fn=Fr.children(this._source.maxzoom);if(kt[Fn[0].key]&&kt[Fn[1].key]&&kt[Fn[2].key]&&kt[Fn[3].key])continue}for(var Pn=Br.wasRequested(),Dn=Fr.overscaledZ-1;Dn>=Qt;--Dn){var Nn=Fr.scaledTo(Dn);if(jt[Nn.key]||(jt[Nn.key]=!0,Br=this.getTile(Nn),!Br&&Pn&&(Br=this._addTile(Nn)),Br&&(kt[Nn.key]=Nn,Pn=Br.wasRequested(),Br.hasData())))break}}}return kt},tt.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var K in this._tiles){for(var ut=[],kt=void 0,jt=this._tiles[K].tileID;jt.overscaledZ>0;){if(jt.key in this._loadedParentTiles){kt=this._loadedParentTiles[jt.key];break}ut.push(jt.key);var Qt=jt.scaledTo(jt.overscaledZ-1);if(kt=this._getLoadedTile(Qt),kt)break;jt=Qt}for(var de=0,Ee=ut;de<Ee.length;de+=1){var Ye=Ee[de];this._loadedParentTiles[Ye]=kt}}},tt.prototype._addTile=function(K){var ut=this._tiles[K.key];if(ut)return ut;ut=this._cache.getAndRemove(K),ut&&(this._setTileReloadTimer(K.key,ut),ut.tileID=K,this._state.initializeTileState(ut,this.map?this.map.painter:null),this._cacheTimers[K.key]&&(clearTimeout(this._cacheTimers[K.key]),delete this._cacheTimers[K.key],this._setTileReloadTimer(K.key,ut)));var kt=!!ut;return kt||(ut=new i.Tile(K,this._source.tileSize*K.overscaleFactor()),this._loadTile(ut,this._tileLoaded.bind(this,ut,K.key,ut.state))),ut?(ut.uses++,this._tiles[K.key]=ut,kt||this._source.fire(new i.Event("dataloading",{tile:ut,coord:ut.tileID,dataType:"source"})),ut):null},tt.prototype._setTileReloadTimer=function(K,ut){var kt=this;K in this._timers&&(clearTimeout(this._timers[K]),delete this._timers[K]);var jt=ut.getExpiryTimeout();jt&&(this._timers[K]=setTimeout(function(){kt._reloadTile(K,"expired"),delete kt._timers[K]},jt))},tt.prototype._removeTile=function(K){var ut=this._tiles[K];ut&&(ut.uses--,delete this._tiles[K],this._timers[K]&&(clearTimeout(this._timers[K]),delete this._timers[K]),!(ut.uses>0)&&(ut.hasData()&&ut.state!=="reloading"?this._cache.add(ut.tileID,ut,ut.getExpiryTimeout()):(ut.aborted=!0,this._abortTile(ut),this._unloadTile(ut))))},tt.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var K in this._tiles)this._removeTile(K);this._cache.reset()},tt.prototype.tilesIn=function(K,ut,kt){var jt=this,Qt=[],de=this.transform;if(!de)return Qt;for(var Ee=kt?de.getCameraQueryGeometry(K):K,Ye=K.map(function(Dn){return de.pointCoordinate(Dn)}),ar=Ee.map(function(Dn){return de.pointCoordinate(Dn)}),tr=this.getIds(),vr=1/0,Lr=1/0,Wr=-1/0,Fr=-1/0,Br=0,Kr=ar;Br<Kr.length;Br+=1){var cn=Kr[Br];vr=Math.min(vr,cn.x),Lr=Math.min(Lr,cn.y),Wr=Math.max(Wr,cn.x),Fr=Math.max(Fr,cn.y)}for(var Fn=function(Dn){var Nn=jt._tiles[tr[Dn]];if(!Nn.holdingForFade()){var Bn=Nn.tileID,Vn=Math.pow(2,de.zoom-Nn.tileID.overscaledZ),Zn=ut*Nn.queryPadding*i.EXTENT/Nn.tileSize/Vn,ci=[Bn.getTilePoint(new i.MercatorCoordinate(vr,Lr)),Bn.getTilePoint(new i.MercatorCoordinate(Wr,Fr))];if(ci[0].x-Zn<i.EXTENT&&ci[0].y-Zn<i.EXTENT&&ci[1].x+Zn>=0&&ci[1].y+Zn>=0){var si=Ye.map(function(Ii){return Bn.getTilePoint(Ii)}),li=ar.map(function(Ii){return Bn.getTilePoint(Ii)});Qt.push({tile:Nn,tileID:Bn,queryGeometry:si,cameraQueryGeometry:li,scale:Vn})}}},Pn=0;Pn<tr.length;Pn++)Fn(Pn);return Qt},tt.prototype.getVisibleCoordinates=function(K){for(var ut=this,kt=this.getRenderableIds(K).map(function(Ee){return ut._tiles[Ee].tileID}),jt=0,Qt=kt;jt<Qt.length;jt+=1){var de=Qt[jt];de.posMatrix=this.transform.calculatePosMatrix(de.toUnwrapped())}return kt},tt.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ge(this._source.type))for(var K in this._tiles){var ut=this._tiles[K];if(ut.fadeEndTime!==void 0&&ut.fadeEndTime>=i.browser.now())return!0}return!1},tt.prototype.setFeatureState=function(K,ut,kt){K=K||"_geojsonTileLayer",this._state.updateState(K,ut,kt)},tt.prototype.removeFeatureState=function(K,ut,kt){K=K||"_geojsonTileLayer",this._state.removeFeatureState(K,ut,kt)},tt.prototype.getFeatureState=function(K,ut){return K=K||"_geojsonTileLayer",this._state.getState(K,ut)},tt.prototype.setDependencies=function(K,ut,kt){var jt=this._tiles[K];jt&&jt.setDependencies(ut,kt)},tt.prototype.reloadTilesForDependencies=function(K,ut){for(var kt in this._tiles){var jt=this._tiles[kt];jt.hasDependency(K,ut)&&this._reloadTile(kt,"reloading")}this._cache.filter(function(Qt){return!Qt.hasDependency(K,ut)})},tt}(i.Evented);Re.maxOverzooming=10,Re.maxUnderzooming=3;function be(W,tt){var K=Math.abs(W.wrap*2)-+(W.wrap<0),ut=Math.abs(tt.wrap*2)-+(tt.wrap<0);return W.overscaledZ-tt.overscaledZ||ut-K||tt.canonical.y-W.canonical.y||tt.canonical.x-W.canonical.x}function Ge(W){return W==="raster"||W==="image"||W==="video"}function Ke(){return new i.window.Worker(Na.workerUrl)}var or="mapboxgl_preloaded_worker_pool",sr=function(){this.active={}};sr.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<sr.workerCount;)this.workers.push(new Ke);return this.active[W]=!0,this.workers.slice()},sr.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(tt){tt.terminate()}),this.workers=null)},sr.prototype.isPreloaded=function(){return!!this.active[or]},sr.prototype.numActive=function(){return Object.keys(this.active).length};var zt=Math.floor(i.browser.hardwareConcurrency/2);sr.workerCount=Math.max(Math.min(zt,6),1);var Ut;function Me(){return Ut||(Ut=new sr),Ut}function Te(){var W=Me();W.acquire(or)}function qe(){var W=Ut;W&&(W.isPreloaded()&&W.numActive()===1?(W.release(or),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Qe(W,tt){var K={};for(var ut in W)ut!=="ref"&&(K[ut]=W[ut]);return i.refProperties.forEach(function(kt){kt in tt&&(K[kt]=tt[kt])}),K}function Je(W){W=W.slice();for(var tt=Object.create(null),K=0;K<W.length;K++)tt[W[K].id]=W[K];for(var ut=0;ut<W.length;ut++)"ref"in W[ut]&&(W[ut]=Qe(W[ut],tt[W[ut].ref]));return W}function We(){var W={},tt=i.styleSpec.$version;for(var K in i.styleSpec.$root){var ut=i.styleSpec.$root[K];if(ut.required){var kt=null;K==="version"?kt=tt:ut.type==="array"?kt=[]:kt={},kt!=null&&(W[K]=kt)}}return W}var Oe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function rr(W,tt,K){K.push({command:Oe.addSource,args:[W,tt[W]]})}function cr(W,tt,K){tt.push({command:Oe.removeSource,args:[W]}),K[W]=!0}function lr(W,tt,K,ut){cr(W,K,ut),rr(W,tt,K)}function nr(W,tt,K){var ut;for(ut in W[K])if(W[K].hasOwnProperty(ut)&&ut!=="data"&&!i.deepEqual(W[K][ut],tt[K][ut]))return!1;for(ut in tt[K])if(tt[K].hasOwnProperty(ut)&&ut!=="data"&&!i.deepEqual(W[K][ut],tt[K][ut]))return!1;return!0}function Sr(W,tt,K,ut){W=W||{},tt=tt||{};var kt;for(kt in W)W.hasOwnProperty(kt)&&(tt.hasOwnProperty(kt)||cr(kt,K,ut));for(kt in tt)tt.hasOwnProperty(kt)&&(W.hasOwnProperty(kt)?i.deepEqual(W[kt],tt[kt])||(W[kt].type==="geojson"&&tt[kt].type==="geojson"&&nr(W,tt,kt)?K.push({command:Oe.setGeoJSONSourceData,args:[kt,tt[kt].data]}):lr(kt,tt,K,ut)):rr(kt,tt,K))}function kr(W,tt,K,ut,kt,jt){W=W||{},tt=tt||{};var Qt;for(Qt in W)W.hasOwnProperty(Qt)&&(i.deepEqual(W[Qt],tt[Qt])||K.push({command:jt,args:[ut,Qt,tt[Qt],kt]}));for(Qt in tt)!tt.hasOwnProperty(Qt)||W.hasOwnProperty(Qt)||i.deepEqual(W[Qt],tt[Qt])||K.push({command:jt,args:[ut,Qt,tt[Qt],kt]})}function Mr(W){return W.id}function rn(W,tt){return W[tt.id]=tt,W}function Ur(W,tt,K){W=W||[],tt=tt||[];var ut=W.map(Mr),kt=tt.map(Mr),jt=W.reduce(rn,{}),Qt=tt.reduce(rn,{}),de=ut.slice(),Ee=Object.create(null),Ye,ar,tr,vr,Lr,Wr,Fr;for(Ye=0,ar=0;Ye<ut.length;Ye++)tr=ut[Ye],Qt.hasOwnProperty(tr)?ar++:(K.push({command:Oe.removeLayer,args:[tr]}),de.splice(de.indexOf(tr,ar),1));for(Ye=0,ar=0;Ye<kt.length;Ye++)tr=kt[kt.length-1-Ye],de[de.length-1-Ye]!==tr&&(jt.hasOwnProperty(tr)?(K.push({command:Oe.removeLayer,args:[tr]}),de.splice(de.lastIndexOf(tr,de.length-ar),1)):ar++,Wr=de[de.length-Ye],K.push({command:Oe.addLayer,args:[Qt[tr],Wr]}),de.splice(de.length-Ye,0,tr),Ee[tr]=!0);for(Ye=0;Ye<kt.length;Ye++)if(tr=kt[Ye],vr=jt[tr],Lr=Qt[tr],!(Ee[tr]||i.deepEqual(vr,Lr))){if(!i.deepEqual(vr.source,Lr.source)||!i.deepEqual(vr["source-layer"],Lr["source-layer"])||!i.deepEqual(vr.type,Lr.type)){K.push({command:Oe.removeLayer,args:[tr]}),Wr=de[de.lastIndexOf(tr)+1],K.push({command:Oe.addLayer,args:[Lr,Wr]});continue}kr(vr.layout,Lr.layout,K,tr,null,Oe.setLayoutProperty),kr(vr.paint,Lr.paint,K,tr,null,Oe.setPaintProperty),i.deepEqual(vr.filter,Lr.filter)||K.push({command:Oe.setFilter,args:[tr,Lr.filter]}),(!i.deepEqual(vr.minzoom,Lr.minzoom)||!i.deepEqual(vr.maxzoom,Lr.maxzoom))&&K.push({command:Oe.setLayerZoomRange,args:[tr,Lr.minzoom,Lr.maxzoom]});for(Fr in vr)vr.hasOwnProperty(Fr)&&(Fr==="layout"||Fr==="paint"||Fr==="filter"||Fr==="metadata"||Fr==="minzoom"||Fr==="maxzoom"||(Fr.indexOf("paint.")===0?kr(vr[Fr],Lr[Fr],K,tr,Fr.slice(6),Oe.setPaintProperty):i.deepEqual(vr[Fr],Lr[Fr])||K.push({command:Oe.setLayerProperty,args:[tr,Fr,Lr[Fr]]})));for(Fr in Lr)!Lr.hasOwnProperty(Fr)||vr.hasOwnProperty(Fr)||Fr==="layout"||Fr==="paint"||Fr==="filter"||Fr==="metadata"||Fr==="minzoom"||Fr==="maxzoom"||(Fr.indexOf("paint.")===0?kr(vr[Fr],Lr[Fr],K,tr,Fr.slice(6),Oe.setPaintProperty):i.deepEqual(vr[Fr],Lr[Fr])||K.push({command:Oe.setLayerProperty,args:[tr,Fr,Lr[Fr]]}))}}function pn(W,tt){if(!W)return[{command:Oe.setStyle,args:[tt]}];var K=[];try{if(!i.deepEqual(W.version,tt.version))return[{command:Oe.setStyle,args:[tt]}];i.deepEqual(W.center,tt.center)||K.push({command:Oe.setCenter,args:[tt.center]}),i.deepEqual(W.zoom,tt.zoom)||K.push({command:Oe.setZoom,args:[tt.zoom]}),i.deepEqual(W.bearing,tt.bearing)||K.push({command:Oe.setBearing,args:[tt.bearing]}),i.deepEqual(W.pitch,tt.pitch)||K.push({command:Oe.setPitch,args:[tt.pitch]}),i.deepEqual(W.sprite,tt.sprite)||K.push({command:Oe.setSprite,args:[tt.sprite]}),i.deepEqual(W.glyphs,tt.glyphs)||K.push({command:Oe.setGlyphs,args:[tt.glyphs]}),i.deepEqual(W.transition,tt.transition)||K.push({command:Oe.setTransition,args:[tt.transition]}),i.deepEqual(W.light,tt.light)||K.push({command:Oe.setLight,args:[tt.light]});var ut={},kt=[];Sr(W.sources,tt.sources,kt,ut);var jt=[];W.layers&&W.layers.forEach(function(Qt){ut[Qt.source]?K.push({command:Oe.removeLayer,args:[Qt.id]}):jt.push(Qt)}),K=K.concat(kt),Ur(jt,tt.layers,K)}catch(Qt){console.warn("Unable to compute style diff:",Qt),K=[{command:Oe.setStyle,args:[tt]}]}return K}var yn=function(W,tt){this.reset(W,tt)};yn.prototype.reset=function(W,tt){this.points=W||[],this._distances=[0];for(var K=1;K<this.points.length;K++)this._distances[K]=this._distances[K-1]+this.points[K].dist(this.points[K-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(tt||0,this.length*.5),this.paddedLength=this.length-this.padding*2},yn.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=i.clamp(W,0,1);for(var tt=1,K=this._distances[tt],ut=W*this.paddedLength+this.padding;K<ut&&tt<this._distances.length;)K=this._distances[++tt];var kt=tt-1,jt=this._distances[kt],Qt=K-jt,de=Qt>0?(ut-jt)/Qt:0;return this.points[kt].mult(1-de).add(this.points[tt].mult(de))};var yr=function(W,tt,K){var ut=this.boxCells=[],kt=this.circleCells=[];this.xCellCount=Math.ceil(W/K),this.yCellCount=Math.ceil(tt/K);for(var jt=0;jt<this.xCellCount*this.yCellCount;jt++)ut.push([]),kt.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=tt,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/tt,this.boxUid=0,this.circleUid=0};yr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},yr.prototype.insert=function(W,tt,K,ut,kt){this._forEachCell(tt,K,ut,kt,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(tt),this.bboxes.push(K),this.bboxes.push(ut),this.bboxes.push(kt)},yr.prototype.insertCircle=function(W,tt,K,ut){this._forEachCell(tt-ut,K-ut,tt+ut,K+ut,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(tt),this.circles.push(K),this.circles.push(ut)},yr.prototype._insertBoxCell=function(W,tt,K,ut,kt,jt){this.boxCells[kt].push(jt)},yr.prototype._insertCircleCell=function(W,tt,K,ut,kt,jt){this.circleCells[kt].push(jt)},yr.prototype._query=function(W,tt,K,ut,kt,jt){if(K<0||W>this.width||ut<0||tt>this.height)return kt?!1:[];var Qt=[];if(W<=0&&tt<=0&&this.width<=K&&this.height<=ut){if(kt)return!0;for(var de=0;de<this.boxKeys.length;de++)Qt.push({key:this.boxKeys[de],x1:this.bboxes[de*4],y1:this.bboxes[de*4+1],x2:this.bboxes[de*4+2],y2:this.bboxes[de*4+3]});for(var Ee=0;Ee<this.circleKeys.length;Ee++){var Ye=this.circles[Ee*3],ar=this.circles[Ee*3+1],tr=this.circles[Ee*3+2];Qt.push({key:this.circleKeys[Ee],x1:Ye-tr,y1:ar-tr,x2:Ye+tr,y2:ar+tr})}return jt?Qt.filter(jt):Qt}else{var vr={hitTest:kt,seenUids:{box:{},circle:{}}};return this._forEachCell(W,tt,K,ut,this._queryCell,Qt,vr,jt),kt?Qt.length>0:Qt}},yr.prototype._queryCircle=function(W,tt,K,ut,kt){var jt=W-K,Qt=W+K,de=tt-K,Ee=tt+K;if(Qt<0||jt>this.width||Ee<0||de>this.height)return ut?!1:[];var Ye=[],ar={hitTest:ut,circle:{x:W,y:tt,radius:K},seenUids:{box:{},circle:{}}};return this._forEachCell(jt,de,Qt,Ee,this._queryCellCircle,Ye,ar,kt),ut?Ye.length>0:Ye},yr.prototype.query=function(W,tt,K,ut,kt){return this._query(W,tt,K,ut,!1,kt)},yr.prototype.hitTest=function(W,tt,K,ut,kt){return this._query(W,tt,K,ut,!0,kt)},yr.prototype.hitTestCircle=function(W,tt,K,ut){return this._queryCircle(W,tt,K,!0,ut)},yr.prototype._queryCell=function(W,tt,K,ut,kt,jt,Qt,de){var Ee=Qt.seenUids,Ye=this.boxCells[kt];if(Ye!==null)for(var ar=this.bboxes,tr=0,vr=Ye;tr<vr.length;tr+=1){var Lr=vr[tr];if(!Ee.box[Lr]){Ee.box[Lr]=!0;var Wr=Lr*4;if(W<=ar[Wr+2]&&tt<=ar[Wr+3]&&K>=ar[Wr+0]&&ut>=ar[Wr+1]&&(!de||de(this.boxKeys[Lr]))){if(Qt.hitTest)return jt.push(!0),!0;jt.push({key:this.boxKeys[Lr],x1:ar[Wr],y1:ar[Wr+1],x2:ar[Wr+2],y2:ar[Wr+3]})}}}var Fr=this.circleCells[kt];if(Fr!==null)for(var Br=this.circles,Kr=0,cn=Fr;Kr<cn.length;Kr+=1){var Fn=cn[Kr];if(!Ee.circle[Fn]){Ee.circle[Fn]=!0;var Pn=Fn*3;if(this._circleAndRectCollide(Br[Pn],Br[Pn+1],Br[Pn+2],W,tt,K,ut)&&(!de||de(this.circleKeys[Fn]))){if(Qt.hitTest)return jt.push(!0),!0;var Dn=Br[Pn],Nn=Br[Pn+1],Bn=Br[Pn+2];jt.push({key:this.circleKeys[Fn],x1:Dn-Bn,y1:Nn-Bn,x2:Dn+Bn,y2:Nn+Bn})}}}},yr.prototype._queryCellCircle=function(W,tt,K,ut,kt,jt,Qt,de){var Ee=Qt.circle,Ye=Qt.seenUids,ar=this.boxCells[kt];if(ar!==null)for(var tr=this.bboxes,vr=0,Lr=ar;vr<Lr.length;vr+=1){var Wr=Lr[vr];if(!Ye.box[Wr]){Ye.box[Wr]=!0;var Fr=Wr*4;if(this._circleAndRectCollide(Ee.x,Ee.y,Ee.radius,tr[Fr+0],tr[Fr+1],tr[Fr+2],tr[Fr+3])&&(!de||de(this.boxKeys[Wr])))return jt.push(!0),!0}}var Br=this.circleCells[kt];if(Br!==null)for(var Kr=this.circles,cn=0,Fn=Br;cn<Fn.length;cn+=1){var Pn=Fn[cn];if(!Ye.circle[Pn]){Ye.circle[Pn]=!0;var Dn=Pn*3;if(this._circlesCollide(Kr[Dn],Kr[Dn+1],Kr[Dn+2],Ee.x,Ee.y,Ee.radius)&&(!de||de(this.circleKeys[Pn])))return jt.push(!0),!0}}},yr.prototype._forEachCell=function(W,tt,K,ut,kt,jt,Qt,de){for(var Ee=this._convertToXCellCoord(W),Ye=this._convertToYCellCoord(tt),ar=this._convertToXCellCoord(K),tr=this._convertToYCellCoord(ut),vr=Ee;vr<=ar;vr++)for(var Lr=Ye;Lr<=tr;Lr++){var Wr=this.xCellCount*Lr+vr;if(kt.call(this,W,tt,K,ut,Wr,jt,Qt,de))return}},yr.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},yr.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},yr.prototype._circlesCollide=function(W,tt,K,ut,kt,jt){var Qt=ut-W,de=kt-tt,Ee=K+jt;return Ee*Ee>Qt*Qt+de*de},yr.prototype._circleAndRectCollide=function(W,tt,K,ut,kt,jt,Qt){var de=(jt-ut)/2,Ee=Math.abs(W-(ut+de));if(Ee>de+K)return!1;var Ye=(Qt-kt)/2,ar=Math.abs(tt-(kt+Ye));if(ar>Ye+K)return!1;if(Ee<=de||ar<=Ye)return!0;var tr=Ee-de,vr=ar-Ye;return tr*tr+vr*vr<=K*K};function Cr(W,tt,K,ut,kt){var jt=i.create();return tt?(i.scale(jt,jt,[1/kt,1/kt,1]),K||i.rotateZ(jt,jt,ut.angle)):i.multiply(jt,ut.labelPlaneMatrix,W),jt}function Dr(W,tt,K,ut,kt){if(tt){var jt=i.clone(W);return i.scale(jt,jt,[kt,kt,1]),K||i.rotateZ(jt,jt,-ut.angle),jt}else return ut.glCoordMatrix}function Nr(W,tt){var K=[W.x,W.y,0,1];ur(K,K,tt);var ut=K[3];return{point:new i.Point(K[0]/ut,K[1]/ut),signedDistanceFromCamera:ut}}function $r(W,tt){return .5+.5*(W/tt)}function fn(W,tt){var K=W[0]/W[3],ut=W[1]/W[3],kt=K>=-tt[0]&&K<=tt[0]&&ut>=-tt[1]&&ut<=tt[1];return kt}function on(W,tt,K,ut,kt,jt,Qt,de){var Ee=ut?W.textSizeData:W.iconSizeData,Ye=i.evaluateSizeForZoom(Ee,K.transform.zoom),ar=[256/K.width*2+1,256/K.height*2+1],tr=ut?W.text.dynamicLayoutVertexArray:W.icon.dynamicLayoutVertexArray;tr.clear();for(var vr=W.lineVertexArray,Lr=ut?W.text.placedSymbolArray:W.icon.placedSymbolArray,Wr=K.transform.width/K.transform.height,Fr=!1,Br=0;Br<Lr.length;Br++){var Kr=Lr.get(Br);if(Kr.hidden||Kr.writingMode===i.WritingMode.vertical&&!Fr){zn(Kr.numGlyphs,tr);continue}Fr=!1;var cn=[Kr.anchorX,Kr.anchorY,0,1];if(i.transformMat4(cn,cn,tt),!fn(cn,ar)){zn(Kr.numGlyphs,tr);continue}var Fn=cn[3],Pn=$r(K.transform.cameraToCenterDistance,Fn),Dn=i.evaluateSizeForFeature(Ee,Ye,Kr),Nn=Qt?Dn/Pn:Dn*Pn,Bn=new i.Point(Kr.anchorX,Kr.anchorY),Vn=Nr(Bn,kt).point,Zn={},ci=$n(Kr,Nn,!1,de,tt,kt,jt,W.glyphOffsetArray,vr,tr,Vn,Bn,Zn,Wr);Fr=ci.useVertical,(ci.notEnoughRoom||Fr||ci.needsFlipping&&$n(Kr,Nn,!0,de,tt,kt,jt,W.glyphOffsetArray,vr,tr,Vn,Bn,Zn,Wr).notEnoughRoom)&&zn(Kr.numGlyphs,tr)}ut?W.text.dynamicLayoutVertexBuffer.updateData(tr):W.icon.dynamicLayoutVertexBuffer.updateData(tr)}function In(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar){var tr=de.glyphStartIndex+de.numGlyphs,vr=de.lineStartIndex,Lr=de.lineStartIndex+de.lineLength,Wr=tt.getoffsetX(de.glyphStartIndex),Fr=tt.getoffsetX(tr-1),Br=ui(W*Wr,K,ut,kt,jt,Qt,de.segment,vr,Lr,Ee,Ye,ar);if(!Br)return null;var Kr=ui(W*Fr,K,ut,kt,jt,Qt,de.segment,vr,Lr,Ee,Ye,ar);return Kr?{first:Br,last:Kr}:null}function En(W,tt,K,ut){if(W===i.WritingMode.horizontal){var kt=Math.abs(K.y-tt.y),jt=Math.abs(K.x-tt.x)*ut;if(kt>jt)return{useVertical:!0}}return(W===i.WritingMode.vertical?tt.y<K.y:tt.x>K.x)?{needsFlipping:!0}:null}function $n(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar,tr,vr,Lr){var Wr=tt/24,Fr=W.lineOffsetX*Wr,Br=W.lineOffsetY*Wr,Kr;if(W.numGlyphs>1){var cn=W.glyphStartIndex+W.numGlyphs,Fn=W.lineStartIndex,Pn=W.lineStartIndex+W.lineLength,Dn=In(Wr,de,Fr,Br,K,ar,tr,W,Ee,jt,vr);if(!Dn)return{notEnoughRoom:!0};var Nn=Nr(Dn.first.point,Qt).point,Bn=Nr(Dn.last.point,Qt).point;if(ut&&!K){var Vn=En(W.writingMode,Nn,Bn,Lr);if(Vn)return Vn}Kr=[Dn.first];for(var Zn=W.glyphStartIndex+1;Zn<cn-1;Zn++)Kr.push(ui(Wr*de.getoffsetX(Zn),Fr,Br,K,ar,tr,W.segment,Fn,Pn,Ee,jt,vr));Kr.push(Dn.last)}else{if(ut&&!K){var ci=Nr(tr,kt).point,si=W.lineStartIndex+W.segment+1,li=new i.Point(Ee.getx(si),Ee.gety(si)),Ii=Nr(li,kt),la=Ii.signedDistanceFromCamera>0?Ii.point:ri(tr,li,ci,1,kt),yi=En(W.writingMode,ci,la,Lr);if(yi)return yi}var ki=ui(Wr*de.getoffsetX(W.glyphStartIndex),Fr,Br,K,ar,tr,W.segment,W.lineStartIndex,W.lineStartIndex+W.lineLength,Ee,jt,vr);if(!ki)return{notEnoughRoom:!0};Kr=[ki]}for(var Oi=0,Wi=Kr;Oi<Wi.length;Oi+=1){var Qi=Wi[Oi];i.addDynamicAttributes(Ye,Qi.point,Qi.angle)}return{}}function ri(W,tt,K,ut,kt){var jt=Nr(W.add(W.sub(tt)._unit()),kt).point,Qt=K.sub(jt);return K.add(Qt._mult(ut/Qt.mag()))}function ui(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar,tr){var vr=ut?W-tt:W+tt,Lr=vr>0?1:-1,Wr=0;ut&&(Lr*=-1,Wr=Math.PI),Lr<0&&(Wr+=Math.PI);for(var Fr=Lr>0?de+Qt:de+Qt+1,Br=kt,Kr=kt,cn=0,Fn=0,Pn=Math.abs(vr),Dn=[];cn+Fn<=Pn;){if(Fr+=Lr,Fr<de||Fr>=Ee)return null;if(Kr=Br,Dn.push(Br),Br=tr[Fr],Br===void 0){var Nn=new i.Point(Ye.getx(Fr),Ye.gety(Fr)),Bn=Nr(Nn,ar);if(Bn.signedDistanceFromCamera>0)Br=tr[Fr]=Bn.point;else{var Vn=Fr-Lr,Zn=cn===0?jt:new i.Point(Ye.getx(Vn),Ye.gety(Vn));Br=ri(Zn,Nn,Kr,Pn-cn+1,ar)}}cn+=Fn,Fn=Kr.dist(Br)}var ci=(Pn-cn)/Fn,si=Br.sub(Kr),li=si.mult(ci)._add(Kr);li._add(si._unit()._perp()._mult(K*Lr));var Ii=Wr+Math.atan2(Br.y-Kr.y,Br.x-Kr.x);return Dn.push(li),{point:li,angle:Ii,path:Dn}}var ni=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function zn(W,tt){for(var K=0;K<W;K++){var ut=tt.length;tt.resize(ut+4),tt.float32.set(ni,ut*3)}}function ur(W,tt,K){var ut=tt[0],kt=tt[1];return W[0]=K[0]*ut+K[4]*kt+K[12],W[1]=K[1]*ut+K[5]*kt+K[13],W[3]=K[3]*ut+K[7]*kt+K[15],W}var Gr=100,qr=function(W,tt,K){tt===void 0&&(tt=new yr(W.width+2*Gr,W.height+2*Gr,25)),K===void 0&&(K=new yr(W.width+2*Gr,W.height+2*Gr,25)),this.transform=W,this.grid=tt,this.ignoredGrid=K,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+Gr,this.screenBottomBoundary=W.height+Gr,this.gridRightBoundary=W.width+2*Gr,this.gridBottomBoundary=W.height+2*Gr};qr.prototype.placeCollisionBox=function(W,tt,K,ut,kt){var jt=this.projectAndGetPerspectiveRatio(ut,W.anchorPointX,W.anchorPointY),Qt=K*jt.perspectiveRatio,de=W.x1*Qt+jt.point.x,Ee=W.y1*Qt+jt.point.y,Ye=W.x2*Qt+jt.point.x,ar=W.y2*Qt+jt.point.y;return!this.isInsideGrid(de,Ee,Ye,ar)||!tt&&this.grid.hitTest(de,Ee,Ye,ar,kt)?{box:[],offscreen:!1}:{box:[de,Ee,Ye,ar],offscreen:this.isOffscreen(de,Ee,Ye,ar)}},qr.prototype.placeCollisionCircles=function(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar,tr,vr){var Lr=[],Wr=new i.Point(tt.anchorX,tt.anchorY),Fr=Nr(Wr,jt),Br=$r(this.transform.cameraToCenterDistance,Fr.signedDistanceFromCamera),Kr=Ye?kt/Br:kt*Br,cn=Kr/i.ONE_EM,Fn=Nr(Wr,Qt).point,Pn={},Dn=tt.lineOffsetX*cn,Nn=tt.lineOffsetY*cn,Bn=In(cn,ut,Dn,Nn,!1,Fn,Wr,tt,K,Qt,Pn),Vn=!1,Zn=!1,ci=!0;if(Bn){for(var si=tr*.5*Br+vr,li=new i.Point(-Gr,-Gr),Ii=new i.Point(this.screenRightBoundary,this.screenBottomBoundary),la=new yn,yi=Bn.first,ki=Bn.last,Oi=[],Wi=yi.path.length-1;Wi>=1;Wi--)Oi.push(yi.path[Wi]);for(var Qi=1;Qi<ki.path.length;Qi++)Oi.push(ki.path[Qi]);var Ki=si*2.5;if(de){var Bi=Oi.map(function(Jo){return Nr(Jo,de)});Bi.some(function(Jo){return Jo.signedDistanceFromCamera<=0})?Oi=[]:Oi=Bi.map(function(Jo){return Jo.point})}var ia=[];if(Oi.length>0){for(var Ti=Oi[0].clone(),Ni=Oi[0].clone(),Aa=1;Aa<Oi.length;Aa++)Ti.x=Math.min(Ti.x,Oi[Aa].x),Ti.y=Math.min(Ti.y,Oi[Aa].y),Ni.x=Math.max(Ni.x,Oi[Aa].x),Ni.y=Math.max(Ni.y,Oi[Aa].y);Ti.x>=li.x&&Ni.x<=Ii.x&&Ti.y>=li.y&&Ni.y<=Ii.y?ia=[Oi]:Ni.x<li.x||Ti.x>Ii.x||Ni.y<li.y||Ti.y>Ii.y?ia=[]:ia=i.clipLine([Oi],li.x,li.y,Ii.x,Ii.y)}for(var ja=0,ws=ia;ja<ws.length;ja+=1){var Ys=ws[ja];la.reset(Ys,si*.25);var Xo=0;la.length<=.5*si?Xo=1:Xo=Math.ceil(la.paddedLength/Ki)+1;for(var dl=0;dl<Xo;dl++){var Nl=dl/Math.max(Xo-1,1),Mo=la.lerp(Nl),Zo=Mo.x+Gr,ho=Mo.y+Gr;Lr.push(Zo,ho,si,0);var jl=Zo-si,Uu=ho-si,Ko=Zo+si,cs=ho+si;if(ci=ci&&this.isOffscreen(jl,Uu,Ko,cs),Zn=Zn||this.isInsideGrid(jl,Uu,Ko,cs),!W&&this.grid.hitTestCircle(Zo,ho,si,ar)&&(Vn=!0,!Ee))return{circles:[],offscreen:!1,collisionDetected:Vn}}}}return{circles:!Ee&&Vn||!Zn?[]:Lr,offscreen:ci,collisionDetected:Vn}},qr.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var tt=[],K=1/0,ut=1/0,kt=-1/0,jt=-1/0,Qt=0,de=W;Qt<de.length;Qt+=1){var Ee=de[Qt],Ye=new i.Point(Ee.x+Gr,Ee.y+Gr);K=Math.min(K,Ye.x),ut=Math.min(ut,Ye.y),kt=Math.max(kt,Ye.x),jt=Math.max(jt,Ye.y),tt.push(Ye)}for(var ar=this.grid.query(K,ut,kt,jt).concat(this.ignoredGrid.query(K,ut,kt,jt)),tr={},vr={},Lr=0,Wr=ar;Lr<Wr.length;Lr+=1){var Fr=Wr[Lr],Br=Fr.key;if(tr[Br.bucketInstanceId]===void 0&&(tr[Br.bucketInstanceId]={}),!tr[Br.bucketInstanceId][Br.featureIndex]){var Kr=[new i.Point(Fr.x1,Fr.y1),new i.Point(Fr.x2,Fr.y1),new i.Point(Fr.x2,Fr.y2),new i.Point(Fr.x1,Fr.y2)];i.polygonIntersectsPolygon(tt,Kr)&&(tr[Br.bucketInstanceId][Br.featureIndex]=!0,vr[Br.bucketInstanceId]===void 0&&(vr[Br.bucketInstanceId]=[]),vr[Br.bucketInstanceId].push(Br.featureIndex))}}return vr},qr.prototype.insertCollisionBox=function(W,tt,K,ut,kt){var jt=tt?this.ignoredGrid:this.grid,Qt={bucketInstanceId:K,featureIndex:ut,collisionGroupID:kt};jt.insert(Qt,W[0],W[1],W[2],W[3])},qr.prototype.insertCollisionCircles=function(W,tt,K,ut,kt){for(var jt=tt?this.ignoredGrid:this.grid,Qt={bucketInstanceId:K,featureIndex:ut,collisionGroupID:kt},de=0;de<W.length;de+=4)jt.insertCircle(Qt,W[de],W[de+1],W[de+2])},qr.prototype.projectAndGetPerspectiveRatio=function(W,tt,K){var ut=[tt,K,0,1];ur(ut,ut,W);var kt=new i.Point((ut[0]/ut[3]+1)/2*this.transform.width+Gr,(-ut[1]/ut[3]+1)/2*this.transform.height+Gr);return{point:kt,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ut[3])}},qr.prototype.isOffscreen=function(W,tt,K,ut){return K<Gr||W>=this.screenRightBoundary||ut<Gr||tt>this.screenBottomBoundary},qr.prototype.isInsideGrid=function(W,tt,K,ut){return K>=0&&W<this.gridRightBoundary&&ut>=0&&tt<this.gridBottomBoundary},qr.prototype.getViewportMatrix=function(){var W=i.identity([]);return i.translate(W,W,[-Gr,-Gr,0]),W};function an(W,tt,K){return tt*(i.EXTENT/(W.tileSize*Math.pow(2,K-W.tileID.overscaledZ)))}var Mn=function(W,tt,K,ut){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?tt:-tt))):this.opacity=ut&&K?1:0,this.placed=K};Mn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var sn=function(W,tt,K,ut,kt){this.text=new Mn(W?W.text:null,tt,K,kt),this.icon=new Mn(W?W.icon:null,tt,ut,kt)};sn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var An=function(W,tt,K){this.text=W,this.icon=tt,this.skipFade=K},Sn=function(){this.invProjMatrix=i.create(),this.viewportMatrix=i.create(),this.circles=[]},qn=function(W,tt,K,ut,kt){this.bucketInstanceId=W,this.featureIndex=tt,this.sourceLayerIndex=K,this.bucketIndex=ut,this.tileID=kt},ii=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};ii.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var tt=++this.maxGroupID;this.collisionGroups[W]={ID:tt,predicate:function(K){return K.collisionGroupID===tt}}}return this.collisionGroups[W]};function Mi(W,tt,K,ut,kt){var jt=i.getAnchorAlignment(W),Qt=jt.horizontalAlign,de=jt.verticalAlign,Ee=-(Qt-.5)*tt,Ye=-(de-.5)*K,ar=i.evaluateVariableOffset(W,ut);return new i.Point(Ee+ar[0]*kt,Ye+ar[1]*kt)}function dr(W,tt,K,ut,kt,jt){var Qt=W.x1,de=W.x2,Ee=W.y1,Ye=W.y2,ar=W.anchorPointX,tr=W.anchorPointY,vr=new i.Point(tt,K);return ut&&vr._rotate(kt?jt:-jt),{x1:Qt+vr.x,y1:Ee+vr.y,x2:de+vr.x,y2:Ye+vr.y,anchorPointX:ar,anchorPointY:tr}}var Er=function(W,tt,K,ut){this.transform=W.clone(),this.collisionIndex=new qr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=tt,this.retainedQueryData={},this.collisionGroups=new ii(K),this.collisionCircleArrays={},this.prevPlacement=ut,ut&&(ut.prevPlacement=void 0),this.placedOrientations={}};Er.prototype.getBucketParts=function(W,tt,K,ut){var kt=K.getBucket(tt),jt=K.latestFeatureIndex;if(!(!kt||!jt||tt.id!==kt.layerIds[0])){var Qt=K.collisionBoxArray,de=kt.layers[0].layout,Ee=Math.pow(2,this.transform.zoom-K.tileID.overscaledZ),Ye=K.tileSize/i.EXTENT,ar=this.transform.calculatePosMatrix(K.tileID.toUnwrapped()),tr=de.get("text-pitch-alignment")==="map",vr=de.get("text-rotation-alignment")==="map",Lr=an(K,1,this.transform.zoom),Wr=Cr(ar,tr,vr,this.transform,Lr),Fr=null;if(tr){var Br=Dr(ar,tr,vr,this.transform,Lr);Fr=i.multiply([],this.transform.labelPlaneMatrix,Br)}this.retainedQueryData[kt.bucketInstanceId]=new qn(kt.bucketInstanceId,jt,kt.sourceLayerIndex,kt.index,K.tileID);var Kr={bucket:kt,layout:de,posMatrix:ar,textLabelPlaneMatrix:Wr,labelToScreenMatrix:Fr,scale:Ee,textPixelRatio:Ye,holdingForFade:K.holdingForFade(),collisionBoxArray:Qt,partiallyEvaluatedTextSize:i.evaluateSizeForZoom(kt.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(kt.sourceID)};if(ut)for(var cn=0,Fn=kt.sortKeyRanges;cn<Fn.length;cn+=1){var Pn=Fn[cn],Dn=Pn.sortKey,Nn=Pn.symbolInstanceStart,Bn=Pn.symbolInstanceEnd;W.push({sortKey:Dn,symbolInstanceStart:Nn,symbolInstanceEnd:Bn,parameters:Kr})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:kt.symbolInstances.length,parameters:Kr})}},Er.prototype.attemptAnchorPlacement=function(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar,tr,vr,Lr,Wr){var Fr=[tr.textOffset0,tr.textOffset1],Br=Mi(W,K,ut,Fr,kt),Kr=this.collisionIndex.placeCollisionBox(dr(tt,Br.x,Br.y,jt,Qt,this.transform.angle),ar,de,Ee,Ye.predicate);if(Wr){var cn=this.collisionIndex.placeCollisionBox(dr(Wr,Br.x,Br.y,jt,Qt,this.transform.angle),ar,de,Ee,Ye.predicate);if(cn.box.length===0)return}if(Kr.box.length>0){var Fn;return this.prevPlacement&&this.prevPlacement.variableOffsets[tr.crossTileID]&&this.prevPlacement.placements[tr.crossTileID]&&this.prevPlacement.placements[tr.crossTileID].text&&(Fn=this.prevPlacement.variableOffsets[tr.crossTileID].anchor),this.variableOffsets[tr.crossTileID]={textOffset:Fr,width:K,height:ut,anchor:W,textBoxScale:kt,prevAnchor:Fn},this.markUsedJustification(vr,W,tr,Lr),vr.allowVerticalPlacement&&(this.markUsedOrientation(vr,Lr,tr),this.placedOrientations[tr.crossTileID]=Lr),{shift:Br,placedGlyphBoxes:Kr}}},Er.prototype.placeLayerBucketPart=function(W,tt,K){var ut=this,kt=W.parameters,jt=kt.bucket,Qt=kt.layout,de=kt.posMatrix,Ee=kt.textLabelPlaneMatrix,Ye=kt.labelToScreenMatrix,ar=kt.textPixelRatio,tr=kt.holdingForFade,vr=kt.collisionBoxArray,Lr=kt.partiallyEvaluatedTextSize,Wr=kt.collisionGroup,Fr=Qt.get("text-optional"),Br=Qt.get("icon-optional"),Kr=Qt.get("text-allow-overlap"),cn=Qt.get("icon-allow-overlap"),Fn=Qt.get("text-rotation-alignment")==="map",Pn=Qt.get("text-pitch-alignment")==="map",Dn=Qt.get("icon-text-fit")!=="none",Nn=Qt.get("symbol-z-order")==="viewport-y",Bn=Kr&&(cn||!jt.hasIconData()||Br),Vn=cn&&(Kr||!jt.hasTextData()||Fr);!jt.collisionArrays&&vr&&jt.deserializeCollisionBoxes(vr);var Zn=function(yi,ki){if(!tt[yi.crossTileID]){if(tr){ut.placements[yi.crossTileID]=new An(!1,!1,!1);return}var Oi=!1,Wi=!1,Qi=!0,Ki=null,Bi={box:null,offscreen:null},ia={box:null,offscreen:null},Ti=null,Ni=null,Aa=null,ja=0,ws=0,Ys=0;ki.textFeatureIndex?ja=ki.textFeatureIndex:yi.useRuntimeCollisionCircles&&(ja=yi.featureIndex),ki.verticalTextFeatureIndex&&(ws=ki.verticalTextFeatureIndex);var Xo=ki.textBox;if(Xo){var dl=function(Ta){var Do=i.WritingMode.horizontal;if(jt.allowVerticalPlacement&&!Ta&&ut.prevPlacement){var Bo=ut.prevPlacement.placedOrientations[yi.crossTileID];Bo&&(ut.placedOrientations[yi.crossTileID]=Bo,Do=Bo,ut.markUsedOrientation(jt,Do,yi))}return Do},Nl=function(Ta,Do){if(jt.allowVerticalPlacement&&yi.numVerticalGlyphVertices>0&&ki.verticalTextBox)for(var Bo=0,Oc=jt.writingModes;Bo<Oc.length;Bo+=1){var rf=Oc[Bo];if(rf===i.WritingMode.vertical?(Bi=Do(),ia=Bi):Bi=Ta(),Bi&&Bi.box&&Bi.box.length)break}else Bi=Ta()};if(Qt.get("text-variable-anchor")){var Mo=Qt.get("text-variable-anchor");if(ut.prevPlacement&&ut.prevPlacement.variableOffsets[yi.crossTileID]){var Zo=ut.prevPlacement.variableOffsets[yi.crossTileID];Mo.indexOf(Zo.anchor)>0&&(Mo=Mo.filter(function(Ta){return Ta!==Zo.anchor}),Mo.unshift(Zo.anchor))}var ho=function(Ta,Do,Bo){for(var Oc=Ta.x2-Ta.x1,rf=Ta.y2-Ta.y1,Zf=yi.textBoxScale,Kf=Dn&&!cn?Do:null,_c={box:[],offscreen:!1},Jf=Kr?Mo.length*2:Mo.length,Pc=0;Pc<Jf;++Pc){var $f=Mo[Pc%Mo.length],Qf=Pc>=Mo.length,nf=ut.attemptAnchorPlacement($f,Ta,Oc,rf,Zf,Fn,Pn,ar,de,Wr,Qf,yi,jt,Bo,Kf);if(nf&&(_c=nf.placedGlyphBoxes,_c&&_c.box&&_c.box.length)){Oi=!0,Ki=nf.shift;break}}return _c},jl=function(){return ho(Xo,ki.iconBox,i.WritingMode.horizontal)},Uu=function(){var Ta=ki.verticalTextBox,Do=Bi&&Bi.box&&Bi.box.length;return jt.allowVerticalPlacement&&!Do&&yi.numVerticalGlyphVertices>0&&Ta?ho(Ta,ki.verticalIconBox,i.WritingMode.vertical):{box:null,offscreen:null}};Nl(jl,Uu),Bi&&(Oi=Bi.box,Qi=Bi.offscreen);var Ko=dl(Bi&&Bi.box);if(!Oi&&ut.prevPlacement){var cs=ut.prevPlacement.variableOffsets[yi.crossTileID];cs&&(ut.variableOffsets[yi.crossTileID]=cs,ut.markUsedJustification(jt,cs.anchor,yi,Ko))}}else{var Jo=function(Ta,Do){var Bo=ut.collisionIndex.placeCollisionBox(Ta,Kr,ar,de,Wr.predicate);return Bo&&Bo.box&&Bo.box.length&&(ut.markUsedOrientation(jt,Do,yi),ut.placedOrientations[yi.crossTileID]=Do),Bo},mc=function(){return Jo(Xo,i.WritingMode.horizontal)},Cc=function(){var Ta=ki.verticalTextBox;return jt.allowVerticalPlacement&&yi.numVerticalGlyphVertices>0&&Ta?Jo(Ta,i.WritingMode.vertical):{box:null,offscreen:null}};Nl(mc,Cc),dl(Bi&&Bi.box&&Bi.box.length)}}if(Ti=Bi,Oi=Ti&&Ti.box&&Ti.box.length>0,Qi=Ti&&Ti.offscreen,yi.useRuntimeCollisionCircles){var yc=jt.text.placedSymbolArray.get(yi.centerJustifiedTextSymbolIndex),no=i.evaluateSizeForFeature(jt.textSizeData,Lr,yc),Ec=Qt.get("text-padding"),xc=yi.collisionCircleDiameter;Ni=ut.collisionIndex.placeCollisionCircles(Kr,yc,jt.lineVertexArray,jt.glyphOffsetArray,no,de,Ee,Ye,K,Pn,Wr.predicate,xc,Ec),Oi=Kr||Ni.circles.length>0&&!Ni.collisionDetected,Qi=Qi&&Ni.offscreen}if(ki.iconFeatureIndex&&(Ys=ki.iconFeatureIndex),ki.iconBox){var co=function(Ta){var Do=Dn&&Ki?dr(Ta,Ki.x,Ki.y,Fn,Pn,ut.transform.angle):Ta;return ut.collisionIndex.placeCollisionBox(Do,cn,ar,de,Wr.predicate)};ia&&ia.box&&ia.box.length&&ki.verticalIconBox?(Aa=co(ki.verticalIconBox),Wi=Aa.box.length>0):(Aa=co(ki.iconBox),Wi=Aa.box.length>0),Qi=Qi&&Aa.offscreen}var qu=Fr||yi.numHorizontalGlyphVertices===0&&yi.numVerticalGlyphVertices===0,Lc=Br||yi.numIconVertices===0;if(!qu&&!Lc?Wi=Oi=Wi&&Oi:Lc?qu||(Wi=Wi&&Oi):Oi=Wi&&Oi,Oi&&Ti&&Ti.box&&(ia&&ia.box&&ws?ut.collisionIndex.insertCollisionBox(Ti.box,Qt.get("text-ignore-placement"),jt.bucketInstanceId,ws,Wr.ID):ut.collisionIndex.insertCollisionBox(Ti.box,Qt.get("text-ignore-placement"),jt.bucketInstanceId,ja,Wr.ID)),Wi&&Aa&&ut.collisionIndex.insertCollisionBox(Aa.box,Qt.get("icon-ignore-placement"),jt.bucketInstanceId,Ys,Wr.ID),Ni&&(Oi&&ut.collisionIndex.insertCollisionCircles(Ni.circles,Qt.get("text-ignore-placement"),jt.bucketInstanceId,ja,Wr.ID),K)){var Rc=jt.bucketInstanceId,Ul=ut.collisionCircleArrays[Rc];Ul===void 0&&(Ul=ut.collisionCircleArrays[Rc]=new Sn);for(var bc=0;bc<Ni.circles.length;bc+=4)Ul.circles.push(Ni.circles[bc+0]),Ul.circles.push(Ni.circles[bc+1]),Ul.circles.push(Ni.circles[bc+2]),Ul.circles.push(Ni.collisionDetected?1:0)}ut.placements[yi.crossTileID]=new An(Oi||Bn,Wi||Vn,Qi||jt.justReloaded),tt[yi.crossTileID]=!0}};if(Nn)for(var ci=jt.getSortedSymbolIndexes(this.transform.angle),si=ci.length-1;si>=0;--si){var li=ci[si];Zn(jt.symbolInstances.get(li),jt.collisionArrays[li])}else for(var Ii=W.symbolInstanceStart;Ii<W.symbolInstanceEnd;Ii++)Zn(jt.symbolInstances.get(Ii),jt.collisionArrays[Ii]);if(K&&jt.bucketInstanceId in this.collisionCircleArrays){var la=this.collisionCircleArrays[jt.bucketInstanceId];i.invert(la.invProjMatrix,de),la.viewportMatrix=this.collisionIndex.getViewportMatrix()}jt.justReloaded=!1},Er.prototype.markUsedJustification=function(W,tt,K,ut){var kt={left:K.leftJustifiedTextSymbolIndex,center:K.centerJustifiedTextSymbolIndex,right:K.rightJustifiedTextSymbolIndex},jt;ut===i.WritingMode.vertical?jt=K.verticalPlacedTextSymbolIndex:jt=kt[i.getAnchorJustification(tt)];for(var Qt=[K.leftJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.rightJustifiedTextSymbolIndex,K.verticalPlacedTextSymbolIndex],de=0,Ee=Qt;de<Ee.length;de+=1){var Ye=Ee[de];Ye>=0&&(jt>=0&&Ye!==jt?W.text.placedSymbolArray.get(Ye).crossTileID=0:W.text.placedSymbolArray.get(Ye).crossTileID=K.crossTileID)}},Er.prototype.markUsedOrientation=function(W,tt,K){for(var ut=tt===i.WritingMode.horizontal||tt===i.WritingMode.horizontalOnly?tt:0,kt=tt===i.WritingMode.vertical?tt:0,jt=[K.leftJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.rightJustifiedTextSymbolIndex],Qt=0,de=jt;Qt<de.length;Qt+=1){var Ee=de[Qt];W.text.placedSymbolArray.get(Ee).placedOrientation=ut}K.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(K.verticalPlacedTextSymbolIndex).placedOrientation=kt)},Er.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var tt=this.prevPlacement,K=!1;this.prevZoomAdjustment=tt?tt.zoomAdjustment(this.transform.zoom):0;var ut=tt?tt.symbolFadeChange(W):1,kt=tt?tt.opacities:{},jt=tt?tt.variableOffsets:{},Qt=tt?tt.placedOrientations:{};for(var de in this.placements){var Ee=this.placements[de],Ye=kt[de];Ye?(this.opacities[de]=new sn(Ye,ut,Ee.text,Ee.icon),K=K||Ee.text!==Ye.text.placed||Ee.icon!==Ye.icon.placed):(this.opacities[de]=new sn(null,ut,Ee.text,Ee.icon,Ee.skipFade),K=K||Ee.text||Ee.icon)}for(var ar in kt){var tr=kt[ar];if(!this.opacities[ar]){var vr=new sn(tr,ut,!1,!1);vr.isHidden()||(this.opacities[ar]=vr,K=K||tr.text.placed||tr.icon.placed)}}for(var Lr in jt)!this.variableOffsets[Lr]&&this.opacities[Lr]&&!this.opacities[Lr].isHidden()&&(this.variableOffsets[Lr]=jt[Lr]);for(var Wr in Qt)!this.placedOrientations[Wr]&&this.opacities[Wr]&&!this.opacities[Wr].isHidden()&&(this.placedOrientations[Wr]=Qt[Wr]);K?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=tt?tt.lastPlacementChangeTime:W)},Er.prototype.updateLayerOpacities=function(W,tt){for(var K={},ut=0,kt=tt;ut<kt.length;ut+=1){var jt=kt[ut],Qt=jt.getBucket(W);Qt&&jt.latestFeatureIndex&&W.id===Qt.layerIds[0]&&this.updateBucketOpacities(Qt,K,jt.collisionBoxArray)}},Er.prototype.updateBucketOpacities=function(W,tt,K){var ut=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var kt=W.layers[0].layout,jt=new sn(null,0,!1,!1,!0),Qt=kt.get("text-allow-overlap"),de=kt.get("icon-allow-overlap"),Ee=kt.get("text-variable-anchor"),Ye=kt.get("text-rotation-alignment")==="map",ar=kt.get("text-pitch-alignment")==="map",tr=kt.get("icon-text-fit")!=="none",vr=new sn(null,0,Qt&&(de||!W.hasIconData()||kt.get("icon-optional")),de&&(Qt||!W.hasTextData()||kt.get("text-optional")),!0);!W.collisionArrays&&K&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(K);for(var Lr=function(Kr,cn,Fn){for(var Pn=0;Pn<cn/4;Pn++)Kr.opacityVertexArray.emplaceBack(Fn)},Wr=function(Kr){var cn=W.symbolInstances.get(Kr),Fn=cn.numHorizontalGlyphVertices,Pn=cn.numVerticalGlyphVertices,Dn=cn.crossTileID,Nn=tt[Dn],Bn=ut.opacities[Dn];Nn?Bn=jt:Bn||(Bn=vr,ut.opacities[Dn]=Bn),tt[Dn]=!0;var Vn=Fn>0||Pn>0,Zn=cn.numIconVertices>0,ci=ut.placedOrientations[cn.crossTileID],si=ci===i.WritingMode.vertical,li=ci===i.WritingMode.horizontal||ci===i.WritingMode.horizontalOnly;if(Vn){var Ii=Pr(Bn.text),la=si?Vr:Ii;Lr(W.text,Fn,la);var yi=li?Vr:Ii;Lr(W.text,Pn,yi);var ki=Bn.text.isHidden();[cn.rightJustifiedTextSymbolIndex,cn.centerJustifiedTextSymbolIndex,cn.leftJustifiedTextSymbolIndex].forEach(function(Ys){Ys>=0&&(W.text.placedSymbolArray.get(Ys).hidden=ki||si?1:0)}),cn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(cn.verticalPlacedTextSymbolIndex).hidden=ki||li?1:0);var Oi=ut.variableOffsets[cn.crossTileID];Oi&&ut.markUsedJustification(W,Oi.anchor,cn,ci);var Wi=ut.placedOrientations[cn.crossTileID];Wi&&(ut.markUsedJustification(W,"left",cn,Wi),ut.markUsedOrientation(W,Wi,cn))}if(Zn){var Qi=Pr(Bn.icon),Ki=!(tr&&cn.verticalPlacedIconSymbolIndex&&si);if(cn.placedIconSymbolIndex>=0){var Bi=Ki?Qi:Vr;Lr(W.icon,cn.numIconVertices,Bi),W.icon.placedSymbolArray.get(cn.placedIconSymbolIndex).hidden=Bn.icon.isHidden()}if(cn.verticalPlacedIconSymbolIndex>=0){var ia=Ki?Vr:Qi;Lr(W.icon,cn.numVerticalIconVertices,ia),W.icon.placedSymbolArray.get(cn.verticalPlacedIconSymbolIndex).hidden=Bn.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var Ti=W.collisionArrays[Kr];if(Ti){var Ni=new i.Point(0,0);if(Ti.textBox||Ti.verticalTextBox){var Aa=!0;if(Ee){var ja=ut.variableOffsets[Dn];ja?(Ni=Mi(ja.anchor,ja.width,ja.height,ja.textOffset,ja.textBoxScale),Ye&&Ni._rotate(ar?ut.transform.angle:-ut.transform.angle)):Aa=!1}Ti.textBox&&gr(W.textCollisionBox.collisionVertexArray,Bn.text.placed,!Aa||si,Ni.x,Ni.y),Ti.verticalTextBox&&gr(W.textCollisionBox.collisionVertexArray,Bn.text.placed,!Aa||li,Ni.x,Ni.y)}var ws=!!(!li&&Ti.verticalIconBox);Ti.iconBox&&gr(W.iconCollisionBox.collisionVertexArray,Bn.icon.placed,ws,tr?Ni.x:0,tr?Ni.y:0),Ti.verticalIconBox&&gr(W.iconCollisionBox.collisionVertexArray,Bn.icon.placed,!ws,tr?Ni.x:0,tr?Ni.y:0)}}},Fr=0;Fr<W.symbolInstances.length;Fr++)Wr(Fr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var Br=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=Br.invProjMatrix,W.placementViewportMatrix=Br.viewportMatrix,W.collisionCircleArray=Br.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},Er.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Er.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},Er.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},Er.prototype.stillRecent=function(W,tt){var K=this.zoomAtLastRecencyCheck===tt?1-this.zoomAdjustment(tt):1;return this.zoomAtLastRecencyCheck=tt,this.commitTime+this.fadeDuration*K>W},Er.prototype.setStale=function(){this.stale=!0};function gr(W,tt,K,ut,kt){W.emplaceBack(tt?1:0,K?1:0,ut||0,kt||0),W.emplaceBack(tt?1:0,K?1:0,ut||0,kt||0),W.emplaceBack(tt?1:0,K?1:0,ut||0,kt||0),W.emplaceBack(tt?1:0,K?1:0,ut||0,kt||0)}var Or=Math.pow(2,25),vn=Math.pow(2,24),Tn=Math.pow(2,17),ln=Math.pow(2,16),nn=Math.pow(2,9),xr=Math.pow(2,8),jr=Math.pow(2,1);function Pr(W){if(W.opacity===0&&!W.placed)return 0;if(W.opacity===1&&W.placed)return 4294967295;var tt=W.placed?1:0,K=Math.floor(W.opacity*127);return K*Or+tt*vn+K*Tn+tt*ln+K*nn+tt*xr+K*jr+tt}var Vr=0,mn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};mn.prototype.continuePlacement=function(W,tt,K,ut,kt){for(var jt=this._bucketParts;this._currentTileIndex<W.length;){var Qt=W[this._currentTileIndex];if(tt.getBucketParts(jt,ut,Qt,this._sortAcrossTiles),this._currentTileIndex++,kt())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,jt.sort(function(Ee,Ye){return Ee.sortKey-Ye.sortKey}));this._currentPartIndex<jt.length;){var de=jt[this._currentPartIndex];if(tt.placeLayerBucketPart(de,this._seenCrossTileIDs,K),this._currentPartIndex++,kt())return!0}return!1};var xn=function(W,tt,K,ut,kt,jt,Qt){this.placement=new Er(W,kt,jt,Qt),this._currentPlacementIndex=tt.length-1,this._forceFullPlacement=K,this._showCollisionBoxes=ut,this._done=!1};xn.prototype.isDone=function(){return this._done},xn.prototype.continuePlacement=function(W,tt,K){for(var ut=this,kt=i.browser.now(),jt=function(){var ar=i.browser.now()-kt;return ut._forceFullPlacement?!1:ar>2};this._currentPlacementIndex>=0;){var Qt=W[this._currentPlacementIndex],de=tt[Qt],Ee=this.placement.collisionIndex.transform.zoom;if(de.type==="symbol"&&(!de.minzoom||de.minzoom<=Ee)&&(!de.maxzoom||de.maxzoom>Ee)){this._inProgressLayer||(this._inProgressLayer=new mn(de));var Ye=this._inProgressLayer.continuePlacement(K[de.source],this.placement,this._showCollisionBoxes,de,jt);if(Ye)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},xn.prototype.commit=function(W){return this.placement.commit(W),this.placement};var _n=512/i.EXTENT/2,Rn=function(W,tt,K){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=K;for(var ut=0;ut<tt.length;ut++){var kt=tt.get(ut),jt=kt.key;this.indexedSymbolInstances[jt]||(this.indexedSymbolInstances[jt]=[]),this.indexedSymbolInstances[jt].push({crossTileID:kt.crossTileID,coord:this.getScaledCoordinates(kt,W)})}};Rn.prototype.getScaledCoordinates=function(W,tt){var K=tt.canonical.z-this.tileID.canonical.z,ut=_n/Math.pow(2,K);return{x:Math.floor((tt.canonical.x*i.EXTENT+W.anchorX)*ut),y:Math.floor((tt.canonical.y*i.EXTENT+W.anchorY)*ut)}},Rn.prototype.findMatches=function(W,tt,K){for(var ut=this.tileID.canonical.z<tt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-tt.canonical.z),kt=0;kt<W.length;kt++){var jt=W.get(kt);if(!jt.crossTileID){var Qt=this.indexedSymbolInstances[jt.key];if(Qt)for(var de=this.getScaledCoordinates(jt,tt),Ee=0,Ye=Qt;Ee<Ye.length;Ee+=1){var ar=Ye[Ee];if(Math.abs(ar.coord.x-de.x)<=ut&&Math.abs(ar.coord.y-de.y)<=ut&&!K[ar.crossTileID]){K[ar.crossTileID]=!0,jt.crossTileID=ar.crossTileID;break}}}}};var Cn=function(){this.maxCrossTileID=0};Cn.prototype.generate=function(){return++this.maxCrossTileID};var oi=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};oi.prototype.handleWrapJump=function(W){var tt=Math.round((W-this.lng)/360);if(tt!==0)for(var K in this.indexes){var ut=this.indexes[K],kt={};for(var jt in ut){var Qt=ut[jt];Qt.tileID=Qt.tileID.unwrapTo(Qt.tileID.wrap+tt),kt[Qt.tileID.key]=Qt}this.indexes[K]=kt}this.lng=W},oi.prototype.addBucket=function(W,tt,K){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===tt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var ut=0;ut<tt.symbolInstances.length;ut++){var kt=tt.symbolInstances.get(ut);kt.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var jt=this.usedCrossTileIDs[W.overscaledZ];for(var Qt in this.indexes){var de=this.indexes[Qt];if(Number(Qt)>W.overscaledZ)for(var Ee in de){var Ye=de[Ee];Ye.tileID.isChildOf(W)&&Ye.findMatches(tt.symbolInstances,W,jt)}else{var ar=W.scaledTo(Number(Qt)),tr=de[ar.key];tr&&tr.findMatches(tt.symbolInstances,W,jt)}}for(var vr=0;vr<tt.symbolInstances.length;vr++){var Lr=tt.symbolInstances.get(vr);Lr.crossTileID||(Lr.crossTileID=K.generate(),jt[Lr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new Rn(W,tt.symbolInstances,tt.bucketInstanceId),!0},oi.prototype.removeBucketCrossTileIDs=function(W,tt){for(var K in tt.indexedSymbolInstances)for(var ut=0,kt=tt.indexedSymbolInstances[K];ut<kt.length;ut+=1){var jt=kt[ut];delete this.usedCrossTileIDs[W][jt.crossTileID]}},oi.prototype.removeStaleBuckets=function(W){var tt=!1;for(var K in this.indexes){var ut=this.indexes[K];for(var kt in ut)W[ut[kt].bucketInstanceId]||(this.removeBucketCrossTileIDs(K,ut[kt]),delete ut[kt],tt=!0)}return tt};var Jn=function(){this.layerIndexes={},this.crossTileIDs=new Cn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Jn.prototype.addLayer=function(W,tt,K){var ut=this.layerIndexes[W.id];ut===void 0&&(ut=this.layerIndexes[W.id]=new oi);var kt=!1,jt={};ut.handleWrapJump(K);for(var Qt=0,de=tt;Qt<de.length;Qt+=1){var Ee=de[Qt],Ye=Ee.getBucket(W);!Ye||W.id!==Ye.layerIds[0]||(Ye.bucketInstanceId||(Ye.bucketInstanceId=++this.maxBucketInstanceId),ut.addBucket(Ee.tileID,Ye,this.crossTileIDs)&&(kt=!0),jt[Ye.bucketInstanceId]=!0)}return ut.removeStaleBuckets(jt)&&(kt=!0),kt},Jn.prototype.pruneUnusedLayers=function(W){var tt={};W.forEach(function(ut){tt[ut]=!0});for(var K in this.layerIndexes)tt[K]||delete this.layerIndexes[K]};var ai=function(W,tt){return i.emitValidationErrors(W,tt&&tt.filter(function(K){return K.identifier!=="source.canvas"}))},_i=i.pick(Oe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ta=i.pick(Oe,["setCenter","setZoom","setBearing","setPitch"]),Yi=We(),oo=function(W){function tt(K,ut){var kt=this;ut===void 0&&(ut={}),W.call(this),this.map=K,this.dispatcher=new O(Me(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new L(K._requestManager,ut.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new Jn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",i.getReferrer());var jt=this;this._rtlTextPluginCallback=tt.registerForPluginStateChange(function(Qt){var de={pluginStatus:Qt.pluginStatus,pluginURL:Qt.pluginURL};jt.dispatcher.broadcast("syncRTLPluginState",de,function(Ee,Ye){if(i.triggerPluginCompletionEvent(Ee),Ye){var ar=Ye.every(function(vr){return vr});if(ar)for(var tr in jt.sourceCaches)jt.sourceCaches[tr].reload()}})}),this.on("data",function(Qt){if(!(Qt.dataType!=="source"||Qt.sourceDataType!=="metadata")){var de=kt.sourceCaches[Qt.sourceId];if(de){var Ee=de.getSource();if(!(!Ee||!Ee.vectorLayerIds))for(var Ye in kt._layers){var ar=kt._layers[Ye];ar.source===Ee.id&&kt._validateLayer(ar)}}}})}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.loadURL=function(K,ut){var kt=this;ut===void 0&&(ut={}),this.fire(new i.Event("dataloading",{dataType:"style"}));var jt=typeof ut.validate=="boolean"?ut.validate:!i.isMapboxURL(K);K=this.map._requestManager.normalizeStyleURL(K,ut.accessToken);var Qt=this.map._requestManager.transformRequest(K,i.ResourceType.Style);this._request=i.getJSON(Qt,function(de,Ee){kt._request=null,de?kt.fire(new i.ErrorEvent(de)):Ee&&kt._load(Ee,jt)})},tt.prototype.loadJSON=function(K,ut){var kt=this;ut===void 0&&(ut={}),this.fire(new i.Event("dataloading",{dataType:"style"})),this._request=i.browser.frame(function(){kt._request=null,kt._load(K,ut.validate!==!1)})},tt.prototype.loadEmpty=function(){this.fire(new i.Event("dataloading",{dataType:"style"})),this._load(Yi,!1)},tt.prototype._load=function(K,ut){if(!(ut&&ai(this,i.validateStyle(K)))){this._loaded=!0,this.stylesheet=K;for(var kt in K.sources)this.addSource(kt,K.sources[kt],{validate:!1});K.sprite?this._loadSprite(K.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(K.glyphs);var jt=Je(this.stylesheet.layers);this._order=jt.map(function(Ye){return Ye.id}),this._layers={},this._serializedLayers={};for(var Qt=0,de=jt;Qt<de.length;Qt+=1){var Ee=de[Qt];Ee=i.createStyleLayer(Ee),Ee.setEventedParent(this,{layer:{id:Ee.id}}),this._layers[Ee.id]=Ee,this._serializedLayers[Ee.id]=Ee.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new i.Event("data",{dataType:"style"})),this.fire(new i.Event("style.load"))}},tt.prototype._loadSprite=function(K){var ut=this;this._spriteRequest=p(K,this.map._requestManager,function(kt,jt){if(ut._spriteRequest=null,kt)ut.fire(new i.ErrorEvent(kt));else if(jt)for(var Qt in jt)ut.imageManager.addImage(Qt,jt[Qt]);ut.imageManager.setLoaded(!0),ut._availableImages=ut.imageManager.listImages(),ut.dispatcher.broadcast("setImages",ut._availableImages),ut.fire(new i.Event("data",{dataType:"style"}))})},tt.prototype._validateLayer=function(K){var ut=this.sourceCaches[K.source];if(ut){var kt=K.sourceLayer;if(kt){var jt=ut.getSource();(jt.type==="geojson"||jt.vectorLayerIds&&jt.vectorLayerIds.indexOf(kt)===-1)&&this.fire(new i.ErrorEvent(new Error('Source layer "'+kt+'" does not exist on source "'+jt.id+'" as specified by style layer "'+K.id+'"')))}}},tt.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var K in this.sourceCaches)if(!this.sourceCaches[K].loaded())return!1;return!!this.imageManager.isLoaded()},tt.prototype._serializeLayers=function(K){for(var ut=[],kt=0,jt=K;kt<jt.length;kt+=1){var Qt=jt[kt],de=this._layers[Qt];de.type!=="custom"&&ut.push(de.serialize())}return ut},tt.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var K in this.sourceCaches)if(this.sourceCaches[K].hasTransition())return!0;for(var ut in this._layers)if(this._layers[ut].hasTransition())return!0;return!1},tt.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},tt.prototype.update=function(K){if(this._loaded){var ut=this._changed;if(this._changed){var kt=Object.keys(this._updatedLayers),jt=Object.keys(this._removedLayers);(kt.length||jt.length)&&this._updateWorkerLayers(kt,jt);for(var Qt in this._updatedSources){var de=this._updatedSources[Qt];de==="reload"?this._reloadSource(Qt):de==="clear"&&this._clearSource(Qt)}this._updateTilesForChangedImages();for(var Ee in this._updatedPaintProps)this._layers[Ee].updateTransitions(K);this.light.updateTransitions(K),this._resetUpdates()}var Ye={};for(var ar in this.sourceCaches){var tr=this.sourceCaches[ar];Ye[ar]=tr.used,tr.used=!1}for(var vr=0,Lr=this._order;vr<Lr.length;vr+=1){var Wr=Lr[vr],Fr=this._layers[Wr];Fr.recalculate(K,this._availableImages),!Fr.isHidden(K.zoom)&&Fr.source&&(this.sourceCaches[Fr.source].used=!0)}for(var Br in Ye){var Kr=this.sourceCaches[Br];Ye[Br]!==Kr.used&&Kr.fire(new i.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Br}))}this.light.recalculate(K),this.z=K.zoom,ut&&this.fire(new i.Event("data",{dataType:"style"}))}},tt.prototype._updateTilesForChangedImages=function(){var K=Object.keys(this._changedImages);if(K.length){for(var ut in this.sourceCaches)this.sourceCaches[ut].reloadTilesForDependencies(["icons","patterns"],K);this._changedImages={}}},tt.prototype._updateWorkerLayers=function(K,ut){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(K),removedIds:ut})},tt.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},tt.prototype.setState=function(K){var ut=this;if(this._checkLoaded(),ai(this,i.validateStyle(K)))return!1;K=i.clone$1(K),K.layers=Je(K.layers);var kt=pn(this.serialize(),K).filter(function(Qt){return!(Qt.command in ta)});if(kt.length===0)return!1;var jt=kt.filter(function(Qt){return!(Qt.command in _i)});if(jt.length>0)throw new Error("Unimplemented: "+jt.map(function(Qt){return Qt.command}).join(", ")+".");return kt.forEach(function(Qt){Qt.command!=="setTransition"&&ut[Qt.command].apply(ut,Qt.args)}),this.stylesheet=K,!0},tt.prototype.addImage=function(K,ut){if(this.getImage(K))return this.fire(new i.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(K,ut),this._afterImageUpdated(K)},tt.prototype.updateImage=function(K,ut){this.imageManager.updateImage(K,ut)},tt.prototype.getImage=function(K){return this.imageManager.getImage(K)},tt.prototype.removeImage=function(K){if(!this.getImage(K))return this.fire(new i.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(K),this._afterImageUpdated(K)},tt.prototype._afterImageUpdated=function(K){this._availableImages=this.imageManager.listImages(),this._changedImages[K]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new i.Event("data",{dataType:"style"}))},tt.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},tt.prototype.addSource=function(K,ut,kt){var jt=this;if(kt===void 0&&(kt={}),this._checkLoaded(),this.sourceCaches[K]!==void 0)throw new Error("There is already a source with this ID");if(!ut.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(ut).join(", ")+".");var Qt=["vector","raster","geojson","video","image"],de=Qt.indexOf(ut.type)>=0;if(!(de&&this._validate(i.validateStyle.source,"sources."+K,ut,null,kt))){this.map&&this.map._collectResourceTiming&&(ut.collectResourceTiming=!0);var Ee=this.sourceCaches[K]=new Re(K,ut,this.dispatcher);Ee.style=this,Ee.setEventedParent(this,function(){return{isSourceLoaded:jt.loaded(),source:Ee.serialize(),sourceId:K}}),Ee.onAdd(this.map),this._changed=!0}},tt.prototype.removeSource=function(K){if(this._checkLoaded(),this.sourceCaches[K]===void 0)throw new Error("There is no source with this ID");for(var ut in this._layers)if(this._layers[ut].source===K)return this.fire(new i.ErrorEvent(new Error('Source "'+K+'" cannot be removed while layer "'+ut+'" is using it.')));var kt=this.sourceCaches[K];delete this.sourceCaches[K],delete this._updatedSources[K],kt.fire(new i.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:K})),kt.setEventedParent(null),kt.clearTiles(),kt.onRemove&&kt.onRemove(this.map),this._changed=!0},tt.prototype.setGeoJSONSourceData=function(K,ut){this._checkLoaded();var kt=this.sourceCaches[K].getSource();kt.setData(ut),this._changed=!0},tt.prototype.getSource=function(K){return this.sourceCaches[K]&&this.sourceCaches[K].getSource()},tt.prototype.addLayer=function(K,ut,kt){kt===void 0&&(kt={}),this._checkLoaded();var jt=K.id;if(this.getLayer(jt)){this.fire(new i.ErrorEvent(new Error('Layer with id "'+jt+'" already exists on this map')));return}var Qt;if(K.type==="custom"){if(ai(this,i.validateCustomStyleLayer(K)))return;Qt=i.createStyleLayer(K)}else{if(typeof K.source=="object"&&(this.addSource(jt,K.source),K=i.clone$1(K),K=i.extend(K,{source:jt})),this._validate(i.validateStyle.layer,"layers."+jt,K,{arrayIndex:-1},kt))return;Qt=i.createStyleLayer(K),this._validateLayer(Qt),Qt.setEventedParent(this,{layer:{id:jt}}),this._serializedLayers[Qt.id]=Qt.serialize()}var de=ut?this._order.indexOf(ut):this._order.length;if(ut&&de===-1){this.fire(new i.ErrorEvent(new Error('Layer with id "'+ut+'" does not exist on this map.')));return}if(this._order.splice(de,0,jt),this._layerOrderChanged=!0,this._layers[jt]=Qt,this._removedLayers[jt]&&Qt.source&&Qt.type!=="custom"){var Ee=this._removedLayers[jt];delete this._removedLayers[jt],Ee.type!==Qt.type?this._updatedSources[Qt.source]="clear":(this._updatedSources[Qt.source]="reload",this.sourceCaches[Qt.source].pause())}this._updateLayer(Qt),Qt.onAdd&&Qt.onAdd(this.map)},tt.prototype.moveLayer=function(K,ut){this._checkLoaded(),this._changed=!0;var kt=this._layers[K];if(!kt){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be moved.")));return}if(K!==ut){var jt=this._order.indexOf(K);this._order.splice(jt,1);var Qt=ut?this._order.indexOf(ut):this._order.length;if(ut&&Qt===-1){this.fire(new i.ErrorEvent(new Error('Layer with id "'+ut+'" does not exist on this map.')));return}this._order.splice(Qt,0,K),this._layerOrderChanged=!0}},tt.prototype.removeLayer=function(K){this._checkLoaded();var ut=this._layers[K];if(!ut){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be removed.")));return}ut.setEventedParent(null);var kt=this._order.indexOf(K);this._order.splice(kt,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[K]=ut,delete this._layers[K],delete this._serializedLayers[K],delete this._updatedLayers[K],delete this._updatedPaintProps[K],ut.onRemove&&ut.onRemove(this.map)},tt.prototype.getLayer=function(K){return this._layers[K]},tt.prototype.hasLayer=function(K){return K in this._layers},tt.prototype.setLayerZoomRange=function(K,ut,kt){this._checkLoaded();var jt=this.getLayer(K);if(!jt){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot have zoom extent.")));return}jt.minzoom===ut&&jt.maxzoom===kt||(ut!=null&&(jt.minzoom=ut),kt!=null&&(jt.maxzoom=kt),this._updateLayer(jt))},tt.prototype.setFilter=function(K,ut,kt){kt===void 0&&(kt={}),this._checkLoaded();var jt=this.getLayer(K);if(!jt){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be filtered.")));return}if(!i.deepEqual(jt.filter,ut)){if(ut==null){jt.filter=void 0,this._updateLayer(jt);return}this._validate(i.validateStyle.filter,"layers."+jt.id+".filter",ut,null,kt)||(jt.filter=i.clone$1(ut),this._updateLayer(jt))}},tt.prototype.getFilter=function(K){return i.clone$1(this.getLayer(K).filter)},tt.prototype.setLayoutProperty=function(K,ut,kt,jt){jt===void 0&&(jt={}),this._checkLoaded();var Qt=this.getLayer(K);if(!Qt){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be styled.")));return}i.deepEqual(Qt.getLayoutProperty(ut),kt)||(Qt.setLayoutProperty(ut,kt,jt),this._updateLayer(Qt))},tt.prototype.getLayoutProperty=function(K,ut){var kt=this.getLayer(K);if(!kt){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style.")));return}return kt.getLayoutProperty(ut)},tt.prototype.setPaintProperty=function(K,ut,kt,jt){jt===void 0&&(jt={}),this._checkLoaded();var Qt=this.getLayer(K);if(!Qt){this.fire(new i.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be styled.")));return}if(!i.deepEqual(Qt.getPaintProperty(ut),kt)){var de=Qt.setPaintProperty(ut,kt,jt);de&&this._updateLayer(Qt),this._changed=!0,this._updatedPaintProps[K]=!0}},tt.prototype.getPaintProperty=function(K,ut){return this.getLayer(K).getPaintProperty(ut)},tt.prototype.setFeatureState=function(K,ut){this._checkLoaded();var kt=K.source,jt=K.sourceLayer,Qt=this.sourceCaches[kt];if(Qt===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+kt+"' does not exist in the map's style.")));return}var de=Qt.getSource().type;if(de==="geojson"&&jt){this.fire(new i.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(de==="vector"&&!jt){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}K.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),Qt.setFeatureState(jt,K.id,ut)},tt.prototype.removeFeatureState=function(K,ut){this._checkLoaded();var kt=K.source,jt=this.sourceCaches[kt];if(jt===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+kt+"' does not exist in the map's style.")));return}var Qt=jt.getSource().type,de=Qt==="vector"?K.sourceLayer:void 0;if(Qt==="vector"&&!de){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ut&&typeof K.id!="string"&&typeof K.id!="number"){this.fire(new i.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}jt.removeFeatureState(de,K.id,ut)},tt.prototype.getFeatureState=function(K){this._checkLoaded();var ut=K.source,kt=K.sourceLayer,jt=this.sourceCaches[ut];if(jt===void 0){this.fire(new i.ErrorEvent(new Error("The source '"+ut+"' does not exist in the map's style.")));return}var Qt=jt.getSource().type;if(Qt==="vector"&&!kt){this.fire(new i.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return K.id===void 0&&this.fire(new i.ErrorEvent(new Error("The feature id parameter must be provided."))),jt.getFeatureState(kt,K.id)},tt.prototype.getTransition=function(){return i.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},tt.prototype.serialize=function(){return i.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:i.mapObject(this.sourceCaches,function(K){return K.serialize()}),layers:this._serializeLayers(this._order)},function(K){return K!==void 0})},tt.prototype._updateLayer=function(K){this._updatedLayers[K.id]=!0,K.source&&!this._updatedSources[K.source]&&this.sourceCaches[K.source].getSource().type!=="raster"&&(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause()),this._changed=!0},tt.prototype._flattenAndSortRenderedFeatures=function(K){for(var ut=this,kt=function(li){return ut._layers[li].type==="fill-extrusion"},jt={},Qt=[],de=this._order.length-1;de>=0;de--){var Ee=this._order[de];if(kt(Ee)){jt[Ee]=de;for(var Ye=0,ar=K;Ye<ar.length;Ye+=1){var tr=ar[Ye],vr=tr[Ee];if(vr)for(var Lr=0,Wr=vr;Lr<Wr.length;Lr+=1){var Fr=Wr[Lr];Qt.push(Fr)}}}}Qt.sort(function(li,Ii){return Ii.intersectionZ-li.intersectionZ});for(var Br=[],Kr=this._order.length-1;Kr>=0;Kr--){var cn=this._order[Kr];if(kt(cn))for(var Fn=Qt.length-1;Fn>=0;Fn--){var Pn=Qt[Fn].feature;if(jt[Pn.layer.id]<Kr)break;Br.push(Pn),Qt.pop()}else for(var Dn=0,Nn=K;Dn<Nn.length;Dn+=1){var Bn=Nn[Dn],Vn=Bn[cn];if(Vn)for(var Zn=0,ci=Vn;Zn<ci.length;Zn+=1){var si=ci[Zn];Br.push(si.feature)}}}return Br},tt.prototype.queryRenderedFeatures=function(K,ut,kt){ut&&ut.filter&&this._validate(i.validateStyle.filter,"queryRenderedFeatures.filter",ut.filter,null,ut);var jt={};if(ut&&ut.layers){if(!Array.isArray(ut.layers))return this.fire(new i.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Qt=0,de=ut.layers;Qt<de.length;Qt+=1){var Ee=de[Qt],Ye=this._layers[Ee];if(!Ye)return this.fire(new i.ErrorEvent(new Error("The layer '"+Ee+"' does not exist in the map's style and cannot be queried for features."))),[];jt[Ye.source]=!0}}var ar=[];ut.availableImages=this._availableImages;for(var tr in this.sourceCaches)ut.layers&&!jt[tr]||ar.push(H(this.sourceCaches[tr],this._layers,this._serializedLayers,K,ut,kt));return this.placement&&ar.push(Y(this._layers,this._serializedLayers,this.sourceCaches,K,ut,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ar)},tt.prototype.querySourceFeatures=function(K,ut){ut&&ut.filter&&this._validate(i.validateStyle.filter,"querySourceFeatures.filter",ut.filter,null,ut);var kt=this.sourceCaches[K];return kt?at(kt,ut):[]},tt.prototype.addSourceType=function(K,ut,kt){if(tt.getSourceType(K))return kt(new Error('A source type called "'+K+'" already exists.'));if(tt.setSourceType(K,ut),!ut.workerSourceURL)return kt(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:K,url:ut.workerSourceURL},kt)},tt.prototype.getLight=function(){return this.light.getLight()},tt.prototype.setLight=function(K,ut){ut===void 0&&(ut={}),this._checkLoaded();var kt=this.light.getLight(),jt=!1;for(var Qt in K)if(!i.deepEqual(K[Qt],kt[Qt])){jt=!0;break}if(jt){var de={now:i.browser.now(),transition:i.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(K,ut),this.light.updateTransitions(de)}},tt.prototype._validate=function(K,ut,kt,jt,Qt){return Qt===void 0&&(Qt={}),Qt&&Qt.validate===!1?!1:ai(this,K.call(i.validateStyle,i.extend({key:ut,style:this.serialize(),value:kt,styleSpec:i.styleSpec},jt)))},tt.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var K in this._layers){var ut=this._layers[K];ut.setEventedParent(null)}for(var kt in this.sourceCaches)this.sourceCaches[kt].clearTiles(),this.sourceCaches[kt].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},tt.prototype._clearSource=function(K){this.sourceCaches[K].clearTiles()},tt.prototype._reloadSource=function(K){this.sourceCaches[K].resume(),this.sourceCaches[K].reload()},tt.prototype._updateSources=function(K){for(var ut in this.sourceCaches)this.sourceCaches[ut].update(K)},tt.prototype._generateCollisionBoxes=function(){for(var K in this.sourceCaches)this._reloadSource(K)},tt.prototype._updatePlacement=function(K,ut,kt,jt,Qt){Qt===void 0&&(Qt=!1);for(var de=!1,Ee=!1,Ye={},ar=0,tr=this._order;ar<tr.length;ar+=1){var vr=tr[ar],Lr=this._layers[vr];if(Lr.type==="symbol"){if(!Ye[Lr.source]){var Wr=this.sourceCaches[Lr.source];Ye[Lr.source]=Wr.getRenderableIds(!0).map(function(Dn){return Wr.getTileByID(Dn)}).sort(function(Dn,Nn){return Nn.tileID.overscaledZ-Dn.tileID.overscaledZ||(Dn.tileID.isLessThan(Nn.tileID)?-1:1)})}var Fr=this.crossTileSymbolIndex.addLayer(Lr,Ye[Lr.source],K.center.lng);de=de||Fr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Qt=Qt||this._layerOrderChanged||kt===0,(Qt||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.browser.now(),K.zoom))&&(this.pauseablePlacement=new xn(K,this._order,Qt,ut,kt,jt,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ye),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.browser.now()),Ee=!0),de&&this.pauseablePlacement.placement.setStale()),Ee||de)for(var Br=0,Kr=this._order;Br<Kr.length;Br+=1){var cn=Kr[Br],Fn=this._layers[cn];Fn.type==="symbol"&&this.placement.updateLayerOpacities(Fn,Ye[Fn.source])}var Pn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.browser.now());return Pn},tt.prototype._releaseSymbolFadeTiles=function(){for(var K in this.sourceCaches)this.sourceCaches[K].releaseSymbolFadeTiles()},tt.prototype.getImages=function(K,ut,kt){this.imageManager.getImages(ut.icons,kt),this._updateTilesForChangedImages();var jt=this.sourceCaches[ut.source];jt&&jt.setDependencies(ut.tileID.key,ut.type,ut.icons)},tt.prototype.getGlyphs=function(K,ut,kt){this.glyphManager.getGlyphs(ut.stacks,kt)},tt.prototype.getResource=function(K,ut,kt){return i.makeRequest(ut,kt)},tt}(i.Evented);oo.getSourceType=$,oo.setSourceType=V,oo.registerForPluginStateChange=i.registerForPluginStateChange;var $a=i.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ia=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Ts=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,Gl=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,du="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",qi=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Yl=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ea=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Xa="void main() {gl_FragColor=vec4(1.0);}",ks="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",bl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ma=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Ms=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,ba="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",ka="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",Ss="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",za="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Fa="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",so="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",vu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Qa=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ku=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Ro=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,La=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Hl=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ts=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Oo=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vl=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,gu=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ju=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,_l=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$u=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Qu=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,tc="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Wl=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ec="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",rc=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,mu=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,yu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ps=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Cs=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ws=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Xs=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,jo=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nc="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",wl=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,_u=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Al=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,yo=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Es=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,ds=ea(Ia,Ts),Zs=ea(Gl,du),es=ea(qi,Vs),Po=ea(Yl,Ea),Xl=ea(Xa,ks),Ls=ea(bl,ma),xo=ea(Ms,ba),va=ea(ka,Ss),Zl=ea(za,Fa),ic=ea(so,vu),Tl=ea(Qa,Ku),Rs=ea(Ro,La),Os=ea(Hl,ts),to=ea(Oo,Vl),kl=ea(gu,Ju),Ps=ea(_l,$u),Ml=ea(Qu,tc),ac=ea(Wl,ec),wu=ea(rc,mu),Kl=ea(yu,ps),Jl=ea(Cs,Ws),$l=ea(Xs,xu),Is=ea(jo,nc),Sl=ea(wl,bu),Ks=ea(_u,Al),Cl=ea(yo,Es);function ea(W,tt){var K=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ut=tt.match(/attribute ([\w]+) ([\w]+)/g),kt=W.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),jt=tt.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Qt=jt?jt.concat(kt):kt,de={};return W=W.replace(K,function(Ee,Ye,ar,tr,vr){return de[vr]=!0,Ye==="define"?`
#ifndef HAS_UNIFORM_u_`+vr+`
varying `+ar+" "+tr+" "+vr+`;
#else
uniform `+ar+" "+tr+" u_"+vr+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+vr+`
    `+ar+" "+tr+" "+vr+" = u_"+vr+`;
#endif
`}),tt=tt.replace(K,function(Ee,Ye,ar,tr,vr){var Lr=tr==="float"?"vec2":"vec4",Wr=vr.match(/color/)?"color":Lr;return de[vr]?Ye==="define"?`
#ifndef HAS_UNIFORM_u_`+vr+`
uniform lowp float u_`+vr+`_t;
attribute `+ar+" "+Lr+" a_"+vr+`;
varying `+ar+" "+tr+" "+vr+`;
#else
uniform `+ar+" "+tr+" u_"+vr+`;
#endif
`:Wr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+vr+`
    `+vr+" = a_"+vr+`;
#else
    `+ar+" "+tr+" "+vr+" = u_"+vr+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+vr+`
    `+vr+" = unpack_mix_"+Wr+"(a_"+vr+", u_"+vr+`_t);
#else
    `+ar+" "+tr+" "+vr+" = u_"+vr+`;
#endif
`:Ye==="define"?`
#ifndef HAS_UNIFORM_u_`+vr+`
uniform lowp float u_`+vr+`_t;
attribute `+ar+" "+Lr+" a_"+vr+`;
#else
uniform `+ar+" "+tr+" u_"+vr+`;
#endif
`:Wr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+vr+`
    `+ar+" "+tr+" "+vr+" = a_"+vr+`;
#else
    `+ar+" "+tr+" "+vr+" = u_"+vr+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+vr+`
    `+ar+" "+tr+" "+vr+" = unpack_mix_"+Wr+"(a_"+vr+", u_"+vr+`_t);
#else
    `+ar+" "+tr+" "+vr+" = u_"+vr+`;
#endif
`}),{fragmentSource:W,vertexSource:tt,staticAttributes:ut,staticUniforms:Qt}}var Au=Object.freeze({__proto__:null,prelude:ds,background:Zs,backgroundPattern:es,circle:Po,clippingMask:Xl,heatmap:Ls,heatmapTexture:xo,collisionBox:va,collisionCircle:Zl,debug:ic,fill:Tl,fillOutline:Rs,fillOutlinePattern:Os,fillPattern:to,fillExtrusion:kl,fillExtrusionPattern:Ps,hillshadePrepare:Ml,hillshade:ac,line:wu,lineGradient:Kl,linePattern:Jl,lineSDF:$l,raster:Is,symbolIcon:Sl,symbolSDF:Ks,symbolTextAndIcon:Cl}),bo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};bo.prototype.bind=function(W,tt,K,ut,kt,jt,Qt,de){this.context=W;for(var Ee=this.boundPaintVertexBuffers.length!==ut.length,Ye=0;!Ee&&Ye<ut.length;Ye++)this.boundPaintVertexBuffers[Ye]!==ut[Ye]&&(Ee=!0);var ar=!this.vao||this.boundProgram!==tt||this.boundLayoutVertexBuffer!==K||Ee||this.boundIndexBuffer!==kt||this.boundVertexOffset!==jt||this.boundDynamicVertexBuffer!==Qt||this.boundDynamicVertexBuffer2!==de;!W.extVertexArrayObject||ar?this.freshBind(tt,K,ut,kt,jt,Qt,de):(W.bindVertexArrayOES.set(this.vao),Qt&&Qt.bind(),kt&&kt.dynamicDraw&&kt.bind(),de&&de.bind())},bo.prototype.freshBind=function(W,tt,K,ut,kt,jt,Qt){var de,Ee=W.numAttributes,Ye=this.context,ar=Ye.gl;if(Ye.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ye.extVertexArrayObject.createVertexArrayOES(),Ye.bindVertexArrayOES.set(this.vao),de=0,this.boundProgram=W,this.boundLayoutVertexBuffer=tt,this.boundPaintVertexBuffers=K,this.boundIndexBuffer=ut,this.boundVertexOffset=kt,this.boundDynamicVertexBuffer=jt,this.boundDynamicVertexBuffer2=Qt;else{de=Ye.currentNumAttributes||0;for(var tr=Ee;tr<de;tr++)ar.disableVertexAttribArray(tr)}tt.enableAttributes(ar,W);for(var vr=0,Lr=K;vr<Lr.length;vr+=1){var Wr=Lr[vr];Wr.enableAttributes(ar,W)}jt&&jt.enableAttributes(ar,W),Qt&&Qt.enableAttributes(ar,W),tt.bind(),tt.setVertexAttribPointers(ar,W,kt);for(var Fr=0,Br=K;Fr<Br.length;Fr+=1){var Kr=Br[Fr];Kr.bind(),Kr.setVertexAttribPointers(ar,W,kt)}jt&&(jt.bind(),jt.setVertexAttribPointers(ar,W,kt)),ut&&ut.bind(),Qt&&(Qt.bind(),Qt.setVertexAttribPointers(ar,W,kt)),Ye.currentNumAttributes=Ee},bo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function Tu(W){for(var tt=[],K=0;K<W.length;K++)if(W[K]!==null){var ut=W[K].split(" ");tt.push(ut.pop())}return tt}var Ql=function(W,tt,K,ut,kt,jt){var Qt=W.gl;this.program=Qt.createProgram();for(var de=Tu(K.staticAttributes),Ee=ut?ut.getBinderAttributes():[],Ye=de.concat(Ee),ar=K.staticUniforms?Tu(K.staticUniforms):[],tr=ut?ut.getBinderUniforms():[],vr=ar.concat(tr),Lr=[],Wr=0,Fr=vr;Wr<Fr.length;Wr+=1){var Br=Fr[Wr];Lr.indexOf(Br)<0&&Lr.push(Br)}var Kr=ut?ut.defines():[];jt&&Kr.push("#define OVERDRAW_INSPECTOR;");var cn=Kr.concat(ds.fragmentSource,K.fragmentSource).join(`
`),Fn=Kr.concat(ds.vertexSource,K.vertexSource).join(`
`),Pn=Qt.createShader(Qt.FRAGMENT_SHADER);if(Qt.isContextLost()){this.failedToCreate=!0;return}Qt.shaderSource(Pn,cn),Qt.compileShader(Pn),Qt.attachShader(this.program,Pn);var Dn=Qt.createShader(Qt.VERTEX_SHADER);if(Qt.isContextLost()){this.failedToCreate=!0;return}Qt.shaderSource(Dn,Fn),Qt.compileShader(Dn),Qt.attachShader(this.program,Dn),this.attributes={};var Nn={};this.numAttributes=Ye.length;for(var Bn=0;Bn<this.numAttributes;Bn++)Ye[Bn]&&(Qt.bindAttribLocation(this.program,Bn,Ye[Bn]),this.attributes[Ye[Bn]]=Bn);Qt.linkProgram(this.program),Qt.deleteShader(Dn),Qt.deleteShader(Pn);for(var Vn=0;Vn<Lr.length;Vn++){var Zn=Lr[Vn];if(Zn&&!Nn[Zn]){var ci=Qt.getUniformLocation(this.program,Zn);ci&&(Nn[Zn]=ci)}}this.fixedUniforms=kt(W,Nn),this.binderUniforms=ut?ut.getUniforms(W,Nn):[]};Ql.prototype.draw=function(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar,tr,vr,Lr,Wr,Fr){var Br,Kr=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode(K),W.setStencilMode(ut),W.setColorMode(kt),W.setCullFace(jt);for(var cn in this.fixedUniforms)this.fixedUniforms[cn].set(Qt[cn]);Lr&&Lr.setUniforms(W,this.binderUniforms,tr,{zoom:vr});for(var Fn=(Br={},Br[Kr.LINES]=2,Br[Kr.TRIANGLES]=3,Br[Kr.LINE_STRIP]=1,Br)[tt],Pn=0,Dn=ar.get();Pn<Dn.length;Pn+=1){var Nn=Dn[Pn],Bn=Nn.vaos||(Nn.vaos={}),Vn=Bn[de]||(Bn[de]=new bo);Vn.bind(W,this,Ee,Lr?Lr.getPaintVertexBuffers():[],Ye,Nn.vertexOffset,Wr,Fr),Kr.drawElements(tt,Nn.primitiveLength*Fn,Kr.UNSIGNED_SHORT,Nn.primitiveOffset*Fn*2)}}};function vs(W,tt,K){var ut=1/an(K,1,tt.transform.tileZoom),kt=Math.pow(2,K.tileID.overscaledZ),jt=K.tileSize*Math.pow(2,tt.transform.tileZoom)/kt,Qt=jt*(K.tileID.canonical.x+K.tileID.wrap*kt),de=jt*K.tileID.canonical.y;return{u_image:0,u_texsize:K.imageAtlasTexture.size,u_scale:[ut,W.fromScale,W.toScale],u_fade:W.t,u_pixel_coord_upper:[Qt>>16,de>>16],u_pixel_coord_lower:[Qt&65535,de&65535]}}function rs(W,tt,K,ut){var kt=K.imageManager.getPattern(W.from.toString()),jt=K.imageManager.getPattern(W.to.toString()),Qt=K.imageManager.getPixelSize(),de=Qt.width,Ee=Qt.height,Ye=Math.pow(2,ut.tileID.overscaledZ),ar=ut.tileSize*Math.pow(2,K.transform.tileZoom)/Ye,tr=ar*(ut.tileID.canonical.x+ut.tileID.wrap*Ye),vr=ar*ut.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:kt.tl,u_pattern_br_a:kt.br,u_pattern_tl_b:jt.tl,u_pattern_br_b:jt.br,u_texsize:[de,Ee],u_mix:tt.t,u_pattern_size_a:kt.displaySize,u_pattern_size_b:jt.displaySize,u_scale_a:tt.fromScale,u_scale_b:tt.toScale,u_tile_units_to_pixels:1/an(ut,1,K.transform.tileZoom),u_pixel_coord_upper:[tr>>16,vr>>16],u_pixel_coord_lower:[tr&65535,vr&65535]}}var El=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_lightpos:new i.Uniform3f(W,tt.u_lightpos),u_lightintensity:new i.Uniform1f(W,tt.u_lightintensity),u_lightcolor:new i.Uniform3f(W,tt.u_lightcolor),u_vertical_gradient:new i.Uniform1f(W,tt.u_vertical_gradient),u_opacity:new i.Uniform1f(W,tt.u_opacity)}},ya=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_lightpos:new i.Uniform3f(W,tt.u_lightpos),u_lightintensity:new i.Uniform1f(W,tt.u_lightintensity),u_lightcolor:new i.Uniform3f(W,tt.u_lightcolor),u_vertical_gradient:new i.Uniform1f(W,tt.u_vertical_gradient),u_height_factor:new i.Uniform1f(W,tt.u_height_factor),u_image:new i.Uniform1i(W,tt.u_image),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_pixel_coord_upper:new i.Uniform2f(W,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(W,tt.u_pixel_coord_lower),u_scale:new i.Uniform3f(W,tt.u_scale),u_fade:new i.Uniform1f(W,tt.u_fade),u_opacity:new i.Uniform1f(W,tt.u_opacity)}},Js=function(W,tt,K,ut){var kt=tt.style.light,jt=kt.properties.get("position"),Qt=[jt.x,jt.y,jt.z],de=i.create$1();kt.properties.get("anchor")==="viewport"&&i.fromRotation(de,-tt.transform.angle),i.transformMat3(Qt,Qt,de);var Ee=kt.properties.get("color");return{u_matrix:W,u_lightpos:Qt,u_lightintensity:kt.properties.get("intensity"),u_lightcolor:[Ee.r,Ee.g,Ee.b],u_vertical_gradient:+K,u_opacity:ut}},_o=function(W,tt,K,ut,kt,jt,Qt){return i.extend(Js(W,tt,K,ut),vs(jt,tt,Qt),{u_height_factor:-Math.pow(2,kt.overscaledZ)/Qt.tileSize/8})},Uo=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix)}},gs=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_image:new i.Uniform1i(W,tt.u_image),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_pixel_coord_upper:new i.Uniform2f(W,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(W,tt.u_pixel_coord_lower),u_scale:new i.Uniform3f(W,tt.u_scale),u_fade:new i.Uniform1f(W,tt.u_fade)}},ns=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_world:new i.Uniform2f(W,tt.u_world)}},wo=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_world:new i.Uniform2f(W,tt.u_world),u_image:new i.Uniform1i(W,tt.u_image),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_pixel_coord_upper:new i.Uniform2f(W,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(W,tt.u_pixel_coord_lower),u_scale:new i.Uniform3f(W,tt.u_scale),u_fade:new i.Uniform1f(W,tt.u_fade)}},qo=function(W){return{u_matrix:W}},Ao=function(W,tt,K,ut){return i.extend(qo(W),vs(K,tt,ut))},fo=function(W,tt){return{u_matrix:W,u_world:tt}},$s=function(W,tt,K,ut,kt){return i.extend(Ao(W,tt,K,ut),{u_world:kt})},oc=function(W,tt){return{u_camera_to_center_distance:new i.Uniform1f(W,tt.u_camera_to_center_distance),u_scale_with_map:new i.Uniform1i(W,tt.u_scale_with_map),u_pitch_with_map:new i.Uniform1i(W,tt.u_pitch_with_map),u_extrude_scale:new i.Uniform2f(W,tt.u_extrude_scale),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_matrix:new i.UniformMatrix4f(W,tt.u_matrix)}},sc=function(W,tt,K,ut){var kt=W.transform,jt,Qt;if(ut.paint.get("circle-pitch-alignment")==="map"){var de=an(K,1,kt.zoom);jt=!0,Qt=[de,de]}else jt=!1,Qt=kt.pixelsToGLUnits;return{u_camera_to_center_distance:kt.cameraToCenterDistance,u_scale_with_map:+(ut.paint.get("circle-pitch-scale")==="map"),u_matrix:W.translatePosMatrix(tt.posMatrix,K,ut.paint.get("circle-translate"),ut.paint.get("circle-translate-anchor")),u_pitch_with_map:+jt,u_device_pixel_ratio:i.browser.devicePixelRatio,u_extrude_scale:Qt}},lc=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_camera_to_center_distance:new i.Uniform1f(W,tt.u_camera_to_center_distance),u_pixels_to_tile_units:new i.Uniform1f(W,tt.u_pixels_to_tile_units),u_extrude_scale:new i.Uniform2f(W,tt.u_extrude_scale),u_overscale_factor:new i.Uniform1f(W,tt.u_overscale_factor)}},uc=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_inv_matrix:new i.UniformMatrix4f(W,tt.u_inv_matrix),u_camera_to_center_distance:new i.Uniform1f(W,tt.u_camera_to_center_distance),u_viewport_size:new i.Uniform2f(W,tt.u_viewport_size)}},tu=function(W,tt,K){var ut=an(K,1,tt.zoom),kt=Math.pow(2,tt.zoom-K.tileID.overscaledZ),jt=K.tileID.overscaleFactor();return{u_matrix:W,u_camera_to_center_distance:tt.cameraToCenterDistance,u_pixels_to_tile_units:ut,u_extrude_scale:[tt.pixelsToGLUnits[0]/(ut*kt),tt.pixelsToGLUnits[1]/(ut*kt)],u_overscale_factor:jt}},ku=function(W,tt,K){return{u_matrix:W,u_inv_matrix:tt,u_camera_to_center_distance:K.cameraToCenterDistance,u_viewport_size:[K.width,K.height]}},zs=function(W,tt){return{u_color:new i.UniformColor(W,tt.u_color),u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_overlay:new i.Uniform1i(W,tt.u_overlay),u_overlay_scale:new i.Uniform1f(W,tt.u_overlay_scale)}},Ra=function(W,tt,K){return K===void 0&&(K=1),{u_matrix:W,u_color:tt,u_overlay:0,u_overlay_scale:K}},lo=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix)}},Fs=function(W){return{u_matrix:W}},Mu=function(W,tt){return{u_extrude_scale:new i.Uniform1f(W,tt.u_extrude_scale),u_intensity:new i.Uniform1f(W,tt.u_intensity),u_matrix:new i.UniformMatrix4f(W,tt.u_matrix)}},Qs=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_world:new i.Uniform2f(W,tt.u_world),u_image:new i.Uniform1i(W,tt.u_image),u_color_ramp:new i.Uniform1i(W,tt.u_color_ramp),u_opacity:new i.Uniform1f(W,tt.u_opacity)}},Go=function(W,tt,K,ut){return{u_matrix:W,u_extrude_scale:an(tt,1,K),u_intensity:ut}},cc=function(W,tt,K,ut){var kt=i.create();i.ortho(kt,0,W.width,W.height,0,0,1);var jt=W.context.gl;return{u_matrix:kt,u_world:[jt.drawingBufferWidth,jt.drawingBufferHeight],u_image:K,u_color_ramp:ut,u_opacity:tt.paint.get("heatmap-opacity")}},Su=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_image:new i.Uniform1i(W,tt.u_image),u_latrange:new i.Uniform2f(W,tt.u_latrange),u_light:new i.Uniform2f(W,tt.u_light),u_shadow:new i.UniformColor(W,tt.u_shadow),u_highlight:new i.UniformColor(W,tt.u_highlight),u_accent:new i.UniformColor(W,tt.u_accent)}},Cu=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_image:new i.Uniform1i(W,tt.u_image),u_dimension:new i.Uniform2f(W,tt.u_dimension),u_zoom:new i.Uniform1f(W,tt.u_zoom),u_unpack:new i.Uniform4f(W,tt.u_unpack)}},eu=function(W,tt,K){var ut=K.paint.get("hillshade-shadow-color"),kt=K.paint.get("hillshade-highlight-color"),jt=K.paint.get("hillshade-accent-color"),Qt=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(Qt-=W.transform.angle);var de=!W.options.moving;return{u_matrix:W.transform.calculatePosMatrix(tt.tileID.toUnwrapped(),de),u_image:0,u_latrange:Za(W,tt.tileID),u_light:[K.paint.get("hillshade-exaggeration"),Qt],u_shadow:ut,u_highlight:kt,u_accent:jt}},Eu=function(W,tt){var K=tt.stride,ut=i.create();return i.ortho(ut,0,i.EXTENT,-i.EXTENT,0,0,1),i.translate(ut,ut,[0,-i.EXTENT,0]),{u_matrix:ut,u_image:1,u_dimension:[K,K],u_zoom:W.overscaledZ,u_unpack:tt.getUnpackVector()}};function Za(W,tt){var K=Math.pow(2,tt.canonical.z),ut=tt.canonical.y;return[new i.MercatorCoordinate(0,ut/K).toLngLat().lat,new i.MercatorCoordinate(0,(ut+1)/K).toLngLat().lat]}var To=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_ratio:new i.Uniform1f(W,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(W,tt.u_units_to_pixels)}},is=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_ratio:new i.Uniform1f(W,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(W,tt.u_units_to_pixels),u_image:new i.Uniform1i(W,tt.u_image),u_image_height:new i.Uniform1f(W,tt.u_image_height)}},Ds=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_ratio:new i.Uniform1f(W,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_image:new i.Uniform1i(W,tt.u_image),u_units_to_pixels:new i.Uniform2f(W,tt.u_units_to_pixels),u_scale:new i.Uniform3f(W,tt.u_scale),u_fade:new i.Uniform1f(W,tt.u_fade)}},Ll=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_ratio:new i.Uniform1f(W,tt.u_ratio),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_units_to_pixels:new i.Uniform2f(W,tt.u_units_to_pixels),u_patternscale_a:new i.Uniform2f(W,tt.u_patternscale_a),u_patternscale_b:new i.Uniform2f(W,tt.u_patternscale_b),u_sdfgamma:new i.Uniform1f(W,tt.u_sdfgamma),u_image:new i.Uniform1i(W,tt.u_image),u_tex_y_a:new i.Uniform1f(W,tt.u_tex_y_a),u_tex_y_b:new i.Uniform1f(W,tt.u_tex_y_b),u_mix:new i.Uniform1f(W,tt.u_mix)}},ms=function(W,tt,K){var ut=W.transform;return{u_matrix:as(W,tt,K),u_ratio:1/an(tt,1,ut.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_units_to_pixels:[1/ut.pixelsToGLUnits[0],1/ut.pixelsToGLUnits[1]]}},ys=function(W,tt,K,ut){return i.extend(ms(W,tt,K),{u_image:0,u_image_height:ut})},Lu=function(W,tt,K,ut){var kt=W.transform,jt=Bs(tt,kt);return{u_matrix:as(W,tt,K),u_texsize:tt.imageAtlasTexture.size,u_ratio:1/an(tt,1,kt.zoom),u_device_pixel_ratio:i.browser.devicePixelRatio,u_image:0,u_scale:[jt,ut.fromScale,ut.toScale],u_fade:ut.t,u_units_to_pixels:[1/kt.pixelsToGLUnits[0],1/kt.pixelsToGLUnits[1]]}},Yo=function(W,tt,K,ut,kt){var jt=W.transform,Qt=W.lineAtlas,de=Bs(tt,jt),Ee=K.layout.get("line-cap")==="round",Ye=Qt.getDash(ut.from,Ee),ar=Qt.getDash(ut.to,Ee),tr=Ye.width*kt.fromScale,vr=ar.width*kt.toScale;return i.extend(ms(W,tt,K),{u_patternscale_a:[de/tr,-Ye.height/2],u_patternscale_b:[de/vr,-ar.height/2],u_sdfgamma:Qt.width/(Math.min(tr,vr)*256*i.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ye.y,u_tex_y_b:ar.y,u_mix:kt.t})};function Bs(W,tt){return 1/an(W,1,tt.tileZoom)}function as(W,tt,K){return W.translatePosMatrix(tt.tileID.posMatrix,tt,K.paint.get("line-translate"),K.paint.get("line-translate-anchor"))}var Ho=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_tl_parent:new i.Uniform2f(W,tt.u_tl_parent),u_scale_parent:new i.Uniform1f(W,tt.u_scale_parent),u_buffer_scale:new i.Uniform1f(W,tt.u_buffer_scale),u_fade_t:new i.Uniform1f(W,tt.u_fade_t),u_opacity:new i.Uniform1f(W,tt.u_opacity),u_image0:new i.Uniform1i(W,tt.u_image0),u_image1:new i.Uniform1i(W,tt.u_image1),u_brightness_low:new i.Uniform1f(W,tt.u_brightness_low),u_brightness_high:new i.Uniform1f(W,tt.u_brightness_high),u_saturation_factor:new i.Uniform1f(W,tt.u_saturation_factor),u_contrast_factor:new i.Uniform1f(W,tt.u_contrast_factor),u_spin_weights:new i.Uniform3f(W,tt.u_spin_weights)}},tl=function(W,tt,K,ut,kt){return{u_matrix:W,u_tl_parent:tt,u_scale_parent:K,u_buffer_scale:1,u_fade_t:ut.mix,u_opacity:ut.opacity*kt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:kt.paint.get("raster-brightness-min"),u_brightness_high:kt.paint.get("raster-brightness-max"),u_saturation_factor:js(kt.paint.get("raster-saturation")),u_contrast_factor:Ji(kt.paint.get("raster-contrast")),u_spin_weights:Ns(kt.paint.get("raster-hue-rotate"))}};function Ns(W){W*=Math.PI/180;var tt=Math.sin(W),K=Math.cos(W);return[(2*K+1)/3,(-Math.sqrt(3)*tt-K+1)/3,(Math.sqrt(3)*tt-K+1)/3]}function Ji(W){return W>0?1/(1-W):1+W}function js(W){return W>0?1-1/(1.001-W):-W}var Rl=function(W,tt){return{u_is_size_zoom_constant:new i.Uniform1i(W,tt.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(W,tt.u_is_size_feature_constant),u_size_t:new i.Uniform1f(W,tt.u_size_t),u_size:new i.Uniform1f(W,tt.u_size),u_camera_to_center_distance:new i.Uniform1f(W,tt.u_camera_to_center_distance),u_pitch:new i.Uniform1f(W,tt.u_pitch),u_rotate_symbol:new i.Uniform1i(W,tt.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(W,tt.u_aspect_ratio),u_fade_change:new i.Uniform1f(W,tt.u_fade_change),u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(W,tt.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(W,tt.u_coord_matrix),u_is_text:new i.Uniform1i(W,tt.u_is_text),u_pitch_with_map:new i.Uniform1i(W,tt.u_pitch_with_map),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_texture:new i.Uniform1i(W,tt.u_texture)}},Ru=function(W,tt){return{u_is_size_zoom_constant:new i.Uniform1i(W,tt.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(W,tt.u_is_size_feature_constant),u_size_t:new i.Uniform1f(W,tt.u_size_t),u_size:new i.Uniform1f(W,tt.u_size),u_camera_to_center_distance:new i.Uniform1f(W,tt.u_camera_to_center_distance),u_pitch:new i.Uniform1f(W,tt.u_pitch),u_rotate_symbol:new i.Uniform1i(W,tt.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(W,tt.u_aspect_ratio),u_fade_change:new i.Uniform1f(W,tt.u_fade_change),u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(W,tt.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(W,tt.u_coord_matrix),u_is_text:new i.Uniform1i(W,tt.u_is_text),u_pitch_with_map:new i.Uniform1i(W,tt.u_pitch_with_map),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_texture:new i.Uniform1i(W,tt.u_texture),u_gamma_scale:new i.Uniform1f(W,tt.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(W,tt.u_is_halo)}},Us=function(W,tt){return{u_is_size_zoom_constant:new i.Uniform1i(W,tt.u_is_size_zoom_constant),u_is_size_feature_constant:new i.Uniform1i(W,tt.u_is_size_feature_constant),u_size_t:new i.Uniform1f(W,tt.u_size_t),u_size:new i.Uniform1f(W,tt.u_size),u_camera_to_center_distance:new i.Uniform1f(W,tt.u_camera_to_center_distance),u_pitch:new i.Uniform1f(W,tt.u_pitch),u_rotate_symbol:new i.Uniform1i(W,tt.u_rotate_symbol),u_aspect_ratio:new i.Uniform1f(W,tt.u_aspect_ratio),u_fade_change:new i.Uniform1f(W,tt.u_fade_change),u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_label_plane_matrix:new i.UniformMatrix4f(W,tt.u_label_plane_matrix),u_coord_matrix:new i.UniformMatrix4f(W,tt.u_coord_matrix),u_is_text:new i.Uniform1i(W,tt.u_is_text),u_pitch_with_map:new i.Uniform1i(W,tt.u_pitch_with_map),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_texsize_icon:new i.Uniform2f(W,tt.u_texsize_icon),u_texture:new i.Uniform1i(W,tt.u_texture),u_texture_icon:new i.Uniform1i(W,tt.u_texture_icon),u_gamma_scale:new i.Uniform1f(W,tt.u_gamma_scale),u_device_pixel_ratio:new i.Uniform1f(W,tt.u_device_pixel_ratio),u_is_halo:new i.Uniform1i(W,tt.u_is_halo)}},el=function(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye){var ar=kt.transform;return{u_is_size_zoom_constant:+(W==="constant"||W==="source"),u_is_size_feature_constant:+(W==="constant"||W==="camera"),u_size_t:tt?tt.uSizeT:0,u_size:tt?tt.uSize:0,u_camera_to_center_distance:ar.cameraToCenterDistance,u_pitch:ar.pitch/360*2*Math.PI,u_rotate_symbol:+K,u_aspect_ratio:ar.width/ar.height,u_fade_change:kt.options.fadeDuration?kt.symbolFadeChange:1,u_matrix:jt,u_label_plane_matrix:Qt,u_coord_matrix:de,u_is_text:+Ee,u_pitch_with_map:+ut,u_texsize:Ye,u_texture:0}},Ol=function(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar){var tr=kt.transform;return i.extend(el(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye),{u_gamma_scale:ut?Math.cos(tr._pitch)*tr.cameraToCenterDistance:1,u_device_pixel_ratio:i.browser.devicePixelRatio,u_is_halo:+ar})},ru=function(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye){return i.extend(Ol(W,tt,K,ut,kt,jt,Qt,de,!0,Ee,!0),{u_texsize_icon:Ye,u_texture_icon:1})},rl=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_opacity:new i.Uniform1f(W,tt.u_opacity),u_color:new i.UniformColor(W,tt.u_color)}},nl=function(W,tt){return{u_matrix:new i.UniformMatrix4f(W,tt.u_matrix),u_opacity:new i.Uniform1f(W,tt.u_opacity),u_image:new i.Uniform1i(W,tt.u_image),u_pattern_tl_a:new i.Uniform2f(W,tt.u_pattern_tl_a),u_pattern_br_a:new i.Uniform2f(W,tt.u_pattern_br_a),u_pattern_tl_b:new i.Uniform2f(W,tt.u_pattern_tl_b),u_pattern_br_b:new i.Uniform2f(W,tt.u_pattern_br_b),u_texsize:new i.Uniform2f(W,tt.u_texsize),u_mix:new i.Uniform1f(W,tt.u_mix),u_pattern_size_a:new i.Uniform2f(W,tt.u_pattern_size_a),u_pattern_size_b:new i.Uniform2f(W,tt.u_pattern_size_b),u_scale_a:new i.Uniform1f(W,tt.u_scale_a),u_scale_b:new i.Uniform1f(W,tt.u_scale_b),u_pixel_coord_upper:new i.Uniform2f(W,tt.u_pixel_coord_upper),u_pixel_coord_lower:new i.Uniform2f(W,tt.u_pixel_coord_lower),u_tile_units_to_pixels:new i.Uniform1f(W,tt.u_tile_units_to_pixels)}},os=function(W,tt,K){return{u_matrix:W,u_opacity:tt,u_color:K}},il=function(W,tt,K,ut,kt,jt){return i.extend(rs(ut,jt,K,kt),{u_matrix:W,u_opacity:tt})},ss={fillExtrusion:El,fillExtrusionPattern:ya,fill:Uo,fillPattern:gs,fillOutline:ns,fillOutlinePattern:wo,circle:oc,collisionBox:lc,collisionCircle:uc,debug:zs,clippingMask:lo,heatmap:Mu,heatmapTexture:Qs,hillshade:Su,hillshadePrepare:Cu,line:To,lineGradient:is,linePattern:Ds,lineSDF:Ll,raster:Ho,symbolIcon:Rl,symbolSDF:Ru,symbolTextAndIcon:Us,background:rl,backgroundPattern:nl},Ma;function Io(W,tt,K,ut,kt,jt,Qt){for(var de=W.context,Ee=de.gl,Ye=W.useProgram("collisionBox"),ar=[],tr=0,vr=0,Lr=0;Lr<ut.length;Lr++){var Wr=ut[Lr],Fr=tt.getTile(Wr),Br=Fr.getBucket(K);if(Br){var Kr=Wr.posMatrix;(kt[0]!==0||kt[1]!==0)&&(Kr=W.translatePosMatrix(Wr.posMatrix,Fr,kt,jt));var cn=Qt?Br.textCollisionBox:Br.iconCollisionBox,Fn=Br.collisionCircleArray;if(Fn.length>0){var Pn=i.create(),Dn=Kr;i.mul(Pn,Br.placementInvProjMatrix,W.transform.glCoordMatrix),i.mul(Pn,Pn,Br.placementViewportMatrix),ar.push({circleArray:Fn,circleOffset:vr,transform:Dn,invTransform:Pn}),tr+=Fn.length/4,vr=tr}cn&&Ye.draw(de,Ee.LINES,hr.disabled,He.disabled,W.colorModeForRenderPass(),Ce.disabled,tu(Kr,W.transform,Fr),K.id,cn.layoutVertexBuffer,cn.indexBuffer,cn.segments,null,W.transform.zoom,null,null,cn.collisionVertexBuffer)}}if(!(!Qt||!ar.length)){var Nn=W.useProgram("collisionCircle"),Bn=new i.StructArrayLayout2f1f2i16;Bn.resize(tr*4),Bn._trim();for(var Vn=0,Zn=0,ci=ar;Zn<ci.length;Zn+=1)for(var si=ci[Zn],li=0;li<si.circleArray.length/4;li++){var Ii=li*4,la=si.circleArray[Ii+0],yi=si.circleArray[Ii+1],ki=si.circleArray[Ii+2],Oi=si.circleArray[Ii+3];Bn.emplace(Vn++,la,yi,ki,Oi,0),Bn.emplace(Vn++,la,yi,ki,Oi,1),Bn.emplace(Vn++,la,yi,ki,Oi,2),Bn.emplace(Vn++,la,yi,ki,Oi,3)}(!Ma||Ma.length<tr*2)&&(Ma=nu(tr));for(var Wi=de.createIndexBuffer(Ma,!0),Qi=de.createVertexBuffer(Bn,i.collisionCircleLayout.members,!0),Ki=0,Bi=ar;Ki<Bi.length;Ki+=1){var ia=Bi[Ki],Ti=ku(ia.transform,ia.invTransform,W.transform);Nn.draw(de,Ee.TRIANGLES,hr.disabled,He.disabled,W.colorModeForRenderPass(),Ce.disabled,Ti,K.id,Qi,Wi,i.SegmentVector.simpleSegment(0,ia.circleOffset*2,ia.circleArray.length,ia.circleArray.length/2),null,W.transform.zoom,null,null,null)}Qi.destroy(),Wi.destroy()}}function nu(W){var tt=W*2,K=new i.StructArrayLayout3ui6;K.resize(tt),K._trim();for(var ut=0;ut<tt;ut++){var kt=ut*6;K.uint16[kt+0]=ut*4+0,K.uint16[kt+1]=ut*4+1,K.uint16[kt+2]=ut*4+2,K.uint16[kt+3]=ut*4+2,K.uint16[kt+4]=ut*4+3,K.uint16[kt+5]=ut*4+0}return K}var xs=i.identity(new Float32Array(16));function Pl(W,tt,K,ut,kt){if(W.renderPass==="translucent"){var jt=He.disabled,Qt=W.colorModeForRenderPass(),de=K.layout.get("text-variable-anchor");de&&fc(ut,W,K,tt,K.layout.get("text-rotation-alignment"),K.layout.get("text-pitch-alignment"),kt),K.paint.get("icon-opacity").constantOr(1)!==0&&ol(W,tt,K,ut,!1,K.paint.get("icon-translate"),K.paint.get("icon-translate-anchor"),K.layout.get("icon-rotation-alignment"),K.layout.get("icon-pitch-alignment"),K.layout.get("icon-keep-upright"),jt,Qt),K.paint.get("text-opacity").constantOr(1)!==0&&ol(W,tt,K,ut,!0,K.paint.get("text-translate"),K.paint.get("text-translate-anchor"),K.layout.get("text-rotation-alignment"),K.layout.get("text-pitch-alignment"),K.layout.get("text-keep-upright"),jt,Qt),tt.map.showCollisionBoxes&&(Io(W,tt,K,ut,K.paint.get("text-translate"),K.paint.get("text-translate-anchor"),!0),Io(W,tt,K,ut,K.paint.get("icon-translate"),K.paint.get("icon-translate-anchor"),!1))}}function al(W,tt,K,ut,kt,jt){var Qt=i.getAnchorAlignment(W),de=Qt.horizontalAlign,Ee=Qt.verticalAlign,Ye=-(de-.5)*tt,ar=-(Ee-.5)*K,tr=i.evaluateVariableOffset(W,ut);return new i.Point((Ye/kt+tr[0])*jt,(ar/kt+tr[1])*jt)}function fc(W,tt,K,ut,kt,jt,Qt){for(var de=tt.transform,Ee=kt==="map",Ye=jt==="map",ar=0,tr=W;ar<tr.length;ar+=1){var vr=tr[ar],Lr=ut.getTile(vr),Wr=Lr.getBucket(K);if(!(!Wr||!Wr.text||!Wr.text.segments.get().length)){var Fr=Wr.textSizeData,Br=i.evaluateSizeForZoom(Fr,de.zoom),Kr=an(Lr,1,tt.transform.zoom),cn=Cr(vr.posMatrix,Ye,Ee,tt.transform,Kr),Fn=K.layout.get("icon-text-fit")!=="none"&&Wr.hasIconData();if(Br){var Pn=Math.pow(2,de.zoom-Lr.tileID.overscaledZ);Ou(Wr,Ee,Ye,Qt,i.symbolSize,de,cn,vr.posMatrix,Pn,Br,Fn)}}}}function Ou(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar){var tr=W.text.placedSymbolArray,vr=W.text.dynamicLayoutVertexArray,Lr=W.icon.dynamicLayoutVertexArray,Wr={};vr.clear();for(var Fr=0;Fr<tr.length;Fr++){var Br=tr.get(Fr),Kr=W.allowVerticalPlacement&&!Br.placedOrientation,cn=!Br.hidden&&Br.crossTileID&&!Kr?ut[Br.crossTileID]:null;if(!cn)zn(Br.numGlyphs,vr);else{var Fn=new i.Point(Br.anchorX,Br.anchorY),Pn=Nr(Fn,K?de:Qt),Dn=$r(jt.cameraToCenterDistance,Pn.signedDistanceFromCamera),Nn=kt.evaluateSizeForFeature(W.textSizeData,Ye,Br)*Dn/i.ONE_EM;K&&(Nn*=W.tilePixelRatio/Ee);for(var Bn=cn.width,Vn=cn.height,Zn=cn.anchor,ci=cn.textOffset,si=cn.textBoxScale,li=al(Zn,Bn,Vn,ci,si,Nn),Ii=K?Nr(Fn.add(li),Qt).point:Pn.point.add(tt?li.rotate(-jt.angle):li),la=W.allowVerticalPlacement&&Br.placedOrientation===i.WritingMode.vertical?Math.PI/2:0,yi=0;yi<Br.numGlyphs;yi++)i.addDynamicAttributes(vr,Ii,la);ar&&Br.associatedIconIndex>=0&&(Wr[Br.associatedIconIndex]={shiftedAnchor:Ii,angle:la})}}if(ar){Lr.clear();for(var ki=W.icon.placedSymbolArray,Oi=0;Oi<ki.length;Oi++){var Wi=ki.get(Oi);if(Wi.hidden)zn(Wi.numGlyphs,Lr);else{var Qi=Wr[Oi];if(!Qi)zn(Wi.numGlyphs,Lr);else for(var Ki=0;Ki<Wi.numGlyphs;Ki++)i.addDynamicAttributes(Lr,Qi.shiftedAnchor,Qi.angle)}}W.icon.dynamicLayoutVertexBuffer.updateData(Lr)}W.text.dynamicLayoutVertexBuffer.updateData(vr)}function Ha(W,tt,K){return K.iconsInText&&tt?"symbolTextAndIcon":W?"symbolSDF":"symbolIcon"}function ol(W,tt,K,ut,kt,jt,Qt,de,Ee,Ye,ar,tr){for(var vr=W.context,Lr=vr.gl,Wr=W.transform,Fr=de==="map",Br=Ee==="map",Kr=Fr&&K.layout.get("symbol-placement")!=="point",cn=Fr&&!Br&&!Kr,Fn=K.layout.get("symbol-sort-key").constantOr(1)!==void 0,Pn=!1,Dn=W.depthModeForSublayer(0,hr.ReadOnly),Nn=K.layout.get("text-variable-anchor"),Bn=[],Vn=0,Zn=ut;Vn<Zn.length;Vn+=1){var ci=Zn[Vn],si=tt.getTile(ci),li=si.getBucket(K);if(li){var Ii=kt?li.text:li.icon;if(!(!Ii||!Ii.segments.get().length)){var la=Ii.programConfigurations.get(K.id),yi=kt||li.sdfIcons,ki=kt?li.textSizeData:li.iconSizeData,Oi=Br||Wr.pitch!==0,Wi=W.useProgram(Ha(yi,kt,li),la),Qi=i.evaluateSizeForZoom(ki,Wr.zoom),Ki=void 0,Bi=[0,0],ia=void 0,Ti=void 0,Ni=null,Aa=void 0;if(kt){if(ia=si.glyphAtlasTexture,Ti=Lr.LINEAR,Ki=si.glyphAtlasTexture.size,li.iconsInText){Bi=si.imageAtlasTexture.size,Ni=si.imageAtlasTexture;var ja=ki.kind==="composite"||ki.kind==="camera";Aa=Oi||W.options.rotating||W.options.zooming||ja?Lr.LINEAR:Lr.NEAREST}}else{var ws=K.layout.get("icon-size").constantOr(0)!==1||li.iconsNeedLinear;ia=si.imageAtlasTexture,Ti=yi||W.options.rotating||W.options.zooming||ws||Oi?Lr.LINEAR:Lr.NEAREST,Ki=si.imageAtlasTexture.size}var Ys=an(si,1,W.transform.zoom),Xo=Cr(ci.posMatrix,Br,Fr,W.transform,Ys),dl=Dr(ci.posMatrix,Br,Fr,W.transform,Ys),Nl=Nn&&li.hasTextData(),Mo=K.layout.get("icon-text-fit")!=="none"&&Nl&&li.hasIconData();Kr&&on(li,ci.posMatrix,W,kt,Xo,dl,Br,Ye);var Zo=W.translatePosMatrix(ci.posMatrix,si,jt,Qt),ho=Kr||kt&&Nn||Mo?xs:Xo,jl=W.translatePosMatrix(dl,si,jt,Qt,!0),Uu=yi&&K.paint.get(kt?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ko=void 0;yi?li.iconsInText?Ko=ru(ki.kind,Qi,cn,Br,W,Zo,ho,jl,Ki,Bi):Ko=Ol(ki.kind,Qi,cn,Br,W,Zo,ho,jl,kt,Ki,!0):Ko=el(ki.kind,Qi,cn,Br,W,Zo,ho,jl,kt,Ki);var cs={program:Wi,buffers:Ii,uniformValues:Ko,atlasTexture:ia,atlasTextureIcon:Ni,atlasInterpolation:Ti,atlasInterpolationIcon:Aa,isSDF:yi,hasHalo:Uu};if(Fn&&li.canOverlap){Pn=!0;for(var Jo=Ii.segments.get(),mc=0,Cc=Jo;mc<Cc.length;mc+=1){var yc=Cc[mc];Bn.push({segments:new i.SegmentVector([yc]),sortKey:yc.sortKey,state:cs})}}else Bn.push({segments:Ii.segments,sortKey:0,state:cs})}}}Pn&&Bn.sort(function(Lc,Rc){return Lc.sortKey-Rc.sortKey});for(var no=0,Ec=Bn;no<Ec.length;no+=1){var xc=Ec[no],co=xc.state;if(vr.activeTexture.set(Lr.TEXTURE0),co.atlasTexture.bind(co.atlasInterpolation,Lr.CLAMP_TO_EDGE),co.atlasTextureIcon&&(vr.activeTexture.set(Lr.TEXTURE1),co.atlasTextureIcon&&co.atlasTextureIcon.bind(co.atlasInterpolationIcon,Lr.CLAMP_TO_EDGE)),co.isSDF){var qu=co.uniformValues;co.hasHalo&&(qu.u_is_halo=1,qs(co.buffers,xc.segments,K,W,co.program,Dn,ar,tr,qu)),qu.u_is_halo=0}qs(co.buffers,xc.segments,K,W,co.program,Dn,ar,tr,co.uniformValues)}}function qs(W,tt,K,ut,kt,jt,Qt,de,Ee){var Ye=ut.context,ar=Ye.gl;kt.draw(Ye,ar.TRIANGLES,jt,Qt,de,Ce.disabled,Ee,K.id,W.layoutVertexBuffer,W.indexBuffer,tt,K.paint,ut.transform.zoom,W.programConfigurations.get(K.id),W.dynamicLayoutVertexBuffer,W.opacityVertexBuffer)}function Pu(W,tt,K,ut){if(W.renderPass==="translucent"){var kt=K.paint.get("circle-opacity"),jt=K.paint.get("circle-stroke-width"),Qt=K.paint.get("circle-stroke-opacity"),de=K.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(kt.constantOr(1)===0&&(jt.constantOr(1)===0||Qt.constantOr(1)===0))){for(var Ee=W.context,Ye=Ee.gl,ar=W.depthModeForSublayer(0,hr.ReadOnly),tr=He.disabled,vr=W.colorModeForRenderPass(),Lr=[],Wr=0;Wr<ut.length;Wr++){var Fr=ut[Wr],Br=tt.getTile(Fr),Kr=Br.getBucket(K);if(Kr){var cn=Kr.programConfigurations.get(K.id),Fn=W.useProgram("circle",cn),Pn=Kr.layoutVertexBuffer,Dn=Kr.indexBuffer,Nn=sc(W,Fr,Br,K),Bn={programConfiguration:cn,program:Fn,layoutVertexBuffer:Pn,indexBuffer:Dn,uniformValues:Nn};if(de)for(var Vn=Kr.segments.get(),Zn=0,ci=Vn;Zn<ci.length;Zn+=1){var si=ci[Zn];Lr.push({segments:new i.SegmentVector([si]),sortKey:si.sortKey,state:Bn})}else Lr.push({segments:Kr.segments,sortKey:0,state:Bn})}}de&&Lr.sort(function(ia,Ti){return ia.sortKey-Ti.sortKey});for(var li=0,Ii=Lr;li<Ii.length;li+=1){var la=Ii[li],yi=la.state,ki=yi.programConfiguration,Oi=yi.program,Wi=yi.layoutVertexBuffer,Qi=yi.indexBuffer,Ki=yi.uniformValues,Bi=la.segments;Oi.draw(Ee,Ye.TRIANGLES,ar,tr,vr,Ce.disabled,Ki,K.id,Wi,Qi,Bi,K.paint,W.transform.zoom,ki)}}}}function ls(W,tt,K,ut){if(K.paint.get("heatmap-opacity")!==0)if(W.renderPass==="offscreen"){var kt=W.context,jt=kt.gl,Qt=He.disabled,de=new ie([jt.ONE,jt.ONE],i.Color.transparent,[!0,!0,!0,!0]);hc(kt,W,K),kt.clear({color:i.Color.transparent});for(var Ee=0;Ee<ut.length;Ee++){var Ye=ut[Ee];if(!tt.hasRenderableParent(Ye)){var ar=tt.getTile(Ye),tr=ar.getBucket(K);if(tr){var vr=tr.programConfigurations.get(K.id),Lr=W.useProgram("heatmap",vr),Wr=W.transform,Fr=Wr.zoom;Lr.draw(kt,jt.TRIANGLES,hr.disabled,Qt,de,Ce.disabled,Go(Ye.posMatrix,ar,Fr,K.paint.get("heatmap-intensity")),K.id,tr.layoutVertexBuffer,tr.indexBuffer,tr.segments,K.paint,W.transform.zoom,vr)}}}kt.viewport.set([0,0,W.width,W.height])}else W.renderPass==="translucent"&&(W.context.setColorMode(W.colorModeForRenderPass()),sl(W,K))}function hc(W,tt,K){var ut=W.gl;W.activeTexture.set(ut.TEXTURE1),W.viewport.set([0,0,tt.width/4,tt.height/4]);var kt=K.heatmapFbo;if(kt)ut.bindTexture(ut.TEXTURE_2D,kt.colorAttachment.get()),W.bindFramebuffer.set(kt.framebuffer);else{var jt=ut.createTexture();ut.bindTexture(ut.TEXTURE_2D,jt),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_S,ut.CLAMP_TO_EDGE),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_T,ut.CLAMP_TO_EDGE),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MIN_FILTER,ut.LINEAR),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MAG_FILTER,ut.LINEAR),kt=K.heatmapFbo=W.createFramebuffer(tt.width/4,tt.height/4,!1),eo(W,tt,jt,kt)}}function eo(W,tt,K,ut){var kt=W.gl,jt=W.extRenderToTextureHalfFloat?W.extTextureHalfFloat.HALF_FLOAT_OES:kt.UNSIGNED_BYTE;kt.texImage2D(kt.TEXTURE_2D,0,kt.RGBA,tt.width/4,tt.height/4,0,kt.RGBA,jt,null),ut.colorAttachment.set(K)}function sl(W,tt){var K=W.context,ut=K.gl,kt=tt.heatmapFbo;if(kt){K.activeTexture.set(ut.TEXTURE0),ut.bindTexture(ut.TEXTURE_2D,kt.colorAttachment.get()),K.activeTexture.set(ut.TEXTURE1);var jt=tt.colorRampTexture;jt||(jt=tt.colorRampTexture=new i.Texture(K,tt.colorRamp,ut.RGBA)),jt.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),W.useProgram("heatmapTexture").draw(K,ut.TRIANGLES,hr.disabled,He.disabled,W.colorModeForRenderPass(),Ce.disabled,cc(W,tt,0,1),tt.id,W.viewportBuffer,W.quadTriangleIndexBuffer,W.viewportSegments,tt.paint,W.transform.zoom)}}function Il(W,tt,K,ut){if(W.renderPass==="translucent"){var kt=K.paint.get("line-opacity"),jt=K.paint.get("line-width");if(!(kt.constantOr(1)===0||jt.constantOr(1)===0))for(var Qt=W.depthModeForSublayer(0,hr.ReadOnly),de=W.colorModeForRenderPass(),Ee=K.paint.get("line-dasharray"),Ye=K.paint.get("line-pattern"),ar=Ye.constantOr(1),tr=K.paint.get("line-gradient"),vr=K.getCrossfadeParameters(),Lr=ar?"linePattern":Ee?"lineSDF":tr?"lineGradient":"line",Wr=W.context,Fr=Wr.gl,Br=!0,Kr=0,cn=ut;Kr<cn.length;Kr+=1){var Fn=cn[Kr],Pn=tt.getTile(Fn);if(!(ar&&!Pn.patternsLoaded())){var Dn=Pn.getBucket(K);if(Dn){var Nn=Dn.programConfigurations.get(K.id),Bn=W.context.program.get(),Vn=W.useProgram(Lr,Nn),Zn=Br||Vn.program!==Bn,ci=Ye.constantOr(null);if(ci&&Pn.imageAtlas){var si=Pn.imageAtlas,li=si.patternPositions[ci.to.toString()],Ii=si.patternPositions[ci.from.toString()];li&&Ii&&Nn.setConstantPatternPositions(li,Ii)}var la=ar?Lu(W,Pn,K,vr):Ee?Yo(W,Pn,K,Ee,vr):tr?ys(W,Pn,K,Dn.lineClipsArray.length):ms(W,Pn,K);if(ar)Wr.activeTexture.set(Fr.TEXTURE0),Pn.imageAtlasTexture.bind(Fr.LINEAR,Fr.CLAMP_TO_EDGE),Nn.updatePaintBuffers(vr);else if(Ee&&(Zn||W.lineAtlas.dirty))Wr.activeTexture.set(Fr.TEXTURE0),W.lineAtlas.bind(Wr);else if(tr){var yi=Dn.gradients[K.id],ki=yi.texture;if(K.gradientVersion!==yi.version){var Oi=256;if(K.stepInterpolant){var Wi=tt.getSource().maxzoom,Qi=Fn.canonical.z===Wi?Math.ceil(1<<W.transform.maxZoom-Fn.canonical.z):1,Ki=Dn.maxLineLength/i.EXTENT,Bi=1024,ia=Ki*Bi*Qi;Oi=i.clamp(i.nextPowerOfTwo(ia),256,Wr.maxTextureSize)}yi.gradient=i.renderColorRamp({expression:K.gradientExpression(),evaluationKey:"lineProgress",resolution:Oi,image:yi.gradient||void 0,clips:Dn.lineClipsArray}),yi.texture?yi.texture.update(yi.gradient):yi.texture=new i.Texture(Wr,yi.gradient,Fr.RGBA),yi.version=K.gradientVersion,ki=yi.texture}Wr.activeTexture.set(Fr.TEXTURE0),ki.bind(K.stepInterpolant?Fr.NEAREST:Fr.LINEAR,Fr.CLAMP_TO_EDGE)}Vn.draw(Wr,Fr.TRIANGLES,Qt,W.stencilModeForClipping(Fn),de,Ce.disabled,la,K.id,Dn.layoutVertexBuffer,Dn.indexBuffer,Dn.segments,K.paint,W.transform.zoom,Nn,Dn.layoutVertexBuffer2),Br=!1}}}}}function Vo(W,tt,K,ut){var kt=K.paint.get("fill-color"),jt=K.paint.get("fill-opacity");if(jt.constantOr(1)!==0){var Qt=W.colorModeForRenderPass(),de=K.paint.get("fill-pattern"),Ee=W.opaquePassEnabledForLayer()&&!de.constantOr(1)&&kt.constantOr(i.Color.transparent).a===1&&jt.constantOr(0)===1?"opaque":"translucent";if(W.renderPass===Ee){var Ye=W.depthModeForSublayer(1,W.renderPass==="opaque"?hr.ReadWrite:hr.ReadOnly);us(W,tt,K,ut,Ye,Qt,!1)}if(W.renderPass==="translucent"&&K.paint.get("fill-antialias")){var ar=W.depthModeForSublayer(K.getPaintProperty("fill-outline-color")?2:0,hr.ReadOnly);us(W,tt,K,ut,ar,Qt,!0)}}}function us(W,tt,K,ut,kt,jt,Qt){var de=W.context.gl,Ee=K.paint.get("fill-pattern"),Ye=Ee&&Ee.constantOr(1),ar=K.getCrossfadeParameters(),tr,vr,Lr,Wr,Fr;Qt?(vr=Ye&&!K.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",tr=de.LINES):(vr=Ye?"fillPattern":"fill",tr=de.TRIANGLES);for(var Br=0,Kr=ut;Br<Kr.length;Br+=1){var cn=Kr[Br],Fn=tt.getTile(cn);if(!(Ye&&!Fn.patternsLoaded())){var Pn=Fn.getBucket(K);if(Pn){var Dn=Pn.programConfigurations.get(K.id),Nn=W.useProgram(vr,Dn);Ye&&(W.context.activeTexture.set(de.TEXTURE0),Fn.imageAtlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Dn.updatePaintBuffers(ar));var Bn=Ee.constantOr(null);if(Bn&&Fn.imageAtlas){var Vn=Fn.imageAtlas,Zn=Vn.patternPositions[Bn.to.toString()],ci=Vn.patternPositions[Bn.from.toString()];Zn&&ci&&Dn.setConstantPatternPositions(Zn,ci)}var si=W.translatePosMatrix(cn.posMatrix,Fn,K.paint.get("fill-translate"),K.paint.get("fill-translate-anchor"));if(!Qt)Wr=Pn.indexBuffer,Fr=Pn.segments,Lr=Ye?Ao(si,W,ar,Fn):qo(si);else{Wr=Pn.indexBuffer2,Fr=Pn.segments2;var li=[de.drawingBufferWidth,de.drawingBufferHeight];Lr=vr==="fillOutlinePattern"&&Ye?$s(si,W,ar,Fn,li):fo(si,li)}Nn.draw(W.context,tr,kt,W.stencilModeForClipping(cn),jt,Ce.disabled,Lr,K.id,Pn.layoutVertexBuffer,Wr,Fr,K.paint,W.transform.zoom,Dn)}}}}function iu(W,tt,K,ut){var kt=K.paint.get("fill-extrusion-opacity");if(kt!==0&&W.renderPass==="translucent"){var jt=new hr(W.context.gl.LEQUAL,hr.ReadWrite,W.depthRangeFor3D);if(kt===1&&!K.paint.get("fill-extrusion-pattern").constantOr(1)){var Qt=W.colorModeForRenderPass();ll(W,tt,K,ut,jt,He.disabled,Qt)}else ll(W,tt,K,ut,jt,He.disabled,ie.disabled),ll(W,tt,K,ut,jt,W.stencilModeFor3D(),W.colorModeForRenderPass())}}function ll(W,tt,K,ut,kt,jt,Qt){for(var de=W.context,Ee=de.gl,Ye=K.paint.get("fill-extrusion-pattern"),ar=Ye.constantOr(1),tr=K.getCrossfadeParameters(),vr=K.paint.get("fill-extrusion-opacity"),Lr=0,Wr=ut;Lr<Wr.length;Lr+=1){var Fr=Wr[Lr],Br=tt.getTile(Fr),Kr=Br.getBucket(K);if(Kr){var cn=Kr.programConfigurations.get(K.id),Fn=W.useProgram(ar?"fillExtrusionPattern":"fillExtrusion",cn);ar&&(W.context.activeTexture.set(Ee.TEXTURE0),Br.imageAtlasTexture.bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),cn.updatePaintBuffers(tr));var Pn=Ye.constantOr(null);if(Pn&&Br.imageAtlas){var Dn=Br.imageAtlas,Nn=Dn.patternPositions[Pn.to.toString()],Bn=Dn.patternPositions[Pn.from.toString()];Nn&&Bn&&cn.setConstantPatternPositions(Nn,Bn)}var Vn=W.translatePosMatrix(Fr.posMatrix,Br,K.paint.get("fill-extrusion-translate"),K.paint.get("fill-extrusion-translate-anchor")),Zn=K.paint.get("fill-extrusion-vertical-gradient"),ci=ar?_o(Vn,W,Zn,vr,Fr,tr,Br):Js(Vn,W,Zn,vr);Fn.draw(de,de.gl.TRIANGLES,kt,jt,Qt,Ce.backCCW,ci,K.id,Kr.layoutVertexBuffer,Kr.indexBuffer,Kr.segments,K.paint,W.transform.zoom,cn)}}}function ul(W,tt,K,ut){if(!(W.renderPass!=="offscreen"&&W.renderPass!=="translucent")){for(var kt=W.context,jt=W.depthModeForSublayer(0,hr.ReadOnly),Qt=W.colorModeForRenderPass(),de=W.renderPass==="translucent"?W.stencilConfigForOverlap(ut):[{},ut],Ee=de[0],Ye=de[1],ar=0,tr=Ye;ar<tr.length;ar+=1){var vr=tr[ar],Lr=tt.getTile(vr);Lr.needsHillshadePrepare&&W.renderPass==="offscreen"?Iu(W,Lr,K,jt,He.disabled,Qt):W.renderPass==="translucent"&&zl(W,Lr,K,jt,Ee[vr.overscaledZ],Qt)}kt.viewport.set([0,0,W.width,W.height])}}function zl(W,tt,K,ut,kt,jt){var Qt=W.context,de=Qt.gl,Ee=tt.fbo;if(Ee){var Ye=W.useProgram("hillshade");Qt.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Ee.colorAttachment.get());var ar=eu(W,tt,K);Ye.draw(Qt,de.TRIANGLES,ut,kt,jt,Ce.disabled,ar,K.id,W.rasterBoundsBuffer,W.quadTriangleIndexBuffer,W.rasterBoundsSegments)}}function Iu(W,tt,K,ut,kt,jt){var Qt=W.context,de=Qt.gl,Ee=tt.dem;if(Ee&&Ee.data){var Ye=Ee.dim,ar=Ee.stride,tr=Ee.getPixels();if(Qt.activeTexture.set(de.TEXTURE1),Qt.pixelStoreUnpackPremultiplyAlpha.set(!1),tt.demTexture=tt.demTexture||W.getTileTexture(ar),tt.demTexture){var vr=tt.demTexture;vr.update(tr,{premultiply:!1}),vr.bind(de.NEAREST,de.CLAMP_TO_EDGE)}else tt.demTexture=new i.Texture(Qt,tr,de.RGBA,{premultiply:!1}),tt.demTexture.bind(de.NEAREST,de.CLAMP_TO_EDGE);Qt.activeTexture.set(de.TEXTURE0);var Lr=tt.fbo;if(!Lr){var Wr=new i.Texture(Qt,{width:Ye,height:Ye,data:null},de.RGBA);Wr.bind(de.LINEAR,de.CLAMP_TO_EDGE),Lr=tt.fbo=Qt.createFramebuffer(Ye,Ye,!0),Lr.colorAttachment.set(Wr.texture)}Qt.bindFramebuffer.set(Lr.framebuffer),Qt.viewport.set([0,0,Ye,Ye]),W.useProgram("hillshadePrepare").draw(Qt,de.TRIANGLES,ut,kt,jt,Ce.disabled,Eu(tt.tileID,Ee),K.id,W.rasterBoundsBuffer,W.quadTriangleIndexBuffer,W.rasterBoundsSegments),tt.needsHillshadePrepare=!1}}function cl(W,tt,K,ut){if(W.renderPass==="translucent"&&K.paint.get("raster-opacity")!==0&&ut.length)for(var kt=W.context,jt=kt.gl,Qt=tt.getSource(),de=W.useProgram("raster"),Ee=W.colorModeForRenderPass(),Ye=Qt instanceof X?[{},ut]:W.stencilConfigForOverlap(ut),ar=Ye[0],tr=Ye[1],vr=tr[tr.length-1].overscaledZ,Lr=!W.options.moving,Wr=0,Fr=tr;Wr<Fr.length;Wr+=1){var Br=Fr[Wr],Kr=W.depthModeForSublayer(Br.overscaledZ-vr,K.paint.get("raster-opacity")===1?hr.ReadWrite:hr.ReadOnly,jt.LESS),cn=tt.getTile(Br),Fn=W.transform.calculatePosMatrix(Br.toUnwrapped(),Lr);cn.registerFadeDuration(K.paint.get("raster-fade-duration"));var Pn=tt.findLoadedParent(Br,0),Dn=au(cn,Pn,tt,K,W.transform),Nn=void 0,Bn=void 0,Vn=K.paint.get("raster-resampling")==="nearest"?jt.NEAREST:jt.LINEAR;kt.activeTexture.set(jt.TEXTURE0),cn.texture.bind(Vn,jt.CLAMP_TO_EDGE,jt.LINEAR_MIPMAP_NEAREST),kt.activeTexture.set(jt.TEXTURE1),Pn?(Pn.texture.bind(Vn,jt.CLAMP_TO_EDGE,jt.LINEAR_MIPMAP_NEAREST),Nn=Math.pow(2,Pn.tileID.overscaledZ-cn.tileID.overscaledZ),Bn=[cn.tileID.canonical.x*Nn%1,cn.tileID.canonical.y*Nn%1]):cn.texture.bind(Vn,jt.CLAMP_TO_EDGE,jt.LINEAR_MIPMAP_NEAREST);var Zn=tl(Fn,Bn||[0,0],Nn||1,Dn,K);Qt instanceof X?de.draw(kt,jt.TRIANGLES,Kr,He.disabled,Ee,Ce.disabled,Zn,K.id,Qt.boundsBuffer,W.quadTriangleIndexBuffer,Qt.boundsSegments):de.draw(kt,jt.TRIANGLES,Kr,ar[Br.overscaledZ],Ee,Ce.disabled,Zn,K.id,W.rasterBoundsBuffer,W.quadTriangleIndexBuffer,W.rasterBoundsSegments)}}function au(W,tt,K,ut,kt){var jt=ut.paint.get("raster-fade-duration");if(jt>0){var Qt=i.browser.now(),de=(Qt-W.timeAdded)/jt,Ee=tt?(Qt-tt.timeAdded)/jt:-1,Ye=K.getSource(),ar=kt.coveringZoomLevel({tileSize:Ye.tileSize,roundZoom:Ye.roundZoom}),tr=!tt||Math.abs(tt.tileID.overscaledZ-ar)>Math.abs(W.tileID.overscaledZ-ar),vr=tr&&W.refreshedUponExpiration?1:i.clamp(tr?de:1-Ee,0,1);return W.refreshedUponExpiration&&de>=1&&(W.refreshedUponExpiration=!1),tt?{opacity:1,mix:1-vr}:{opacity:vr,mix:0}}else return{opacity:1,mix:0}}function bs(W,tt,K){var ut=K.paint.get("background-color"),kt=K.paint.get("background-opacity");if(kt!==0){var jt=W.context,Qt=jt.gl,de=W.transform,Ee=de.tileSize,Ye=K.paint.get("background-pattern");if(!W.isPatternMissing(Ye)){var ar=!Ye&&ut.a===1&&kt===1&&W.opaquePassEnabledForLayer()?"opaque":"translucent";if(W.renderPass===ar){var tr=He.disabled,vr=W.depthModeForSublayer(0,ar==="opaque"?hr.ReadWrite:hr.ReadOnly),Lr=W.colorModeForRenderPass(),Wr=W.useProgram(Ye?"backgroundPattern":"background"),Fr=de.coveringTiles({tileSize:Ee});Ye&&(jt.activeTexture.set(Qt.TEXTURE0),W.imageManager.bind(W.context));for(var Br=K.getCrossfadeParameters(),Kr=0,cn=Fr;Kr<cn.length;Kr+=1){var Fn=cn[Kr],Pn=W.transform.calculatePosMatrix(Fn.toUnwrapped()),Dn=Ye?il(Pn,kt,W,Ye,{tileID:Fn,tileSize:Ee},Br):os(Pn,kt,ut);Wr.draw(jt,Qt.TRIANGLES,vr,tr,Lr,Ce.disabled,Dn,K.id,W.tileExtentBuffer,W.quadTriangleIndexBuffer,W.tileExtentSegments)}}}}}var ou=new i.Color(1,0,0,1),fl=new i.Color(0,1,0,1),zu=new i.Color(0,0,1,1),qt=new i.Color(1,0,1,1),Kt=new i.Color(0,1,1,1);function se(W){var tt=W.transform.padding,K=3;Se(W,W.transform.height-(tt.top||0),K,ou),Se(W,tt.bottom||0,K,fl),Ae(W,tt.left||0,K,zu),Ae(W,W.transform.width-(tt.right||0),K,qt);var ut=W.transform.centerPoint;ve(W,ut.x,W.transform.height-ut.y,Kt)}function ve(W,tt,K,ut){var kt=20,jt=2;Le(W,tt-jt/2,K-kt/2,jt,kt,ut),Le(W,tt-kt/2,K-jt/2,kt,jt,ut)}function Se(W,tt,K,ut){Le(W,0,tt+K/2,W.transform.width,K,ut)}function Ae(W,tt,K,ut){Le(W,tt-K/2,0,K,W.transform.height,ut)}function Le(W,tt,K,ut,kt,jt){var Qt=W.context,de=Qt.gl;de.enable(de.SCISSOR_TEST),de.scissor(tt*i.browser.devicePixelRatio,K*i.browser.devicePixelRatio,ut*i.browser.devicePixelRatio,kt*i.browser.devicePixelRatio),Qt.clear({color:jt}),de.disable(de.SCISSOR_TEST)}function ir(W,tt,K){for(var ut=0;ut<K.length;ut++)fr(W,tt,K[ut])}function fr(W,tt,K){var ut=W.context,kt=ut.gl,jt=K.posMatrix,Qt=W.useProgram("debug"),de=hr.disabled,Ee=He.disabled,Ye=W.colorModeForRenderPass(),ar="$debug";ut.activeTexture.set(kt.TEXTURE0),W.emptyTexture.bind(kt.LINEAR,kt.CLAMP_TO_EDGE),Qt.draw(ut,kt.LINE_STRIP,de,Ee,Ye,Ce.disabled,Ra(jt,i.Color.red),ar,W.debugBuffer,W.tileBorderIndexBuffer,W.debugSegments);var tr=tt.getTileByID(K.key).latestRawTileData,vr=tr&&tr.byteLength||0,Lr=Math.floor(vr/1024),Wr=tt.getTile(K).tileSize,Fr=512/Math.min(Wr,512)*(K.overscaledZ/W.transform.zoom)*.5,Br=K.canonical.toString();K.overscaledZ!==K.canonical.z&&(Br+=" => "+K.overscaledZ);var Kr=Br+" "+Lr+"kb";$e(W,Kr),Qt.draw(ut,kt.TRIANGLES,de,Ee,ie.alphaBlended,Ce.disabled,Ra(jt,i.Color.transparent,Fr),ar,W.debugBuffer,W.quadTriangleIndexBuffer,W.debugSegments)}function $e(W,tt){W.initDebugOverlayCanvas();var K=W.debugOverlayCanvas,ut=W.context.gl,kt=W.debugOverlayCanvas.getContext("2d");kt.clearRect(0,0,K.width,K.height),kt.shadowColor="white",kt.shadowBlur=2,kt.lineWidth=1.5,kt.strokeStyle="white",kt.textBaseline="top",kt.font="bold 36px Open Sans, sans-serif",kt.fillText(tt,5,5),kt.strokeText(tt,5,5),W.debugOverlayTexture.update(K),W.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}function mr(W,tt,K){var ut=W.context,kt=K.implementation;if(W.renderPass==="offscreen"){var jt=kt.prerender;jt&&(W.setCustomLayerDefaults(),ut.setColorMode(W.colorModeForRenderPass()),jt.call(kt,ut.gl,W.transform.customLayerMatrix()),ut.setDirty(),W.setBaseState())}else if(W.renderPass==="translucent"){W.setCustomLayerDefaults(),ut.setColorMode(W.colorModeForRenderPass()),ut.setStencilMode(He.disabled);var Qt=kt.renderingMode==="3d"?new hr(W.context.gl.LEQUAL,hr.ReadWrite,W.depthRangeFor3D):W.depthModeForSublayer(0,hr.ReadOnly);ut.setDepthMode(Qt),kt.render(ut.gl,W.transform.customLayerMatrix()),ut.setDirty(),W.setBaseState(),ut.bindFramebuffer.set(null)}}var Tr={symbol:Pl,circle:Pu,heatmap:ls,line:Il,fill:Vo,"fill-extrusion":iu,hillshade:ul,raster:cl,background:bs,debug:ir,custom:mr},Rr=function(W,tt){this.context=new Fe(W),this.transform=tt,this._tileTextures={},this.setup(),this.numSublayers=Re.maxUnderzooming+Re.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jn,this.gpuTimers={}};Rr.prototype.resize=function(W,tt){if(this.width=W*i.browser.devicePixelRatio,this.height=tt*i.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var K=0,ut=this.style._order;K<ut.length;K+=1){var kt=ut[K];this.style._layers[kt].resize()}},Rr.prototype.setup=function(){var W=this.context,tt=new i.StructArrayLayout2i4;tt.emplaceBack(0,0),tt.emplaceBack(i.EXTENT,0),tt.emplaceBack(0,i.EXTENT),tt.emplaceBack(i.EXTENT,i.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(tt,$a.members),this.tileExtentSegments=i.SegmentVector.simpleSegment(0,0,4,2);var K=new i.StructArrayLayout2i4;K.emplaceBack(0,0),K.emplaceBack(i.EXTENT,0),K.emplaceBack(0,i.EXTENT),K.emplaceBack(i.EXTENT,i.EXTENT),this.debugBuffer=W.createVertexBuffer(K,$a.members),this.debugSegments=i.SegmentVector.simpleSegment(0,0,4,5);var ut=new i.StructArrayLayout4i8;ut.emplaceBack(0,0,0,0),ut.emplaceBack(i.EXTENT,0,i.EXTENT,0),ut.emplaceBack(0,i.EXTENT,0,i.EXTENT),ut.emplaceBack(i.EXTENT,i.EXTENT,i.EXTENT,i.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(ut,G.members),this.rasterBoundsSegments=i.SegmentVector.simpleSegment(0,0,4,2);var kt=new i.StructArrayLayout2i4;kt.emplaceBack(0,0),kt.emplaceBack(1,0),kt.emplaceBack(0,1),kt.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(kt,$a.members),this.viewportSegments=i.SegmentVector.simpleSegment(0,0,4,2);var jt=new i.StructArrayLayout1ui2;jt.emplaceBack(0),jt.emplaceBack(1),jt.emplaceBack(3),jt.emplaceBack(2),jt.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(jt);var Qt=new i.StructArrayLayout3ui6;Qt.emplaceBack(0,1,2),Qt.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer(Qt),this.emptyTexture=new i.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var de=this.context.gl;this.stencilClearMode=new He({func:de.ALWAYS,mask:0},0,255,de.ZERO,de.ZERO,de.ZERO)},Rr.prototype.clearStencil=function(){var W=this.context,tt=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var K=i.create();i.ortho(K,0,this.width,this.height,0,0,1),i.scale(K,K,[tt.drawingBufferWidth,tt.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,tt.TRIANGLES,hr.disabled,this.stencilClearMode,ie.disabled,Ce.disabled,Fs(K),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Rr.prototype._renderTileClippingMasks=function(W,tt){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!tt||!tt.length)){this.currentStencilSource=W.source;var K=this.context,ut=K.gl;this.nextStencilID+tt.length>256&&this.clearStencil(),K.setColorMode(ie.disabled),K.setDepthMode(hr.disabled);var kt=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var jt=0,Qt=tt;jt<Qt.length;jt+=1){var de=Qt[jt],Ee=this._tileClippingMaskIDs[de.key]=this.nextStencilID++;kt.draw(K,ut.TRIANGLES,hr.disabled,new He({func:ut.ALWAYS,mask:0},Ee,255,ut.KEEP,ut.KEEP,ut.REPLACE),ie.disabled,Ce.disabled,Fs(de.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Rr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,tt=this.context.gl;return new He({func:tt.NOTEQUAL,mask:255},W,255,tt.KEEP,tt.KEEP,tt.REPLACE)},Rr.prototype.stencilModeForClipping=function(W){var tt=this.context.gl;return new He({func:tt.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,tt.KEEP,tt.KEEP,tt.REPLACE)},Rr.prototype.stencilConfigForOverlap=function(W){var tt,K=this.context.gl,ut=W.sort(function(Ee,Ye){return Ye.overscaledZ-Ee.overscaledZ}),kt=ut[ut.length-1].overscaledZ,jt=ut[0].overscaledZ-kt+1;if(jt>1){this.currentStencilSource=void 0,this.nextStencilID+jt>256&&this.clearStencil();for(var Qt={},de=0;de<jt;de++)Qt[de+kt]=new He({func:K.GEQUAL,mask:255},de+this.nextStencilID,255,K.KEEP,K.KEEP,K.REPLACE);return this.nextStencilID+=jt,[Qt,ut]}return[(tt={},tt[kt]=He.disabled,tt),ut]},Rr.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var tt=8,K=1/tt;return new ie([W.CONSTANT_COLOR,W.ONE],new i.Color(K,K,K,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?ie.unblended:ie.alphaBlended},Rr.prototype.depthModeForSublayer=function(W,tt,K){if(!this.opaquePassEnabledForLayer())return hr.disabled;var ut=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new hr(K||this.context.gl.LEQUAL,tt,[ut,ut])},Rr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Rr.prototype.render=function(W,tt){var K=this;this.style=W,this.options=tt,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(i.browser.now()),this.imageManager.beginFrame();var ut=this.style._order,kt=this.style.sourceCaches;for(var jt in kt){var Qt=kt[jt];Qt.used&&Qt.prepare(this.context)}var de={},Ee={},Ye={};for(var ar in kt){var tr=kt[ar];de[ar]=tr.getVisibleCoordinates(),Ee[ar]=de[ar].slice().reverse(),Ye[ar]=tr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var vr=0;vr<ut.length;vr++){var Lr=ut[vr];if(this.style._layers[Lr].is3D()){this.opaquePassCutoff=vr;break}}this.renderPass="offscreen";for(var Wr=0,Fr=ut;Wr<Fr.length;Wr+=1){var Br=Fr[Wr],Kr=this.style._layers[Br];if(!(!Kr.hasOffscreenPass()||Kr.isHidden(this.transform.zoom))){var cn=Ee[Kr.source];Kr.type!=="custom"&&!cn.length||this.renderLayer(this,kt[Kr.source],Kr,cn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:tt.showOverdrawInspector?i.Color.black:i.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=tt.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ut.length-1;this.currentLayer>=0;this.currentLayer--){var Fn=this.style._layers[ut[this.currentLayer]],Pn=kt[Fn.source],Dn=de[Fn.source];this._renderTileClippingMasks(Fn,Dn),this.renderLayer(this,Pn,Fn,Dn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ut.length;this.currentLayer++){var Nn=this.style._layers[ut[this.currentLayer]],Bn=kt[Nn.source],Vn=(Nn.type==="symbol"?Ye:Ee)[Nn.source];this._renderTileClippingMasks(Nn,de[Nn.source]),this.renderLayer(this,Bn,Nn,Vn)}if(this.options.showTileBoundaries){var Zn,ci,si=i.values(this.style._layers);si.forEach(function(li){li.source&&!li.isHidden(K.transform.zoom)&&(li.source!==(ci&&ci.id)&&(ci=K.style.sourceCaches[li.source]),(!Zn||Zn.getSource().maxzoom<ci.getSource().maxzoom)&&(Zn=ci))}),Zn&&Tr.debug(this,Zn,Zn.getVisibleCoordinates())}this.options.showPadding&&se(this),this.context.setDefault()},Rr.prototype.renderLayer=function(W,tt,K,ut){K.isHidden(this.transform.zoom)||K.type!=="background"&&K.type!=="custom"&&!ut.length||(this.id=K.id,this.gpuTimingStart(K),Tr[K.type](W,tt,K,ut,this.style.placement.variableOffsets),this.gpuTimingEnd())},Rr.prototype.gpuTimingStart=function(W){if(this.options.gpuTiming){var tt=this.context.extTimerQuery,K=this.gpuTimers[W.id];K||(K=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:tt.createQueryEXT()}),K.calls++,tt.beginQueryEXT(tt.TIME_ELAPSED_EXT,K.query)}},Rr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},Rr.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},Rr.prototype.queryGpuTimers=function(W){var tt={};for(var K in W){var ut=W[K],kt=this.context.extTimerQuery,jt=kt.getQueryObjectEXT(ut.query,kt.QUERY_RESULT_EXT)/(1e3*1e3);kt.deleteQueryEXT(ut.query),tt[K]=jt}return tt},Rr.prototype.translatePosMatrix=function(W,tt,K,ut,kt){if(!K[0]&&!K[1])return W;var jt=kt?ut==="map"?this.transform.angle:0:ut==="viewport"?-this.transform.angle:0;if(jt){var Qt=Math.sin(jt),de=Math.cos(jt);K=[K[0]*de-K[1]*Qt,K[0]*Qt+K[1]*de]}var Ee=[kt?K[0]:an(tt,K[0],this.transform.zoom),kt?K[1]:an(tt,K[1],this.transform.zoom),0],Ye=new Float32Array(16);return i.translate(Ye,W,Ee),Ye},Rr.prototype.saveTileTexture=function(W){var tt=this._tileTextures[W.size[0]];tt?tt.push(W):this._tileTextures[W.size[0]]=[W]},Rr.prototype.getTileTexture=function(W){var tt=this._tileTextures[W];return tt&&tt.length>0?tt.pop():null},Rr.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var tt=this.imageManager.getPattern(W.from.toString()),K=this.imageManager.getPattern(W.to.toString());return!tt||!K},Rr.prototype.useProgram=function(W,tt){this.cache=this.cache||{};var K=""+W+(tt?tt.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[K]||(this.cache[K]=new Ql(this.context,W,Au[W],tt,ss[W],this._showOverdrawInspector)),this.cache[K]},Rr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Rr.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},Rr.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=i.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new i.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},Rr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Zr=function(W,tt){this.points=W,this.planes=tt};Zr.fromInvProjectionMatrix=function(W,tt,K){var ut=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],kt=Math.pow(2,K),jt=ut.map(function(Ee){return i.transformMat4([],Ee,W)}).map(function(Ee){return i.scale$1([],Ee,1/Ee[3]/tt*kt)}),Qt=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],de=Qt.map(function(Ee){var Ye=i.sub([],jt[Ee[0]],jt[Ee[1]]),ar=i.sub([],jt[Ee[2]],jt[Ee[1]]),tr=i.normalize([],i.cross([],Ye,ar)),vr=-i.dot(tr,jt[Ee[1]]);return tr.concat(vr)});return new Zr(jt,de)};var dn=function(W,tt){this.min=W,this.max=tt,this.center=i.scale$2([],i.add([],this.min,this.max),.5)};dn.prototype.quadrant=function(W){for(var tt=[W%2===0,W<2],K=i.clone$2(this.min),ut=i.clone$2(this.max),kt=0;kt<tt.length;kt++)K[kt]=tt[kt]?this.min[kt]:this.center[kt],ut[kt]=tt[kt]?this.center[kt]:this.max[kt];return ut[2]=this.max[2],new dn(K,ut)},dn.prototype.distanceX=function(W){var tt=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return tt-W[0]},dn.prototype.distanceY=function(W){var tt=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return tt-W[1]},dn.prototype.intersects=function(W){for(var tt=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],K=!0,ut=0;ut<W.planes.length;ut++){for(var kt=W.planes[ut],jt=0,Qt=0;Qt<tt.length;Qt++)jt+=i.dot$1(kt,tt[Qt])>=0;if(jt===0)return 0;jt!==tt.length&&(K=!1)}if(K)return 2;for(var de=0;de<3;de++){for(var Ee=Number.MAX_VALUE,Ye=-Number.MAX_VALUE,ar=0;ar<W.points.length;ar++){var tr=W.points[ar][de]-this.min[de];Ee=Math.min(Ee,tr),Ye=Math.max(Ye,tr)}if(Ye<0||Ee>this.max[de]-this.min[de])return 0}return 1};var wn=function(W,tt,K,ut){if(W===void 0&&(W=0),tt===void 0&&(tt=0),K===void 0&&(K=0),ut===void 0&&(ut=0),isNaN(W)||W<0||isNaN(tt)||tt<0||isNaN(K)||K<0||isNaN(ut)||ut<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=tt,this.left=K,this.right=ut};wn.prototype.interpolate=function(W,tt,K){return tt.top!=null&&W.top!=null&&(this.top=i.number(W.top,tt.top,K)),tt.bottom!=null&&W.bottom!=null&&(this.bottom=i.number(W.bottom,tt.bottom,K)),tt.left!=null&&W.left!=null&&(this.left=i.number(W.left,tt.left,K)),tt.right!=null&&W.right!=null&&(this.right=i.number(W.right,tt.right,K)),this},wn.prototype.getCenter=function(W,tt){var K=i.clamp((this.left+W-this.right)/2,0,W),ut=i.clamp((this.top+tt-this.bottom)/2,0,tt);return new i.Point(K,ut)},wn.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},wn.prototype.clone=function(){return new wn(this.top,this.bottom,this.left,this.right)},wn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var kn=function(W,tt,K,ut,kt){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=kt===void 0?!0:kt,this._minZoom=W||0,this._maxZoom=tt||22,this._minPitch=K??0,this._maxPitch=ut??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new wn,this._posMatrixCache={},this._alignedPosMatrixCache={}},jn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};kn.prototype.clone=function(){var W=new kn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},jn.minZoom.get=function(){return this._minZoom},jn.minZoom.set=function(W){this._minZoom!==W&&(this._minZoom=W,this.zoom=Math.max(this.zoom,W))},jn.maxZoom.get=function(){return this._maxZoom},jn.maxZoom.set=function(W){this._maxZoom!==W&&(this._maxZoom=W,this.zoom=Math.min(this.zoom,W))},jn.minPitch.get=function(){return this._minPitch},jn.minPitch.set=function(W){this._minPitch!==W&&(this._minPitch=W,this.pitch=Math.max(this.pitch,W))},jn.maxPitch.get=function(){return this._maxPitch},jn.maxPitch.set=function(W){this._maxPitch!==W&&(this._maxPitch=W,this.pitch=Math.min(this.pitch,W))},jn.renderWorldCopies.get=function(){return this._renderWorldCopies},jn.renderWorldCopies.set=function(W){W===void 0?W=!0:W===null&&(W=!1),this._renderWorldCopies=W},jn.worldSize.get=function(){return this.tileSize*this.scale},jn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},jn.size.get=function(){return new i.Point(this.width,this.height)},jn.bearing.get=function(){return-this.angle/Math.PI*180},jn.bearing.set=function(W){var tt=-i.wrap(W,-180,180)*Math.PI/180;this.angle!==tt&&(this._unmodified=!1,this.angle=tt,this._calcMatrices(),this.rotationMatrix=i.create$2(),i.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},jn.pitch.get=function(){return this._pitch/Math.PI*180},jn.pitch.set=function(W){var tt=i.clamp(W,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==tt&&(this._unmodified=!1,this._pitch=tt,this._calcMatrices())},jn.fov.get=function(){return this._fov/Math.PI*180},jn.fov.set=function(W){W=Math.max(.01,Math.min(60,W)),this._fov!==W&&(this._unmodified=!1,this._fov=W/180*Math.PI,this._calcMatrices())},jn.zoom.get=function(){return this._zoom},jn.zoom.set=function(W){var tt=Math.min(Math.max(W,this.minZoom),this.maxZoom);this._zoom!==tt&&(this._unmodified=!1,this._zoom=tt,this.scale=this.zoomScale(tt),this.tileZoom=Math.floor(tt),this.zoomFraction=tt-this.tileZoom,this._constrain(),this._calcMatrices())},jn.center.get=function(){return this._center},jn.center.set=function(W){W.lat===this._center.lat&&W.lng===this._center.lng||(this._unmodified=!1,this._center=W,this._constrain(),this._calcMatrices())},jn.padding.get=function(){return this._edgeInsets.toJSON()},jn.padding.set=function(W){this._edgeInsets.equals(W)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,W,1),this._calcMatrices())},jn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},kn.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},kn.prototype.interpolatePadding=function(W,tt,K){this._unmodified=!1,this._edgeInsets.interpolate(W,tt,K),this._constrain(),this._calcMatrices()},kn.prototype.coveringZoomLevel=function(W){var tt=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,tt)},kn.prototype.getVisibleUnwrappedCoordinates=function(W){var tt=[new i.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var K=this.pointCoordinate(new i.Point(0,0)),ut=this.pointCoordinate(new i.Point(this.width,0)),kt=this.pointCoordinate(new i.Point(this.width,this.height)),jt=this.pointCoordinate(new i.Point(0,this.height)),Qt=Math.floor(Math.min(K.x,ut.x,kt.x,jt.x)),de=Math.floor(Math.max(K.x,ut.x,kt.x,jt.x)),Ee=1,Ye=Qt-Ee;Ye<=de+Ee;Ye++)Ye!==0&&tt.push(new i.UnwrappedTileID(Ye,W));return tt},kn.prototype.coveringTiles=function(W){var tt=this.coveringZoomLevel(W),K=tt;if(W.minzoom!==void 0&&tt<W.minzoom)return[];W.maxzoom!==void 0&&tt>W.maxzoom&&(tt=W.maxzoom);var ut=i.MercatorCoordinate.fromLngLat(this.center),kt=Math.pow(2,tt),jt=[kt*ut.x,kt*ut.y,0],Qt=Zr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,tt),de=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(de=tt);var Ee=3,Ye=function(si){return{aabb:new dn([si*kt,0,0],[(si+1)*kt,kt,0]),zoom:0,x:0,y:0,wrap:si,fullyVisible:!1}},ar=[],tr=[],vr=tt,Lr=W.reparseOverscaled?K:tt;if(this._renderWorldCopies)for(var Wr=1;Wr<=3;Wr++)ar.push(Ye(-Wr)),ar.push(Ye(Wr));for(ar.push(Ye(0));ar.length>0;){var Fr=ar.pop(),Br=Fr.x,Kr=Fr.y,cn=Fr.fullyVisible;if(!cn){var Fn=Fr.aabb.intersects(Qt);if(Fn===0)continue;cn=Fn===2}var Pn=Fr.aabb.distanceX(jt),Dn=Fr.aabb.distanceY(jt),Nn=Math.max(Math.abs(Pn),Math.abs(Dn)),Bn=Ee+(1<<vr-Fr.zoom)-2;if(Fr.zoom===vr||Nn>Bn&&Fr.zoom>=de){tr.push({tileID:new i.OverscaledTileID(Fr.zoom===vr?Lr:Fr.zoom,Fr.wrap,Fr.zoom,Br,Kr),distanceSq:i.sqrLen([jt[0]-.5-Br,jt[1]-.5-Kr])});continue}for(var Vn=0;Vn<4;Vn++){var Zn=(Br<<1)+Vn%2,ci=(Kr<<1)+(Vn>>1);ar.push({aabb:Fr.aabb.quadrant(Vn),zoom:Fr.zoom+1,x:Zn,y:ci,wrap:Fr.wrap,fullyVisible:cn})}}return tr.sort(function(si,li){return si.distanceSq-li.distanceSq}).map(function(si){return si.tileID})},kn.prototype.resize=function(W,tt){this.width=W,this.height=tt,this.pixelsToGLUnits=[2/W,-2/tt],this._constrain(),this._calcMatrices()},jn.unmodified.get=function(){return this._unmodified},kn.prototype.zoomScale=function(W){return Math.pow(2,W)},kn.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},kn.prototype.project=function(W){var tt=i.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new i.Point(i.mercatorXfromLng(W.lng)*this.worldSize,i.mercatorYfromLat(tt)*this.worldSize)},kn.prototype.unproject=function(W){return new i.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},jn.point.get=function(){return this.project(this.center)},kn.prototype.setLocationAtPoint=function(W,tt){var K=this.pointCoordinate(tt),ut=this.pointCoordinate(this.centerPoint),kt=this.locationCoordinate(W),jt=new i.MercatorCoordinate(kt.x-(K.x-ut.x),kt.y-(K.y-ut.y));this.center=this.coordinateLocation(jt),this._renderWorldCopies&&(this.center=this.center.wrap())},kn.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},kn.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},kn.prototype.locationCoordinate=function(W){return i.MercatorCoordinate.fromLngLat(W)},kn.prototype.coordinateLocation=function(W){return W.toLngLat()},kn.prototype.pointCoordinate=function(W){var tt=0,K=[W.x,W.y,0,1],ut=[W.x,W.y,1,1];i.transformMat4(K,K,this.pixelMatrixInverse),i.transformMat4(ut,ut,this.pixelMatrixInverse);var kt=K[3],jt=ut[3],Qt=K[0]/kt,de=ut[0]/jt,Ee=K[1]/kt,Ye=ut[1]/jt,ar=K[2]/kt,tr=ut[2]/jt,vr=ar===tr?0:(tt-ar)/(tr-ar);return new i.MercatorCoordinate(i.number(Qt,de,vr)/this.worldSize,i.number(Ee,Ye,vr)/this.worldSize)},kn.prototype.coordinatePoint=function(W){var tt=[W.x*this.worldSize,W.y*this.worldSize,0,1];return i.transformMat4(tt,tt,this.pixelMatrix),new i.Point(tt[0]/tt[3],tt[1]/tt[3])},kn.prototype.getBounds=function(){return new i.LngLatBounds().extend(this.pointLocation(new i.Point(0,0))).extend(this.pointLocation(new i.Point(this.width,0))).extend(this.pointLocation(new i.Point(this.width,this.height))).extend(this.pointLocation(new i.Point(0,this.height)))},kn.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new i.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},kn.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},kn.prototype.calculatePosMatrix=function(W,tt){tt===void 0&&(tt=!1);var K=W.key,ut=tt?this._alignedPosMatrixCache:this._posMatrixCache;if(ut[K])return ut[K];var kt=W.canonical,jt=this.worldSize/this.zoomScale(kt.z),Qt=kt.x+Math.pow(2,kt.z)*W.wrap,de=i.identity(new Float64Array(16));return i.translate(de,de,[Qt*jt,kt.y*jt,0]),i.scale(de,de,[jt/i.EXTENT,jt/i.EXTENT,1]),i.multiply(de,tt?this.alignedProjMatrix:this.projMatrix,de),ut[K]=new Float32Array(de),ut[K]},kn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},kn.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,tt=90,K=-180,ut=180,kt,jt,Qt,de,Ee=this.size,Ye=this._unmodified;if(this.latRange){var ar=this.latRange;W=i.mercatorYfromLat(ar[1])*this.worldSize,tt=i.mercatorYfromLat(ar[0])*this.worldSize,kt=tt-W<Ee.y?Ee.y/(tt-W):0}if(this.lngRange){var tr=this.lngRange;K=i.mercatorXfromLng(tr[0])*this.worldSize,ut=i.mercatorXfromLng(tr[1])*this.worldSize,jt=ut-K<Ee.x?Ee.x/(ut-K):0}var vr=this.point,Lr=Math.max(jt||0,kt||0);if(Lr){this.center=this.unproject(new i.Point(jt?(ut+K)/2:vr.x,kt?(tt+W)/2:vr.y)),this.zoom+=this.scaleZoom(Lr),this._unmodified=Ye,this._constraining=!1;return}if(this.latRange){var Wr=vr.y,Fr=Ee.y/2;Wr-Fr<W&&(de=W+Fr),Wr+Fr>tt&&(de=tt-Fr)}if(this.lngRange){var Br=vr.x,Kr=Ee.x/2;Br-Kr<K&&(Qt=K+Kr),Br+Kr>ut&&(Qt=ut-Kr)}(Qt!==void 0||de!==void 0)&&(this.center=this.unproject(new i.Point(Qt!==void 0?Qt:vr.x,de!==void 0?de:vr.y))),this._unmodified=Ye,this._constraining=!1}},kn.prototype._calcMatrices=function(){if(this.height){var W=this._fov/2,tt=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var K=Math.PI/2+this._pitch,ut=this._fov*(.5+tt.y/this.height),kt=Math.sin(ut)*this.cameraToCenterDistance/Math.sin(i.clamp(Math.PI-K-ut,.01,Math.PI-.01)),jt=this.point,Qt=jt.x,de=jt.y,Ee=Math.cos(Math.PI/2-this._pitch)*kt+this.cameraToCenterDistance,Ye=Ee*1.01,ar=this.height/50,tr=new Float64Array(16);i.perspective(tr,this._fov,this.width/this.height,ar,Ye),tr[8]=-tt.x*2/this.width,tr[9]=tt.y*2/this.height,i.scale(tr,tr,[1,-1,1]),i.translate(tr,tr,[0,0,-this.cameraToCenterDistance]),i.rotateX(tr,tr,this._pitch),i.rotateZ(tr,tr,this.angle),i.translate(tr,tr,[-Qt,-de,0]),this.mercatorMatrix=i.scale([],tr,[this.worldSize,this.worldSize,this.worldSize]),i.scale(tr,tr,[1,1,i.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=tr,this.invProjMatrix=i.invert([],this.projMatrix);var vr=this.width%2/2,Lr=this.height%2/2,Wr=Math.cos(this.angle),Fr=Math.sin(this.angle),Br=Qt-Math.round(Qt)+Wr*vr+Fr*Lr,Kr=de-Math.round(de)+Wr*Lr+Fr*vr,cn=new Float64Array(tr);if(i.translate(cn,cn,[Br>.5?Br-1:Br,Kr>.5?Kr-1:Kr,0]),this.alignedProjMatrix=cn,tr=i.create(),i.scale(tr,tr,[this.width/2,-this.height/2,1]),i.translate(tr,tr,[1,-1,0]),this.labelPlaneMatrix=tr,tr=i.create(),i.scale(tr,tr,[1,-1,1]),i.translate(tr,tr,[-1,-1,0]),i.scale(tr,tr,[2/this.width,2/this.height,1]),this.glCoordMatrix=tr,this.pixelMatrix=i.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),tr=i.invert(new Float64Array(16),this.pixelMatrix),!tr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=tr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},kn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new i.Point(0,0)),tt=[W.x*this.worldSize,W.y*this.worldSize,0,1],K=i.transformMat4(tt,tt,this.pixelMatrix);return K[3]/this.cameraToCenterDistance},kn.prototype.getCameraPoint=function(){var W=this._pitch,tt=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.Point(0,tt))},kn.prototype.getCameraQueryGeometry=function(W){var tt=this.getCameraPoint();if(W.length===1)return[W[0],tt];for(var K=tt.x,ut=tt.y,kt=tt.x,jt=tt.y,Qt=0,de=W;Qt<de.length;Qt+=1){var Ee=de[Qt];K=Math.min(K,Ee.x),ut=Math.min(ut,Ee.y),kt=Math.max(kt,Ee.x),jt=Math.max(jt,Ee.y)}return[new i.Point(K,ut),new i.Point(kt,ut),new i.Point(kt,jt),new i.Point(K,jt),new i.Point(K,ut)]},Object.defineProperties(kn.prototype,jn);function wi(W,tt){var K=!1,ut=null,kt=function(){ut=null,K&&(W(),ut=setTimeout(kt,tt),K=!1)};return function(){return K=!0,ut||kt(),ut}}var Ai=function(W){this._hashName=W&&encodeURIComponent(W),i.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=wi(this._updateHashUnthrottled.bind(this),30*1e3/100)};Ai.prototype.addTo=function(W){return this._map=W,i.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ai.prototype.remove=function(){return i.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ai.prototype.getHashString=function(W){var tt=this._map.getCenter(),K=Math.round(this._map.getZoom()*100)/100,ut=Math.ceil((K*Math.LN2+Math.log(512/360/.5))/Math.LN10),kt=Math.pow(10,ut),jt=Math.round(tt.lng*kt)/kt,Qt=Math.round(tt.lat*kt)/kt,de=this._map.getBearing(),Ee=this._map.getPitch(),Ye="";if(W?Ye+="/"+jt+"/"+Qt+"/"+K:Ye+=K+"/"+Qt+"/"+jt,(de||Ee)&&(Ye+="/"+Math.round(de*10)/10),Ee&&(Ye+="/"+Math.round(Ee)),this._hashName){var ar=this._hashName,tr=!1,vr=i.window.location.hash.slice(1).split("&").map(function(Lr){var Wr=Lr.split("=")[0];return Wr===ar?(tr=!0,Wr+"="+Ye):Lr}).filter(function(Lr){return Lr});return tr||vr.push(ar+"="+Ye),"#"+vr.join("&")}return"#"+Ye},Ai.prototype._getCurrentHash=function(){var W=this,tt=i.window.location.hash.replace("#","");if(this._hashName){var K;return tt.split("&").map(function(ut){return ut.split("=")}).forEach(function(ut){ut[0]===W._hashName&&(K=ut)}),(K&&K[1]||"").split("/")}return tt.split("/")},Ai.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function(K){return isNaN(K)})){var tt=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:tt,pitch:+(W[4]||0)}),!0}return!1},Ai.prototype._updateHashUnthrottled=function(){var W=i.window.location.href.replace(/(#.+)?$/,this.getHashString());try{i.window.history.replaceState(i.window.history.state,null,W)}catch{}};var Si={linearity:.3,easing:i.bezier(0,0,.3,1)},Li=i.extend({deceleration:2500,maxSpeed:1400},Si),zi=i.extend({deceleration:20,maxSpeed:1400},Si),$i=i.extend({deceleration:1e3,maxSpeed:360},Si),xa=i.extend({deceleration:1e3,maxSpeed:90},Si),lt=function(W){this._map=W,this.clear()};lt.prototype.clear=function(){this._inertiaBuffer=[]},lt.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.browser.now(),settings:W})},lt.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,tt=i.browser.now(),K=160;W.length>0&&tt-W[0].time>K;)W.shift()},lt.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var tt={zoom:0,bearing:0,pitch:0,pan:new i.Point(0,0),pinchAround:void 0,around:void 0},K=0,ut=this._inertiaBuffer;K<ut.length;K+=1){var kt=ut[K],jt=kt.settings;tt.zoom+=jt.zoomDelta||0,tt.bearing+=jt.bearingDelta||0,tt.pitch+=jt.pitchDelta||0,jt.panDelta&&tt.pan._add(jt.panDelta),jt.around&&(tt.around=jt.around),jt.pinchAround&&(tt.pinchAround=jt.pinchAround)}var Qt=this._inertiaBuffer[this._inertiaBuffer.length-1],de=Qt.time-this._inertiaBuffer[0].time,Ee={};if(tt.pan.mag()){var Ye=Lt(tt.pan.mag(),de,i.extend({},Li,W||{}));Ee.offset=tt.pan.mult(Ye.amount/tt.pan.mag()),Ee.center=this._map.transform.center,_t(Ee,Ye)}if(tt.zoom){var ar=Lt(tt.zoom,de,zi);Ee.zoom=this._map.transform.zoom+ar.amount,_t(Ee,ar)}if(tt.bearing){var tr=Lt(tt.bearing,de,$i);Ee.bearing=this._map.transform.bearing+i.clamp(tr.amount,-179,179),_t(Ee,tr)}if(tt.pitch){var vr=Lt(tt.pitch,de,xa);Ee.pitch=this._map.transform.pitch+vr.amount,_t(Ee,vr)}if(Ee.zoom||Ee.bearing){var Lr=tt.pinchAround===void 0?tt.around:tt.pinchAround;Ee.around=Lr?this._map.unproject(Lr):this._map.getCenter()}return this.clear(),i.extend(Ee,{noMoveStart:!0})}};function _t(W,tt){(!W.duration||W.duration<tt.duration)&&(W.duration=tt.duration,W.easing=tt.easing)}function Lt(W,tt,K){var ut=K.maxSpeed,kt=K.linearity,jt=K.deceleration,Qt=i.clamp(W*kt/(tt/1e3),-ut,ut),de=Math.abs(Qt)/(jt*kt);return{easing:K.easing,duration:de*1e3,amount:Qt*(de/2)}}var Ht=function(W){function tt(ut,kt,jt,Qt){Qt===void 0&&(Qt={});var de=T.mousePos(kt.getCanvasContainer(),jt),Ee=kt.unproject(de);W.call(this,ut,i.extend({point:de,lngLat:Ee,originalEvent:jt},Qt)),this._defaultPrevented=!1,this.target=kt}W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt;var K={defaultPrevented:{configurable:!0}};return tt.prototype.preventDefault=function(){this._defaultPrevented=!0},K.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(tt.prototype,K),tt}(i.Event),Wt=function(W){function tt(ut,kt,jt){var Qt=ut==="touchend"?jt.changedTouches:jt.touches,de=T.touchPos(kt.getCanvasContainer(),Qt),Ee=de.map(function(tr){return kt.unproject(tr)}),Ye=de.reduce(function(tr,vr,Lr,Wr){return tr.add(vr.div(Wr.length))},new i.Point(0,0)),ar=kt.unproject(Ye);W.call(this,ut,{points:de,point:Ye,lngLats:Ee,lngLat:ar,originalEvent:jt}),this._defaultPrevented=!1}W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt;var K={defaultPrevented:{configurable:!0}};return tt.prototype.preventDefault=function(){this._defaultPrevented=!0},K.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(tt.prototype,K),tt}(i.Event),ee=function(W){function tt(ut,kt,jt){W.call(this,ut,{originalEvent:jt}),this._defaultPrevented=!1}W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt;var K={defaultPrevented:{configurable:!0}};return tt.prototype.preventDefault=function(){this._defaultPrevented=!0},K.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(tt.prototype,K),tt}(i.Event),xe=function(W,tt){this._map=W,this._clickTolerance=tt.clickTolerance};xe.prototype.reset=function(){delete this._mousedownPos},xe.prototype.wheel=function(W){return this._firePreventable(new ee(W.type,this._map,W))},xe.prototype.mousedown=function(W,tt){return this._mousedownPos=tt,this._firePreventable(new Ht(W.type,this._map,W))},xe.prototype.mouseup=function(W){this._map.fire(new Ht(W.type,this._map,W))},xe.prototype.click=function(W,tt){this._mousedownPos&&this._mousedownPos.dist(tt)>=this._clickTolerance||this._map.fire(new Ht(W.type,this._map,W))},xe.prototype.dblclick=function(W){return this._firePreventable(new Ht(W.type,this._map,W))},xe.prototype.mouseover=function(W){this._map.fire(new Ht(W.type,this._map,W))},xe.prototype.mouseout=function(W){this._map.fire(new Ht(W.type,this._map,W))},xe.prototype.touchstart=function(W){return this._firePreventable(new Wt(W.type,this._map,W))},xe.prototype.touchmove=function(W){this._map.fire(new Wt(W.type,this._map,W))},xe.prototype.touchend=function(W){this._map.fire(new Wt(W.type,this._map,W))},xe.prototype.touchcancel=function(W){this._map.fire(new Wt(W.type,this._map,W))},xe.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},xe.prototype.isEnabled=function(){return!0},xe.prototype.isActive=function(){return!1},xe.prototype.enable=function(){},xe.prototype.disable=function(){};var me=function(W){this._map=W};me.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},me.prototype.mousemove=function(W){this._map.fire(new Ht(W.type,this._map,W))},me.prototype.mousedown=function(){this._delayContextMenu=!0},me.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ht("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},me.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new Ht(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},me.prototype.isEnabled=function(){return!0},me.prototype.isActive=function(){return!1},me.prototype.enable=function(){},me.prototype.disable=function(){};var Ie=function(W,tt){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=tt.clickTolerance||1};Ie.prototype.isEnabled=function(){return!!this._enabled},Ie.prototype.isActive=function(){return!!this._active},Ie.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ie.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ie.prototype.mousedown=function(W,tt){this.isEnabled()&&W.shiftKey&&W.button===0&&(T.disableDrag(),this._startPos=this._lastPos=tt,this._active=!0)},Ie.prototype.mousemoveWindow=function(W,tt){if(this._active){var K=tt;if(!(this._lastPos.equals(K)||!this._box&&K.dist(this._startPos)<this._clickTolerance)){var ut=this._startPos;this._lastPos=K,this._box||(this._box=T.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var kt=Math.min(ut.x,K.x),jt=Math.max(ut.x,K.x),Qt=Math.min(ut.y,K.y),de=Math.max(ut.y,K.y);T.setTransform(this._box,"translate("+kt+"px,"+Qt+"px)"),this._box.style.width=jt-kt+"px",this._box.style.height=de-Qt+"px"}}},Ie.prototype.mouseupWindow=function(W,tt){var K=this;if(this._active&&W.button===0){var ut=this._startPos,kt=tt;if(this.reset(),T.suppressClick(),ut.x===kt.x&&ut.y===kt.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new i.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(jt){return jt.fitScreenCoordinates(ut,kt,K._map.getBearing(),{linear:!0})}}}},Ie.prototype.keydown=function(W){this._active&&W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},Ie.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(T.remove(this._box),this._box=null),T.enableDrag(),delete this._startPos,delete this._lastPos},Ie.prototype._fireEvent=function(W,tt){return this._map.fire(new i.Event(W,{originalEvent:tt}))};function ze(W,tt){for(var K={},ut=0;ut<W.length;ut++)K[W[ut].identifier]=tt[ut];return K}function Xe(W){for(var tt=new i.Point(0,0),K=0,ut=W;K<ut.length;K+=1){var kt=ut[K];tt._add(kt)}return tt.div(W.length)}var br=500,wr=500,Hr=30,Jr=function(W){this.reset(),this.numTouches=W.numTouches};Jr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Jr.prototype.touchstart=function(W,tt,K){(this.centroid||K.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),K.length===this.numTouches&&(this.centroid=Xe(tt),this.touches=ze(K,tt)))},Jr.prototype.touchmove=function(W,tt,K){if(!(this.aborted||!this.centroid)){var ut=ze(K,tt);for(var kt in this.touches){var jt=this.touches[kt],Qt=ut[kt];(!Qt||Qt.dist(jt)>Hr)&&(this.aborted=!0)}}},Jr.prototype.touchend=function(W,tt,K){if((!this.centroid||W.timeStamp-this.startTime>wr)&&(this.aborted=!0),K.length===0){var ut=!this.aborted&&this.centroid;if(this.reset(),ut)return ut}};var Ar=function(W){this.singleTap=new Jr(W),this.numTaps=W.numTaps,this.reset()};Ar.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ar.prototype.touchstart=function(W,tt,K){this.singleTap.touchstart(W,tt,K)},Ar.prototype.touchmove=function(W,tt,K){this.singleTap.touchmove(W,tt,K)},Ar.prototype.touchend=function(W,tt,K){var ut=this.singleTap.touchend(W,tt,K);if(ut){var kt=W.timeStamp-this.lastTime<br,jt=!this.lastTap||this.lastTap.dist(ut)<Hr;if((!kt||!jt)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=ut,this.count===this.numTaps)return this.reset(),ut}};var zr=function(){this._zoomIn=new Ar({numTouches:1,numTaps:2}),this._zoomOut=new Ar({numTouches:2,numTaps:1}),this.reset()};zr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},zr.prototype.touchstart=function(W,tt,K){this._zoomIn.touchstart(W,tt,K),this._zoomOut.touchstart(W,tt,K)},zr.prototype.touchmove=function(W,tt,K){this._zoomIn.touchmove(W,tt,K),this._zoomOut.touchmove(W,tt,K)},zr.prototype.touchend=function(W,tt,K){var ut=this,kt=this._zoomIn.touchend(W,tt,K),jt=this._zoomOut.touchend(W,tt,K);if(kt)return this._active=!0,W.preventDefault(),setTimeout(function(){return ut.reset()},0),{cameraAnimation:function(Qt){return Qt.easeTo({duration:300,zoom:Qt.getZoom()+1,around:Qt.unproject(kt)},{originalEvent:W})}};if(jt)return this._active=!0,W.preventDefault(),setTimeout(function(){return ut.reset()},0),{cameraAnimation:function(Qt){return Qt.easeTo({duration:300,zoom:Qt.getZoom()-1,around:Qt.unproject(jt)},{originalEvent:W})}}},zr.prototype.touchcancel=function(){this.reset()},zr.prototype.enable=function(){this._enabled=!0},zr.prototype.disable=function(){this._enabled=!1,this.reset()},zr.prototype.isEnabled=function(){return this._enabled},zr.prototype.isActive=function(){return this._active};var Yr=0,Qr=2,en={};en[Yr]=1,en[Qr]=2;function Xr(W,tt){var K=en[tt];return W.buttons===void 0||(W.buttons&K)!==K}var On=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};On.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},On.prototype._correctButton=function(W,tt){return!1},On.prototype._move=function(W,tt){return{}},On.prototype.mousedown=function(W,tt){if(!this._lastPoint){var K=T.mouseButton(W);this._correctButton(W,K)&&(this._lastPoint=tt,this._eventButton=K)}},On.prototype.mousemoveWindow=function(W,tt){var K=this._lastPoint;if(K){if(W.preventDefault(),Xr(W,this._eventButton)){this.reset();return}if(!(!this._moved&&tt.dist(K)<this._clickTolerance))return this._moved=!0,this._lastPoint=tt,this._move(K,tt)}},On.prototype.mouseupWindow=function(W){if(this._lastPoint){var tt=T.mouseButton(W);tt===this._eventButton&&(this._moved&&T.suppressClick(),this.reset())}},On.prototype.enable=function(){this._enabled=!0},On.prototype.disable=function(){this._enabled=!1,this.reset()},On.prototype.isEnabled=function(){return this._enabled},On.prototype.isActive=function(){return this._active};var Hn=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.mousedown=function(K,ut){W.prototype.mousedown.call(this,K,ut),this._lastPoint&&(this._active=!0)},tt.prototype._correctButton=function(K,ut){return ut===Yr&&!K.ctrlKey},tt.prototype._move=function(K,ut){return{around:ut,panDelta:ut.sub(K)}},tt}(On),ti=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype._correctButton=function(K,ut){return ut===Yr&&K.ctrlKey||ut===Qr},tt.prototype._move=function(K,ut){var kt=.8,jt=(ut.x-K.x)*kt;if(jt)return this._active=!0,{bearingDelta:jt}},tt.prototype.contextmenu=function(K){K.preventDefault()},tt}(On),Yn=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype._correctButton=function(K,ut){return ut===Yr&&K.ctrlKey||ut===Qr},tt.prototype._move=function(K,ut){var kt=-.5,jt=(ut.y-K.y)*kt;if(jt)return this._active=!0,{pitchDelta:jt}},tt.prototype.contextmenu=function(K){K.preventDefault()},tt}(On),Kn=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};Kn.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new i.Point(0,0)},Kn.prototype.touchstart=function(W,tt,K){return this._calculateTransform(W,tt,K)},Kn.prototype.touchmove=function(W,tt,K){if(!(!this._active||K.length<this._minTouches))return W.preventDefault(),this._calculateTransform(W,tt,K)},Kn.prototype.touchend=function(W,tt,K){this._calculateTransform(W,tt,K),this._active&&K.length<this._minTouches&&this.reset()},Kn.prototype.touchcancel=function(){this.reset()},Kn.prototype._calculateTransform=function(W,tt,K){K.length>0&&(this._active=!0);var ut=ze(K,tt),kt=new i.Point(0,0),jt=new i.Point(0,0),Qt=0;for(var de in ut){var Ee=ut[de],Ye=this._touches[de];Ye&&(kt._add(Ee),jt._add(Ee.sub(Ye)),Qt++,ut[de]=Ee)}if(this._touches=ut,!(Qt<this._minTouches||!jt.mag())){var ar=jt.div(Qt);if(this._sum._add(ar),!(this._sum.mag()<this._clickTolerance)){var tr=kt.div(Qt);return{around:tr,panDelta:ar}}}},Kn.prototype.enable=function(){this._enabled=!0},Kn.prototype.disable=function(){this._enabled=!1,this.reset()},Kn.prototype.isEnabled=function(){return this._enabled},Kn.prototype.isActive=function(){return this._active};var ei=function(){this.reset()};ei.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ei.prototype._start=function(W){},ei.prototype._move=function(W,tt,K){return{}},ei.prototype.touchstart=function(W,tt,K){this._firstTwoTouches||K.length<2||(this._firstTwoTouches=[K[0].identifier,K[1].identifier],this._start([tt[0],tt[1]]))},ei.prototype.touchmove=function(W,tt,K){if(this._firstTwoTouches){W.preventDefault();var ut=this._firstTwoTouches,kt=ut[0],jt=ut[1],Qt=Ri(K,tt,kt),de=Ri(K,tt,jt);if(!(!Qt||!de)){var Ee=this._aroundCenter?null:Qt.add(de).div(2);return this._move([Qt,de],Ee,W)}}},ei.prototype.touchend=function(W,tt,K){if(this._firstTwoTouches){var ut=this._firstTwoTouches,kt=ut[0],jt=ut[1],Qt=Ri(K,tt,kt),de=Ri(K,tt,jt);Qt&&de||(this._active&&T.suppressClick(),this.reset())}},ei.prototype.touchcancel=function(){this.reset()},ei.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},ei.prototype.disable=function(){this._enabled=!1,this.reset()},ei.prototype.isEnabled=function(){return this._enabled},ei.prototype.isActive=function(){return this._active};function Ri(W,tt,K){for(var ut=0;ut<W.length;ut++)if(W[ut].identifier===K)return tt[ut]}var di=.1;function Ei(W,tt){return Math.log(W/tt)/Math.LN2}var Hi=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.reset=function(){W.prototype.reset.call(this),delete this._distance,delete this._startDistance},tt.prototype._start=function(K){this._startDistance=this._distance=K[0].dist(K[1])},tt.prototype._move=function(K,ut){var kt=this._distance;if(this._distance=K[0].dist(K[1]),!(!this._active&&Math.abs(Ei(this._distance,this._startDistance))<di))return this._active=!0,{zoomDelta:Ei(this._distance,kt),pinchAround:ut}},tt}(ei),_a=25;function Xi(W,tt){return W.angleWith(tt)*180/Math.PI}var Gn=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.reset=function(){W.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},tt.prototype._start=function(K){this._startVector=this._vector=K[0].sub(K[1]),this._minDiameter=K[0].dist(K[1])},tt.prototype._move=function(K,ut){var kt=this._vector;if(this._vector=K[0].sub(K[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Xi(this._vector,kt),pinchAround:ut}},tt.prototype._isBelowThreshold=function(K){this._minDiameter=Math.min(this._minDiameter,K.mag());var ut=Math.PI*this._minDiameter,kt=_a/ut*360,jt=Xi(K,this._startVector);return Math.abs(jt)<kt},tt}(ei);function Pi(W){return Math.abs(W.y)>Math.abs(W.x)}var pi=100,Fi=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.reset=function(){W.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},tt.prototype._start=function(K){this._lastPoints=K,Pi(K[0].sub(K[1]))&&(this._valid=!1)},tt.prototype._move=function(K,ut,kt){var jt=K[0].sub(this._lastPoints[0]),Qt=K[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(jt,Qt,kt.timeStamp),!!this._valid){this._lastPoints=K,this._active=!0;var de=(jt.y+Qt.y)/2,Ee=-.5;return{pitchDelta:de*Ee}}},tt.prototype.gestureBeginsVertically=function(K,ut,kt){if(this._valid!==void 0)return this._valid;var jt=2,Qt=K.mag()>=jt,de=ut.mag()>=jt;if(!(!Qt&&!de)){if(!Qt||!de)return this._firstMove===void 0&&(this._firstMove=kt),kt-this._firstMove<pi?void 0:!1;var Ee=K.y>0==ut.y>0;return Pi(K)&&Pi(ut)&&Ee}},tt}(ei),oa={panStep:100,bearingStep:15,pitchStep:10},Vi=function(){var W=oa;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep,this._rotationDisabled=!1};Vi.prototype.reset=function(){this._active=!1},Vi.prototype.keydown=function(W){var tt=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var K=0,ut=0,kt=0,jt=0,Qt=0;switch(W.keyCode){case 61:case 107:case 171:case 187:K=1;break;case 189:case 109:case 173:K=-1;break;case 37:W.shiftKey?ut=-1:(W.preventDefault(),jt=-1);break;case 39:W.shiftKey?ut=1:(W.preventDefault(),jt=1);break;case 38:W.shiftKey?kt=1:(W.preventDefault(),Qt=-1);break;case 40:W.shiftKey?kt=-1:(W.preventDefault(),Qt=1);break;default:return}return this._rotationDisabled&&(ut=0,kt=0),{cameraAnimation:function(de){var Ee=de.getZoom();de.easeTo({duration:300,easeId:"keyboardHandler",easing:Oa,zoom:K?Math.round(Ee)+K*(W.shiftKey?2:1):Ee,bearing:de.getBearing()+ut*tt._bearingStep,pitch:de.getPitch()+kt*tt._pitchStep,offset:[-jt*tt._panStep,-Qt*tt._panStep],center:de.getCenter()},{originalEvent:W})}}}},Vi.prototype.enable=function(){this._enabled=!0},Vi.prototype.disable=function(){this._enabled=!1,this.reset()},Vi.prototype.isEnabled=function(){return this._enabled},Vi.prototype.isActive=function(){return this._active},Vi.prototype.disableRotation=function(){this._rotationDisabled=!0},Vi.prototype.enableRotation=function(){this._rotationDisabled=!1};function Oa(W){return W*(2-W)}var Pa=4.000244140625,Da=1/100,sa=1/450,Va=2,Qn=function(W,tt){this._map=W,this._el=W.getCanvasContainer(),this._handler=tt,this._delta=0,this._defaultZoomRate=Da,this._wheelZoomRate=sa,i.bindAll(["_onTimeout"],this)};Qn.prototype.setZoomRate=function(W){this._defaultZoomRate=W},Qn.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},Qn.prototype.isEnabled=function(){return!!this._enabled},Qn.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Qn.prototype.isZooming=function(){return!!this._zooming},Qn.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},Qn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Qn.prototype.wheel=function(W){if(this.isEnabled()){var tt=W.deltaMode===i.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,K=i.browser.now(),ut=K-(this._lastWheelEventTime||0);this._lastWheelEventTime=K,tt!==0&&tt%Pa===0?this._type="wheel":tt!==0&&Math.abs(tt)<4?this._type="trackpad":ut>400?(this._type=null,this._lastValue=tt,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(ut*tt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,tt+=this._lastValue)),W.shiftKey&&tt&&(tt=tt/4),this._type&&(this._lastWheelEvent=W,this._delta-=tt,this._active||this._start(W)),W.preventDefault()}},Qn.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},Qn.prototype._start=function(W){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var tt=T.mousePos(this._el,W);this._around=i.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(tt)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Qn.prototype.renderFrame=function(){var W=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var tt=this._map.transform;if(this._delta!==0){var K=this._type==="wheel"&&Math.abs(this._delta)>Pa?this._wheelZoomRate:this._defaultZoomRate,ut=Va/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&ut!==0&&(ut=1/ut);var kt=typeof this._targetZoom=="number"?tt.zoomScale(this._targetZoom):tt.scale;this._targetZoom=Math.min(tt.maxZoom,Math.max(tt.minZoom,tt.scaleZoom(kt*ut))),this._type==="wheel"&&(this._startZoom=tt.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var jt=typeof this._targetZoom=="number"?this._targetZoom:tt.zoom,Qt=this._startZoom,de=this._easing,Ee=!1,Ye;if(this._type==="wheel"&&Qt&&de){var ar=Math.min((i.browser.now()-this._lastWheelEventTime)/200,1),tr=de(ar);Ye=i.number(Qt,jt,tr),ar<1?this._frameId||(this._frameId=!0):Ee=!0}else Ye=jt,Ee=!0;return this._active=!0,Ee&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ee,zoomDelta:Ye-tt.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Qn.prototype._smoothOutEasing=function(W){var tt=i.ease;if(this._prevEase){var K=this._prevEase,ut=(i.browser.now()-K.start)/K.duration,kt=K.easing(ut+.01)-K.easing(ut),jt=.27/Math.sqrt(kt*kt+1e-4)*.01,Qt=Math.sqrt(.27*.27-jt*jt);tt=i.bezier(jt,Qt,.25,1)}return this._prevEase={start:i.browser.now(),duration:W,easing:tt},tt},Qn.prototype.reset=function(){this._active=!1};var vi=function(W,tt){this._clickZoom=W,this._tapZoom=tt};vi.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},vi.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},vi.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},vi.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ro=function(){this.reset()};ro.prototype.reset=function(){this._active=!1},ro.prototype.dblclick=function(W,tt){return W.preventDefault(),{cameraAnimation:function(K){K.easeTo({duration:300,zoom:K.getZoom()+(W.shiftKey?-1:1),around:K.unproject(tt)},{originalEvent:W})}}},ro.prototype.enable=function(){this._enabled=!0},ro.prototype.disable=function(){this._enabled=!1,this.reset()},ro.prototype.isEnabled=function(){return this._enabled},ro.prototype.isActive=function(){return this._active};var uo=function(){this._tap=new Ar({numTouches:1,numTaps:1}),this.reset()};uo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},uo.prototype.touchstart=function(W,tt,K){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>br&&this.reset(),this._tapTime?K.length>0&&(this._swipePoint=tt[0],this._swipeTouch=K[0].identifier):this._tap.touchstart(W,tt,K))},uo.prototype.touchmove=function(W,tt,K){if(!this._tapTime)this._tap.touchmove(W,tt,K);else if(this._swipePoint){if(K[0].identifier!==this._swipeTouch)return;var ut=tt[0],kt=ut.y-this._swipePoint.y;return this._swipePoint=ut,W.preventDefault(),this._active=!0,{zoomDelta:kt/128}}},uo.prototype.touchend=function(W,tt,K){if(this._tapTime)this._swipePoint&&K.length===0&&this.reset();else{var ut=this._tap.touchend(W,tt,K);ut&&(this._tapTime=W.timeStamp)}},uo.prototype.touchcancel=function(){this.reset()},uo.prototype.enable=function(){this._enabled=!0},uo.prototype.disable=function(){this._enabled=!1,this.reset()},uo.prototype.isEnabled=function(){return this._enabled},uo.prototype.isActive=function(){return this._active};var Ba=function(W,tt,K){this._el=W,this._mousePan=tt,this._touchPan=K};Ba.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ba.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ba.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ba.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Zi=function(W,tt,K){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=tt,this._mousePitch=K};Zi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Zi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Zi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Zi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Sa=function(W,tt,K,ut){this._el=W,this._touchZoom=tt,this._touchRotate=K,this._tapDragZoom=ut,this._rotationDisabled=!1,this._enabled=!0};Sa.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Sa.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Sa.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Sa.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Sa.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Sa.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var wa=function(W){return W.zoom||W.drag||W.pitch||W.rotate},zo=function(W){function tt(){W.apply(this,arguments)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt}(i.Event);function Wo(W){return W.panDelta&&W.panDelta.mag()||W.zoomDelta||W.bearingDelta||W.pitchDelta}var ha=function(W,tt){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new lt(W),this._bearingSnap=tt.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(tt),i.bindAll(["handleEvent","handleWindowEvent"],this);var K=this._el;this._listeners=[[K,"touchstart",{passive:!0}],[K,"touchmove",{passive:!1}],[K,"touchend",void 0],[K,"touchcancel",void 0],[K,"mousedown",void 0],[K,"mousemove",void 0],[K,"mouseup",void 0],[i.window.document,"mousemove",{capture:!0}],[i.window.document,"mouseup",void 0],[K,"mouseover",void 0],[K,"mouseout",void 0],[K,"dblclick",void 0],[K,"click",void 0],[K,"keydown",{capture:!1}],[K,"keyup",void 0],[K,"wheel",{passive:!1}],[K,"contextmenu",void 0],[i.window,"blur",void 0]];for(var ut=0,kt=this._listeners;ut<kt.length;ut+=1){var jt=kt[ut],Qt=jt[0],de=jt[1],Ee=jt[2];T.addEventListener(Qt,de,Qt===i.window.document?this.handleWindowEvent:this.handleEvent,Ee)}};ha.prototype.destroy=function(){for(var W=0,tt=this._listeners;W<tt.length;W+=1){var K=tt[W],ut=K[0],kt=K[1],jt=K[2];T.removeEventListener(ut,kt,ut===i.window.document?this.handleWindowEvent:this.handleEvent,jt)}},ha.prototype._addDefaultHandlers=function(W){var tt=this._map,K=tt.getCanvasContainer();this._add("mapEvent",new xe(tt,W));var ut=tt.boxZoom=new Ie(tt,W);this._add("boxZoom",ut);var kt=new zr,jt=new ro;tt.doubleClickZoom=new vi(jt,kt),this._add("tapZoom",kt),this._add("clickZoom",jt);var Qt=new uo;this._add("tapDragZoom",Qt);var de=tt.touchPitch=new Fi;this._add("touchPitch",de);var Ee=new ti(W),Ye=new Yn(W);tt.dragRotate=new Zi(W,Ee,Ye),this._add("mouseRotate",Ee,["mousePitch"]),this._add("mousePitch",Ye,["mouseRotate"]);var ar=new Hn(W),tr=new Kn(W);tt.dragPan=new Ba(K,ar,tr),this._add("mousePan",ar),this._add("touchPan",tr,["touchZoom","touchRotate"]);var vr=new Gn,Lr=new Hi;tt.touchZoomRotate=new Sa(K,Lr,vr,Qt),this._add("touchRotate",vr,["touchPan","touchZoom"]),this._add("touchZoom",Lr,["touchPan","touchRotate"]);var Wr=tt.scrollZoom=new Qn(tt,this);this._add("scrollZoom",Wr,["mousePan"]);var Fr=tt.keyboard=new Vi;this._add("keyboard",Fr),this._add("blockableMapEvent",new me(tt));for(var Br=0,Kr=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Br<Kr.length;Br+=1){var cn=Kr[Br];W.interactive&&W[cn]&&tt[cn].enable(W[cn])}},ha.prototype._add=function(W,tt,K){this._handlers.push({handlerName:W,handler:tt,allowed:K}),this._handlersById[W]=tt},ha.prototype.stop=function(W){if(!this._updatingCamera){for(var tt=0,K=this._handlers;tt<K.length;tt+=1){var ut=K[tt],kt=ut.handler;kt.reset()}this._inertia.clear(),this._fireEvents({},{},W),this._changes=[]}},ha.prototype.isActive=function(){for(var W=0,tt=this._handlers;W<tt.length;W+=1){var K=tt[W],ut=K.handler;if(ut.isActive())return!0}return!1},ha.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ha.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ha.prototype.isMoving=function(){return!!wa(this._eventsInProgress)||this.isZooming()},ha.prototype._blockedByActive=function(W,tt,K){for(var ut in W)if(ut!==K&&(!tt||tt.indexOf(ut)<0))return!0;return!1},ha.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},ha.prototype._getMapTouches=function(W){for(var tt=[],K=0,ut=W;K<ut.length;K+=1){var kt=ut[K],jt=kt.target;this._el.contains(jt)&&tt.push(kt)}return tt},ha.prototype.handleEvent=function(W,tt){if(W.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var K=W.type==="renderFrame"?void 0:W,ut={needsRenderFrame:!1},kt={},jt={},Qt=W.touches?this._getMapTouches(W.touches):void 0,de=Qt?T.touchPos(this._el,Qt):T.mousePos(this._el,W),Ee=0,Ye=this._handlers;Ee<Ye.length;Ee+=1){var ar=Ye[Ee],tr=ar.handlerName,vr=ar.handler,Lr=ar.allowed;if(vr.isEnabled()){var Wr=void 0;this._blockedByActive(jt,Lr,tr)?vr.reset():vr[tt||W.type]&&(Wr=vr[tt||W.type](W,de,Qt),this.mergeHandlerResult(ut,kt,Wr,tr,K),Wr&&Wr.needsRenderFrame&&this._triggerRenderFrame()),(Wr||vr.isActive())&&(jt[tr]=vr)}}var Fr={};for(var Br in this._previousActiveHandlers)jt[Br]||(Fr[Br]=K);this._previousActiveHandlers=jt,(Object.keys(Fr).length||Wo(ut))&&(this._changes.push([ut,kt,Fr]),this._triggerRenderFrame()),(Object.keys(jt).length||Wo(ut))&&this._map._stop(!0),this._updatingCamera=!1;var Kr=ut.cameraAnimation;Kr&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Kr(this._map))},ha.prototype.mergeHandlerResult=function(W,tt,K,ut,kt){if(K){i.extend(W,K);var jt={handlerName:ut,originalEvent:K.originalEvent||kt};K.zoomDelta!==void 0&&(tt.zoom=jt),K.panDelta!==void 0&&(tt.drag=jt),K.pitchDelta!==void 0&&(tt.pitch=jt),K.bearingDelta!==void 0&&(tt.rotate=jt)}},ha.prototype._applyChanges=function(){for(var W={},tt={},K={},ut=0,kt=this._changes;ut<kt.length;ut+=1){var jt=kt[ut],Qt=jt[0],de=jt[1],Ee=jt[2];Qt.panDelta&&(W.panDelta=(W.panDelta||new i.Point(0,0))._add(Qt.panDelta)),Qt.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Qt.zoomDelta),Qt.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Qt.bearingDelta),Qt.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Qt.pitchDelta),Qt.around!==void 0&&(W.around=Qt.around),Qt.pinchAround!==void 0&&(W.pinchAround=Qt.pinchAround),Qt.noInertia&&(W.noInertia=Qt.noInertia),i.extend(tt,de),i.extend(K,Ee)}this._updateMapTransform(W,tt,K),this._changes=[]},ha.prototype._updateMapTransform=function(W,tt,K){var ut=this._map,kt=ut.transform;if(!Wo(W))return this._fireEvents(tt,K,!0);var jt=W.panDelta,Qt=W.zoomDelta,de=W.bearingDelta,Ee=W.pitchDelta,Ye=W.around,ar=W.pinchAround;ar!==void 0&&(Ye=ar),ut._stop(!0),Ye=Ye||ut.transform.centerPoint;var tr=kt.pointLocation(jt?Ye.sub(jt):Ye);de&&(kt.bearing+=de),Ee&&(kt.pitch+=Ee),Qt&&(kt.zoom+=Qt),kt.setLocationAtPoint(tr,Ye),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(tt,K,!0)},ha.prototype._fireEvents=function(W,tt,K){var ut=this,kt=wa(this._eventsInProgress),jt=wa(W),Qt={};for(var de in W){var Ee=W[de],Ye=Ee.originalEvent;this._eventsInProgress[de]||(Qt[de+"start"]=Ye),this._eventsInProgress[de]=W[de]}!kt&&jt&&this._fireEvent("movestart",jt.originalEvent);for(var ar in Qt)this._fireEvent(ar,Qt[ar]);jt&&this._fireEvent("move",jt.originalEvent);for(var tr in W){var vr=W[tr],Lr=vr.originalEvent;this._fireEvent(tr,Lr)}var Wr={},Fr;for(var Br in this._eventsInProgress){var Kr=this._eventsInProgress[Br],cn=Kr.handlerName,Fn=Kr.originalEvent;this._handlersById[cn].isActive()||(delete this._eventsInProgress[Br],Fr=tt[cn]||Fn,Wr[Br+"end"]=Fr)}for(var Pn in Wr)this._fireEvent(Pn,Wr[Pn]);var Dn=wa(this._eventsInProgress);if(K&&(kt||jt)&&!Dn){this._updatingCamera=!0;var Nn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Bn=function(Vn){return Vn!==0&&-ut._bearingSnap<Vn&&Vn<ut._bearingSnap};Nn?(Bn(Nn.bearing||this._map.getBearing())&&(Nn.bearing=0),this._map.easeTo(Nn,{originalEvent:Fr})):(this._map.fire(new i.Event("moveend",{originalEvent:Fr})),Bn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ha.prototype._fireEvent=function(W,tt){this._map.fire(new i.Event(W,tt?{originalEvent:tt}:{}))},ha.prototype._requestFrame=function(){var W=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(tt){delete W._frameId,W.handleEvent(new zo("renderFrame",{timeStamp:tt})),W._applyChanges()})},ha.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Gs=function(W){function tt(K,ut){W.call(this),this._moving=!1,this._zooming=!1,this.transform=K,this._bearingSnap=ut.bearingSnap,i.bindAll(["_renderFrameCallback"],this)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.getCenter=function(){return new i.LngLat(this.transform.center.lng,this.transform.center.lat)},tt.prototype.setCenter=function(K,ut){return this.jumpTo({center:K},ut)},tt.prototype.panBy=function(K,ut,kt){return K=i.Point.convert(K).mult(-1),this.panTo(this.transform.center,i.extend({offset:K},ut),kt)},tt.prototype.panTo=function(K,ut,kt){return this.easeTo(i.extend({center:K},ut),kt)},tt.prototype.getZoom=function(){return this.transform.zoom},tt.prototype.setZoom=function(K,ut){return this.jumpTo({zoom:K},ut),this},tt.prototype.zoomTo=function(K,ut,kt){return this.easeTo(i.extend({zoom:K},ut),kt)},tt.prototype.zoomIn=function(K,ut){return this.zoomTo(this.getZoom()+1,K,ut),this},tt.prototype.zoomOut=function(K,ut){return this.zoomTo(this.getZoom()-1,K,ut),this},tt.prototype.getBearing=function(){return this.transform.bearing},tt.prototype.setBearing=function(K,ut){return this.jumpTo({bearing:K},ut),this},tt.prototype.getPadding=function(){return this.transform.padding},tt.prototype.setPadding=function(K,ut){return this.jumpTo({padding:K},ut),this},tt.prototype.rotateTo=function(K,ut,kt){return this.easeTo(i.extend({bearing:K},ut),kt)},tt.prototype.resetNorth=function(K,ut){return this.rotateTo(0,i.extend({duration:1e3},K),ut),this},tt.prototype.resetNorthPitch=function(K,ut){return this.easeTo(i.extend({bearing:0,pitch:0,duration:1e3},K),ut),this},tt.prototype.snapToNorth=function(K,ut){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(K,ut):this},tt.prototype.getPitch=function(){return this.transform.pitch},tt.prototype.setPitch=function(K,ut){return this.jumpTo({pitch:K},ut),this},tt.prototype.cameraForBounds=function(K,ut){K=i.LngLatBounds.convert(K);var kt=ut&&ut.bearing||0;return this._cameraForBoxAndBearing(K.getNorthWest(),K.getSouthEast(),kt,ut)},tt.prototype._cameraForBoxAndBearing=function(K,ut,kt,jt){var Qt={top:0,bottom:0,right:0,left:0};if(jt=i.extend({padding:Qt,offset:[0,0],maxZoom:this.transform.maxZoom},jt),typeof jt.padding=="number"){var de=jt.padding;jt.padding={top:de,bottom:de,right:de,left:de}}jt.padding=i.extend(Qt,jt.padding);var Ee=this.transform,Ye=Ee.padding,ar=Ee.project(i.LngLat.convert(K)),tr=Ee.project(i.LngLat.convert(ut)),vr=ar.rotate(-kt*Math.PI/180),Lr=tr.rotate(-kt*Math.PI/180),Wr=new i.Point(Math.max(vr.x,Lr.x),Math.max(vr.y,Lr.y)),Fr=new i.Point(Math.min(vr.x,Lr.x),Math.min(vr.y,Lr.y)),Br=Wr.sub(Fr),Kr=(Ee.width-(Ye.left+Ye.right+jt.padding.left+jt.padding.right))/Br.x,cn=(Ee.height-(Ye.top+Ye.bottom+jt.padding.top+jt.padding.bottom))/Br.y;if(cn<0||Kr<0){i.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Fn=Math.min(Ee.scaleZoom(Ee.scale*Math.min(Kr,cn)),jt.maxZoom),Pn=typeof jt.offset.x=="number"?new i.Point(jt.offset.x,jt.offset.y):i.Point.convert(jt.offset),Dn=(jt.padding.left-jt.padding.right)/2,Nn=(jt.padding.top-jt.padding.bottom)/2,Bn=new i.Point(Dn,Nn),Vn=Bn.rotate(kt*Math.PI/180),Zn=Pn.add(Vn),ci=Zn.mult(Ee.scale/Ee.zoomScale(Fn)),si=Ee.unproject(ar.add(tr).div(2).sub(ci));return{center:si,zoom:Fn,bearing:kt}},tt.prototype.fitBounds=function(K,ut,kt){return this._fitInternal(this.cameraForBounds(K,ut),ut,kt)},tt.prototype.fitScreenCoordinates=function(K,ut,kt,jt,Qt){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.Point.convert(K)),this.transform.pointLocation(i.Point.convert(ut)),kt,jt),jt,Qt)},tt.prototype._fitInternal=function(K,ut,kt){return K?(ut=i.extend(K,ut),delete ut.padding,ut.linear?this.easeTo(ut,kt):this.flyTo(ut,kt)):this},tt.prototype.jumpTo=function(K,ut){this.stop();var kt=this.transform,jt=!1,Qt=!1,de=!1;return"zoom"in K&&kt.zoom!==+K.zoom&&(jt=!0,kt.zoom=+K.zoom),K.center!==void 0&&(kt.center=i.LngLat.convert(K.center)),"bearing"in K&&kt.bearing!==+K.bearing&&(Qt=!0,kt.bearing=+K.bearing),"pitch"in K&&kt.pitch!==+K.pitch&&(de=!0,kt.pitch=+K.pitch),K.padding!=null&&!kt.isPaddingEqual(K.padding)&&(kt.padding=K.padding),this.fire(new i.Event("movestart",ut)).fire(new i.Event("move",ut)),jt&&this.fire(new i.Event("zoomstart",ut)).fire(new i.Event("zoom",ut)).fire(new i.Event("zoomend",ut)),Qt&&this.fire(new i.Event("rotatestart",ut)).fire(new i.Event("rotate",ut)).fire(new i.Event("rotateend",ut)),de&&this.fire(new i.Event("pitchstart",ut)).fire(new i.Event("pitch",ut)).fire(new i.Event("pitchend",ut)),this.fire(new i.Event("moveend",ut))},tt.prototype.easeTo=function(K,ut){var kt=this;this._stop(!1,K.easeId),K=i.extend({offset:[0,0],duration:500,easing:i.ease},K),(K.animate===!1||!K.essential&&i.browser.prefersReducedMotion)&&(K.duration=0);var jt=this.transform,Qt=this.getZoom(),de=this.getBearing(),Ee=this.getPitch(),Ye=this.getPadding(),ar="zoom"in K?+K.zoom:Qt,tr="bearing"in K?this._normalizeBearing(K.bearing,de):de,vr="pitch"in K?+K.pitch:Ee,Lr="padding"in K?K.padding:jt.padding,Wr=i.Point.convert(K.offset),Fr=jt.centerPoint.add(Wr),Br=jt.pointLocation(Fr),Kr=i.LngLat.convert(K.center||Br);this._normalizeCenter(Kr);var cn=jt.project(Br),Fn=jt.project(Kr).sub(cn),Pn=jt.zoomScale(ar-Qt),Dn,Nn;K.around&&(Dn=i.LngLat.convert(K.around),Nn=jt.locationPoint(Dn));var Bn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ar!==Qt,this._rotating=this._rotating||de!==tr,this._pitching=this._pitching||vr!==Ee,this._padding=!jt.isPaddingEqual(Lr),this._easeId=K.easeId,this._prepareEase(ut,K.noMoveStart,Bn),this._ease(function(Vn){if(kt._zooming&&(jt.zoom=i.number(Qt,ar,Vn)),kt._rotating&&(jt.bearing=i.number(de,tr,Vn)),kt._pitching&&(jt.pitch=i.number(Ee,vr,Vn)),kt._padding&&(jt.interpolatePadding(Ye,Lr,Vn),Fr=jt.centerPoint.add(Wr)),Dn)jt.setLocationAtPoint(Dn,Nn);else{var Zn=jt.zoomScale(jt.zoom-Qt),ci=ar>Qt?Math.min(2,Pn):Math.max(.5,Pn),si=Math.pow(ci,1-Vn),li=jt.unproject(cn.add(Fn.mult(Vn*si)).mult(Zn));jt.setLocationAtPoint(jt.renderWorldCopies?li.wrap():li,Fr)}kt._fireMoveEvents(ut)},function(Vn){kt._afterEase(ut,Vn)},K),this},tt.prototype._prepareEase=function(K,ut,kt){kt===void 0&&(kt={}),this._moving=!0,!ut&&!kt.moving&&this.fire(new i.Event("movestart",K)),this._zooming&&!kt.zooming&&this.fire(new i.Event("zoomstart",K)),this._rotating&&!kt.rotating&&this.fire(new i.Event("rotatestart",K)),this._pitching&&!kt.pitching&&this.fire(new i.Event("pitchstart",K))},tt.prototype._fireMoveEvents=function(K){this.fire(new i.Event("move",K)),this._zooming&&this.fire(new i.Event("zoom",K)),this._rotating&&this.fire(new i.Event("rotate",K)),this._pitching&&this.fire(new i.Event("pitch",K))},tt.prototype._afterEase=function(K,ut){if(!(this._easeId&&ut&&this._easeId===ut)){delete this._easeId;var kt=this._zooming,jt=this._rotating,Qt=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,kt&&this.fire(new i.Event("zoomend",K)),jt&&this.fire(new i.Event("rotateend",K)),Qt&&this.fire(new i.Event("pitchend",K)),this.fire(new i.Event("moveend",K))}},tt.prototype.flyTo=function(K,ut){var kt=this;if(!K.essential&&i.browser.prefersReducedMotion){var jt=i.pick(K,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,ut)}this.stop(),K=i.extend({offset:[0,0],speed:1.2,curve:1.42,easing:i.ease},K);var Qt=this.transform,de=this.getZoom(),Ee=this.getBearing(),Ye=this.getPitch(),ar=this.getPadding(),tr="zoom"in K?i.clamp(+K.zoom,Qt.minZoom,Qt.maxZoom):de,vr="bearing"in K?this._normalizeBearing(K.bearing,Ee):Ee,Lr="pitch"in K?+K.pitch:Ye,Wr="padding"in K?K.padding:Qt.padding,Fr=Qt.zoomScale(tr-de),Br=i.Point.convert(K.offset),Kr=Qt.centerPoint.add(Br),cn=Qt.pointLocation(Kr),Fn=i.LngLat.convert(K.center||cn);this._normalizeCenter(Fn);var Pn=Qt.project(cn),Dn=Qt.project(Fn).sub(Pn),Nn=K.curve,Bn=Math.max(Qt.width,Qt.height),Vn=Bn/Fr,Zn=Dn.mag();if("minZoom"in K){var ci=i.clamp(Math.min(K.minZoom,de,tr),Qt.minZoom,Qt.maxZoom),si=Bn/Qt.zoomScale(ci-de);Nn=Math.sqrt(si/Zn*2)}var li=Nn*Nn;function Ii(Ti){var Ni=(Vn*Vn-Bn*Bn+(Ti?-1:1)*li*li*Zn*Zn)/(2*(Ti?Vn:Bn)*li*Zn);return Math.log(Math.sqrt(Ni*Ni+1)-Ni)}function la(Ti){return(Math.exp(Ti)-Math.exp(-Ti))/2}function yi(Ti){return(Math.exp(Ti)+Math.exp(-Ti))/2}function ki(Ti){return la(Ti)/yi(Ti)}var Oi=Ii(0),Wi=function(Ti){return yi(Oi)/yi(Oi+Nn*Ti)},Qi=function(Ti){return Bn*((yi(Oi)*ki(Oi+Nn*Ti)-la(Oi))/li)/Zn},Ki=(Ii(1)-Oi)/Nn;if(Math.abs(Zn)<1e-6||!isFinite(Ki)){if(Math.abs(Bn-Vn)<1e-6)return this.easeTo(K,ut);var Bi=Vn<Bn?-1:1;Ki=Math.abs(Math.log(Vn/Bn))/Nn,Qi=function(){return 0},Wi=function(Ti){return Math.exp(Bi*Nn*Ti)}}if("duration"in K)K.duration=+K.duration;else{var ia="screenSpeed"in K?+K.screenSpeed/Nn:+K.speed;K.duration=1e3*Ki/ia}return K.maxDuration&&K.duration>K.maxDuration&&(K.duration=0),this._zooming=!0,this._rotating=Ee!==vr,this._pitching=Lr!==Ye,this._padding=!Qt.isPaddingEqual(Wr),this._prepareEase(ut,!1),this._ease(function(Ti){var Ni=Ti*Ki,Aa=1/Wi(Ni);Qt.zoom=Ti===1?tr:de+Qt.scaleZoom(Aa),kt._rotating&&(Qt.bearing=i.number(Ee,vr,Ti)),kt._pitching&&(Qt.pitch=i.number(Ye,Lr,Ti)),kt._padding&&(Qt.interpolatePadding(ar,Wr,Ti),Kr=Qt.centerPoint.add(Br));var ja=Ti===1?Fn:Qt.unproject(Pn.add(Dn.mult(Qi(Ni))).mult(Aa));Qt.setLocationAtPoint(Qt.renderWorldCopies?ja.wrap():ja,Kr),kt._fireMoveEvents(ut)},function(){return kt._afterEase(ut)},K),this},tt.prototype.isEasing=function(){return!!this._easeFrameId},tt.prototype.stop=function(){return this._stop()},tt.prototype._stop=function(K,ut){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var kt=this._onEaseEnd;delete this._onEaseEnd,kt.call(this,ut)}if(!K){var jt=this.handlers;jt&&jt.stop(!1)}return this},tt.prototype._ease=function(K,ut,kt){kt.animate===!1||kt.duration===0?(K(1),ut()):(this._easeStart=i.browser.now(),this._easeOptions=kt,this._onEaseFrame=K,this._onEaseEnd=ut,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},tt.prototype._renderFrameCallback=function(){var K=Math.min((i.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(K)),K<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},tt.prototype._normalizeBearing=function(K,ut){K=i.wrap(K,-180,180);var kt=Math.abs(K-ut);return Math.abs(K-360-ut)<kt&&(K-=360),Math.abs(K+360-ut)<kt&&(K+=360),K},tt.prototype._normalizeCenter=function(K){var ut=this.transform;if(!(!ut.renderWorldCopies||ut.lngRange)){var kt=K.lng-ut.center.lng;K.lng+=kt>180?-360:kt<-180?360:0}},tt}(i.Evented),Di=function(W){W===void 0&&(W={}),this.options=W,i.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Di.prototype.getDefaultPosition=function(){return"bottom-right"},Di.prototype.onAdd=function(W){var tt=this.options&&this.options.compact;return this._map=W,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=T.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=T.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),tt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),tt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Di.prototype.onRemove=function(){T.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Di.prototype._setElementTitle=function(W,tt){var K=this._map._getUIString("AttributionControl."+tt);W.title=K,W.setAttribute("aria-label",K)},Di.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Di.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var tt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.config.ACCESS_TOKEN}];if(W){var K=tt.reduce(function(ut,kt,jt){return kt.value&&(ut+=kt.key+"="+kt.value+(jt<tt.length-1?"&":"")),ut},"?");W.href=i.config.FEEDBACK_URL+"/"+K+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow",this._setElementTitle(W,"MapFeedback")}},Di.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.sourceDataType==="visibility"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Di.prototype._updateAttributions=function(){if(this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(de){return typeof de!="string"?"":de})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var tt=this._map.style.stylesheet;this.styleOwner=tt.owner,this.styleId=tt.id}var K=this._map.style.sourceCaches;for(var ut in K){var kt=K[ut];if(kt.used){var jt=kt.getSource();jt.attribution&&W.indexOf(jt.attribution)<0&&W.push(jt.attribution)}}W.sort(function(de,Ee){return de.length-Ee.length}),W=W.filter(function(de,Ee){for(var Ye=Ee+1;Ye<W.length;Ye++)if(W[Ye].indexOf(de)>=0)return!1;return!0});var Qt=W.join(" | ");Qt!==this._attribHTML&&(this._attribHTML=Qt,W.length?(this._innerContainer.innerHTML=Qt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Di.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var pa=function(){i.bindAll(["_updateLogo"],this),i.bindAll(["_updateCompact"],this)};pa.prototype.onAdd=function(W){this._map=W,this._container=T.create("div","mapboxgl-ctrl");var tt=T.create("a","mapboxgl-ctrl-logo");return tt.target="_blank",tt.rel="noopener nofollow",tt.href="https://www.mapbox.com/",tt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),tt.setAttribute("rel","noopener nofollow"),this._container.appendChild(tt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},pa.prototype.onRemove=function(){T.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},pa.prototype.getDefaultPosition=function(){return"bottom-left"},pa.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},pa.prototype._logoRequired=function(){if(this._map.style){var W=this._map.style.sourceCaches;for(var tt in W){var K=W[tt].getSource();if(K.mapbox_logo)return!0}return!1}},pa.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var tt=W[0];this._map.getCanvasContainer().offsetWidth<250?tt.classList.add("mapboxgl-compact"):tt.classList.remove("mapboxgl-compact")}};var pc=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};pc.prototype.add=function(W){var tt=++this._id,K=this._queue;return K.push({callback:W,id:tt,cancelled:!1}),tt},pc.prototype.remove=function(W){for(var tt=this._currentlyRunning,K=tt?this._queue.concat(tt):this._queue,ut=0,kt=K;ut<kt.length;ut+=1){var jt=kt[ut];if(jt.id===W){jt.cancelled=!0;return}}},pc.prototype.run=function(W){W===void 0&&(W=0);var tt=this._currentlyRunning=this._queue;this._queue=[];for(var K=0,ut=tt;K<ut.length;K+=1){var kt=ut[K];if(!kt.cancelled&&(kt.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},pc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var bf={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},su=i.window.HTMLImageElement,Kc=i.window.HTMLElement,Fl=i.window.ImageBitmap,Fu=-2,Du=22,ko=0,Dl=60,Jc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Fu,maxZoom:Du,minPitch:ko,maxPitch:Dl,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},$c=function(W){function tt(ut){var kt=this;if(ut=i.extend({},Jc,ut),ut.minZoom!=null&&ut.maxZoom!=null&&ut.minZoom>ut.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(ut.minPitch!=null&&ut.maxPitch!=null&&ut.minPitch>ut.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(ut.minPitch!=null&&ut.minPitch<ko)throw new Error("minPitch must be greater than or equal to "+ko);if(ut.maxPitch!=null&&ut.maxPitch>Dl)throw new Error("maxPitch must be less than or equal to "+Dl);var jt=new kn(ut.minZoom,ut.maxZoom,ut.minPitch,ut.maxPitch,ut.renderWorldCopies);if(W.call(this,jt,ut),this._interactive=ut.interactive,this._maxTileCacheSize=ut.maxTileCacheSize,this._failIfMajorPerformanceCaveat=ut.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=ut.preserveDrawingBuffer,this._antialias=ut.antialias,this._trackResize=ut.trackResize,this._bearingSnap=ut.bearingSnap,this._refreshExpiredTiles=ut.refreshExpiredTiles,this._fadeDuration=ut.fadeDuration,this._crossSourceCollisions=ut.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=ut.collectResourceTiming,this._renderTaskQueue=new pc,this._controls=[],this._mapId=i.uniqueId(),this._locale=i.extend({},bf,ut.locale),this._clickTolerance=ut.clickTolerance,this._requestManager=new i.RequestManager(ut.transformRequest,ut.accessToken),typeof ut.container=="string"){if(this._container=i.window.document.getElementById(ut.container),!this._container)throw new Error("Container '"+ut.container+"' not found.")}else if(ut.container instanceof Kc)this._container=ut.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(ut.maxBounds&&this.setMaxBounds(ut.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return kt._update(!1)}),this.on("moveend",function(){return kt._update(!1)}),this.on("zoom",function(){return kt._update(!0)}),typeof i.window<"u"&&(i.window.addEventListener("online",this._onWindowOnline,!1),i.window.addEventListener("resize",this._onWindowResize,!1),i.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ha(this,ut);var Qt=typeof ut.hash=="string"&&ut.hash||void 0;this._hash=ut.hash&&new Ai(Qt).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:ut.center,zoom:ut.zoom,bearing:ut.bearing,pitch:ut.pitch}),ut.bounds&&(this.resize(),this.fitBounds(ut.bounds,i.extend({},ut.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=ut.localIdeographFontFamily,ut.style&&this.setStyle(ut.style,{localIdeographFontFamily:ut.localIdeographFontFamily}),ut.attributionControl&&this.addControl(new Di({customAttribution:ut.customAttribution})),this.addControl(new pa,ut.logoPosition),this.on("style.load",function(){kt.transform.unmodified&&kt.jumpTo(kt.style.stylesheet)}),this.on("data",function(de){kt._update(de.dataType==="style"),kt.fire(new i.Event(de.dataType+"data",de))}),this.on("dataloading",function(de){kt.fire(new i.Event(de.dataType+"dataloading",de))})}W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt;var K={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return tt.prototype._getMapId=function(){return this._mapId},tt.prototype.addControl=function(ut,kt){if(kt===void 0&&(ut.getDefaultPosition?kt=ut.getDefaultPosition():kt="top-right"),!ut||!ut.onAdd)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var jt=ut.onAdd(this);this._controls.push(ut);var Qt=this._controlPositions[kt];return kt.indexOf("bottom")!==-1?Qt.insertBefore(jt,Qt.firstChild):Qt.appendChild(jt),this},tt.prototype.removeControl=function(ut){if(!ut||!ut.onRemove)return this.fire(new i.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var kt=this._controls.indexOf(ut);return kt>-1&&this._controls.splice(kt,1),ut.onRemove(this),this},tt.prototype.hasControl=function(ut){return this._controls.indexOf(ut)>-1},tt.prototype.resize=function(ut){var kt=this._containerDimensions(),jt=kt[0],Qt=kt[1];this._resizeCanvas(jt,Qt),this.transform.resize(jt,Qt),this.painter.resize(jt,Qt);var de=!this._moving;return de&&(this.stop(),this.fire(new i.Event("movestart",ut)).fire(new i.Event("move",ut))),this.fire(new i.Event("resize",ut)),de&&this.fire(new i.Event("moveend",ut)),this},tt.prototype.getBounds=function(){return this.transform.getBounds()},tt.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},tt.prototype.setMaxBounds=function(ut){return this.transform.setMaxBounds(i.LngLatBounds.convert(ut)),this._update()},tt.prototype.setMinZoom=function(ut){if(ut=ut??Fu,ut>=Fu&&ut<=this.transform.maxZoom)return this.transform.minZoom=ut,this._update(),this.getZoom()<ut&&this.setZoom(ut),this;throw new Error("minZoom must be between "+Fu+" and the current maxZoom, inclusive")},tt.prototype.getMinZoom=function(){return this.transform.minZoom},tt.prototype.setMaxZoom=function(ut){if(ut=ut??Du,ut>=this.transform.minZoom)return this.transform.maxZoom=ut,this._update(),this.getZoom()>ut&&this.setZoom(ut),this;throw new Error("maxZoom must be greater than the current minZoom")},tt.prototype.getMaxZoom=function(){return this.transform.maxZoom},tt.prototype.setMinPitch=function(ut){if(ut=ut??ko,ut<ko)throw new Error("minPitch must be greater than or equal to "+ko);if(ut>=ko&&ut<=this.transform.maxPitch)return this.transform.minPitch=ut,this._update(),this.getPitch()<ut&&this.setPitch(ut),this;throw new Error("minPitch must be between "+ko+" and the current maxPitch, inclusive")},tt.prototype.getMinPitch=function(){return this.transform.minPitch},tt.prototype.setMaxPitch=function(ut){if(ut=ut??Dl,ut>Dl)throw new Error("maxPitch must be less than or equal to "+Dl);if(ut>=this.transform.minPitch)return this.transform.maxPitch=ut,this._update(),this.getPitch()>ut&&this.setPitch(ut),this;throw new Error("maxPitch must be greater than the current minPitch")},tt.prototype.getMaxPitch=function(){return this.transform.maxPitch},tt.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},tt.prototype.setRenderWorldCopies=function(ut){return this.transform.renderWorldCopies=ut,this._update()},tt.prototype.project=function(ut){return this.transform.locationPoint(i.LngLat.convert(ut))},tt.prototype.unproject=function(ut){return this.transform.pointLocation(i.Point.convert(ut))},tt.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},tt.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},tt.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},tt.prototype._createDelegatedListener=function(ut,kt,jt){var Qt=this,de;if(ut==="mouseenter"||ut==="mouseover"){var Ee=!1,Ye=function(Fr){var Br=Qt.getLayer(kt)?Qt.queryRenderedFeatures(Fr.point,{layers:[kt]}):[];Br.length?Ee||(Ee=!0,jt.call(Qt,new Ht(ut,Qt,Fr.originalEvent,{features:Br}))):Ee=!1},ar=function(){Ee=!1};return{layer:kt,listener:jt,delegates:{mousemove:Ye,mouseout:ar}}}else if(ut==="mouseleave"||ut==="mouseout"){var tr=!1,vr=function(Fr){var Br=Qt.getLayer(kt)?Qt.queryRenderedFeatures(Fr.point,{layers:[kt]}):[];Br.length?tr=!0:tr&&(tr=!1,jt.call(Qt,new Ht(ut,Qt,Fr.originalEvent)))},Lr=function(Fr){tr&&(tr=!1,jt.call(Qt,new Ht(ut,Qt,Fr.originalEvent)))};return{layer:kt,listener:jt,delegates:{mousemove:vr,mouseout:Lr}}}else{var Wr=function(Fr){var Br=Qt.getLayer(kt)?Qt.queryRenderedFeatures(Fr.point,{layers:[kt]}):[];Br.length&&(Fr.features=Br,jt.call(Qt,Fr),delete Fr.features)};return{layer:kt,listener:jt,delegates:(de={},de[ut]=Wr,de)}}},tt.prototype.on=function(ut,kt,jt){if(jt===void 0)return W.prototype.on.call(this,ut,kt);var Qt=this._createDelegatedListener(ut,kt,jt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ut]=this._delegatedListeners[ut]||[],this._delegatedListeners[ut].push(Qt);for(var de in Qt.delegates)this.on(de,Qt.delegates[de]);return this},tt.prototype.once=function(ut,kt,jt){if(jt===void 0)return W.prototype.once.call(this,ut,kt);var Qt=this._createDelegatedListener(ut,kt,jt);for(var de in Qt.delegates)this.once(de,Qt.delegates[de]);return this},tt.prototype.off=function(ut,kt,jt){var Qt=this;if(jt===void 0)return W.prototype.off.call(this,ut,kt);var de=function(Ee){for(var Ye=Ee[ut],ar=0;ar<Ye.length;ar++){var tr=Ye[ar];if(tr.layer===kt&&tr.listener===jt){for(var vr in tr.delegates)Qt.off(vr,tr.delegates[vr]);return Ye.splice(ar,1),Qt}}};return this._delegatedListeners&&this._delegatedListeners[ut]&&de(this._delegatedListeners),this},tt.prototype.queryRenderedFeatures=function(ut,kt){if(!this.style)return[];kt===void 0&&ut!==void 0&&!(ut instanceof i.Point)&&!Array.isArray(ut)&&(kt=ut,ut=void 0),kt=kt||{},ut=ut||[[0,0],[this.transform.width,this.transform.height]];var jt;if(ut instanceof i.Point||typeof ut[0]=="number")jt=[i.Point.convert(ut)];else{var Qt=i.Point.convert(ut[0]),de=i.Point.convert(ut[1]);jt=[Qt,new i.Point(de.x,Qt.y),de,new i.Point(Qt.x,de.y),Qt]}return this.style.queryRenderedFeatures(jt,kt,this.transform)},tt.prototype.querySourceFeatures=function(ut,kt){return this.style.querySourceFeatures(ut,kt)},tt.prototype.setStyle=function(ut,kt){return kt=i.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},kt),kt.diff!==!1&&kt.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ut?(this._diffStyle(ut,kt),this):(this._localIdeographFontFamily=kt.localIdeographFontFamily,this._updateStyle(ut,kt))},tt.prototype._getUIString=function(ut){var kt=this._locale[ut];if(kt==null)throw new Error("Missing UI string '"+ut+"'");return kt},tt.prototype._updateStyle=function(ut,kt){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ut)this.style=new oo(this,kt||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ut=="string"?this.style.loadURL(ut):this.style.loadJSON(ut),this},tt.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new oo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},tt.prototype._diffStyle=function(ut,kt){var jt=this;if(typeof ut=="string"){var Qt=this._requestManager.normalizeStyleURL(ut),de=this._requestManager.transformRequest(Qt,i.ResourceType.Style);i.getJSON(de,function(Ee,Ye){Ee?jt.fire(new i.ErrorEvent(Ee)):Ye&&jt._updateDiff(Ye,kt)})}else typeof ut=="object"&&this._updateDiff(ut,kt)},tt.prototype._updateDiff=function(ut,kt){try{this.style.setState(ut)&&this._update(!0)}catch(jt){i.warnOnce("Unable to perform style diff: "+(jt.message||jt.error||jt)+".  Rebuilding the style from scratch."),this._updateStyle(ut,kt)}},tt.prototype.getStyle=function(){if(this.style)return this.style.serialize()},tt.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},tt.prototype.addSource=function(ut,kt){return this._lazyInitEmptyStyle(),this.style.addSource(ut,kt),this._update(!0)},tt.prototype.isSourceLoaded=function(ut){var kt=this.style&&this.style.sourceCaches[ut];if(kt===void 0){this.fire(new i.ErrorEvent(new Error("There is no source with ID '"+ut+"'")));return}return kt.loaded()},tt.prototype.areTilesLoaded=function(){var ut=this.style&&this.style.sourceCaches;for(var kt in ut){var jt=ut[kt],Qt=jt._tiles;for(var de in Qt){var Ee=Qt[de];if(!(Ee.state==="loaded"||Ee.state==="errored"))return!1}}return!0},tt.prototype.addSourceType=function(ut,kt,jt){return this._lazyInitEmptyStyle(),this.style.addSourceType(ut,kt,jt)},tt.prototype.removeSource=function(ut){return this.style.removeSource(ut),this._update(!0)},tt.prototype.getSource=function(ut){return this.style.getSource(ut)},tt.prototype.addImage=function(ut,kt,jt){jt===void 0&&(jt={});var Qt=jt.pixelRatio;Qt===void 0&&(Qt=1);var de=jt.sdf;de===void 0&&(de=!1);var Ee=jt.stretchX,Ye=jt.stretchY,ar=jt.content;this._lazyInitEmptyStyle();var tr=0;if(kt instanceof su||Fl&&kt instanceof Fl){var vr=i.browser.getImageData(kt),Lr=vr.width,Wr=vr.height,Fr=vr.data;this.style.addImage(ut,{data:new i.RGBAImage({width:Lr,height:Wr},Fr),pixelRatio:Qt,stretchX:Ee,stretchY:Ye,content:ar,sdf:de,version:tr})}else{if(kt.width===void 0||kt.height===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Br=kt.width,Kr=kt.height,cn=kt.data,Fn=kt;this.style.addImage(ut,{data:new i.RGBAImage({width:Br,height:Kr},new Uint8Array(cn)),pixelRatio:Qt,stretchX:Ee,stretchY:Ye,content:ar,sdf:de,version:tr,userImage:Fn}),Fn.onAdd&&Fn.onAdd(this,ut)}},tt.prototype.updateImage=function(ut,kt){var jt=this.style.getImage(ut);if(!jt)return this.fire(new i.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Qt=kt instanceof su||Fl&&kt instanceof Fl?i.browser.getImageData(kt):kt,de=Qt.width,Ee=Qt.height,Ye=Qt.data;if(de===void 0||Ee===void 0)return this.fire(new i.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(de!==jt.data.width||Ee!==jt.data.height)return this.fire(new i.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ar=!(kt instanceof su||Fl&&kt instanceof Fl);jt.data.replace(Ye,ar),this.style.updateImage(ut,jt)},tt.prototype.hasImage=function(ut){return ut?!!this.style.getImage(ut):(this.fire(new i.ErrorEvent(new Error("Missing required image id"))),!1)},tt.prototype.removeImage=function(ut){this.style.removeImage(ut)},tt.prototype.loadImage=function(ut,kt){i.getImage(this._requestManager.transformRequest(ut,i.ResourceType.Image),kt)},tt.prototype.listImages=function(){return this.style.listImages()},tt.prototype.addLayer=function(ut,kt){return this._lazyInitEmptyStyle(),this.style.addLayer(ut,kt),this._update(!0)},tt.prototype.moveLayer=function(ut,kt){return this.style.moveLayer(ut,kt),this._update(!0)},tt.prototype.removeLayer=function(ut){return this.style.removeLayer(ut),this._update(!0)},tt.prototype.getLayer=function(ut){return this.style.getLayer(ut)},tt.prototype.setLayerZoomRange=function(ut,kt,jt){return this.style.setLayerZoomRange(ut,kt,jt),this._update(!0)},tt.prototype.setFilter=function(ut,kt,jt){return jt===void 0&&(jt={}),this.style.setFilter(ut,kt,jt),this._update(!0)},tt.prototype.getFilter=function(ut){return this.style.getFilter(ut)},tt.prototype.setPaintProperty=function(ut,kt,jt,Qt){return Qt===void 0&&(Qt={}),this.style.setPaintProperty(ut,kt,jt,Qt),this._update(!0)},tt.prototype.getPaintProperty=function(ut,kt){return this.style.getPaintProperty(ut,kt)},tt.prototype.setLayoutProperty=function(ut,kt,jt,Qt){return Qt===void 0&&(Qt={}),this.style.setLayoutProperty(ut,kt,jt,Qt),this._update(!0)},tt.prototype.getLayoutProperty=function(ut,kt){return this.style.getLayoutProperty(ut,kt)},tt.prototype.setLight=function(ut,kt){return kt===void 0&&(kt={}),this._lazyInitEmptyStyle(),this.style.setLight(ut,kt),this._update(!0)},tt.prototype.getLight=function(){return this.style.getLight()},tt.prototype.setFeatureState=function(ut,kt){return this.style.setFeatureState(ut,kt),this._update()},tt.prototype.removeFeatureState=function(ut,kt){return this.style.removeFeatureState(ut,kt),this._update()},tt.prototype.getFeatureState=function(ut){return this.style.getFeatureState(ut)},tt.prototype.getContainer=function(){return this._container},tt.prototype.getCanvasContainer=function(){return this._canvasContainer},tt.prototype.getCanvas=function(){return this._canvas},tt.prototype._containerDimensions=function(){var ut=0,kt=0;return this._container&&(ut=this._container.clientWidth||400,kt=this._container.clientHeight||300),[ut,kt]},tt.prototype._detectMissingCSS=function(){var ut=i.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ut!=="rgb(250, 128, 114)"&&i.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},tt.prototype._setupContainer=function(){var ut=this._container;ut.classList.add("mapboxgl-map");var kt=this._missingCSSCanary=T.create("div","mapboxgl-canary",ut);kt.style.visibility="hidden",this._detectMissingCSS();var jt=this._canvasContainer=T.create("div","mapboxgl-canvas-container",ut);this._interactive&&jt.classList.add("mapboxgl-interactive"),this._canvas=T.create("canvas","mapboxgl-canvas",jt),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var Qt=this._containerDimensions();this._resizeCanvas(Qt[0],Qt[1]);var de=this._controlContainer=T.create("div","mapboxgl-control-container",ut),Ee=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ye){Ee[Ye]=T.create("div","mapboxgl-ctrl-"+Ye,de)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},tt.prototype._resizeCanvas=function(ut,kt){var jt=i.browser.devicePixelRatio||1;this._canvas.width=jt*ut,this._canvas.height=jt*kt,this._canvas.style.width=ut+"px",this._canvas.style.height=kt+"px"},tt.prototype._setupPainter=function(){var ut=i.extend({},C.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),kt=this._canvas.getContext("webgl",ut)||this._canvas.getContext("experimental-webgl",ut);if(!kt){this.fire(new i.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new Rr(kt,this.transform),i.webpSupported.testSupport(kt)},tt.prototype._contextLost=function(ut){ut.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.Event("webglcontextlost",{originalEvent:ut}))},tt.prototype._contextRestored=function(ut){this._setupPainter(),this.resize(),this._update(),this.fire(new i.Event("webglcontextrestored",{originalEvent:ut}))},tt.prototype._onMapScroll=function(ut){if(ut.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},tt.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},tt.prototype._update=function(ut){return this.style?(this._styleDirty=this._styleDirty||ut,this._sourcesDirty=!0,this.triggerRepaint(),this):this},tt.prototype._requestRenderFrame=function(ut){return this._update(),this._renderTaskQueue.add(ut)},tt.prototype._cancelRenderFrame=function(ut){this._renderTaskQueue.remove(ut)},tt.prototype._render=function(ut){var kt=this,jt,Qt=0,de=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(jt=de.createQueryEXT(),de.beginQueryEXT(de.TIME_ELAPSED_EXT,jt),Qt=i.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ut),!this._removed){var Ee=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ye=this.transform.zoom,ar=i.browser.now();this.style.zoomHistory.update(Ye,ar);var tr=new i.EvaluationParameters(Ye,{now:ar,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),vr=tr.crossFadingFactor();(vr!==1||vr!==this._crossFadingFactor)&&(Ee=!0,this._crossFadingFactor=vr),this.style.update(tr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new i.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new i.Event("load"))),this.style&&(this.style.hasTransitions()||Ee)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Lr=i.browser.now()-Qt;de.endQueryEXT(de.TIME_ELAPSED_EXT,jt),setTimeout(function(){var Br=de.getQueryObjectEXT(jt,de.QUERY_RESULT_EXT)/1e6;de.deleteQueryEXT(jt),kt.fire(new i.Event("gpu-timing-frame",{cpuTime:Lr,gpuTime:Br}))},50)}if(this.listens("gpu-timing-layer")){var Wr=this.painter.collectGpuTimers();setTimeout(function(){var Br=kt.painter.queryGpuTimers(Wr);kt.fire(new i.Event("gpu-timing-layer",{layerTimes:Br}))},50)}var Fr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Fr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.Event("idle")),this._loaded&&!this._fullyLoaded&&!Fr&&(this._fullyLoaded=!0),this}},tt.prototype.remove=function(){this._hash&&this._hash.remove();for(var ut=0,kt=this._controls;ut<kt.length;ut+=1){var jt=kt[ut];jt.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof i.window<"u"&&(i.window.removeEventListener("resize",this._onWindowResize,!1),i.window.removeEventListener("orientationchange",this._onWindowResize,!1),i.window.removeEventListener("online",this._onWindowOnline,!1));var Qt=this.painter.context.gl.getExtension("WEBGL_lose_context");Qt&&Qt.loseContext&&Qt.loseContext(),dc(this._canvasContainer),dc(this._controlContainer),dc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new i.Event("remove"))},tt.prototype.triggerRepaint=function(){var ut=this;this.style&&!this._frame&&(this._frame=i.browser.frame(function(kt){ut._frame=null,ut._render(kt)}))},tt.prototype._onWindowOnline=function(){this._update()},tt.prototype._onWindowResize=function(ut){this._trackResize&&this.resize({originalEvent:ut})._update()},K.showTileBoundaries.get=function(){return!!this._showTileBoundaries},K.showTileBoundaries.set=function(ut){this._showTileBoundaries!==ut&&(this._showTileBoundaries=ut,this._update())},K.showPadding.get=function(){return!!this._showPadding},K.showPadding.set=function(ut){this._showPadding!==ut&&(this._showPadding=ut,this._update())},K.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},K.showCollisionBoxes.set=function(ut){this._showCollisionBoxes!==ut&&(this._showCollisionBoxes=ut,ut?this.style._generateCollisionBoxes():this._update())},K.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},K.showOverdrawInspector.set=function(ut){this._showOverdrawInspector!==ut&&(this._showOverdrawInspector=ut,this._update())},K.repaint.get=function(){return!!this._repaint},K.repaint.set=function(ut){this._repaint!==ut&&(this._repaint=ut,this.triggerRepaint())},K.vertices.get=function(){return!!this._vertices},K.vertices.set=function(ut){this._vertices=ut,this._update()},tt.prototype._setCacheLimits=function(ut,kt){i.setCacheLimits(ut,kt)},K.version.get=function(){return i.version},Object.defineProperties(tt.prototype,K),tt}(Gs);function dc(W){W.parentNode&&W.parentNode.removeChild(W)}var Mc={showCompass:!0,showZoom:!0,visualizePitch:!1},hl=function(W){var tt=this;this.options=i.extend({},Mc,W),this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(K){return K.preventDefault()}),this.options.showZoom&&(i.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(K){return tt._map.zoomIn({},{originalEvent:K})}),T.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(K){return tt._map.zoomOut({},{originalEvent:K})}),T.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(K){tt.options.visualizePitch?tt._map.resetNorthPitch({},{originalEvent:K}):tt._map.resetNorth({},{originalEvent:K})}),this._compassIcon=T.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};hl.prototype._updateZoomButtons=function(){var W=this._map.getZoom(),tt=W===this._map.getMaxZoom(),K=W===this._map.getMinZoom();this._zoomInButton.disabled=tt,this._zoomOutButton.disabled=K,this._zoomInButton.setAttribute("aria-disabled",tt.toString()),this._zoomOutButton.setAttribute("aria-disabled",K.toString())},hl.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},hl.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Fo(this._map,this._compass,this.options.visualizePitch)),this._container},hl.prototype.onRemove=function(){T.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},hl.prototype._createButton=function(W,tt){var K=T.create("button",W,this._container);return K.type="button",K.addEventListener("click",tt),K},hl.prototype._setButtonTitle=function(W,tt){var K=this._map._getUIString("NavigationControl."+tt);W.title=K,W.setAttribute("aria-label",K)};var Fo=function(W,tt,K){K===void 0&&(K=!1),this._clickTolerance=10,this.element=tt,this.mouseRotate=new ti({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,K&&(this.mousePitch=new Yn({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),i.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),T.addEventListener(tt,"mousedown",this.mousedown),T.addEventListener(tt,"touchstart",this.touchstart,{passive:!1}),T.addEventListener(tt,"touchmove",this.touchmove),T.addEventListener(tt,"touchend",this.touchend),T.addEventListener(tt,"touchcancel",this.reset)};Fo.prototype.down=function(W,tt){this.mouseRotate.mousedown(W,tt),this.mousePitch&&this.mousePitch.mousedown(W,tt),T.disableDrag()},Fo.prototype.move=function(W,tt){var K=this.map,ut=this.mouseRotate.mousemoveWindow(W,tt);if(ut&&ut.bearingDelta&&K.setBearing(K.getBearing()+ut.bearingDelta),this.mousePitch){var kt=this.mousePitch.mousemoveWindow(W,tt);kt&&kt.pitchDelta&&K.setPitch(K.getPitch()+kt.pitchDelta)}},Fo.prototype.off=function(){var W=this.element;T.removeEventListener(W,"mousedown",this.mousedown),T.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),T.removeEventListener(W,"touchmove",this.touchmove),T.removeEventListener(W,"touchend",this.touchend),T.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},Fo.prototype.offTemp=function(){T.enableDrag(),T.removeEventListener(i.window,"mousemove",this.mousemove),T.removeEventListener(i.window,"mouseup",this.mouseup)},Fo.prototype.mousedown=function(W){this.down(i.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),T.mousePos(this.element,W)),T.addEventListener(i.window,"mousemove",this.mousemove),T.addEventListener(i.window,"mouseup",this.mouseup)},Fo.prototype.mousemove=function(W){this.move(W,T.mousePos(this.element,W))},Fo.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},Fo.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=T.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},Fo.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=T.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},Fo.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Fo.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function pl(W,tt,K){if(W=new i.LngLat(W.lng,W.lat),tt){var ut=new i.LngLat(W.lng-360,W.lat),kt=new i.LngLat(W.lng+360,W.lat),jt=K.locationPoint(W).distSqr(tt);K.locationPoint(ut).distSqr(tt)<jt?W=ut:K.locationPoint(kt).distSqr(tt)<jt&&(W=kt)}for(;Math.abs(W.lng-K.center.lng)>180;){var Qt=K.locationPoint(W);if(Qt.x>=0&&Qt.y>=0&&Qt.x<=K.width&&Qt.y<=K.height)break;W.lng>K.center.lng?W.lng-=360:W.lng+=360}return W}var vc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Sc(W,tt,K){var ut=W.classList;for(var kt in vc)ut.remove("mapboxgl-"+K+"-anchor-"+kt);ut.add("mapboxgl-"+K+"-anchor-"+tt)}var Bu=function(W){function tt(K,ut){if(W.call(this),(K instanceof i.window.HTMLElement||ut)&&(K=i.extend({element:K},ut)),i.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=K&&K.anchor||"center",this._color=K&&K.color||"#3FB1CE",this._scale=K&&K.scale||1,this._draggable=K&&K.draggable||!1,this._clickTolerance=K&&K.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=K&&K.rotation||0,this._rotationAlignment=K&&K.rotationAlignment||"auto",this._pitchAlignment=K&&K.pitchAlignment&&K.pitchAlignment!=="auto"?K.pitchAlignment:this._rotationAlignment,!K||!K.element){this._defaultMarker=!0,this._element=T.create("div"),this._element.setAttribute("aria-label","Map marker");var kt=T.createNS("http://www.w3.org/2000/svg","svg"),jt=41,Qt=27;kt.setAttributeNS(null,"display","block"),kt.setAttributeNS(null,"height",jt+"px"),kt.setAttributeNS(null,"width",Qt+"px"),kt.setAttributeNS(null,"viewBox","0 0 "+Qt+" "+jt);var de=T.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"stroke","none"),de.setAttributeNS(null,"stroke-width","1"),de.setAttributeNS(null,"fill","none"),de.setAttributeNS(null,"fill-rule","evenodd");var Ee=T.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill-rule","nonzero");var Ye=T.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ye.setAttributeNS(null,"fill","#000000");for(var ar=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],tr=0,vr=ar;tr<vr.length;tr+=1){var Lr=vr[tr],Wr=T.createNS("http://www.w3.org/2000/svg","ellipse");Wr.setAttributeNS(null,"opacity","0.04"),Wr.setAttributeNS(null,"cx","10.5"),Wr.setAttributeNS(null,"cy","5.80029008"),Wr.setAttributeNS(null,"rx",Lr.rx),Wr.setAttributeNS(null,"ry",Lr.ry),Ye.appendChild(Wr)}var Fr=T.createNS("http://www.w3.org/2000/svg","g");Fr.setAttributeNS(null,"fill",this._color);var Br=T.createNS("http://www.w3.org/2000/svg","path");Br.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Fr.appendChild(Br);var Kr=T.createNS("http://www.w3.org/2000/svg","g");Kr.setAttributeNS(null,"opacity","0.25"),Kr.setAttributeNS(null,"fill","#000000");var cn=T.createNS("http://www.w3.org/2000/svg","path");cn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Kr.appendChild(cn);var Fn=T.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Fn.setAttributeNS(null,"fill","#FFFFFF");var Pn=T.createNS("http://www.w3.org/2000/svg","g");Pn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Dn=T.createNS("http://www.w3.org/2000/svg","circle");Dn.setAttributeNS(null,"fill","#000000"),Dn.setAttributeNS(null,"opacity","0.25"),Dn.setAttributeNS(null,"cx","5.5"),Dn.setAttributeNS(null,"cy","5.5"),Dn.setAttributeNS(null,"r","5.4999962");var Nn=T.createNS("http://www.w3.org/2000/svg","circle");Nn.setAttributeNS(null,"fill","#FFFFFF"),Nn.setAttributeNS(null,"cx","5.5"),Nn.setAttributeNS(null,"cy","5.5"),Nn.setAttributeNS(null,"r","5.4999962"),Pn.appendChild(Dn),Pn.appendChild(Nn),Ee.appendChild(Ye),Ee.appendChild(Fr),Ee.appendChild(Kr),Ee.appendChild(Fn),Ee.appendChild(Pn),kt.appendChild(Ee),kt.setAttributeNS(null,"height",jt*this._scale+"px"),kt.setAttributeNS(null,"width",Qt*this._scale+"px"),this._element.appendChild(kt),this._offset=i.Point.convert(K&&K.offset||[0,-14])}else this._element=K.element,this._offset=i.Point.convert(K&&K.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Bn){Bn.preventDefault()}),this._element.addEventListener("mousedown",function(Bn){Bn.preventDefault()}),Sc(this._element,this._anchor,"marker"),this._popup=null}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.addTo=function(K){return this.remove(),this._map=K,K.getCanvasContainer().appendChild(this._element),K.on("move",this._update),K.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},tt.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),T.remove(this._element),this._popup&&this._popup.remove(),this},tt.prototype.getLngLat=function(){return this._lngLat},tt.prototype.setLngLat=function(K){return this._lngLat=i.LngLat.convert(K),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},tt.prototype.getElement=function(){return this._element},tt.prototype.setPopup=function(K){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),K){if(!("offset"in K.options)){var ut=38.1,kt=13.5,jt=Math.sqrt(Math.pow(kt,2)/2);K.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ut],"bottom-left":[jt,(ut-kt+jt)*-1],"bottom-right":[-jt,(ut-kt+jt)*-1],left:[kt,(ut-kt)*-1],right:[-kt,(ut-kt)*-1]}:this._offset}this._popup=K,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},tt.prototype._onKeyPress=function(K){var ut=K.code,kt=K.charCode||K.keyCode;(ut==="Space"||ut==="Enter"||kt===32||kt===13)&&this.togglePopup()},tt.prototype._onMapClick=function(K){var ut=K.originalEvent.target,kt=this._element;this._popup&&(ut===kt||kt.contains(ut))&&this.togglePopup()},tt.prototype.getPopup=function(){return this._popup},tt.prototype.togglePopup=function(){var K=this._popup;if(K)K.isOpen()?K.remove():K.addTo(this._map);else return this;return this},tt.prototype._update=function(K){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=pl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ut="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ut="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ut="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var kt="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?kt="rotateX(0deg)":this._pitchAlignment==="map"&&(kt="rotateX("+this._map.getPitch()+"deg)"),(!K||K.type==="moveend")&&(this._pos=this._pos.round()),T.setTransform(this._element,vc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+kt+" "+ut)}},tt.prototype.getOffset=function(){return this._offset},tt.prototype.setOffset=function(K){return this._offset=i.Point.convert(K),this._update(),this},tt.prototype._onMove=function(K){if(!this._isDragging){var ut=this._clickTolerance||this._map._clickTolerance;this._isDragging=K.point.dist(this._pointerdownPos)>=ut}this._isDragging&&(this._pos=K.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.Event("dragstart"))),this.fire(new i.Event("drag")))},tt.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.Event("dragend")),this._state="inactive"},tt.prototype._addDragHandler=function(K){this._element.contains(K.originalEvent.target)&&(K.preventDefault(),this._positionDelta=K.point.sub(this._pos).add(this._offset),this._pointerdownPos=K.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},tt.prototype.setDraggable=function(K){return this._draggable=!!K,this._map&&(K?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},tt.prototype.isDraggable=function(){return this._draggable},tt.prototype.setRotation=function(K){return this._rotation=K||0,this._update(),this},tt.prototype.getRotation=function(){return this._rotation},tt.prototype.setRotationAlignment=function(K){return this._rotationAlignment=K||"auto",this._update(),this},tt.prototype.getRotationAlignment=function(){return this._rotationAlignment},tt.prototype.setPitchAlignment=function(K){return this._pitchAlignment=K&&K!=="auto"?K:this._rotationAlignment,this._update(),this},tt.prototype.getPitchAlignment=function(){return this._pitchAlignment},tt}(i.Evented),Qc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Bl;function gc(W){Bl!==void 0?W(Bl):i.window.navigator.permissions!==void 0?i.window.navigator.permissions.query({name:"geolocation"}).then(function(tt){Bl=tt.state!=="denied",W(Bl)}):(Bl=!!i.window.navigator.geolocation,W(Bl))}var Nu=0,lu=!1,_f=function(W){function tt(K){W.call(this),this.options=i.extend({},Qc,K),i.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.onAdd=function(K){return this._map=K,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),gc(this._setupUI),this._container},tt.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),T.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Nu=0,lu=!1},tt.prototype._isOutOfMapMaxBounds=function(K){var ut=this._map.getMaxBounds(),kt=K.coords;return ut&&(kt.longitude<ut.getWest()||kt.longitude>ut.getEast()||kt.latitude<ut.getSouth()||kt.latitude>ut.getNorth())},tt.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},tt.prototype._onSuccess=function(K){if(this._map){if(this._isOutOfMapMaxBounds(K)){this._setErrorState(),this.fire(new i.Event("outofmaxbounds",K)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=K,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(K),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(K),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("geolocate",K)),this._finish()}},tt.prototype._updateCamera=function(K){var ut=new i.LngLat(K.coords.longitude,K.coords.latitude),kt=K.coords.accuracy,jt=this._map.getBearing(),Qt=i.extend({bearing:jt},this.options.fitBoundsOptions);this._map.fitBounds(ut.toBounds(kt),Qt,{geolocateSource:!0})},tt.prototype._updateMarker=function(K){if(K){var ut=new i.LngLat(K.coords.longitude,K.coords.latitude);this._accuracyCircleMarker.setLngLat(ut).addTo(this._map),this._userLocationDotMarker.setLngLat(ut).addTo(this._map),this._accuracy=K.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},tt.prototype._updateCircleRadius=function(){var K=this._map._container.clientHeight/2,ut=this._map.unproject([0,K]),kt=this._map.unproject([1,K]),jt=ut.distanceTo(kt),Qt=Math.ceil(2*this._accuracy/jt);this._circleElement.style.width=Qt+"px",this._circleElement.style.height=Qt+"px"},tt.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},tt.prototype._onError=function(K){if(this._map){if(this.options.trackUserLocation)if(K.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ut=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ut,this._geolocateButton.setAttribute("aria-label",ut),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(K.code===3&&lu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new i.Event("error",K)),this._finish()}},tt.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},tt.prototype._setupUI=function(K){var ut=this;if(this._container.addEventListener("contextmenu",function(Qt){return Qt.preventDefault()}),this._geolocateButton=T.create("button","mapboxgl-ctrl-geolocate",this._container),T.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",K===!1){i.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var kt=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=kt,this._geolocateButton.setAttribute("aria-label",kt)}else{var jt=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=jt,this._geolocateButton.setAttribute("aria-label",jt)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=T.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Bu(this._dotElement),this._circleElement=T.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Qt){var de=Qt.originalEvent&&Qt.originalEvent.type==="resize";!Qt.geolocateSource&&ut._watchState==="ACTIVE_LOCK"&&!de&&(ut._watchState="BACKGROUND",ut._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ut._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ut.fire(new i.Event("trackuserlocationend")))})},tt.prototype.trigger=function(){if(!this._setup)return i.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Nu--,lu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Nu++;var K;Nu>1?(K={maximumAge:6e5,timeout:0},lu=!0):(K=this.options.positionOptions,lu=!1),this._geolocationWatchID=i.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,K)}}else i.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},tt.prototype._clearWatch=function(){i.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},tt}(i.Evented),tf={maxWidth:100,unit:"metric"},uu=function(W){this.options=i.extend({},tf,W),i.bindAll(["_onMove","setUnit"],this)};uu.prototype.getDefaultPosition=function(){return"bottom-left"},uu.prototype._onMove=function(){ef(this._map,this._container,this.options)},uu.prototype.onAdd=function(W){return this._map=W,this._container=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},uu.prototype.onRemove=function(){T.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},uu.prototype.setUnit=function(W){this.options.unit=W,ef(this._map,this._container,this.options)};function ef(W,tt,K){var ut=K&&K.maxWidth||100,kt=W._container.clientHeight/2,jt=W.unproject([0,kt]),Qt=W.unproject([ut,kt]),de=jt.distanceTo(Qt);if(K&&K.unit==="imperial"){var Ee=3.2808*de;if(Ee>5280){var Ye=Ee/5280;ju(tt,ut,Ye,W._getUIString("ScaleControl.Miles"))}else ju(tt,ut,Ee,W._getUIString("ScaleControl.Feet"))}else if(K&&K.unit==="nautical"){var ar=de/1852;ju(tt,ut,ar,W._getUIString("ScaleControl.NauticalMiles"))}else de>=1e3?ju(tt,ut,de/1e3,W._getUIString("ScaleControl.Kilometers")):ju(tt,ut,de,W._getUIString("ScaleControl.Meters"))}function ju(W,tt,K,ut){var kt=Af(K),jt=kt/K;W.style.width=tt*jt+"px",W.innerHTML=kt+"&nbsp;"+ut}function wf(W){var tt=Math.pow(10,Math.ceil(-Math.log(W)/Math.LN10));return Math.round(W*tt)/tt}function Af(W){var tt=Math.pow(10,(""+Math.floor(W)).length-1),K=W/tt;return K=K>=10?10:K>=5?5:K>=3?3:K>=2?2:K>=1?1:wf(K),tt*K}var _s=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof i.window.HTMLElement?this._container=W.container:i.warnOnce("Full screen control 'container' must be a DOM element.")),i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in i.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in i.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in i.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in i.window.document&&(this._fullscreenchange="MSFullscreenChange")};_s.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=T.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},_s.prototype.onRemove=function(){T.remove(this._controlContainer),this._map=null,i.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},_s.prototype._checkFullscreenSupport=function(){return!!(i.window.document.fullscreenEnabled||i.window.document.mozFullScreenEnabled||i.window.document.msFullscreenEnabled||i.window.document.webkitFullscreenEnabled)},_s.prototype._setupUI=function(){var W=this._fullscreenButton=T.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);T.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),i.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},_s.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},_s.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},_s.prototype._isFullscreen=function(){return this._fullscreen},_s.prototype._changeIcon=function(){var W=i.window.document.fullscreenElement||i.window.document.mozFullScreenElement||i.window.document.webkitFullscreenElement||i.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},_s.prototype._onClickFullscreen=function(){this._isFullscreen()?i.window.document.exitFullscreen?i.window.document.exitFullscreen():i.window.document.mozCancelFullScreen?i.window.document.mozCancelFullScreen():i.window.document.msExitFullscreen?i.window.document.msExitFullscreen():i.window.document.webkitCancelFullScreen&&i.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Tf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},kf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Xf=function(W){function tt(K){W.call(this),this.options=i.extend(Object.create(Tf),K),i.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return W&&(tt.__proto__=W),tt.prototype=Object.create(W&&W.prototype),tt.prototype.constructor=tt,tt.prototype.addTo=function(K){return this._map&&this.remove(),this._map=K,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new i.Event("open")),this},tt.prototype.isOpen=function(){return!!this._map},tt.prototype.remove=function(){return this._content&&T.remove(this._content),this._container&&(T.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new i.Event("close")),this},tt.prototype.getLngLat=function(){return this._lngLat},tt.prototype.setLngLat=function(K){return this._lngLat=i.LngLat.convert(K),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},tt.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},tt.prototype.getElement=function(){return this._container},tt.prototype.setText=function(K){return this.setDOMContent(i.window.document.createTextNode(K))},tt.prototype.setHTML=function(K){var ut=i.window.document.createDocumentFragment(),kt=i.window.document.createElement("body"),jt;for(kt.innerHTML=K;jt=kt.firstChild,!!jt;)ut.appendChild(jt);return this.setDOMContent(ut)},tt.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},tt.prototype.setMaxWidth=function(K){return this.options.maxWidth=K,this._update(),this},tt.prototype.setDOMContent=function(K){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=T.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(K),this._createCloseButton(),this._update(),this._focusFirstElement(),this},tt.prototype.addClassName=function(K){this._container&&this._container.classList.add(K)},tt.prototype.removeClassName=function(K){this._container&&this._container.classList.remove(K)},tt.prototype.setOffset=function(K){return this.options.offset=K,this._update(),this},tt.prototype.toggleClassName=function(K){if(this._container)return this._container.classList.toggle(K)},tt.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=T.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},tt.prototype._onMouseUp=function(K){this._update(K.point)},tt.prototype._onMouseMove=function(K){this._update(K.point)},tt.prototype._onDrag=function(K){this._update(K.point)},tt.prototype._update=function(K){var ut=this,kt=this._lngLat||this._trackPointer;if(!(!this._map||!kt||!this._content)&&(this._container||(this._container=T.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=T.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(vr){return ut._container.classList.add(vr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=pl(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!K))){var jt=this._pos=this._trackPointer&&K?K:this._map.project(this._lngLat),Qt=this.options.anchor,de=Mf(this.options.offset);if(!Qt){var Ee=this._container.offsetWidth,Ye=this._container.offsetHeight,ar;jt.y+de.bottom.y<Ye?ar=["top"]:jt.y>this._map.transform.height-Ye?ar=["bottom"]:ar=[],jt.x<Ee/2?ar.push("left"):jt.x>this._map.transform.width-Ee/2&&ar.push("right"),ar.length===0?Qt="bottom":Qt=ar.join("-")}var tr=jt.add(de[Qt]).round();T.setTransform(this._container,vc[Qt]+" translate("+tr.x+"px,"+tr.y+"px)"),Sc(this._container,Qt,"popup")}},tt.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var K=this._container.querySelector(kf);K&&K.focus()}},tt.prototype._onClose=function(){this.remove()},tt}(i.Evented);function Mf(W){if(W)if(typeof W=="number"){var tt=Math.round(Math.sqrt(.5*Math.pow(W,2)));return{center:new i.Point(0,0),top:new i.Point(0,W),"top-left":new i.Point(tt,tt),"top-right":new i.Point(-tt,tt),bottom:new i.Point(0,-W),"bottom-left":new i.Point(tt,-tt),"bottom-right":new i.Point(-tt,-tt),left:new i.Point(W,0),right:new i.Point(-W,0)}}else if(W instanceof i.Point||Array.isArray(W)){var K=i.Point.convert(W);return{center:K,top:K,"top-left":K,"top-right":K,bottom:K,"bottom-left":K,"bottom-right":K,left:K,right:K}}else return{center:i.Point.convert(W.center||[0,0]),top:i.Point.convert(W.top||[0,0]),"top-left":i.Point.convert(W["top-left"]||[0,0]),"top-right":i.Point.convert(W["top-right"]||[0,0]),bottom:i.Point.convert(W.bottom||[0,0]),"bottom-left":i.Point.convert(W["bottom-left"]||[0,0]),"bottom-right":i.Point.convert(W["bottom-right"]||[0,0]),left:i.Point.convert(W.left||[0,0]),right:i.Point.convert(W.right||[0,0])};else return Mf(new i.Point(0,0))}var Na={version:i.version,supported:C,setRTLTextPlugin:i.setRTLTextPlugin,getRTLTextPluginStatus:i.getRTLTextPluginStatus,Map:$c,NavigationControl:hl,GeolocateControl:_f,AttributionControl:Di,ScaleControl:uu,FullscreenControl:_s,Popup:Xf,Marker:Bu,Style:oo,LngLat:i.LngLat,LngLatBounds:i.LngLatBounds,Point:i.Point,MercatorCoordinate:i.MercatorCoordinate,Evented:i.Evented,config:i.config,prewarm:Te,clearPrewarmedResources:qe,get accessToken(){return i.config.ACCESS_TOKEN},set accessToken(W){i.config.ACCESS_TOKEN=W},get baseApiUrl(){return i.config.API_URL},set baseApiUrl(W){i.config.API_URL=W},get workerCount(){return sr.workerCount},set workerCount(W){sr.workerCount=W},get maxParallelImageRequests(){return i.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(W){i.config.MAX_PARALLEL_IMAGE_REQUESTS=W},clearStorage:function(W){i.clearTileCache(W)},workerUrl:""};return Na}),M})},3108:function(Q,U,t){Q.exports=t(26099)},26099:function(Q,U,t){var M=t(64928),E=t(32420),i=t(51160),C=t(76752),T=t(55616),v=t(31264),d=t(47520),r=t(18400),e=t(72512),l=t(76244),n=1073741824;Q.exports=function(o,p){p||(p={}),o=d(o,"float64"),p=T(p,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var b=v(p.maxDepth,255),h=v(p.bounds,C(o,2));h[0]===h[2]&&h[2]++,h[1]===h[3]&&h[3]++;var _=s(o,h),a=o.length>>>1,c;p.dtype||(p.dtype="array"),typeof p.dtype=="string"?c=new(e(p.dtype))(a):p.dtype&&(c=p.dtype,Array.isArray(c)&&(c.length=a));for(var f=0;f<a;++f)c[f]=f;var x=[],k=[],y=[],A=[];O(0,0,1,c,0,1);for(var L=0,u=0;u<x.length;u++){var m=x[u];if(c.set)c.set(m,L);else for(var S=0,w=m.length;S<w;S++)c[S+L]=m[S];var I=L+x[u].length;A[u]=[L,I],L=I}return c.range=D,c;function O(R,B,N,G,X,J){if(!G.length)return null;var it=x[X]||(x[X]=[]),nt=y[X]||(y[X]=[]),q=k[X]||(k[X]=[]),Z=it.length;if(X++,X>b||J>n){for(var $=0;$<G.length;$++)it.push(G[$]),nt.push(J),q.push(null,null,null,null);return Z}if(it.push(G[0]),nt.push(J),G.length<=1)return q.push(null,null,null,null),Z;for(var V=N*.5,rt=R+V,ot=B+V,H=[],Y=[],at=[],et=[],ct=1,ft=G.length;ct<ft;ct++){var yt=G[ct],xt=_[yt*2],Ct=_[yt*2+1];xt<rt?Ct<ot?H.push(yt):Y.push(yt):Ct<ot?at.push(yt):et.push(yt)}return J<<=2,q.push(O(R,B,V,H,X,J),O(R,ot,V,Y,X,J+1),O(rt,B,V,at,X,J+2),O(rt,ot,V,et,X,J+3)),Z}function D(){for(var R=[],B=arguments.length;B--;)R[B]=arguments[B];var N;if(r(R[R.length-1])){var G=R.pop();!R.length&&(G.x!=null||G.l!=null||G.left!=null)&&(R=[G],N={}),N=T(G,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else N={};R.length||(R=h);var X=i.apply(void 0,R),J=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],it=J[0],nt=J[1],q=J[2],Z=J[3],$=s([it,nt,q,Z],h),V=$[0],rt=$[1],ot=$[2],H=$[3],Y=v(N.level,x.length);if(N.d!=null){var at;typeof N.d=="number"?at=[N.d,N.d]:N.d.length&&(at=N.d),Y=Math.min(Math.max(Math.ceil(-l(Math.abs(at[0])/(h[2]-h[0]))),Math.ceil(-l(Math.abs(at[1])/(h[3]-h[1])))),Y)}if(Y=Math.min(Y,x.length),N.lod)return P(V,rt,ot,H,Y);var et=[];ct(0,0,1,0,0,1);function ct(yt,xt,Ct,gt,mt,vt){if(!(mt===null||vt===null)){var At=yt+Ct,Ot=xt+Ct;if(!(V>At||rt>Ot||ot<yt||H<xt)&&!(gt>=Y)&&mt!==vt){var It=x[gt];vt===void 0&&(vt=It.length);for(var St=mt;St<vt;St++){var Bt=It[St],re=o[Bt*2],Yt=o[Bt*2+1];re>=it&&re<=q&&Yt>=nt&&Yt<=Z&&et.push(Bt)}var he=k[gt],Zt=he[mt*4+0],ae=he[mt*4+1],oe=he[mt*4+2],ce=he[mt*4+3],ue=ft(he,mt+1),ye=Ct*.5,Tt=gt+1;ct(yt,xt,ye,Tt,Zt,ae||oe||ce||ue),ct(yt,xt+ye,ye,Tt,ae,oe||ce||ue),ct(yt+ye,xt,ye,Tt,oe,ce||ue),ct(yt+ye,xt+ye,ye,Tt,ce,ue)}}}function ft(yt,xt){for(var Ct=null,gt=0;Ct===null;)if(Ct=yt[xt*4+gt],gt++,gt>yt.length)return null;return Ct}return et}function P(R,B,N,G,X){for(var J=[],it=0;it<X;it++){var nt=y[it],q=A[it][0],Z=F(R,B,it),$=F(N,G,it),V=M.ge(nt,Z),rt=M.gt(nt,$,V,nt.length-1);J[it]=[V+q,rt+q]}return J}function F(R,B,N){for(var G=1,X=.5,J=.5,it=.5,nt=0;nt<N;nt++)G<<=2,G+=R<X?B<J?0:1:B<J?2:3,it*=.5,X+=R<X?-it:it,J+=B<J?-it:it;return G}};function s(o,p){for(var b=p[0],h=p[1],_=p[2],a=p[3],c=1/(_-b),f=1/(a-h),x=new Array(o.length),k=0,y=o.length/2;k<y;k++)x[2*k]=E((o[2*k]-b)*c,0,1),x[2*k+1]=E((o[2*k+1]-h)*f,0,1);return x}},40440:function(Q,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(3256),E=6378137;function i(r){return M.geomReduce(r,function(e,l){return e+C(l)},0)}U.default=i;function C(r){var e=0,l;switch(r.type){case"Polygon":return T(r.coordinates);case"MultiPolygon":for(l=0;l<r.coordinates.length;l++)e+=T(r.coordinates[l]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function T(r){var e=0;if(r&&r.length>0){e+=Math.abs(v(r[0]));for(var l=1;l<r.length;l++)e-=Math.abs(v(r[l]))}return e}function v(r){var e,l,n,s,o,p,b,h=0,_=r.length;if(_>2){for(b=0;b<_;b++)b===_-2?(s=_-2,o=_-1,p=0):b===_-1?(s=_-1,o=0,p=1):(s=b,o=b+1,p=b+2),e=r[s],l=r[o],n=r[p],h+=(d(n[0])-d(e[0]))*Math.sin(d(l[1]));h=h*E*E/2}return h}function d(r){return r*Math.PI/180}},46284:function(Q,U){Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=63710088e-1,U.factors={centimeters:U.earthRadius*100,centimetres:U.earthRadius*100,degrees:U.earthRadius/111325,feet:U.earthRadius*3.28084,inches:U.earthRadius*39.37,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:U.earthRadius*1e3,millimetres:U.earthRadius*1e3,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius*1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:1.0936133},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(u,m,S){S===void 0&&(S={});var w={type:"Feature"};return(S.id===0||S.id)&&(w.id=S.id),S.bbox&&(w.bbox=S.bbox),w.properties=m||{},w.geometry=u,w}U.feature=t;function M(u,m,S){switch(u){case"Point":return E(m).geometry;case"LineString":return v(m).geometry;case"Polygon":return C(m).geometry;case"MultiPoint":return l(m).geometry;case"MultiLineString":return e(m).geometry;case"MultiPolygon":return n(m).geometry;default:throw new Error(u+" is invalid")}}U.geometry=M;function E(u,m,S){if(S===void 0&&(S={}),!u)throw new Error("coordinates is required");if(!Array.isArray(u))throw new Error("coordinates must be an Array");if(u.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(u[0])||!k(u[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:u};return t(w,m,S)}U.point=E;function i(u,m,S){return S===void 0&&(S={}),r(u.map(function(w){return E(w,m)}),S)}U.points=i;function C(u,m,S){S===void 0&&(S={});for(var w=0,I=u;w<I.length;w++){var O=I[w];if(O.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<O[O.length-1].length;D++)if(O[O.length-1][D]!==O[0][D])throw new Error("First and last Position are not equivalent.")}var P={type:"Polygon",coordinates:u};return t(P,m,S)}U.polygon=C;function T(u,m,S){return S===void 0&&(S={}),r(u.map(function(w){return C(w,m)}),S)}U.polygons=T;function v(u,m,S){if(S===void 0&&(S={}),u.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:u};return t(w,m,S)}U.lineString=v;function d(u,m,S){return S===void 0&&(S={}),r(u.map(function(w){return v(w,m)}),S)}U.lineStrings=d;function r(u,m){m===void 0&&(m={});var S={type:"FeatureCollection"};return m.id&&(S.id=m.id),m.bbox&&(S.bbox=m.bbox),S.features=u,S}U.featureCollection=r;function e(u,m,S){S===void 0&&(S={});var w={type:"MultiLineString",coordinates:u};return t(w,m,S)}U.multiLineString=e;function l(u,m,S){S===void 0&&(S={});var w={type:"MultiPoint",coordinates:u};return t(w,m,S)}U.multiPoint=l;function n(u,m,S){S===void 0&&(S={});var w={type:"MultiPolygon",coordinates:u};return t(w,m,S)}U.multiPolygon=n;function s(u,m,S){S===void 0&&(S={});var w={type:"GeometryCollection",geometries:u};return t(w,m,S)}U.geometryCollection=s;function o(u,m){if(m===void 0&&(m=0),m&&!(m>=0))throw new Error("precision must be a positive number");var S=Math.pow(10,m||0);return Math.round(u*S)/S}U.round=o;function p(u,m){m===void 0&&(m="kilometers");var S=U.factors[m];if(!S)throw new Error(m+" units is invalid");return u*S}U.radiansToLength=p;function b(u,m){m===void 0&&(m="kilometers");var S=U.factors[m];if(!S)throw new Error(m+" units is invalid");return u/S}U.lengthToRadians=b;function h(u,m){return a(b(u,m))}U.lengthToDegrees=h;function _(u){var m=u%360;return m<0&&(m+=360),m}U.bearingToAzimuth=_;function a(u){var m=u%(2*Math.PI);return m*180/Math.PI}U.radiansToDegrees=a;function c(u){var m=u%360;return m*Math.PI/180}U.degreesToRadians=c;function f(u,m,S){if(m===void 0&&(m="kilometers"),S===void 0&&(S="kilometers"),!(u>=0))throw new Error("length must be a positive number");return p(b(u,m),S)}U.convertLength=f;function x(u,m,S){if(m===void 0&&(m="meters"),S===void 0&&(S="kilometers"),!(u>=0))throw new Error("area must be a positive number");var w=U.areaFactors[m];if(!w)throw new Error("invalid original units");var I=U.areaFactors[S];if(!I)throw new Error("invalid final units");return u/w*I}U.convertArea=x;function k(u){return!isNaN(u)&&u!==null&&!Array.isArray(u)}U.isNumber=k;function y(u){return!!u&&u.constructor===Object}U.isObject=y;function A(u){if(!u)throw new Error("bbox is required");if(!Array.isArray(u))throw new Error("bbox must be an Array");if(u.length!==4&&u.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");u.forEach(function(m){if(!k(m))throw new Error("bbox must only contain numbers")})}U.validateBBox=A;function L(u){if(!u)throw new Error("id is required");if(["string","number"].indexOf(typeof u)===-1)throw new Error("id must be a number or a string")}U.validateId=L},3256:function(Q,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(46284);function E(c,f,x){if(c!==null)for(var k,y,A,L,u,m,S,w=0,I=0,O,D=c.type,P=D==="FeatureCollection",F=D==="Feature",R=P?c.features.length:1,B=0;B<R;B++){S=P?c.features[B].geometry:F?c.geometry:c,O=S?S.type==="GeometryCollection":!1,u=O?S.geometries.length:1;for(var N=0;N<u;N++){var G=0,X=0;if(L=O?S.geometries[N]:S,L!==null){m=L.coordinates;var J=L.type;switch(w=x&&(J==="Polygon"||J==="MultiPolygon")?1:0,J){case null:break;case"Point":if(f(m,I,B,G,X)===!1)return!1;I++,G++;break;case"LineString":case"MultiPoint":for(k=0;k<m.length;k++){if(f(m[k],I,B,G,X)===!1)return!1;I++,J==="MultiPoint"&&G++}J==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(k=0;k<m.length;k++){for(y=0;y<m[k].length-w;y++){if(f(m[k][y],I,B,G,X)===!1)return!1;I++}J==="MultiLineString"&&G++,J==="Polygon"&&X++}J==="Polygon"&&G++;break;case"MultiPolygon":for(k=0;k<m.length;k++){for(X=0,y=0;y<m[k].length;y++){for(A=0;A<m[k][y].length-w;A++){if(f(m[k][y][A],I,B,G,X)===!1)return!1;I++}X++}G++}break;case"GeometryCollection":for(k=0;k<L.geometries.length;k++)if(E(L.geometries[k],f,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(c,f,x,k){var y=x;return E(c,function(A,L,u,m,S){L===0&&x===void 0?y=A:y=f(y,A,L,u,m,S)},k),y}function C(c,f){var x;switch(c.type){case"FeatureCollection":for(x=0;x<c.features.length&&f(c.features[x].properties,x)!==!1;x++);break;case"Feature":f(c.properties,0);break}}function T(c,f,x){var k=x;return C(c,function(y,A){A===0&&x===void 0?k=y:k=f(k,y,A)}),k}function v(c,f){if(c.type==="Feature")f(c,0);else if(c.type==="FeatureCollection")for(var x=0;x<c.features.length&&f(c.features[x],x)!==!1;x++);}function d(c,f,x){var k=x;return v(c,function(y,A){A===0&&x===void 0?k=y:k=f(k,y,A)}),k}function r(c){var f=[];return E(c,function(x){f.push(x)}),f}function e(c,f){var x,k,y,A,L,u,m,S,w,I,O=0,D=c.type==="FeatureCollection",P=c.type==="Feature",F=D?c.features.length:1;for(x=0;x<F;x++){for(u=D?c.features[x].geometry:P?c.geometry:c,S=D?c.features[x].properties:P?c.properties:{},w=D?c.features[x].bbox:P?c.bbox:void 0,I=D?c.features[x].id:P?c.id:void 0,m=u?u.type==="GeometryCollection":!1,L=m?u.geometries.length:1,y=0;y<L;y++){if(A=m?u.geometries[y]:u,A===null){if(f(null,O,S,w,I)===!1)return!1;continue}switch(A.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(A,O,S,w,I)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<A.geometries.length;k++)if(f(A.geometries[k],O,S,w,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function l(c,f,x){var k=x;return e(c,function(y,A,L,u,m){A===0&&x===void 0?k=y:k=f(k,y,A,L,u,m)}),k}function n(c,f){e(c,function(x,k,y,A,L){var u=x===null?null:x.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return f(M.feature(x,y,{bbox:A,id:L}),k,0)===!1?!1:void 0}var m;switch(u){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var S=0;S<x.coordinates.length;S++){var w=x.coordinates[S],I={type:m,coordinates:w};if(f(M.feature(I,y),k,S)===!1)return!1}})}function s(c,f,x){var k=x;return n(c,function(y,A,L){A===0&&L===0&&x===void 0?k=y:k=f(k,y,A,L)}),k}function o(c,f){n(c,function(x,k,y){var A=0;if(x.geometry){var L=x.geometry.type;if(!(L==="Point"||L==="MultiPoint")){var u,m=0,S=0,w=0;if(E(x,function(I,O,D,P,F){if(u===void 0||k>m||P>S||F>w){u=I,m=k,S=P,w=F,A=0;return}var R=M.lineString([u,I],x.properties);if(f(R,k,y,F,A)===!1)return!1;A++,u=I})===!1)return!1}}})}function p(c,f,x){var k=x,y=!1;return o(c,function(A,L,u,m,S){y===!1&&x===void 0?k=A:k=f(k,A,L,u,m,S),y=!0}),k}function b(c,f){if(!c)throw new Error("geojson is required");n(c,function(x,k,y){if(x.geometry!==null){var A=x.geometry.type,L=x.geometry.coordinates;switch(A){case"LineString":if(f(x,k,y,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<L.length;u++)if(f(M.lineString(L[u],x.properties),k,y,u)===!1)return!1;break}}})}function h(c,f,x){var k=x;return b(c,function(y,A,L,u){A===0&&x===void 0?k=y:k=f(k,y,A,L,u)}),k}function _(c,f){if(f=f||{},!M.isObject(f))throw new Error("options is invalid");var x=f.featureIndex||0,k=f.multiFeatureIndex||0,y=f.geometryIndex||0,A=f.segmentIndex||0,L=f.properties,u;switch(c.type){case"FeatureCollection":x<0&&(x=c.features.length+x),L=L||c.features[x].properties,u=c.features[x].geometry;break;case"Feature":L=L||c.properties,u=c.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=c;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var m=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return A<0&&(A=m.length+A-1),M.lineString([m[A],m[A+1]],L,f);case"Polygon":return y<0&&(y=m.length+y),A<0&&(A=m[y].length+A-1),M.lineString([m[y][A],m[y][A+1]],L,f);case"MultiLineString":return k<0&&(k=m.length+k),A<0&&(A=m[k].length+A-1),M.lineString([m[k][A],m[k][A+1]],L,f);case"MultiPolygon":return k<0&&(k=m.length+k),y<0&&(y=m[k].length+y),A<0&&(A=m[k][y].length-A-1),M.lineString([m[k][y][A],m[k][y][A+1]],L,f)}throw new Error("geojson is invalid")}function a(c,f){if(f=f||{},!M.isObject(f))throw new Error("options is invalid");var x=f.featureIndex||0,k=f.multiFeatureIndex||0,y=f.geometryIndex||0,A=f.coordIndex||0,L=f.properties,u;switch(c.type){case"FeatureCollection":x<0&&(x=c.features.length+x),L=L||c.features[x].properties,u=c.features[x].geometry;break;case"Feature":L=L||c.properties,u=c.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=c;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var m=u.coordinates;switch(u.type){case"Point":return M.point(m,L,f);case"MultiPoint":return k<0&&(k=m.length+k),M.point(m[k],L,f);case"LineString":return A<0&&(A=m.length+A),M.point(m[A],L,f);case"Polygon":return y<0&&(y=m.length+y),A<0&&(A=m[y].length+A),M.point(m[y][A],L,f);case"MultiLineString":return k<0&&(k=m.length+k),A<0&&(A=m[k].length+A),M.point(m[k][A],L,f);case"MultiPolygon":return k<0&&(k=m.length+k),y<0&&(y=m[k].length+y),A<0&&(A=m[k][y].length-A),M.point(m[k][y][A],L,f)}throw new Error("geojson is invalid")}U.coordEach=E,U.coordReduce=i,U.propEach=C,U.propReduce=T,U.featureEach=v,U.featureReduce=d,U.coordAll=r,U.geomEach=e,U.geomReduce=l,U.flattenEach=n,U.flattenReduce=s,U.segmentEach=o,U.segmentReduce=p,U.lineEach=b,U.lineReduce=h,U.findSegment=_,U.findPoint=a},42428:function(Q,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(84880);function E(i){var C=[1/0,1/0,-1/0,-1/0];return M.coordEach(i,function(T){C[0]>T[0]&&(C[0]=T[0]),C[1]>T[1]&&(C[1]=T[1]),C[2]<T[0]&&(C[2]=T[0]),C[3]<T[1]&&(C[3]=T[1])}),C}E.default=E,U.default=E},76796:function(Q,U){Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=63710088e-1,U.factors={centimeters:U.earthRadius*100,centimetres:U.earthRadius*100,degrees:U.earthRadius/111325,feet:U.earthRadius*3.28084,inches:U.earthRadius*39.37,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:U.earthRadius*1e3,millimetres:U.earthRadius*1e3,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius*1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:1.0936133},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(u,m,S){S===void 0&&(S={});var w={type:"Feature"};return(S.id===0||S.id)&&(w.id=S.id),S.bbox&&(w.bbox=S.bbox),w.properties=m||{},w.geometry=u,w}U.feature=t;function M(u,m,S){switch(u){case"Point":return E(m).geometry;case"LineString":return v(m).geometry;case"Polygon":return C(m).geometry;case"MultiPoint":return l(m).geometry;case"MultiLineString":return e(m).geometry;case"MultiPolygon":return n(m).geometry;default:throw new Error(u+" is invalid")}}U.geometry=M;function E(u,m,S){if(S===void 0&&(S={}),!u)throw new Error("coordinates is required");if(!Array.isArray(u))throw new Error("coordinates must be an Array");if(u.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!k(u[0])||!k(u[1]))throw new Error("coordinates must contain numbers");var w={type:"Point",coordinates:u};return t(w,m,S)}U.point=E;function i(u,m,S){return S===void 0&&(S={}),r(u.map(function(w){return E(w,m)}),S)}U.points=i;function C(u,m,S){S===void 0&&(S={});for(var w=0,I=u;w<I.length;w++){var O=I[w];if(O.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<O[O.length-1].length;D++)if(O[O.length-1][D]!==O[0][D])throw new Error("First and last Position are not equivalent.")}var P={type:"Polygon",coordinates:u};return t(P,m,S)}U.polygon=C;function T(u,m,S){return S===void 0&&(S={}),r(u.map(function(w){return C(w,m)}),S)}U.polygons=T;function v(u,m,S){if(S===void 0&&(S={}),u.length<2)throw new Error("coordinates must be an array of two or more positions");var w={type:"LineString",coordinates:u};return t(w,m,S)}U.lineString=v;function d(u,m,S){return S===void 0&&(S={}),r(u.map(function(w){return v(w,m)}),S)}U.lineStrings=d;function r(u,m){m===void 0&&(m={});var S={type:"FeatureCollection"};return m.id&&(S.id=m.id),m.bbox&&(S.bbox=m.bbox),S.features=u,S}U.featureCollection=r;function e(u,m,S){S===void 0&&(S={});var w={type:"MultiLineString",coordinates:u};return t(w,m,S)}U.multiLineString=e;function l(u,m,S){S===void 0&&(S={});var w={type:"MultiPoint",coordinates:u};return t(w,m,S)}U.multiPoint=l;function n(u,m,S){S===void 0&&(S={});var w={type:"MultiPolygon",coordinates:u};return t(w,m,S)}U.multiPolygon=n;function s(u,m,S){S===void 0&&(S={});var w={type:"GeometryCollection",geometries:u};return t(w,m,S)}U.geometryCollection=s;function o(u,m){if(m===void 0&&(m=0),m&&!(m>=0))throw new Error("precision must be a positive number");var S=Math.pow(10,m||0);return Math.round(u*S)/S}U.round=o;function p(u,m){m===void 0&&(m="kilometers");var S=U.factors[m];if(!S)throw new Error(m+" units is invalid");return u*S}U.radiansToLength=p;function b(u,m){m===void 0&&(m="kilometers");var S=U.factors[m];if(!S)throw new Error(m+" units is invalid");return u/S}U.lengthToRadians=b;function h(u,m){return a(b(u,m))}U.lengthToDegrees=h;function _(u){var m=u%360;return m<0&&(m+=360),m}U.bearingToAzimuth=_;function a(u){var m=u%(2*Math.PI);return m*180/Math.PI}U.radiansToDegrees=a;function c(u){var m=u%360;return m*Math.PI/180}U.degreesToRadians=c;function f(u,m,S){if(m===void 0&&(m="kilometers"),S===void 0&&(S="kilometers"),!(u>=0))throw new Error("length must be a positive number");return p(b(u,m),S)}U.convertLength=f;function x(u,m,S){if(m===void 0&&(m="meters"),S===void 0&&(S="kilometers"),!(u>=0))throw new Error("area must be a positive number");var w=U.areaFactors[m];if(!w)throw new Error("invalid original units");var I=U.areaFactors[S];if(!I)throw new Error("invalid final units");return u/w*I}U.convertArea=x;function k(u){return!isNaN(u)&&u!==null&&!Array.isArray(u)}U.isNumber=k;function y(u){return!!u&&u.constructor===Object}U.isObject=y;function A(u){if(!u)throw new Error("bbox is required");if(!Array.isArray(u))throw new Error("bbox must be an Array");if(u.length!==4&&u.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");u.forEach(function(m){if(!k(m))throw new Error("bbox must only contain numbers")})}U.validateBBox=A;function L(u){if(!u)throw new Error("id is required");if(["string","number"].indexOf(typeof u)===-1)throw new Error("id must be a number or a string")}U.validateId=L},84880:function(Q,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(76796);function E(c,f,x){if(c!==null)for(var k,y,A,L,u,m,S,w=0,I=0,O,D=c.type,P=D==="FeatureCollection",F=D==="Feature",R=P?c.features.length:1,B=0;B<R;B++){S=P?c.features[B].geometry:F?c.geometry:c,O=S?S.type==="GeometryCollection":!1,u=O?S.geometries.length:1;for(var N=0;N<u;N++){var G=0,X=0;if(L=O?S.geometries[N]:S,L!==null){m=L.coordinates;var J=L.type;switch(w=x&&(J==="Polygon"||J==="MultiPolygon")?1:0,J){case null:break;case"Point":if(f(m,I,B,G,X)===!1)return!1;I++,G++;break;case"LineString":case"MultiPoint":for(k=0;k<m.length;k++){if(f(m[k],I,B,G,X)===!1)return!1;I++,J==="MultiPoint"&&G++}J==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(k=0;k<m.length;k++){for(y=0;y<m[k].length-w;y++){if(f(m[k][y],I,B,G,X)===!1)return!1;I++}J==="MultiLineString"&&G++,J==="Polygon"&&X++}J==="Polygon"&&G++;break;case"MultiPolygon":for(k=0;k<m.length;k++){for(X=0,y=0;y<m[k].length;y++){for(A=0;A<m[k][y].length-w;A++){if(f(m[k][y][A],I,B,G,X)===!1)return!1;I++}X++}G++}break;case"GeometryCollection":for(k=0;k<L.geometries.length;k++)if(E(L.geometries[k],f,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(c,f,x,k){var y=x;return E(c,function(A,L,u,m,S){L===0&&x===void 0?y=A:y=f(y,A,L,u,m,S)},k),y}function C(c,f){var x;switch(c.type){case"FeatureCollection":for(x=0;x<c.features.length&&f(c.features[x].properties,x)!==!1;x++);break;case"Feature":f(c.properties,0);break}}function T(c,f,x){var k=x;return C(c,function(y,A){A===0&&x===void 0?k=y:k=f(k,y,A)}),k}function v(c,f){if(c.type==="Feature")f(c,0);else if(c.type==="FeatureCollection")for(var x=0;x<c.features.length&&f(c.features[x],x)!==!1;x++);}function d(c,f,x){var k=x;return v(c,function(y,A){A===0&&x===void 0?k=y:k=f(k,y,A)}),k}function r(c){var f=[];return E(c,function(x){f.push(x)}),f}function e(c,f){var x,k,y,A,L,u,m,S,w,I,O=0,D=c.type==="FeatureCollection",P=c.type==="Feature",F=D?c.features.length:1;for(x=0;x<F;x++){for(u=D?c.features[x].geometry:P?c.geometry:c,S=D?c.features[x].properties:P?c.properties:{},w=D?c.features[x].bbox:P?c.bbox:void 0,I=D?c.features[x].id:P?c.id:void 0,m=u?u.type==="GeometryCollection":!1,L=m?u.geometries.length:1,y=0;y<L;y++){if(A=m?u.geometries[y]:u,A===null){if(f(null,O,S,w,I)===!1)return!1;continue}switch(A.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(A,O,S,w,I)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<A.geometries.length;k++)if(f(A.geometries[k],O,S,w,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function l(c,f,x){var k=x;return e(c,function(y,A,L,u,m){A===0&&x===void 0?k=y:k=f(k,y,A,L,u,m)}),k}function n(c,f){e(c,function(x,k,y,A,L){var u=x===null?null:x.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return f(M.feature(x,y,{bbox:A,id:L}),k,0)===!1?!1:void 0}var m;switch(u){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var S=0;S<x.coordinates.length;S++){var w=x.coordinates[S],I={type:m,coordinates:w};if(f(M.feature(I,y),k,S)===!1)return!1}})}function s(c,f,x){var k=x;return n(c,function(y,A,L){A===0&&L===0&&x===void 0?k=y:k=f(k,y,A,L)}),k}function o(c,f){n(c,function(x,k,y){var A=0;if(x.geometry){var L=x.geometry.type;if(!(L==="Point"||L==="MultiPoint")){var u,m=0,S=0,w=0;if(E(x,function(I,O,D,P,F){if(u===void 0||k>m||P>S||F>w){u=I,m=k,S=P,w=F,A=0;return}var R=M.lineString([u,I],x.properties);if(f(R,k,y,F,A)===!1)return!1;A++,u=I})===!1)return!1}}})}function p(c,f,x){var k=x,y=!1;return o(c,function(A,L,u,m,S){y===!1&&x===void 0?k=A:k=f(k,A,L,u,m,S),y=!0}),k}function b(c,f){if(!c)throw new Error("geojson is required");n(c,function(x,k,y){if(x.geometry!==null){var A=x.geometry.type,L=x.geometry.coordinates;switch(A){case"LineString":if(f(x,k,y,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<L.length;u++)if(f(M.lineString(L[u],x.properties),k,y,u)===!1)return!1;break}}})}function h(c,f,x){var k=x;return b(c,function(y,A,L,u){A===0&&x===void 0?k=y:k=f(k,y,A,L,u)}),k}function _(c,f){if(f=f||{},!M.isObject(f))throw new Error("options is invalid");var x=f.featureIndex||0,k=f.multiFeatureIndex||0,y=f.geometryIndex||0,A=f.segmentIndex||0,L=f.properties,u;switch(c.type){case"FeatureCollection":x<0&&(x=c.features.length+x),L=L||c.features[x].properties,u=c.features[x].geometry;break;case"Feature":L=L||c.properties,u=c.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=c;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var m=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return A<0&&(A=m.length+A-1),M.lineString([m[A],m[A+1]],L,f);case"Polygon":return y<0&&(y=m.length+y),A<0&&(A=m[y].length+A-1),M.lineString([m[y][A],m[y][A+1]],L,f);case"MultiLineString":return k<0&&(k=m.length+k),A<0&&(A=m[k].length+A-1),M.lineString([m[k][A],m[k][A+1]],L,f);case"MultiPolygon":return k<0&&(k=m.length+k),y<0&&(y=m[k].length+y),A<0&&(A=m[k][y].length-A-1),M.lineString([m[k][y][A],m[k][y][A+1]],L,f)}throw new Error("geojson is invalid")}function a(c,f){if(f=f||{},!M.isObject(f))throw new Error("options is invalid");var x=f.featureIndex||0,k=f.multiFeatureIndex||0,y=f.geometryIndex||0,A=f.coordIndex||0,L=f.properties,u;switch(c.type){case"FeatureCollection":x<0&&(x=c.features.length+x),L=L||c.features[x].properties,u=c.features[x].geometry;break;case"Feature":L=L||c.properties,u=c.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=c;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var m=u.coordinates;switch(u.type){case"Point":return M.point(m,L,f);case"MultiPoint":return k<0&&(k=m.length+k),M.point(m[k],L,f);case"LineString":return A<0&&(A=m.length+A),M.point(m[A],L,f);case"Polygon":return y<0&&(y=m.length+y),A<0&&(A=m[y].length+A),M.point(m[y][A],L,f);case"MultiLineString":return k<0&&(k=m.length+k),A<0&&(A=m[k].length+A),M.point(m[k][A],L,f);case"MultiPolygon":return k<0&&(k=m.length+k),y<0&&(y=m[k].length+y),A<0&&(A=m[k][y].length-A),M.point(m[k][y][A],L,f)}throw new Error("geojson is invalid")}U.coordEach=E,U.coordReduce=i,U.propEach=C,U.propReduce=T,U.featureEach=v,U.featureReduce=d,U.coordAll=r,U.geomEach=e,U.geomReduce=l,U.flattenEach=n,U.flattenReduce=s,U.segmentEach=o,U.segmentReduce=p,U.lineEach=b,U.lineReduce=h,U.findSegment=_,U.findPoint=a},77844:function(Q,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(43752),E=t(49840);function i(C,T){T===void 0&&(T={});var v=0,d=0,r=0;return M.coordEach(C,function(e){v+=e[0],d+=e[1],r++}),E.point([v/r,d/r],T.properties)}U.default=i},49840:function(Q,U){Object.defineProperty(U,"__esModule",{value:!0}),U.earthRadius=63710088e-1,U.factors={centimeters:U.earthRadius*100,centimetres:U.earthRadius*100,degrees:U.earthRadius/111325,feet:U.earthRadius*3.28084,inches:U.earthRadius*39.37,kilometers:U.earthRadius/1e3,kilometres:U.earthRadius/1e3,meters:U.earthRadius,metres:U.earthRadius,miles:U.earthRadius/1609.344,millimeters:U.earthRadius*1e3,millimetres:U.earthRadius*1e3,nauticalmiles:U.earthRadius/1852,radians:1,yards:U.earthRadius/1.0936},U.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/U.earthRadius,yards:.91441111923921},U.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(P,F,R){R===void 0&&(R={});var B={type:"Feature"};return(R.id===0||R.id)&&(B.id=R.id),R.bbox&&(B.bbox=R.bbox),B.properties=F||{},B.geometry=P,B}U.feature=t;function M(P,F,R){switch(P){case"Point":return E(F).geometry;case"LineString":return v(F).geometry;case"Polygon":return C(F).geometry;case"MultiPoint":return l(F).geometry;case"MultiLineString":return e(F).geometry;case"MultiPolygon":return n(F).geometry;default:throw new Error(P+" is invalid")}}U.geometry=M;function E(P,F,R){R===void 0&&(R={});var B={type:"Point",coordinates:P};return t(B,F,R)}U.point=E;function i(P,F,R){return R===void 0&&(R={}),r(P.map(function(B){return E(B,F)}),R)}U.points=i;function C(P,F,R){R===void 0&&(R={});for(var B=0,N=P;B<N.length;B++){var G=N[B];if(G.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<G[G.length-1].length;X++)if(G[G.length-1][X]!==G[0][X])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:P};return t(J,F,R)}U.polygon=C;function T(P,F,R){return R===void 0&&(R={}),r(P.map(function(B){return C(B,F)}),R)}U.polygons=T;function v(P,F,R){if(R===void 0&&(R={}),P.length<2)throw new Error("coordinates must be an array of two or more positions");var B={type:"LineString",coordinates:P};return t(B,F,R)}U.lineString=v;function d(P,F,R){return R===void 0&&(R={}),r(P.map(function(B){return v(B,F)}),R)}U.lineStrings=d;function r(P,F){F===void 0&&(F={});var R={type:"FeatureCollection"};return F.id&&(R.id=F.id),F.bbox&&(R.bbox=F.bbox),R.features=P,R}U.featureCollection=r;function e(P,F,R){R===void 0&&(R={});var B={type:"MultiLineString",coordinates:P};return t(B,F,R)}U.multiLineString=e;function l(P,F,R){R===void 0&&(R={});var B={type:"MultiPoint",coordinates:P};return t(B,F,R)}U.multiPoint=l;function n(P,F,R){R===void 0&&(R={});var B={type:"MultiPolygon",coordinates:P};return t(B,F,R)}U.multiPolygon=n;function s(P,F,R){R===void 0&&(R={});var B={type:"GeometryCollection",geometries:P};return t(B,F,R)}U.geometryCollection=s;function o(P,F){if(F===void 0&&(F=0),F&&!(F>=0))throw new Error("precision must be a positive number");var R=Math.pow(10,F||0);return Math.round(P*R)/R}U.round=o;function p(P,F){F===void 0&&(F="kilometers");var R=U.factors[F];if(!R)throw new Error(F+" units is invalid");return P*R}U.radiansToLength=p;function b(P,F){F===void 0&&(F="kilometers");var R=U.factors[F];if(!R)throw new Error(F+" units is invalid");return P/R}U.lengthToRadians=b;function h(P,F){return a(b(P,F))}U.lengthToDegrees=h;function _(P){var F=P%360;return F<0&&(F+=360),F}U.bearingToAzimuth=_;function a(P){var F=P%(2*Math.PI);return F*180/Math.PI}U.radiansToDegrees=a;function c(P){var F=P%360;return F*Math.PI/180}U.degreesToRadians=c;function f(P,F,R){if(F===void 0&&(F="kilometers"),R===void 0&&(R="kilometers"),!(P>=0))throw new Error("length must be a positive number");return p(b(P,F),R)}U.convertLength=f;function x(P,F,R){if(F===void 0&&(F="meters"),R===void 0&&(R="kilometers"),!(P>=0))throw new Error("area must be a positive number");var B=U.areaFactors[F];if(!B)throw new Error("invalid original units");var N=U.areaFactors[R];if(!N)throw new Error("invalid final units");return P/B*N}U.convertArea=x;function k(P){return!isNaN(P)&&P!==null&&!Array.isArray(P)&&!/^\s*$/.test(P)}U.isNumber=k;function y(P){return!!P&&P.constructor===Object}U.isObject=y;function A(P){if(!P)throw new Error("bbox is required");if(!Array.isArray(P))throw new Error("bbox must be an Array");if(P.length!==4&&P.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");P.forEach(function(F){if(!k(F))throw new Error("bbox must only contain numbers")})}U.validateBBox=A;function L(P){if(!P)throw new Error("id is required");if(["string","number"].indexOf(typeof P)===-1)throw new Error("id must be a number or a string")}U.validateId=L;function u(){throw new Error("method has been renamed to `radiansToDegrees`")}U.radians2degrees=u;function m(){throw new Error("method has been renamed to `degreesToRadians`")}U.degrees2radians=m;function S(){throw new Error("method has been renamed to `lengthToDegrees`")}U.distanceToDegrees=S;function w(){throw new Error("method has been renamed to `lengthToRadians`")}U.distanceToRadians=w;function I(){throw new Error("method has been renamed to `radiansToLength`")}U.radiansToDistance=I;function O(){throw new Error("method has been renamed to `bearingToAzimuth`")}U.bearingToAngle=O;function D(){throw new Error("method has been renamed to `convertLength`")}U.convertDistance=D},43752:function(Q,U,t){Object.defineProperty(U,"__esModule",{value:!0});var M=t(49840);function E(c,f,x){if(c!==null)for(var k,y,A,L,u,m,S,w=0,I=0,O,D=c.type,P=D==="FeatureCollection",F=D==="Feature",R=P?c.features.length:1,B=0;B<R;B++){S=P?c.features[B].geometry:F?c.geometry:c,O=S?S.type==="GeometryCollection":!1,u=O?S.geometries.length:1;for(var N=0;N<u;N++){var G=0,X=0;if(L=O?S.geometries[N]:S,L!==null){m=L.coordinates;var J=L.type;switch(w=x&&(J==="Polygon"||J==="MultiPolygon")?1:0,J){case null:break;case"Point":if(f(m,I,B,G,X)===!1)return!1;I++,G++;break;case"LineString":case"MultiPoint":for(k=0;k<m.length;k++){if(f(m[k],I,B,G,X)===!1)return!1;I++,J==="MultiPoint"&&G++}J==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(k=0;k<m.length;k++){for(y=0;y<m[k].length-w;y++){if(f(m[k][y],I,B,G,X)===!1)return!1;I++}J==="MultiLineString"&&G++,J==="Polygon"&&X++}J==="Polygon"&&G++;break;case"MultiPolygon":for(k=0;k<m.length;k++){for(X=0,y=0;y<m[k].length;y++){for(A=0;A<m[k][y].length-w;A++){if(f(m[k][y][A],I,B,G,X)===!1)return!1;I++}X++}G++}break;case"GeometryCollection":for(k=0;k<L.geometries.length;k++)if(E(L.geometries[k],f,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(c,f,x,k){var y=x;return E(c,function(A,L,u,m,S){L===0&&x===void 0?y=A:y=f(y,A,L,u,m,S)},k),y}function C(c,f){var x;switch(c.type){case"FeatureCollection":for(x=0;x<c.features.length&&f(c.features[x].properties,x)!==!1;x++);break;case"Feature":f(c.properties,0);break}}function T(c,f,x){var k=x;return C(c,function(y,A){A===0&&x===void 0?k=y:k=f(k,y,A)}),k}function v(c,f){if(c.type==="Feature")f(c,0);else if(c.type==="FeatureCollection")for(var x=0;x<c.features.length&&f(c.features[x],x)!==!1;x++);}function d(c,f,x){var k=x;return v(c,function(y,A){A===0&&x===void 0?k=y:k=f(k,y,A)}),k}function r(c){var f=[];return E(c,function(x){f.push(x)}),f}function e(c,f){var x,k,y,A,L,u,m,S,w,I,O=0,D=c.type==="FeatureCollection",P=c.type==="Feature",F=D?c.features.length:1;for(x=0;x<F;x++){for(u=D?c.features[x].geometry:P?c.geometry:c,S=D?c.features[x].properties:P?c.properties:{},w=D?c.features[x].bbox:P?c.bbox:void 0,I=D?c.features[x].id:P?c.id:void 0,m=u?u.type==="GeometryCollection":!1,L=m?u.geometries.length:1,y=0;y<L;y++){if(A=m?u.geometries[y]:u,A===null){if(f(null,O,S,w,I)===!1)return!1;continue}switch(A.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(f(A,O,S,w,I)===!1)return!1;break}case"GeometryCollection":{for(k=0;k<A.geometries.length;k++)if(f(A.geometries[k],O,S,w,I)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function l(c,f,x){var k=x;return e(c,function(y,A,L,u,m){A===0&&x===void 0?k=y:k=f(k,y,A,L,u,m)}),k}function n(c,f){e(c,function(x,k,y,A,L){var u=x===null?null:x.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return f(M.feature(x,y,{bbox:A,id:L}),k,0)===!1?!1:void 0}var m;switch(u){case"MultiPoint":m="Point";break;case"MultiLineString":m="LineString";break;case"MultiPolygon":m="Polygon";break}for(var S=0;S<x.coordinates.length;S++){var w=x.coordinates[S],I={type:m,coordinates:w};if(f(M.feature(I,y),k,S)===!1)return!1}})}function s(c,f,x){var k=x;return n(c,function(y,A,L){A===0&&L===0&&x===void 0?k=y:k=f(k,y,A,L)}),k}function o(c,f){n(c,function(x,k,y){var A=0;if(x.geometry){var L=x.geometry.type;if(!(L==="Point"||L==="MultiPoint")){var u,m=0,S=0,w=0;if(E(x,function(I,O,D,P,F){if(u===void 0||k>m||P>S||F>w){u=I,m=k,S=P,w=F,A=0;return}var R=M.lineString([u,I],x.properties);if(f(R,k,y,F,A)===!1)return!1;A++,u=I})===!1)return!1}}})}function p(c,f,x){var k=x,y=!1;return o(c,function(A,L,u,m,S){y===!1&&x===void 0?k=A:k=f(k,A,L,u,m,S),y=!0}),k}function b(c,f){if(!c)throw new Error("geojson is required");n(c,function(x,k,y){if(x.geometry!==null){var A=x.geometry.type,L=x.geometry.coordinates;switch(A){case"LineString":if(f(x,k,y,0,0)===!1)return!1;break;case"Polygon":for(var u=0;u<L.length;u++)if(f(M.lineString(L[u],x.properties),k,y,u)===!1)return!1;break}}})}function h(c,f,x){var k=x;return b(c,function(y,A,L,u){A===0&&x===void 0?k=y:k=f(k,y,A,L,u)}),k}function _(c,f){if(f=f||{},!M.isObject(f))throw new Error("options is invalid");var x=f.featureIndex||0,k=f.multiFeatureIndex||0,y=f.geometryIndex||0,A=f.segmentIndex||0,L=f.properties,u;switch(c.type){case"FeatureCollection":x<0&&(x=c.features.length+x),L=L||c.features[x].properties,u=c.features[x].geometry;break;case"Feature":L=L||c.properties,u=c.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=c;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var m=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return A<0&&(A=m.length+A-1),M.lineString([m[A],m[A+1]],L,f);case"Polygon":return y<0&&(y=m.length+y),A<0&&(A=m[y].length+A-1),M.lineString([m[y][A],m[y][A+1]],L,f);case"MultiLineString":return k<0&&(k=m.length+k),A<0&&(A=m[k].length+A-1),M.lineString([m[k][A],m[k][A+1]],L,f);case"MultiPolygon":return k<0&&(k=m.length+k),y<0&&(y=m[k].length+y),A<0&&(A=m[k][y].length-A-1),M.lineString([m[k][y][A],m[k][y][A+1]],L,f)}throw new Error("geojson is invalid")}function a(c,f){if(f=f||{},!M.isObject(f))throw new Error("options is invalid");var x=f.featureIndex||0,k=f.multiFeatureIndex||0,y=f.geometryIndex||0,A=f.coordIndex||0,L=f.properties,u;switch(c.type){case"FeatureCollection":x<0&&(x=c.features.length+x),L=L||c.features[x].properties,u=c.features[x].geometry;break;case"Feature":L=L||c.properties,u=c.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=c;break;default:throw new Error("geojson is invalid")}if(u===null)return null;var m=u.coordinates;switch(u.type){case"Point":return M.point(m,L,f);case"MultiPoint":return k<0&&(k=m.length+k),M.point(m[k],L,f);case"LineString":return A<0&&(A=m.length+A),M.point(m[A],L,f);case"Polygon":return y<0&&(y=m.length+y),A<0&&(A=m[y].length+A),M.point(m[y][A],L,f);case"MultiLineString":return k<0&&(k=m.length+k),A<0&&(A=m[k].length+A),M.point(m[k][A],L,f);case"MultiPolygon":return k<0&&(k=m.length+k),y<0&&(y=m[k].length+y),A<0&&(A=m[k][y].length-A),M.point(m[k][y][A],L,f)}throw new Error("geojson is invalid")}U.coordEach=E,U.coordReduce=i,U.propEach=C,U.propReduce=T,U.featureEach=v,U.featureReduce=d,U.coordAll=r,U.geomEach=e,U.geomReduce=l,U.flattenEach=n,U.flattenReduce=s,U.segmentEach=o,U.segmentReduce=p,U.lineEach=b,U.lineReduce=h,U.findSegment=_,U.findPoint=a},49972:function(Q){Q.exports=U;function U(t){var M=0,E=0,i=0,C=0;return t.map(function(T){T=T.slice();var v=T[0],d=v.toUpperCase();if(v!=d)switch(T[0]=d,v){case"a":T[6]+=i,T[7]+=C;break;case"v":T[1]+=C;break;case"h":T[1]+=i;break;default:for(var r=1;r<T.length;)T[r++]+=i,T[r++]+=C}switch(d){case"Z":i=M,C=E;break;case"H":i=T[1];break;case"V":C=T[1];break;case"M":i=M=T[1],C=E=T[2];break;default:i=T[T.length-2],C=T[T.length-1]}return T})}},76752:function(Q){Q.exports=U;function U(t,M){if(!t||t.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var E=Array(M*2),i=0;i<M;i++){for(var C=-1/0,T=1/0,v=i,d=t.length;v<d;v+=M)t[v]>C&&(C=t[v]),t[v]<T&&(T=t[v]);E[i]=T,E[M+i]=C}return E}},10272:function(Q){Q.exports=function(U,t,M){if(typeof Array.prototype.findIndex=="function")return U.findIndex(t,M);if(typeof t!="function")throw new TypeError("predicate must be a function");var E=Object(U),i=E.length;if(i===0)return-1;for(var C=0;C<i;C++)if(t.call(M,E[C],C,E))return C;return-1}},71152:function(Q,U,t){var M=t(76752);Q.exports=E;function E(i,C,T){if(!i||i.length==null)throw Error("Argument should be an array");C==null&&(C=1),T==null&&(T=M(i,C));for(var v=0;v<C;v++){var d=T[C+v],r=T[v],e=v,l=i.length;if(d===1/0&&r===-1/0)for(e=v;e<l;e+=C)i[e]=i[e]===d?1:i[e]===r?0:.5;else if(d===1/0)for(e=v;e<l;e+=C)i[e]=i[e]===d?1:0;else if(r===-1/0)for(e=v;e<l;e+=C)i[e]=i[e]===r?0:1;else{var n=d-r;for(e=v;e<l;e+=C)isNaN(i[e])||(i[e]=n===0?.5:(i[e]-r)/n)}}return i}},67752:function(Q){Q.exports=function(U,t){var M=typeof U=="number",E=typeof t=="number";M&&!E?(t=U,U=0):!M&&!E&&(U=0,t=0),U=U|0,t=t|0;var i=t-U;if(i<0)throw new Error("array length must be positive");for(var C=new Array(i),T=0,v=U;T<i;T++,v++)C[T]=v;return C}},45408:function(Q,U,t){var M=t(4168);function E(X){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(J){return typeof J}:E=function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},E(X)}function i(X,J){if(!(X instanceof J))throw new TypeError("Cannot call a class as a function")}var C=t(86832),T=C.codes,v=T.ERR_AMBIGUOUS_ARGUMENT,d=T.ERR_INVALID_ARG_TYPE,r=T.ERR_INVALID_ARG_VALUE,e=T.ERR_INVALID_RETURN_VALUE,l=T.ERR_MISSING_ARGS,n=t(26144),s=t(35840),o=s.inspect,p=t(35840).types,b=p.isPromise,h=p.isRegExp,_=Object.assign?Object.assign:t(60964).assign,a=Object.is?Object.is:t(39896),c,f;function x(){var X=t(25116);c=X.isDeepEqual,f=X.isDeepStrictEqual}var k=!1,y=Q.exports=S,A={};function L(X){throw X.message instanceof Error?X.message:new n(X)}function u(X,J,it,nt,q){var Z=arguments.length,$;if(Z===0)$="Failed";else if(Z===1)it=X,X=void 0;else{if(k===!1){k=!0;var V=M.emitWarning?M.emitWarning:console.warn.bind(console);V("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}Z===2&&(nt="!=")}if(it instanceof Error)throw it;var rt={actual:X,expected:J,operator:nt===void 0?"fail":nt,stackStartFn:q||u};it!==void 0&&(rt.message=it);var ot=new n(rt);throw $&&(ot.message=$,ot.generatedMessage=!0),ot}y.fail=u,y.AssertionError=n;function m(X,J,it,nt){if(!it){var q=!1;if(J===0)q=!0,nt="No value argument passed to `assert.ok()`";else if(nt instanceof Error)throw nt;var Z=new n({actual:it,expected:!0,message:nt,operator:"==",stackStartFn:X});throw Z.generatedMessage=q,Z}}function S(){for(var X=arguments.length,J=new Array(X),it=0;it<X;it++)J[it]=arguments[it];m.apply(void 0,[S,J.length].concat(J))}y.ok=S,y.equal=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");J!=it&&L({actual:J,expected:it,message:nt,operator:"==",stackStartFn:X})},y.notEqual=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");J==it&&L({actual:J,expected:it,message:nt,operator:"!=",stackStartFn:X})},y.deepEqual=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");c===void 0&&x(),c(J,it)||L({actual:J,expected:it,message:nt,operator:"deepEqual",stackStartFn:X})},y.notDeepEqual=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");c===void 0&&x(),c(J,it)&&L({actual:J,expected:it,message:nt,operator:"notDeepEqual",stackStartFn:X})},y.deepStrictEqual=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");c===void 0&&x(),f(J,it)||L({actual:J,expected:it,message:nt,operator:"deepStrictEqual",stackStartFn:X})},y.notDeepStrictEqual=w;function w(X,J,it){if(arguments.length<2)throw new l("actual","expected");c===void 0&&x(),f(X,J)&&L({actual:X,expected:J,message:it,operator:"notDeepStrictEqual",stackStartFn:w})}y.strictEqual=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");a(J,it)||L({actual:J,expected:it,message:nt,operator:"strictEqual",stackStartFn:X})},y.notStrictEqual=function X(J,it,nt){if(arguments.length<2)throw new l("actual","expected");a(J,it)&&L({actual:J,expected:it,message:nt,operator:"notStrictEqual",stackStartFn:X})};var I=function X(J,it,nt){var q=this;i(this,X),it.forEach(function(Z){Z in J&&(nt!==void 0&&typeof nt[Z]=="string"&&h(J[Z])&&J[Z].test(nt[Z])?q[Z]=nt[Z]:q[Z]=J[Z])})};function O(X,J,it,nt,q,Z){if(!(it in X)||!f(X[it],J[it])){if(!nt){var $=new I(X,q),V=new I(J,q,X),rt=new n({actual:$,expected:V,operator:"deepStrictEqual",stackStartFn:Z});throw rt.actual=X,rt.expected=J,rt.operator=Z.name,rt}L({actual:X,expected:J,message:nt,operator:Z.name,stackStartFn:Z})}}function D(X,J,it,nt){if(typeof J!="function"){if(h(J))return J.test(X);if(arguments.length===2)throw new d("expected",["Function","RegExp"],J);if(E(X)!=="object"||X===null){var q=new n({actual:X,expected:J,message:it,operator:"deepStrictEqual",stackStartFn:nt});throw q.operator=nt.name,q}var Z=Object.keys(J);if(J instanceof Error)Z.push("name","message");else if(Z.length===0)throw new r("error",J,"may not be an empty object");return c===void 0&&x(),Z.forEach(function($){typeof X[$]=="string"&&h(J[$])&&J[$].test(X[$])||O(X,J,$,it,Z,nt)}),!0}return J.prototype!==void 0&&X instanceof J?!0:Error.isPrototypeOf(J)?!1:J.call({},X)===!0}function P(X){if(typeof X!="function")throw new d("fn","Function",X);try{X()}catch(J){return J}return A}function F(X){return b(X)||X!==null&&E(X)==="object"&&typeof X.then=="function"&&typeof X.catch=="function"}function R(X){return Promise.resolve().then(function(){var J;if(typeof X=="function"){if(J=X(),!F(J))throw new e("instance of Promise","promiseFn",J)}else if(F(X))J=X;else throw new d("promiseFn",["Function","Promise"],X);return Promise.resolve().then(function(){return J}).then(function(){return A}).catch(function(it){return it})})}function B(X,J,it,nt){if(typeof it=="string"){if(arguments.length===4)throw new d("error",["Object","Error","Function","RegExp"],it);if(E(J)==="object"&&J!==null){if(J.message===it)throw new v("error/message",'The error message "'.concat(J.message,'" is identical to the message.'))}else if(J===it)throw new v("error/message",'The error "'.concat(J,'" is identical to the message.'));nt=it,it=void 0}else if(it!=null&&E(it)!=="object"&&typeof it!="function")throw new d("error",["Object","Error","Function","RegExp"],it);if(J===A){var q="";it&&it.name&&(q+=" (".concat(it.name,")")),q+=nt?": ".concat(nt):".";var Z=X.name==="rejects"?"rejection":"exception";L({actual:void 0,expected:it,operator:X.name,message:"Missing expected ".concat(Z).concat(q),stackStartFn:X})}if(it&&!D(J,it,nt,X))throw J}function N(X,J,it,nt){if(J!==A){if(typeof it=="string"&&(nt=it,it=void 0),!it||D(J,it)){var q=nt?": ".concat(nt):".",Z=X.name==="doesNotReject"?"rejection":"exception";L({actual:J,expected:it,operator:X.name,message:"Got unwanted ".concat(Z).concat(q,`
`)+'Actual message: "'.concat(J&&J.message,'"'),stackStartFn:X})}throw J}}y.throws=function X(J){for(var it=arguments.length,nt=new Array(it>1?it-1:0),q=1;q<it;q++)nt[q-1]=arguments[q];B.apply(void 0,[X,P(J)].concat(nt))},y.rejects=function X(J){for(var it=arguments.length,nt=new Array(it>1?it-1:0),q=1;q<it;q++)nt[q-1]=arguments[q];return R(J).then(function(Z){return B.apply(void 0,[X,Z].concat(nt))})},y.doesNotThrow=function X(J){for(var it=arguments.length,nt=new Array(it>1?it-1:0),q=1;q<it;q++)nt[q-1]=arguments[q];N.apply(void 0,[X,P(J)].concat(nt))},y.doesNotReject=function X(J){for(var it=arguments.length,nt=new Array(it>1?it-1:0),q=1;q<it;q++)nt[q-1]=arguments[q];return R(J).then(function(Z){return N.apply(void 0,[X,Z].concat(nt))})},y.ifError=function X(J){if(J!=null){var it="ifError got unwanted exception: ";E(J)==="object"&&typeof J.message=="string"?J.message.length===0&&J.constructor?it+=J.constructor.name:it+=J.message:it+=o(J);var nt=new n({actual:J,expected:null,operator:"ifError",message:it,stackStartFn:X}),q=J.stack;if(typeof q=="string"){var Z=q.split(`
`);Z.shift();for(var $=nt.stack.split(`
`),V=0;V<Z.length;V++){var rt=$.indexOf(Z[V]);if(rt!==-1){$=$.slice(0,rt);break}}nt.stack="".concat($.join(`
`),`
`).concat(Z.join(`
`))}throw nt}};function G(){for(var X=arguments.length,J=new Array(X),it=0;it<X;it++)J[it]=arguments[it];m.apply(void 0,[G,J.length].concat(J))}y.strict=_(G,y,{equal:y.strictEqual,deepEqual:y.deepStrictEqual,notEqual:y.notStrictEqual,notDeepEqual:y.notDeepStrictEqual}),y.strict.strict=y.strict},26144:function(Q,U,t){var M=t(4168);function E(P){for(var F=1;F<arguments.length;F++){var R=arguments[F]!=null?arguments[F]:{},B=Object.keys(R);typeof Object.getOwnPropertySymbols=="function"&&(B=B.concat(Object.getOwnPropertySymbols(R).filter(function(N){return Object.getOwnPropertyDescriptor(R,N).enumerable}))),B.forEach(function(N){i(P,N,R[N])})}return P}function i(P,F,R){return F in P?Object.defineProperty(P,F,{value:R,enumerable:!0,configurable:!0,writable:!0}):P[F]=R,P}function C(P,F){if(!(P instanceof F))throw new TypeError("Cannot call a class as a function")}function T(P,F){for(var R=0;R<F.length;R++){var B=F[R];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(P,B.key,B)}}function v(P,F,R){return F&&T(P.prototype,F),R&&T(P,R),P}function d(P,F){return F&&(h(F)==="object"||typeof F=="function")?F:r(P)}function r(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function e(P,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(F&&F.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),F&&p(P,F)}function l(P){var F=typeof Map=="function"?new Map:void 0;return l=function(R){if(R===null||!o(R))return R;if(typeof R!="function")throw new TypeError("Super expression must either be null or a function");if(typeof F<"u"){if(F.has(R))return F.get(R);F.set(R,B)}function B(){return s(R,arguments,b(this).constructor)}return B.prototype=Object.create(R.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),p(B,R)},l(P)}function n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function s(P,F,R){return n()?s=Reflect.construct:s=function(B,N,G){var X=[null];X.push.apply(X,N);var J=Function.bind.apply(B,X),it=new J;return G&&p(it,G.prototype),it},s.apply(null,arguments)}function o(P){return Function.toString.call(P).indexOf("[native code]")!==-1}function p(P,F){return p=Object.setPrototypeOf||function(R,B){return R.__proto__=B,R},p(P,F)}function b(P){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},b(P)}function h(P){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(F){return typeof F}:h=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},h(P)}var _=t(35840),a=_.inspect,c=t(86832),f=c.codes.ERR_INVALID_ARG_TYPE;function x(P,F,R){return(R===void 0||R>P.length)&&(R=P.length),P.substring(R-F.length,R)===F}function k(P,F){if(F=Math.floor(F),P.length==0||F==0)return"";var R=P.length*F;for(F=Math.floor(Math.log(F)/Math.log(2));F;)P+=P,F--;return P+=P.substring(0,R-P.length),P}var y="",A="",L="",u="",m={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},S=10;function w(P){var F=Object.keys(P),R=Object.create(Object.getPrototypeOf(P));return F.forEach(function(B){R[B]=P[B]}),Object.defineProperty(R,"message",{value:P.message}),R}function I(P){return a(P,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function O(P,F,R){var B="",N="",G=0,X="",J=!1,it=I(P),nt=it.split(`
`),q=I(F).split(`
`),Z=0,$="";if(R==="strictEqual"&&h(P)==="object"&&h(F)==="object"&&P!==null&&F!==null&&(R="strictEqualObject"),nt.length===1&&q.length===1&&nt[0]!==q[0]){var V=nt[0].length+q[0].length;if(V<=S){if((h(P)!=="object"||P===null)&&(h(F)!=="object"||F===null)&&(P!==0||F!==0))return"".concat(m[R],`

`)+"".concat(nt[0]," !== ").concat(q[0],`
`)}else if(R!=="strictEqualObject"){var rt=M.stderr&&M.stderr.isTTY?M.stderr.columns:80;if(V<rt){for(;nt[0][Z]===q[0][Z];)Z++;Z>2&&($=`
  `.concat(k(" ",Z),"^"),Z=0)}}}for(var ot=nt[nt.length-1],H=q[q.length-1];ot===H&&(Z++<2?X=`
  `.concat(ot).concat(X):B=ot,nt.pop(),q.pop(),!(nt.length===0||q.length===0));)ot=nt[nt.length-1],H=q[q.length-1];var Y=Math.max(nt.length,q.length);if(Y===0){var at=it.split(`
`);if(at.length>30)for(at[26]="".concat(y,"...").concat(u);at.length>27;)at.pop();return"".concat(m.notIdentical,`

`).concat(at.join(`
`),`
`)}Z>3&&(X=`
`.concat(y,"...").concat(u).concat(X),J=!0),B!==""&&(X=`
  `.concat(B).concat(X),B="");var et=0,ct=m[R]+`
`.concat(A,"+ actual").concat(u," ").concat(L,"- expected").concat(u),ft=" ".concat(y,"...").concat(u," Lines skipped");for(Z=0;Z<Y;Z++){var yt=Z-G;if(nt.length<Z+1)yt>1&&Z>2&&(yt>4?(N+=`
`.concat(y,"...").concat(u),J=!0):yt>3&&(N+=`
  `.concat(q[Z-2]),et++),N+=`
  `.concat(q[Z-1]),et++),G=Z,B+=`
`.concat(L,"-").concat(u," ").concat(q[Z]),et++;else if(q.length<Z+1)yt>1&&Z>2&&(yt>4?(N+=`
`.concat(y,"...").concat(u),J=!0):yt>3&&(N+=`
  `.concat(nt[Z-2]),et++),N+=`
  `.concat(nt[Z-1]),et++),G=Z,N+=`
`.concat(A,"+").concat(u," ").concat(nt[Z]),et++;else{var xt=q[Z],Ct=nt[Z],gt=Ct!==xt&&(!x(Ct,",")||Ct.slice(0,-1)!==xt);gt&&x(xt,",")&&xt.slice(0,-1)===Ct&&(gt=!1,Ct+=","),gt?(yt>1&&Z>2&&(yt>4?(N+=`
`.concat(y,"...").concat(u),J=!0):yt>3&&(N+=`
  `.concat(nt[Z-2]),et++),N+=`
  `.concat(nt[Z-1]),et++),G=Z,N+=`
`.concat(A,"+").concat(u," ").concat(Ct),B+=`
`.concat(L,"-").concat(u," ").concat(xt),et+=2):(N+=B,B="",(yt===1||Z===0)&&(N+=`
  `.concat(Ct),et++))}if(et>20&&Z<Y-2)return"".concat(ct).concat(ft,`
`).concat(N,`
`).concat(y,"...").concat(u).concat(B,`
`)+"".concat(y,"...").concat(u)}return"".concat(ct).concat(J?ft:"",`
`).concat(N).concat(B).concat(X).concat($)}var D=function(P){e(F,P);function F(R){var B;if(C(this,F),h(R)!=="object"||R===null)throw new f("options","Object",R);var N=R.message,G=R.operator,X=R.stackStartFn,J=R.actual,it=R.expected,nt=Error.stackTraceLimit;if(Error.stackTraceLimit=0,N!=null)B=d(this,b(F).call(this,String(N)));else if(M.stderr&&M.stderr.isTTY&&(M.stderr&&M.stderr.getColorDepth&&M.stderr.getColorDepth()!==1?(y="\x1B[34m",A="\x1B[32m",u="\x1B[39m",L="\x1B[31m"):(y="",A="",u="",L="")),h(J)==="object"&&J!==null&&h(it)==="object"&&it!==null&&"stack"in J&&J instanceof Error&&"stack"in it&&it instanceof Error&&(J=w(J),it=w(it)),G==="deepStrictEqual"||G==="strictEqual")B=d(this,b(F).call(this,O(J,it,G)));else if(G==="notDeepStrictEqual"||G==="notStrictEqual"){var q=m[G],Z=I(J).split(`
`);if(G==="notStrictEqual"&&h(J)==="object"&&J!==null&&(q=m.notStrictEqualObject),Z.length>30)for(Z[26]="".concat(y,"...").concat(u);Z.length>27;)Z.pop();Z.length===1?B=d(this,b(F).call(this,"".concat(q," ").concat(Z[0]))):B=d(this,b(F).call(this,"".concat(q,`

`).concat(Z.join(`
`),`
`)))}else{var $=I(J),V="",rt=m[G];G==="notDeepEqual"||G==="notEqual"?($="".concat(m[G],`

`).concat($),$.length>1024&&($="".concat($.slice(0,1021),"..."))):(V="".concat(I(it)),$.length>512&&($="".concat($.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),G==="deepEqual"||G==="equal"?$="".concat(rt,`

`).concat($,`

should equal

`):V=" ".concat(G," ").concat(V)),B=d(this,b(F).call(this,"".concat($).concat(V)))}return Error.stackTraceLimit=nt,B.generatedMessage=!N,Object.defineProperty(r(B),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),B.code="ERR_ASSERTION",B.actual=J,B.expected=it,B.operator=G,Error.captureStackTrace&&Error.captureStackTrace(r(B),X),B.stack,B.name="AssertionError",d(B)}return v(F,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:a.custom,value:function(R,B){return a(this,E({},B,{customInspect:!1,depth:0}))}}]),F}(l(Error));Q.exports=D},86832:function(Q,U,t){function M(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(_){return typeof _}:M=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},M(h)}function E(h,_){if(!(h instanceof _))throw new TypeError("Cannot call a class as a function")}function i(h,_){return _&&(M(_)==="object"||typeof _=="function")?_:C(h)}function C(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function T(h){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},T(h)}function v(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(_&&_.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),_&&d(h,_)}function d(h,_){return d=Object.setPrototypeOf||function(a,c){return a.__proto__=c,a},d(h,_)}var r={},e,l;function n(h,_,a){a||(a=Error);function c(x,k,y){return typeof _=="string"?_:_(x,k,y)}var f=function(x){v(k,x);function k(y,A,L){var u;return E(this,k),u=i(this,T(k).call(this,c(y,A,L))),u.code=h,u}return k}(a);r[h]=f}function s(h,_){if(Array.isArray(h)){var a=h.length;return h=h.map(function(c){return String(c)}),a>2?"one of ".concat(_," ").concat(h.slice(0,a-1).join(", "),", or ")+h[a-1]:a===2?"one of ".concat(_," ").concat(h[0]," or ").concat(h[1]):"of ".concat(_," ").concat(h[0])}else return"of ".concat(_," ").concat(String(h))}function o(h,_,a){return h.substr(!a||a<0?0:+a,_.length)===_}function p(h,_,a){return(a===void 0||a>h.length)&&(a=h.length),h.substring(a-_.length,a)===_}function b(h,_,a){return typeof a!="number"&&(a=0),a+_.length>h.length?!1:h.indexOf(_,a)!==-1}n("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),n("ERR_INVALID_ARG_TYPE",function(h,_,a){e===void 0&&(e=t(45408)),e(typeof h=="string","'name' must be a string");var c;typeof _=="string"&&o(_,"not ")?(c="must not be",_=_.replace(/^not /,"")):c="must be";var f;if(p(h," argument"))f="The ".concat(h," ").concat(c," ").concat(s(_,"type"));else{var x=b(h,".")?"property":"argument";f='The "'.concat(h,'" ').concat(x," ").concat(c," ").concat(s(_,"type"))}return f+=". Received type ".concat(M(a)),f},TypeError),n("ERR_INVALID_ARG_VALUE",function(h,_){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";l===void 0&&(l=t(35840));var c=l.inspect(_);return c.length>128&&(c="".concat(c.slice(0,128),"...")),"The argument '".concat(h,"' ").concat(a,". Received ").concat(c)},TypeError),n("ERR_INVALID_RETURN_VALUE",function(h,_,a){var c;return a&&a.constructor&&a.constructor.name?c="instance of ".concat(a.constructor.name):c="type ".concat(M(a)),"Expected ".concat(h,' to be returned from the "').concat(_,'"')+" function but got ".concat(c,".")},TypeError),n("ERR_MISSING_ARGS",function(){for(var h=arguments.length,_=new Array(h),a=0;a<h;a++)_[a]=arguments[a];e===void 0&&(e=t(45408)),e(_.length>0,"At least one arg needs to be specified");var c="The ",f=_.length;switch(_=_.map(function(x){return'"'.concat(x,'"')}),f){case 1:c+="".concat(_[0]," argument");break;case 2:c+="".concat(_[0]," and ").concat(_[1]," arguments");break;default:c+=_.slice(0,f-1).join(", "),c+=", and ".concat(_[f-1]," arguments");break}return"".concat(c," must be specified")},TypeError),Q.exports.codes=r},25116:function(Q,U,t){function M(mt,vt){return C(mt)||i(mt,vt)||E()}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function i(mt,vt){var At=[],Ot=!0,It=!1,St=void 0;try{for(var Bt=mt[Symbol.iterator](),re;!(Ot=(re=Bt.next()).done)&&(At.push(re.value),!(vt&&At.length===vt));Ot=!0);}catch(Yt){It=!0,St=Yt}finally{try{!Ot&&Bt.return!=null&&Bt.return()}finally{if(It)throw St}}return At}function C(mt){if(Array.isArray(mt))return mt}function T(mt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(vt){return typeof vt}:T=function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt},T(mt)}var v=/a/g.flags!==void 0,d=function(mt){var vt=[];return mt.forEach(function(At){return vt.push(At)}),vt},r=function(mt){var vt=[];return mt.forEach(function(At,Ot){return vt.push([Ot,At])}),vt},e=Object.is?Object.is:t(39896),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},n=Number.isNaN?Number.isNaN:t(1560);function s(mt){return mt.call.bind(mt)}var o=s(Object.prototype.hasOwnProperty),p=s(Object.prototype.propertyIsEnumerable),b=s(Object.prototype.toString),h=t(35840).types,_=h.isAnyArrayBuffer,a=h.isArrayBufferView,c=h.isDate,f=h.isMap,x=h.isRegExp,k=h.isSet,y=h.isNativeError,A=h.isBoxedPrimitive,L=h.isNumberObject,u=h.isStringObject,m=h.isBooleanObject,S=h.isBigIntObject,w=h.isSymbolObject,I=h.isFloat32Array,O=h.isFloat64Array;function D(mt){if(mt.length===0||mt.length>10)return!0;for(var vt=0;vt<mt.length;vt++){var At=mt.charCodeAt(vt);if(At<48||At>57)return!0}return mt.length===10&&mt>=Math.pow(2,32)}function P(mt){return Object.keys(mt).filter(D).concat(l(mt).filter(Object.prototype.propertyIsEnumerable.bind(mt)))}/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
* @license  MIT
*/function F(mt,vt){if(mt===vt)return 0;for(var At=mt.length,Ot=vt.length,It=0,St=Math.min(At,Ot);It<St;++It)if(mt[It]!==vt[It]){At=mt[It],Ot=vt[It];break}return At<Ot?-1:Ot<At?1:0}var R=!0,B=!1,N=0,G=1,X=2,J=3;function it(mt,vt){return v?mt.source===vt.source&&mt.flags===vt.flags:RegExp.prototype.toString.call(mt)===RegExp.prototype.toString.call(vt)}function nt(mt,vt){if(mt.byteLength!==vt.byteLength)return!1;for(var At=0;At<mt.byteLength;At++)if(mt[At]!==vt[At])return!1;return!0}function q(mt,vt){return mt.byteLength!==vt.byteLength?!1:F(new Uint8Array(mt.buffer,mt.byteOffset,mt.byteLength),new Uint8Array(vt.buffer,vt.byteOffset,vt.byteLength))===0}function Z(mt,vt){return mt.byteLength===vt.byteLength&&F(new Uint8Array(mt),new Uint8Array(vt))===0}function $(mt,vt){return L(mt)?L(vt)&&e(Number.prototype.valueOf.call(mt),Number.prototype.valueOf.call(vt)):u(mt)?u(vt)&&String.prototype.valueOf.call(mt)===String.prototype.valueOf.call(vt):m(mt)?m(vt)&&Boolean.prototype.valueOf.call(mt)===Boolean.prototype.valueOf.call(vt):S(mt)?S(vt)&&BigInt.prototype.valueOf.call(mt)===BigInt.prototype.valueOf.call(vt):w(vt)&&Symbol.prototype.valueOf.call(mt)===Symbol.prototype.valueOf.call(vt)}function V(mt,vt,At,Ot){if(mt===vt)return mt!==0?!0:At?e(mt,vt):!0;if(At){if(T(mt)!=="object")return typeof mt=="number"&&n(mt)&&n(vt);if(T(vt)!=="object"||mt===null||vt===null||Object.getPrototypeOf(mt)!==Object.getPrototypeOf(vt))return!1}else{if(mt===null||T(mt)!=="object")return vt===null||T(vt)!=="object"?mt==vt:!1;if(vt===null||T(vt)!=="object")return!1}var It=b(mt),St=b(vt);if(It!==St)return!1;if(Array.isArray(mt)){if(mt.length!==vt.length)return!1;var Bt=P(mt),re=P(vt);return Bt.length!==re.length?!1:ot(mt,vt,At,Ot,G,Bt)}if(It==="[object Object]"&&(!f(mt)&&f(vt)||!k(mt)&&k(vt)))return!1;if(c(mt)){if(!c(vt)||Date.prototype.getTime.call(mt)!==Date.prototype.getTime.call(vt))return!1}else if(x(mt)){if(!x(vt)||!it(mt,vt))return!1}else if(y(mt)||mt instanceof Error){if(mt.message!==vt.message||mt.name!==vt.name)return!1}else if(a(mt)){if(!At&&(I(mt)||O(mt))){if(!nt(mt,vt))return!1}else if(!q(mt,vt))return!1;var Yt=P(mt),he=P(vt);return Yt.length!==he.length?!1:ot(mt,vt,At,Ot,N,Yt)}else{if(k(mt))return!k(vt)||mt.size!==vt.size?!1:ot(mt,vt,At,Ot,X);if(f(mt))return!f(vt)||mt.size!==vt.size?!1:ot(mt,vt,At,Ot,J);if(_(mt)){if(!Z(mt,vt))return!1}else if(A(mt)&&!$(mt,vt))return!1}return ot(mt,vt,At,Ot,N)}function rt(mt,vt){return vt.filter(function(At){return p(mt,At)})}function ot(mt,vt,At,Ot,It,St){if(arguments.length===5){St=Object.keys(mt);var Bt=Object.keys(vt);if(St.length!==Bt.length)return!1}for(var re=0;re<St.length;re++)if(!o(vt,St[re]))return!1;if(At&&arguments.length===5){var Yt=l(mt);if(Yt.length!==0){var he=0;for(re=0;re<Yt.length;re++){var Zt=Yt[re];if(p(mt,Zt)){if(!p(vt,Zt))return!1;St.push(Zt),he++}else if(p(vt,Zt))return!1}var ae=l(vt);if(Yt.length!==ae.length&&rt(vt,ae).length!==he)return!1}else{var oe=l(vt);if(oe.length!==0&&rt(vt,oe).length!==0)return!1}}if(St.length===0&&(It===N||It===G&&mt.length===0||mt.size===0))return!0;if(Ot===void 0)Ot={val1:new Map,val2:new Map,position:0};else{var ce=Ot.val1.get(mt);if(ce!==void 0){var ue=Ot.val2.get(vt);if(ue!==void 0)return ce===ue}Ot.position++}Ot.val1.set(mt,Ot.position),Ot.val2.set(vt,Ot.position);var ye=xt(mt,vt,At,St,Ot,It);return Ot.val1.delete(mt),Ot.val2.delete(vt),ye}function H(mt,vt,At,Ot){for(var It=d(mt),St=0;St<It.length;St++){var Bt=It[St];if(V(vt,Bt,At,Ot))return mt.delete(Bt),!0}return!1}function Y(mt){switch(T(mt)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":mt=+mt;case"number":if(n(mt))return!1}return!0}function at(mt,vt,At){var Ot=Y(At);return Ot??(vt.has(Ot)&&!mt.has(Ot))}function et(mt,vt,At,Ot,It){var St=Y(At);if(St!=null)return St;var Bt=vt.get(St);return Bt===void 0&&!vt.has(St)||!V(Ot,Bt,!1,It)?!1:!mt.has(St)&&V(Ot,Bt,!1,It)}function ct(mt,vt,At,Ot){for(var It=null,St=d(mt),Bt=0;Bt<St.length;Bt++){var re=St[Bt];if(T(re)==="object"&&re!==null)It===null&&(It=new Set),It.add(re);else if(!vt.has(re)){if(At||!at(mt,vt,re))return!1;It===null&&(It=new Set),It.add(re)}}if(It!==null){for(var Yt=d(vt),he=0;he<Yt.length;he++){var Zt=Yt[he];if(T(Zt)==="object"&&Zt!==null){if(!H(It,Zt,At,Ot))return!1}else if(!At&&!mt.has(Zt)&&!H(It,Zt,At,Ot))return!1}return It.size===0}return!0}function ft(mt,vt,At,Ot,It,St){for(var Bt=d(mt),re=0;re<Bt.length;re++){var Yt=Bt[re];if(V(At,Yt,It,St)&&V(Ot,vt.get(Yt),It,St))return mt.delete(Yt),!0}return!1}function yt(mt,vt,At,Ot){for(var It=null,St=r(mt),Bt=0;Bt<St.length;Bt++){var re=M(St[Bt],2),Yt=re[0],he=re[1];if(T(Yt)==="object"&&Yt!==null)It===null&&(It=new Set),It.add(Yt);else{var Zt=vt.get(Yt);if(Zt===void 0&&!vt.has(Yt)||!V(he,Zt,At,Ot)){if(At||!et(mt,vt,Yt,he,Ot))return!1;It===null&&(It=new Set),It.add(Yt)}}}if(It!==null){for(var ae=r(vt),oe=0;oe<ae.length;oe++){var ce=M(ae[oe],2),Yt=ce[0],ue=ce[1];if(T(Yt)==="object"&&Yt!==null){if(!ft(It,mt,Yt,ue,At,Ot))return!1}else if(!At&&(!mt.has(Yt)||!V(mt.get(Yt),ue,!1,Ot))&&!ft(It,mt,Yt,ue,!1,Ot))return!1}return It.size===0}return!0}function xt(mt,vt,At,Ot,It,St){var Bt=0;if(St===X){if(!ct(mt,vt,At,It))return!1}else if(St===J){if(!yt(mt,vt,At,It))return!1}else if(St===G)for(;Bt<mt.length;Bt++)if(o(mt,Bt)){if(!o(vt,Bt)||!V(mt[Bt],vt[Bt],At,It))return!1}else{if(o(vt,Bt))return!1;for(var re=Object.keys(mt);Bt<re.length;Bt++){var Yt=re[Bt];if(!o(vt,Yt)||!V(mt[Yt],vt[Yt],At,It))return!1}return re.length===Object.keys(vt).length}for(Bt=0;Bt<Ot.length;Bt++){var he=Ot[Bt];if(!V(mt[he],vt[he],At,It))return!1}return!0}function Ct(mt,vt){return V(mt,vt,B)}function gt(mt,vt){return V(mt,vt,R)}Q.exports={isDeepEqual:Ct,isDeepStrictEqual:gt}},83160:function(Q,U,t){t.r(U),t.d(U,{decode:function(){return T},encode:function(){return C}});for(var M="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",E=typeof Uint8Array>"u"?[]:new Uint8Array(256),i=0;i<M.length;i++)E[M.charCodeAt(i)]=i;var C=function(v){var d=new Uint8Array(v),r,e=d.length,l="";for(r=0;r<e;r+=3)l+=M[d[r]>>2],l+=M[(d[r]&3)<<4|d[r+1]>>4],l+=M[(d[r+1]&15)<<2|d[r+2]>>6],l+=M[d[r+2]&63];return e%3===2?l=l.substring(0,l.length-1)+"=":e%3===1&&(l=l.substring(0,l.length-2)+"=="),l},T=function(v){var d=v.length*.75,r=v.length,e,l=0,n,s,o,p;v[v.length-1]==="="&&(d--,v[v.length-2]==="="&&d--);var b=new ArrayBuffer(d),h=new Uint8Array(b);for(e=0;e<r;e+=4)n=E[v.charCodeAt(e)],s=E[v.charCodeAt(e+1)],o=E[v.charCodeAt(e+2)],p=E[v.charCodeAt(e+3)],h[l++]=n<<2|s>>4,h[l++]=(s&15)<<4|o>>2,h[l++]=(o&3)<<6|p&63;return b}},59968:function(Q,U){U.byteLength=d,U.toByteArray=e,U.fromByteArray=s;for(var t=[],M=[],E=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,T=i.length;C<T;++C)t[C]=i[C],M[i.charCodeAt(C)]=C;M[45]=62,M[95]=63;function v(o){var p=o.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=o.indexOf("=");b===-1&&(b=p);var h=b===p?0:4-b%4;return[b,h]}function d(o){var p=v(o),b=p[0],h=p[1];return(b+h)*3/4-h}function r(o,p,b){return(p+b)*3/4-b}function e(o){var p,b=v(o),h=b[0],_=b[1],a=new E(r(o,h,_)),c=0,f=_>0?h-4:h,x;for(x=0;x<f;x+=4)p=M[o.charCodeAt(x)]<<18|M[o.charCodeAt(x+1)]<<12|M[o.charCodeAt(x+2)]<<6|M[o.charCodeAt(x+3)],a[c++]=p>>16&255,a[c++]=p>>8&255,a[c++]=p&255;return _===2&&(p=M[o.charCodeAt(x)]<<2|M[o.charCodeAt(x+1)]>>4,a[c++]=p&255),_===1&&(p=M[o.charCodeAt(x)]<<10|M[o.charCodeAt(x+1)]<<4|M[o.charCodeAt(x+2)]>>2,a[c++]=p>>8&255,a[c++]=p&255),a}function l(o){return t[o>>18&63]+t[o>>12&63]+t[o>>6&63]+t[o&63]}function n(o,p,b){for(var h,_=[],a=p;a<b;a+=3)h=(o[a]<<16&16711680)+(o[a+1]<<8&65280)+(o[a+2]&255),_.push(l(h));return _.join("")}function s(o){for(var p,b=o.length,h=b%3,_=[],a=16383,c=0,f=b-h;c<f;c+=a)_.push(n(o,c,c+a>f?f:c+a));return h===1?(p=o[b-1],_.push(t[p>>2]+t[p<<4&63]+"==")):h===2&&(p=(o[b-2]<<8)+o[b-1],_.push(t[p>>10]+t[p>>4&63]+t[p<<2&63]+"=")),_.join("")}},64928:function(Q){function U(T,v,d,r,e){for(var l=e+1;r<=e;){var n=r+e>>>1,s=T[n],o=d!==void 0?d(s,v):s-v;o>=0?(l=n,e=n-1):r=n+1}return l}function t(T,v,d,r,e){for(var l=e+1;r<=e;){var n=r+e>>>1,s=T[n],o=d!==void 0?d(s,v):s-v;o>0?(l=n,e=n-1):r=n+1}return l}function M(T,v,d,r,e){for(var l=r-1;r<=e;){var n=r+e>>>1,s=T[n],o=d!==void 0?d(s,v):s-v;o<0?(l=n,r=n+1):e=n-1}return l}function E(T,v,d,r,e){for(var l=r-1;r<=e;){var n=r+e>>>1,s=T[n],o=d!==void 0?d(s,v):s-v;o<=0?(l=n,r=n+1):e=n-1}return l}function i(T,v,d,r,e){for(;r<=e;){var l=r+e>>>1,n=T[l],s=d!==void 0?d(n,v):n-v;if(s===0)return l;s<=0?r=l+1:e=l-1}return-1}function C(T,v,d,r,e,l){return typeof d=="function"?l(T,v,d,r===void 0?0:r|0,e===void 0?T.length-1:e|0):l(T,v,void 0,d===void 0?0:d|0,r===void 0?T.length-1:r|0)}Q.exports={ge:function(T,v,d,r,e){return C(T,v,d,r,e,U)},gt:function(T,v,d,r,e){return C(T,v,d,r,e,t)},lt:function(T,v,d,r,e){return C(T,v,d,r,e,M)},le:function(T,v,d,r,e){return C(T,v,d,r,e,E)},eq:function(T,v,d,r,e){return C(T,v,d,r,e,i)}}},308:function(Q,U){"use restrict";var t=32;U.INT_BITS=t,U.INT_MAX=2147483647,U.INT_MIN=-1<<t-1,U.sign=function(i){return(i>0)-(i<0)},U.abs=function(i){var C=i>>t-1;return(i^C)-C},U.min=function(i,C){return C^(i^C)&-(i<C)},U.max=function(i,C){return i^(i^C)&-(i<C)},U.isPow2=function(i){return!(i&i-1)&&!!i},U.log2=function(i){var C,T;return C=(i>65535)<<4,i>>>=C,T=(i>255)<<3,i>>>=T,C|=T,T=(i>15)<<2,i>>>=T,C|=T,T=(i>3)<<1,i>>>=T,C|=T,C|i>>1},U.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},U.popCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),(i+(i>>>4)&252645135)*16843009>>>24};function M(i){var C=32;return i&=-i,i&&C--,i&65535&&(C-=16),i&16711935&&(C-=8),i&252645135&&(C-=4),i&858993459&&(C-=2),i&1431655765&&(C-=1),C}U.countTrailingZeros=M,U.nextPow2=function(i){return i+=i===0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1},U.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i-(i>>>1)},U.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,i&=15,27030>>>i&1};var E=new Array(256);(function(i){for(var C=0;C<256;++C){var T=C,v=C,d=7;for(T>>>=1;T;T>>>=1)v<<=1,v|=T&1,--d;i[C]=v<<d&255}})(E),U.reverse=function(i){return E[i&255]<<24|E[i>>>8&255]<<16|E[i>>>16&255]<<8|E[i>>>24&255]},U.interleave2=function(i,C){return i&=65535,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,C&=65535,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,i|C<<1},U.deinterleave2=function(i,C){return i=i>>>C&1431655765,i=(i|i>>>1)&858993459,i=(i|i>>>2)&252645135,i=(i|i>>>4)&16711935,i=(i|i>>>16)&65535,i<<16>>16},U.interleave3=function(i,C,T){return i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,C&=1023,C=(C|C<<16)&4278190335,C=(C|C<<8)&251719695,C=(C|C<<4)&3272356035,C=(C|C<<2)&1227133513,i|=C<<1,T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,i|T<<2},U.deinterleave3=function(i,C){return i=i>>>C&1227133513,i=(i|i>>>2)&3272356035,i=(i|i>>>4)&251719695,i=(i|i>>>8)&4278190335,i=(i|i>>>16)&1023,i<<22>>22},U.nextCombination=function(i){var C=i|i-1;return C+1|(~C&-~C)-1>>>M(i)+1}},29620:function(Q,U,t){var M=t(32420);Q.exports=i;var E=1e20;function i(v,d){d||(d={});var r=d.cutoff==null?.25:d.cutoff,e=d.radius==null?8:d.radius,l=d.channel||0,n,s,o,p,b,h,_,a,c,f,x;if(ArrayBuffer.isView(v)||Array.isArray(v)){if(!d.width||!d.height)throw Error("For raw data width and height should be provided by options");n=d.width,s=d.height,p=v,d.stride?h=d.stride:h=Math.floor(v.length/n/s)}else window.HTMLCanvasElement&&v instanceof window.HTMLCanvasElement?(a=v,_=a.getContext("2d"),n=a.width,s=a.height,c=_.getImageData(0,0,n,s),p=c.data,h=4):window.CanvasRenderingContext2D&&v instanceof window.CanvasRenderingContext2D?(a=v.canvas,_=v,n=a.width,s=a.height,c=_.getImageData(0,0,n,s),p=c.data,h=4):window.ImageData&&v instanceof window.ImageData&&(c=v,n=v.width,s=v.height,p=c.data,h=4);if(o=Math.max(n,s),window.Uint8ClampedArray&&p instanceof window.Uint8ClampedArray||window.Uint8Array&&p instanceof window.Uint8Array)for(b=p,p=Array(n*s),f=0,x=b.length;f<x;f++)p[f]=b[f*h+l]/255;else if(h!==1)throw Error("Raw data can have only 1 value per pixel");var k=Array(n*s),y=Array(n*s),A=Array(o),L=Array(o),u=Array(o+1),m=Array(o);for(f=0,x=n*s;f<x;f++){var S=p[f];k[f]=S===1?0:S===0?E:Math.pow(Math.max(0,.5-S),2),y[f]=S===1?E:S===0?0:Math.pow(Math.max(0,S-.5),2)}C(k,n,s,A,L,m,u),C(y,n,s,A,L,m,u);var w=window.Float32Array?new Float32Array(n*s):new Array(n*s);for(f=0,x=n*s;f<x;f++)w[f]=M(1-((k[f]-y[f])/e+r),0,1);return w}function C(v,d,r,e,l,n,s){for(var o=0;o<d;o++){for(var p=0;p<r;p++)e[p]=v[p*d+o];for(T(e,l,n,s,r),p=0;p<r;p++)v[p*d+o]=l[p]}for(p=0;p<r;p++){for(o=0;o<d;o++)e[o]=v[p*d+o];for(T(e,l,n,s,d),o=0;o<d;o++)v[p*d+o]=Math.sqrt(l[o])}}function T(v,d,r,e,l){r[0]=0,e[0]=-E,e[1]=+E;for(var n=1,s=0;n<l;n++){for(var o=(v[n]+n*n-(v[r[s]]+r[s]*r[s]))/(2*n-2*r[s]);o<=e[s];)s--,o=(v[n]+n*n-(v[r[s]]+r[s]*r[s]))/(2*n-2*r[s]);s++,r[s]=n,e[s]=o,e[s+1]=+E}for(n=0,s=0;n<l;n++){for(;e[s+1]<n;)s++;d[n]=(n-r[s])*(n-r[s])+v[r[s]]}}},99676:function(Q,U,t){var M=t(53664),E=t(57916),i=E(M("String.prototype.indexOf"));Q.exports=function(C,T){var v=M(C,!!T);return typeof v=="function"&&i(C,".prototype.")>-1?E(v):v}},57916:function(Q,U,t){var M=t(8844),E=t(53664),i=t(14500),C=E("%TypeError%"),T=E("%Function.prototype.apply%"),v=E("%Function.prototype.call%"),d=E("%Reflect.apply%",!0)||M.call(v,T),r=E("%Object.defineProperty%",!0),e=E("%Math.max%");if(r)try{r({},"a",{value:1})}catch{r=null}Q.exports=function(n){if(typeof n!="function")throw new C("a function is required");var s=d(M,v,arguments);return i(s,1+e(0,n.length-(arguments.length-1)),!0)};var l=function(){return d(M,T,arguments)};r?r(Q.exports,"apply",{value:l}):Q.exports.apply=l},32420:function(Q){Q.exports=U;function U(t,M,E){return M<E?t<M?M:t>E?E:t:t<E?E:t>M?M:t}},3808:function(Q,U,t){var M=t(32420);Q.exports=E,Q.exports.to=E,Q.exports.from=i;function E(C,T){T==null&&(T=!0);var v=C[0],d=C[1],r=C[2],e=C[3];e==null&&(e=T?1:255),T&&(v*=255,d*=255,r*=255,e*=255),v=M(v,0,255)&255,d=M(d,0,255)&255,r=M(r,0,255)&255,e=M(e,0,255)&255;var l=v*16777216+(d<<16)+(r<<8)+e;return l}function i(C,T){C=+C;var v=C>>>24,d=(C&16711680)>>>16,r=(C&65280)>>>8,e=C&255;return T===!1?[v,d,r,e]:[v/255,d/255,r/255,e/255]}},17592:function(Q){Q.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(Q,U,t){var M=t(96824),E=t(32420),i=t(72512);Q.exports=function(T,v){(v==="float"||!v)&&(v="array"),v==="uint"&&(v="uint8"),v==="uint_clamped"&&(v="uint8_clamped");var d=i(v),r=new d(4),e=v!=="uint8"&&v!=="uint8_clamped";return(!T.length||typeof T=="string")&&(T=M(T),T[0]/=255,T[1]/=255,T[2]/=255),C(T)?(r[0]=T[0],r[1]=T[1],r[2]=T[2],r[3]=T[3]!=null?T[3]:255,e&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(e?(r[0]=T[0],r[1]=T[1],r[2]=T[2],r[3]=T[3]!=null?T[3]:1):(r[0]=E(Math.floor(T[0]*255),0,255),r[1]=E(Math.floor(T[1]*255),0,255),r[2]=E(Math.floor(T[2]*255),0,255),r[3]=T[3]==null?255:E(Math.floor(T[3]*255),0,255)),r)};function C(T){return!!(T instanceof Uint8Array||T instanceof Uint8ClampedArray||Array.isArray(T)&&(T[0]>1||T[0]===0)&&(T[1]>1||T[1]===0)&&(T[2]>1||T[2]===0)&&(!T[3]||T[3]>1))}},96824:function(Q,U,t){var M=t(95532),E=t(53576),i=t(32420);Q.exports=function(C){var T,v=M(C);return v.space?(T=Array(3),T[0]=i(v.values[0],0,255),T[1]=i(v.values[1],0,255),T[2]=i(v.values[2],0,255),v.space[0]==="h"&&(T=E.rgb(T)),T.push(i(v.alpha,0,1)),T):[]}},95532:function(Q,U,t){var M=t(17592);Q.exports=i;var E={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function i(C){var T,v=[],d=1,r;if(typeof C=="string")if(C=C.toLowerCase(),M[C])v=M[C].slice(),r="rgb";else if(C==="transparent")d=0,r="rgb",v=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(C)){var e=C.slice(1),l=e.length,n=l<=4;d=1,n?(v=[parseInt(e[0]+e[0],16),parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16)],l===4&&(d=parseInt(e[3]+e[3],16)/255)):(v=[parseInt(e[0]+e[1],16),parseInt(e[2]+e[3],16),parseInt(e[4]+e[5],16)],l===8&&(d=parseInt(e[6]+e[7],16)/255)),v[0]||(v[0]=0),v[1]||(v[1]=0),v[2]||(v[2]=0),r="rgb"}else if(T=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(C)){var s=T[1],o=s==="rgb",e=s.replace(/a$/,"");r=e;var l=e==="cmyk"?4:e==="gray"?1:3;v=T[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,_){if(/%$/.test(h))return _===l?parseFloat(h)/100:e==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(e[_]==="h"){if(/deg$/.test(h))return parseFloat(h);if(E[h]!==void 0)return E[h]}return parseFloat(h)}),s===e&&v.push(1),d=o||v[l]===void 0?1:v[l],v=v.slice(0,l)}else C.length>10&&/[0-9](?:\s|\/)/.test(C)&&(v=C.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),r=C.match(/([a-z])/ig).join("").toLowerCase());else isNaN(C)?Array.isArray(C)||C.length?(v=[C[0],C[1],C[2]],r="rgb",d=C.length===4?C[3]:1):C instanceof Object&&(C.r!=null||C.red!=null||C.R!=null?(r="rgb",v=[C.r||C.red||C.R||0,C.g||C.green||C.G||0,C.b||C.blue||C.B||0]):(r="hsl",v=[C.h||C.hue||C.H||0,C.s||C.saturation||C.S||0,C.l||C.lightness||C.L||C.b||C.brightness]),d=C.a||C.alpha||C.opacity||1,C.opacity!=null&&(d/=100)):(r="rgb",v=[C>>>16,(C&65280)>>>8,C&255]);return{space:r,values:v,alpha:d}}},53576:function(Q,U,t){var M=t(19336);Q.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(E){var i=E[0]/360,C=E[1]/100,T=E[2]/100,v,d,r,e,l;if(C===0)return l=T*255,[l,l,l];T<.5?d=T*(1+C):d=T+C-T*C,v=2*T-d,e=[0,0,0];for(var n=0;n<3;n++)r=i+.3333333333333333*-(n-1),r<0?r++:r>1&&r--,6*r<1?l=v+(d-v)*6*r:2*r<1?l=d:3*r<2?l=v+(d-v)*(.6666666666666666-r)*6:l=v,e[n]=l*255;return e}},M.hsl=function(E){var i=E[0]/255,C=E[1]/255,T=E[2]/255,v=Math.min(i,C,T),d=Math.max(i,C,T),r=d-v,e,l,n;return d===v?e=0:i===d?e=(C-T)/r:C===d?e=2+(T-i)/r:T===d&&(e=4+(i-C)/r),e=Math.min(e*60,360),e<0&&(e+=360),n=(v+d)/2,d===v?l=0:n<=.5?l=r/(d+v):l=r/(2-d-v),[e,l*100,n*100]}},19336:function(Q){Q.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(Q){Q.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(Q,U,t){Q.exports={parse:t(46416),stringify:t(49395)}},8744:function(Q,U,t){var M=t(30584);Q.exports={isSize:function(E){return/^[\d\.]/.test(E)||E.indexOf("/")!==-1||M.indexOf(E)!==-1}}},46416:function(Q,U,t){var M=t(92384),E=t(68194),i=t(3748),C=t(2904),T=t(47916),v=t(7294),d=t(39956),r=t(8744).isSize;Q.exports=l;var e=l.cache={};function l(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(e[s])return e[s];if(s==="")throw new Error("Cannot parse an empty string.");if(i.indexOf(s)!==-1)return e[s]={system:s};for(var o={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=d(s,/\s+/),b;b=p.shift();){if(E.indexOf(b)!==-1)return["style","variant","weight","stretch"].forEach(function(_){o[_]=b}),e[s]=o;if(T.indexOf(b)!==-1){o.style=b;continue}if(b==="normal"||b==="small-caps"){o.variant=b;continue}if(v.indexOf(b)!==-1){o.stretch=b;continue}if(C.indexOf(b)!==-1){o.weight=b;continue}if(r(b)){var h=d(b,"/");if(o.size=h[0],h[1]!=null?o.lineHeight=n(h[1]):p[0]==="/"&&(p.shift(),o.lineHeight=n(p.shift())),!p.length)throw new Error("Missing required font-family.");return o.family=d(p.join(" "),/\s*,\s*/).map(M),e[s]=o}throw new Error("Unknown or unsupported font token: "+b)}throw new Error("Missing required font-size.")}function n(s){var o=parseFloat(s);return o.toString()===s?o:s}},49395:function(Q,U,t){var M=t(55616),E=t(8744).isSize,i=s(t(68194)),C=s(t(3748)),T=s(t(2904)),v=s(t(47916)),d=s(t(7294)),r={normal:1,"small-caps":1},e={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},l={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};Q.exports=function(o){if(o=M(o,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),o.system)return o.system&&n(o.system,C),o.system;if(n(o.style,v),n(o.variant,r),n(o.weight,T),n(o.stretch,d),o.size==null&&(o.size=l.size),typeof o.size=="number"&&(o.size+="px"),!E)throw Error("Bad size value `"+o.size+"`");o.family||(o.family=l.family),Array.isArray(o.family)&&(o.family.length||(o.family=[l.family]),o.family=o.family.map(function(b){return e[b]?b:'"'+b+'"'}).join(", "));var p=[];return p.push(o.style),o.variant!==o.style&&p.push(o.variant),o.weight!==o.variant&&o.weight!==o.style&&p.push(o.weight),o.stretch!==o.weight&&o.stretch!==o.variant&&o.stretch!==o.style&&p.push(o.stretch),p.push(o.size+(o.lineHeight==null||o.lineHeight==="normal"||o.lineHeight+""=="1"?"":"/"+o.lineHeight)),p.push(o.family),p.filter(Boolean).join(" ")};function n(o,p){if(o&&!p[o]&&!i[o])throw Error("Unknown keyword `"+o+"`");return o}function s(o){for(var p={},b=0;b<o.length;b++)p[o[b]]=1;return p}},27940:function(Q,U,t){var M=t(81680),E=t(18496),i=t(87396),C=t(95920),T=t(50868),v=t(84323),d=Function.prototype.bind,r=Object.defineProperty,e=Object.prototype.hasOwnProperty,l;l=function(n,s,o){var p=E(s)&&i(s.value),b;return b=C(s),delete b.writable,delete b.value,b.get=function(){return!o.overwriteDefinition&&e.call(this,n)?p:(s.value=d.call(p,o.resolveContext?o.resolveContext(this):this),r(this,n,s),this[n])},b},Q.exports=function(n){var s=T(arguments[1]);return M(s.resolveContext)&&i(s.resolveContext),v(n,function(o,p){return l(p,o,s)})}},21092:function(Q,U,t){var M=t(81680),E=t(85488),i=t(38452),C=t(50868),T=t(71056),v=Q.exports=function(d,r){var e,l,n,s,o;return arguments.length<2||typeof d!="string"?(s=r,r=d,d=null):s=arguments[2],M(d)?(e=T.call(d,"c"),l=T.call(d,"e"),n=T.call(d,"w")):(e=n=!0,l=!1),o={value:r,configurable:e,enumerable:l,writable:n},s?i(C(s),o):o};v.gs=function(d,r,e){var l,n,s,o;return typeof d!="string"?(s=e,e=r,r=d,d=null):s=arguments[3],M(r)?E(r)?M(e)?E(e)||(s=e,e=void 0):e=void 0:(s=r,r=e=void 0):r=void 0,M(d)?(l=T.call(d,"c"),n=T.call(d,"e")):(l=!0,n=!1),o={get:r,set:e,configurable:l,enumerable:n},s?i(C(s),o):o}},84706:function(Q,U,t){t.d(U,{XE:function(){return M},kv:function(){return C},mo:function(){return v},Uf:function(){return d},SY:function(){return r},ik:function(){return e},oh:function(){return l}});function M(n,s){return n<s?-1:n>s?1:n>=s?0:NaN}function E(n){return n.length===1&&(n=i(n)),{left:function(s,o,p,b){for(p==null&&(p=0),b==null&&(b=s.length);p<b;){var h=p+b>>>1;n(s[h],o)<0?p=h+1:b=h}return p},right:function(s,o,p,b){for(p==null&&(p=0),b==null&&(b=s.length);p<b;){var h=p+b>>>1;n(s[h],o)>0?b=h:p=h+1}return p}}}function i(n){return function(s,o){return M(n(s),o)}}E(M);function C(n,s){var o=n.length,p=-1,b,h;if(s==null){for(;++p<o;)if((b=n[p])!=null&&b>=b)for(h=b;++p<o;)(b=n[p])!=null&&b>h&&(h=b)}else for(;++p<o;)if((b=s(n[p],p,n))!=null&&b>=b)for(h=b;++p<o;)(b=s(n[p],p,n))!=null&&b>h&&(h=b);return h}function T(n){return n===null?NaN:+n}function v(n,s){var o=n.length,p=o,b=-1,h,_=0;if(s==null)for(;++b<o;)isNaN(h=T(n[b]))?--p:_+=h;else for(;++b<o;)isNaN(h=T(s(n[b],b,n)))?--p:_+=h;if(p)return _/p}function d(n){for(var s=n.length,o,p=-1,b=0,h,_;++p<s;)b+=n[p].length;for(h=new Array(b);--s>=0;)for(_=n[s],o=_.length;--o>=0;)h[--b]=_[o];return h}function r(n,s){var o=n.length,p=-1,b,h;if(s==null){for(;++p<o;)if((b=n[p])!=null&&b>=b)for(h=b;++p<o;)(b=n[p])!=null&&h>b&&(h=b)}else for(;++p<o;)if((b=s(n[p],p,n))!=null&&b>=b)for(h=b;++p<o;)(b=s(n[p],p,n))!=null&&h>b&&(h=b);return h}function e(n,s,o){n=+n,s=+s,o=(b=arguments.length)<2?(s=n,n=0,1):b<3?1:+o;for(var p=-1,b=Math.max(0,Math.ceil((s-n)/o))|0,h=new Array(b);++p<b;)h[p]=n+p*o;return h}function l(n,s){var o=n.length,p=-1,b,h=0;if(s==null)for(;++p<o;)(b=+n[p])&&(h+=b);else for(;++p<o;)(b=+s(n[p],p,n))&&(h+=b);return h}},34712:function(Q,U,t){t.d(U,{kH:function(){return C},UJ:function(){return T}});var M="$";function E(){}E.prototype=i.prototype={constructor:E,has:function(s){return M+s in this},get:function(s){return this[M+s]},set:function(s,o){return this[M+s]=o,this},remove:function(s){var o=M+s;return o in this&&delete this[o]},clear:function(){for(var s in this)s[0]===M&&delete this[s]},keys:function(){var s=[];for(var o in this)o[0]===M&&s.push(o.slice(1));return s},values:function(){var s=[];for(var o in this)o[0]===M&&s.push(this[o]);return s},entries:function(){var s=[];for(var o in this)o[0]===M&&s.push({key:o.slice(1),value:this[o]});return s},size:function(){var s=0;for(var o in this)o[0]===M&&++s;return s},empty:function(){for(var s in this)if(s[0]===M)return!1;return!0},each:function(s){for(var o in this)o[0]===M&&s(this[o],o.slice(1),this)}};function i(s,o){var p=new E;if(s instanceof E)s.each(function(c,f){p.set(f,c)});else if(Array.isArray(s)){var b=-1,h=s.length,_;if(o==null)for(;++b<h;)p.set(b,s[b]);else for(;++b<h;)p.set(o(_=s[b],b,s),_)}else if(s)for(var a in s)p.set(a,s[a]);return p}var C=i;function T(){var s=[],o=[],p,b,h;function _(c,f,x,k){if(f>=s.length)return p!=null&&c.sort(p),b!=null?b(c):c;for(var y=-1,A=c.length,L=s[f++],u,m,S=C(),w,I=x();++y<A;)(w=S.get(u=L(m=c[y])+""))?w.push(m):S.set(u,[m]);return S.each(function(O,D){k(I,D,_(O,f,x,k))}),I}function a(c,f){if(++f>s.length)return c;var x,k=o[f-1];return b!=null&&f>=s.length?x=c.entries():(x=[],c.each(function(y,A){x.push({key:A,values:a(y,f)})})),k!=null?x.sort(function(y,A){return k(y.key,A.key)}):x}return h={object:function(c){return _(c,0,v,d)},map:function(c){return _(c,0,r,e)},entries:function(c){return a(_(c,0,r,e),0)},key:function(c){return s.push(c),h},sortKeys:function(c){return o[s.length-1]=c,h},sortValues:function(c){return p=c,h},rollup:function(c){return b=c,h}}}function v(){return{}}function d(s,o,p){s[o]=p}function r(){return C()}function e(s,o,p){s.set(o,p)}function l(){}var n=C.prototype;l.prototype={constructor:l,has:n.has,add:function(s){return s+="",this[M+s]=s,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49812:function(Q,U,t){t.r(U),t.d(U,{forceCenter:function(){return M},forceCollide:function(){return S},forceLink:function(){return D},forceManyBody:function(){return Bt},forceRadial:function(){return re},forceSimulation:function(){return St},forceX:function(){return Yt},forceY:function(){return he}});function M(Zt,ae){var oe;Zt==null&&(Zt=0),ae==null&&(ae=0);function ce(){var ue,ye=oe.length,Tt,Ft=0,$t=0;for(ue=0;ue<ye;++ue)Tt=oe[ue],Ft+=Tt.x,$t+=Tt.y;for(Ft=Ft/ye-Zt,$t=$t/ye-ae,ue=0;ue<ye;++ue)Tt=oe[ue],Tt.x-=Ft,Tt.y-=$t}return ce.initialize=function(ue){oe=ue},ce.x=function(ue){return arguments.length?(Zt=+ue,ce):Zt},ce.y=function(ue){return arguments.length?(ae=+ue,ce):ae},ce}function E(Zt){return function(){return Zt}}function i(){return(Math.random()-.5)*1e-6}function C(Zt){var ae=+this._x.call(null,Zt),oe=+this._y.call(null,Zt);return T(this.cover(ae,oe),ae,oe,Zt)}function T(Zt,ae,oe,ce){if(isNaN(ae)||isNaN(oe))return Zt;var ue,ye=Zt._root,Tt={data:ce},Ft=Zt._x0,$t=Zt._y0,Vt=Zt._x1,Nt=Zt._y1,Mt,Et,Dt,dt,ht,bt,Pt,Gt;if(!ye)return Zt._root=Tt,Zt;for(;ye.length;)if((ht=ae>=(Mt=(Ft+Vt)/2))?Ft=Mt:Vt=Mt,(bt=oe>=(Et=($t+Nt)/2))?$t=Et:Nt=Et,ue=ye,!(ye=ye[Pt=bt<<1|ht]))return ue[Pt]=Tt,Zt;if(Dt=+Zt._x.call(null,ye.data),dt=+Zt._y.call(null,ye.data),ae===Dt&&oe===dt)return Tt.next=ye,ue?ue[Pt]=Tt:Zt._root=Tt,Zt;do ue=ue?ue[Pt]=new Array(4):Zt._root=new Array(4),(ht=ae>=(Mt=(Ft+Vt)/2))?Ft=Mt:Vt=Mt,(bt=oe>=(Et=($t+Nt)/2))?$t=Et:Nt=Et;while((Pt=bt<<1|ht)===(Gt=(dt>=Et)<<1|Dt>=Mt));return ue[Gt]=ye,ue[Pt]=Tt,Zt}function v(Zt){var ae,oe,ce=Zt.length,ue,ye,Tt=new Array(ce),Ft=new Array(ce),$t=1/0,Vt=1/0,Nt=-1/0,Mt=-1/0;for(oe=0;oe<ce;++oe)isNaN(ue=+this._x.call(null,ae=Zt[oe]))||isNaN(ye=+this._y.call(null,ae))||(Tt[oe]=ue,Ft[oe]=ye,ue<$t&&($t=ue),ue>Nt&&(Nt=ue),ye<Vt&&(Vt=ye),ye>Mt&&(Mt=ye));if($t>Nt||Vt>Mt)return this;for(this.cover($t,Vt).cover(Nt,Mt),oe=0;oe<ce;++oe)T(this,Tt[oe],Ft[oe],Zt[oe]);return this}function d(Zt,ae){if(isNaN(Zt=+Zt)||isNaN(ae=+ae))return this;var oe=this._x0,ce=this._y0,ue=this._x1,ye=this._y1;if(isNaN(oe))ue=(oe=Math.floor(Zt))+1,ye=(ce=Math.floor(ae))+1;else{for(var Tt=ue-oe,Ft=this._root,$t,Vt;oe>Zt||Zt>=ue||ce>ae||ae>=ye;)switch(Vt=(ae<ce)<<1|Zt<oe,$t=new Array(4),$t[Vt]=Ft,Ft=$t,Tt*=2,Vt){case 0:ue=oe+Tt,ye=ce+Tt;break;case 1:oe=ue-Tt,ye=ce+Tt;break;case 2:ue=oe+Tt,ce=ye-Tt;break;case 3:oe=ue-Tt,ce=ye-Tt;break}this._root&&this._root.length&&(this._root=Ft)}return this._x0=oe,this._y0=ce,this._x1=ue,this._y1=ye,this}function r(){var Zt=[];return this.visit(function(ae){if(!ae.length)do Zt.push(ae.data);while(ae=ae.next)}),Zt}function e(Zt){return arguments.length?this.cover(+Zt[0][0],+Zt[0][1]).cover(+Zt[1][0],+Zt[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function l(Zt,ae,oe,ce,ue){this.node=Zt,this.x0=ae,this.y0=oe,this.x1=ce,this.y1=ue}function n(Zt,ae,oe){var ce,ue=this._x0,ye=this._y0,Tt,Ft,$t,Vt,Nt=this._x1,Mt=this._y1,Et=[],Dt=this._root,dt,ht;for(Dt&&Et.push(new l(Dt,ue,ye,Nt,Mt)),oe==null?oe=1/0:(ue=Zt-oe,ye=ae-oe,Nt=Zt+oe,Mt=ae+oe,oe*=oe);dt=Et.pop();)if(!(!(Dt=dt.node)||(Tt=dt.x0)>Nt||(Ft=dt.y0)>Mt||($t=dt.x1)<ue||(Vt=dt.y1)<ye))if(Dt.length){var bt=(Tt+$t)/2,Pt=(Ft+Vt)/2;Et.push(new l(Dt[3],bt,Pt,$t,Vt),new l(Dt[2],Tt,Pt,bt,Vt),new l(Dt[1],bt,Ft,$t,Pt),new l(Dt[0],Tt,Ft,bt,Pt)),(ht=(ae>=Pt)<<1|Zt>=bt)&&(dt=Et[Et.length-1],Et[Et.length-1]=Et[Et.length-1-ht],Et[Et.length-1-ht]=dt)}else{var Gt=Zt-+this._x.call(null,Dt.data),te=ae-+this._y.call(null,Dt.data),ne=Gt*Gt+te*te;if(ne<oe){var je=Math.sqrt(oe=ne);ue=Zt-je,ye=ae-je,Nt=Zt+je,Mt=ae+je,ce=Dt.data}}return ce}function s(Zt){if(isNaN(Nt=+this._x.call(null,Zt))||isNaN(Mt=+this._y.call(null,Zt)))return this;var ae,oe=this._root,ce,ue,ye,Tt=this._x0,Ft=this._y0,$t=this._x1,Vt=this._y1,Nt,Mt,Et,Dt,dt,ht,bt,Pt;if(!oe)return this;if(oe.length)for(;;){if((dt=Nt>=(Et=(Tt+$t)/2))?Tt=Et:$t=Et,(ht=Mt>=(Dt=(Ft+Vt)/2))?Ft=Dt:Vt=Dt,ae=oe,!(oe=oe[bt=ht<<1|dt]))return this;if(!oe.length)break;(ae[bt+1&3]||ae[bt+2&3]||ae[bt+3&3])&&(ce=ae,Pt=bt)}for(;oe.data!==Zt;)if(ue=oe,!(oe=oe.next))return this;return(ye=oe.next)&&delete oe.next,ue?(ye?ue.next=ye:delete ue.next,this):ae?(ye?ae[bt]=ye:delete ae[bt],(oe=ae[0]||ae[1]||ae[2]||ae[3])&&oe===(ae[3]||ae[2]||ae[1]||ae[0])&&!oe.length&&(ce?ce[Pt]=oe:this._root=oe),this):(this._root=ye,this)}function o(Zt){for(var ae=0,oe=Zt.length;ae<oe;++ae)this.remove(Zt[ae]);return this}function p(){return this._root}function b(){var Zt=0;return this.visit(function(ae){if(!ae.length)do++Zt;while(ae=ae.next)}),Zt}function h(Zt){var ae=[],oe,ce=this._root,ue,ye,Tt,Ft,$t;for(ce&&ae.push(new l(ce,this._x0,this._y0,this._x1,this._y1));oe=ae.pop();)if(!Zt(ce=oe.node,ye=oe.x0,Tt=oe.y0,Ft=oe.x1,$t=oe.y1)&&ce.length){var Vt=(ye+Ft)/2,Nt=(Tt+$t)/2;(ue=ce[3])&&ae.push(new l(ue,Vt,Nt,Ft,$t)),(ue=ce[2])&&ae.push(new l(ue,ye,Nt,Vt,$t)),(ue=ce[1])&&ae.push(new l(ue,Vt,Tt,Ft,Nt)),(ue=ce[0])&&ae.push(new l(ue,ye,Tt,Vt,Nt))}return this}function _(Zt){var ae=[],oe=[],ce;for(this._root&&ae.push(new l(this._root,this._x0,this._y0,this._x1,this._y1));ce=ae.pop();){var ue=ce.node;if(ue.length){var ye,Tt=ce.x0,Ft=ce.y0,$t=ce.x1,Vt=ce.y1,Nt=(Tt+$t)/2,Mt=(Ft+Vt)/2;(ye=ue[0])&&ae.push(new l(ye,Tt,Ft,Nt,Mt)),(ye=ue[1])&&ae.push(new l(ye,Nt,Ft,$t,Mt)),(ye=ue[2])&&ae.push(new l(ye,Tt,Mt,Nt,Vt)),(ye=ue[3])&&ae.push(new l(ye,Nt,Mt,$t,Vt))}oe.push(ce)}for(;ce=oe.pop();)Zt(ce.node,ce.x0,ce.y0,ce.x1,ce.y1);return this}function a(Zt){return Zt[0]}function c(Zt){return arguments.length?(this._x=Zt,this):this._x}function f(Zt){return Zt[1]}function x(Zt){return arguments.length?(this._y=Zt,this):this._y}function k(Zt,ae,oe){var ce=new y(ae??a,oe??f,NaN,NaN,NaN,NaN);return Zt==null?ce:ce.addAll(Zt)}function y(Zt,ae,oe,ce,ue,ye){this._x=Zt,this._y=ae,this._x0=oe,this._y0=ce,this._x1=ue,this._y1=ye,this._root=void 0}function A(Zt){for(var ae={data:Zt.data},oe=ae;Zt=Zt.next;)oe=oe.next={data:Zt.data};return ae}var L=k.prototype=y.prototype;L.copy=function(){var Zt=new y(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ae=this._root,oe,ce;if(!ae)return Zt;if(!ae.length)return Zt._root=A(ae),Zt;for(oe=[{source:ae,target:Zt._root=new Array(4)}];ae=oe.pop();)for(var ue=0;ue<4;++ue)(ce=ae.source[ue])&&(ce.length?oe.push({source:ce,target:ae.target[ue]=new Array(4)}):ae.target[ue]=A(ce));return Zt},L.add=C,L.addAll=v,L.cover=d,L.data=r,L.extent=e,L.find=n,L.remove=s,L.removeAll=o,L.root=p,L.size=b,L.visit=h,L.visitAfter=_,L.x=c,L.y=x;function u(Zt){return Zt.x+Zt.vx}function m(Zt){return Zt.y+Zt.vy}function S(Zt){var ae,oe,ce=1,ue=1;typeof Zt!="function"&&(Zt=E(Zt==null?1:+Zt));function ye(){for(var $t,Vt=ae.length,Nt,Mt,Et,Dt,dt,ht,bt=0;bt<ue;++bt)for(Nt=k(ae,u,m).visitAfter(Tt),$t=0;$t<Vt;++$t)Mt=ae[$t],dt=oe[Mt.index],ht=dt*dt,Et=Mt.x+Mt.vx,Dt=Mt.y+Mt.vy,Nt.visit(Pt);function Pt(Gt,te,ne,je,Ne){var ge=Gt.data,_e=Gt.r,De=dt+_e;if(ge){if(ge.index>Mt.index){var hr=Et-ge.x-ge.vx,fe=Dt-ge.y-ge.vy,Be=hr*hr+fe*fe;Be<De*De&&(hr===0&&(hr=i(),Be+=hr*hr),fe===0&&(fe=i(),Be+=fe*fe),Be=(De-(Be=Math.sqrt(Be)))/Be*ce,Mt.vx+=(hr*=Be)*(De=(_e*=_e)/(ht+_e)),Mt.vy+=(fe*=Be)*De,ge.vx-=hr*(De=1-De),ge.vy-=fe*De)}return}return te>Et+De||je<Et-De||ne>Dt+De||Ne<Dt-De}}function Tt($t){if($t.data)return $t.r=oe[$t.data.index];for(var Vt=$t.r=0;Vt<4;++Vt)$t[Vt]&&$t[Vt].r>$t.r&&($t.r=$t[Vt].r)}function Ft(){if(ae){var $t,Vt=ae.length,Nt;for(oe=new Array(Vt),$t=0;$t<Vt;++$t)Nt=ae[$t],oe[Nt.index]=+Zt(Nt,$t,ae)}}return ye.initialize=function($t){ae=$t,Ft()},ye.iterations=function($t){return arguments.length?(ue=+$t,ye):ue},ye.strength=function($t){return arguments.length?(ce=+$t,ye):ce},ye.radius=function($t){return arguments.length?(Zt=typeof $t=="function"?$t:E(+$t),Ft(),ye):Zt},ye}var w=t(34712);function I(Zt){return Zt.index}function O(Zt,ae){var oe=Zt.get(ae);if(!oe)throw new Error("missing: "+ae);return oe}function D(Zt){var ae=I,oe=Nt,ce,ue=E(30),ye,Tt,Ft,$t,Vt=1;Zt==null&&(Zt=[]);function Nt(ht){return 1/Math.min(Ft[ht.source.index],Ft[ht.target.index])}function Mt(ht){for(var bt=0,Pt=Zt.length;bt<Vt;++bt)for(var Gt=0,te,ne,je,Ne,ge,_e,De;Gt<Pt;++Gt)te=Zt[Gt],ne=te.source,je=te.target,Ne=je.x+je.vx-ne.x-ne.vx||i(),ge=je.y+je.vy-ne.y-ne.vy||i(),_e=Math.sqrt(Ne*Ne+ge*ge),_e=(_e-ye[Gt])/_e*ht*ce[Gt],Ne*=_e,ge*=_e,je.vx-=Ne*(De=$t[Gt]),je.vy-=ge*De,ne.vx+=Ne*(De=1-De),ne.vy+=ge*De}function Et(){if(Tt){var ht,bt=Tt.length,Pt=Zt.length,Gt=(0,w.kH)(Tt,ae),te;for(ht=0,Ft=new Array(bt);ht<Pt;++ht)te=Zt[ht],te.index=ht,typeof te.source!="object"&&(te.source=O(Gt,te.source)),typeof te.target!="object"&&(te.target=O(Gt,te.target)),Ft[te.source.index]=(Ft[te.source.index]||0)+1,Ft[te.target.index]=(Ft[te.target.index]||0)+1;for(ht=0,$t=new Array(Pt);ht<Pt;++ht)te=Zt[ht],$t[ht]=Ft[te.source.index]/(Ft[te.source.index]+Ft[te.target.index]);ce=new Array(Pt),Dt(),ye=new Array(Pt),dt()}}function Dt(){if(Tt)for(var ht=0,bt=Zt.length;ht<bt;++ht)ce[ht]=+oe(Zt[ht],ht,Zt)}function dt(){if(Tt)for(var ht=0,bt=Zt.length;ht<bt;++ht)ye[ht]=+ue(Zt[ht],ht,Zt)}return Mt.initialize=function(ht){Tt=ht,Et()},Mt.links=function(ht){return arguments.length?(Zt=ht,Et(),Mt):Zt},Mt.id=function(ht){return arguments.length?(ae=ht,Mt):ae},Mt.iterations=function(ht){return arguments.length?(Vt=+ht,Mt):Vt},Mt.strength=function(ht){return arguments.length?(oe=typeof ht=="function"?ht:E(+ht),Dt(),Mt):oe},Mt.distance=function(ht){return arguments.length?(ue=typeof ht=="function"?ht:E(+ht),dt(),Mt):ue},Mt}var P={value:function(){}};function F(){for(var Zt=0,ae=arguments.length,oe={},ce;Zt<ae;++Zt){if(!(ce=arguments[Zt]+"")||ce in oe||/[\s.]/.test(ce))throw new Error("illegal type: "+ce);oe[ce]=[]}return new R(oe)}function R(Zt){this._=Zt}function B(Zt,ae){return Zt.trim().split(/^|\s+/).map(function(oe){var ce="",ue=oe.indexOf(".");if(ue>=0&&(ce=oe.slice(ue+1),oe=oe.slice(0,ue)),oe&&!ae.hasOwnProperty(oe))throw new Error("unknown type: "+oe);return{type:oe,name:ce}})}R.prototype=F.prototype={constructor:R,on:function(Zt,ae){var oe=this._,ce=B(Zt+"",oe),ue,ye=-1,Tt=ce.length;if(arguments.length<2){for(;++ye<Tt;)if((ue=(Zt=ce[ye]).type)&&(ue=N(oe[ue],Zt.name)))return ue;return}if(ae!=null&&typeof ae!="function")throw new Error("invalid callback: "+ae);for(;++ye<Tt;)if(ue=(Zt=ce[ye]).type)oe[ue]=G(oe[ue],Zt.name,ae);else if(ae==null)for(ue in oe)oe[ue]=G(oe[ue],Zt.name,null);return this},copy:function(){var Zt={},ae=this._;for(var oe in ae)Zt[oe]=ae[oe].slice();return new R(Zt)},call:function(Zt,ae){if((ue=arguments.length-2)>0)for(var oe=new Array(ue),ce=0,ue,ye;ce<ue;++ce)oe[ce]=arguments[ce+2];if(!this._.hasOwnProperty(Zt))throw new Error("unknown type: "+Zt);for(ye=this._[Zt],ce=0,ue=ye.length;ce<ue;++ce)ye[ce].value.apply(ae,oe)},apply:function(Zt,ae,oe){if(!this._.hasOwnProperty(Zt))throw new Error("unknown type: "+Zt);for(var ce=this._[Zt],ue=0,ye=ce.length;ue<ye;++ue)ce[ue].value.apply(ae,oe)}};function N(Zt,ae){for(var oe=0,ce=Zt.length,ue;oe<ce;++oe)if((ue=Zt[oe]).name===ae)return ue.value}function G(Zt,ae,oe){for(var ce=0,ue=Zt.length;ce<ue;++ce)if(Zt[ce].name===ae){Zt[ce]=P,Zt=Zt.slice(0,ce).concat(Zt.slice(ce+1));break}return oe!=null&&Zt.push({name:ae,value:oe}),Zt}var X=F,J=0,it=0,nt=0,q=1e3,Z,$,V=0,rt=0,ot=0,H=typeof performance=="object"&&performance.now?performance:Date,Y=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(Zt){setTimeout(Zt,17)};function at(){return rt||(Y(et),rt=H.now()+ot)}function et(){rt=0}function ct(){this._call=this._time=this._next=null}ct.prototype=ft.prototype={constructor:ct,restart:function(Zt,ae,oe){if(typeof Zt!="function")throw new TypeError("callback is not a function");oe=(oe==null?at():+oe)+(ae==null?0:+ae),!this._next&&$!==this&&($?$._next=this:Z=this,$=this),this._call=Zt,this._time=oe,mt()},stop:function(){this._call&&(this._call=null,this._time=1/0,mt())}};function ft(Zt,ae,oe){var ce=new ct;return ce.restart(Zt,ae,oe),ce}function yt(){at(),++J;for(var Zt=Z,ae;Zt;)(ae=rt-Zt._time)>=0&&Zt._call.call(null,ae),Zt=Zt._next;--J}function xt(){rt=(V=H.now())+ot,J=it=0;try{yt()}finally{J=0,gt(),rt=0}}function Ct(){var Zt=H.now(),ae=Zt-V;ae>q&&(ot-=ae,V=Zt)}function gt(){for(var Zt,ae=Z,oe,ce=1/0;ae;)ae._call?(ce>ae._time&&(ce=ae._time),Zt=ae,ae=ae._next):(oe=ae._next,ae._next=null,ae=Zt?Zt._next=oe:Z=oe);$=Zt,mt(ce)}function mt(Zt){if(!J){it&&(it=clearTimeout(it));var ae=Zt-rt;ae>24?(Zt<1/0&&(it=setTimeout(xt,Zt-H.now()-ot)),nt&&(nt=clearInterval(nt))):(nt||(V=H.now(),nt=setInterval(Ct,q)),J=1,Y(xt))}}function vt(Zt){return Zt.x}function At(Zt){return Zt.y}var Ot=10,It=Math.PI*(3-Math.sqrt(5));function St(Zt){var ae,oe=1,ce=.001,ue=1-Math.pow(ce,1/300),ye=0,Tt=.6,Ft=(0,w.kH)(),$t=ft(Nt),Vt=X("tick","end");Zt==null&&(Zt=[]);function Nt(){Mt(),Vt.call("tick",ae),oe<ce&&($t.stop(),Vt.call("end",ae))}function Mt(dt){var ht,bt=Zt.length,Pt;dt===void 0&&(dt=1);for(var Gt=0;Gt<dt;++Gt)for(oe+=(ye-oe)*ue,Ft.each(function(te){te(oe)}),ht=0;ht<bt;++ht)Pt=Zt[ht],Pt.fx==null?Pt.x+=Pt.vx*=Tt:(Pt.x=Pt.fx,Pt.vx=0),Pt.fy==null?Pt.y+=Pt.vy*=Tt:(Pt.y=Pt.fy,Pt.vy=0);return ae}function Et(){for(var dt=0,ht=Zt.length,bt;dt<ht;++dt){if(bt=Zt[dt],bt.index=dt,bt.fx!=null&&(bt.x=bt.fx),bt.fy!=null&&(bt.y=bt.fy),isNaN(bt.x)||isNaN(bt.y)){var Pt=Ot*Math.sqrt(dt),Gt=dt*It;bt.x=Pt*Math.cos(Gt),bt.y=Pt*Math.sin(Gt)}(isNaN(bt.vx)||isNaN(bt.vy))&&(bt.vx=bt.vy=0)}}function Dt(dt){return dt.initialize&&dt.initialize(Zt),dt}return Et(),ae={tick:Mt,restart:function(){return $t.restart(Nt),ae},stop:function(){return $t.stop(),ae},nodes:function(dt){return arguments.length?(Zt=dt,Et(),Ft.each(Dt),ae):Zt},alpha:function(dt){return arguments.length?(oe=+dt,ae):oe},alphaMin:function(dt){return arguments.length?(ce=+dt,ae):ce},alphaDecay:function(dt){return arguments.length?(ue=+dt,ae):+ue},alphaTarget:function(dt){return arguments.length?(ye=+dt,ae):ye},velocityDecay:function(dt){return arguments.length?(Tt=1-dt,ae):1-Tt},force:function(dt,ht){return arguments.length>1?(ht==null?Ft.remove(dt):Ft.set(dt,Dt(ht)),ae):Ft.get(dt)},find:function(dt,ht,bt){var Pt=0,Gt=Zt.length,te,ne,je,Ne,ge;for(bt==null?bt=1/0:bt*=bt,Pt=0;Pt<Gt;++Pt)Ne=Zt[Pt],te=dt-Ne.x,ne=ht-Ne.y,je=te*te+ne*ne,je<bt&&(ge=Ne,bt=je);return ge},on:function(dt,ht){return arguments.length>1?(Vt.on(dt,ht),ae):Vt.on(dt)}}}function Bt(){var Zt,ae,oe,ce=E(-30),ue,ye=1,Tt=1/0,Ft=.81;function $t(Et){var Dt,dt=Zt.length,ht=k(Zt,vt,At).visitAfter(Nt);for(oe=Et,Dt=0;Dt<dt;++Dt)ae=Zt[Dt],ht.visit(Mt)}function Vt(){if(Zt){var Et,Dt=Zt.length,dt;for(ue=new Array(Dt),Et=0;Et<Dt;++Et)dt=Zt[Et],ue[dt.index]=+ce(dt,Et,Zt)}}function Nt(Et){var Dt=0,dt,ht,bt=0,Pt,Gt,te;if(Et.length){for(Pt=Gt=te=0;te<4;++te)(dt=Et[te])&&(ht=Math.abs(dt.value))&&(Dt+=dt.value,bt+=ht,Pt+=ht*dt.x,Gt+=ht*dt.y);Et.x=Pt/bt,Et.y=Gt/bt}else{dt=Et,dt.x=dt.data.x,dt.y=dt.data.y;do Dt+=ue[dt.data.index];while(dt=dt.next)}Et.value=Dt}function Mt(Et,Dt,dt,ht){if(!Et.value)return!0;var bt=Et.x-ae.x,Pt=Et.y-ae.y,Gt=ht-Dt,te=bt*bt+Pt*Pt;if(Gt*Gt/Ft<te)return te<Tt&&(bt===0&&(bt=i(),te+=bt*bt),Pt===0&&(Pt=i(),te+=Pt*Pt),te<ye&&(te=Math.sqrt(ye*te)),ae.vx+=bt*Et.value*oe/te,ae.vy+=Pt*Et.value*oe/te),!0;if(!(Et.length||te>=Tt)){(Et.data!==ae||Et.next)&&(bt===0&&(bt=i(),te+=bt*bt),Pt===0&&(Pt=i(),te+=Pt*Pt),te<ye&&(te=Math.sqrt(ye*te)));do Et.data!==ae&&(Gt=ue[Et.data.index]*oe/te,ae.vx+=bt*Gt,ae.vy+=Pt*Gt);while(Et=Et.next)}}return $t.initialize=function(Et){Zt=Et,Vt()},$t.strength=function(Et){return arguments.length?(ce=typeof Et=="function"?Et:E(+Et),Vt(),$t):ce},$t.distanceMin=function(Et){return arguments.length?(ye=Et*Et,$t):Math.sqrt(ye)},$t.distanceMax=function(Et){return arguments.length?(Tt=Et*Et,$t):Math.sqrt(Tt)},$t.theta=function(Et){return arguments.length?(Ft=Et*Et,$t):Math.sqrt(Ft)},$t}function re(Zt,ae,oe){var ce,ue=E(.1),ye,Tt;typeof Zt!="function"&&(Zt=E(+Zt)),ae==null&&(ae=0),oe==null&&(oe=0);function Ft(Vt){for(var Nt=0,Mt=ce.length;Nt<Mt;++Nt){var Et=ce[Nt],Dt=Et.x-ae||1e-6,dt=Et.y-oe||1e-6,ht=Math.sqrt(Dt*Dt+dt*dt),bt=(Tt[Nt]-ht)*ye[Nt]*Vt/ht;Et.vx+=Dt*bt,Et.vy+=dt*bt}}function $t(){if(ce){var Vt,Nt=ce.length;for(ye=new Array(Nt),Tt=new Array(Nt),Vt=0;Vt<Nt;++Vt)Tt[Vt]=+Zt(ce[Vt],Vt,ce),ye[Vt]=isNaN(Tt[Vt])?0:+ue(ce[Vt],Vt,ce)}}return Ft.initialize=function(Vt){ce=Vt,$t()},Ft.strength=function(Vt){return arguments.length?(ue=typeof Vt=="function"?Vt:E(+Vt),$t(),Ft):ue},Ft.radius=function(Vt){return arguments.length?(Zt=typeof Vt=="function"?Vt:E(+Vt),$t(),Ft):Zt},Ft.x=function(Vt){return arguments.length?(ae=+Vt,Ft):ae},Ft.y=function(Vt){return arguments.length?(oe=+Vt,Ft):oe},Ft}function Yt(Zt){var ae=E(.1),oe,ce,ue;typeof Zt!="function"&&(Zt=E(Zt==null?0:+Zt));function ye(Ft){for(var $t=0,Vt=oe.length,Nt;$t<Vt;++$t)Nt=oe[$t],Nt.vx+=(ue[$t]-Nt.x)*ce[$t]*Ft}function Tt(){if(oe){var Ft,$t=oe.length;for(ce=new Array($t),ue=new Array($t),Ft=0;Ft<$t;++Ft)ce[Ft]=isNaN(ue[Ft]=+Zt(oe[Ft],Ft,oe))?0:+ae(oe[Ft],Ft,oe)}}return ye.initialize=function(Ft){oe=Ft,Tt()},ye.strength=function(Ft){return arguments.length?(ae=typeof Ft=="function"?Ft:E(+Ft),Tt(),ye):ae},ye.x=function(Ft){return arguments.length?(Zt=typeof Ft=="function"?Ft:E(+Ft),Tt(),ye):Zt},ye}function he(Zt){var ae=E(.1),oe,ce,ue;typeof Zt!="function"&&(Zt=E(Zt==null?0:+Zt));function ye(Ft){for(var $t=0,Vt=oe.length,Nt;$t<Vt;++$t)Nt=oe[$t],Nt.vy+=(ue[$t]-Nt.y)*ce[$t]*Ft}function Tt(){if(oe){var Ft,$t=oe.length;for(ce=new Array($t),ue=new Array($t),Ft=0;Ft<$t;++Ft)ce[Ft]=isNaN(ue[Ft]=+Zt(oe[Ft],Ft,oe))?0:+ae(oe[Ft],Ft,oe)}}return ye.initialize=function(Ft){oe=Ft,Tt()},ye.strength=function(Ft){return arguments.length?(ae=typeof Ft=="function"?Ft:E(+Ft),Tt(),ye):ae},ye.y=function(Ft){return arguments.length?(Zt=typeof Ft=="function"?Ft:E(+Ft),Tt(),ye):Zt},ye}},57624:function(Q,U,t){t.d(U,{E9:function(){return c},SO:function(){return _}});function M(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)}function E(x,k){if((y=(x=k?x.toExponential(k-1):x.toExponential()).indexOf("e"))<0)return null;var y,A=x.slice(0,y);return[A.length>1?A[0]+A.slice(2):A,+x.slice(y+1)]}function i(x){return x=E(Math.abs(x)),x?x[1]:NaN}function C(x,k){return function(y,A){for(var L=y.length,u=[],m=0,S=x[0],w=0;L>0&&S>0&&(w+S+1>A&&(S=Math.max(1,A-w)),u.push(y.substring(L-=S,L+S)),!((w+=S+1)>A));)S=x[m=(m+1)%x.length];return u.reverse().join(k)}}function T(x){return function(k){return k.replace(/[0-9]/g,function(y){return x[+y]})}}var v=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d(x){if(!(k=v.exec(x)))throw new Error("invalid format: "+x);var k;return new r({fill:k[1],align:k[2],sign:k[3],symbol:k[4],zero:k[5],width:k[6],comma:k[7],precision:k[8]&&k[8].slice(1),trim:k[9],type:k[10]})}d.prototype=r.prototype;function r(x){this.fill=x.fill===void 0?" ":x.fill+"",this.align=x.align===void 0?">":x.align+"",this.sign=x.sign===void 0?"-":x.sign+"",this.symbol=x.symbol===void 0?"":x.symbol+"",this.zero=!!x.zero,this.width=x.width===void 0?void 0:+x.width,this.comma=!!x.comma,this.precision=x.precision===void 0?void 0:+x.precision,this.trim=!!x.trim,this.type=x.type===void 0?"":x.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function e(x){t:for(var k=x.length,y=1,A=-1,L;y<k;++y)switch(x[y]){case".":A=L=y;break;case"0":A===0&&(A=y),L=y;break;default:if(!+x[y])break t;A>0&&(A=0);break}return A>0?x.slice(0,A)+x.slice(L+1):x}var l;function n(x,k){var y=E(x,k);if(!y)return x+"";var A=y[0],L=y[1],u=L-(l=Math.max(-8,Math.min(8,Math.floor(L/3)))*3)+1,m=A.length;return u===m?A:u>m?A+new Array(u-m+1).join("0"):u>0?A.slice(0,u)+"."+A.slice(u):"0."+new Array(1-u).join("0")+E(x,Math.max(0,k+u-1))[0]}function s(x,k){var y=E(x,k);if(!y)return x+"";var A=y[0],L=y[1];return L<0?"0."+new Array(-L).join("0")+A:A.length>L+1?A.slice(0,L+1)+"."+A.slice(L+1):A+new Array(L-A.length+2).join("0")}var o={"%":function(x,k){return(x*100).toFixed(k)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:M,e:function(x,k){return x.toExponential(k)},f:function(x,k){return x.toFixed(k)},g:function(x,k){return x.toPrecision(k)},o:function(x){return Math.round(x).toString(8)},p:function(x,k){return s(x*100,k)},r:s,s:n,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function p(x){return x}var b=Array.prototype.map,h=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function _(x){var k=x.grouping===void 0||x.thousands===void 0?p:C(b.call(x.grouping,Number),x.thousands+""),y=x.currency===void 0?"":x.currency[0]+"",A=x.currency===void 0?"":x.currency[1]+"",L=x.decimal===void 0?".":x.decimal+"",u=x.numerals===void 0?p:T(b.call(x.numerals,String)),m=x.percent===void 0?"%":x.percent+"",S=x.minus===void 0?"-":x.minus+"",w=x.nan===void 0?"NaN":x.nan+"";function I(D){D=d(D);var P=D.fill,F=D.align,R=D.sign,B=D.symbol,N=D.zero,G=D.width,X=D.comma,J=D.precision,it=D.trim,nt=D.type;nt==="n"?(X=!0,nt="g"):o[nt]||(J===void 0&&(J=12),it=!0,nt="g"),(N||P==="0"&&F==="=")&&(N=!0,P="0",F="=");var q=B==="$"?y:B==="#"&&/[boxX]/.test(nt)?"0"+nt.toLowerCase():"",Z=B==="$"?A:/[%p]/.test(nt)?m:"",$=o[nt],V=/[defgprs%]/.test(nt);J=J===void 0?6:/[gprs]/.test(nt)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J));function rt(ot){var H=q,Y=Z,at,et,ct;if(nt==="c")Y=$(ot)+Y,ot="";else{ot=+ot;var ft=ot<0||1/ot<0;if(ot=isNaN(ot)?w:$(Math.abs(ot),J),it&&(ot=e(ot)),ft&&+ot==0&&R!=="+"&&(ft=!1),H=(ft?R==="("?R:S:R==="-"||R==="("?"":R)+H,Y=(nt==="s"?h[8+l/3]:"")+Y+(ft&&R==="("?")":""),V){for(at=-1,et=ot.length;++at<et;)if(ct=ot.charCodeAt(at),48>ct||ct>57){Y=(ct===46?L+ot.slice(at+1):ot.slice(at))+Y,ot=ot.slice(0,at);break}}}X&&!N&&(ot=k(ot,1/0));var yt=H.length+ot.length+Y.length,xt=yt<G?new Array(G-yt+1).join(P):"";switch(X&&N&&(ot=k(xt+ot,xt.length?G-Y.length:1/0),xt=""),F){case"<":ot=H+ot+Y+xt;break;case"=":ot=H+xt+ot+Y;break;case"^":ot=xt.slice(0,yt=xt.length>>1)+H+ot+Y+xt.slice(yt);break;default:ot=xt+H+ot+Y;break}return u(ot)}return rt.toString=function(){return D+""},rt}function O(D,P){var F=I((D=d(D),D.type="f",D)),R=Math.max(-8,Math.min(8,Math.floor(i(P)/3)))*3,B=Math.pow(10,-R),N=h[8+R/3];return function(G){return F(B*G)+N}}return{format:I,formatPrefix:O}}var a,c;f({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function f(x){return a=_(x),c=a.format,a.formatPrefix,a}},87108:function(Q,U,t){t.r(U),t.d(U,{geoAiry:function(){return N},geoAiryRaw:function(){return B},geoAitoff:function(){return X},geoAitoffRaw:function(){return G},geoArmadillo:function(){return it},geoArmadilloRaw:function(){return J},geoAugust:function(){return q},geoAugustRaw:function(){return nt},geoBaker:function(){return rt},geoBakerRaw:function(){return V},geoBerghaus:function(){return Y},geoBerghausRaw:function(){return H},geoBertin1953:function(){return gt},geoBertin1953Raw:function(){return Ct},geoBoggs:function(){return re},geoBoggsRaw:function(){return Bt},geoBonne:function(){return oe},geoBonneRaw:function(){return ae},geoBottomley:function(){return ue},geoBottomleyRaw:function(){return ce},geoBromley:function(){return Tt},geoBromleyRaw:function(){return ye},geoChamberlin:function(){return ht},geoChamberlinAfrica:function(){return dt},geoChamberlinRaw:function(){return Et},geoCollignon:function(){return Pt},geoCollignonRaw:function(){return bt},geoCraig:function(){return te},geoCraigRaw:function(){return Gt},geoCraster:function(){return Ne},geoCrasterRaw:function(){return je},geoCylindricalEqualArea:function(){return _e},geoCylindricalEqualAreaRaw:function(){return ge},geoCylindricalStereographic:function(){return hr},geoCylindricalStereographicRaw:function(){return De},geoEckert1:function(){return Be},geoEckert1Raw:function(){return fe},geoEckert2:function(){return pr},geoEckert2Raw:function(){return He},geoEckert3:function(){return Xt},geoEckert3Raw:function(){return Ze},geoEckert4:function(){return pe},geoEckert4Raw:function(){return ie},geoEckert5:function(){return Ce},geoEckert5Raw:function(){return ke},geoEckert6:function(){return Re},geoEckert6Raw:function(){return Fe},geoEisenlohr:function(){return Ke},geoEisenlohrRaw:function(){return Ge},geoFahey:function(){return zt},geoFaheyRaw:function(){return sr},geoFoucaut:function(){return Me},geoFoucautRaw:function(){return Ut},geoFoucautSinusoidal:function(){return qe},geoFoucautSinusoidalRaw:function(){return Te},geoGilbert:function(){return rr},geoGingery:function(){return Sr},geoGingeryRaw:function(){return cr},geoGinzburg4:function(){return rn},geoGinzburg4Raw:function(){return Mr},geoGinzburg5:function(){return pn},geoGinzburg5Raw:function(){return Ur},geoGinzburg6:function(){return yr},geoGinzburg6Raw:function(){return yn},geoGinzburg8:function(){return Dr},geoGinzburg8Raw:function(){return Cr},geoGinzburg9:function(){return $r},geoGinzburg9Raw:function(){return Nr},geoGringorten:function(){return $n},geoGringortenQuincuncial:function(){return cc},geoGringortenRaw:function(){return on},geoGuyou:function(){return an},geoGuyouRaw:function(){return ur},geoHammer:function(){return ft},geoHammerRaw:function(){return et},geoHammerRetroazimuthal:function(){return Sn},geoHammerRetroazimuthalRaw:function(){return sn},geoHealpix:function(){return nn},geoHealpixRaw:function(){return gr},geoHill:function(){return jr},geoHillRaw:function(){return xr},geoHomolosine:function(){return Rn},geoHomolosineRaw:function(){return _n},geoHufnagel:function(){return oi},geoHufnagelRaw:function(){return Cn},geoHyperelliptical:function(){return ta},geoHyperellipticalRaw:function(){return _i},geoInterrupt:function(){return Ia},geoInterruptedBoggs:function(){return Gl},geoInterruptedHomolosine:function(){return qi},geoInterruptedMollweide:function(){return Yl},geoInterruptedMollweideHemispheres:function(){return Xa},geoInterruptedQuarticAuthalic:function(){return es},geoInterruptedSinuMollweide:function(){return bl},geoInterruptedSinusoidal:function(){return Ms},geoKavrayskiy7:function(){return ka},geoKavrayskiy7Raw:function(){return ba},geoLagrange:function(){return za},geoLagrangeRaw:function(){return Ss},geoLarrivee:function(){return vu},geoLarriveeRaw:function(){return so},geoLaskowski:function(){return Ku},geoLaskowskiRaw:function(){return Qa},geoLittrow:function(){return La},geoLittrowRaw:function(){return Ro},geoLoximuthal:function(){return ts},geoLoximuthalRaw:function(){return Hl},geoMiller:function(){return Vl},geoMillerRaw:function(){return Oo},geoModifiedStereographic:function(){return ps},geoModifiedStereographicAlaska:function(){return Wl},geoModifiedStereographicGs48:function(){return ec},geoModifiedStereographicGs50:function(){return rc},geoModifiedStereographicLee:function(){return yu},geoModifiedStereographicMiller:function(){return mu},geoModifiedStereographicRaw:function(){return gu},geoMollweide:function(){return Ot},geoMollweideRaw:function(){return At},geoMtFlatPolarParabolic:function(){return xu},geoMtFlatPolarParabolicRaw:function(){return Xs},geoMtFlatPolarQuartic:function(){return nc},geoMtFlatPolarQuarticRaw:function(){return jo},geoMtFlatPolarSinusoidal:function(){return bu},geoMtFlatPolarSinusoidalRaw:function(){return wl},geoNaturalEarth:function(){return _u.c},geoNaturalEarth2:function(){return yo},geoNaturalEarth2Raw:function(){return Al},geoNaturalEarthRaw:function(){return _u.g},geoNellHammer:function(){return ds},geoNellHammerRaw:function(){return Es},geoNicolosi:function(){return Xl},geoNicolosiRaw:function(){return Po},geoPatterson:function(){return Ps},geoPattersonRaw:function(){return kl},geoPeirceQuincuncial:function(){return Su},geoPierceQuincuncial:function(){return Su},geoPolyconic:function(){return ac},geoPolyconicRaw:function(){return Ml},geoPolyhedral:function(){return ea},geoPolyhedralButterfly:function(){return Js},geoPolyhedralCollignon:function(){return gs},geoPolyhedralWaterman:function(){return ns},geoProject:function(){return lc},geoQuantize:function(){return Cu},geoQuincuncial:function(){return Go},geoRectangularPolyconic:function(){return Eu},geoRectangularPolyconicRaw:function(){return eu},geoRobinson:function(){return is},geoRobinsonRaw:function(){return To},geoSatellite:function(){return ms},geoSatelliteRaw:function(){return Ll},geoSinuMollweide:function(){return xn},geoSinuMollweideRaw:function(){return mn},geoSinusoidal:function(){return Zt},geoSinusoidalRaw:function(){return he},geoStitch:function(){return il},geoTimes:function(){return Ma},geoTimesRaw:function(){return ss},geoTwoPointAzimuthal:function(){return Pl},geoTwoPointAzimuthalRaw:function(){return nu},geoTwoPointAzimuthalUsa:function(){return xs},geoTwoPointEquidistant:function(){return Ou},geoTwoPointEquidistantRaw:function(){return al},geoTwoPointEquidistantUsa:function(){return fc},geoVanDerGrinten:function(){return ol},geoVanDerGrinten2:function(){return Pu},geoVanDerGrinten2Raw:function(){return qs},geoVanDerGrinten3:function(){return hc},geoVanDerGrinten3Raw:function(){return ls},geoVanDerGrinten4:function(){return sl},geoVanDerGrinten4Raw:function(){return eo},geoVanDerGrintenRaw:function(){return Ha},geoWagner:function(){return us},geoWagner4:function(){return Iu},geoWagner4Raw:function(){return zl},geoWagner6:function(){return au},geoWagner6Raw:function(){return cl},geoWagner7:function(){return iu},geoWagnerRaw:function(){return Vo},geoWiechel:function(){return ou},geoWiechelRaw:function(){return bs},geoWinkel3:function(){return zu},geoWinkel3Raw:function(){return fl}});var M=t(87952),E=Math.abs,i=Math.atan,C=Math.atan2,T=Math.cos,v=Math.exp,d=Math.floor,r=Math.log,e=Math.max,l=Math.min,n=Math.pow,s=Math.round,o=Math.sign||function(qt){return qt>0?1:qt<0?-1:0},p=Math.sin,b=Math.tan,h=1e-6,_=1e-12,a=Math.PI,c=a/2,f=a/4,x=Math.SQRT1_2,k=I(2),y=I(a),A=a*2,L=180/a,u=a/180;function m(qt){return qt?qt/Math.sin(qt):1}function S(qt){return qt>1?c:qt<-1?-c:Math.asin(qt)}function w(qt){return qt>1?0:qt<-1?a:Math.acos(qt)}function I(qt){return qt>0?Math.sqrt(qt):0}function O(qt){return qt=v(2*qt),(qt-1)/(qt+1)}function D(qt){return(v(qt)-v(-qt))/2}function P(qt){return(v(qt)+v(-qt))/2}function F(qt){return r(qt+I(qt*qt+1))}function R(qt){return r(qt+I(qt*qt-1))}function B(qt){var Kt=b(qt/2),se=2*r(T(qt/2))/(Kt*Kt);function ve(Se,Ae){var Le=T(Se),ir=T(Ae),fr=p(Ae),$e=ir*Le,mr=-((1-$e?r((1+$e)/2)/(1-$e):-.5)+se/(1+$e));return[mr*ir*p(Se),mr*fr]}return ve.invert=function(Se,Ae){var Le=I(Se*Se+Ae*Ae),ir=-qt/2,fr=50,$e;if(!Le)return[0,0];do{var mr=ir/2,Tr=T(mr),Rr=p(mr),Zr=Rr/Tr,dn=-r(E(Tr));ir-=$e=(2/Zr*dn-se*Zr-Le)/(-dn/(Rr*Rr)+1-se/(2*Tr*Tr))*(Tr<0?.7:1)}while(E($e)>h&&--fr>0);var wn=p(ir);return[C(Se*wn,Le*T(ir)),S(Ae*wn/Le)]},ve}function N(){var qt=c,Kt=(0,M.U)(B),se=Kt(qt);return se.radius=function(ve){return arguments.length?Kt(qt=ve*u):qt*L},se.scale(179.976).clipAngle(147)}function G(qt,Kt){var se=T(Kt),ve=m(w(se*T(qt/=2)));return[2*se*p(qt)*ve,p(Kt)*ve]}G.invert=function(qt,Kt){if(!(qt*qt+4*Kt*Kt>a*a+h)){var se=qt,ve=Kt,Se=25;do{var Ae=p(se),Le=p(se/2),ir=T(se/2),fr=p(ve),$e=T(ve),mr=p(2*ve),Tr=fr*fr,Rr=$e*$e,Zr=Le*Le,dn=1-Rr*ir*ir,wn=dn?w($e*ir)*I(kn=1/dn):kn=0,kn,jn=2*wn*$e*Le-qt,wi=wn*fr-Kt,Ai=kn*(Rr*Zr+wn*$e*ir*Tr),Si=kn*(.5*Ae*mr-wn*2*fr*Le),Li=kn*.25*(mr*Le-wn*fr*Rr*Ae),zi=kn*(Tr*ir+wn*Zr*$e),$i=Si*Li-zi*Ai;if(!$i)break;var xa=(wi*Si-jn*zi)/$i,lt=(jn*Li-wi*Ai)/$i;se-=xa,ve-=lt}while((E(xa)>h||E(lt)>h)&&--Se>0);return[se,ve]}};function X(){return(0,M.c)(G).scale(152.63)}function J(qt){var Kt=p(qt),se=T(qt),ve=qt>=0?1:-1,Se=b(ve*qt),Ae=(1+Kt-se)/2;function Le(ir,fr){var $e=T(fr),mr=T(ir/=2);return[(1+$e)*p(ir),(ve*fr>-C(mr,Se)-.001?0:-ve*10)+Ae+p(fr)*se-(1+$e)*Kt*mr]}return Le.invert=function(ir,fr){var $e=0,mr=0,Tr=50;do{var Rr=T($e),Zr=p($e),dn=T(mr),wn=p(mr),kn=1+dn,jn=kn*Zr-ir,wi=Ae+wn*se-kn*Kt*Rr-fr,Ai=kn*Rr/2,Si=-Zr*wn,Li=Kt*kn*Zr/2,zi=se*dn+Kt*Rr*wn,$i=Si*Li-zi*Ai,xa=(wi*Si-jn*zi)/$i/2,lt=(jn*Li-wi*Ai)/$i;E(lt)>2&&(lt/=2),$e-=xa,mr-=lt}while((E(xa)>h||E(lt)>h)&&--Tr>0);return ve*mr>-C(T($e),Se)-.001?[$e*2,mr]:null},Le}function it(){var qt=20*u,Kt=qt>=0?1:-1,se=b(Kt*qt),ve=(0,M.U)(J),Se=ve(qt),Ae=Se.stream;return Se.parallel=function(Le){return arguments.length?(se=b((Kt=(qt=Le*u)>=0?1:-1)*qt),ve(qt)):qt*L},Se.stream=function(Le){var ir=Se.rotate(),fr=Ae(Le),$e=(Se.rotate([0,0]),Ae(Le)),mr=Se.precision();return Se.rotate(ir),fr.sphere=function(){$e.polygonStart(),$e.lineStart();for(var Tr=Kt*-180;Kt*Tr<180;Tr+=Kt*90)$e.point(Tr,Kt*90);if(qt)for(;Kt*(Tr-=3*Kt*mr)>=-180;)$e.point(Tr,Kt*-C(T(Tr*u/2),se)*L);$e.lineEnd(),$e.polygonEnd()},fr},Se.scale(218.695).center([0,28.0974])}function nt(qt,Kt){var se=b(Kt/2),ve=I(1-se*se),Se=1+ve*T(qt/=2),Ae=p(qt)*ve/Se,Le=se/Se,ir=Ae*Ae,fr=Le*Le;return[1.3333333333333333*Ae*(3+ir-3*fr),1.3333333333333333*Le*(3+3*ir-fr)]}nt.invert=function(qt,Kt){if(qt*=.375,Kt*=.375,!qt&&E(Kt)>1)return null;var se=qt*qt,ve=Kt*Kt,Se=1+se+ve,Ae=I((Se-I(Se*Se-4*Kt*Kt))/2),Le=S(Ae)/3,ir=Ae?R(E(Kt/Ae))/3:F(E(qt))/3,fr=T(Le),$e=P(ir),mr=$e*$e-fr*fr;return[o(qt)*2*C(D(ir)*fr,.25-mr),o(Kt)*2*C($e*p(Le),.25+mr)]};function q(){return(0,M.c)(nt).scale(66.1603)}var Z=I(8),$=r(1+k);function V(qt,Kt){var se=E(Kt);return se<f?[qt,r(b(f+Kt/2))]:[qt*T(se)*(2*k-1/p(se)),o(Kt)*(2*k*(se-f)-r(b(se/2)))]}V.invert=function(qt,Kt){if((Ae=E(Kt))<$)return[qt,2*i(v(Kt))-c];var se=f,ve=25,Se,Ae;do{var Le=T(se/2),ir=b(se/2);se-=Se=(Z*(se-f)-r(ir)-Ae)/(Z-Le*Le/(2*ir))}while(E(Se)>_&&--ve>0);return[qt/(T(se)*(Z-1/p(se))),o(Kt)*se]};function rt(){return(0,M.c)(V).scale(112.314)}var ot=t(69020);function H(qt){var Kt=2*a/qt;function se(ve,Se){var Ae=(0,ot.O)(ve,Se);if(E(ve)>c){var Le=C(Ae[1],Ae[0]),ir=I(Ae[0]*Ae[0]+Ae[1]*Ae[1]),fr=Kt*s((Le-c)/Kt)+c,$e=C(p(Le-=fr),2-T(Le));Le=fr+S(a/ir*p($e))-$e,Ae[0]=ir*T(Le),Ae[1]=ir*p(Le)}return Ae}return se.invert=function(ve,Se){var Ae=I(ve*ve+Se*Se);if(Ae>c){var Le=C(Se,ve),ir=Kt*s((Le-c)/Kt)+c,fr=Le>ir?-1:1,$e=Ae*T(ir-Le),mr=1/b(fr*w(($e-a)/I(a*(a-2*$e)+Ae*Ae)));Le=ir+2*i((mr+fr*I(mr*mr-3))/3),ve=Ae*T(Le),Se=Ae*p(Le)}return ot.O.invert(ve,Se)},se}function Y(){var qt=5,Kt=(0,M.U)(H),se=Kt(qt),ve=se.stream,Se=.01,Ae=-T(Se*u),Le=p(Se*u);return se.lobes=function(ir){return arguments.length?Kt(qt=+ir):qt},se.stream=function(ir){var fr=se.rotate(),$e=ve(ir),mr=(se.rotate([0,0]),ve(ir));return se.rotate(fr),$e.sphere=function(){mr.polygonStart(),mr.lineStart();for(var Tr=0,Rr=360/qt,Zr=2*a/qt,dn=90-180/qt,wn=c;Tr<qt;++Tr,dn-=Rr,wn-=Zr)mr.point(C(Le*T(wn),Ae)*L,S(Le*p(wn))*L),dn<-90?(mr.point(-90,-180-dn-Se),mr.point(-90,-180-dn+Se)):(mr.point(90,dn+Se),mr.point(90,dn-Se));mr.lineEnd(),mr.polygonEnd()},$e},se.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var at=t(54724);function et(qt,Kt){if(arguments.length<2&&(Kt=qt),Kt===1)return at.y;if(Kt===1/0)return ct;function se(ve,Se){var Ae=(0,at.y)(ve/Kt,Se);return Ae[0]*=qt,Ae}return se.invert=function(ve,Se){var Ae=at.y.invert(ve/qt,Se);return Ae[0]*=Kt,Ae},se}function ct(qt,Kt){return[qt*T(Kt)/T(Kt/=2),2*p(Kt)]}ct.invert=function(qt,Kt){var se=2*S(Kt/2);return[qt*T(se/2)/T(se),se]};function ft(){var qt=2,Kt=(0,M.U)(et),se=Kt(qt);return se.coefficient=function(ve){return arguments.length?Kt(qt=+ve):qt},se.scale(169.529)}function yt(qt,Kt,se){var ve=100,Se,Ae,Le;se=se===void 0?0:+se,Kt=+Kt;do Ae=qt(se),Le=qt(se+h),Ae===Le&&(Le=Ae+h),se-=Se=-1*h*(Ae-Kt)/(Ae-Le);while(ve-- >0&&E(Se)>h);return ve<0?NaN:se}function xt(qt,Kt,se){return Kt===void 0&&(Kt=40),se===void 0&&(se=_),function(ve,Se,Ae,Le){var ir,fr,$e;Ae=Ae===void 0?0:+Ae,Le=Le===void 0?0:+Le;for(var mr=0;mr<Kt;mr++){var Tr=qt(Ae,Le),Rr=Tr[0]-ve,Zr=Tr[1]-Se;if(E(Rr)<se&&E(Zr)<se)break;var dn=Rr*Rr+Zr*Zr;if(dn>ir){Ae-=fr/=2,Le-=$e/=2;continue}ir=dn;var wn=(Ae>0?-1:1)*se,kn=(Le>0?-1:1)*se,jn=qt(Ae+wn,Le),wi=qt(Ae,Le+kn),Ai=(jn[0]-Tr[0])/wn,Si=(jn[1]-Tr[1])/wn,Li=(wi[0]-Tr[0])/kn,zi=(wi[1]-Tr[1])/kn,$i=zi*Ai-Si*Li,xa=(E($i)<.5?.5:1)/$i;if(fr=(Zr*Li-Rr*zi)*xa,$e=(Rr*Si-Zr*Ai)*xa,Ae+=fr,Le+=$e,E(fr)<se&&E($e)<se)break}return[Ae,Le]}}function Ct(){var qt=et(1.68,2),Kt=1.4,se=12;function ve(Se,Ae){if(Se+Ae<-Kt){var Le=(Se-Ae+1.6)*(Se+Ae+Kt)/8;Se+=Le,Ae-=.8*Le*p(Ae+a/2)}var ir=qt(Se,Ae),fr=(1-T(Se*Ae))/se;return ir[1]<0&&(ir[0]*=1+fr),ir[1]>0&&(ir[1]*=1+fr/1.5*ir[0]*ir[0]),ir}return ve.invert=xt(ve),ve}function gt(){return(0,M.c)(Ct()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function mt(qt,Kt){var se=qt*p(Kt),ve=30,Se;do Kt-=Se=(Kt+p(Kt)-se)/(1+T(Kt));while(E(Se)>h&&--ve>0);return Kt/2}function vt(qt,Kt,se){function ve(Se,Ae){return[qt*Se*T(Ae=mt(se,Ae)),Kt*p(Ae)]}return ve.invert=function(Se,Ae){return Ae=S(Ae/Kt),[Se/(qt*T(Ae)),S((2*Ae+p(2*Ae))/se)]},ve}var At=vt(k/c,k,a);function Ot(){return(0,M.c)(At).scale(169.529)}var It=2.00276,St=1.11072;function Bt(qt,Kt){var se=mt(a,Kt);return[It*qt/(1/T(Kt)+St/T(se)),(Kt+k*p(se))/It]}Bt.invert=function(qt,Kt){var se=It*Kt,ve=Kt<0?-f:f,Se=25,Ae,Le;do Le=se-k*p(ve),ve-=Ae=(p(2*ve)+2*ve-a*p(Le))/(2*T(2*ve)+2+a*T(Le)*k*T(ve));while(E(Ae)>h&&--Se>0);return Le=se-k*p(ve),[qt*(1/T(Le)+St/T(ve))/It,Le]};function re(){return(0,M.c)(Bt).scale(160.857)}function Yt(qt){var Kt=0,se=(0,M.U)(qt),ve=se(Kt);return ve.parallel=function(Se){return arguments.length?se(Kt=Se*u):Kt*L},ve}function he(qt,Kt){return[qt*T(Kt),Kt]}he.invert=function(qt,Kt){return[qt/T(Kt),Kt]};function Zt(){return(0,M.c)(he).scale(152.63)}function ae(qt){if(!qt)return he;var Kt=1/b(qt);function se(ve,Se){var Ae=Kt+qt-Se,Le=Ae&&ve*T(Se)/Ae;return[Ae*p(Le),Kt-Ae*T(Le)]}return se.invert=function(ve,Se){var Ae=I(ve*ve+(Se=Kt-Se)*Se),Le=Kt+qt-Ae;return[Ae/T(Le)*C(ve,Se),Le]},se}function oe(){return Yt(ae).scale(123.082).center([0,26.1441]).parallel(45)}function ce(qt){function Kt(se,ve){var Se=c-ve,Ae=Se&&se*qt*p(Se)/Se;return[Se*p(Ae)/qt,c-Se*T(Ae)]}return Kt.invert=function(se,ve){var Se=se*qt,Ae=c-ve,Le=I(Se*Se+Ae*Ae),ir=C(Se,Ae);return[(Le?Le/p(Le):1)*ir/qt,c-Le]},Kt}function ue(){var qt=.5,Kt=(0,M.U)(ce),se=Kt(qt);return se.fraction=function(ve){return arguments.length?Kt(qt=+ve):qt},se.scale(158.837)}var ye=vt(1,4/a,a);function Tt(){return(0,M.c)(ye).scale(152.63)}var Ft=t(24052),$t=t(92992);function Vt(qt,Kt,se,ve,Se,Ae){var Le=T(Ae),ir;if(E(qt)>1||E(Ae)>1)ir=w(se*Se+Kt*ve*Le);else{var fr=p(qt/2),$e=p(Ae/2);ir=2*S(I(fr*fr+Kt*ve*$e*$e))}return E(ir)>h?[ir,C(ve*p(Ae),Kt*Se-se*ve*Le)]:[0,0]}function Nt(qt,Kt,se){return w((qt*qt+Kt*Kt-se*se)/(2*qt*Kt))}function Mt(qt){return qt-2*a*d((qt+a)/(2*a))}function Et(qt,Kt,se){for(var ve=[[qt[0],qt[1],p(qt[1]),T(qt[1])],[Kt[0],Kt[1],p(Kt[1]),T(Kt[1])],[se[0],se[1],p(se[1]),T(se[1])]],Se=ve[2],Ae,Le=0;Le<3;++Le,Se=Ae)Ae=ve[Le],Se.v=Vt(Ae[1]-Se[1],Se[3],Se[2],Ae[3],Ae[2],Ae[0]-Se[0]),Se.point=[0,0];var ir=Nt(ve[0].v[0],ve[2].v[0],ve[1].v[0]),fr=Nt(ve[0].v[0],ve[1].v[0],ve[2].v[0]),$e=a-ir;ve[2].point[1]=0,ve[0].point[0]=-(ve[1].point[0]=ve[0].v[0]/2);var mr=[ve[2].point[0]=ve[0].point[0]+ve[2].v[0]*T(ir),2*(ve[0].point[1]=ve[1].point[1]=ve[2].v[0]*p(ir))];function Tr(Rr,Zr){var dn=p(Zr),wn=T(Zr),kn=new Array(3),jn;for(jn=0;jn<3;++jn){var wi=ve[jn];if(kn[jn]=Vt(Zr-wi[1],wi[3],wi[2],wn,dn,Rr-wi[0]),!kn[jn][0])return wi.point;kn[jn][1]=Mt(kn[jn][1]-wi.v[1])}var Ai=mr.slice();for(jn=0;jn<3;++jn){var Si=jn==2?0:jn+1,Li=Nt(ve[jn].v[0],kn[jn][0],kn[Si][0]);kn[jn][1]<0&&(Li=-Li),jn?jn==1?(Li=fr-Li,Ai[0]-=kn[jn][0]*T(Li),Ai[1]-=kn[jn][0]*p(Li)):(Li=$e-Li,Ai[0]+=kn[jn][0]*T(Li),Ai[1]+=kn[jn][0]*p(Li)):(Ai[0]+=kn[jn][0]*T(Li),Ai[1]-=kn[jn][0]*p(Li))}return Ai[0]/=3,Ai[1]/=3,Ai}return Tr}function Dt(qt){return qt[0]*=u,qt[1]*=u,qt}function dt(){return ht([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function ht(qt,Kt,se){var ve=(0,Ft.c)({type:"MultiPoint",coordinates:[qt,Kt,se]}),Se=[-ve[0],-ve[1]],Ae=(0,$t.c)(Se),Le=Et(Dt(Ae(qt)),Dt(Ae(Kt)),Dt(Ae(se)));Le.invert=xt(Le);var ir=(0,M.c)(Le).rotate(Se),fr=ir.center;return delete ir.rotate,ir.center=function($e){return arguments.length?fr(Ae($e)):Ae.invert(fr())},ir.clipAngle(90)}function bt(qt,Kt){var se=I(1-p(Kt));return[2/y*qt*se,y*(1-se)]}bt.invert=function(qt,Kt){var se=(se=Kt/y-1)*se;return[se>0?qt*I(a/se)/2:0,S(1-se)]};function Pt(){return(0,M.c)(bt).scale(95.6464).center([0,30])}function Gt(qt){var Kt=b(qt);function se(ve,Se){return[ve,(ve?ve/p(ve):1)*(p(Se)*T(ve)-Kt*T(Se))]}return se.invert=Kt?function(ve,Se){ve&&(Se*=p(ve)/ve);var Ae=T(ve);return[ve,2*C(I(Ae*Ae+Kt*Kt-Se*Se)-Ae,Kt-Se)]}:function(ve,Se){return[ve,S(ve?Se*b(ve)/ve:Se)]},se}function te(){return Yt(Gt).scale(249.828).clipAngle(90)}var ne=I(3);function je(qt,Kt){return[ne*qt*(2*T(2*Kt/3)-1)/y,ne*y*p(Kt/3)]}je.invert=function(qt,Kt){var se=3*S(Kt/(ne*y));return[y*qt/(ne*(2*T(2*se/3)-1)),se]};function Ne(){return(0,M.c)(je).scale(156.19)}function ge(qt){var Kt=T(qt);function se(ve,Se){return[ve*Kt,p(Se)/Kt]}return se.invert=function(ve,Se){return[ve/Kt,S(Se*Kt)]},se}function _e(){return Yt(ge).parallel(38.58).scale(195.044)}function De(qt){var Kt=T(qt);function se(ve,Se){return[ve*Kt,(1+Kt)*b(Se/2)]}return se.invert=function(ve,Se){return[ve/Kt,i(Se/(1+Kt))*2]},se}function hr(){return Yt(De).scale(124.75)}function fe(qt,Kt){var se=I(8/(3*a));return[se*qt*(1-E(Kt)/a),se*Kt]}fe.invert=function(qt,Kt){var se=I(8/(3*a)),ve=Kt/se;return[qt/(se*(1-E(ve)/a)),ve]};function Be(){return(0,M.c)(fe).scale(165.664)}function He(qt,Kt){var se=I(4-3*p(E(Kt)));return[2/I(6*a)*qt*se,o(Kt)*I(2*a/3)*(2-se)]}He.invert=function(qt,Kt){var se=2-E(Kt)/I(2*a/3);return[qt*I(6*a)/(2*se),o(Kt)*S((4-se*se)/3)]};function pr(){return(0,M.c)(He).scale(165.664)}function Ze(qt,Kt){var se=I(a*(4+a));return[2/se*qt*(1+I(1-4*Kt*Kt/(a*a))),4/se*Kt]}Ze.invert=function(qt,Kt){var se=I(a*(4+a))/2;return[qt*se/(1+I(1-Kt*Kt*(4+a)/(4*a))),Kt*se/2]};function Xt(){return(0,M.c)(Ze).scale(180.739)}function ie(qt,Kt){var se=(2+c)*p(Kt);Kt/=2;for(var ve=0,Se=1/0;ve<10&&E(Se)>h;ve++){var Ae=T(Kt);Kt-=Se=(Kt+p(Kt)*(Ae+2)-se)/(2*Ae*(1+Ae))}return[2/I(a*(4+a))*qt*(1+T(Kt)),2*I(a/(4+a))*p(Kt)]}ie.invert=function(qt,Kt){var se=Kt*I((4+a)/a)/2,ve=S(se),Se=T(ve);return[qt/(2/I(a*(4+a))*(1+Se)),S((ve+se*(Se+2))/(2+c))]};function pe(){return(0,M.c)(ie).scale(180.739)}function ke(qt,Kt){return[qt*(1+T(Kt))/I(2+a),2*Kt/I(2+a)]}ke.invert=function(qt,Kt){var se=I(2+a),ve=Kt*se/2;return[se*qt/(1+T(ve)),ve]};function Ce(){return(0,M.c)(ke).scale(173.044)}function Fe(qt,Kt){for(var se=(1+c)*p(Kt),ve=0,Se=1/0;ve<10&&E(Se)>h;ve++)Kt-=Se=(Kt+p(Kt)-se)/(1+T(Kt));return se=I(2+a),[qt*(1+T(Kt))/se,2*Kt/se]}Fe.invert=function(qt,Kt){var se=1+c,ve=I(se/2);return[qt*2*ve/(1+T(Kt*=ve)),S((Kt+p(Kt))/se)]};function Re(){return(0,M.c)(Fe).scale(173.044)}var be=3+2*k;function Ge(qt,Kt){var se=p(qt/=2),ve=T(qt),Se=I(T(Kt)),Ae=T(Kt/=2),Le=p(Kt)/(Ae+k*ve*Se),ir=I(2/(1+Le*Le)),fr=I((k*Ae+(ve+se)*Se)/(k*Ae+(ve-se)*Se));return[be*(ir*(fr-1/fr)-2*r(fr)),be*(ir*Le*(fr+1/fr)-2*i(Le))]}Ge.invert=function(qt,Kt){if(!(Ae=nt.invert(qt/1.2,Kt*1.065)))return null;var se=Ae[0],ve=Ae[1],Se=20,Ae;qt/=be,Kt/=be;do{var Le=se/2,ir=ve/2,fr=p(Le),$e=T(Le),mr=p(ir),Tr=T(ir),Rr=T(ve),Zr=I(Rr),dn=mr/(Tr+k*$e*Zr),wn=dn*dn,kn=I(2/(1+wn)),jn=k*Tr+($e+fr)*Zr,wi=k*Tr+($e-fr)*Zr,Ai=jn/wi,Si=I(Ai),Li=Si-1/Si,zi=Si+1/Si,$i=kn*Li-2*r(Si)-qt,xa=kn*dn*zi-2*i(dn)-Kt,lt=mr&&x*Zr*fr*wn/mr,_t=(k*$e*Tr+Zr)/(2*(Tr+k*$e*Zr)*(Tr+k*$e*Zr)*Zr),Lt=-.5*dn*kn*kn*kn,Ht=Lt*lt,Wt=Lt*_t,ee=(ee=2*Tr+k*Zr*($e-fr))*ee*Si,xe=(k*$e*Tr*Zr+Rr)/ee,me=-(k*fr*mr)/(Zr*ee),Ie=Li*Ht-2*xe/Si+kn*(xe+xe/Ai),ze=Li*Wt-2*me/Si+kn*(me+me/Ai),Xe=dn*zi*Ht-2*lt/(1+wn)+kn*zi*lt+kn*dn*(xe-xe/Ai),br=dn*zi*Wt-2*_t/(1+wn)+kn*zi*_t+kn*dn*(me-me/Ai),wr=ze*Xe-br*Ie;if(!wr)break;var Hr=(xa*ze-$i*br)/wr,Jr=($i*Xe-xa*Ie)/wr;se-=Hr,ve=e(-c,l(c,ve-Jr))}while((E(Hr)>h||E(Jr)>h)&&--Se>0);return E(E(ve)-c)<h?[0,ve]:Se&&[se,ve]};function Ke(){return(0,M.c)(Ge).scale(62.5271)}var or=T(35*u);function sr(qt,Kt){var se=b(Kt/2);return[qt*or*I(1-se*se),(1+or)*se]}sr.invert=function(qt,Kt){var se=Kt/(1+or);return[qt&&qt/(or*I(1-se*se)),2*i(se)]};function zt(){return(0,M.c)(sr).scale(137.152)}function Ut(qt,Kt){var se=Kt/2,ve=T(se);return[2*qt/y*T(Kt)*ve*ve,y*b(se)]}Ut.invert=function(qt,Kt){var se=i(Kt/y),ve=T(se),Se=2*se;return[qt*y/2/(T(Se)*ve*ve),Se]};function Me(){return(0,M.c)(Ut).scale(135.264)}function Te(qt){var Kt=1-qt,se=Ae(a,0)[0]-Ae(-a,0)[0],ve=Ae(0,c)[1]-Ae(0,-c)[1],Se=I(2*ve/se);function Ae(fr,$e){var mr=T($e),Tr=p($e);return[mr/(Kt+qt*mr)*fr,Kt*$e+qt*Tr]}function Le(fr,$e){var mr=Ae(fr,$e);return[mr[0]*Se,mr[1]/Se]}function ir(fr){return Le(0,fr)[1]}return Le.invert=function(fr,$e){var mr=yt(ir,$e),Tr=fr/Se*(qt+Kt/T(mr));return[Tr,mr]},Le}function qe(){var qt=.5,Kt=(0,M.U)(Te),se=Kt(qt);return se.alpha=function(ve){return arguments.length?Kt(qt=+ve):qt},se.scale(168.725)}var Qe=t(4888),Je=t(69604);function We(qt){return[qt[0]/2,S(b(qt[1]/2*u))*L]}function Oe(qt){return[qt[0]*2,2*i(p(qt[1]*u))*L]}function rr(qt){qt==null&&(qt=Qe.c);var Kt=qt(),se=(0,Je.c)().scale(L).precision(0).clipAngle(null).translate([0,0]);function ve(Ae){return Kt(We(Ae))}Kt.invert&&(ve.invert=function(Ae){return Oe(Kt.invert(Ae))}),ve.stream=function(Ae){var Le=Kt.stream(Ae),ir=se.stream({point:function(fr,$e){Le.point(fr/2,S(b(-$e/2*u))*L)},lineStart:function(){Le.lineStart()},lineEnd:function(){Le.lineEnd()},polygonStart:function(){Le.polygonStart()},polygonEnd:function(){Le.polygonEnd()}});return ir.sphere=Le.sphere,ir};function Se(Ae){ve[Ae]=function(){return arguments.length?(Kt[Ae].apply(Kt,arguments),ve):Kt[Ae]()}}return ve.rotate=function(Ae){return arguments.length?(se.rotate(Ae),ve):se.rotate()},ve.center=function(Ae){return arguments.length?(Kt.center(We(Ae)),ve):Oe(Kt.center())},Se("angle"),Se("clipAngle"),Se("clipExtent"),Se("fitExtent"),Se("fitHeight"),Se("fitSize"),Se("fitWidth"),Se("scale"),Se("translate"),Se("precision"),ve.scale(249.5)}function cr(qt,Kt){var se=2*a/Kt,ve=qt*qt;function Se(Ae,Le){var ir=(0,ot.O)(Ae,Le),fr=ir[0],$e=ir[1],mr=fr*fr+$e*$e;if(mr>ve){var Tr=I(mr),Rr=C($e,fr),Zr=se*s(Rr/se),dn=Rr-Zr,wn=qt*T(dn),kn=(qt*p(dn)-dn*p(wn))/(c-wn),jn=lr(dn,kn),wi=(a-qt)/nr(jn,wn,a);fr=Tr;var Ai=50,Si;do fr-=Si=(qt+nr(jn,wn,fr)*wi-Tr)/(jn(fr)*wi);while(E(Si)>h&&--Ai>0);$e=dn*p(fr),fr<c&&($e-=kn*(fr-c));var Li=p(Zr),zi=T(Zr);ir[0]=fr*zi-$e*Li,ir[1]=fr*Li+$e*zi}return ir}return Se.invert=function(Ae,Le){var ir=Ae*Ae+Le*Le;if(ir>ve){var fr=I(ir),$e=C(Le,Ae),mr=se*s($e/se),Tr=$e-mr;Ae=fr*T(Tr),Le=fr*p(Tr);for(var Rr=Ae-c,Zr=p(Ae),dn=Le/Zr,wn=Ae<c?1/0:0,kn=10;;){var jn=qt*p(dn),wi=qt*T(dn),Ai=p(wi),Si=c-wi,Li=(jn-dn*Ai)/Si,zi=lr(dn,Li);if(E(wn)<_||!--kn)break;dn-=wn=(dn*Zr-Li*Rr-Le)/(Zr-Rr*2*(Si*(wi+dn*jn*T(wi)-Ai)-jn*(jn-dn*Ai))/(Si*Si))}fr=qt+nr(zi,wi,Ae)*(a-qt)/nr(zi,wi,a),$e=mr+dn,Ae=fr*T($e),Le=fr*p($e)}return ot.O.invert(Ae,Le)},Se}function lr(qt,Kt){return function(se){var ve=qt*T(se);return se<c&&(ve-=Kt),I(1+ve*ve)}}function nr(qt,Kt,se){for(var ve=50,Se=(se-Kt)/ve,Ae=qt(Kt)+qt(se),Le=1,ir=Kt;Le<ve;++Le)Ae+=2*qt(ir+=Se);return Ae*.5*Se}function Sr(){var qt=6,Kt=30*u,se=T(Kt),ve=p(Kt),Se=(0,M.U)(cr),Ae=Se(Kt,qt),Le=Ae.stream,ir=.01,fr=-T(ir*u),$e=p(ir*u);return Ae.radius=function(mr){return arguments.length?(se=T(Kt=mr*u),ve=p(Kt),Se(Kt,qt)):Kt*L},Ae.lobes=function(mr){return arguments.length?Se(Kt,qt=+mr):qt},Ae.stream=function(mr){var Tr=Ae.rotate(),Rr=Le(mr),Zr=(Ae.rotate([0,0]),Le(mr));return Ae.rotate(Tr),Rr.sphere=function(){Zr.polygonStart(),Zr.lineStart();for(var dn=0,wn=2*a/qt,kn=0;dn<qt;++dn,kn-=wn)Zr.point(C($e*T(kn),fr)*L,S($e*p(kn))*L),Zr.point(C(ve*T(kn-wn/2),se)*L,S(ve*p(kn-wn/2))*L);Zr.lineEnd(),Zr.polygonEnd()},Rr},Ae.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function kr(qt,Kt,se,ve,Se,Ae,Le,ir){arguments.length<8&&(ir=0);function fr($e,mr){if(!mr)return[qt*$e/a,0];var Tr=mr*mr,Rr=qt+Tr*(Kt+Tr*(se+Tr*ve)),Zr=mr*(Se-1+Tr*(Ae-ir+Tr*Le)),dn=(Rr*Rr+Zr*Zr)/(2*Zr),wn=$e*S(Rr/dn)/a;return[dn*p(wn),mr*(1+Tr*ir)+dn*(1-T(wn))]}return fr.invert=function($e,mr){var Tr=a*$e/qt,Rr=mr,Zr,dn,wn=50;do{var kn=Rr*Rr,jn=qt+kn*(Kt+kn*(se+kn*ve)),wi=Rr*(Se-1+kn*(Ae-ir+kn*Le)),Ai=jn*jn+wi*wi,Si=2*wi,Li=Ai/Si,zi=Li*Li,$i=S(jn/Li)/a,xa=Tr*$i,lt=jn*jn,_t=(2*Kt+kn*(4*se+kn*6*ve))*Rr,Lt=Se+kn*(3*Ae+kn*5*Le),Ht=2*(jn*_t+wi*(Lt-1)),Wt=2*(Lt-1),ee=(Ht*Si-Ai*Wt)/(Si*Si),xe=T(xa),me=p(xa),Ie=Li*xe,ze=Li*me,Xe=Tr/a*(1/I(1-lt/zi))*(_t*Li-jn*ee)/zi,br=ze-$e,wr=Rr*(1+kn*ir)+Li-Ie-mr,Hr=ee*me+Ie*Xe,Jr=Ie*$i,Ar=1+ee-(ee*xe-ze*Xe),zr=ze*$i,Yr=Hr*zr-Ar*Jr;if(!Yr)break;Tr-=Zr=(wr*Hr-br*Ar)/Yr,Rr-=dn=(br*zr-wr*Jr)/Yr}while((E(Zr)>h||E(dn)>h)&&--wn>0);return[Tr,Rr]},fr}var Mr=kr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function rn(){return(0,M.c)(Mr).scale(149.995)}var Ur=kr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function pn(){return(0,M.c)(Ur).scale(153.93)}var yn=kr(5/6*a,-.62636,-.0344,0,1.3493,-.05524,0,.045);function yr(){return(0,M.c)(yn).scale(130.945)}function Cr(qt,Kt){var se=qt*qt,ve=Kt*Kt;return[qt*(1-.162388*ve)*(.87-952426e-9*se*se),Kt*(1+ve/12)]}Cr.invert=function(qt,Kt){var se=qt,ve=Kt,Se=50,Ae;do{var Le=ve*ve;ve-=Ae=(ve*(1+Le/12)-Kt)/(1+Le/4)}while(E(Ae)>h&&--Se>0);Se=50,qt/=1-.162388*Le;do{var ir=(ir=se*se)*ir;se-=Ae=(se*(.87-952426e-9*ir)-qt)/(.87-.00476213*ir)}while(E(Ae)>h&&--Se>0);return[se,ve]};function Dr(){return(0,M.c)(Cr).scale(131.747)}var Nr=kr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function $r(){return(0,M.c)(Nr).scale(131.087)}function fn(qt){var Kt=qt(c,0)[0]-qt(-c,0)[0];function se(ve,Se){var Ae=ve>0?-.5:.5,Le=qt(ve+Ae*a,Se);return Le[0]-=Ae*Kt,Le}return qt.invert&&(se.invert=function(ve,Se){var Ae=ve>0?-.5:.5,Le=qt.invert(ve+Ae*Kt,Se),ir=Le[0]-Ae*a;return ir<-a?ir+=2*a:ir>a&&(ir-=2*a),Le[0]=ir,Le}),se}function on(qt,Kt){var se=o(qt),ve=o(Kt),Se=T(Kt),Ae=T(qt)*Se,Le=p(qt)*Se,ir=p(ve*Kt);qt=E(C(Le,ir)),Kt=S(Ae),E(qt-c)>h&&(qt%=c);var fr=In(qt>a/4?c-qt:qt,Kt);return qt>a/4&&(ir=fr[0],fr[0]=-fr[1],fr[1]=-ir),fr[0]*=se,fr[1]*=-ve,fr}on.invert=function(qt,Kt){E(qt)>1&&(qt=o(qt)*2-qt),E(Kt)>1&&(Kt=o(Kt)*2-Kt);var se=o(qt),ve=o(Kt),Se=-se*qt,Ae=-ve*Kt,Le=Ae/Se<1,ir=En(Le?Ae:Se,Le?Se:Ae),fr=ir[0],$e=ir[1],mr=T($e);return Le&&(fr=-c-fr),[se*(C(p(fr)*mr,-p($e))+a),ve*S(T(fr)*mr)]};function In(qt,Kt){if(Kt===c)return[0,0];var se=p(Kt),ve=se*se,Se=ve*ve,Ae=1+Se,Le=1+3*Se,ir=1-Se,fr=S(1/I(Ae)),$e=ir+ve*Ae*fr,mr=(1-se)/$e,Tr=I(mr),Rr=mr*Ae,Zr=I(Rr),dn=Tr*ir,wn,kn;if(qt===0)return[0,-(dn+ve*Zr)];var jn=T(Kt),wi=1/jn,Ai=2*se*jn,Si=(-3*ve+fr*Le)*Ai,Li=(-$e*jn-(1-se)*Si)/($e*$e),zi=.5*Li/Tr,$i=ir*zi-2*ve*Tr*Ai,xa=ve*Ae*Li+mr*Le*Ai,lt=-wi*Ai,_t=-wi*xa,Lt=-2*wi*$i,Ht=4*qt/a,Wt;if(qt>.222*a||Kt<a/4&&qt>.175*a){if(wn=(dn+ve*I(Rr*(1+Se)-dn*dn))/(1+Se),qt>a/4)return[wn,wn];var ee=wn,xe=.5*wn;wn=.5*(xe+ee),kn=50;do{var me=I(Rr-wn*wn),Ie=wn*(Lt+lt*me)+_t*S(wn/Zr)-Ht;if(!Ie)break;Ie<0?xe=wn:ee=wn,wn=.5*(xe+ee)}while(E(ee-xe)>h&&--kn>0)}else{wn=h,kn=25;do{var ze=wn*wn,Xe=I(Rr-ze),br=Lt+lt*Xe,wr=wn*br+_t*S(wn/Zr)-Ht,Hr=br+(_t-lt*ze)/Xe;wn-=Wt=Xe?wr/Hr:0}while(E(Wt)>h&&--kn>0)}return[wn,-dn-ve*I(Rr-wn*wn)]}function En(qt,Kt){for(var se=0,ve=1,Se=.5,Ae=50;;){var Le=Se*Se,ir=I(Se),fr=S(1/I(1+Le)),$e=1-Le+Se*(1+Le)*fr,mr=(1-ir)/$e,Tr=I(mr),Rr=mr*(1+Le),Zr=Tr*(1-Le),dn=Rr-qt*qt,wn=I(dn),kn=Kt+Zr+Se*wn;if(E(ve-se)<_||--Ae===0||kn===0)break;kn>0?se=Se:ve=Se,Se=.5*(se+ve)}if(!Ae)return null;var jn=S(ir),wi=T(jn),Ai=1/wi,Si=2*ir*wi,Li=(-3*Se+fr*(1+3*Le))*Si,zi=(-$e*wi-(1-ir)*Li)/($e*$e),$i=.5*zi/Tr,xa=(1-Le)*$i-2*Se*Tr*Si,lt=-2*Ai*xa,_t=-Ai*Si,Lt=-Ai*(Se*(1+Le)*zi+mr*(1+3*Le)*Si);return[a/4*(qt*(lt+_t*wn)+Lt*S(qt/I(Rr))),jn]}function $n(){return(0,M.c)(fn(on)).scale(239.75)}function ri(qt,Kt,se){var ve,Se,Ae;return qt?(ve=ui(qt,se),Kt?(Se=ui(Kt,1-se),Ae=Se[1]*Se[1]+se*ve[0]*ve[0]*Se[0]*Se[0],[[ve[0]*Se[2]/Ae,ve[1]*ve[2]*Se[0]*Se[1]/Ae],[ve[1]*Se[1]/Ae,-ve[0]*ve[2]*Se[0]*Se[2]/Ae],[ve[2]*Se[1]*Se[2]/Ae,-se*ve[0]*ve[1]*Se[0]/Ae]]):[[ve[0],0],[ve[1],0],[ve[2],0]]):(Se=ui(Kt,1-se),[[0,Se[0]/Se[1]],[1/Se[1],0],[Se[2]/Se[1],0]])}function ui(qt,Kt){var se,ve,Se,Ae,Le;if(Kt<h)return Ae=p(qt),ve=T(qt),se=Kt*(qt-Ae*ve)/4,[Ae-se*ve,ve+se*Ae,1-Kt*Ae*Ae/2,qt-se];if(Kt>=1-h)return se=(1-Kt)/4,ve=P(qt),Ae=O(qt),Se=1/ve,Le=ve*D(qt),[Ae+se*(Le-qt)/(ve*ve),Se-se*Ae*Se*(Le-qt),Se+se*Ae*Se*(Le+qt),2*i(v(qt))-c+se*(Le-qt)/ve];var ir=[1,0,0,0,0,0,0,0,0],fr=[I(Kt),0,0,0,0,0,0,0,0],$e=0;for(ve=I(1-Kt),Le=1;E(fr[$e]/ir[$e])>h&&$e<8;)se=ir[$e++],fr[$e]=(se-ve)/2,ir[$e]=(se+ve)/2,ve=I(se*ve),Le*=2;Se=Le*ir[$e]*qt;do Ae=fr[$e]*p(ve=Se)/ir[$e],Se=(S(Ae)+Se)/2;while(--$e);return[p(Se),Ae=T(Se),Ae/T(Se-ve),Se]}function ni(qt,Kt,se){var ve=E(qt),Se=E(Kt),Ae=D(Se);if(ve){var Le=1/p(ve),ir=1/(b(ve)*b(ve)),fr=-(ir+se*(Ae*Ae*Le*Le)-1+se),$e=(se-1)*ir,mr=(-fr+I(fr*fr-4*$e))/2;return[zn(i(1/I(mr)),se)*o(qt),zn(i(I((mr/ir-1)/se)),1-se)*o(Kt)]}return[0,zn(i(Ae),1-se)*o(Kt)]}function zn(qt,Kt){if(!Kt)return qt;if(Kt===1)return r(b(qt/2+f));for(var se=1,ve=I(1-Kt),Se=I(Kt),Ae=0;E(Se)>h;Ae++){if(qt%a){var Le=i(ve*b(qt)/se);Le<0&&(Le+=a),qt+=Le+~~(qt/a)*a}else qt+=qt;Se=(se+ve)/2,ve=I(se*ve),Se=((se=Se)-ve)/2}return qt/(n(2,Ae)*se)}function ur(qt,Kt){var se=(k-1)/(k+1),ve=I(1-se*se),Se=zn(c,ve*ve),Ae=-1,Le=r(b(a/4+E(Kt)/2)),ir=v(Ae*Le)/I(se),fr=Gr(ir*T(Ae*qt),ir*p(Ae*qt)),$e=ni(fr[0],fr[1],ve*ve);return[-$e[1],(Kt>=0?1:-1)*(.5*Se-$e[0])]}function Gr(qt,Kt){var se=qt*qt,ve=Kt+1,Se=1-se-Kt*Kt;return[.5*((qt>=0?c:-c)-C(Se,2*qt)),-.25*r(Se*Se+4*se)+.5*r(ve*ve+se)]}function qr(qt,Kt){var se=Kt[0]*Kt[0]+Kt[1]*Kt[1];return[(qt[0]*Kt[0]+qt[1]*Kt[1])/se,(qt[1]*Kt[0]-qt[0]*Kt[1])/se]}ur.invert=function(qt,Kt){var se=(k-1)/(k+1),ve=I(1-se*se),Se=zn(c,ve*ve),Ae=-1,Le=ri(.5*Se-Kt,-qt,ve*ve),ir=qr(Le[0],Le[1]),fr=C(ir[1],ir[0])/Ae;return[fr,2*i(v(.5/Ae*r(se*ir[0]*ir[0]+se*ir[1]*ir[1])))-c]};function an(){return(0,M.c)(fn(ur)).scale(151.496)}var Mn=t(61780);function sn(qt){var Kt=p(qt),se=T(qt),ve=An(qt);ve.invert=An(-qt);function Se(Ae,Le){var ir=ve(Ae,Le);Ae=ir[0],Le=ir[1];var fr=p(Le),$e=T(Le),mr=T(Ae),Tr=w(Kt*fr+se*$e*mr),Rr=p(Tr),Zr=E(Rr)>h?Tr/Rr:1;return[Zr*se*p(Ae),(E(Ae)>c?Zr:-Zr)*(Kt*$e-se*fr*mr)]}return Se.invert=function(Ae,Le){var ir=I(Ae*Ae+Le*Le),fr=-p(ir),$e=T(ir),mr=ir*$e,Tr=-Le*fr,Rr=ir*Kt,Zr=I(mr*mr+Tr*Tr-Rr*Rr),dn=C(mr*Rr+Tr*Zr,Tr*Rr-mr*Zr),wn=(ir>c?-1:1)*C(Ae*fr,ir*T(dn)*$e+Le*p(dn)*fr);return ve.invert(wn,dn)},Se}function An(qt){var Kt=p(qt),se=T(qt);return function(ve,Se){var Ae=T(Se),Le=T(ve)*Ae,ir=p(ve)*Ae,fr=p(Se);return[C(ir,Le*se-fr*Kt),S(fr*se+Le*Kt)]}}function Sn(){var qt=0,Kt=(0,M.U)(sn),se=Kt(qt),ve=se.rotate,Se=se.stream,Ae=(0,Mn.c)();return se.parallel=function(Le){if(!arguments.length)return qt*L;var ir=se.rotate();return Kt(qt=Le*u).rotate(ir)},se.rotate=function(Le){return arguments.length?(ve.call(se,[Le[0],Le[1]-qt*L]),Ae.center([-Le[0],-Le[1]]),se):(Le=ve.call(se),Le[1]+=qt*L,Le)},se.stream=function(Le){return Le=Se(Le),Le.sphere=function(){Le.polygonStart();var ir=.01,fr=Ae.radius(90-ir)().coordinates[0],$e=fr.length-1,mr=-1,Tr;for(Le.lineStart();++mr<$e;)Le.point((Tr=fr[mr])[0],Tr[1]);for(Le.lineEnd(),fr=Ae.radius(90+ir)().coordinates[0],$e=fr.length-1,Le.lineStart();--mr>=0;)Le.point((Tr=fr[mr])[0],Tr[1]);Le.lineEnd(),Le.polygonEnd()},Le},se.scale(79.4187).parallel(45).clipAngle(179.999)}var qn=t(84706),ii=t(16016),Mi=3,dr=S(1-1/Mi)*L,Er=ge(0);function gr(qt){var Kt=dr*u,se=bt(a,Kt)[0]-bt(-a,Kt)[0],ve=Er(0,Kt)[1],Se=bt(0,Kt)[1],Ae=y-Se,Le=A/qt,ir=4/A,fr=ve+Ae*Ae*4/A;function $e(mr,Tr){var Rr,Zr=E(Tr);if(Zr>Kt){var dn=l(qt-1,e(0,d((mr+a)/Le)));mr+=a*(qt-1)/qt-dn*Le,Rr=bt(mr,Zr),Rr[0]=Rr[0]*A/se-A*(qt-1)/(2*qt)+dn*A/qt,Rr[1]=ve+(Rr[1]-Se)*4*Ae/A,Tr<0&&(Rr[1]=-Rr[1])}else Rr=Er(mr,Tr);return Rr[0]*=ir,Rr[1]/=fr,Rr}return $e.invert=function(mr,Tr){mr/=ir,Tr*=fr;var Rr=E(Tr);if(Rr>ve){var Zr=l(qt-1,e(0,d((mr+a)/Le)));mr=(mr+a*(qt-1)/qt-Zr*Le)*se/A;var dn=bt.invert(mr,.25*(Rr-ve)*A/Ae+Se);return dn[0]-=a*(qt-1)/qt-Zr*Le,Tr<0&&(dn[1]=-dn[1]),dn}return Er.invert(mr,Tr)},$e}function Or(qt,Kt){return[qt,Kt&1?90-h:dr]}function vn(qt,Kt){return[qt,Kt&1?-90+h:-dr]}function Tn(qt){return[qt[0]*(1-h),qt[1]]}function ln(qt){var Kt=[].concat((0,qn.ik)(-180,180+qt/2,qt).map(Or),(0,qn.ik)(180,-180-qt/2,-qt).map(vn));return{type:"Polygon",coordinates:[qt===180?Kt.map(Tn):Kt]}}function nn(){var qt=4,Kt=(0,M.U)(gr),se=Kt(qt),ve=se.stream;return se.lobes=function(Se){return arguments.length?Kt(qt=+Se):qt},se.stream=function(Se){var Ae=se.rotate(),Le=ve(Se),ir=(se.rotate([0,0]),ve(Se));return se.rotate(Ae),Le.sphere=function(){(0,ii.c)(ln(180/qt),ir)},Le},se.scale(239.75)}function xr(qt){var Kt=1+qt,se=p(1/Kt),ve=S(se),Se=2*I(a/(Ae=a+4*ve*Kt)),Ae,Le=.5*Se*(Kt+I(qt*(2+qt))),ir=qt*qt,fr=Kt*Kt;function $e(mr,Tr){var Rr=1-p(Tr),Zr,dn;if(Rr&&Rr<2){var wn=c-Tr,kn=25,jn;do{var wi=p(wn),Ai=T(wn),Si=ve+C(wi,Kt-Ai),Li=1+fr-2*Kt*Ai;wn-=jn=(wn-ir*ve-Kt*wi+Li*Si-.5*Rr*Ae)/(2*Kt*wi*Si)}while(E(jn)>_&&--kn>0);Zr=Se*I(Li),dn=mr*Si/a}else Zr=Se*(qt+Rr),dn=mr*ve/a;return[Zr*p(dn),Le-Zr*T(dn)]}return $e.invert=function(mr,Tr){var Rr=mr*mr+(Tr-=Le)*Tr,Zr=(1+fr-Rr/(Se*Se))/(2*Kt),dn=w(Zr),wn=p(dn),kn=ve+C(wn,Kt-Zr);return[S(mr/I(Rr))*a/kn,S(1-2*(dn-ir*ve-Kt*wn+(1+fr-2*Kt*Zr)*kn)/Ae)]},$e}function jr(){var qt=1,Kt=(0,M.U)(xr),se=Kt(qt);return se.ratio=function(ve){return arguments.length?Kt(qt=+ve):qt},se.scale(167.774).center([0,18.67])}var Pr=.7109889596207567,Vr=.0528035274542;function mn(qt,Kt){return Kt>-Pr?(qt=At(qt,Kt),qt[1]+=Vr,qt):he(qt,Kt)}mn.invert=function(qt,Kt){return Kt>-Pr?At.invert(qt,Kt-Vr):he.invert(qt,Kt)};function xn(){return(0,M.c)(mn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function _n(qt,Kt){return E(Kt)>Pr?(qt=At(qt,Kt),qt[1]-=Kt>0?Vr:-Vr,qt):he(qt,Kt)}_n.invert=function(qt,Kt){return E(Kt)>Pr?At.invert(qt,Kt+(Kt>0?Vr:-Vr)):he.invert(qt,Kt)};function Rn(){return(0,M.c)(_n).scale(152.63)}function Cn(qt,Kt,se,ve){var Se=I(4*a/(2*se+(1+qt-Kt/2)*p(2*se)+(qt+Kt)/2*p(4*se)+Kt/2*p(6*se))),Ae=I(ve*p(se)*I((1+qt*T(2*se)+Kt*T(4*se))/(1+qt+Kt))),Le=se*fr(1);function ir(Tr){return I(1+qt*T(2*Tr)+Kt*T(4*Tr))}function fr(Tr){var Rr=Tr*se;return(2*Rr+(1+qt-Kt/2)*p(2*Rr)+(qt+Kt)/2*p(4*Rr)+Kt/2*p(6*Rr))/se}function $e(Tr){return ir(Tr)*p(Tr)}var mr=function(Tr,Rr){var Zr=se*yt(fr,Le*p(Rr)/se,Rr/a);isNaN(Zr)&&(Zr=se*o(Rr));var dn=Se*ir(Zr);return[dn*Ae*Tr/a*T(Zr),dn/Ae*p(Zr)]};return mr.invert=function(Tr,Rr){var Zr=yt($e,Rr*Ae/Se);return[Tr*a/(T(Zr)*Se*Ae*ir(Zr)),S(se*fr(Zr/se)/Le)]},se===0&&(Se=I(ve/a),mr=function(Tr,Rr){return[Tr*Se,p(Rr)/Se]},mr.invert=function(Tr,Rr){return[Tr/Se,S(Rr*Se)]}),mr}function oi(){var qt=1,Kt=0,se=45*u,ve=2,Se=(0,M.U)(Cn),Ae=Se(qt,Kt,se,ve);return Ae.a=function(Le){return arguments.length?Se(qt=+Le,Kt,se,ve):qt},Ae.b=function(Le){return arguments.length?Se(qt,Kt=+Le,se,ve):Kt},Ae.psiMax=function(Le){return arguments.length?Se(qt,Kt,se=+Le*u,ve):se*L},Ae.ratio=function(Le){return arguments.length?Se(qt,Kt,se,ve=+Le):ve},Ae.scale(180.739)}function Jn(qt,Kt,se,ve,Se,Ae,Le,ir,fr,$e,mr){if(mr.nanEncountered)return NaN;var Tr,Rr,Zr,dn,wn,kn,jn,wi,Ai,Si;if(Tr=se-Kt,Rr=qt(Kt+Tr*.25),Zr=qt(se-Tr*.25),isNaN(Rr)){mr.nanEncountered=!0;return}if(isNaN(Zr)){mr.nanEncountered=!0;return}return dn=Tr*(ve+4*Rr+Se)/12,wn=Tr*(Se+4*Zr+Ae)/12,kn=dn+wn,Si=(kn-Le)/15,$e>fr?(mr.maxDepthCount++,kn+Si):Math.abs(Si)<ir?kn+Si:(jn=Kt+Tr*.5,wi=Jn(qt,Kt,jn,ve,Rr,Se,dn,ir*.5,fr,$e+1,mr),isNaN(wi)?(mr.nanEncountered=!0,NaN):(Ai=Jn(qt,jn,se,Se,Zr,Ae,wn,ir*.5,fr,$e+1,mr),isNaN(Ai)?(mr.nanEncountered=!0,NaN):wi+Ai))}function ai(qt,Kt,se,ve,Se){var Ae={maxDepthCount:0,nanEncountered:!1};ve===void 0&&(ve=1e-8),Se===void 0&&(Se=20);var Le=qt(Kt),ir=qt(.5*(Kt+se)),fr=qt(se),$e=(Le+4*ir+fr)*(se-Kt)/6,mr=Jn(qt,Kt,se,Le,ir,fr,$e,ve,Se,1,Ae);return mr}function _i(qt,Kt,se){function ve(Zr){return qt+(1-qt)*n(1-n(Zr,Kt),1/Kt)}function Se(Zr){return ai(ve,0,Zr,1e-4)}for(var Ae=1/Se(1),Le=1e3,ir=1.00000001*Ae,fr=[],$e=0;$e<=Le;$e++)fr.push(Se($e/Le)*ir);function mr(Zr){var dn=0,wn=Le,kn=Le>>1;do fr[kn]>Zr?wn=kn:dn=kn,kn=dn+wn>>1;while(kn>dn);var jn=fr[kn+1]-fr[kn];return jn&&(jn=(Zr-fr[kn+1])/jn),(kn+1+jn)/Le}var Tr=2*mr(1)/a*Ae/se,Rr=function(Zr,dn){var wn=mr(E(p(dn))),kn=ve(wn)*Zr;return wn/=Tr,[kn,dn>=0?wn:-wn]};return Rr.invert=function(Zr,dn){var wn;return dn*=Tr,E(dn)<1&&(wn=o(dn)*S(Se(E(dn))*Ae)),[Zr/ve(E(dn)),wn]},Rr}function ta(){var qt=0,Kt=2.5,se=1.183136,ve=(0,M.U)(_i),Se=ve(qt,Kt,se);return Se.alpha=function(Ae){return arguments.length?ve(qt=+Ae,Kt,se):qt},Se.k=function(Ae){return arguments.length?ve(qt,Kt=+Ae,se):Kt},Se.gamma=function(Ae){return arguments.length?ve(qt,Kt,se=+Ae):se},Se.scale(152.63)}function Yi(qt,Kt){return E(qt[0]-Kt[0])<h&&E(qt[1]-Kt[1])<h}function oo(qt,Kt){for(var se=-1,ve=qt.length,Se=qt[0],Ae,Le,ir,fr=[];++se<ve;){Ae=qt[se],Le=(Ae[0]-Se[0])/Kt,ir=(Ae[1]-Se[1])/Kt;for(var $e=0;$e<Kt;++$e)fr.push([Se[0]+$e*Le,Se[1]+$e*ir]);Se=Ae}return fr.push(Ae),fr}function $a(qt){var Kt=[],se,ve,Se,Ae,Le,ir,fr,$e=qt[0].length;for(fr=0;fr<$e;++fr)se=qt[0][fr],ve=se[0][0],Se=se[0][1],Ae=se[1][1],Le=se[2][0],ir=se[2][1],Kt.push(oo([[ve+h,Se+h],[ve+h,Ae-h],[Le-h,Ae-h],[Le-h,ir+h]],30));for(fr=qt[1].length-1;fr>=0;--fr)se=qt[1][fr],ve=se[0][0],Se=se[0][1],Ae=se[1][1],Le=se[2][0],ir=se[2][1],Kt.push(oo([[Le-h,ir-h],[Le-h,Ae+h],[ve+h,Ae+h],[ve+h,Se-h]],30));return{type:"Polygon",coordinates:[(0,qn.Uf)(Kt)]}}function Ia(qt,Kt,se){var ve,Se;function Ae(fr,$e){for(var mr=$e<0?-1:1,Tr=Kt[+($e<0)],Rr=0,Zr=Tr.length-1;Rr<Zr&&fr>Tr[Rr][2][0];++Rr);var dn=qt(fr-Tr[Rr][1][0],$e);return dn[0]+=qt(Tr[Rr][1][0],mr*$e>mr*Tr[Rr][0][1]?Tr[Rr][0][1]:$e)[0],dn}se?Ae.invert=se(Ae):qt.invert&&(Ae.invert=function(fr,$e){for(var mr=Se[+($e<0)],Tr=Kt[+($e<0)],Rr=0,Zr=mr.length;Rr<Zr;++Rr){var dn=mr[Rr];if(dn[0][0]<=fr&&fr<dn[1][0]&&dn[0][1]<=$e&&$e<dn[1][1]){var wn=qt.invert(fr-qt(Tr[Rr][1][0],0)[0],$e);return wn[0]+=Tr[Rr][1][0],Yi(Ae(wn[0],wn[1]),[fr,$e])?wn:null}}});var Le=(0,M.c)(Ae),ir=Le.stream;return Le.stream=function(fr){var $e=Le.rotate(),mr=ir(fr),Tr=(Le.rotate([0,0]),ir(fr));return Le.rotate($e),mr.sphere=function(){(0,ii.c)(ve,Tr)},mr},Le.lobes=function(fr){return arguments.length?(ve=$a(fr),Kt=fr.map(function($e){return $e.map(function(mr){return[[mr[0][0]*u,mr[0][1]*u],[mr[1][0]*u,mr[1][1]*u],[mr[2][0]*u,mr[2][1]*u]]})}),Se=Kt.map(function($e){return $e.map(function(mr){var Tr=qt(mr[0][0],mr[0][1])[0],Rr=qt(mr[2][0],mr[2][1])[0],Zr=qt(mr[1][0],mr[0][1])[1],dn=qt(mr[1][0],mr[1][1])[1],wn;return Zr>dn&&(wn=Zr,Zr=dn,dn=wn),[[Tr,Zr],[Rr,dn]]})}),Le):Kt.map(function($e){return $e.map(function(mr){return[[mr[0][0]*L,mr[0][1]*L],[mr[1][0]*L,mr[1][1]*L],[mr[2][0]*L,mr[2][1]*L]]})})},Kt!=null&&Le.lobes(Kt),Le}var Ts=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Gl(){return Ia(Bt,Ts).scale(160.857)}var du=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function qi(){return Ia(_n,du).scale(152.63)}var Vs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Yl(){return Ia(At,Vs).scale(169.529)}var Ea=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Xa(){return Ia(At,Ea).scale(169.529).rotate([20,0])}var ks=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function bl(){return Ia(mn,ks,xt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var ma=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Ms(){return Ia(he,ma).scale(152.63).rotate([-20,0])}function ba(qt,Kt){return[3/A*qt*I(a*a/3-Kt*Kt),Kt]}ba.invert=function(qt,Kt){return[A/3*qt/I(a*a/3-Kt*Kt),Kt]};function ka(){return(0,M.c)(ba).scale(158.837)}function Ss(qt){function Kt(se,ve){if(E(E(ve)-c)<h)return[0,ve<0?-2:2];var Se=p(ve),Ae=n((1+Se)/(1-Se),qt/2),Le=.5*(Ae+1/Ae)+T(se*=qt);return[2*p(se)/Le,(Ae-1/Ae)/Le]}return Kt.invert=function(se,ve){var Se=E(ve);if(E(Se-2)<h)return se?null:[0,o(ve)*c];if(Se>2)return null;se/=2,ve/=2;var Ae=se*se,Le=ve*ve,ir=2*ve/(1+Ae+Le);return ir=n((1+ir)/(1-ir),1/qt),[C(2*se,1-Ae-Le)/qt,S((ir-1)/(ir+1))]},Kt}function za(){var qt=.5,Kt=(0,M.U)(Ss),se=Kt(qt);return se.spacing=function(ve){return arguments.length?Kt(qt=+ve):qt},se.scale(124.75)}var Fa=a/k;function so(qt,Kt){return[qt*(1+I(T(Kt)))/2,Kt/(T(Kt/2)*T(qt/6))]}so.invert=function(qt,Kt){var se=E(qt),ve=E(Kt),Se=h,Ae=c;ve<Fa?Ae*=ve/Fa:Se+=6*w(Fa/ve);for(var Le=0;Le<25;Le++){var ir=p(Ae),fr=I(T(Ae)),$e=p(Ae/2),mr=T(Ae/2),Tr=p(Se/6),Rr=T(Se/6),Zr=.5*Se*(1+fr)-se,dn=Ae/(mr*Rr)-ve,wn=fr?-.25*Se*ir/fr:0,kn=.5*(1+fr),jn=(1+.5*Ae*$e/mr)/(mr*Rr),wi=Ae/mr*(Tr/6)/(Rr*Rr),Ai=wn*wi-jn*kn,Si=(Zr*wi-dn*kn)/Ai,Li=(dn*wn-Zr*jn)/Ai;if(Ae-=Si,Se-=Li,E(Si)<h&&E(Li)<h)break}return[qt<0?-Se:Se,Kt<0?-Ae:Ae]};function vu(){return(0,M.c)(so).scale(97.2672)}function Qa(qt,Kt){var se=qt*qt,ve=Kt*Kt;return[qt*(.975534+ve*(-.119161+se*-.0143059+ve*-.0547009)),Kt*(1.00384+se*(.0802894+ve*-.02855+se*199025e-9)+ve*(.0998909+ve*-.0491032))]}Qa.invert=function(qt,Kt){var se=o(qt)*a,ve=Kt/2,Se=50;do{var Ae=se*se,Le=ve*ve,ir=se*ve,fr=se*(.975534+Le*(-.119161+Ae*-.0143059+Le*-.0547009))-qt,$e=ve*(1.00384+Ae*(.0802894+Le*-.02855+Ae*199025e-9)+Le*(.0998909+Le*-.0491032))-Kt,mr=.975534-Le*(.119161+3*Ae*.0143059+Le*.0547009),Tr=-ir*(2*.119161+4*.0547009*Le+2*.0143059*Ae),Rr=ir*(2*.0802894+4*199025e-9*Ae+2*-.02855*Le),Zr=1.00384+Ae*(.0802894+199025e-9*Ae)+Le*(3*(.0998909-.02855*Ae)-5*.0491032*Le),dn=Tr*Rr-Zr*mr,wn=($e*Tr-fr*Zr)/dn,kn=(fr*Rr-$e*mr)/dn;se-=wn,ve-=kn}while((E(wn)>h||E(kn)>h)&&--Se>0);return Se&&[se,ve]};function Ku(){return(0,M.c)(Qa).scale(139.98)}function Ro(qt,Kt){return[p(qt)/T(Kt),b(Kt)*T(qt)]}Ro.invert=function(qt,Kt){var se=qt*qt,ve=Kt*Kt,Se=ve+1,Ae=se+Se,Le=qt?x*I((Ae-I(Ae*Ae-4*se))/se):1/I(Se);return[S(qt*Le),o(Kt)*w(Le)]};function La(){return(0,M.c)(Ro).scale(144.049).clipAngle(89.999)}function Hl(qt){var Kt=T(qt),se=b(f+qt/2);function ve(Se,Ae){var Le=Ae-qt,ir=E(Le)<h?Se*Kt:E(ir=f+Ae/2)<h||E(E(ir)-c)<h?0:Se*Le/r(b(ir)/se);return[ir,Le]}return ve.invert=function(Se,Ae){var Le,ir=Ae+qt;return[E(Ae)<h?Se/Kt:E(Le=f+ir/2)<h||E(E(Le)-c)<h?0:Se*r(b(Le)/se)/Ae,ir]},ve}function ts(){return Yt(Hl).parallel(40).scale(158.837)}function Oo(qt,Kt){return[qt,1.25*r(b(f+.4*Kt))]}Oo.invert=function(qt,Kt){return[qt,2.5*i(v(.8*Kt))-.625*a]};function Vl(){return(0,M.c)(Oo).scale(108.318)}function gu(qt){var Kt=qt.length-1;function se(ve,Se){for(var Ae=T(Se),Le=2/(1+Ae*T(ve)),ir=Le*Ae*p(ve),fr=Le*p(Se),$e=Kt,mr=qt[$e],Tr=mr[0],Rr=mr[1],Zr;--$e>=0;)mr=qt[$e],Tr=mr[0]+ir*(Zr=Tr)-fr*Rr,Rr=mr[1]+ir*Rr+fr*Zr;return Tr=ir*(Zr=Tr)-fr*Rr,Rr=ir*Rr+fr*Zr,[Tr,Rr]}return se.invert=function(ve,Se){var Ae=20,Le=ve,ir=Se;do{for(var fr=Kt,$e=qt[fr],mr=$e[0],Tr=$e[1],Rr=0,Zr=0,dn;--fr>=0;)$e=qt[fr],Rr=mr+Le*(dn=Rr)-ir*Zr,Zr=Tr+Le*Zr+ir*dn,mr=$e[0]+Le*(dn=mr)-ir*Tr,Tr=$e[1]+Le*Tr+ir*dn;Rr=mr+Le*(dn=Rr)-ir*Zr,Zr=Tr+Le*Zr+ir*dn,mr=Le*(dn=mr)-ir*Tr-ve,Tr=Le*Tr+ir*dn-Se;var wn=Rr*Rr+Zr*Zr,kn,jn;Le-=kn=(mr*Rr+Tr*Zr)/wn,ir-=jn=(Tr*Rr-mr*Zr)/wn}while(E(kn)+E(jn)>h*h&&--Ae>0);if(Ae){var wi=I(Le*Le+ir*ir),Ai=2*i(wi*.5),Si=p(Ai);return[C(Le*Si,wi*T(Ai)),wi?S(ir*Si/wi):0]}},se}var Ju=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],_l=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],$u=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Qu=[[.9245,0],[0,0],[.01943,0]],tc=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Wl(){return ps(Ju,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ec(){return ps(_l,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function rc(){return ps($u,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function mu(){return ps(Qu,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function yu(){return ps(tc,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function ps(qt,Kt){var se=(0,M.c)(gu(qt)).rotate(Kt).clipAngle(90),ve=(0,$t.c)(Kt),Se=se.center;return delete se.rotate,se.center=function(Ae){return arguments.length?Se(ve(Ae)):ve.invert(Se())},se}var Cs=I(6),Ws=I(7);function Xs(qt,Kt){var se=S(7*p(Kt)/(3*Cs));return[Cs*qt*(2*T(2*se/3)-1)/Ws,9*p(se/3)/Ws]}Xs.invert=function(qt,Kt){var se=3*S(Kt*Ws/9);return[qt*Ws/(Cs*(2*T(2*se/3)-1)),S(p(se)*3*Cs/7)]};function xu(){return(0,M.c)(Xs).scale(164.859)}function jo(qt,Kt){for(var se=(1+x)*p(Kt),ve=Kt,Se=0,Ae;Se<25&&(ve-=Ae=(p(ve/2)+p(ve)-se)/(.5*T(ve/2)+T(ve)),!(E(Ae)<h));Se++);return[qt*(1+2*T(ve)/T(ve/2))/(3*k),2*I(3)*p(ve/2)/I(2+k)]}jo.invert=function(qt,Kt){var se=Kt*I(2+k)/(2*I(3)),ve=2*S(se);return[3*k*qt/(1+2*T(ve)/T(ve/2)),S((se+p(ve))/(1+x))]};function nc(){return(0,M.c)(jo).scale(188.209)}function wl(qt,Kt){for(var se=I(6/(4+a)),ve=(1+a/4)*p(Kt),Se=Kt/2,Ae=0,Le;Ae<25&&(Se-=Le=(Se/2+p(Se)-ve)/(.5+T(Se)),!(E(Le)<h));Ae++);return[se*(.5+T(Se))*qt/1.5,se*Se]}wl.invert=function(qt,Kt){var se=I(6/(4+a)),ve=Kt/se;return E(E(ve)-c)<h&&(ve=ve<0?-c:c),[1.5*qt/(se*(.5+T(ve))),S((ve/2+p(ve))/(1+a/4))]};function bu(){return(0,M.c)(wl).scale(166.518)}var _u=t(47984);function Al(qt,Kt){var se=Kt*Kt,ve=se*se,Se=se*ve;return[qt*(.84719-.13063*se+Se*Se*(-.04515+.05494*se-.02326*ve+.00331*Se)),Kt*(1.01183+ve*ve*(-.02625+.01926*se-.00396*ve))]}Al.invert=function(qt,Kt){var se=Kt,ve=25,Se,Ae,Le,ir;do Ae=se*se,Le=Ae*Ae,se-=Se=(se*(1.01183+Le*Le*(-.02625+.01926*Ae-.00396*Le))-Kt)/(1.01183+Le*Le*(-.23625+.21186*Ae+-.05148*Le));while(E(Se)>_&&--ve>0);return Ae=se*se,Le=Ae*Ae,ir=Ae*Le,[qt/(.84719-.13063*Ae+ir*ir*(-.04515+.05494*Ae-.02326*Le+.00331*ir)),se]};function yo(){return(0,M.c)(Al).scale(175.295)}function Es(qt,Kt){return[qt*(1+T(Kt))/2,2*(Kt-b(Kt/2))]}Es.invert=function(qt,Kt){for(var se=Kt/2,ve=0,Se=1/0;ve<10&&E(Se)>h;++ve){var Ae=T(Kt/2);Kt-=Se=(Kt-b(Kt/2)-se)/(1-.5/(Ae*Ae))}return[2*qt/(1+T(Kt)),Kt]};function ds(){return(0,M.c)(Es).scale(152.63)}var Zs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function es(){return Ia(et(1/0),Zs).rotate([20,0]).scale(152.63)}function Po(qt,Kt){var se=p(Kt),ve=T(Kt),Se=o(qt);if(qt===0||E(Kt)===c)return[0,Kt];if(Kt===0)return[qt,0];if(E(qt)===c)return[qt*ve,c*se];var Ae=a/(2*qt)-2*qt/a,Le=2*Kt/a,ir=(1-Le*Le)/(se-Le),fr=Ae*Ae,$e=ir*ir,mr=1+fr/$e,Tr=1+$e/fr,Rr=(Ae*se/ir-Ae/2)/mr,Zr=($e*se/fr+ir/2)/Tr,dn=Rr*Rr+ve*ve/mr,wn=Zr*Zr-($e*se*se/fr+ir*se-1)/Tr;return[c*(Rr+I(dn)*Se),c*(Zr+I(wn<0?0:wn)*o(-Kt*Ae)*Se)]}Po.invert=function(qt,Kt){qt/=c,Kt/=c;var se=qt*qt,ve=Kt*Kt,Se=se+ve,Ae=a*a;return[qt?(Se-1+I((1-Se)*(1-Se)+4*se))/(2*qt)*c:0,yt(function(Le){return Se*(a*p(Le)-2*Le)*a+4*Le*Le*(Kt-p(Le))+2*a*Le-Ae*Kt},0)]};function Xl(){return(0,M.c)(Po).scale(127.267)}var Ls=1.0148,xo=.23185,va=-.14499,Zl=.02406,ic=Ls,Tl=5*xo,Rs=7*va,Os=9*Zl,to=1.790857183;function kl(qt,Kt){var se=Kt*Kt;return[qt,Kt*(Ls+se*se*(xo+se*(va+Zl*se)))]}kl.invert=function(qt,Kt){Kt>to?Kt=to:Kt<-to&&(Kt=-to);var se=Kt,ve;do{var Se=se*se;se-=ve=(se*(Ls+Se*Se*(xo+Se*(va+Zl*Se)))-Kt)/(ic+Se*Se*(Tl+Se*(Rs+Os*Se)))}while(E(ve)>h);return[qt,se]};function Ps(){return(0,M.c)(kl).scale(139.319)}function Ml(qt,Kt){if(E(Kt)<h)return[qt,0];var se=b(Kt),ve=qt*p(Kt);return[p(ve)/se,Kt+(1-T(ve))/se]}Ml.invert=function(qt,Kt){if(E(Kt)<h)return[qt,0];var se=qt*qt+Kt*Kt,ve=Kt*.5,Se=10,Ae;do{var Le=b(ve),ir=1/T(ve),fr=se-2*Kt*ve+ve*ve;ve-=Ae=(Le*fr+2*(ve-Kt))/(2+fr*ir*ir+2*(ve-Kt)*Le)}while(E(Ae)>h&&--Se>0);return Le=b(ve),[(E(Kt)<E(ve+1/Le)?S(qt*Le):o(Kt)*o(qt)*(w(E(qt*Le))+c))/p(ve),ve]};function ac(){return(0,M.c)(Ml).scale(103.74)}var wu=t(13696),Kl=t(27284);function Jl(qt,Kt){var se=Sl(qt[1],qt[0]),ve=Sl(Kt[1],Kt[0]),Se=Cl(se,ve),Ae=Ks(se)/Ks(ve);return Is([1,0,qt[0][0],0,1,qt[0][1]],Is([Ae,0,0,0,Ae,0],Is([T(Se),p(Se),0,-p(Se),T(Se),0],[1,0,-Kt[0][0],0,1,-Kt[0][1]])))}function $l(qt){var Kt=1/(qt[0]*qt[4]-qt[1]*qt[3]);return[Kt*qt[4],-Kt*qt[1],Kt*(qt[1]*qt[5]-qt[2]*qt[4]),-Kt*qt[3],Kt*qt[0],Kt*(qt[2]*qt[3]-qt[0]*qt[5])]}function Is(qt,Kt){return[qt[0]*Kt[0]+qt[1]*Kt[3],qt[0]*Kt[1]+qt[1]*Kt[4],qt[0]*Kt[2]+qt[1]*Kt[5]+qt[2],qt[3]*Kt[0]+qt[4]*Kt[3],qt[3]*Kt[1]+qt[4]*Kt[4],qt[3]*Kt[2]+qt[4]*Kt[5]+qt[5]]}function Sl(qt,Kt){return[qt[0]-Kt[0],qt[1]-Kt[1]]}function Ks(qt){return I(qt[0]*qt[0]+qt[1]*qt[1])}function Cl(qt,Kt){return C(qt[0]*Kt[1]-qt[1]*Kt[0],qt[0]*Kt[0]+qt[1]*Kt[1])}function ea(qt,Kt,se){ve(qt,{transform:null});function ve($e,mr){if($e.edges=Ql($e.face),mr.face){var Tr=$e.shared=Tu($e.face,mr.face),Rr=Jl(Tr.map(mr.project),Tr.map($e.project));$e.transform=mr.transform?Is(mr.transform,Rr):Rr;for(var Zr=mr.edges,dn=0,wn=Zr.length;dn<wn;++dn)bo(Tr[0],Zr[dn][1])&&bo(Tr[1],Zr[dn][0])&&(Zr[dn]=$e),bo(Tr[0],Zr[dn][0])&&bo(Tr[1],Zr[dn][1])&&(Zr[dn]=$e);for(Zr=$e.edges,dn=0,wn=Zr.length;dn<wn;++dn)bo(Tr[0],Zr[dn][0])&&bo(Tr[1],Zr[dn][1])&&(Zr[dn]=mr),bo(Tr[0],Zr[dn][1])&&bo(Tr[1],Zr[dn][0])&&(Zr[dn]=mr)}else $e.transform=mr.transform;return $e.children&&$e.children.forEach(function(kn){ve(kn,$e)}),$e}function Se($e,mr){var Tr=Kt($e,mr),Rr=Tr.project([$e*L,mr*L]),Zr;return(Zr=Tr.transform)?[Zr[0]*Rr[0]+Zr[1]*Rr[1]+Zr[2],-(Zr[3]*Rr[0]+Zr[4]*Rr[1]+Zr[5])]:(Rr[1]=-Rr[1],Rr)}vs(qt)&&(Se.invert=function($e,mr){var Tr=Ae(qt,[$e,-mr]);return Tr&&(Tr[0]*=u,Tr[1]*=u,Tr)});function Ae($e,mr){var Tr=$e.project.invert,Rr=$e.transform,Zr=mr;if(Rr&&(Rr=$l(Rr),Zr=[Rr[0]*Zr[0]+Rr[1]*Zr[1]+Rr[2],Rr[3]*Zr[0]+Rr[4]*Zr[1]+Rr[5]]),Tr&&$e===Le(dn=Tr(Zr)))return dn;for(var dn,wn=$e.children,kn=0,jn=wn&&wn.length;kn<jn;++kn)if(dn=Ae(wn[kn],mr))return dn}function Le($e){return Kt($e[0]*u,$e[1]*u)}var ir=(0,M.c)(Se),fr=ir.stream;return ir.stream=function($e){var mr=ir.rotate(),Tr=fr($e),Rr=(ir.rotate([0,0]),fr($e));return ir.rotate(mr),Tr.sphere=function(){Rr.polygonStart(),Rr.lineStart(),Au(Rr,qt),Rr.lineEnd(),Rr.polygonEnd()},Tr},ir.angle(se==null?-30:se*L)}function Au(qt,Kt,se){var ve,Se=Kt.edges,Ae=Se.length,Le,ir={type:"MultiPoint",coordinates:Kt.face},fr=Kt.face.filter(function(wn){return E(wn[1])!==90}),$e=(0,wu.c)({type:"MultiPoint",coordinates:fr}),mr=!1,Tr=-1,Rr=$e[1][0]-$e[0][0],Zr=Rr===180||Rr===360?[($e[0][0]+$e[1][0])/2,($e[0][1]+$e[1][1])/2]:(0,Ft.c)(ir);if(se)for(;++Tr<Ae&&Se[Tr]!==se;);++Tr;for(var dn=0;dn<Ae;++dn)Le=Se[(dn+Tr)%Ae],Array.isArray(Le)?(mr||(qt.point((ve=(0,Kl.c)(Le[0],Zr)(h))[0],ve[1]),mr=!0),qt.point((ve=(0,Kl.c)(Le[1],Zr)(h))[0],ve[1])):(mr=!1,Le!==se&&Au(qt,Le,Kt))}function bo(qt,Kt){return qt&&Kt&&qt[0]===Kt[0]&&qt[1]===Kt[1]}function Tu(qt,Kt){for(var se,ve,Se=qt.length,Ae=null,Le=0;Le<Se;++Le){se=qt[Le];for(var ir=Kt.length;--ir>=0;)if(ve=Kt[ir],se[0]===ve[0]&&se[1]===ve[1]){if(Ae)return[Ae,se];Ae=se}}}function Ql(qt){for(var Kt=qt.length,se=[],ve=qt[Kt-1],Se=0;Se<Kt;++Se)se.push([ve,ve=qt[Se]]);return se}function vs(qt){return qt.project.invert||qt.children&&qt.children.some(vs)}var rs=t(53285),El=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],ya=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(qt){return qt.map(function(Kt){return El[Kt]})});function Js(qt){qt=qt||function(se){var ve=(0,Ft.c)({type:"MultiPoint",coordinates:se});return(0,rs.c)().scale(1).translate([0,0]).rotate([-ve[0],-ve[1]])};var Kt=ya.map(function(se){return{face:se,project:qt(se)}});return[-1,0,0,1,0,1,4,5].forEach(function(se,ve){var Se=Kt[se];Se&&(Se.children||(Se.children=[])).push(Kt[ve])}),ea(Kt[0],function(se,ve){return Kt[se<-a/2?ve<0?6:4:se<0?ve<0?2:0:se<a/2?ve<0?3:1:ve<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var _o=2/I(3);function Uo(qt,Kt){var se=bt(qt,Kt);return[se[0]*_o,se[1]]}Uo.invert=function(qt,Kt){return bt.invert(qt/_o,Kt)};function gs(qt){qt=qt||function(se){var ve=(0,Ft.c)({type:"MultiPoint",coordinates:se});return(0,M.c)(Uo).translate([0,0]).scale(1).rotate(ve[1]>0?[-ve[0],0]:[180-ve[0],180])};var Kt=ya.map(function(se){return{face:se,project:qt(se)}});return[-1,0,0,1,0,1,4,5].forEach(function(se,ve){var Se=Kt[se];Se&&(Se.children||(Se.children=[])).push(Kt[ve])}),ea(Kt[0],function(se,ve){return Kt[se<-a/2?ve<0?6:4:se<0?ve<0?2:0:se<a/2?ve<0?3:1:ve<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function ns(qt){qt=qt||function(Le){var ir=Le.length===6?(0,Ft.c)({type:"MultiPoint",coordinates:Le}):Le[0];return(0,rs.c)().scale(1).translate([0,0]).rotate([-ir[0],-ir[1]])};var Kt=ya.map(function(Le){for(var ir=Le.map(fo),fr=ir.length,$e=ir[fr-1],mr,Tr=[],Rr=0;Rr<fr;++Rr)mr=ir[Rr],Tr.push(Ao([$e[0]*.9486832980505138+mr[0]*.31622776601683794,$e[1]*.9486832980505138+mr[1]*.31622776601683794,$e[2]*.9486832980505138+mr[2]*.31622776601683794]),Ao([mr[0]*.9486832980505138+$e[0]*.31622776601683794,mr[1]*.9486832980505138+$e[1]*.31622776601683794,mr[2]*.9486832980505138+$e[2]*.31622776601683794])),$e=mr;return Tr}),se=[],ve=[-1,0,0,1,0,1,4,5];Kt.forEach(function(Le,ir){for(var fr=ya[ir],$e=fr.length,mr=se[ir]=[],Tr=0;Tr<$e;++Tr)Kt.push([fr[Tr],Le[(Tr*2+2)%(2*$e)],Le[(Tr*2+1)%(2*$e)]]),ve.push(ir),mr.push(qo(fo(Le[(Tr*2+2)%(2*$e)]),fo(Le[(Tr*2+1)%(2*$e)])))});var Se=Kt.map(function(Le){return{project:qt(Le),face:Le}});ve.forEach(function(Le,ir){var fr=Se[Le];fr&&(fr.children||(fr.children=[])).push(Se[ir])});function Ae(Le,ir){var fr=T(ir),$e=[fr*T(Le),fr*p(Le),p(ir)],mr=Le<-a/2?ir<0?6:4:Le<0?ir<0?2:0:Le<a/2?ir<0?3:1:ir<0?7:5,Tr=se[mr];return Se[wo(Tr[0],$e)<0?8+3*mr:wo(Tr[1],$e)<0?8+3*mr+1:wo(Tr[2],$e)<0?8+3*mr+2:mr]}return ea(Se[0],Ae).angle(-30).scale(110.625).center([0,45])}function wo(qt,Kt){for(var se=0,ve=qt.length,Se=0;se<ve;++se)Se+=qt[se]*Kt[se];return Se}function qo(qt,Kt){return[qt[1]*Kt[2]-qt[2]*Kt[1],qt[2]*Kt[0]-qt[0]*Kt[2],qt[0]*Kt[1]-qt[1]*Kt[0]]}function Ao(qt){return[C(qt[1],qt[0])*L,S(e(-1,l(1,qt[2])))*L]}function fo(qt){var Kt=qt[0]*u,se=qt[1]*u,ve=T(se);return[ve*T(Kt),ve*p(Kt),p(se)]}function $s(){}function oc(qt){if((se=qt.length)<4)return!1;for(var Kt=0,se,ve=qt[se-1][1]*qt[0][0]-qt[se-1][0]*qt[0][1];++Kt<se;)ve+=qt[Kt-1][1]*qt[Kt][0]-qt[Kt-1][0]*qt[Kt][1];return ve<=0}function sc(qt,Kt){for(var se=Kt[0],ve=Kt[1],Se=!1,Ae=0,Le=qt.length,ir=Le-1;Ae<Le;ir=Ae++){var fr=qt[Ae],$e=fr[0],mr=fr[1],Tr=qt[ir],Rr=Tr[0],Zr=Tr[1];mr>ve^Zr>ve&&se<(Rr-$e)*(ve-mr)/(Zr-mr)+$e&&(Se=!Se)}return Se}function lc(qt,Kt){var se=Kt.stream,ve;if(!se)throw new Error("invalid projection");switch(qt&&qt.type){case"Feature":ve=tu;break;case"FeatureCollection":ve=uc;break;default:ve=zs;break}return ve(qt,se)}function uc(qt,Kt){return{type:"FeatureCollection",features:qt.features.map(function(se){return tu(se,Kt)})}}function tu(qt,Kt){return{type:"Feature",id:qt.id,properties:qt.properties,geometry:zs(qt.geometry,Kt)}}function ku(qt,Kt){return{type:"GeometryCollection",geometries:qt.geometries.map(function(se){return zs(se,Kt)})}}function zs(qt,Kt){if(!qt)return null;if(qt.type==="GeometryCollection")return ku(qt,Kt);var se;switch(qt.type){case"Point":se=Fs;break;case"MultiPoint":se=Fs;break;case"LineString":se=Mu;break;case"MultiLineString":se=Mu;break;case"Polygon":se=Qs;break;case"MultiPolygon":se=Qs;break;case"Sphere":se=Qs;break;default:return null}return(0,ii.c)(qt,Kt(se)),se.result()}var Ra=[],lo=[],Fs={point:function(qt,Kt){Ra.push([qt,Kt])},result:function(){var qt=Ra.length?Ra.length<2?{type:"Point",coordinates:Ra[0]}:{type:"MultiPoint",coordinates:Ra}:null;return Ra=[],qt}},Mu={lineStart:$s,point:function(qt,Kt){Ra.push([qt,Kt])},lineEnd:function(){Ra.length&&(lo.push(Ra),Ra=[])},result:function(){var qt=lo.length?lo.length<2?{type:"LineString",coordinates:lo[0]}:{type:"MultiLineString",coordinates:lo}:null;return lo=[],qt}},Qs={polygonStart:$s,lineStart:$s,point:function(qt,Kt){Ra.push([qt,Kt])},lineEnd:function(){var qt=Ra.length;if(qt){do Ra.push(Ra[0].slice());while(++qt<4);lo.push(Ra),Ra=[]}},polygonEnd:$s,result:function(){if(!lo.length)return null;var qt=[],Kt=[];return lo.forEach(function(se){oc(se)?qt.push([se]):Kt.push(se)}),Kt.forEach(function(se){var ve=se[0];qt.some(function(Se){if(sc(Se[0],ve))return Se.push(se),!0})||qt.push([se])}),lo=[],qt.length?qt.length>1?{type:"MultiPolygon",coordinates:qt}:{type:"Polygon",coordinates:qt[0]}:null}};function Go(qt){var Kt=qt(c,0)[0]-qt(-c,0)[0];function se(ve,Se){var Ae=E(ve)<c,Le=qt(Ae?ve:ve>0?ve-a:ve+a,Se),ir=(Le[0]-Le[1])*x,fr=(Le[0]+Le[1])*x;if(Ae)return[ir,fr];var $e=Kt*x,mr=ir>0^fr>0?-1:1;return[mr*ir-o(fr)*$e,mr*fr-o(ir)*$e]}return qt.invert&&(se.invert=function(ve,Se){var Ae=(ve+Se)*x,Le=(Se-ve)*x,ir=E(Ae)<.5*Kt&&E(Le)<.5*Kt;if(!ir){var fr=Kt*x,$e=Ae>0^Le>0?-1:1,mr=-$e*ve+(Le>0?1:-1)*fr,Tr=-$e*Se+(Ae>0?1:-1)*fr;Ae=(-mr-Tr)*x,Le=(mr-Tr)*x}var Rr=qt.invert(Ae,Le);return ir||(Rr[0]+=Ae>0?a:-a),Rr}),(0,M.c)(se).rotate([-90,-90,45]).clipAngle(179.999)}function cc(){return Go(on).scale(176.423)}function Su(){return Go(ur).scale(111.48)}function Cu(qt,Kt){if(!(0<=(Kt=+Kt)&&Kt<=20))throw new Error("invalid digits");function se($e){var mr=$e.length,Tr=2,Rr=new Array(mr);for(Rr[0]=+$e[0].toFixed(Kt),Rr[1]=+$e[1].toFixed(Kt);Tr<mr;)Rr[Tr]=$e[Tr],++Tr;return Rr}function ve($e){return $e.map(se)}function Se($e){for(var mr=se($e[0]),Tr=[mr],Rr=1;Rr<$e.length;Rr++){var Zr=se($e[Rr]);(Zr.length>2||Zr[0]!=mr[0]||Zr[1]!=mr[1])&&(Tr.push(Zr),mr=Zr)}return Tr.length===1&&$e.length>1&&Tr.push(se($e[$e.length-1])),Tr}function Ae($e){return $e.map(Se)}function Le($e){if($e==null)return $e;var mr;switch($e.type){case"GeometryCollection":mr={type:"GeometryCollection",geometries:$e.geometries.map(Le)};break;case"Point":mr={type:"Point",coordinates:se($e.coordinates)};break;case"MultiPoint":mr={type:$e.type,coordinates:ve($e.coordinates)};break;case"LineString":mr={type:$e.type,coordinates:Se($e.coordinates)};break;case"MultiLineString":case"Polygon":mr={type:$e.type,coordinates:Ae($e.coordinates)};break;case"MultiPolygon":mr={type:"MultiPolygon",coordinates:$e.coordinates.map(Ae)};break;default:return $e}return $e.bbox!=null&&(mr.bbox=$e.bbox),mr}function ir($e){var mr={type:"Feature",properties:$e.properties,geometry:Le($e.geometry)};return $e.id!=null&&(mr.id=$e.id),$e.bbox!=null&&(mr.bbox=$e.bbox),mr}if(qt!=null)switch(qt.type){case"Feature":return ir(qt);case"FeatureCollection":{var fr={type:"FeatureCollection",features:qt.features.map(ir)};return qt.bbox!=null&&(fr.bbox=qt.bbox),fr}default:return Le(qt)}return qt}function eu(qt){var Kt=p(qt);function se(ve,Se){var Ae=Kt?b(ve*Kt/2)/Kt:ve/2;if(!Se)return[2*Ae,-qt];var Le=2*i(Ae*p(Se)),ir=1/b(Se);return[p(Le)*ir,Se+(1-T(Le))*ir-qt]}return se.invert=function(ve,Se){if(E(Se+=qt)<h)return[Kt?2*i(Kt*ve/2)/Kt:ve,0];var Ae=ve*ve+Se*Se,Le=0,ir=10,fr;do{var $e=b(Le),mr=1/T(Le),Tr=Ae-2*Se*Le+Le*Le;Le-=fr=($e*Tr+2*(Le-Se))/(2+Tr*mr*mr+2*(Le-Se)*$e)}while(E(fr)>h&&--ir>0);var Rr=ve*($e=b(Le)),Zr=b(E(Se)<E(Le+1/$e)?S(Rr)*.5:w(Rr)*.5+a/4)/p(Le);return[Kt?2*i(Kt*Zr)/Kt:2*Zr,Le]},se}function Eu(){return Yt(eu).scale(131.215)}var Za=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Za.forEach(function(qt){qt[1]*=1.0144});function To(qt,Kt){var se=l(18,E(Kt)*36/a),ve=d(se),Se=se-ve,Ae=(Tr=Za[ve])[0],Le=Tr[1],ir=(Tr=Za[++ve])[0],fr=Tr[1],$e=(Tr=Za[l(19,++ve)])[0],mr=Tr[1],Tr;return[qt*(ir+Se*($e-Ae)/2+Se*Se*($e-2*ir+Ae)/2),(Kt>0?c:-c)*(fr+Se*(mr-Le)/2+Se*Se*(mr-2*fr+Le)/2)]}To.invert=function(qt,Kt){var se=Kt/c,ve=se*90,Se=l(18,E(ve/5)),Ae=e(0,d(Se));do{var Le=Za[Ae][1],ir=Za[Ae+1][1],fr=Za[l(19,Ae+2)][1],$e=fr-Le,mr=fr-2*ir+Le,Tr=2*(E(se)-ir)/$e,Rr=mr/$e,Zr=Tr*(1-Rr*Tr*(1-2*Rr*Tr));if(Zr>=0||Ae===1){ve=(Kt>=0?5:-5)*(Zr+Se);var dn=50,wn;do Se=l(18,E(ve)/5),Ae=d(Se),Zr=Se-Ae,Le=Za[Ae][1],ir=Za[Ae+1][1],fr=Za[l(19,Ae+2)][1],ve-=(wn=(Kt>=0?c:-c)*(ir+Zr*(fr-Le)/2+Zr*Zr*(fr-2*ir+Le)/2)-Kt)*L;while(E(wn)>_&&--dn>0);break}}while(--Ae>=0);var kn=Za[Ae][0],jn=Za[Ae+1][0],wi=Za[l(19,Ae+2)][0];return[qt/(jn+Zr*(wi-kn)/2+Zr*Zr*(wi-2*jn+kn)/2),ve*u]};function is(){return(0,M.c)(To).scale(152.63)}function Ds(qt){function Kt(se,ve){var Se=T(ve),Ae=(qt-1)/(qt-Se*T(se));return[Ae*Se*p(se),Ae*p(ve)]}return Kt.invert=function(se,ve){var Se=se*se+ve*ve,Ae=I(Se),Le=(qt-I(1-Se*(qt+1)/(qt-1)))/((qt-1)/Ae+Ae/(qt-1));return[C(se*Le,Ae*I(1-Le*Le)),Ae?S(ve*Le/Ae):0]},Kt}function Ll(qt,Kt){var se=Ds(qt);if(!Kt)return se;var ve=T(Kt),Se=p(Kt);function Ae(Le,ir){var fr=se(Le,ir),$e=fr[1],mr=$e*Se/(qt-1)+ve;return[fr[0]*ve/mr,$e/mr]}return Ae.invert=function(Le,ir){var fr=(qt-1)/(qt-1-ir*Se);return se.invert(fr*Le,fr*ir*ve)},Ae}function ms(){var qt=2,Kt=0,se=(0,M.U)(Ll),ve=se(qt,Kt);return ve.distance=function(Se){return arguments.length?se(qt=+Se,Kt):qt},ve.tilt=function(Se){return arguments.length?se(qt,Kt=Se*u):Kt*L},ve.scale(432.147).clipAngle(w(1/qt)*L-1e-6)}var ys=1e-4,Lu=1e4,Yo=-180,Bs=Yo+ys,as=180,Ho=as-ys,tl=-90,Ns=tl+ys,Ji=90,js=Ji-ys;function Rl(qt){return qt.length>0}function Ru(qt){return Math.floor(qt*Lu)/Lu}function Us(qt){return qt===tl||qt===Ji?[0,qt]:[Yo,Ru(qt)]}function el(qt){var Kt=qt[0],se=qt[1],ve=!1;return Kt<=Bs?(Kt=Yo,ve=!0):Kt>=Ho&&(Kt=as,ve=!0),se<=Ns?(se=tl,ve=!0):se>=js&&(se=Ji,ve=!0),ve?[Kt,se]:qt}function Ol(qt){return qt.map(el)}function ru(qt,Kt,se){for(var ve=0,Se=qt.length;ve<Se;++ve){var Ae=qt[ve].slice();se.push({index:-1,polygon:Kt,ring:Ae});for(var Le=0,ir=Ae.length;Le<ir;++Le){var fr=Ae[Le],$e=fr[0],mr=fr[1];if($e<=Bs||$e>=Ho||mr<=Ns||mr>=js){Ae[Le]=el(fr);for(var Tr=Le+1;Tr<ir;++Tr){var Rr=Ae[Tr],Zr=Rr[0],dn=Rr[1];if(Zr>Bs&&Zr<Ho&&dn>Ns&&dn<js)break}if(Tr===Le+1)continue;if(Le){var wn={index:-1,polygon:Kt,ring:Ae.slice(0,Le+1)};wn.ring[wn.ring.length-1]=Us(mr),se[se.length-1]=wn}else se.pop();if(Tr>=ir)break;se.push({index:-1,polygon:Kt,ring:Ae=Ae.slice(Tr-1)}),Ae[0]=Us(Ae[0][1]),Le=-1,ir=Ae.length}}}}function rl(qt){var Kt,se=qt.length,ve={},Se={},Ae,Le,ir,fr,$e;for(Kt=0;Kt<se;++Kt){if(Ae=qt[Kt],Le=Ae.ring[0],fr=Ae.ring[Ae.ring.length-1],Le[0]===fr[0]&&Le[1]===fr[1]){Ae.polygon.push(Ae.ring),qt[Kt]=null;continue}Ae.index=Kt,ve[Le]=Se[fr]=Ae}for(Kt=0;Kt<se;++Kt)if(Ae=qt[Kt],Ae){if(Le=Ae.ring[0],fr=Ae.ring[Ae.ring.length-1],ir=Se[Le],$e=ve[fr],delete ve[Le],delete Se[fr],Le[0]===fr[0]&&Le[1]===fr[1]){Ae.polygon.push(Ae.ring);continue}ir?(delete Se[Le],delete ve[ir.ring[0]],ir.ring.pop(),qt[ir.index]=null,Ae={index:-1,polygon:ir.polygon,ring:ir.ring.concat(Ae.ring)},ir===$e?Ae.polygon.push(Ae.ring):(Ae.index=se++,qt.push(ve[Ae.ring[0]]=Se[Ae.ring[Ae.ring.length-1]]=Ae))):$e?(delete ve[fr],delete Se[$e.ring[$e.ring.length-1]],Ae.ring.pop(),Ae={index:se++,polygon:$e.polygon,ring:Ae.ring.concat($e.ring)},qt[$e.index]=null,qt.push(ve[Ae.ring[0]]=Se[Ae.ring[Ae.ring.length-1]]=Ae)):(Ae.ring.push(Ae.ring[0]),Ae.polygon.push(Ae.ring))}}function nl(qt){var Kt={type:"Feature",geometry:os(qt.geometry)};return qt.id!=null&&(Kt.id=qt.id),qt.bbox!=null&&(Kt.bbox=qt.bbox),qt.properties!=null&&(Kt.properties=qt.properties),Kt}function os(qt){if(qt==null)return qt;var Kt,se,ve,Se;switch(qt.type){case"GeometryCollection":Kt={type:"GeometryCollection",geometries:qt.geometries.map(os)};break;case"Point":Kt={type:"Point",coordinates:el(qt.coordinates)};break;case"MultiPoint":case"LineString":Kt={type:qt.type,coordinates:Ol(qt.coordinates)};break;case"MultiLineString":Kt={type:"MultiLineString",coordinates:qt.coordinates.map(Ol)};break;case"Polygon":{var Ae=[];ru(qt.coordinates,Ae,se=[]),rl(se),Kt={type:"Polygon",coordinates:Ae};break}case"MultiPolygon":{se=[],ve=-1,Se=qt.coordinates.length;for(var Le=new Array(Se);++ve<Se;)ru(qt.coordinates[ve],Le[ve]=[],se);rl(se),Kt={type:"MultiPolygon",coordinates:Le.filter(Rl)};break}default:return qt}return qt.bbox!=null&&(Kt.bbox=qt.bbox),Kt}function il(qt){if(qt==null)return qt;switch(qt.type){case"Feature":return nl(qt);case"FeatureCollection":{var Kt={type:"FeatureCollection",features:qt.features.map(nl)};return qt.bbox!=null&&(Kt.bbox=qt.bbox),Kt}default:return os(qt)}}function ss(qt,Kt){var se=b(Kt/2),ve=p(f*se);return[qt*(.74482-.34588*ve*ve),1.70711*se]}ss.invert=function(qt,Kt){var se=Kt/1.70711,ve=p(f*se);return[qt/(.74482-.34588*ve*ve),2*i(se)]};function Ma(){return(0,M.c)(ss).scale(146.153)}function Io(qt,Kt,se){var ve=(0,Kl.c)(Kt,se),Se=ve(.5),Ae=(0,$t.c)([-Se[0],-Se[1]])(Kt),Le=ve.distance/2,ir=-S(p(Ae[1]*u)/p(Le)),fr=[-Se[0],-Se[1],-(Ae[0]>0?a-ir:ir)*L],$e=(0,M.c)(qt(Le)).rotate(fr),mr=(0,$t.c)(fr),Tr=$e.center;return delete $e.rotate,$e.center=function(Rr){return arguments.length?Tr(mr(Rr)):mr.invert(Tr())},$e.clipAngle(90)}function nu(qt){var Kt=T(qt);function se(ve,Se){var Ae=(0,rs.Y)(ve,Se);return Ae[0]*=Kt,Ae}return se.invert=function(ve,Se){return rs.Y.invert(ve/Kt,Se)},se}function xs(){return Pl([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Pl(qt,Kt){return Io(nu,qt,Kt)}function al(qt){if(!(qt*=2))return ot.O;var Kt=-qt/2,se=-Kt,ve=qt*qt,Se=b(se),Ae=.5/p(se);function Le(ir,fr){var $e=w(T(fr)*T(ir-Kt)),mr=w(T(fr)*T(ir-se)),Tr=fr<0?-1:1;return $e*=$e,mr*=mr,[($e-mr)/(2*qt),Tr*I(4*ve*mr-(ve-$e+mr)*(ve-$e+mr))/(2*qt)]}return Le.invert=function(ir,fr){var $e=fr*fr,mr=T(I($e+(Rr=ir+Kt)*Rr)),Tr=T(I($e+(Rr=ir+se)*Rr)),Rr,Zr;return[C(Zr=mr-Tr,Rr=(mr+Tr)*Se),(fr<0?-1:1)*w(I(Rr*Rr+Zr*Zr)*Ae)]},Le}function fc(){return Ou([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ou(qt,Kt){return Io(al,qt,Kt)}function Ha(qt,Kt){if(E(Kt)<h)return[qt,0];var se=E(Kt/c),ve=S(se);if(E(qt)<h||E(E(Kt)-c)<h)return[0,o(Kt)*a*b(ve/2)];var Se=T(ve),Ae=E(a/qt-qt/a)/2,Le=Ae*Ae,ir=Se/(se+Se-1),fr=ir*(2/se-1),$e=fr*fr,mr=$e+Le,Tr=ir-$e,Rr=Le+ir;return[o(qt)*a*(Ae*Tr+I(Le*Tr*Tr-mr*(ir*ir-$e)))/mr,o(Kt)*a*(fr*Rr-Ae*I((Le+1)*mr-Rr*Rr))/mr]}Ha.invert=function(qt,Kt){if(E(Kt)<h)return[qt,0];if(E(qt)<h)return[0,c*p(2*i(Kt/a))];var se=(qt/=a)*qt,ve=(Kt/=a)*Kt,Se=se+ve,Ae=Se*Se,Le=-E(Kt)*(1+Se),ir=Le-2*ve+se,fr=-2*Le+1+2*ve+Ae,$e=ve/fr+(2*ir*ir*ir/(fr*fr*fr)-9*Le*ir/(fr*fr))/27,mr=(Le-ir*ir/(3*fr))/fr,Tr=2*I(-mr/3),Rr=w(3*$e/(mr*Tr))/3;return[a*(Se-1+I(1+2*(se-ve)+Ae))/(2*qt),o(Kt)*a*(-Tr*T(Rr+a/3)-ir/(3*fr))]};function ol(){return(0,M.c)(Ha).scale(79.4183)}function qs(qt,Kt){if(E(Kt)<h)return[qt,0];var se=E(Kt/c),ve=S(se);if(E(qt)<h||E(E(Kt)-c)<h)return[0,o(Kt)*a*b(ve/2)];var Se=T(ve),Ae=E(a/qt-qt/a)/2,Le=Ae*Ae,ir=Se*(I(1+Le)-Ae*Se)/(1+Le*se*se);return[o(qt)*a*ir,o(Kt)*a*I(1-ir*(2*Ae+ir))]}qs.invert=function(qt,Kt){if(!qt)return[0,c*p(2*i(Kt/a))];var se=E(qt/a),ve=(1-se*se-(Kt/=a)*Kt)/(2*se),Se=ve*ve,Ae=I(Se+1);return[o(qt)*a*(Ae-ve),o(Kt)*c*p(2*C(I((1-2*ve*se)*(ve+Ae)-se),I(Ae+ve+se)))]};function Pu(){return(0,M.c)(qs).scale(79.4183)}function ls(qt,Kt){if(E(Kt)<h)return[qt,0];var se=Kt/c,ve=S(se);if(E(qt)<h||E(E(Kt)-c)<h)return[0,a*b(ve/2)];var Se=(a/qt-qt/a)/2,Ae=se/(1+T(ve));return[a*(o(qt)*I(Se*Se+1-Ae*Ae)-Se),a*Ae]}ls.invert=function(qt,Kt){if(!Kt)return[qt,0];var se=Kt/a,ve=(a*a*(1-se*se)-qt*qt)/(2*a*qt);return[qt?a*(o(qt)*I(ve*ve+1)-ve):0,c*p(2*i(se))]};function hc(){return(0,M.c)(ls).scale(79.4183)}function eo(qt,Kt){if(!Kt)return[qt,0];var se=E(Kt);if(!qt||se===c)return[0,Kt];var ve=se/c,Se=ve*ve,Ae=(8*ve-Se*(Se+2)-5)/(2*Se*(ve-1)),Le=Ae*Ae,ir=ve*Ae,fr=Se+Le+2*ir,$e=ve+3*Ae,mr=qt/c,Tr=mr+1/mr,Rr=o(E(qt)-c)*I(Tr*Tr-4),Zr=Rr*Rr,dn=fr*(Se+Le*Zr-1)+(1-Se)*(Se*($e*$e+4*Le)+12*ir*Le+4*Le*Le),wn=(Rr*(fr+Le-1)+2*I(dn))/(4*fr+Zr);return[o(qt)*c*wn,o(Kt)*c*I(1+Rr*E(wn)-wn*wn)]}eo.invert=function(qt,Kt){var se;if(!qt||!Kt)return[qt,Kt];Kt/=a;var ve=o(qt)*qt/c,Se=(ve*ve-1+4*Kt*Kt)/E(ve),Ae=Se*Se,Le=2*Kt,ir=50;do{var fr=Le*Le,$e=(8*Le-fr*(fr+2)-5)/(2*fr*(Le-1)),mr=(3*Le-fr*Le-10)/(2*fr*Le),Tr=$e*$e,Rr=Le*$e,Zr=Le+$e,dn=Zr*Zr,wn=Le+3*$e,kn=dn*(fr+Tr*Ae-1)+(1-fr)*(fr*(wn*wn+4*Tr)+Tr*(12*Rr+4*Tr)),jn=-2*Zr*(4*Rr*Tr+(1-4*fr+3*fr*fr)*(1+mr)+Tr*(-6+14*fr-Ae+(-8+8*fr-2*Ae)*mr)+Rr*(-8+12*fr+(-10+10*fr-Ae)*mr)),wi=I(kn),Ai=Se*(dn+Tr-1)+2*wi-ve*(4*dn+Ae),Si=Se*(2*$e*mr+2*Zr*(1+mr))+jn/wi-8*Zr*(Se*(-1+Tr+dn)+2*wi)*(1+mr)/(Ae+4*dn);Le-=se=Ai/Si}while(se>h&&--ir>0);return[o(qt)*(I(Se*Se+4)+Se)*a/4,c*Le]};function sl(){return(0,M.c)(eo).scale(127.16)}function Il(qt,Kt,se,ve,Se){function Ae(Le,ir){var fr=se*p(ve*ir),$e=I(1-fr*fr),mr=I(2/(1+$e*T(Le*=Se)));return[qt*$e*mr*p(Le),Kt*fr*mr]}return Ae.invert=function(Le,ir){var fr=Le/qt,$e=ir/Kt,mr=I(fr*fr+$e*$e),Tr=2*S(mr/2);return[C(Le*b(Tr),qt*mr)/Se,mr&&S(ir*p(Tr)/(Kt*se*mr))/ve]},Ae}function Vo(qt,Kt,se,ve){var Se=a/3;qt=e(qt,h),Kt=e(Kt,h),qt=l(qt,c),Kt=l(Kt,a-h),se=e(se,0),se=l(se,100-h),ve=e(ve,h);var Ae=se/100+1,Le=ve/100,ir=w(Ae*T(Se))/Se,fr=p(qt)/p(ir*c),$e=Kt/a,mr=I(Le*p(qt/2)/p(Kt/2)),Tr=mr/I($e*fr*ir),Rr=1/(mr*I($e*fr*ir));return Il(Tr,Rr,fr,ir,$e)}function us(){var qt=65*u,Kt=60*u,se=20,ve=200,Se=(0,M.U)(Vo),Ae=Se(qt,Kt,se,ve);return Ae.poleline=function(Le){return arguments.length?Se(qt=+Le*u,Kt,se,ve):qt*L},Ae.parallels=function(Le){return arguments.length?Se(qt,Kt=+Le*u,se,ve):Kt*L},Ae.inflation=function(Le){return arguments.length?Se(qt,Kt,se=+Le,ve):se},Ae.ratio=function(Le){return arguments.length?Se(qt,Kt,se,ve=+Le):ve},Ae.scale(163.775)}function iu(){return us().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var ll=4*a+3*I(3),ul=2*I(2*a*I(3)/ll),zl=vt(ul*I(3)/a,ul,ll/6);function Iu(){return(0,M.c)(zl).scale(176.84)}function cl(qt,Kt){return[qt*I(1-3*Kt*Kt/(a*a)),Kt]}cl.invert=function(qt,Kt){return[qt/I(1-3*Kt*Kt/(a*a)),Kt]};function au(){return(0,M.c)(cl).scale(152.63)}function bs(qt,Kt){var se=T(Kt),ve=T(qt)*se,Se=1-ve,Ae=T(qt=C(p(qt)*se,-p(Kt))),Le=p(qt);return se=I(1-ve*ve),[Le*se-Ae*Se,-Ae*se-Le*Se]}bs.invert=function(qt,Kt){var se=(qt*qt+Kt*Kt)/-2,ve=I(-se*(2+se)),Se=Kt*se+qt*ve,Ae=qt*se-Kt*ve,Le=I(Ae*Ae+Se*Se);return[C(ve*Se,Le*(1+se)),Le?-S(ve*Ae/Le):0]};function ou(){return(0,M.c)(bs).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function fl(qt,Kt){var se=G(qt,Kt);return[(se[0]+qt/c)/2,(se[1]+Kt)/2]}fl.invert=function(qt,Kt){var se=qt,ve=Kt,Se=25;do{var Ae=T(ve),Le=p(ve),ir=p(2*ve),fr=Le*Le,$e=Ae*Ae,mr=p(se),Tr=T(se/2),Rr=p(se/2),Zr=Rr*Rr,dn=1-$e*Tr*Tr,wn=dn?w(Ae*Tr)*I(kn=1/dn):kn=0,kn,jn=.5*(2*wn*Ae*Rr+se/c)-qt,wi=.5*(wn*Le+ve)-Kt,Ai=.5*kn*($e*Zr+wn*Ae*Tr*fr)+.5/c,Si=kn*(mr*ir/4-wn*Le*Rr),Li=.125*kn*(ir*Rr-wn*Le*$e*mr),zi=.5*kn*(fr*Tr+wn*Zr*Ae)+.5,$i=Si*Li-zi*Ai,xa=(wi*Si-jn*zi)/$i,lt=(jn*Li-wi*Ai)/$i;se-=xa,ve-=lt}while((E(xa)>h||E(lt)>h)&&--Se>0);return[se,ve]};function zu(){return(0,M.c)(fl).scale(158.837)}},88728:function(Q,U,t){t.d(U,{c:function(){return M}});function M(){return new E}function E(){this.reset()}E.prototype={constructor:E,reset:function(){this.s=this.t=0},add:function(T){C(i,T,this.t),C(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new E;function C(T,v,d){var r=T.s=v+d,e=r-v,l=r-e;T.t=v-l+(d-e)}},95384:function(Q,U,t){t.d(U,{cp:function(){return _},mQ:function(){return T},oB:function(){return s}});var M=t(88728),E=t(64528),i=t(70932),C=t(16016),T=(0,M.c)(),v=(0,M.c)(),d,r,e,l,n,s={point:i.c,lineStart:i.c,lineEnd:i.c,polygonStart:function(){T.reset(),s.lineStart=o,s.lineEnd=p},polygonEnd:function(){var a=+T;v.add(a<0?E.kD+a:a),this.lineStart=this.lineEnd=this.point=i.c},sphere:function(){v.add(E.kD)}};function o(){s.point=b}function p(){h(d,r)}function b(a,c){s.point=h,d=a,r=c,a*=E.qw,c*=E.qw,e=a,l=(0,E.W8)(c=c/2+E.wL),n=(0,E.g$)(c)}function h(a,c){a*=E.qw,c*=E.qw,c=c/2+E.wL;var f=a-e,x=f>=0?1:-1,k=x*f,y=(0,E.W8)(c),A=(0,E.g$)(c),L=n*A,u=l*y+L*(0,E.W8)(k),m=L*x*(0,E.g$)(k);T.add((0,E.WE)(m,u)),e=a,l=y,n=A}function _(a){return v.reset(),(0,C.c)(a,s),v*2}},13696:function(Q,U,t){t.d(U,{c:function(){return S}});var M=t(88728),E=t(95384),i=t(84220),C=t(64528),T=t(16016),v,d,r,e,l,n,s,o,p=(0,M.c)(),b,h,_={point:a,lineStart:f,lineEnd:x,polygonStart:function(){_.point=k,_.lineStart=y,_.lineEnd=A,p.reset(),E.oB.polygonStart()},polygonEnd:function(){E.oB.polygonEnd(),_.point=a,_.lineStart=f,_.lineEnd=x,E.mQ<0?(v=-(r=180),d=-(e=90)):p>C.Gg?e=90:p<-C.Gg&&(d=-90),h[0]=v,h[1]=r},sphere:function(){v=-(r=180),d=-(e=90)}};function a(w,I){b.push(h=[v=w,r=w]),I<d&&(d=I),I>e&&(e=I)}function c(w,I){var O=(0,i.ux)([w*C.qw,I*C.qw]);if(o){var D=(0,i.CW)(o,O),P=[D[1],-D[0],0],F=(0,i.CW)(P,D);(0,i.cJ)(F),F=(0,i.G)(F);var R=w-l,B=R>0?1:-1,N=F[0]*C.oh*B,G,X=(0,C.a2)(R)>180;X^(B*l<N&&N<B*w)?(G=F[1]*C.oh,G>e&&(e=G)):(N=(N+360)%360-180,X^(B*l<N&&N<B*w)?(G=-F[1]*C.oh,G<d&&(d=G)):(I<d&&(d=I),I>e&&(e=I))),X?w<l?L(v,w)>L(v,r)&&(r=w):L(w,r)>L(v,r)&&(v=w):r>=v?(w<v&&(v=w),w>r&&(r=w)):w>l?L(v,w)>L(v,r)&&(r=w):L(w,r)>L(v,r)&&(v=w)}else b.push(h=[v=w,r=w]);I<d&&(d=I),I>e&&(e=I),o=O,l=w}function f(){_.point=c}function x(){h[0]=v,h[1]=r,_.point=a,o=null}function k(w,I){if(o){var O=w-l;p.add((0,C.a2)(O)>180?O+(O>0?360:-360):O)}else n=w,s=I;E.oB.point(w,I),c(w,I)}function y(){E.oB.lineStart()}function A(){k(n,s),E.oB.lineEnd(),(0,C.a2)(p)>C.Gg&&(v=-(r=180)),h[0]=v,h[1]=r,o=null}function L(w,I){return(I-=w)<0?I+360:I}function u(w,I){return w[0]-I[0]}function m(w,I){return w[0]<=w[1]?w[0]<=I&&I<=w[1]:I<w[0]||w[1]<I}function S(w){var I,O,D,P,F,R,B;if(e=r=-(v=d=1/0),b=[],(0,T.c)(w,_),O=b.length){for(b.sort(u),I=1,D=b[0],F=[D];I<O;++I)P=b[I],m(D,P[0])||m(D,P[1])?(L(D[0],P[1])>L(D[0],D[1])&&(D[1]=P[1]),L(P[0],D[1])>L(D[0],D[1])&&(D[0]=P[0])):F.push(D=P);for(R=-1/0,O=F.length-1,I=0,D=F[O];I<=O;D=P,++I)P=F[I],(B=L(D[1],P[0]))>R&&(R=B,v=P[0],r=D[1])}return b=h=null,v===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[v,d],[r,e]]}},84220:function(Q,U,t){t.d(U,{CW:function(){return T},Ez:function(){return C},G:function(){return E},cJ:function(){return r},mg:function(){return v},ux:function(){return i},wx:function(){return d}});var M=t(64528);function E(e){return[(0,M.WE)(e[1],e[0]),(0,M.qR)(e[2])]}function i(e){var l=e[0],n=e[1],s=(0,M.W8)(n);return[s*(0,M.W8)(l),s*(0,M.g$)(l),(0,M.g$)(n)]}function C(e,l){return e[0]*l[0]+e[1]*l[1]+e[2]*l[2]}function T(e,l){return[e[1]*l[2]-e[2]*l[1],e[2]*l[0]-e[0]*l[2],e[0]*l[1]-e[1]*l[0]]}function v(e,l){e[0]+=l[0],e[1]+=l[1],e[2]+=l[2]}function d(e,l){return[e[0]*l,e[1]*l,e[2]*l]}function r(e){var l=(0,M._I)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=l,e[1]/=l,e[2]/=l}},24052:function(Q,U,t){t.d(U,{c:function(){return O}});var M=t(64528),E=t(70932),i=t(16016),C,T,v,d,r,e,l,n,s,o,p,b,h,_,a,c,f={sphere:E.c,point:x,lineStart:y,lineEnd:u,polygonStart:function(){f.lineStart=m,f.lineEnd=S},polygonEnd:function(){f.lineStart=y,f.lineEnd=u}};function x(D,P){D*=M.qw,P*=M.qw;var F=(0,M.W8)(P);k(F*(0,M.W8)(D),F*(0,M.g$)(D),(0,M.g$)(P))}function k(D,P,F){++C,v+=(D-v)/C,d+=(P-d)/C,r+=(F-r)/C}function y(){f.point=A}function A(D,P){D*=M.qw,P*=M.qw;var F=(0,M.W8)(P);_=F*(0,M.W8)(D),a=F*(0,M.g$)(D),c=(0,M.g$)(P),f.point=L,k(_,a,c)}function L(D,P){D*=M.qw,P*=M.qw;var F=(0,M.W8)(P),R=F*(0,M.W8)(D),B=F*(0,M.g$)(D),N=(0,M.g$)(P),G=(0,M.WE)((0,M._I)((G=a*N-c*B)*G+(G=c*R-_*N)*G+(G=_*B-a*R)*G),_*R+a*B+c*N);T+=G,e+=G*(_+(_=R)),l+=G*(a+(a=B)),n+=G*(c+(c=N)),k(_,a,c)}function u(){f.point=x}function m(){f.point=w}function S(){I(b,h),f.point=x}function w(D,P){b=D,h=P,D*=M.qw,P*=M.qw,f.point=I;var F=(0,M.W8)(P);_=F*(0,M.W8)(D),a=F*(0,M.g$)(D),c=(0,M.g$)(P),k(_,a,c)}function I(D,P){D*=M.qw,P*=M.qw;var F=(0,M.W8)(P),R=F*(0,M.W8)(D),B=F*(0,M.g$)(D),N=(0,M.g$)(P),G=a*N-c*B,X=c*R-_*N,J=_*B-a*R,it=(0,M._I)(G*G+X*X+J*J),nt=(0,M.qR)(it),q=it&&-nt/it;s+=q*G,o+=q*X,p+=q*J,T+=nt,e+=nt*(_+(_=R)),l+=nt*(a+(a=B)),n+=nt*(c+(c=N)),k(_,a,c)}function O(D){C=T=v=d=r=e=l=n=s=o=p=0,(0,i.c)(D,f);var P=s,F=o,R=p,B=P*P+F*F+R*R;return B<M.a8&&(P=e,F=l,R=n,T<M.Gg&&(P=v,F=d,R=r),B=P*P+F*F+R*R,B<M.a8)?[NaN,NaN]:[(0,M.WE)(F,P)*M.oh,(0,M.qR)(R/(0,M._I)(B))*M.oh]}},61780:function(Q,U,t){t.d(U,{Q:function(){return T},c:function(){return d}});var M=t(84220);function E(r){return function(){return r}}var i=t(64528),C=t(92992);function T(r,e,l,n,s,o){if(l){var p=(0,i.W8)(e),b=(0,i.g$)(e),h=n*l;s==null?(s=e+n*i.kD,o=e-h/2):(s=v(p,s),o=v(p,o),(n>0?s<o:s>o)&&(s+=n*i.kD));for(var _,a=s;n>0?a>o:a<o;a-=h)_=(0,M.G)([p,-b*(0,i.W8)(a),-b*(0,i.g$)(a)]),r.point(_[0],_[1])}}function v(r,e){e=(0,M.ux)(e),e[0]-=r,(0,M.cJ)(e);var l=(0,i.mE)(-e[1]);return((-e[2]<0?-l:l)+i.kD-i.Gg)%i.kD}function d(){var r=E([0,0]),e=E(90),l=E(6),n,s,o={point:p};function p(h,_){n.push(h=s(h,_)),h[0]*=i.oh,h[1]*=i.oh}function b(){var h=r.apply(this,arguments),_=e.apply(this,arguments)*i.qw,a=l.apply(this,arguments)*i.qw;return n=[],s=(0,C.O)(-h[0]*i.qw,-h[1]*i.qw,0).invert,T(o,_,a,1),h={type:"Polygon",coordinates:[n]},n=s=null,h}return b.center=function(h){return arguments.length?(r=typeof h=="function"?h:E([+h[0],+h[1]]),b):r},b.radius=function(h){return arguments.length?(e=typeof h=="function"?h:E(+h),b):e},b.precision=function(h){return arguments.length?(l=typeof h=="function"?h:E(+h),b):l},b}},78284:function(Q,U,t){var M=t(14229),E=t(64528);U.c=(0,M.c)(function(){return!0},i,T,[-E.pi,-E.or]);function i(v){var d=NaN,r=NaN,e=NaN,l;return{lineStart:function(){v.lineStart(),l=1},point:function(n,s){var o=n>0?E.pi:-E.pi,p=(0,E.a2)(n-d);(0,E.a2)(p-E.pi)<E.Gg?(v.point(d,r=(r+s)/2>0?E.or:-E.or),v.point(e,r),v.lineEnd(),v.lineStart(),v.point(o,r),v.point(n,r),l=0):e!==o&&p>=E.pi&&((0,E.a2)(d-e)<E.Gg&&(d-=e*E.Gg),(0,E.a2)(n-o)<E.Gg&&(n-=o*E.Gg),r=C(d,r,n,s),v.point(e,r),v.lineEnd(),v.lineStart(),v.point(o,r),l=0),v.point(d=n,r=s),e=o},lineEnd:function(){v.lineEnd(),d=r=NaN},clean:function(){return 2-l}}}function C(v,d,r,e){var l,n,s=(0,E.g$)(v-r);return(0,E.a2)(s)>E.Gg?(0,E.MQ)(((0,E.g$)(d)*(n=(0,E.W8)(e))*(0,E.g$)(r)-(0,E.g$)(e)*(l=(0,E.W8)(d))*(0,E.g$)(v))/(l*n*s)):(d+e)/2}function T(v,d,r,e){var l;if(v==null)l=r*E.or,e.point(-E.pi,l),e.point(0,l),e.point(E.pi,l),e.point(E.pi,0),e.point(E.pi,-l),e.point(0,-l),e.point(-E.pi,-l),e.point(-E.pi,0),e.point(-E.pi,l);else if((0,E.a2)(v[0]-d[0])>E.Gg){var n=v[0]<d[0]?E.pi:-E.pi;l=r*n/2,e.point(-n,l),e.point(0,l),e.point(n,l)}else e.point(d[0],d[1])}},97208:function(Q,U,t){t.d(U,{c:function(){return E}});var M=t(70932);function E(){var i=[],C;return{point:function(T,v,d){C.push([T,v,d])},lineStart:function(){i.push(C=[])},lineEnd:M.c,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var T=i;return i=[],C=null,T}}}},2728:function(Q,U,t){t.d(U,{c:function(){return v}});var M=t(84220),E=t(61780),i=t(64528),C=t(41860),T=t(14229);function v(d){var r=(0,i.W8)(d),e=6*i.qw,l=r>0,n=(0,i.a2)(r)>i.Gg;function s(_,a,c,f){(0,E.Q)(f,d,e,c,_,a)}function o(_,a){return(0,i.W8)(_)*(0,i.W8)(a)>r}function p(_){var a,c,f,x,k;return{lineStart:function(){x=f=!1,k=1},point:function(y,A){var L=[y,A],u,m=o(y,A),S=l?m?0:h(y,A):m?h(y+(y<0?i.pi:-i.pi),A):0;if(!a&&(x=f=m)&&_.lineStart(),m!==f&&(u=b(a,L),(!u||(0,C.c)(a,u)||(0,C.c)(L,u))&&(L[2]=1)),m!==f)k=0,m?(_.lineStart(),u=b(L,a),_.point(u[0],u[1])):(u=b(a,L),_.point(u[0],u[1],2),_.lineEnd()),a=u;else if(n&&a&&l^m){var w;!(S&c)&&(w=b(L,a,!0))&&(k=0,l?(_.lineStart(),_.point(w[0][0],w[0][1]),_.point(w[1][0],w[1][1]),_.lineEnd()):(_.point(w[1][0],w[1][1]),_.lineEnd(),_.lineStart(),_.point(w[0][0],w[0][1],3)))}m&&(!a||!(0,C.c)(a,L))&&_.point(L[0],L[1]),a=L,f=m,c=S},lineEnd:function(){f&&_.lineEnd(),a=null},clean:function(){return k|(x&&f)<<1}}}function b(_,a,c){var f=(0,M.ux)(_),x=(0,M.ux)(a),k=[1,0,0],y=(0,M.CW)(f,x),A=(0,M.Ez)(y,y),L=y[0],u=A-L*L;if(!u)return!c&&_;var m=r*A/u,S=-r*L/u,w=(0,M.CW)(k,y),I=(0,M.wx)(k,m),O=(0,M.wx)(y,S);(0,M.mg)(I,O);var D=w,P=(0,M.Ez)(I,D),F=(0,M.Ez)(D,D),R=P*P-F*((0,M.Ez)(I,I)-1);if(!(R<0)){var B=(0,i._I)(R),N=(0,M.wx)(D,(-P-B)/F);if((0,M.mg)(N,I),N=(0,M.G)(N),!c)return N;var G=_[0],X=a[0],J=_[1],it=a[1],nt;X<G&&(nt=G,G=X,X=nt);var q=X-G,Z=(0,i.a2)(q-i.pi)<i.Gg,$=Z||q<i.Gg;if(!Z&&it<J&&(nt=J,J=it,it=nt),$?Z?J+it>0^N[1]<((0,i.a2)(N[0]-G)<i.Gg?J:it):J<=N[1]&&N[1]<=it:q>i.pi^(G<=N[0]&&N[0]<=X)){var V=(0,M.wx)(D,(-P+B)/F);return(0,M.mg)(V,I),[N,(0,M.G)(V)]}}}function h(_,a){var c=l?d:i.pi-d,f=0;return _<-c?f|=1:_>c&&(f|=2),a<-c?f|=4:a>c&&(f|=8),f}return(0,T.c)(o,p,s,l?[0,-d]:[-i.pi,d-i.pi])}},14229:function(Q,U,t){t.d(U,{c:function(){return v}});var M=t(97208),E=t(32232),i=t(64528),C=t(58196),T=t(84706);function v(e,l,n,s){return function(o){var p=l(o),b=(0,M.c)(),h=l(b),_=!1,a,c,f,x={point:k,lineStart:A,lineEnd:L,polygonStart:function(){x.point=u,x.lineStart=m,x.lineEnd=S,c=[],a=[]},polygonEnd:function(){x.point=k,x.lineStart=A,x.lineEnd=L,c=(0,T.Uf)(c);var w=(0,C.c)(a,s);c.length?(_||(o.polygonStart(),_=!0),(0,E.c)(c,r,w,n,o)):w&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),c=a=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function k(w,I){e(w,I)&&o.point(w,I)}function y(w,I){p.point(w,I)}function A(){x.point=y,p.lineStart()}function L(){x.point=k,p.lineEnd()}function u(w,I){f.push([w,I]),h.point(w,I)}function m(){h.lineStart(),f=[]}function S(){u(f[0][0],f[0][1]),h.lineEnd();var w=h.clean(),I=b.result(),O,D=I.length,P,F,R;if(f.pop(),a.push(f),f=null,!!D){if(w&1){if(F=I[0],(P=F.length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),O=0;O<P;++O)o.point((R=F[O])[0],R[1]);o.lineEnd()}return}D>1&&w&2&&I.push(I.pop().concat(I.shift())),c.push(I.filter(d))}}return x}}function d(e){return e.length>1}function r(e,l){return((e=e.x)[0]<0?e[1]-i.or-i.Gg:i.or-e[1])-((l=l.x)[0]<0?l[1]-i.or-i.Gg:i.or-l[1])}},21676:function(Q,U,t){t.d(U,{c:function(){return r}});var M=t(64528),E=t(97208);function i(e,l,n,s,o,p){var b=e[0],h=e[1],_=l[0],a=l[1],c=0,f=1,x=_-b,k=a-h,y;if(y=n-b,!(!x&&y>0)){if(y/=x,x<0){if(y<c)return;y<f&&(f=y)}else if(x>0){if(y>f)return;y>c&&(c=y)}if(y=o-b,!(!x&&y<0)){if(y/=x,x<0){if(y>f)return;y>c&&(c=y)}else if(x>0){if(y<c)return;y<f&&(f=y)}if(y=s-h,!(!k&&y>0)){if(y/=k,k<0){if(y<c)return;y<f&&(f=y)}else if(k>0){if(y>f)return;y>c&&(c=y)}if(y=p-h,!(!k&&y<0)){if(y/=k,k<0){if(y>f)return;y>c&&(c=y)}else if(k>0){if(y<c)return;y<f&&(f=y)}return c>0&&(e[0]=b+c*x,e[1]=h+c*k),f<1&&(l[0]=b+f*x,l[1]=h+f*k),!0}}}}}var C=t(32232),T=t(84706),v=1e9,d=-v;function r(e,l,n,s){function o(a,c){return e<=a&&a<=n&&l<=c&&c<=s}function p(a,c,f,x){var k=0,y=0;if(a==null||(k=b(a,f))!==(y=b(c,f))||_(a,c)<0^f>0)do x.point(k===0||k===3?e:n,k>1?s:l);while((k=(k+f+4)%4)!==y);else x.point(c[0],c[1])}function b(a,c){return(0,M.a2)(a[0]-e)<M.Gg?c>0?0:3:(0,M.a2)(a[0]-n)<M.Gg?c>0?2:1:(0,M.a2)(a[1]-l)<M.Gg?c>0?1:0:c>0?3:2}function h(a,c){return _(a.x,c.x)}function _(a,c){var f=b(a,1),x=b(c,1);return f!==x?f-x:f===0?c[1]-a[1]:f===1?a[0]-c[0]:f===2?a[1]-c[1]:c[0]-a[0]}return function(a){var c=a,f=(0,E.c)(),x,k,y,A,L,u,m,S,w,I,O,D={point:P,lineStart:N,lineEnd:G,polygonStart:R,polygonEnd:B};function P(J,it){o(J,it)&&c.point(J,it)}function F(){for(var J=0,it=0,nt=k.length;it<nt;++it)for(var q=k[it],Z=1,$=q.length,V=q[0],rt,ot,H=V[0],Y=V[1];Z<$;++Z)rt=H,ot=Y,V=q[Z],H=V[0],Y=V[1],ot<=s?Y>s&&(H-rt)*(s-ot)>(Y-ot)*(e-rt)&&++J:Y<=s&&(H-rt)*(s-ot)<(Y-ot)*(e-rt)&&--J;return J}function R(){c=f,x=[],k=[],O=!0}function B(){var J=F(),it=O&&J,nt=(x=(0,T.Uf)(x)).length;(it||nt)&&(a.polygonStart(),it&&(a.lineStart(),p(null,null,1,a),a.lineEnd()),nt&&(0,C.c)(x,h,J,p,a),a.polygonEnd()),c=a,x=k=y=null}function N(){D.point=X,k&&k.push(y=[]),I=!0,w=!1,m=S=NaN}function G(){x&&(X(A,L),u&&w&&f.rejoin(),x.push(f.result())),D.point=P,w&&c.lineEnd()}function X(J,it){var nt=o(J,it);if(k&&y.push([J,it]),I)A=J,L=it,u=nt,I=!1,nt&&(c.lineStart(),c.point(J,it));else if(nt&&w)c.point(J,it);else{var q=[m=Math.max(d,Math.min(v,m)),S=Math.max(d,Math.min(v,S))],Z=[J=Math.max(d,Math.min(v,J)),it=Math.max(d,Math.min(v,it))];i(q,Z,e,l,n,s)?(w||(c.lineStart(),c.point(q[0],q[1])),c.point(Z[0],Z[1]),nt||c.lineEnd(),O=!1):nt&&(c.lineStart(),c.point(J,it),O=!1)}m=J,S=it,w=nt}return D}}},32232:function(Q,U,t){t.d(U,{c:function(){return C}});var M=t(41860),E=t(64528);function i(v,d,r,e){this.x=v,this.z=d,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function C(v,d,r,e,l){var n=[],s=[],o,p;if(v.forEach(function(f){if(!((x=f.length-1)<=0)){var x,k=f[0],y=f[x],A;if((0,M.c)(k,y)){if(!k[2]&&!y[2]){for(l.lineStart(),o=0;o<x;++o)l.point((k=f[o])[0],k[1]);l.lineEnd();return}y[0]+=2*E.Gg}n.push(A=new i(k,f,null,!0)),s.push(A.o=new i(k,null,A,!1)),n.push(A=new i(y,f,null,!1)),s.push(A.o=new i(y,null,A,!0))}}),!!n.length){for(s.sort(d),T(n),T(s),o=0,p=s.length;o<p;++o)s[o].e=r=!r;for(var b=n[0],h,_;;){for(var a=b,c=!0;a.v;)if((a=a.n)===b)return;h=a.z,l.lineStart();do{if(a.v=a.o.v=!0,a.e){if(c)for(o=0,p=h.length;o<p;++o)l.point((_=h[o])[0],_[1]);else e(a.x,a.n.x,1,l);a=a.n}else{if(c)for(h=a.p.z,o=h.length-1;o>=0;--o)l.point((_=h[o])[0],_[1]);else e(a.x,a.p.x,-1,l);a=a.p}a=a.o,h=a.z,c=!c}while(!a.v);l.lineEnd()}}}function T(v){if(d=v.length){for(var d,r=0,e=v[0],l;++r<d;)e.n=l=v[r],l.p=e,e=l;e.n=l=v[0],l.p=e}}},68120:function(Q,U,t){t.d(U,{c:function(){return M}});function M(E,i){function C(T,v){return T=E(T,v),i(T[0],T[1])}return E.invert&&i.invert&&(C.invert=function(T,v){return T=i.invert(T,v),T&&E.invert(T[0],T[1])}),C}},7376:function(Q,U,t){t.d(U,{c:function(){return M}});function M(E){return E}},83356:function(Q,U,t){t.r(U),t.d(U,{geoAlbers:function(){return pr},geoAlbersUsa:function(){return ie},geoArea:function(){return M.cp},geoAzimuthalEqualArea:function(){return pe.c},geoAzimuthalEqualAreaRaw:function(){return pe.y},geoAzimuthalEquidistant:function(){return ke.c},geoAzimuthalEquidistantRaw:function(){return ke.O},geoBounds:function(){return E.c},geoCentroid:function(){return i.c},geoCircle:function(){return C.c},geoClipAntimeridian:function(){return T.c},geoClipCircle:function(){return v.c},geoClipExtent:function(){return r},geoClipRectangle:function(){return d.c},geoConicConformal:function(){return or},geoConicConformalRaw:function(){return Ke},geoConicEqualArea:function(){return He},geoConicEqualAreaRaw:function(){return Be},geoConicEquidistant:function(){return Ut},geoConicEquidistantRaw:function(){return zt},geoContains:function(){return R},geoDistance:function(){return u},geoEqualEarth:function(){return rr},geoEqualEarthRaw:function(){return Oe},geoEquirectangular:function(){return sr.c},geoEquirectangularRaw:function(){return sr.u},geoGnomonic:function(){return cr.c},geoGnomonicRaw:function(){return cr.Y},geoGraticule:function(){return X},geoGraticule10:function(){return J},geoIdentity:function(){return nr},geoInterpolate:function(){return it.c},geoLength:function(){return y},geoMercator:function(){return Re},geoMercatorRaw:function(){return Fe},geoNaturalEarth1:function(){return Sr.c},geoNaturalEarth1Raw:function(){return Sr.g},geoOrthographic:function(){return kr.c},geoOrthographicRaw:function(){return kr.t},geoPath:function(){return _e},geoProjection:function(){return De.c},geoProjectionMutator:function(){return De.U},geoRotation:function(){return Ce.c},geoStereographic:function(){return Ur},geoStereographicRaw:function(){return rn},geoStream:function(){return o.c},geoTransform:function(){return lr.c},geoTransverseMercator:function(){return yn},geoTransverseMercatorRaw:function(){return pn}});var M=t(95384),E=t(13696),i=t(24052),C=t(61780),T=t(78284),v=t(2728),d=t(21676);function r(){var yr=0,Cr=0,Dr=960,Nr=500,$r,fn,on;return on={stream:function(In){return $r&&fn===In?$r:$r=(0,d.c)(yr,Cr,Dr,Nr)(fn=In)},extent:function(In){return arguments.length?(yr=+In[0][0],Cr=+In[0][1],Dr=+In[1][0],Nr=+In[1][1],$r=fn=null,on):[[yr,Cr],[Dr,Nr]]}}}var e=t(58196),l=t(88728),n=t(64528),s=t(70932),o=t(16016),p=(0,l.c)(),b,h,_,a={sphere:s.c,point:s.c,lineStart:c,lineEnd:s.c,polygonStart:s.c,polygonEnd:s.c};function c(){a.point=x,a.lineEnd=f}function f(){a.point=a.lineEnd=s.c}function x(yr,Cr){yr*=n.qw,Cr*=n.qw,b=yr,h=(0,n.g$)(Cr),_=(0,n.W8)(Cr),a.point=k}function k(yr,Cr){yr*=n.qw,Cr*=n.qw;var Dr=(0,n.g$)(Cr),Nr=(0,n.W8)(Cr),$r=(0,n.a2)(yr-b),fn=(0,n.W8)($r),on=(0,n.g$)($r),In=Nr*on,En=_*Dr-h*Nr*fn,$n=h*Dr+_*Nr*fn;p.add((0,n.WE)((0,n._I)(In*In+En*En),$n)),b=yr,h=Dr,_=Nr}function y(yr){return p.reset(),(0,o.c)(yr,a),+p}var A=[null,null],L={type:"LineString",coordinates:A};function u(yr,Cr){return A[0]=yr,A[1]=Cr,y(L)}var m={Feature:function(yr,Cr){return w(yr.geometry,Cr)},FeatureCollection:function(yr,Cr){for(var Dr=yr.features,Nr=-1,$r=Dr.length;++Nr<$r;)if(w(Dr[Nr].geometry,Cr))return!0;return!1}},S={Sphere:function(){return!0},Point:function(yr,Cr){return I(yr.coordinates,Cr)},MultiPoint:function(yr,Cr){for(var Dr=yr.coordinates,Nr=-1,$r=Dr.length;++Nr<$r;)if(I(Dr[Nr],Cr))return!0;return!1},LineString:function(yr,Cr){return O(yr.coordinates,Cr)},MultiLineString:function(yr,Cr){for(var Dr=yr.coordinates,Nr=-1,$r=Dr.length;++Nr<$r;)if(O(Dr[Nr],Cr))return!0;return!1},Polygon:function(yr,Cr){return D(yr.coordinates,Cr)},MultiPolygon:function(yr,Cr){for(var Dr=yr.coordinates,Nr=-1,$r=Dr.length;++Nr<$r;)if(D(Dr[Nr],Cr))return!0;return!1},GeometryCollection:function(yr,Cr){for(var Dr=yr.geometries,Nr=-1,$r=Dr.length;++Nr<$r;)if(w(Dr[Nr],Cr))return!0;return!1}};function w(yr,Cr){return yr&&S.hasOwnProperty(yr.type)?S[yr.type](yr,Cr):!1}function I(yr,Cr){return u(yr,Cr)===0}function O(yr,Cr){for(var Dr,Nr,$r,fn=0,on=yr.length;fn<on;fn++){if(Nr=u(yr[fn],Cr),Nr===0||fn>0&&($r=u(yr[fn],yr[fn-1]),$r>0&&Dr<=$r&&Nr<=$r&&(Dr+Nr-$r)*(1-Math.pow((Dr-Nr)/$r,2))<n.a8*$r))return!0;Dr=Nr}return!1}function D(yr,Cr){return!!(0,e.c)(yr.map(P),F(Cr))}function P(yr){return yr=yr.map(F),yr.pop(),yr}function F(yr){return[yr[0]*n.qw,yr[1]*n.qw]}function R(yr,Cr){return(yr&&m.hasOwnProperty(yr.type)?m[yr.type]:w)(yr,Cr)}var B=t(84706);function N(yr,Cr,Dr){var Nr=(0,B.ik)(yr,Cr-n.Gg,Dr).concat(Cr);return function($r){return Nr.map(function(fn){return[$r,fn]})}}function G(yr,Cr,Dr){var Nr=(0,B.ik)(yr,Cr-n.Gg,Dr).concat(Cr);return function($r){return Nr.map(function(fn){return[fn,$r]})}}function X(){var yr,Cr,Dr,Nr,$r,fn,on,In,En=10,$n=En,ri=90,ui=360,ni,zn,ur,Gr,qr=2.5;function an(){return{type:"MultiLineString",coordinates:Mn()}}function Mn(){return(0,B.ik)((0,n.Km)(Nr/ri)*ri,Dr,ri).map(ur).concat((0,B.ik)((0,n.Km)(In/ui)*ui,on,ui).map(Gr)).concat((0,B.ik)((0,n.Km)(Cr/En)*En,yr,En).filter(function(sn){return(0,n.a2)(sn%ri)>n.Gg}).map(ni)).concat((0,B.ik)((0,n.Km)(fn/$n)*$n,$r,$n).filter(function(sn){return(0,n.a2)(sn%ui)>n.Gg}).map(zn))}return an.lines=function(){return Mn().map(function(sn){return{type:"LineString",coordinates:sn}})},an.outline=function(){return{type:"Polygon",coordinates:[ur(Nr).concat(Gr(on).slice(1),ur(Dr).reverse().slice(1),Gr(In).reverse().slice(1))]}},an.extent=function(sn){return arguments.length?an.extentMajor(sn).extentMinor(sn):an.extentMinor()},an.extentMajor=function(sn){return arguments.length?(Nr=+sn[0][0],Dr=+sn[1][0],In=+sn[0][1],on=+sn[1][1],Nr>Dr&&(sn=Nr,Nr=Dr,Dr=sn),In>on&&(sn=In,In=on,on=sn),an.precision(qr)):[[Nr,In],[Dr,on]]},an.extentMinor=function(sn){return arguments.length?(Cr=+sn[0][0],yr=+sn[1][0],fn=+sn[0][1],$r=+sn[1][1],Cr>yr&&(sn=Cr,Cr=yr,yr=sn),fn>$r&&(sn=fn,fn=$r,$r=sn),an.precision(qr)):[[Cr,fn],[yr,$r]]},an.step=function(sn){return arguments.length?an.stepMajor(sn).stepMinor(sn):an.stepMinor()},an.stepMajor=function(sn){return arguments.length?(ri=+sn[0],ui=+sn[1],an):[ri,ui]},an.stepMinor=function(sn){return arguments.length?(En=+sn[0],$n=+sn[1],an):[En,$n]},an.precision=function(sn){return arguments.length?(qr=+sn,ni=N(fn,$r,90),zn=G(Cr,yr,qr),ur=N(In,on,90),Gr=G(Nr,Dr,qr),an):qr},an.extentMajor([[-180,-90+n.Gg],[180,90-n.Gg]]).extentMinor([[-180,-80-n.Gg],[180,80+n.Gg]])}function J(){return X()()}var it=t(27284),nt=t(7376),q=(0,l.c)(),Z=(0,l.c)(),$,V,rt,ot,H={point:s.c,lineStart:s.c,lineEnd:s.c,polygonStart:function(){H.lineStart=Y,H.lineEnd=ct},polygonEnd:function(){H.lineStart=H.lineEnd=H.point=s.c,q.add((0,n.a2)(Z)),Z.reset()},result:function(){var yr=q/2;return q.reset(),yr}};function Y(){H.point=at}function at(yr,Cr){H.point=et,$=rt=yr,V=ot=Cr}function et(yr,Cr){Z.add(ot*yr-rt*Cr),rt=yr,ot=Cr}function ct(){et($,V)}var ft=H,yt=t(73784),xt=0,Ct=0,gt=0,mt=0,vt=0,At=0,Ot=0,It=0,St=0,Bt,re,Yt,he,Zt={point:ae,lineStart:oe,lineEnd:ye,polygonStart:function(){Zt.lineStart=Tt,Zt.lineEnd=Ft},polygonEnd:function(){Zt.point=ae,Zt.lineStart=oe,Zt.lineEnd=ye},result:function(){var yr=St?[Ot/St,It/St]:At?[mt/At,vt/At]:gt?[xt/gt,Ct/gt]:[NaN,NaN];return xt=Ct=gt=mt=vt=At=Ot=It=St=0,yr}};function ae(yr,Cr){xt+=yr,Ct+=Cr,++gt}function oe(){Zt.point=ce}function ce(yr,Cr){Zt.point=ue,ae(Yt=yr,he=Cr)}function ue(yr,Cr){var Dr=yr-Yt,Nr=Cr-he,$r=(0,n._I)(Dr*Dr+Nr*Nr);mt+=$r*(Yt+yr)/2,vt+=$r*(he+Cr)/2,At+=$r,ae(Yt=yr,he=Cr)}function ye(){Zt.point=ae}function Tt(){Zt.point=$t}function Ft(){Vt(Bt,re)}function $t(yr,Cr){Zt.point=Vt,ae(Bt=Yt=yr,re=he=Cr)}function Vt(yr,Cr){var Dr=yr-Yt,Nr=Cr-he,$r=(0,n._I)(Dr*Dr+Nr*Nr);mt+=$r*(Yt+yr)/2,vt+=$r*(he+Cr)/2,At+=$r,$r=he*yr-Yt*Cr,Ot+=$r*(Yt+yr),It+=$r*(he+Cr),St+=$r*3,ae(Yt=yr,he=Cr)}var Nt=Zt;function Mt(yr){this._context=yr}Mt.prototype={_radius:4.5,pointRadius:function(yr){return this._radius=yr,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(yr,Cr){switch(this._point){case 0:{this._context.moveTo(yr,Cr),this._point=1;break}case 1:{this._context.lineTo(yr,Cr);break}default:{this._context.moveTo(yr+this._radius,Cr),this._context.arc(yr,Cr,this._radius,0,n.kD);break}}},result:s.c};var Et=(0,l.c)(),Dt,dt,ht,bt,Pt,Gt={point:s.c,lineStart:function(){Gt.point=te},lineEnd:function(){Dt&&ne(dt,ht),Gt.point=s.c},polygonStart:function(){Dt=!0},polygonEnd:function(){Dt=null},result:function(){var yr=+Et;return Et.reset(),yr}};function te(yr,Cr){Gt.point=ne,dt=bt=yr,ht=Pt=Cr}function ne(yr,Cr){bt-=yr,Pt-=Cr,Et.add((0,n._I)(bt*bt+Pt*Pt)),bt=yr,Pt=Cr}var je=Gt;function Ne(){this._string=[]}Ne.prototype={_radius:4.5,_circle:ge(4.5),pointRadius:function(yr){return(yr=+yr)!==this._radius&&(this._radius=yr,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(yr,Cr){switch(this._point){case 0:{this._string.push("M",yr,",",Cr),this._point=1;break}case 1:{this._string.push("L",yr,",",Cr);break}default:{this._circle==null&&(this._circle=ge(this._radius)),this._string.push("M",yr,",",Cr,this._circle);break}}},result:function(){if(this._string.length){var yr=this._string.join("");return this._string=[],yr}else return null}};function ge(yr){return"m0,"+yr+"a"+yr+","+yr+" 0 1,1 0,"+-2*yr+"a"+yr+","+yr+" 0 1,1 0,"+2*yr+"z"}function _e(yr,Cr){var Dr=4.5,Nr,$r;function fn(on){return on&&(typeof Dr=="function"&&$r.pointRadius(+Dr.apply(this,arguments)),(0,o.c)(on,Nr($r))),$r.result()}return fn.area=function(on){return(0,o.c)(on,Nr(ft)),ft.result()},fn.measure=function(on){return(0,o.c)(on,Nr(je)),je.result()},fn.bounds=function(on){return(0,o.c)(on,Nr(yt.c)),yt.c.result()},fn.centroid=function(on){return(0,o.c)(on,Nr(Nt)),Nt.result()},fn.projection=function(on){return arguments.length?(Nr=on==null?(yr=null,nt.c):(yr=on).stream,fn):yr},fn.context=function(on){return arguments.length?($r=on==null?(Cr=null,new Ne):new Mt(Cr=on),typeof Dr!="function"&&$r.pointRadius(Dr),fn):Cr},fn.pointRadius=function(on){return arguments.length?(Dr=typeof on=="function"?on:($r.pointRadius(+on),+on),fn):Dr},fn.projection(yr).context(Cr)}var De=t(87952);function hr(yr){var Cr=0,Dr=n.pi/3,Nr=(0,De.U)(yr),$r=Nr(Cr,Dr);return $r.parallels=function(fn){return arguments.length?Nr(Cr=fn[0]*n.qw,Dr=fn[1]*n.qw):[Cr*n.oh,Dr*n.oh]},$r}function fe(yr){var Cr=(0,n.W8)(yr);function Dr(Nr,$r){return[Nr*Cr,(0,n.g$)($r)/Cr]}return Dr.invert=function(Nr,$r){return[Nr/Cr,(0,n.qR)($r*Cr)]},Dr}function Be(yr,Cr){var Dr=(0,n.g$)(yr),Nr=(Dr+(0,n.g$)(Cr))/2;if((0,n.a2)(Nr)<n.Gg)return fe(yr);var $r=1+Dr*(2*Nr-Dr),fn=(0,n._I)($r)/Nr;function on(In,En){var $n=(0,n._I)($r-2*Nr*(0,n.g$)(En))/Nr;return[$n*(0,n.g$)(In*=Nr),fn-$n*(0,n.W8)(In)]}return on.invert=function(In,En){var $n=fn-En,ri=(0,n.WE)(In,(0,n.a2)($n))*(0,n.kq)($n);return $n*Nr<0&&(ri-=n.pi*(0,n.kq)(In)*(0,n.kq)($n)),[ri/Nr,(0,n.qR)(($r-(In*In+$n*$n)*Nr*Nr)/(2*Nr))]},on}function He(){return hr(Be).scale(155.424).center([0,33.6442])}function pr(){return He().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var Ze=t(86420);function Xt(yr){var Cr=yr.length;return{point:function(Dr,Nr){for(var $r=-1;++$r<Cr;)yr[$r].point(Dr,Nr)},sphere:function(){for(var Dr=-1;++Dr<Cr;)yr[Dr].sphere()},lineStart:function(){for(var Dr=-1;++Dr<Cr;)yr[Dr].lineStart()},lineEnd:function(){for(var Dr=-1;++Dr<Cr;)yr[Dr].lineEnd()},polygonStart:function(){for(var Dr=-1;++Dr<Cr;)yr[Dr].polygonStart()},polygonEnd:function(){for(var Dr=-1;++Dr<Cr;)yr[Dr].polygonEnd()}}}function ie(){var yr,Cr,Dr=pr(),Nr,$r=He().rotate([154,0]).center([-2,58.5]).parallels([55,65]),fn,on=He().rotate([157,0]).center([-3,19.9]).parallels([8,18]),In,En,$n={point:function(ni,zn){En=[ni,zn]}};function ri(ni){var zn=ni[0],ur=ni[1];return En=null,Nr.point(zn,ur),En||(fn.point(zn,ur),En)||(In.point(zn,ur),En)}ri.invert=function(ni){var zn=Dr.scale(),ur=Dr.translate(),Gr=(ni[0]-ur[0])/zn,qr=(ni[1]-ur[1])/zn;return(qr>=.12&&qr<.234&&Gr>=-.425&&Gr<-.214?$r:qr>=.166&&qr<.234&&Gr>=-.214&&Gr<-.115?on:Dr).invert(ni)},ri.stream=function(ni){return yr&&Cr===ni?yr:yr=Xt([Dr.stream(Cr=ni),$r.stream(ni),on.stream(ni)])},ri.precision=function(ni){return arguments.length?(Dr.precision(ni),$r.precision(ni),on.precision(ni),ui()):Dr.precision()},ri.scale=function(ni){return arguments.length?(Dr.scale(ni),$r.scale(ni*.35),on.scale(ni),ri.translate(Dr.translate())):Dr.scale()},ri.translate=function(ni){if(!arguments.length)return Dr.translate();var zn=Dr.scale(),ur=+ni[0],Gr=+ni[1];return Nr=Dr.translate(ni).clipExtent([[ur-.455*zn,Gr-.238*zn],[ur+.455*zn,Gr+.238*zn]]).stream($n),fn=$r.translate([ur-.307*zn,Gr+.201*zn]).clipExtent([[ur-.425*zn+n.Gg,Gr+.12*zn+n.Gg],[ur-.214*zn-n.Gg,Gr+.234*zn-n.Gg]]).stream($n),In=on.translate([ur-.205*zn,Gr+.212*zn]).clipExtent([[ur-.214*zn+n.Gg,Gr+.166*zn+n.Gg],[ur-.115*zn-n.Gg,Gr+.234*zn-n.Gg]]).stream($n),ui()},ri.fitExtent=function(ni,zn){return(0,Ze.QX)(ri,ni,zn)},ri.fitSize=function(ni,zn){return(0,Ze.UV)(ri,ni,zn)},ri.fitWidth=function(ni,zn){return(0,Ze.Qx)(ri,ni,zn)},ri.fitHeight=function(ni,zn){return(0,Ze.OW)(ri,ni,zn)};function ui(){return yr=Cr=null,ri}return ri.scale(1070)}var pe=t(54724),ke=t(69020),Ce=t(92992);function Fe(yr,Cr){return[yr,(0,n.Yz)((0,n.a6)((n.or+Cr)/2))]}Fe.invert=function(yr,Cr){return[yr,2*(0,n.MQ)((0,n.oN)(Cr))-n.or]};function Re(){return be(Fe).scale(961/n.kD)}function be(yr){var Cr=(0,De.c)(yr),Dr=Cr.center,Nr=Cr.scale,$r=Cr.translate,fn=Cr.clipExtent,on=null,In,En,$n;Cr.scale=function(ui){return arguments.length?(Nr(ui),ri()):Nr()},Cr.translate=function(ui){return arguments.length?($r(ui),ri()):$r()},Cr.center=function(ui){return arguments.length?(Dr(ui),ri()):Dr()},Cr.clipExtent=function(ui){return arguments.length?(ui==null?on=In=En=$n=null:(on=+ui[0][0],In=+ui[0][1],En=+ui[1][0],$n=+ui[1][1]),ri()):on==null?null:[[on,In],[En,$n]]};function ri(){var ui=n.pi*Nr(),ni=Cr((0,Ce.c)(Cr.rotate()).invert([0,0]));return fn(on==null?[[ni[0]-ui,ni[1]-ui],[ni[0]+ui,ni[1]+ui]]:yr===Fe?[[Math.max(ni[0]-ui,on),In],[Math.min(ni[0]+ui,En),$n]]:[[on,Math.max(ni[1]-ui,In)],[En,Math.min(ni[1]+ui,$n)]])}return ri()}function Ge(yr){return(0,n.a6)((n.or+yr)/2)}function Ke(yr,Cr){var Dr=(0,n.W8)(yr),Nr=yr===Cr?(0,n.g$)(yr):(0,n.Yz)(Dr/(0,n.W8)(Cr))/(0,n.Yz)(Ge(Cr)/Ge(yr)),$r=Dr*(0,n.g3)(Ge(yr),Nr)/Nr;if(!Nr)return Fe;function fn(on,In){$r>0?In<-n.or+n.Gg&&(In=-n.or+n.Gg):In>n.or-n.Gg&&(In=n.or-n.Gg);var En=$r/(0,n.g3)(Ge(In),Nr);return[En*(0,n.g$)(Nr*on),$r-En*(0,n.W8)(Nr*on)]}return fn.invert=function(on,In){var En=$r-In,$n=(0,n.kq)(Nr)*(0,n._I)(on*on+En*En),ri=(0,n.WE)(on,(0,n.a2)(En))*(0,n.kq)(En);return En*Nr<0&&(ri-=n.pi*(0,n.kq)(on)*(0,n.kq)(En)),[ri/Nr,2*(0,n.MQ)((0,n.g3)($r/$n,1/Nr))-n.or]},fn}function or(){return hr(Ke).scale(109.5).parallels([30,30])}var sr=t(69604);function zt(yr,Cr){var Dr=(0,n.W8)(yr),Nr=yr===Cr?(0,n.g$)(yr):(Dr-(0,n.W8)(Cr))/(Cr-yr),$r=Dr/Nr+yr;if((0,n.a2)(Nr)<n.Gg)return sr.u;function fn(on,In){var En=$r-In,$n=Nr*on;return[En*(0,n.g$)($n),$r-En*(0,n.W8)($n)]}return fn.invert=function(on,In){var En=$r-In,$n=(0,n.WE)(on,(0,n.a2)(En))*(0,n.kq)(En);return En*Nr<0&&($n-=n.pi*(0,n.kq)(on)*(0,n.kq)(En)),[$n/Nr,$r-(0,n.kq)(Nr)*(0,n._I)(on*on+En*En)]},fn}function Ut(){return hr(zt).scale(131.154).center([0,13.9389])}var Me=1.340264,Te=-.081106,qe=893e-6,Qe=.003796,Je=(0,n._I)(3)/2,We=12;function Oe(yr,Cr){var Dr=(0,n.qR)(Je*(0,n.g$)(Cr)),Nr=Dr*Dr,$r=Nr*Nr*Nr;return[yr*(0,n.W8)(Dr)/(Je*(Me+3*Te*Nr+$r*(7*qe+9*Qe*Nr))),Dr*(Me+Te*Nr+$r*(qe+Qe*Nr))]}Oe.invert=function(yr,Cr){for(var Dr=Cr,Nr=Dr*Dr,$r=Nr*Nr*Nr,fn=0,on,In,En;fn<We&&(In=Dr*(Me+Te*Nr+$r*(qe+Qe*Nr))-Cr,En=Me+3*Te*Nr+$r*(7*qe+9*Qe*Nr),Dr-=on=In/En,Nr=Dr*Dr,$r=Nr*Nr*Nr,!((0,n.a2)(on)<n.a8));++fn);return[Je*yr*(Me+3*Te*Nr+$r*(7*qe+9*Qe*Nr))/(0,n.W8)(Dr),(0,n.qR)((0,n.g$)(Dr)/Je)]};function rr(){return(0,De.c)(Oe).scale(177.158)}var cr=t(53285),lr=t(15196);function nr(){var yr=1,Cr=0,Dr=0,Nr=1,$r=1,fn=0,on,In,En=null,$n,ri,ui,ni=1,zn=1,ur=(0,lr.s)({point:function(An,Sn){var qn=sn([An,Sn]);this.stream.point(qn[0],qn[1])}}),Gr=nt.c,qr,an;function Mn(){return ni=yr*Nr,zn=yr*$r,qr=an=null,sn}function sn(An){var Sn=An[0]*ni,qn=An[1]*zn;if(fn){var ii=qn*on-Sn*In;Sn=Sn*on+qn*In,qn=ii}return[Sn+Cr,qn+Dr]}return sn.invert=function(An){var Sn=An[0]-Cr,qn=An[1]-Dr;if(fn){var ii=qn*on+Sn*In;Sn=Sn*on-qn*In,qn=ii}return[Sn/ni,qn/zn]},sn.stream=function(An){return qr&&an===An?qr:qr=ur(Gr(an=An))},sn.postclip=function(An){return arguments.length?(Gr=An,En=$n=ri=ui=null,Mn()):Gr},sn.clipExtent=function(An){return arguments.length?(Gr=An==null?(En=$n=ri=ui=null,nt.c):(0,d.c)(En=+An[0][0],$n=+An[0][1],ri=+An[1][0],ui=+An[1][1]),Mn()):En==null?null:[[En,$n],[ri,ui]]},sn.scale=function(An){return arguments.length?(yr=+An,Mn()):yr},sn.translate=function(An){return arguments.length?(Cr=+An[0],Dr=+An[1],Mn()):[Cr,Dr]},sn.angle=function(An){return arguments.length?(fn=An%360*n.qw,In=(0,n.g$)(fn),on=(0,n.W8)(fn),Mn()):fn*n.oh},sn.reflectX=function(An){return arguments.length?(Nr=An?-1:1,Mn()):Nr<0},sn.reflectY=function(An){return arguments.length?($r=An?-1:1,Mn()):$r<0},sn.fitExtent=function(An,Sn){return(0,Ze.QX)(sn,An,Sn)},sn.fitSize=function(An,Sn){return(0,Ze.UV)(sn,An,Sn)},sn.fitWidth=function(An,Sn){return(0,Ze.Qx)(sn,An,Sn)},sn.fitHeight=function(An,Sn){return(0,Ze.OW)(sn,An,Sn)},sn}var Sr=t(47984),kr=t(4888),Mr=t(62280);function rn(yr,Cr){var Dr=(0,n.W8)(Cr),Nr=1+(0,n.W8)(yr)*Dr;return[Dr*(0,n.g$)(yr)/Nr,(0,n.g$)(Cr)/Nr]}rn.invert=(0,Mr.g)(function(yr){return 2*(0,n.MQ)(yr)});function Ur(){return(0,De.c)(rn).scale(250).clipAngle(142)}function pn(yr,Cr){return[(0,n.Yz)((0,n.a6)((n.or+Cr)/2)),-yr]}pn.invert=function(yr,Cr){return[-Cr,2*(0,n.MQ)((0,n.oN)(yr))-n.or]};function yn(){var yr=be(pn),Cr=yr.center,Dr=yr.rotate;return yr.center=function(Nr){return arguments.length?Cr([-Nr[1],Nr[0]]):(Nr=Cr(),[Nr[1],-Nr[0]])},yr.rotate=function(Nr){return arguments.length?Dr([Nr[0],Nr[1],Nr.length>2?Nr[2]+90:90]):(Nr=Dr(),[Nr[0],Nr[1],Nr[2]-90])},Dr([0,0,90]).scale(159.155)}},27284:function(Q,U,t){t.d(U,{c:function(){return E}});var M=t(64528);function E(i,C){var T=i[0]*M.qw,v=i[1]*M.qw,d=C[0]*M.qw,r=C[1]*M.qw,e=(0,M.W8)(v),l=(0,M.g$)(v),n=(0,M.W8)(r),s=(0,M.g$)(r),o=e*(0,M.W8)(T),p=e*(0,M.g$)(T),b=n*(0,M.W8)(d),h=n*(0,M.g$)(d),_=2*(0,M.qR)((0,M._I)((0,M.SD)(r-v)+e*n*(0,M.SD)(d-T))),a=(0,M.g$)(_),c=_?function(f){var x=(0,M.g$)(f*=_)/a,k=(0,M.g$)(_-f)/a,y=k*o+x*b,A=k*p+x*h,L=k*l+x*s;return[(0,M.WE)(A,y)*M.oh,(0,M.WE)(L,(0,M._I)(y*y+A*A))*M.oh]}:function(){return[T*M.oh,v*M.oh]};return c.distance=_,c}},64528:function(Q,U,t){t.d(U,{Gg:function(){return M},Km:function(){return o},MQ:function(){return l},SD:function(){return y},W8:function(){return s},WE:function(){return n},Yz:function(){return b},_I:function(){return c},a2:function(){return e},a6:function(){return f},a8:function(){return E},g$:function(){return _},g3:function(){return h},kD:function(){return v},kq:function(){return a},mE:function(){return x},oN:function(){return p},oh:function(){return d},or:function(){return C},pi:function(){return i},qR:function(){return k},qw:function(){return r},wL:function(){return T}});var M=1e-6,E=1e-12,i=Math.PI,C=i/2,T=i/4,v=i*2,d=180/i,r=i/180,e=Math.abs,l=Math.atan,n=Math.atan2,s=Math.cos,o=Math.ceil,p=Math.exp,b=Math.log,h=Math.pow,_=Math.sin,a=Math.sign||function(A){return A>0?1:A<0?-1:0},c=Math.sqrt,f=Math.tan;function x(A){return A>1?0:A<-1?i:Math.acos(A)}function k(A){return A>1?C:A<-1?-C:Math.asin(A)}function y(A){return(A=_(A/2))*A}},70932:function(Q,U,t){t.d(U,{c:function(){return M}});function M(){}},73784:function(Q,U,t){var M=t(70932),E=1/0,i=E,C=-E,T=C,v={point:d,lineStart:M.c,lineEnd:M.c,polygonStart:M.c,polygonEnd:M.c,result:function(){var r=[[E,i],[C,T]];return C=T=-(i=E=1/0),r}};function d(r,e){r<E&&(E=r),r>C&&(C=r),e<i&&(i=e),e>T&&(T=e)}U.c=v},41860:function(Q,U,t){t.d(U,{c:function(){return E}});var M=t(64528);function E(i,C){return(0,M.a2)(i[0]-C[0])<M.Gg&&(0,M.a2)(i[1]-C[1])<M.Gg}},58196:function(Q,U,t){t.d(U,{c:function(){return v}});var M=t(88728),E=t(84220),i=t(64528),C=(0,M.c)();function T(d){return(0,i.a2)(d[0])<=i.pi?d[0]:(0,i.kq)(d[0])*(((0,i.a2)(d[0])+i.pi)%i.kD-i.pi)}function v(d,r){var e=T(r),l=r[1],n=(0,i.g$)(l),s=[(0,i.g$)(e),-(0,i.W8)(e),0],o=0,p=0;C.reset(),n===1?l=i.or+i.Gg:n===-1&&(l=-i.or-i.Gg);for(var b=0,h=d.length;b<h;++b)if(a=(_=d[b]).length)for(var _,a,c=_[a-1],f=T(c),x=c[1]/2+i.wL,k=(0,i.g$)(x),y=(0,i.W8)(x),A=0;A<a;++A,f=u,k=S,y=w,c=L){var L=_[A],u=T(L),m=L[1]/2+i.wL,S=(0,i.g$)(m),w=(0,i.W8)(m),I=u-f,O=I>=0?1:-1,D=O*I,P=D>i.pi,F=k*S;if(C.add((0,i.WE)(F*O*(0,i.g$)(D),y*w+F*(0,i.W8)(D))),o+=P?I+O*i.kD:I,P^f>=e^u>=e){var R=(0,E.CW)((0,E.ux)(c),(0,E.ux)(L));(0,E.cJ)(R);var B=(0,E.CW)(s,R);(0,E.cJ)(B);var N=(P^I>=0?-1:1)*(0,i.qR)(B[2]);(l>N||l===N&&(R[0]||R[1]))&&(p+=P^I>=0?1:-1)}}return(o<-i.Gg||o<i.Gg&&C<-i.Gg)^p&1}},62280:function(Q,U,t){t.d(U,{a:function(){return E},g:function(){return i}});var M=t(64528);function E(C){return function(T,v){var d=(0,M.W8)(T),r=(0,M.W8)(v),e=C(d*r);return[e*r*(0,M.g$)(T),e*(0,M.g$)(v)]}}function i(C){return function(T,v){var d=(0,M._I)(T*T+v*v),r=C(d),e=(0,M.g$)(r),l=(0,M.W8)(r);return[(0,M.WE)(T*e,d*l),(0,M.qR)(d&&v*e/d)]}}},54724:function(Q,U,t){t.d(U,{c:function(){return T},y:function(){return C}});var M=t(64528),E=t(62280),i=t(87952),C=(0,E.a)(function(v){return(0,M._I)(2/(1+v))});C.invert=(0,E.g)(function(v){return 2*(0,M.qR)(v/2)});function T(){return(0,i.c)(C).scale(124.75).clipAngle(179.999)}},69020:function(Q,U,t){t.d(U,{O:function(){return C},c:function(){return T}});var M=t(64528),E=t(62280),i=t(87952),C=(0,E.a)(function(v){return(v=(0,M.mE)(v))&&v/(0,M.g$)(v)});C.invert=(0,E.g)(function(v){return v});function T(){return(0,i.c)(C).scale(79.4188).clipAngle(179.999)}},69604:function(Q,U,t){t.d(U,{c:function(){return i},u:function(){return E}});var M=t(87952);function E(C,T){return[C,T]}E.invert=E;function i(){return(0,M.c)(E).scale(152.63)}},86420:function(Q,U,t){t.d(U,{OW:function(){return d},QX:function(){return C},Qx:function(){return v},UV:function(){return T}});var M=t(16016),E=t(73784);function i(r,e,l){var n=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),n!=null&&r.clipExtent(null),(0,M.c)(l,r.stream(E.c)),e(E.c.result()),n!=null&&r.clipExtent(n),r}function C(r,e,l){return i(r,function(n){var s=e[1][0]-e[0][0],o=e[1][1]-e[0][1],p=Math.min(s/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),b=+e[0][0]+(s-p*(n[1][0]+n[0][0]))/2,h=+e[0][1]+(o-p*(n[1][1]+n[0][1]))/2;r.scale(150*p).translate([b,h])},l)}function T(r,e,l){return C(r,[[0,0],e],l)}function v(r,e,l){return i(r,function(n){var s=+e,o=s/(n[1][0]-n[0][0]),p=(s-o*(n[1][0]+n[0][0]))/2,b=-o*n[0][1];r.scale(150*o).translate([p,b])},l)}function d(r,e,l){return i(r,function(n){var s=+e,o=s/(n[1][1]-n[0][1]),p=-o*n[0][0],b=(s-o*(n[1][1]+n[0][1]))/2;r.scale(150*o).translate([p,b])},l)}},53285:function(Q,U,t){t.d(U,{Y:function(){return C},c:function(){return T}});var M=t(64528),E=t(62280),i=t(87952);function C(v,d){var r=(0,M.W8)(d),e=(0,M.W8)(v)*r;return[r*(0,M.g$)(v)/e,(0,M.g$)(d)/e]}C.invert=(0,E.g)(M.MQ);function T(){return(0,i.c)(C).scale(144.049).clipAngle(60)}},87952:function(Q,U,t){t.d(U,{c:function(){return f},U:function(){return x}});var M=t(78284),E=t(2728),i=t(21676),C=t(68120),T=t(7376),v=t(64528),d=t(92992),r=t(15196),e=t(86420),l=t(84220),n=16,s=(0,v.W8)(30*v.qw);function o(k,y){return+y?b(k,y):p(k)}function p(k){return(0,r.s)({point:function(y,A){y=k(y,A),this.stream.point(y[0],y[1])}})}function b(k,y){function A(L,u,m,S,w,I,O,D,P,F,R,B,N,G){var X=O-L,J=D-u,it=X*X+J*J;if(it>4*y&&N--){var nt=S+F,q=w+R,Z=I+B,$=(0,v._I)(nt*nt+q*q+Z*Z),V=(0,v.qR)(Z/=$),rt=(0,v.a2)((0,v.a2)(Z)-1)<v.Gg||(0,v.a2)(m-P)<v.Gg?(m+P)/2:(0,v.WE)(q,nt),ot=k(rt,V),H=ot[0],Y=ot[1],at=H-L,et=Y-u,ct=J*at-X*et;(ct*ct/it>y||(0,v.a2)((X*at+J*et)/it-.5)>.3||S*F+w*R+I*B<s)&&(A(L,u,m,S,w,I,H,Y,rt,nt/=$,q/=$,Z,N,G),G.point(H,Y),A(H,Y,rt,nt,q,Z,O,D,P,F,R,B,N,G))}}return function(L){var u,m,S,w,I,O,D,P,F,R,B,N,G={point:X,lineStart:J,lineEnd:nt,polygonStart:function(){L.polygonStart(),G.lineStart=q},polygonEnd:function(){L.polygonEnd(),G.lineStart=J}};function X(V,rt){V=k(V,rt),L.point(V[0],V[1])}function J(){P=NaN,G.point=it,L.lineStart()}function it(V,rt){var ot=(0,l.ux)([V,rt]),H=k(V,rt);A(P,F,D,R,B,N,P=H[0],F=H[1],D=V,R=ot[0],B=ot[1],N=ot[2],n,L),L.point(P,F)}function nt(){G.point=X,L.lineEnd()}function q(){J(),G.point=Z,G.lineEnd=$}function Z(V,rt){it(u=V,rt),m=P,S=F,w=R,I=B,O=N,G.point=it}function $(){A(P,F,D,R,B,N,m,S,u,w,I,O,n,L),G.lineEnd=nt,nt()}return G}}var h=(0,r.s)({point:function(k,y){this.stream.point(k*v.qw,y*v.qw)}});function _(k){return(0,r.s)({point:function(y,A){var L=k(y,A);return this.stream.point(L[0],L[1])}})}function a(k,y,A,L,u){function m(S,w){return S*=L,w*=u,[y+k*S,A-k*w]}return m.invert=function(S,w){return[(S-y)/k*L,(A-w)/k*u]},m}function c(k,y,A,L,u,m){var S=(0,v.W8)(m),w=(0,v.g$)(m),I=S*k,O=w*k,D=S/k,P=w/k,F=(w*A-S*y)/k,R=(w*y+S*A)/k;function B(N,G){return N*=L,G*=u,[I*N-O*G+y,A-O*N-I*G]}return B.invert=function(N,G){return[L*(D*N-P*G+F),u*(R-P*N-D*G)]},B}function f(k){return x(function(){return k})()}function x(k){var y,A=150,L=480,u=250,m=0,S=0,w=0,I=0,O=0,D,P=0,F=1,R=1,B=null,N=M.c,G=null,X,J,it,nt=T.c,q=.5,Z,$,V,rt,ot;function H(ct){return V(ct[0]*v.qw,ct[1]*v.qw)}function Y(ct){return ct=V.invert(ct[0],ct[1]),ct&&[ct[0]*v.oh,ct[1]*v.oh]}H.stream=function(ct){return rt&&ot===ct?rt:rt=h(_(D)(N(Z(nt(ot=ct)))))},H.preclip=function(ct){return arguments.length?(N=ct,B=void 0,et()):N},H.postclip=function(ct){return arguments.length?(nt=ct,G=X=J=it=null,et()):nt},H.clipAngle=function(ct){return arguments.length?(N=+ct?(0,E.c)(B=ct*v.qw):(B=null,M.c),et()):B*v.oh},H.clipExtent=function(ct){return arguments.length?(nt=ct==null?(G=X=J=it=null,T.c):(0,i.c)(G=+ct[0][0],X=+ct[0][1],J=+ct[1][0],it=+ct[1][1]),et()):G==null?null:[[G,X],[J,it]]},H.scale=function(ct){return arguments.length?(A=+ct,at()):A},H.translate=function(ct){return arguments.length?(L=+ct[0],u=+ct[1],at()):[L,u]},H.center=function(ct){return arguments.length?(m=ct[0]%360*v.qw,S=ct[1]%360*v.qw,at()):[m*v.oh,S*v.oh]},H.rotate=function(ct){return arguments.length?(w=ct[0]%360*v.qw,I=ct[1]%360*v.qw,O=ct.length>2?ct[2]%360*v.qw:0,at()):[w*v.oh,I*v.oh,O*v.oh]},H.angle=function(ct){return arguments.length?(P=ct%360*v.qw,at()):P*v.oh},H.reflectX=function(ct){return arguments.length?(F=ct?-1:1,at()):F<0},H.reflectY=function(ct){return arguments.length?(R=ct?-1:1,at()):R<0},H.precision=function(ct){return arguments.length?(Z=o($,q=ct*ct),et()):(0,v._I)(q)},H.fitExtent=function(ct,ft){return(0,e.QX)(H,ct,ft)},H.fitSize=function(ct,ft){return(0,e.UV)(H,ct,ft)},H.fitWidth=function(ct,ft){return(0,e.Qx)(H,ct,ft)},H.fitHeight=function(ct,ft){return(0,e.OW)(H,ct,ft)};function at(){var ct=c(A,0,0,F,R,P).apply(null,y(m,S)),ft=(P?c:a)(A,L-ct[0],u-ct[1],F,R,P);return D=(0,d.O)(w,I,O),$=(0,C.c)(y,ft),V=(0,C.c)(D,$),Z=o($,q),et()}function et(){return rt=ot=null,H}return function(){return y=k.apply(this,arguments),H.invert=y.invert&&Y,at()}}},47984:function(Q,U,t){t.d(U,{c:function(){return C},g:function(){return i}});var M=t(87952),E=t(64528);function i(T,v){var d=v*v,r=d*d;return[T*(.8707-.131979*d+r*(-.013791+r*(.003971*d-.001529*r))),v*(1.007226+d*(.015085+r*(-.044475+.028874*d-.005916*r)))]}i.invert=function(T,v){var d=v,r=25,e;do{var l=d*d,n=l*l;d-=e=(d*(1.007226+l*(.015085+n*(-.044475+.028874*l-.005916*n)))-v)/(1.007226+l*(.045255+n*(-.311325+.259866*l-.06507600000000001*n)))}while((0,E.a2)(e)>E.Gg&&--r>0);return[T/(.8707+(l=d*d)*(-.131979+l*(-.013791+l*l*l*(.003971-.001529*l)))),d]};function C(){return(0,M.c)(i).scale(175.295)}},4888:function(Q,U,t){t.d(U,{c:function(){return T},t:function(){return C}});var M=t(64528),E=t(62280),i=t(87952);function C(v,d){return[(0,M.W8)(d)*(0,M.g$)(v),(0,M.g$)(d)]}C.invert=(0,E.g)(M.qR);function T(){return(0,i.c)(C).scale(249.5).clipAngle(90+M.Gg)}},92992:function(Q,U,t){t.d(U,{O:function(){return C},c:function(){return r}});var M=t(68120),E=t(64528);function i(e,l){return[(0,E.a2)(e)>E.pi?e+Math.round(-e/E.kD)*E.kD:e,l]}i.invert=i;function C(e,l,n){return(e%=E.kD)?l||n?(0,M.c)(v(e),d(l,n)):v(e):l||n?d(l,n):i}function T(e){return function(l,n){return l+=e,[l>E.pi?l-E.kD:l<-E.pi?l+E.kD:l,n]}}function v(e){var l=T(e);return l.invert=T(-e),l}function d(e,l){var n=(0,E.W8)(e),s=(0,E.g$)(e),o=(0,E.W8)(l),p=(0,E.g$)(l);function b(h,_){var a=(0,E.W8)(_),c=(0,E.W8)(h)*a,f=(0,E.g$)(h)*a,x=(0,E.g$)(_),k=x*n+c*s;return[(0,E.WE)(f*o-k*p,c*n-x*s),(0,E.qR)(k*o+f*p)]}return b.invert=function(h,_){var a=(0,E.W8)(_),c=(0,E.W8)(h)*a,f=(0,E.g$)(h)*a,x=(0,E.g$)(_),k=x*o-f*p;return[(0,E.WE)(f*o+x*p,c*n+k*s),(0,E.qR)(k*n-c*s)]},b}function r(e){e=C(e[0]*E.qw,e[1]*E.qw,e.length>2?e[2]*E.qw:0);function l(n){return n=e(n[0]*E.qw,n[1]*E.qw),n[0]*=E.oh,n[1]*=E.oh,n}return l.invert=function(n){return n=e.invert(n[0]*E.qw,n[1]*E.qw),n[0]*=E.oh,n[1]*=E.oh,n},l}},16016:function(Q,U,t){t.d(U,{c:function(){return v}});function M(d,r){d&&i.hasOwnProperty(d.type)&&i[d.type](d,r)}var E={Feature:function(d,r){M(d.geometry,r)},FeatureCollection:function(d,r){for(var e=d.features,l=-1,n=e.length;++l<n;)M(e[l].geometry,r)}},i={Sphere:function(d,r){r.sphere()},Point:function(d,r){d=d.coordinates,r.point(d[0],d[1],d[2])},MultiPoint:function(d,r){for(var e=d.coordinates,l=-1,n=e.length;++l<n;)d=e[l],r.point(d[0],d[1],d[2])},LineString:function(d,r){C(d.coordinates,r,0)},MultiLineString:function(d,r){for(var e=d.coordinates,l=-1,n=e.length;++l<n;)C(e[l],r,0)},Polygon:function(d,r){T(d.coordinates,r)},MultiPolygon:function(d,r){for(var e=d.coordinates,l=-1,n=e.length;++l<n;)T(e[l],r)},GeometryCollection:function(d,r){for(var e=d.geometries,l=-1,n=e.length;++l<n;)M(e[l],r)}};function C(d,r,e){var l=-1,n=d.length-e,s;for(r.lineStart();++l<n;)s=d[l],r.point(s[0],s[1],s[2]);r.lineEnd()}function T(d,r){var e=-1,l=d.length;for(r.polygonStart();++e<l;)C(d[e],r,1);r.polygonEnd()}function v(d,r){d&&E.hasOwnProperty(d.type)?E[d.type](d,r):M(d,r)}},15196:function(Q,U,t){t.d(U,{c:function(){return M},s:function(){return E}});function M(C){return{stream:E(C)}}function E(C){return function(T){var v=new i;for(var d in C)v[d]=C[d];return v.stream=T,v}}function i(){}i.prototype={constructor:i,point:function(C,T){this.stream.point(C,T)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(Q,U,t){t.r(U),t.d(U,{cluster:function(){return r},hierarchy:function(){return k},pack:function(){return Y},packEnclose:function(){return I},packSiblings:function(){return Z},partition:function(){return xt},stratify:function(){return Ot},tree:function(){return oe},treemap:function(){return Ft},treemapBinary:function(){return $t},treemapDice:function(){return yt},treemapResquarify:function(){return Nt},treemapSlice:function(){return ce},treemapSliceDice:function(){return Vt},treemapSquarify:function(){return Tt}});function M(Mt,Et){return Mt.parent===Et.parent?1:2}function E(Mt){return Mt.reduce(i,0)/Mt.length}function i(Mt,Et){return Mt+Et.x}function C(Mt){return 1+Mt.reduce(T,0)}function T(Mt,Et){return Math.max(Mt,Et.y)}function v(Mt){for(var Et;Et=Mt.children;)Mt=Et[0];return Mt}function d(Mt){for(var Et;Et=Mt.children;)Mt=Et[Et.length-1];return Mt}function r(){var Mt=M,Et=1,Dt=1,dt=!1;function ht(bt){var Pt,Gt=0;bt.eachAfter(function(ge){var _e=ge.children;_e?(ge.x=E(_e),ge.y=C(_e)):(ge.x=Pt?Gt+=Mt(ge,Pt):0,ge.y=0,Pt=ge)});var te=v(bt),ne=d(bt),je=te.x-Mt(te,ne)/2,Ne=ne.x+Mt(ne,te)/2;return bt.eachAfter(dt?function(ge){ge.x=(ge.x-bt.x)*Et,ge.y=(bt.y-ge.y)*Dt}:function(ge){ge.x=(ge.x-je)/(Ne-je)*Et,ge.y=(1-(bt.y?ge.y/bt.y:1))*Dt})}return ht.separation=function(bt){return arguments.length?(Mt=bt,ht):Mt},ht.size=function(bt){return arguments.length?(dt=!1,Et=+bt[0],Dt=+bt[1],ht):dt?null:[Et,Dt]},ht.nodeSize=function(bt){return arguments.length?(dt=!0,Et=+bt[0],Dt=+bt[1],ht):dt?[Et,Dt]:null},ht}function e(Mt){var Et=0,Dt=Mt.children,dt=Dt&&Dt.length;if(!dt)Et=1;else for(;--dt>=0;)Et+=Dt[dt].value;Mt.value=Et}function l(){return this.eachAfter(e)}function n(Mt){var Et=this,Dt,dt=[Et],ht,bt,Pt;do for(Dt=dt.reverse(),dt=[];Et=Dt.pop();)if(Mt(Et),ht=Et.children,ht)for(bt=0,Pt=ht.length;bt<Pt;++bt)dt.push(ht[bt]);while(dt.length);return this}function s(Mt){for(var Et=this,Dt=[Et],dt,ht;Et=Dt.pop();)if(Mt(Et),dt=Et.children,dt)for(ht=dt.length-1;ht>=0;--ht)Dt.push(dt[ht]);return this}function o(Mt){for(var Et=this,Dt=[Et],dt=[],ht,bt,Pt;Et=Dt.pop();)if(dt.push(Et),ht=Et.children,ht)for(bt=0,Pt=ht.length;bt<Pt;++bt)Dt.push(ht[bt]);for(;Et=dt.pop();)Mt(Et);return this}function p(Mt){return this.eachAfter(function(Et){for(var Dt=+Mt(Et.data)||0,dt=Et.children,ht=dt&&dt.length;--ht>=0;)Dt+=dt[ht].value;Et.value=Dt})}function b(Mt){return this.eachBefore(function(Et){Et.children&&Et.children.sort(Mt)})}function h(Mt){for(var Et=this,Dt=_(Et,Mt),dt=[Et];Et!==Dt;)Et=Et.parent,dt.push(Et);for(var ht=dt.length;Mt!==Dt;)dt.splice(ht,0,Mt),Mt=Mt.parent;return dt}function _(Mt,Et){if(Mt===Et)return Mt;var Dt=Mt.ancestors(),dt=Et.ancestors(),ht=null;for(Mt=Dt.pop(),Et=dt.pop();Mt===Et;)ht=Mt,Mt=Dt.pop(),Et=dt.pop();return ht}function a(){for(var Mt=this,Et=[Mt];Mt=Mt.parent;)Et.push(Mt);return Et}function c(){var Mt=[];return this.each(function(Et){Mt.push(Et)}),Mt}function f(){var Mt=[];return this.eachBefore(function(Et){Et.children||Mt.push(Et)}),Mt}function x(){var Mt=this,Et=[];return Mt.each(function(Dt){Dt!==Mt&&Et.push({source:Dt.parent,target:Dt})}),Et}function k(Mt,Et){var Dt=new m(Mt),dt=+Mt.value&&(Dt.value=Mt.value),ht,bt=[Dt],Pt,Gt,te,ne;for(Et==null&&(Et=A);ht=bt.pop();)if(dt&&(ht.value=+ht.data.value),(Gt=Et(ht.data))&&(ne=Gt.length))for(ht.children=new Array(ne),te=ne-1;te>=0;--te)bt.push(Pt=ht.children[te]=new m(Gt[te])),Pt.parent=ht,Pt.depth=ht.depth+1;return Dt.eachBefore(u)}function y(){return k(this).eachBefore(L)}function A(Mt){return Mt.children}function L(Mt){Mt.data=Mt.data.data}function u(Mt){var Et=0;do Mt.height=Et;while((Mt=Mt.parent)&&Mt.height<++Et)}function m(Mt){this.data=Mt,this.depth=this.height=0,this.parent=null}m.prototype=k.prototype={constructor:m,count:l,each:n,eachAfter:o,eachBefore:s,sum:p,sort:b,path:h,ancestors:a,descendants:c,leaves:f,links:x,copy:y};var S=Array.prototype.slice;function w(Mt){for(var Et=Mt.length,Dt,dt;Et;)dt=Math.random()*Et--|0,Dt=Mt[Et],Mt[Et]=Mt[dt],Mt[dt]=Dt;return Mt}function I(Mt){for(var Et=0,Dt=(Mt=w(S.call(Mt))).length,dt=[],ht,bt;Et<Dt;)ht=Mt[Et],bt&&P(bt,ht)?++Et:(bt=R(dt=O(dt,ht)),Et=0);return bt}function O(Mt,Et){var Dt,dt;if(F(Et,Mt))return[Et];for(Dt=0;Dt<Mt.length;++Dt)if(D(Et,Mt[Dt])&&F(N(Mt[Dt],Et),Mt))return[Mt[Dt],Et];for(Dt=0;Dt<Mt.length-1;++Dt)for(dt=Dt+1;dt<Mt.length;++dt)if(D(N(Mt[Dt],Mt[dt]),Et)&&D(N(Mt[Dt],Et),Mt[dt])&&D(N(Mt[dt],Et),Mt[Dt])&&F(G(Mt[Dt],Mt[dt],Et),Mt))return[Mt[Dt],Mt[dt],Et];throw new Error}function D(Mt,Et){var Dt=Mt.r-Et.r,dt=Et.x-Mt.x,ht=Et.y-Mt.y;return Dt<0||Dt*Dt<dt*dt+ht*ht}function P(Mt,Et){var Dt=Mt.r-Et.r+1e-6,dt=Et.x-Mt.x,ht=Et.y-Mt.y;return Dt>0&&Dt*Dt>dt*dt+ht*ht}function F(Mt,Et){for(var Dt=0;Dt<Et.length;++Dt)if(!P(Mt,Et[Dt]))return!1;return!0}function R(Mt){switch(Mt.length){case 1:return B(Mt[0]);case 2:return N(Mt[0],Mt[1]);case 3:return G(Mt[0],Mt[1],Mt[2])}}function B(Mt){return{x:Mt.x,y:Mt.y,r:Mt.r}}function N(Mt,Et){var Dt=Mt.x,dt=Mt.y,ht=Mt.r,bt=Et.x,Pt=Et.y,Gt=Et.r,te=bt-Dt,ne=Pt-dt,je=Gt-ht,Ne=Math.sqrt(te*te+ne*ne);return{x:(Dt+bt+te/Ne*je)/2,y:(dt+Pt+ne/Ne*je)/2,r:(Ne+ht+Gt)/2}}function G(Mt,Et,Dt){var dt=Mt.x,ht=Mt.y,bt=Mt.r,Pt=Et.x,Gt=Et.y,te=Et.r,ne=Dt.x,je=Dt.y,Ne=Dt.r,ge=dt-Pt,_e=dt-ne,De=ht-Gt,hr=ht-je,fe=te-bt,Be=Ne-bt,He=dt*dt+ht*ht-bt*bt,pr=He-Pt*Pt-Gt*Gt+te*te,Ze=He-ne*ne-je*je+Ne*Ne,Xt=_e*De-ge*hr,ie=(De*Ze-hr*pr)/(Xt*2)-dt,pe=(hr*fe-De*Be)/Xt,ke=(_e*pr-ge*Ze)/(Xt*2)-ht,Ce=(ge*Be-_e*fe)/Xt,Fe=pe*pe+Ce*Ce-1,Re=2*(bt+ie*pe+ke*Ce),be=ie*ie+ke*ke-bt*bt,Ge=-(Fe?(Re+Math.sqrt(Re*Re-4*Fe*be))/(2*Fe):be/Re);return{x:dt+ie+pe*Ge,y:ht+ke+Ce*Ge,r:Ge}}function X(Mt,Et,Dt){var dt=Mt.x-Et.x,ht,bt,Pt=Mt.y-Et.y,Gt,te,ne=dt*dt+Pt*Pt;ne?(bt=Et.r+Dt.r,bt*=bt,te=Mt.r+Dt.r,te*=te,bt>te?(ht=(ne+te-bt)/(2*ne),Gt=Math.sqrt(Math.max(0,te/ne-ht*ht)),Dt.x=Mt.x-ht*dt-Gt*Pt,Dt.y=Mt.y-ht*Pt+Gt*dt):(ht=(ne+bt-te)/(2*ne),Gt=Math.sqrt(Math.max(0,bt/ne-ht*ht)),Dt.x=Et.x+ht*dt-Gt*Pt,Dt.y=Et.y+ht*Pt+Gt*dt)):(Dt.x=Et.x+Dt.r,Dt.y=Et.y)}function J(Mt,Et){var Dt=Mt.r+Et.r-1e-6,dt=Et.x-Mt.x,ht=Et.y-Mt.y;return Dt>0&&Dt*Dt>dt*dt+ht*ht}function it(Mt){var Et=Mt._,Dt=Mt.next._,dt=Et.r+Dt.r,ht=(Et.x*Dt.r+Dt.x*Et.r)/dt,bt=(Et.y*Dt.r+Dt.y*Et.r)/dt;return ht*ht+bt*bt}function nt(Mt){this._=Mt,this.next=null,this.previous=null}function q(Mt){if(!(ht=Mt.length))return 0;var Et,Dt,dt,ht,bt,Pt,Gt,te,ne,je,Ne;if(Et=Mt[0],Et.x=0,Et.y=0,!(ht>1))return Et.r;if(Dt=Mt[1],Et.x=-Dt.r,Dt.x=Et.r,Dt.y=0,!(ht>2))return Et.r+Dt.r;X(Dt,Et,dt=Mt[2]),Et=new nt(Et),Dt=new nt(Dt),dt=new nt(dt),Et.next=dt.previous=Dt,Dt.next=Et.previous=dt,dt.next=Dt.previous=Et;t:for(Gt=3;Gt<ht;++Gt){X(Et._,Dt._,dt=Mt[Gt]),dt=new nt(dt),te=Dt.next,ne=Et.previous,je=Dt._.r,Ne=Et._.r;do if(je<=Ne){if(J(te._,dt._)){Dt=te,Et.next=Dt,Dt.previous=Et,--Gt;continue t}je+=te._.r,te=te.next}else{if(J(ne._,dt._)){Et=ne,Et.next=Dt,Dt.previous=Et,--Gt;continue t}Ne+=ne._.r,ne=ne.previous}while(te!==ne.next);for(dt.previous=Et,dt.next=Dt,Et.next=Dt.previous=Dt=dt,bt=it(Et);(dt=dt.next)!==Dt;)(Pt=it(dt))<bt&&(Et=dt,bt=Pt);Dt=Et.next}for(Et=[Dt._],dt=Dt;(dt=dt.next)!==Dt;)Et.push(dt._);for(dt=I(Et),Gt=0;Gt<ht;++Gt)Et=Mt[Gt],Et.x-=dt.x,Et.y-=dt.y;return dt.r}function Z(Mt){return q(Mt),Mt}function $(Mt){return Mt==null?null:V(Mt)}function V(Mt){if(typeof Mt!="function")throw new Error;return Mt}function rt(){return 0}function ot(Mt){return function(){return Mt}}function H(Mt){return Math.sqrt(Mt.value)}function Y(){var Mt=null,Et=1,Dt=1,dt=rt;function ht(bt){return bt.x=Et/2,bt.y=Dt/2,Mt?bt.eachBefore(at(Mt)).eachAfter(et(dt,.5)).eachBefore(ct(1)):bt.eachBefore(at(H)).eachAfter(et(rt,1)).eachAfter(et(dt,bt.r/Math.min(Et,Dt))).eachBefore(ct(Math.min(Et,Dt)/(2*bt.r))),bt}return ht.radius=function(bt){return arguments.length?(Mt=$(bt),ht):Mt},ht.size=function(bt){return arguments.length?(Et=+bt[0],Dt=+bt[1],ht):[Et,Dt]},ht.padding=function(bt){return arguments.length?(dt=typeof bt=="function"?bt:ot(+bt),ht):dt},ht}function at(Mt){return function(Et){Et.children||(Et.r=Math.max(0,+Mt(Et)||0))}}function et(Mt,Et){return function(Dt){if(dt=Dt.children){var dt,ht,bt=dt.length,Pt=Mt(Dt)*Et||0,Gt;if(Pt)for(ht=0;ht<bt;++ht)dt[ht].r+=Pt;if(Gt=q(dt),Pt)for(ht=0;ht<bt;++ht)dt[ht].r-=Pt;Dt.r=Gt+Pt}}}function ct(Mt){return function(Et){var Dt=Et.parent;Et.r*=Mt,Dt&&(Et.x=Dt.x+Mt*Et.x,Et.y=Dt.y+Mt*Et.y)}}function ft(Mt){Mt.x0=Math.round(Mt.x0),Mt.y0=Math.round(Mt.y0),Mt.x1=Math.round(Mt.x1),Mt.y1=Math.round(Mt.y1)}function yt(Mt,Et,Dt,dt,ht){for(var bt=Mt.children,Pt,Gt=-1,te=bt.length,ne=Mt.value&&(dt-Et)/Mt.value;++Gt<te;)Pt=bt[Gt],Pt.y0=Dt,Pt.y1=ht,Pt.x0=Et,Pt.x1=Et+=Pt.value*ne}function xt(){var Mt=1,Et=1,Dt=0,dt=!1;function ht(Pt){var Gt=Pt.height+1;return Pt.x0=Pt.y0=Dt,Pt.x1=Mt,Pt.y1=Et/Gt,Pt.eachBefore(bt(Et,Gt)),dt&&Pt.eachBefore(ft),Pt}function bt(Pt,Gt){return function(te){te.children&&yt(te,te.x0,Pt*(te.depth+1)/Gt,te.x1,Pt*(te.depth+2)/Gt);var ne=te.x0,je=te.y0,Ne=te.x1-Dt,ge=te.y1-Dt;Ne<ne&&(ne=Ne=(ne+Ne)/2),ge<je&&(je=ge=(je+ge)/2),te.x0=ne,te.y0=je,te.x1=Ne,te.y1=ge}}return ht.round=function(Pt){return arguments.length?(dt=!!Pt,ht):dt},ht.size=function(Pt){return arguments.length?(Mt=+Pt[0],Et=+Pt[1],ht):[Mt,Et]},ht.padding=function(Pt){return arguments.length?(Dt=+Pt,ht):Dt},ht}var Ct="$",gt={depth:-1},mt={};function vt(Mt){return Mt.id}function At(Mt){return Mt.parentId}function Ot(){var Mt=vt,Et=At;function Dt(dt){var ht,bt,Pt=dt.length,Gt,te,ne,je=new Array(Pt),Ne,ge,_e={};for(bt=0;bt<Pt;++bt)ht=dt[bt],ne=je[bt]=new m(ht),(Ne=Mt(ht,bt,dt))!=null&&(Ne+="")&&(ge=Ct+(ne.id=Ne),_e[ge]=ge in _e?mt:ne);for(bt=0;bt<Pt;++bt)if(ne=je[bt],Ne=Et(dt[bt],bt,dt),Ne==null||!(Ne+="")){if(Gt)throw new Error("multiple roots");Gt=ne}else{if(te=_e[Ct+Ne],!te)throw new Error("missing: "+Ne);if(te===mt)throw new Error("ambiguous: "+Ne);te.children?te.children.push(ne):te.children=[ne],ne.parent=te}if(!Gt)throw new Error("no root");if(Gt.parent=gt,Gt.eachBefore(function(De){De.depth=De.parent.depth+1,--Pt}).eachBefore(u),Gt.parent=null,Pt>0)throw new Error("cycle");return Gt}return Dt.id=function(dt){return arguments.length?(Mt=V(dt),Dt):Mt},Dt.parentId=function(dt){return arguments.length?(Et=V(dt),Dt):Et},Dt}function It(Mt,Et){return Mt.parent===Et.parent?1:2}function St(Mt){var Et=Mt.children;return Et?Et[0]:Mt.t}function Bt(Mt){var Et=Mt.children;return Et?Et[Et.length-1]:Mt.t}function re(Mt,Et,Dt){var dt=Dt/(Et.i-Mt.i);Et.c-=dt,Et.s+=Dt,Mt.c+=dt,Et.z+=Dt,Et.m+=Dt}function Yt(Mt){for(var Et=0,Dt=0,dt=Mt.children,ht=dt.length,bt;--ht>=0;)bt=dt[ht],bt.z+=Et,bt.m+=Et,Et+=bt.s+(Dt+=bt.c)}function he(Mt,Et,Dt){return Mt.a.parent===Et.parent?Mt.a:Dt}function Zt(Mt,Et){this._=Mt,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Et}Zt.prototype=Object.create(m.prototype);function ae(Mt){for(var Et=new Zt(Mt,0),Dt,dt=[Et],ht,bt,Pt,Gt;Dt=dt.pop();)if(bt=Dt._.children)for(Dt.children=new Array(Gt=bt.length),Pt=Gt-1;Pt>=0;--Pt)dt.push(ht=Dt.children[Pt]=new Zt(bt[Pt],Pt)),ht.parent=Dt;return(Et.parent=new Zt(null,0)).children=[Et],Et}function oe(){var Mt=It,Et=1,Dt=1,dt=null;function ht(ne){var je=ae(ne);if(je.eachAfter(bt),je.parent.m=-je.z,je.eachBefore(Pt),dt)ne.eachBefore(te);else{var Ne=ne,ge=ne,_e=ne;ne.eachBefore(function(He){He.x<Ne.x&&(Ne=He),He.x>ge.x&&(ge=He),He.depth>_e.depth&&(_e=He)});var De=Ne===ge?1:Mt(Ne,ge)/2,hr=De-Ne.x,fe=Et/(ge.x+De+hr),Be=Dt/(_e.depth||1);ne.eachBefore(function(He){He.x=(He.x+hr)*fe,He.y=He.depth*Be})}return ne}function bt(ne){var je=ne.children,Ne=ne.parent.children,ge=ne.i?Ne[ne.i-1]:null;if(je){Yt(ne);var _e=(je[0].z+je[je.length-1].z)/2;ge?(ne.z=ge.z+Mt(ne._,ge._),ne.m=ne.z-_e):ne.z=_e}else ge&&(ne.z=ge.z+Mt(ne._,ge._));ne.parent.A=Gt(ne,ge,ne.parent.A||Ne[0])}function Pt(ne){ne._.x=ne.z+ne.parent.m,ne.m+=ne.parent.m}function Gt(ne,je,Ne){if(je){for(var ge=ne,_e=ne,De=je,hr=ge.parent.children[0],fe=ge.m,Be=_e.m,He=De.m,pr=hr.m,Ze;De=Bt(De),ge=St(ge),De&&ge;)hr=St(hr),_e=Bt(_e),_e.a=ne,Ze=De.z+He-ge.z-fe+Mt(De._,ge._),Ze>0&&(re(he(De,ne,Ne),ne,Ze),fe+=Ze,Be+=Ze),He+=De.m,fe+=ge.m,pr+=hr.m,Be+=_e.m;De&&!Bt(_e)&&(_e.t=De,_e.m+=He-Be),ge&&!St(hr)&&(hr.t=ge,hr.m+=fe-pr,Ne=ne)}return Ne}function te(ne){ne.x*=Et,ne.y=ne.depth*Dt}return ht.separation=function(ne){return arguments.length?(Mt=ne,ht):Mt},ht.size=function(ne){return arguments.length?(dt=!1,Et=+ne[0],Dt=+ne[1],ht):dt?null:[Et,Dt]},ht.nodeSize=function(ne){return arguments.length?(dt=!0,Et=+ne[0],Dt=+ne[1],ht):dt?[Et,Dt]:null},ht}function ce(Mt,Et,Dt,dt,ht){for(var bt=Mt.children,Pt,Gt=-1,te=bt.length,ne=Mt.value&&(ht-Dt)/Mt.value;++Gt<te;)Pt=bt[Gt],Pt.x0=Et,Pt.x1=dt,Pt.y0=Dt,Pt.y1=Dt+=Pt.value*ne}var ue=(1+Math.sqrt(5))/2;function ye(Mt,Et,Dt,dt,ht,bt){for(var Pt=[],Gt=Et.children,te,ne,je=0,Ne=0,ge=Gt.length,_e,De,hr=Et.value,fe,Be,He,pr,Ze,Xt,ie;je<ge;){_e=ht-Dt,De=bt-dt;do fe=Gt[Ne++].value;while(!fe&&Ne<ge);for(Be=He=fe,Xt=Math.max(De/_e,_e/De)/(hr*Mt),ie=fe*fe*Xt,Ze=Math.max(He/ie,ie/Be);Ne<ge;++Ne){if(fe+=ne=Gt[Ne].value,ne<Be&&(Be=ne),ne>He&&(He=ne),ie=fe*fe*Xt,pr=Math.max(He/ie,ie/Be),pr>Ze){fe-=ne;break}Ze=pr}Pt.push(te={value:fe,dice:_e<De,children:Gt.slice(je,Ne)}),te.dice?yt(te,Dt,dt,ht,hr?dt+=De*fe/hr:bt):ce(te,Dt,dt,hr?Dt+=_e*fe/hr:ht,bt),hr-=fe,je=Ne}return Pt}var Tt=function Mt(Et){function Dt(dt,ht,bt,Pt,Gt){ye(Et,dt,ht,bt,Pt,Gt)}return Dt.ratio=function(dt){return Mt((dt=+dt)>1?dt:1)},Dt}(ue);function Ft(){var Mt=Tt,Et=!1,Dt=1,dt=1,ht=[0],bt=rt,Pt=rt,Gt=rt,te=rt,ne=rt;function je(ge){return ge.x0=ge.y0=0,ge.x1=Dt,ge.y1=dt,ge.eachBefore(Ne),ht=[0],Et&&ge.eachBefore(ft),ge}function Ne(ge){var _e=ht[ge.depth],De=ge.x0+_e,hr=ge.y0+_e,fe=ge.x1-_e,Be=ge.y1-_e;fe<De&&(De=fe=(De+fe)/2),Be<hr&&(hr=Be=(hr+Be)/2),ge.x0=De,ge.y0=hr,ge.x1=fe,ge.y1=Be,ge.children&&(_e=ht[ge.depth+1]=bt(ge)/2,De+=ne(ge)-_e,hr+=Pt(ge)-_e,fe-=Gt(ge)-_e,Be-=te(ge)-_e,fe<De&&(De=fe=(De+fe)/2),Be<hr&&(hr=Be=(hr+Be)/2),Mt(ge,De,hr,fe,Be))}return je.round=function(ge){return arguments.length?(Et=!!ge,je):Et},je.size=function(ge){return arguments.length?(Dt=+ge[0],dt=+ge[1],je):[Dt,dt]},je.tile=function(ge){return arguments.length?(Mt=V(ge),je):Mt},je.padding=function(ge){return arguments.length?je.paddingInner(ge).paddingOuter(ge):je.paddingInner()},je.paddingInner=function(ge){return arguments.length?(bt=typeof ge=="function"?ge:ot(+ge),je):bt},je.paddingOuter=function(ge){return arguments.length?je.paddingTop(ge).paddingRight(ge).paddingBottom(ge).paddingLeft(ge):je.paddingTop()},je.paddingTop=function(ge){return arguments.length?(Pt=typeof ge=="function"?ge:ot(+ge),je):Pt},je.paddingRight=function(ge){return arguments.length?(Gt=typeof ge=="function"?ge:ot(+ge),je):Gt},je.paddingBottom=function(ge){return arguments.length?(te=typeof ge=="function"?ge:ot(+ge),je):te},je.paddingLeft=function(ge){return arguments.length?(ne=typeof ge=="function"?ge:ot(+ge),je):ne},je}function $t(Mt,Et,Dt,dt,ht){var bt=Mt.children,Pt,Gt=bt.length,te,ne=new Array(Gt+1);for(ne[0]=te=Pt=0;Pt<Gt;++Pt)ne[Pt+1]=te+=bt[Pt].value;je(0,Gt,Mt.value,Et,Dt,dt,ht);function je(Ne,ge,_e,De,hr,fe,Be){if(Ne>=ge-1){var He=bt[Ne];He.x0=De,He.y0=hr,He.x1=fe,He.y1=Be;return}for(var pr=ne[Ne],Ze=_e/2+pr,Xt=Ne+1,ie=ge-1;Xt<ie;){var pe=Xt+ie>>>1;ne[pe]<Ze?Xt=pe+1:ie=pe}Ze-ne[Xt-1]<ne[Xt]-Ze&&Ne+1<Xt&&--Xt;var ke=ne[Xt]-pr,Ce=_e-ke;if(fe-De>Be-hr){var Fe=(De*Ce+fe*ke)/_e;je(Ne,Xt,ke,De,hr,Fe,Be),je(Xt,ge,Ce,Fe,hr,fe,Be)}else{var Re=(hr*Ce+Be*ke)/_e;je(Ne,Xt,ke,De,hr,fe,Re),je(Xt,ge,Ce,De,Re,fe,Be)}}}function Vt(Mt,Et,Dt,dt,ht){(Mt.depth&1?ce:yt)(Mt,Et,Dt,dt,ht)}var Nt=function Mt(Et){function Dt(dt,ht,bt,Pt,Gt){if((te=dt._squarify)&&te.ratio===Et)for(var te,ne,je,Ne,ge=-1,_e,De=te.length,hr=dt.value;++ge<De;){for(ne=te[ge],je=ne.children,Ne=ne.value=0,_e=je.length;Ne<_e;++Ne)ne.value+=je[Ne].value;ne.dice?yt(ne,ht,bt,Pt,bt+=(Gt-bt)*ne.value/hr):ce(ne,ht,bt,ht+=(Pt-ht)*ne.value/hr,Gt),hr-=ne.value}else dt._squarify=te=ye(Et,dt,ht,bt,Pt,Gt),te.ratio=Et}return Dt.ratio=function(dt){return Mt((dt=+dt)>1?dt:1)},Dt}(ue)},10132:function(Q,U,t){t.d(U,{ak:function(){return h}});var M=Math.PI,E=2*M,i=1e-6,C=E-i;function T(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new T}T.prototype=v.prototype={constructor:T,moveTo:function(_,a){this._+="M"+(this._x0=this._x1=+_)+","+(this._y0=this._y1=+a)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(_,a){this._+="L"+(this._x1=+_)+","+(this._y1=+a)},quadraticCurveTo:function(_,a,c,f){this._+="Q"+ +_+","+ +a+","+(this._x1=+c)+","+(this._y1=+f)},bezierCurveTo:function(_,a,c,f,x,k){this._+="C"+ +_+","+ +a+","+ +c+","+ +f+","+(this._x1=+x)+","+(this._y1=+k)},arcTo:function(_,a,c,f,x){_=+_,a=+a,c=+c,f=+f,x=+x;var k=this._x1,y=this._y1,A=c-_,L=f-a,u=k-_,m=y-a,S=u*u+m*m;if(x<0)throw new Error("negative radius: "+x);if(this._x1===null)this._+="M"+(this._x1=_)+","+(this._y1=a);else if(S>i)if(!(Math.abs(m*A-L*u)>i)||!x)this._+="L"+(this._x1=_)+","+(this._y1=a);else{var w=c-k,I=f-y,O=A*A+L*L,D=w*w+I*I,P=Math.sqrt(O),F=Math.sqrt(S),R=x*Math.tan((M-Math.acos((O+S-D)/(2*P*F)))/2),B=R/F,N=R/P;Math.abs(B-1)>i&&(this._+="L"+(_+B*u)+","+(a+B*m)),this._+="A"+x+","+x+",0,0,"+ +(m*w>u*I)+","+(this._x1=_+N*A)+","+(this._y1=a+N*L)}},arc:function(_,a,c,f,x,k){_=+_,a=+a,c=+c,k=!!k;var y=c*Math.cos(f),A=c*Math.sin(f),L=_+y,u=a+A,m=1^k,S=k?f-x:x-f;if(c<0)throw new Error("negative radius: "+c);this._x1===null?this._+="M"+L+","+u:(Math.abs(this._x1-L)>i||Math.abs(this._y1-u)>i)&&(this._+="L"+L+","+u),c&&(S<0&&(S=S%E+E),S>C?this._+="A"+c+","+c+",0,1,"+m+","+(_-y)+","+(a-A)+"A"+c+","+c+",0,1,"+m+","+(this._x1=L)+","+(this._y1=u):S>i&&(this._+="A"+c+","+c+",0,"+ +(S>=M)+","+m+","+(this._x1=_+c*Math.cos(x))+","+(this._y1=a+c*Math.sin(x))))},rect:function(_,a,c,f){this._+="M"+(this._x0=this._x1=+_)+","+(this._y0=this._y1=+a)+"h"+ +c+"v"+ +f+"h"+-c+"Z"},toString:function(){return this._}};var d=v,r=Array.prototype.slice;function e(_){return function(){return _}}function l(_){return _[0]}function n(_){return _[1]}function s(_){return _.source}function o(_){return _.target}function p(_){var a=s,c=o,f=l,x=n,k=null;function y(){var A,L=r.call(arguments),u=a.apply(this,L),m=c.apply(this,L);if(k||(k=A=d()),_(k,+f.apply(this,(L[0]=u,L)),+x.apply(this,L),+f.apply(this,(L[0]=m,L)),+x.apply(this,L)),A)return k=null,A+""||null}return y.source=function(A){return arguments.length?(a=A,y):a},y.target=function(A){return arguments.length?(c=A,y):c},y.x=function(A){return arguments.length?(f=typeof A=="function"?A:e(+A),y):f},y.y=function(A){return arguments.length?(x=typeof A=="function"?A:e(+A),y):x},y.context=function(A){return arguments.length?(k=A??null,y):k},y}function b(_,a,c,f,x){_.moveTo(a,c),_.bezierCurveTo(a=(a+f)/2,c,a,x,f,x)}function h(){return p(b)}},94336:function(Q,U,t){t.d(U,{Yn:function(){return $t},m_:function(){return l},E9:function(){return Vt}});var M=t(8208),E=t(58931),i=t(46192),C=t(68936),T=t(32171),v=t(53528);function d(Mt){if(0<=Mt.y&&Mt.y<100){var Et=new Date(-1,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L);return Et.setFullYear(Mt.y),Et}return new Date(Mt.y,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L)}function r(Mt){if(0<=Mt.y&&Mt.y<100){var Et=new Date(Date.UTC(-1,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L));return Et.setUTCFullYear(Mt.y),Et}return new Date(Date.UTC(Mt.y,Mt.m,Mt.d,Mt.H,Mt.M,Mt.S,Mt.L))}function e(Mt,Et,Dt){return{y:Mt,m:Et,d:Dt,H:0,M:0,S:0,L:0}}function l(Mt){var Et=Mt.dateTime,Dt=Mt.date,dt=Mt.time,ht=Mt.periods,bt=Mt.days,Pt=Mt.shortDays,Gt=Mt.months,te=Mt.shortMonths,ne=_(ht),je=a(ht),Ne=_(bt),ge=a(bt),_e=_(Pt),De=a(Pt),hr=_(Gt),fe=a(Gt),Be=_(te),He=a(te),pr={a:zt,A:Ut,b:Me,B:Te,c:null,d:X,e:X,f:Z,H:J,I:it,j:nt,L:q,m:$,M:V,p:qe,q:Qe,Q:ye,s:Tt,S:rt,u:ot,U:H,V:Y,w:at,W:et,x:null,X:null,y:ct,Y:ft,Z:yt,"%":ue},Ze={a:Je,A:We,b:Oe,B:rr,c:null,d:xt,e:xt,f:At,H:Ct,I:gt,j:mt,L:vt,m:Ot,M:It,p:cr,q:lr,Q:ye,s:Tt,S:St,u:Bt,U:re,V:Yt,w:he,W:Zt,x:null,X:null,y:ae,Y:oe,Z:ce,"%":ue},Xt={a:Fe,A:Re,b:be,B:Ge,c:Ke,d:w,e:w,f:R,H:O,I:O,j:I,L:F,m:S,M:D,p:Ce,q:m,Q:N,s:G,S:P,u:f,U:x,V:k,w:c,W:y,x:or,X:sr,y:L,Y:A,Z:u,"%":B};pr.x=ie(Dt,pr),pr.X=ie(dt,pr),pr.c=ie(Et,pr),Ze.x=ie(Dt,Ze),Ze.X=ie(dt,Ze),Ze.c=ie(Et,Ze);function ie(nr,Sr){return function(kr){var Mr=[],rn=-1,Ur=0,pn=nr.length,yn,yr,Cr;for(kr instanceof Date||(kr=new Date(+kr));++rn<pn;)nr.charCodeAt(rn)===37&&(Mr.push(nr.slice(Ur,rn)),(yr=n[yn=nr.charAt(++rn)])!=null?yn=nr.charAt(++rn):yr=yn==="e"?" ":"0",(Cr=Sr[yn])&&(yn=Cr(kr,yr)),Mr.push(yn),Ur=rn+1);return Mr.push(nr.slice(Ur,rn)),Mr.join("")}}function pe(nr,Sr){return function(kr){var Mr=e(1900,void 0,1),rn=ke(Mr,nr,kr+="",0),Ur,pn;if(rn!=kr.length)return null;if("Q"in Mr)return new Date(Mr.Q);if("s"in Mr)return new Date(Mr.s*1e3+("L"in Mr?Mr.L:0));if(Sr&&!("Z"in Mr)&&(Mr.Z=0),"p"in Mr&&(Mr.H=Mr.H%12+Mr.p*12),Mr.m===void 0&&(Mr.m="q"in Mr?Mr.q:0),"V"in Mr){if(Mr.V<1||Mr.V>53)return null;"w"in Mr||(Mr.w=1),"Z"in Mr?(Ur=r(e(Mr.y,0,1)),pn=Ur.getUTCDay(),Ur=pn>4||pn===0?M.ot.ceil(Ur):(0,M.ot)(Ur),Ur=E.c.offset(Ur,(Mr.V-1)*7),Mr.y=Ur.getUTCFullYear(),Mr.m=Ur.getUTCMonth(),Mr.d=Ur.getUTCDate()+(Mr.w+6)%7):(Ur=d(e(Mr.y,0,1)),pn=Ur.getDay(),Ur=pn>4||pn===0?i.qT.ceil(Ur):(0,i.qT)(Ur),Ur=C.c.offset(Ur,(Mr.V-1)*7),Mr.y=Ur.getFullYear(),Mr.m=Ur.getMonth(),Mr.d=Ur.getDate()+(Mr.w+6)%7)}else("W"in Mr||"U"in Mr)&&("w"in Mr||(Mr.w="u"in Mr?Mr.u%7:"W"in Mr?1:0),pn="Z"in Mr?r(e(Mr.y,0,1)).getUTCDay():d(e(Mr.y,0,1)).getDay(),Mr.m=0,Mr.d="W"in Mr?(Mr.w+6)%7+Mr.W*7-(pn+5)%7:Mr.w+Mr.U*7-(pn+6)%7);return"Z"in Mr?(Mr.H+=Mr.Z/100|0,Mr.M+=Mr.Z%100,r(Mr)):d(Mr)}}function ke(nr,Sr,kr,Mr){for(var rn=0,Ur=Sr.length,pn=kr.length,yn,yr;rn<Ur;){if(Mr>=pn)return-1;if(yn=Sr.charCodeAt(rn++),yn===37){if(yn=Sr.charAt(rn++),yr=Xt[yn in n?Sr.charAt(rn++):yn],!yr||(Mr=yr(nr,kr,Mr))<0)return-1}else if(yn!=kr.charCodeAt(Mr++))return-1}return Mr}function Ce(nr,Sr,kr){var Mr=ne.exec(Sr.slice(kr));return Mr?(nr.p=je[Mr[0].toLowerCase()],kr+Mr[0].length):-1}function Fe(nr,Sr,kr){var Mr=_e.exec(Sr.slice(kr));return Mr?(nr.w=De[Mr[0].toLowerCase()],kr+Mr[0].length):-1}function Re(nr,Sr,kr){var Mr=Ne.exec(Sr.slice(kr));return Mr?(nr.w=ge[Mr[0].toLowerCase()],kr+Mr[0].length):-1}function be(nr,Sr,kr){var Mr=Be.exec(Sr.slice(kr));return Mr?(nr.m=He[Mr[0].toLowerCase()],kr+Mr[0].length):-1}function Ge(nr,Sr,kr){var Mr=hr.exec(Sr.slice(kr));return Mr?(nr.m=fe[Mr[0].toLowerCase()],kr+Mr[0].length):-1}function Ke(nr,Sr,kr){return ke(nr,Et,Sr,kr)}function or(nr,Sr,kr){return ke(nr,Dt,Sr,kr)}function sr(nr,Sr,kr){return ke(nr,dt,Sr,kr)}function zt(nr){return Pt[nr.getDay()]}function Ut(nr){return bt[nr.getDay()]}function Me(nr){return te[nr.getMonth()]}function Te(nr){return Gt[nr.getMonth()]}function qe(nr){return ht[+(nr.getHours()>=12)]}function Qe(nr){return 1+~~(nr.getMonth()/3)}function Je(nr){return Pt[nr.getUTCDay()]}function We(nr){return bt[nr.getUTCDay()]}function Oe(nr){return te[nr.getUTCMonth()]}function rr(nr){return Gt[nr.getUTCMonth()]}function cr(nr){return ht[+(nr.getUTCHours()>=12)]}function lr(nr){return 1+~~(nr.getUTCMonth()/3)}return{format:function(nr){var Sr=ie(nr+="",pr);return Sr.toString=function(){return nr},Sr},parse:function(nr){var Sr=pe(nr+="",!1);return Sr.toString=function(){return nr},Sr},utcFormat:function(nr){var Sr=ie(nr+="",Ze);return Sr.toString=function(){return nr},Sr},utcParse:function(nr){var Sr=pe(nr+="",!0);return Sr.toString=function(){return nr},Sr}}}var n={"-":"",_:" ",0:"0"},s=/^\s*\d+/,o=/^%/,p=/[\\^$*+?|[\]().{}]/g;function b(Mt,Et,Dt){var dt=Mt<0?"-":"",ht=(dt?-Mt:Mt)+"",bt=ht.length;return dt+(bt<Dt?new Array(Dt-bt+1).join(Et)+ht:ht)}function h(Mt){return Mt.replace(p,"\\$&")}function _(Mt){return new RegExp("^(?:"+Mt.map(h).join("|")+")","i")}function a(Mt){for(var Et={},Dt=-1,dt=Mt.length;++Dt<dt;)Et[Mt[Dt].toLowerCase()]=Dt;return Et}function c(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+1));return dt?(Mt.w=+dt[0],Dt+dt[0].length):-1}function f(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+1));return dt?(Mt.u=+dt[0],Dt+dt[0].length):-1}function x(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.U=+dt[0],Dt+dt[0].length):-1}function k(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.V=+dt[0],Dt+dt[0].length):-1}function y(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.W=+dt[0],Dt+dt[0].length):-1}function A(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+4));return dt?(Mt.y=+dt[0],Dt+dt[0].length):-1}function L(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.y=+dt[0]+(+dt[0]>68?1900:2e3),Dt+dt[0].length):-1}function u(Mt,Et,Dt){var dt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(Et.slice(Dt,Dt+6));return dt?(Mt.Z=dt[1]?0:-(dt[2]+(dt[3]||"00")),Dt+dt[0].length):-1}function m(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+1));return dt?(Mt.q=dt[0]*3-3,Dt+dt[0].length):-1}function S(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.m=dt[0]-1,Dt+dt[0].length):-1}function w(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.d=+dt[0],Dt+dt[0].length):-1}function I(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+3));return dt?(Mt.m=0,Mt.d=+dt[0],Dt+dt[0].length):-1}function O(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.H=+dt[0],Dt+dt[0].length):-1}function D(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.M=+dt[0],Dt+dt[0].length):-1}function P(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+2));return dt?(Mt.S=+dt[0],Dt+dt[0].length):-1}function F(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+3));return dt?(Mt.L=+dt[0],Dt+dt[0].length):-1}function R(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt,Dt+6));return dt?(Mt.L=Math.floor(dt[0]/1e3),Dt+dt[0].length):-1}function B(Mt,Et,Dt){var dt=o.exec(Et.slice(Dt,Dt+1));return dt?Dt+dt[0].length:-1}function N(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt));return dt?(Mt.Q=+dt[0],Dt+dt[0].length):-1}function G(Mt,Et,Dt){var dt=s.exec(Et.slice(Dt));return dt?(Mt.s=+dt[0],Dt+dt[0].length):-1}function X(Mt,Et){return b(Mt.getDate(),Et,2)}function J(Mt,Et){return b(Mt.getHours(),Et,2)}function it(Mt,Et){return b(Mt.getHours()%12||12,Et,2)}function nt(Mt,Et){return b(1+C.c.count((0,T.c)(Mt),Mt),Et,3)}function q(Mt,Et){return b(Mt.getMilliseconds(),Et,3)}function Z(Mt,Et){return q(Mt,Et)+"000"}function $(Mt,Et){return b(Mt.getMonth()+1,Et,2)}function V(Mt,Et){return b(Mt.getMinutes(),Et,2)}function rt(Mt,Et){return b(Mt.getSeconds(),Et,2)}function ot(Mt){var Et=Mt.getDay();return Et===0?7:Et}function H(Mt,Et){return b(i.uU.count((0,T.c)(Mt)-1,Mt),Et,2)}function Y(Mt,Et){var Dt=Mt.getDay();return Mt=Dt>=4||Dt===0?(0,i.kD)(Mt):i.kD.ceil(Mt),b(i.kD.count((0,T.c)(Mt),Mt)+((0,T.c)(Mt).getDay()===4),Et,2)}function at(Mt){return Mt.getDay()}function et(Mt,Et){return b(i.qT.count((0,T.c)(Mt)-1,Mt),Et,2)}function ct(Mt,Et){return b(Mt.getFullYear()%100,Et,2)}function ft(Mt,Et){return b(Mt.getFullYear()%1e4,Et,4)}function yt(Mt){var Et=Mt.getTimezoneOffset();return(Et>0?"-":(Et*=-1,"+"))+b(Et/60|0,"0",2)+b(Et%60,"0",2)}function xt(Mt,Et){return b(Mt.getUTCDate(),Et,2)}function Ct(Mt,Et){return b(Mt.getUTCHours(),Et,2)}function gt(Mt,Et){return b(Mt.getUTCHours()%12||12,Et,2)}function mt(Mt,Et){return b(1+E.c.count((0,v.c)(Mt),Mt),Et,3)}function vt(Mt,Et){return b(Mt.getUTCMilliseconds(),Et,3)}function At(Mt,Et){return vt(Mt,Et)+"000"}function Ot(Mt,Et){return b(Mt.getUTCMonth()+1,Et,2)}function It(Mt,Et){return b(Mt.getUTCMinutes(),Et,2)}function St(Mt,Et){return b(Mt.getUTCSeconds(),Et,2)}function Bt(Mt){var Et=Mt.getUTCDay();return Et===0?7:Et}function re(Mt,Et){return b(M.EV.count((0,v.c)(Mt)-1,Mt),Et,2)}function Yt(Mt,Et){var Dt=Mt.getUTCDay();return Mt=Dt>=4||Dt===0?(0,M.yA)(Mt):M.yA.ceil(Mt),b(M.yA.count((0,v.c)(Mt),Mt)+((0,v.c)(Mt).getUTCDay()===4),Et,2)}function he(Mt){return Mt.getUTCDay()}function Zt(Mt,Et){return b(M.ot.count((0,v.c)(Mt)-1,Mt),Et,2)}function ae(Mt,Et){return b(Mt.getUTCFullYear()%100,Et,2)}function oe(Mt,Et){return b(Mt.getUTCFullYear()%1e4,Et,4)}function ce(){return"+0000"}function ue(){return"%"}function ye(Mt){return+Mt}function Tt(Mt){return Math.floor(+Mt/1e3)}var Ft,$t,Vt;Nt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Nt(Mt){return Ft=l(Mt),$t=Ft.format,Ft.parse,Vt=Ft.utcFormat,Ft.utcParse,Ft}},68936:function(Q,U,t){t.d(U,{m:function(){return C}});var M=t(81628),E=t(69792),i=(0,M.c)(function(T){T.setHours(0,0,0,0)},function(T,v){T.setDate(T.getDate()+v)},function(T,v){return(v-T-(v.getTimezoneOffset()-T.getTimezoneOffset())*E.iy)/E.SK},function(T){return T.getDate()-1});U.c=i;var C=i.range},69792:function(Q,U,t){t.d(U,{KK:function(){return T},SK:function(){return C},cg:function(){return i},iy:function(){return E},yc:function(){return M}});var M=1e3,E=6e4,i=36e5,C=864e5,T=6048e5},73220:function(Q,U,t){t.r(U),t.d(U,{timeDay:function(){return b.c},timeDays:function(){return b.m},timeFriday:function(){return h.iB},timeFridays:function(){return h.sJ},timeHour:function(){return o},timeHours:function(){return p},timeInterval:function(){return M.c},timeMillisecond:function(){return i},timeMilliseconds:function(){return C},timeMinute:function(){return l},timeMinutes:function(){return n},timeMonday:function(){return h.qT},timeMondays:function(){return h.QP},timeMonth:function(){return a},timeMonths:function(){return c},timeSaturday:function(){return h.Wc},timeSaturdays:function(){return h.aI},timeSecond:function(){return d},timeSeconds:function(){return r},timeSunday:function(){return h.uU},timeSundays:function(){return h.Ab},timeThursday:function(){return h.kD},timeThursdays:function(){return h.eC},timeTuesday:function(){return h.Mf},timeTuesdays:function(){return h.Oc},timeWednesday:function(){return h.eg},timeWednesdays:function(){return h.sn},timeWeek:function(){return h.uU},timeWeeks:function(){return h.Ab},timeYear:function(){return f.c},timeYears:function(){return f.Q},utcDay:function(){return m.c},utcDays:function(){return m.o},utcFriday:function(){return S.od},utcFridays:function(){return S.iG},utcHour:function(){return L},utcHours:function(){return u},utcMillisecond:function(){return i},utcMilliseconds:function(){return C},utcMinute:function(){return k},utcMinutes:function(){return y},utcMonday:function(){return S.ot},utcMondays:function(){return S.iO},utcMonth:function(){return I},utcMonths:function(){return O},utcSaturday:function(){return S.Ad},utcSaturdays:function(){return S.K8},utcSecond:function(){return d},utcSeconds:function(){return r},utcSunday:function(){return S.EV},utcSundays:function(){return S.Wq},utcThursday:function(){return S.yA},utcThursdays:function(){return S.ob},utcTuesday:function(){return S.sG},utcTuesdays:function(){return S.kl},utcWednesday:function(){return S._6},utcWednesdays:function(){return S.W_},utcWeek:function(){return S.EV},utcWeeks:function(){return S.Wq},utcYear:function(){return D.c},utcYears:function(){return D.i}});var M=t(81628),E=(0,M.c)(function(){},function(P,F){P.setTime(+P+F)},function(P,F){return F-P});E.every=function(P){return P=Math.floor(P),!isFinite(P)||!(P>0)?null:P>1?(0,M.c)(function(F){F.setTime(Math.floor(F/P)*P)},function(F,R){F.setTime(+F+R*P)},function(F,R){return(R-F)/P}):E};var i=E,C=E.range,T=t(69792),v=(0,M.c)(function(P){P.setTime(P-P.getMilliseconds())},function(P,F){P.setTime(+P+F*T.yc)},function(P,F){return(F-P)/T.yc},function(P){return P.getUTCSeconds()}),d=v,r=v.range,e=(0,M.c)(function(P){P.setTime(P-P.getMilliseconds()-P.getSeconds()*T.yc)},function(P,F){P.setTime(+P+F*T.iy)},function(P,F){return(F-P)/T.iy},function(P){return P.getMinutes()}),l=e,n=e.range,s=(0,M.c)(function(P){P.setTime(P-P.getMilliseconds()-P.getSeconds()*T.yc-P.getMinutes()*T.iy)},function(P,F){P.setTime(+P+F*T.cg)},function(P,F){return(F-P)/T.cg},function(P){return P.getHours()}),o=s,p=s.range,b=t(68936),h=t(46192),_=(0,M.c)(function(P){P.setDate(1),P.setHours(0,0,0,0)},function(P,F){P.setMonth(P.getMonth()+F)},function(P,F){return F.getMonth()-P.getMonth()+(F.getFullYear()-P.getFullYear())*12},function(P){return P.getMonth()}),a=_,c=_.range,f=t(32171),x=(0,M.c)(function(P){P.setUTCSeconds(0,0)},function(P,F){P.setTime(+P+F*T.iy)},function(P,F){return(F-P)/T.iy},function(P){return P.getUTCMinutes()}),k=x,y=x.range,A=(0,M.c)(function(P){P.setUTCMinutes(0,0,0)},function(P,F){P.setTime(+P+F*T.cg)},function(P,F){return(F-P)/T.cg},function(P){return P.getUTCHours()}),L=A,u=A.range,m=t(58931),S=t(8208),w=(0,M.c)(function(P){P.setUTCDate(1),P.setUTCHours(0,0,0,0)},function(P,F){P.setUTCMonth(P.getUTCMonth()+F)},function(P,F){return F.getUTCMonth()-P.getUTCMonth()+(F.getUTCFullYear()-P.getUTCFullYear())*12},function(P){return P.getUTCMonth()}),I=w,O=w.range,D=t(53528)},81628:function(Q,U,t){t.d(U,{c:function(){return i}});var M=new Date,E=new Date;function i(C,T,v,d){function r(e){return C(e=arguments.length===0?new Date:new Date(+e)),e}return r.floor=function(e){return C(e=new Date(+e)),e},r.ceil=function(e){return C(e=new Date(e-1)),T(e,1),C(e),e},r.round=function(e){var l=r(e),n=r.ceil(e);return e-l<n-e?l:n},r.offset=function(e,l){return T(e=new Date(+e),l==null?1:Math.floor(l)),e},r.range=function(e,l,n){var s=[],o;if(e=r.ceil(e),n=n==null?1:Math.floor(n),!(e<l)||!(n>0))return s;do s.push(o=new Date(+e)),T(e,n),C(e);while(o<e&&e<l);return s},r.filter=function(e){return i(function(l){if(l>=l)for(;C(l),!e(l);)l.setTime(l-1)},function(l,n){if(l>=l)if(n<0)for(;++n<=0;)for(;T(l,-1),!e(l););else for(;--n>=0;)for(;T(l,1),!e(l););})},v&&(r.count=function(e,l){return M.setTime(+e),E.setTime(+l),C(M),C(E),Math.floor(v(M,E))},r.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?r.filter(d?function(l){return d(l)%e===0}:function(l){return r.count(0,l)%e===0}):r}),r}},58931:function(Q,U,t){t.d(U,{o:function(){return C}});var M=t(81628),E=t(69792),i=(0,M.c)(function(T){T.setUTCHours(0,0,0,0)},function(T,v){T.setUTCDate(T.getUTCDate()+v)},function(T,v){return(v-T)/E.SK},function(T){return T.getUTCDate()-1});U.c=i;var C=i.range},8208:function(Q,U,t){t.d(U,{Ad:function(){return l},EV:function(){return C},K8:function(){return _},W_:function(){return p},Wq:function(){return n},_6:function(){return d},iG:function(){return h},iO:function(){return s},kl:function(){return o},ob:function(){return b},od:function(){return e},ot:function(){return T},sG:function(){return v},yA:function(){return r}});var M=t(81628),E=t(69792);function i(a){return(0,M.c)(function(c){c.setUTCDate(c.getUTCDate()-(c.getUTCDay()+7-a)%7),c.setUTCHours(0,0,0,0)},function(c,f){c.setUTCDate(c.getUTCDate()+f*7)},function(c,f){return(f-c)/E.KK})}var C=i(0),T=i(1),v=i(2),d=i(3),r=i(4),e=i(5),l=i(6),n=C.range,s=T.range,o=v.range,p=d.range,b=r.range,h=e.range,_=l.range},53528:function(Q,U,t){t.d(U,{i:function(){return i}});var M=t(81628),E=(0,M.c)(function(C){C.setUTCMonth(0,1),C.setUTCHours(0,0,0,0)},function(C,T){C.setUTCFullYear(C.getUTCFullYear()+T)},function(C,T){return T.getUTCFullYear()-C.getUTCFullYear()},function(C){return C.getUTCFullYear()});E.every=function(C){return!isFinite(C=Math.floor(C))||!(C>0)?null:(0,M.c)(function(T){T.setUTCFullYear(Math.floor(T.getUTCFullYear()/C)*C),T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},function(T,v){T.setUTCFullYear(T.getUTCFullYear()+v*C)})},U.c=E;var i=E.range},46192:function(Q,U,t){t.d(U,{Ab:function(){return n},Mf:function(){return v},Oc:function(){return o},QP:function(){return s},Wc:function(){return l},aI:function(){return _},eC:function(){return b},eg:function(){return d},iB:function(){return e},kD:function(){return r},qT:function(){return T},sJ:function(){return h},sn:function(){return p},uU:function(){return C}});var M=t(81628),E=t(69792);function i(a){return(0,M.c)(function(c){c.setDate(c.getDate()-(c.getDay()+7-a)%7),c.setHours(0,0,0,0)},function(c,f){c.setDate(c.getDate()+f*7)},function(c,f){return(f-c-(f.getTimezoneOffset()-c.getTimezoneOffset())*E.iy)/E.KK})}var C=i(0),T=i(1),v=i(2),d=i(3),r=i(4),e=i(5),l=i(6),n=C.range,s=T.range,o=v.range,p=d.range,b=r.range,h=e.range,_=l.range},32171:function(Q,U,t){t.d(U,{Q:function(){return i}});var M=t(81628),E=(0,M.c)(function(C){C.setMonth(0,1),C.setHours(0,0,0,0)},function(C,T){C.setFullYear(C.getFullYear()+T)},function(C,T){return T.getFullYear()-C.getFullYear()},function(C){return C.getFullYear()});E.every=function(C){return!isFinite(C=Math.floor(C))||!(C>0)?null:(0,M.c)(function(T){T.setFullYear(Math.floor(T.getFullYear()/C)*C),T.setMonth(0,1),T.setHours(0,0,0,0)},function(T,v){T.setFullYear(T.getFullYear()+v*C)})},U.c=E;var i=E.range},64348:function(Q,U,t){var M=t(39640)(),E=t(53664),i=M&&E("%Object.defineProperty%",!0);if(i)try{i({},"a",{value:1})}catch{i=!1}var C=E("%SyntaxError%"),T=E("%TypeError%"),v=t(2304);Q.exports=function(d,r,e){if(!d||typeof d!="object"&&typeof d!="function")throw new T("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new T("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new T("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new T("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new T("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new T("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,n=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,p=!!v&&v(d,r);if(i)i(d,r,{configurable:s===null&&p?p.configurable:!s,enumerable:l===null&&p?p.enumerable:!l,value:e,writable:n===null&&p?p.writable:!n});else if(o||!l&&!n&&!s)d[r]=e;else throw new C("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}},81288:function(Q,U,t){var M=t(41820),E=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",i=Object.prototype.toString,C=Array.prototype.concat,T=Object.defineProperty,v=function(n){return typeof n=="function"&&i.call(n)==="[object Function]"},d=t(39640)(),r=T&&d,e=function(n,s,o,p){if(s in n){if(p===!0){if(n[s]===o)return}else if(!v(p)||!p())return}r?T(n,s,{configurable:!0,enumerable:!1,value:o,writable:!0}):n[s]=o},l=function(n,s){var o=arguments.length>2?arguments[2]:{},p=M(s);E&&(p=C.call(p,Object.getOwnPropertySymbols(s)));for(var b=0;b<p.length;b+=1)e(n,p[b],s[p[b]],o[p[b]])};l.supportsDescriptors=!!r,Q.exports=l},31264:function(Q){Q.exports=function(){for(var U=0;U<arguments.length;U++)if(arguments[U]!==void 0)return arguments[U]}},63768:function(Q){Q.exports=E;var U=E.canvas=document.createElement("canvas"),t=U.getContext("2d"),M=i([32,126]);E.createPairs=i,E.ascii=M;function E(C,T){Array.isArray(C)&&(C=C.join(", "));var v={},d,r=16,e=.05;T&&(T.length===2&&typeof T[0]=="number"?d=i(T):Array.isArray(T)?d=T:(T.o?d=i(T.o):T.pairs&&(d=T.pairs),T.fontSize&&(r=T.fontSize),T.threshold!=null&&(e=T.threshold))),d||(d=M),t.font=r+"px "+C;for(var l=0;l<d.length;l++){var n=d[l],s=t.measureText(n[0]).width+t.measureText(n[1]).width,o=t.measureText(n).width;if(Math.abs(s-o)>r*e){var p=(o-s)/r;v[n]=p*1e3}}return v}function i(C){for(var T=[],v=C[0];v<=C[1];v++)for(var d=String.fromCharCode(v),r=C[0];r<C[1];r++){var e=String.fromCharCode(r),l=d+e;T.push(l)}return T}},22235:function(Q,U,t){var M=t(49972),E=t(48816),i={M:"moveTo",C:"bezierCurveTo"};Q.exports=function(C,T){C.beginPath(),E(M(T)).forEach(function(v){var d=v[0],r=v.slice(1);C[i[d]].apply(C,r)}),C.closePath()}},72512:function(Q){Q.exports=function(U){switch(U){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(Q){function U(E,i,C){var T=E[C]|0;if(T<=0)return[];var v=new Array(T),d;if(C===E.length-1)for(d=0;d<T;++d)v[d]=i;else for(d=0;d<T;++d)v[d]=U(E,i,C+1);return v}function t(E,i){var C,T;for(C=new Array(E),T=0;T<E;++T)C[T]=i;return C}function M(E,i){switch(typeof i>"u"&&(i=0),typeof E){case"number":if(E>0)return t(E|0,i);break;case"object":if(typeof E.length=="number")return U(E,i,0);break}return[]}Q.exports=M},28912:function(Q){Q.exports=U,Q.exports.default=U;function U(O,D,P){P=P||2;var F=D&&D.length,R=F?D[0]*P:O.length,B=t(O,0,R,P,!0),N=[];if(!B||B.next===B.prev)return N;var G,X,J,it,nt,q,Z;if(F&&(B=d(O,D,B,P)),O.length>80*P){G=J=O[0],X=it=O[1];for(var $=P;$<R;$+=P)nt=O[$],q=O[$+1],nt<G&&(G=nt),q<X&&(X=q),nt>J&&(J=nt),q>it&&(it=q);Z=Math.max(J-G,it-X),Z=Z!==0?1/Z:0}return E(B,N,P,G,X,Z),N}function t(O,D,P,F,R){var B,N;if(R===I(O,D,P,F)>0)for(B=D;B<P;B+=F)N=m(B,O[B],O[B+1],N);else for(B=P-F;B>=D;B-=F)N=m(B,O[B],O[B+1],N);return N&&c(N,N.next)&&(S(N),N=N.next),N}function M(O,D){if(!O)return O;D||(D=O);var P=O,F;do if(F=!1,!P.steiner&&(c(P,P.next)||a(P.prev,P,P.next)===0)){if(S(P),P=D=P.prev,P===P.next)break;F=!0}else P=P.next;while(F||P!==D);return D}function E(O,D,P,F,R,B,N){if(O){!N&&B&&s(O,F,R,B);for(var G=O,X,J;O.prev!==O.next;){if(X=O.prev,J=O.next,B?C(O,F,R,B):i(O)){D.push(X.i/P),D.push(O.i/P),D.push(J.i/P),S(O),O=J.next,G=J.next;continue}if(O=J,O===G){N?N===1?(O=T(M(O),D,P),E(O,D,P,F,R,B,2)):N===2&&v(O,D,P,F,R,B):E(M(O),D,P,F,R,B,1);break}}}}function i(O){var D=O.prev,P=O,F=O.next;if(a(D,P,F)>=0)return!1;for(var R=O.next.next;R!==O.prev;){if(h(D.x,D.y,P.x,P.y,F.x,F.y,R.x,R.y)&&a(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function C(O,D,P,F){var R=O.prev,B=O,N=O.next;if(a(R,B,N)>=0)return!1;for(var G=R.x<B.x?R.x<N.x?R.x:N.x:B.x<N.x?B.x:N.x,X=R.y<B.y?R.y<N.y?R.y:N.y:B.y<N.y?B.y:N.y,J=R.x>B.x?R.x>N.x?R.x:N.x:B.x>N.x?B.x:N.x,it=R.y>B.y?R.y>N.y?R.y:N.y:B.y>N.y?B.y:N.y,nt=p(G,X,D,P,F),q=p(J,it,D,P,F),Z=O.prevZ,$=O.nextZ;Z&&Z.z>=nt&&$&&$.z<=q;){if(Z!==O.prev&&Z!==O.next&&h(R.x,R.y,B.x,B.y,N.x,N.y,Z.x,Z.y)&&a(Z.prev,Z,Z.next)>=0||(Z=Z.prevZ,$!==O.prev&&$!==O.next&&h(R.x,R.y,B.x,B.y,N.x,N.y,$.x,$.y)&&a($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;Z&&Z.z>=nt;){if(Z!==O.prev&&Z!==O.next&&h(R.x,R.y,B.x,B.y,N.x,N.y,Z.x,Z.y)&&a(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;$&&$.z<=q;){if($!==O.prev&&$!==O.next&&h(R.x,R.y,B.x,B.y,N.x,N.y,$.x,$.y)&&a($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}function T(O,D,P){var F=O;do{var R=F.prev,B=F.next.next;!c(R,B)&&f(R,F,F.next,B)&&A(R,B)&&A(B,R)&&(D.push(R.i/P),D.push(F.i/P),D.push(B.i/P),S(F),S(F.next),F=O=B),F=F.next}while(F!==O);return M(F)}function v(O,D,P,F,R,B){var N=O;do{for(var G=N.next.next;G!==N.prev;){if(N.i!==G.i&&_(N,G)){var X=u(N,G);N=M(N,N.next),X=M(X,X.next),E(N,D,P,F,R,B),E(X,D,P,F,R,B);return}G=G.next}N=N.next}while(N!==O)}function d(O,D,P,F){var R=[],B,N,G,X,J;for(B=0,N=D.length;B<N;B++)G=D[B]*F,X=B<N-1?D[B+1]*F:O.length,J=t(O,G,X,F,!1),J===J.next&&(J.steiner=!0),R.push(b(J));for(R.sort(r),B=0;B<R.length;B++)e(R[B],P),P=M(P,P.next);return P}function r(O,D){return O.x-D.x}function e(O,D){if(D=l(O,D),D){var P=u(D,O);M(D,D.next),M(P,P.next)}}function l(O,D){var P=D,F=O.x,R=O.y,B=-1/0,N;do{if(R<=P.y&&R>=P.next.y&&P.next.y!==P.y){var G=P.x+(R-P.y)*(P.next.x-P.x)/(P.next.y-P.y);if(G<=F&&G>B){if(B=G,G===F){if(R===P.y)return P;if(R===P.next.y)return P.next}N=P.x<P.next.x?P:P.next}}P=P.next}while(P!==D);if(!N)return null;if(F===B)return N;var X=N,J=N.x,it=N.y,nt=1/0,q;P=N;do F>=P.x&&P.x>=J&&F!==P.x&&h(R<it?F:B,R,J,it,R<it?B:F,R,P.x,P.y)&&(q=Math.abs(R-P.y)/(F-P.x),A(P,O)&&(q<nt||q===nt&&(P.x>N.x||P.x===N.x&&n(N,P)))&&(N=P,nt=q)),P=P.next;while(P!==X);return N}function n(O,D){return a(O.prev,O,D.prev)<0&&a(D.next,O,O.next)<0}function s(O,D,P,F){var R=O;do R.z===null&&(R.z=p(R.x,R.y,D,P,F)),R.prevZ=R.prev,R.nextZ=R.next,R=R.next;while(R!==O);R.prevZ.nextZ=null,R.prevZ=null,o(R)}function o(O){var D,P,F,R,B,N,G,X,J=1;do{for(P=O,O=null,B=null,N=0;P;){for(N++,F=P,G=0,D=0;D<J&&(G++,F=F.nextZ,!!F);D++);for(X=J;G>0||X>0&&F;)G!==0&&(X===0||!F||P.z<=F.z)?(R=P,P=P.nextZ,G--):(R=F,F=F.nextZ,X--),B?B.nextZ=R:O=R,R.prevZ=B,B=R;P=F}B.nextZ=null,J*=2}while(N>1);return O}function p(O,D,P,F,R){return O=32767*(O-P)*R,D=32767*(D-F)*R,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,O|D<<1}function b(O){var D=O,P=O;do(D.x<P.x||D.x===P.x&&D.y<P.y)&&(P=D),D=D.next;while(D!==O);return P}function h(O,D,P,F,R,B,N,G){return(R-N)*(D-G)-(O-N)*(B-G)>=0&&(O-N)*(F-G)-(P-N)*(D-G)>=0&&(P-N)*(B-G)-(R-N)*(F-G)>=0}function _(O,D){return O.next.i!==D.i&&O.prev.i!==D.i&&!y(O,D)&&(A(O,D)&&A(D,O)&&L(O,D)&&(a(O.prev,O,D.prev)||a(O,D.prev,D))||c(O,D)&&a(O.prev,O,O.next)>0&&a(D.prev,D,D.next)>0)}function a(O,D,P){return(D.y-O.y)*(P.x-D.x)-(D.x-O.x)*(P.y-D.y)}function c(O,D){return O.x===D.x&&O.y===D.y}function f(O,D,P,F){var R=k(a(O,D,P)),B=k(a(O,D,F)),N=k(a(P,F,O)),G=k(a(P,F,D));return!!(R!==B&&N!==G||R===0&&x(O,P,D)||B===0&&x(O,F,D)||N===0&&x(P,O,F)||G===0&&x(P,D,F))}function x(O,D,P){return D.x<=Math.max(O.x,P.x)&&D.x>=Math.min(O.x,P.x)&&D.y<=Math.max(O.y,P.y)&&D.y>=Math.min(O.y,P.y)}function k(O){return O>0?1:O<0?-1:0}function y(O,D){var P=O;do{if(P.i!==O.i&&P.next.i!==O.i&&P.i!==D.i&&P.next.i!==D.i&&f(P,P.next,O,D))return!0;P=P.next}while(P!==O);return!1}function A(O,D){return a(O.prev,O,O.next)<0?a(O,D,O.next)>=0&&a(O,O.prev,D)>=0:a(O,D,O.prev)<0||a(O,O.next,D)<0}function L(O,D){var P=O,F=!1,R=(O.x+D.x)/2,B=(O.y+D.y)/2;do P.y>B!=P.next.y>B&&P.next.y!==P.y&&R<(P.next.x-P.x)*(B-P.y)/(P.next.y-P.y)+P.x&&(F=!F),P=P.next;while(P!==O);return F}function u(O,D){var P=new w(O.i,O.x,O.y),F=new w(D.i,D.x,D.y),R=O.next,B=D.prev;return O.next=D,D.prev=O,P.next=R,R.prev=P,F.next=P,P.prev=F,B.next=F,F.prev=B,F}function m(O,D,P,F){var R=new w(O,D,P);return F?(R.next=F.next,R.prev=F,F.next.prev=R,F.next=R):(R.prev=R,R.next=R),R}function S(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function w(O,D,P){this.i=O,this.x=D,this.y=P,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}U.deviation=function(O,D,P,F){var R=D&&D.length,B=R?D[0]*P:O.length,N=Math.abs(I(O,0,B,P));if(R)for(var G=0,X=D.length;G<X;G++){var J=D[G]*P,it=G<X-1?D[G+1]*P:O.length;N-=Math.abs(I(O,J,it,P))}var nt=0;for(G=0;G<F.length;G+=3){var q=F[G]*P,Z=F[G+1]*P,$=F[G+2]*P;nt+=Math.abs((O[q]-O[$])*(O[Z+1]-O[q+1])-(O[q]-O[Z])*(O[$+1]-O[q+1]))}return N===0&&nt===0?0:Math.abs((nt-N)/N)};function I(O,D,P,F){for(var R=0,B=D,N=P-F;B<P;B+=F)R+=(O[N]-O[B])*(O[B+1]+O[N+1]),N=B;return R}U.flatten=function(O){for(var D=O[0][0].length,P={vertices:[],holes:[],dimensions:D},F=0,R=0;R<O.length;R++){for(var B=0;B<O[R].length;B++)for(var N=0;N<D;N++)P.vertices.push(O[R][B][N]);R>0&&(F+=O[R-1].length,P.holes.push(F))}return P}},6688:function(Q,U,t){var M=t(78484);Q.exports=function(E,i){var C=[],T=[],v=[],d={},r=[],e;function l(f){v[f]=!1,d.hasOwnProperty(f)&&Object.keys(d[f]).forEach(function(x){delete d[f][x],v[x]&&l(x)})}function n(f){var x=!1;T.push(f),v[f]=!0;var k,y;for(k=0;k<r[f].length;k++)y=r[f][k],y===e?(s(e,T),x=!0):v[y]||(x=n(y));if(x)l(f);else for(k=0;k<r[f].length;k++){y=r[f][k];var A=d[y];A||(A={},d[y]=A),A[y]=!0}return T.pop(),x}function s(f,x){var k=[].concat(x).concat(f);i?i(n):C.push(k)}function o(f){for(var x=0;x<E.length;x++)x<f&&(E[x]=[]),E[x]=E[x].filter(function(k){return k>=f})}function p(f){o(f);for(var x=E,k=M(x),y=k.components.filter(function(I){return I.length>1}),A=1/0,L,u=0;u<y.length;u++)for(var m=0;m<y[u].length;m++)y[u][m]<A&&(A=y[u][m],L=u);var S=y[L];if(!S)return!1;var w=E.map(function(I,O){return S.indexOf(O)===-1?[]:I.filter(function(D){return S.indexOf(D)!==-1})});return{leastVertex:A,adjList:w}}e=0;for(var b=E.length;e<b;){var h=p(e);if(e=h.leastVertex,r=h.adjList,r){for(var _=0;_<r.length;_++)for(var a=0;a<r[_].length;a++){var c=r[_][a];v[+c]=!1,d[c]={}}n(e),e=e+1}else e=b}if(!i)return C}},41476:function(Q,U,t){var M=t(9252);Q.exports=function(){return M(this).length=0,this}},74772:function(Q,U,t){Q.exports=t(44716)()?Array.from:t(80816)},44716:function(Q){Q.exports=function(){var U=Array.from,t,M;return typeof U!="function"?!1:(t=["raz","dwa"],M=U(t),!!(M&&M!==t&&M[1]==="dwa"))}},80816:function(Q,U,t){var M=t(92664).iterator,E=t(60948),i=t(17024),C=t(81304),T=t(34044),v=t(9252),d=t(42584),r=t(29768),e=Array.isArray,l=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;Q.exports=function(o){var p=arguments[1],b=arguments[2],h,_,a,c,f,x,k,y,A,L;if(o=Object(v(o)),d(p)&&T(p),!this||this===Array||!i(this)){if(!p){if(E(o))return f=o.length,f!==1?Array.apply(null,o):(c=new Array(1),c[0]=o[0],c);if(e(o)){for(c=new Array(f=o.length),_=0;_<f;++_)c[_]=o[_];return c}}c=[]}else h=this;if(!e(o)){if((A=o[M])!==void 0){for(k=T(A).call(o),h&&(c=new h),y=k.next(),_=0;!y.done;)L=p?l.call(p,b,y.value,_):y.value,h?(n.value=L,s(c,_,n)):c[_]=L,y=k.next(),++_;f=_}else if(r(o)){for(f=o.length,h&&(c=new h),_=0,a=0;_<f;++_)L=o[_],_+1<f&&(x=L.charCodeAt(0),x>=55296&&x<=56319&&(L+=o[++_])),L=p?l.call(p,b,L,a):L,h?(n.value=L,s(c,a,n)):c[a]=L,++a;f=a}}if(f===void 0)for(f=C(o.length),h&&(c=new h(f)),_=0;_<f;++_)L=p?l.call(p,b,o[_],_):o[_],h?(n.value=L,s(c,_,n)):c[_]=L;return h&&(n.value=null,c.length=f),c}},60948:function(Q){var U=Object.prototype.toString,t=U.call(function(){return arguments}());Q.exports=function(M){return U.call(M)===t}},17024:function(Q){var U=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);Q.exports=function(M){return typeof M=="function"&&t(U.call(M))}},33208:function(Q){Q.exports=function(){}},85608:function(Q,U,t){Q.exports=t(37328)()?Math.sign:t(92928)},37328:function(Q){Q.exports=function(){var U=Math.sign;return typeof U!="function"?!1:U(10)===1&&U(-20)===-1}},92928:function(Q){Q.exports=function(U){return U=Number(U),isNaN(U)||U===0?U:U>0?1:-1}},96936:function(Q,U,t){var M=t(85608),E=Math.abs,i=Math.floor;Q.exports=function(C){return isNaN(C)?0:(C=Number(C),C===0||!isFinite(C)?C:M(C)*i(E(C)))}},81304:function(Q,U,t){var M=t(96936),E=Math.max;Q.exports=function(i){return E(0,M(i))}},14428:function(Q,U,t){var M=t(34044),E=t(9252),i=Function.prototype.bind,C=Function.prototype.call,T=Object.keys,v=Object.prototype.propertyIsEnumerable;Q.exports=function(d,r){return function(e,l){var n,s=arguments[2],o=arguments[3];return e=Object(E(e)),M(l),n=T(e),o&&n.sort(typeof o=="function"?i.call(o,e):void 0),typeof d!="function"&&(d=n[d]),C.call(d,n,function(p,b){return v.call(e,p)?C.call(l,s,e[p],p,e,b):r})}}},38452:function(Q,U,t){Q.exports=t(96276)()?Object.assign:t(81892)},96276:function(Q){Q.exports=function(){var U=Object.assign,t;return typeof U!="function"?!1:(t={foo:"raz"},U(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},81892:function(Q,U,t){var M=t(54768),E=t(9252),i=Math.max;Q.exports=function(C,T){var v,d,r=i(arguments.length,2),e;for(C=Object(E(C)),e=function(l){try{C[l]=T[l]}catch(n){v||(v=n)}},d=1;d<r;++d)T=arguments[d],M(T).forEach(e);if(v!==void 0)throw v;return C}},95920:function(Q,U,t){var M=t(74772),E=t(38452),i=t(9252);Q.exports=function(C){var T=Object(i(C)),v=arguments[1],d=Object(arguments[2]);if(T!==C&&!v)return T;var r={};return v?M(v,function(e){(d.ensure||e in C)&&(r[e]=C[e])}):E(r,C),r}},14452:function(Q,U,t){var M=Object.create,E;t(63092)()||(E=t(8672)),Q.exports=function(){var i,C,T;return!E||E.level!==1?M:(i={},C={},T={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(v){if(v==="__proto__"){C[v]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}C[v]=T}),Object.defineProperties(i,C),Object.defineProperty(E,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(v,d){return M(v===null?i:v,d)})}()},42748:function(Q,U,t){Q.exports=t(14428)("forEach")},69127:function(Q,U,t){var M=t(42584),E={function:!0,object:!0};Q.exports=function(i){return M(i)&&E[typeof i]||!1}},42584:function(Q,U,t){var M=t(33208)();Q.exports=function(E){return E!==M&&E!==null}},54768:function(Q,U,t){Q.exports=t(87888)()?Object.keys:t(89592)},87888:function(Q){Q.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(Q,U,t){var M=t(42584),E=Object.keys;Q.exports=function(i){return E(M(i)?Object(i):i)}},84323:function(Q,U,t){var M=t(34044),E=t(42748),i=Function.prototype.call;Q.exports=function(C,T){var v={},d=arguments[2];return M(T),E(C,function(r,e,l,n){v[e]=i.call(T,d,r,e,l,n)}),v}},50868:function(Q,U,t){var M=t(42584),E=Array.prototype.forEach,i=Object.create,C=function(T,v){var d;for(d in T)v[d]=T[d]};Q.exports=function(T){var v=i(null);return E.call(arguments,function(d){M(d)&&C(Object(d),v)}),v}},69932:function(Q,U,t){Q.exports=t(63092)()?Object.setPrototypeOf:t(8672)},63092:function(Q){var U=Object.create,t=Object.getPrototypeOf,M={};Q.exports=function(){var E=Object.setPrototypeOf,i=arguments[0]||U;return typeof E!="function"?!1:t(E(i(null),M))===M}},8672:function(Q,U,t){var M=t(69127),E=t(9252),i=Object.prototype.isPrototypeOf,C=Object.defineProperty,T={configurable:!0,enumerable:!1,writable:!0,value:void 0},v;v=function(d,r){if(E(d),r===null||M(r))return d;throw new TypeError("Prototype must be null or an object")},Q.exports=function(d){var r,e;return d?(d.level===2?d.set?(e=d.set,r=function(l,n){return e.call(v(l,n),n),l}):r=function(l,n){return v(l,n).__proto__=n,l}:r=function l(n,s){var o;return v(n,s),o=i.call(l.nullPolyfill,n),o&&delete l.nullPolyfill.__proto__,s===null&&(s=l.nullPolyfill),n.__proto__=s,o&&C(l.nullPolyfill,"__proto__",T),n},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:d.level})):null}(function(){var d=Object.create(null),r={},e,l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(l){try{e=l.set,e.call(d,r)}catch{}if(Object.getPrototypeOf(d)===r)return{set:e,level:2}}return d.__proto__=r,Object.getPrototypeOf(d)===r?{level:2}:(d={},d.__proto__=r,Object.getPrototypeOf(d)===r?{level:1}:!1)}()),t(14452)},34044:function(Q){Q.exports=function(U){if(typeof U!="function")throw new TypeError(U+" is not a function");return U}},92584:function(Q,U,t){var M=t(69127);Q.exports=function(E){if(!M(E))throw new TypeError(E+" is not an Object");return E}},9252:function(Q,U,t){var M=t(42584);Q.exports=function(E){if(!M(E))throw new TypeError("Cannot use null or undefined");return E}},71056:function(Q,U,t){Q.exports=t(42976)()?String.prototype.contains:t(93040)},42976:function(Q){var U="razdwatrzy";Q.exports=function(){return typeof U.contains!="function"?!1:U.contains("dwa")===!0&&U.contains("foo")===!1}},93040:function(Q){var U=String.prototype.indexOf;Q.exports=function(t){return U.call(this,t,arguments[1])>-1}},29768:function(Q){var U=Object.prototype.toString,t=U.call("");Q.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||U.call(M)===t)||!1}},82252:function(Q){var U=Object.create(null),t=Math.random;Q.exports=function(){var M;do M=t().toString(36).slice(2);while(U[M]);return M}},52104:function(Q,U,t){var M=t(69932),E=t(71056),i=t(21092),C=t(92664),T=t(85512),v=Object.defineProperty,d;d=Q.exports=function(r,e){if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");T.call(this,r),e?E.call(e,"key+value")?e="key+value":E.call(e,"key")?e="key":e="value":e="value",v(this,"__kind__",i("",e))},M&&M(d,T),delete d.prototype.constructor,d.prototype=Object.create(T.prototype,{_resolve:i(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),v(d.prototype,C.toStringTag,i("c","Array Iterator"))},76024:function(Q,U,t){var M=t(60948),E=t(34044),i=t(29768),C=t(76252),T=Array.isArray,v=Function.prototype.call,d=Array.prototype.some;Q.exports=function(r,e){var l,n=arguments[2],s,o,p,b,h,_,a;if(T(r)||M(r)?l="array":i(r)?l="string":r=C(r),E(e),o=function(){p=!0},l==="array"){d.call(r,function(c){return v.call(e,n,c,o),p});return}if(l==="string"){for(h=r.length,b=0;b<h&&(_=r[b],b+1<h&&(a=_.charCodeAt(0),a>=55296&&a<=56319&&(_+=r[++b])),v.call(e,n,_,o),!p);++b);return}for(s=r.next();!s.done;){if(v.call(e,n,s.value,o),p)return;s=r.next()}}},76252:function(Q,U,t){var M=t(60948),E=t(29768),i=t(52104),C=t(80940),T=t(52891),v=t(92664).iterator;Q.exports=function(d){return typeof T(d)[v]=="function"?d[v]():M(d)?new i(d):E(d)?new C(d):new i(d)}},85512:function(Q,U,t){var M=t(41476),E=t(38452),i=t(34044),C=t(9252),T=t(21092),v=t(27940),d=t(92664),r=Object.defineProperty,e=Object.defineProperties,l;Q.exports=l=function(n,s){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");e(this,{__list__:T("w",C(n)),__context__:T("w",s),__nextIndex__:T("w",0)}),s&&(i(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete l.prototype.constructor,e(l.prototype,E({_next:T(function(){var n;if(this.__list__){if(this.__redo__&&(n=this.__redo__.shift(),n!==void 0))return n;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:T(function(){return this._createResult(this._next())}),_createResult:T(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:T(function(n){return this.__list__[n]}),_unBind:T(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:T(function(){return"[object "+(this[d.toStringTag]||"Object")+"]"})},v({_onAdd:T(function(n){if(!(n>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",T("c",[n]));return}this.__redo__.forEach(function(s,o){s>=n&&(this.__redo__[o]=++s)},this),this.__redo__.push(n)}}),_onDelete:T(function(n){var s;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(s=this.__redo__.indexOf(n),s!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(o,p){o>n&&(this.__redo__[p]=--o)},this)))}),_onClear:T(function(){this.__redo__&&M.call(this.__redo__),this.__nextIndex__=0})}))),r(l.prototype,d.iterator,T(function(){return this}))},76368:function(Q,U,t){var M=t(60948),E=t(42584),i=t(29768),C=t(92664).iterator,T=Array.isArray;Q.exports=function(v){return E(v)?T(v)||i(v)||M(v)?!0:typeof v[C]=="function":!1}},80940:function(Q,U,t){var M=t(69932),E=t(21092),i=t(92664),C=t(85512),T=Object.defineProperty,v;v=Q.exports=function(d){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");d=String(d),C.call(this,d),T(this,"__length__",E("",d.length))},M&&M(v,C),delete v.prototype.constructor,v.prototype=Object.create(C.prototype,{_next:E(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:E(function(d){var r=this.__list__[d],e;return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0),e>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),T(v.prototype,i.toStringTag,E("c","String Iterator"))},52891:function(Q,U,t){var M=t(76368);Q.exports=function(E){if(!M(E))throw new TypeError(E+" is not iterable");return E}},60964:function(Q){function U(M,E){if(M==null)throw new TypeError("Cannot convert first argument to object");for(var i=Object(M),C=1;C<arguments.length;C++){var T=arguments[C];if(T!=null)for(var v=Object.keys(Object(T)),d=0,r=v.length;d<r;d++){var e=v[d],l=Object.getOwnPropertyDescriptor(T,e);l!==void 0&&l.enumerable&&(i[e]=T[e])}}return i}function t(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:U})}Q.exports={assign:U,polyfill:t}},92664:function(Q,U,t){Q.exports=t(43580)()?t(12296).Symbol:t(18376)},43580:function(Q,U,t){var M=t(12296),E={object:!0,symbol:!0};Q.exports=function(){var i=M.Symbol,C;if(typeof i!="function")return!1;C=i("test symbol");try{String(C)}catch{return!1}return!(!E[typeof i.iterator]||!E[typeof i.toPrimitive]||!E[typeof i.toStringTag])}},53908:function(Q){Q.exports=function(U){return U?typeof U=="symbol"?!0:!U.constructor||U.constructor.name!=="Symbol"?!1:U[U.constructor.toStringTag]==="Symbol":!1}},96863:function(Q,U,t){var M=t(21092),E=Object.create,i=Object.defineProperty,C=Object.prototype,T=E(null);Q.exports=function(v){for(var d=0,r,e;T[v+(d||"")];)++d;return v+=d||"",T[v]=!0,r="@@"+v,i(C,r,M.gs(null,function(l){e||(e=!0,i(this,r,M(l)),e=!1)})),r}},53540:function(Q,U,t){var M=t(21092),E=t(12296).Symbol;Q.exports=function(i){return Object.defineProperties(i,{hasInstance:M("",E&&E.hasInstance||i("hasInstance")),isConcatSpreadable:M("",E&&E.isConcatSpreadable||i("isConcatSpreadable")),iterator:M("",E&&E.iterator||i("iterator")),match:M("",E&&E.match||i("match")),replace:M("",E&&E.replace||i("replace")),search:M("",E&&E.search||i("search")),species:M("",E&&E.species||i("species")),split:M("",E&&E.split||i("split")),toPrimitive:M("",E&&E.toPrimitive||i("toPrimitive")),toStringTag:M("",E&&E.toStringTag||i("toStringTag")),unscopables:M("",E&&E.unscopables||i("unscopables"))})}},73852:function(Q,U,t){var M=t(21092),E=t(63948),i=Object.create(null);Q.exports=function(C){return Object.defineProperties(C,{for:M(function(T){return i[T]?i[T]:i[T]=C(String(T))}),keyFor:M(function(T){var v;E(T);for(v in i)if(i[v]===T)return v})})}},18376:function(Q,U,t){var M=t(21092),E=t(63948),i=t(12296).Symbol,C=t(96863),T=t(53540),v=t(73852),d=Object.create,r=Object.defineProperties,e=Object.defineProperty,l,n,s;if(typeof i=="function")try{String(i()),s=!0}catch{}else i=null;n=function(o){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return l(o)},Q.exports=l=function o(p){var b;if(this instanceof o)throw new TypeError("Symbol is not a constructor");return s?i(p):(b=d(n.prototype),p=p===void 0?"":String(p),r(b,{__description__:M("",p),__name__:M("",C(p))}))},T(l),v(l),r(n.prototype,{constructor:M(l),toString:M("",function(){return this.__name__})}),r(l.prototype,{toString:M(function(){return"Symbol ("+E(this).__description__+")"}),valueOf:M(function(){return E(this)})}),e(l.prototype,l.toPrimitive,M("",function(){var o=E(this);return typeof o=="symbol"?o:o.toString()})),e(l.prototype,l.toStringTag,M("c","Symbol")),e(n.prototype,l.toStringTag,M("c",l.prototype[l.toStringTag])),e(n.prototype,l.toPrimitive,M("c",l.prototype[l.toPrimitive]))},63948:function(Q,U,t){var M=t(53908);Q.exports=function(E){if(!M(E))throw new TypeError(E+" is not a symbol");return E}},60463:function(Q,U,t){Q.exports=t(96979)()?WeakMap:t(64864)},96979:function(Q){Q.exports=function(){var U,t;if(typeof WeakMap!="function")return!1;try{U=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(U)!=="[object WeakMap]"||typeof U.set!="function"||U.set({},1)!==U||typeof U.delete!="function"||typeof U.has!="function"||U.get(t)!=="one")}},69876:function(Q){Q.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},64864:function(Q,U,t){var M=t(42584),E=t(69932),i=t(92584),C=t(9252),T=t(82252),v=t(21092),d=t(76252),r=t(76024),e=t(92664).toStringTag,l=t(69876),n=Array.isArray,s=Object.defineProperty,o=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf,b;Q.exports=b=function(){var h=arguments[0],_;if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");return _=l&&E&&WeakMap!==b?E(new WeakMap,p(this)):this,M(h)&&(n(h)||(h=d(h))),s(_,"__weakMapData__",v("c","$weakMap$"+T())),h&&r(h,function(a){C(a),_.set(a[0],a[1])}),_},l&&(E&&E(b,WeakMap),b.prototype=Object.create(WeakMap.prototype,{constructor:v(b)})),Object.defineProperties(b.prototype,{delete:v(function(h){return o.call(i(h),this.__weakMapData__)?(delete h[this.__weakMapData__],!0):!1}),get:v(function(h){if(o.call(i(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:v(function(h){return o.call(i(h),this.__weakMapData__)}),set:v(function(h,_){return s(i(h),this.__weakMapData__,v("c",_)),this}),toString:v(function(){return"[object WeakMap]"})}),s(b.prototype,e,v("c","WeakMap"))},61252:function(Q){var U=typeof Reflect=="object"?Reflect:null,t=U&&typeof U.apply=="function"?U.apply:function(c,f,x){return Function.prototype.apply.call(c,f,x)},M;U&&typeof U.ownKeys=="function"?M=U.ownKeys:Object.getOwnPropertySymbols?M=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:M=function(c){return Object.getOwnPropertyNames(c)};function E(c){console&&console.warn&&console.warn(c)}var i=Number.isNaN||function(c){return c!==c};function C(){C.init.call(this)}Q.exports=C,Q.exports.once=h,C.EventEmitter=C,C.prototype._events=void 0,C.prototype._eventsCount=0,C.prototype._maxListeners=void 0;var T=10;function v(c){if(typeof c!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof c)}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(c){if(typeof c!="number"||c<0||i(c))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+c+".");T=c}}),C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||i(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function d(c){return c._maxListeners===void 0?C.defaultMaxListeners:c._maxListeners}C.prototype.getMaxListeners=function(){return d(this)},C.prototype.emit=function(c){for(var f=[],x=1;x<arguments.length;x++)f.push(arguments[x]);var k=c==="error",y=this._events;if(y!==void 0)k=k&&y.error===void 0;else if(!k)return!1;if(k){var A;if(f.length>0&&(A=f[0]),A instanceof Error)throw A;var L=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw L.context=A,L}var u=y[c];if(u===void 0)return!1;if(typeof u=="function")t(u,this,f);else for(var m=u.length,S=o(u,m),x=0;x<m;++x)t(S[x],this,f);return!0};function r(c,f,x,k){var y,A,L;if(v(x),A=c._events,A===void 0?(A=c._events=Object.create(null),c._eventsCount=0):(A.newListener!==void 0&&(c.emit("newListener",f,x.listener?x.listener:x),A=c._events),L=A[f]),L===void 0)L=A[f]=x,++c._eventsCount;else if(typeof L=="function"?L=A[f]=k?[x,L]:[L,x]:k?L.unshift(x):L.push(x),y=d(c),y>0&&L.length>y&&!L.warned){L.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=c,u.type=f,u.count=L.length,E(u)}return c}C.prototype.addListener=function(c,f){return r(this,c,f,!1)},C.prototype.on=C.prototype.addListener,C.prototype.prependListener=function(c,f){return r(this,c,f,!0)};function e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(c,f,x){var k={fired:!1,wrapFn:void 0,target:c,type:f,listener:x},y=e.bind(k);return y.listener=x,k.wrapFn=y,y}C.prototype.once=function(c,f){return v(f),this.on(c,l(this,c,f)),this},C.prototype.prependOnceListener=function(c,f){return v(f),this.prependListener(c,l(this,c,f)),this},C.prototype.removeListener=function(c,f){var x,k,y,A,L;if(v(f),k=this._events,k===void 0)return this;if(x=k[c],x===void 0)return this;if(x===f||x.listener===f)--this._eventsCount===0?this._events=Object.create(null):(delete k[c],k.removeListener&&this.emit("removeListener",c,x.listener||f));else if(typeof x!="function"){for(y=-1,A=x.length-1;A>=0;A--)if(x[A]===f||x[A].listener===f){L=x[A].listener,y=A;break}if(y<0)return this;y===0?x.shift():p(x,y),x.length===1&&(k[c]=x[0]),k.removeListener!==void 0&&this.emit("removeListener",c,L||f)}return this},C.prototype.off=C.prototype.removeListener,C.prototype.removeAllListeners=function(c){var f,x,k;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[c]),this;if(arguments.length===0){var y=Object.keys(x),A;for(k=0;k<y.length;++k)A=y[k],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(f=x[c],typeof f=="function")this.removeListener(c,f);else if(f!==void 0)for(k=f.length-1;k>=0;k--)this.removeListener(c,f[k]);return this};function n(c,f,x){var k=c._events;if(k===void 0)return[];var y=k[f];return y===void 0?[]:typeof y=="function"?x?[y.listener||y]:[y]:x?b(y):o(y,y.length)}C.prototype.listeners=function(c){return n(this,c,!0)},C.prototype.rawListeners=function(c){return n(this,c,!1)},C.listenerCount=function(c,f){return typeof c.listenerCount=="function"?c.listenerCount(f):s.call(c,f)},C.prototype.listenerCount=s;function s(c){var f=this._events;if(f!==void 0){var x=f[c];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}C.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function o(c,f){for(var x=new Array(f),k=0;k<f;++k)x[k]=c[k];return x}function p(c,f){for(;f+1<c.length;f++)c[f]=c[f+1];c.pop()}function b(c){for(var f=new Array(c.length),x=0;x<f.length;++x)f[x]=c[x].listener||c[x];return f}function h(c,f){return new Promise(function(x,k){function y(L){c.removeListener(f,A),k(L)}function A(){typeof c.removeListener=="function"&&c.removeListener("error",y),x([].slice.call(arguments))}a(c,f,A,{once:!0}),f!=="error"&&_(c,y,{once:!0})})}function _(c,f,x){typeof c.on=="function"&&a(c,"error",f,x)}function a(c,f,x,k){if(typeof c.on=="function")k.once?c.once(f,x):c.on(f,x);else if(typeof c.addEventListener=="function")c.addEventListener(f,function y(A){k.once&&c.removeEventListener(f,y),x(A)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof c)}},39072:function(Q){var U=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};Q.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return U()}try{return __global__||U()}finally{delete Object.prototype.__global__}}()},12296:function(Q,U,t){Q.exports=t(45072)()?globalThis:t(39072)},45072:function(Q){Q.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},38248:function(Q,U,t){var M=t(94576);Q.exports=function(E){var i=typeof E;if(i==="string"){var C=E;if(E=+E,E===0&&M(C))return!1}else if(i!=="number")return!1;return E-E<1}},47520:function(Q,U,t){var M=t(72512);Q.exports=E;function E(i,C,T){if(!i)throw new TypeError("must specify data as first parameter");if(T=+(T||0)|0,Array.isArray(i)&&i[0]&&typeof i[0][0]=="number"){var v=i[0].length,d=i.length*v,r,e,l,n;(!C||typeof C=="string")&&(C=new(M(C||"float32"))(d+T));var s=C.length-T;if(d!==s)throw new Error("source length "+d+" ("+v+"x"+i.length+") does not match destination length "+s);for(r=0,l=T;r<i.length;r++)for(e=0;e<v;e++)C[l++]=i[r][e]===null?NaN:i[r][e]}else if(!C||typeof C=="string"){var o=M(C||"float32");if(Array.isArray(i)||C==="array")for(C=new o(i.length+T),r=0,l=T,n=C.length;l<n;l++,r++)C[l]=i[r]===null?NaN:i[r];else T===0?C=new o(i):(C=new o(i.length+T),C.set(i,T))}else C.set(i,T);return C}},33888:function(Q,U,t){var M=t(49395),E=[32,126];Q.exports=i;function i(C){C=C||{};var T=C.shape?C.shape:C.canvas?[C.canvas.width,C.canvas.height]:[512,512],v=C.canvas||document.createElement("canvas"),d=C.font,r=typeof C.step=="number"?[C.step,C.step]:C.step||[32,32],e=C.chars||E;if(d&&typeof d!="string"&&(d=M(d)),!Array.isArray(e))e=String(e).split("");else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){for(var l=[],n=e[0],s=0;n<=e[1];n++)l[s++]=String.fromCharCode(n);e=l}T=T.slice(),v.width=T[0],v.height=T[1];var o=v.getContext("2d");o.fillStyle="#000",o.fillRect(0,0,v.width,v.height),o.font=d,o.textAlign="center",o.textBaseline="middle",o.fillStyle="#fff";for(var p=r[0]/2,b=r[1]/2,n=0;n<e.length;n++)o.fillText(e[n],p,b),(p+=r[0])>T[0]-r[0]/2&&(p=r[0]/2,b+=r[1]);return v}},71920:function(Q){Q.exports=U,U.canvas=document.createElement("canvas"),U.cache={};function U(e,C){C||(C={}),(typeof e=="string"||Array.isArray(e))&&(C.family=e);var T=Array.isArray(C.family)?C.family.join(", "):C.family;if(!T)throw Error("`family` must be defined");var v=C.size||C.fontSize||C.em||48,d=C.weight||C.fontWeight||"",r=C.style||C.fontStyle||"",e=[r,d,v].join(" ")+"px "+T,l=C.origin||"top";if(U.cache[T]&&v<=U.cache[T].em)return t(U.cache[T],l);var n=C.canvas||U.canvas,s=n.getContext("2d"),o={upper:C.upper!==void 0?C.upper:"H",lower:C.lower!==void 0?C.lower:"x",descent:C.descent!==void 0?C.descent:"p",ascent:C.ascent!==void 0?C.ascent:"h",tittle:C.tittle!==void 0?C.tittle:"i",overshoot:C.overshoot!==void 0?C.overshoot:"O"},p=Math.ceil(v*1.5);n.height=p,n.width=p*.5,s.font=e;var b="H",h={top:0};s.clearRect(0,0,p,p),s.textBaseline="top",s.fillStyle="black",s.fillText(b,0,0);var _=M(s.getImageData(0,0,p,p));s.clearRect(0,0,p,p),s.textBaseline="bottom",s.fillText(b,0,p);var a=M(s.getImageData(0,0,p,p));h.lineHeight=h.bottom=p-a+_,s.clearRect(0,0,p,p),s.textBaseline="alphabetic",s.fillText(b,0,p);var c=M(s.getImageData(0,0,p,p)),f=p-c-1+_;h.baseline=h.alphabetic=f,s.clearRect(0,0,p,p),s.textBaseline="middle",s.fillText(b,0,p*.5);var x=M(s.getImageData(0,0,p,p));h.median=h.middle=p-x-1+_-p*.5,s.clearRect(0,0,p,p),s.textBaseline="hanging",s.fillText(b,0,p*.5);var k=M(s.getImageData(0,0,p,p));h.hanging=p-k-1+_-p*.5,s.clearRect(0,0,p,p),s.textBaseline="ideographic",s.fillText(b,0,p);var y=M(s.getImageData(0,0,p,p));if(h.ideographic=p-y-1+_,o.upper&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(o.upper,0,0),h.upper=M(s.getImageData(0,0,p,p)),h.capHeight=h.baseline-h.upper),o.lower&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(o.lower,0,0),h.lower=M(s.getImageData(0,0,p,p)),h.xHeight=h.baseline-h.lower),o.tittle&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(o.tittle,0,0),h.tittle=M(s.getImageData(0,0,p,p))),o.ascent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(o.ascent,0,0),h.ascent=M(s.getImageData(0,0,p,p))),o.descent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(o.descent,0,0),h.descent=E(s.getImageData(0,0,p,p))),o.overshoot){s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(o.overshoot,0,0);var A=E(s.getImageData(0,0,p,p));h.overshoot=A-f}for(var L in h)h[L]/=v;return h.em=v,U.cache[T]=h,t(h,l)}function t(i,C){var T={};typeof C=="string"&&(C=i[C]);for(var v in i)v!=="em"&&(T[v]=i[v]-C);return T}function M(i){for(var C=i.height,T=i.data,v=3;v<T.length;v+=4)if(T[v]!==0)return Math.floor((v-3)*.25/C)}function E(i){for(var C=i.height,T=i.data,v=T.length-1;v>0;v-=4)if(T[v]!==0)return Math.floor((v-3)*.25/C)}},46492:function(Q,U,t){var M=t(90720),E=Object.prototype.toString,i=Object.prototype.hasOwnProperty,C=function(r,e,l){for(var n=0,s=r.length;n<s;n++)i.call(r,n)&&(l==null?e(r[n],n,r):e.call(l,r[n],n,r))},T=function(r,e,l){for(var n=0,s=r.length;n<s;n++)l==null?e(r.charAt(n),n,r):e.call(l,r.charAt(n),n,r)},v=function(r,e,l){for(var n in r)i.call(r,n)&&(l==null?e(r[n],n,r):e.call(l,r[n],n,r))},d=function(r,e,l){if(!M(e))throw new TypeError("iterator must be a function");var n;arguments.length>=3&&(n=l),E.call(r)==="[object Array]"?C(r,e,n):typeof r=="string"?T(r,e,n):v(r,e,n)};Q.exports=d},74336:function(Q){var U="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,M=Math.max,E="[object Function]",i=function(v,d){for(var r=[],e=0;e<v.length;e+=1)r[e]=v[e];for(var l=0;l<d.length;l+=1)r[l+v.length]=d[l];return r},C=function(v,d){for(var r=[],e=d||0,l=0;e<v.length;e+=1,l+=1)r[l]=v[e];return r},T=function(v,d){for(var r="",e=0;e<v.length;e+=1)r+=v[e],e+1<v.length&&(r+=d);return r};Q.exports=function(v){var d=this;if(typeof d!="function"||t.apply(d)!==E)throw new TypeError(U+d);for(var r=C(arguments,1),e,l=function(){if(this instanceof e){var b=d.apply(this,i(r,arguments));return Object(b)===b?b:this}return d.apply(v,i(r,arguments))},n=M(0,d.length-r.length),s=[],o=0;o<n;o++)s[o]="$"+o;if(e=Function("binder","return function ("+T(s,",")+"){ return binder.apply(this,arguments); }")(l),d.prototype){var p=function(){};p.prototype=d.prototype,e.prototype=new p,p.prototype=null}return e}},8844:function(Q,U,t){var M=t(74336);Q.exports=Function.prototype.bind||M},13380:function(Q){Q.exports=U;function U(t,M){if(typeof t!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var E=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(E.width=M.width),typeof M.height=="number"&&(E.height=M.height);var i=M,C;try{var T=[t];t.indexOf("webgl")===0&&T.push("experimental-"+t);for(var v=0;v<T.length;v++)if(C=E.getContext(T[v],i),C)return C}catch{C=null}return C||null}},53664:function(Q,U,t){var M,E=SyntaxError,i=Function,C=TypeError,T=function(w){try{return i('"use strict"; return ('+w+").constructor;")()}catch{}},v=Object.getOwnPropertyDescriptor;if(v)try{v({},"")}catch{v=null}var d=function(){throw new C},r=v?function(){try{return arguments.callee,d}catch{try{return v(arguments,"callee").get}catch{return d}}}():d,e=t(71080)(),l=t(69572)(),n=Object.getPrototypeOf||(l?function(w){return w.__proto__}:null),s={},o=typeof Uint8Array>"u"||!n?M:n(Uint8Array),p={"%AggregateError%":typeof AggregateError>"u"?M:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?M:ArrayBuffer,"%ArrayIteratorPrototype%":e&&n?n([][Symbol.iterator]()):M,"%AsyncFromSyncIteratorPrototype%":M,"%AsyncFunction%":s,"%AsyncGenerator%":s,"%AsyncGeneratorFunction%":s,"%AsyncIteratorPrototype%":s,"%Atomics%":typeof Atomics>"u"?M:Atomics,"%BigInt%":typeof BigInt>"u"?M:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?M:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?M:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?M:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?M:Float32Array,"%Float64Array%":typeof Float64Array>"u"?M:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?M:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":s,"%Int8Array%":typeof Int8Array>"u"?M:Int8Array,"%Int16Array%":typeof Int16Array>"u"?M:Int16Array,"%Int32Array%":typeof Int32Array>"u"?M:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":e&&n?n(n([][Symbol.iterator]())):M,"%JSON%":typeof JSON=="object"?JSON:M,"%Map%":typeof Map>"u"?M:Map,"%MapIteratorPrototype%":typeof Map>"u"||!e||!n?M:n(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?M:Promise,"%Proxy%":typeof Proxy>"u"?M:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?M:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?M:Set,"%SetIteratorPrototype%":typeof Set>"u"||!e||!n?M:n(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?M:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":e&&n?n(""[Symbol.iterator]()):M,"%Symbol%":e?Symbol:M,"%SyntaxError%":E,"%ThrowTypeError%":r,"%TypedArray%":o,"%TypeError%":C,"%Uint8Array%":typeof Uint8Array>"u"?M:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?M:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?M:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?M:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?M:WeakMap,"%WeakRef%":typeof WeakRef>"u"?M:WeakRef,"%WeakSet%":typeof WeakSet>"u"?M:WeakSet};if(n)try{null.error}catch(w){var b=n(n(w));p["%Error.prototype%"]=b}var h=function w(I){var O;if(I==="%AsyncFunction%")O=T("async function () {}");else if(I==="%GeneratorFunction%")O=T("function* () {}");else if(I==="%AsyncGeneratorFunction%")O=T("async function* () {}");else if(I==="%AsyncGenerator%"){var D=w("%AsyncGeneratorFunction%");D&&(O=D.prototype)}else if(I==="%AsyncIteratorPrototype%"){var P=w("%AsyncGenerator%");P&&n&&(O=n(P.prototype))}return p[I]=O,O},_={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},a=t(8844),c=t(92064),f=a.call(Function.call,Array.prototype.concat),x=a.call(Function.apply,Array.prototype.splice),k=a.call(Function.call,String.prototype.replace),y=a.call(Function.call,String.prototype.slice),A=a.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,u=/\\(\\)?/g,m=function(w){var I=y(w,0,1),O=y(w,-1);if(I==="%"&&O!=="%")throw new E("invalid intrinsic syntax, expected closing `%`");if(O==="%"&&I!=="%")throw new E("invalid intrinsic syntax, expected opening `%`");var D=[];return k(w,L,function(P,F,R,B){D[D.length]=R?k(B,u,"$1"):F||P}),D},S=function(w,I){var O=w,D;if(c(_,O)&&(D=_[O],O="%"+D[0]+"%"),c(p,O)){var P=p[O];if(P===s&&(P=h(O)),typeof P>"u"&&!I)throw new C("intrinsic "+w+" exists, but is not available. Please file an issue!");return{alias:D,name:O,value:P}}throw new E("intrinsic "+w+" does not exist!")};Q.exports=function(w,I){if(typeof w!="string"||w.length===0)throw new C("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof I!="boolean")throw new C('"allowMissing" argument must be a boolean');if(A(/^%?[^%]*%?$/,w)===null)throw new E("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=m(w),D=O.length>0?O[0]:"",P=S("%"+D+"%",I),F=P.name,R=P.value,B=!1,N=P.alias;N&&(D=N[0],x(O,f([0,1],N)));for(var G=1,X=!0;G<O.length;G+=1){var J=O[G],it=y(J,0,1),nt=y(J,-1);if((it==='"'||it==="'"||it==="`"||nt==='"'||nt==="'"||nt==="`")&&it!==nt)throw new E("property names with quotes must have matching quotes");if((J==="constructor"||!X)&&(B=!0),D+="."+J,F="%"+D+"%",c(p,F))R=p[F];else if(R!=null){if(!(J in R)){if(!I)throw new C("base intrinsic for "+w+" exists, but the property is not available.");return}if(v&&G+1>=O.length){var q=v(R,J);X=!!q,X&&"get"in q&&!("originalValue"in q.get)?R=q.get:R=R[J]}else X=c(R,J),R=R[J];X&&!B&&(p[F]=R)}}return R}},12408:function(Q){Q.exports=U;function U(t,M){var E=M[0],i=M[1],C=M[2],T=M[3],v=M[4],d=M[5],r=M[6],e=M[7],l=M[8],n=M[9],s=M[10],o=M[11],p=M[12],b=M[13],h=M[14],_=M[15];return t[0]=d*(s*_-o*h)-n*(r*_-e*h)+b*(r*o-e*s),t[1]=-(i*(s*_-o*h)-n*(C*_-T*h)+b*(C*o-T*s)),t[2]=i*(r*_-e*h)-d*(C*_-T*h)+b*(C*e-T*r),t[3]=-(i*(r*o-e*s)-d*(C*o-T*s)+n*(C*e-T*r)),t[4]=-(v*(s*_-o*h)-l*(r*_-e*h)+p*(r*o-e*s)),t[5]=E*(s*_-o*h)-l*(C*_-T*h)+p*(C*o-T*s),t[6]=-(E*(r*_-e*h)-v*(C*_-T*h)+p*(C*e-T*r)),t[7]=E*(r*o-e*s)-v*(C*o-T*s)+l*(C*e-T*r),t[8]=v*(n*_-o*b)-l*(d*_-e*b)+p*(d*o-e*n),t[9]=-(E*(n*_-o*b)-l*(i*_-T*b)+p*(i*o-T*n)),t[10]=E*(d*_-e*b)-v*(i*_-T*b)+p*(i*e-T*d),t[11]=-(E*(d*o-e*n)-v*(i*o-T*n)+l*(i*e-T*d)),t[12]=-(v*(n*h-s*b)-l*(d*h-r*b)+p*(d*s-r*n)),t[13]=E*(n*h-s*b)-l*(i*h-C*b)+p*(i*s-C*n),t[14]=-(E*(d*h-r*b)-v*(i*h-C*b)+p*(i*r-C*d)),t[15]=E*(d*s-r*n)-v*(i*s-C*n)+l*(i*r-C*d),t}},76860:function(Q){Q.exports=U;function U(t){var M=new Float32Array(16);return M[0]=t[0],M[1]=t[1],M[2]=t[2],M[3]=t[3],M[4]=t[4],M[5]=t[5],M[6]=t[6],M[7]=t[7],M[8]=t[8],M[9]=t[9],M[10]=t[10],M[11]=t[11],M[12]=t[12],M[13]=t[13],M[14]=t[14],M[15]=t[15],M}},64492:function(Q){Q.exports=U;function U(t,M){return t[0]=M[0],t[1]=M[1],t[2]=M[2],t[3]=M[3],t[4]=M[4],t[5]=M[5],t[6]=M[6],t[7]=M[7],t[8]=M[8],t[9]=M[9],t[10]=M[10],t[11]=M[11],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15],t}},54212:function(Q){Q.exports=U;function U(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},70800:function(Q){Q.exports=U;function U(t){var M=t[0],E=t[1],i=t[2],C=t[3],T=t[4],v=t[5],d=t[6],r=t[7],e=t[8],l=t[9],n=t[10],s=t[11],o=t[12],p=t[13],b=t[14],h=t[15],_=M*v-E*T,a=M*d-i*T,c=M*r-C*T,f=E*d-i*v,x=E*r-C*v,k=i*r-C*d,y=e*p-l*o,A=e*b-n*o,L=e*h-s*o,u=l*b-n*p,m=l*h-s*p,S=n*h-s*b;return _*S-a*m+c*u+f*L-x*A+k*y}},61784:function(Q){Q.exports=U;function U(t,M){var E=M[0],i=M[1],C=M[2],T=M[3],v=E+E,d=i+i,r=C+C,e=E*v,l=i*v,n=i*d,s=C*v,o=C*d,p=C*r,b=T*v,h=T*d,_=T*r;return t[0]=1-n-p,t[1]=l+_,t[2]=s-h,t[3]=0,t[4]=l-_,t[5]=1-e-p,t[6]=o+b,t[7]=0,t[8]=s+h,t[9]=o-b,t[10]=1-e-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},91616:function(Q){Q.exports=U;function U(t,M,E){var i,C,T,v=E[0],d=E[1],r=E[2],e=Math.sqrt(v*v+d*d+r*r);return Math.abs(e)<1e-6?null:(e=1/e,v*=e,d*=e,r*=e,i=Math.sin(M),C=Math.cos(M),T=1-C,t[0]=v*v*T+C,t[1]=d*v*T+r*i,t[2]=r*v*T-d*i,t[3]=0,t[4]=v*d*T-r*i,t[5]=d*d*T+C,t[6]=r*d*T+v*i,t[7]=0,t[8]=v*r*T+d*i,t[9]=d*r*T-v*i,t[10]=r*r*T+C,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}},51944:function(Q){Q.exports=U;function U(t,M,E){var i=M[0],C=M[1],T=M[2],v=M[3],d=i+i,r=C+C,e=T+T,l=i*d,n=i*r,s=i*e,o=C*r,p=C*e,b=T*e,h=v*d,_=v*r,a=v*e;return t[0]=1-(o+b),t[1]=n+a,t[2]=s-_,t[3]=0,t[4]=n-a,t[5]=1-(l+b),t[6]=p+h,t[7]=0,t[8]=s+_,t[9]=p-h,t[10]=1-(l+o),t[11]=0,t[12]=E[0],t[13]=E[1],t[14]=E[2],t[15]=1,t}},69444:function(Q){Q.exports=U;function U(t,M){return t[0]=M[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=M[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=M[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},48268:function(Q){Q.exports=U;function U(t,M){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=M[0],t[13]=M[1],t[14]=M[2],t[15]=1,t}},21856:function(Q){Q.exports=U;function U(t,M){var E=Math.sin(M),i=Math.cos(M);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=E,t[7]=0,t[8]=0,t[9]=-E,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},79216:function(Q){Q.exports=U;function U(t,M){var E=Math.sin(M),i=Math.cos(M);return t[0]=i,t[1]=0,t[2]=-E,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=E,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},57736:function(Q){Q.exports=U;function U(t,M){var E=Math.sin(M),i=Math.cos(M);return t[0]=i,t[1]=E,t[2]=0,t[3]=0,t[4]=-E,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},38848:function(Q){Q.exports=U;function U(t,M,E,i,C,T,v){var d=1/(E-M),r=1/(C-i),e=1/(T-v);return t[0]=T*2*d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=T*2*r,t[6]=0,t[7]=0,t[8]=(E+M)*d,t[9]=(C+i)*r,t[10]=(v+T)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=v*T*2*e,t[15]=0,t}},36635:function(Q){Q.exports=U;function U(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},36524:function(Q,U,t){Q.exports={create:t(54212),clone:t(76860),copy:t(64492),identity:t(36635),transpose:t(86520),invert:t(4308),adjoint:t(12408),determinant:t(70800),multiply:t(80944),translate:t(35176),scale:t(68152),rotate:t(30016),rotateX:t(15456),rotateY:t(64840),rotateZ:t(4192),fromRotation:t(91616),fromRotationTranslation:t(51944),fromScaling:t(69444),fromTranslation:t(48268),fromXRotation:t(21856),fromYRotation:t(79216),fromZRotation:t(57736),fromQuat:t(61784),frustum:t(38848),perspective:t(51296),perspectiveFromFieldOfView:t(63688),ortho:t(97688),lookAt:t(56508),str:t(89412)}},4308:function(Q){Q.exports=U;function U(t,M){var E=M[0],i=M[1],C=M[2],T=M[3],v=M[4],d=M[5],r=M[6],e=M[7],l=M[8],n=M[9],s=M[10],o=M[11],p=M[12],b=M[13],h=M[14],_=M[15],a=E*d-i*v,c=E*r-C*v,f=E*e-T*v,x=i*r-C*d,k=i*e-T*d,y=C*e-T*r,A=l*b-n*p,L=l*h-s*p,u=l*_-o*p,m=n*h-s*b,S=n*_-o*b,w=s*_-o*h,I=a*w-c*S+f*m+x*u-k*L+y*A;return I?(I=1/I,t[0]=(d*w-r*S+e*m)*I,t[1]=(C*S-i*w-T*m)*I,t[2]=(b*y-h*k+_*x)*I,t[3]=(s*k-n*y-o*x)*I,t[4]=(r*u-v*w-e*L)*I,t[5]=(E*w-C*u+T*L)*I,t[6]=(h*f-p*y-_*c)*I,t[7]=(l*y-s*f+o*c)*I,t[8]=(v*S-d*u+e*A)*I,t[9]=(i*u-E*S-T*A)*I,t[10]=(p*k-b*f+_*a)*I,t[11]=(n*f-l*k-o*a)*I,t[12]=(d*L-v*m-r*A)*I,t[13]=(E*m-i*L+C*A)*I,t[14]=(b*c-p*x-h*a)*I,t[15]=(l*x-n*c+s*a)*I,t):null}},56508:function(Q,U,t){var M=t(36635);Q.exports=E;function E(i,C,T,v){var d,r,e,l,n,s,o,p,b,h,_=C[0],a=C[1],c=C[2],f=v[0],x=v[1],k=v[2],y=T[0],A=T[1],L=T[2];return Math.abs(_-y)<1e-6&&Math.abs(a-A)<1e-6&&Math.abs(c-L)<1e-6?M(i):(o=_-y,p=a-A,b=c-L,h=1/Math.sqrt(o*o+p*p+b*b),o*=h,p*=h,b*=h,d=x*b-k*p,r=k*o-f*b,e=f*p-x*o,h=Math.sqrt(d*d+r*r+e*e),h?(h=1/h,d*=h,r*=h,e*=h):(d=0,r=0,e=0),l=p*e-b*r,n=b*d-o*e,s=o*r-p*d,h=Math.sqrt(l*l+n*n+s*s),h?(h=1/h,l*=h,n*=h,s*=h):(l=0,n=0,s=0),i[0]=d,i[1]=l,i[2]=o,i[3]=0,i[4]=r,i[5]=n,i[6]=p,i[7]=0,i[8]=e,i[9]=s,i[10]=b,i[11]=0,i[12]=-(d*_+r*a+e*c),i[13]=-(l*_+n*a+s*c),i[14]=-(o*_+p*a+b*c),i[15]=1,i)}},80944:function(Q){Q.exports=U;function U(t,M,E){var i=M[0],C=M[1],T=M[2],v=M[3],d=M[4],r=M[5],e=M[6],l=M[7],n=M[8],s=M[9],o=M[10],p=M[11],b=M[12],h=M[13],_=M[14],a=M[15],c=E[0],f=E[1],x=E[2],k=E[3];return t[0]=c*i+f*d+x*n+k*b,t[1]=c*C+f*r+x*s+k*h,t[2]=c*T+f*e+x*o+k*_,t[3]=c*v+f*l+x*p+k*a,c=E[4],f=E[5],x=E[6],k=E[7],t[4]=c*i+f*d+x*n+k*b,t[5]=c*C+f*r+x*s+k*h,t[6]=c*T+f*e+x*o+k*_,t[7]=c*v+f*l+x*p+k*a,c=E[8],f=E[9],x=E[10],k=E[11],t[8]=c*i+f*d+x*n+k*b,t[9]=c*C+f*r+x*s+k*h,t[10]=c*T+f*e+x*o+k*_,t[11]=c*v+f*l+x*p+k*a,c=E[12],f=E[13],x=E[14],k=E[15],t[12]=c*i+f*d+x*n+k*b,t[13]=c*C+f*r+x*s+k*h,t[14]=c*T+f*e+x*o+k*_,t[15]=c*v+f*l+x*p+k*a,t}},97688:function(Q){Q.exports=U;function U(t,M,E,i,C,T,v){var d=1/(M-E),r=1/(i-C),e=1/(T-v);return t[0]=-2*d,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*e,t[11]=0,t[12]=(M+E)*d,t[13]=(C+i)*r,t[14]=(v+T)*e,t[15]=1,t}},51296:function(Q){Q.exports=U;function U(t,M,E,i,C){var T=1/Math.tan(M/2),v=1/(i-C);return t[0]=T/E,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=T,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(C+i)*v,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*C*i*v,t[15]=0,t}},63688:function(Q){Q.exports=U;function U(t,M,E,i){var C=Math.tan(M.upDegrees*Math.PI/180),T=Math.tan(M.downDegrees*Math.PI/180),v=Math.tan(M.leftDegrees*Math.PI/180),d=Math.tan(M.rightDegrees*Math.PI/180),r=2/(v+d),e=2/(C+T);return t[0]=r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-((v-d)*r*.5),t[9]=(C-T)*e*.5,t[10]=i/(E-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*E/(E-i),t[15]=0,t}},30016:function(Q){Q.exports=U;function U(t,M,E,i){var C=i[0],T=i[1],v=i[2],d=Math.sqrt(C*C+T*T+v*v),r,e,l,n,s,o,p,b,h,_,a,c,f,x,k,y,A,L,u,m,S,w,I,O;return Math.abs(d)<1e-6?null:(d=1/d,C*=d,T*=d,v*=d,r=Math.sin(E),e=Math.cos(E),l=1-e,n=M[0],s=M[1],o=M[2],p=M[3],b=M[4],h=M[5],_=M[6],a=M[7],c=M[8],f=M[9],x=M[10],k=M[11],y=C*C*l+e,A=T*C*l+v*r,L=v*C*l-T*r,u=C*T*l-v*r,m=T*T*l+e,S=v*T*l+C*r,w=C*v*l+T*r,I=T*v*l-C*r,O=v*v*l+e,t[0]=n*y+b*A+c*L,t[1]=s*y+h*A+f*L,t[2]=o*y+_*A+x*L,t[3]=p*y+a*A+k*L,t[4]=n*u+b*m+c*S,t[5]=s*u+h*m+f*S,t[6]=o*u+_*m+x*S,t[7]=p*u+a*m+k*S,t[8]=n*w+b*I+c*O,t[9]=s*w+h*I+f*O,t[10]=o*w+_*I+x*O,t[11]=p*w+a*I+k*O,M!==t&&(t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t)}},15456:function(Q){Q.exports=U;function U(t,M,E){var i=Math.sin(E),C=Math.cos(E),T=M[4],v=M[5],d=M[6],r=M[7],e=M[8],l=M[9],n=M[10],s=M[11];return M!==t&&(t[0]=M[0],t[1]=M[1],t[2]=M[2],t[3]=M[3],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t[4]=T*C+e*i,t[5]=v*C+l*i,t[6]=d*C+n*i,t[7]=r*C+s*i,t[8]=e*C-T*i,t[9]=l*C-v*i,t[10]=n*C-d*i,t[11]=s*C-r*i,t}},64840:function(Q){Q.exports=U;function U(t,M,E){var i=Math.sin(E),C=Math.cos(E),T=M[0],v=M[1],d=M[2],r=M[3],e=M[8],l=M[9],n=M[10],s=M[11];return M!==t&&(t[4]=M[4],t[5]=M[5],t[6]=M[6],t[7]=M[7],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t[0]=T*C-e*i,t[1]=v*C-l*i,t[2]=d*C-n*i,t[3]=r*C-s*i,t[8]=T*i+e*C,t[9]=v*i+l*C,t[10]=d*i+n*C,t[11]=r*i+s*C,t}},4192:function(Q){Q.exports=U;function U(t,M,E){var i=Math.sin(E),C=Math.cos(E),T=M[0],v=M[1],d=M[2],r=M[3],e=M[4],l=M[5],n=M[6],s=M[7];return M!==t&&(t[8]=M[8],t[9]=M[9],t[10]=M[10],t[11]=M[11],t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15]),t[0]=T*C+e*i,t[1]=v*C+l*i,t[2]=d*C+n*i,t[3]=r*C+s*i,t[4]=e*C-T*i,t[5]=l*C-v*i,t[6]=n*C-d*i,t[7]=s*C-r*i,t}},68152:function(Q){Q.exports=U;function U(t,M,E){var i=E[0],C=E[1],T=E[2];return t[0]=M[0]*i,t[1]=M[1]*i,t[2]=M[2]*i,t[3]=M[3]*i,t[4]=M[4]*C,t[5]=M[5]*C,t[6]=M[6]*C,t[7]=M[7]*C,t[8]=M[8]*T,t[9]=M[9]*T,t[10]=M[10]*T,t[11]=M[11]*T,t[12]=M[12],t[13]=M[13],t[14]=M[14],t[15]=M[15],t}},89412:function(Q){Q.exports=U;function U(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},35176:function(Q){Q.exports=U;function U(t,M,E){var i=E[0],C=E[1],T=E[2],v,d,r,e,l,n,s,o,p,b,h,_;return M===t?(t[12]=M[0]*i+M[4]*C+M[8]*T+M[12],t[13]=M[1]*i+M[5]*C+M[9]*T+M[13],t[14]=M[2]*i+M[6]*C+M[10]*T+M[14],t[15]=M[3]*i+M[7]*C+M[11]*T+M[15]):(v=M[0],d=M[1],r=M[2],e=M[3],l=M[4],n=M[5],s=M[6],o=M[7],p=M[8],b=M[9],h=M[10],_=M[11],t[0]=v,t[1]=d,t[2]=r,t[3]=e,t[4]=l,t[5]=n,t[6]=s,t[7]=o,t[8]=p,t[9]=b,t[10]=h,t[11]=_,t[12]=v*i+l*C+p*T+M[12],t[13]=d*i+n*C+b*T+M[13],t[14]=r*i+s*C+h*T+M[14],t[15]=e*i+o*C+_*T+M[15]),t}},86520:function(Q){Q.exports=U;function U(t,M){if(t===M){var E=M[1],i=M[2],C=M[3],T=M[6],v=M[7],d=M[11];t[1]=M[4],t[2]=M[8],t[3]=M[12],t[4]=E,t[6]=M[9],t[7]=M[13],t[8]=i,t[9]=T,t[11]=M[14],t[12]=C,t[13]=v,t[14]=d}else t[0]=M[0],t[1]=M[4],t[2]=M[8],t[3]=M[12],t[4]=M[1],t[5]=M[5],t[6]=M[9],t[7]=M[13],t[8]=M[2],t[9]=M[6],t[10]=M[10],t[11]=M[14],t[12]=M[3],t[13]=M[7],t[14]=M[11],t[15]=M[15];return t}},23352:function(Q,U,t){var M=t(42771),E=t(55616),i=t(28624),C=t(55212),T=t(60463),v=t(72160),d=t(33888),r=t(14144),e=t(51160),l=t(58908),n=t(65819),s=t(23464),o=t(63768),p=t(50896),b=t(71920),h=t(47520),_=t(308),a=_.nextPow2,c=new T,f=!1;if(document.body){var x=document.body.appendChild(document.createElement("div"));x.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(x).fontStretch&&(f=!0),document.body.removeChild(x)}var k=function(A){y(A)?(A={regl:A},this.gl=A.regl._gl):this.gl=C(A),this.shader=c.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=A.regl||i({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),c.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(l(A)?A:{})};k.prototype.createShader=function(){var A=this.regl,L=A({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:A.prop("count"),offset:A.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:A.this("sizeBuffer")},width:{offset:0,stride:8,buffer:A.this("sizeBuffer")},char:A.this("charBuffer"),position:A.this("position")},uniforms:{atlasSize:function(m,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(m,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(m,S){return S.atlas.texture},charStep:function(m,S){return S.atlas.step},em:function(m,S){return S.atlas.em},color:A.prop("color"),opacity:A.prop("opacity"),viewport:A.this("viewportArray"),scale:A.this("scale"),align:A.prop("align"),baseline:A.prop("baseline"),translate:A.this("translate"),positionOffset:A.prop("positionOffset")},primitive:"points",viewport:A.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),u={};return{regl:A,draw:L,atlas:u}},k.prototype.update=function(A){var L=this;if(typeof A=="string")A={text:A};else if(!A)return;A=E(A,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),A.opacity!=null&&(Array.isArray(A.opacity)?this.opacity=A.opacity.map(function(It){return parseFloat(It)}):this.opacity=parseFloat(A.opacity)),A.viewport!=null&&(this.viewport=e(A.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),A.kerning!=null&&(this.kerning=A.kerning),A.offset!=null&&(typeof A.offset=="number"&&(A.offset=[A.offset,0]),this.positionOffset=h(A.offset)),A.direction&&(this.direction=A.direction),A.range&&(this.range=A.range,this.scale=[1/(A.range[2]-A.range[0]),1/(A.range[3]-A.range[1])],this.translate=[-A.range[0],-A.range[1]]),A.scale&&(this.scale=A.scale),A.translate&&(this.translate=A.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!A.font&&(A.font=k.baseFontSize+"px sans-serif");var u=!1,m=!1;if(A.font&&(Array.isArray(A.font)?A.font:[A.font]).forEach(function(It,St){if(typeof It=="string")try{It=M.parse(It)}catch{It=M.parse(k.baseFontSize+"px "+It)}else It=M.parse(M.stringify(It));var Bt=M.stringify({size:k.baseFontSize,family:It.family,stretch:f?It.stretch:void 0,variant:It.variant,weight:It.weight,style:It.style}),re=n(It.size),Yt=Math.round(re[0]*s(re[1]));if(Yt!==L.fontSize[St]&&(m=!0,L.fontSize[St]=Yt),(!L.font[St]||Bt!=L.font[St].baseString)&&(u=!0,L.font[St]=k.fonts[Bt],!L.font[St])){var he=It.family.join(", "),Zt=[It.style];It.style!=It.variant&&Zt.push(It.variant),It.variant!=It.weight&&Zt.push(It.weight),f&&It.weight!=It.stretch&&Zt.push(It.stretch),L.font[St]={baseString:Bt,family:he,weight:It.weight,stretch:It.stretch,style:It.style,variant:It.variant,width:{},kerning:{},metrics:b(he,{origin:"top",fontSize:k.baseFontSize,fontStyle:Zt.join(" ")})},k.fonts[Bt]=L.font[St]}}),(u||m)&&this.font.forEach(function(It,St){var Bt=M.stringify({size:L.fontSize[St],family:It.family,stretch:f?It.stretch:void 0,variant:It.variant,weight:It.weight,style:It.style});if(L.fontAtlas[St]=L.shader.atlas[Bt],!L.fontAtlas[St]){var re=It.metrics;L.shader.atlas[Bt]=L.fontAtlas[St]={fontString:Bt,step:Math.ceil(L.fontSize[St]*re.bottom*.5)*2,em:L.fontSize[St],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}A.text==null&&(A.text=L.text)}),typeof A.text=="string"&&A.position&&A.position.length>2){for(var S=Array(A.position.length*.5),w=0;w<S.length;w++)S[w]=A.text;A.text=S}var I;if(A.text!=null||u){if(this.textOffsets=[0],Array.isArray(A.text)){this.count=A.text[0].length,this.counts=[this.count];for(var O=1;O<A.text.length;O++)this.textOffsets[O]=this.textOffsets[O-1]+A.text[O-1].length,this.count+=A.text[O].length,this.counts.push(A.text[O].length);this.text=A.text.join("")}else this.text=A.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(It,St){k.atlasContext.font=It.baseString;for(var Bt=L.fontAtlas[St],re=0;re<L.text.length;re++){var Yt=L.text.charAt(re);if(Bt.ids[Yt]==null&&(Bt.ids[Yt]=Bt.chars.length,Bt.chars.push(Yt),I.push(Yt)),It.width[Yt]==null&&(It.width[Yt]=k.atlasContext.measureText(Yt).width/k.baseFontSize,L.kerning)){var he=[];for(var Zt in It.width)he.push(Zt+Yt,Yt+Zt);p(It.kerning,o(It.family,{pairs:he}))}}})}if(A.position)if(A.position.length>2){for(var D=!A.position[0].length,P=r.mallocFloat(this.count*2),F=0,R=0;F<this.counts.length;F++){var B=this.counts[F];if(D)for(var N=0;N<B;N++)P[R++]=A.position[F*2],P[R++]=A.position[F*2+1];else for(var G=0;G<B;G++)P[R++]=A.position[F][0],P[R++]=A.position[F][1]}this.position.call?this.position({type:"float",data:P}):this.position=this.regl.buffer({type:"float",data:P}),r.freeFloat(P)}else this.position.destroy&&this.position.destroy(),this.position={constant:A.position};if(A.text||u){var X=r.mallocUint8(this.count),J=r.mallocFloat(this.count*2);this.textWidth=[];for(var it=0,nt=0;it<this.counts.length;it++){for(var q=this.counts[it],Z=this.font[it]||this.font[0],$=this.fontAtlas[it]||this.fontAtlas[0],V=0;V<q;V++){var rt=this.text.charAt(nt),ot=this.text.charAt(nt-1);if(X[nt]=$.ids[rt],J[nt*2]=Z.width[rt],V){var H=J[nt*2-2],Y=J[nt*2],at=J[nt*2-1],et=at+H*.5+Y*.5;if(this.kerning){var ct=Z.kerning[ot+rt];ct&&(et+=ct*.001)}J[nt*2+1]=et}else J[nt*2+1]=J[nt*2]*.5;nt++}this.textWidth.push(J.length?J[nt*2-2]*.5+J[nt*2-1]:0)}A.align||(A.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),r.freeUint8(X),r.freeFloat(J),I.length&&this.font.forEach(function(It,St){var Bt=L.fontAtlas[St],re=Bt.step,Yt=Math.floor(k.maxAtlasSize/re),he=Math.min(Yt,Bt.chars.length),Zt=Math.ceil(Bt.chars.length/he),ae=a(he*re),oe=a(Zt*re);Bt.width=ae,Bt.height=oe,Bt.rows=Zt,Bt.cols=he,Bt.em&&Bt.texture({data:d({canvas:k.atlasCanvas,font:Bt.fontString,chars:Bt.chars,shape:[ae,oe],step:[re,re]})})})}if(A.align&&(this.align=A.align,this.alignOffset=this.textWidth.map(function(It,St){var Bt=Array.isArray(L.align)?L.align.length>1?L.align[St]:L.align[0]:L.align;if(typeof Bt=="number")return Bt;switch(Bt){case"right":case"end":return-It;case"center":case"centre":case"middle":return-It*.5}return 0})),this.baseline==null&&A.baseline==null&&(A.baseline=0),A.baseline!=null&&(this.baseline=A.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(It,St){var Bt=(L.font[St]||L.font[0]).metrics,re=0;return re+=Bt.bottom*.5,typeof It=="number"?re+=It-Bt.baseline:re+=-Bt[It],re*=-1,re})),A.color!=null)if(A.color||(A.color="transparent"),typeof A.color=="string"||!isNaN(A.color))this.color=v(A.color,"uint8");else{var ft;if(typeof A.color[0]=="number"&&A.color.length>this.counts.length){var yt=A.color.length;ft=r.mallocUint8(yt);for(var xt=(A.color.subarray||A.color.slice).bind(A.color),Ct=0;Ct<yt;Ct+=4)ft.set(v(xt(Ct,Ct+4),"uint8"),Ct)}else{var gt=A.color.length;ft=r.mallocUint8(gt*4);for(var mt=0;mt<gt;mt++)ft.set(v(A.color[mt]||0,"uint8"),mt*4)}this.color=ft}if(A.position||A.text||A.color||A.baseline||A.align||A.font||A.offset||A.opacity){var vt=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(vt){var At=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(At);for(var Ot=0;Ot<this.batch.length;Ot++)this.batch[Ot]={count:this.counts.length>1?this.counts[Ot]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ot]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ot*4,Ot*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ot]:this.opacity,baseline:this.baselineOffset[Ot]!=null?this.baselineOffset[Ot]:this.baselineOffset[0],align:this.align?this.alignOffset[Ot]!=null?this.alignOffset[Ot]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ot]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ot*2,Ot*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},k.prototype.destroy=function(){},k.prototype.kerning=!0,k.prototype.position={constant:new Float32Array(2)},k.prototype.translate=null,k.prototype.scale=null,k.prototype.font=null,k.prototype.text="",k.prototype.positionOffset=[0,0],k.prototype.opacity=1,k.prototype.color=new Uint8Array([0,0,0,255]),k.prototype.alignOffset=[0,0],k.maxAtlasSize=1024,k.atlasCanvas=document.createElement("canvas"),k.atlasContext=k.atlasCanvas.getContext("2d",{alpha:!1}),k.baseFontSize=64,k.fonts={};function y(A){return typeof A=="function"&&A._gl&&A.prop&&A.texture&&A.buffer}Q.exports=k},55212:function(Q,U,t){var M=t(55616);Q.exports=function(d){if(d?typeof d=="string"&&(d={container:d}):d={},i(d)?d={container:d}:C(d)?d={container:d}:T(d)?d={gl:d}:d=M(d,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),d.pixelRatio||(d.pixelRatio=t.g.pixelRatio||1),d.gl)return d.gl;if(d.canvas&&(d.container=d.canvas.parentNode),d.container){if(typeof d.container=="string"){var r=document.querySelector(d.container);if(!r)throw Error("Element "+d.container+" is not found");d.container=r}i(d.container)?(d.canvas=d.container,d.container=d.canvas.parentNode):d.canvas||(d.canvas=v(),d.container.appendChild(d.canvas),E(d))}else if(!d.canvas)if(typeof document<"u")d.container=document.body||document.documentElement,d.canvas=v(),d.container.appendChild(d.canvas),E(d);else throw Error("Not DOM environment. Use headless-gl.");return d.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(e){try{d.gl=d.canvas.getContext(e,d.attrs)}catch{}return d.gl}),d.gl};function E(d){if(d.container)if(d.container==document.body)document.body.style.width||(d.canvas.width=d.width||d.pixelRatio*t.g.innerWidth),document.body.style.height||(d.canvas.height=d.height||d.pixelRatio*t.g.innerHeight);else{var r=d.container.getBoundingClientRect();d.canvas.width=d.width||r.right-r.left,d.canvas.height=d.height||r.bottom-r.top}}function i(d){return typeof d.getContext=="function"&&"width"in d&&"height"in d}function C(d){return typeof d.nodeName=="string"&&typeof d.appendChild=="function"&&typeof d.getBoundingClientRect=="function"}function T(d){return typeof d.drawArrays=="function"||typeof d.drawElements=="function"}function v(){var d=document.createElement("canvas");return d.style.position="absolute",d.style.top=0,d.style.left=0,d}},26444:function(Q){Q.exports=function(U){typeof U=="string"&&(U=[U]);for(var t=[].slice.call(arguments,1),M=[],E=0;E<U.length-1;E++)M.push(U[E],t[E]||"");return M.push(U[E]),M.join("")}},2304:function(Q,U,t){var M=t(53664),E=M("%Object.getOwnPropertyDescriptor%",!0);if(E)try{E([],"length")}catch{E=null}Q.exports=E},52264:function(Q,U,t){var M=t(24200),E;typeof t.g.matchMedia=="function"?E=!t.g.matchMedia("(hover: none)").matches:E=M,Q.exports=E},89184:function(Q,U,t){var M=t(24200);function E(){var i=!1;try{var C=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,C),window.removeEventListener("test",null,C)}catch{i=!1}return i}Q.exports=M&&E()},39640:function(Q,U,t){var M=t(53664),E=M("%Object.defineProperty%",!0),i=function(){if(E)try{return E({},"a",{value:1}),!0}catch{return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return E([],"length",{value:1}).length!==1}catch{return!0}},Q.exports=i},69572:function(Q){var U={foo:{}},t=Object;Q.exports=function(){return{__proto__:U}.foo===U.foo&&!({__proto__:null}instanceof t)}},71080:function(Q,U,t){var M=typeof Symbol<"u"&&Symbol,E=t(89320);Q.exports=function(){return typeof M!="function"||typeof Symbol!="function"||typeof M("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:E()}},89320:function(Q){Q.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var U={},t=Symbol("test"),M=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(M)!=="[object Symbol]")return!1;var E=42;U[t]=E;for(t in U)return!1;if(typeof Object.keys=="function"&&Object.keys(U).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(U).length!==0)return!1;var i=Object.getOwnPropertySymbols(U);if(i.length!==1||i[0]!==t||!Object.prototype.propertyIsEnumerable.call(U,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var C=Object.getOwnPropertyDescriptor(U,t);if(C.value!==E||C.enumerable!==!0)return!1}return!0}},46672:function(Q,U,t){var M=t(89320);Q.exports=function(){return M()&&!!Symbol.toStringTag}},92064:function(Q,U,t){var M=Function.prototype.call,E=Object.prototype.hasOwnProperty,i=t(8844);Q.exports=i.call(M,E)},35984:function(Q,U){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */U.read=function(t,M,E,i,C){var T,v,d=C*8-i-1,r=(1<<d)-1,e=r>>1,l=-7,n=E?C-1:0,s=E?-1:1,o=t[M+n];for(n+=s,T=o&(1<<-l)-1,o>>=-l,l+=d;l>0;T=T*256+t[M+n],n+=s,l-=8);for(v=T&(1<<-l)-1,T>>=-l,l+=i;l>0;v=v*256+t[M+n],n+=s,l-=8);if(T===0)T=1-e;else{if(T===r)return v?NaN:(o?-1:1)*(1/0);v=v+Math.pow(2,i),T=T-e}return(o?-1:1)*v*Math.pow(2,T-i)},U.write=function(t,M,E,i,C,T){var v,d,r,e=T*8-C-1,l=(1<<e)-1,n=l>>1,s=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,o=i?0:T-1,p=i?1:-1,b=M<0||M===0&&1/M<0?1:0;for(M=Math.abs(M),isNaN(M)||M===1/0?(d=isNaN(M)?1:0,v=l):(v=Math.floor(Math.log(M)/Math.LN2),M*(r=Math.pow(2,-v))<1&&(v--,r*=2),v+n>=1?M+=s/r:M+=s*Math.pow(2,1-n),M*r>=2&&(v++,r/=2),v+n>=l?(d=0,v=l):v+n>=1?(d=(M*r-1)*Math.pow(2,C),v=v+n):(d=M*Math.pow(2,n-1)*Math.pow(2,C),v=0));C>=8;t[E+o]=d&255,o+=p,d/=256,C-=8);for(v=v<<C|d,e+=C;e>0;t[E+o]=v&255,o+=p,v/=256,e-=8);t[E+o-p]|=b*128}},6768:function(Q){typeof Object.create=="function"?Q.exports=function(U,t){t&&(U.super_=t,U.prototype=Object.create(t.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}))}:Q.exports=function(U,t){if(t){U.super_=t;var M=function(){};M.prototype=t.prototype,U.prototype=new M,U.prototype.constructor=U}}},91148:function(Q,U,t){var M=t(46672)(),E=t(99676),i=E("Object.prototype.toString"),C=function(d){return M&&d&&typeof d=="object"&&Symbol.toStringTag in d?!1:i(d)==="[object Arguments]"},T=function(d){return C(d)?!0:d!==null&&typeof d=="object"&&typeof d.length=="number"&&d.length>=0&&i(d)!=="[object Array]"&&i(d.callee)==="[object Function]"},v=function(){return C(arguments)}();C.isLegacyArguments=T,Q.exports=v?C:T},24200:function(Q){Q.exports=!0},90720:function(Q){var U=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,M,E;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{M=Object.defineProperty({},"length",{get:function(){throw E}}),E={},t(function(){throw 42},null,M)}catch(_){_!==E&&(t=null)}else t=null;var i=/^\s*class\b/,C=function(_){try{var a=U.call(_);return i.test(a)}catch{return!1}},T=function(_){try{return C(_)?!1:(U.call(_),!0)}catch{return!1}},v=Object.prototype.toString,d="[object Object]",r="[object Function]",e="[object GeneratorFunction]",l="[object HTMLAllCollection]",n="[object HTML document.all class]",s="[object HTMLCollection]",o=typeof Symbol=="function"&&!!Symbol.toStringTag,p=!(0 in[,]),b=function(){return!1};if(typeof document=="object"){var h=document.all;v.call(h)===v.call(document.all)&&(b=function(_){if((p||!_)&&(typeof _>"u"||typeof _=="object"))try{var a=v.call(_);return(a===l||a===n||a===s||a===d)&&_("")==null}catch{}return!1})}Q.exports=t?function(_){if(b(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;try{t(_,null,M)}catch(a){if(a!==E)return!1}return!C(_)&&T(_)}:function(_){if(b(_))return!0;if(!_||typeof _!="function"&&typeof _!="object")return!1;if(o)return T(_);if(C(_))return!1;var a=v.call(_);return a!==r&&a!==e&&!/^\[object HTML/.test(a)?!1:T(_)}},84420:function(Q,U,t){var M=Object.prototype.toString,E=Function.prototype.toString,i=/^\s*(?:function)?\*/,C=t(46672)(),T=Object.getPrototypeOf,v=function(){if(!C)return!1;try{return Function("return function*() {}")()}catch{}},d;Q.exports=function(r){if(typeof r!="function")return!1;if(i.test(E.call(r)))return!0;if(!C){var e=M.call(r);return e==="[object GeneratorFunction]"}if(!T)return!1;if(typeof d>"u"){var l=v();d=l?T(l):!1}return T(r)===d}},96604:function(Q){Q.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(Q){Q.exports=function(U){return U!==U}},1560:function(Q,U,t){var M=t(57916),E=t(81288),i=t(85992),C=t(57740),T=t(59736),v=M(C(),Number);E(v,{getPolyfill:C,implementation:i,shim:T}),Q.exports=v},57740:function(Q,U,t){var M=t(85992);Q.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:M}},59736:function(Q,U,t){var M=t(81288),E=t(57740);Q.exports=function(){var i=E();return M(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i}},18400:function(Q){Q.exports=function(U){var t=typeof U;return U!==null&&(t==="object"||t==="function")}},58908:function(Q){var U=Object.prototype.toString;Q.exports=function(t){var M;return U.call(t)==="[object Object]"&&(M=Object.getPrototypeOf(t),M===null||M===Object.getPrototypeOf({}))}},94576:function(Q){Q.exports=function(U){for(var t=U.length,M,E=0;E<t;E++)if(M=U.charCodeAt(E),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},53520:function(Q){Q.exports=function(U){return typeof U!="string"?!1:(U=U.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(U)&&/[\dz]$/i.test(U)&&U.length>4))}},7728:function(Q,U,t){var M=t(46492),E=t(63436),i=t(99676),C=i("Object.prototype.toString"),T=t(46672)(),v=t(2304),d=typeof globalThis>"u"?t.g:globalThis,r=E(),e=i("Array.prototype.indexOf",!0)||function(p,b){for(var h=0;h<p.length;h+=1)if(p[h]===b)return h;return-1},l=i("String.prototype.slice"),n={},s=Object.getPrototypeOf;T&&v&&s&&M(r,function(p){var b=new d[p];if(Symbol.toStringTag in b){var h=s(b),_=v(h,Symbol.toStringTag);if(!_){var a=s(h);_=v(a,Symbol.toStringTag)}n[p]=_.get}});var o=function(p){var b=!1;return M(n,function(h,_){if(!b)try{b=h.call(p)===_}catch{}}),b};Q.exports=function(p){if(!p||typeof p!="object")return!1;if(!T||!(Symbol.toStringTag in p)){var b=l(C(p),8,-1);return e(r,b)>-1}return v?o(p):!1}},76244:function(Q){Q.exports=Math.log2||function(U){return Math.log(U)*Math.LOG2E}},62644:function(Q,U,t){Q.exports=E;var M=t(93784);function E(i,C){C||(C=i,i=window);var T=0,v=0,d=0,r={shift:!1,alt:!1,control:!1,meta:!1},e=!1;function l(x){var k=!1;return"altKey"in x&&(k=k||x.altKey!==r.alt,r.alt=!!x.altKey),"shiftKey"in x&&(k=k||x.shiftKey!==r.shift,r.shift=!!x.shiftKey),"ctrlKey"in x&&(k=k||x.ctrlKey!==r.control,r.control=!!x.ctrlKey),"metaKey"in x&&(k=k||x.metaKey!==r.meta,r.meta=!!x.metaKey),k}function n(x,k){var y=M.x(k),A=M.y(k);"buttons"in k&&(x=k.buttons|0),(x!==T||y!==v||A!==d||l(k))&&(T=x|0,v=y||0,d=A||0,C&&C(T,v,d,r))}function s(x){n(0,x)}function o(){(T||v||d||r.shift||r.alt||r.meta||r.control)&&(v=d=0,T=0,r.shift=r.alt=r.control=r.meta=!1,C&&C(0,0,0,r))}function p(x){l(x)&&C&&C(T,v,d,r)}function b(x){M.buttons(x)===0?n(0,x):n(T,x)}function h(x){n(T|M.buttons(x),x)}function _(x){n(T&~M.buttons(x),x)}function a(){e||(e=!0,i.addEventListener("mousemove",b),i.addEventListener("mousedown",h),i.addEventListener("mouseup",_),i.addEventListener("mouseleave",s),i.addEventListener("mouseenter",s),i.addEventListener("mouseout",s),i.addEventListener("mouseover",s),i.addEventListener("blur",o),i.addEventListener("keyup",p),i.addEventListener("keydown",p),i.addEventListener("keypress",p),i!==window&&(window.addEventListener("blur",o),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}function c(){e&&(e=!1,i.removeEventListener("mousemove",b),i.removeEventListener("mousedown",h),i.removeEventListener("mouseup",_),i.removeEventListener("mouseleave",s),i.removeEventListener("mouseenter",s),i.removeEventListener("mouseout",s),i.removeEventListener("mouseover",s),i.removeEventListener("blur",o),i.removeEventListener("keyup",p),i.removeEventListener("keydown",p),i.removeEventListener("keypress",p),i!==window&&(window.removeEventListener("blur",o),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))}a();var f={element:i};return Object.defineProperties(f,{enabled:{get:function(){return e},set:function(x){x?a():c()},enumerable:!0},buttons:{get:function(){return T},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),f}},29128:function(Q){var U={left:0,top:0};Q.exports=t;function t(E,i,C){i=i||E.currentTarget||E.srcElement,Array.isArray(C)||(C=[0,0]);var T=E.clientX||0,v=E.clientY||0,d=M(i);return C[0]=T-d.left,C[1]=v-d.top,C}function M(E){return E===window||E===document||E===document.body?U:E.getBoundingClientRect()}},93784:function(Q,U){function t(C){if(typeof C=="object"){if("buttons"in C)return C.buttons;if("which"in C){var T=C.which;if(T===2)return 4;if(T===3)return 2;if(T>0)return 1<<T-1}else if("button"in C){var T=C.button;if(T===1)return 4;if(T===2)return 2;if(T>=0)return 1<<T}}return 0}U.buttons=t;function M(C){return C.target||C.srcElement||window}U.element=M;function E(C){if(typeof C=="object"){if("offsetX"in C)return C.offsetX;var T=M(C),v=T.getBoundingClientRect();return C.clientX-v.left}return 0}U.x=E;function i(C){if(typeof C=="object"){if("offsetY"in C)return C.offsetY;var T=M(C),v=T.getBoundingClientRect();return C.clientY-v.top}return 0}U.y=i},97264:function(Q,U,t){var M=t(23464);Q.exports=E;function E(i,C,T){typeof i=="function"&&(T=!!C,C=i,i=window);var v=M("ex",i),d=function(r){T&&r.preventDefault();var e=r.deltaX||0,l=r.deltaY||0,n=r.deltaZ||0,s=r.deltaMode,o=1;switch(s){case 1:o=v;break;case 2:o=window.innerHeight;break}if(e*=o,l*=o,n*=o,e||l||n)return C(e,l,n,r)};return i.addEventListener("wheel",d),d}},88324:function(Q,U,t){var M;/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(E,i,C){i[E]=i[E]||C(),Q.exports?Q.exports=i[E]:(M=(function(){return i[E]}).call(U,t,U,Q),M!==void 0&&(Q.exports=M))})("Promise",typeof t.g<"u"?t.g:this,function(){var E,i,C,T=Object.prototype.toString,v=typeof setImmediate<"u"?function(a){return setImmediate(a)}:setTimeout;try{Object.defineProperty({},"x",{}),E=function(a,c,f,x){return Object.defineProperty(a,c,{value:f,writable:!0,configurable:x!==!1})}}catch{E=function(a,c,f){return a[c]=f,a}}C=function(){var a,c,f;function x(k,y){this.fn=k,this.self=y,this.next=void 0}return{add:function(k,y){f=new x(k,y),c?c.next=f:a=f,c=f,f=void 0},drain:function(){var k=a;for(a=c=i=void 0;k;)k.fn.call(k.self),k=k.next}}}();function d(a,c){C.add(a,c),i||(i=v(C.drain))}function r(a){var c,f=typeof a;return a!=null&&(f=="object"||f=="function")&&(c=a.then),typeof c=="function"?c:!1}function e(){for(var a=0;a<this.chain.length;a++)l(this,this.state===1?this.chain[a].success:this.chain[a].failure,this.chain[a]);this.chain.length=0}function l(a,c,f){var x,k;try{c===!1?f.reject(a.msg):(c===!0?x=a.msg:x=c.call(void 0,a.msg),x===f.promise?f.reject(TypeError("Promise-chain cycle")):(k=r(x))?k.call(x,f.resolve,f.reject):f.resolve(x))}catch(y){f.reject(y)}}function n(a){var c,f=this;if(!f.triggered){f.triggered=!0,f.def&&(f=f.def);try{(c=r(a))?d(function(){var x=new p(f);try{c.call(a,function(){n.apply(x,arguments)},function(){s.apply(x,arguments)})}catch(k){s.call(x,k)}}):(f.msg=a,f.state=1,f.chain.length>0&&d(e,f))}catch(x){s.call(new p(f),x)}}}function s(a){var c=this;c.triggered||(c.triggered=!0,c.def&&(c=c.def),c.msg=a,c.state=2,c.chain.length>0&&d(e,c))}function o(a,c,f,x){for(var k=0;k<c.length;k++)(function(y){a.resolve(c[y]).then(function(A){f(y,A)},x)})(k)}function p(a){this.def=a,this.triggered=!1}function b(a){this.promise=a,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(a){if(typeof a!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var c=new b(this);this.then=function(f,x){var k={success:typeof f=="function"?f:!0,failure:typeof x=="function"?x:!1};return k.promise=new this.constructor(function(y,A){if(typeof y!="function"||typeof A!="function")throw TypeError("Not a function");k.resolve=y,k.reject=A}),c.chain.push(k),c.state!==0&&d(e,c),k.promise},this.catch=function(f){return this.then(void 0,f)};try{a.call(void 0,function(f){n.call(c,f)},function(f){s.call(c,f)})}catch(f){s.call(c,f)}}var _=E({},"constructor",h,!1);return h.prototype=_,E(_,"__NPO__",0,!1),E(h,"resolve",function(a){var c=this;return a&&typeof a=="object"&&a.__NPO__===1?a:new c(function(f,x){if(typeof f!="function"||typeof x!="function")throw TypeError("Not a function");f(a)})}),E(h,"reject",function(a){return new this(function(c,f){if(typeof c!="function"||typeof f!="function")throw TypeError("Not a function");f(a)})}),E(h,"all",function(a){var c=this;return T.call(a)!="[object Array]"?c.reject(TypeError("Not an array")):a.length===0?c.resolve([]):new c(function(f,x){if(typeof f!="function"||typeof x!="function")throw TypeError("Not a function");var k=a.length,y=Array(k),A=0;o(c,a,function(L,u){y[L]=u,++A===k&&f(y)},x)})}),E(h,"race",function(a){var c=this;return T.call(a)!="[object Array]"?c.reject(TypeError("Not an array")):new c(function(f,x){if(typeof f!="function"||typeof x!="function")throw TypeError("Not a function");o(c,a,function(k,y){f(y)},x)})}),h})},48816:function(Q){var U=Math.PI,t=v(120);Q.exports=M;function M(d){for(var r,e=[],l=0,n=0,s=0,o=0,p=null,b=null,h=0,_=0,a=0,c=d.length;a<c;a++){var f=d[a],x=f[0];switch(x){case"M":s=f[1],o=f[2];break;case"A":f=C(h,_,f[1],f[2],v(f[3]),f[4],f[5],f[6],f[7]),f.unshift("C"),f.length>7&&(e.push(f.splice(0,7)),f.unshift("C"));break;case"S":var k=h,y=_;(r=="C"||r=="S")&&(k+=k-l,y+=y-n),f=["C",k,y,f[1],f[2],f[3],f[4]];break;case"T":r=="Q"||r=="T"?(p=h*2-p,b=_*2-b):(p=h,b=_),f=i(h,_,p,b,f[1],f[2]);break;case"Q":p=f[1],b=f[2],f=i(h,_,f[1],f[2],f[3],f[4]);break;case"L":f=E(h,_,f[1],f[2]);break;case"H":f=E(h,_,f[1],_);break;case"V":f=E(h,_,h,f[1]);break;case"Z":f=E(h,_,s,o);break}r=x,h=f[f.length-2],_=f[f.length-1],f.length>4?(l=f[f.length-4],n=f[f.length-3]):(l=h,n=_),e.push(f)}return e}function E(d,r,e,l){return["C",d,r,e,l,e,l]}function i(d,r,e,l,n,s){return["C",d/3+.6666666666666666*e,r/3+.6666666666666666*l,n/3+.6666666666666666*e,s/3+.6666666666666666*l,n,s]}function C(d,r,e,l,n,s,o,p,b,h){if(h)u=h[0],m=h[1],A=h[2],L=h[3];else{var _=T(d,r,-n);d=_.x,r=_.y,_=T(p,b,-n),p=_.x,b=_.y;var a=(d-p)/2,c=(r-b)/2,f=a*a/(e*e)+c*c/(l*l);f>1&&(f=Math.sqrt(f),e=f*e,l=f*l);var x=e*e,k=l*l,y=(s==o?-1:1)*Math.sqrt(Math.abs((x*k-x*c*c-k*a*a)/(x*c*c+k*a*a)));y==1/0&&(y=1);var A=y*e*c/l+(d+p)/2,L=y*-l*a/e+(r+b)/2,u=Math.asin(((r-L)/l).toFixed(9)),m=Math.asin(((b-L)/l).toFixed(9));u=d<A?U-u:u,m=p<A?U-m:m,u<0&&(u=U*2+u),m<0&&(m=U*2+m),o&&u>m&&(u=u-U*2),!o&&m>u&&(m=m-U*2)}if(Math.abs(m-u)>t){var S=m,w=p,I=b;m=u+t*(o&&m>u?1:-1),p=A+e*Math.cos(m),b=L+l*Math.sin(m);var O=C(p,b,e,l,n,0,o,w,I,[m,S,A,L])}var D=Math.tan((m-u)/4),P=4/3*e*D,F=4/3*l*D,R=[2*d-(d+P*Math.sin(u)),2*r-(r-F*Math.cos(u)),p+P*Math.sin(m),b-F*Math.cos(m),p,b];if(h)return R;O&&(R=R.concat(O));for(var B=0;B<R.length;){var N=T(R[B],R[B+1],n);R[B++]=N.x,R[B++]=N.y}return R}function T(d,r,e){return{x:d*Math.cos(e)-r*Math.sin(e),y:d*Math.sin(e)+r*Math.cos(e)}}function v(d){return d*(U/180)}},50896:function(Q){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var U=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function E(C){if(C==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(C)}function i(){try{if(!Object.assign)return!1;var C=new String("abc");if(C[5]="de",Object.getOwnPropertyNames(C)[0]==="5")return!1;for(var T={},v=0;v<10;v++)T["_"+String.fromCharCode(v)]=v;var d=Object.getOwnPropertyNames(T).map(function(e){return T[e]});if(d.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Q.exports=i()?Object.assign:function(C,T){for(var v,d=E(C),r,e=1;e<arguments.length;e++){v=Object(arguments[e]);for(var l in v)t.call(v,l)&&(d[l]=v[l]);if(U){r=U(v);for(var n=0;n<r.length;n++)M.call(v,r[n])&&(d[r[n]]=v[r[n]])}}return d}},76835:function(Q){var U=function(t){return t!==t};Q.exports=function(t,M){return t===0&&M===0?1/t===1/M:!!(t===M||U(t)&&U(M))}},39896:function(Q,U,t){var M=t(81288),E=t(57916),i=t(76835),C=t(66148),T=t(16408),v=E(C(),Object);M(v,{getPolyfill:C,implementation:i,shim:T}),Q.exports=v},66148:function(Q,U,t){var M=t(76835);Q.exports=function(){return typeof Object.is=="function"?Object.is:M}},16408:function(Q,U,t){var M=t(66148),E=t(81288);Q.exports=function(){var i=M();return E(Object,{is:i},{is:function(){return Object.is!==i}}),i}},32764:function(Q,U,t){var M;if(!Object.keys){var E=Object.prototype.hasOwnProperty,i=Object.prototype.toString,C=t(97344),T=Object.prototype.propertyIsEnumerable,v=!T.call({toString:null},"toString"),d=T.call(function(){},"prototype"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=function(o){var p=o.constructor;return p&&p.prototype===o},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var o in window)try{if(!l["$"+o]&&E.call(window,o)&&window[o]!==null&&typeof window[o]=="object")try{e(window[o])}catch{return!0}}catch{return!0}return!1}(),s=function(o){if(typeof window>"u"||!n)return e(o);try{return e(o)}catch{return!1}};M=function(o){var p=o!==null&&typeof o=="object",b=i.call(o)==="[object Function]",h=C(o),_=p&&i.call(o)==="[object String]",a=[];if(!p&&!b&&!h)throw new TypeError("Object.keys called on a non-object");var c=d&&b;if(_&&o.length>0&&!E.call(o,0))for(var f=0;f<o.length;++f)a.push(String(f));if(h&&o.length>0)for(var x=0;x<o.length;++x)a.push(String(x));else for(var k in o)!(c&&k==="prototype")&&E.call(o,k)&&a.push(String(k));if(v)for(var y=s(o),A=0;A<r.length;++A)!(y&&r[A]==="constructor")&&E.call(o,r[A])&&a.push(r[A]);return a}}Q.exports=M},41820:function(Q,U,t){var M=Array.prototype.slice,E=t(97344),i=Object.keys,C=i?function(v){return i(v)}:t(32764),T=Object.keys;C.shim=function(){if(Object.keys){var v=function(){var d=Object.keys(arguments);return d&&d.length===arguments.length}(1,2);v||(Object.keys=function(d){return E(d)?T(M.call(d)):T(d)})}else Object.keys=C;return Object.keys||C},Q.exports=C},97344:function(Q){var U=Object.prototype.toString;Q.exports=function(t){var M=U.call(t),E=M==="[object Arguments]";return E||(E=M!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&U.call(t.callee)==="[object Function]"),E}},32868:function(Q){function U(E,i){if(typeof E!="string")return[E];var C=[E];typeof i=="string"||Array.isArray(i)?i={brackets:i}:i||(i={});var T=i.brackets?Array.isArray(i.brackets)?i.brackets:[i.brackets]:["{}","[]","()"],v=i.escape||"___",d=!!i.flat;T.forEach(function(l){var n=new RegExp(["\\",l[0],"[^\\",l[0],"\\",l[1],"]*\\",l[1]].join("")),s=[];function o(p,b,h){var _=C.push(p.slice(l[0].length,-l[1].length))-1;return s.push(_),v+_+v}C.forEach(function(p,b){for(var h,_=0;p!=h;)if(h=p,p=p.replace(n,o),_++>1e4)throw Error("References have circular dependency. Please, check them.");C[b]=p}),s=s.reverse(),C=C.map(function(p){return s.forEach(function(b){p=p.replace(new RegExp("(\\"+v+b+"\\"+v+")","g"),l[0]+"$1"+l[1])}),p})});var r=new RegExp("\\"+v+"([0-9]+)\\"+v);function e(l,n,s){for(var o=[],p,b=0;p=r.exec(l);){if(b++>1e4)throw Error("Circular references in parenthesis");o.push(l.slice(0,p.index)),o.push(e(n[p[1]],n)),l=l.slice(p.index+p[0].length)}return o.push(l),o}return d?C:e(C[0],C)}function t(E,i){if(i&&i.flat){var C=i&&i.escape||"___",T=E[0],v;if(!T)return"";for(var d=new RegExp("\\"+C+"([0-9]+)\\"+C),r=0;T!=v;){if(r++>1e4)throw Error("Circular references in "+E);v=T,T=T.replace(d,e)}return T}return E.reduce(function l(n,s){return Array.isArray(s)&&(s=s.reduce(l,"")),n+s},"");function e(l,n){if(E[n]==null)throw Error("Reference "+n+"is undefined");return E[n]}}function M(E,i){return Array.isArray(E)?t(E,i):U(E,i)}M.parse=U,M.stringify=t,Q.exports=M},51160:function(Q,U,t){var M=t(55616);Q.exports=E;function E(i){var C;return arguments.length>1&&(i=arguments),typeof i=="string"?i=i.split(/\s/).map(parseFloat):typeof i=="number"&&(i=[i]),i.length&&typeof i[0]=="number"?i.length===1?C={width:i[0],height:i[0],x:0,y:0}:i.length===2?C={width:i[0],height:i[1],x:0,y:0}:C={x:i[0],y:i[1],width:i[2]-i[0]||0,height:i[3]-i[1]||0}:i&&(i=M(i,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),C={x:i.left||0,y:i.top||0},i.width==null?i.right?C.width=i.right-C.x:C.width=0:C.width=i.width,i.height==null?i.bottom?C.height=i.bottom-C.y:C.height=0:C.height=i.height),C}},21984:function(Q){Q.exports=M;var U={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(C){var T=[];return C.replace(t,function(v,d,r){var e=d.toLowerCase();for(r=i(r),e=="m"&&r.length>2&&(T.push([d].concat(r.splice(0,2))),e="l",d=d=="m"?"l":"L");;){if(r.length==U[e])return r.unshift(d),T.push(r);if(r.length<U[e])throw new Error("malformed path data");T.push([d].concat(r.splice(0,U[e])))}}),T}var E=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function i(C){var T=C.match(E);return T?T.map(Number):[]}},65819:function(Q){Q.exports=function(U,t){t||(t=[0,""]),U=String(U);var M=parseFloat(U,10);return t[0]=M,t[1]=U.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},41984:function(Q,U,t){var M=t(4168);(function(){var E,i,C,T,v,d;typeof performance<"u"&&performance!==null&&performance.now?Q.exports=function(){return performance.now()}:typeof M<"u"&&M!==null&&M.hrtime?(Q.exports=function(){return(E()-v)/1e6},i=M.hrtime,E=function(){var r;return r=i(),r[0]*1e9+r[1]},T=E(),d=M.uptime()*1e9,v=T-d):Date.now?(Q.exports=function(){return Date.now()-C},C=Date.now()):(Q.exports=function(){return new Date().getTime()-C},C=new Date().getTime())}).call(this)},55616:function(Q){Q.exports=function(M,E,i){var C={},T,v;if(typeof E=="string"&&(E=t(E)),Array.isArray(E)){var d={};for(v=0;v<E.length;v++)d[E[v]]=!0;E=d}for(T in E)E[T]=t(E[T]);var r={};for(T in E){var e=E[T];if(Array.isArray(e))for(v=0;v<e.length;v++){var l=e[v];if(i&&(r[l]=!0),l in M){if(C[T]=M[l],i)for(var n=v;n<e.length;n++)r[e[n]]=!0;break}}else T in M&&(E[T]&&(C[T]=M[T]),i&&(r[T]=!0))}if(i)for(T in M)r[T]||(C[T]=M[T]);return C};var U={};function t(M){return U[M]?U[M]:(typeof M=="string"&&(M=U[M]=M.split(/\s*,\s*|\s+/)),M)}},61456:function(Q){Q.exports=function(U,t,M,E){var i=U[0],C=U[1],T=!1;M===void 0&&(M=0),E===void 0&&(E=t.length);for(var v=E-M,d=0,r=v-1;d<v;r=d++){var e=t[d+M][0],l=t[d+M][1],n=t[r+M][0],s=t[r+M][1],o=l>C!=s>C&&i<(n-e)*(C-l)/(s-l)+e;o&&(T=!T)}return T}},14756:function(Q,U,t){/*
* @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
* @license MIT
* @preserve Project Home: https://github.com/voidqk/polybooljs
*/var M=t(7688),E=t(28648),i=t(72200),C=t(11403),T=t(82368),v=t(17792),d=!1,r=E(),e;e={buildLog:function(n){return n===!0?d=M():n===!1&&(d=!1),d===!1?!1:d.list},epsilon:function(n){return r.epsilon(n)},segments:function(n){var s=i(!0,r,d);return n.regions.forEach(s.addRegion),{segments:s.calculate(n.inverted),inverted:n.inverted}},combine:function(n,s){var o=i(!1,r,d);return{combined:o.calculate(n.segments,n.inverted,s.segments,s.inverted),inverted1:n.inverted,inverted2:s.inverted}},selectUnion:function(n){return{segments:T.union(n.combined,d),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:T.intersect(n.combined,d),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:T.difference(n.combined,d),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:T.differenceRev(n.combined,d),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:T.xor(n.combined,d),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:C(n.segments,r,d),inverted:n.inverted}},polygonFromGeoJSON:function(n){return v.toPolygon(e,n)},polygonToGeoJSON:function(n){return v.fromPolygon(e,r,n)},union:function(n,s){return l(n,s,e.selectUnion)},intersect:function(n,s){return l(n,s,e.selectIntersect)},difference:function(n,s){return l(n,s,e.selectDifference)},differenceRev:function(n,s){return l(n,s,e.selectDifferenceRev)},xor:function(n,s){return l(n,s,e.selectXor)}};function l(n,s,o){var p=e.segments(n),b=e.segments(s),h=e.combine(p,b),_=o(h);return e.polygon(_)}typeof window=="object"&&(window.PolyBool=e),Q.exports=e},7688:function(Q){function U(){var t,M=0,E=!1;function i(C,T){return t.list.push({type:C,data:T?JSON.parse(JSON.stringify(T)):void 0}),t}return t={list:[],segmentId:function(){return M++},checkIntersection:function(C,T){return i("check",{seg1:C,seg2:T})},segmentChop:function(C,T){return i("div_seg",{seg:C,pt:T}),i("chop",{seg:C,pt:T})},statusRemove:function(C){return i("pop_seg",{seg:C})},segmentUpdate:function(C){return i("seg_update",{seg:C})},segmentNew:function(C,T){return i("new_seg",{seg:C,primary:T})},segmentRemove:function(C){return i("rem_seg",{seg:C})},tempStatus:function(C,T,v){return i("temp_status",{seg:C,above:T,below:v})},rewind:function(C){return i("rewind",{seg:C})},status:function(C,T,v){return i("status",{seg:C,above:T,below:v})},vert:function(C){return C===E?t:(E=C,i("vert",{x:C}))},log:function(C){return typeof C!="string"&&(C=JSON.stringify(C,!1,"  ")),i("log",{txt:C})},reset:function(){return i("reset")},selected:function(C){return i("selected",{segs:C})},chainStart:function(C){return i("chain_start",{seg:C})},chainRemoveHead:function(C,T){return i("chain_rem_head",{index:C,pt:T})},chainRemoveTail:function(C,T){return i("chain_rem_tail",{index:C,pt:T})},chainNew:function(C,T){return i("chain_new",{pt1:C,pt2:T})},chainMatch:function(C){return i("chain_match",{index:C})},chainClose:function(C){return i("chain_close",{index:C})},chainAddHead:function(C,T){return i("chain_add_head",{index:C,pt:T})},chainAddTail:function(C,T){return i("chain_add_tail",{index:C,pt:T})},chainConnect:function(C,T){return i("chain_con",{index1:C,index2:T})},chainReverse:function(C){return i("chain_rev",{index:C})},chainJoin:function(C,T){return i("chain_join",{index1:C,index2:T})},done:function(){return i("done")}},t}Q.exports=U},28648:function(Q){function U(t){typeof t!="number"&&(t=1e-10);var M={epsilon:function(E){return typeof E=="number"&&(t=E),t},pointAboveOrOnLine:function(E,i,C){var T=i[0],v=i[1],d=C[0],r=C[1],e=E[0],l=E[1];return(d-T)*(l-v)-(r-v)*(e-T)>=-t},pointBetween:function(E,i,C){var T=E[1]-i[1],v=C[0]-i[0],d=E[0]-i[0],r=C[1]-i[1],e=d*v+T*r;if(e<t)return!1;var l=v*v+r*r;return!(e-l>-t)},pointsSameX:function(E,i){return Math.abs(E[0]-i[0])<t},pointsSameY:function(E,i){return Math.abs(E[1]-i[1])<t},pointsSame:function(E,i){return M.pointsSameX(E,i)&&M.pointsSameY(E,i)},pointsCompare:function(E,i){return M.pointsSameX(E,i)?M.pointsSameY(E,i)?0:E[1]<i[1]?-1:1:E[0]<i[0]?-1:1},pointsCollinear:function(E,i,C){var T=E[0]-i[0],v=E[1]-i[1],d=i[0]-C[0],r=i[1]-C[1];return Math.abs(T*r-d*v)<t},linesIntersect:function(E,i,C,T){var v=i[0]-E[0],d=i[1]-E[1],r=T[0]-C[0],e=T[1]-C[1],l=v*e-d*r;if(Math.abs(l)<t)return!1;var n=E[0]-C[0],s=E[1]-C[1],o=(r*s-e*n)/l,p=(v*s-d*n)/l,b={alongA:0,alongB:0,pt:[E[0]+o*v,E[1]+o*d]};return o<=-t?b.alongA=-2:o<t?b.alongA=-1:o-1<=-t?b.alongA=0:o-1<t?b.alongA=1:b.alongA=2,p<=-t?b.alongB=-2:p<t?b.alongB=-1:p-1<=-t?b.alongB=0:p-1<t?b.alongB=1:b.alongB=2,b},pointInsideRegion:function(E,i){for(var C=E[0],T=E[1],v=i[i.length-1][0],d=i[i.length-1][1],r=!1,e=0;e<i.length;e++){var l=i[e][0],n=i[e][1];n-T>t!=d-T>t&&(v-l)*(T-n)/(d-n)+l-C>t&&(r=!r),v=l,d=n}return r}};return M}Q.exports=U},17792:function(Q){var U={toPolygon:function(t,M){function E(T){if(T.length<=0)return t.segments({inverted:!1,regions:[]});function v(e){var l=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[l]})}for(var d=v(T[0]),r=1;r<T.length;r++)d=t.selectDifference(t.combine(d,v(T[r])));return d}if(M.type==="Polygon")return t.polygon(E(M.coordinates));if(M.type==="MultiPolygon"){for(var i=t.segments({inverted:!1,regions:[]}),C=0;C<M.coordinates.length;C++)i=t.selectUnion(t.combine(i,E(M.coordinates[C])));return t.polygon(i)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,M,E){E=t.polygon(t.segments(E));function i(o,p){return M.pointInsideRegion([(o[0][0]+o[1][0])*.5,(o[0][1]+o[1][1])*.5],p)}function C(o){return{region:o,children:[]}}var T=C(null);function v(o,p){for(var b=0;b<o.children.length;b++){var h=o.children[b];if(i(p,h.region)){v(h,p);return}}for(var _=C(p),b=0;b<o.children.length;b++){var h=o.children[b];i(h.region,p)&&(_.children.push(h),o.children.splice(b,1),b--)}o.children.push(_)}for(var d=0;d<E.regions.length;d++){var r=E.regions[d];r.length<3||v(T,r)}function e(o,p){for(var b=0,h=o[o.length-1][0],_=o[o.length-1][1],a=[],c=0;c<o.length;c++){var f=o[c][0],x=o[c][1];a.push([f,x]),b+=x*h-f*_,h=f,_=x}var k=b<0;return k!==p&&a.reverse(),a.push([a[0][0],a[0][1]]),a}var l=[];function n(o){var p=[e(o.region,!1)];l.push(p);for(var b=0;b<o.children.length;b++)p.push(s(o.children[b]))}function s(o){for(var p=0;p<o.children.length;p++)n(o.children[p]);return e(o.region,!0)}for(var d=0;d<T.children.length;d++)n(T.children[d]);return l.length<=0?{type:"Polygon",coordinates:[]}:l.length==1?{type:"Polygon",coordinates:l[0]}:{type:"MultiPolygon",coordinates:l}}};Q.exports=U},72200:function(Q,U,t){var M=t(48088);function E(i,C,T){function v(_,a){return{id:T?T.segmentId():-1,start:_,end:a,myFill:{above:null,below:null},otherFill:null}}function d(_,a,c){return{id:T?T.segmentId():-1,start:_,end:a,myFill:{above:c.myFill.above,below:c.myFill.below},otherFill:null}}var r=M.create();function e(_,a,c,f,x,k){var y=C.pointsCompare(a,x);return y!==0?y:C.pointsSame(c,k)?0:_!==f?_?1:-1:C.pointAboveOrOnLine(c,f?x:k,f?k:x)?1:-1}function l(_,a){r.insertBefore(_,function(c){var f=e(_.isStart,_.pt,a,c.isStart,c.pt,c.other.pt);return f<0})}function n(_,a){var c=M.node({isStart:!0,pt:_.start,seg:_,primary:a,other:null,status:null});return l(c,_.end),c}function s(_,a,c){var f=M.node({isStart:!1,pt:a.end,seg:a,primary:c,other:_,status:null});_.other=f,l(f,_.pt)}function o(_,a){var c=n(_,a);return s(c,_,a),c}function p(_,a){T&&T.segmentChop(_.seg,a),_.other.remove(),_.seg.end=a,_.other.pt=a,l(_.other,_.pt)}function b(_,a){var c=d(a,_.seg.end,_.seg);return p(_,a),o(c,_.primary)}function h(_,a){var c=M.create();function f(P,F){var R=P.seg.start,B=P.seg.end,N=F.seg.start,G=F.seg.end;return C.pointsCollinear(R,N,G)?C.pointsCollinear(B,N,G)||C.pointAboveOrOnLine(B,N,G)?1:-1:C.pointAboveOrOnLine(R,N,G)?1:-1}function x(P){return c.findTransition(function(F){var R=f(P,F.ev);return R>0})}function k(P,F){var R=P.seg,B=F.seg,N=R.start,G=R.end,X=B.start,J=B.end;T&&T.checkIntersection(R,B);var it=C.linesIntersect(N,G,X,J);if(it===!1){if(!C.pointsCollinear(N,G,X)||C.pointsSame(N,J)||C.pointsSame(G,X))return!1;var nt=C.pointsSame(N,X),q=C.pointsSame(G,J);if(nt&&q)return F;var Z=!nt&&C.pointBetween(N,X,J),$=!q&&C.pointBetween(G,X,J);if(nt)return $?b(F,G):b(P,J),F;Z&&(q||($?b(F,G):b(P,J)),b(F,N))}else it.alongA===0&&(it.alongB===-1?b(P,X):it.alongB===0?b(P,it.pt):it.alongB===1&&b(P,J)),it.alongB===0&&(it.alongA===-1?b(F,N):it.alongA===0?b(F,it.pt):it.alongA===1&&b(F,G));return!1}for(var y=[];!r.isEmpty();){var A=r.getHead();if(T&&T.vert(A.pt[0]),A.isStart){let P=function(){if(u){var F=k(A,u);if(F)return F}return m?k(A,m):!1};T&&T.segmentNew(A.seg,A.primary);var L=x(A),u=L.before?L.before.ev:null,m=L.after?L.after.ev:null;T&&T.tempStatus(A.seg,u?u.seg:!1,m?m.seg:!1);var S=P();if(S){if(i){var w;A.seg.myFill.below===null?w=!0:w=A.seg.myFill.above!==A.seg.myFill.below,w&&(S.seg.myFill.above=!S.seg.myFill.above)}else S.seg.otherFill=A.seg.myFill;T&&T.segmentUpdate(S.seg),A.other.remove(),A.remove()}if(r.getHead()!==A){T&&T.rewind(A.seg);continue}if(i){var w;A.seg.myFill.below===null?w=!0:w=A.seg.myFill.above!==A.seg.myFill.below,m?A.seg.myFill.below=m.seg.myFill.above:A.seg.myFill.below=_,w?A.seg.myFill.above=!A.seg.myFill.below:A.seg.myFill.above=A.seg.myFill.below}else if(A.seg.otherFill===null){var I;m?A.primary===m.primary?I=m.seg.otherFill.above:I=m.seg.myFill.above:I=A.primary?a:_,A.seg.otherFill={above:I,below:I}}T&&T.status(A.seg,u?u.seg:!1,m?m.seg:!1),A.other.status=L.insert(M.node({ev:A}))}else{var O=A.status;if(O===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(c.exists(O.prev)&&c.exists(O.next)&&k(O.prev.ev,O.next.ev),T&&T.statusRemove(O.ev.seg),O.remove(),!A.primary){var D=A.seg.myFill;A.seg.myFill=A.seg.otherFill,A.seg.otherFill=D}y.push(A.seg)}r.getHead().remove()}return T&&T.done(),y}return i?{addRegion:function(_){for(var a,c=_[_.length-1],f=0;f<_.length;f++){a=c,c=_[f];var x=C.pointsCompare(a,c);x!==0&&o(v(x<0?a:c,x<0?c:a),!0)}},calculate:function(_){return h(_,!1)}}:{calculate:function(_,a,c,f){return _.forEach(function(x){o(d(x.start,x.end,x),!0)}),c.forEach(function(x){o(d(x.start,x.end,x),!1)}),h(a,f)}}}Q.exports=E},48088:function(Q){var U={create:function(){var t={root:{root:!0,next:null},exists:function(M){return!(M===null||M===t.root)},isEmpty:function(){return t.root.next===null},getHead:function(){return t.root.next},insertBefore:function(M,E){for(var i=t.root,C=t.root.next;C!==null;){if(E(C)){M.prev=C.prev,M.next=C,C.prev.next=M,C.prev=M;return}i=C,C=C.next}i.next=M,M.prev=i,M.next=null},findTransition:function(M){for(var E=t.root,i=t.root.next;i!==null&&!M(i);)E=i,i=i.next;return{before:E===t.root?null:E,after:i,insert:function(C){return C.prev=E,C.next=i,E.next=C,i!==null&&(i.prev=C),C}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};Q.exports=U},11403:function(Q){function U(t,M,E){var i=[],C=[];return t.forEach(function(T){var v=T.start,d=T.end;if(M.pointsSame(v,d)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}E&&E.chainStart(T);var r={index:0,matches_head:!1,matches_pt1:!1},e={index:0,matches_head:!1,matches_pt1:!1},l=r;function n(S,w,I){return l.index=S,l.matches_head=w,l.matches_pt1=I,l===r?(l=e,!1):(l=null,!0)}for(var s=0;s<i.length;s++){var o=i[s],p=o[0];o[1];var b=o[o.length-1];if(o[o.length-2],M.pointsSame(p,v)){if(n(s,!0,!0))break}else if(M.pointsSame(p,d)){if(n(s,!0,!1))break}else if(M.pointsSame(b,v)){if(n(s,!1,!0))break}else if(M.pointsSame(b,d)&&n(s,!1,!1))break}if(l===r){i.push([v,d]),E&&E.chainNew(v,d);return}if(l===e){E&&E.chainMatch(r.index);var h=r.index,_=r.matches_pt1?d:v,a=r.matches_head,o=i[h],c=a?o[0]:o[o.length-1],f=a?o[1]:o[o.length-2],x=a?o[o.length-1]:o[0],k=a?o[o.length-2]:o[1];if(M.pointsCollinear(f,c,_)&&(a?(E&&E.chainRemoveHead(r.index,_),o.shift()):(E&&E.chainRemoveTail(r.index,_),o.pop()),c=f),M.pointsSame(x,_)){i.splice(h,1),M.pointsCollinear(k,x,c)&&(a?(E&&E.chainRemoveTail(r.index,c),o.pop()):(E&&E.chainRemoveHead(r.index,c),o.shift())),E&&E.chainClose(r.index),C.push(o);return}a?(E&&E.chainAddHead(r.index,_),o.unshift(_)):(E&&E.chainAddTail(r.index,_),o.push(_));return}function y(S){E&&E.chainReverse(S),i[S].reverse()}function A(S,w){var I=i[S],O=i[w],D=I[I.length-1],P=I[I.length-2],F=O[0],R=O[1];M.pointsCollinear(P,D,F)&&(E&&E.chainRemoveTail(S,D),I.pop(),D=P),M.pointsCollinear(D,F,R)&&(E&&E.chainRemoveHead(w,F),O.shift()),E&&E.chainJoin(S,w),i[S]=I.concat(O),i.splice(w,1)}var L=r.index,u=e.index;E&&E.chainConnect(L,u);var m=i[L].length<i[u].length;r.matches_head?e.matches_head?m?(y(L),A(L,u)):(y(u),A(u,L)):A(u,L):e.matches_head?A(L,u):m?(y(L),A(u,L)):(y(u),A(L,u))}),C}Q.exports=U},82368:function(Q){function U(M,E,i){var C=[];return M.forEach(function(T){var v=(T.myFill.above?8:0)+(T.myFill.below?4:0)+(T.otherFill&&T.otherFill.above?2:0)+(T.otherFill&&T.otherFill.below?1:0);E[v]!==0&&C.push({id:i?i.segmentId():-1,start:T.start,end:T.end,myFill:{above:E[v]===1,below:E[v]===2},otherFill:null})}),i&&i.selected(C),C}var t={union:function(M,E){return U(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],E)},intersect:function(M,E){return U(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],E)},difference:function(M,E){return U(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],E)},differenceRev:function(M,E){return U(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],E)},xor:function(M,E){return U(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],E)}};Q.exports=t},9696:function(Q,U,t){var M=t(29936).Transform,E=t(55619);function i(){M.call(this,{readableObjectMode:!0})}i.prototype=Object.create(M.prototype),i.prototype.constructor=i,E(i.prototype),U.gS=function(T,v,d){for(var r=v,e=0;e<d.length;)if(T[r++]!==d[e++])return!1;return!0},U.wR=function(T,v){var d=[],r=0;if(v&&v==="hex")for(;r<T.length;)d.push(parseInt(T.slice(r,r+2),16)),r+=2;else for(;r<T.length;r++)d.push(T.charCodeAt(r)&255);return d},U.Bz=function(T,v){return T[v]|T[v+1]<<8},U.eW=function(T,v){return T[v+1]|T[v]<<8},U.st=function(T,v){return T[v]|T[v+1]<<8|T[v+2]<<16|T[v+3]*16777216},U.eI=function(T,v){return T[v+3]|T[v+2]<<8|T[v+1]<<16|T[v]*16777216};function C(T,v,d){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=T,v&&(this.code=v),d&&(this.statusCode=d)}C.prototype=Object.create(Error.prototype),C.prototype.constructor=C},11688:function(Q){function U(E,i){var C=new Error(E);return C.code=i,C}function t(E){try{return decodeURIComponent(escape(E))}catch{return E}}function M(E,i,C){this.input=E.subarray(i,C),this.start=i;var T=String.fromCharCode.apply(null,this.input.subarray(0,4));if(T!=="II*\0"&&T!=="MM\0*")throw U("invalid TIFF signature","EBADDATA");this.big_endian=T[0]==="M"}M.prototype.each=function(E){this.aborted=!1;var i=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:i}];this.ifds_to_read.length>0&&!this.aborted;){var C=this.ifds_to_read.shift();C.offset&&this.scan_ifd(C.id,C.offset,E)}},M.prototype.read_uint16=function(E){var i=this.input;if(E+2>i.length)throw U("unexpected EOF","EBADDATA");return this.big_endian?i[E]*256+i[E+1]:i[E]+i[E+1]*256},M.prototype.read_uint32=function(E){var i=this.input;if(E+4>i.length)throw U("unexpected EOF","EBADDATA");return this.big_endian?i[E]*16777216+i[E+1]*65536+i[E+2]*256+i[E+3]:i[E]+i[E+1]*256+i[E+2]*65536+i[E+3]*16777216},M.prototype.is_subifd_link=function(E,i){return E===0&&i===34665||E===0&&i===34853||E===34665&&i===40965},M.prototype.exif_format_length=function(E){switch(E){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(E,i){var C;switch(E){case 1:case 2:return C=this.input[i],C;case 6:return C=this.input[i],C|(C&128)*33554430;case 3:return C=this.read_uint16(i),C;case 8:return C=this.read_uint16(i),C|(C&32768)*131070;case 4:return C=this.read_uint32(i),C;case 9:return C=this.read_uint32(i),C|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(E,i,C){var T=this.read_uint16(i);i+=2;for(var v=0;v<T;v++){var d=this.read_uint16(i),r=this.read_uint16(i+2),e=this.read_uint32(i+4),l=this.exif_format_length(r),n=e*l,s=n<=4?i+8:this.read_uint32(i+8),o=!1;if(s+n>this.input.length)throw U("unexpected EOF","EBADDATA");for(var p=[],b=s,h=0;h<e;h++,b+=l){var _=this.exif_format_read(r,b);if(_===null){p=null;break}p.push(_)}Array.isArray(p)&&r===2&&(p=t(String.fromCharCode.apply(null,p)),p&&p[p.length-1]==="\0"&&(p=p.slice(0,-1))),this.is_subifd_link(E,d)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:d,offset:p[0]}),o=!0);var a={is_big_endian:this.big_endian,ifd:E,tag:d,format:r,count:e,entry_offset:i+this.start,data_length:n,data_offset:s+this.start,value:p,is_subifd_link:o};if(C(a)===!1){this.aborted=!0;return}i+=12}E===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(i)})},Q.exports.ExifParser=M,Q.exports.get_orientation=function(E){var i=0;try{return new M(E,0,E.length).each(function(C){if(C.ifd===0&&C.tag===274&&Array.isArray(C.value))return i=C.value[0],!1}),i}catch{return-1}}},44600:function(Q,U,t){var M=t(9696).eW,E=t(9696).eI;function i(n,s){if(n.length<4+s)return null;var o=E(n,s);return n.length<o+s||o<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(s+4,s+8)),data:n.slice(s+8,s+o),end:s+o}}Q.exports.unbox=i;function C(n,s){for(var o=0;;){var p=i(n,o);if(!p)break;switch(p.boxtype){case"ispe":s.sizes.push({width:E(p.data,4),height:E(p.data,8)});break;case"irot":s.transforms.push({type:"irot",value:p.data[0]&3});break;case"imir":s.transforms.push({type:"imir",value:p.data[0]&1});break}o=p.end}}function T(n,s,o){for(var p=0,b=0;b<o;b++)p=p*256+(n[s+b]||0);return p}function v(n,s){for(var o=n[4]>>4&15,p=n[4]&15,b=n[5]>>4&15,h=M(n,6),_=8,a=0;a<h;a++){var c=M(n,_);_+=2;var f=M(n,_);_+=2;var x=T(n,_,b);_+=b;var k=M(n,_);if(_+=2,f===0&&k===1){var y=T(n,_,o),A=T(n,_+o,p);s.item_loc[c]={length:A,offset:y+x}}_+=k*(o+p)}}function d(n,s){for(var o=M(n,4),p=6,b=0;b<o;b++){var h=i(n,p);if(!h)break;if(h.boxtype==="infe"){for(var _=M(h.data,4),a="",c=8;c<h.data.length&&h.data[c];c++)a+=String.fromCharCode(h.data[c]);s.item_inf[a]=_}p=h.end}}function r(n,s){for(var o=0;;){var p=i(n,o);if(!p)break;p.boxtype==="ipco"&&C(p.data,s),o=p.end}}function e(n,s){for(var o=4;;){var p=i(n,o);if(!p)break;p.boxtype==="iprp"&&r(p.data,s),p.boxtype==="iloc"&&v(p.data,s),p.boxtype==="iinf"&&d(p.data,s),o=p.end}}function l(n){var s=n.reduce(function(b,h){return b.width>h.width||b.width===h.width&&b.height>h.height?b:h}),o=n.reduce(function(b,h){return b.height>h.height||b.height===h.height&&b.width>h.width?b:h}),p;return s.width>o.height||s.width===o.height&&s.height>o.width?p=s:p=o,p}Q.exports.readSizeFromMeta=function(n){var s={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(e(n,s),!!s.sizes.length){var o=l(s.sizes),p=1;s.transforms.forEach(function(h){var _={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},a={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(h.type==="imir"&&(h.value===0?p=a[p]:(p=a[p],p=_[p],p=_[p])),h.type==="irot")for(var c=0;c<h.value;c++)p=_[p]});var b=null;return s.item_inf.Exif&&(b=s.item_loc[s.item_inf.Exif]),{width:o.width,height:o.height,orientation:s.transforms.length?p:null,variants:s.sizes,exif_location:b}}},Q.exports.getMimeType=function(n){var s=String.fromCharCode.apply(null,n.slice(0,4)),o={};o[s]=!0;for(var p=8;p<n.length;p+=4)o[String.fromCharCode.apply(null,n.slice(p,p+4))]=!0;if(!(!o.mif1&&!o.msf1&&!o.miaf))return s==="avif"||s==="avis"||s==="avio"?{type:"avif",mime:"image/avif"}:s==="heic"||s==="heix"?{type:"heic",mime:"image/heic"}:s==="hevc"||s==="hevx"?{type:"heic",mime:"image/heic-sequence"}:o.avif||o.avis?{type:"avif",mime:"image/avif"}:o.heic||o.heix||o.hevc||o.hevx||o.heis?o.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).eI,C=t(44600),T=t(11688),v=M("ftyp");Q.exports=function(d){if(E(d,4,v)){var r=C.unbox(d,0);if(r){var e=C.getMimeType(r.data);if(e){for(var l,n=r.end;;){var s=C.unbox(d,n);if(!s)break;if(n=s.end,s.boxtype==="mdat")return;if(s.boxtype==="meta"){l=s.data;break}}if(l){var o=C.readSizeFromMeta(l);if(o){var p={width:o.width,height:o.height,type:e.type,mime:e.mime,wUnits:"px",hUnits:"px"};if(o.variants.length>1&&(p.variants=o.variants),o.orientation&&(p.orientation=o.orientation),o.exif_location&&o.exif_location.offset+o.exif_location.length<=d.length){var b=i(d,o.exif_location.offset),h=d.slice(o.exif_location.offset+b+4,o.exif_location.offset+o.exif_location.length),_=T.get_orientation(h);_>0&&(p.orientation=_)}return p}}}}}}},38728:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).Bz,C=M("BM");Q.exports=function(T){if(!(T.length<26)&&E(T,0,C))return{width:i(T,18),height:i(T,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).Bz,C=M("GIF87a"),T=M("GIF89a");Q.exports=function(v){if(!(v.length<10)&&!(!E(v,0,C)&&!E(v,0,T)))return{width:i(v,6),height:i(v,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(Q,U,t){var M=t(9696).Bz,E=0,i=1,C=16;Q.exports=function(T){var v=M(T,0),d=M(T,2),r=M(T,4);if(!(v!==E||d!==i||!r)){for(var e=[],l={width:0,height:0},n=0;n<r;n++){var s=T[6+C*n]||256,o=T[6+C*n+1]||256,p={width:s,height:o};e.push(p),(s>l.width||o>l.height)&&(l=p)}return{width:l.width,height:l.height,variants:e,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(Q,U,t){var M=t(9696).eW,E=t(9696).wR,i=t(9696).gS,C=t(11688),T=E("Exif\0\0");Q.exports=function(v){if(!(v.length<2)&&!(v[0]!==255||v[1]!==216||v[2]!==255))for(var d=2;;){for(;;){if(v.length-d<2)return;if(v[d++]===255)break}for(var r=v[d++],e;r===255;)r=v[d++];if(208<=r&&r<=217||r===1)e=0;else if(192<=r&&r<=254){if(v.length-d<2)return;e=M(v,d)-2,d+=2}else return;if(r===217||r===218)return;var l;if(r===225&&e>=10&&i(v,d,T)&&(l=C.get_orientation(v.slice(d+6,d+e))),e>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(v.length-d<e)return;var n={width:M(v,d+3),height:M(v,d+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return l>0&&(n.orientation=l),n}d+=e}}},37276:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).eI,C=M(`\x89PNG\r

`),T=M("IHDR");Q.exports=function(v){if(!(v.length<24)&&E(v,0,C)&&E(v,12,T))return{width:i(v,16),height:i(v,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).eI,C=M("8BPS\0");Q.exports=function(T){if(!(T.length<22)&&E(T,0,C))return{width:i(T,18),height:i(T,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(Q){function U(l){return l===32||l===9||l===13||l===10}function t(l){return typeof l=="number"&&isFinite(l)&&l>0}function M(l){var n=0,s=l.length;for(l[0]===239&&l[1]===187&&l[2]===191&&(n=3);n<s&&U(l[n]);)n++;return n===s?!1:l[n]===60}var E=/<[-_.:a-zA-Z0-9][^>]*>/,i=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,C=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,T=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,v=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,d=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function r(l){var n=l.match(C),s=l.match(T),o=l.match(v);return{width:n&&(n[1]||n[2]),height:s&&(s[1]||s[2]),viewbox:o&&(o[1]||o[2])}}function e(l){return d.test(l)?l.match(d)[0]:"px"}Q.exports=function(l){if(M(l)){for(var n="",s=0;s<l.length;s++)n+=String.fromCharCode(l[s]);var o=(n.match(E)||[""])[0];if(i.test(o)){var p=r(o),b=parseFloat(p.width),h=parseFloat(p.height);if(p.width&&p.height)return!t(b)||!t(h)?void 0:{width:b,height:h,type:"svg",mime:"image/svg+xml",wUnits:e(p.width),hUnits:e(p.height)};var _=(p.viewbox||"").split(" "),a={width:_[2],height:_[3]},c=parseFloat(a.width),f=parseFloat(a.height);if(!(!t(c)||!t(f))&&e(a.width)===e(a.height)){var x=c/f;return p.width?t(b)?{width:b,height:b/x,type:"svg",mime:"image/svg+xml",wUnits:e(p.width),hUnits:e(p.width)}:void 0:p.height?t(h)?{width:h*x,height:h,type:"svg",mime:"image/svg+xml",wUnits:e(p.height),hUnits:e(p.height)}:void 0:{width:c,height:f,type:"svg",mime:"image/svg+xml",wUnits:e(a.width),hUnits:e(a.height)}}}}}},98792:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).Bz,C=t(9696).eW,T=t(9696).st,v=t(9696).eI,d=M("II*\0"),r=M("MM\0*");function e(s,o,p){return p?C(s,o):i(s,o)}function l(s,o,p){return p?v(s,o):T(s,o)}function n(s,o,p){var b=e(s,o+2,p),h=l(s,o+4,p);return h!==1||b!==3&&b!==4?null:b===3?e(s,o+8,p):l(s,o+8,p)}Q.exports=function(s){if(!(s.length<8)&&!(!E(s,0,d)&&!E(s,0,r))){var o=s[0]===77,p=l(s,4,o)-8;if(!(p<0)){var b=p+8;if(!(s.length-b<2)){var h=e(s,b+0,o)*12;if(!(h<=0)&&(b+=2,!(s.length-b<h))){var _,a,c,f;for(_=0;_<h;_+=12)f=e(s,b+_,o),f===256?a=n(s,b+_,o):f===257&&(c=n(s,b+_,o));if(a&&c)return{width:a,height:c,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},20704:function(Q,U,t){var M=t(9696).wR,E=t(9696).gS,i=t(9696).Bz,C=t(9696).st,T=t(11688),v=M("RIFF"),d=M("WEBP");function r(n,s){if(!(n[s+3]!==157||n[s+4]!==1||n[s+5]!==42))return{width:i(n,s+6)&16383,height:i(n,s+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function e(n,s){if(n[s]===47){var o=C(n,s+1);return{width:(o&16383)+1,height:(o>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function l(n,s){return{width:(n[s+6]<<16|n[s+5]<<8|n[s+4])+1,height:(n[s+9]<<s|n[s+8]<<8|n[s+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}Q.exports=function(n){if(!(n.length<16)&&!(!E(n,0,v)&&!E(n,8,d))){var s=12,o=null,p=0,b=C(n,4)+8;if(!(b>n.length)){for(;s+8<b;){if(n[s]===0){s++;continue}var h=String.fromCharCode.apply(null,n.slice(s,s+4)),_=C(n,s+4);h==="VP8 "&&_>=10?o=o||r(n,s+8):h==="VP8L"&&_>=9?o=o||e(n,s+8):h==="VP8X"&&_>=10?o=o||l(n,s+8):h==="EXIF"&&(p=T.get_orientation(n.slice(s+8,s+8+_)),s=1/0),s+=8+_}if(o)return p>0&&(o.orientation=p),o}}}},87480:function(Q,U,t){Q.exports={avif:t(40528),bmp:t(38728),gif:t(5588),ico:t(41924),jpeg:t(87968),png:t(37276),psd:t(90328),svg:t(16024),tiff:t(98792),webp:t(20704)}},19480:function(Q,U,t){var M=t(87480);function E(i){for(var C=Object.keys(M),T=0;T<C.length;T++){var v=M[C[T]](i);if(v)return v}return null}Q.exports=function(i){return E(i)},Q.exports.parsers=M},4168:function(Q){var U=Q.exports={},t,M;function E(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=E}catch{t=E}try{typeof clearTimeout=="function"?M=clearTimeout:M=i}catch{M=i}})();function C(p){if(t===setTimeout)return setTimeout(p,0);if((t===E||!t)&&setTimeout)return t=setTimeout,setTimeout(p,0);try{return t(p,0)}catch{try{return t.call(null,p,0)}catch{return t.call(this,p,0)}}}function T(p){if(M===clearTimeout)return clearTimeout(p);if((M===i||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(p);try{return M(p)}catch{try{return M.call(null,p)}catch{return M.call(this,p)}}}var v=[],d=!1,r,e=-1;function l(){!d||!r||(d=!1,r.length?v=r.concat(v):e=-1,v.length&&n())}function n(){if(!d){var p=C(l);d=!0;for(var b=v.length;b;){for(r=v,v=[];++e<b;)r&&r[e].run();e=-1,b=v.length}r=null,d=!1,T(p)}}U.nextTick=function(p){var b=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)b[h-1]=arguments[h];v.push(new s(p,b)),v.length===1&&!d&&C(n)};function s(p,b){this.fun=p,this.array=b}s.prototype.run=function(){this.fun.apply(null,this.array)},U.title="browser",U.browser=!0,U.env={},U.argv=[],U.version="",U.versions={};function o(){}U.on=o,U.addListener=o,U.once=o,U.off=o,U.removeListener=o,U.removeAllListeners=o,U.emit=o,U.prependListener=o,U.prependOnceListener=o,U.listeners=function(p){return[]},U.binding=function(p){throw new Error("process.binding is not supported")},U.cwd=function(){return"/"},U.chdir=function(p){throw new Error("process.chdir is not supported")},U.umask=function(){return 0}},3951:function(Q,U,t){for(var M=t(41984),E=typeof window>"u"?t.g:window,i=["moz","webkit"],C="AnimationFrame",T=E["request"+C],v=E["cancel"+C]||E["cancelRequest"+C],d=0;!T&&d<i.length;d++)T=E[i[d]+"Request"+C],v=E[i[d]+"Cancel"+C]||E[i[d]+"CancelRequest"+C];if(!T||!v){var r=0,e=0,l=[],n=1e3/60;T=function(s){if(l.length===0){var o=M(),p=Math.max(0,n-(o-r));r=p+o,setTimeout(function(){var b=l.slice(0);l.length=0;for(var h=0;h<b.length;h++)if(!b[h].cancelled)try{b[h].callback(r)}catch(_){setTimeout(function(){throw _},0)}},Math.round(p))}return l.push({handle:++e,callback:s,cancelled:!1}),e},v=function(s){for(var o=0;o<l.length;o++)l[o].handle===s&&(l[o].cancelled=!0)}}Q.exports=function(s){return T.call(E,s)},Q.exports.cancel=function(){v.apply(E,arguments)},Q.exports.polyfill=function(s){s||(s=E),s.requestAnimationFrame=T,s.cancelAnimationFrame=v}},24544:function(Q,U,t){var M=t(76752),E=t(72160),i=t(45223),C=t(55616),T=t(50896),v=t(47520),d=t(37816),r=d.float32,e=d.fract32;Q.exports=n;var l=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function n(s,o){if(typeof s=="function"?(o||(o={}),o.regl=s):o=s,o.length&&(o.positions=o),s=o.regl,!s.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var p=s._gl,b,h,_,a,c,f,x={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},k=[];return a=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),h=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),_=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),c=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=s.buffer({usage:"static",type:"float",data:l}),u(o),b=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(S,w){return[w.viewport.x,w.viewport.y,S.viewportWidth,S.viewportHeight]}},attributes:{color:{buffer:a,offset:function(S,w){return w.offset*4},divisor:1},position:{buffer:h,offset:function(S,w){return w.offset*8},divisor:1},positionFract:{buffer:_,offset:function(S,w){return w.offset*8},divisor:1},error:{buffer:c,offset:function(S,w){return w.offset*16},divisor:1},direction:{buffer:f,stride:24,offset:0},lineOffset:{buffer:f,stride:24,offset:8},capOffset:{buffer:f,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:l.length}),T(y,{update:u,draw:A,destroy:m,regl:s,gl:p,canvas:p.canvas,groups:k}),y;function y(S){S?u(S):S===null&&m(),A()}function A(S){if(typeof S=="number")return L(S);S&&!Array.isArray(S)&&(S=[S]),s._refresh(),k.forEach(function(w,I){if(w){if(S&&(S[I]?w.draw=!0:w.draw=!1),!w.draw){w.draw=!0;return}L(I)}})}function L(S){typeof S=="number"&&(S=k[S]),S!=null&&S&&S.count&&S.color&&S.opacity&&S.positions&&S.positions.length>1&&(S.scaleRatio=[S.scale[0]*S.viewport.width,S.scale[1]*S.viewport.height],b(S),S.after&&S.after(S))}function u(S){if(S){S.length!=null?typeof S[0]=="number"&&(S=[{positions:S}]):Array.isArray(S)||(S=[S]);var w=0,I=0;if(y.groups=k=S.map(function(N,G){var X=k[G];if(N)typeof N=="function"?N={after:N}:typeof N[0]=="number"&&(N={positions:N});else return X;return N=C(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),X||(k[G]=X={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=T({},x,N)),i(X,N,[{lineWidth:function(J){return+J*.5},capSize:function(J){return+J*.5},opacity:parseFloat,errors:function(J){return J=v(J),I+=J.length,J},positions:function(J,it){return J=v(J,"float64"),it.count=Math.floor(J.length/2),it.bounds=M(J,2),it.offset=w,w+=it.count,J}},{color:function(J,it){var nt=it.count;if(J||(J="transparent"),!Array.isArray(J)||typeof J[0]=="number"){var q=J;J=Array(nt);for(var Z=0;Z<nt;Z++)J[Z]=q}if(J.length<nt)throw Error("Not enough colors");for(var $=new Uint8Array(nt*4),V=0;V<nt;V++){var rt=E(J[V],"uint8");$.set(rt,V*4)}return $},range:function(J,it,nt){var q=it.bounds;return J||(J=q),it.scale=[1/(J[2]-J[0]),1/(J[3]-J[1])],it.translate=[-J[0],-J[1]],it.scaleFract=e(it.scale),it.translateFract=e(it.translate),J},viewport:function(J){var it;return Array.isArray(J)?it={x:J[0],y:J[1],width:J[2]-J[0],height:J[3]-J[1]}:J?(it={x:J.x||J.left||0,y:J.y||J.top||0},J.right?it.width=J.right-it.x:it.width=J.w||J.width||0,J.bottom?it.height=J.bottom-it.y:it.height=J.h||J.height||0):it={x:0,y:0,width:p.drawingBufferWidth,height:p.drawingBufferHeight},it}}]),X}),w||I){var O=k.reduce(function(N,G,X){return N+(G?G.count:0)},0),D=new Float64Array(O*2),P=new Uint8Array(O*4),F=new Float32Array(O*4);k.forEach(function(N,G){if(N){var X=N.positions,J=N.count,it=N.offset,nt=N.color,q=N.errors;J&&(P.set(nt,it*4),F.set(q,it*4),D.set(X,it*2))}});var R=r(D);h(R);var B=e(D,R);_(B),a(P),c(F)}}}function m(){h.destroy(),_.destroy(),a.destroy(),c.destroy(),f.destroy()}}},13472:function(Q,U,t){var M=t(72160),E=t(76752),i=t(50896),C=t(55616),T=t(47520),v=t(28912),d=t(71152),r=t(37816),e=r.float32,l=r.fract32,n=t(60463),s=t(51160),o=t(10272),p=`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,b=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,h=`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,_=`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,a=`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,c=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`;Q.exports=f;function f(x,k){if(!(this instanceof f))return new f(x,k);if(typeof x=="function"?(k||(k={}),k.regl=x):k=x,k.length&&(k.positions=k),x=k.regl,!x.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=x._gl,this.regl=x,this.passes=[],this.shaders=f.shaders.has(x)?f.shaders.get(x):f.shaders.set(x,f.createShaders(x)).get(x),this.update(k)}f.dashMult=2,f.maxPatternLength=256,f.precisionThreshold=3e6,f.maxPoints=1e4,f.maxLines=2048,f.shaders=new n,f.createShaders=function(x){var k=x.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),y={primitive:"triangle strip",instances:x.prop("count"),count:4,offset:0,uniforms:{miterMode:function(m,S){return S.join==="round"?2:1},miterLimit:x.prop("miterLimit"),scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),thickness:x.prop("thickness"),dashTexture:x.prop("dashTexture"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),dashLength:x.prop("dashLength"),viewport:function(m,S){return[S.viewport.x,S.viewport.y,m.viewportWidth,m.viewportHeight]},depth:x.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(m,S){return!S.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport")},A=x(i({vert:p,frag:b,attributes:{lineEnd:{buffer:k,divisor:0,stride:8,offset:0},lineTop:{buffer:k,divisor:0,stride:8,offset:4},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},y)),L;try{L=x(i({cull:{enable:!0,face:"back"},vert:a,frag:c,attributes:{lineEnd:{buffer:k,divisor:0,stride:8,offset:0},lineTop:{buffer:k,divisor:0,stride:8,offset:4},aColor:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:x.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},y))}catch{L=A}var u=x({primitive:"triangle",elements:function(m,S){return S.triangles},offset:0,vert:h,frag:_,uniforms:{scale:x.prop("scale"),color:x.prop("fill"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),viewport:function(m,S){return[S.viewport.x,S.viewport.y,m.viewportWidth,m.viewportHeight]}},attributes:{position:{buffer:x.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8}},blend:y.blend,depth:{enable:!1},scissor:y.scissor,stencil:y.stencil,viewport:y.viewport});return{fill:u,rect:A,miter:L}},f.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},f.prototype.render=function(){for(var x,k=[],y=arguments.length;y--;)k[y]=arguments[y];k.length&&(x=this).update.apply(x,k),this.draw()},f.prototype.draw=function(){for(var x=this,k=[],y=arguments.length;y--;)k[y]=arguments[y];return(k.length?k:this.passes).forEach(function(A,L){var u;if(A&&Array.isArray(A))return(u=x).draw.apply(u,A);typeof A=="number"&&(A=x.passes[A]),A&&A.count>1&&A.opacity&&(x.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&x.shaders.fill(A),A.thickness&&(A.scale[0]*A.viewport.width>f.precisionThreshold||A.scale[1]*A.viewport.height>f.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=f.maxPoints)?x.shaders.rect(A):x.shaders.miter(A)))}),this},f.prototype.update=function(x){var k=this;if(x){x.length!=null?typeof x[0]=="number"&&(x=[{positions:x}]):Array.isArray(x)||(x=[x]);var y=this,A=y.regl,L=y.gl;if(x.forEach(function(I,O){var D=k.passes[O];if(I!==void 0){if(I===null){k.passes[O]=null;return}if(typeof I[0]=="number"&&(I={positions:I}),I=C(I,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),D||(k.passes[O]=D={id:O,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},I=i({},f.defaults,I)),I.thickness!=null&&(D.thickness=parseFloat(I.thickness)),I.opacity!=null&&(D.opacity=parseFloat(I.opacity)),I.miterLimit!=null&&(D.miterLimit=parseFloat(I.miterLimit)),I.overlay!=null&&(D.overlay=!!I.overlay,O<f.maxLines&&(D.depth=2*(f.maxLines-1-O%f.maxLines)/f.maxLines-1)),I.join!=null&&(D.join=I.join),I.hole!=null&&(D.hole=I.hole),I.fill!=null&&(D.fill=I.fill?M(I.fill,"uint8"):null),I.viewport!=null&&(D.viewport=s(I.viewport)),D.viewport||(D.viewport=s([L.drawingBufferWidth,L.drawingBufferHeight])),I.close!=null&&(D.close=I.close),I.positions===null&&(I.positions=[]),I.positions){var P,F;if(I.positions.x&&I.positions.y){var R=I.positions.x,B=I.positions.y;F=D.count=Math.max(R.length,B.length),P=new Float64Array(F*2);for(var N=0;N<F;N++)P[N*2]=R[N],P[N*2+1]=B[N]}else P=T(I.positions,"float64"),F=D.count=Math.floor(P.length/2);var G=D.bounds=E(P,2);if(D.fill){for(var X=[],J={},it=0,nt=0,q=0,Z=D.count;nt<Z;nt++){var $=P[nt*2],V=P[nt*2+1];isNaN($)||isNaN(V)||$==null||V==null?($=P[it*2],V=P[it*2+1],J[nt]=it):it=nt,X[q++]=$,X[q++]=V}if(I.splitNull){D.count-1 in J||(J[D.count]=D.count-1);var rt=Object.keys(J).map(Number).sort(function(ht,bt){return ht-bt}),ot=[],H=0,Y=D.hole!=null?D.hole[0]:null;if(Y!=null){var at=o(rt,function(ht){return ht>=Y});rt=rt.slice(0,at),rt.push(Y)}for(var et=function(ht){var bt=X.slice(H*2,rt[ht]*2).concat(Y?X.slice(Y*2):[]),Pt=(D.hole||[]).map(function(te){return te-Y+(rt[ht]-H)}),Gt=v(bt,Pt);Gt=Gt.map(function(te){return te+H+(te+H<rt[ht]?0:Y-rt[ht])}),ot.push.apply(ot,Gt),H=rt[ht]+1},ct=0;ct<rt.length;ct++)et(ct);for(var ft=0,yt=ot.length;ft<yt;ft++)J[ot[ft]]!=null&&(ot[ft]=J[ot[ft]]);D.triangles=ot}else{for(var xt=v(X,D.hole||[]),Ct=0,gt=xt.length;Ct<gt;Ct++)J[xt[Ct]]!=null&&(xt[Ct]=J[xt[Ct]]);D.triangles=xt}}var mt=new Float64Array(P);d(mt,2,G);var vt=new Float64Array(F*2+6);D.close?P[0]===P[F*2-2]&&P[1]===P[F*2-1]?(vt[0]=mt[F*2-4],vt[1]=mt[F*2-3]):(vt[0]=mt[F*2-2],vt[1]=mt[F*2-1]):(vt[0]=mt[0],vt[1]=mt[1]),vt.set(mt,2),D.close?P[0]===P[F*2-2]&&P[1]===P[F*2-1]?(vt[F*2+2]=mt[2],vt[F*2+3]=mt[3],D.count-=1):(vt[F*2+2]=mt[0],vt[F*2+3]=mt[1],vt[F*2+4]=mt[2],vt[F*2+5]=mt[3]):(vt[F*2+2]=mt[F*2-2],vt[F*2+3]=mt[F*2-1],vt[F*2+4]=mt[F*2-2],vt[F*2+5]=mt[F*2-1]);var At=e(vt);D.positionBuffer(At);var Ot=l(vt,At);D.positionFractBuffer(Ot)}if(I.range?D.range=I.range:D.range||(D.range=D.bounds),(I.range||I.positions)&&D.count){var It=D.bounds,St=It[2]-It[0],Bt=It[3]-It[1],re=D.range[2]-D.range[0],Yt=D.range[3]-D.range[1];D.scale=[St/re,Bt/Yt],D.translate=[-D.range[0]/re+It[0]/re||0,-D.range[1]/Yt+It[1]/Yt||0],D.scaleFract=l(D.scale),D.translateFract=l(D.translate)}if(I.dashes){var he=0,Zt;if(!I.dashes||I.dashes.length<2)he=1,Zt=new Uint8Array([255,255,255,255,255,255,255,255]);else{he=0;for(var ae=0;ae<I.dashes.length;++ae)he+=I.dashes[ae];Zt=new Uint8Array(he*f.dashMult);for(var oe=0,ce=255,ue=0;ue<2;ue++)for(var ye=0;ye<I.dashes.length;++ye){for(var Tt=0,Ft=I.dashes[ye]*f.dashMult*.5;Tt<Ft;++Tt)Zt[oe++]=ce;ce^=255}}D.dashLength=he,D.dashTexture({channels:1,data:Zt,width:Zt.length,height:1,mag:"linear",min:"linear"},0,0)}if(I.color){var $t=D.count,Vt=I.color;Vt||(Vt="transparent");var Nt=new Uint8Array($t*4+4);if(!Array.isArray(Vt)||typeof Vt[0]=="number")for(var Mt=M(Vt,"uint8"),Et=0;Et<$t+1;Et++)Nt.set(Mt,Et*4);else{for(var Dt=0;Dt<$t;Dt++){var dt=M(Vt[Dt],"uint8");Nt.set(dt,Dt*4)}Nt.set(M(Vt[0],"uint8"),$t*4)}D.colorBuffer({usage:"dynamic",type:"uint8",data:Nt})}}}),x.length<this.passes.length){for(var u=x.length;u<this.passes.length;u++){var m=this.passes[u];m&&(m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy())}this.passes.length=x.length}for(var S=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&S.push(this.passes[w]);return this.passes=S,this}},f.prototype.destroy=function(){return this.passes.forEach(function(x){x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(Q,U,t){function M(m,S){var w=m==null?null:typeof Symbol<"u"&&m[Symbol.iterator]||m["@@iterator"];if(w!=null){var I,O,D,P,F=[],R=!0,B=!1;try{if(D=(w=w.call(m)).next,S===0){if(Object(w)!==w)return;R=!1}else for(;!(R=(I=D.call(w)).done)&&(F.push(I.value),F.length!==S);R=!0);}catch(N){B=!0,O=N}finally{try{if(!R&&w.return!=null&&(P=w.return(),Object(P)!==P))return}finally{if(B)throw O}}return F}}function E(m,S){return T(m)||M(m,S)||d(m,S)||l()}function i(m){return C(m)||v(m)||d(m)||e()}function C(m){if(Array.isArray(m))return r(m)}function T(m){if(Array.isArray(m))return m}function v(m){if(typeof Symbol<"u"&&m[Symbol.iterator]!=null||m["@@iterator"]!=null)return Array.from(m)}function d(m,S){if(m){if(typeof m=="string")return r(m,S);var w=Object.prototype.toString.call(m).slice(8,-1);if(w==="Object"&&m.constructor&&(w=m.constructor.name),w==="Map"||w==="Set")return Array.from(m);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return r(m,S)}}function r(m,S){(S==null||S>m.length)&&(S=m.length);for(var w=0,I=new Array(S);w<S;w++)I[w]=m[w];return I}function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n=t(72160),s=t(76752),o=t(3808),p=t(3108),b=t(50896),h=t(26444),_=t(55616),a=t(45223),c=t(47520),f=t(96604),x=t(37816),k=t(51160),y=A;function A(m,S){var w=this;if(!(this instanceof A))return new A(m,S);typeof m=="function"?(S||(S={}),S.regl=m):(S=m,m=null),S&&S.length&&(S.positions=S),m=S.regl;var I=m._gl,O,D=[],P={},F=[],R=[null],B=[null],N=255,G=100;this.tooManyColors=f,O=m.texture({data:new Uint8Array(N*4),width:N,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),b(this,{regl:m,gl:I,groups:F,markerCache:B,markerTextures:R,palette:D,paletteIds:P,paletteTexture:O,maxColors:N,maxSize:G,canvas:I.canvas}),this.update(S);var X={uniforms:{constPointSize:!!S.constPointSize,opacity:m.prop("opacity"),paletteSize:function(nt,q){return[w.tooManyColors?0:N,O.height]},pixelRatio:m.context("pixelRatio"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translate:m.prop("translate"),translateFract:m.prop("translateFract"),markerTexture:m.prop("markerTexture"),paletteTexture:O},attributes:{x:function(nt,q){return q.xAttr||{buffer:q.positionBuffer,stride:8,offset:0}},y:function(nt,q){return q.yAttr||{buffer:q.positionBuffer,stride:8,offset:4}},xFract:function(nt,q){return q.xAttr?{constant:[0,0]}:{buffer:q.positionFractBuffer,stride:8,offset:0}},yFract:function(nt,q){return q.yAttr?{constant:[0,0]}:{buffer:q.positionFractBuffer,stride:8,offset:4}},size:function(nt,q){return q.size.length?{buffer:q.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(q.size*255/w.maxSize)]}},borderSize:function(nt,q){return q.borderSize.length?{buffer:q.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(q.borderSize*255/w.maxSize)]}},colorId:function(nt,q){return q.color.length?{buffer:q.colorBuffer,stride:w.tooManyColors?8:4,offset:0}:{constant:w.tooManyColors?D.slice(q.color*4,q.color*4+4):[q.color]}},borderColorId:function(nt,q){return q.borderColor.length?{buffer:q.colorBuffer,stride:w.tooManyColors?8:4,offset:w.tooManyColors?4:2}:{constant:w.tooManyColors?D.slice(q.borderColor*4,q.borderColor*4+4):[q.borderColor]}},isActive:function(nt,q){return q.activation===!0?{constant:[1]}:q.activation?q.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:m.prop("elements"),count:m.prop("count"),offset:m.prop("offset"),primitive:"points"},J=b({},X);J.frag=h([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),J.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=m(J);var it=b({},X);it.frag=h([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),it.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),f&&(it.frag=it.frag.replace("smoothstep","smoothStep"),J.frag=J.frag.replace("smoothstep","smoothStep")),this.drawCircle=m(it)}A.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},A.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},A.prototype.draw=function(){for(var m=this,S=arguments.length,w=new Array(S),I=0;I<S;I++)w[I]=arguments[I];var O=this.groups;if(w.length===1&&Array.isArray(w[0])&&(w[0][0]===null||Array.isArray(w[0][0]))&&(w=w[0]),this.regl._refresh(),w.length)for(var D=0;D<w.length;D++)this.drawItem(D,w[D]);else O.forEach(function(P,F){m.drawItem(F)});return this},A.prototype.drawItem=function(m,S){var w=this.groups,I=w[m];if(typeof S=="number"&&(m=S,I=w[S],S=null),!!(I&&I.count&&I.opacity)){I.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,I,S));for(var O=[],D=1;D<I.activation.length;D++)!I.activation[D]||I.activation[D]!==!0&&!I.activation[D].data.length||O.push.apply(O,i(this.getMarkerDrawOptions(D,I,S)));O.length&&this.drawMarker(O)}},A.prototype.getMarkerDrawOptions=function(m,S,w){var I=S.range,O=S.tree,D=S.viewport,P=S.activation,F=S.selectionBuffer,R=S.count;if(this.regl,!O)return w?[b({},S,{markerTexture:this.markerTextures[m],activation:P[m],count:w.length,elements:w,offset:0})]:[b({},S,{markerTexture:this.markerTextures[m],activation:P[m],offset:0})];var B=[],N=O.range(I,{lod:!0,px:[(I[2]-I[0])/D.width,(I[3]-I[1])/D.height]});if(w){for(var G=P[m],X=G.data,J=new Uint8Array(R),it=0;it<w.length;it++){var nt=w[it];J[nt]=X?X[nt]:1}F.subdata(J)}for(var q=N.length;q--;){var Z=E(N[q],2),$=Z[0],V=Z[1];B.push(b({},S,{markerTexture:this.markerTextures[m],activation:w?F:P[m],offset:$,count:V-$}))}return B},A.prototype.update=function(){for(var m=this,S=arguments.length,w=new Array(S),I=0;I<S;I++)w[I]=arguments[I];if(w.length){w.length===1&&Array.isArray(w[0])&&(w=w[0]);var O=this.groups,D=this.gl,P=this.regl,F=this.maxSize,R=this.maxColors,B=this.palette;this.groups=O=w.map(function(N,G){var X=O[G];if(N===void 0)return X;N===null?N={positions:null}:typeof N=="function"?N={ondraw:N}:typeof N[0]=="number"&&(N={positions:N}),N=_(N,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),N.positions===null&&(N.positions=[]),N.tooManyColors!=null&&(m.tooManyColors=N.tooManyColors),X||(O[G]=X={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:P.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:P.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:P.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:P.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:P.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},N=b({},A.defaults,N)),N.positions&&!("marker"in N)&&(N.marker=X.marker,delete X.marker),N.marker&&!("positions"in N)&&(N.positions=X.positions,delete X.positions);var J=0,it=0;if(a(X,N,[{snap:!0,size:function(mt,vt){return mt==null&&(mt=A.defaults.size),J+=mt&&mt.length?1:0,mt},borderSize:function(mt,vt){return mt==null&&(mt=A.defaults.borderSize),J+=mt&&mt.length?1:0,mt},opacity:parseFloat,color:function(mt,vt){return mt==null&&(mt=A.defaults.color),mt=m.updateColor(mt),it++,mt},borderColor:function(mt,vt){return mt==null&&(mt=A.defaults.borderColor),mt=m.updateColor(mt),it++,mt},bounds:function(mt,vt,At){return"range"in At||(At.range=null),mt},positions:function(mt,vt,At){var Ot=vt.snap,It=vt.positionBuffer,St=vt.positionFractBuffer,Bt=vt.selectionBuffer;if(mt.x||mt.y)return mt.x.length?vt.xAttr={buffer:P.buffer(mt.x),offset:0,stride:4,count:mt.x.length}:vt.xAttr={buffer:mt.x.buffer,offset:mt.x.offset*4||0,stride:(mt.x.stride||1)*4,count:mt.x.count},mt.y.length?vt.yAttr={buffer:P.buffer(mt.y),offset:0,stride:4,count:mt.y.length}:vt.yAttr={buffer:mt.y.buffer,offset:mt.y.offset*4||0,stride:(mt.y.stride||1)*4,count:mt.y.count},vt.count=Math.max(vt.xAttr.count,vt.yAttr.count),mt;mt=c(mt,"float64");var re=vt.count=Math.floor(mt.length/2),Yt=vt.bounds=re?s(mt,2):null;if(!At.range&&!vt.range&&(delete vt.range,At.range=Yt),!At.marker&&!vt.marker&&(delete vt.marker,At.marker=null),Ot&&(Ot===!0||re>Ot)?vt.tree=p(mt,{bounds:Yt}):Ot&&Ot.length&&(vt.tree=Ot),vt.tree){var he={primitive:"points",usage:"static",data:vt.tree,type:"uint32"};vt.elements?vt.elements(he):vt.elements=P.elements(he)}var Zt=x.float32(mt);It({data:Zt,usage:"dynamic"});var ae=x.fract32(mt,Zt);return St({data:ae,usage:"dynamic"}),Bt({data:new Uint8Array(re),type:"uint8",usage:"stream"}),mt}},{marker:function(mt,vt,At){var Ot=vt.activation;if(Ot.forEach(function(ae){return ae&&ae.destroy&&ae.destroy()}),Ot.length=0,!mt||typeof mt[0]=="number"){var It=m.addMarker(mt);Ot[It]=!0}else{for(var St=[],Bt=0,re=Math.min(mt.length,vt.count);Bt<re;Bt++){var Yt=m.addMarker(mt[Bt]);St[Yt]||(St[Yt]=new Uint8Array(vt.count)),St[Yt][Bt]=1}for(var he=0;he<St.length;he++)if(St[he]){var Zt={data:St[he],type:"uint8",usage:"static"};Ot[he]?Ot[he](Zt):Ot[he]=P.buffer(Zt),Ot[he].data=St[he]}}return mt},range:function(mt,vt,At){var Ot=vt.bounds;if(Ot)return mt||(mt=Ot),vt.scale=[1/(mt[2]-mt[0]),1/(mt[3]-mt[1])],vt.translate=[-mt[0],-mt[1]],vt.scaleFract=x.fract(vt.scale),vt.translateFract=x.fract(vt.translate),mt},viewport:function(mt){var vt=k(mt||[D.drawingBufferWidth,D.drawingBufferHeight]);return vt}}]),J){var nt=X,q=nt.count,Z=nt.size,$=nt.borderSize,V=nt.sizeBuffer,rt=new Uint8Array(q*2);if(Z.length||$.length)for(var ot=0;ot<q;ot++)rt[ot*2]=Math.round((Z[ot]==null?Z:Z[ot])*255/F),rt[ot*2+1]=Math.round(($[ot]==null?$:$[ot])*255/F);V({data:rt,usage:"dynamic"})}if(it){var H=X,Y=H.count,at=H.color,et=H.borderColor,ct=H.colorBuffer,ft;if(m.tooManyColors){if(at.length||et.length){ft=new Uint8Array(Y*8);for(var yt=0;yt<Y;yt++){var xt=at[yt];ft[yt*8]=B[xt*4],ft[yt*8+1]=B[xt*4+1],ft[yt*8+2]=B[xt*4+2],ft[yt*8+3]=B[xt*4+3];var Ct=et[yt];ft[yt*8+4]=B[Ct*4],ft[yt*8+5]=B[Ct*4+1],ft[yt*8+6]=B[Ct*4+2],ft[yt*8+7]=B[Ct*4+3]}}}else if(at.length||et.length){ft=new Uint8Array(Y*4+2);for(var gt=0;gt<Y;gt++)at[gt]!=null&&(ft[gt*4]=at[gt]%R,ft[gt*4+1]=Math.floor(at[gt]/R)),et[gt]!=null&&(ft[gt*4+2]=et[gt]%R,ft[gt*4+3]=Math.floor(et[gt]/R))}ct({data:ft||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return X})}},A.prototype.addMarker=function(m){var S=this.markerTextures,w=this.regl,I=this.markerCache,O=m==null?0:I.indexOf(m);if(O>=0)return O;var D;if(m instanceof Uint8Array||m instanceof Uint8ClampedArray)D=m;else{D=new Uint8Array(m.length);for(var P=0,F=m.length;P<F;P++)D[P]=m[P]*255}var R=Math.floor(Math.sqrt(D.length));return O=S.length,I.push(m),S.push(w.texture({channels:1,data:D,radius:R,mag:"linear",min:"linear"})),O},A.prototype.updateColor=function(m){var S=this.paletteIds,w=this.palette,I=this.maxColors;Array.isArray(m)||(m=[m]);var O=[];if(typeof m[0]=="number"){var D=[];if(Array.isArray(m))for(var P=0;P<m.length;P+=4)D.push(m.slice(P,P+4));else for(var F=0;F<m.length;F+=4)D.push(m.subarray(F,F+4));m=D}for(var R=0;R<m.length;R++){var B=m[R];B=n(B,"uint8");var N=o(B,!1);if(S[N]==null){var G=w.length;S[N]=Math.floor(G/4),w[G]=B[0],w[G+1]=B[1],w[G+2]=B[2],w[G+3]=B[3]}O[R]=S[N]}return!this.tooManyColors&&w.length>I*4&&(this.tooManyColors=!0),this.updatePalette(w),O.length===1?O[0]:O},A.prototype.updatePalette=function(m){if(!this.tooManyColors){var S=this.maxColors,w=this.paletteTexture,I=Math.ceil(m.length*.25/S);if(I>1){m=m.slice();for(var O=m.length*.25%S;O<I*S;O++)m.push(0,0,0,0)}w.height<I&&w.resize(S,I),w.subimage({width:Math.min(m.length*.25,S),height:I,data:m},0,0)}},A.prototype.destroy=function(){return this.groups.forEach(function(m){m.sizeBuffer.destroy(),m.positionBuffer.destroy(),m.positionFractBuffer.destroy(),m.colorBuffer.destroy(),m.activation.forEach(function(S){return S&&S.destroy&&S.destroy()}),m.selectionBuffer.destroy(),m.elements&&m.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(m){return m&&m.destroy&&m.destroy()}),this};var L=t(50896),u=function(m,S){var w=new y(m,S),I=w.render.bind(w);return L(I,{render:I,update:w.update.bind(w),draw:w.draw.bind(w),destroy:w.destroy.bind(w),regl:w.regl,gl:w.gl,canvas:w.gl.canvas,groups:w.groups,markers:w.markerCache,palette:w.palette}),I};Q.exports=u},55795:function(Q,U,t){var M=t(38540),E=t(55616),i=t(76752),C=t(3951),T=t(67752),v=t(51160),d=t(47520);Q.exports=r;function r(s,o){if(!(this instanceof r))return new r(s);this.traces=[],this.passes={},this.regl=s,this.scatter=M(s),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var s=this,o,p=[],b=arguments.length;b--;)p[b]=arguments[b];return p.length&&(o=this).update.apply(o,p),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=C(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,C(function(){s.dirty=!1})),this)},r.prototype.update=function(){for(var s,o=[],p=arguments.length;p--;)o[p]=arguments[p];if(o.length){for(var b=0;b<o.length;b++)this.updateItem(b,o[b]);this.traces=this.traces.filter(Boolean);for(var h=[],_=0,a=0;a<this.traces.length;a++){for(var c=this.traces[a],f=this.traces[a].passes,x=0;x<f.length;x++)h.push(this.passes[f[x]]);c.passOffset=_,_+=c.passes.length}return(s=this.scatter).update.apply(s,h),this}},r.prototype.updateItem=function(s,o){var p=this,b=p.regl;if(o===null)return this.traces[s]=null,this;if(!o)return this;var h=E(o,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),_=this.traces[s]||(this.traces[s]={id:s,buffer:b.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:v([b._gl.drawingBufferWidth,b._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(h.color!=null&&(_.color=h.color),h.size!=null&&(_.size=h.size),h.marker!=null&&(_.marker=h.marker),h.borderColor!=null&&(_.borderColor=h.borderColor),h.borderSize!=null&&(_.borderSize=h.borderSize),h.opacity!=null&&(_.opacity=h.opacity),h.viewport&&(_.viewport=v(h.viewport)),h.diagonal!=null&&(_.diagonal=h.diagonal),h.upper!=null&&(_.upper=h.upper),h.lower!=null&&(_.lower=h.lower),h.data){_.buffer(d(h.data)),_.columns=h.data.length,_.count=h.data[0].length,_.bounds=[];for(var a=0;a<_.columns;a++)_.bounds[a]=i(h.data[a],1)}var c;h.range&&(_.range=h.range,c=_.range&&typeof _.range[0]!="number"),h.domain&&(_.domain=h.domain);var f=!1;h.padding!=null&&(Array.isArray(h.padding)&&h.padding.length===_.columns&&typeof h.padding[h.padding.length-1]=="number"?(_.padding=h.padding.map(n),f=!0):_.padding=n(h.padding));var x=_.columns,k=_.count,y=_.viewport.width,A=_.viewport.height,L=_.viewport.x,u=_.viewport.y,m=y/x,S=A/x;_.passes=[];for(var w=0;w<x;w++)for(var I=0;I<x;I++)if(!(!_.diagonal&&I===w)&&!(!_.upper&&w>I)&&!(!_.lower&&w<I)){var O=e(_.id,w,I),D=this.passes[O]||(this.passes[O]={});if(h.data&&(h.transpose?D.positions={x:{buffer:_.buffer,offset:I,count:k,stride:x},y:{buffer:_.buffer,offset:w,count:k,stride:x}}:D.positions={x:{buffer:_.buffer,offset:I*k,count:k},y:{buffer:_.buffer,offset:w*k,count:k}},D.bounds=l(_.bounds,w,I)),h.domain||h.viewport||h.data){var P=f?l(_.padding,w,I):_.padding;if(_.domain){var F=l(_.domain,w,I),R=F[0],B=F[1],N=F[2],G=F[3];D.viewport=[L+R*y+P[0],u+B*A+P[1],L+N*y-P[2],u+G*A-P[3]]}else D.viewport=[L+I*m+m*P[0],u+w*S+S*P[1],L+(I+1)*m-m*P[2],u+(w+1)*S-S*P[3]]}h.color&&(D.color=_.color),h.size&&(D.size=_.size),h.marker&&(D.marker=_.marker),h.borderSize&&(D.borderSize=_.borderSize),h.borderColor&&(D.borderColor=_.borderColor),h.opacity&&(D.opacity=_.opacity),h.range&&(D.range=c?l(_.range,w,I):_.range||D.bounds),_.passes.push(O)}return this},r.prototype.draw=function(){for(var s,o=[],p=arguments.length;p--;)o[p]=arguments[p];if(!o.length)this.scatter.draw();else{for(var b=[],h=0;h<o.length;h++)if(typeof o[h]=="number"){var _=this.traces[o[h]],a=_.passes,c=_.passOffset;b.push.apply(b,T(c,c+a.length))}else if(o[h].length){var f=o[h],x=this.traces[h],k=x.passes,y=x.passOffset;k=k.map(function(A,L){b[y+L]=f})}(s=this.scatter).draw.apply(s,b)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function e(s,o,p){var b=s.id!=null?s.id:s,h=o,_=p,a=b<<16|(h&255)<<8|_&255;return a}function l(s,o,p){var b,h,_,a,c=s[o],f=s[p];return c.length>2?(c[0],c[2],b=c[1],h=c[3]):c.length?(b=c[0],h=c[1]):(c.x,b=c.y,c.x+c.width,h=c.y+c.height),f.length>2?(_=f[0],a=f[2],f[1],f[3]):f.length?(_=f[0],a=f[1]):(_=f.x,f.y,a=f.x+f.width,f.y+f.height),[_,b,a,h]}function n(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var o=v(s);return[o.x,o.y,o.x+o.width,o.y+o.height]}},28624:function(Q){(function(U,t){Q.exports=t()})(this,function(){function U(fe,Be){this.id=ct++,this.type=fe,this.data=Be}function t(fe){if(fe.length===0)return[];var Be=fe.charAt(0),He=fe.charAt(fe.length-1);if(1<fe.length&&Be===He&&(Be==='"'||Be==="'"))return['"'+fe.substr(1,fe.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Be=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(fe))return t(fe.substr(0,Be.index)).concat(t(Be[1])).concat(t(fe.substr(Be.index+Be[0].length)));if(Be=fe.split("."),Be.length===1)return['"'+fe.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(fe=[],He=0;He<Be.length;++He)fe=fe.concat(t(Be[He]));return fe}function M(fe){return"["+t(fe).join("][")+"]"}function E(fe,Be){if(typeof fe=="function")return new U(0,fe);if(typeof fe=="number"||typeof fe=="boolean")return new U(5,fe);if(Array.isArray(fe))return new U(6,fe.map(function(He,pr){return E(He)}));if(fe instanceof U)return fe}function i(){var fe={"":0},Be=[""];return{id:function(He){var pr=fe[He];return pr||(pr=fe[He]=Be.length,Be.push(He),pr)},str:function(He){return Be[He]}}}function C(fe,Be,He){function pr(){var ie=window.innerWidth,pe=window.innerHeight;fe!==document.body&&(pe=Ze.getBoundingClientRect(),ie=pe.right-pe.left,pe=pe.bottom-pe.top),Ze.width=He*ie,Ze.height=He*pe}var Ze=document.createElement("canvas");et(Ze.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),fe.appendChild(Ze),fe===document.body&&(Ze.style.position="absolute",et(fe.style,{margin:0,padding:0}));var Xt;return fe!==document.body&&typeof ResizeObserver=="function"?(Xt=new ResizeObserver(function(){setTimeout(pr)}),Xt.observe(fe)):window.addEventListener("resize",pr,!1),pr(),{canvas:Ze,onDestroy:function(){Xt?Xt.disconnect():window.removeEventListener("resize",pr),fe.removeChild(Ze)}}}function T(fe,Be){function He(pr){try{return fe.getContext(pr,Be)}catch{return null}}return He("webgl")||He("experimental-webgl")||He("webgl-experimental")}function v(fe){return typeof fe=="string"?fe.split():fe}function d(fe){return typeof fe=="string"?document.querySelector(fe):fe}function r(fe){var Be=fe||{},He,pr,Ze,Xt;fe={};var ie=[],pe=[],ke=typeof window>"u"?1:window.devicePixelRatio,Ce=!1,Fe={},Re=function(Ge){},be=function(){};if(typeof Be=="string"?He=document.querySelector(Be):typeof Be=="object"&&(typeof Be.nodeName=="string"&&typeof Be.appendChild=="function"&&typeof Be.getBoundingClientRect=="function"?He=Be:typeof Be.drawArrays=="function"||typeof Be.drawElements=="function"?(Xt=Be,Ze=Xt.canvas):("gl"in Be?Xt=Be.gl:"canvas"in Be?Ze=d(Be.canvas):"container"in Be&&(pr=d(Be.container)),"attributes"in Be&&(fe=Be.attributes),"extensions"in Be&&(ie=v(Be.extensions)),"optionalExtensions"in Be&&(pe=v(Be.optionalExtensions)),"onDone"in Be&&(Re=Be.onDone),"profile"in Be&&(Ce=!!Be.profile),"pixelRatio"in Be&&(ke=+Be.pixelRatio),"cachedCode"in Be&&(Fe=Be.cachedCode))),He&&(He.nodeName.toLowerCase()==="canvas"?Ze=He:pr=He),!Xt){if(!Ze){if(He=C(pr||document.body,Re,ke),!He)return null;Ze=He.canvas,be=He.onDestroy}fe.premultipliedAlpha===void 0&&(fe.premultipliedAlpha=!0),Xt=T(Ze,fe)}return Xt?{gl:Xt,canvas:Ze,container:pr,extensions:ie,optionalExtensions:pe,pixelRatio:ke,profile:Ce,cachedCode:Fe,onDone:Re,onDestroy:be}:(be(),Re("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function e(fe,Be){function He(ie){ie=ie.toLowerCase();var pe;try{pe=pr[ie]=fe.getExtension(ie)}catch{}return!!pe}for(var pr={},Ze=0;Ze<Be.extensions.length;++Ze){var Xt=Be.extensions[Ze];if(!He(Xt))return Be.onDestroy(),Be.onDone('"'+Xt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Be.optionalExtensions.forEach(He),{extensions:pr,restore:function(){Object.keys(pr).forEach(function(ie){if(pr[ie]&&!He(ie))throw Error("(regl): error restoring extension "+ie)})}}}function l(fe,Be){for(var He=Array(fe),pr=0;pr<fe;++pr)He[pr]=Be(pr);return He}function n(fe){var Be,He;return Be=(65535<fe)<<4,fe>>>=Be,He=(255<fe)<<3,fe>>>=He,Be|=He,He=(15<fe)<<2,fe>>>=He,Be|=He,He=(3<fe)<<1,Be|He|fe>>>He>>1}function s(){function fe(pr){t:{for(var Ze=16;268435456>=Ze;Ze*=16)if(pr<=Ze){pr=Ze;break t}pr=0}return Ze=He[n(pr)>>2],0<Ze.length?Ze.pop():new ArrayBuffer(pr)}function Be(pr){He[n(pr.byteLength)>>2].push(pr)}var He=l(8,function(){return[]});return{alloc:fe,free:Be,allocType:function(pr,Ze){var Xt=null;switch(pr){case 5120:Xt=new Int8Array(fe(Ze),0,Ze);break;case 5121:Xt=new Uint8Array(fe(Ze),0,Ze);break;case 5122:Xt=new Int16Array(fe(2*Ze),0,Ze);break;case 5123:Xt=new Uint16Array(fe(2*Ze),0,Ze);break;case 5124:Xt=new Int32Array(fe(4*Ze),0,Ze);break;case 5125:Xt=new Uint32Array(fe(4*Ze),0,Ze);break;case 5126:Xt=new Float32Array(fe(4*Ze),0,Ze);break;default:return null}return Xt.length!==Ze?Xt.subarray(0,Ze):Xt},freeType:function(pr){Be(pr.buffer)}}}function o(fe){return!!fe&&typeof fe=="object"&&Array.isArray(fe.shape)&&Array.isArray(fe.stride)&&typeof fe.offset=="number"&&fe.shape.length===fe.stride.length&&(Array.isArray(fe.data)||mt(fe.data))}function p(fe,Be,He,pr,Ze,Xt){for(var ie=0;ie<Be;++ie)for(var pe=fe[ie],ke=0;ke<He;++ke)for(var Ce=pe[ke],Fe=0;Fe<pr;++Fe)Ze[Xt++]=Ce[Fe]}function b(fe,Be,He,pr,Ze){for(var Xt=1,ie=He+1;ie<Be.length;++ie)Xt*=Be[ie];var pe=Be[He];if(Be.length-He===4){var ke=Be[He+1],Ce=Be[He+2];for(Be=Be[He+3],ie=0;ie<pe;++ie)p(fe[ie],ke,Ce,Be,pr,Ze),Ze+=Xt}else for(ie=0;ie<pe;++ie)b(fe[ie],Be,He+1,pr,Ze),Ze+=Xt}function h(fe){return Ot[Object.prototype.toString.call(fe)]|0}function _(fe,Be){for(var He=0;He<Be.length;++He)fe[He]=Be[He]}function a(fe,Be,He,pr,Ze,Xt,ie){for(var pe=0,ke=0;ke<He;++ke)for(var Ce=0;Ce<pr;++Ce)fe[pe++]=Be[Ze*ke+Xt*Ce+ie]}function c(fe,Be,He,pr){function Ze(Re){this.id=ke++,this.buffer=fe.createBuffer(),this.type=Re,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,He.profile&&(this.stats={size:0})}function Xt(Re,be,Ge){Re.byteLength=be.byteLength,fe.bufferData(Re.type,be,Ge)}function ie(Re,be,Ge,Ke,or,sr){if(Re.usage=Ge,Array.isArray(be)){if(Re.dtype=Ke||5126,0<be.length)if(Array.isArray(be[0])){or=re(be);for(var zt=Ke=1;zt<or.length;++zt)Ke*=or[zt];Re.dimension=Ke,be=Bt(be,or,Re.dtype),Xt(Re,be,Ge),sr?Re.persistentData=be:Ct.freeType(be)}else typeof be[0]=="number"?(Re.dimension=or,or=Ct.allocType(Re.dtype,be.length),_(or,be),Xt(Re,or,Ge),sr?Re.persistentData=or:Ct.freeType(or)):mt(be[0])&&(Re.dimension=be[0].length,Re.dtype=Ke||h(be[0])||5126,be=Bt(be,[be.length,be[0].length],Re.dtype),Xt(Re,be,Ge),sr?Re.persistentData=be:Ct.freeType(be))}else if(mt(be))Re.dtype=Ke||h(be),Re.dimension=or,Xt(Re,be,Ge),sr&&(Re.persistentData=new Uint8Array(new Uint8Array(be.buffer)));else if(o(be)){or=be.shape;var Ut=be.stride,zt=be.offset,Me=0,Te=0,qe=0,Qe=0;or.length===1?(Me=or[0],Te=1,qe=Ut[0],Qe=0):or.length===2&&(Me=or[0],Te=or[1],qe=Ut[0],Qe=Ut[1]),Re.dtype=Ke||h(be.data)||5126,Re.dimension=Te,or=Ct.allocType(Re.dtype,Me*Te),a(or,be.data,Me,Te,qe,Qe,zt),Xt(Re,or,Ge),sr?Re.persistentData=or:Ct.freeType(or)}else be instanceof ArrayBuffer&&(Re.dtype=5121,Re.dimension=or,Xt(Re,be,Ge),sr&&(Re.persistentData=new Uint8Array(new Uint8Array(be))))}function pe(Re){Be.bufferCount--,pr(Re),fe.deleteBuffer(Re.buffer),Re.buffer=null,delete Ce[Re.id]}var ke=0,Ce={};Ze.prototype.bind=function(){fe.bindBuffer(this.type,this.buffer)},Ze.prototype.destroy=function(){pe(this)};var Fe=[];return He.profile&&(Be.getTotalBufferSize=function(){var Re=0;return Object.keys(Ce).forEach(function(be){Re+=Ce[be].stats.size}),Re}),{create:function(Re,be,Ge,Ke){function or(zt){var Ut=35044,Me=null,Te=0,qe=0,Qe=1;return Array.isArray(zt)||mt(zt)||o(zt)||zt instanceof ArrayBuffer?Me=zt:typeof zt=="number"?Te=zt|0:zt&&("data"in zt&&(Me=zt.data),"usage"in zt&&(Ut=St[zt.usage]),"type"in zt&&(qe=It[zt.type]),"dimension"in zt&&(Qe=zt.dimension|0),"length"in zt&&(Te=zt.length|0)),sr.bind(),Me?ie(sr,Me,Ut,qe,Qe,Ke):(Te&&fe.bufferData(sr.type,Te,Ut),sr.dtype=qe||5121,sr.usage=Ut,sr.dimension=Qe,sr.byteLength=Te),He.profile&&(sr.stats.size=sr.byteLength*Yt[sr.dtype]),or}Be.bufferCount++;var sr=new Ze(be);return Ce[sr.id]=sr,Ge||or(Re),or._reglType="buffer",or._buffer=sr,or.subdata=function(zt,Ut){var Me=(Ut||0)|0,Te;if(sr.bind(),mt(zt)||zt instanceof ArrayBuffer)fe.bufferSubData(sr.type,Me,zt);else if(Array.isArray(zt)){if(0<zt.length)if(typeof zt[0]=="number"){var qe=Ct.allocType(sr.dtype,zt.length);_(qe,zt),fe.bufferSubData(sr.type,Me,qe),Ct.freeType(qe)}else(Array.isArray(zt[0])||mt(zt[0]))&&(Te=re(zt),qe=Bt(zt,Te,sr.dtype),fe.bufferSubData(sr.type,Me,qe),Ct.freeType(qe))}else if(o(zt)){Te=zt.shape;var Qe=zt.stride,Je=qe=0,We=0,Oe=0;Te.length===1?(qe=Te[0],Je=1,We=Qe[0],Oe=0):Te.length===2&&(qe=Te[0],Je=Te[1],We=Qe[0],Oe=Qe[1]),Te=Array.isArray(zt.data)?sr.dtype:h(zt.data),Te=Ct.allocType(Te,qe*Je),a(Te,zt.data,qe,Je,We,Oe,zt.offset),fe.bufferSubData(sr.type,Me,Te),Ct.freeType(Te)}return or},He.profile&&(or.stats=sr.stats),or.destroy=function(){pe(sr)},or},createStream:function(Re,be){var Ge=Fe.pop();return Ge||(Ge=new Ze(Re)),Ge.bind(),ie(Ge,be,35040,0,1,!1),Ge},destroyStream:function(Re){Fe.push(Re)},clear:function(){vt(Ce).forEach(pe),Fe.forEach(pe)},getBuffer:function(Re){return Re&&Re._buffer instanceof Ze?Re._buffer:null},restore:function(){vt(Ce).forEach(function(Re){Re.buffer=fe.createBuffer(),fe.bindBuffer(Re.type,Re.buffer),fe.bufferData(Re.type,Re.persistentData||Re.byteLength,Re.usage)})},_initBuffer:ie}}function f(fe,Be,He,pr){function Ze(Re){this.id=ke++,pe[this.id]=this,this.buffer=Re,this.primType=4,this.type=this.vertCount=0}function Xt(Re,be,Ge,Ke,or,sr,zt){Re.buffer.bind();var Ut;if(be?((Ut=zt)||mt(be)&&(!o(be)||mt(be.data))||(Ut=Be.oes_element_index_uint?5125:5123),He._initBuffer(Re.buffer,be,Ge,Ut,3)):(fe.bufferData(34963,sr,Ge),Re.buffer.dtype=Ut||5121,Re.buffer.usage=Ge,Re.buffer.dimension=3,Re.buffer.byteLength=sr),Ut=zt,!zt){switch(Re.buffer.dtype){case 5121:case 5120:Ut=5121;break;case 5123:case 5122:Ut=5123;break;case 5125:case 5124:Ut=5125}Re.buffer.dtype=Ut}Re.type=Ut,be=or,0>be&&(be=Re.buffer.byteLength,Ut===5123?be>>=1:Ut===5125&&(be>>=2)),Re.vertCount=be,be=Ke,0>Ke&&(be=4,Ke=Re.buffer.dimension,Ke===1&&(be=0),Ke===2&&(be=1),Ke===3&&(be=4)),Re.primType=be}function ie(Re){pr.elementsCount--,delete pe[Re.id],Re.buffer.destroy(),Re.buffer=null}var pe={},ke=0,Ce={uint8:5121,uint16:5123};Be.oes_element_index_uint&&(Ce.uint32=5125),Ze.prototype.bind=function(){this.buffer.bind()};var Fe=[];return{create:function(Re,be){function Ge(sr){if(sr)if(typeof sr=="number")Ke(sr),or.primType=4,or.vertCount=sr|0,or.type=5121;else{var zt=null,Ut=35044,Me=-1,Te=-1,qe=0,Qe=0;Array.isArray(sr)||mt(sr)||o(sr)?zt=sr:("data"in sr&&(zt=sr.data),"usage"in sr&&(Ut=St[sr.usage]),"primitive"in sr&&(Me=he[sr.primitive]),"count"in sr&&(Te=sr.count|0),"type"in sr&&(Qe=Ce[sr.type]),"length"in sr?qe=sr.length|0:(qe=Te,Qe===5123||Qe===5122?qe*=2:(Qe===5125||Qe===5124)&&(qe*=4))),Xt(or,zt,Ut,Me,Te,qe,Qe)}else Ke(),or.primType=4,or.vertCount=0,or.type=5121;return Ge}var Ke=He.create(null,34963,!0),or=new Ze(Ke._buffer);return pr.elementsCount++,Ge(Re),Ge._reglType="elements",Ge._elements=or,Ge.subdata=function(sr,zt){return Ke.subdata(sr,zt),Ge},Ge.destroy=function(){ie(or)},Ge},createStream:function(Re){var be=Fe.pop();return be||(be=new Ze(He.create(null,34963,!0,!1)._buffer)),Xt(be,Re,35040,-1,-1,0,0),be},destroyStream:function(Re){Fe.push(Re)},getElements:function(Re){return typeof Re=="function"&&Re._elements instanceof Ze?Re._elements:null},clear:function(){vt(pe).forEach(ie)}}}function x(fe){for(var Be=Ct.allocType(5123,fe.length),He=0;He<fe.length;++He)if(isNaN(fe[He]))Be[He]=65535;else if(fe[He]===1/0)Be[He]=31744;else if(fe[He]===-1/0)Be[He]=64512;else{Zt[0]=fe[He];var Xt=ae[0],pr=Xt>>>31<<15,Ze=(Xt<<1>>>24)-127,Xt=Xt>>13&1023;Be[He]=-24>Ze?pr:-14>Ze?pr+(Xt+1024>>-14-Ze):15<Ze?pr+31744:pr+(Ze+15<<10)+Xt}return Be}function k(fe){return Array.isArray(fe)||mt(fe)}function y(fe){return"[object "+fe+"]"}function A(fe){return Array.isArray(fe)&&(fe.length===0||typeof fe[0]=="number")}function L(fe){return!!(Array.isArray(fe)&&fe.length!==0&&k(fe[0]))}function u(fe){return Object.prototype.toString.call(fe)}function m(fe){if(!fe)return!1;var Be=u(fe);return 0<=Mt.indexOf(Be)?!0:A(fe)||L(fe)||o(fe)}function S(fe,Be){fe.type===36193?(fe.data=x(Be),Ct.freeType(Be)):fe.data=Be}function w(fe,Be,He,pr,Ze,Xt){if(fe=typeof Dt[fe]<"u"?Dt[fe]:ue[fe]*Et[Be],Xt&&(fe*=6),Ze){for(pr=0;1<=He;)pr+=fe*He*He,He/=2;return pr}return fe*He*pr}function I(fe,Be,He,pr,Ze,Xt,ie){function pe(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ke(ur,Gr){ur.internalformat=Gr.internalformat,ur.format=Gr.format,ur.type=Gr.type,ur.compressed=Gr.compressed,ur.premultiplyAlpha=Gr.premultiplyAlpha,ur.flipY=Gr.flipY,ur.unpackAlignment=Gr.unpackAlignment,ur.colorSpace=Gr.colorSpace,ur.width=Gr.width,ur.height=Gr.height,ur.channels=Gr.channels}function Ce(ur,Gr){if(typeof Gr=="object"&&Gr){"premultiplyAlpha"in Gr&&(ur.premultiplyAlpha=Gr.premultiplyAlpha),"flipY"in Gr&&(ur.flipY=Gr.flipY),"alignment"in Gr&&(ur.unpackAlignment=Gr.alignment),"colorSpace"in Gr&&(ur.colorSpace=rn[Gr.colorSpace]),"type"in Gr&&(ur.type=Ur[Gr.type]);var qr=ur.width,an=ur.height,Mn=ur.channels,sn=!1;"shape"in Gr?(qr=Gr.shape[0],an=Gr.shape[1],Gr.shape.length===3&&(Mn=Gr.shape[2],sn=!0)):("radius"in Gr&&(qr=an=Gr.radius),"width"in Gr&&(qr=Gr.width),"height"in Gr&&(an=Gr.height),"channels"in Gr&&(Mn=Gr.channels,sn=!0)),ur.width=qr|0,ur.height=an|0,ur.channels=Mn|0,qr=!1,"format"in Gr&&(qr=Gr.format,an=ur.internalformat=pn[qr],ur.format=In[an],qr in Ur&&!("type"in Gr)&&(ur.type=Ur[qr]),qr in yn&&(ur.compressed=!0),qr=!0),!sn&&qr?ur.channels=ue[ur.format]:sn&&!qr&&ur.channels!==ce[ur.format]&&(ur.format=ur.internalformat=ce[ur.channels])}}function Fe(ur){fe.pixelStorei(37440,ur.flipY),fe.pixelStorei(37441,ur.premultiplyAlpha),fe.pixelStorei(37443,ur.colorSpace),fe.pixelStorei(3317,ur.unpackAlignment)}function Re(){pe.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function be(ur,Gr){var qr=null;if(m(Gr)?qr=Gr:Gr&&(Ce(ur,Gr),"x"in Gr&&(ur.xOffset=Gr.x|0),"y"in Gr&&(ur.yOffset=Gr.y|0),m(Gr.data)&&(qr=Gr.data)),Gr.copy){var an=Ze.viewportWidth,Mn=Ze.viewportHeight;ur.width=ur.width||an-ur.xOffset,ur.height=ur.height||Mn-ur.yOffset,ur.needsCopy=!0}else if(!qr)ur.width=ur.width||1,ur.height=ur.height||1,ur.channels=ur.channels||4;else if(mt(qr))ur.channels=ur.channels||4,ur.data=qr,"type"in Gr||ur.type!==5121||(ur.type=Ot[Object.prototype.toString.call(qr)]|0);else if(A(qr)){switch(ur.channels=ur.channels||4,an=qr,Mn=an.length,ur.type){case 5121:case 5123:case 5125:case 5126:Mn=Ct.allocType(ur.type,Mn),Mn.set(an),ur.data=Mn;break;case 36193:ur.data=x(an)}ur.alignment=1,ur.needsFree=!0}else if(o(qr)){an=qr.data,Array.isArray(an)||ur.type!==5121||(ur.type=Ot[Object.prototype.toString.call(an)]|0);var Mn=qr.shape,sn=qr.stride,An,Sn,qn,ii;Mn.length===3?(qn=Mn[2],ii=sn[2]):ii=qn=1,An=Mn[0],Sn=Mn[1],Mn=sn[0],sn=sn[1],ur.alignment=1,ur.width=An,ur.height=Sn,ur.channels=qn,ur.format=ur.internalformat=ce[qn],ur.needsFree=!0,An=ii,qr=qr.offset,qn=ur.width,ii=ur.height,Sn=ur.channels;for(var Mi=Ct.allocType(ur.type===36193?5126:ur.type,qn*ii*Sn),dr=0,Er=0;Er<ii;++Er)for(var gr=0;gr<qn;++gr)for(var Or=0;Or<Sn;++Or)Mi[dr++]=an[Mn*gr+sn*Er+An*Or+qr];S(ur,Mi)}else if(u(qr)===ye||u(qr)===Tt||u(qr)===Ft)u(qr)===ye||u(qr)===Tt?ur.element=qr:ur.element=qr.canvas,ur.width=ur.element.width,ur.height=ur.element.height,ur.channels=4;else if(u(qr)===$t)ur.element=qr,ur.width=qr.width,ur.height=qr.height,ur.channels=4;else if(u(qr)===Vt)ur.element=qr,ur.width=qr.naturalWidth,ur.height=qr.naturalHeight,ur.channels=4;else if(u(qr)===Nt)ur.element=qr,ur.width=qr.videoWidth,ur.height=qr.videoHeight,ur.channels=4;else if(L(qr)){for(an=ur.width||qr[0].length,Mn=ur.height||qr.length,sn=ur.channels,sn=k(qr[0][0])?sn||qr[0][0].length:sn||1,An=At.shape(qr),qn=1,ii=0;ii<An.length;++ii)qn*=An[ii];qn=Ct.allocType(ur.type===36193?5126:ur.type,qn),At.flatten(qr,An,"",qn),S(ur,qn),ur.alignment=1,ur.width=an,ur.height=Mn,ur.channels=sn,ur.format=ur.internalformat=ce[sn],ur.needsFree=!0}}function Ge(ur,Gr,qr,an,Mn){var sn=ur.element,An=ur.data,Sn=ur.internalformat,qn=ur.format,ii=ur.type,Mi=ur.width,dr=ur.height;Fe(ur),sn?fe.texSubImage2D(Gr,Mn,qr,an,qn,ii,sn):ur.compressed?fe.compressedTexSubImage2D(Gr,Mn,qr,an,Sn,Mi,dr,An):ur.needsCopy?(pr(),fe.copyTexSubImage2D(Gr,Mn,qr,an,ur.xOffset,ur.yOffset,Mi,dr)):fe.texSubImage2D(Gr,Mn,qr,an,Mi,dr,qn,ii,An)}function Ke(){return En.pop()||new Re}function or(ur){ur.needsFree&&Ct.freeType(ur.data),Re.call(ur),En.push(ur)}function sr(){pe.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function zt(ur,Gr,qr){var an=ur.images[0]=Ke();ur.mipmask=1,an.width=ur.width=Gr,an.height=ur.height=qr,an.channels=ur.channels=4}function Ut(ur,Gr){var qr=null;if(m(Gr))qr=ur.images[0]=Ke(),ke(qr,ur),be(qr,Gr),ur.mipmask=1;else if(Ce(ur,Gr),Array.isArray(Gr.mipmap))for(var an=Gr.mipmap,Mn=0;Mn<an.length;++Mn)qr=ur.images[Mn]=Ke(),ke(qr,ur),qr.width>>=Mn,qr.height>>=Mn,be(qr,an[Mn]),ur.mipmask|=1<<Mn;else qr=ur.images[0]=Ke(),ke(qr,ur),be(qr,Gr),ur.mipmask=1;ke(ur,ur.images[0])}function Me(ur,Gr){for(var qr=ur.images,an=0;an<qr.length&&qr[an];++an){var Mn=qr[an],sn=Gr,An=an,Sn=Mn.element,qn=Mn.data,ii=Mn.internalformat,Mi=Mn.format,dr=Mn.type,Er=Mn.width,gr=Mn.height;Fe(Mn),Sn?fe.texImage2D(sn,An,Mi,Mi,dr,Sn):Mn.compressed?fe.compressedTexImage2D(sn,An,ii,Er,gr,0,qn):Mn.needsCopy?(pr(),fe.copyTexImage2D(sn,An,Mi,Mn.xOffset,Mn.yOffset,Er,gr,0)):fe.texImage2D(sn,An,Mi,Er,gr,0,Mi,dr,qn||null)}}function Te(){var ur=$n.pop()||new sr;pe.call(ur);for(var Gr=ur.mipmask=0;16>Gr;++Gr)ur.images[Gr]=null;return ur}function qe(ur){for(var Gr=ur.images,qr=0;qr<Gr.length;++qr)Gr[qr]&&or(Gr[qr]),Gr[qr]=null;$n.push(ur)}function Qe(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Je(ur,Gr){"min"in Gr&&(ur.minFilter=Mr[Gr.min],0<=oe.indexOf(ur.minFilter)&&!("faces"in Gr)&&(ur.genMipmaps=!0)),"mag"in Gr&&(ur.magFilter=kr[Gr.mag]);var qr=ur.wrapS,an=ur.wrapT;if("wrap"in Gr){var Mn=Gr.wrap;typeof Mn=="string"?qr=an=Sr[Mn]:Array.isArray(Mn)&&(qr=Sr[Mn[0]],an=Sr[Mn[1]])}else"wrapS"in Gr&&(qr=Sr[Gr.wrapS]),"wrapT"in Gr&&(an=Sr[Gr.wrapT]);if(ur.wrapS=qr,ur.wrapT=an,"anisotropic"in Gr&&(ur.anisotropic=Gr.anisotropic),"mipmap"in Gr){switch(qr=!1,typeof Gr.mipmap){case"string":ur.mipmapHint=nr[Gr.mipmap],qr=ur.genMipmaps=!0;break;case"boolean":qr=ur.genMipmaps=Gr.mipmap;break;case"object":ur.genMipmaps=!1,qr=!0}!qr||"min"in Gr||(ur.minFilter=9984)}}function We(ur,Gr){fe.texParameteri(Gr,10241,ur.minFilter),fe.texParameteri(Gr,10240,ur.magFilter),fe.texParameteri(Gr,10242,ur.wrapS),fe.texParameteri(Gr,10243,ur.wrapT),Be.ext_texture_filter_anisotropic&&fe.texParameteri(Gr,34046,ur.anisotropic),ur.genMipmaps&&(fe.hint(33170,ur.mipmapHint),fe.generateMipmap(Gr))}function Oe(ur){pe.call(this),this.mipmask=0,this.internalformat=6408,this.id=ri++,this.refCount=1,this.target=ur,this.texture=fe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qe,ie.profile&&(this.stats={size:0})}function rr(ur){fe.activeTexture(33984),fe.bindTexture(ur.target,ur.texture)}function cr(){var ur=zn[0];ur?fe.bindTexture(ur.target,ur.texture):fe.bindTexture(3553,null)}function lr(ur){var Gr=ur.texture,qr=ur.unit,an=ur.target;0<=qr&&(fe.activeTexture(33984+qr),fe.bindTexture(an,null),zn[qr]=null),fe.deleteTexture(Gr),ur.texture=null,ur.params=null,ur.pixels=null,ur.refCount=0,delete ui[ur.id],Xt.textureCount--}var nr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Sr={repeat:10497,clamp:33071,mirror:33648},kr={nearest:9728,linear:9729},Mr=et({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},kr),rn={none:0,browser:37444},Ur={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},pn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},yn={};Be.ext_srgb&&(pn.srgb=35904,pn.srgba=35906),Be.oes_texture_float&&(Ur.float32=Ur.float=5126),Be.oes_texture_half_float&&(Ur.float16=Ur["half float"]=36193),Be.webgl_depth_texture&&(et(pn,{depth:6402,"depth stencil":34041}),et(Ur,{uint16:5123,uint32:5125,"depth stencil":34042})),Be.webgl_compressed_texture_s3tc&&et(yn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Be.webgl_compressed_texture_atc&&et(yn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Be.webgl_compressed_texture_pvrtc&&et(yn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Be.webgl_compressed_texture_etc1&&(yn["rgb etc1"]=36196);var yr=Array.prototype.slice.call(fe.getParameter(34467));Object.keys(yn).forEach(function(ur){var Gr=yn[ur];0<=yr.indexOf(Gr)&&(pn[ur]=Gr)});var Cr=Object.keys(pn);He.textureFormats=Cr;var Dr=[];Object.keys(pn).forEach(function(ur){Dr[pn[ur]]=ur});var Nr=[];Object.keys(Ur).forEach(function(ur){Nr[Ur[ur]]=ur});var $r=[];Object.keys(kr).forEach(function(ur){$r[kr[ur]]=ur});var fn=[];Object.keys(Mr).forEach(function(ur){fn[Mr[ur]]=ur});var on=[];Object.keys(Sr).forEach(function(ur){on[Sr[ur]]=ur});var In=Cr.reduce(function(ur,Gr){var qr=pn[Gr];return qr===6409||qr===6406||qr===6409||qr===6410||qr===6402||qr===34041||Be.ext_srgb&&(qr===35904||qr===35906)?ur[qr]=qr:qr===32855||0<=Gr.indexOf("rgba")?ur[qr]=6408:ur[qr]=6407,ur},{}),En=[],$n=[],ri=0,ui={},ni=He.maxTextureUnits,zn=Array(ni).map(function(){return null});return et(Oe.prototype,{bind:function(){this.bindCount+=1;var ur=this.unit;if(0>ur){for(var Gr=0;Gr<ni;++Gr){var qr=zn[Gr];if(qr){if(0<qr.bindCount)continue;qr.unit=-1}zn[Gr]=this,ur=Gr;break}ie.profile&&Xt.maxTextureUnits<ur+1&&(Xt.maxTextureUnits=ur+1),this.unit=ur,fe.activeTexture(33984+ur),fe.bindTexture(this.target,this.texture)}return ur},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&lr(this)}}),ie.profile&&(Xt.getTotalTextureSize=function(){var ur=0;return Object.keys(ui).forEach(function(Gr){ur+=ui[Gr].stats.size}),ur}),{create2D:function(ur,Gr){function qr(Mn,sn){var An=an.texInfo;Qe.call(An);var Sn=Te();return typeof Mn=="number"?typeof sn=="number"?zt(Sn,Mn|0,sn|0):zt(Sn,Mn|0,Mn|0):Mn?(Je(An,Mn),Ut(Sn,Mn)):zt(Sn,1,1),An.genMipmaps&&(Sn.mipmask=(Sn.width<<1)-1),an.mipmask=Sn.mipmask,ke(an,Sn),an.internalformat=Sn.internalformat,qr.width=Sn.width,qr.height=Sn.height,rr(an),Me(Sn,3553),We(An,3553),cr(),qe(Sn),ie.profile&&(an.stats.size=w(an.internalformat,an.type,Sn.width,Sn.height,An.genMipmaps,!1)),qr.format=Dr[an.internalformat],qr.type=Nr[an.type],qr.mag=$r[An.magFilter],qr.min=fn[An.minFilter],qr.wrapS=on[An.wrapS],qr.wrapT=on[An.wrapT],qr}var an=new Oe(3553);return ui[an.id]=an,Xt.textureCount++,qr(ur,Gr),qr.subimage=function(Mn,sn,An,Sn){sn|=0,An|=0,Sn|=0;var qn=Ke();return ke(qn,an),qn.width=0,qn.height=0,be(qn,Mn),qn.width=qn.width||(an.width>>Sn)-sn,qn.height=qn.height||(an.height>>Sn)-An,rr(an),Ge(qn,3553,sn,An,Sn),cr(),or(qn),qr},qr.resize=function(Mn,sn){var An=Mn|0,Sn=sn|0||An;if(An===an.width&&Sn===an.height)return qr;qr.width=an.width=An,qr.height=an.height=Sn,rr(an);for(var qn=0;an.mipmask>>qn;++qn){var ii=An>>qn,Mi=Sn>>qn;if(!ii||!Mi)break;fe.texImage2D(3553,qn,an.format,ii,Mi,0,an.format,an.type,null)}return cr(),ie.profile&&(an.stats.size=w(an.internalformat,an.type,An,Sn,!1,!1)),qr},qr._reglType="texture2d",qr._texture=an,ie.profile&&(qr.stats=an.stats),qr.destroy=function(){an.decRef()},qr},createCube:function(ur,Gr,qr,an,Mn,sn){function An(ii,Mi,dr,Er,gr,Or){var vn,Tn=Sn.texInfo;for(Qe.call(Tn),vn=0;6>vn;++vn)qn[vn]=Te();if(typeof ii=="number"||!ii)for(ii=ii|0||1,vn=0;6>vn;++vn)zt(qn[vn],ii,ii);else if(typeof ii=="object")if(Mi)Ut(qn[0],ii),Ut(qn[1],Mi),Ut(qn[2],dr),Ut(qn[3],Er),Ut(qn[4],gr),Ut(qn[5],Or);else if(Je(Tn,ii),Ce(Sn,ii),"faces"in ii)for(ii=ii.faces,vn=0;6>vn;++vn)ke(qn[vn],Sn),Ut(qn[vn],ii[vn]);else for(vn=0;6>vn;++vn)Ut(qn[vn],ii);for(ke(Sn,qn[0]),Sn.mipmask=Tn.genMipmaps?(qn[0].width<<1)-1:qn[0].mipmask,Sn.internalformat=qn[0].internalformat,An.width=qn[0].width,An.height=qn[0].height,rr(Sn),vn=0;6>vn;++vn)Me(qn[vn],34069+vn);for(We(Tn,34067),cr(),ie.profile&&(Sn.stats.size=w(Sn.internalformat,Sn.type,An.width,An.height,Tn.genMipmaps,!0)),An.format=Dr[Sn.internalformat],An.type=Nr[Sn.type],An.mag=$r[Tn.magFilter],An.min=fn[Tn.minFilter],An.wrapS=on[Tn.wrapS],An.wrapT=on[Tn.wrapT],vn=0;6>vn;++vn)qe(qn[vn]);return An}var Sn=new Oe(34067);ui[Sn.id]=Sn,Xt.cubeCount++;var qn=Array(6);return An(ur,Gr,qr,an,Mn,sn),An.subimage=function(ii,Mi,dr,Er,gr){dr|=0,Er|=0,gr|=0;var Or=Ke();return ke(Or,Sn),Or.width=0,Or.height=0,be(Or,Mi),Or.width=Or.width||(Sn.width>>gr)-dr,Or.height=Or.height||(Sn.height>>gr)-Er,rr(Sn),Ge(Or,34069+ii,dr,Er,gr),cr(),or(Or),An},An.resize=function(ii){if(ii|=0,ii!==Sn.width){An.width=Sn.width=ii,An.height=Sn.height=ii,rr(Sn);for(var Mi=0;6>Mi;++Mi)for(var dr=0;Sn.mipmask>>dr;++dr)fe.texImage2D(34069+Mi,dr,Sn.format,ii>>dr,ii>>dr,0,Sn.format,Sn.type,null);return cr(),ie.profile&&(Sn.stats.size=w(Sn.internalformat,Sn.type,An.width,An.height,!1,!0)),An}},An._reglType="textureCube",An._texture=Sn,ie.profile&&(An.stats=Sn.stats),An.destroy=function(){Sn.decRef()},An},clear:function(){for(var ur=0;ur<ni;++ur)fe.activeTexture(33984+ur),fe.bindTexture(3553,null),zn[ur]=null;vt(ui).forEach(lr),Xt.cubeCount=0,Xt.textureCount=0},getTexture:function(ur){return null},restore:function(){for(var ur=0;ur<ni;++ur){var Gr=zn[ur];Gr&&(Gr.bindCount=0,Gr.unit=-1,zn[ur]=null)}vt(ui).forEach(function(qr){qr.texture=fe.createTexture(),fe.bindTexture(qr.target,qr.texture);for(var an=0;32>an;++an)if(qr.mipmask&1<<an)if(qr.target===3553)fe.texImage2D(3553,an,qr.internalformat,qr.width>>an,qr.height>>an,0,qr.internalformat,qr.type,null);else for(var Mn=0;6>Mn;++Mn)fe.texImage2D(34069+Mn,an,qr.internalformat,qr.width>>an,qr.height>>an,0,qr.internalformat,qr.type,null);We(qr.texInfo,qr.target)})},refresh:function(){for(var ur=0;ur<ni;++ur){var Gr=zn[ur];Gr&&(Gr.bindCount=0,Gr.unit=-1,zn[ur]=null),fe.activeTexture(33984+ur),fe.bindTexture(3553,null),fe.bindTexture(34067,null)}}}}function O(fe,Be,He,pr,Ze,Xt){function ie(Oe,rr,cr){this.target=Oe,this.texture=rr,this.renderbuffer=cr;var lr=Oe=0;rr?(Oe=rr.width,lr=rr.height):cr&&(Oe=cr.width,lr=cr.height),this.width=Oe,this.height=lr}function pe(Oe){Oe&&(Oe.texture&&Oe.texture._texture.decRef(),Oe.renderbuffer&&Oe.renderbuffer._renderbuffer.decRef())}function ke(Oe,rr,cr){Oe&&(Oe.texture?Oe.texture._texture.refCount+=1:Oe.renderbuffer._renderbuffer.refCount+=1)}function Ce(Oe,rr){rr&&(rr.texture?fe.framebufferTexture2D(36160,Oe,rr.target,rr.texture._texture.texture,0):fe.framebufferRenderbuffer(36160,Oe,36161,rr.renderbuffer._renderbuffer.renderbuffer))}function Fe(Oe){var rr=3553,cr=null,lr=null,nr=Oe;return typeof Oe=="object"&&(nr=Oe.data,"target"in Oe&&(rr=Oe.target|0)),Oe=nr._reglType,Oe==="texture2d"||Oe==="textureCube"?cr=nr:Oe==="renderbuffer"&&(lr=nr,rr=36161),new ie(rr,cr,lr)}function Re(Oe,rr,cr,lr,nr){return cr?(Oe=pr.create2D({width:Oe,height:rr,format:lr,type:nr}),Oe._texture.refCount=0,new ie(3553,Oe,null)):(Oe=Ze.create({width:Oe,height:rr,format:lr}),Oe._renderbuffer.refCount=0,new ie(36161,null,Oe))}function be(Oe){return Oe&&(Oe.texture||Oe.renderbuffer)}function Ge(Oe,rr,cr){Oe&&(Oe.texture?Oe.texture.resize(rr,cr):Oe.renderbuffer&&Oe.renderbuffer.resize(rr,cr),Oe.width=rr,Oe.height=cr)}function Ke(){this.id=Je++,We[this.id]=this,this.framebuffer=fe.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function or(Oe){Oe.colorAttachments.forEach(pe),pe(Oe.depthAttachment),pe(Oe.stencilAttachment),pe(Oe.depthStencilAttachment)}function sr(Oe){fe.deleteFramebuffer(Oe.framebuffer),Oe.framebuffer=null,Xt.framebufferCount--,delete We[Oe.id]}function zt(Oe){var rr;fe.bindFramebuffer(36160,Oe.framebuffer);var cr=Oe.colorAttachments;for(rr=0;rr<cr.length;++rr)Ce(36064+rr,cr[rr]);for(rr=cr.length;rr<He.maxColorAttachments;++rr)fe.framebufferTexture2D(36160,36064+rr,3553,null,0);fe.framebufferTexture2D(36160,33306,3553,null,0),fe.framebufferTexture2D(36160,36096,3553,null,0),fe.framebufferTexture2D(36160,36128,3553,null,0),Ce(36096,Oe.depthAttachment),Ce(36128,Oe.stencilAttachment),Ce(33306,Oe.depthStencilAttachment),fe.checkFramebufferStatus(36160),fe.isContextLost(),fe.bindFramebuffer(36160,Me.next?Me.next.framebuffer:null),Me.cur=Me.next,fe.getError()}function Ut(Oe,rr){function cr(nr,Sr){var kr,Mr=0,rn=0,Ur=!0,pn=!0;kr=null;var yn=!0,yr="rgba",Cr="uint8",Dr=1,Nr=null,$r=null,fn=null,on=!1;typeof nr=="number"?(Mr=nr|0,rn=Sr|0||Mr):nr?("shape"in nr?(rn=nr.shape,Mr=rn[0],rn=rn[1]):("radius"in nr&&(Mr=rn=nr.radius),"width"in nr&&(Mr=nr.width),"height"in nr&&(rn=nr.height)),("color"in nr||"colors"in nr)&&(kr=nr.color||nr.colors,Array.isArray(kr)),kr||("colorCount"in nr&&(Dr=nr.colorCount|0),"colorTexture"in nr&&(yn=!!nr.colorTexture,yr="rgba4"),"colorType"in nr&&(Cr=nr.colorType,!yn)&&(Cr==="half float"||Cr==="float16"?yr="rgba16f":(Cr==="float"||Cr==="float32")&&(yr="rgba32f")),"colorFormat"in nr&&(yr=nr.colorFormat,0<=Te.indexOf(yr)?yn=!0:0<=qe.indexOf(yr)&&(yn=!1))),("depthTexture"in nr||"depthStencilTexture"in nr)&&(on=!(!nr.depthTexture&&!nr.depthStencilTexture)),"depth"in nr&&(typeof nr.depth=="boolean"?Ur=nr.depth:(Nr=nr.depth,pn=!1)),"stencil"in nr&&(typeof nr.stencil=="boolean"?pn=nr.stencil:($r=nr.stencil,Ur=!1)),"depthStencil"in nr&&(typeof nr.depthStencil=="boolean"?Ur=pn=nr.depthStencil:(fn=nr.depthStencil,pn=Ur=!1))):Mr=rn=1;var In=null,En=null,$n=null,ri=null;if(Array.isArray(kr))In=kr.map(Fe);else if(kr)In=[Fe(kr)];else for(In=Array(Dr),kr=0;kr<Dr;++kr)In[kr]=Re(Mr,rn,yn,yr,Cr);for(Mr=Mr||In[0].width,rn=rn||In[0].height,Nr?En=Fe(Nr):Ur&&!pn&&(En=Re(Mr,rn,on,"depth","uint32")),$r?$n=Fe($r):pn&&!Ur&&($n=Re(Mr,rn,!1,"stencil","uint8")),fn?ri=Fe(fn):!Nr&&!$r&&pn&&Ur&&(ri=Re(Mr,rn,on,"depth stencil","depth stencil")),Ur=null,kr=0;kr<In.length;++kr)ke(In[kr]),In[kr]&&In[kr].texture&&(pn=bt[In[kr].texture._texture.format]*Pt[In[kr].texture._texture.type],Ur===null&&(Ur=pn));return ke(En),ke($n),ke(ri),or(lr),lr.width=Mr,lr.height=rn,lr.colorAttachments=In,lr.depthAttachment=En,lr.stencilAttachment=$n,lr.depthStencilAttachment=ri,cr.color=In.map(be),cr.depth=be(En),cr.stencil=be($n),cr.depthStencil=be(ri),cr.width=lr.width,cr.height=lr.height,zt(lr),cr}var lr=new Ke;return Xt.framebufferCount++,cr(Oe,rr),et(cr,{resize:function(nr,Sr){var kr=Math.max(nr|0,1),Mr=Math.max(Sr|0||kr,1);if(kr===lr.width&&Mr===lr.height)return cr;for(var rn=lr.colorAttachments,Ur=0;Ur<rn.length;++Ur)Ge(rn[Ur],kr,Mr);return Ge(lr.depthAttachment,kr,Mr),Ge(lr.stencilAttachment,kr,Mr),Ge(lr.depthStencilAttachment,kr,Mr),lr.width=cr.width=kr,lr.height=cr.height=Mr,zt(lr),cr},_reglType:"framebuffer",_framebuffer:lr,destroy:function(){sr(lr),or(lr)},use:function(nr){Me.setFBO({framebuffer:cr},nr)}})}var Me={cur:null,next:null,dirty:!1,setFBO:null},Te=["rgba"],qe=["rgba4","rgb565","rgb5 a1"];Be.ext_srgb&&qe.push("srgba"),Be.ext_color_buffer_half_float&&qe.push("rgba16f","rgb16f"),Be.webgl_color_buffer_float&&qe.push("rgba32f");var Qe=["uint8"];Be.oes_texture_half_float&&Qe.push("half float","float16"),Be.oes_texture_float&&Qe.push("float","float32");var Je=0,We={};return et(Me,{getFramebuffer:function(Oe){return typeof Oe=="function"&&Oe._reglType==="framebuffer"&&(Oe=Oe._framebuffer,Oe instanceof Ke)?Oe:null},create:Ut,createCube:function(Oe){function rr(lr){var nr,Sr={color:null},kr=0,Mr=null;nr="rgba";var rn="uint8",Ur=1;if(typeof lr=="number"?kr=lr|0:lr?("shape"in lr?kr=lr.shape[0]:("radius"in lr&&(kr=lr.radius|0),"width"in lr?kr=lr.width|0:"height"in lr&&(kr=lr.height|0)),("color"in lr||"colors"in lr)&&(Mr=lr.color||lr.colors,Array.isArray(Mr)),Mr||("colorCount"in lr&&(Ur=lr.colorCount|0),"colorType"in lr&&(rn=lr.colorType),"colorFormat"in lr&&(nr=lr.colorFormat)),"depth"in lr&&(Sr.depth=lr.depth),"stencil"in lr&&(Sr.stencil=lr.stencil),"depthStencil"in lr&&(Sr.depthStencil=lr.depthStencil)):kr=1,Mr)if(Array.isArray(Mr))for(lr=[],nr=0;nr<Mr.length;++nr)lr[nr]=Mr[nr];else lr=[Mr];else for(lr=Array(Ur),Mr={radius:kr,format:nr,type:rn},nr=0;nr<Ur;++nr)lr[nr]=pr.createCube(Mr);for(Sr.color=Array(lr.length),nr=0;nr<lr.length;++nr)Ur=lr[nr],kr=kr||Ur.width,Sr.color[nr]={target:34069,data:lr[nr]};for(nr=0;6>nr;++nr){for(Ur=0;Ur<lr.length;++Ur)Sr.color[Ur].target=34069+nr;0<nr&&(Sr.depth=cr[0].depth,Sr.stencil=cr[0].stencil,Sr.depthStencil=cr[0].depthStencil),cr[nr]?cr[nr](Sr):cr[nr]=Ut(Sr)}return et(rr,{width:kr,height:kr,color:lr})}var cr=Array(6);return rr(Oe),et(rr,{faces:cr,resize:function(lr){var nr=lr|0;if(nr===rr.width)return rr;var Sr=rr.color;for(lr=0;lr<Sr.length;++lr)Sr[lr].resize(nr);for(lr=0;6>lr;++lr)cr[lr].resize(nr);return rr.width=rr.height=nr,rr},_reglType:"framebufferCube",destroy:function(){cr.forEach(function(lr){lr.destroy()})}})},clear:function(){vt(We).forEach(sr)},restore:function(){Me.cur=null,Me.next=null,Me.dirty=!0,vt(We).forEach(function(Oe){Oe.framebuffer=fe.createFramebuffer(),zt(Oe)})}})}function D(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function P(fe,Be,He,pr,Ze,Xt,ie){function pe(zt){if(zt!==sr.currentVAO){var Ut=Be.oes_vertex_array_object;zt?Ut.bindVertexArrayOES(zt.vao):Ut.bindVertexArrayOES(null),sr.currentVAO=zt}}function ke(zt){if(zt!==sr.currentVAO){if(zt)zt.bindAttrs();else{for(var Ut=Be.angle_instanced_arrays,Me=0;Me<Ge.length;++Me){var Te=Ge[Me];Te.buffer?(fe.enableVertexAttribArray(Me),Te.buffer.bind(),fe.vertexAttribPointer(Me,Te.size,Te.type,Te.normalized,Te.stride,Te.offfset),Ut&&Te.divisor&&Ut.vertexAttribDivisorANGLE(Me,Te.divisor)):(fe.disableVertexAttribArray(Me),fe.vertexAttrib4f(Me,Te.x,Te.y,Te.z,Te.w))}ie.elements?fe.bindBuffer(34963,ie.elements.buffer.buffer):fe.bindBuffer(34963,null)}sr.currentVAO=zt}}function Ce(){vt(or).forEach(function(zt){zt.destroy()})}function Fe(){this.id=++Ke,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var zt=Be.oes_vertex_array_object;this.vao=zt?zt.createVertexArrayOES():null,or[this.id]=this,this.buffers=[]}function Re(){Be.oes_vertex_array_object&&vt(or).forEach(function(zt){zt.refresh()})}var be=He.maxAttributes,Ge=Array(be);for(He=0;He<be;++He)Ge[He]=new D;var Ke=0,or={},sr={Record:D,scope:{},state:Ge,currentVAO:null,targetVAO:null,restore:Be.oes_vertex_array_object?Re:function(){},createVAO:function(zt){function Ut(Te){var qe;Array.isArray(Te)?(qe=Te,Me.elements&&Me.ownsElements&&Me.elements.destroy(),Me.elements=null,Me.ownsElements=!1,Me.offset=0,Me.count=0,Me.instances=-1,Me.primitive=4):(Te.elements?(qe=Te.elements,Me.ownsElements?(typeof qe=="function"&&qe._reglType==="elements"?Me.elements.destroy():Me.elements(qe),Me.ownsElements=!1):Xt.getElements(Te.elements)?(Me.elements=Te.elements,Me.ownsElements=!1):(Me.elements=Xt.create(Te.elements),Me.ownsElements=!0)):(Me.elements=null,Me.ownsElements=!1),qe=Te.attributes,Me.offset=0,Me.count=-1,Me.instances=-1,Me.primitive=4,Me.elements&&(Me.count=Me.elements._elements.vertCount,Me.primitive=Me.elements._elements.primType),"offset"in Te&&(Me.offset=Te.offset|0),"count"in Te&&(Me.count=Te.count|0),"instances"in Te&&(Me.instances=Te.instances|0),"primitive"in Te&&(Me.primitive=he[Te.primitive])),Te={};var Qe=Me.attributes;Qe.length=qe.length;for(var Je=0;Je<qe.length;++Je){var We=qe[Je],Oe=Qe[Je]=new D,rr=We.data||We;if(Array.isArray(rr)||mt(rr)||o(rr)){var cr;Me.buffers[Je]&&(cr=Me.buffers[Je],mt(rr)&&cr._buffer.byteLength>=rr.byteLength?cr.subdata(rr):(cr.destroy(),Me.buffers[Je]=null)),Me.buffers[Je]||(cr=Me.buffers[Je]=Ze.create(We,34962,!1,!0)),Oe.buffer=Ze.getBuffer(cr),Oe.size=Oe.buffer.dimension|0,Oe.normalized=!1,Oe.type=Oe.buffer.dtype,Oe.offset=0,Oe.stride=0,Oe.divisor=0,Oe.state=1,Te[Je]=1}else Ze.getBuffer(We)?(Oe.buffer=Ze.getBuffer(We),Oe.size=Oe.buffer.dimension|0,Oe.normalized=!1,Oe.type=Oe.buffer.dtype,Oe.offset=0,Oe.stride=0,Oe.divisor=0,Oe.state=1):Ze.getBuffer(We.buffer)?(Oe.buffer=Ze.getBuffer(We.buffer),Oe.size=(+We.size||Oe.buffer.dimension)|0,Oe.normalized=!!We.normalized||!1,Oe.type="type"in We?It[We.type]:Oe.buffer.dtype,Oe.offset=(We.offset||0)|0,Oe.stride=(We.stride||0)|0,Oe.divisor=(We.divisor||0)|0,Oe.state=1):"x"in We&&(Oe.x=+We.x||0,Oe.y=+We.y||0,Oe.z=+We.z||0,Oe.w=+We.w||0,Oe.state=2)}for(cr=0;cr<Me.buffers.length;++cr)!Te[cr]&&Me.buffers[cr]&&(Me.buffers[cr].destroy(),Me.buffers[cr]=null);return Me.refresh(),Ut}var Me=new Fe;return pr.vaoCount+=1,Ut.destroy=function(){for(var Te=0;Te<Me.buffers.length;++Te)Me.buffers[Te]&&Me.buffers[Te].destroy();Me.buffers.length=0,Me.ownsElements&&(Me.elements.destroy(),Me.elements=null,Me.ownsElements=!1),Me.destroy()},Ut._vao=Me,Ut._reglType="vao",Ut(zt)},getVAO:function(zt){return typeof zt=="function"&&zt._vao?zt._vao:null},destroyBuffer:function(zt){for(var Ut=0;Ut<Ge.length;++Ut){var Me=Ge[Ut];Me.buffer===zt&&(fe.disableVertexAttribArray(Ut),Me.buffer=null)}},setVAO:Be.oes_vertex_array_object?pe:ke,clear:Be.oes_vertex_array_object?Ce:function(){}};return Fe.prototype.bindAttrs=function(){for(var zt=Be.angle_instanced_arrays,Ut=this.attributes,Me=0;Me<Ut.length;++Me){var Te=Ut[Me];Te.buffer?(fe.enableVertexAttribArray(Me),fe.bindBuffer(34962,Te.buffer.buffer),fe.vertexAttribPointer(Me,Te.size,Te.type,Te.normalized,Te.stride,Te.offset),zt&&Te.divisor&&zt.vertexAttribDivisorANGLE(Me,Te.divisor)):(fe.disableVertexAttribArray(Me),fe.vertexAttrib4f(Me,Te.x,Te.y,Te.z,Te.w))}for(zt=Ut.length;zt<be;++zt)fe.disableVertexAttribArray(zt);(zt=Xt.getElements(this.elements))?fe.bindBuffer(34963,zt.buffer.buffer):fe.bindBuffer(34963,null)},Fe.prototype.refresh=function(){var zt=Be.oes_vertex_array_object;zt&&(zt.bindVertexArrayOES(this.vao),this.bindAttrs(),sr.currentVAO=null,zt.bindVertexArrayOES(null))},Fe.prototype.destroy=function(){if(this.vao){var zt=Be.oes_vertex_array_object;this===sr.currentVAO&&(sr.currentVAO=null,zt.bindVertexArrayOES(null)),zt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),or[this.id]&&(delete or[this.id],--pr.vaoCount)},sr}function F(fe,Be,He,pr){function Ze(Ke,or,sr,zt){this.name=Ke,this.id=or,this.location=sr,this.info=zt}function Xt(Ke,or){for(var sr=0;sr<Ke.length;++sr)if(Ke[sr].id===or.id){Ke[sr].location=or.location;return}Ke.push(or)}function ie(Ke,or,sr){sr=Ke===35632?Ce:Fe;var zt=sr[or];if(!zt){var Ut=Be.str(or),zt=fe.createShader(Ke);fe.shaderSource(zt,Ut),fe.compileShader(zt),sr[or]=zt}return zt}function pe(Ke,or){this.id=Ge++,this.fragId=Ke,this.vertId=or,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,pr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ke(Ke,or,sr){var zt;zt=ie(35632,Ke.fragId);var Ut=ie(35633,Ke.vertId);if(or=Ke.program=fe.createProgram(),fe.attachShader(or,zt),fe.attachShader(or,Ut),sr)for(zt=0;zt<sr.length;++zt)Ut=sr[zt],fe.bindAttribLocation(or,Ut[0],Ut[1]);fe.linkProgram(or),Ut=fe.getProgramParameter(or,35718),pr.profile&&(Ke.stats.uniformsCount=Ut);var Me=Ke.uniforms;for(zt=0;zt<Ut;++zt)if(sr=fe.getActiveUniform(or,zt))if(1<sr.size)for(var Te=0;Te<sr.size;++Te){var qe=sr.name.replace("[0]","["+Te+"]");Xt(Me,new Ze(qe,Be.id(qe),fe.getUniformLocation(or,qe),sr))}else Xt(Me,new Ze(sr.name,Be.id(sr.name),fe.getUniformLocation(or,sr.name),sr));for(Ut=fe.getProgramParameter(or,35721),pr.profile&&(Ke.stats.attributesCount=Ut),Ke=Ke.attributes,zt=0;zt<Ut;++zt)(sr=fe.getActiveAttrib(or,zt))&&Xt(Ke,new Ze(sr.name,Be.id(sr.name),fe.getAttribLocation(or,sr.name),sr))}var Ce={},Fe={},Re={},be=[],Ge=0;return pr.profile&&(He.getMaxUniformsCount=function(){var Ke=0;return be.forEach(function(or){or.stats.uniformsCount>Ke&&(Ke=or.stats.uniformsCount)}),Ke},He.getMaxAttributesCount=function(){var Ke=0;return be.forEach(function(or){or.stats.attributesCount>Ke&&(Ke=or.stats.attributesCount)}),Ke}),{clear:function(){var Ke=fe.deleteShader.bind(fe);vt(Ce).forEach(Ke),Ce={},vt(Fe).forEach(Ke),Fe={},be.forEach(function(or){fe.deleteProgram(or.program)}),be.length=0,Re={},He.shaderCount=0},program:function(Ke,or,sr,zt){var Ut=Re[or];Ut||(Ut=Re[or]={});var Me=Ut[Ke];if(Me&&(Me.refCount++,!zt))return Me;var Te=new pe(or,Ke);return He.shaderCount++,ke(Te,sr,zt),Me||(Ut[Ke]=Te),be.push(Te),et(Te,{destroy:function(){if(Te.refCount--,0>=Te.refCount){fe.deleteProgram(Te.program);var qe=be.indexOf(Te);be.splice(qe,1),He.shaderCount--}0>=Ut[Te.vertId].refCount&&(fe.deleteShader(Fe[Te.vertId]),delete Fe[Te.vertId],delete Re[Te.fragId][Te.vertId]),Object.keys(Re[Te.fragId]).length||(fe.deleteShader(Ce[Te.fragId]),delete Ce[Te.fragId],delete Re[Te.fragId])}})},restore:function(){Ce={},Fe={};for(var Ke=0;Ke<be.length;++Ke)ke(be[Ke],null,be[Ke].attributes.map(function(or){return[or.location,or.name]}))},shader:ie,frag:-1,vert:-1}}function R(fe,Be,He,pr,Ze,Xt,ie){function pe(Ce){var Fe;Fe=Be.next===null?5121:Be.next.colorAttachments[0].texture._texture.type;var Re=0,be=0,Ge=pr.framebufferWidth,Ke=pr.framebufferHeight,or=null;return mt(Ce)?or=Ce:Ce&&(Re=Ce.x|0,be=Ce.y|0,Ge=(Ce.width||pr.framebufferWidth-Re)|0,Ke=(Ce.height||pr.framebufferHeight-be)|0,or=Ce.data||null),He(),Ce=Ge*Ke*4,or||(Fe===5121?or=new Uint8Array(Ce):Fe===5126&&(or=or||new Float32Array(Ce))),fe.pixelStorei(3333,4),fe.readPixels(Re,be,Ge,Ke,6408,Fe,or),or}function ke(Ce){var Fe;return Be.setFBO({framebuffer:Ce.framebuffer},function(){Fe=pe(Ce)}),Fe}return function(Ce){return Ce&&"framebuffer"in Ce?ke(Ce):pe(Ce)}}function B(fe){for(var Be=Array(fe.length>>2),pr=0;pr<Be.length;pr++)Be[pr]=0;for(pr=0;pr<8*fe.length;pr+=8)Be[pr>>5]|=(fe.charCodeAt(pr/8)&255)<<24-pr%32;var He=8*fe.length;fe=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var pr=Array(64),Ze,Xt,ie,pe,ke,Ce,Fe,Re,be,Ge,Ke;for(Be[He>>5]|=128<<24-He%32,Be[(He+64>>9<<4)+15]=He,Re=0;Re<Be.length;Re+=16){for(He=fe[0],Ze=fe[1],Xt=fe[2],ie=fe[3],pe=fe[4],ke=fe[5],Ce=fe[6],Fe=fe[7],be=0;64>be;be++){if(16>be)pr[be]=Be[be+Re];else{Ge=be,Ke=pr[be-2],Ke=X(Ke,17)^X(Ke,19)^Ke>>>10,Ke=J(Ke,pr[be-7]);var or;or=pr[be-15],or=X(or,7)^X(or,18)^or>>>3,pr[Ge]=J(J(Ke,or),pr[be-16])}Ge=pe,Ge=X(Ge,6)^X(Ge,11)^X(Ge,25),Ge=J(J(J(J(Fe,Ge),pe&ke^~pe&Ce),Gt[be]),pr[be]),Fe=He,Fe=X(Fe,2)^X(Fe,13)^X(Fe,22),Ke=J(Fe,He&Ze^He&Xt^Ze&Xt),Fe=Ce,Ce=ke,ke=pe,pe=J(ie,Ge),ie=Xt,Xt=Ze,Ze=He,He=J(Ge,Ke)}fe[0]=J(He,fe[0]),fe[1]=J(Ze,fe[1]),fe[2]=J(Xt,fe[2]),fe[3]=J(ie,fe[3]),fe[4]=J(pe,fe[4]),fe[5]=J(ke,fe[5]),fe[6]=J(Ce,fe[6]),fe[7]=J(Fe,fe[7])}for(Be="",pr=0;pr<32*fe.length;pr+=8)Be+=String.fromCharCode(fe[pr>>5]>>>24-pr%32&255);return Be}function N(fe){for(var Be="",He,pr=0;pr<fe.length;pr++)He=fe.charCodeAt(pr),Be+="0123456789abcdef".charAt(He>>>4&15)+"0123456789abcdef".charAt(He&15);return Be}function G(fe){for(var Be="",He=-1,pr,Ze;++He<fe.length;)pr=fe.charCodeAt(He),Ze=He+1<fe.length?fe.charCodeAt(He+1):0,55296<=pr&&56319>=pr&&56320<=Ze&&57343>=Ze&&(pr=65536+((pr&1023)<<10)+(Ze&1023),He++),127>=pr?Be+=String.fromCharCode(pr):2047>=pr?Be+=String.fromCharCode(192|pr>>>6&31,128|pr&63):65535>=pr?Be+=String.fromCharCode(224|pr>>>12&15,128|pr>>>6&63,128|pr&63):2097151>=pr&&(Be+=String.fromCharCode(240|pr>>>18&7,128|pr>>>12&63,128|pr>>>6&63,128|pr&63));return Be}function X(fe,Be){return fe>>>Be|fe<<32-Be}function J(fe,Be){var He=(fe&65535)+(Be&65535);return(fe>>16)+(Be>>16)+(He>>16)<<16|He&65535}function it(fe){return Array.prototype.slice.call(fe)}function nt(fe){return it(fe).join("")}function q(fe){function Be(){var Fe=[],Re=[];return et(function(){Fe.push.apply(Fe,it(arguments))},{def:function(){var be="v"+Ze++;return Re.push(be),0<arguments.length&&(Fe.push(be,"="),Fe.push.apply(Fe,it(arguments)),Fe.push(";")),be},toString:function(){return nt([0<Re.length?"var "+Re.join(",")+";":"",nt(Fe)])}})}function He(){function Fe(or,sr){be(or,sr,"=",Re.def(or,sr),";")}var Re=Be(),be=Be(),Ge=Re.toString,Ke=be.toString;return et(function(){Re.apply(Re,it(arguments))},{def:Re.def,entry:Re,exit:be,save:Fe,set:function(or,sr,zt){Fe(or,sr),Re(or,sr,"=",zt,";")},toString:function(){return Ge()+Ke()}})}var pr=fe&&fe.cache,Ze=0,Xt=[],ie=[],pe=[],ke=Be(),Ce={};return{global:ke,link:function(Fe,Re){var be=Re&&Re.stable;if(!be){for(var Ge=0;Ge<ie.length;++Ge)if(ie[Ge]===Fe&&!pe[Ge])return Xt[Ge]}return Ge="g"+Ze++,Xt.push(Ge),ie.push(Fe),pe.push(be),Ge},block:Be,proc:function(Fe,Re){function be(){var sr="a"+Ge.length;return Ge.push(sr),sr}var Ge=[];Re=Re||0;for(var Ke=0;Ke<Re;++Ke)be();var Ke=He(),or=Ke.toString;return Ce[Fe]=et(Ke,{arg:be,toString:function(){return nt(["function(",Ge.join(),"){",or(),"}"])}})},scope:He,cond:function(){var Fe=nt(arguments),Re=He(),be=He(),Ge=Re.toString,Ke=be.toString;return et(Re,{then:function(){return Re.apply(Re,it(arguments)),this},else:function(){return be.apply(be,it(arguments)),this},toString:function(){var or=Ke();return or&&(or="else{"+or+"}"),nt(["if(",Fe,"){",Ge(),"}",or])}})},compile:function(){var Fe=['"use strict";',ke,"return {"];Object.keys(Ce).forEach(function(Ge){Fe.push('"',Ge,'":',Ce[Ge].toString(),",")}),Fe.push("}");var Re=nt(Fe).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),be;return pr&&(be=N(B(G(Re))),pr[be])?pr[be].apply(null,ie):(Re=Function.apply(null,Xt.concat(Re)),pr&&(pr[be]=Re),Re.apply(null,ie))}}}function Z(fe){return Array.isArray(fe)||mt(fe)||o(fe)}function $(fe){return fe.sort(function(Be,He){return Be==="viewport"?-1:He==="viewport"?1:Be<He?-1:1})}function V(fe,Be,He,pr){this.thisDep=fe,this.contextDep=Be,this.propDep=He,this.append=pr}function rt(fe){return fe&&!(fe.thisDep||fe.contextDep||fe.propDep)}function ot(fe){return new V(!1,!1,!1,fe)}function H(fe,Be){var He=fe.type;if(He===0)return He=fe.data.length,new V(!0,1<=He,2<=He,Be);if(He===4)return He=fe.data,new V(He.thisDep,He.contextDep,He.propDep,Be);if(He===5)return new V(!1,!1,!1,Be);if(He===6){for(var pr=He=!1,Ze=!1,Xt=0;Xt<fe.data.length;++Xt){var ie=fe.data[Xt];ie.type===1?Ze=!0:ie.type===2?pr=!0:ie.type===3?He=!0:ie.type===0?(He=!0,ie=ie.data,1<=ie&&(pr=!0),2<=ie&&(Ze=!0)):ie.type===4&&(He=He||ie.data.thisDep,pr=pr||ie.data.contextDep,Ze=Ze||ie.data.propDep)}return new V(He,pr,Ze,Be)}return new V(He===3,He===2,He===1,Be)}function Y(fe,Be,He,pr,Ze,Xt,ie,pe,ke,Ce,Fe,Re,be,Ge,Ke,or){function sr(dr){return dr.replace(".","_")}function zt(dr,Er,gr){var Or=sr(dr);sn.push(dr),Mn[Or]=an[Or]=!!gr,An[Or]=Er}function Ut(dr,Er,gr){var Or=sr(dr);sn.push(dr),Array.isArray(gr)?(an[Or]=gr.slice(),Mn[Or]=gr.slice()):an[Or]=Mn[Or]=gr,Sn[Or]=Er}function Me(){var dr=q({cache:Ke}),Er=dr.link,gr=dr.global;dr.id=Mi++,dr.batchId="0";var Or=Er(qn),vn=dr.shared={props:"a0"};Object.keys(qn).forEach(function(jr){vn[jr]=gr.def(Or,".",jr)});var Tn=dr.next={},ln=dr.current={};Object.keys(Sn).forEach(function(jr){Array.isArray(an[jr])&&(Tn[jr]=gr.def(vn.next,".",jr),ln[jr]=gr.def(vn.current,".",jr))});var nn=dr.constants={};Object.keys(ii).forEach(function(jr){nn[jr]=gr.def(JSON.stringify(ii[jr]))}),dr.invoke=function(jr,Pr){switch(Pr.type){case 0:var Vr=["this",vn.context,vn.props,dr.batchId];return jr.def(Er(Pr.data),".call(",Vr.slice(0,Math.max(Pr.data.length+1,4)),")");case 1:return jr.def(vn.props,Pr.data);case 2:return jr.def(vn.context,Pr.data);case 3:return jr.def("this",Pr.data);case 4:return Pr.data.append(dr,jr),Pr.data.ref;case 5:return Pr.data.toString();case 6:return Pr.data.map(function(mn){return dr.invoke(jr,mn)})}},dr.attribCache={};var xr={};return dr.scopeAttrib=function(jr){if(jr=Be.id(jr),jr in xr)return xr[jr];var Pr=Ce.scope[jr];return Pr||(Pr=Ce.scope[jr]=new ni),xr[jr]=Er(Pr)},dr}function Te(dr){var Er=dr.static;dr=dr.dynamic;var gr;if("profile"in Er){var Or=!!Er.profile;gr=ot(function(Tn,ln){return Or}),gr.enable=Or}else if("profile"in dr){var vn=dr.profile;gr=H(vn,function(Tn,ln){return Tn.invoke(ln,vn)})}return gr}function qe(dr,Er){var gr=dr.static,Or=dr.dynamic;if("framebuffer"in gr){var vn=gr.framebuffer;return vn?(vn=pe.getFramebuffer(vn),ot(function(ln,nn){var xr=ln.link(vn),jr=ln.shared;return nn.set(jr.framebuffer,".next",xr),jr=jr.context,nn.set(jr,".framebufferWidth",xr+".width"),nn.set(jr,".framebufferHeight",xr+".height"),xr})):ot(function(ln,nn){var xr=ln.shared;return nn.set(xr.framebuffer,".next","null"),xr=xr.context,nn.set(xr,".framebufferWidth",xr+".drawingBufferWidth"),nn.set(xr,".framebufferHeight",xr+".drawingBufferHeight"),"null"})}if("framebuffer"in Or){var Tn=Or.framebuffer;return H(Tn,function(ln,nn){var Pr=ln.invoke(nn,Tn),xr=ln.shared,jr=xr.framebuffer,Pr=nn.def(jr,".getFramebuffer(",Pr,")");return nn.set(jr,".next",Pr),xr=xr.context,nn.set(xr,".framebufferWidth",Pr+"?"+Pr+".width:"+xr+".drawingBufferWidth"),nn.set(xr,".framebufferHeight",Pr+"?"+Pr+".height:"+xr+".drawingBufferHeight"),Pr})}return null}function Qe(dr,Er,gr){function Or(nn){if(nn in vn){var xr=vn[nn];nn=!0;var jr=xr.x|0,Pr=xr.y|0,Vr,mn;return"width"in xr?Vr=xr.width|0:nn=!1,"height"in xr?mn=xr.height|0:nn=!1,new V(!nn&&Er&&Er.thisDep,!nn&&Er&&Er.contextDep,!nn&&Er&&Er.propDep,function(_n,Rn){var Cn=_n.shared.context,oi=Vr;"width"in xr||(oi=Rn.def(Cn,".","framebufferWidth","-",jr));var Jn=mn;return"height"in xr||(Jn=Rn.def(Cn,".","framebufferHeight","-",Pr)),[jr,Pr,oi,Jn]})}if(nn in Tn){var xn=Tn[nn];return nn=H(xn,function(_n,Rn){var _i=_n.invoke(Rn,xn),Cn=_n.shared.context,oi=Rn.def(_i,".x|0"),Jn=Rn.def(_i,".y|0"),ai=Rn.def('"width" in ',_i,"?",_i,".width|0:","(",Cn,".","framebufferWidth","-",oi,")"),_i=Rn.def('"height" in ',_i,"?",_i,".height|0:","(",Cn,".","framebufferHeight","-",Jn,")");return[oi,Jn,ai,_i]}),Er&&(nn.thisDep=nn.thisDep||Er.thisDep,nn.contextDep=nn.contextDep||Er.contextDep,nn.propDep=nn.propDep||Er.propDep),nn}return Er?new V(Er.thisDep,Er.contextDep,Er.propDep,function(_n,Rn){var Cn=_n.shared.context;return[0,0,Rn.def(Cn,".","framebufferWidth"),Rn.def(Cn,".","framebufferHeight")]}):null}var vn=dr.static,Tn=dr.dynamic;if(dr=Or("viewport")){var ln=dr;dr=new V(dr.thisDep,dr.contextDep,dr.propDep,function(nn,xr){var jr=ln.append(nn,xr),Pr=nn.shared.context;return xr.set(Pr,".viewportWidth",jr[2]),xr.set(Pr,".viewportHeight",jr[3]),jr})}return{viewport:dr,scissor_box:Or("scissor.box")}}function Je(dr,Er){var gr=dr.static;if(typeof gr.frag=="string"&&typeof gr.vert=="string"){if(0<Object.keys(Er.dynamic).length)return null;var gr=Er.static,Or=Object.keys(gr);if(0<Or.length&&typeof gr[Or[0]]=="number"){for(var vn=[],Tn=0;Tn<Or.length;++Tn)vn.push([gr[Or[Tn]]|0,Or[Tn]]);return vn}}return null}function We(dr,Er,gr){function Or(jr){if(jr in vn){var Pr=Be.id(vn[jr]);return jr=ot(function(){return Pr}),jr.id=Pr,jr}if(jr in Tn){var Vr=Tn[jr];return H(Vr,function(mn,xn){var _n=mn.invoke(xn,Vr);return xn.def(mn.shared.strings,".id(",_n,")")})}return null}var vn=dr.static,Tn=dr.dynamic,ln=Or("frag"),nn=Or("vert"),xr=null;return rt(ln)&&rt(nn)?(xr=Fe.program(nn.id,ln.id,null,gr),dr=ot(function(jr,Pr){return jr.link(xr)})):dr=new V(ln&&ln.thisDep||nn&&nn.thisDep,ln&&ln.contextDep||nn&&nn.contextDep,ln&&ln.propDep||nn&&nn.propDep,function(jr,Pr){var Vr=jr.shared.shader,mn;mn=ln?ln.append(jr,Pr):Pr.def(Vr,".","frag");var xn;return xn=nn?nn.append(jr,Pr):Pr.def(Vr,".","vert"),Pr.def(Vr+".program("+xn+","+mn+")")}),{frag:ln,vert:nn,progVar:dr,program:xr}}function Oe(dr,Er){function gr(_n,Rn){if(_n in Or){var Cn=Or[_n]|0;return Rn?Tn.offset=Cn:Tn.instances=Cn,ot(function(Jn,ai){return Rn&&(Jn.OFFSET=Cn),Cn})}if(_n in vn){var oi=vn[_n];return H(oi,function(Jn,ai){var _i=Jn.invoke(ai,oi);return Rn&&(Jn.OFFSET=_i),_i})}if(Rn){if(xr)return ot(function(Jn,ai){return Jn.OFFSET=0});if(ln)return new V(nn.thisDep,nn.contextDep,nn.propDep,function(Jn,ai){return ai.def(Jn.shared.vao+".currentVAO?"+Jn.shared.vao+".currentVAO.offset:0")})}else if(ln)return new V(nn.thisDep,nn.contextDep,nn.propDep,function(Jn,ai){return ai.def(Jn.shared.vao+".currentVAO?"+Jn.shared.vao+".currentVAO.instances:-1")});return null}var Or=dr.static,vn=dr.dynamic,Tn={},ln=!1,nn=function(){if("vao"in Or){var _n=Or.vao;return _n!==null&&Ce.getVAO(_n)===null&&(_n=Ce.createVAO(_n)),ln=!0,Tn.vao=_n,ot(function(Cn){var oi=Ce.getVAO(_n);return oi?Cn.link(oi):"null"})}if("vao"in vn){ln=!0;var Rn=vn.vao;return H(Rn,function(Cn,oi){var Jn=Cn.invoke(oi,Rn);return oi.def(Cn.shared.vao+".getVAO("+Jn+")")})}return null}(),xr=!1,jr=function(){if("elements"in Or){var _n=Or.elements;if(Tn.elements=_n,Z(_n)){var Rn=Tn.elements=Xt.create(_n,!0),_n=Xt.getElements(Rn);xr=!0}else _n&&(_n=Xt.getElements(_n),xr=!0);return Rn=ot(function(oi,Jn){if(_n){var ai=oi.link(_n);return oi.ELEMENTS=ai}return oi.ELEMENTS=null}),Rn.value=_n,Rn}if("elements"in vn){xr=!0;var Cn=vn.elements;return H(Cn,function(oi,Jn){var ai=oi.shared,ta=ai.isBufferArgs,ai=ai.elements,Yi=oi.invoke(Jn,Cn),_i=Jn.def("null"),ta=Jn.def(ta,"(",Yi,")"),Yi=oi.cond(ta).then(_i,"=",ai,".createStream(",Yi,");").else(_i,"=",ai,".getElements(",Yi,");");return Jn.entry(Yi),Jn.exit(oi.cond(ta).then(ai,".destroyStream(",_i,");")),oi.ELEMENTS=_i})}return ln?new V(nn.thisDep,nn.contextDep,nn.propDep,function(oi,Jn){return Jn.def(oi.shared.vao+".currentVAO?"+oi.shared.elements+".getElements("+oi.shared.vao+".currentVAO.elements):null")}):null}(),Pr=gr("offset",!0),Vr=function(){if("primitive"in Or){var _n=Or.primitive;return Tn.primitive=_n,ot(function(Cn,oi){return he[_n]})}if("primitive"in vn){var Rn=vn.primitive;return H(Rn,function(Cn,oi){var Jn=Cn.constants.primTypes,ai=Cn.invoke(oi,Rn);return oi.def(Jn,"[",ai,"]")})}return xr?rt(jr)?jr.value?ot(function(Cn,oi){return oi.def(Cn.ELEMENTS,".primType")}):ot(function(){return 4}):new V(jr.thisDep,jr.contextDep,jr.propDep,function(Cn,oi){var Jn=Cn.ELEMENTS;return oi.def(Jn,"?",Jn,".primType:",4)}):ln?new V(nn.thisDep,nn.contextDep,nn.propDep,function(Cn,oi){return oi.def(Cn.shared.vao+".currentVAO?"+Cn.shared.vao+".currentVAO.primitive:4")}):null}(),mn=function(){if("count"in Or){var _n=Or.count|0;return Tn.count=_n,ot(function(){return _n})}if("count"in vn){var Rn=vn.count;return H(Rn,function(Cn,oi){return Cn.invoke(oi,Rn)})}return xr?rt(jr)?jr?Pr?new V(Pr.thisDep,Pr.contextDep,Pr.propDep,function(Cn,oi){return oi.def(Cn.ELEMENTS,".vertCount-",Cn.OFFSET)}):ot(function(Cn,oi){return oi.def(Cn.ELEMENTS,".vertCount")}):ot(function(){return-1}):new V(jr.thisDep||Pr.thisDep,jr.contextDep||Pr.contextDep,jr.propDep||Pr.propDep,function(Cn,oi){var Jn=Cn.ELEMENTS;return Cn.OFFSET?oi.def(Jn,"?",Jn,".vertCount-",Cn.OFFSET,":-1"):oi.def(Jn,"?",Jn,".vertCount:-1")}):ln?new V(nn.thisDep,nn.contextDep,nn.propDep,function(Cn,oi){return oi.def(Cn.shared.vao,".currentVAO?",Cn.shared.vao,".currentVAO.count:-1")}):null}(),xn=gr("instances",!1);return{elements:jr,primitive:Vr,count:mn,instances:xn,offset:Pr,vao:nn,vaoActive:ln,elementsActive:xr,static:Tn}}function rr(dr,Er){var gr=dr.static,Or=dr.dynamic,vn={};return sn.forEach(function(Tn){function ln(xr,jr){if(Tn in gr){var Pr=xr(gr[Tn]);vn[nn]=ot(function(){return Pr})}else if(Tn in Or){var Vr=Or[Tn];vn[nn]=H(Vr,function(mn,xn){return jr(mn,xn,mn.invoke(xn,Vr))})}}var nn=sr(Tn);switch(Tn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return ln(function(xr){return xr},function(xr,jr,Pr){return Pr});case"depth.func":return ln(function(xr){return Ne[xr]},function(xr,jr,Pr){return jr.def(xr.constants.compareFuncs,"[",Pr,"]")});case"depth.range":return ln(function(xr){return xr},function(xr,jr,Pr){return xr=jr.def("+",Pr,"[0]"),jr=jr.def("+",Pr,"[1]"),[xr,jr]});case"blend.func":return ln(function(xr){return[je["srcRGB"in xr?xr.srcRGB:xr.src],je["dstRGB"in xr?xr.dstRGB:xr.dst],je["srcAlpha"in xr?xr.srcAlpha:xr.src],je["dstAlpha"in xr?xr.dstAlpha:xr.dst]]},function(xr,jr,Pr){function Vr(Rn,Cn){return jr.def('"',Rn,Cn,'" in ',Pr,"?",Pr,".",Rn,Cn,":",Pr,".",Rn)}xr=xr.constants.blendFuncs;var mn=Vr("src","RGB"),_n=Vr("dst","RGB"),mn=jr.def(xr,"[",mn,"]"),xn=jr.def(xr,"[",Vr("src","Alpha"),"]"),_n=jr.def(xr,"[",_n,"]");return xr=jr.def(xr,"[",Vr("dst","Alpha"),"]"),[mn,_n,xn,xr]});case"blend.equation":return ln(function(xr){if(typeof xr=="string")return[zn[xr],zn[xr]];if(typeof xr=="object")return[zn[xr.rgb],zn[xr.alpha]]},function(xr,jr,Pr){var Vr=xr.constants.blendEquations,mn=jr.def(),xn=jr.def();return xr=xr.cond("typeof ",Pr,'==="string"'),xr.then(mn,"=",xn,"=",Vr,"[",Pr,"];"),xr.else(mn,"=",Vr,"[",Pr,".rgb];",xn,"=",Vr,"[",Pr,".alpha];"),jr(xr),[mn,xn]});case"blend.color":return ln(function(xr){return l(4,function(jr){return+xr[jr]})},function(xr,jr,Pr){return l(4,function(Vr){return jr.def("+",Pr,"[",Vr,"]")})});case"stencil.mask":return ln(function(xr){return xr|0},function(xr,jr,Pr){return jr.def(Pr,"|0")});case"stencil.func":return ln(function(xr){return[Ne[xr.cmp||"keep"],xr.ref||0,"mask"in xr?xr.mask:-1]},function(xr,jr,Pr){xr=jr.def('"cmp" in ',Pr,"?",xr.constants.compareFuncs,"[",Pr,".cmp]",":",7680);var Vr=jr.def(Pr,".ref|0");return jr=jr.def('"mask" in ',Pr,"?",Pr,".mask|0:-1"),[xr,Vr,jr]});case"stencil.opFront":case"stencil.opBack":return ln(function(xr){return[Tn==="stencil.opBack"?1029:1028,ge[xr.fail||"keep"],ge[xr.zfail||"keep"],ge[xr.zpass||"keep"]]},function(xr,jr,Pr){function Vr(xn){return jr.def('"',xn,'" in ',Pr,"?",mn,"[",Pr,".",xn,"]:",7680)}var mn=xr.constants.stencilOps;return[Tn==="stencil.opBack"?1029:1028,Vr("fail"),Vr("zfail"),Vr("zpass")]});case"polygonOffset.offset":return ln(function(xr){return[xr.factor|0,xr.units|0]},function(xr,jr,Pr){return xr=jr.def(Pr,".factor|0"),jr=jr.def(Pr,".units|0"),[xr,jr]});case"cull.face":return ln(function(xr){var jr=0;return xr==="front"?jr=1028:xr==="back"&&(jr=1029),jr},function(xr,jr,Pr){return jr.def(Pr,'==="front"?',1028,":",1029)});case"lineWidth":return ln(function(xr){return xr},function(xr,jr,Pr){return Pr});case"frontFace":return ln(function(xr){return _e[xr]},function(xr,jr,Pr){return jr.def(Pr+'==="cw"?2304:2305')});case"colorMask":return ln(function(xr){return xr.map(function(jr){return!!jr})},function(xr,jr,Pr){return l(4,function(Vr){return"!!"+Pr+"["+Vr+"]"})});case"sample.coverage":return ln(function(xr){return["value"in xr?xr.value:1,!!xr.invert]},function(xr,jr,Pr){return xr=jr.def('"value" in ',Pr,"?+",Pr,".value:1"),jr=jr.def("!!",Pr,".invert"),[xr,jr]})}}),vn}function cr(dr,Er){var gr=dr.static,Or=dr.dynamic,vn={};return Object.keys(gr).forEach(function(Tn){var ln=gr[Tn],nn;if(typeof ln=="number"||typeof ln=="boolean")nn=ot(function(){return ln});else if(typeof ln=="function"){var xr=ln._reglType;xr==="texture2d"||xr==="textureCube"?nn=ot(function(jr){return jr.link(ln)}):(xr==="framebuffer"||xr==="framebufferCube")&&(nn=ot(function(jr){return jr.link(ln.color[0])}))}else k(ln)&&(nn=ot(function(jr){return jr.global.def("[",l(ln.length,function(Pr){return ln[Pr]}),"]")}));nn.value=ln,vn[Tn]=nn}),Object.keys(Or).forEach(function(Tn){var ln=Or[Tn];vn[Tn]=H(ln,function(nn,xr){return nn.invoke(xr,ln)})}),vn}function lr(dr,Er){var gr=dr.static,Or=dr.dynamic,vn={};return Object.keys(gr).forEach(function(Tn){var ln=gr[Tn],nn=Be.id(Tn),xr=new ni;if(Z(ln))xr.state=1,xr.buffer=Ze.getBuffer(Ze.create(ln,34962,!1,!0)),xr.type=0;else{var jr=Ze.getBuffer(ln);if(jr)xr.state=1,xr.buffer=jr,xr.type=0;else if("constant"in ln){var Pr=ln.constant;xr.buffer="null",xr.state=2,typeof Pr=="number"?xr.x=Pr:te.forEach(function(Cn,oi){oi<Pr.length&&(xr[Cn]=Pr[oi])})}else{var jr=Z(ln.buffer)?Ze.getBuffer(Ze.create(ln.buffer,34962,!1,!0)):Ze.getBuffer(ln.buffer),Vr=ln.offset|0,mn=ln.stride|0,xn=ln.size|0,_n=!!ln.normalized,Rn=0;"type"in ln&&(Rn=It[ln.type]),ln=ln.divisor|0,xr.buffer=jr,xr.state=1,xr.size=xn,xr.normalized=_n,xr.type=Rn||jr.dtype,xr.offset=Vr,xr.stride=mn,xr.divisor=ln}}vn[Tn]=ot(function(Cn,oi){var Jn=Cn.attribCache;if(nn in Jn)return Jn[nn];var ai={isStream:!1};return Object.keys(xr).forEach(function(_i){ai[_i]=xr[_i]}),xr.buffer&&(ai.buffer=Cn.link(xr.buffer),ai.type=ai.type||ai.buffer+".dtype"),Jn[nn]=ai})}),Object.keys(Or).forEach(function(Tn){var ln=Or[Tn];vn[Tn]=H(ln,function(nn,xr){function jr(Jn){xr(_n[Jn],"=",Pr,".",Jn,"|0;")}var Pr=nn.invoke(xr,ln),xn=nn.shared,Vr=nn.constants,mn=xn.isBufferArgs,xn=xn.buffer,_n={isStream:xr.def(!1)},Rn=new ni;Rn.state=1,Object.keys(Rn).forEach(function(Jn){_n[Jn]=xr.def(""+Rn[Jn])});var Cn=_n.buffer,oi=_n.type;return xr("if(",mn,"(",Pr,")){",_n.isStream,"=true;",Cn,"=",xn,".createStream(",34962,",",Pr,");",oi,"=",Cn,".dtype;","}else{",Cn,"=",xn,".getBuffer(",Pr,");","if(",Cn,"){",oi,"=",Cn,".dtype;",'}else if("constant" in ',Pr,"){",_n.state,"=",2,";","if(typeof "+Pr+'.constant === "number"){',_n[te[0]],"=",Pr,".constant;",te.slice(1).map(function(Jn){return _n[Jn]}).join("="),"=0;","}else{",te.map(function(Jn,ai){return _n[Jn]+"="+Pr+".constant.length>"+ai+"?"+Pr+".constant["+ai+"]:0;"}).join(""),"}}else{","if(",mn,"(",Pr,".buffer)){",Cn,"=",xn,".createStream(",34962,",",Pr,".buffer);","}else{",Cn,"=",xn,".getBuffer(",Pr,".buffer);","}",oi,'="type" in ',Pr,"?",Vr.glTypes,"[",Pr,".type]:",Cn,".dtype;",_n.normalized,"=!!",Pr,".normalized;"),jr("size"),jr("offset"),jr("stride"),jr("divisor"),xr("}}"),xr.exit("if(",_n.isStream,"){",xn,".destroyStream(",Cn,");","}"),_n})}),vn}function nr(dr){var Er=dr.static,gr=dr.dynamic,Or={};return Object.keys(Er).forEach(function(vn){var Tn=Er[vn];Or[vn]=ot(function(ln,nn){return typeof Tn=="number"||typeof Tn=="boolean"?""+Tn:ln.link(Tn)})}),Object.keys(gr).forEach(function(vn){var Tn=gr[vn];Or[vn]=H(Tn,function(ln,nn){return ln.invoke(nn,Tn)})}),Or}function Sr(dr,Er,gr,Or,vn){function Tn(Rn){var Cn=nn[Rn];Cn&&(jr[Rn]=Cn)}var ln=Je(dr,Er),mn=qe(dr),nn=Qe(dr,mn),xr=Oe(dr),jr=rr(dr),Pr=We(dr,vn,ln);Tn("viewport"),Tn(sr("scissor.box"));var Vr=0<Object.keys(jr).length,mn={framebuffer:mn,draw:xr,shader:Pr,state:jr,dirty:Vr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(mn.profile=Te(dr),mn.uniforms=cr(gr),mn.drawVAO=mn.scopeVAO=xr.vao,!mn.drawVAO&&Pr.program&&!ln&&He.angle_instanced_arrays&&xr.static.elements){var xn=!0;if(dr=Pr.program.attributes.map(function(Rn){return Rn=Er.static[Rn],xn=xn&&!!Rn,Rn}),xn&&0<dr.length){var _n=Ce.getVAO(Ce.createVAO({attributes:dr,elements:xr.static.elements}));mn.drawVAO=new V(null,null,null,function(Rn,Cn){return Rn.link(_n)}),mn.useVAO=!0}}return ln?mn.useVAO=!0:mn.attributes=lr(Er),mn.context=nr(Or),mn}function kr(dr,Er,gr){var Or=dr.shared.context,vn=dr.scope();Object.keys(gr).forEach(function(Tn){Er.save(Or,"."+Tn);var ln=gr[Tn].append(dr,Er);Array.isArray(ln)?vn(Or,".",Tn,"=[",ln.join(),"];"):vn(Or,".",Tn,"=",ln,";")}),Er(vn)}function Mr(dr,Er,gr,Or){var nn=dr.shared,vn=nn.gl,Tn=nn.framebuffer,ln;Gr&&(ln=Er.def(nn.extensions,".webgl_draw_buffers"));var xr=dr.constants,nn=xr.drawBuffer,xr=xr.backBuffer;dr=gr?gr.append(dr,Er):Er.def(Tn,".next"),Or||Er("if(",dr,"!==",Tn,".cur){"),Er("if(",dr,"){",vn,".bindFramebuffer(",36160,",",dr,".framebuffer);"),Gr&&Er(ln,".drawBuffersWEBGL(",nn,"[",dr,".colorAttachments.length]);"),Er("}else{",vn,".bindFramebuffer(",36160,",null);"),Gr&&Er(ln,".drawBuffersWEBGL(",xr,");"),Er("}",Tn,".cur=",dr,";"),Or||Er("}")}function rn(dr,Er,gr){var Or=dr.shared,vn=Or.gl,Tn=dr.current,ln=dr.next,nn=Or.current,xr=Or.next,jr=dr.cond(nn,".dirty");sn.forEach(function(Pr){if(Pr=sr(Pr),!(Pr in gr.state)){var Vr,mn;if(Pr in ln){Vr=ln[Pr],mn=Tn[Pr];var xn=l(an[Pr].length,function(_n){return jr.def(Vr,"[",_n,"]")});jr(dr.cond(xn.map(function(_n,Rn){return _n+"!=="+mn+"["+Rn+"]"}).join("||")).then(vn,".",Sn[Pr],"(",xn,");",xn.map(function(_n,Rn){return mn+"["+Rn+"]="+_n}).join(";"),";"))}else Vr=jr.def(xr,".",Pr),xn=dr.cond(Vr,"!==",nn,".",Pr),jr(xn),Pr in An?xn(dr.cond(Vr).then(vn,".enable(",An[Pr],");").else(vn,".disable(",An[Pr],");"),nn,".",Pr,"=",Vr,";"):xn(vn,".",Sn[Pr],"(",Vr,");",nn,".",Pr,"=",Vr,";")}}),Object.keys(gr.state).length===0&&jr(nn,".dirty=false;"),Er(jr)}function Ur(dr,Er,gr,Or){var vn=dr.shared,Tn=dr.current,ln=vn.current,nn=vn.gl,xr;$(Object.keys(gr)).forEach(function(jr){var Pr=gr[jr];if(!Or||Or(Pr)){var Vr=Pr.append(dr,Er);if(An[jr]){var mn=An[jr];rt(Pr)?(xr=dr.link(Vr,{stable:!0}),Er(dr.cond(xr).then(nn,".enable(",mn,");").else(nn,".disable(",mn,");")),Er(ln,".",jr,"=",xr,";")):(Er(dr.cond(Vr).then(nn,".enable(",mn,");").else(nn,".disable(",mn,");")),Er(ln,".",jr,"=",Vr,";"))}else if(k(Vr)){var xn=Tn[jr];Er(nn,".",Sn[jr],"(",Vr,");",Vr.map(function(_n,Rn){return xn+"["+Rn+"]="+_n}).join(";"),";")}else rt(Pr)?(xr=dr.link(Vr,{stable:!0}),Er(nn,".",Sn[jr],"(",xr,");",ln,".",jr,"=",xr,";")):Er(nn,".",Sn[jr],"(",Vr,");",ln,".",jr,"=",Vr,";")}})}function pn(dr,Er){ur&&(dr.instancing=Er.def(dr.shared.extensions,".angle_instanced_arrays"))}function yn(dr,Er,gr,Or,vn){function Tn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function ln(Rn){xn=Er.def(),Rn(xn,"=",Tn(),";"),typeof vn=="string"?Rn(Pr,".count+=",vn,";"):Rn(Pr,".count++;"),Ge&&(Or?(_n=Er.def(),Rn(_n,"=",mn,".getNumPendingQueries();")):Rn(mn,".beginQuery(",Pr,");"))}function nn(Rn){Rn(Pr,".cpuTime+=",Tn(),"-",xn,";"),Ge&&(Or?Rn(mn,".pushScopeStats(",_n,",",mn,".getNumPendingQueries(),",Pr,");"):Rn(mn,".endQuery();"))}function xr(Rn){var Cn=Er.def(Vr,".profile");Er(Vr,".profile=",Rn,";"),Er.exit(Vr,".profile=",Cn,";")}var jr=dr.shared,Pr=dr.stats,Vr=jr.current,mn=jr.timer;gr=gr.profile;var xn,_n;if(gr){if(rt(gr)){gr.enable?(ln(Er),nn(Er.exit),xr("true")):xr("false");return}gr=gr.append(dr,Er),xr(gr)}else gr=Er.def(Vr,".profile");jr=dr.block(),ln(jr),Er("if(",gr,"){",jr,"}"),dr=dr.block(),nn(dr),Er.exit("if(",gr,"){",dr,"}")}function yr(dr,Er,gr,Or,vn){function Tn(xr){switch(xr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function ln(xr,jr,Pr){function Vr(){Er("if(!",Rn,".buffer){",xn,".enableVertexAttribArray(",_n,");}");var ai=Pr.type,_i;_i=Pr.size?Er.def(Pr.size,"||",jr):jr,Er("if(",Rn,".type!==",ai,"||",Rn,".size!==",_i,"||",Jn.map(function(ta){return Rn+"."+ta+"!=="+Pr[ta]}).join("||"),"){",xn,".bindBuffer(",34962,",",Cn,".buffer);",xn,".vertexAttribPointer(",[_n,_i,ai,Pr.normalized,Pr.stride,Pr.offset],");",Rn,".type=",ai,";",Rn,".size=",_i,";",Jn.map(function(ta){return Rn+"."+ta+"="+Pr[ta]+";"}).join(""),"}"),ur&&(ai=Pr.divisor,Er("if(",Rn,".divisor!==",ai,"){",dr.instancing,".vertexAttribDivisorANGLE(",[_n,ai],");",Rn,".divisor=",ai,";}"))}function mn(){Er("if(",Rn,".buffer){",xn,".disableVertexAttribArray(",_n,");",Rn,".buffer=null;","}if(",te.map(function(ai,_i){return Rn+"."+ai+"!=="+oi[_i]}).join("||"),"){",xn,".vertexAttrib4f(",_n,",",oi,");",te.map(function(ai,_i){return Rn+"."+ai+"="+oi[_i]+";"}).join(""),"}")}var xn=nn.gl,_n=Er.def(xr,".location"),Rn=Er.def(nn.attributes,"[",_n,"]");xr=Pr.state;var Cn=Pr.buffer,oi=[Pr.x,Pr.y,Pr.z,Pr.w],Jn=["buffer","normalized","offset","stride"];xr===1?Vr():xr===2?mn():(Er("if(",xr,"===",1,"){"),Vr(),Er("}else{"),mn(),Er("}"))}var nn=dr.shared;Or.forEach(function(xr){var jr=xr.name,Pr=gr.attributes[jr],Vr;if(Pr){if(!vn(Pr))return;Vr=Pr.append(dr,Er)}else{if(!vn(De))return;var mn=dr.scopeAttrib(jr);Vr={},Object.keys(new ni).forEach(function(xn){Vr[xn]=Er.def(mn,".",xn)})}ln(dr.link(xr),Tn(xr.info.type),Vr)})}function Cr(dr,Er,gr,Or,vn,Tn){for(var ln=dr.shared,nn=ln.gl,xr,jr=0;jr<Or.length;++jr){var xn=Or[jr],Pr=xn.name,Vr=xn.info.type,mn=gr.uniforms[Pr],xn=dr.link(xn)+".location",_n;if(mn){if(!vn(mn))continue;if(rt(mn)){if(Pr=mn.value,Vr===35678||Vr===35680)Vr=dr.link(Pr._texture||Pr.color[0]._texture),Er(nn,".uniform1i(",xn,",",Vr+".bind());"),Er.exit(Vr,".unbind();");else if(Vr===35674||Vr===35675||Vr===35676)Pr=dr.global.def("new Float32Array(["+Array.prototype.slice.call(Pr)+"])"),mn=2,Vr===35675?mn=3:Vr===35676&&(mn=4),Er(nn,".uniformMatrix",mn,"fv(",xn,",false,",Pr,");");else{switch(Vr){case 5126:xr="1f";break;case 35664:xr="2f";break;case 35665:xr="3f";break;case 35666:xr="4f";break;case 35670:xr="1i";break;case 5124:xr="1i";break;case 35671:xr="2i";break;case 35667:xr="2i";break;case 35672:xr="3i";break;case 35668:xr="3i";break;case 35673:xr="4i";break;case 35669:xr="4i"}Er(nn,".uniform",xr,"(",xn,",",k(Pr)?Array.prototype.slice.call(Pr):Pr,");")}continue}else _n=mn.append(dr,Er)}else{if(!vn(De))continue;_n=Er.def(ln.uniforms,"[",Be.id(Pr),"]")}switch(Vr===35678?Er("if(",_n,"&&",_n,'._reglType==="framebuffer"){',_n,"=",_n,".color[0];","}"):Vr===35680&&Er("if(",_n,"&&",_n,'._reglType==="framebufferCube"){',_n,"=",_n,".color[0];","}"),Pr=1,Vr){case 35678:case 35680:Vr=Er.def(_n,"._texture"),Er(nn,".uniform1i(",xn,",",Vr,".bind());"),Er.exit(Vr,".unbind();");continue;case 5124:case 35670:xr="1i";break;case 35667:case 35671:xr="2i",Pr=2;break;case 35668:case 35672:xr="3i",Pr=3;break;case 35669:case 35673:xr="4i",Pr=4;break;case 5126:xr="1f";break;case 35664:xr="2f",Pr=2;break;case 35665:xr="3f",Pr=3;break;case 35666:xr="4f",Pr=4;break;case 35674:xr="Matrix2fv";break;case 35675:xr="Matrix3fv";break;case 35676:xr="Matrix4fv"}if(xr.charAt(0)==="M"){Er(nn,".uniform",xr,"(",xn,",");var xn=Math.pow(Vr-35674+2,2),Rn=dr.global.def("new Float32Array(",xn,")");Array.isArray(_n)?Er("false,(",l(xn,function(Jn){return Rn+"["+Jn+"]="+_n[Jn]}),",",Rn,")"):Er("false,(Array.isArray(",_n,")||",_n," instanceof Float32Array)?",_n,":(",l(xn,function(Jn){return Rn+"["+Jn+"]="+_n+"["+Jn+"]"}),",",Rn,")"),Er(");")}else{if(1<Pr){for(var Vr=[],Cn=[],mn=0;mn<Pr;++mn)Array.isArray(_n)?Cn.push(_n[mn]):Cn.push(Er.def(_n+"["+mn+"]")),Tn&&Vr.push(Er.def());Tn&&Er("if(!",dr.batchId,"||",Vr.map(function(oi,Jn){return oi+"!=="+Cn[Jn]}).join("||"),"){",Vr.map(function(oi,Jn){return oi+"="+Cn[Jn]+";"}).join("")),Er(nn,".uniform",xr,"(",xn,",",Cn.join(","),");")}else Tn&&(Vr=Er.def(),Er("if(!",dr.batchId,"||",Vr,"!==",_n,"){",Vr,"=",_n,";")),Er(nn,".uniform",xr,"(",xn,",",_n,");");Tn&&Er("}")}}}function Dr(dr,Er,gr,Or){function vn(ai){var _i=Pr[ai];return _i?_i.contextDep&&Or.contextDynamic||_i.propDep?_i.append(dr,gr):_i.append(dr,Er):Er.def(jr,".",ai)}function Tn(){function ai(){gr(Cn,".drawElementsInstancedANGLE(",[mn,_n,oi,xn+"<<(("+oi+"-5121)>>1)",Rn],");")}function _i(){gr(Cn,".drawArraysInstancedANGLE(",[mn,xn,_n,Rn],");")}Vr&&Vr!=="null"?Jn?ai():(gr("if(",Vr,"){"),ai(),gr("}else{"),_i(),gr("}")):_i()}function ln(){function ai(){gr(xr+".drawElements("+[mn,_n,oi,xn+"<<(("+oi+"-5121)>>1)"]+");")}function _i(){gr(xr+".drawArrays("+[mn,xn,_n]+");")}Vr&&Vr!=="null"?Jn?ai():(gr("if(",Vr,"){"),ai(),gr("}else{"),_i(),gr("}")):_i()}var nn=dr.shared,xr=nn.gl,jr=nn.draw,Pr=Or.draw,Vr=function(){var ai=Pr.elements,_i=Er;return ai?((ai.contextDep&&Or.contextDynamic||ai.propDep)&&(_i=gr),ai=ai.append(dr,_i),Pr.elementsActive&&_i("if("+ai+")"+xr+".bindBuffer(34963,"+ai+".buffer.buffer);")):(ai=_i.def(),_i(ai,"=",jr,".","elements",";","if(",ai,"){",xr,".bindBuffer(",34963,",",ai,".buffer.buffer);}","else if(",nn.vao,".currentVAO){",ai,"=",dr.shared.elements+".getElements("+nn.vao,".currentVAO.elements);",qr?"":"if("+ai+")"+xr+".bindBuffer(34963,"+ai+".buffer.buffer);","}")),ai}(),mn=vn("primitive"),xn=vn("offset"),_n=function(){var ai=Pr.count,_i=Er;return ai?((ai.contextDep&&Or.contextDynamic||ai.propDep)&&(_i=gr),ai=ai.append(dr,_i)):ai=_i.def(jr,".","count"),ai}();if(typeof _n=="number"){if(_n===0)return}else gr("if(",_n,"){"),gr.exit("}");var Rn,Cn;ur&&(Rn=vn("instances"),Cn=dr.instancing);var oi=Vr+".type",Jn=Pr.elements&&rt(Pr.elements)&&!Pr.vaoActive;ur&&(typeof Rn!="number"||0<=Rn)?typeof Rn=="string"?(gr("if(",Rn,">0){"),Tn(),gr("}else if(",Rn,"<0){"),ln(),gr("}")):Tn():ln()}function Nr(dr,Er,gr,Or,vn){return Er=Me(),vn=Er.proc("body",vn),ur&&(Er.instancing=vn.def(Er.shared.extensions,".angle_instanced_arrays")),dr(Er,vn,gr,Or),Er.compile().body}function $r(dr,Er,gr,Or){pn(dr,Er),gr.useVAO?gr.drawVAO?Er(dr.shared.vao,".setVAO(",gr.drawVAO.append(dr,Er),");"):Er(dr.shared.vao,".setVAO(",dr.shared.vao,".targetVAO);"):(Er(dr.shared.vao,".setVAO(null);"),yr(dr,Er,gr,Or.attributes,function(){return!0})),Cr(dr,Er,gr,Or.uniforms,function(){return!0},!1),Dr(dr,Er,Er,gr)}function fn(dr,Er){var gr=dr.proc("draw",1);pn(dr,gr),kr(dr,gr,Er.context),Mr(dr,gr,Er.framebuffer),rn(dr,gr,Er),Ur(dr,gr,Er.state),yn(dr,gr,Er,!1,!0);var Or=Er.shader.progVar.append(dr,gr);if(gr(dr.shared.gl,".useProgram(",Or,".program);"),Er.shader.program)$r(dr,gr,Er,Er.shader.program);else{gr(dr.shared.vao,".setVAO(null);");var vn=dr.global.def("{}"),Tn=gr.def(Or,".id"),ln=gr.def(vn,"[",Tn,"]");gr(dr.cond(ln).then(ln,".call(this,a0);").else(ln,"=",vn,"[",Tn,"]=",dr.link(function(nn){return Nr($r,dr,Er,nn,1)}),"(",Or,");",ln,".call(this,a0);"))}0<Object.keys(Er.state).length&&gr(dr.shared.current,".dirty=true;"),dr.shared.vao&&gr(dr.shared.vao,".setVAO(null);")}function on(dr,Er,gr,Or){function vn(){return!0}dr.batchId="a1",pn(dr,Er),yr(dr,Er,gr,Or.attributes,vn),Cr(dr,Er,gr,Or.uniforms,vn,!1),Dr(dr,Er,Er,gr)}function In(dr,Er,gr,Or){function vn(Vr){return Vr.contextDep&&ln||Vr.propDep}function Tn(Vr){return!vn(Vr)}pn(dr,Er);var ln=gr.contextDep,nn=Er.def(),xr=Er.def();dr.shared.props=xr,dr.batchId=nn;var jr=dr.scope(),Pr=dr.scope();Er(jr.entry,"for(",nn,"=0;",nn,"<","a1",";++",nn,"){",xr,"=","a0","[",nn,"];",Pr,"}",jr.exit),gr.needsContext&&kr(dr,Pr,gr.context),gr.needsFramebuffer&&Mr(dr,Pr,gr.framebuffer),Ur(dr,Pr,gr.state,vn),gr.profile&&vn(gr.profile)&&yn(dr,Pr,gr,!1,!0),Or?(gr.useVAO?gr.drawVAO?vn(gr.drawVAO)?Pr(dr.shared.vao,".setVAO(",gr.drawVAO.append(dr,Pr),");"):jr(dr.shared.vao,".setVAO(",gr.drawVAO.append(dr,jr),");"):jr(dr.shared.vao,".setVAO(",dr.shared.vao,".targetVAO);"):(jr(dr.shared.vao,".setVAO(null);"),yr(dr,jr,gr,Or.attributes,Tn),yr(dr,Pr,gr,Or.attributes,vn)),Cr(dr,jr,gr,Or.uniforms,Tn,!1),Cr(dr,Pr,gr,Or.uniforms,vn,!0),Dr(dr,jr,Pr,gr)):(Er=dr.global.def("{}"),Or=gr.shader.progVar.append(dr,Pr),xr=Pr.def(Or,".id"),jr=Pr.def(Er,"[",xr,"]"),Pr(dr.shared.gl,".useProgram(",Or,".program);","if(!",jr,"){",jr,"=",Er,"[",xr,"]=",dr.link(function(Vr){return Nr(on,dr,gr,Vr,2)}),"(",Or,");}",jr,".call(this,a0[",nn,"],",nn,");"))}function En(dr,Er){function gr(jr){return jr.contextDep&&vn||jr.propDep}var Or=dr.proc("batch",2);dr.batchId="0",pn(dr,Or);var vn=!1,Tn=!0;Object.keys(Er.context).forEach(function(jr){vn=vn||Er.context[jr].propDep}),vn||(kr(dr,Or,Er.context),Tn=!1);var ln=Er.framebuffer,nn=!1;if(ln?(ln.propDep?vn=nn=!0:ln.contextDep&&vn&&(nn=!0),nn||Mr(dr,Or,ln)):Mr(dr,Or,null),Er.state.viewport&&Er.state.viewport.propDep&&(vn=!0),rn(dr,Or,Er),Ur(dr,Or,Er.state,function(jr){return!gr(jr)}),Er.profile&&gr(Er.profile)||yn(dr,Or,Er,!1,"a1"),Er.contextDep=vn,Er.needsContext=Tn,Er.needsFramebuffer=nn,Tn=Er.shader.progVar,Tn.contextDep&&vn||Tn.propDep)In(dr,Or,Er,null);else if(Tn=Tn.append(dr,Or),Or(dr.shared.gl,".useProgram(",Tn,".program);"),Er.shader.program)In(dr,Or,Er,Er.shader.program);else{Or(dr.shared.vao,".setVAO(null);");var ln=dr.global.def("{}"),nn=Or.def(Tn,".id"),xr=Or.def(ln,"[",nn,"]");Or(dr.cond(xr).then(xr,".call(this,a0,a1);").else(xr,"=",ln,"[",nn,"]=",dr.link(function(Vr){return Nr(In,dr,Er,Vr,2)}),"(",Tn,");",xr,".call(this,a0,a1);"))}0<Object.keys(Er.state).length&&Or(dr.shared.current,".dirty=true;"),dr.shared.vao&&Or(dr.shared.vao,".setVAO(null);")}function $n(dr,Er){function gr(nn){var xr=Er.shader[nn];xr&&(xr=xr.append(dr,Or),isNaN(xr)?Or.set(vn.shader,"."+nn,xr):Or.set(vn.shader,"."+nn,dr.link(xr,{stable:!0})))}var Or=dr.proc("scope",3);dr.batchId="a2";var vn=dr.shared,Tn=vn.current;if(kr(dr,Or,Er.context),Er.framebuffer&&Er.framebuffer.append(dr,Or),$(Object.keys(Er.state)).forEach(function(nn){var xr=Er.state[nn],jr=xr.append(dr,Or);k(jr)?jr.forEach(function(Pr,Vr){isNaN(Pr)?Or.set(dr.next[nn],"["+Vr+"]",Pr):Or.set(dr.next[nn],"["+Vr+"]",dr.link(Pr,{stable:!0}))}):rt(xr)?Or.set(vn.next,"."+nn,dr.link(jr,{stable:!0})):Or.set(vn.next,"."+nn,jr)}),yn(dr,Or,Er,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(nn){var xr=Er.draw[nn];xr&&(xr=xr.append(dr,Or),isNaN(xr)?Or.set(vn.draw,"."+nn,xr):Or.set(vn.draw,"."+nn,dr.link(xr),{stable:!0}))}),Object.keys(Er.uniforms).forEach(function(nn){var xr=Er.uniforms[nn].append(dr,Or);Array.isArray(xr)&&(xr="["+xr.map(function(jr){return isNaN(jr)?jr:dr.link(jr,{stable:!0})})+"]"),Or.set(vn.uniforms,"["+dr.link(Be.id(nn),{stable:!0})+"]",xr)}),Object.keys(Er.attributes).forEach(function(nn){var xr=Er.attributes[nn].append(dr,Or),jr=dr.scopeAttrib(nn);Object.keys(new ni).forEach(function(Pr){Or.set(jr,"."+Pr,xr[Pr])})}),Er.scopeVAO){var ln=Er.scopeVAO.append(dr,Or);isNaN(ln)?Or.set(vn.vao,".targetVAO",ln):Or.set(vn.vao,".targetVAO",dr.link(ln,{stable:!0}))}gr("vert"),gr("frag"),0<Object.keys(Er.state).length&&(Or(Tn,".dirty=true;"),Or.exit(Tn,".dirty=true;")),Or("a1(",dr.shared.context,",a0,",dr.batchId,");")}function ri(dr){if(typeof dr=="object"&&!k(dr)){for(var Er=Object.keys(dr),gr=0;gr<Er.length;++gr)if(ft.isDynamic(dr[Er[gr]]))return!0;return!1}}function ui(dr,Er,gr){function Or(Vr,mn){ln.forEach(function(xn){var _n=vn[xn];ft.isDynamic(_n)&&(_n=Vr.invoke(mn,_n),mn(Pr,".",xn,"=",_n,";"))})}var vn=Er.static[gr];if(vn&&ri(vn)){var Tn=dr.global,ln=Object.keys(vn),nn=!1,xr=!1,jr=!1,Pr=dr.global.def("{}");ln.forEach(function(Vr){var mn=vn[Vr];if(ft.isDynamic(mn))typeof mn=="function"&&(mn=vn[Vr]=ft.unbox(mn)),Vr=H(mn,null),nn=nn||Vr.thisDep,jr=jr||Vr.propDep,xr=xr||Vr.contextDep;else{switch(Tn(Pr,".",Vr,"="),typeof mn){case"number":Tn(mn);break;case"string":Tn('"',mn,'"');break;case"object":Array.isArray(mn)&&Tn("[",mn.join(),"]");break;default:Tn(dr.link(mn))}Tn(";")}}),Er.dynamic[gr]=new ft.DynamicVariable(4,{thisDep:nn,contextDep:xr,propDep:jr,ref:Pr,append:Or}),delete Er.static[gr]}}var ni=Ce.Record,zn={add:32774,subtract:32778,"reverse subtract":32779};He.ext_blend_minmax&&(zn.min=32775,zn.max=32776);var ur=He.angle_instanced_arrays,Gr=He.webgl_draw_buffers,qr=He.oes_vertex_array_object,an={dirty:!0,profile:or.profile},Mn={},sn=[],An={},Sn={};zt("dither",3024),zt("blend.enable",3042),Ut("blend.color","blendColor",[0,0,0,0]),Ut("blend.equation","blendEquationSeparate",[32774,32774]),Ut("blend.func","blendFuncSeparate",[1,0,1,0]),zt("depth.enable",2929,!0),Ut("depth.func","depthFunc",513),Ut("depth.range","depthRange",[0,1]),Ut("depth.mask","depthMask",!0),Ut("colorMask","colorMask",[!0,!0,!0,!0]),zt("cull.enable",2884),Ut("cull.face","cullFace",1029),Ut("frontFace","frontFace",2305),Ut("lineWidth","lineWidth",1),zt("polygonOffset.enable",32823),Ut("polygonOffset.offset","polygonOffset",[0,0]),zt("sample.alpha",32926),zt("sample.enable",32928),Ut("sample.coverage","sampleCoverage",[1,!1]),zt("stencil.enable",2960),Ut("stencil.mask","stencilMask",-1),Ut("stencil.func","stencilFunc",[519,0,-1]),Ut("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Ut("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),zt("scissor.enable",3089),Ut("scissor.box","scissor",[0,0,fe.drawingBufferWidth,fe.drawingBufferHeight]),Ut("viewport","viewport",[0,0,fe.drawingBufferWidth,fe.drawingBufferHeight]);var qn={gl:fe,context:be,strings:Be,next:Mn,current:an,draw:Re,elements:Xt,buffer:Ze,shader:Fe,attributes:Ce.state,vao:Ce,uniforms:ke,framebuffer:pe,extensions:He,timer:Ge,isBufferArgs:Z},ii={primTypes:he,compareFuncs:Ne,blendFuncs:je,blendEquations:zn,stencilOps:ge,glTypes:It,orientationType:_e};Gr&&(ii.backBuffer=[1029],ii.drawBuffer=l(pr.maxDrawbuffers,function(dr){return dr===0?[0]:l(dr,function(Er){return 36064+Er})}));var Mi=0;return{next:Mn,current:an,procs:function(){var dr=Me(),Er=dr.proc("poll"),gr=dr.proc("refresh"),Or=dr.block();Er(Or),gr(Or);var xr=dr.shared,vn=xr.gl,Tn=xr.next,ln=xr.current;Or(ln,".dirty=false;"),Mr(dr,Er),Mr(dr,gr,null,!0);var nn;ur&&(nn=dr.link(ur)),He.oes_vertex_array_object&&gr(dr.link(He.oes_vertex_array_object),".bindVertexArrayOES(null);");var xr=gr.def(xr.attributes),jr=gr.def(0),Pr=dr.cond(jr,".buffer");Pr.then(vn,".enableVertexAttribArray(i);",vn,".bindBuffer(",34962,",",jr,".buffer.buffer);",vn,".vertexAttribPointer(i,",jr,".size,",jr,".type,",jr,".normalized,",jr,".stride,",jr,".offset);").else(vn,".disableVertexAttribArray(i);",vn,".vertexAttrib4f(i,",jr,".x,",jr,".y,",jr,".z,",jr,".w);",jr,".buffer=null;");var Vr=dr.link(pr.maxAttributes,{stable:!0});return gr("for(var i=0;i<",Vr,";++i){",jr,"=",xr,"[i];",Pr,"}"),ur&&gr("for(var i=0;i<",Vr,";++i){",nn,".vertexAttribDivisorANGLE(i,",xr,"[i].divisor);","}"),gr(dr.shared.vao,".currentVAO=null;",dr.shared.vao,".setVAO(",dr.shared.vao,".targetVAO);"),Object.keys(An).forEach(function(mn){var xn=An[mn],_n=Or.def(Tn,".",mn),Rn=dr.block();Rn("if(",_n,"){",vn,".enable(",xn,")}else{",vn,".disable(",xn,")}",ln,".",mn,"=",_n,";"),gr(Rn),Er("if(",_n,"!==",ln,".",mn,"){",Rn,"}")}),Object.keys(Sn).forEach(function(mn){var xn=Sn[mn],_n=an[mn],Rn,Cn,oi=dr.block();oi(vn,".",xn,"("),k(_n)?(xn=_n.length,Rn=dr.global.def(Tn,".",mn),Cn=dr.global.def(ln,".",mn),oi(l(xn,function(Jn){return Rn+"["+Jn+"]"}),");",l(xn,function(Jn){return Cn+"["+Jn+"]="+Rn+"["+Jn+"];"}).join("")),Er("if(",l(xn,function(Jn){return Rn+"["+Jn+"]!=="+Cn+"["+Jn+"]"}).join("||"),"){",oi,"}")):(Rn=Or.def(Tn,".",mn),Cn=Or.def(ln,".",mn),oi(Rn,");",ln,".",mn,"=",Rn,";"),Er("if(",Rn,"!==",Cn,"){",oi,"}")),gr(oi)}),dr.compile()}(),compile:function(dr,Er,gr,Or,vn){var Tn=Me();Tn.stats=Tn.link(vn),Object.keys(Er.static).forEach(function(nn){ui(Tn,Er,nn)}),ne.forEach(function(nn){ui(Tn,dr,nn)});var ln=Sr(dr,Er,gr,Or,Tn);return ln.shader.program&&(ln.shader.program.attributes.sort(function(nn,xr){return nn.name<xr.name?-1:1}),ln.shader.program.uniforms.sort(function(nn,xr){return nn.name<xr.name?-1:1})),fn(Tn,ln),$n(Tn,ln),En(Tn,ln),et(Tn.compile(),{destroy:function(){ln.shader.program.destroy()}})}}}function at(fe,Be){for(var He=0;He<fe.length;++He)if(fe[He]===Be)return He;return-1}var et=function(fe,Be){for(var He=Object.keys(Be),pr=0;pr<He.length;++pr)fe[He[pr]]=Be[He[pr]];return fe},ct=0,ft={DynamicVariable:U,define:function(fe,Be){return new U(fe,M(Be+""))},isDynamic:function(fe){return typeof fe=="function"&&!fe._reglType||fe instanceof U},unbox:E,accessor:M},yt={next:typeof requestAnimationFrame=="function"?function(fe){return requestAnimationFrame(fe)}:function(fe){return setTimeout(fe,16)},cancel:typeof cancelAnimationFrame=="function"?function(fe){return cancelAnimationFrame(fe)}:clearTimeout},xt=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},Ct=s();Ct.zero=s();var gt=function(fe,Be){var He=1;Be.ext_texture_filter_anisotropic&&(He=fe.getParameter(34047));var pr=1,Ze=1;Be.webgl_draw_buffers&&(pr=fe.getParameter(34852),Ze=fe.getParameter(36063));var Xt=!!Be.oes_texture_float;if(Xt){Xt=fe.createTexture(),fe.bindTexture(3553,Xt),fe.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ie=fe.createFramebuffer();if(fe.bindFramebuffer(36160,ie),fe.framebufferTexture2D(36160,36064,3553,Xt,0),fe.bindTexture(3553,null),fe.checkFramebufferStatus(36160)!==36053)Xt=!1;else{fe.viewport(0,0,1,1),fe.clearColor(1,0,0,1),fe.clear(16384);var pe=Ct.allocType(5126,4);fe.readPixels(0,0,1,1,6408,5126,pe),fe.getError()?Xt=!1:(fe.deleteFramebuffer(ie),fe.deleteTexture(Xt),Xt=pe[0]===1),Ct.freeType(pe)}}return pe=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(pe=fe.createTexture(),ie=Ct.allocType(5121,36),fe.activeTexture(33984),fe.bindTexture(34067,pe),fe.texImage2D(34069,0,6408,3,3,0,6408,5121,ie),Ct.freeType(ie),fe.bindTexture(34067,null),fe.deleteTexture(pe),pe=!fe.getError()),{colorBits:[fe.getParameter(3410),fe.getParameter(3411),fe.getParameter(3412),fe.getParameter(3413)],depthBits:fe.getParameter(3414),stencilBits:fe.getParameter(3415),subpixelBits:fe.getParameter(3408),extensions:Object.keys(Be).filter(function(ke){return!!Be[ke]}),maxAnisotropic:He,maxDrawbuffers:pr,maxColorAttachments:Ze,pointSizeDims:fe.getParameter(33901),lineWidthDims:fe.getParameter(33902),maxViewportDims:fe.getParameter(3386),maxCombinedTextureUnits:fe.getParameter(35661),maxCubeMapSize:fe.getParameter(34076),maxRenderbufferSize:fe.getParameter(34024),maxTextureUnits:fe.getParameter(34930),maxTextureSize:fe.getParameter(3379),maxAttributes:fe.getParameter(34921),maxVertexUniforms:fe.getParameter(36347),maxVertexTextureUnits:fe.getParameter(35660),maxVaryingVectors:fe.getParameter(36348),maxFragmentUniforms:fe.getParameter(36349),glsl:fe.getParameter(35724),renderer:fe.getParameter(7937),vendor:fe.getParameter(7936),version:fe.getParameter(7938),readFloat:Xt,npotTextureCube:pe}},mt=function(fe){return fe instanceof Uint8Array||fe instanceof Uint16Array||fe instanceof Uint32Array||fe instanceof Int8Array||fe instanceof Int16Array||fe instanceof Int32Array||fe instanceof Float32Array||fe instanceof Float64Array||fe instanceof Uint8ClampedArray},vt=function(fe){return Object.keys(fe).map(function(Be){return fe[Be]})},At={shape:function(fe){for(var Be=[];fe.length;fe=fe[0])Be.push(fe.length);return Be},flatten:function(fe,Be,He,pr){var Ze=1;if(Be.length)for(var Xt=0;Xt<Be.length;++Xt)Ze*=Be[Xt];else Ze=0;switch(He=pr||Ct.allocType(He,Ze),Be.length){case 0:break;case 1:for(pr=Be[0],Be=0;Be<pr;++Be)He[Be]=fe[Be];break;case 2:for(pr=Be[0],Be=Be[1],Xt=Ze=0;Xt<pr;++Xt)for(var ie=fe[Xt],pe=0;pe<Be;++pe)He[Ze++]=ie[pe];break;case 3:p(fe,Be[0],Be[1],Be[2],He,0);break;default:b(fe,Be,0,He,0)}return He}},Ot={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},It={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},St={dynamic:35048,stream:35040,static:35044},Bt=At.flatten,re=At.shape,Yt=[];Yt[5120]=1,Yt[5122]=2,Yt[5124]=4,Yt[5121]=1,Yt[5123]=2,Yt[5125]=4,Yt[5126]=4;var he={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Zt=new Float32Array(1),ae=new Uint32Array(Zt.buffer),oe=[9984,9986,9985,9987],ce=[0,6409,6410,6407,6408],ue={};ue[6409]=ue[6406]=ue[6402]=1,ue[34041]=ue[6410]=2,ue[6407]=ue[35904]=3,ue[6408]=ue[35906]=4;var ye=y("HTMLCanvasElement"),Tt=y("OffscreenCanvas"),Ft=y("CanvasRenderingContext2D"),$t=y("ImageBitmap"),Vt=y("HTMLImageElement"),Nt=y("HTMLVideoElement"),Mt=Object.keys(Ot).concat([ye,Tt,Ft,$t,Vt,Nt]),Et=[];Et[5121]=1,Et[5126]=4,Et[36193]=2,Et[5123]=2,Et[5125]=4;var Dt=[];Dt[32854]=2,Dt[32855]=2,Dt[36194]=2,Dt[34041]=4,Dt[33776]=.5,Dt[33777]=.5,Dt[33778]=1,Dt[33779]=1,Dt[35986]=.5,Dt[35987]=1,Dt[34798]=1,Dt[35840]=.5,Dt[35841]=.25,Dt[35842]=.5,Dt[35843]=.25,Dt[36196]=.5;var dt=[];dt[32854]=2,dt[32855]=2,dt[36194]=2,dt[33189]=2,dt[36168]=1,dt[34041]=4,dt[35907]=4,dt[34836]=16,dt[34842]=8,dt[34843]=6;var ht=function(fe,Be,He,pr,Ze){function Xt(Re){this.id=Ce++,this.refCount=1,this.renderbuffer=Re,this.format=32854,this.height=this.width=0,Ze.profile&&(this.stats={size:0})}function ie(Re){var be=Re.renderbuffer;fe.bindRenderbuffer(36161,null),fe.deleteRenderbuffer(be),Re.renderbuffer=null,Re.refCount=0,delete Fe[Re.id],pr.renderbufferCount--}var pe={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Be.ext_srgb&&(pe.srgba=35907),Be.ext_color_buffer_half_float&&(pe.rgba16f=34842,pe.rgb16f=34843),Be.webgl_color_buffer_float&&(pe.rgba32f=34836);var ke=[];Object.keys(pe).forEach(function(Re){ke[pe[Re]]=Re});var Ce=0,Fe={};return Xt.prototype.decRef=function(){0>=--this.refCount&&ie(this)},Ze.profile&&(pr.getTotalRenderbufferSize=function(){var Re=0;return Object.keys(Fe).forEach(function(be){Re+=Fe[be].stats.size}),Re}),{create:function(Re,be){function Ge(or,sr){var zt=0,Ut=0,Me=32854;if(typeof or=="object"&&or?("shape"in or?(Ut=or.shape,zt=Ut[0]|0,Ut=Ut[1]|0):("radius"in or&&(zt=Ut=or.radius|0),"width"in or&&(zt=or.width|0),"height"in or&&(Ut=or.height|0)),"format"in or&&(Me=pe[or.format])):typeof or=="number"?(zt=or|0,Ut=typeof sr=="number"?sr|0:zt):or||(zt=Ut=1),zt!==Ke.width||Ut!==Ke.height||Me!==Ke.format)return Ge.width=Ke.width=zt,Ge.height=Ke.height=Ut,Ke.format=Me,fe.bindRenderbuffer(36161,Ke.renderbuffer),fe.renderbufferStorage(36161,Me,zt,Ut),Ze.profile&&(Ke.stats.size=dt[Ke.format]*Ke.width*Ke.height),Ge.format=ke[Ke.format],Ge}var Ke=new Xt(fe.createRenderbuffer());return Fe[Ke.id]=Ke,pr.renderbufferCount++,Ge(Re,be),Ge.resize=function(or,sr){var zt=or|0,Ut=sr|0||zt;return zt===Ke.width&&Ut===Ke.height||(Ge.width=Ke.width=zt,Ge.height=Ke.height=Ut,fe.bindRenderbuffer(36161,Ke.renderbuffer),fe.renderbufferStorage(36161,Ke.format,zt,Ut),Ze.profile&&(Ke.stats.size=dt[Ke.format]*Ke.width*Ke.height)),Ge},Ge._reglType="renderbuffer",Ge._renderbuffer=Ke,Ze.profile&&(Ge.stats=Ke.stats),Ge.destroy=function(){Ke.decRef()},Ge},clear:function(){vt(Fe).forEach(ie)},restore:function(){vt(Fe).forEach(function(Re){Re.renderbuffer=fe.createRenderbuffer(),fe.bindRenderbuffer(36161,Re.renderbuffer),fe.renderbufferStorage(36161,Re.format,Re.width,Re.height)}),fe.bindRenderbuffer(36161,null)}}},bt=[];bt[6408]=4,bt[6407]=3;var Pt=[];Pt[5121]=1,Pt[5126]=4,Pt[36193]=2;var Gt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],te=["x","y","z","w"],ne="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),je={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ne={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},ge={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},_e={cw:2304,ccw:2305},De=new V(!1,!1,!1,function(){}),hr=function(fe,Be){function He(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function pr(Fe,Re,be){var Ge=ie.pop()||new He;Ge.startQueryIndex=Fe,Ge.endQueryIndex=Re,Ge.sum=0,Ge.stats=be,pe.push(Ge)}if(!Be.ext_disjoint_timer_query)return null;var Ze=[],Xt=[],ie=[],pe=[],ke=[],Ce=[];return{beginQuery:function(Fe){var Re=Ze.pop()||Be.ext_disjoint_timer_query.createQueryEXT();Be.ext_disjoint_timer_query.beginQueryEXT(35007,Re),Xt.push(Re),pr(Xt.length-1,Xt.length,Fe)},endQuery:function(){Be.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:pr,update:function(){var Fe,Re;if(Fe=Xt.length,Fe!==0){Ce.length=Math.max(Ce.length,Fe+1),ke.length=Math.max(ke.length,Fe+1),ke[0]=0;var be=Ce[0]=0;for(Re=Fe=0;Re<Xt.length;++Re){var Ge=Xt[Re];Be.ext_disjoint_timer_query.getQueryObjectEXT(Ge,34919)?(be+=Be.ext_disjoint_timer_query.getQueryObjectEXT(Ge,34918),Ze.push(Ge)):Xt[Fe++]=Ge,ke[Re+1]=be,Ce[Re+1]=Fe}for(Xt.length=Fe,Re=Fe=0;Re<pe.length;++Re){var be=pe[Re],Ke=be.startQueryIndex,Ge=be.endQueryIndex;be.sum+=ke[Ge]-ke[Ke],Ke=Ce[Ke],Ge=Ce[Ge],Ge===Ke?(be.stats.gpuTime+=be.sum/1e6,ie.push(be)):(be.startQueryIndex=Ke,be.endQueryIndex=Ge,pe[Fe++]=be)}pe.length=Fe}},getNumPendingQueries:function(){return Xt.length},clear:function(){Ze.push.apply(Ze,Xt);for(var Fe=0;Fe<Ze.length;Fe++)Be.ext_disjoint_timer_query.deleteQueryEXT(Ze[Fe]);Xt.length=0,Ze.length=0},restore:function(){Xt.length=0,Ze.length=0}}};return function(fe){function Be(){if(yn.length===0)Me&&Me.update(),Nr=null;else{Nr=yt.next(Be),Fe();for(var fn=yn.length-1;0<=fn;--fn){var on=yn[fn];on&&on(Qe,null,0)}Ge.flush(),Me&&Me.update()}}function He(){!Nr&&0<yn.length&&(Nr=yt.next(Be))}function pr(){Nr&&(yt.cancel(Be),Nr=null)}function Ze(fn){fn.preventDefault(),pr(),yr.forEach(function(on){on()})}function Xt(fn){Ge.getError(),or.restore(),lr.restore(),Oe.restore(),nr.restore(),Sr.restore(),kr.restore(),cr.restore(),Me&&Me.restore(),Mr.procs.refresh(),He(),Cr.forEach(function(on){on()})}function ie(fn){function on(an,Mn){var sn={},An={};return Object.keys(an).forEach(function(Sn){var qn=an[Sn];if(ft.isDynamic(qn))An[Sn]=ft.unbox(qn,Sn);else{if(Mn&&Array.isArray(qn)){for(var ii=0;ii<qn.length;++ii)if(ft.isDynamic(qn[ii])){An[Sn]=ft.unbox(qn,Sn);return}}sn[Sn]=qn}}),{dynamic:An,static:sn}}function In(an){for(;qr.length<an;)qr.push(null);return qr}var En=on(fn.context||{},!0),$n=on(fn.uniforms||{},!0),ri=on(fn.attributes||{},!1);fn=on(function(an){function Mn(An){if(An in sn){var Sn=sn[An];delete sn[An],Object.keys(Sn).forEach(function(qn){sn[An+"."+qn]=Sn[qn]})}}var sn=et({},an);return delete sn.uniforms,delete sn.attributes,delete sn.context,delete sn.vao,"stencil"in sn&&sn.stencil.op&&(sn.stencil.opBack=sn.stencil.opFront=sn.stencil.op,delete sn.stencil.op),Mn("blend"),Mn("depth"),Mn("cull"),Mn("stencil"),Mn("polygonOffset"),Mn("scissor"),Mn("sample"),"vao"in an&&(sn.vao=an.vao),sn}(fn),!1);var ui={gpuTime:0,cpuTime:0,count:0},ni=Mr.compile(fn,ri,$n,En,ui),zn=ni.draw,ur=ni.batch,Gr=ni.scope,qr=[];return et(function(an,Mn){var sn;if(typeof an=="function")return Gr.call(this,null,an,0);if(typeof Mn=="function")if(typeof an=="number")for(sn=0;sn<an;++sn)Gr.call(this,null,Mn,sn);else if(Array.isArray(an))for(sn=0;sn<an.length;++sn)Gr.call(this,an[sn],Mn,sn);else return Gr.call(this,an,Mn,0);else if(typeof an=="number"){if(0<an)return ur.call(this,In(an|0),an|0)}else if(Array.isArray(an)){if(an.length)return ur.call(this,an,an.length)}else return zn.call(this,an)},{stats:ui,destroy:function(){ni.destroy()}})}function pe(fn,on){var In=0;Mr.procs.poll();var En=on.color;En&&(Ge.clearColor(+En[0]||0,+En[1]||0,+En[2]||0,+En[3]||0),In|=16384),"depth"in on&&(Ge.clearDepth(+on.depth),In|=256),"stencil"in on&&(Ge.clearStencil(on.stencil|0),In|=1024),Ge.clear(In)}function ke(fn){return yn.push(fn),He(),{cancel:function(){function on(){var En=at(yn,on);yn[En]=yn[yn.length-1],--yn.length,0>=yn.length&&pr()}var In=at(yn,fn);yn[In]=on}}}function Ce(){var fn=Ur.viewport,on=Ur.scissor_box;fn[0]=fn[1]=on[0]=on[1]=0,Qe.viewportWidth=Qe.framebufferWidth=Qe.drawingBufferWidth=fn[2]=on[2]=Ge.drawingBufferWidth,Qe.viewportHeight=Qe.framebufferHeight=Qe.drawingBufferHeight=fn[3]=on[3]=Ge.drawingBufferHeight}function Fe(){Qe.tick+=1,Qe.time=be(),Ce(),Mr.procs.poll()}function Re(){nr.refresh(),Ce(),Mr.procs.refresh(),Me&&Me.update()}function be(){return(xt()-Te)/1e3}if(fe=r(fe),!fe)return null;var Ge=fe.gl,Ke=Ge.getContextAttributes();Ge.isContextLost();var or=e(Ge,fe);if(!or)return null;var rn=i(),sr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},zt=fe.cachedCode||{},Ut=or.extensions,Me=hr(Ge,Ut),Te=xt(),Je=Ge.drawingBufferWidth,qe=Ge.drawingBufferHeight,Qe={tick:0,time:0,viewportWidth:Je,viewportHeight:qe,framebufferWidth:Je,framebufferHeight:qe,drawingBufferWidth:Je,drawingBufferHeight:qe,pixelRatio:fe.pixelRatio},Je={elements:null,primitive:4,count:-1,offset:0,instances:-1},We=gt(Ge,Ut),Oe=c(Ge,sr,fe,function(fn){return cr.destroyBuffer(fn)}),rr=f(Ge,Ut,Oe,sr),cr=P(Ge,Ut,We,sr,Oe,rr,Je),lr=F(Ge,rn,sr,fe),nr=I(Ge,Ut,We,function(){Mr.procs.poll()},Qe,sr,fe),Sr=ht(Ge,Ut,We,sr,fe),kr=O(Ge,Ut,We,nr,Sr,sr),Mr=Y(Ge,rn,Ut,We,Oe,rr,nr,kr,{},cr,lr,Je,Qe,Me,zt,fe),rn=R(Ge,kr,Mr.procs.poll,Qe),Ur=Mr.next,pn=Ge.canvas,yn=[],yr=[],Cr=[],Dr=[fe.onDestroy],Nr=null;pn&&(pn.addEventListener("webglcontextlost",Ze,!1),pn.addEventListener("webglcontextrestored",Xt,!1));var $r=kr.setFBO=ie({framebuffer:ft.define.call(null,1,"framebuffer")});return Re(),Ke=et(ie,{clear:function(fn){if("framebuffer"in fn)if(fn.framebuffer&&fn.framebuffer_reglType==="framebufferCube")for(var on=0;6>on;++on)$r(et({framebuffer:fn.framebuffer.faces[on]},fn),pe);else $r(fn,pe);else pe(null,fn)},prop:ft.define.bind(null,1),context:ft.define.bind(null,2),this:ft.define.bind(null,3),draw:ie({}),buffer:function(fn){return Oe.create(fn,34962,!1,!1)},elements:function(fn){return rr.create(fn,!1)},texture:nr.create2D,cube:nr.createCube,renderbuffer:Sr.create,framebuffer:kr.create,framebufferCube:kr.createCube,vao:cr.createVAO,attributes:Ke,frame:ke,on:function(fn,on){var In;switch(fn){case"frame":return ke(on);case"lost":In=yr;break;case"restore":In=Cr;break;case"destroy":In=Dr}return In.push(on),{cancel:function(){for(var En=0;En<In.length;++En)if(In[En]===on){In[En]=In[In.length-1],In.pop();break}}}},limits:We,hasExtension:function(fn){return 0<=We.extensions.indexOf(fn.toLowerCase())},read:rn,destroy:function(){yn.length=0,pr(),pn&&(pn.removeEventListener("webglcontextlost",Ze),pn.removeEventListener("webglcontextrestored",Xt)),lr.clear(),kr.clear(),Sr.clear(),cr.clear(),nr.clear(),rr.clear(),Oe.clear(),Me&&Me.clear(),Dr.forEach(function(fn){fn()})},_gl:Ge,_refresh:Re,poll:function(){Fe(),Me&&Me.update()},now:be,stats:sr,getCachedCode:function(){return zt},preloadCachedCode:function(fn){Object.entries(fn).forEach(function(on){zt[on[0]]=on[1]})}}),fe.onDone(null,Ke),Ke}})},30456:function(Q,U,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var M=t(33576),E=M.Buffer;function i(T,v){for(var d in T)v[d]=T[d]}E.from&&E.alloc&&E.allocUnsafe&&E.allocUnsafeSlow?Q.exports=M:(i(M,U),U.Buffer=C);function C(T,v,d){return E(T,v,d)}C.prototype=Object.create(E.prototype),i(E,C),C.from=function(T,v,d){if(typeof T=="number")throw new TypeError("Argument must not be a number");return E(T,v,d)},C.alloc=function(T,v,d){if(typeof T!="number")throw new TypeError("Argument must be a number");var r=E(T);return v!==void 0?typeof d=="string"?r.fill(v,d):r.fill(v):r.fill(0),r},C.allocUnsafe=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return E(T)},C.allocUnsafeSlow=function(T){if(typeof T!="number")throw new TypeError("Argument must be a number");return M.SlowBuffer(T)}},14500:function(Q,U,t){var M=t(53664),E=t(64348),i=t(39640)(),C=t(2304),T=M("%TypeError%"),v=M("%Math.floor%");Q.exports=function(d,r){if(typeof d!="function")throw new T("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||v(r)!==r)throw new T("`length` must be a positive 32-bit integer");var e=arguments.length>2&&!!arguments[2],l=!0,n=!0;if("length"in d&&C){var s=C(d,"length");s&&!s.configurable&&(l=!1),s&&!s.writable&&(n=!1)}return(l||n||!e)&&(i?E(d,"length",r,!0,!0):E(d,"length",r)),d}},29936:function(Q,U,t){Q.exports=i;var M=t(61252).EventEmitter,E=t(6768);E(i,M),i.Readable=t(12348),i.Writable=t(11288),i.Duplex=t(15316),i.Transform=t(22477),i.PassThrough=t(27136),i.finished=t(15932),i.pipeline=t(38180),i.Stream=i;function i(){M.call(this)}i.prototype.pipe=function(C,T){var v=this;function d(p){C.writable&&C.write(p)===!1&&v.pause&&v.pause()}v.on("data",d);function r(){v.readable&&v.resume&&v.resume()}C.on("drain",r),!C._isStdio&&(!T||T.end!==!1)&&(v.on("end",l),v.on("close",n));var e=!1;function l(){e||(e=!0,C.end())}function n(){e||(e=!0,typeof C.destroy=="function"&&C.destroy())}function s(p){if(o(),M.listenerCount(this,"error")===0)throw p}v.on("error",s),C.on("error",s);function o(){v.removeListener("data",d),C.removeListener("drain",r),v.removeListener("end",l),v.removeListener("close",n),v.removeListener("error",s),C.removeListener("error",s),v.removeListener("end",o),v.removeListener("close",o),C.removeListener("close",o)}return v.on("end",o),v.on("close",o),C.on("close",o),C.emit("pipe",v),C}},92784:function(Q){function U(v,d){v.prototype=Object.create(d.prototype),v.prototype.constructor=v,v.__proto__=d}var t={};function M(v,d,r){r||(r=Error);function e(n,s,o){return typeof d=="string"?d:d(n,s,o)}var l=function(n){U(s,n);function s(o,p,b){return n.call(this,e(o,p,b))||this}return s}(r);l.prototype.name=r.name,l.prototype.code=v,t[v]=l}function E(v,d){if(Array.isArray(v)){var r=v.length;return v=v.map(function(e){return String(e)}),r>2?"one of ".concat(d," ").concat(v.slice(0,r-1).join(", "),", or ")+v[r-1]:r===2?"one of ".concat(d," ").concat(v[0]," or ").concat(v[1]):"of ".concat(d," ").concat(v[0])}else return"of ".concat(d," ").concat(String(v))}function i(v,d,r){return v.substr(!r||r<0?0:+r,d.length)===d}function C(v,d,r){return(r===void 0||r>v.length)&&(r=v.length),v.substring(r-d.length,r)===d}function T(v,d,r){return typeof r!="number"&&(r=0),r+d.length>v.length?!1:v.indexOf(d,r)!==-1}M("ERR_INVALID_OPT_VALUE",function(v,d){return'The value "'+d+'" is invalid for option "'+v+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(v,d,r){var e;typeof d=="string"&&i(d,"not ")?(e="must not be",d=d.replace(/^not /,"")):e="must be";var l;if(C(v," argument"))l="The ".concat(v," ").concat(e," ").concat(E(d,"type"));else{var n=T(v,".")?"property":"argument";l='The "'.concat(v,'" ').concat(n," ").concat(e," ").concat(E(d,"type"))}return l+=". Received type ".concat(typeof r),l},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Q.exports.i=t},15316:function(Q,U,t){var M=t(4168),E=Object.keys||function(n){var s=[];for(var o in n)s.push(o);return s};Q.exports=r;var i=t(12348),C=t(11288);t(6768)(r,i);for(var T=E(C.prototype),v=0;v<T.length;v++){var d=T[v];r.prototype[d]||(r.prototype[d]=C.prototype[d])}function r(n){if(!(this instanceof r))return new r(n);i.call(this,n),C.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",e)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function e(){this._writableState.ended||M.nextTick(l,this)}function l(n){n.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},27136:function(Q,U,t){Q.exports=E;var M=t(22477);t(6768)(E,M);function E(i){if(!(this instanceof E))return new E(i);M.call(this,i)}E.prototype._transform=function(i,C,T){T(null,i)}},12348:function(Q,U,t){var M=t(4168);Q.exports=m;var E;m.ReadableState=u,t(61252).EventEmitter;var i=function(H,Y){return H.listeners(Y).length},C=t(4776),T=t(33576).Buffer,v=t.g.Uint8Array||function(){};function d(H){return T.from(H)}function r(H){return T.isBuffer(H)||H instanceof v}var e=t(19768),l;e&&e.debuglog?l=e.debuglog("stream"):l=function(){};var n=t(47264),s=t(55324),o=t(24888),p=o.getHighWaterMark,b=t(92784).i,h=b.ERR_INVALID_ARG_TYPE,_=b.ERR_STREAM_PUSH_AFTER_EOF,a=b.ERR_METHOD_NOT_IMPLEMENTED,c=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,f,x,k;t(6768)(m,C);var y=s.errorOrDestroy,A=["error","close","destroy","pause","resume"];function L(H,Y,at){if(typeof H.prependListener=="function")return H.prependListener(Y,at);!H._events||!H._events[Y]?H.on(Y,at):Array.isArray(H._events[Y])?H._events[Y].unshift(at):H._events[Y]=[at,H._events[Y]]}function u(H,Y,at){E=E||t(15316),H=H||{},typeof at!="boolean"&&(at=Y instanceof E),this.objectMode=!!H.objectMode,at&&(this.objectMode=this.objectMode||!!H.readableObjectMode),this.highWaterMark=p(this,H,"readableHighWaterMark",at),this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=H.emitClose!==!1,this.autoDestroy=!!H.autoDestroy,this.destroyed=!1,this.defaultEncoding=H.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,H.encoding&&(f||(f=t(86032).o),this.decoder=new f(H.encoding),this.encoding=H.encoding)}function m(H){if(E=E||t(15316),!(this instanceof m))return new m(H);var Y=this instanceof E;this._readableState=new u(H,this,Y),this.readable=!0,H&&(typeof H.read=="function"&&(this._read=H.read),typeof H.destroy=="function"&&(this._destroy=H.destroy)),C.call(this)}Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),m.prototype.destroy=s.destroy,m.prototype._undestroy=s.undestroy,m.prototype._destroy=function(H,Y){Y(H)},m.prototype.push=function(H,Y){var at=this._readableState,et;return at.objectMode?et=!0:typeof H=="string"&&(Y=Y||at.defaultEncoding,Y!==at.encoding&&(H=T.from(H,Y),Y=""),et=!0),S(this,H,Y,!1,et)},m.prototype.unshift=function(H){return S(this,H,null,!0,!1)};function S(H,Y,at,et,ct){l("readableAddChunk",Y);var ft=H._readableState;if(Y===null)ft.reading=!1,F(H,ft);else{var yt;if(ct||(yt=I(ft,Y)),yt)y(H,yt);else if(ft.objectMode||Y&&Y.length>0)if(typeof Y!="string"&&!ft.objectMode&&Object.getPrototypeOf(Y)!==T.prototype&&(Y=d(Y)),et)ft.endEmitted?y(H,new c):w(H,ft,Y,!0);else if(ft.ended)y(H,new _);else{if(ft.destroyed)return!1;ft.reading=!1,ft.decoder&&!at?(Y=ft.decoder.write(Y),ft.objectMode||Y.length!==0?w(H,ft,Y,!1):N(H,ft)):w(H,ft,Y,!1)}else et||(ft.reading=!1,N(H,ft))}return!ft.ended&&(ft.length<ft.highWaterMark||ft.length===0)}function w(H,Y,at,et){Y.flowing&&Y.length===0&&!Y.sync?(Y.awaitDrain=0,H.emit("data",at)):(Y.length+=Y.objectMode?1:at.length,et?Y.buffer.unshift(at):Y.buffer.push(at),Y.needReadable&&R(H)),N(H,Y)}function I(H,Y){var at;return!r(Y)&&typeof Y!="string"&&Y!==void 0&&!H.objectMode&&(at=new h("chunk",["string","Buffer","Uint8Array"],Y)),at}m.prototype.isPaused=function(){return this._readableState.flowing===!1},m.prototype.setEncoding=function(H){f||(f=t(86032).o);var Y=new f(H);this._readableState.decoder=Y,this._readableState.encoding=this._readableState.decoder.encoding;for(var at=this._readableState.buffer.head,et="";at!==null;)et+=Y.write(at.data),at=at.next;return this._readableState.buffer.clear(),et!==""&&this._readableState.buffer.push(et),this._readableState.length=et.length,this};var O=1073741824;function D(H){return H>=O?H=O:(H--,H|=H>>>1,H|=H>>>2,H|=H>>>4,H|=H>>>8,H|=H>>>16,H++),H}function P(H,Y){return H<=0||Y.length===0&&Y.ended?0:Y.objectMode?1:H!==H?Y.flowing&&Y.length?Y.buffer.head.data.length:Y.length:(H>Y.highWaterMark&&(Y.highWaterMark=D(H)),H<=Y.length?H:Y.ended?Y.length:(Y.needReadable=!0,0))}m.prototype.read=function(H){l("read",H),H=parseInt(H,10);var Y=this._readableState,at=H;if(H!==0&&(Y.emittedReadable=!1),H===0&&Y.needReadable&&((Y.highWaterMark!==0?Y.length>=Y.highWaterMark:Y.length>0)||Y.ended))return l("read: emitReadable",Y.length,Y.ended),Y.length===0&&Y.ended?V(this):R(this),null;if(H=P(H,Y),H===0&&Y.ended)return Y.length===0&&V(this),null;var et=Y.needReadable;l("need readable",et),(Y.length===0||Y.length-H<Y.highWaterMark)&&(et=!0,l("length less than watermark",et)),Y.ended||Y.reading?(et=!1,l("reading or ended",et)):et&&(l("do read"),Y.reading=!0,Y.sync=!0,Y.length===0&&(Y.needReadable=!0),this._read(Y.highWaterMark),Y.sync=!1,Y.reading||(H=P(at,Y)));var ct;return H>0?ct=$(H,Y):ct=null,ct===null?(Y.needReadable=Y.length<=Y.highWaterMark,H=0):(Y.length-=H,Y.awaitDrain=0),Y.length===0&&(Y.ended||(Y.needReadable=!0),at!==H&&Y.ended&&V(this)),ct!==null&&this.emit("data",ct),ct};function F(H,Y){if(l("onEofChunk"),!Y.ended){if(Y.decoder){var at=Y.decoder.end();at&&at.length&&(Y.buffer.push(at),Y.length+=Y.objectMode?1:at.length)}Y.ended=!0,Y.sync?R(H):(Y.needReadable=!1,Y.emittedReadable||(Y.emittedReadable=!0,B(H)))}}function R(H){var Y=H._readableState;l("emitReadable",Y.needReadable,Y.emittedReadable),Y.needReadable=!1,Y.emittedReadable||(l("emitReadable",Y.flowing),Y.emittedReadable=!0,M.nextTick(B,H))}function B(H){var Y=H._readableState;l("emitReadable_",Y.destroyed,Y.length,Y.ended),!Y.destroyed&&(Y.length||Y.ended)&&(H.emit("readable"),Y.emittedReadable=!1),Y.needReadable=!Y.flowing&&!Y.ended&&Y.length<=Y.highWaterMark,Z(H)}function N(H,Y){Y.readingMore||(Y.readingMore=!0,M.nextTick(G,H,Y))}function G(H,Y){for(;!Y.reading&&!Y.ended&&(Y.length<Y.highWaterMark||Y.flowing&&Y.length===0);){var at=Y.length;if(l("maybeReadMore read 0"),H.read(0),at===Y.length)break}Y.readingMore=!1}m.prototype._read=function(H){y(this,new a("_read()"))},m.prototype.pipe=function(H,Y){var at=this,et=this._readableState;switch(et.pipesCount){case 0:et.pipes=H;break;case 1:et.pipes=[et.pipes,H];break;default:et.pipes.push(H);break}et.pipesCount+=1,l("pipe count=%d opts=%j",et.pipesCount,Y);var ct=(!Y||Y.end!==!1)&&H!==M.stdout&&H!==M.stderr,ft=ct?xt:St;et.endEmitted?M.nextTick(ft):at.once("end",ft),H.on("unpipe",yt);function yt(Bt,re){l("onunpipe"),Bt===at&&re&&re.hasUnpiped===!1&&(re.hasUnpiped=!0,mt())}function xt(){l("onend"),H.end()}var Ct=X(at);H.on("drain",Ct);var gt=!1;function mt(){l("cleanup"),H.removeListener("close",Ot),H.removeListener("finish",It),H.removeListener("drain",Ct),H.removeListener("error",At),H.removeListener("unpipe",yt),at.removeListener("end",xt),at.removeListener("end",St),at.removeListener("data",vt),gt=!0,et.awaitDrain&&(!H._writableState||H._writableState.needDrain)&&Ct()}at.on("data",vt);function vt(Bt){l("ondata");var re=H.write(Bt);l("dest.write",re),re===!1&&((et.pipesCount===1&&et.pipes===H||et.pipesCount>1&&ot(et.pipes,H)!==-1)&&!gt&&(l("false write response, pause",et.awaitDrain),et.awaitDrain++),at.pause())}function At(Bt){l("onerror",Bt),St(),H.removeListener("error",At),i(H,"error")===0&&y(H,Bt)}L(H,"error",At);function Ot(){H.removeListener("finish",It),St()}H.once("close",Ot);function It(){l("onfinish"),H.removeListener("close",Ot),St()}H.once("finish",It);function St(){l("unpipe"),at.unpipe(H)}return H.emit("pipe",at),et.flowing||(l("pipe resume"),at.resume()),H};function X(H){return function(){var Y=H._readableState;l("pipeOnDrain",Y.awaitDrain),Y.awaitDrain&&Y.awaitDrain--,Y.awaitDrain===0&&i(H,"data")&&(Y.flowing=!0,Z(H))}}m.prototype.unpipe=function(H){var Y=this._readableState,at={hasUnpiped:!1};if(Y.pipesCount===0)return this;if(Y.pipesCount===1)return H&&H!==Y.pipes?this:(H||(H=Y.pipes),Y.pipes=null,Y.pipesCount=0,Y.flowing=!1,H&&H.emit("unpipe",this,at),this);if(!H){var et=Y.pipes,ct=Y.pipesCount;Y.pipes=null,Y.pipesCount=0,Y.flowing=!1;for(var ft=0;ft<ct;ft++)et[ft].emit("unpipe",this,{hasUnpiped:!1});return this}var yt=ot(Y.pipes,H);return yt===-1?this:(Y.pipes.splice(yt,1),Y.pipesCount-=1,Y.pipesCount===1&&(Y.pipes=Y.pipes[0]),H.emit("unpipe",this,at),this)},m.prototype.on=function(H,Y){var at=C.prototype.on.call(this,H,Y),et=this._readableState;return H==="data"?(et.readableListening=this.listenerCount("readable")>0,et.flowing!==!1&&this.resume()):H==="readable"&&!et.endEmitted&&!et.readableListening&&(et.readableListening=et.needReadable=!0,et.flowing=!1,et.emittedReadable=!1,l("on readable",et.length,et.reading),et.length?R(this):et.reading||M.nextTick(it,this)),at},m.prototype.addListener=m.prototype.on,m.prototype.removeListener=function(H,Y){var at=C.prototype.removeListener.call(this,H,Y);return H==="readable"&&M.nextTick(J,this),at},m.prototype.removeAllListeners=function(H){var Y=C.prototype.removeAllListeners.apply(this,arguments);return(H==="readable"||H===void 0)&&M.nextTick(J,this),Y};function J(H){var Y=H._readableState;Y.readableListening=H.listenerCount("readable")>0,Y.resumeScheduled&&!Y.paused?Y.flowing=!0:H.listenerCount("data")>0&&H.resume()}function it(H){l("readable nexttick read 0"),H.read(0)}m.prototype.resume=function(){var H=this._readableState;return H.flowing||(l("resume"),H.flowing=!H.readableListening,nt(this,H)),H.paused=!1,this};function nt(H,Y){Y.resumeScheduled||(Y.resumeScheduled=!0,M.nextTick(q,H,Y))}function q(H,Y){l("resume",Y.reading),Y.reading||H.read(0),Y.resumeScheduled=!1,H.emit("resume"),Z(H),Y.flowing&&!Y.reading&&H.read(0)}m.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Z(H){var Y=H._readableState;for(l("flow",Y.flowing);Y.flowing&&H.read()!==null;);}m.prototype.wrap=function(H){var Y=this,at=this._readableState,et=!1;H.on("end",function(){if(l("wrapped end"),at.decoder&&!at.ended){var yt=at.decoder.end();yt&&yt.length&&Y.push(yt)}Y.push(null)}),H.on("data",function(yt){if(l("wrapped data"),at.decoder&&(yt=at.decoder.write(yt)),!(at.objectMode&&yt==null)&&!(!at.objectMode&&(!yt||!yt.length))){var xt=Y.push(yt);xt||(et=!0,H.pause())}});for(var ct in H)this[ct]===void 0&&typeof H[ct]=="function"&&(this[ct]=function(yt){return function(){return H[yt].apply(H,arguments)}}(ct));for(var ft=0;ft<A.length;ft++)H.on(A[ft],this.emit.bind(this,A[ft]));return this._read=function(yt){l("wrapped _read",yt),et&&(et=!1,H.resume())},this},typeof Symbol=="function"&&(m.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=t(60328)),x(this)}),Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(m.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(m.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),m._fromList=$,Object.defineProperty(m.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function $(H,Y){if(Y.length===0)return null;var at;return Y.objectMode?at=Y.buffer.shift():!H||H>=Y.length?(Y.decoder?at=Y.buffer.join(""):Y.buffer.length===1?at=Y.buffer.first():at=Y.buffer.concat(Y.length),Y.buffer.clear()):at=Y.buffer.consume(H,Y.decoder),at}function V(H){var Y=H._readableState;l("endReadable",Y.endEmitted),Y.endEmitted||(Y.ended=!0,M.nextTick(rt,Y,H))}function rt(H,Y){if(l("endReadableNT",H.endEmitted,H.length),!H.endEmitted&&H.length===0&&(H.endEmitted=!0,Y.readable=!1,Y.emit("end"),H.autoDestroy)){var at=Y._writableState;(!at||at.autoDestroy&&at.finished)&&Y.destroy()}}typeof Symbol=="function"&&(m.from=function(H,Y){return k===void 0&&(k=t(90555)),k(m,H,Y)});function ot(H,Y){for(var at=0,et=H.length;at<et;at++)if(H[at]===Y)return at;return-1}},22477:function(Q,U,t){Q.exports=r;var M=t(92784).i,E=M.ERR_METHOD_NOT_IMPLEMENTED,i=M.ERR_MULTIPLE_CALLBACK,C=M.ERR_TRANSFORM_ALREADY_TRANSFORMING,T=M.ERR_TRANSFORM_WITH_LENGTH_0,v=t(15316);t(6768)(r,v);function d(n,s){var o=this._transformState;o.transforming=!1;var p=o.writecb;if(p===null)return this.emit("error",new i);o.writechunk=null,o.writecb=null,s!=null&&this.push(s),p(n);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function r(n){if(!(this instanceof r))return new r(n);v.call(this,n),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",e)}function e(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(s,o){l(n,s,o)}):l(this,null,null)}r.prototype.push=function(n,s){return this._transformState.needTransform=!1,v.prototype.push.call(this,n,s)},r.prototype._transform=function(n,s,o){o(new E("_transform()"))},r.prototype._write=function(n,s,o){var p=this._transformState;if(p.writecb=o,p.writechunk=n,p.writeencoding=s,!p.transforming){var b=this._readableState;(p.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},r.prototype._read=function(n){var s=this._transformState;s.writechunk!==null&&!s.transforming?(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform)):s.needTransform=!0},r.prototype._destroy=function(n,s){v.prototype._destroy.call(this,n,function(o){s(o)})};function l(n,s,o){if(s)return n.emit("error",s);if(o!=null&&n.push(o),n._writableState.length)throw new T;if(n._transformState.transforming)throw new C;return n.push(null)}},11288:function(Q,U,t){var M=t(4168);Q.exports=u;function E(Z){var $=this;this.next=null,this.entry=null,this.finish=function(){q($,Z)}}var i;u.WritableState=A;var C={deprecate:t(96656)},T=t(4776),v=t(33576).Buffer,d=t.g.Uint8Array||function(){};function r(Z){return v.from(Z)}function e(Z){return v.isBuffer(Z)||Z instanceof d}var l=t(55324),n=t(24888),s=n.getHighWaterMark,o=t(92784).i,p=o.ERR_INVALID_ARG_TYPE,b=o.ERR_METHOD_NOT_IMPLEMENTED,h=o.ERR_MULTIPLE_CALLBACK,_=o.ERR_STREAM_CANNOT_PIPE,a=o.ERR_STREAM_DESTROYED,c=o.ERR_STREAM_NULL_VALUES,f=o.ERR_STREAM_WRITE_AFTER_END,x=o.ERR_UNKNOWN_ENCODING,k=l.errorOrDestroy;t(6768)(u,T);function y(){}function A(Z,$,V){i=i||t(15316),Z=Z||{},typeof V!="boolean"&&(V=$ instanceof i),this.objectMode=!!Z.objectMode,V&&(this.objectMode=this.objectMode||!!Z.writableObjectMode),this.highWaterMark=s(this,Z,"writableHighWaterMark",V),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var rt=Z.decodeStrings===!1;this.decodeStrings=!rt,this.defaultEncoding=Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ot){F($,ot)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Z.emitClose!==!1,this.autoDestroy=!!Z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}A.prototype.getBuffer=function(){for(var Z=this.bufferedRequest,$=[];Z;)$.push(Z),Z=Z.next;return $},function(){try{Object.defineProperty(A.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(Z){return L.call(this,Z)?!0:this!==u?!1:Z&&Z._writableState instanceof A}})):L=function(Z){return Z instanceof this};function u(Z){i=i||t(15316);var $=this instanceof i;if(!$&&!L.call(u,this))return new u(Z);this._writableState=new A(Z,this,$),this.writable=!0,Z&&(typeof Z.write=="function"&&(this._write=Z.write),typeof Z.writev=="function"&&(this._writev=Z.writev),typeof Z.destroy=="function"&&(this._destroy=Z.destroy),typeof Z.final=="function"&&(this._final=Z.final)),T.call(this)}u.prototype.pipe=function(){k(this,new _)};function m(Z,$){var V=new f;k(Z,V),M.nextTick($,V)}function S(Z,$,V,rt){var ot;return V===null?ot=new c:typeof V!="string"&&!$.objectMode&&(ot=new p("chunk",["string","Buffer"],V)),ot?(k(Z,ot),M.nextTick(rt,ot),!1):!0}u.prototype.write=function(Z,$,V){var rt=this._writableState,ot=!1,H=!rt.objectMode&&e(Z);return H&&!v.isBuffer(Z)&&(Z=r(Z)),typeof $=="function"&&(V=$,$=null),H?$="buffer":$||($=rt.defaultEncoding),typeof V!="function"&&(V=y),rt.ending?m(this,V):(H||S(this,rt,Z,V))&&(rt.pendingcb++,ot=I(this,rt,H,Z,$,V)),ot},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var Z=this._writableState;Z.corked&&(Z.corked--,!Z.writing&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&N(this,Z))},u.prototype.setDefaultEncoding=function(Z){if(typeof Z=="string"&&(Z=Z.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Z+"").toLowerCase())>-1))throw new x(Z);return this._writableState.defaultEncoding=Z,this},Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function w(Z,$,V){return!Z.objectMode&&Z.decodeStrings!==!1&&typeof $=="string"&&($=v.from($,V)),$}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(Z,$,V,rt,ot,H){if(!V){var Y=w($,rt,ot);rt!==Y&&(V=!0,ot="buffer",rt=Y)}var at=$.objectMode?1:rt.length;$.length+=at;var et=$.length<$.highWaterMark;if(et||($.needDrain=!0),$.writing||$.corked){var ct=$.lastBufferedRequest;$.lastBufferedRequest={chunk:rt,encoding:ot,isBuf:V,callback:H,next:null},ct?ct.next=$.lastBufferedRequest:$.bufferedRequest=$.lastBufferedRequest,$.bufferedRequestCount+=1}else O(Z,$,!1,at,rt,ot,H);return et}function O(Z,$,V,rt,ot,H,Y){$.writelen=rt,$.writecb=Y,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new a("write")):V?Z._writev(ot,$.onwrite):Z._write(ot,H,$.onwrite),$.sync=!1}function D(Z,$,V,rt,ot){--$.pendingcb,V?(M.nextTick(ot,rt),M.nextTick(it,Z,$),Z._writableState.errorEmitted=!0,k(Z,rt)):(ot(rt),Z._writableState.errorEmitted=!0,k(Z,rt),it(Z,$))}function P(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}function F(Z,$){var V=Z._writableState,rt=V.sync,ot=V.writecb;if(typeof ot!="function")throw new h;if(P(V),$)D(Z,V,rt,$,ot);else{var H=G(V)||Z.destroyed;!H&&!V.corked&&!V.bufferProcessing&&V.bufferedRequest&&N(Z,V),rt?M.nextTick(R,Z,V,H,ot):R(Z,V,H,ot)}}function R(Z,$,V,rt){V||B(Z,$),$.pendingcb--,rt(),it(Z,$)}function B(Z,$){$.length===0&&$.needDrain&&($.needDrain=!1,Z.emit("drain"))}function N(Z,$){$.bufferProcessing=!0;var V=$.bufferedRequest;if(Z._writev&&V&&V.next){var rt=$.bufferedRequestCount,ot=new Array(rt),H=$.corkedRequestsFree;H.entry=V;for(var Y=0,at=!0;V;)ot[Y]=V,V.isBuf||(at=!1),V=V.next,Y+=1;ot.allBuffers=at,O(Z,$,!0,$.length,ot,"",H.finish),$.pendingcb++,$.lastBufferedRequest=null,H.next?($.corkedRequestsFree=H.next,H.next=null):$.corkedRequestsFree=new E($),$.bufferedRequestCount=0}else{for(;V;){var et=V.chunk,ct=V.encoding,ft=V.callback,yt=$.objectMode?1:et.length;if(O(Z,$,!1,yt,et,ct,ft),V=V.next,$.bufferedRequestCount--,$.writing)break}V===null&&($.lastBufferedRequest=null)}$.bufferedRequest=V,$.bufferProcessing=!1}u.prototype._write=function(Z,$,V){V(new b("_write()"))},u.prototype._writev=null,u.prototype.end=function(Z,$,V){var rt=this._writableState;return typeof Z=="function"?(V=Z,Z=null,$=null):typeof $=="function"&&(V=$,$=null),Z!=null&&this.write(Z,$),rt.corked&&(rt.corked=1,this.uncork()),rt.ending||nt(this,rt,V),this},Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function G(Z){return Z.ending&&Z.length===0&&Z.bufferedRequest===null&&!Z.finished&&!Z.writing}function X(Z,$){Z._final(function(V){$.pendingcb--,V&&k(Z,V),$.prefinished=!0,Z.emit("prefinish"),it(Z,$)})}function J(Z,$){!$.prefinished&&!$.finalCalled&&(typeof Z._final=="function"&&!$.destroyed?($.pendingcb++,$.finalCalled=!0,M.nextTick(X,Z,$)):($.prefinished=!0,Z.emit("prefinish")))}function it(Z,$){var V=G($);if(V&&(J(Z,$),$.pendingcb===0&&($.finished=!0,Z.emit("finish"),$.autoDestroy))){var rt=Z._readableState;(!rt||rt.autoDestroy&&rt.endEmitted)&&Z.destroy()}return V}function nt(Z,$,V){$.ending=!0,it(Z,$),V&&($.finished?M.nextTick(V):Z.once("finish",V)),$.ended=!0,Z.writable=!1}function q(Z,$,V){var rt=Z.entry;for(Z.entry=null;rt;){var ot=rt.callback;$.pendingcb--,ot(V),rt=rt.next}$.corkedRequestsFree.next=Z}Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Z){this._writableState&&(this._writableState.destroyed=Z)}}),u.prototype.destroy=l.destroy,u.prototype._undestroy=l.undestroy,u.prototype._destroy=function(Z,$){$(Z)}},60328:function(Q,U,t){var M=t(4168),E;function i(c,f,x){return f in c?Object.defineProperty(c,f,{value:x,enumerable:!0,configurable:!0,writable:!0}):c[f]=x,c}var C=t(15932),T=Symbol("lastResolve"),v=Symbol("lastReject"),d=Symbol("error"),r=Symbol("ended"),e=Symbol("lastPromise"),l=Symbol("handlePromise"),n=Symbol("stream");function s(c,f){return{value:c,done:f}}function o(c){var f=c[T];if(f!==null){var x=c[n].read();x!==null&&(c[e]=null,c[T]=null,c[v]=null,f(s(x,!1)))}}function p(c){M.nextTick(o,c)}function b(c,f){return function(x,k){c.then(function(){if(f[r]){x(s(void 0,!0));return}f[l](x,k)},k)}}var h=Object.getPrototypeOf(function(){}),_=Object.setPrototypeOf((E={get stream(){return this[n]},next:function(){var c=this,f=this[d];if(f!==null)return Promise.reject(f);if(this[r])return Promise.resolve(s(void 0,!0));if(this[n].destroyed)return new Promise(function(A,L){M.nextTick(function(){c[d]?L(c[d]):A(s(void 0,!0))})});var x=this[e],k;if(x)k=new Promise(b(x,this));else{var y=this[n].read();if(y!==null)return Promise.resolve(s(y,!1));k=new Promise(this[l])}return this[e]=k,k}},i(E,Symbol.asyncIterator,function(){return this}),i(E,"return",function(){var c=this;return new Promise(function(f,x){c[n].destroy(null,function(k){if(k){x(k);return}f(s(void 0,!0))})})}),E),h),a=function(c){var f,x=Object.create(_,(f={},i(f,n,{value:c,writable:!0}),i(f,T,{value:null,writable:!0}),i(f,v,{value:null,writable:!0}),i(f,d,{value:null,writable:!0}),i(f,r,{value:c._readableState.endEmitted,writable:!0}),i(f,l,{value:function(k,y){var A=x[n].read();A?(x[e]=null,x[T]=null,x[v]=null,k(s(A,!1))):(x[T]=k,x[v]=y)},writable:!0}),f));return x[e]=null,C(c,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=x[v];y!==null&&(x[e]=null,x[T]=null,x[v]=null,y(k)),x[d]=k;return}var A=x[T];A!==null&&(x[e]=null,x[T]=null,x[v]=null,A(s(void 0,!0))),x[r]=!0}),c.on("readable",p.bind(null,x)),x};Q.exports=a},47264:function(Q,U,t){function M(o,p){var b=Object.keys(o);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(o);p&&(h=h.filter(function(_){return Object.getOwnPropertyDescriptor(o,_).enumerable})),b.push.apply(b,h)}return b}function E(o){for(var p=1;p<arguments.length;p++){var b=arguments[p]!=null?arguments[p]:{};p%2?M(Object(b),!0).forEach(function(h){i(o,h,b[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(b)):M(Object(b)).forEach(function(h){Object.defineProperty(o,h,Object.getOwnPropertyDescriptor(b,h))})}return o}function i(o,p,b){return p in o?Object.defineProperty(o,p,{value:b,enumerable:!0,configurable:!0,writable:!0}):o[p]=b,o}function C(o,p){if(!(o instanceof p))throw new TypeError("Cannot call a class as a function")}function T(o,p){for(var b=0;b<p.length;b++){var h=p[b];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(o,h.key,h)}}function v(o,p,b){return p&&T(o.prototype,p),b&&T(o,b),o}var d=t(33576),r=d.Buffer,e=t(21576),l=e.inspect,n=l&&l.custom||"inspect";function s(o,p,b){r.prototype.copy.call(o,p,b)}Q.exports=function(){function o(){C(this,o),this.head=null,this.tail=null,this.length=0}return v(o,[{key:"push",value:function(p){var b={data:p,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(p){var b={data:p,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var b=this.head,h=""+b.data;b=b.next;)h+=p+b.data;return h}},{key:"concat",value:function(p){if(this.length===0)return r.alloc(0);for(var b=r.allocUnsafe(p>>>0),h=this.head,_=0;h;)s(h.data,b,_),_+=h.data.length,h=h.next;return b}},{key:"consume",value:function(p,b){var h;return p<this.head.data.length?(h=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?h=this.shift():h=b?this._getString(p):this._getBuffer(p),h}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var b=this.head,h=1,_=b.data;for(p-=_.length;b=b.next;){var a=b.data,c=p>a.length?a.length:p;if(c===a.length?_+=a:_+=a.slice(0,p),p-=c,p===0){c===a.length?(++h,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=a.slice(c));break}++h}return this.length-=h,_}},{key:"_getBuffer",value:function(p){var b=r.allocUnsafe(p),h=this.head,_=1;for(h.data.copy(b),p-=h.data.length;h=h.next;){var a=h.data,c=p>a.length?a.length:p;if(a.copy(b,b.length-p,0,c),p-=c,p===0){c===a.length?(++_,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=a.slice(c));break}++_}return this.length-=_,b}},{key:n,value:function(p,b){return l(this,E({},b,{depth:0,customInspect:!1}))}}]),o}()},55324:function(Q,U,t){var M=t(4168);function E(r,e){var l=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,M.nextTick(v,this,r)):M.nextTick(v,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(o){!e&&o?l._writableState?l._writableState.errorEmitted?M.nextTick(C,l):(l._writableState.errorEmitted=!0,M.nextTick(i,l,o)):M.nextTick(i,l,o):e?(M.nextTick(C,l),e(o)):M.nextTick(C,l)}),this)}function i(r,e){v(r,e),C(r)}function C(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function T(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function v(r,e){r.emit("error",e)}function d(r,e){var l=r._readableState,n=r._writableState;l&&l.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}Q.exports={destroy:E,undestroy:T,errorOrDestroy:d}},15932:function(Q,U,t){var M=t(92784).i.ERR_STREAM_PREMATURE_CLOSE;function E(v){var d=!1;return function(){if(!d){d=!0;for(var r=arguments.length,e=new Array(r),l=0;l<r;l++)e[l]=arguments[l];v.apply(this,e)}}}function i(){}function C(v){return v.setHeader&&typeof v.abort=="function"}function T(v,d,r){if(typeof d=="function")return T(v,null,d);d||(d={}),r=E(r||i);var e=d.readable||d.readable!==!1&&v.readable,l=d.writable||d.writable!==!1&&v.writable,n=function(){v.writable||o()},s=v._writableState&&v._writableState.finished,o=function(){l=!1,s=!0,e||r.call(v)},p=v._readableState&&v._readableState.endEmitted,b=function(){e=!1,p=!0,l||r.call(v)},h=function(c){r.call(v,c)},_=function(){var c;if(e&&!p)return(!v._readableState||!v._readableState.ended)&&(c=new M),r.call(v,c);if(l&&!s)return(!v._writableState||!v._writableState.ended)&&(c=new M),r.call(v,c)},a=function(){v.req.on("finish",o)};return C(v)?(v.on("complete",o),v.on("abort",_),v.req?a():v.on("request",a)):l&&!v._writableState&&(v.on("end",n),v.on("close",n)),v.on("end",b),v.on("finish",o),d.error!==!1&&v.on("error",h),v.on("close",_),function(){v.removeListener("complete",o),v.removeListener("abort",_),v.removeListener("request",a),v.req&&v.req.removeListener("finish",o),v.removeListener("end",n),v.removeListener("close",n),v.removeListener("finish",o),v.removeListener("end",b),v.removeListener("error",h),v.removeListener("close",_)}}Q.exports=T},90555:function(Q){Q.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(Q,U,t){var M;function E(o){var p=!1;return function(){p||(p=!0,o.apply(void 0,arguments))}}var i=t(92784).i,C=i.ERR_MISSING_ARGS,T=i.ERR_STREAM_DESTROYED;function v(o){if(o)throw o}function d(o){return o.setHeader&&typeof o.abort=="function"}function r(o,p,b,h){h=E(h);var _=!1;o.on("close",function(){_=!0}),M===void 0&&(M=t(15932)),M(o,{readable:p,writable:b},function(c){if(c)return h(c);_=!0,h()});var a=!1;return function(c){if(!_&&!a){if(a=!0,d(o))return o.abort();if(typeof o.destroy=="function")return o.destroy();h(c||new T("pipe"))}}}function e(o){o()}function l(o,p){return o.pipe(p)}function n(o){return!o.length||typeof o[o.length-1]!="function"?v:o.pop()}function s(){for(var o=arguments.length,p=new Array(o),b=0;b<o;b++)p[b]=arguments[b];var h=n(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new C("streams");var _,a=p.map(function(c,f){var x=f<p.length-1,k=f>0;return r(c,x,k,function(y){_||(_=y),y&&a.forEach(e),!x&&(a.forEach(e),h(_))})});return p.reduce(l)}Q.exports=s},24888:function(Q,U,t){var M=t(92784).i.ERR_INVALID_OPT_VALUE;function E(C,T,v){return C.highWaterMark!=null?C.highWaterMark:T?C[v]:null}function i(C,T,v,d){var r=E(T,d,v);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var e=d?v:"highWaterMark";throw new M(e,r)}return Math.floor(r)}return C.objectMode?16:16384}Q.exports={getHighWaterMark:i}},4776:function(Q,U,t){Q.exports=t(61252).EventEmitter},86032:function(Q,U,t){var M=t(30456).Buffer,E=M.isEncoding||function(a){switch(a=""+a,a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(a){if(!a)return"utf8";for(var c;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(c)return;a=(""+a).toLowerCase(),c=!0}}function C(a){var c=i(a);if(typeof c!="string"&&(M.isEncoding===E||!E(a)))throw new Error("Unknown encoding: "+a);return c||a}U.o=T;function T(a){this.encoding=C(a);var c;switch(this.encoding){case"utf16le":this.text=s,this.end=o,c=4;break;case"utf8":this.fillLast=e,c=4;break;case"base64":this.text=p,this.end=b,c=3;break;default:this.write=h,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=M.allocUnsafe(c)}T.prototype.write=function(a){if(a.length===0)return"";var c,f;if(this.lastNeed){if(c=this.fillLast(a),c===void 0)return"";f=this.lastNeed,this.lastNeed=0}else f=0;return f<a.length?c?c+this.text(a,f):this.text(a,f):c||""},T.prototype.end=n,T.prototype.text=l,T.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length};function v(a){return a<=127?0:a>>5===6?2:a>>4===14?3:a>>3===30?4:a>>6===2?-1:-2}function d(a,c,f){var x=c.length-1;if(x<f)return 0;var k=v(c[x]);return k>=0?(k>0&&(a.lastNeed=k-1),k):--x<f||k===-2?0:(k=v(c[x]),k>=0?(k>0&&(a.lastNeed=k-2),k):--x<f||k===-2?0:(k=v(c[x]),k>=0?(k>0&&(k===2?k=0:a.lastNeed=k-3),k):0))}function r(a,c,f){if((c[0]&192)!==128)return a.lastNeed=0,"\uFFFD";if(a.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return a.lastNeed=1,"\uFFFD";if(a.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return a.lastNeed=2,"\uFFFD"}}function e(a){var c=this.lastTotal-this.lastNeed,f=r(this,a);if(f!==void 0)return f;if(this.lastNeed<=a.length)return a.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,c,0,a.length),this.lastNeed-=a.length}function l(a,c){var f=d(this,a,c);if(!this.lastNeed)return a.toString("utf8",c);this.lastTotal=f;var x=a.length-(f-this.lastNeed);return a.copy(this.lastChar,0,x),a.toString("utf8",c,x)}function n(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+"\uFFFD":c}function s(a,c){if((a.length-c)%2===0){var f=a.toString("utf16le",c);if(f){var x=f.charCodeAt(f.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],f.slice(0,-1)}return f}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",c,a.length-1)}function o(a){var c=a&&a.length?this.write(a):"";if(this.lastNeed){var f=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,f)}return c}function p(a,c){var f=(a.length-c)%3;return f===0?a.toString("base64",c):(this.lastNeed=3-f,this.lastTotal=3,f===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",c,a.length-f))}function b(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function h(a){return a.toString(this.encoding)}function _(a){return a&&a.length?this.write(a):""}},55619:function(Q,U,t){var M=t(45408),E=t(86844)("stream-parser");Q.exports=d;var i=-1,C=0,T=1,v=2;function d(a){var c=a&&typeof a._transform=="function",f=a&&typeof a._write=="function";if(!c&&!f)throw new Error("must pass a Writable or Transform stream in");E("extending Parser into stream"),a._bytes=e,a._skipBytes=l,c&&(a._passthrough=n),c?a._transform=o:a._write=s}function r(a){E("initializing parser stream"),a._parserBytesLeft=0,a._parserBuffers=[],a._parserBuffered=0,a._parserState=i,a._parserCallback=null,typeof a.push=="function"&&(a._parserOutput=a.push.bind(a)),a._parserInit=!0}function e(a,c){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(a)&&a>0,'can only buffer a finite number of bytes > 0, got "'+a+'"'),this._parserInit||r(this),E("buffering %o bytes",a),this._parserBytesLeft=a,this._parserCallback=c,this._parserState=C}function l(a,c){M(!this._parserCallback,'there is already a "callback" set!'),M(a>0,'can only skip > 0 bytes, got "'+a+'"'),this._parserInit||r(this),E("skipping %o bytes",a),this._parserBytesLeft=a,this._parserCallback=c,this._parserState=T}function n(a,c){M(!this._parserCallback,'There is already a "callback" set!'),M(a>0,'can only pass through > 0 bytes, got "'+a+'"'),this._parserInit||r(this),E("passing through %o bytes",a),this._parserBytesLeft=a,this._parserCallback=c,this._parserState=v}function s(a,c,f){this._parserInit||r(this),E("write(%o bytes)",a.length),typeof c=="function"&&(f=c),h(this,a,null,f)}function o(a,c,f){this._parserInit||r(this),E("transform(%o bytes)",a.length),typeof c!="function"&&(c=this._parserOutput),h(this,a,c,f)}function p(a,c,f,x){return a._parserBytesLeft<=0?x(new Error("got data but not currently parsing anything")):c.length<=a._parserBytesLeft?function(){return b(a,c,f,x)}:function(){var k=c.slice(0,a._parserBytesLeft);return b(a,k,f,function(y){if(y)return x(y);if(c.length>k.length)return function(){return p(a,c.slice(k.length),f,x)}})}}function b(a,c,f,x){if(a._parserBytesLeft-=c.length,E("%o bytes left for stream piece",a._parserBytesLeft),a._parserState===C?(a._parserBuffers.push(c),a._parserBuffered+=c.length):a._parserState===v&&f(c),a._parserBytesLeft===0){var k=a._parserCallback;if(k&&a._parserState===C&&a._parserBuffers.length>1&&(c=Buffer.concat(a._parserBuffers,a._parserBuffered)),a._parserState!==C&&(c=null),a._parserCallback=null,a._parserBuffered=0,a._parserState=i,a._parserBuffers.splice(0),k){var y=[];c&&y.push(c),f&&y.push(f);var A=k.length>y.length;A&&y.push(_(x));var L=k.apply(a,y);if(!A||x===L)return x}}else return x}var h=_(p);function _(a){return function(){for(var c=a.apply(this,arguments);typeof c=="function";)c=c();return c}}},86844:function(Q,U,t){var M=t(4168);U=Q.exports=t(89416),U.log=C,U.formatArgs=i,U.save=T,U.load=v,U.useColors=E,U.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:d(),U.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function E(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}U.formatters.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function i(r){var e=this.useColors;if(r[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+r[0]+(e?"%c ":" ")+"+"+U.humanize(this.diff),!!e){var l="color: "+this.color;r.splice(1,0,l,"color: inherit");var n=0,s=0;r[0].replace(/%[a-zA-Z%]/g,function(o){o!=="%%"&&(n++,o==="%c"&&(s=n))}),r.splice(s,0,l)}}function C(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function T(r){try{r==null?U.storage.removeItem("debug"):U.storage.debug=r}catch{}}function v(){var r;try{r=U.storage.debug}catch{}return!r&&typeof M<"u"&&"env"in M&&(r=M.env.DEBUG),r}U.enable(v());function d(){try{return window.localStorage}catch{}}},89416:function(Q,U,t){U=Q.exports=i.debug=i.default=i,U.coerce=d,U.disable=T,U.enable=C,U.enabled=v,U.humanize=t(93744),U.names=[],U.skips=[],U.formatters={};var M;function E(r){var e=0,l;for(l in r)e=(e<<5)-e+r.charCodeAt(l),e|=0;return U.colors[Math.abs(e)%U.colors.length]}function i(r){function e(){if(e.enabled){var l=e,n=+new Date,s=n-(M||n);l.diff=s,l.prev=M,l.curr=n,M=n;for(var o=new Array(arguments.length),p=0;p<o.length;p++)o[p]=arguments[p];o[0]=U.coerce(o[0]),typeof o[0]!="string"&&o.unshift("%O");var b=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(_,a){if(_==="%%")return _;b++;var c=U.formatters[a];if(typeof c=="function"){var f=o[b];_=c.call(l,f),o.splice(b,1),b--}return _}),U.formatArgs.call(l,o);var h=e.log||U.log||console.log.bind(console);h.apply(l,o)}}return e.namespace=r,e.enabled=U.enabled(r),e.useColors=U.useColors(),e.color=E(r),typeof U.init=="function"&&U.init(e),e}function C(r){U.save(r),U.names=[],U.skips=[];for(var e=(typeof r=="string"?r:"").split(/[\s,]+/),l=e.length,n=0;n<l;n++)e[n]&&(r=e[n].replace(/\*/g,".*?"),r[0]==="-"?U.skips.push(new RegExp("^"+r.substr(1)+"$")):U.names.push(new RegExp("^"+r+"$")))}function T(){U.enable("")}function v(r){var e,l;for(e=0,l=U.skips.length;e<l;e++)if(U.skips[e].test(r))return!1;for(e=0,l=U.names.length;e<l;e++)if(U.names[e].test(r))return!0;return!1}function d(r){return r instanceof Error?r.stack||r.message:r}},93744:function(Q){var U=1e3,t=U*60,M=t*60,E=M*24,i=E*365.25;Q.exports=function(r,e){e=e||{};var l=typeof r;if(l==="string"&&r.length>0)return C(r);if(l==="number"&&isNaN(r)===!1)return e.long?v(r):T(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function C(r){if(r=String(r),!(r.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(e){var l=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return l*i;case"days":case"day":case"d":return l*E;case"hours":case"hour":case"hrs":case"hr":case"h":return l*M;case"minutes":case"minute":case"mins":case"min":case"m":return l*t;case"seconds":case"second":case"secs":case"sec":case"s":return l*U;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function T(r){return r>=E?Math.round(r/E)+"d":r>=M?Math.round(r/M)+"h":r>=t?Math.round(r/t)+"m":r>=U?Math.round(r/U)+"s":r+"ms"}function v(r){return d(r,E,"day")||d(r,M,"hour")||d(r,t,"minute")||d(r,U,"second")||r+" ms"}function d(r,e,l){if(!(r<e))return r<e*1.5?Math.floor(r/e)+" "+l:Math.ceil(r/e)+" "+l+"s"}},39956:function(Q,U,t){var M=t(32868);Q.exports=function(E,i,C){if(E==null)throw Error("First argument should be a string");if(i==null)throw Error("Separator should be a string or a RegExp");C?(typeof C=="string"||Array.isArray(C))&&(C={ignore:C}):C={},C.escape==null&&(C.escape=!0),C.ignore==null?C.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof C.ignore=="string"&&(C.ignore=[C.ignore]),C.ignore=C.ignore.map(function(s){return s.length===1&&(s=s+s),s}));var T=M.parse(E,{flat:!0,brackets:C.ignore}),v=T[0],d=v.split(i);if(C.escape){for(var r=[],e=0;e<d.length;e++){var l=d[e],n=d[e+1];l[l.length-1]==="\\"&&l[l.length-2]!=="\\"?(r.push(l+i+n),e++):r.push(l)}d=r}for(var e=0;e<d.length;e++)T[0]=d[e],d[e]=M.stringify(T,{flat:!0});return d}},78484:function(Q){Q.exports=U;function U(t){for(var M=t.length,E=new Array(M),i=new Array(M),C=new Array(M),T=new Array(M),v=new Array(M),d=new Array(M),r=0;r<M;++r)E[r]=-1,i[r]=0,C[r]=!1,T[r]=0,v[r]=-1,d[r]=[];var e=0,l=[],n=[];function s(h){var _=[h],a=[h];for(E[h]=i[h]=e,C[h]=!0,e+=1;a.length>0;){h=a[a.length-1];var c=t[h];if(T[h]<c.length){for(var f=T[h];f<c.length;++f){var x=c[f];if(E[x]<0){E[x]=i[x]=e,C[x]=!0,e+=1,_.push(x),a.push(x);break}else C[x]&&(i[h]=Math.min(i[h],i[x])|0);v[x]>=0&&d[h].push(v[x])}T[h]=f}else{if(i[h]===E[h]){for(var k=[],y=[],A=0,f=_.length-1;f>=0;--f){var L=_[f];if(C[L]=!1,k.push(L),y.push(d[L]),A+=d[L].length,v[L]=l.length,L===h){_.length=f;break}}l.push(k);for(var u=new Array(A),f=0;f<y.length;f++)for(var m=0;m<y[f].length;m++)u[--A]=y[f][m];n.push(u)}a.pop()}}}for(var r=0;r<M;++r)E[r]<0&&s(r);for(var o,r=0;r<n.length;r++){var p=n[r];if(p.length!==0){p.sort(function(_,a){return _-a}),o=[p[0]];for(var b=1;b<p.length;b++)p[b]!==p[b-1]&&o.push(p[b]);n[r]=o}}return{components:l,adjacencyList:n}}},92848:function(Q,U,t){t.r(U);var M=function(){function r(e,l){var n=[],s=!0,o=!1,p=void 0;try{for(var b=e[Symbol.iterator](),h;!(s=(h=b.next()).done)&&(n.push(h.value),!(l&&n.length===l));s=!0);}catch(_){o=!0,p=_}finally{try{!s&&b.return&&b.return()}finally{if(o)throw p}}return n}return function(e,l){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,l);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=Math.PI*2,i=function(r,e,l,n,s,o,p){var b=r.x,h=r.y;b*=e,h*=l;var _=n*b-s*h,a=s*b+n*h;return{x:_+o,y:a+p}},C=function(r,e){var l=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=Math.cos(r),s=Math.sin(r),o=Math.cos(r+e),p=Math.sin(r+e);return[{x:n-s*l,y:s+n*l},{x:o+p*l,y:p-o*l},{x:o,y:p}]},T=function(r,e,l,n){var s=r*n-e*l<0?-1:1,o=r*l+e*n;return o>1&&(o=1),o<-1&&(o=-1),s*Math.acos(o)},v=function(r,e,l,n,s,o,p,b,h,_,a,c){var f=Math.pow(s,2),x=Math.pow(o,2),k=Math.pow(a,2),y=Math.pow(c,2),A=f*x-f*y-x*k;A<0&&(A=0),A/=f*y+x*k,A=Math.sqrt(A)*(p===b?-1:1);var L=A*s/o*c,u=A*-o/s*a,m=_*L-h*u+(r+l)/2,S=h*L+_*u+(e+n)/2,w=(a-L)/s,I=(c-u)/o,O=(-a-L)/s,D=(-c-u)/o,P=T(1,0,w,I),F=T(w,I,O,D);return b===0&&F>0&&(F-=E),b===1&&F<0&&(F+=E),[m,S,P,F]},d=function(r){var e=r.px,l=r.py,n=r.cx,s=r.cy,o=r.rx,p=r.ry,b=r.xAxisRotation,h=b===void 0?0:b,_=r.largeArcFlag,a=_===void 0?0:_,c=r.sweepFlag,f=c===void 0?0:c,x=[];if(o===0||p===0)return[];var k=Math.sin(h*E/360),y=Math.cos(h*E/360),A=y*(e-n)/2+k*(l-s)/2,L=-k*(e-n)/2+y*(l-s)/2;if(A===0&&L===0)return[];o=Math.abs(o),p=Math.abs(p);var u=Math.pow(A,2)/Math.pow(o,2)+Math.pow(L,2)/Math.pow(p,2);u>1&&(o*=Math.sqrt(u),p*=Math.sqrt(u));var m=v(e,l,n,s,o,p,a,f,k,y,A,L),S=M(m,4),w=S[0],I=S[1],O=S[2],D=S[3],P=Math.abs(D)/(E/4);Math.abs(1-P)<1e-7&&(P=1);var F=Math.max(Math.ceil(P),1);D/=F;for(var R=0;R<F;R++)x.push(C(O,D)),O+=D;return x.map(function(B){var N=i(B[0],o,p,y,k,w,I),G=N.x,X=N.y,J=i(B[1],o,p,y,k,w,I),it=J.x,nt=J.y,q=i(B[2],o,p,y,k,w,I),Z=q.x,$=q.y;return{x1:G,y1:X,x2:it,y2:nt,x:Z,y:$}})};U.default=d},74840:function(Q,U,t){var M=t(21984),E=t(49972),i=t(41976),C=t(53520),T=t(45408);Q.exports=v;function v(d){if(Array.isArray(d)&&d.length===1&&typeof d[0]=="string"&&(d=d[0]),typeof d=="string"&&(T(C(d),"String is not an SVG path."),d=M(d)),T(Array.isArray(d),"Argument should be a string or an array of path segments."),d=E(d),d=i(d),!d.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],e=0,l=d.length;e<l;e++)for(var n=d[e].slice(1),s=0;s<n.length;s+=2)n[s+0]<r[0]&&(r[0]=n[s+0]),n[s+1]<r[1]&&(r[1]=n[s+1]),n[s+0]>r[2]&&(r[2]=n[s+0]),n[s+1]>r[3]&&(r[3]=n[s+1]);return r}},41976:function(Q,U,t){Q.exports=E;var M=t(92848);function E(T){for(var v,d=[],r=0,e=0,l=0,n=0,s=null,o=null,p=0,b=0,h=0,_=T.length;h<_;h++){var a=T[h],c=a[0];switch(c){case"M":l=a[1],n=a[2];break;case"A":var f=M({px:p,py:b,cx:a[6],cy:a[7],rx:a[1],ry:a[2],xAxisRotation:a[3],largeArcFlag:a[4],sweepFlag:a[5]});if(!f.length)continue;for(var x=0,k;x<f.length;x++)k=f[x],a=["C",k.x1,k.y1,k.x2,k.y2,k.x,k.y],x<f.length-1&&d.push(a);break;case"S":var y=p,A=b;(v=="C"||v=="S")&&(y+=y-r,A+=A-e),a=["C",y,A,a[1],a[2],a[3],a[4]];break;case"T":v=="Q"||v=="T"?(s=p*2-s,o=b*2-o):(s=p,o=b),a=C(p,b,s,o,a[1],a[2]);break;case"Q":s=a[1],o=a[2],a=C(p,b,a[1],a[2],a[3],a[4]);break;case"L":a=i(p,b,a[1],a[2]);break;case"H":a=i(p,b,a[1],b);break;case"V":a=i(p,b,p,a[1]);break;case"Z":a=i(p,b,l,n);break}v=c,p=a[a.length-2],b=a[a.length-1],a.length>4?(r=a[a.length-4],e=a[a.length-3]):(r=p,e=b),d.push(a)}return d}function i(T,v,d,r){return["C",T,v,d,r,d,r]}function C(T,v,d,r,e,l){return["C",T/3+.6666666666666666*d,v/3+.6666666666666666*r,e/3+.6666666666666666*d,l/3+.6666666666666666*r,e,l]}},20472:function(Q,U,t){var M=t(74840),E=t(21984),i=t(22235),C=t(53520),T=t(29620),v=document.createElement("canvas"),d=v.getContext("2d");Q.exports=r;function r(n,s){if(!C(n))throw Error("Argument should be valid svg path string");s||(s={});var o,p;s.shape?(o=s.shape[0],p=s.shape[1]):(o=v.width=s.w||s.width||200,p=v.height=s.h||s.height||200);var b=Math.min(o,p),h=s.stroke||0,_=s.viewbox||s.viewBox||M(n),a=[o/(_[2]-_[0]),p/(_[3]-_[1])],c=Math.min(a[0]||0,a[1]||0)/2;if(d.fillStyle="black",d.fillRect(0,0,o,p),d.fillStyle="white",h&&(typeof h!="number"&&(h=1),h>0?d.strokeStyle="white":d.strokeStyle="black",d.lineWidth=Math.abs(h)),d.translate(o*.5,p*.5),d.scale(c,c),l()){var f=new Path2D(n);d.fill(f),h&&d.stroke(f)}else{var x=E(n);i(d,x),d.fill(),h&&d.stroke()}d.setTransform(1,0,0,1,0,0);var k=T(d,{cutoff:s.cutoff!=null?s.cutoff:.5,radius:s.radius!=null?s.radius:b*.5});return k}var e;function l(){if(e!=null)return e;var n=document.createElement("canvas").getContext("2d");if(n.canvas.width=n.canvas.height=1,!window.Path2D)return e=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");n.fillStyle="black",n.fill(s);var o=n.getImageData(0,0,1,1);return e=o&&o.data&&o.data[3]===255}},49760:function(Q,U,t){var M;(function(E){var i=/^\s+/,C=/\s+$/,T=0,v=E.round,d=E.min,r=E.max,e=E.random;function l(Y,at){if(Y=Y||"",at=at||{},Y instanceof l)return Y;if(!(this instanceof l))return new l(Y,at);var et=n(Y);this._originalInput=Y,this._r=et.r,this._g=et.g,this._b=et.b,this._a=et.a,this._roundA=v(100*this._a)/100,this._format=at.format||et.format,this._gradientType=at.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=et.ok,this._tc_id=T++}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Y=this.toRgb();return(Y.r*299+Y.g*587+Y.b*114)/1e3},getLuminance:function(){var Y=this.toRgb(),at,et,ct,ft,yt,xt;return at=Y.r/255,et=Y.g/255,ct=Y.b/255,at<=.03928?ft=at/12.92:ft=E.pow((at+.055)/1.055,2.4),et<=.03928?yt=et/12.92:yt=E.pow((et+.055)/1.055,2.4),ct<=.03928?xt=ct/12.92:xt=E.pow((ct+.055)/1.055,2.4),.2126*ft+.7152*yt+.0722*xt},setAlpha:function(Y){return this._a=B(Y),this._roundA=v(100*this._a)/100,this},toHsv:function(){var Y=b(this._r,this._g,this._b);return{h:Y.h*360,s:Y.s,v:Y.v,a:this._a}},toHsvString:function(){var Y=b(this._r,this._g,this._b),at=v(Y.h*360),et=v(Y.s*100),ct=v(Y.v*100);return this._a==1?"hsv("+at+", "+et+"%, "+ct+"%)":"hsva("+at+", "+et+"%, "+ct+"%, "+this._roundA+")"},toHsl:function(){var Y=o(this._r,this._g,this._b);return{h:Y.h*360,s:Y.s,l:Y.l,a:this._a}},toHslString:function(){var Y=o(this._r,this._g,this._b),at=v(Y.h*360),et=v(Y.s*100),ct=v(Y.l*100);return this._a==1?"hsl("+at+", "+et+"%, "+ct+"%)":"hsla("+at+", "+et+"%, "+ct+"%, "+this._roundA+")"},toHex:function(Y){return _(this._r,this._g,this._b,Y)},toHexString:function(Y){return"#"+this.toHex(Y)},toHex8:function(Y){return a(this._r,this._g,this._b,this._a,Y)},toHex8String:function(Y){return"#"+this.toHex8(Y)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(N(this._r,255)*100)+"%",g:v(N(this._g,255)*100)+"%",b:v(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(N(this._r,255)*100)+"%, "+v(N(this._g,255)*100)+"%, "+v(N(this._b,255)*100)+"%)":"rgba("+v(N(this._r,255)*100)+"%, "+v(N(this._g,255)*100)+"%, "+v(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:F[_(this._r,this._g,this._b,!0)]||!1},toFilter:function(Y){var at="#"+c(this._r,this._g,this._b,this._a),et=at,ct=this._gradientType?"GradientType = 1, ":"";if(Y){var ft=l(Y);et="#"+c(ft._r,ft._g,ft._b,ft._a)}return"progid:DXImageTransform.Microsoft.gradient("+ct+"startColorstr="+at+",endColorstr="+et+")"},toString:function(Y){var at=!!Y;Y=Y||this._format;var et=!1,ct=this._a<1&&this._a>=0,ft=!at&&ct&&(Y==="hex"||Y==="hex6"||Y==="hex3"||Y==="hex4"||Y==="hex8"||Y==="name");return ft?Y==="name"&&this._a===0?this.toName():this.toRgbString():(Y==="rgb"&&(et=this.toRgbString()),Y==="prgb"&&(et=this.toPercentageRgbString()),(Y==="hex"||Y==="hex6")&&(et=this.toHexString()),Y==="hex3"&&(et=this.toHexString(!0)),Y==="hex4"&&(et=this.toHex8String(!0)),Y==="hex8"&&(et=this.toHex8String()),Y==="name"&&(et=this.toName()),Y==="hsl"&&(et=this.toHslString()),Y==="hsv"&&(et=this.toHsvString()),et||this.toHexString())},clone:function(){return l(this.toString())},_applyModification:function(Y,at){var et=Y.apply(null,[this].concat([].slice.call(at)));return this._r=et._r,this._g=et._g,this._b=et._b,this.setAlpha(et._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(A,arguments)},darken:function(){return this._applyModification(L,arguments)},desaturate:function(){return this._applyModification(f,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(k,arguments)},spin:function(){return this._applyModification(u,arguments)},_applyCombination:function(Y,at){return Y.apply(null,[this].concat([].slice.call(at)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(w,arguments)}},l.fromRatio=function(Y,at){if(typeof Y=="object"){var et={};for(var ct in Y)Y.hasOwnProperty(ct)&&(ct==="a"?et[ct]=Y[ct]:et[ct]=q(Y[ct]));Y=et}return l(Y,at)};function n(Y){var at={r:0,g:0,b:0},et=1,ct=null,ft=null,yt=null,xt=!1,Ct=!1;return typeof Y=="string"&&(Y=ot(Y)),typeof Y=="object"&&(rt(Y.r)&&rt(Y.g)&&rt(Y.b)?(at=s(Y.r,Y.g,Y.b),xt=!0,Ct=String(Y.r).substr(-1)==="%"?"prgb":"rgb"):rt(Y.h)&&rt(Y.s)&&rt(Y.v)?(ct=q(Y.s),ft=q(Y.v),at=h(Y.h,ct,ft),xt=!0,Ct="hsv"):rt(Y.h)&&rt(Y.s)&&rt(Y.l)&&(ct=q(Y.s),yt=q(Y.l),at=p(Y.h,ct,yt),xt=!0,Ct="hsl"),Y.hasOwnProperty("a")&&(et=Y.a)),et=B(et),{ok:xt,format:Y.format||Ct,r:d(255,r(at.r,0)),g:d(255,r(at.g,0)),b:d(255,r(at.b,0)),a:et}}function s(Y,at,et){return{r:N(Y,255)*255,g:N(at,255)*255,b:N(et,255)*255}}function o(Y,at,et){Y=N(Y,255),at=N(at,255),et=N(et,255);var ct=r(Y,at,et),ft=d(Y,at,et),yt,xt,Ct=(ct+ft)/2;if(ct==ft)yt=xt=0;else{var gt=ct-ft;switch(xt=Ct>.5?gt/(2-ct-ft):gt/(ct+ft),ct){case Y:yt=(at-et)/gt+(at<et?6:0);break;case at:yt=(et-Y)/gt+2;break;case et:yt=(Y-at)/gt+4;break}yt/=6}return{h:yt,s:xt,l:Ct}}function p(Y,at,et){var ct,ft,yt;Y=N(Y,360),at=N(at,100),et=N(et,100);function xt(mt,vt,At){return At<0&&(At+=1),At>1&&(At-=1),At<.16666666666666666?mt+(vt-mt)*6*At:At<.5?vt:At<.6666666666666666?mt+(vt-mt)*(.6666666666666666-At)*6:mt}if(at===0)ct=ft=yt=et;else{var Ct=et<.5?et*(1+at):et+at-et*at,gt=2*et-Ct;ct=xt(gt,Ct,Y+.3333333333333333),ft=xt(gt,Ct,Y),yt=xt(gt,Ct,Y-.3333333333333333)}return{r:ct*255,g:ft*255,b:yt*255}}function b(Y,at,et){Y=N(Y,255),at=N(at,255),et=N(et,255);var ct=r(Y,at,et),ft=d(Y,at,et),yt,xt,Ct=ct,gt=ct-ft;if(xt=ct===0?0:gt/ct,ct==ft)yt=0;else{switch(ct){case Y:yt=(at-et)/gt+(at<et?6:0);break;case at:yt=(et-Y)/gt+2;break;case et:yt=(Y-at)/gt+4;break}yt/=6}return{h:yt,s:xt,v:Ct}}function h(Y,at,et){Y=N(Y,360)*6,at=N(at,100),et=N(et,100);var ct=E.floor(Y),ft=Y-ct,yt=et*(1-at),xt=et*(1-ft*at),Ct=et*(1-(1-ft)*at),gt=ct%6,mt=[et,xt,yt,yt,Ct,et][gt],vt=[Ct,et,et,xt,yt,yt][gt],At=[yt,yt,Ct,et,et,xt][gt];return{r:mt*255,g:vt*255,b:At*255}}function _(Y,at,et,ct){var ft=[nt(v(Y).toString(16)),nt(v(at).toString(16)),nt(v(et).toString(16))];return ct&&ft[0].charAt(0)==ft[0].charAt(1)&&ft[1].charAt(0)==ft[1].charAt(1)&&ft[2].charAt(0)==ft[2].charAt(1)?ft[0].charAt(0)+ft[1].charAt(0)+ft[2].charAt(0):ft.join("")}function a(Y,at,et,ct,ft){var yt=[nt(v(Y).toString(16)),nt(v(at).toString(16)),nt(v(et).toString(16)),nt(Z(ct))];return ft&&yt[0].charAt(0)==yt[0].charAt(1)&&yt[1].charAt(0)==yt[1].charAt(1)&&yt[2].charAt(0)==yt[2].charAt(1)&&yt[3].charAt(0)==yt[3].charAt(1)?yt[0].charAt(0)+yt[1].charAt(0)+yt[2].charAt(0)+yt[3].charAt(0):yt.join("")}function c(Y,at,et,ct){var ft=[nt(Z(ct)),nt(v(Y).toString(16)),nt(v(at).toString(16)),nt(v(et).toString(16))];return ft.join("")}l.equals=function(Y,at){return!Y||!at?!1:l(Y).toRgbString()==l(at).toRgbString()},l.random=function(){return l.fromRatio({r:e(),g:e(),b:e()})};function f(Y,at){at=at===0?0:at||10;var et=l(Y).toHsl();return et.s-=at/100,et.s=G(et.s),l(et)}function x(Y,at){at=at===0?0:at||10;var et=l(Y).toHsl();return et.s+=at/100,et.s=G(et.s),l(et)}function k(Y){return l(Y).desaturate(100)}function y(Y,at){at=at===0?0:at||10;var et=l(Y).toHsl();return et.l+=at/100,et.l=G(et.l),l(et)}function A(Y,at){at=at===0?0:at||10;var et=l(Y).toRgb();return et.r=r(0,d(255,et.r-v(255*-(at/100)))),et.g=r(0,d(255,et.g-v(255*-(at/100)))),et.b=r(0,d(255,et.b-v(255*-(at/100)))),l(et)}function L(Y,at){at=at===0?0:at||10;var et=l(Y).toHsl();return et.l-=at/100,et.l=G(et.l),l(et)}function u(Y,at){var et=l(Y).toHsl(),ct=(et.h+at)%360;return et.h=ct<0?360+ct:ct,l(et)}function m(Y){var at=l(Y).toHsl();return at.h=(at.h+180)%360,l(at)}function S(Y){var at=l(Y).toHsl(),et=at.h;return[l(Y),l({h:(et+120)%360,s:at.s,l:at.l}),l({h:(et+240)%360,s:at.s,l:at.l})]}function w(Y){var at=l(Y).toHsl(),et=at.h;return[l(Y),l({h:(et+90)%360,s:at.s,l:at.l}),l({h:(et+180)%360,s:at.s,l:at.l}),l({h:(et+270)%360,s:at.s,l:at.l})]}function I(Y){var at=l(Y).toHsl(),et=at.h;return[l(Y),l({h:(et+72)%360,s:at.s,l:at.l}),l({h:(et+216)%360,s:at.s,l:at.l})]}function O(Y,at,et){at=at||6,et=et||30;var ct=l(Y).toHsl(),ft=360/et,yt=[l(Y)];for(ct.h=(ct.h-(ft*at>>1)+720)%360;--at;)ct.h=(ct.h+ft)%360,yt.push(l(ct));return yt}function D(Y,at){at=at||6;for(var et=l(Y).toHsv(),ct=et.h,ft=et.s,yt=et.v,xt=[],Ct=1/at;at--;)xt.push(l({h:ct,s:ft,v:yt})),yt=(yt+Ct)%1;return xt}l.mix=function(Y,at,et){et=et===0?0:et||50;var ct=l(Y).toRgb(),ft=l(at).toRgb(),yt=et/100,xt={r:(ft.r-ct.r)*yt+ct.r,g:(ft.g-ct.g)*yt+ct.g,b:(ft.b-ct.b)*yt+ct.b,a:(ft.a-ct.a)*yt+ct.a};return l(xt)},l.readability=function(Y,at){var et=l(Y),ct=l(at);return(E.max(et.getLuminance(),ct.getLuminance())+.05)/(E.min(et.getLuminance(),ct.getLuminance())+.05)},l.isReadable=function(Y,at,et){var ct=l.readability(Y,at),ft,yt;switch(yt=!1,ft=H(et),ft.level+ft.size){case"AAsmall":case"AAAlarge":yt=ct>=4.5;break;case"AAlarge":yt=ct>=3;break;case"AAAsmall":yt=ct>=7;break}return yt},l.mostReadable=function(Y,at,et){var ct=null,ft=0,yt,xt,Ct,gt;et=et||{},xt=et.includeFallbackColors,Ct=et.level,gt=et.size;for(var mt=0;mt<at.length;mt++)yt=l.readability(Y,at[mt]),yt>ft&&(ft=yt,ct=l(at[mt]));return l.isReadable(Y,ct,{level:Ct,size:gt})||!xt?ct:(et.includeFallbackColors=!1,l.mostReadable(Y,["#fff","#000"],et))};var P=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=l.hexNames=R(P);function R(Y){var at={};for(var et in Y)Y.hasOwnProperty(et)&&(at[Y[et]]=et);return at}function B(Y){return Y=parseFloat(Y),(isNaN(Y)||Y<0||Y>1)&&(Y=1),Y}function N(Y,at){J(Y)&&(Y="100%");var et=it(Y);return Y=d(at,r(0,parseFloat(Y))),et&&(Y=parseInt(Y*at,10)/100),E.abs(Y-at)<1e-6?1:Y%at/parseFloat(at)}function G(Y){return d(1,r(0,Y))}function X(Y){return parseInt(Y,16)}function J(Y){return typeof Y=="string"&&Y.indexOf(".")!=-1&&parseFloat(Y)===1}function it(Y){return typeof Y=="string"&&Y.indexOf("%")!=-1}function nt(Y){return Y.length==1?"0"+Y:""+Y}function q(Y){return Y<=1&&(Y=Y*100+"%"),Y}function Z(Y){return E.round(parseFloat(Y)*255).toString(16)}function $(Y){return X(Y)/255}var V=function(){var Y="[-\\+]?\\d+%?",at="[-\\+]?\\d*\\.\\d+%?",et="(?:"+at+")|(?:"+Y+")",ct="[\\s|\\(]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?",ft="[\\s|\\(]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")[,|\\s]+("+et+")\\s*\\)?";return{CSS_UNIT:new RegExp(et),rgb:new RegExp("rgb"+ct),rgba:new RegExp("rgba"+ft),hsl:new RegExp("hsl"+ct),hsla:new RegExp("hsla"+ft),hsv:new RegExp("hsv"+ct),hsva:new RegExp("hsva"+ft),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function rt(Y){return!!V.CSS_UNIT.exec(Y)}function ot(Y){Y=Y.replace(i,"").replace(C,"").toLowerCase();var at=!1;if(P[Y])Y=P[Y],at=!0;else if(Y=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var et;return(et=V.rgb.exec(Y))?{r:et[1],g:et[2],b:et[3]}:(et=V.rgba.exec(Y))?{r:et[1],g:et[2],b:et[3],a:et[4]}:(et=V.hsl.exec(Y))?{h:et[1],s:et[2],l:et[3]}:(et=V.hsla.exec(Y))?{h:et[1],s:et[2],l:et[3],a:et[4]}:(et=V.hsv.exec(Y))?{h:et[1],s:et[2],v:et[3]}:(et=V.hsva.exec(Y))?{h:et[1],s:et[2],v:et[3],a:et[4]}:(et=V.hex8.exec(Y))?{r:X(et[1]),g:X(et[2]),b:X(et[3]),a:$(et[4]),format:at?"name":"hex8"}:(et=V.hex6.exec(Y))?{r:X(et[1]),g:X(et[2]),b:X(et[3]),format:at?"name":"hex"}:(et=V.hex4.exec(Y))?{r:X(et[1]+""+et[1]),g:X(et[2]+""+et[2]),b:X(et[3]+""+et[3]),a:$(et[4]+""+et[4]),format:at?"name":"hex8"}:(et=V.hex3.exec(Y))?{r:X(et[1]+""+et[1]),g:X(et[2]+""+et[2]),b:X(et[3]+""+et[3]),format:at?"name":"hex"}:!1}function H(Y){var at,et;return Y=Y||{level:"AA",size:"small"},at=(Y.level||"AA").toUpperCase(),et=(Y.size||"small").toLowerCase(),at!=="AA"&&at!=="AAA"&&(at="AA"),et!=="small"&&et!=="large"&&(et="small"),{level:at,size:et}}Q.exports?Q.exports=l:(M=(function(){return l}).call(U,t,U,Q),M!==void 0&&(Q.exports=M))})(Math)},37816:function(Q){Q.exports=M,Q.exports.float32=Q.exports.float=M,Q.exports.fract32=Q.exports.fract=t;var U=new Float32Array(1);function t(E,i){if(E.length){if(E instanceof Float32Array)return new Float32Array(E.length);i instanceof Float32Array||(i=M(E));for(var C=0,T=i.length;C<T;C++)i[C]=E[C]-i[C];return i}return M(E-M(E))}function M(E){return E.length?E instanceof Float32Array?E:new Float32Array(E):(U[0]=E,U[0])}},23464:function(Q,U,t){var M=t(65819);Q.exports=T;var E=96;function i(v,d){var r=M(getComputedStyle(v).getPropertyValue(d));return r[0]*T(r[1],v)}function C(v,d){var r=document.createElement("div");r.style["font-size"]="128"+v,d.appendChild(r);var e=i(r,"font-size")/128;return d.removeChild(r),e}function T(v,d){switch(d=d||document.body,v=(v||"px").trim().toLowerCase(),(d===window||d===document)&&(d=document.body),v){case"%":return d.clientHeight/100;case"ch":case"ex":return C(v,d);case"em":return i(d,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return E;case"cm":return E/2.54;case"mm":return E/25.4;case"pt":return E/72;case"pc":return E/6}return 1}},55712:function(Q,U,t){t.d(U,{NO:function(){return C}});function M(d,r){for(var e,l=d.length,n=l-r;n<--l;)e=d[n],d[n++]=d[l],d[l]=e}function E(d){return d}function i(d){if(d==null)return E;var r,e,l=d.scale[0],n=d.scale[1],s=d.translate[0],o=d.translate[1];return function(p,b){b||(r=e=0);var h=2,_=p.length,a=new Array(_);for(a[0]=(r+=p[0])*l+s,a[1]=(e+=p[1])*n+o;h<_;)a[h]=p[h],++h;return a}}function C(d,r){return typeof r=="string"&&(r=d.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(e){return T(d,e)})}:T(d,r)}function T(d,r){var e=r.id,l=r.bbox,n=r.properties==null?{}:r.properties,s=v(d,r);return e==null&&l==null?{type:"Feature",properties:n,geometry:s}:l==null?{type:"Feature",id:e,properties:n,geometry:s}:{type:"Feature",id:e,bbox:l,properties:n,geometry:s}}function v(d,r){var e=i(d.transform),l=d.arcs;function n(_,a){a.length&&a.pop();for(var c=l[_<0?~_:_],f=0,x=c.length;f<x;++f)a.push(e(c[f],f));_<0&&M(a,x)}function s(_){return e(_)}function o(_){for(var a=[],c=0,f=_.length;c<f;++c)n(_[c],a);return a.length<2&&a.push(a[0]),a}function p(_){for(var a=o(_);a.length<4;)a.push(a[0]);return a}function b(_){return _.map(p)}function h(_){var a=_.type,c;switch(a){case"GeometryCollection":return{type:a,geometries:_.geometries.map(h)};case"Point":c=s(_.coordinates);break;case"MultiPoint":c=_.coordinates.map(s);break;case"LineString":c=o(_.arcs);break;case"MultiLineString":c=_.arcs.map(o);break;case"Polygon":c=b(_.arcs);break;case"MultiPolygon":c=_.arcs.map(b);break;default:return null}return{type:a,coordinates:c}}return h(r)}},73384:function(Q,U,t){var M=t(54612);Q.exports=function(E){if(typeof E!="function"||!hasOwnProperty.call(E,"length"))return!1;try{if(typeof E.length!="number"||typeof E.call!="function"||typeof E.apply!="function")return!1}catch{return!1}return!M(E)}},57980:function(Q,U,t){var M=t(81680),E=t(7328),i=t(33940),C=t(18856),T=function(v,d){return v.replace("%v",C(d))};Q.exports=function(v,d,r){if(!E(r))throw new TypeError(T(d,v));if(!M(v)){if("default"in r)return r.default;if(r.isOptional)return null}var e=i(r.errorMessage);throw M(e)||(e=d),new TypeError(T(e,v))}},32336:function(Q){Q.exports=function(U){try{return U.toString()}catch{try{return String(U)}catch{return null}}}},18856:function(Q,U,t){var M=t(32336),E=/[\n\r\u2028\u2029]/g;Q.exports=function(i){var C=M(i);return C===null?"<Non-coercible to string value>":(C.length>100&&(C=C.slice(0,99)+"\u2026"),C=C.replace(E,function(T){switch(T){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),C)}},7328:function(Q,U,t){var M=t(81680),E={object:!0,function:!0,undefined:!0};Q.exports=function(i){return M(i)?hasOwnProperty.call(E,typeof i):!1}},87396:function(Q,U,t){var M=t(57980),E=t(85488);Q.exports=function(i){return E(i)?i:M(i,"%v is not a plain function",arguments[1])}},85488:function(Q,U,t){var M=t(73384),E=/^\s*class[\s{/}]/,i=Function.prototype.toString;Q.exports=function(C){return!(!M(C)||E.test(i.call(C)))}},54612:function(Q,U,t){var M=t(7328);Q.exports=function(E){if(!M(E))return!1;try{return E.constructor?E.constructor.prototype===E:!1}catch{return!1}}},33940:function(Q,U,t){var M=t(81680),E=t(7328),i=Object.prototype.toString;Q.exports=function(C){if(!M(C))return null;if(E(C)){var T=C.toString;if(typeof T!="function"||T===i)return null}try{return""+C}catch{return null}}},18496:function(Q,U,t){var M=t(57980),E=t(81680);Q.exports=function(i){return E(i)?i:M(i,"Cannot use %v",arguments[1])}},81680:function(Q){var U=void 0;Q.exports=function(t){return t!==U&&t!==null}},14144:function(Q,U,t){var M=t(308),E=t(10352),i=t(33576).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:E([32,0]),UINT16:E([32,0]),UINT32:E([32,0]),BIGUINT64:E([32,0]),INT8:E([32,0]),INT16:E([32,0]),INT32:E([32,0]),BIGINT64:E([32,0]),FLOAT:E([32,0]),DOUBLE:E([32,0]),DATA:E([32,0]),UINT8C:E([32,0]),BUFFER:E([32,0])});var C=typeof Uint8ClampedArray<"u",T=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",d=t.g.__TYPEDARRAY_POOL;d.UINT8C||(d.UINT8C=E([32,0])),d.BIGUINT64||(d.BIGUINT64=E([32,0])),d.BIGINT64||(d.BIGINT64=E([32,0])),d.BUFFER||(d.BUFFER=E([32,0]));var r=d.DATA,e=d.BUFFER;U.free=function(u){if(i.isBuffer(u))e[M.log2(u.length)].push(u);else{if(Object.prototype.toString.call(u)!=="[object ArrayBuffer]"&&(u=u.buffer),!u)return;var m=u.length||u.byteLength,S=M.log2(m)|0;r[S].push(u)}};function l(u){if(u){var m=u.length||u.byteLength,S=M.log2(m);r[S].push(u)}}function n(u){l(u.buffer)}U.freeUint8=U.freeUint16=U.freeUint32=U.freeBigUint64=U.freeInt8=U.freeInt16=U.freeInt32=U.freeBigInt64=U.freeFloat32=U.freeFloat=U.freeFloat64=U.freeDouble=U.freeUint8Clamped=U.freeDataView=n,U.freeArrayBuffer=l,U.freeBuffer=function(u){e[M.log2(u.length)].push(u)},U.malloc=function(u,m){if(m===void 0||m==="arraybuffer")return s(u);switch(m){case"uint8":return o(u);case"uint16":return p(u);case"uint32":return b(u);case"int8":return h(u);case"int16":return _(u);case"int32":return a(u);case"float":case"float32":return c(u);case"double":case"float64":return f(u);case"uint8_clamped":return x(u);case"bigint64":return y(u);case"biguint64":return k(u);case"buffer":return L(u);case"data":case"dataview":return A(u);default:return null}return null};function s(m){var m=M.nextPow2(m),S=M.log2(m),w=r[S];return w.length>0?w.pop():new ArrayBuffer(m)}U.mallocArrayBuffer=s;function o(u){return new Uint8Array(s(u),0,u)}U.mallocUint8=o;function p(u){return new Uint16Array(s(2*u),0,u)}U.mallocUint16=p;function b(u){return new Uint32Array(s(4*u),0,u)}U.mallocUint32=b;function h(u){return new Int8Array(s(u),0,u)}U.mallocInt8=h;function _(u){return new Int16Array(s(2*u),0,u)}U.mallocInt16=_;function a(u){return new Int32Array(s(4*u),0,u)}U.mallocInt32=a;function c(u){return new Float32Array(s(4*u),0,u)}U.mallocFloat32=U.mallocFloat=c;function f(u){return new Float64Array(s(8*u),0,u)}U.mallocFloat64=U.mallocDouble=f;function x(u){return C?new Uint8ClampedArray(s(u),0,u):o(u)}U.mallocUint8Clamped=x;function k(u){return T?new BigUint64Array(s(8*u),0,u):null}U.mallocBigUint64=k;function y(u){return v?new BigInt64Array(s(8*u),0,u):null}U.mallocBigInt64=y;function A(u){return new DataView(s(u),0,u)}U.mallocDataView=A;function L(u){u=M.nextPow2(u);var m=M.log2(u),S=e[m];return S.length>0?S.pop():new i(u)}U.mallocBuffer=L,U.clearCache=function(){for(var u=0;u<32;++u)d.UINT8[u].length=0,d.UINT16[u].length=0,d.UINT32[u].length=0,d.INT8[u].length=0,d.INT16[u].length=0,d.INT32[u].length=0,d.FLOAT[u].length=0,d.DOUBLE[u].length=0,d.BIGUINT64[u].length=0,d.BIGINT64[u].length=0,d.UINT8C[u].length=0,r[u].length=0,e[u].length=0}},92384:function(Q){var U=/[\'\"]/;Q.exports=function(t){return t?(U.test(t.charAt(0))&&(t=t.substr(1)),U.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}},45223:function(Q){Q.exports=function(U,t,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var E=0,i=M.length;E<i;E++){var C=M[E];for(var T in C)if(!(t[T]!==void 0&&!Array.isArray(t[T])&&U[T]===t[T])&&T in t){var v;if(C[T]===!0)v=t[T];else if(C[T]===!1||typeof C[T]=="function"&&(v=C[T](t[T],U,t),v===void 0))continue;U[T]=v}}return U}},96656:function(Q,U,t){Q.exports=M;function M(i,C){if(E("noDeprecation"))return i;var T=!1;function v(){if(!T){if(E("throwDeprecation"))throw new Error(C);E("traceDeprecation")?console.trace(C):console.warn(C),T=!0}return i.apply(this,arguments)}return v}function E(i){try{if(!t.g.localStorage)return!1}catch{return!1}var C=t.g.localStorage[i];return C==null?!1:String(C).toLowerCase()==="true"}},75272:function(Q){Q.exports=function(U){return U&&typeof U=="object"&&typeof U.copy=="function"&&typeof U.fill=="function"&&typeof U.readUInt8=="function"}},41088:function(Q,U,t){var M=t(91148),E=t(84420),i=t(96632),C=t(7728);function T(yt){return yt.call.bind(yt)}var v=typeof BigInt<"u",d=typeof Symbol<"u",r=T(Object.prototype.toString),e=T(Number.prototype.valueOf),l=T(String.prototype.valueOf),n=T(Boolean.prototype.valueOf);if(v)var s=T(BigInt.prototype.valueOf);if(d)var o=T(Symbol.prototype.valueOf);function p(yt,xt){if(typeof yt!="object")return!1;try{return xt(yt),!0}catch{return!1}}U.isArgumentsObject=M,U.isGeneratorFunction=E,U.isTypedArray=C;function b(yt){return typeof Promise<"u"&&yt instanceof Promise||yt!==null&&typeof yt=="object"&&typeof yt.then=="function"&&typeof yt.catch=="function"}U.isPromise=b;function h(yt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(yt):C(yt)||X(yt)}U.isArrayBufferView=h;function _(yt){return i(yt)==="Uint8Array"}U.isUint8Array=_;function a(yt){return i(yt)==="Uint8ClampedArray"}U.isUint8ClampedArray=a;function c(yt){return i(yt)==="Uint16Array"}U.isUint16Array=c;function f(yt){return i(yt)==="Uint32Array"}U.isUint32Array=f;function x(yt){return i(yt)==="Int8Array"}U.isInt8Array=x;function k(yt){return i(yt)==="Int16Array"}U.isInt16Array=k;function y(yt){return i(yt)==="Int32Array"}U.isInt32Array=y;function A(yt){return i(yt)==="Float32Array"}U.isFloat32Array=A;function L(yt){return i(yt)==="Float64Array"}U.isFloat64Array=L;function u(yt){return i(yt)==="BigInt64Array"}U.isBigInt64Array=u;function m(yt){return i(yt)==="BigUint64Array"}U.isBigUint64Array=m;function S(yt){return r(yt)==="[object Map]"}S.working=typeof Map<"u"&&S(new Map);function w(yt){return typeof Map>"u"?!1:S.working?S(yt):yt instanceof Map}U.isMap=w;function I(yt){return r(yt)==="[object Set]"}I.working=typeof Set<"u"&&I(new Set);function O(yt){return typeof Set>"u"?!1:I.working?I(yt):yt instanceof Set}U.isSet=O;function D(yt){return r(yt)==="[object WeakMap]"}D.working=typeof WeakMap<"u"&&D(new WeakMap);function P(yt){return typeof WeakMap>"u"?!1:D.working?D(yt):yt instanceof WeakMap}U.isWeakMap=P;function F(yt){return r(yt)==="[object WeakSet]"}F.working=typeof WeakSet<"u"&&F(new WeakSet);function R(yt){return F(yt)}U.isWeakSet=R;function B(yt){return r(yt)==="[object ArrayBuffer]"}B.working=typeof ArrayBuffer<"u"&&B(new ArrayBuffer);function N(yt){return typeof ArrayBuffer>"u"?!1:B.working?B(yt):yt instanceof ArrayBuffer}U.isArrayBuffer=N;function G(yt){return r(yt)==="[object DataView]"}G.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&G(new DataView(new ArrayBuffer(1),0,1));function X(yt){return typeof DataView>"u"?!1:G.working?G(yt):yt instanceof DataView}U.isDataView=X;var J=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function it(yt){return r(yt)==="[object SharedArrayBuffer]"}function nt(yt){return typeof J>"u"?!1:(typeof it.working>"u"&&(it.working=it(new J)),it.working?it(yt):yt instanceof J)}U.isSharedArrayBuffer=nt;function q(yt){return r(yt)==="[object AsyncFunction]"}U.isAsyncFunction=q;function Z(yt){return r(yt)==="[object Map Iterator]"}U.isMapIterator=Z;function $(yt){return r(yt)==="[object Set Iterator]"}U.isSetIterator=$;function V(yt){return r(yt)==="[object Generator]"}U.isGeneratorObject=V;function rt(yt){return r(yt)==="[object WebAssembly.Module]"}U.isWebAssemblyCompiledModule=rt;function ot(yt){return p(yt,e)}U.isNumberObject=ot;function H(yt){return p(yt,l)}U.isStringObject=H;function Y(yt){return p(yt,n)}U.isBooleanObject=Y;function at(yt){return v&&p(yt,s)}U.isBigIntObject=at;function et(yt){return d&&p(yt,o)}U.isSymbolObject=et;function ct(yt){return ot(yt)||H(yt)||Y(yt)||at(yt)||et(yt)}U.isBoxedPrimitive=ct;function ft(yt){return typeof Uint8Array<"u"&&(N(yt)||nt(yt))}U.isAnyArrayBuffer=ft,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(yt){Object.defineProperty(U,yt,{enumerable:!1,value:function(){throw new Error(yt+" is not supported in userland")}})})},35840:function(Q,U,t){var M=t(4168),E=Object.getOwnPropertyDescriptors||function(X){for(var J=Object.keys(X),it={},nt=0;nt<J.length;nt++)it[J[nt]]=Object.getOwnPropertyDescriptor(X,J[nt]);return it},i=/%[sdj%]/g;U.format=function(X){if(!k(X)){for(var J=[],it=0;it<arguments.length;it++)J.push(d(arguments[it]));return J.join(" ")}for(var it=1,nt=arguments,q=nt.length,Z=String(X).replace(i,function(rt){if(rt==="%%")return"%";if(it>=q)return rt;switch(rt){case"%s":return String(nt[it++]);case"%d":return Number(nt[it++]);case"%j":try{return JSON.stringify(nt[it++])}catch{return"[Circular]"}default:return rt}}),$=nt[it];it<q;$=nt[++it])c($)||!u($)?Z+=" "+$:Z+=" "+d($);return Z},U.deprecate=function(X,J){if(typeof M<"u"&&M.noDeprecation===!0)return X;if(typeof M>"u")return function(){return U.deprecate(X,J).apply(this,arguments)};var it=!1;function nt(){if(!it){if(M.throwDeprecation)throw new Error(J);M.traceDeprecation?console.trace(J):console.error(J),it=!0}return X.apply(this,arguments)}return nt};var C={},T=/^$/;if(M.env.NODE_DEBUG){var v=M.env.NODE_DEBUG;v=v.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),T=new RegExp("^"+v+"$","i")}U.debuglog=function(X){if(X=X.toUpperCase(),!C[X])if(T.test(X)){var J=M.pid;C[X]=function(){var it=U.format.apply(U,arguments);console.error("%s %d: %s",X,J,it)}}else C[X]=function(){};return C[X]};function d(X,J){var it={seen:[],stylize:e};return arguments.length>=3&&(it.depth=arguments[2]),arguments.length>=4&&(it.colors=arguments[3]),a(J)?it.showHidden=J:J&&U._extend(it,J),A(it.showHidden)&&(it.showHidden=!1),A(it.depth)&&(it.depth=2),A(it.colors)&&(it.colors=!1),A(it.customInspect)&&(it.customInspect=!0),it.colors&&(it.stylize=r),n(it,X,it.depth)}U.inspect=d,d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},d.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function r(X,J){var it=d.styles[J];return it?"\x1B["+d.colors[it][0]+"m"+X+"\x1B["+d.colors[it][1]+"m":X}function e(X,J){return X}function l(X){var J={};return X.forEach(function(it,nt){J[it]=!0}),J}function n(X,J,it){if(X.customInspect&&J&&w(J.inspect)&&J.inspect!==U.inspect&&!(J.constructor&&J.constructor.prototype===J)){var nt=J.inspect(it,X);return k(nt)||(nt=n(X,nt,it)),nt}var q=s(X,J);if(q)return q;var Z=Object.keys(J),$=l(Z);if(X.showHidden&&(Z=Object.getOwnPropertyNames(J)),S(J)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return o(J);if(Z.length===0){if(w(J)){var V=J.name?": "+J.name:"";return X.stylize("[Function"+V+"]","special")}if(L(J))return X.stylize(RegExp.prototype.toString.call(J),"regexp");if(m(J))return X.stylize(Date.prototype.toString.call(J),"date");if(S(J))return o(J)}var rt="",ot=!1,H=["{","}"];if(_(J)&&(ot=!0,H=["[","]"]),w(J)){var Y=J.name?": "+J.name:"";rt=" [Function"+Y+"]"}if(L(J)&&(rt=" "+RegExp.prototype.toString.call(J)),m(J)&&(rt=" "+Date.prototype.toUTCString.call(J)),S(J)&&(rt=" "+o(J)),Z.length===0&&(!ot||J.length==0))return H[0]+rt+H[1];if(it<0)return L(J)?X.stylize(RegExp.prototype.toString.call(J),"regexp"):X.stylize("[Object]","special");X.seen.push(J);var at;return ot?at=p(X,J,it,$,Z):at=Z.map(function(et){return b(X,J,it,$,et,ot)}),X.seen.pop(),h(at,rt,H)}function s(X,J){if(A(J))return X.stylize("undefined","undefined");if(k(J)){var it="'"+JSON.stringify(J).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(it,"string")}if(x(J))return X.stylize(""+J,"number");if(a(J))return X.stylize(""+J,"boolean");if(c(J))return X.stylize("null","null")}function o(X){return"["+Error.prototype.toString.call(X)+"]"}function p(X,J,it,nt,q){for(var Z=[],$=0,V=J.length;$<V;++$)R(J,String($))?Z.push(b(X,J,it,nt,String($),!0)):Z.push("");return q.forEach(function(rt){rt.match(/^\d+$/)||Z.push(b(X,J,it,nt,rt,!0))}),Z}function b(X,J,it,nt,q,Z){var $,V,rt;if(rt=Object.getOwnPropertyDescriptor(J,q)||{value:J[q]},rt.get?rt.set?V=X.stylize("[Getter/Setter]","special"):V=X.stylize("[Getter]","special"):rt.set&&(V=X.stylize("[Setter]","special")),R(nt,q)||($="["+q+"]"),V||(X.seen.indexOf(rt.value)<0?(c(it)?V=n(X,rt.value,null):V=n(X,rt.value,it-1),V.indexOf(`
`)>-1&&(Z?V=V.split(`
`).map(function(ot){return"  "+ot}).join(`
`).slice(2):V=`
`+V.split(`
`).map(function(ot){return"   "+ot}).join(`
`))):V=X.stylize("[Circular]","special")),A($)){if(Z&&q.match(/^\d+$/))return V;$=JSON.stringify(""+q),$.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($=$.slice(1,-1),$=X.stylize($,"name")):($=$.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),$=X.stylize($,"string"))}return $+": "+V}function h(X,J,it){var nt=0,q=X.reduce(function(Z,$){return nt++,$.indexOf(`
`)>=0&&nt++,Z+$.replace(/\u001b\[\d\d?m/g,"").length+1},0);return q>60?it[0]+(J===""?"":J+`
 `)+" "+X.join(`,
  `)+" "+it[1]:it[0]+J+" "+X.join(", ")+" "+it[1]}U.types=t(41088);function _(X){return Array.isArray(X)}U.isArray=_;function a(X){return typeof X=="boolean"}U.isBoolean=a;function c(X){return X===null}U.isNull=c;function f(X){return X==null}U.isNullOrUndefined=f;function x(X){return typeof X=="number"}U.isNumber=x;function k(X){return typeof X=="string"}U.isString=k;function y(X){return typeof X=="symbol"}U.isSymbol=y;function A(X){return X===void 0}U.isUndefined=A;function L(X){return u(X)&&O(X)==="[object RegExp]"}U.isRegExp=L,U.types.isRegExp=L;function u(X){return typeof X=="object"&&X!==null}U.isObject=u;function m(X){return u(X)&&O(X)==="[object Date]"}U.isDate=m,U.types.isDate=m;function S(X){return u(X)&&(O(X)==="[object Error]"||X instanceof Error)}U.isError=S,U.types.isNativeError=S;function w(X){return typeof X=="function"}U.isFunction=w;function I(X){return X===null||typeof X=="boolean"||typeof X=="number"||typeof X=="string"||typeof X=="symbol"||typeof X>"u"}U.isPrimitive=I,U.isBuffer=t(75272);function O(X){return Object.prototype.toString.call(X)}function D(X){return X<10?"0"+X.toString(10):X.toString(10)}var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function F(){var X=new Date,J=[D(X.getHours()),D(X.getMinutes()),D(X.getSeconds())].join(":");return[X.getDate(),P[X.getMonth()],J].join(" ")}U.log=function(){console.log("%s - %s",F(),U.format.apply(U,arguments))},U.inherits=t(6768),U._extend=function(X,J){if(!J||!u(J))return X;for(var it=Object.keys(J),nt=it.length;nt--;)X[it[nt]]=J[it[nt]];return X};function R(X,J){return Object.prototype.hasOwnProperty.call(X,J)}var B=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;U.promisify=function(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');if(B&&X[B]){var J=X[B];if(typeof J!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(J,B,{value:J,enumerable:!1,writable:!1,configurable:!0}),J}function J(){for(var it,nt,q=new Promise(function(V,rt){it=V,nt=rt}),Z=[],$=0;$<arguments.length;$++)Z.push(arguments[$]);Z.push(function(V,rt){V?nt(V):it(rt)});try{X.apply(this,Z)}catch(V){nt(V)}return q}return Object.setPrototypeOf(J,Object.getPrototypeOf(X)),B&&Object.defineProperty(J,B,{value:J,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(J,E(X))},U.promisify.custom=B;function N(X,J){if(!X){var it=new Error("Promise was rejected with a falsy value");it.reason=X,X=it}return J(X)}function G(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');function J(){for(var it=[],nt=0;nt<arguments.length;nt++)it.push(arguments[nt]);var q=it.pop();if(typeof q!="function")throw new TypeError("The last argument must be of type Function");var Z=this,$=function(){return q.apply(Z,arguments)};X.apply(this,it).then(function(V){M.nextTick($.bind(null,null,V))},function(V){M.nextTick(N.bind(null,V,$))})}return Object.setPrototypeOf(J,Object.getPrototypeOf(X)),Object.defineProperties(J,E(X)),J}U.callbackify=G},5408:function(Q,U,t){var M=t(13380);Q.exports=function(E){return M("webgl",E)}},96632:function(Q,U,t){var M=t(46492),E=t(63436),i=t(57916),C=t(99676),T=t(2304),v=C("Object.prototype.toString"),d=t(46672)(),r=typeof globalThis>"u"?t.g:globalThis,e=E(),l=C("String.prototype.slice"),n=Object.getPrototypeOf,s=C("Array.prototype.indexOf",!0)||function(h,_){for(var a=0;a<h.length;a+=1)if(h[a]===_)return a;return-1},o={__proto__:null};d&&T&&n?M(e,function(h){var _=new r[h];if(Symbol.toStringTag in _){var a=n(_),c=T(a,Symbol.toStringTag);if(!c){var f=n(a);c=T(f,Symbol.toStringTag)}o["$"+h]=i(c.get)}}):M(e,function(h){var _=new r[h],a=_.slice||_.set;a&&(o["$"+h]=i(a))});var p=function(h){var _=!1;return M(o,function(a,c){if(!_)try{"$"+a(h)===c&&(_=l(c,1))}catch{}}),_},b=function(h){var _=!1;return M(o,function(a,c){if(!_)try{a(h),_=l(c,1)}catch{}}),_};Q.exports=function(h){if(!h||typeof h!="object")return!1;if(!d){var _=l(v(h),8,-1);return s(e,_)>-1?_:_!=="Object"?!1:b(h)}return T?p(h):null}},67020:function(Q,U,t){var M=t(38700),E=t(50896),i=M.instance();function C(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}C.prototype=new M.baseCalendar,E(C.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(o,p){if(typeof o=="string"){var b=o.match(v);return b?b[0]:""}var h=this._validateYear(o),_=o.month(),a=""+this.toChineseMonth(h,_);return p&&a.length<2&&(a="0"+a),this.isIntercalaryMonth(h,_)&&(a+="i"),a},monthNames:function(o){if(typeof o=="string"){var p=o.match(d);return p?p[0]:""}var b=this._validateYear(o),h=o.month(),_=this.toChineseMonth(b,h),a=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][_-1];return this.isIntercalaryMonth(b,h)&&(a="\u95F0"+a),a},monthNamesShort:function(o){if(typeof o=="string"){var p=o.match(r);return p?p[0]:""}var b=this._validateYear(o),h=o.month(),_=this.toChineseMonth(b,h),a=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][_-1];return this.isIntercalaryMonth(b,h)&&(a="\u95F0"+a),a},parseMonth:function(o,p){o=this._validateYear(o);var b=parseInt(p),h;if(isNaN(b))p[0]==="\u95F0"&&(h=!0,p=p.substring(1)),p[p.length-1]==="\u6708"&&(p=p.substring(0,p.length-1)),b=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(p);else{var _=p[p.length-1];h=_==="i"||_==="I"}var a=this.toMonthIndex(o,b,h);return a},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(o,p){if(o.year&&(o=o.year()),typeof o!="number"||o<1888||o>2111)throw p.replace(/\{0\}/,this.local.name);return o},toMonthIndex:function(o,p,b){var h=this.intercalaryMonth(o),_=b&&p!==h;if(_||p<1||p>12)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);var a;return h?!b&&p<=h?a=p-1:a=p:a=p-1,a},toChineseMonth:function(o,p){o.year&&(o=o.year(),p=o.month());var b=this.intercalaryMonth(o),h=b?12:11;if(p<0||p>h)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);var _;return b?p<b?_=p+1:_=p:_=p+1,_},intercalaryMonth:function(o){o=this._validateYear(o);var p=e[o-e[0]],b=p>>13;return b},isIntercalaryMonth:function(o,p){o.year&&(o=o.year(),p=o.month());var b=this.intercalaryMonth(o);return!!b&&b===p},leapYear:function(o){return this.intercalaryMonth(o)!==0},weekOfYear:function(o,p,b){var h=this._validateYear(o,M.local.invalidyear),_=l[h-l[0]],a=_>>9&4095,c=_>>5&15,f=_&31,x;x=i.newDate(a,c,f),x.add(4-(x.dayOfWeek()||7),"d");var k=this.toJD(o,p,b)-x.toJD();return 1+Math.floor(k/7)},monthsInYear:function(o){return this.leapYear(o)?13:12},daysInMonth:function(o,p){o.year&&(p=o.month(),o=o.year()),o=this._validateYear(o);var b=e[o-e[0]],h=b>>13,_=h?12:11;if(p>_)throw M.local.invalidMonth.replace(/\{0\}/,this.local.name);var a=b&1<<12-p?30:29;return a},weekDay:function(o,p,b){return(this.dayOfWeek(o,p,b)||7)<6},toJD:function(o,p,b){var h=this._validate(o,a,b,M.local.invalidDate);o=this._validateYear(h.year()),p=h.month(),b=h.day();var _=this.isIntercalaryMonth(o,p),a=this.toChineseMonth(o,p),c=s(o,a,b,_);return i.toJD(c.year,c.month,c.day)},fromJD:function(o){var p=i.fromJD(o),b=n(p.year(),p.month(),p.day()),h=this.toMonthIndex(b.year,b.month,b.isIntercalary);return this.newDate(b.year,h,b.day)},fromString:function(o){var p=o.match(T),b=this._validateYear(+p[1]),h=+p[2],_=!!p[3],a=this.toMonthIndex(b,h,_),c=+p[4];return this.newDate(b,a,c)},add:function(o,p,b){var h=o.year(),_=o.month(),a=this.isIntercalaryMonth(h,_),c=this.toChineseMonth(h,_),f=Object.getPrototypeOf(C.prototype).add.call(this,o,p,b);if(b==="y"){var x=f.year(),k=f.month(),y=this.isIntercalaryMonth(x,c),A=a&&y?this.toMonthIndex(x,c,!0):this.toMonthIndex(x,c,!1);A!==k&&f.month(A)}return f}});var T=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,v=/^\d?\d[iI]?/m,d=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;M.calendars.chinese=C;var e=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],l=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function n(o,p,b,h){var _,a;if(typeof o=="object")_=o,a=p||{};else{var c=typeof o=="number"&&o>=1888&&o<=2111;if(!c)throw new Error("Solar year outside range 1888-2111");var f=typeof p=="number"&&p>=1&&p<=12;if(!f)throw new Error("Solar month outside range 1 - 12");var x=typeof b=="number"&&b>=1&&b<=31;if(!x)throw new Error("Solar day outside range 1 - 31");_={year:o,month:p,day:b},a=h||{}}var k=l[_.year-l[0]],y=_.year<<9|_.month<<5|_.day;a.year=y>=k?_.year:_.year-1,k=l[a.year-l[0]];var A=k>>9&4095,L=k>>5&15,u=k&31,m,S=new Date(A,L-1,u),w=new Date(_.year,_.month-1,_.day);m=Math.round((w-S)/864e5);var I=e[a.year-e[0]],O;for(O=0;O<13;O++){var D=I&1<<12-O?30:29;if(m<D)break;m-=D}var P=I>>13;return!P||O<P?(a.isIntercalary=!1,a.month=1+O):O===P?(a.isIntercalary=!0,a.month=O):(a.isIntercalary=!1,a.month=O),a.day=1+m,a}function s(o,p,b,h,_){var a,c;if(typeof o=="object")c=o,a=p||{};else{var f=typeof o=="number"&&o>=1888&&o<=2111;if(!f)throw new Error("Lunar year outside range 1888-2111");var x=typeof p=="number"&&p>=1&&p<=12;if(!x)throw new Error("Lunar month outside range 1 - 12");var k=typeof b=="number"&&b>=1&&b<=30;if(!k)throw new Error("Lunar day outside range 1 - 30");var y;typeof h=="object"?(y=!1,a=h):(y=!!h,a=_||{}),c={year:o,month:p,day:b,isIntercalary:y}}var A;A=c.day-1;var L=e[c.year-e[0]],u=L>>13,m;u&&(c.month>u||c.isIntercalary)?m=c.month:m=c.month-1;for(var S=0;S<m;S++){var w=L&1<<12-S?30:29;A+=w}var I=l[c.year-l[0]],O=I>>9&4095,D=I>>5&15,P=I&31,F=new Date(O,D-1,P+A);return a.year=F.getFullYear(),a.month=1+F.getMonth(),a.day=F.getDate(),a}},89792:function(Q,U,t){var M=t(38700),E=t(50896);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var T=this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),v=T.year()+(T.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(C){return this._validate(C,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(C,T,v){var d=this.newDate(C,T,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(C,T){var v=this._validate(C,T,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(C,T,v){return(this.dayOfWeek(C,T,v)||7)<6},toJD:function(C,T,v){var d=this._validate(C,T,v,M.local.invalidDate);return C=d.year(),C<0&&C++,d.day()+(d.month()-1)*30+(C-1)*365+Math.floor(C/4)+this.jdEpoch-1},fromJD:function(C){var T=Math.floor(C)+.5-this.jdEpoch,v=Math.floor((T-Math.floor((T+366)/1461))/365)+1;v<=0&&v--,T=Math.floor(C)+.5-this.newDate(v,1,1).toJD();var d=Math.floor(T/30)+1,r=T-(d-1)*30+1;return this.newDate(v,d,r)}}),M.calendars.coptic=i},55668:function(Q,U,t){var M=t(38700),E=t(50896);function i(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear),!1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear),13},daysInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear),400},weekOfYear:function(T,v,d){var r=this.newDate(T,v,d);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(T,v){var d=this._validate(T,v,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate);return(r.day()+1)%8},weekDay:function(T,v,d){var r=this.dayOfWeek(T,v,d);return r>=2&&r<=6},extraInfo:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate);return{century:C[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate);return T=r.year()+(r.year()<0?1:0),v=r.month(),d=r.day(),d+(v>1?16:0)+(v>2?(v-2)*32:0)+(T-1)*400+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T+.5)-Math.floor(this.jdEpoch)-1;var v=Math.floor(T/400)+1;T-=(v-1)*400,T+=T>15?16:0;var d=Math.floor(T/32)+1,r=T-(d-1)*32+1;return this.newDate(v<=0?v-1:v,d,r)}});var C={20:"Fruitbat",21:"Anchovy"};M.calendars.discworld=i},65168:function(Q,U,t){var M=t(38700),E=t(50896);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var T=this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),v=T.year()+(T.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(C){return this._validate(C,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear),13},weekOfYear:function(C,T,v){var d=this.newDate(C,T,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(C,T){var v=this._validate(C,T,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(C,T,v){return(this.dayOfWeek(C,T,v)||7)<6},toJD:function(C,T,v){var d=this._validate(C,T,v,M.local.invalidDate);return C=d.year(),C<0&&C++,d.day()+(d.month()-1)*30+(C-1)*365+Math.floor(C/4)+this.jdEpoch-1},fromJD:function(C){var T=Math.floor(C)+.5-this.jdEpoch,v=Math.floor((T-Math.floor((T+366)/1461))/365)+1;v<=0&&v--,T=Math.floor(C)+.5-this.newDate(v,1,1).toJD();var d=Math.floor(T/30)+1,r=T-(d-1)*30+1;return this.newDate(v,d,r)}}),M.calendars.ethiopian=i},2084:function(Q,U,t){var M=t(38700),E=t(50896);function i(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return this._leapYear(v.year())},_leapYear:function(T){return T=T<0?T+1:T,C(T*7+1,19)<7},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,M.local.invalidYear),this._leapYear(T.year?T.year():T)?13:12},weekOfYear:function(T,v,d){var r=this.newDate(T,v,d);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return T=v.year(),this.toJD(T===-1?1:T+1,7,1)-this.toJD(T,7,1)},daysInMonth:function(T,v){return T.year&&(v=T.month(),T=T.year()),this._validate(T,v,this.minDay,M.local.invalidMonth),v===12&&this.leapYear(T)||v===8&&C(this.daysInYear(T),10)===5?30:v===9&&C(this.daysInYear(T),10)===3?29:this.daysPerMonth[v-1]},weekDay:function(T,v,d){return this.dayOfWeek(T,v,d)!==6},extraInfo:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate);T=r.year(),v=r.month(),d=r.day();var e=T<=0?T+1:T,l=this.jdEpoch+this._delay1(e)+this._delay2(e)+d+1;if(v<7){for(var n=7;n<=this.monthsInYear(T);n++)l+=this.daysInMonth(T,n);for(var n=1;n<v;n++)l+=this.daysInMonth(T,n)}else for(var n=7;n<v;n++)l+=this.daysInMonth(T,n);return l},_delay1:function(T){var v=Math.floor((235*T-234)/19),d=12084+13753*v,r=v*29+Math.floor(d/25920);return C(3*(r+1),7)<3&&r++,r},_delay2:function(T){var v=this._delay1(T-1),d=this._delay1(T),r=this._delay1(T+1);return r-d===356?2:d-v===382?1:0},fromJD:function(T){T=Math.floor(T)+.5;for(var v=Math.floor((T-this.jdEpoch)*98496/35975351)-1;T>=this.toJD(v===-1?1:v+1,7,1);)v++;for(var d=T<this.toJD(v,1,1)?7:1;T>this.toJD(v,d,this.daysInMonth(v,d));)d++;var r=T-this.toJD(v,d,1)+1;return this.newDate(v,d,r)}});function C(T,v){return T-v*Math.floor(T/v)}M.calendars.hebrew=i},26368:function(Q,U,t){var M=t(38700),E=t(50896);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(C){var T=this._validate(C,this.minMonth,this.minDay,M.local.invalidYear);return(T.year()*11+14)%30<11},weekOfYear:function(C,T,v){var d=this.newDate(C,T,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(C){return this.leapYear(C)?355:354},daysInMonth:function(C,T){var v=this._validate(C,T,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(C,T,v){return this.dayOfWeek(C,T,v)!==5},toJD:function(C,T,v){var d=this._validate(C,T,v,M.local.invalidDate);return C=d.year(),T=d.month(),v=d.day(),C=C<=0?C+1:C,v+Math.ceil(29.5*(T-1))+(C-1)*354+Math.floor((3+11*C)/30)+this.jdEpoch-1},fromJD:function(C){C=Math.floor(C)+.5;var T=Math.floor((30*(C-this.jdEpoch)+10646)/10631);T=T<=0?T-1:T;var v=Math.min(12,Math.ceil((C-29-this.toJD(T,1,1))/29.5)+1),d=C-this.toJD(T,v,1)+1;return this.newDate(T,v,d)}}),M.calendars.islamic=i},24747:function(Q,U,t){var M=t(38700),E=t(50896);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var T=this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),v=T.year()<0?T.year()+1:T.year();return v%4===0},weekOfYear:function(C,T,v){var d=this.newDate(C,T,v);return d.add(4-(d.dayOfWeek()||7),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInMonth:function(C,T){var v=this._validate(C,T,this.minDay,M.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(C,T,v){return(this.dayOfWeek(C,T,v)||7)<6},toJD:function(C,T,v){var d=this._validate(C,T,v,M.local.invalidDate);return C=d.year(),T=d.month(),v=d.day(),C<0&&C++,T<=2&&(C--,T+=12),Math.floor(365.25*(C+4716))+Math.floor(30.6001*(T+1))+v-1524.5},fromJD:function(C){var T=Math.floor(C+.5),v=T+1524,d=Math.floor((v-122.1)/365.25),r=Math.floor(365.25*d),e=Math.floor((v-r)/30.6001),l=e-Math.floor(e<14?1:13),n=d-Math.floor(l>2?4716:4715),s=v-r-Math.floor(30.6001*e);return n<=0&&n--,this.newDate(n,l,s)}}),M.calendars.julian=i},65616:function(Q,U,t){var M=t(38700),E=t(50896);function i(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(v){return this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),!1},formatYear:function(v){var d=this._validate(v,this.minMonth,this.minDay,M.local.invalidYear);v=d.year();var r=Math.floor(v/400);v=v%400,v+=v<0?400:0;var e=Math.floor(v/20);return r+"."+e+"."+v%20},forYear:function(v){if(v=v.split("."),v.length<3)throw"Invalid Mayan year";for(var d=0,r=0;r<v.length;r++){var e=parseInt(v[r],10);if(Math.abs(e)>19||r>0&&e<0)throw"Invalid Mayan year";d=d*20+e}return d},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),18},weekOfYear:function(v,d,r){return this._validate(v,d,r,M.local.invalidDate),0},daysInYear:function(v){return this._validate(v,this.minMonth,this.minDay,M.local.invalidYear),360},daysInMonth:function(v,d){return this._validate(v,d,this.minDay,M.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(v,d,r){var e=this._validate(v,d,r,M.local.invalidDate);return e.day()},weekDay:function(v,d,r){return this._validate(v,d,r,M.local.invalidDate),!0},extraInfo:function(v,d,r){var e=this._validate(v,d,r,M.local.invalidDate),l=e.toJD(),n=this._toHaab(l),s=this._toTzolkin(l);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(v){v-=this.jdEpoch;var d=C(v+8+17*20,365);return[Math.floor(d/20)+1,C(d,20)]},_toTzolkin:function(v){return v-=this.jdEpoch,[T(v+20,20),T(v+4,13)]},toJD:function(v,d,r){var e=this._validate(v,d,r,M.local.invalidDate);return e.day()+e.month()*20+e.year()*360+this.jdEpoch},fromJD:function(v){v=Math.floor(v)+.5-this.jdEpoch;var d=Math.floor(v/360);v=v%360,v+=v<0?360:0;var r=Math.floor(v/20),e=v%20;return this.newDate(d,r,e)}});function C(v,d){return v-d*Math.floor(v/d)}function T(v,d){return C(v-1,d)+1}M.calendars.mayan=i},30632:function(Q,U,t){var M=t(38700),E=t(50896);function i(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar;var C=M.instance("gregorian");E(i.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear||M.regionalOptions[""].invalidYear);return C.leapYear(v.year()+(v.year()<1?1:0)+1469)},weekOfYear:function(T,v,d){var r=this.newDate(T,v,d);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(T,v){var d=this._validate(T,v,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,v,d){return(this.dayOfWeek(T,v,d)||7)<6},toJD:function(e,v,d){var r=this._validate(e,v,d,M.local.invalidMonth),e=r.year();e<0&&e++;for(var l=r.day(),n=1;n<r.month();n++)l+=this.daysPerMonth[n-1];return l+C.toJD(e+1468,3,13)},fromJD:function(T){T=Math.floor(T+.5);for(var v=Math.floor((T-(this.jdEpoch-1))/366);T>=this.toJD(v+1,1,1);)v++;for(var d=T-Math.floor(this.toJD(v,1,1)+.5)+1,r=1;d>this.daysInMonth(v,r);)d-=this.daysInMonth(v,r),r++;return this.newDate(v,r,d)}}),M.calendars.nanakshahi=i},73040:function(Q,U,t){var M=t(38700),E=t(50896);function i(C){this.local=this.regionalOptions[C||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(C){return this.daysInYear(C)!==this.daysPerYear},weekOfYear:function(C,T,v){var d=this.newDate(C,T,v);return d.add(-d.dayOfWeek(),"d"),Math.floor((d.dayOfYear()-1)/7)+1},daysInYear:function(C){var T=this._validate(C,this.minMonth,this.minDay,M.local.invalidYear);if(C=T.year(),typeof this.NEPALI_CALENDAR_DATA[C]>"u")return this.daysPerYear;for(var v=0,d=this.minMonth;d<=12;d++)v+=this.NEPALI_CALENDAR_DATA[C][d];return v},daysInMonth:function(C,T){return C.year&&(T=C.month(),C=C.year()),this._validate(C,T,this.minDay,M.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[C]>"u"?this.daysPerMonth[T-1]:this.NEPALI_CALENDAR_DATA[C][T]},weekDay:function(C,T,v){return this.dayOfWeek(C,T,v)!==6},toJD:function(C,T,v){var d=this._validate(C,T,v,M.local.invalidDate);C=d.year(),T=d.month(),v=d.day();var r=M.instance(),e=0,l=T,n=C;this._createMissingCalendarData(C);var s=C-(l>9||l===9&&v>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(T!==9&&(e=v,l--);l!==9;)l<=0&&(l=12,n--),e+=this.NEPALI_CALENDAR_DATA[n][l],l--;return T===9?(e+=v-this.NEPALI_CALENDAR_DATA[n][0],e<0&&(e+=r.daysInYear(s))):e+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],r.newDate(s,1,1).add(e,"d").toJD()},fromJD:function(C){var T=M.instance(),v=T.fromJD(C),d=v.year(),r=v.dayOfYear(),e=d+56;this._createMissingCalendarData(e);for(var l=9,n=this.NEPALI_CALENDAR_DATA[e][0],s=this.NEPALI_CALENDAR_DATA[e][l]-n+1;r>s;)l++,l>12&&(l=1,e++),s+=this.NEPALI_CALENDAR_DATA[e][l];var o=this.NEPALI_CALENDAR_DATA[e][l]-(s-r);return this.newDate(e,l,o)},_createMissingCalendarData:function(C){var T=this.daysPerMonth.slice(0);T.unshift(17);for(var v=C-1;v<C+2;v++)typeof this.NEPALI_CALENDAR_DATA[v]>"u"&&(this.NEPALI_CALENDAR_DATA[v]=T)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),M.calendars.nepali=i},1104:function(Q,U,t){var M=t(38700),E=t(50896);function i(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return((v.year()-(v.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(T,v,d){var r=this.newDate(T,v,d);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(T,v){var d=this._validate(T,v,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===12&&this.leapYear(d.year())?1:0)},weekDay:function(T,v,d){return this.dayOfWeek(T,v,d)!==5},toJD:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate);T=r.year(),v=r.month(),d=r.day();var e=T-(T>=0?474:473),l=474+C(e,2820);return d+(v<=7?(v-1)*31:(v-1)*30+6)+Math.floor((l*682-110)/2816)+(l-1)*365+Math.floor(e/2820)*1029983+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var v=T-this.toJD(475,1,1),d=Math.floor(v/1029983),r=C(v,1029983),e=2820;if(r!==1029982){var l=Math.floor(r/366),n=C(r,366);e=Math.floor((2134*l+2816*n+2815)/1028522)+l+1}var s=e+2820*d+474;s=s<=0?s-1:s;var o=T-this.toJD(s,1,1)+1,p=o<=186?Math.ceil(o/31):Math.ceil((o-6)/30),b=T-this.toJD(s,p,1)+1;return this.newDate(s,p,b)}});function C(T,v){return T-v*Math.floor(T/v)}M.calendars.persian=i,M.calendars.jalali=i},51456:function(Q,U,t){var M=t(38700),E=t(50896),i=M.instance();function C(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}C.prototype=new M.baseCalendar,E(C.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(d){var v=this._validate(d,this.minMonth,this.minDay,M.local.invalidYear),d=this._t2gYear(v.year());return i.leapYear(d)},weekOfYear:function(e,v,d){var r=this._validate(e,this.minMonth,this.minDay,M.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(T,v){var d=this._validate(T,v,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,v,d){return(this.dayOfWeek(T,v,d)||7)<6},toJD:function(e,v,d){var r=this._validate(e,v,d,M.local.invalidDate),e=this._t2gYear(r.year());return i.toJD(e,r.month(),r.day())},fromJD:function(T){var v=i.fromJD(T),d=this._g2tYear(v.year());return this.newDate(d,v.month(),v.day())},_t2gYear:function(T){return T+this.yearsOffset+(T>=-this.yearsOffset&&T<=-1?1:0)},_g2tYear:function(T){return T-this.yearsOffset-(T>=1&&T<=this.yearsOffset?1:0)}}),M.calendars.taiwan=C},4592:function(Q,U,t){var M=t(38700),E=t(50896),i=M.instance();function C(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}C.prototype=new M.baseCalendar,E(C.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(d){var v=this._validate(d,this.minMonth,this.minDay,M.local.invalidYear),d=this._t2gYear(v.year());return i.leapYear(d)},weekOfYear:function(e,v,d){var r=this._validate(e,this.minMonth,this.minDay,M.local.invalidYear),e=this._t2gYear(r.year());return i.weekOfYear(e,r.month(),r.day())},daysInMonth:function(T,v){var d=this._validate(T,v,this.minDay,M.local.invalidMonth);return this.daysPerMonth[d.month()-1]+(d.month()===2&&this.leapYear(d.year())?1:0)},weekDay:function(T,v,d){return(this.dayOfWeek(T,v,d)||7)<6},toJD:function(e,v,d){var r=this._validate(e,v,d,M.local.invalidDate),e=this._t2gYear(r.year());return i.toJD(e,r.month(),r.day())},fromJD:function(T){var v=i.fromJD(T),d=this._g2tYear(v.year());return this.newDate(d,v.month(),v.day())},_t2gYear:function(T){return T-this.yearsOffset-(T>=1&&T<=this.yearsOffset?1:0)},_g2tYear:function(T){return T+this.yearsOffset+(T>=-this.yearsOffset&&T<=-1?1:0)}}),M.calendars.thai=C},45348:function(Q,U,t){var M=t(38700),E=t(50896);function i(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}i.prototype=new M.baseCalendar,E(i.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(T){var v=this._validate(T,this.minMonth,this.minDay,M.local.invalidYear);return this.daysInYear(v.year())===355},weekOfYear:function(T,v,d){var r=this.newDate(T,v,d);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(T){for(var v=0,d=1;d<=12;d++)v+=this.daysInMonth(T,d);return v},daysInMonth:function(T,v){for(var d=this._validate(T,v,this.minDay,M.local.invalidMonth),r=d.toJD()-24e5+.5,e=0,l=0;l<C.length;l++){if(C[l]>r)return C[e]-C[e-1];e++}return 30},weekDay:function(T,v,d){return this.dayOfWeek(T,v,d)!==5},toJD:function(T,v,d){var r=this._validate(T,v,d,M.local.invalidDate),e=12*(r.year()-1)+r.month()-15292,l=r.day()+C[e-1]-1;return l+24e5-.5},fromJD:function(T){for(var v=T-24e5+.5,d=0,r=0;r<C.length&&!(C[r]>v);r++)d++;var e=d+15292,l=Math.floor((e-1)/12),n=l+1,s=e-12*l,o=v-C[d-1]+1;return this.newDate(n,s,o)},isValid:function(T,v,d){var r=M.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(T=T.year!=null?T.year:T,r=T>=1276&&T<=1500),r},_validate:function(T,v,d,r){var e=M.baseCalendar.prototype._validate.apply(this,arguments);if(e.year<1276||e.year>1500)throw r.replace(/\{0\}/,this.local.name);return e}}),M.calendars.ummalqura=i;var C=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(Q,U,t){var M=t(50896);function E(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}M(E.prototype,{instance:function(r,e){r=(r||"gregorian").toLowerCase(),e=e||"";var l=this._localCals[r+"-"+e];if(!l&&this.calendars[r]&&(l=new this.calendars[r](e),this._localCals[r+"-"+e]=l),!l)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return l},newDate:function(r,e,l,n,s){return n=(r!=null&&r.year?r.calendar():typeof n=="string"?this.instance(n,s):n)||this.instance(),n.newDate(r,e,l)},substituteDigits:function(r){return function(e){return(e+"").replace(/[0-9]/g,function(l){return r[l]})}},substituteChineseDigits:function(r,e){return function(l){for(var n="",s=0;l>0;){var o=l%10;n=(o===0?"":r[o]+e[s])+n,s++,l=Math.floor(l/10)}return n.indexOf(r[1]+e[1])===0&&(n=n.substr(1)),n||r[0]}}});function i(r,e,l,n){if(this._calendar=r,this._year=e,this._month=l,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function C(r,e){return r=""+r,"000000".substring(0,e-r.length)+r}M(i.prototype,{newDate:function(r,e,l){return this._calendar.newDate(r??this,e,l)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,e,l){if(!this._calendar.isValid(r,e,l))throw(d.local.invalidDate||d.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=e,this._day=l,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,e){return this._calendar.add(this,r,e)},set:function(r,e){return this._calendar.set(this,r,e)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var e=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return e===0?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+C(Math.abs(this.year()),4)+"-"+C(this.month(),2)+"-"+C(this.day(),2)}});function T(){this.shortYearCutoff="+10"}M(T.prototype,{_validateLevel:0,newDate:function(r,e,l){return r==null?this.today():(r.year&&(this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate),l=r.day(),e=r.month(),r=r.year()),new i(this,r,e,l))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var e=this._validate(r,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return e.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var e=this._validate(r,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+C(Math.abs(e.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),12},monthOfYear:function(r,e){var l=this._validate(r,e,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return(l.month()+this.monthsInYear(l)-this.firstMonth)%this.monthsInYear(l)+this.minMonth},fromMonthOfYear:function(r,e){var l=(e+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,l,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth),l},daysInYear:function(r){var e=this._validate(r,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(r,e,l){var n=this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,e,l){var n=this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(r,e,l){return this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate),{}},add:function(r,e,l){return this._validate(r,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,e,l),e,l)},_add:function(r,e,l){if(this._validateLevel++,l==="d"||l==="w"){var n=r.toJD()+e*(l==="w"?this.daysInWeek():1),s=r.calendar().fromJD(n);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var o=r.year()+(l==="y"?e:0),p=r.monthOfYear()+(l==="m"?e:0),s=r.day(),b=function(a){for(;p<a.minMonth;)o--,p+=a.monthsInYear(o);for(var c=a.monthsInYear(o);p>c-1+a.minMonth;)o++,p-=c,c=a.monthsInYear(o)};l==="y"?(r.month()!==this.fromMonthOfYear(o,p)&&(p=this.newDate(o,r.month(),this.minDay).monthOfYear()),p=Math.min(p,this.monthsInYear(o)),s=Math.min(s,this.daysInMonth(o,this.fromMonthOfYear(o,p)))):l==="m"&&(b(this),s=Math.min(s,this.daysInMonth(o,this.fromMonthOfYear(o,p))));var h=[o,this.fromMonthOfYear(o,p),s];return this._validateLevel--,h}catch(_){throw this._validateLevel--,_}},_correctAdd:function(r,e,l,n){if(!this.hasYearZero&&(n==="y"||n==="m")&&(e[0]===0||r.year()>0!=e[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],o=l<0?-1:1;e=this._add(r,l*s[0]+o*s[1],s[2])}return r.date(e[0],e[1],e[2])},set:function(r,e,l){this._validate(r,this.minMonth,this.minDay,d.local.invalidDate||d.regionalOptions[""].invalidDate);var n=l==="y"?e:r.year(),s=l==="m"?e:r.month(),o=l==="d"?e:r.day();return(l==="y"||l==="m")&&(o=Math.min(o,this.daysInMonth(n,s))),r.date(n,s,o)},isValid:function(r,e,l){this._validateLevel++;var n=this.hasYearZero||r!==0;if(n){var s=this.newDate(r,e,this.minDay);n=e>=this.minMonth&&e-this.minMonth<this.monthsInYear(s)&&l>=this.minDay&&l-this.minDay<this.daysInMonth(s)}return this._validateLevel--,n},toJSDate:function(r,e,l){var n=this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate);return d.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(r){return this.fromJD(d.instance().fromJSDate(r).toJD())},_validate:function(r,e,l,n){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(d.local.differentCalendars||d.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,e,l))throw n.replace(/\{0\}/,this.local.name);var s=this.newDate(r,e,l);return this._validateLevel--,s}catch(o){throw this._validateLevel--,o}}});function v(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}v.prototype=new T,M(v.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var e=this._validate(l,this.minMonth,this.minDay,d.local.invalidYear||d.regionalOptions[""].invalidYear),l=e.year()+(e.year()<0?1:0);return l%4===0&&(l%100!==0||l%400===0)},weekOfYear:function(r,e,l){var n=this.newDate(r,e,l);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(r,e){var l=this._validate(r,e,this.minDay,d.local.invalidMonth||d.regionalOptions[""].invalidMonth);return this.daysPerMonth[l.month()-1]+(l.month()===2&&this.leapYear(l.year())?1:0)},weekDay:function(r,e,l){return(this.dayOfWeek(r,e,l)||7)<6},toJD:function(r,e,l){var n=this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate);r=n.year(),e=n.month(),l=n.day(),r<0&&r++,e<3&&(e+=12,r--);var s=Math.floor(r/100),o=2-s+Math.floor(s/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(e+1))+l+o-1524.5},fromJD:function(r){var e=Math.floor(r+.5),l=Math.floor((e-186721625e-2)/36524.25);l=e+1+l-Math.floor(l/4);var n=l+1524,s=Math.floor((n-122.1)/365.25),o=Math.floor(365.25*s),p=Math.floor((n-o)/30.6001),b=n-o-Math.floor(p*30.6001),h=p-(p>13.5?13:1),_=s-(h>2.5?4716:4715);return _<=0&&_--,this.newDate(_,h,b)},toJSDate:function(r,e,l){var n=this._validate(r,e,l,d.local.invalidDate||d.regionalOptions[""].invalidDate),s=new Date(n.year(),n.month()-1,n.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var d=Q.exports=new E;d.cdate=i,d.baseCalendar=T,d.calendars.gregorian=v},15168:function(Q,U,t){var M=t(50896),E=t(38700);M(E.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),E.local=E.regionalOptions[""],M(E.cdate.prototype,{formatDate:function(i,C){return typeof i!="string"&&(C=i,i=""),this._calendar.formatDate(i||"",this,C)}}),M(E.baseCalendar.prototype,{UNIX_EPOCH:E.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:E.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(i,C,T){if(typeof i!="string"&&(T=C,C=i,i=""),!C)return"";if(C.calendar()!==this)throw E.local.invalidFormat||E.regionalOptions[""].invalidFormat;i=i||this.local.dateFormat,T=T||{};for(var v=T.dayNamesShort||this.local.dayNamesShort,d=T.dayNames||this.local.dayNames,r=T.monthNumbers||this.local.monthNumbers,e=T.monthNamesShort||this.local.monthNamesShort,l=T.monthNames||this.local.monthNames,n=T.calculateWeek||this.local.calculateWeek,s=function(y,A){for(var L=1;k+L<i.length&&i.charAt(k+L)===y;)L++;return k+=L-1,Math.floor(L/(A||1))>1},o=function(y,A,L,u){var m=""+A;if(s(y,u))for(;m.length<L;)m="0"+m;return m},p=function(y,A,L,u){return s(y)?u[A]:L[A]},b=this,h=function(y){return typeof r=="function"?r.call(b,y,s("m")):c(o("m",y.month(),2))},_=function(y,A){return A?typeof l=="function"?l.call(b,y):l[y.month()-b.minMonth]:typeof e=="function"?e.call(b,y):e[y.month()-b.minMonth]},a=this.local.digits,c=function(y){return T.localNumbers&&a?a(y):y},f="",x=!1,k=0;k<i.length;k++)if(x)i.charAt(k)==="'"&&!s("'")?x=!1:f+=i.charAt(k);else switch(i.charAt(k)){case"d":f+=c(o("d",C.day(),2));break;case"D":f+=p("D",C.dayOfWeek(),v,d);break;case"o":f+=o("o",C.dayOfYear(),3);break;case"w":f+=o("w",C.weekOfYear(),2);break;case"m":f+=h(C);break;case"M":f+=_(C,s("M"));break;case"y":f+=s("y",2)?C.year():(C.year()%100<10?"0":"")+C.year()%100;break;case"Y":s("Y",2),f+=C.formatYear();break;case"J":f+=C.toJD();break;case"@":f+=(C.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":f+=(C.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?f+="'":x=!0;break;default:f+=i.charAt(k)}return f},parseDate:function(i,C,T){if(C==null)throw E.local.invalidArguments||E.regionalOptions[""].invalidArguments;if(C=typeof C=="object"?C.toString():C+"",C==="")return null;i=i||this.local.dateFormat,T=T||{};var v=T.shortYearCutoff||this.shortYearCutoff;v=typeof v!="string"?v:this.today().year()%100+parseInt(v,10);for(var d=T.dayNamesShort||this.local.dayNamesShort,r=T.dayNames||this.local.dayNames,e=T.parseMonth||this.local.parseMonth,l=T.monthNumbers||this.local.monthNumbers,n=T.monthNamesShort||this.local.monthNamesShort,s=T.monthNames||this.local.monthNames,o=-1,p=-1,b=-1,h=-1,_=-1,a=!1,c=!1,f=function(O,D){for(var P=1;S+P<i.length&&i.charAt(S+P)===O;)P++;return S+=P-1,Math.floor(P/(D||1))>1},x=function(O,D){var P=f(O,D),F=[2,3,P?4:2,P?4:2,10,11,20]["oyYJ@!".indexOf(O)+1],R=new RegExp("^-?\\d{1,"+F+"}"),B=C.substring(m).match(R);if(!B)throw(E.local.missingNumberAt||E.regionalOptions[""].missingNumberAt).replace(/\{0\}/,m);return m+=B[0].length,parseInt(B[0],10)},k=this,y=function(){if(typeof l=="function"){f("m");var O=l.call(k,C.substring(m));return m+=O.length,O}return x("m")},A=function(O,D,P,F){for(var R=f(O,F)?P:D,B=0;B<R.length;B++)if(C.substr(m,R[B].length).toLowerCase()===R[B].toLowerCase())return m+=R[B].length,B+k.minMonth;throw(E.local.unknownNameAt||E.regionalOptions[""].unknownNameAt).replace(/\{0\}/,m)},L=function(){if(typeof s=="function"){var O=f("M")?s.call(k,C.substring(m)):n.call(k,C.substring(m));return m+=O.length,O}return A("M",n,s)},u=function(){if(C.charAt(m)!==i.charAt(S))throw(E.local.unexpectedLiteralAt||E.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,m);m++},m=0,S=0;S<i.length;S++)if(c)i.charAt(S)==="'"&&!f("'")?c=!1:u();else switch(i.charAt(S)){case"d":h=x("d");break;case"D":A("D",d,r);break;case"o":_=x("o");break;case"w":x("w");break;case"m":b=y();break;case"M":b=L();break;case"y":var w=S;a=!f("y",2),S=w,p=x("y",2);break;case"Y":p=x("Y",2);break;case"J":o=x("J")+.5,C.charAt(m)==="."&&(m++,x("J"));break;case"@":o=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":o=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":m=C.length;break;case"'":f("'")?u():c=!0;break;default:u()}if(m<C.length)throw E.local.unexpectedText||E.regionalOptions[""].unexpectedText;if(p===-1?p=this.today().year():p<100&&a&&(p+=v===-1?1900:this.today().year()-this.today().year()%100-(p<=v?0:100)),typeof b=="string"&&(b=e.call(this,p,b)),_>-1){b=1,h=_;for(var I=this.daysInMonth(p,b);h>I;I=this.daysInMonth(p,b))b++,h-=I}return o>-1?this.fromJD(o):this.newDate(p,b,h)},determineDate:function(i,C,T,v,d){T&&typeof T!="object"&&(d=v,v=T,T=null),typeof v!="string"&&(d=v,v="");var r=this,e=function(l){try{return r.parseDate(v,l,d)}catch{}l=l.toLowerCase();for(var n=(l.match(/^c/)&&T?T.newDate():null)||r.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,o=s.exec(l);o;)n.add(parseInt(o[1],10),o[2]||"d"),o=s.exec(l);return n};return C=C?C.newDate():null,i=i==null?C:typeof i=="string"?e(i):typeof i=="number"?isNaN(i)||i===1/0||i===-1/0?C:r.today().add(i,"d"):r.newDate(i),i}})},21576:function(){},19768:function(){},63436:function(Q,U,t){var M=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],E=typeof globalThis>"u"?t.g:globalThis;Q.exports=function(){for(var i=[],C=0;C<M.length;C++)typeof E[M[C]]=="function"&&(i[i.length]=M[C]);return i}},67756:function(Q,U,t){t.d(U,{qy:function(){return mt},Gz:function(){return ot}});function M(vt,At,Ot){vt.prototype=At.prototype=Ot,Ot.constructor=vt}function E(vt,At){var Ot=Object.create(vt.prototype);for(var It in At)Ot[It]=At[It];return Ot}function i(){}var C=.7,T=1/C,v="\\s*([+-]?\\d+)\\s*",d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\(".concat(v,",").concat(v,",").concat(v,"\\)$")),n=new RegExp("^rgb\\(".concat(r,",").concat(r,",").concat(r,"\\)$")),s=new RegExp("^rgba\\(".concat(v,",").concat(v,",").concat(v,",").concat(d,"\\)$")),o=new RegExp("^rgba\\(".concat(r,",").concat(r,",").concat(r,",").concat(d,"\\)$")),p=new RegExp("^hsl\\(".concat(d,",").concat(r,",").concat(r,"\\)$")),b=new RegExp("^hsla\\(".concat(d,",").concat(r,",").concat(r,",").concat(d,"\\)$")),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};M(i,x,{copy:function(vt){return Object.assign(new this.constructor,this,vt)},displayable:function(){return this.rgb().displayable()},hex:_,formatHex:_,formatHex8:a,formatHsl:c,formatRgb:f,toString:f});function _(){return this.rgb().formatHex()}function a(){return this.rgb().formatHex8()}function c(){return F(this).formatHsl()}function f(){return this.rgb().formatRgb()}function x(vt){var At,Ot;return vt=(vt+"").trim().toLowerCase(),(At=e.exec(vt))?(Ot=At[1].length,At=parseInt(At[1],16),Ot===6?k(At):Ot===3?new u(At>>8&15|At>>4&240,At>>4&15|At&240,(At&15)<<4|At&15,1):Ot===8?y(At>>24&255,At>>16&255,At>>8&255,(At&255)/255):Ot===4?y(At>>12&15|At>>8&240,At>>8&15|At>>4&240,At>>4&15|At&240,((At&15)<<4|At&15)/255):null):(At=l.exec(vt))?new u(At[1],At[2],At[3],1):(At=n.exec(vt))?new u(At[1]*255/100,At[2]*255/100,At[3]*255/100,1):(At=s.exec(vt))?y(At[1],At[2],At[3],At[4]):(At=o.exec(vt))?y(At[1]*255/100,At[2]*255/100,At[3]*255/100,At[4]):(At=p.exec(vt))?P(At[1],At[2]/100,At[3]/100,1):(At=b.exec(vt))?P(At[1],At[2]/100,At[3]/100,At[4]):h.hasOwnProperty(vt)?k(h[vt]):vt==="transparent"?new u(NaN,NaN,NaN,0):null}function k(vt){return new u(vt>>16&255,vt>>8&255,vt&255,1)}function y(vt,At,Ot,It){return It<=0&&(vt=At=Ot=NaN),new u(vt,At,Ot,It)}function A(vt){return vt instanceof i||(vt=x(vt)),vt?(vt=vt.rgb(),new u(vt.r,vt.g,vt.b,vt.opacity)):new u}function L(vt,At,Ot,It){return arguments.length===1?A(vt):new u(vt,At,Ot,It??1)}function u(vt,At,Ot,It){this.r=+vt,this.g=+At,this.b=+Ot,this.opacity=+It}M(u,L,E(i,{brighter:function(vt){return vt=vt==null?T:Math.pow(T,vt),new u(this.r*vt,this.g*vt,this.b*vt,this.opacity)},darker:function(vt){return vt=vt==null?C:Math.pow(C,vt),new u(this.r*vt,this.g*vt,this.b*vt,this.opacity)},rgb:function(){return this},clamp:function(){return new u(O(this.r),O(this.g),O(this.b),I(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m,formatHex:m,formatHex8:S,formatRgb:w,toString:w}));function m(){return"#".concat(D(this.r)).concat(D(this.g)).concat(D(this.b))}function S(){return"#".concat(D(this.r)).concat(D(this.g)).concat(D(this.b)).concat(D((isNaN(this.opacity)?1:this.opacity)*255))}function w(){var vt=I(this.opacity);return"".concat(vt===1?"rgb(":"rgba(").concat(O(this.r),", ").concat(O(this.g),", ").concat(O(this.b)).concat(vt===1?")":", ".concat(vt,")"))}function I(vt){return isNaN(vt)?1:Math.max(0,Math.min(1,vt))}function O(vt){return Math.max(0,Math.min(255,Math.round(vt)||0))}function D(vt){return vt=O(vt),(vt<16?"0":"")+vt.toString(16)}function P(vt,At,Ot,It){return It<=0?vt=At=Ot=NaN:Ot<=0||Ot>=1?vt=At=NaN:At<=0&&(vt=NaN),new B(vt,At,Ot,It)}function F(vt){if(vt instanceof B)return new B(vt.h,vt.s,vt.l,vt.opacity);if(vt instanceof i||(vt=x(vt)),!vt)return new B;if(vt instanceof B)return vt;vt=vt.rgb();var At=vt.r/255,Ot=vt.g/255,It=vt.b/255,St=Math.min(At,Ot,It),Bt=Math.max(At,Ot,It),re=NaN,Yt=Bt-St,he=(Bt+St)/2;return Yt?(At===Bt?re=(Ot-It)/Yt+(Ot<It)*6:Ot===Bt?re=(It-At)/Yt+2:re=(At-Ot)/Yt+4,Yt/=he<.5?Bt+St:2-Bt-St,re*=60):Yt=he>0&&he<1?0:re,new B(re,Yt,he,vt.opacity)}function R(vt,At,Ot,It){return arguments.length===1?F(vt):new B(vt,At,Ot,It??1)}function B(vt,At,Ot,It){this.h=+vt,this.s=+At,this.l=+Ot,this.opacity=+It}M(B,R,E(i,{brighter:function(vt){return vt=vt==null?T:Math.pow(T,vt),new B(this.h,this.s,this.l*vt,this.opacity)},darker:function(vt){return vt=vt==null?C:Math.pow(C,vt),new B(this.h,this.s,this.l*vt,this.opacity)},rgb:function(){var vt=this.h%360+(this.h<0)*360,At=isNaN(vt)||isNaN(this.s)?0:this.s,Ot=this.l,It=Ot+(Ot<.5?Ot:1-Ot)*At,St=2*Ot-It;return new u(X(vt>=240?vt-240:vt+120,St,It),X(vt,St,It),X(vt<120?vt+240:vt-120,St,It),this.opacity)},clamp:function(){return new B(N(this.h),G(this.s),G(this.l),I(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var vt=I(this.opacity);return"".concat(vt===1?"hsl(":"hsla(").concat(N(this.h),", ").concat(G(this.s)*100,"%, ").concat(G(this.l)*100,"%").concat(vt===1?")":", ".concat(vt,")"))}}));function N(vt){return vt=(vt||0)%360,vt<0?vt+360:vt}function G(vt){return Math.max(0,Math.min(1,vt||0))}function X(vt,At,Ot){return(vt<60?At+(Ot-At)*vt/60:vt<180?Ot:vt<240?At+(Ot-At)*(240-vt)/60:At)*255}var J=function(vt){return function(){return vt}};function it(vt,At){return function(Ot){return vt+Ot*At}}function nt(vt,At,Ot){return vt=Math.pow(vt,Ot),At=Math.pow(At,Ot)-vt,Ot=1/Ot,function(It){return Math.pow(vt+It*At,Ot)}}function q(vt){return(vt=+vt)==1?Z:function(At,Ot){return Ot-At?nt(At,Ot,vt):J(isNaN(At)?Ot:At)}}function Z(vt,At){var Ot=At-vt;return Ot?it(vt,Ot):J(isNaN(vt)?At:vt)}var $=function vt(At){var Ot=q(At);function It(St,Bt){var re=Ot((St=L(St)).r,(Bt=L(Bt)).r),Yt=Ot(St.g,Bt.g),he=Ot(St.b,Bt.b),Zt=Z(St.opacity,Bt.opacity);return function(ae){return St.r=re(ae),St.g=Yt(ae),St.b=he(ae),St.opacity=Zt(ae),St+""}}return It.gamma=vt,It}(1);function V(vt,At){var Ot=At?At.length:0,It=vt?Math.min(Ot,vt.length):0,St=new Array(It),Bt=new Array(Ot),re;for(re=0;re<It;++re)St[re]=mt(vt[re],At[re]);for(;re<Ot;++re)Bt[re]=At[re];return function(Yt){for(re=0;re<It;++re)Bt[re]=St[re](Yt);return Bt}}function rt(vt,At){var Ot=new Date;return vt=+vt,At=+At,function(It){return Ot.setTime(vt*(1-It)+At*It),Ot}}function ot(vt,At){return vt=+vt,At=+At,function(Ot){return vt*(1-Ot)+At*Ot}}function H(vt){"@babel/helpers - typeof";return H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},H(vt)}function Y(vt,At){var Ot={},It={},St;(vt===null||H(vt)!=="object")&&(vt={}),(At===null||H(At)!=="object")&&(At={});for(St in At)St in vt?Ot[St]=mt(vt[St],At[St]):It[St]=At[St];return function(Bt){for(St in Ot)It[St]=Ot[St](Bt);return It}}var at=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,et=new RegExp(at.source,"g");function ct(vt){return function(){return vt}}function ft(vt){return function(At){return vt(At)+""}}function yt(vt,At){var Ot=at.lastIndex=et.lastIndex=0,It,St,Bt,re=-1,Yt=[],he=[];for(vt=vt+"",At=At+"";(It=at.exec(vt))&&(St=et.exec(At));)(Bt=St.index)>Ot&&(Bt=At.slice(Ot,Bt),Yt[re]?Yt[re]+=Bt:Yt[++re]=Bt),(It=It[0])===(St=St[0])?Yt[re]?Yt[re]+=St:Yt[++re]=St:(Yt[++re]=null,he.push({i:re,x:ot(It,St)})),Ot=et.lastIndex;return Ot<At.length&&(Bt=At.slice(Ot),Yt[re]?Yt[re]+=Bt:Yt[++re]=Bt),Yt.length<2?he[0]?ft(he[0].x):ct(At):(At=he.length,function(Zt){for(var ae=0,oe;ae<At;++ae)Yt[(oe=he[ae]).i]=oe.x(Zt);return Yt.join("")})}function xt(vt,At){At||(At=[]);var Ot=vt?Math.min(At.length,vt.length):0,It=At.slice(),St;return function(Bt){for(St=0;St<Ot;++St)It[St]=vt[St]*(1-Bt)+At[St]*Bt;return It}}function Ct(vt){return ArrayBuffer.isView(vt)&&!(vt instanceof DataView)}function gt(vt){"@babel/helpers - typeof";return gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},gt(vt)}function mt(vt,At){var Ot=gt(At),It;return At==null||Ot==="boolean"?J(At):(Ot==="number"?ot:Ot==="string"?(It=x(At))?(At=It,$):yt:At instanceof x?$:At instanceof Date?rt:Ct(At)?xt:Array.isArray(At)?V:typeof At.valueOf!="function"&&typeof At.toString!="function"||isNaN(At)?Y:ot)(vt,At)}},30584:function(Q){Q.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(Q){Q.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(Q){Q.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(Q){Q.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(Q){Q.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(Q){Q.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},xf={};function xl(Q){var U=xf[Q];if(U!==void 0)return U.exports;var t=xf[Q]={exports:{}};return Th[Q].call(t.exports,t,t.exports,xl),t.exports}(function(){xl.n=function(Q){var U=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return xl.d(U,{a:U}),U}})(),function(){xl.d=function(Q,U){for(var t in U)xl.o(U,t)&&!xl.o(Q,t)&&Object.defineProperty(Q,t,{enumerable:!0,get:U[t]})}}(),function(){xl.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){xl.o=function(Q,U){return Object.prototype.hasOwnProperty.call(Q,U)}}(),function(){xl.r=function(Q){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})}}();var Ip=xl(13792);return Ip}()})})(Pp);var F1=Pp.exports,D1=z1(F1);export{D1 as default};
