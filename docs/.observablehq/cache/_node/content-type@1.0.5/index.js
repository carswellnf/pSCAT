var u={},p=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,c=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,s=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,d=/\\([\u000b\u0020-\u00ff])/g,w=/([\\"])/g,y=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,h=u.format=g,m=u.parse=l;function g(r){if(!r||typeof r!="object")throw new TypeError("argument obj is required");var e=r.parameters,t=r.type;if(!t||!y.test(t))throw new TypeError("invalid type");var n=t;if(e&&typeof e=="object")for(var o,f=Object.keys(e).sort(),a=0;a<f.length;a++){if(o=f[a],!s.test(o))throw new TypeError("invalid parameter name");n+="; "+o+"="+b(e[o])}return n}function l(r){if(!r)throw new TypeError("argument string is required");var e=typeof r=="object"?v(r):r;if(typeof e!="string")throw new TypeError("argument string is required to be a string");var t=e.indexOf(";"),n=t!==-1?e.slice(0,t).trim():e.trim();if(!y.test(n))throw new TypeError("invalid media type");var o=new T(n.toLowerCase());if(t!==-1){var f,a,i;for(p.lastIndex=t;a=p.exec(e);){if(a.index!==t)throw new TypeError("invalid parameter format");t+=a[0].length,f=a[1].toLowerCase(),i=a[2],i.charCodeAt(0)===34&&(i=i.slice(1,-1),i.indexOf("\\")!==-1&&(i=i.replace(d,"$1"))),o.parameters[f]=i}if(t!==e.length)throw new TypeError("invalid parameter format")}return o}function v(r){var e;if(typeof r.getHeader=="function"?e=r.getHeader("content-type"):typeof r.headers=="object"&&(e=r.headers&&r.headers["content-type"]),typeof e!="string")throw new TypeError("content-type header is missing from object");return e}function b(r){var e=String(r);if(s.test(e))return e;if(e.length>0&&!c.test(e))throw new TypeError("invalid parameter value");return'"'+e.replace(w,"\\$1")+'"'}function T(r){this.parameters=Object.create(null),this.type=r}export{u as default,h as format,m as parse};
