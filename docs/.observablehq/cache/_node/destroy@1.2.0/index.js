import*as c from"events";import*as a from"fs";import*as u from"stream";import*as d from"zlib";function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var o=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};o.prototype=t.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var f=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(o,n,f.get?f:{enumerable:!0,get:function(){return e[n]}})}),o}var p=i(c),y=i(a),m=i(u),_=i(d),g=p.EventEmitter,v=y.ReadStream,s=m,r=_,b=h;function h(e,t){return z(e)?O(e):P(e)?E(e):D(e)&&e.destroy(),w(e)&&t&&(e.removeAllListeners("error"),e.addListener("error",R)),e}function O(e){e.destroy(),typeof e.close=="function"&&e.on("open",A)}function j(e){if(e._hadError===!0){var t=e._binding===null?"_binding":"_handle";e[t]={close:function(){this[t]=null}}}e.close()}function E(e){typeof e.destroy=="function"?e._binding?(e.destroy(),e._processing?(e._needDrain=!0,e.once("drain",M)):e._binding.clear()):e._destroy&&e._destroy!==s.Transform.prototype._destroy?e.destroy():e._destroy&&typeof e.close=="function"?(e.destroyed=!0,e.close()):e.destroy():typeof e.close=="function"&&j(e)}function D(e){return e instanceof s&&typeof e.destroy=="function"}function w(e){return e instanceof g}function z(e){return e instanceof v}function P(e){return e instanceof r.Gzip||e instanceof r.Gunzip||e instanceof r.Deflate||e instanceof r.DeflateRaw||e instanceof r.Inflate||e instanceof r.InflateRaw||e instanceof r.Unzip}function R(){}function M(){this._binding.clear()}function A(){typeof this.fd=="number"&&this.close()}var G=l(b);export{G as default};
